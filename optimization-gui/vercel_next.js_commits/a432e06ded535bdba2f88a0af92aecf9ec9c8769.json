{
    "author": "devjiwonchoi",
    "message": "[Breaking] Remove deprecated built-in AMP (#84312)\n\nThis PR removes the deprecated built-in AMP support. Will follow up with\ncleaning up the examples, docs, and codemods.",
    "sha": "a432e06ded535bdba2f88a0af92aecf9ec9c8769",
    "files": [
        {
            "sha": "0e3c720bc136be9ef0f6b82c2ff68fa3c16ffe74",
            "filename": ".eslintignore",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/.eslintignore",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/.eslintignore",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.eslintignore?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -45,11 +45,8 @@ examples/with-typescript-graphql/lib/gql/\n test/development/basic/hmr/components/parse-error.js\n test/development/mcp-server/fixtures/default-template/app/build-error/page.tsx\n packages/next-swc/docs/assets/**/*\n-test/lib/amp-validator-wasm.js\n-test/production/pages-dir/production/fixture/amp-validator-wasm.js\n test/e2e/app-dir/server-source-maps/fixtures/default/internal-pkg/sourcemapped.js\n test/e2e/app-dir/server-source-maps/fixtures/default/external-pkg/sourcemapped.js\n-test/e2e/async-modules/amp-validator-wasm.js\n test/development/next-lint-eslint-formatter-compact/**/*.js\n test/e2e/app-dir/app-external/app/mixed/import/mixed-mod.mjs\n "
        },
        {
            "sha": "53a38838ed32af5975d31cb81154df34cac6a71e",
            "filename": ".prettierignore",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/.prettierignore",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/.prettierignore",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.prettierignore?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -48,13 +48,10 @@ bench/nested-deps/components/**/*\n \n **/convex/_generated/**\n **/.tina/__generated__/**\n-test/lib/amp-validator-wasm.js\n-test/production/pages-dir/production/fixture/amp-validator-wasm.js\n test/e2e/app-dir/server-source-maps/fixtures/default/app/bad-sourcemap/page.js\n test/e2e/app-dir/server-source-maps/fixtures/default/internal-pkg/ignored.js\n test/e2e/app-dir/server-source-maps/fixtures/default/internal-pkg/sourcemapped.js\n test/e2e/app-dir/server-source-maps/fixtures/default/external-pkg/sourcemapped.js\n-test/e2e/async-modules/amp-validator-wasm.js\n test/development/mcp-server/fixtures/default-template/app/build-error/page.tsx\n \n # turbopack crates, disable for some tests and precompiled dependencies."
        },
        {
            "sha": "ee576ff6b6d5a7189200c287bff26fdd26c66e46",
            "filename": "crates/next-api/src/next_server_nft.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/crates%2Fnext-api%2Fsrc%2Fnext_server_nft.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/crates%2Fnext-api%2Fsrc%2Fnext_server_nft.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fnext_server_nft.rs?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -302,8 +302,6 @@ impl ServerNftJsonAsset {\n             \"**/next/dist/server/lib/route-resolver*\",\n             \"**/next/dist/compiled/semver/semver/**/*.js\",\n             \"**/next/dist/compiled/jest-worker/**/*\",\n-            // Turbopack doesn't support AMP\n-            \"**/next/dist/compiled/@ampproject/toolbox-optimizer/**/*\",\n             // -- The following were added for Turbopack specifically --\n             // client/components/use-action-queue.ts has a process.env.NODE_ENV guard, but we can't set that due to React: https://github.com/vercel/next.js/pull/75254\n             \"**/next/dist/next-devtools/userspace/use-app-dev-rendering-indicator.js\","
        },
        {
            "sha": "0cc9f3f2f0331d03563c41767a0283728f9c477d",
            "filename": "crates/next-build-test/nextConfig.json",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/crates%2Fnext-build-test%2FnextConfig.json",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/crates%2Fnext-build-test%2FnextConfig.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-build-test%2FnextConfig.json?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -43,9 +43,6 @@\n     \"maxInactiveAge\": 60000,\n     \"pagesBufferLength\": 5\n   },\n-  \"amp\": {\n-    \"canonicalBase\": \"\"\n-  },\n   \"basePath\": \"\",\n   \"sassOptions\": {},\n   \"trailingSlash\": false,"
        },
        {
            "sha": "9c102b9f6623a9e7083849444ce56cae3e20ad03",
            "filename": "crates/next-core/src/next_config.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 19,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_config.rs?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -135,8 +135,6 @@ pub struct NextConfig {\n \n     pub optimize_fonts: Option<bool>,\n \n-    // unsupported\n-    amp: AmpConfig,\n     clean_dist_dir: bool,\n     compress: bool,\n     eslint: EslintConfig,\n@@ -167,22 +165,6 @@ pub enum CrossOriginConfig {\n     UseCredentials,\n }\n \n-#[derive(\n-    Clone,\n-    Debug,\n-    Default,\n-    PartialEq,\n-    Serialize,\n-    Deserialize,\n-    TraceRawVcs,\n-    NonLocalValue,\n-    OperationValue,\n-)]\n-#[serde(rename_all = \"camelCase\")]\n-struct AmpConfig {\n-    canonical_base: Option<String>,\n-}\n-\n #[derive(\n     Clone,\n     Debug,\n@@ -827,7 +809,6 @@ pub struct ExperimentalConfig {\n     adjust_font_fallbacks: Option<bool>,\n     adjust_font_fallbacks_with_size_adjust: Option<bool>,\n     after: Option<bool>,\n-    amp: Option<serde_json::Value>,\n     app_document_preloading: Option<bool>,\n     cache_handlers: Option<FxIndexMap<RcStr, RcStr>>,\n     cache_life: Option<FxIndexMap<String, CacheLifeProfile>>,"
        },
        {
            "sha": "0c791ee63179e7c1594007f07d5da1797ca7c044",
            "filename": "crates/next-custom-transforms/src/chain_transforms.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/crates%2Fnext-custom-transforms%2Fsrc%2Fchain_transforms.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/crates%2Fnext-custom-transforms%2Fsrc%2Fchain_transforms.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Fchain_transforms.rs?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -40,9 +40,6 @@ pub struct TransformOptions {\n     #[serde(default)]\n     pub disable_next_ssg: bool,\n \n-    #[serde(default)]\n-    pub disable_page_config: bool,\n-\n     #[serde(default)]\n     pub pages_dir: Option<PathBuf>,\n \n@@ -252,7 +249,6 @@ where\n                 crate::transforms::next_ssg::next_ssg(eliminated_packages),\n                 !opts.disable_next_ssg,\n             ),\n-            crate::transforms::amp_attributes::amp_attributes(),\n             next_dynamic(\n                 opts.is_development,\n                 opts.is_server_compiler,\n@@ -272,10 +268,6 @@ where\n                 file.name.clone(),\n                 opts.pages_dir.clone().or_else(|| opts.app_dir.clone()),\n             ),\n-            Optional::new(\n-                crate::transforms::page_config::page_config(opts.is_development, opts.is_page_file),\n-                !opts.disable_page_config,\n-            ),\n             relay_plugin,\n             match &opts.remove_console {\n                 Some(config) if config.truthy() => Either::Left(remove_console::remove_console("
        },
        {
            "sha": "442e3ee92f48c87a527b86849cda647ae8c2e47b",
            "filename": "crates/next-custom-transforms/src/transforms/amp_attributes.rs",
            "status": "removed",
            "additions": 0,
            "deletions": 60,
            "changes": 60,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Famp_attributes.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Famp_attributes.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Famp_attributes.rs?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,60 +0,0 @@\n-use swc_core::ecma::{\n-    ast::{\n-        Ident, IdentName, JSXAttr, JSXAttrName, JSXAttrOrSpread, JSXElementName, JSXOpeningElement,\n-        Pass,\n-    },\n-    atoms::Atom,\n-    visit::{fold_pass, Fold},\n-};\n-\n-pub fn amp_attributes() -> impl Pass {\n-    fold_pass(AmpAttributePatcher::default())\n-}\n-\n-#[derive(Debug, Default)]\n-struct AmpAttributePatcher {}\n-\n-impl Fold for AmpAttributePatcher {\n-    fn fold_jsx_opening_element(&mut self, node: JSXOpeningElement) -> JSXOpeningElement {\n-        let JSXOpeningElement {\n-            name,\n-            mut attrs,\n-            span,\n-            self_closing,\n-            type_args,\n-        } = node;\n-        let n = name.clone();\n-\n-        if let JSXElementName::Ident(Ident { sym, .. }) = name {\n-            if sym.starts_with(\"amp-\") {\n-                for i in &mut attrs {\n-                    if let JSXAttrOrSpread::JSXAttr(JSXAttr {\n-                        name: JSXAttrName::Ident(IdentName { sym, span: s }),\n-                        span,\n-                        value,\n-                    }) = &i\n-                    {\n-                        if sym as &str == \"className\" {\n-                            *i = JSXAttrOrSpread::JSXAttr(JSXAttr {\n-                                name: JSXAttrName::Ident(IdentName {\n-                                    sym: Atom::from(\"class\"),\n-                                    span: *s,\n-                                }),\n-                                span: *span,\n-                                value: value.clone(),\n-                            })\n-                        }\n-                    }\n-                }\n-            }\n-        }\n-\n-        JSXOpeningElement {\n-            name: n,\n-            attrs,\n-            span,\n-            self_closing,\n-            type_args,\n-        }\n-    }\n-}"
        },
        {
            "sha": "287bfec0a24728d43656f00b167317fc7cbf3337",
            "filename": "crates/next-custom-transforms/src/transforms/mod.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fmod.rs?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -1,4 +1,3 @@\n-pub mod amp_attributes;\n pub mod cjs_finder;\n pub mod cjs_optimizer;\n pub mod debug_fn_name;"
        },
        {
            "sha": "da98feb2b263b7d2cf22a467ce743dc3b887515c",
            "filename": "crates/next-custom-transforms/src/transforms/page_config.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 31,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fpage_config.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fpage_config.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fpage_config.rs?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -15,14 +15,6 @@ pub fn page_config(is_development: bool, is_page_file: bool) -> impl Pass {\n     })\n }\n \n-pub fn page_config_test() -> impl Pass {\n-    fold_pass(PageConfig {\n-        in_test: true,\n-        is_page_file: true,\n-        ..Default::default()\n-    })\n-}\n-\n #[derive(Debug, Default)]\n struct PageConfig {\n     drop_bundle: bool,\n@@ -89,29 +81,7 @@ impl Fold for PageConfig {\n                                 if let PropOrSpread::Prop(prop) = prop {\n                                     if let Prop::KeyValue(kv) = &**prop {\n                                         match &kv.key {\n-                                            PropName::Ident(ident) => {\n-                                                if &ident.sym == \"amp\" {\n-                                                    if let Expr::Lit(Lit::Bool(Bool {\n-                                                        value,\n-                                                        ..\n-                                                    })) = &*kv.value\n-                                                    {\n-                                                        if *value && self.is_page_file {\n-                                                            self.drop_bundle = true;\n-                                                        }\n-                                                    } else if let Expr::Lit(Lit::Str(_)) =\n-                                                        &*kv.value\n-                                                    {\n-                                                        // Do not replace\n-                                                        // bundle\n-                                                    } else {\n-                                                        self.handle_error(\n-                                                            \"Invalid value found.\",\n-                                                            export.span,\n-                                                        );\n-                                                    }\n-                                                }\n-                                            }\n+                                            PropName::Ident(_) => {}\n                                             _ => {\n                                                 self.handle_error(\n                                                     \"Invalid property found.\","
        },
        {
            "sha": "21f85f29c0e2ba643abcb4741331c7e537a3b4d7",
            "filename": "crates/next-custom-transforms/tests/fixture.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 26,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/crates%2Fnext-custom-transforms%2Ftests%2Ffixture.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/crates%2Fnext-custom-transforms%2Ftests%2Ffixture.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture.rs?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -6,7 +6,6 @@ use std::{\n \n use bytes_str::BytesStr;\n use next_custom_transforms::transforms::{\n-    amp_attributes::amp_attributes,\n     cjs_optimizer::cjs_optimizer,\n     debug_fn_name::debug_fn_name,\n     dynamic::{next_dynamic, NextDynamicMode},\n@@ -15,7 +14,6 @@ use next_custom_transforms::transforms::{\n     next_ssg::next_ssg,\n     optimize_barrel::optimize_barrel,\n     optimize_server_react::{self, optimize_server_react},\n-    page_config::page_config_test,\n     pure::pure_magic,\n     react_server_components::server_components,\n     server_actions::{self, server_actions, ServerActionsMode},\n@@ -52,18 +50,6 @@ fn syntax() -> Syntax {\n     })\n }\n \n-#[fixture(\"tests/fixture/amp/**/input.js\")]\n-fn amp_attributes_fixture(input: PathBuf) {\n-    let output = input.parent().unwrap().join(\"output.js\");\n-    test_fixture(\n-        syntax(),\n-        &|_tr| amp_attributes(),\n-        &input,\n-        &output,\n-        Default::default(),\n-    );\n-}\n-\n #[fixture(\"tests/fixture/next-dynamic/**/input.js\")]\n fn next_dynamic_fixture(input: PathBuf) {\n     let output_dev = input.parent().unwrap().join(\"output-dev.js\");\n@@ -388,18 +374,6 @@ fn next_ssg_fixture(input: PathBuf) {\n     );\n }\n \n-#[fixture(\"tests/fixture/page-config/**/input.js\")]\n-fn page_config_fixture(input: PathBuf) {\n-    let output = input.parent().unwrap().join(\"output.js\");\n-    test_fixture(\n-        syntax(),\n-        &|_tr| page_config_test(),\n-        &input,\n-        &output,\n-        Default::default(),\n-    );\n-}\n-\n #[fixture(\"tests/fixture/relay/**/input.ts*\")]\n fn relay_no_artifact_dir_fixture(input: PathBuf) {\n     let output = input.parent().unwrap().join(\"output.js\");"
        },
        {
            "sha": "2cf35e282e20fbd34ffe72cd40bb0834931bf3d9",
            "filename": "crates/next-custom-transforms/tests/fixture/amp/amp-classname/input.js",
            "status": "removed",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Famp%2Famp-classname%2Finput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Famp%2Famp-classname%2Finput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Famp%2Famp-classname%2Finput.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,2 +0,0 @@\n-import React from 'react'\n-const comp = () => <amp-something className=\"something\" />"
        },
        {
            "sha": "12d1197a0a1412f091cbf399adf829d4f25a9698",
            "filename": "crates/next-custom-transforms/tests/fixture/amp/amp-classname/output.js",
            "status": "removed",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Famp%2Famp-classname%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Famp%2Famp-classname%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Famp%2Famp-classname%2Foutput.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,2 +0,0 @@\n-import React from 'react'\n-const comp = () => <amp-something class=\"something\" />"
        },
        {
            "sha": "10ae2de5ffd6c98e99775b5196750b323f4785e5",
            "filename": "crates/next-custom-transforms/tests/fixture/page-config/amp-hybrid/input.js",
            "status": "removed",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fpage-config%2Famp-hybrid%2Finput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fpage-config%2Famp-hybrid%2Finput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fpage-config%2Famp-hybrid%2Finput.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,7 +0,0 @@\n-export const config = { amp: 'hybrid' }\n-\n-function About(props) {\n-  return <h3>My AMP About Page!</h3>\n-}\n-\n-export default About"
        },
        {
            "sha": "f72661eee347f3d3d9ce0ebfeffe799ac4999788",
            "filename": "crates/next-custom-transforms/tests/fixture/page-config/amp-hybrid/output.js",
            "status": "removed",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fpage-config%2Famp-hybrid%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fpage-config%2Famp-hybrid%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fpage-config%2Famp-hybrid%2Foutput.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,7 +0,0 @@\n-export const config = {\n-    amp: 'hybrid'\n-};\n-function About(props) {\n-    return <h3 >My AMP About Page!</h3>;\n-}\n-export default About;"
        },
        {
            "sha": "57a656a02702c1ac573dcefe090a8d38e14816ca",
            "filename": "crates/next-custom-transforms/tests/fixture/page-config/amp-true/input.js",
            "status": "removed",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fpage-config%2Famp-true%2Finput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fpage-config%2Famp-true%2Finput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fpage-config%2Famp-true%2Finput.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,7 +0,0 @@\n-export const config = { amp: true }\n-\n-function About(props) {\n-  return <h3>My AMP About Page!</h3>\n-}\n-\n-export default About"
        },
        {
            "sha": "464d1bd2c66aee86850077bd4600d5147703aafd",
            "filename": "crates/next-custom-transforms/tests/fixture/page-config/amp-true/output.js",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fpage-config%2Famp-true%2Foutput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fpage-config%2Famp-true%2Foutput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffixture%2Fpage-config%2Famp-true%2Foutput.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1 +0,0 @@\n-const __NEXT_DROP_CLIENT_FILE__ = \"__NEXT_DROP_CLIENT_FILE__ mock_timestamp\";\n\\ No newline at end of file"
        },
        {
            "sha": "ee15bb939ff73fa62b68cc095711de88d18feb7e",
            "filename": "crates/next-custom-transforms/tests/full.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/crates%2Fnext-custom-transforms%2Ftests%2Ffull.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/crates%2Fnext-custom-transforms%2Ftests%2Ffull.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Ftests%2Ffull.rs?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -58,7 +58,6 @@ fn test(input: &Path, minify: bool) {\n                     ..Default::default()\n                 },\n                 disable_next_ssg: false,\n-                disable_page_config: false,\n                 pages_dir: None,\n                 is_page_file: false,\n                 is_development: true,"
        },
        {
            "sha": "bcefe2d27693fdfd8d19e15f2d1511bcd88ffd94",
            "filename": "package.json",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/package.json",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/package.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/package.json?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -338,7 +338,6 @@\n     \"patchedDependencies\": {\n       \"webpack-sources@3.2.3\": \"patches/webpack-sources@3.2.3.patch\",\n       \"stacktrace-parser@0.1.10\": \"patches/stacktrace-parser@0.1.10.patch\",\n-      \"@ampproject/toolbox-optimizer@2.8.3\": \"patches/@ampproject__toolbox-optimizer@2.8.3.patch\",\n       \"@types/node@20.17.6\": \"patches/@types__node@20.17.6.patch\",\n       \"taskr@1.1.0\": \"patches/taskr@1.1.0.patch\"\n     }"
        },
        {
            "sha": "bca40393c38dec85969e92d0dc5584a93262032c",
            "filename": "packages/next/amp.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Famp.d.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Famp.d.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Famp.d.ts?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1 +0,0 @@\n-export * from './dist/shared/lib/amp'"
        },
        {
            "sha": "9c3c257022d4b5488987e6abc96efca89b6cfb99",
            "filename": "packages/next/amp.js",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Famp.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Famp.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Famp.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1 +0,0 @@\n-module.exports = require('./dist/shared/lib/amp')"
        },
        {
            "sha": "93e225bbb32125b3143c5aef3a0c5785246ae1b5",
            "filename": "packages/next/index.d.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Findex.d.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Findex.d.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Findex.d.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -1,7 +1,6 @@\n /// <reference types=\"./types/global\" />\n /// <reference types=\"./types/compiled\" />\n /// <reference path=\"./dist/styled-jsx/types/index.d.ts\" />\n-/// <reference path=\"./amp.d.ts\" />\n /// <reference path=\"./app.d.ts\" />\n /// <reference path=\"./cache.d.ts\" />\n /// <reference path=\"./config.d.ts\" />"
        },
        {
            "sha": "90fa1448f499606ef605876e00ed459dc0d953b1",
            "filename": "packages/next/package.json",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fpackage.json?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -47,8 +47,6 @@\n     \"router.d.ts\",\n     \"jest.js\",\n     \"jest.d.ts\",\n-    \"amp.js\",\n-    \"amp.d.ts\",\n     \"og.js\",\n     \"og.d.ts\",\n     \"root-params.js\",\n@@ -134,7 +132,6 @@\n     \"sharp\": \"^0.34.4\"\n   },\n   \"devDependencies\": {\n-    \"@ampproject/toolbox-optimizer\": \"2.8.3\",\n     \"@babel/code-frame\": \"7.26.2\",\n     \"@babel/core\": \"7.26.10\",\n     \"@babel/eslint-parser\": \"7.24.6\",\n@@ -188,7 +185,6 @@\n     \"@swc/types\": \"0.1.7\",\n     \"@taskr/clear\": \"1.1.0\",\n     \"@taskr/esnext\": \"1.1.0\",\n-    \"@types/amphtml-validator\": \"1.0.0\",\n     \"@types/babel__code-frame\": \"7.0.6\",\n     \"@types/babel__core\": \"7.20.5\",\n     \"@types/babel__generator\": \"7.27.0\",\n@@ -226,7 +222,6 @@\n     \"@vercel/nft\": \"0.27.1\",\n     \"@vercel/turbopack-ecmascript-runtime\": \"*\",\n     \"acorn\": \"8.14.0\",\n-    \"amphtml-validator\": \"1.0.38\",\n     \"anser\": \"1.4.9\",\n     \"arg\": \"4.1.0\",\n     \"assert\": \"2.0.0\","
        },
        {
            "sha": "b76d00ebabc0664f6b797729eebce2170401b6c2",
            "filename": "packages/next/src/build/babel/plugins/amp-attributes.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 30,
            "changes": 30,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Fplugins%2Famp-attributes.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Fplugins%2Famp-attributes.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Fplugins%2Famp-attributes.ts?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,30 +0,0 @@\n-import type { NodePath, types, PluginObj } from 'next/dist/compiled/babel/core'\n-\n-export default function AmpAttributePatcher(): PluginObj {\n-  return {\n-    visitor: {\n-      JSXOpeningElement(path: NodePath<types.JSXOpeningElement>) {\n-        const openingElement = path.node\n-\n-        const { name, attributes } = openingElement\n-        if (!(name && name.type === 'JSXIdentifier')) {\n-          return\n-        }\n-\n-        if (!name.name.startsWith('amp-')) {\n-          return\n-        }\n-\n-        for (const attribute of attributes) {\n-          if (attribute.type !== 'JSXAttribute') {\n-            continue\n-          }\n-\n-          if (attribute.name.name === 'className') {\n-            attribute.name.name = 'class'\n-          }\n-        }\n-      },\n-    },\n-  }\n-}"
        },
        {
            "sha": "94e57ba8c1dc5af3c039dac6c96d6c8b72d4b328",
            "filename": "packages/next/src/build/babel/plugins/next-page-config.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 53,
            "changes": 53,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Fplugins%2Fnext-page-config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Fplugins%2Fnext-page-config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Fplugins%2Fnext-page-config.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -5,28 +5,9 @@ import type {\n   Visitor,\n   NodePath,\n } from 'next/dist/compiled/babel/core'\n-import type { PageConfig } from '../../../types'\n-import { STRING_LITERAL_DROP_BUNDLE } from '../../../shared/lib/constants'\n \n const CONFIG_KEY = 'config'\n \n-// replace program path with just a variable with the drop identifier\n-function replaceBundle(path: any, t: typeof BabelTypes): void {\n-  path.parentPath.replaceWith(\n-    t.program(\n-      [\n-        t.variableDeclaration('const', [\n-          t.variableDeclarator(\n-            t.identifier(STRING_LITERAL_DROP_BUNDLE),\n-            t.stringLiteral(`${STRING_LITERAL_DROP_BUNDLE} ${Date.now()}`)\n-          ),\n-        ]),\n-      ],\n-      []\n-    )\n-  )\n-}\n-\n function errorMessage(state: any, details: string): string {\n   const pageName =\n     (state.filename || '').split(state.cwd || '').pop() || 'unknown'\n@@ -84,7 +65,6 @@ export default function nextPageConfig({\n                   return\n                 }\n \n-                const config: PageConfig = {}\n                 const declarations: BabelTypes.VariableDeclarator[] = [\n                   ...((\n                     exportPath.node\n@@ -166,41 +146,8 @@ export default function nextPageConfig({\n                         )\n                       )\n                     }\n-                    const { name } = prop.key as BabelTypes.Identifier\n-                    if (BabelTypes.isIdentifier(prop.key, { name: 'amp' })) {\n-                      if (!BabelTypes.isObjectProperty(prop)) {\n-                        throw new Error(\n-                          errorMessage(\n-                            exportState,\n-                            `Invalid property \"${name}\"`\n-                          )\n-                        )\n-                      }\n-                      if (\n-                        !BabelTypes.isBooleanLiteral(prop.value) &&\n-                        !BabelTypes.isStringLiteral(prop.value)\n-                      ) {\n-                        throw new Error(\n-                          errorMessage(\n-                            exportState,\n-                            `Invalid value for \"${name}\"`\n-                          )\n-                        )\n-                      }\n-                      config.amp = prop.value.value as PageConfig['amp']\n-                    }\n                   }\n                 }\n-\n-                if (config.amp === true) {\n-                  if (!exportState.file?.opts?.caller.isDev) {\n-                    // don't replace bundle in development so HMR can track\n-                    // dependencies and trigger reload when they are changed\n-                    replaceBundle(exportPath, t)\n-                  }\n-                  exportState.bundleDropped = true\n-                  return\n-                }\n               },\n             },\n             state"
        },
        {
            "sha": "0edbc40dbc3a2ff70aadb61f61a014f1082155b8",
            "filename": "packages/next/src/build/babel/preset.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Fpreset.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Fpreset.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fbabel%2Fpreset.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -318,7 +318,6 @@ export default (\n           : (require('styled-jsx/babel') as typeof import('styled-jsx/babel')),\n         styledJsxOptions(options['styled-jsx']),\n       ],\n-      require('./plugins/amp-attributes') as typeof import('./plugins/amp-attributes'),\n       isProduction && [\n         require('next/dist/compiled/babel/plugin-transform-react-remove-prop-types') as typeof import('next/dist/compiled/babel/plugin-transform-react-remove-prop-types'),\n         {"
        },
        {
            "sha": "4786ff23de691a9a95033318bdb63967a43a6e51",
            "filename": "packages/next/src/build/collect-build-traces.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Fcollect-build-traces.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Fcollect-build-traces.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fcollect-build-traces.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -79,14 +79,12 @@ export async function collectBuildTraces({\n   edgeRuntimeRoutes,\n   staticPages,\n   nextBuildSpan = new Span({ name: 'build' }),\n-  hasSsrAmpPages,\n   buildTraceContext,\n   outputFileTracingRoot,\n }: {\n   dir: string\n   distDir: string\n   staticPages: string[]\n-  hasSsrAmpPages: boolean\n   outputFileTracingRoot: string\n   // pageInfos is serialized when this function runs in a worker.\n   edgeRuntimeRoutes: RoutesUsingEdgeRuntime\n@@ -233,10 +231,6 @@ export async function collectBuildTraces({\n             ]\n           : []),\n \n-        ...(!hasSsrAmpPages\n-          ? ['**/next/dist/compiled/@ampproject/toolbox-optimizer/**/*']\n-          : []),\n-\n         ...(isStandalone ? [] : TRACE_IGNORES),\n         ...additionalIgnores,\n       ]\n@@ -269,7 +263,6 @@ export async function collectBuildTraces({\n         // as otherwise all chunks are traced here and included for all pages\n         // whether they are needed or not\n         '**/.next/server/chunks/**',\n-        '**/next/dist/server/optimize-amp.js',\n         '**/next/dist/server/post-process.js',\n       ].filter(nonNullable)\n "
        },
        {
            "sha": "ccd03f221f8cfdc11f226c673b5910e3454e912d",
            "filename": "packages/next/src/build/entries.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Fentries.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Fentries.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fentries.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -29,7 +29,6 @@ import {\n   UNDERSCORE_NOT_FOUND_ROUTE,\n } from '../shared/lib/constants'\n import {\n-  CLIENT_STATIC_FILES_RUNTIME_AMP,\n   CLIENT_STATIC_FILES_RUNTIME_MAIN,\n   CLIENT_STATIC_FILES_RUNTIME_MAIN_APP,\n   CLIENT_STATIC_FILES_RUNTIME_POLYFILLS,\n@@ -1144,7 +1143,6 @@ export function finalizeEntrypoint({\n         name !== CLIENT_STATIC_FILES_RUNTIME_POLYFILLS &&\n         name !== CLIENT_STATIC_FILES_RUNTIME_MAIN &&\n         name !== CLIENT_STATIC_FILES_RUNTIME_MAIN_APP &&\n-        name !== CLIENT_STATIC_FILES_RUNTIME_AMP &&\n         name !== CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH\n       ) {\n         if (isAppLayer) {"
        },
        {
            "sha": "5394a9b2bd5938f28f2ee115eeb02e8cc5cd57b2",
            "filename": "packages/next/src/build/index.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 68,
            "changes": 68,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -1751,7 +1751,6 @@ export default async function build(\n                           new Map()\n                         ),\n                         staticPages: [],\n-                        hasSsrAmpPages: false,\n                         buildTraceContext,\n                         outputFileTracingRoot,\n                       })\n@@ -1856,7 +1855,6 @@ export default async function build(\n       const ssgBlockingFallbackPages = new Set<string>()\n       const staticPages = new Set<string>()\n       const invalidPages = new Set<string>()\n-      const hybridAmpPages = new Set<string>()\n       const serverPropsPages = new Set<string>()\n       const additionalPaths = new Map<string, PrerenderedRoute[]>()\n       const staticPaths = new Map<string, PrerenderedRoute[]>()\n@@ -1900,15 +1898,13 @@ export default async function build(\n         customAppGetInitialProps,\n         namedExports,\n         isNextImageImported,\n-        hasSsrAmpPages,\n         hasNonStaticErrorPage,\n       } = await staticCheckSpan.traceAsyncFn(async () => {\n         if (isCompileMode) {\n           return {\n             customAppGetInitialProps: false,\n             namedExports: [],\n             isNextImageImported: true,\n-            hasSsrAmpPages: !!pagesDir,\n             hasNonStaticErrorPage: hasUserPagesRoutes,\n           }\n         }\n@@ -1979,8 +1975,6 @@ export default async function build(\n \n         // eslint-disable-next-line @typescript-eslint/no-shadow\n         let isNextImageImported: boolean | undefined\n-        // eslint-disable-next-line @typescript-eslint/no-shadow\n-        let hasSsrAmpPages = false\n \n         const middlewareManifest: MiddlewareManifest = require(\n           path.join(distDir, SERVER_DIRECTORY, MIDDLEWARE_MANIFEST)\n@@ -2044,7 +2038,6 @@ export default async function build(\n                 let isSSG = false\n                 let isStatic = false\n                 let isServerComponent = false\n-                let isHybridAmp = false\n                 let ssgPageRoutes: string[] | null = null\n                 let pagePath = ''\n \n@@ -2289,18 +2282,6 @@ export default async function build(\n                           workerResult.hasStaticProps = false\n                         }\n \n-                        if (\n-                          workerResult.isStatic === false &&\n-                          (workerResult.isHybridAmp || workerResult.isAmpOnly)\n-                        ) {\n-                          hasSsrAmpPages = true\n-                        }\n-\n-                        if (workerResult.isHybridAmp) {\n-                          isHybridAmp = true\n-                          hybridAmpPages.add(page)\n-                        }\n-\n                         if (workerResult.isNextImageImported) {\n                           isNextImageImported = true\n                         }\n@@ -2402,7 +2383,6 @@ export default async function build(\n                   isStatic,\n                   isSSG,\n                   isRoutePPREnabled,\n-                  isHybridAmp,\n                   ssgPageRoutes,\n                   initialCacheControl: undefined,\n                   runtime: pageRuntime,\n@@ -2423,7 +2403,6 @@ export default async function build(\n           customAppGetInitialProps: await customAppGetInitialPropsPromise,\n           namedExports: await namedExportsPromise,\n           isNextImageImported,\n-          hasSsrAmpPages,\n           hasNonStaticErrorPage: nonStaticErrorPage,\n         }\n \n@@ -2565,22 +2544,6 @@ export default async function build(\n           return serverFilesManifest\n         })\n \n-      if (!hasSsrAmpPages) {\n-        requiredServerFilesManifest.ignore.push(\n-          path.relative(\n-            dir,\n-            path.join(\n-              path.dirname(\n-                require.resolve(\n-                  'next/dist/compiled/@ampproject/toolbox-optimizer'\n-                )\n-              ),\n-              '**/*'\n-            )\n-          )\n-        )\n-      }\n-\n       const middlewareFile = rootPaths.find((p) =>\n         p.includes(MIDDLEWARE_FILENAME)\n       )\n@@ -2644,7 +2607,6 @@ export default async function build(\n               edgeRuntimeRoutes: collectRoutesUsingEdgeRuntime(pageInfos),\n               staticPages: [...staticPages],\n               nextBuildSpan,\n-              hasSsrAmpPages,\n               buildTraceContext,\n               outputFileTracingRoot,\n             }).catch((err) => {\n@@ -3771,7 +3733,6 @@ export default async function build(\n             const isSsg = ssgPages.has(page)\n             const isStaticSsgFallback = ssgStaticFallbackPages.has(page)\n             const isDynamic = isDynamicRoute(page)\n-            const hasAmp = hybridAmpPages.has(page)\n             const file = normalizePagePath(page)\n \n             const pageInfo = pageInfos.get(page)\n@@ -3802,15 +3763,6 @@ export default async function build(\n               await moveExportedPage(page, page, file, isSsg, 'html')\n             }\n \n-            if (hasAmp && (!isSsg || (isSsg && !isDynamic))) {\n-              const ampPage = `${file}.amp`\n-              await moveExportedPage(page, ampPage, ampPage, isSsg, 'html')\n-\n-              if (isSsg) {\n-                await moveExportedPage(page, ampPage, ampPage, isSsg, 'json')\n-              }\n-            }\n-\n             if (isSsg) {\n               // For a non-dynamic SSG page, we must copy its data file\n               // from export, we already moved the HTML file above\n@@ -3885,26 +3837,6 @@ export default async function build(\n                     true\n                   )\n \n-                  if (hasAmp) {\n-                    const ampPage = `${pageFile}.amp`\n-                    await moveExportedPage(\n-                      page,\n-                      ampPage,\n-                      ampPage,\n-                      isSsg,\n-                      'html',\n-                      true\n-                    )\n-                    await moveExportedPage(\n-                      page,\n-                      ampPage,\n-                      ampPage,\n-                      isSsg,\n-                      'json',\n-                      true\n-                    )\n-                  }\n-\n                   const cacheControl = getCacheControl(route.pathname)\n \n                   prerenderManifest.routes[route.pathname] = {"
        },
        {
            "sha": "3b4a2dace98ab4bcbe9bb778df3f51497a296e94",
            "filename": "packages/next/src/build/output/index.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 100,
            "changes": 102,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Foutput%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Foutput%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Foutput%2Findex.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -1,6 +1,3 @@\n-import { bold, red, yellow } from '../../lib/picocolors'\n-import stripAnsi from 'next/dist/compiled/strip-ansi'\n-import textTable from 'next/dist/compiled/text-table'\n import createStore from 'next/dist/compiled/unistore'\n import formatWebpackMessages from '../../shared/lib/format-webpack-messages'\n import { store as consoleStore } from './store'\n@@ -19,79 +16,12 @@ type WebpackStatus =\n   | { loading: true }\n   | ({ loading: false } & CompilerDiagnostics)\n \n-type AmpStatus = {\n-  message: string\n-  line: number\n-  col: number\n-  specUrl: string | null\n-  code: string\n-}\n-\n-export type AmpPageStatus = {\n-  [page: string]: { errors: AmpStatus[]; warnings: AmpStatus[] }\n-}\n-\n type BuildStatusStore = {\n   client: WebpackStatus\n   server: WebpackStatus\n   edgeServer: WebpackStatus\n   trigger: string | undefined\n   url: string | undefined\n-  amp: AmpPageStatus\n-}\n-\n-export function formatAmpMessages(amp: AmpPageStatus) {\n-  let output = bold('Amp Validation') + '\\n\\n'\n-  let messages: string[][] = []\n-\n-  const chalkError = red('error')\n-  function ampError(page: string, error: AmpStatus) {\n-    messages.push([page, chalkError, error.message, error.specUrl || ''])\n-  }\n-\n-  const chalkWarn = yellow('warn')\n-  function ampWarn(page: string, warn: AmpStatus) {\n-    messages.push([page, chalkWarn, warn.message, warn.specUrl || ''])\n-  }\n-\n-  for (const page in amp) {\n-    let { errors, warnings } = amp[page]\n-\n-    const devOnlyFilter = (err: AmpStatus) => err.code !== 'DEV_MODE_ONLY'\n-    errors = errors.filter(devOnlyFilter)\n-    warnings = warnings.filter(devOnlyFilter)\n-    if (!(errors.length || warnings.length)) {\n-      // Skip page with no non-dev warnings\n-      continue\n-    }\n-\n-    if (errors.length) {\n-      ampError(page, errors[0])\n-      for (let index = 1; index < errors.length; ++index) {\n-        ampError('', errors[index])\n-      }\n-    }\n-    if (warnings.length) {\n-      ampWarn(errors.length ? '' : page, warnings[0])\n-      for (let index = 1; index < warnings.length; ++index) {\n-        ampWarn('', warnings[index])\n-      }\n-    }\n-    messages.push(['', '', '', ''])\n-  }\n-\n-  if (!messages.length) {\n-    return ''\n-  }\n-\n-  output += textTable(messages, {\n-    align: ['l', 'l', 'l', 'l'],\n-    stringLength(str: string) {\n-      return stripAnsi(str).length\n-    },\n-  })\n-\n-  return output\n }\n \n const buildStore = createStore<BuildStatusStore>({\n@@ -108,7 +38,7 @@ let serverWasLoading = true\n let edgeServerWasLoading = false\n \n buildStore.subscribe((state) => {\n-  const { amp, client, server, edgeServer, trigger, url } = state\n+  const { client, server, edgeServer, trigger, url } = state\n \n   const { appUrl } = consoleStore.getState()\n \n@@ -179,7 +109,7 @@ buildStore.subscribe((state) => {\n       ...(client.warnings || []),\n       ...(server.warnings || []),\n       ...(edgeServer.warnings || []),\n-    ].concat(formatAmpMessages(amp) || [])\n+    ]\n \n     consoleStore.setState(\n       {\n@@ -192,32 +122,6 @@ buildStore.subscribe((state) => {\n   }\n })\n \n-export function ampValidation(\n-  page: string,\n-  errors: AmpStatus[],\n-  warnings: AmpStatus[]\n-) {\n-  const { amp } = buildStore.getState()\n-  if (!(errors.length || warnings.length)) {\n-    buildStore.setState({\n-      amp: Object.keys(amp)\n-        .filter((k) => k !== page)\n-        .sort()\n-        // eslint-disable-next-line no-sequences\n-        .reduce((a, c) => ((a[c] = amp[c]), a), {} as AmpPageStatus),\n-    })\n-    return\n-  }\n-\n-  const newAmp: AmpPageStatus = { ...amp, [page]: { errors, warnings } }\n-  buildStore.setState({\n-    amp: Object.keys(newAmp)\n-      .sort()\n-      // eslint-disable-next-line no-sequences\n-      .reduce((a, c) => ((a[c] = newAmp[c]), a), {} as AmpPageStatus),\n-  })\n-}\n-\n export function watchCompilers(\n   client: webpack.Compiler,\n   server: webpack.Compiler,\n@@ -241,8 +145,6 @@ export function watchCompilers(\n     })\n \n     compiler.hooks.done.tap(`NextJsDone-${key}`, (stats: webpack.Stats) => {\n-      buildStore.setState({ amp: {} })\n-\n       const { errors, warnings } = formatWebpackMessages(\n         stats.toJson({\n           preset: 'errors-warnings',"
        },
        {
            "sha": "3f0d25870d6deced8a98b1a6931da2861d464fe8",
            "filename": "packages/next/src/build/output/store.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Foutput%2Fstore.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Foutput%2Fstore.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Foutput%2Fstore.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -1,5 +1,4 @@\n import createStore from 'next/dist/compiled/unistore'\n-import stripAnsi from 'next/dist/compiled/strip-ansi'\n import { type Span, flushAllTraces, trace } from '../../trace'\n import { teardownTraceSubscriber } from '../swc'\n import * as Log from './log'\n@@ -135,19 +134,6 @@ store.subscribe((state) => {\n     // Log compilation errors\n     Log.error(state.errors[0])\n \n-    const cleanError = stripAnsi(state.errors[0])\n-    if (cleanError.indexOf('SyntaxError') > -1) {\n-      const matches = cleanError.match(/\\[.*\\]=/)\n-      if (matches) {\n-        for (const match of matches) {\n-          const prop = (match.split(']').shift() || '').slice(1)\n-          console.log(\n-            `AMP bind syntax [${prop}]='' is not supported in JSX, use 'data-amp-bind-${prop}' instead. https://nextjs.org/docs/messages/amp-bind-jsx-alt`\n-          )\n-        }\n-        return\n-      }\n-    }\n     startTime = 0\n     // Ensure traces are flushed after each compile in development mode\n     flushAllTraces()"
        },
        {
            "sha": "ca889b12f0fcf0dfdece9b4294065b9953d0b19d",
            "filename": "packages/next/src/build/segment-config/pages/pages-segment-config.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Fsegment-config%2Fpages%2Fpages-segment-config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Fsegment-config%2Fpages%2Fpages-segment-config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fsegment-config%2Fpages%2Fpages-segment-config.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -20,11 +20,6 @@ const PagesSegmentConfigSchema = z.object({\n    */\n   config: z\n     .object({\n-      /**\n-       * Enables AMP for the page.\n-       */\n-      amp: z.union([z.boolean(), z.literal('hybrid')]).optional(),\n-\n       /**\n        * The runtime to use for the page.\n        */\n@@ -68,11 +63,6 @@ export const PagesSegmentConfigSchemaKeys =\n   PagesSegmentConfigSchema.keyof().options\n \n export type PagesSegmentConfigConfig = {\n-  /**\n-   * Enables AMP for the page.\n-   */\n-  amp?: boolean | 'hybrid'\n-\n   /**\n    * The maximum duration for the page render.\n    */"
        },
        {
            "sha": "6793a281fd5c02a699cda186207fca67de9a0660",
            "filename": "packages/next/src/build/swc/options.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Fswc%2Foptions.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Fswc%2Foptions.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fswc%2Foptions.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -359,7 +359,6 @@ export function getJestSWCOptions({\n       type: esm && !useCjsModules ? 'es6' : 'commonjs',\n     },\n     disableNextSsg: true,\n-    disablePageConfig: true,\n     pagesDir,\n   }\n }\n@@ -488,7 +487,6 @@ export function getLoaderSWCOptions({\n       ...moduleResolutionConfig,\n       // Disables getStaticProps/getServerSideProps tree shaking on the server compilation for pages\n       disableNextSsg: true,\n-      disablePageConfig: true,\n       isDevelopment: development,\n       isServerCompiler: isServer,\n       pagesDir,\n@@ -530,7 +528,6 @@ export function getLoaderSWCOptions({\n   // Only keep server actions transform to discover server actions from client components.\n   if (isAppBrowserLayer && isNodeModules) {\n     options.disableNextSsg = true\n-    options.disablePageConfig = true\n     options.isPageFile = false\n     options.optimizeServerReact = undefined\n     options.cjsRequireOptimizer = undefined"
        },
        {
            "sha": "190a4a50abe82b402bee191e3f113173dd081577",
            "filename": "packages/next/src/build/templates/edge-ssr.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fedge-ssr.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fedge-ssr.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fedge-ssr.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -141,9 +141,7 @@ async function requestHandler(\n       ComponentMod: pageMod,\n       pageConfig: pageMod.pageConfig,\n       routeModule: pageMod.routeModule,\n-      canonicalBase: nextConfig.amp.canonicalBase || '',\n       previewProps: prerenderManifest.preview,\n-      ampOptimizerConfig: nextConfig.experimental.amp?.optimizer,\n       basePath: nextConfig.basePath,\n       assetPrefix: nextConfig.assetPrefix,\n       images: nextConfig.images,"
        },
        {
            "sha": "d6b90147735ccbc3815228cc3d9740503f7ac3aa",
            "filename": "packages/next/src/build/utils.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 21,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Futils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Futils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Futils.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -1,7 +1,7 @@\n import type { NextConfigComplete } from '../server/config-shared'\n import type { ExperimentalPPRConfig } from '../server/lib/experimental/ppr'\n import type { AssetBinding } from './webpack/loaders/get-module-build-info'\n-import type { PageConfig, ServerRuntime } from '../types'\n+import type { ServerRuntime } from '../types'\n import type { BuildManifest } from '../server/get-page-files'\n import type {\n   Redirect,\n@@ -56,7 +56,6 @@ import { setHttpClientAndAgentOptions } from '../server/setup-http-agent-env'\n import { Sema } from 'next/dist/compiled/async-sema'\n import { normalizePagePath } from '../shared/lib/page-path/normalize-page-path'\n import { getRuntimeContext } from '../server/web/sandbox'\n-import { isClientReference } from '../lib/client-and-server-references'\n import { RouteKind } from '../server/route-kind'\n import type { PageExtensions } from './page-extensions-type'\n import { checkIsRoutePPREnabled } from '../server/lib/experimental/ppr'\n@@ -137,7 +136,6 @@ const filterAndSortList = (\n \n export interface PageInfo {\n   originalAppPath: string | undefined\n-  isHybridAmp?: boolean\n   isStatic: boolean\n   isSSG: boolean\n   /**\n@@ -182,7 +180,6 @@ export async function printTreeView(\n   {\n     pagesDir,\n     pageExtensions,\n-    buildManifest,\n     middlewareManifest,\n     useStaticPages404,\n   }: {\n@@ -270,9 +267,6 @@ export async function printTreeView(\n             : ''\n \n       const pageInfo = pageInfos.get(item)\n-      const ampLabel = buildManifest.ampFirstPages.includes(item)\n-        ? ` ${cyan('AMP')}`\n-        : ''\n       const totalDuration =\n         (pageInfo?.pageDuration || 0) +\n         (pageInfo?.ssgPageDurations?.reduce((a, b) => a + (b || 0), 0) || 0)\n@@ -309,7 +303,7 @@ export async function printTreeView(\n       usedSymbols.add(symbol)\n \n       messages.push([\n-        `${border} ${symbol} ${item}${ampLabel}${\n+        `${border} ${symbol} ${item}${\n           totalDuration > MIN_DURATION\n             ? ` (${getPrettyDuration(totalDuration)})`\n             : ''\n@@ -549,8 +543,6 @@ export function printCustomRoutes({\n type PageIsStaticResult = {\n   isRoutePPREnabled?: boolean\n   isStatic?: boolean\n-  isAmpOnly?: boolean\n-  isHybridAmp?: boolean\n   hasServerProps?: boolean\n   hasStaticProps?: boolean\n   prerenderedRoutes: PrerenderedRoute[] | undefined\n@@ -620,8 +612,6 @@ export async function isPageStatic({\n     return {\n       isStatic: true,\n       isRoutePPREnabled: false,\n-      isHybridAmp: false,\n-      isAmpOnly: false,\n       prerenderFallbackMode: undefined,\n       prerenderedRoutes: undefined,\n       rootParamKeys: undefined,\n@@ -656,7 +646,6 @@ export async function isPageStatic({\n       let prerenderFallbackMode: FallbackMode | undefined\n       let appConfig: AppSegmentConfig = {}\n       let rootParamKeys: readonly string[] | undefined\n-      let isClientComponent: boolean = false\n       const pathIsEdgeRuntime = isEdgeRuntime(pageRuntime)\n \n       if (pathIsEdgeRuntime) {\n@@ -680,7 +669,6 @@ export async function isPageStatic({\n         // This is not needed during require.\n         const buildManifest = {} as BuildManifest\n \n-        isClientComponent = isClientReference(mod)\n         componentsResult = {\n           Component: mod.default,\n           Document: mod.Document,\n@@ -715,8 +703,6 @@ export async function isPageStatic({\n       if (pageType === 'app') {\n         const ComponentMod: AppPageModule = componentsResult.ComponentMod\n \n-        isClientComponent = isClientReference(componentsResult.ComponentMod)\n-\n         let segments: AppSegment[]\n         try {\n           segments = await collectSegments(\n@@ -834,9 +820,6 @@ export async function isPageStatic({\n       }\n \n       const isNextImageImported = (globalThis as any).__NEXT_IMAGE_IMPORTED\n-      const config: PageConfig = isClientComponent\n-        ? {}\n-        : componentsResult.pageConfig\n \n       let isStatic = false\n       if (!hasStaticProps && !hasGetInitialProps && !hasServerProps) {\n@@ -852,8 +835,6 @@ export async function isPageStatic({\n       return {\n         isStatic,\n         isRoutePPREnabled,\n-        isHybridAmp: config.amp === 'hybrid',\n-        isAmpOnly: config.amp === true,\n         prerenderFallbackMode,\n         prerenderedRoutes,\n         rootParamKeys,"
        },
        {
            "sha": "04b97894050939f041b8e3a0b5e8a3a374d689fb",
            "filename": "packages/next/src/build/webpack-config.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -18,7 +18,6 @@ import {\n } from './utils'\n import type { CustomRoutes } from '../lib/load-custom-routes.js'\n import {\n-  CLIENT_STATIC_FILES_RUNTIME_AMP,\n   CLIENT_STATIC_FILES_RUNTIME_MAIN,\n   CLIENT_STATIC_FILES_RUNTIME_MAIN_APP,\n   CLIENT_STATIC_FILES_RUNTIME_POLYFILLS_SYMBOL,\n@@ -41,7 +40,6 @@ import MiddlewarePlugin, {\n } from './webpack/plugins/middleware-plugin'\n import BuildManifestPlugin from './webpack/plugins/build-manifest-plugin'\n import { JsConfigPathsPlugin } from './webpack/plugins/jsconfig-paths-plugin'\n-import { DropClientPage } from './webpack/plugins/next-drop-client-page-plugin'\n import PagesManifestPlugin from './webpack/plugins/pages-manifest-plugin'\n import { ProfilingPlugin } from './webpack/plugins/profiling-plugin'\n import { ReactLoadablePlugin } from './webpack/plugins/react-loadable-plugin'\n@@ -711,14 +709,6 @@ export default async function getBaseWebpackConfig(\n         ...(dev\n           ? {\n               [CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH]: reactRefreshEntry,\n-              [CLIENT_STATIC_FILES_RUNTIME_AMP]:\n-                `./` +\n-                path\n-                  .relative(\n-                    dir,\n-                    path.join(NEXT_PROJECT_ROOT_DIST_CLIENT, 'dev', 'amp-dev')\n-                  )\n-                  .replace(/\\\\/g, '/'),\n             }\n           : {}),\n         [CLIENT_STATIC_FILES_RUNTIME_MAIN]:\n@@ -2027,8 +2017,6 @@ export default async function getBaseWebpackConfig(\n           runtimeAsset: `server/${MIDDLEWARE_REACT_LOADABLE_MANIFEST}.js`,\n           dev,\n         }),\n-      // rspack doesn't support the parser hooks used here\n-      !isRspack && (isClient || isEdgeServer) && new DropClientPage(),\n       isNodeServer &&\n         !dev &&\n         new (("
        },
        {
            "sha": "9459a61715ef6db8321472a428aac625d32ba5fc",
            "filename": "packages/next/src/build/webpack/plugins/build-manifest-plugin.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 20,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Fplugins%2Fbuild-manifest-plugin.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Fplugins%2Fbuild-manifest-plugin.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Fplugins%2Fbuild-manifest-plugin.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -10,12 +10,10 @@ import {\n   CLIENT_STATIC_FILES_RUNTIME_MAIN_APP,\n   CLIENT_STATIC_FILES_RUNTIME_POLYFILLS_SYMBOL,\n   CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH,\n-  CLIENT_STATIC_FILES_RUNTIME_AMP,\n   SYSTEM_ENTRYPOINTS,\n } from '../../../shared/lib/constants'\n import type { BuildManifest } from '../../../server/get-page-files'\n import getRouteFromEntrypoint from '../../../server/get-route-from-entrypoint'\n-import { ampFirstEntryNamesMap } from './next-drop-client-page-plugin'\n import { getSortedRoutes } from '../../../shared/lib/router/utils'\n import { Span } from '../../../trace'\n import { getCompilationSpan } from '../utils'\n@@ -146,24 +144,10 @@ export default class BuildManifestPlugin {\n       const assetMap: DeepMutable<BuildManifest> = {\n         polyfillFiles: [],\n         devFiles: [],\n-        ampDevFiles: [],\n         lowPriorityFiles: [],\n         rootMainFiles: [],\n         rootMainFilesTree: {},\n         pages: { '/_app': [] },\n-        ampFirstPages: [],\n-      }\n-\n-      const ampFirstEntryNames = ampFirstEntryNamesMap.get(compilation)\n-      if (ampFirstEntryNames) {\n-        for (const entryName of ampFirstEntryNames) {\n-          const pagePath = getRouteFromEntrypoint(entryName)\n-          if (!pagePath) {\n-            continue\n-          }\n-\n-          assetMap.ampFirstPages.push(pagePath)\n-        }\n       }\n \n       const mainFiles = new Set(\n@@ -203,10 +187,6 @@ export default class BuildManifestPlugin {\n         entrypoints.get(CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH)\n       ).filter((file) => !mainFiles.has(file))\n \n-      assetMap.ampDevFiles = getEntrypointFiles(\n-        entrypoints.get(CLIENT_STATIC_FILES_RUNTIME_AMP)\n-      )\n-\n       for (const entrypoint of compilation.entrypoints.values()) {\n         if (SYSTEM_ENTRYPOINTS.has(entrypoint.name)) continue\n         const pagePath = getRouteFromEntrypoint(entrypoint.name)"
        },
        {
            "sha": "b03428e7c32cb75c5d4f4b40b1bc54178b7dd646",
            "filename": "packages/next/src/build/webpack/plugins/next-drop-client-page-plugin.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 86,
            "changes": 86,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Fplugins%2Fnext-drop-client-page-plugin.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Fplugins%2Fnext-drop-client-page-plugin.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Fplugins%2Fnext-drop-client-page-plugin.ts?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,86 +0,0 @@\n-import type { webpack } from 'next/dist/compiled/webpack/webpack'\n-import { STRING_LITERAL_DROP_BUNDLE } from '../../../shared/lib/constants'\n-\n-export const ampFirstEntryNamesMap: WeakMap<webpack.Compilation, string[]> =\n-  new WeakMap()\n-\n-const PLUGIN_NAME = 'DropAmpFirstPagesPlugin'\n-\n-// Prevents outputting client pages when they are not needed\n-export class DropClientPage implements webpack.WebpackPluginInstance {\n-  ampPages = new Set()\n-\n-  apply(compiler: webpack.Compiler) {\n-    compiler.hooks.compilation.tap(\n-      PLUGIN_NAME,\n-      (compilation: any, { normalModuleFactory }: any) => {\n-        // Recursively look up the issuer till it ends up at the root\n-        function findEntryModule(mod: any): webpack.Module | null {\n-          const queue = new Set([mod])\n-          for (const module of queue) {\n-            const incomingConnections =\n-              compilation.moduleGraph.getIncomingConnections(module)\n-\n-            for (const incomingConnection of incomingConnections) {\n-              if (!incomingConnection.originModule) return module\n-              queue.add(incomingConnection.originModule)\n-            }\n-          }\n-\n-          return null\n-        }\n-\n-        function handler(parser: any) {\n-          function markAsAmpFirst() {\n-            const entryModule = findEntryModule(parser.state.module)\n-\n-            if (!entryModule) {\n-              return\n-            }\n-\n-            // @ts-ignore buildInfo exists on Module\n-            entryModule.buildInfo.NEXT_ampFirst = true\n-          }\n-\n-          parser.hooks.preDeclarator.tap(PLUGIN_NAME, (declarator: any) => {\n-            if (declarator?.id?.name === STRING_LITERAL_DROP_BUNDLE) {\n-              markAsAmpFirst()\n-            }\n-          })\n-        }\n-\n-        normalModuleFactory.hooks.parser\n-          .for('javascript/auto')\n-          .tap(PLUGIN_NAME, handler)\n-\n-        normalModuleFactory.hooks.parser\n-          .for('javascript/esm')\n-          .tap(PLUGIN_NAME, handler)\n-\n-        normalModuleFactory.hooks.parser\n-          .for('javascript/dynamic')\n-          .tap(PLUGIN_NAME, handler)\n-\n-        if (!ampFirstEntryNamesMap.has(compilation)) {\n-          ampFirstEntryNamesMap.set(compilation, [])\n-        }\n-\n-        const ampFirstEntryNamesItem = ampFirstEntryNamesMap.get(\n-          compilation\n-        ) as string[]\n-\n-        compilation.hooks.seal.tap(PLUGIN_NAME, () => {\n-          for (const [name, entryData] of compilation.entries) {\n-            for (const dependency of entryData.dependencies) {\n-              const module = compilation.moduleGraph.getModule(dependency)\n-              if (module?.buildInfo?.NEXT_ampFirst) {\n-                ampFirstEntryNamesItem.push(name)\n-                compilation.entries.delete(name)\n-              }\n-            }\n-          }\n-        })\n-      }\n-    )\n-  }\n-}"
        },
        {
            "sha": "1ca846f5e82bfb2546ebf46de97ad860ce32f22c",
            "filename": "packages/next/src/client/dev/amp-dev.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 111,
            "changes": 111,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Famp-dev.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Famp-dev.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Famp-dev.ts?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,111 +0,0 @@\n-/* globals __webpack_hash__ */\n-import { displayContent } from './fouc'\n-import initOnDemandEntries from './on-demand-entries-client'\n-import { addMessageListener, connectHMR } from './hot-reloader/pages/websocket'\n-import { HMR_MESSAGE_SENT_TO_BROWSER } from '../../server/dev/hot-reloader-types'\n-import { reportInvalidHmrMessage } from './hot-reloader/shared'\n-\n-/// <reference types=\"webpack/module.d.ts\" />\n-\n-const data = JSON.parse(\n-  (document.getElementById('__NEXT_DATA__') as any).textContent\n-)\n-window.__NEXT_DATA__ = data\n-\n-let { assetPrefix, page } = data\n-assetPrefix = assetPrefix || ''\n-let mostRecentHash: null | string = null\n-/* eslint-disable-next-line */\n-let curHash = __webpack_hash__\n-const hotUpdatePath =\n-  assetPrefix + (assetPrefix.endsWith('/') ? '' : '/') + '_next/static/webpack/'\n-\n-// Is there a newer version of this code available?\n-function isUpdateAvailable() {\n-  // __webpack_hash__ is the hash of the current compilation.\n-  // It's a global variable injected by Webpack.\n-  /* eslint-disable-next-line */\n-  return mostRecentHash !== __webpack_hash__\n-}\n-\n-// Webpack disallows updates in other states.\n-function canApplyUpdates() {\n-  return module.hot.status() === 'idle'\n-}\n-\n-// This function reads code updates on the fly and hard\n-// reloads the page when it has changed.\n-async function tryApplyUpdates() {\n-  if (!isUpdateAvailable() || !canApplyUpdates()) {\n-    return\n-  }\n-  try {\n-    const res = await fetch(\n-      typeof __webpack_runtime_id__ !== 'undefined'\n-        ? // eslint-disable-next-line no-undef\n-          `${hotUpdatePath}${curHash}.${__webpack_runtime_id__}.hot-update.json`\n-        : `${hotUpdatePath}${curHash}.hot-update.json`\n-    )\n-    const jsonData = await res.json()\n-    const curPage = page === '/' ? 'index' : page\n-    // webpack 5 uses an array instead\n-    const pageUpdated = (\n-      Array.isArray(jsonData.c) ? jsonData.c : Object.keys(jsonData.c)\n-    ).some((mod: string) => {\n-      return (\n-        mod.indexOf(\n-          `pages${curPage.startsWith('/') ? curPage : `/${curPage}`}`\n-        ) !== -1 ||\n-        mod.indexOf(\n-          `pages${curPage.startsWith('/') ? curPage : `/${curPage}`}`.replace(\n-            /\\//g,\n-            '\\\\'\n-          )\n-        ) !== -1\n-      )\n-    })\n-\n-    if (pageUpdated) {\n-      window.location.reload()\n-    } else {\n-      curHash = mostRecentHash as string\n-    }\n-  } catch (err) {\n-    console.error('Error occurred checking for update', err)\n-    window.location.reload()\n-  }\n-}\n-\n-addMessageListener((message) => {\n-  try {\n-    // messages which are not related to amp-dev\n-    if (\n-      message.type === HMR_MESSAGE_SENT_TO_BROWSER.SERVER_ERROR ||\n-      message.type === HMR_MESSAGE_SENT_TO_BROWSER.DEV_PAGES_MANIFEST_UPDATE\n-    ) {\n-      return\n-    }\n-    if (\n-      message.type === HMR_MESSAGE_SENT_TO_BROWSER.SYNC ||\n-      message.type === HMR_MESSAGE_SENT_TO_BROWSER.BUILT\n-    ) {\n-      if (!message.hash) {\n-        return\n-      }\n-      mostRecentHash = message.hash\n-      tryApplyUpdates()\n-    } else if (message.type === HMR_MESSAGE_SENT_TO_BROWSER.RELOAD_PAGE) {\n-      window.location.reload()\n-    }\n-  } catch (err: unknown) {\n-    reportInvalidHmrMessage(message, err)\n-  }\n-})\n-\n-connectHMR({\n-  assetPrefix,\n-  path: '/_next/webpack-hmr',\n-})\n-displayContent()\n-\n-initOnDemandEntries(data.page)"
        },
        {
            "sha": "52ddafad569e93b70a69a9aba4f8bb44b2a32f39",
            "filename": "packages/next/src/client/dev/on-demand-entries-client.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 22,
            "changes": 37,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fon-demand-entries-client.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fon-demand-entries-client.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fon-demand-entries-client.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -1,33 +1,26 @@\n import Router from '../router'\n import { sendMessage } from './hot-reloader/pages/websocket'\n \n-export default async (page?: string) => {\n+export default async () => {\n   // Never send pings when using Turbopack as it's not used.\n   // Pings were originally used to keep track of active routes in on-demand-entries with webpack.\n   if (process.env.TURBOPACK) {\n     return\n   }\n-  if (page) {\n-    // in AMP the router isn't initialized on the client and\n-    // client-transitions don't occur so ping initial page\n+\n+  Router.ready(() => {\n     setInterval(() => {\n-      sendMessage(JSON.stringify({ event: 'ping', page }))\n-    }, 2500)\n-  } else {\n-    Router.ready(() => {\n-      setInterval(() => {\n-        // when notFound: true is returned we should use the notFoundPage\n-        // as the Router.pathname will point to the 404 page but we want\n-        // to ping the source page that returned notFound: true instead\n-        const notFoundSrcPage = self.__NEXT_DATA__.notFoundSrcPage\n-        const pathname =\n-          (Router.pathname === '/404' || Router.pathname === '/_error') &&\n-          notFoundSrcPage\n-            ? notFoundSrcPage\n-            : Router.pathname\n+      // when notFound: true is returned we should use the notFoundPage\n+      // as the Router.pathname will point to the 404 page but we want\n+      // to ping the source page that returned notFound: true instead\n+      const notFoundSrcPage = self.__NEXT_DATA__.notFoundSrcPage\n+      const pathname =\n+        (Router.pathname === '/404' || Router.pathname === '/_error') &&\n+        notFoundSrcPage\n+          ? notFoundSrcPage\n+          : Router.pathname\n \n-        sendMessage(JSON.stringify({ event: 'ping', page: pathname }))\n-      }, 2500)\n-    })\n-  }\n+      sendMessage(JSON.stringify({ event: 'ping', page: pathname }))\n+    }, 2500)\n+  })\n }"
        },
        {
            "sha": "e18c801a061ef49679083bd7b6ef958f97a0cb90",
            "filename": "packages/next/src/compiled/@ampproject/toolbox-optimizer/LICENSE",
            "status": "removed",
            "additions": 0,
            "deletions": 202,
            "changes": 202,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fcompiled%2F%40ampproject%2Ftoolbox-optimizer%2FLICENSE",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fcompiled%2F%40ampproject%2Ftoolbox-optimizer%2FLICENSE",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2F%40ampproject%2Ftoolbox-optimizer%2FLICENSE?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,202 +0,0 @@\n-\n-                                 Apache License\n-                           Version 2.0, January 2004\n-                        http://www.apache.org/licenses/\n-\n-   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n-\n-   1. Definitions.\n-\n-      \"License\" shall mean the terms and conditions for use, reproduction,\n-      and distribution as defined by Sections 1 through 9 of this document.\n-\n-      \"Licensor\" shall mean the copyright owner or entity authorized by\n-      the copyright owner that is granting the License.\n-\n-      \"Legal Entity\" shall mean the union of the acting entity and all\n-      other entities that control, are controlled by, or are under common\n-      control with that entity. For the purposes of this definition,\n-      \"control\" means (i) the power, direct or indirect, to cause the\n-      direction or management of such entity, whether by contract or\n-      otherwise, or (ii) ownership of fifty percent (50%) or more of the\n-      outstanding shares, or (iii) beneficial ownership of such entity.\n-\n-      \"You\" (or \"Your\") shall mean an individual or Legal Entity\n-      exercising permissions granted by this License.\n-\n-      \"Source\" form shall mean the preferred form for making modifications,\n-      including but not limited to software source code, documentation\n-      source, and configuration files.\n-\n-      \"Object\" form shall mean any form resulting from mechanical\n-      transformation or translation of a Source form, including but\n-      not limited to compiled object code, generated documentation,\n-      and conversions to other media types.\n-\n-      \"Work\" shall mean the work of authorship, whether in Source or\n-      Object form, made available under the License, as indicated by a\n-      copyright notice that is included in or attached to the work\n-      (an example is provided in the Appendix below).\n-\n-      \"Derivative Works\" shall mean any work, whether in Source or Object\n-      form, that is based on (or derived from) the Work and for which the\n-      editorial revisions, annotations, elaborations, or other modifications\n-      represent, as a whole, an original work of authorship. For the purposes\n-      of this License, Derivative Works shall not include works that remain\n-      separable from, or merely link (or bind by name) to the interfaces of,\n-      the Work and Derivative Works thereof.\n-\n-      \"Contribution\" shall mean any work of authorship, including\n-      the original version of the Work and any modifications or additions\n-      to that Work or Derivative Works thereof, that is intentionally\n-      submitted to Licensor for inclusion in the Work by the copyright owner\n-      or by an individual or Legal Entity authorized to submit on behalf of\n-      the copyright owner. For the purposes of this definition, \"submitted\"\n-      means any form of electronic, verbal, or written communication sent\n-      to the Licensor or its representatives, including but not limited to\n-      communication on electronic mailing lists, source code control systems,\n-      and issue tracking systems that are managed by, or on behalf of, the\n-      Licensor for the purpose of discussing and improving the Work, but\n-      excluding communication that is conspicuously marked or otherwise\n-      designated in writing by the copyright owner as \"Not a Contribution.\"\n-\n-      \"Contributor\" shall mean Licensor and any individual or Legal Entity\n-      on behalf of whom a Contribution has been received by Licensor and\n-      subsequently incorporated within the Work.\n-\n-   2. Grant of Copyright License. Subject to the terms and conditions of\n-      this License, each Contributor hereby grants to You a perpetual,\n-      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n-      copyright license to reproduce, prepare Derivative Works of,\n-      publicly display, publicly perform, sublicense, and distribute the\n-      Work and such Derivative Works in Source or Object form.\n-\n-   3. Grant of Patent License. Subject to the terms and conditions of\n-      this License, each Contributor hereby grants to You a perpetual,\n-      worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n-      (except as stated in this section) patent license to make, have made,\n-      use, offer to sell, sell, import, and otherwise transfer the Work,\n-      where such license applies only to those patent claims licensable\n-      by such Contributor that are necessarily infringed by their\n-      Contribution(s) alone or by combination of their Contribution(s)\n-      with the Work to which such Contribution(s) was submitted. If You\n-      institute patent litigation against any entity (including a\n-      cross-claim or counterclaim in a lawsuit) alleging that the Work\n-      or a Contribution incorporated within the Work constitutes direct\n-      or contributory patent infringement, then any patent licenses\n-      granted to You under this License for that Work shall terminate\n-      as of the date such litigation is filed.\n-\n-   4. Redistribution. You may reproduce and distribute copies of the\n-      Work or Derivative Works thereof in any medium, with or without\n-      modifications, and in Source or Object form, provided that You\n-      meet the following conditions:\n-\n-      (a) You must give any other recipients of the Work or\n-          Derivative Works a copy of this License; and\n-\n-      (b) You must cause any modified files to carry prominent notices\n-          stating that You changed the files; and\n-\n-      (c) You must retain, in the Source form of any Derivative Works\n-          that You distribute, all copyright, patent, trademark, and\n-          attribution notices from the Source form of the Work,\n-          excluding those notices that do not pertain to any part of\n-          the Derivative Works; and\n-\n-      (d) If the Work includes a \"NOTICE\" text file as part of its\n-          distribution, then any Derivative Works that You distribute must\n-          include a readable copy of the attribution notices contained\n-          within such NOTICE file, excluding those notices that do not\n-          pertain to any part of the Derivative Works, in at least one\n-          of the following places: within a NOTICE text file distributed\n-          as part of the Derivative Works; within the Source form or\n-          documentation, if provided along with the Derivative Works; or,\n-          within a display generated by the Derivative Works, if and\n-          wherever such third-party notices normally appear. The contents\n-          of the NOTICE file are for informational purposes only and\n-          do not modify the License. You may add Your own attribution\n-          notices within Derivative Works that You distribute, alongside\n-          or as an addendum to the NOTICE text from the Work, provided\n-          that such additional attribution notices cannot be construed\n-          as modifying the License.\n-\n-      You may add Your own copyright statement to Your modifications and\n-      may provide additional or different license terms and conditions\n-      for use, reproduction, or distribution of Your modifications, or\n-      for any such Derivative Works as a whole, provided Your use,\n-      reproduction, and distribution of the Work otherwise complies with\n-      the conditions stated in this License.\n-\n-   5. Submission of Contributions. Unless You explicitly state otherwise,\n-      any Contribution intentionally submitted for inclusion in the Work\n-      by You to the Licensor shall be under the terms and conditions of\n-      this License, without any additional terms or conditions.\n-      Notwithstanding the above, nothing herein shall supersede or modify\n-      the terms of any separate license agreement you may have executed\n-      with Licensor regarding such Contributions.\n-\n-   6. Trademarks. This License does not grant permission to use the trade\n-      names, trademarks, service marks, or product names of the Licensor,\n-      except as required for reasonable and customary use in describing the\n-      origin of the Work and reproducing the content of the NOTICE file.\n-\n-   7. Disclaimer of Warranty. Unless required by applicable law or\n-      agreed to in writing, Licensor provides the Work (and each\n-      Contributor provides its Contributions) on an \"AS IS\" BASIS,\n-      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n-      implied, including, without limitation, any warranties or conditions\n-      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A\n-      PARTICULAR PURPOSE. You are solely responsible for determining the\n-      appropriateness of using or redistributing the Work and assume any\n-      risks associated with Your exercise of permissions under this License.\n-\n-   8. Limitation of Liability. In no event and under no legal theory,\n-      whether in tort (including negligence), contract, or otherwise,\n-      unless required by applicable law (such as deliberate and grossly\n-      negligent acts) or agreed to in writing, shall any Contributor be\n-      liable to You for damages, including any direct, indirect, special,\n-      incidental, or consequential damages of any character arising as a\n-      result of this License or out of the use or inability to use the\n-      Work (including but not limited to damages for loss of goodwill,\n-      work stoppage, computer failure or malfunction, or any and all\n-      other commercial damages or losses), even if such Contributor\n-      has been advised of the possibility of such damages.\n-\n-   9. Accepting Warranty or Additional Liability. While redistributing\n-      the Work or Derivative Works thereof, You may choose to offer,\n-      and charge a fee for, acceptance of support, warranty, indemnity,\n-      or other liability obligations and/or rights consistent with this\n-      License. However, in accepting such obligations, You may act only\n-      on Your own behalf and on Your sole responsibility, not on behalf\n-      of any other Contributor, and only if You agree to indemnify,\n-      defend, and hold each Contributor harmless for any liability\n-      incurred by, or claims asserted against, such Contributor by reason\n-      of your accepting any such warranty or additional liability.\n-\n-   END OF TERMS AND CONDITIONS\n-\n-   APPENDIX: How to apply the Apache License to your work.\n-\n-      To apply the Apache License to your work, attach the following\n-      boilerplate notice, with the fields enclosed by brackets \"{}\"\n-      replaced with your own identifying information. (Don't include\n-      the brackets!)  The text should be enclosed in the appropriate\n-      comment syntax for the file format. We also recommend that a\n-      file or class name and description of purpose be included on the\n-      same \"printed page\" as the copyright notice for easier\n-      identification within third-party archives.\n-\n-   Copyright 2015, Google Inc.\n-\n-   Licensed under the Apache License, Version 2.0 (the \"License\");\n-   you may not use this file except in compliance with the License.\n-   You may obtain a copy of the License at\n-\n-       http://www.apache.org/licenses/LICENSE-2.0\n-\n-   Unless required by applicable law or agreed to in writing, software\n-   distributed under the License is distributed on an \"AS IS\" BASIS,\n-   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n-   See the License for the specific language governing permissions and\n-   limitations under the License."
        },
        {
            "sha": "0139df155baab8fa0b22b3de0b2a7215451e7ea9",
            "filename": "packages/next/src/compiled/@ampproject/toolbox-optimizer/index.js",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fcompiled%2F%40ampproject%2Ftoolbox-optimizer%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fcompiled%2F%40ampproject%2Ftoolbox-optimizer%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2F%40ampproject%2Ftoolbox-optimizer%2Findex.js?ref=643eb60de0e29684538448d9105a508de1699d50"
        },
        {
            "sha": "80d0fc56a9cc320758d8a9afbc2b343e6e38c9fe",
            "filename": "packages/next/src/compiled/@ampproject/toolbox-optimizer/package.json",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fcompiled%2F%40ampproject%2Ftoolbox-optimizer%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fcompiled%2F%40ampproject%2Ftoolbox-optimizer%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2F%40ampproject%2Ftoolbox-optimizer%2Fpackage.json?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1 +0,0 @@\n-{\"name\":\"@ampproject/toolbox-optimizer\",\"main\":\"index.js\",\"author\":\"AMPHTML Team\",\"license\":\"Apache-2.0\"}"
        },
        {
            "sha": "e419de69077d3212de757e97189b3bfdbcf20d22",
            "filename": "packages/next/src/compiled/amphtml-validator/index.js",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fcompiled%2Famphtml-validator%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fcompiled%2Famphtml-validator%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Famphtml-validator%2Findex.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1 +0,0 @@\n-(()=>{var e={873:(e,r,t)=>{\"use strict\";var n=t(742);var o=[];e.exports=asap;function asap(e){var r;if(o.length){r=o.pop()}else{r=new RawTask}r.task=e;r.domain=process.domain;n(r)}function RawTask(){this.task=null;this.domain=null}RawTask.prototype.call=function(){if(this.domain){this.domain.enter()}var e=true;try{this.task.call();e=false;if(this.domain){this.domain.exit()}}finally{if(e){n.requestFlush()}this.task=null;this.domain=null;o.push(this)}}},742:(e,r,t)=>{\"use strict\";var n;var o=typeof setImmediate===\"function\";e.exports=rawAsap;function rawAsap(e){if(!i.length){requestFlush();s=true}i[i.length]=e}var i=[];var s=false;var a=0;var u=1024;function flush(){while(a<i.length){var e=a;a=a+1;i[e].call();if(a>u){for(var r=0,t=i.length-a;r<t;r++){i[r]=i[r+a]}i.length-=a;a=0}}i.length=0;a=0;s=false}rawAsap.requestFlush=requestFlush;function requestFlush(){var e=process.domain;if(e){if(!n){n=t(639)}n.active=process.domain=null}if(s&&o){setImmediate(flush)}else{process.nextTick(flush)}if(e){n.active=process.domain=e}}},758:(e,r,t)=>{var n={};e[\"exports\"]=n;n.themes={};var o=t(837);var i=n.styles=t(77);var s=Object.defineProperties;var a=new RegExp(/[\\r\\n]+/g);n.supportsColor=t(725).supportsColor;if(typeof n.enabled===\"undefined\"){n.enabled=n.supportsColor()!==false}n.enable=function(){n.enabled=true};n.disable=function(){n.enabled=false};n.stripColors=n.strip=function(e){return(\"\"+e).replace(/\\x1B\\[\\d+m/g,\"\")};var u=n.stylize=function stylize(e,r){if(!n.enabled){return e+\"\"}var t=i[r];if(!t&&r in n){return n[r](e)}return t.open+e+t.close};var l=/[|\\\\{}()[\\]^$+*?.]/g;var escapeStringRegexp=function(e){if(typeof e!==\"string\"){throw new TypeError(\"Expected a string\")}return e.replace(l,\"\\\\$&\")};function build(e){var r=function builder(){return applyStyle.apply(builder,arguments)};r._styles=e;r.__proto__=c;return r}var f=function(){var e={};i.grey=i.gray;Object.keys(i).forEach((function(r){i[r].closeRe=new RegExp(escapeStringRegexp(i[r].close),\"g\");e[r]={get:function(){return build(this._styles.concat(r))}}}));return e}();var c=s((function colors(){}),f);function applyStyle(){var e=Array.prototype.slice.call(arguments);var r=e.map((function(e){if(e!=null&&e.constructor===String){return e}else{return o.inspect(e)}})).join(\" \");if(!n.enabled||!r){return r}var t=r.indexOf(\"\\n\")!=-1;var s=this._styles;var u=s.length;while(u--){var l=i[s[u]];r=l.open+r.replace(l.closeRe,l.open)+l.close;if(t){r=r.replace(a,(function(e){return l.close+e+l.open}))}}return r}n.setTheme=function(e){if(typeof e===\"string\"){console.log(\"colors.setTheme now only accepts an object, not a string.  \"+\"If you are trying to set a theme from a file, it is now your (the \"+\"caller's) responsibility to require the file.  The old syntax \"+\"looked like colors.setTheme(__dirname + \"+\"'/../themes/generic-logging.js'); The new syntax looks like \"+\"colors.setTheme(require(__dirname + \"+\"'/../themes/generic-logging.js'));\");return}for(var r in e){(function(r){n[r]=function(t){if(typeof e[r]===\"object\"){var o=t;for(var i in e[r]){o=n[e[r][i]](o)}return o}return n[e[r]](t)}})(r)}};function init(){var e={};Object.keys(f).forEach((function(r){e[r]={get:function(){return build([r])}}}));return e}var p=function sequencer(e,r){var t=r.split(\"\");t=t.map(e);return t.join(\"\")};n.trap=t(822);n.zalgo=t(576);n.maps={};n.maps.america=t(967)(n);n.maps.zebra=t(917)(n);n.maps.rainbow=t(410)(n);n.maps.random=t(409)(n);for(var d in n.maps){(function(e){n[e]=function(r){return p(n.maps[e],r)}})(d)}s(n,init())},822:e=>{e[\"exports\"]=function runTheTrap(e,r){var t=\"\";e=e||\"Run the trap, drop the bass\";e=e.split(\"\");var n={a:[\"@\",\"\",\"\",\"\",\"\",\"\",\"\"],b:[\"\",\"\",\"\",\"\",\"\",\"\"],c:[\"\",\"\",\"\"],d:[\"\",\"\",\"\",\"\",\"\",\"\"],e:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],f:[\"\"],g:[\"\"],h:[\"\",\"\",\"\",\"\",\"\",\"\"],i:[\"\"],j:[\"\"],k:[\"\",\"\",\"\",\"\"],l:[\"\"],m:[\"\",\"\",\"\",\"\",\"\",\"\"],n:[\"\",\"\",\"\",\"\",\"\",\"\"],o:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],p:[\"\",\"\"],q:[\"\"],r:[\"\",\"\",\"\",\"\",\"\",\"\"],s:[\"\",\"\",\"\",\"\"],t:[\"\",\"\",\"\"],u:[\"\",\"\"],v:[\"\"],w:[\"\",\"\",\"\",\"\"],x:[\"\",\"\",\"\",\"\"],y:[\"\",\"\",\"\"],z:[\"\",\"\"]};e.forEach((function(e){e=e.toLowerCase();var r=n[e]||[\" \"];var o=Math.floor(Math.random()*r.length);if(typeof n[e]!==\"undefined\"){t+=n[e][o]}else{t+=e}}));return t}},576:e=>{e[\"exports\"]=function zalgo(e,r){e=e||\"   he is here   \";var t={up:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],down:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],mid:[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\" \"]};var n=[].concat(t.up,t.down,t.mid);function randomNumber(e){var r=Math.floor(Math.random()*e);return r}function isChar(e){var r=false;n.filter((function(t){r=t===e}));return r}function heComes(e,r){var n=\"\";var o;var i;r=r||{};r[\"up\"]=typeof r[\"up\"]!==\"undefined\"?r[\"up\"]:true;r[\"mid\"]=typeof r[\"mid\"]!==\"undefined\"?r[\"mid\"]:true;r[\"down\"]=typeof r[\"down\"]!==\"undefined\"?r[\"down\"]:true;r[\"size\"]=typeof r[\"size\"]!==\"undefined\"?r[\"size\"]:\"maxi\";e=e.split(\"\");for(i in e){if(isChar(i)){continue}n=n+e[i];o={up:0,down:0,mid:0};switch(r.size){case\"mini\":o.up=randomNumber(8);o.mid=randomNumber(2);o.down=randomNumber(8);break;case\"maxi\":o.up=randomNumber(16)+3;o.mid=randomNumber(4)+1;o.down=randomNumber(64)+3;break;default:o.up=randomNumber(8)+1;o.mid=randomNumber(6)/2;o.down=randomNumber(8)+1;break}var s=[\"up\",\"mid\",\"down\"];for(var a in s){var u=s[a];for(var l=0;l<=o[u];l++){if(r[u]){n=n+t[u][randomNumber(t[u].length)]}}}}return n}return heComes(e,r)}},967:e=>{e[\"exports\"]=function(e){return function(r,t,n){if(r===\" \")return r;switch(t%3){case 0:return e.red(r);case 1:return e.white(r);case 2:return e.blue(r)}}}},410:e=>{e[\"exports\"]=function(e){var r=[\"red\",\"yellow\",\"green\",\"blue\",\"magenta\"];return function(t,n,o){if(t===\" \"){return t}else{return e[r[n++%r.length]](t)}}}},409:e=>{e[\"exports\"]=function(e){var r=[\"underline\",\"inverse\",\"grey\",\"yellow\",\"red\",\"green\",\"blue\",\"white\",\"cyan\",\"magenta\",\"brightYellow\",\"brightRed\",\"brightGreen\",\"brightBlue\",\"brightWhite\",\"brightCyan\",\"brightMagenta\"];return function(t,n,o){return t===\" \"?t:e[r[Math.round(Math.random()*(r.length-2))]](t)}}},917:e=>{e[\"exports\"]=function(e){return function(r,t,n){return t%2===0?r:e.inverse(r)}}},77:e=>{var r={};e[\"exports\"]=r;var t={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(t).forEach((function(e){var n=t[e];var o=r[e]=[];o.open=\"\u001b[\"+n[0]+\"m\";o.close=\"\u001b[\"+n[1]+\"m\"}))},274:e=>{\"use strict\";e.exports=function(e,r){r=r||process.argv;var t=r.indexOf(\"--\");var n=/^-{1,2}/.test(e)?\"\":\"--\";var o=r.indexOf(n+e);return o!==-1&&(t===-1?true:o<t)}},725:(e,r,t)=>{\"use strict\";var n=t(37);var o=t(274);var i=process.env;var s=void 0;if(o(\"no-color\")||o(\"no-colors\")||o(\"color=false\")){s=false}else if(o(\"color\")||o(\"colors\")||o(\"color=true\")||o(\"color=always\")){s=true}if(\"FORCE_COLOR\"in i){s=i.FORCE_COLOR.length===0||parseInt(i.FORCE_COLOR,10)!==0}function translateLevel(e){if(e===0){return false}return{level:e,hasBasic:true,has256:e>=2,has16m:e>=3}}function supportsColor(e){if(s===false){return 0}if(o(\"color=16m\")||o(\"color=full\")||o(\"color=truecolor\")){return 3}if(o(\"color=256\")){return 2}if(e&&!e.isTTY&&s!==true){return 0}var r=s?1:0;if(process.platform===\"win32\"){var t=n.release().split(\".\");if(Number(process.versions.node.split(\".\")[0])>=8&&Number(t[0])>=10&&Number(t[2])>=10586){return Number(t[2])>=14931?3:2}return 1}if(\"CI\"in i){if([\"TRAVIS\",\"CIRCLECI\",\"APPVEYOR\",\"GITLAB_CI\"].some((function(e){return e in i}))||i.CI_NAME===\"codeship\"){return 1}return r}if(\"TEAMCITY_VERSION\"in i){return/^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(i.TEAMCITY_VERSION)?1:0}if(\"TERM_PROGRAM\"in i){var a=parseInt((i.TERM_PROGRAM_VERSION||\"\").split(\".\")[0],10);switch(i.TERM_PROGRAM){case\"iTerm.app\":return a>=3?3:2;case\"Hyper\":return 3;case\"Apple_Terminal\":return 2}}if(/-256(color)?$/i.test(i.TERM)){return 2}if(/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)){return 1}if(\"COLORTERM\"in i){return 1}if(i.TERM===\"dumb\"){return r}return r}function getSupportLevel(e){var r=supportsColor(e);return translateLevel(r)}e.exports={supportsColor:getSupportLevel,stdout:getSupportLevel(process.stdout),stderr:getSupportLevel(process.stderr)}},915:(e,r,t)=>{var n=t(758);e[\"exports\"]=n},356:(e,r,t)=>{\"use strict\";e.exports=t(730)},52:(e,r,t)=>{\"use strict\";var n=t(742);function noop(){}var o=null;var i={};function getThen(e){try{return e.then}catch(e){o=e;return i}}function tryCallOne(e,r){try{return e(r)}catch(e){o=e;return i}}function tryCallTwo(e,r,t){try{e(r,t)}catch(e){o=e;return i}}e.exports=Promise;function Promise(e){if(typeof this!==\"object\"){throw new TypeError(\"Promises must be constructed via new\")}if(typeof e!==\"function\"){throw new TypeError(\"Promise constructor's argument is not a function\")}this._x=0;this._y=0;this._z=null;this._A=null;if(e===noop)return;doResolve(e,this)}Promise._B=null;Promise._C=null;Promise._D=noop;Promise.prototype.then=function(e,r){if(this.constructor!==Promise){return safeThen(this,e,r)}var t=new Promise(noop);handle(this,new Handler(e,r,t));return t};function safeThen(e,r,t){return new e.constructor((function(n,o){var i=new Promise(noop);i.then(n,o);handle(e,new Handler(r,t,i))}))}function handle(e,r){while(e._y===3){e=e._z}if(Promise._B){Promise._B(e)}if(e._y===0){if(e._x===0){e._x=1;e._A=r;return}if(e._x===1){e._x=2;e._A=[e._A,r];return}e._A.push(r);return}handleResolved(e,r)}function handleResolved(e,r){n((function(){var t=e._y===1?r.onFulfilled:r.onRejected;if(t===null){if(e._y===1){resolve(r.promise,e._z)}else{reject(r.promise,e._z)}return}var n=tryCallOne(t,e._z);if(n===i){reject(r.promise,o)}else{resolve(r.promise,n)}}))}function resolve(e,r){if(r===e){return reject(e,new TypeError(\"A promise cannot be resolved with itself.\"))}if(r&&(typeof r===\"object\"||typeof r===\"function\")){var t=getThen(r);if(t===i){return reject(e,o)}if(t===e.then&&r instanceof Promise){e._y=3;e._z=r;finale(e);return}else if(typeof t===\"function\"){doResolve(t.bind(r),e);return}}e._y=1;e._z=r;finale(e)}function reject(e,r){e._y=2;e._z=r;if(Promise._C){Promise._C(e,r)}finale(e)}function finale(e){if(e._x===1){handle(e,e._A);e._A=null}if(e._x===2){for(var r=0;r<e._A.length;r++){handle(e,e._A[r])}e._A=null}}function Handler(e,r,t){this.onFulfilled=typeof e===\"function\"?e:null;this.onRejected=typeof r===\"function\"?r:null;this.promise=t}function doResolve(e,r){var t=false;var n=tryCallTwo(e,(function(e){if(t)return;t=true;resolve(r,e)}),(function(e){if(t)return;t=true;reject(r,e)}));if(!t&&n===i){t=true;reject(r,o)}}},941:(e,r,t)=>{\"use strict\";var n=t(52);e.exports=n;n.prototype.done=function(e,r){var t=arguments.length?this.then.apply(this,arguments):this;t.then(null,(function(e){setTimeout((function(){throw e}),0)}))}},751:(e,r,t)=>{\"use strict\";var n=t(52);e.exports=n;var o=valuePromise(true);var i=valuePromise(false);var s=valuePromise(null);var a=valuePromise(undefined);var u=valuePromise(0);var l=valuePromise(\"\");function valuePromise(e){var r=new n(n._D);r._y=1;r._z=e;return r}n.resolve=function(e){if(e instanceof n)return e;if(e===null)return s;if(e===undefined)return a;if(e===true)return o;if(e===false)return i;if(e===0)return u;if(e===\"\")return l;if(typeof e===\"object\"||typeof e===\"function\"){try{var r=e.then;if(typeof r===\"function\"){return new n(r.bind(e))}}catch(e){return new n((function(r,t){t(e)}))}}return valuePromise(e)};var iterableToArray=function(e){if(typeof Array.from===\"function\"){iterableToArray=Array.from;return Array.from(e)}iterableToArray=function(e){return Array.prototype.slice.call(e)};return Array.prototype.slice.call(e)};n.all=function(e){var r=iterableToArray(e);return new n((function(e,t){if(r.length===0)return e([]);var o=r.length;function res(i,s){if(s&&(typeof s===\"object\"||typeof s===\"function\")){if(s instanceof n&&s.then===n.prototype.then){while(s._y===3){s=s._z}if(s._y===1)return res(i,s._z);if(s._y===2)t(s._z);s.then((function(e){res(i,e)}),t);return}else{var a=s.then;if(typeof a===\"function\"){var u=new n(a.bind(s));u.then((function(e){res(i,e)}),t);return}}}r[i]=s;if(--o===0){e(r)}}for(var i=0;i<r.length;i++){res(i,r[i])}}))};function onSettledFulfill(e){return{status:\"fulfilled\",value:e}}function onSettledReject(e){return{status:\"rejected\",reason:e}}function mapAllSettled(e){if(e&&(typeof e===\"object\"||typeof e===\"function\")){if(e instanceof n&&e.then===n.prototype.then){return e.then(onSettledFulfill,onSettledReject)}var r=e.then;if(typeof r===\"function\"){return new n(r.bind(e)).then(onSettledFulfill,onSettledReject)}}return onSettledFulfill(e)}n.allSettled=function(e){return n.all(iterableToArray(e).map(mapAllSettled))};n.reject=function(e){return new n((function(r,t){t(e)}))};n.race=function(e){return new n((function(r,t){iterableToArray(e).forEach((function(e){n.resolve(e).then(r,t)}))}))};n.prototype[\"catch\"]=function(e){return this.then(null,e)};function getAggregateError(e){if(typeof AggregateError===\"function\"){return new AggregateError(e,\"All promises were rejected\")}var r=new Error(\"All promises were rejected\");r.name=\"AggregateError\";r.errors=e;return r}n.any=function promiseAny(e){return new n((function(r,t){var o=iterableToArray(e);var i=false;var s=[];function resolveOnce(e){if(!i){i=true;r(e)}}function rejectionCheck(e){s.push(e);if(s.length===o.length){t(getAggregateError(s))}}if(o.length===0){t(getAggregateError(s))}else{o.forEach((function(e){n.resolve(e).then(resolveOnce,rejectionCheck)}))}}))}},419:(e,r,t)=>{\"use strict\";var n=t(52);e.exports=n;n.prototype.finally=function(e){return this.then((function(r){return n.resolve(e()).then((function(){return r}))}),(function(r){return n.resolve(e()).then((function(){throw r}))}))}},730:(e,r,t)=>{\"use strict\";e.exports=t(52);t(941);t(419);t(751);t(247);t(611)},247:(e,r,t)=>{\"use strict\";var n=t(52);var o=t(873);e.exports=n;n.denodeify=function(e,r){if(typeof r===\"number\"&&r!==Infinity){return denodeifyWithCount(e,r)}else{return denodeifyWithoutCount(e)}};var i=\"function (err, res) {\"+\"if (err) { rj(err); } else { rs(res); }\"+\"}\";function denodeifyWithCount(e,r){var t=[];for(var o=0;o<r;o++){t.push(\"a\"+o)}var s=[\"return function (\"+t.join(\",\")+\") {\",\"var self = this;\",\"return new Promise(function (rs, rj) {\",\"var res = fn.call(\",[\"self\"].concat(t).concat([i]).join(\",\"),\");\",\"if (res &&\",'(typeof res === \"object\" || typeof res === \"function\") &&','typeof res.then === \"function\"',\") {rs(res);}\",\"});\",\"};\"].join(\"\");return Function([\"Promise\",\"fn\"],s)(n,e)}function denodeifyWithoutCount(e){var r=Math.max(e.length-1,3);var t=[];for(var o=0;o<r;o++){t.push(\"a\"+o)}var s=[\"return function (\"+t.join(\",\")+\") {\",\"var self = this;\",\"var args;\",\"var argLength = arguments.length;\",\"if (arguments.length > \"+r+\") {\",\"args = new Array(arguments.length + 1);\",\"for (var i = 0; i < arguments.length; i++) {\",\"args[i] = arguments[i];\",\"}\",\"}\",\"return new Promise(function (rs, rj) {\",\"var cb = \"+i+\";\",\"var res;\",\"switch (argLength) {\",t.concat([\"extra\"]).map((function(e,r){return\"case \"+r+\":\"+\"res = fn.call(\"+[\"self\"].concat(t.slice(0,r)).concat(\"cb\").join(\",\")+\");\"+\"break;\"})).join(\"\"),\"default:\",\"args[argLength] = cb;\",\"res = fn.apply(self, args);\",\"}\",\"if (res &&\",'(typeof res === \"object\" || typeof res === \"function\") &&','typeof res.then === \"function\"',\") {rs(res);}\",\"});\",\"};\"].join(\"\");return Function([\"Promise\",\"fn\"],s)(n,e)}n.nodeify=function(e){return function(){var r=Array.prototype.slice.call(arguments);var t=typeof r[r.length-1]===\"function\"?r.pop():null;var i=this;try{return e.apply(this,arguments).nodeify(t,i)}catch(e){if(t===null||typeof t==\"undefined\"){return new n((function(r,t){t(e)}))}else{o((function(){t.call(i,e)}))}}}};n.prototype.nodeify=function(e,r){if(typeof e!=\"function\")return this;this.then((function(t){o((function(){e.call(r,null,t)}))}),(function(t){o((function(){e.call(r,t)}))}))}},611:(e,r,t)=>{\"use strict\";var n=t(52);e.exports=n;n.enableSynchronous=function(){n.prototype.isPending=function(){return this.getState()==0};n.prototype.isFulfilled=function(){return this.getState()==1};n.prototype.isRejected=function(){return this.getState()==2};n.prototype.getValue=function(){if(this._y===3){return this._z.getValue()}if(!this.isFulfilled()){throw new Error(\"Cannot get a value of an unfulfilled promise.\")}return this._z};n.prototype.getReason=function(){if(this._y===3){return this._z.getReason()}if(!this.isRejected()){throw new Error(\"Cannot get a rejection reason of a non-rejected promise.\")}return this._z};n.prototype.getState=function(){if(this._y===3){return this._z.getState()}if(this._y===-1||this._y===-2){return 0}return this._y}};n.disableSynchronous=function(){n.prototype.isPending=undefined;n.prototype.isFulfilled=undefined;n.prototype.isRejected=undefined;n.prototype.getValue=undefined;n.prototype.getReason=undefined;n.prototype.getState=undefined}},639:e=>{\"use strict\";e.exports=require(\"domain\")},147:e=>{\"use strict\";e.exports=require(\"fs\")},685:e=>{\"use strict\";e.exports=require(\"http\")},687:e=>{\"use strict\";e.exports=require(\"https\")},318:e=>{\"use strict\";e.exports=require(\"next/dist/compiled/commander\")},37:e=>{\"use strict\";e.exports=require(\"os\")},17:e=>{\"use strict\";e.exports=require(\"path\")},837:e=>{\"use strict\";e.exports=require(\"util\")},144:e=>{\"use strict\";e.exports=require(\"vm\")}};var r={};function __nccwpck_require__(t){var n=r[t];if(n!==undefined){return n.exports}var o=r[t]={exports:{}};var i=true;try{e[t](o,o.exports,__nccwpck_require__);i=false}finally{if(i)delete r[t]}return o.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var t={};(()=>{\"use strict\";var e=t;const r=__nccwpck_require__(915);const n=__nccwpck_require__(147);const o=__nccwpck_require__(685);const i=__nccwpck_require__(687);const s=__nccwpck_require__(17);const{program:a}=__nccwpck_require__(318);const u=__nccwpck_require__(356);const l=__nccwpck_require__(837);const f=__nccwpck_require__(144);const c=\"amphtml-validator\";function hasPrefix(e,r){return e.indexOf(r)==0}function isHttpOrHttpsUrl(e){return hasPrefix(e,\"http://\")||hasPrefix(e,\"https://\")}function readFromFile(e){return new u((function(r,t){n.readFile(e,\"utf8\",(function(e,n){if(e){t(e)}else{r(n.trim())}}))}))}function readFromReadable(e,r){return new u((function(t,n){const o=[];r.setEncoding(\"utf8\");r.on(\"data\",(function(e){o.push(e)}));r.on(\"end\",(function(){t(o.join(\"\"))}));r.on(\"error\",(function(r){n(new Error(\"Could not read from \"+e+\" - \"+r.message))}))}))}function readFromStdin(){return readFromReadable(\"stdin\",process.stdin).then((function(e){process.stdin.resume();return e}))}function readFromUrl(e,r){return new u((function(t,n){const s=hasPrefix(e,\"http://\")?o:i;const a=s.request(e,(function(r){if(r.statusCode!==200){r.resume();n(new Error(\"Unable to fetch \"+e+\" - HTTP Status \"+r.statusCode))}else{t(r)}}));a.setHeader(\"User-Agent\",r);a.on(\"error\",(function(r){n(new Error(\"Unable to fetch \"+e+\" - \"+r.message))}));a.end()})).then(readFromReadable.bind(null,e))}function ValidationResult(){this.status=\"UNKNOWN\";this.errors=[]}function ValidationError(){this.severity=\"UNKNOWN_SEVERITY\";this.line=1;this.col=0;this.message=\"\";this.specUrl=null;this.code=\"UNKNOWN_CODE\";this.params=[]}function Validator(e){this.sandbox=f.createContext();try{new f.Script(e).runInContext(this.sandbox)}catch(e){throw new Error(\"Could not instantiate validator_wasm.js - \"+e.message)}}Validator.prototype.init=function(){if(this.sandbox.amp.validator.init){return this.sandbox.amp.validator.init()}else{return u.resolve(undefined)}};Validator.prototype.validateString=function(e,r){const t=this.sandbox.amp.validator.validateString(e,r);const n=new ValidationResult;n.status=t.status;for(let e=0;e<t.errors.length;e++){const r=t.errors[e];const o=new ValidationError;o.severity=r.severity;o.line=r.line;o.col=r.col;o.message=this.sandbox.amp.validator.renderErrorMessage(r);o.specUrl=r.specUrl;o.code=r.code;o.params=r.params;n.errors.push(o)}return n};const p={};function getInstance(e,r){const t=e||\"https://cdn.ampproject.org/v0/validator_wasm.js\";const n=r||c;if(p.hasOwnProperty(t)){return u.resolve(p[t])}const o=isHttpOrHttpsUrl(t)?readFromUrl(t,n):readFromFile(t);return o.then((function(e){let r;try{r=new Validator(e)}catch(e){throw e}p[t]=r;return r})).then((function(e){return e.init().then((()=>e))}))}e.getInstance=getInstance;function newInstance(e){return new Validator(e)}e.newInstance=newInstance;function logValidationResult(e,t,n){if(t.status===\"PASS\"){process.stdout.write(e+\": \"+(n?r.green(\"PASS\"):\"PASS\")+\"\\n\")}for(let o=0;o<t.errors.length;o++){const i=t.errors[o];let s=e+\":\"+i.line+\":\"+i.col+\" \";if(n){s+=(i.severity===\"ERROR\"?r.red:r.magenta)(i.message)}else{s+=i.message}if(i.specUrl){s+=\" (see \"+i.specUrl+\")\"}process.stderr.write(s+\"\\n\")}}function main(){a.usage(\"[options] <fileOrUrlOrMinus...>\\n\\n\"+'  Validates the files or urls provided as arguments. If \"-\" is\\n'+\"  specified, reads from stdin instead.\").option(\"--validator_js <fileOrUrl>\",\"The Validator Javascript.\\n\"+\"  Latest published version by default, or\\n\"+\"  dist/validator_minified.js (built with build.py)\\n\"+\"  for development.\",\"https://cdn.ampproject.org/v0/validator_wasm.js\").option(\"--user-agent <userAgent>\",\"User agent string to use in requests.\",c).option(\"--html_format <AMP|AMP4ADS|AMP4EMAIL>\",\"The input format to be validated.\\n\"+\"  AMP by default.\",\"AMP\").option(\"--format <color|text|json>\",\"How to format the output.\\n\"+'  \"color\" displays errors/warnings/success in\\n'+\"          red/orange/green.\\n\"+'  \"text\"  avoids color (e.g., useful in terminals not\\n'+\"          supporting color).\\n\"+'  \"json\"  emits json corresponding to the ValidationResult\\n'+\"          message in validator.proto.\",\"color\").parse(process.argv);const e=a.opts();if(e.length===0){a.outputHelp();process.exit(1)}if(e.html_format!==\"AMP\"&&e.html_format!==\"AMP4ADS\"&&e.html_format!==\"AMP4EMAIL\"){process.stderr.write('--html_format must be set to \"AMP\", \"AMP4ADS\", or \"AMP4EMAIL\".\\n',(function(){process.exit(1)}))}if(e.format!==\"color\"&&e.format!==\"text\"&&e.format!==\"json\"){process.stderr.write('--format must be set to \"color\", \"text\", or \"json\".\\n',(function(){process.exit(1)}))}const t=[];for(let r=0;r<a.args.length;r++){const n=a.args[r];if(n===\"-\"){t.push(readFromStdin())}else if(isHttpOrHttpsUrl(n)){t.push(readFromUrl(n,e.userAgent))}else{t.push(readFromFile(n))}}getInstance(e.validator_js,e.userAgent).then((function(n){u.all(t).then((function(r){const t={};let o=false;for(let i=0;i<r.length;i++){const s=n.validateString(r[i],e.html_format);if(e.format===\"json\"){t[a.args[i]]=s}else{logValidationResult(a.args[i],s,e.format===\"color\"?true:false)}if(s.status!==\"PASS\"){o=true}}if(e.format===\"json\"){process.stdout.write(JSON.stringify(t)+\"\\n\",(function(){process.exit(o?1:0)}))}else if(o){process.stderr.write(\"\",(function(){process.exit(1)}))}else{process.stdout.write(\"\",(function(){process.exit(0)}))}})).catch((function(t){process.stderr.write((e.format==\"color\"?r.red(t.message):t.message)+\"\\n\",(function(){process.exit(1)}))}))})).catch((function(t){process.stderr.write((e.format==\"color\"?r.red(t.message):t.message)+\"\\n\",(function(){process.exit(1)}))}))}e.main=main})();module.exports=t})();\n\\ No newline at end of file"
        },
        {
            "sha": "3619fdbe2f352a4637f396f85c8c985fb3f96f27",
            "filename": "packages/next/src/compiled/amphtml-validator/package.json",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fcompiled%2Famphtml-validator%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fcompiled%2Famphtml-validator%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Famphtml-validator%2Fpackage.json?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1 +0,0 @@\n-{\"name\":\"amphtml-validator\",\"main\":\"index.js\",\"author\":\"The AMP HTML Authors\",\"license\":\"Apache-2.0\"}"
        },
        {
            "sha": "06732bb59e1fc8c0ac8dd88a1179d65db9a494de",
            "filename": "packages/next/src/compiled/amphtml-validator/validator_wasm.js",
            "status": "removed",
            "additions": 0,
            "deletions": 2672,
            "changes": 2672,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fcompiled%2Famphtml-validator%2Fvalidator_wasm.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fcompiled%2Famphtml-validator%2Fvalidator_wasm.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Famphtml-validator%2Fvalidator_wasm.js?ref=643eb60de0e29684538448d9105a508de1699d50"
        },
        {
            "sha": "f785757cd63f863c42f19d4f5a417141d6c4a890",
            "filename": "packages/next/src/compiled/lru-cache/LICENSE",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fcompiled%2Flru-cache%2FLICENSE",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fcompiled%2Flru-cache%2FLICENSE",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Flru-cache%2FLICENSE?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -1,6 +1,6 @@\n The ISC License\n \n-Copyright (c) Isaac Z. Schlueter and Contributors\n+Copyright (c) 2010-2023 Isaac Z. Schlueter and Contributors\n \n Permission to use, copy, modify, and/or distribute this software for any\n purpose with or without fee is hereby granted, provided that the above"
        },
        {
            "sha": "5d3e3456b2f181b82fc2a6dda1a6d674ca1cd48f",
            "filename": "packages/next/src/compiled/lru-cache/index.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fcompiled%2Flru-cache%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fcompiled%2Flru-cache%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Flru-cache%2Findex.js?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -1 +1 @@\n-(()=>{\"use strict\";var t={443:(t,e,i)=>{const s=i(401);const n=Symbol(\"max\");const l=Symbol(\"length\");const r=Symbol(\"lengthCalculator\");const h=Symbol(\"allowStale\");const a=Symbol(\"maxAge\");const o=Symbol(\"dispose\");const u=Symbol(\"noDisposeOnSet\");const f=Symbol(\"lruList\");const p=Symbol(\"cache\");const v=Symbol(\"updateAgeOnGet\");const naiveLength=()=>1;class LRUCache{constructor(t){if(typeof t===\"number\")t={max:t};if(!t)t={};if(t.max&&(typeof t.max!==\"number\"||t.max<0))throw new TypeError(\"max must be a non-negative number\");const e=this[n]=t.max||Infinity;const i=t.length||naiveLength;this[r]=typeof i!==\"function\"?naiveLength:i;this[h]=t.stale||false;if(t.maxAge&&typeof t.maxAge!==\"number\")throw new TypeError(\"maxAge must be a number\");this[a]=t.maxAge||0;this[o]=t.dispose;this[u]=t.noDisposeOnSet||false;this[v]=t.updateAgeOnGet||false;this.reset()}set max(t){if(typeof t!==\"number\"||t<0)throw new TypeError(\"max must be a non-negative number\");this[n]=t||Infinity;trim(this)}get max(){return this[n]}set allowStale(t){this[h]=!!t}get allowStale(){return this[h]}set maxAge(t){if(typeof t!==\"number\")throw new TypeError(\"maxAge must be a non-negative number\");this[a]=t;trim(this)}get maxAge(){return this[a]}set lengthCalculator(t){if(typeof t!==\"function\")t=naiveLength;if(t!==this[r]){this[r]=t;this[l]=0;this[f].forEach((t=>{t.length=this[r](t.value,t.key);this[l]+=t.length}))}trim(this)}get lengthCalculator(){return this[r]}get length(){return this[l]}get itemCount(){return this[f].length}rforEach(t,e){e=e||this;for(let i=this[f].tail;i!==null;){const s=i.prev;forEachStep(this,t,i,e);i=s}}forEach(t,e){e=e||this;for(let i=this[f].head;i!==null;){const s=i.next;forEachStep(this,t,i,e);i=s}}keys(){return this[f].toArray().map((t=>t.key))}values(){return this[f].toArray().map((t=>t.value))}reset(){if(this[o]&&this[f]&&this[f].length){this[f].forEach((t=>this[o](t.key,t.value)))}this[p]=new Map;this[f]=new s;this[l]=0}dump(){return this[f].map((t=>isStale(this,t)?false:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)})).toArray().filter((t=>t))}dumpLru(){return this[f]}set(t,e,i){i=i||this[a];if(i&&typeof i!==\"number\")throw new TypeError(\"maxAge must be a number\");const s=i?Date.now():0;const h=this[r](e,t);if(this[p].has(t)){if(h>this[n]){del(this,this[p].get(t));return false}const r=this[p].get(t);const a=r.value;if(this[o]){if(!this[u])this[o](t,a.value)}a.now=s;a.maxAge=i;a.value=e;this[l]+=h-a.length;a.length=h;this.get(t);trim(this);return true}const v=new Entry(t,e,h,s,i);if(v.length>this[n]){if(this[o])this[o](t,e);return false}this[l]+=v.length;this[f].unshift(v);this[p].set(t,this[f].head);trim(this);return true}has(t){if(!this[p].has(t))return false;const e=this[p].get(t).value;return!isStale(this,e)}get(t){return get(this,t,true)}peek(t){return get(this,t,false)}pop(){const t=this[f].tail;if(!t)return null;del(this,t);return t.value}del(t){del(this,this[p].get(t))}load(t){this.reset();const e=Date.now();for(let i=t.length-1;i>=0;i--){const s=t[i];const n=s.e||0;if(n===0)this.set(s.k,s.v);else{const t=n-e;if(t>0){this.set(s.k,s.v,t)}}}}prune(){this[p].forEach(((t,e)=>get(this,e,false)))}}const get=(t,e,i)=>{const s=t[p].get(e);if(s){const e=s.value;if(isStale(t,e)){del(t,s);if(!t[h])return undefined}else{if(i){if(t[v])s.value.now=Date.now();t[f].unshiftNode(s)}}return e.value}};const isStale=(t,e)=>{if(!e||!e.maxAge&&!t[a])return false;const i=Date.now()-e.now;return e.maxAge?i>e.maxAge:t[a]&&i>t[a]};const trim=t=>{if(t[l]>t[n]){for(let e=t[f].tail;t[l]>t[n]&&e!==null;){const i=e.prev;del(t,e);e=i}}};const del=(t,e)=>{if(e){const i=e.value;if(t[o])t[o](i.key,i.value);t[l]-=i.length;t[p].delete(i.key);t[f].removeNode(e)}};class Entry{constructor(t,e,i,s,n){this.key=t;this.value=e;this.length=i;this.now=s;this.maxAge=n||0}}const forEachStep=(t,e,i,s)=>{let n=i.value;if(isStale(t,n)){del(t,i);if(!t[h])n=undefined}if(n)e.call(s,n.value,n.key,t)};t.exports=LRUCache},414:t=>{t.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next){yield t.value}}}},401:(t,e,i)=>{t.exports=Yallist;Yallist.Node=Node;Yallist.create=Yallist;function Yallist(t){var e=this;if(!(e instanceof Yallist)){e=new Yallist}e.tail=null;e.head=null;e.length=0;if(t&&typeof t.forEach===\"function\"){t.forEach((function(t){e.push(t)}))}else if(arguments.length>0){for(var i=0,s=arguments.length;i<s;i++){e.push(arguments[i])}}return e}Yallist.prototype.removeNode=function(t){if(t.list!==this){throw new Error(\"removing node which does not belong to this list\")}var e=t.next;var i=t.prev;if(e){e.prev=i}if(i){i.next=e}if(t===this.head){this.head=e}if(t===this.tail){this.tail=i}t.list.length--;t.next=null;t.prev=null;t.list=null;return e};Yallist.prototype.unshiftNode=function(t){if(t===this.head){return}if(t.list){t.list.removeNode(t)}var e=this.head;t.list=this;t.next=e;if(e){e.prev=t}this.head=t;if(!this.tail){this.tail=t}this.length++};Yallist.prototype.pushNode=function(t){if(t===this.tail){return}if(t.list){t.list.removeNode(t)}var e=this.tail;t.list=this;t.prev=e;if(e){e.next=t}this.tail=t;if(!this.head){this.head=t}this.length++};Yallist.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++){push(this,arguments[t])}return this.length};Yallist.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++){unshift(this,arguments[t])}return this.length};Yallist.prototype.pop=function(){if(!this.tail){return undefined}var t=this.tail.value;this.tail=this.tail.prev;if(this.tail){this.tail.next=null}else{this.head=null}this.length--;return t};Yallist.prototype.shift=function(){if(!this.head){return undefined}var t=this.head.value;this.head=this.head.next;if(this.head){this.head.prev=null}else{this.tail=null}this.length--;return t};Yallist.prototype.forEach=function(t,e){e=e||this;for(var i=this.head,s=0;i!==null;s++){t.call(e,i.value,s,this);i=i.next}};Yallist.prototype.forEachReverse=function(t,e){e=e||this;for(var i=this.tail,s=this.length-1;i!==null;s--){t.call(e,i.value,s,this);i=i.prev}};Yallist.prototype.get=function(t){for(var e=0,i=this.head;i!==null&&e<t;e++){i=i.next}if(e===t&&i!==null){return i.value}};Yallist.prototype.getReverse=function(t){for(var e=0,i=this.tail;i!==null&&e<t;e++){i=i.prev}if(e===t&&i!==null){return i.value}};Yallist.prototype.map=function(t,e){e=e||this;var i=new Yallist;for(var s=this.head;s!==null;){i.push(t.call(e,s.value,this));s=s.next}return i};Yallist.prototype.mapReverse=function(t,e){e=e||this;var i=new Yallist;for(var s=this.tail;s!==null;){i.push(t.call(e,s.value,this));s=s.prev}return i};Yallist.prototype.reduce=function(t,e){var i;var s=this.head;if(arguments.length>1){i=e}else if(this.head){s=this.head.next;i=this.head.value}else{throw new TypeError(\"Reduce of empty list with no initial value\")}for(var n=0;s!==null;n++){i=t(i,s.value,n);s=s.next}return i};Yallist.prototype.reduceReverse=function(t,e){var i;var s=this.tail;if(arguments.length>1){i=e}else if(this.tail){s=this.tail.prev;i=this.tail.value}else{throw new TypeError(\"Reduce of empty list with no initial value\")}for(var n=this.length-1;s!==null;n--){i=t(i,s.value,n);s=s.prev}return i};Yallist.prototype.toArray=function(){var t=new Array(this.length);for(var e=0,i=this.head;i!==null;e++){t[e]=i.value;i=i.next}return t};Yallist.prototype.toArrayReverse=function(){var t=new Array(this.length);for(var e=0,i=this.tail;i!==null;e++){t[e]=i.value;i=i.prev}return t};Yallist.prototype.slice=function(t,e){e=e||this.length;if(e<0){e+=this.length}t=t||0;if(t<0){t+=this.length}var i=new Yallist;if(e<t||e<0){return i}if(t<0){t=0}if(e>this.length){e=this.length}for(var s=0,n=this.head;n!==null&&s<t;s++){n=n.next}for(;n!==null&&s<e;s++,n=n.next){i.push(n.value)}return i};Yallist.prototype.sliceReverse=function(t,e){e=e||this.length;if(e<0){e+=this.length}t=t||0;if(t<0){t+=this.length}var i=new Yallist;if(e<t||e<0){return i}if(t<0){t=0}if(e>this.length){e=this.length}for(var s=this.length,n=this.tail;n!==null&&s>e;s--){n=n.prev}for(;n!==null&&s>t;s--,n=n.prev){i.push(n.value)}return i};Yallist.prototype.splice=function(t,e,...i){if(t>this.length){t=this.length-1}if(t<0){t=this.length+t}for(var s=0,n=this.head;n!==null&&s<t;s++){n=n.next}var l=[];for(var s=0;n&&s<e;s++){l.push(n.value);n=this.removeNode(n)}if(n===null){n=this.tail}if(n!==this.head&&n!==this.tail){n=n.prev}for(var s=0;s<i.length;s++){n=insert(this,n,i[s])}return l};Yallist.prototype.reverse=function(){var t=this.head;var e=this.tail;for(var i=t;i!==null;i=i.prev){var s=i.prev;i.prev=i.next;i.next=s}this.head=e;this.tail=t;return this};function insert(t,e,i){var s=e===t.head?new Node(i,null,e,t):new Node(i,e,e.next,t);if(s.next===null){t.tail=s}if(s.prev===null){t.head=s}t.length++;return s}function push(t,e){t.tail=new Node(e,t.tail,null,t);if(!t.head){t.head=t.tail}t.length++}function unshift(t,e){t.head=new Node(e,null,t.head,t);if(!t.tail){t.tail=t.head}t.length++}function Node(t,e,i,s){if(!(this instanceof Node)){return new Node(t,e,i,s)}this.list=s;this.value=t;if(e){e.next=this;this.prev=e}else{this.prev=null}if(i){i.prev=this;this.next=i}else{this.next=null}}try{i(414)(Yallist)}catch(t){}}};var e={};function __nccwpck_require__(i){var s=e[i];if(s!==undefined){return s.exports}var n=e[i]={exports:{}};var l=true;try{t[i](n,n.exports,__nccwpck_require__);l=false}finally{if(l)delete e[i]}return n.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var i=__nccwpck_require__(443);module.exports=i})();\n\\ No newline at end of file\n+(()=>{var t={78:t=>{const e=typeof performance===\"object\"&&performance&&typeof performance.now===\"function\"?performance:Date;const i=typeof AbortController===\"function\";const s=i?AbortController:class AbortController{constructor(){this.signal=new r}abort(t=new Error(\"This operation was aborted\")){this.signal.reason=this.signal.reason||t;this.signal.aborted=true;this.signal.dispatchEvent({type:\"abort\",target:this.signal})}};const n=typeof AbortSignal===\"function\";const h=typeof s.AbortSignal===\"function\";const r=n?AbortSignal:h?s.AbortController:class AbortSignal{constructor(){this.reason=undefined;this.aborted=false;this._listeners=[]}dispatchEvent(t){if(t.type===\"abort\"){this.aborted=true;this.onabort(t);this._listeners.forEach((e=>e(t)),this)}}onabort(){}addEventListener(t,e){if(t===\"abort\"){this._listeners.push(e)}}removeEventListener(t,e){if(t===\"abort\"){this._listeners=this._listeners.filter((t=>t!==e))}}};const o=new Set;const deprecatedOption=(t,e)=>{const i=`LRU_CACHE_OPTION_${t}`;if(shouldWarn(i)){warn(i,`${t} option`,`options.${e}`,LRUCache)}};const deprecatedMethod=(t,e)=>{const i=`LRU_CACHE_METHOD_${t}`;if(shouldWarn(i)){const{prototype:s}=LRUCache;const{get:n}=Object.getOwnPropertyDescriptor(s,t);warn(i,`${t} method`,`cache.${e}()`,n)}};const deprecatedProperty=(t,e)=>{const i=`LRU_CACHE_PROPERTY_${t}`;if(shouldWarn(i)){const{prototype:s}=LRUCache;const{get:n}=Object.getOwnPropertyDescriptor(s,t);warn(i,`${t} property`,`cache.${e}`,n)}};const emitWarning=(...t)=>{typeof process===\"object\"&&process&&typeof process.emitWarning===\"function\"?process.emitWarning(...t):console.error(...t)};const shouldWarn=t=>!o.has(t);const warn=(t,e,i,s)=>{o.add(t);const n=`The ${e} is deprecated. Please use ${i} instead.`;emitWarning(n,\"DeprecationWarning\",t,s)};const isPosInt=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t);const getUintArray=t=>!isPosInt(t)?null:t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?ZeroArray:null;class ZeroArray extends Array{constructor(t){super(t);this.fill(0)}}class Stack{constructor(t){if(t===0){return[]}const e=getUintArray(t);this.heap=new e(t);this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class LRUCache{constructor(t={}){const{max:e=0,ttl:i,ttlResolution:s=1,ttlAutopurge:n,updateAgeOnGet:h,updateAgeOnHas:r,allowStale:a,dispose:l,disposeAfter:c,noDisposeOnSet:f,noUpdateTTL:u,maxSize:d=0,maxEntrySize:p=0,sizeCalculation:g,fetchMethod:S,fetchContext:y,noDeleteOnFetchRejection:w,noDeleteOnStaleGet:_,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:z,ignoreFetchAbort:L}=t;const{length:v,maxAge:x,stale:b}=t instanceof LRUCache?{}:t;if(e!==0&&!isPosInt(e)){throw new TypeError(\"max option must be a nonnegative integer\")}const A=e?getUintArray(e):Array;if(!A){throw new Error(\"invalid max value: \"+e)}this.max=e;this.maxSize=d;this.maxEntrySize=p||this.maxSize;this.sizeCalculation=g||v;if(this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize){throw new TypeError(\"cannot set sizeCalculation without setting maxSize or maxEntrySize\")}if(typeof this.sizeCalculation!==\"function\"){throw new TypeError(\"sizeCalculation set to non-function\")}}this.fetchMethod=S||null;if(this.fetchMethod&&typeof this.fetchMethod!==\"function\"){throw new TypeError(\"fetchMethod must be a function if specified\")}this.fetchContext=y;if(!this.fetchMethod&&y!==undefined){throw new TypeError(\"cannot set fetchContext without fetchMethod\")}this.keyMap=new Map;this.keyList=new Array(e).fill(null);this.valList=new Array(e).fill(null);this.next=new A(e);this.prev=new A(e);this.head=0;this.tail=0;this.free=new Stack(e);this.initialFill=1;this.size=0;if(typeof l===\"function\"){this.dispose=l}if(typeof c===\"function\"){this.disposeAfter=c;this.disposed=[]}else{this.disposeAfter=null;this.disposed=null}this.noDisposeOnSet=!!f;this.noUpdateTTL=!!u;this.noDeleteOnFetchRejection=!!w;this.allowStaleOnFetchRejection=!!m;this.allowStaleOnFetchAbort=!!z;this.ignoreFetchAbort=!!L;if(this.maxEntrySize!==0){if(this.maxSize!==0){if(!isPosInt(this.maxSize)){throw new TypeError(\"maxSize must be a positive integer if specified\")}}if(!isPosInt(this.maxEntrySize)){throw new TypeError(\"maxEntrySize must be a positive integer if specified\")}this.initializeSizeTracking()}this.allowStale=!!a||!!b;this.noDeleteOnStaleGet=!!_;this.updateAgeOnGet=!!h;this.updateAgeOnHas=!!r;this.ttlResolution=isPosInt(s)||s===0?s:1;this.ttlAutopurge=!!n;this.ttl=i||x||0;if(this.ttl){if(!isPosInt(this.ttl)){throw new TypeError(\"ttl must be a positive integer if specified\")}this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0){throw new TypeError(\"At least one of max, maxSize, or ttl is required\")}if(!this.ttlAutopurge&&!this.max&&!this.maxSize){const t=\"LRU_CACHE_UNBOUNDED\";if(shouldWarn(t)){o.add(t);const e=\"TTL caching without ttlAutopurge, max, or maxSize can \"+\"result in unbounded memory consumption.\";emitWarning(e,\"UnboundedCacheWarning\",t,LRUCache)}}if(b){deprecatedOption(\"stale\",\"allowStale\")}if(x){deprecatedOption(\"maxAge\",\"ttl\")}if(v){deprecatedOption(\"length\",\"sizeCalculation\")}}getRemainingTTL(t){return this.has(t,{updateAgeOnHas:false})?Infinity:0}initializeTTLTracking(){this.ttls=new ZeroArray(this.max);this.starts=new ZeroArray(this.max);this.setItemTTL=(t,i,s=e.now())=>{this.starts[t]=i!==0?s:0;this.ttls[t]=i;if(i!==0&&this.ttlAutopurge){const e=setTimeout((()=>{if(this.isStale(t)){this.delete(this.keyList[t])}}),i+1);if(e.unref){e.unref()}}};this.updateItemAge=t=>{this.starts[t]=this.ttls[t]!==0?e.now():0};this.statusTTL=(e,i)=>{if(e){e.ttl=this.ttls[i];e.start=this.starts[i];e.now=t||getNow();e.remainingTTL=e.now+e.ttl-e.start}};let t=0;const getNow=()=>{const i=e.now();if(this.ttlResolution>0){t=i;const e=setTimeout((()=>t=0),this.ttlResolution);if(e.unref){e.unref()}}return i};this.getRemainingTTL=e=>{const i=this.keyMap.get(e);if(i===undefined){return 0}return this.ttls[i]===0||this.starts[i]===0?Infinity:this.starts[i]+this.ttls[i]-(t||getNow())};this.isStale=e=>this.ttls[e]!==0&&this.starts[e]!==0&&(t||getNow())-this.starts[e]>this.ttls[e]}updateItemAge(t){}statusTTL(t,e){}setItemTTL(t,e,i){}isStale(t){return false}initializeSizeTracking(){this.calculatedSize=0;this.sizes=new ZeroArray(this.max);this.removeItemSize=t=>{this.calculatedSize-=this.sizes[t];this.sizes[t]=0};this.requireSize=(t,e,i,s)=>{if(this.isBackgroundFetch(e)){return 0}if(!isPosInt(i)){if(s){if(typeof s!==\"function\"){throw new TypeError(\"sizeCalculation must be a function\")}i=s(e,t);if(!isPosInt(i)){throw new TypeError(\"sizeCalculation return invalid (expect positive integer)\")}}else{throw new TypeError(\"invalid size value (must be positive integer). \"+\"When maxSize or maxEntrySize is used, sizeCalculation or size \"+\"must be set.\")}}return i};this.addItemSize=(t,e,i)=>{this.sizes[t]=e;if(this.maxSize){const e=this.maxSize-this.sizes[t];while(this.calculatedSize>e){this.evict(true)}}this.calculatedSize+=this.sizes[t];if(i){i.entrySize=e;i.totalCalculatedSize=this.calculatedSize}}}removeItemSize(t){}addItemSize(t,e){}requireSize(t,e,i,s){if(i||s){throw new TypeError(\"cannot set size without setting maxSize or maxEntrySize on cache\")}}*indexes({allowStale:t=this.allowStale}={}){if(this.size){for(let e=this.tail;true;){if(!this.isValidIndex(e)){break}if(t||!this.isStale(e)){yield e}if(e===this.head){break}else{e=this.prev[e]}}}}*rindexes({allowStale:t=this.allowStale}={}){if(this.size){for(let e=this.head;true;){if(!this.isValidIndex(e)){break}if(t||!this.isStale(e)){yield e}if(e===this.tail){break}else{e=this.next[e]}}}}isValidIndex(t){return t!==undefined&&this.keyMap.get(this.keyList[t])===t}*entries(){for(const t of this.indexes()){if(this.valList[t]!==undefined&&this.keyList[t]!==undefined&&!this.isBackgroundFetch(this.valList[t])){yield[this.keyList[t],this.valList[t]]}}}*rentries(){for(const t of this.rindexes()){if(this.valList[t]!==undefined&&this.keyList[t]!==undefined&&!this.isBackgroundFetch(this.valList[t])){yield[this.keyList[t],this.valList[t]]}}}*keys(){for(const t of this.indexes()){if(this.keyList[t]!==undefined&&!this.isBackgroundFetch(this.valList[t])){yield this.keyList[t]}}}*rkeys(){for(const t of this.rindexes()){if(this.keyList[t]!==undefined&&!this.isBackgroundFetch(this.valList[t])){yield this.keyList[t]}}}*values(){for(const t of this.indexes()){if(this.valList[t]!==undefined&&!this.isBackgroundFetch(this.valList[t])){yield this.valList[t]}}}*rvalues(){for(const t of this.rindexes()){if(this.valList[t]!==undefined&&!this.isBackgroundFetch(this.valList[t])){yield this.valList[t]}}}[Symbol.iterator](){return this.entries()}find(t,e){for(const i of this.indexes()){const s=this.valList[i];const n=this.isBackgroundFetch(s)?s.__staleWhileFetching:s;if(n===undefined)continue;if(t(n,this.keyList[i],this)){return this.get(this.keyList[i],e)}}}forEach(t,e=this){for(const i of this.indexes()){const s=this.valList[i];const n=this.isBackgroundFetch(s)?s.__staleWhileFetching:s;if(n===undefined)continue;t.call(e,n,this.keyList[i],this)}}rforEach(t,e=this){for(const i of this.rindexes()){const s=this.valList[i];const n=this.isBackgroundFetch(s)?s.__staleWhileFetching:s;if(n===undefined)continue;t.call(e,n,this.keyList[i],this)}}get prune(){deprecatedMethod(\"prune\",\"purgeStale\");return this.purgeStale}purgeStale(){let t=false;for(const e of this.rindexes({allowStale:true})){if(this.isStale(e)){this.delete(this.keyList[e]);t=true}}return t}dump(){const t=[];for(const i of this.indexes({allowStale:true})){const s=this.keyList[i];const n=this.valList[i];const h=this.isBackgroundFetch(n)?n.__staleWhileFetching:n;if(h===undefined)continue;const r={value:h};if(this.ttls){r.ttl=this.ttls[i];const t=e.now()-this.starts[i];r.start=Math.floor(Date.now()-t)}if(this.sizes){r.size=this.sizes[i]}t.unshift([s,r])}return t}load(t){this.clear();for(const[i,s]of t){if(s.start){const t=Date.now()-s.start;s.start=e.now()-t}this.set(i,s.value,s)}}dispose(t,e,i){}set(t,e,{ttl:i=this.ttl,start:s,noDisposeOnSet:n=this.noDisposeOnSet,size:h=0,sizeCalculation:r=this.sizeCalculation,noUpdateTTL:o=this.noUpdateTTL,status:a}={}){h=this.requireSize(t,e,h,r);if(this.maxEntrySize&&h>this.maxEntrySize){if(a){a.set=\"miss\";a.maxEntrySizeExceeded=true}this.delete(t);return this}let l=this.size===0?undefined:this.keyMap.get(t);if(l===undefined){l=this.newIndex();this.keyList[l]=t;this.valList[l]=e;this.keyMap.set(t,l);this.next[this.tail]=l;this.prev[l]=this.tail;this.tail=l;this.size++;this.addItemSize(l,h,a);if(a){a.set=\"add\"}o=false}else{this.moveToTail(l);const i=this.valList[l];if(e!==i){if(this.isBackgroundFetch(i)){i.__abortController.abort(new Error(\"replaced\"))}else{if(!n){this.dispose(i,t,\"set\");if(this.disposeAfter){this.disposed.push([i,t,\"set\"])}}}this.removeItemSize(l);this.valList[l]=e;this.addItemSize(l,h,a);if(a){a.set=\"replace\";const t=i&&this.isBackgroundFetch(i)?i.__staleWhileFetching:i;if(t!==undefined)a.oldValue=t}}else if(a){a.set=\"update\"}}if(i!==0&&this.ttl===0&&!this.ttls){this.initializeTTLTracking()}if(!o){this.setItemTTL(l,i,s)}this.statusTTL(a,l);if(this.disposeAfter){while(this.disposed.length){this.disposeAfter(...this.disposed.shift())}}return this}newIndex(){if(this.size===0){return this.tail}if(this.size===this.max&&this.max!==0){return this.evict(false)}if(this.free.length!==0){return this.free.pop()}return this.initialFill++}pop(){if(this.size){const t=this.valList[this.head];this.evict(true);return t}}evict(t){const e=this.head;const i=this.keyList[e];const s=this.valList[e];if(this.isBackgroundFetch(s)){s.__abortController.abort(new Error(\"evicted\"))}else{this.dispose(s,i,\"evict\");if(this.disposeAfter){this.disposed.push([s,i,\"evict\"])}}this.removeItemSize(e);if(t){this.keyList[e]=null;this.valList[e]=null;this.free.push(e)}this.head=this.next[e];this.keyMap.delete(i);this.size--;return e}has(t,{updateAgeOnHas:e=this.updateAgeOnHas,status:i}={}){const s=this.keyMap.get(t);if(s!==undefined){if(!this.isStale(s)){if(e){this.updateItemAge(s)}if(i)i.has=\"hit\";this.statusTTL(i,s);return true}else if(i){i.has=\"stale\";this.statusTTL(i,s)}}else if(i){i.has=\"miss\"}return false}peek(t,{allowStale:e=this.allowStale}={}){const i=this.keyMap.get(t);if(i!==undefined&&(e||!this.isStale(i))){const t=this.valList[i];return this.isBackgroundFetch(t)?t.__staleWhileFetching:t}}backgroundFetch(t,e,i,n){const h=e===undefined?undefined:this.valList[e];if(this.isBackgroundFetch(h)){return h}const r=new s;if(i.signal){i.signal.addEventListener(\"abort\",(()=>r.abort(i.signal.reason)))}const o={signal:r.signal,options:i,context:n};const cb=(s,n=false)=>{const{aborted:h}=r.signal;const l=i.ignoreFetchAbort&&s!==undefined;if(i.status){if(h&&!n){i.status.fetchAborted=true;i.status.fetchError=r.signal.reason;if(l)i.status.fetchAbortIgnored=true}else{i.status.fetchResolved=true}}if(h&&!l&&!n){return fetchFail(r.signal.reason)}if(this.valList[e]===a){if(s===undefined){if(a.__staleWhileFetching){this.valList[e]=a.__staleWhileFetching}else{this.delete(t)}}else{if(i.status)i.status.fetchUpdated=true;this.set(t,s,o.options)}}return s};const eb=t=>{if(i.status){i.status.fetchRejected=true;i.status.fetchError=t}return fetchFail(t)};const fetchFail=s=>{const{aborted:n}=r.signal;const h=n&&i.allowStaleOnFetchAbort;const o=h||i.allowStaleOnFetchRejection;const l=o||i.noDeleteOnFetchRejection;if(this.valList[e]===a){const i=!l||a.__staleWhileFetching===undefined;if(i){this.delete(t)}else if(!h){this.valList[e]=a.__staleWhileFetching}}if(o){if(i.status&&a.__staleWhileFetching!==undefined){i.status.returnedStale=true}return a.__staleWhileFetching}else if(a.__returned===a){throw s}};const pcall=(e,s)=>{this.fetchMethod(t,h,o).then((t=>e(t)),s);r.signal.addEventListener(\"abort\",(()=>{if(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort){e();if(i.allowStaleOnFetchAbort){e=t=>cb(t,true)}}}))};if(i.status)i.status.fetchDispatched=true;const a=new Promise(pcall).then(cb,eb);a.__abortController=r;a.__staleWhileFetching=h;a.__returned=null;if(e===undefined){this.set(t,a,{...o.options,status:undefined});e=this.keyMap.get(t)}else{this.valList[e]=a}return a}isBackgroundFetch(t){return t&&typeof t===\"object\"&&typeof t.then===\"function\"&&Object.prototype.hasOwnProperty.call(t,\"__staleWhileFetching\")&&Object.prototype.hasOwnProperty.call(t,\"__returned\")&&(t.__returned===t||t.__returned===null)}async fetch(t,{allowStale:e=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:n=this.ttl,noDisposeOnSet:h=this.noDisposeOnSet,size:r=0,sizeCalculation:o=this.sizeCalculation,noUpdateTTL:a=this.noUpdateTTL,noDeleteOnFetchRejection:l=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:c=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:u=this.allowStaleOnFetchAbort,fetchContext:d=this.fetchContext,forceRefresh:p=false,status:g,signal:S}={}){if(!this.fetchMethod){if(g)g.fetch=\"get\";return this.get(t,{allowStale:e,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:g})}const y={allowStale:e,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:n,noDisposeOnSet:h,size:r,sizeCalculation:o,noUpdateTTL:a,noDeleteOnFetchRejection:l,allowStaleOnFetchRejection:c,allowStaleOnFetchAbort:u,ignoreFetchAbort:f,status:g,signal:S};let w=this.keyMap.get(t);if(w===undefined){if(g)g.fetch=\"miss\";const e=this.backgroundFetch(t,w,y,d);return e.__returned=e}else{const s=this.valList[w];if(this.isBackgroundFetch(s)){const t=e&&s.__staleWhileFetching!==undefined;if(g){g.fetch=\"inflight\";if(t)g.returnedStale=true}return t?s.__staleWhileFetching:s.__returned=s}const n=this.isStale(w);if(!p&&!n){if(g)g.fetch=\"hit\";this.moveToTail(w);if(i){this.updateItemAge(w)}this.statusTTL(g,w);return s}const h=this.backgroundFetch(t,w,y,d);const r=h.__staleWhileFetching!==undefined;const o=r&&e;if(g){g.fetch=r&&n?\"stale\":\"refresh\";if(o&&n)g.returnedStale=true}return o?h.__staleWhileFetching:h.__returned=h}}get(t,{allowStale:e=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:n}={}){const h=this.keyMap.get(t);if(h!==undefined){const r=this.valList[h];const o=this.isBackgroundFetch(r);this.statusTTL(n,h);if(this.isStale(h)){if(n)n.get=\"stale\";if(!o){if(!s){this.delete(t)}if(n)n.returnedStale=e;return e?r:undefined}else{if(n){n.returnedStale=e&&r.__staleWhileFetching!==undefined}return e?r.__staleWhileFetching:undefined}}else{if(n)n.get=\"hit\";if(o){return r.__staleWhileFetching}this.moveToTail(h);if(i){this.updateItemAge(h)}return r}}else if(n){n.get=\"miss\"}}connect(t,e){this.prev[e]=t;this.next[t]=e}moveToTail(t){if(t!==this.tail){if(t===this.head){this.head=this.next[t]}else{this.connect(this.prev[t],this.next[t])}this.connect(this.tail,t);this.tail=t}}get del(){deprecatedMethod(\"del\",\"delete\");return this.delete}delete(t){let e=false;if(this.size!==0){const i=this.keyMap.get(t);if(i!==undefined){e=true;if(this.size===1){this.clear()}else{this.removeItemSize(i);const e=this.valList[i];if(this.isBackgroundFetch(e)){e.__abortController.abort(new Error(\"deleted\"))}else{this.dispose(e,t,\"delete\");if(this.disposeAfter){this.disposed.push([e,t,\"delete\"])}}this.keyMap.delete(t);this.keyList[i]=null;this.valList[i]=null;if(i===this.tail){this.tail=this.prev[i]}else if(i===this.head){this.head=this.next[i]}else{this.next[this.prev[i]]=this.next[i];this.prev[this.next[i]]=this.prev[i]}this.size--;this.free.push(i)}}}if(this.disposed){while(this.disposed.length){this.disposeAfter(...this.disposed.shift())}}return e}clear(){for(const t of this.rindexes({allowStale:true})){const e=this.valList[t];if(this.isBackgroundFetch(e)){e.__abortController.abort(new Error(\"deleted\"))}else{const i=this.keyList[t];this.dispose(e,i,\"delete\");if(this.disposeAfter){this.disposed.push([e,i,\"delete\"])}}}this.keyMap.clear();this.valList.fill(null);this.keyList.fill(null);if(this.ttls){this.ttls.fill(0);this.starts.fill(0)}if(this.sizes){this.sizes.fill(0)}this.head=0;this.tail=0;this.initialFill=1;this.free.length=0;this.calculatedSize=0;this.size=0;if(this.disposed){while(this.disposed.length){this.disposeAfter(...this.disposed.shift())}}}get reset(){deprecatedMethod(\"reset\",\"clear\");return this.clear}get length(){deprecatedProperty(\"length\",\"size\");return this.size}static get AbortController(){return s}static get AbortSignal(){return r}}t.exports=LRUCache}};var e={};function __nccwpck_require__(i){var s=e[i];if(s!==undefined){return s.exports}var n=e[i]={exports:{}};var h=true;try{t[i](n,n.exports,__nccwpck_require__);h=false}finally{if(h)delete e[i]}return n.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var i=__nccwpck_require__(78);module.exports=i})();\n\\ No newline at end of file"
        },
        {
            "sha": "88ae2ea801d707ef1f86af7a6b146742a0926893",
            "filename": "packages/next/src/export/helpers/get-amp-html-validator.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 40,
            "changes": 40,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fexport%2Fhelpers%2Fget-amp-html-validator.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fexport%2Fhelpers%2Fget-amp-html-validator.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fexport%2Fhelpers%2Fget-amp-html-validator.ts?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,40 +0,0 @@\n-import AmpHtmlValidator, {\n-  type Validator,\n-} from 'next/dist/compiled/amphtml-validator'\n-\n-const instancePromises = new Map<string | undefined, Promise<Validator>>()\n-\n-/**\n- * `AmpHtmlValidator.getInstance` is buggy when multiple calls to getInstance occur in parallel.\n- * This wrapper is a workaround for that.\n- *\n- * `AmpHtmlValidator.getInstance(validatorPath)` attempts to re-use the instances across multiple calls\n- * by stashing existing instances in `instanceByValidatorJs`.\n- * However, when creating a fresh instance, it is added to `instanceByValidatorJs` before `instance.init()` is finished:\n- * https://github.com/ampproject/amphtml/blob/0c8eaba73ca8f5c462a642fa91901a29e6304f6e/validator/js/nodejs/index.js#L309-L313\n- *\n- * which means that, if a concurrent call to `AmpHtmlValidator.getInstance(validatorPath)` happens before the original `init()` is done,\n- * then we'll get back an uninitialized or partially initialized instance:\n- * https://github.com/ampproject/amphtml/blob/0c8eaba73ca8f5c462a642fa91901a29e6304f6e/validator/js/nodejs/index.js#L292-L294\n- *\n- * And, since `instance.init()` is the part that handles loading the webassembly code, this race results in\n- * the dreaded \"AssertionError: Assertion failed: WebAssembly is uninitialized\" error.\n- * As a workaround, we properly dedupe instance creation on our own.\n- * */\n-export function getAmpValidatorInstance(\n-  validatorPath: string | undefined\n-): Promise<Validator> {\n-  let promise = instancePromises.get(validatorPath)\n-  if (!promise) {\n-    // NOTE: if `validatorPath` is undefined, `AmpHtmlValidator` will load the code from its default URL\n-    promise = AmpHtmlValidator.getInstance(validatorPath)\n-    instancePromises.set(validatorPath, promise)\n-  }\n-  return promise\n-}\n-\n-export function getBundledAmpValidatorFilepath() {\n-  return require.resolve(\n-    'next/dist/compiled/amphtml-validator/validator_wasm.js'\n-  )\n-}"
        },
        {
            "sha": "01022102e55fdfb9d4bf94e3a435b8b0ae2c8a3f",
            "filename": "packages/next/src/export/index.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 35,
            "changes": 35,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fexport%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fexport%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fexport%2Findex.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -19,8 +19,6 @@ import { existsSync, promises as fs } from 'fs'\n import '../server/require-hook'\n \n import { dirname, join, resolve, sep, relative } from 'path'\n-import { formatAmpMessages } from '../build/output/index'\n-import type { AmpPageStatus } from '../build/output/index'\n import * as Log from '../build/output/log'\n import {\n   RSC_SEGMENT_SUFFIX,\n@@ -366,9 +364,6 @@ async function exportAppImpl(\n     dev: false,\n     basePath: nextConfig.basePath,\n     trailingSlash: nextConfig.trailingSlash,\n-    canonicalBase: nextConfig.amp?.canonicalBase || '',\n-    ampSkipValidation: nextConfig.experimental.amp?.skipValidation || false,\n-    ampOptimizerConfig: nextConfig.experimental.amp?.optimizer || undefined,\n     locales: i18n?.locales,\n     locale: i18n?.defaultLocale,\n     defaultLocale: i18n?.defaultLocale,\n@@ -561,8 +556,6 @@ async function exportAppImpl(\n     ? outDir\n     : join(outDir, '_next/data', buildId)\n \n-  const ampValidations: AmpPageStatus = {}\n-\n   const publicDir = join(dir, CLIENT_PUBLIC_FILES_PATH)\n   // Copy public directory\n   if (!options.buildExport && existsSync(publicDir)) {\n@@ -700,8 +693,6 @@ async function exportAppImpl(\n     }\n   }\n \n-  let hadValidationError = false\n-\n   const collector: ExportAppResult = {\n     byPath: new Map(),\n     byPage: new Map(),\n@@ -727,14 +718,6 @@ async function exportAppImpl(\n       )\n     }\n \n-    // Capture any amp validations.\n-    if (result.ampValidations) {\n-      for (const validation of result.ampValidations) {\n-        ampValidations[validation.page] = validation.result\n-        hadValidationError ||= validation.result.errors.length > 0\n-      }\n-    }\n-\n     if (options.buildExport) {\n       // Update path info by path.\n       const info = collector.byPath.get(path) ?? {}\n@@ -865,10 +848,6 @@ async function exportAppImpl(\n             subFolders && route !== '/index' ? `${sep}index` : ''\n           }.html`\n         )\n-        const ampHtmlDest = join(\n-          outDir,\n-          `${route}.amp${subFolders ? `${sep}index` : ''}.html`\n-        )\n         const jsonDest = isAppPath\n           ? join(\n               outDir,\n@@ -887,11 +866,6 @@ async function exportAppImpl(\n         await fs.copyFile(htmlSrc, htmlDest)\n         await fs.copyFile(jsonSrc, jsonDest)\n \n-        if (existsSync(`${orig}.amp.html`)) {\n-          await fs.mkdir(dirname(ampHtmlDest), { recursive: true })\n-          await fs.copyFile(`${orig}.amp.html`, ampHtmlDest)\n-        }\n-\n         const segmentsDir = `${orig}${RSC_SEGMENTS_DIR_SUFFIX}`\n \n         if (isAppPath && existsSync(segmentsDir)) {\n@@ -925,15 +899,6 @@ async function exportAppImpl(\n     )\n   }\n \n-  if (Object.keys(ampValidations).length) {\n-    console.log(formatAmpMessages(ampValidations))\n-  }\n-  if (hadValidationError) {\n-    throw new ExportError(\n-      `AMP Validation caused the export to fail. https://nextjs.org/docs/messages/amp-export-validation`\n-    )\n-  }\n-\n   if (failedExportAttemptsByPage.size > 0) {\n     const failedPages = Array.from(failedExportAttemptsByPage.keys())\n     throw new ExportError("
        },
        {
            "sha": "0c3c1d0d0720c8e775bd758493407416d5e89e10",
            "filename": "packages/next/src/export/routes/pages.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 132,
            "changes": 133,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fexport%2Froutes%2Fpages.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fexport%2Froutes%2Fpages.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fexport%2Froutes%2Fpages.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -5,7 +5,6 @@ import type {\n   RenderOpts,\n } from '../../server/render'\n import type { LoadComponentsReturnType } from '../../server/load-components'\n-import type { AmpValidation } from '../types'\n import type { NextParsedUrlQuery } from '../../server/request-meta'\n import type { Params } from '../../server/request/params'\n \n@@ -15,20 +14,14 @@ import type {\n   MockedRequest,\n   MockedResponse,\n } from '../../server/lib/mock-request'\n-import { isInAmpMode } from '../../shared/lib/amp-mode'\n import {\n   HTML_CONTENT_TYPE_HEADER,\n   NEXT_DATA_SUFFIX,\n   SERVER_PROPS_EXPORT_ERROR,\n } from '../../lib/constants'\n import { isBailoutToCSRError } from '../../shared/lib/lazy-dynamic/bailout-to-csr'\n-import { FileType, fileExists } from '../../lib/file-exists'\n import { lazyRenderPagesPage } from '../../server/route-modules/pages/module.render'\n import type { MultiFileWriter } from '../../lib/multi-file-writer'\n-import {\n-  getAmpValidatorInstance,\n-  getBundledAmpValidatorFilepath,\n-} from '../helpers/get-amp-html-validator'\n \n /**\n  * Renders & exports a page associated with the /pages directory\n@@ -42,10 +35,6 @@ export async function exportPagesPage(\n   params: Params | undefined,\n   htmlFilepath: string,\n   htmlFilename: string,\n-  ampPath: string,\n-  subFolders: boolean,\n-  outDir: string,\n-  ampValidatorPath: string | undefined,\n   pagesDataDir: string,\n   buildExport: boolean,\n   isDynamic: boolean,\n@@ -56,19 +45,6 @@ export async function exportPagesPage(\n   components: LoadComponentsReturnType,\n   fileWriter: MultiFileWriter\n ): Promise<ExportRouteResult | undefined> {\n-  const ampState = {\n-    ampFirst: components.pageConfig?.amp === true,\n-    hasQuery: Boolean(query.amp),\n-    hybrid: components.pageConfig?.amp === 'hybrid',\n-  }\n-\n-  if (!ampValidatorPath) {\n-    ampValidatorPath = getBundledAmpValidatorFilepath()\n-  }\n-\n-  const inAmpMode = isInAmpMode(ampState)\n-  const hybridAmp = ampState.hybrid\n-\n   if (components.getServerSideProps) {\n     throw new Error(`Error for page ${page}: ${SERVER_PROPS_EXPORT_ERROR}`)\n   }\n@@ -133,123 +109,17 @@ export async function exportPagesPage(\n \n   const ssgNotFound = renderResult?.metadata.isNotFound\n \n-  const ampValidations: AmpValidation[] = []\n-\n-  const validateAmp = async (\n-    rawAmpHtml: string,\n-    ampPageName: string,\n-    validatorPath: string | undefined\n-  ) => {\n-    const validator = await getAmpValidatorInstance(validatorPath)\n-    const result = validator.validateString(rawAmpHtml)\n-    const errors = result.errors.filter((error) => {\n-      if (error.severity === 'ERROR') {\n-        // Unclear yet if these actually prevent the page from being indexed by the AMP cache.\n-        // These are coming from React so all we can do is ignore them for now.\n-\n-        // <link rel=\"expect\" blocking=\"render\" />\n-        // https://github.com/ampproject/amphtml/issues/40279\n-        if (\n-          error.code === 'DISALLOWED_ATTR' &&\n-          error.params[0] === 'blocking' &&\n-          error.params[1] === 'link'\n-        ) {\n-          return false\n-        }\n-        // <template> without type\n-        // https://github.com/ampproject/amphtml/issues/40280\n-        if (\n-          error.code === 'MANDATORY_ATTR_MISSING' &&\n-          error.params[0] === 'type' &&\n-          error.params[1] === 'template'\n-        ) {\n-          return false\n-        }\n-        // <template> without type\n-        // https://github.com/ampproject/amphtml/issues/40280\n-        if (\n-          error.code === 'MISSING_REQUIRED_EXTENSION' &&\n-          error.params[0] === 'template' &&\n-          error.params[1] === 'amp-mustache'\n-        ) {\n-          return false\n-        }\n-        return true\n-      }\n-      return false\n-    })\n-    const warnings = result.errors.filter((e) => e.severity !== 'ERROR')\n-\n-    if (warnings.length || errors.length) {\n-      ampValidations.push({\n-        page: ampPageName,\n-        result: {\n-          errors,\n-          warnings,\n-        },\n-      })\n-    }\n-  }\n-\n   const html =\n     renderResult && !renderResult.isNull ? renderResult.toUnchunkedString() : ''\n \n-  let ampRenderResult: RenderResult | undefined\n-\n-  if (inAmpMode && !renderOpts.ampSkipValidation) {\n-    if (!ssgNotFound) {\n-      await validateAmp(html, path, ampValidatorPath)\n-    }\n-  } else if (hybridAmp) {\n-    const ampHtmlFilename = subFolders\n-      ? join(ampPath, 'index.html')\n-      : `${ampPath}.html`\n-\n-    const ampHtmlFilepath = join(outDir, ampHtmlFilename)\n-\n-    const exists = await fileExists(ampHtmlFilepath, FileType.File)\n-    if (!exists) {\n-      try {\n-        ampRenderResult = await lazyRenderPagesPage(\n-          req,\n-          res,\n-          page,\n-          { ...searchAndDynamicParams, amp: '1' },\n-          renderOpts,\n-          sharedContext,\n-          renderContext\n-        )\n-      } catch (err) {\n-        if (!isBailoutToCSRError(err)) throw err\n-      }\n-\n-      const ampHtml =\n-        ampRenderResult && !ampRenderResult.isNull\n-          ? ampRenderResult.toUnchunkedString()\n-          : ''\n-      if (!renderOpts.ampSkipValidation) {\n-        await validateAmp(ampHtml, page + '?amp=1', ampValidatorPath)\n-      }\n-\n-      fileWriter.append(ampHtmlFilepath, ampHtml)\n-    }\n-  }\n-\n-  const metadata = renderResult?.metadata || ampRenderResult?.metadata || {}\n+  const metadata = renderResult?.metadata || {}\n   if (metadata.pageData) {\n     const dataFile = join(\n       pagesDataDir,\n       htmlFilename.replace(/\\.html$/, NEXT_DATA_SUFFIX)\n     )\n \n     fileWriter.append(dataFile, JSON.stringify(metadata.pageData))\n-\n-    if (hybridAmp) {\n-      fileWriter.append(\n-        dataFile.replace(/\\.json$/, '.amp.json'),\n-        JSON.stringify(metadata.pageData)\n-      )\n-    }\n   }\n \n   if (!ssgNotFound) {\n@@ -258,7 +128,6 @@ export async function exportPagesPage(\n   }\n \n   return {\n-    ampValidations,\n     cacheControl: metadata.cacheControl ?? {\n       revalidate: false,\n       expire: undefined,"
        },
        {
            "sha": "7514fe3bc78a8eaeeb8b61ee8542e98d2ee8f88b",
            "filename": "packages/next/src/export/types.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 11,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fexport%2Ftypes.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fexport%2Ftypes.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fexport%2Ftypes.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -2,7 +2,6 @@ import type { RenderOptsPartial as AppRenderOptsPartial } from '../server/app-re\n import type { RenderOptsPartial as PagesRenderOptsPartial } from '../server/render'\n import type { LoadComponentsReturnType } from '../server/load-components'\n import type { OutgoingHttpHeaders } from 'http'\n-import type AmpHtmlValidator from 'next/dist/compiled/amphtml-validator'\n import type { ExportPathMap, NextConfigComplete } from '../server/config-shared'\n import type { CacheControl } from '../server/lib/cache-control'\n import type { NextEnabledDirectories } from '../server/base-server'\n@@ -14,14 +13,6 @@ import type { FetchMetrics } from '../server/base-http'\n import type { RouteMetadata } from './routes/types'\n import type { RenderResumeDataCache } from '../server/resume-data-cache/resume-data-cache'\n \n-export interface AmpValidation {\n-  page: string\n-  result: {\n-    errors: AmpHtmlValidator.ValidationError[]\n-    warnings: AmpHtmlValidator.ValidationError[]\n-  }\n-}\n-\n export type ExportPathEntry = ExportPathMap[keyof ExportPathMap] & {\n   path: string\n }\n@@ -51,7 +42,6 @@ export interface ExportPageInput {\n   outDir: string\n   pagesDataDir: string\n   renderOpts: WorkerRenderOptsPartial\n-  ampValidatorPath?: string\n   trailingSlash?: boolean\n   buildExport?: boolean\n   serverRuntimeConfig: { [key: string]: any }\n@@ -69,7 +59,6 @@ export interface ExportPageInput {\n \n export type ExportRouteResult =\n   | {\n-      ampValidations?: AmpValidation[]\n       cacheControl: CacheControl\n       metadata?: Partial<RouteMetadata>\n       ssgNotFound?: boolean"
        },
        {
            "sha": "d2b89f71c5ab4d8a47c9d3252b55120feca20f72",
            "filename": "packages/next/src/export/worker.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fexport%2Fworker.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fexport%2Fworker.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fexport%2Fworker.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -81,7 +81,6 @@ async function exportPageImpl(\n     disableOptimizedLoading,\n     debugOutput = false,\n     enableExperimentalReact,\n-    ampValidatorPath,\n     trailingSlash,\n     sriEnabled,\n     renderOpts: commonRenderOpts,\n@@ -128,8 +127,6 @@ async function exportPageImpl(\n   const outDir = isAppDir ? join(distDir, 'server/app') : commonOutDir\n \n   const filePath = normalizePagePath(path)\n-  const ampPath = `${filePath}.amp`\n-  let renderAmpPath = ampPath\n \n   let updatedPath = exportPath._ssgPath || path\n   let locale = exportPath._locale || commonRenderOpts.locale\n@@ -140,10 +137,6 @@ async function exportPageImpl(\n     if (localePathResult.detectedLocale) {\n       updatedPath = localePathResult.pathname\n       locale = localePathResult.detectedLocale\n-\n-      if (locale === commonRenderOpts.defaultLocale) {\n-        renderAmpPath = `${normalizePagePath(updatedPath)}.amp`\n-      }\n     }\n   }\n \n@@ -263,7 +256,6 @@ async function exportPageImpl(\n   const renderOpts: WorkerRenderOpts = {\n     ...components,\n     ...commonRenderOpts,\n-    ampPath: renderAmpPath,\n     params,\n     optimizeCss,\n     disableOptimizedLoading,\n@@ -324,10 +316,6 @@ async function exportPageImpl(\n     params,\n     htmlFilepath,\n     htmlFilename,\n-    ampPath,\n-    subFolders,\n-    outDir,\n-    ampValidatorPath,\n     pagesDataDir,\n     buildExport,\n     isDynamic,\n@@ -413,8 +401,6 @@ export async function exportPages(\n             outDir,\n             pagesDataDir,\n             renderOpts,\n-            ampValidatorPath:\n-              nextConfig.experimental.amp?.validator || undefined,\n             trailingSlash: nextConfig.trailingSlash,\n             serverRuntimeConfig: nextConfig.serverRuntimeConfig,\n             subFolders: nextConfig.trailingSlash && !options.buildExport,"
        },
        {
            "sha": "4858c0265b3dd4f8f044bd377885550f4c7ae15e",
            "filename": "packages/next/src/lib/turbopack-warning.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Flib%2Fturbopack-warning.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Flib%2Fturbopack-warning.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Flib%2Fturbopack-warning.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -7,10 +7,6 @@ import {\n } from '../shared/lib/constants'\n \n const unsupportedTurbopackNextConfigOptions = [\n-  // is this supported?\n-  // 'amp',\n-  // 'experimental.amp',\n-\n   // Left to be implemented (priority)\n   // 'experimental.clientRouterFilter',\n   // 'experimental.optimizePackageImports',"
        },
        {
            "sha": "2a7b5404aadbc7906046588b58fb582641a3f1dd",
            "filename": "packages/next/src/pages/_document.tsx",
            "status": "modified",
            "additions": 43,
            "deletions": 269,
            "changes": 312,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fpages%2F_document.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fpages%2F_document.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fpages%2F_document.tsx?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -53,14 +53,10 @@ const largePageDataWarnings = new Set<string>()\n \n function getDocumentFiles(\n   buildManifest: BuildManifest,\n-  pathname: string,\n-  inAmpMode: boolean\n+  pathname: string\n ): DocumentFiles {\n   const sharedFiles: readonly string[] = getPageFiles(buildManifest, '/_app')\n-  const pageFiles: readonly string[] =\n-    process.env.NEXT_RUNTIME !== 'edge' && inAmpMode\n-      ? []\n-      : getPageFiles(buildManifest, pathname)\n+  const pageFiles: readonly string[] = getPageFiles(buildManifest, pathname)\n \n   return {\n     sharedFiles,\n@@ -102,50 +98,6 @@ function hasComponentProps(child: any): child is React.ReactElement<any> {\n   return !!child && !!child.props\n }\n \n-function AmpStyles({\n-  styles,\n-}: {\n-  styles?: React.ReactElement[] | Iterable<React.ReactNode>\n-}) {\n-  if (!styles) return null\n-\n-  // try to parse styles from fragment for backwards compat\n-  const curStyles: React.ReactElement<any>[] = Array.isArray(styles)\n-    ? (styles as React.ReactElement[])\n-    : []\n-  if (\n-    // @ts-ignore Property 'props' does not exist on type ReactElement\n-    styles.props &&\n-    // @ts-ignore Property 'props' does not exist on type ReactElement\n-    Array.isArray(styles.props.children)\n-  ) {\n-    const hasStyles = (el: React.ReactElement<any>) =>\n-      el?.props?.dangerouslySetInnerHTML?.__html\n-    // @ts-ignore Property 'props' does not exist on type ReactElement\n-    styles.props.children.forEach((child: React.ReactElement) => {\n-      if (Array.isArray(child)) {\n-        child.forEach((el) => hasStyles(el) && curStyles.push(el))\n-      } else if (hasStyles(child)) {\n-        curStyles.push(child)\n-      }\n-    })\n-  }\n-\n-  /* Add custom styles before AMP styles to prevent accidental overrides */\n-  return (\n-    <style\n-      amp-custom=\"\"\n-      dangerouslySetInnerHTML={{\n-        __html: curStyles\n-          .map((style) => style.props.dangerouslySetInnerHTML.__html)\n-          .join('')\n-          .replace(/\\/\\*# sourceMappingURL=.*\\*\\//g, '')\n-          .replace(/\\/\\*@ sourceURL=.*?\\*\\//g, ''),\n-      }}\n-    />\n-  )\n-}\n-\n function getDynamicChunks(\n   context: HtmlProps,\n   props: OriginProps,\n@@ -356,10 +308,6 @@ function getHeadHTMLProps(props: HeadProps) {\n   return headProps\n }\n \n-function getAmpPath(ampPath: string, asPath: string): string {\n-  return ampPath || `${asPath}${asPath.includes('?') ? '&' : '?'}amp=1`\n-}\n-\n function getNextFontLinkTags(\n   nextFontManifest: DeepReadonly<NextFontManifest> | undefined,\n   dangerousAsPath: string,\n@@ -625,10 +573,6 @@ export class Head extends React.Component<HeadProps> {\n   render() {\n     const {\n       styles,\n-      ampPath,\n-      inAmpMode,\n-      hybridAmp,\n-      canonicalBase,\n       __NEXT_DATA__,\n       dangerousAsPath,\n       headTags,\n@@ -698,58 +642,9 @@ export class Head extends React.Component<HeadProps> {\n         )\n     }\n \n-    let hasAmphtmlRel = false\n-    let hasCanonicalRel = false\n-\n-    // show warning and remove conflicting amp head tags\n-    head = React.Children.map(head || [], (child) => {\n-      if (!child) return child\n-      const { type, props } = child\n-      if (process.env.NEXT_RUNTIME !== 'edge' && inAmpMode) {\n-        let badProp: string = ''\n-\n-        if (type === 'meta' && props.name === 'viewport') {\n-          badProp = 'name=\"viewport\"'\n-        } else if (type === 'link' && props.rel === 'canonical') {\n-          hasCanonicalRel = true\n-        } else if (type === 'script') {\n-          // only block if\n-          // 1. it has a src and isn't pointing to ampproject's CDN\n-          // 2. it is using dangerouslySetInnerHTML without a type or\n-          // a type of text/javascript\n-          if (\n-            (props.src && props.src.indexOf('ampproject') < -1) ||\n-            (props.dangerouslySetInnerHTML &&\n-              (!props.type || props.type === 'text/javascript'))\n-          ) {\n-            badProp = '<script'\n-            Object.keys(props).forEach((prop) => {\n-              badProp += ` ${prop}=\"${props[prop]}\"`\n-            })\n-            badProp += '/>'\n-          }\n-        }\n-\n-        if (badProp) {\n-          console.warn(\n-            `Found conflicting amp tag \"${child.type}\" with conflicting prop ${badProp} in ${__NEXT_DATA__.page}. https://nextjs.org/docs/messages/conflicting-amp-tag`\n-          )\n-          return null\n-        }\n-      } else {\n-        // non-amp mode\n-        if (type === 'link' && props.rel === 'amphtml') {\n-          hasAmphtmlRel = true\n-        }\n-      }\n-      return child\n-      // @types/react bug. Returned value from .map will not be `null` if you pass in `[null]`\n-    })!\n-\n     const files: DocumentFiles = getDocumentFiles(\n       this.context.buildManifest,\n-      this.context.__NEXT_DATA__.page,\n-      process.env.NEXT_RUNTIME !== 'edge' && inAmpMode\n+      this.context.__NEXT_DATA__.page\n     )\n \n     const nextFontLinkTags = getNextFontLinkTags(\n@@ -775,23 +670,11 @@ export class Head extends React.Component<HeadProps> {\n           <>\n             <style\n               data-next-hide-fouc\n-              data-ampdevmode={\n-                process.env.NEXT_RUNTIME !== 'edge' && inAmpMode\n-                  ? 'true'\n-                  : undefined\n-              }\n               dangerouslySetInnerHTML={{\n                 __html: `body{display:none}`,\n               }}\n             />\n-            <noscript\n-              data-next-hide-fouc\n-              data-ampdevmode={\n-                process.env.NEXT_RUNTIME !== 'edge' && inAmpMode\n-                  ? 'true'\n-                  : undefined\n-              }\n-            >\n+            <noscript data-next-hide-fouc>\n               <style\n                 dangerouslySetInnerHTML={{\n                   __html: `body{display:block}`,\n@@ -807,92 +690,42 @@ export class Head extends React.Component<HeadProps> {\n         {nextFontLinkTags.preconnect}\n         {nextFontLinkTags.preload}\n \n-        {process.env.NEXT_RUNTIME !== 'edge' && inAmpMode && (\n-          <>\n-            <meta\n-              name=\"viewport\"\n-              content=\"width=device-width,minimum-scale=1,initial-scale=1\"\n-            />\n-            {!hasCanonicalRel && (\n-              <link\n-                rel=\"canonical\"\n-                href={\n-                  canonicalBase +\n-                  (\n-                    require('../server/utils') as typeof import('../server/utils')\n-                  ).cleanAmpPath(dangerousAsPath)\n-                }\n-              />\n-            )}\n-            {/* https://www.ampproject.org/docs/fundamentals/optimize_amp#optimize-the-amp-runtime-loading */}\n-            <link\n-              rel=\"preload\"\n-              as=\"script\"\n-              href=\"https://cdn.ampproject.org/v0.js\"\n-            />\n-            <AmpStyles styles={styles} />\n-            <style\n-              amp-boilerplate=\"\"\n-              dangerouslySetInnerHTML={{\n-                __html: `body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}`,\n-              }}\n-            />\n-            <noscript>\n-              <style\n-                amp-boilerplate=\"\"\n-                dangerouslySetInnerHTML={{\n-                  __html: `body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}`,\n-                }}\n-              />\n-            </noscript>\n-            <script async src=\"https://cdn.ampproject.org/v0.js\" />\n-          </>\n-        )}\n-        {!(process.env.NEXT_RUNTIME !== 'edge' && inAmpMode) && (\n-          <>\n-            {!hasAmphtmlRel && hybridAmp && (\n-              <link\n-                rel=\"amphtml\"\n-                href={canonicalBase + getAmpPath(ampPath, dangerousAsPath)}\n-              />\n-            )}\n-            {this.getBeforeInteractiveInlineScripts()}\n-            {!optimizeCss && this.getCssLinks(files)}\n-            {!optimizeCss && <noscript data-n-css={this.props.nonce ?? ''} />}\n-\n-            {!disableRuntimeJS &&\n-              !disableJsPreload &&\n-              this.getPreloadDynamicChunks()}\n-            {!disableRuntimeJS &&\n-              !disableJsPreload &&\n-              this.getPreloadMainLinks(files)}\n-\n-            {!disableOptimizedLoading &&\n-              !disableRuntimeJS &&\n-              this.getPolyfillScripts()}\n-\n-            {!disableOptimizedLoading &&\n-              !disableRuntimeJS &&\n-              this.getPreNextScripts()}\n-            {!disableOptimizedLoading &&\n-              !disableRuntimeJS &&\n-              this.getDynamicChunks(files)}\n-            {!disableOptimizedLoading &&\n-              !disableRuntimeJS &&\n-              this.getScripts(files)}\n-\n-            {optimizeCss && this.getCssLinks(files)}\n-            {optimizeCss && <noscript data-n-css={this.props.nonce ?? ''} />}\n-            {this.context.isDevelopment && (\n-              // this element is used to mount development styles so the\n-              // ordering matches production\n-              // (by default, style-loader injects at the bottom of <head />)\n-              <noscript id=\"__next_css__DO_NOT_USE__\" />\n-            )}\n-            {traceMetaTags}\n-            {styles || null}\n-          </>\n+        {this.getBeforeInteractiveInlineScripts()}\n+        {!optimizeCss && this.getCssLinks(files)}\n+        {!optimizeCss && <noscript data-n-css={this.props.nonce ?? ''} />}\n+\n+        {!disableRuntimeJS &&\n+          !disableJsPreload &&\n+          this.getPreloadDynamicChunks()}\n+        {!disableRuntimeJS &&\n+          !disableJsPreload &&\n+          this.getPreloadMainLinks(files)}\n+\n+        {!disableOptimizedLoading &&\n+          !disableRuntimeJS &&\n+          this.getPolyfillScripts()}\n+\n+        {!disableOptimizedLoading &&\n+          !disableRuntimeJS &&\n+          this.getPreNextScripts()}\n+        {!disableOptimizedLoading &&\n+          !disableRuntimeJS &&\n+          this.getDynamicChunks(files)}\n+        {!disableOptimizedLoading &&\n+          !disableRuntimeJS &&\n+          this.getScripts(files)}\n+\n+        {optimizeCss && this.getCssLinks(files)}\n+        {optimizeCss && <noscript data-n-css={this.props.nonce ?? ''} />}\n+        {this.context.isDevelopment && (\n+          // this element is used to mount development styles so the\n+          // ordering matches production\n+          // (by default, style-loader injects at the bottom of <head />)\n+          <noscript id=\"__next_css__DO_NOT_USE__\" />\n         )}\n+        {traceMetaTags}\n+        {styles || null}\n+\n         {React.createElement(React.Fragment, {}, ...(headTags || []))}\n       </head>\n     )\n@@ -1026,7 +859,6 @@ export class NextScript extends React.Component<OriginProps> {\n   render() {\n     const {\n       assetPrefix,\n-      inAmpMode,\n       buildManifest,\n       unstable_runtimeJS,\n       docComponentsRendered,\n@@ -1038,45 +870,6 @@ export class NextScript extends React.Component<OriginProps> {\n \n     docComponentsRendered.NextScript = true\n \n-    if (process.env.NEXT_RUNTIME !== 'edge' && inAmpMode) {\n-      if (process.env.NODE_ENV === 'production') {\n-        return null\n-      }\n-      const ampDevFiles = [\n-        ...buildManifest.devFiles,\n-        ...buildManifest.polyfillFiles,\n-        ...buildManifest.ampDevFiles,\n-      ]\n-\n-      return (\n-        <>\n-          {disableRuntimeJS ? null : (\n-            <script\n-              id=\"__NEXT_DATA__\"\n-              type=\"application/json\"\n-              nonce={this.props.nonce}\n-              crossOrigin={this.props.crossOrigin || crossOrigin}\n-              dangerouslySetInnerHTML={{\n-                __html: NextScript.getInlineScriptSource(this.context),\n-              }}\n-              data-ampdevmode\n-            />\n-          )}\n-          {ampDevFiles.map((file) => (\n-            <script\n-              key={file}\n-              src={`${assetPrefix}/_next/${encodeURIPath(\n-                file\n-              )}${assetQueryString}`}\n-              nonce={this.props.nonce}\n-              crossOrigin={this.props.crossOrigin || crossOrigin}\n-              data-ampdevmode\n-            />\n-          ))}\n-        </>\n-      )\n-    }\n-\n     if (process.env.NODE_ENV !== 'production') {\n       if (this.props.crossOrigin)\n         console.warn(\n@@ -1086,8 +879,7 @@ export class NextScript extends React.Component<OriginProps> {\n \n     const files: DocumentFiles = getDocumentFiles(\n       this.context.buildManifest,\n-      this.context.__NEXT_DATA__.page,\n-      process.env.NEXT_RUNTIME !== 'edge' && inAmpMode\n+      this.context.__NEXT_DATA__.page\n     )\n \n     return (\n@@ -1136,31 +928,13 @@ export function Html(\n     HTMLHtmlElement\n   >\n ) {\n-  const {\n-    inAmpMode,\n-    docComponentsRendered,\n-    locale,\n-    scriptLoader,\n-    __NEXT_DATA__,\n-  } = useHtmlContext()\n+  const { docComponentsRendered, locale, scriptLoader, __NEXT_DATA__ } =\n+    useHtmlContext()\n \n   docComponentsRendered.Html = true\n   handleDocumentScriptLoaderItems(scriptLoader, __NEXT_DATA__, props)\n \n-  return (\n-    <html\n-      {...props}\n-      lang={props.lang || locale || undefined}\n-      amp={process.env.NEXT_RUNTIME !== 'edge' && inAmpMode ? '' : undefined}\n-      data-ampdevmode={\n-        process.env.NEXT_RUNTIME !== 'edge' &&\n-        inAmpMode &&\n-        process.env.NODE_ENV !== 'production'\n-          ? ''\n-          : undefined\n-      }\n-    />\n-  )\n+  return <html {...props} lang={props.lang || locale || undefined} />\n }\n \n export function Main() {"
        },
        {
            "sha": "d7f031cd8d4d5a70e32ec6eb8fbdcd9d36f9f067",
            "filename": "packages/next/src/server/app-render/app-render.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -2479,7 +2479,7 @@ async function renderToStream(\n      *\n      *    2.) If dynamic HTML support is requested, we must honor that request\n      *        or throw an error. It is the sole responsibility of the caller to\n-     *        ensure they aren't e.g. requesting dynamic HTML for an AMP page.\n+     *        ensure they aren't e.g. requesting dynamic HTML for a static page.\n      *\n      *   3.) If `shouldWaitOnAllReady` is true, which indicates we need to\n      *       resolve all suspenses and generate a full HTML. e.g. when it's a\n@@ -2628,7 +2628,7 @@ async function renderToStream(\n        *\n        *    2.) If dynamic HTML support is requested, we must honor that request\n        *        or throw an error. It is the sole responsibility of the caller to\n-       *        ensure they aren't e.g. requesting dynamic HTML for an AMP page.\n+       *        ensure they aren't e.g. requesting dynamic HTML for a static page.\n        *    3.) If `shouldWaitOnAllReady` is true, which indicates we need to\n        *        resolve all suspenses and generate a full HTML. e.g. when it's a\n        *        html limited bot requests, we produce the full HTML content."
        },
        {
            "sha": "a194e9c6298e7236dbb816f8e577a36ace6f5341",
            "filename": "packages/next/src/server/async-storage/work-store.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fasync-storage%2Fwork-store.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fasync-storage%2Fwork-store.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fasync-storage%2Fwork-store.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -89,7 +89,7 @@ export function createWorkStore({\n    *\n    *    2.) If dynamic HTML support is requested, we must honor that request\n    *        or throw an error. It is the sole responsibility of the caller to\n-   *        ensure they aren't e.g. requesting dynamic HTML for an AMP page.\n+   *        ensure they aren't e.g. requesting dynamic HTML for a static page.\n    *\n    *    3.) If the request is in draft mode, we must generate dynamic HTML.\n    *"
        },
        {
            "sha": "4733ea1ba5c0608e7c4b6f3d4d466b368a0d6e0e",
            "filename": "packages/next/src/server/base-server.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 8,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -532,10 +532,8 @@ export default abstract class Server<\n       trailingSlash: this.nextConfig.trailingSlash,\n       deploymentId: this.nextConfig.deploymentId,\n       poweredByHeader: this.nextConfig.poweredByHeader,\n-      canonicalBase: this.nextConfig.amp.canonicalBase || '',\n       generateEtags,\n       previewProps: this.getPrerenderManifest().preview,\n-      ampOptimizerConfig: this.nextConfig.experimental.amp?.optimizer,\n       basePath: this.nextConfig.basePath,\n       images: this.nextConfig.images,\n       optimizeCss: this.nextConfig.experimental.optimizeCss,\n@@ -2271,10 +2269,6 @@ export default abstract class Server<\n       }\n     }\n \n-    // Ensure that if the `amp` query parameter is falsy that we remove it from\n-    // the query object. This ensures it won't be found by the `in` operator.\n-    if ('amp' in query && !query.amp) delete query.amp\n-\n     if (opts.supportsDynamicResponse === true) {\n       const ua = req.headers['user-agent'] || ''\n       const isBotRequest = isBot(ua)\n@@ -2289,7 +2283,7 @@ export default abstract class Server<\n       // be static so we can collect revalidate and populate the\n       // cache if there are no dynamic data requirements\n       opts.supportsDynamicResponse =\n-        !isSSG && !isBotRequest && !query.amp && isSupportedDocument\n+        !isSSG && !isBotRequest && isSupportedDocument\n     }\n \n     // In development, we always want to generate dynamic HTML.\n@@ -2402,7 +2396,6 @@ export default abstract class Server<\n     addRequestMeta(request, 'distDir', this.distDir)\n     addRequestMeta(request, 'query', query)\n     addRequestMeta(request, 'params', opts.params)\n-    addRequestMeta(request, 'ampValidator', this.renderOpts.ampValidator)\n     addRequestMeta(request, 'minimalMode', this.minimalMode)\n \n     if (opts.err) {"
        },
        {
            "sha": "157fb3844e0926ee63a8437b3fb1654e41cef3b9",
            "filename": "packages/next/src/server/config-schema.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -165,11 +165,6 @@ const zTurbopackConfig: zod.ZodType<TurbopackOptions> = z.strictObject({\n export const configSchema: zod.ZodType<NextConfig> = z.lazy(() =>\n   z.strictObject({\n     allowedDevOrigins: z.array(z.string()).optional(),\n-    amp: z\n-      .object({\n-        canonicalBase: z.string().optional(),\n-      })\n-      .optional(),\n     assetPrefix: z.string().optional(),\n     basePath: z.string().optional(),\n     bundlePagesRouterDependencies: z.boolean().optional(),\n@@ -301,14 +296,6 @@ export const configSchema: zod.ZodType<NextConfig> = z.lazy(() =>\n         appNavFailHandling: z.boolean().optional(),\n         preloadEntriesOnStart: z.boolean().optional(),\n         allowedRevalidateHeaderKeys: z.array(z.string()).optional(),\n-        amp: z\n-          .object({\n-            // AMP optimizer option is unknown, use z.any() here\n-            optimizer: z.any().optional(),\n-            skipValidation: z.boolean().optional(),\n-            validator: z.string().optional(),\n-          })\n-          .optional(),\n         staleTimes: z\n           .object({\n             dynamic: z.number().optional(),"
        },
        {
            "sha": "fc230375437c18a2fb1d4462ee2e9149e6bd031b",
            "filename": "packages/next/src/server/config-shared.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 18,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -369,12 +369,6 @@ export interface ExperimentalConfig {\n   nextScriptWorkers?: boolean\n   scrollRestoration?: boolean\n   externalDir?: boolean\n-  /** @deprecated built-in amp support will be removed in Next 16 */\n-  amp?: {\n-    optimizer?: any\n-    validator?: string\n-    skipValidation?: boolean\n-  }\n   disableOptimizedLoading?: boolean\n \n   /** @deprecated A no-op as of Next 16, size metrics were removed from the build output. */\n@@ -1068,14 +1062,6 @@ export interface NextConfig {\n     pagesBufferLength?: number\n   }\n \n-  /**\n-   * @deprecated built-in amp support will be removed in Next 16\n-   * @see [`next/amp`](https://nextjs.org/docs/api-reference/next/amp)\n-   */\n-  amp?: {\n-    canonicalBase?: string\n-  }\n-\n   /**\n    * A unique identifier for a deployment that will be included in each request's query string or header.\n    */\n@@ -1372,9 +1358,6 @@ export const defaultConfig = Object.freeze({\n     maxInactiveAge: 60 * 1000,\n     pagesBufferLength: 5,\n   },\n-  amp: {\n-    canonicalBase: '',\n-  },\n   basePath: '',\n   sassOptions: {},\n   trailingSlash: false,\n@@ -1495,7 +1478,6 @@ export const defaultConfig = Object.freeze({\n     swcPlugins: undefined,\n     largePageDataBytes: 128 * 1000, // 128KB by default\n     disablePostcssPresetEnv: undefined,\n-    amp: undefined,\n     urlImports: undefined,\n     typedEnv: false,\n     clientTraceMetadata: undefined,"
        },
        {
            "sha": "a4211d677043d59f6ae9f78aae0700f5bcd07d24",
            "filename": "packages/next/src/server/config.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 27,
            "changes": 27,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -97,20 +97,6 @@ function checkDeprecations(\n   silent: boolean,\n   dir: string\n ) {\n-  warnOptionHasBeenDeprecated(\n-    userConfig,\n-    'amp',\n-    `Built-in amp support is deprecated and the \\`amp\\` configuration option will be removed in Next.js 16.`,\n-    silent\n-  )\n-\n-  warnOptionHasBeenDeprecated(\n-    userConfig,\n-    'experimental.amp',\n-    `Built-in amp support is deprecated and the \\`experimental.amp\\` configuration option will be removed in Next.js 16.`,\n-    silent\n-  )\n-\n   if (userConfig.experimental?.dynamicIO !== undefined) {\n     warnOptionHasBeenDeprecated(\n       userConfig,\n@@ -422,10 +408,6 @@ function assignDefaultsAndValidate(\n       if (result.assetPrefix === '') {\n         result.assetPrefix = result.basePath\n       }\n-\n-      if (result.amp?.canonicalBase === '') {\n-        result.amp.canonicalBase = result.basePath\n-      }\n     }\n   }\n \n@@ -1496,15 +1478,6 @@ export default async function loadConfig(\n       )\n     }\n \n-    if (userConfig.amp?.canonicalBase) {\n-      const { canonicalBase } = userConfig.amp || ({} as any)\n-      userConfig.amp = userConfig.amp || {}\n-      userConfig.amp.canonicalBase =\n-        (canonicalBase?.endsWith('/')\n-          ? canonicalBase.slice(0, -1)\n-          : canonicalBase) || ''\n-    }\n-\n     if (reactProductionProfiling) {\n       userConfig.reactProductionProfiling = reactProductionProfiling\n     }"
        },
        {
            "sha": "c26c2423fb1f1b14350be29204be70c8b2334c2b",
            "filename": "packages/next/src/server/dev/hot-reloader-webpack.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 17,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-webpack.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-webpack.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-webpack.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -35,7 +35,6 @@ import { APP_DIR_ALIAS, WEBPACK_LAYERS } from '../../lib/constants'\n import { recursiveDelete } from '../../lib/recursive-delete'\n import {\n   BLOCKED_PAGES,\n-  CLIENT_STATIC_FILES_RUNTIME_AMP,\n   CLIENT_STATIC_FILES_RUNTIME_MAIN,\n   CLIENT_STATIC_FILES_RUNTIME_MAIN_APP,\n   CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH,\n@@ -215,7 +214,6 @@ function erroredPages(compilation: webpack.Compilation) {\n }\n \n export default class HotReloaderWebpack implements NextJsHotReloaderInterface {\n-  private hasAmpEntrypoints: boolean\n   private hasAppRouterEntrypoints: boolean\n   private hasPagesRouterEntrypoints: boolean\n   private dir: string\n@@ -290,7 +288,6 @@ export default class HotReloaderWebpack implements NextJsHotReloaderInterface {\n       resetFetch: () => void\n     }\n   ) {\n-    this.hasAmpEntrypoints = false\n     this.hasAppRouterEntrypoints = false\n     this.hasPagesRouterEntrypoints = false\n     this.buildId = buildId\n@@ -927,15 +924,6 @@ export default class HotReloaderWebpack implements NextJsHotReloaderInterface {\n                 })\n               : undefined\n \n-            if (staticInfo?.type === PAGE_TYPES.PAGES) {\n-              if (\n-                staticInfo.config?.config?.amp === true ||\n-                staticInfo.config?.config?.amp === 'hybrid'\n-              ) {\n-                this.hasAmpEntrypoints = true\n-              }\n-            }\n-\n             const isServerComponent =\n               isAppPath && staticInfo?.rsc !== RSC_MODULE_TYPES.client\n \n@@ -1172,10 +1160,6 @@ export default class HotReloaderWebpack implements NextJsHotReloaderInterface {\n             })\n           })\n         )\n-\n-        if (!this.hasAmpEntrypoints) {\n-          delete entrypoints[CLIENT_STATIC_FILES_RUNTIME_AMP]\n-        }\n         if (!this.hasPagesRouterEntrypoints) {\n           delete entrypoints[CLIENT_STATIC_FILES_RUNTIME_MAIN]\n           delete entrypoints['pages/_app']\n@@ -1184,7 +1168,7 @@ export default class HotReloaderWebpack implements NextJsHotReloaderInterface {\n           delete entrypoints['pages/_document']\n         }\n         // Remove React Refresh entrypoint chunk as `app` doesn't require it.\n-        if (!this.hasAmpEntrypoints && !this.hasPagesRouterEntrypoints) {\n+        if (!this.hasPagesRouterEntrypoints) {\n           delete entrypoints[CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH]\n         }\n         if (!this.hasAppRouterEntrypoints) {"
        },
        {
            "sha": "e417dbe808fb1efff62acfce76afaeda512fc807",
            "filename": "packages/next/src/server/dev/next-dev-server.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 81,
            "changes": 81,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fnext-dev-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fnext-dev-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fnext-dev-server.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -25,7 +25,6 @@ import * as React from 'react'\n import fs from 'fs'\n import { Worker } from 'next/dist/compiled/jest-worker'\n import { join as pathJoin } from 'path'\n-import { ampValidation } from '../../build/output'\n import { PUBLIC_DIR_MIDDLEWARE_CONFLICT } from '../../lib/constants'\n import { findPagesDir } from '../../lib/find-pages-dir'\n import {\n@@ -178,62 +177,6 @@ export default class DevServer extends Server {\n         return JSON.stringify(value.staticPaths)?.length ?? 0\n       }\n     )\n-    this.renderOpts.ampSkipValidation =\n-      this.nextConfig.experimental?.amp?.skipValidation ?? false\n-    this.renderOpts.ampValidator = async (html: string, pathname: string) => {\n-      const { getAmpValidatorInstance, getBundledAmpValidatorFilepath } =\n-        require('../../export/helpers/get-amp-html-validator') as typeof import('../../export/helpers/get-amp-html-validator')\n-\n-      const validatorPath =\n-        this.nextConfig.experimental?.amp?.validator ||\n-        getBundledAmpValidatorFilepath()\n-\n-      const validator = await getAmpValidatorInstance(validatorPath)\n-\n-      const result = validator.validateString(html)\n-      ampValidation(\n-        pathname,\n-        result.errors\n-          .filter((error) => {\n-            if (error.severity === 'ERROR') {\n-              // Unclear yet if these actually prevent the page from being indexed by the AMP cache.\n-              // These are coming from React so all we can do is ignore them for now.\n-\n-              // <link rel=\"expect\" blocking=\"render\" />\n-              // https://github.com/ampproject/amphtml/issues/40279\n-              if (\n-                error.code === 'DISALLOWED_ATTR' &&\n-                error.params[0] === 'blocking' &&\n-                error.params[1] === 'link'\n-              ) {\n-                return false\n-              }\n-              // <template> without type\n-              // https://github.com/ampproject/amphtml/issues/40280\n-              if (\n-                error.code === 'MANDATORY_ATTR_MISSING' &&\n-                error.params[0] === 'type' &&\n-                error.params[1] === 'template'\n-              ) {\n-                return false\n-              }\n-              // <template> without type\n-              // https://github.com/ampproject/amphtml/issues/40280\n-              if (\n-                error.code === 'MISSING_REQUIRED_EXTENSION' &&\n-                error.params[0] === 'template' &&\n-                error.params[1] === 'amp-mustache'\n-              ) {\n-                return false\n-              }\n-              return true\n-            }\n-            return false\n-          })\n-          .filter((e) => this._filterAmpDevelopmentScript(html, e)),\n-        result.errors.filter((e) => e.severity !== 'ERROR')\n-      )\n-    }\n \n     const { pagesDir, appDir } = findPagesDir(this.dir)\n     this.pagesDir = pagesDir\n@@ -759,30 +702,6 @@ export default class DevServer extends Server {\n     // })\n   }\n \n-  _filterAmpDevelopmentScript(\n-    html: string,\n-    event: { line: number; col: number; code: string }\n-  ): boolean {\n-    if (event.code !== 'DISALLOWED_SCRIPT_TAG') {\n-      return true\n-    }\n-\n-    const snippetChunks = html.split('\\n')\n-\n-    let snippet\n-    if (\n-      !(snippet = html.split('\\n')[event.line - 1]) ||\n-      !(snippet = snippet.substring(event.col))\n-    ) {\n-      return true\n-    }\n-\n-    snippet = snippet + snippetChunks.slice(event.line).join('\\n')\n-    snippet = snippet.substring(0, snippet.indexOf('</script>'))\n-\n-    return !snippet.includes('data-amp-development-mode-only')\n-  }\n-\n   protected async getStaticPaths({\n     pathname,\n     urlPathname,"
        },
        {
            "sha": "8b1f98c30c7126911f1701cfd6957fb8bb47954a",
            "filename": "packages/next/src/server/get-page-files.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fget-page-files.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fget-page-files.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fget-page-files.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -3,7 +3,6 @@ import { normalizePagePath } from '../shared/lib/page-path/normalize-page-path'\n \n export type BuildManifest = {\n   devFiles: readonly string[]\n-  ampDevFiles: readonly string[]\n   polyfillFiles: readonly string[]\n   lowPriorityFiles: readonly string[]\n   rootMainFiles: readonly string[]\n@@ -15,7 +14,6 @@ export type BuildManifest = {\n     '/_app': readonly string[]\n     [page: string]: readonly string[]\n   }\n-  ampFirstPages: readonly string[]\n }\n \n export function getPageFiles("
        },
        {
            "sha": "b9149e84b69539cacc0a32a64669059b7aeb293d",
            "filename": "packages/next/src/server/lib/router-utils/typegen.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Ftypegen.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Ftypegen.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Ftypegen.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -527,7 +527,6 @@ export function generateValidatorFile(\n    * Validated at build-time by parsePagesSegmentConfig.\n    */\n   config?: {\n-    amp?: boolean | 'hybrid' | string // necessary for JS\n     maxDuration?: number\n     runtime?: 'edge' | 'experimental-edge' | 'nodejs' | string // necessary unless config is exported as const\n     regions?: string[]"
        },
        {
            "sha": "7e5f627ffb62ca3e39176570cf12a12f15110428",
            "filename": "packages/next/src/server/next-server.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 9,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fnext-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fnext-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fnext-server.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -893,12 +893,6 @@ export default class NextNodeServer extends BaseServer<\n     url?: string\n   }): Promise<FindComponentsResult | null> {\n     const pagePaths: string[] = [page]\n-    if (query.amp) {\n-      // try serving a static AMP version first\n-      pagePaths.unshift(\n-        (isAppPath ? normalizeAppPath(page) : normalizePagePath(page)) + '.amp'\n-      )\n-    }\n \n     if (locale) {\n       pagePaths.unshift(\n@@ -933,9 +927,7 @@ export default class NextNodeServer extends BaseServer<\n           query: {\n             ...(!this.renderOpts.isExperimentalCompile &&\n             components.getStaticProps\n-              ? ({\n-                  amp: query.amp,\n-                } as NextParsedUrlQuery)\n+              ? {}\n               : query),\n             // For appDir params is excluded.\n             ...((isAppPath ? {} : params) || {}),"
        },
        {
            "sha": "429f503f08db2c9706f18820059d36ccbacec5a1",
            "filename": "packages/next/src/server/optimize-amp.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fserver%2Foptimize-amp.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fserver%2Foptimize-amp.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Foptimize-amp.ts?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,14 +0,0 @@\n-export default async function optimize(\n-  html: string,\n-  config: any\n-): Promise<string> {\n-  let AmpOptimizer\n-  try {\n-    AmpOptimizer =\n-      require('next/dist/compiled/@ampproject/toolbox-optimizer') as typeof import('next/dist/compiled/@ampproject/toolbox-optimizer')\n-  } catch (_) {\n-    return html\n-  }\n-  const optimizer = AmpOptimizer.create(config)\n-  return optimizer.transformHtml(html, config)\n-}"
        },
        {
            "sha": "6a6e7dca418827b76a6d9422e0397d9666c00f67",
            "filename": "packages/next/src/server/post-process.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 28,
            "changes": 29,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fpost-process.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Fpost-process.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fpost-process.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -7,32 +7,10 @@ type PostProcessorFunction =\n   | ((html: string) => string)\n \n async function postProcessHTML(\n-  pathname: string,\n   content: string,\n-  renderOpts: Pick<\n-    RenderOpts,\n-    | 'ampOptimizerConfig'\n-    | 'ampValidator'\n-    | 'ampSkipValidation'\n-    | 'optimizeCss'\n-    | 'distDir'\n-    | 'assetPrefix'\n-  >,\n-  { inAmpMode, hybridAmp }: { inAmpMode: boolean; hybridAmp: boolean }\n+  renderOpts: Pick<RenderOpts, 'optimizeCss' | 'distDir' | 'assetPrefix'>\n ) {\n   const postProcessors: Array<PostProcessorFunction> = [\n-    process.env.NEXT_RUNTIME !== 'edge' && inAmpMode && !process.env.TURBOPACK\n-      ? async (html: string) => {\n-          const optimizeAmp = (\n-            require('./optimize-amp') as typeof import('./optimize-amp')\n-          ).default as typeof import('./optimize-amp').default\n-          html = await optimizeAmp!(html, renderOpts.ampOptimizerConfig)\n-          if (!renderOpts.ampSkipValidation && renderOpts.ampValidator) {\n-            await renderOpts.ampValidator(html, pathname)\n-          }\n-          return html\n-        }\n-      : null,\n     process.env.NEXT_RUNTIME !== 'edge' && renderOpts.optimizeCss\n       ? async (html: string) => {\n           // eslint-disable-next-line import/no-extraneous-dependencies\n@@ -53,11 +31,6 @@ async function postProcessHTML(\n           return await cssOptimizer.process(html)\n         }\n       : null,\n-    inAmpMode || hybridAmp\n-      ? (html: string) => {\n-          return html.replace(/&amp;amp=1/g, '&amp=1')\n-        }\n-      : null,\n   ].filter(nonNullable)\n \n   for (const postProcessor of postProcessors) {"
        },
        {
            "sha": "4e6fee912ffb4de4a89742921b4a663797aedf39",
            "filename": "packages/next/src/server/render.tsx",
            "status": "modified",
            "additions": 30,
            "deletions": 71,
            "changes": 101,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Frender.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Frender.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Frender.tsx?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -61,8 +61,6 @@ import {\n   STATIC_STATUS_PAGES,\n } from '../shared/lib/constants'\n import { isSerializableProps } from '../lib/is-serializable-props'\n-import { isInAmpMode } from '../shared/lib/amp-mode'\n-import { AmpStateContext } from '../shared/lib/amp-context.shared-runtime'\n import { defaultHead } from '../shared/lib/head'\n import { HeadManagerContext } from '../shared/lib/head-manager-context.shared-runtime'\n import Loadable from '../shared/lib/loadable.shared-runtime'\n@@ -126,7 +124,7 @@ if (process.env.NEXT_RUNTIME !== 'edge') {\n   ).postProcessHTML\n } else {\n   warn = console.warn.bind(console)\n-  postProcessHTML = async (_pathname: string, html: string) => html\n+  postProcessHTML = async (html: string) => html\n }\n \n function noRouter() {\n@@ -242,17 +240,12 @@ function renderPageTree(\n }\n \n export type RenderOptsPartial = {\n-  canonicalBase: string\n   runtimeConfig?: { [key: string]: any }\n   assetPrefix?: string\n   err?: Error | null\n   nextExport?: boolean\n   dev?: boolean\n-  ampPath?: string\n   ErrorDebug?: PagesDevOverlayBridgeType\n-  ampValidator?: (html: string, pathname: string) => Promise<void>\n-  ampSkipValidation?: boolean\n-  ampOptimizerConfig?: { [key: string]: any }\n   isNextDataRequest?: boolean\n   params?: ParsedUrlQuery\n   previewProps: __ApiPreviewProps | undefined\n@@ -491,7 +484,6 @@ export async function renderToHTMLImpl(\n   const {\n     err,\n     dev = false,\n-    ampPath = '',\n     pageConfig = {},\n     buildManifest,\n     reactLoadableManifest,\n@@ -633,13 +625,7 @@ export async function renderToHTMLImpl(\n \n     if (isAutoExport || isFallback) {\n       // remove query values except ones that will be set during export\n-      query = {\n-        ...(query.amp\n-          ? {\n-              amp: query.amp,\n-            }\n-          : {}),\n-      }\n+      query = {}\n       asPath = `${pathname}${\n         // ensure trailing slash is present for non-dynamic auto-export pages\n         req.url!.endsWith('/') && pathname !== '/' && !pageIsDynamic ? '/' : ''\n@@ -729,15 +715,8 @@ export async function renderToHTMLImpl(\n \n   let scriptLoader: any = {}\n   const jsxStyleRegistry = createStyleRegistry()\n-  const ampState = {\n-    ampFirst: pageConfig.amp === true,\n-    hasQuery: Boolean(query.amp),\n-    hybrid: pageConfig.amp === 'hybrid',\n-  }\n \n-  // Disable AMP under the web environment\n-  const inAmpMode = process.env.NEXT_RUNTIME !== 'edge' && isInAmpMode(ampState)\n-  let head: JSX.Element[] = defaultHead(inAmpMode)\n+  let head: JSX.Element[] = defaultHead()\n   const reactLoadableModules: string[] = []\n \n   let initialScripts: any = {}\n@@ -764,33 +743,29 @@ export async function renderToHTMLImpl(\n         >\n           <PathParamsContext.Provider value={adaptForPathParams(router)}>\n             <RouterContext.Provider value={router}>\n-              <AmpStateContext.Provider value={ampState}>\n-                <HeadManagerContext.Provider\n-                  value={{\n-                    updateHead: (state) => {\n-                      head = state\n-                    },\n-                    updateScripts: (scripts) => {\n-                      scriptLoader = scripts\n-                    },\n-                    scripts: initialScripts,\n-                    mountedInstances: new Set(),\n-                    nonce,\n-                  }}\n+              <HeadManagerContext.Provider\n+                value={{\n+                  updateHead: (state) => {\n+                    head = state\n+                  },\n+                  updateScripts: (scripts) => {\n+                    scriptLoader = scripts\n+                  },\n+                  scripts: initialScripts,\n+                  mountedInstances: new Set(),\n+                  nonce,\n+                }}\n+              >\n+                <LoadableContext.Provider\n+                  value={(moduleName) => reactLoadableModules.push(moduleName)}\n                 >\n-                  <LoadableContext.Provider\n-                    value={(moduleName) =>\n-                      reactLoadableModules.push(moduleName)\n-                    }\n-                  >\n-                    <StyleRegistry registry={jsxStyleRegistry}>\n-                      <ImageConfigContext.Provider value={images}>\n-                        {children}\n-                      </ImageConfigContext.Provider>\n-                    </StyleRegistry>\n-                  </LoadableContext.Provider>\n-                </HeadManagerContext.Provider>\n-              </AmpStateContext.Provider>\n+                  <StyleRegistry registry={jsxStyleRegistry}>\n+                    <ImageConfigContext.Provider value={images}>\n+                      {children}\n+                    </ImageConfigContext.Provider>\n+                  </StyleRegistry>\n+                </LoadableContext.Provider>\n+              </HeadManagerContext.Provider>\n             </RouterContext.Provider>\n           </PathParamsContext.Provider>\n         </PathnameContextProviderAdapter>\n@@ -1277,7 +1252,7 @@ export async function renderToHTMLImpl(\n   }\n \n   const Body = ({ children }: { children: JSX.Element }) => {\n-    return inAmpMode ? children : <div id=\"__next\">{children}</div>\n+    return <div id=\"__next\">{children}</div>\n   }\n \n   const renderDocument = async () => {\n@@ -1481,7 +1456,6 @@ export async function renderToHTMLImpl(\n     }\n   }\n \n-  const hybridAmp = ampState.hybrid\n   const docComponentsRendered: DocumentProps['docComponentsRendered'] = {}\n \n   const {\n@@ -1526,14 +1500,7 @@ export async function renderToHTMLImpl(\n     buildManifest: filteredBuildManifest,\n     docComponentsRendered,\n     dangerousAsPath: router.asPath,\n-    canonicalBase:\n-      !renderOpts.ampPath && getRequestMeta(req, 'didStripLocale')\n-        ? `${renderOpts.canonicalBase || ''}/${renderOpts.locale}`\n-        : renderOpts.canonicalBase,\n-    ampPath,\n-    inAmpMode,\n     isDevelopment: !!dev,\n-    hybridAmp,\n     dynamicImports: Array.from(dynamicImports),\n     dynamicCssManifest: new Set(renderOpts.dynamicCssManifest || []),\n     assetPrefix,\n@@ -1562,11 +1529,9 @@ export async function renderToHTMLImpl(\n   }\n \n   const document = (\n-    <AmpStateContext.Provider value={ampState}>\n-      <HtmlContext.Provider value={htmlProps}>\n-        {documentResult.documentElement(htmlProps)}\n-      </HtmlContext.Provider>\n-    </AmpStateContext.Provider>\n+    <HtmlContext.Provider value={htmlProps}>\n+      {documentResult.documentElement(htmlProps)}\n+    </HtmlContext.Provider>\n   )\n \n   const documentHTML = await getTracer().trace(\n@@ -1607,16 +1572,10 @@ export async function renderToHTMLImpl(\n     prefix += DOCTYPE\n   }\n   prefix += renderTargetPrefix\n-  if (inAmpMode) {\n-    prefix += '<!-- __NEXT_DATA__ -->'\n-  }\n \n   const content = prefix + documentResult.contentHTML + renderTargetSuffix\n \n-  const optimizedHtml = await postProcessHTML(pathname, content, renderOpts, {\n-    inAmpMode,\n-    hybridAmp,\n-  })\n+  const optimizedHtml = await postProcessHTML(content, renderOpts)\n \n   return new RenderResult(optimizedHtml, {\n     metadata,"
        },
        {
            "sha": "fde18c2184e1a6734c6c7602abec51e863ab6cbc",
            "filename": "packages/next/src/server/request-meta.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 9,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Frequest-meta.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Frequest-meta.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Frequest-meta.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -248,11 +248,6 @@ export interface RequestMeta {\n    */\n   params?: ParsedUrlQuery\n \n-  /**\n-   * The AMP validator to use in development\n-   */\n-  ampValidator?: (html: string, pathname: string) => Promise<void>\n-\n   /**\n    * ErrorOverlay component to use in development for pages router\n    */\n@@ -348,10 +343,7 @@ type NextQueryMetadata = {\n   [NEXT_RSC_UNION_QUERY]?: string\n }\n \n-export type NextParsedUrlQuery = ParsedUrlQuery &\n-  NextQueryMetadata & {\n-    amp?: '1'\n-  }\n+export type NextParsedUrlQuery = ParsedUrlQuery & NextQueryMetadata\n \n export interface NextUrlWithParsedQuery extends UrlWithParsedQuery {\n   query: NextParsedUrlQuery"
        },
        {
            "sha": "5269517f347fb478f4db8513a90183b7e792a92e",
            "filename": "packages/next/src/server/route-modules/app-page/vendored/contexts/amp-context.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fapp-page%2Fvendored%2Fcontexts%2Famp-context.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fapp-page%2Fvendored%2Fcontexts%2Famp-context.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fapp-page%2Fvendored%2Fcontexts%2Famp-context.ts?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,3 +0,0 @@\n-module.exports = (\n-  require('../../module.compiled') as typeof import('../../module.compiled')\n-).vendored['contexts'].AmpContext"
        },
        {
            "sha": "b81b70d618815bbe44511b84275778c9c92e813a",
            "filename": "packages/next/src/server/route-modules/app-page/vendored/contexts/entrypoints.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fapp-page%2Fvendored%2Fcontexts%2Fentrypoints.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fapp-page%2Fvendored%2Fcontexts%2Fentrypoints.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fapp-page%2Fvendored%2Fcontexts%2Fentrypoints.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -3,5 +3,4 @@ export * as ServerInsertedHtml from '../../../../../shared/lib/server-inserted-h\n export * as AppRouterContext from '../../../../../shared/lib/app-router-context.shared-runtime'\n export * as HooksClientContext from '../../../../../shared/lib/hooks-client-context.shared-runtime'\n export * as RouterContext from '../../../../../shared/lib/router-context.shared-runtime'\n-export * as AmpContext from '../../../../../shared/lib/amp-context.shared-runtime'\n export * as ImageConfigContext from '../../../../../shared/lib/image-config-context.shared-runtime'"
        },
        {
            "sha": "a80d8cd43233b93f67ef99d4821bd3f2da1116e2",
            "filename": "packages/next/src/server/route-modules/pages/pages-handler.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 14,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fpages%2Fpages-handler.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fpages%2Fpages-handler.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fpages%2Fpages-handler.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -128,7 +128,6 @@ export const getHandler = ({\n     const hasGetInitialProps = Boolean(\n       (userland.default || userland).getInitialProps\n     )\n-    const isAmp = query.amp && config?.amp\n     let cacheKey: null | string = null\n     let isIsrFallback = false\n     let isNextDataRequest =\n@@ -143,10 +142,10 @@ export const getHandler = ({\n         (srcPage === '/' || resolvedPathname === '/') && locale\n           ? ''\n           : resolvedPathname\n-      }${isAmp ? '.amp' : ''}`\n+      }`\n \n       if (is404Page || is500Page || isErrorPage) {\n-        cacheKey = `${locale ? `/${locale}` : ''}${srcPage}${isAmp ? '.amp' : ''}`\n+        cacheKey = `${locale ? `/${locale}` : ''}${srcPage}`\n       }\n \n       // ensure /index and / is normalized to one key\n@@ -220,11 +219,6 @@ export const getHandler = ({\n                     hasStaticProps && !isExperimentalCompile\n                       ? ({\n                           ...params,\n-                          ...(isAmp\n-                            ? {\n-                                amp: query.amp,\n-                              }\n-                            : {}),\n                         } as ParsedUrlQuery)\n                       : {\n                           ...query,\n@@ -276,8 +270,6 @@ export const getHandler = ({\n \n                     multiZoneDraftMode,\n                     basePath: nextConfig.basePath,\n-                    canonicalBase: nextConfig.amp.canonicalBase || '',\n-                    ampOptimizerConfig: nextConfig.experimental.amp?.optimizer,\n                     disableOptimizedLoading:\n                       nextConfig.experimental.disableOptimizedLoading,\n                     largePageDataBytes:\n@@ -334,10 +326,6 @@ export const getHandler = ({\n                       routeModule.relativeProjectDir,\n                       routeModule.distDir\n                     ),\n-\n-                    ampSkipValidation:\n-                      nextConfig.experimental.amp?.skipValidation,\n-                    ampValidator: getRequestMeta(req, 'ampValidator'),\n                   },\n                 })\n                 .then((renderResult): ResponseCacheEntry => {"
        },
        {
            "sha": "5269517f347fb478f4db8513a90183b7e792a92e",
            "filename": "packages/next/src/server/route-modules/pages/vendored/contexts/amp-context.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fpages%2Fvendored%2Fcontexts%2Famp-context.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fpages%2Fvendored%2Fcontexts%2Famp-context.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fpages%2Fvendored%2Fcontexts%2Famp-context.ts?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,3 +0,0 @@\n-module.exports = (\n-  require('../../module.compiled') as typeof import('../../module.compiled')\n-).vendored['contexts'].AmpContext"
        },
        {
            "sha": "37d3aa04467381bea531261467cc856aa78244fb",
            "filename": "packages/next/src/server/route-modules/pages/vendored/contexts/entrypoints.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fpages%2Fvendored%2Fcontexts%2Fentrypoints.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fpages%2Fvendored%2Fcontexts%2Fentrypoints.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Froute-modules%2Fpages%2Fvendored%2Fcontexts%2Fentrypoints.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -6,5 +6,4 @@ export * as HtmlContext from '../../../../../shared/lib/html-context.shared-runt\n export * as HooksClientContext from '../../../../../shared/lib/hooks-client-context.shared-runtime'\n export * as HeadManagerContext from '../../../../../shared/lib/head-manager-context.shared-runtime'\n export * as AppRouterContext from '../../../../../shared/lib/app-router-context.shared-runtime'\n-export * as AmpContext from '../../../../../shared/lib/amp-context.shared-runtime'\n export * as ServerInsertedHtml from '../../../../../shared/lib/server-inserted-html.shared-runtime'"
        },
        {
            "sha": "31b64d1007ecc5e50713f678ae1c41284008e849",
            "filename": "packages/next/src/server/typescript/rules/config.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 27,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Ftypescript%2Frules%2Fconfig.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Ftypescript%2Frules%2Fconfig.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Ftypescript%2Frules%2Fconfig.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -6,11 +6,7 @@ import {\n   getTs,\n   removeStringQuotes,\n } from '../utils'\n-import {\n-  NEXT_TS_ERRORS,\n-  ALLOWED_EXPORTS,\n-  LEGACY_CONFIG_EXPORT,\n-} from '../constant'\n+import { NEXT_TS_ERRORS, ALLOWED_EXPORTS } from '../constant'\n import type tsModule from 'typescript/lib/tsserverlibrary'\n import type { AppSegmentConfig } from '../../../build/segment-config/app/app-segment-config'\n \n@@ -616,28 +612,6 @@ const config = {\n                 })\n               }\n             }\n-          } else if (name.text === LEGACY_CONFIG_EXPORT) {\n-            // export const config = { ... }\n-            // Error if using `amp: ...`\n-            const value = declaration.initializer\n-            if (value && ts.isObjectLiteralExpression(value)) {\n-              for (const prop of value.properties) {\n-                if (\n-                  ts.isPropertyAssignment(prop) &&\n-                  ts.isIdentifier(prop.name) &&\n-                  prop.name.text === 'amp'\n-                ) {\n-                  diagnostics.push({\n-                    file: source,\n-                    category: ts.DiagnosticCategory.Error,\n-                    code: NEXT_TS_ERRORS.INVALID_CONFIG_OPTION,\n-                    messageText: `AMP is not supported in the app directory. If you need to use AMP it will continue to be supported in the pages directory.`,\n-                    start: prop.getStart(),\n-                    length: prop.getWidth(),\n-                  })\n-                }\n-              }\n-            }\n           }\n         }\n       }"
        },
        {
            "sha": "62e5cae599ff43891c7d47370815fe735fab5ac3",
            "filename": "packages/next/src/server/utils.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 11,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Futils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fserver%2Futils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Futils.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -4,17 +4,6 @@ export function isBlockedPage(page: string): boolean {\n   return BLOCKED_PAGES.includes(page)\n }\n \n-export function cleanAmpPath(pathname: string): string {\n-  if (pathname.match(/\\?amp=(y|yes|true|1)/)) {\n-    pathname = pathname.replace(/\\?amp=(y|yes|true|1)&?/, '?')\n-  }\n-  if (pathname.match(/&amp=(y|yes|true|1)/)) {\n-    pathname = pathname.replace(/&amp=(y|yes|true|1)/, '')\n-  }\n-  pathname = pathname.replace(/\\?$/, '')\n-  return pathname\n-}\n-\n type AnyFunc<T> = (this: T, ...args: any) => any\n export function debounce<T, F extends AnyFunc<T>>(\n   fn: F,"
        },
        {
            "sha": "3d71886281cdbcf7f7e7863013cd8bf33fc2b61f",
            "filename": "packages/next/src/shared/lib/amp-context.shared-runtime.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Famp-context.shared-runtime.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Famp-context.shared-runtime.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Famp-context.shared-runtime.ts?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,7 +0,0 @@\n-import React from 'react'\n-\n-export const AmpStateContext: React.Context<any> = React.createContext({})\n-\n-if (process.env.NODE_ENV !== 'production') {\n-  AmpStateContext.displayName = 'AmpStateContext'\n-}"
        },
        {
            "sha": "234cdc3343a78ecbbe58c79f8fa2aead9000f48d",
            "filename": "packages/next/src/shared/lib/amp-mode.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Famp-mode.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Famp-mode.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Famp-mode.ts?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,7 +0,0 @@\n-export function isInAmpMode({\n-  ampFirst = false,\n-  hybrid = false,\n-  hasQuery = false,\n-} = {}): boolean {\n-  return ampFirst || (hybrid && hasQuery)\n-}"
        },
        {
            "sha": "8edd21db9c299fb07dbf29ba351f00a397838442",
            "filename": "packages/next/src/shared/lib/amp.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Famp.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Famp.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Famp.ts?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,8 +0,0 @@\n-import React from 'react'\n-import { AmpStateContext } from './amp-context.shared-runtime'\n-import { isInAmpMode } from './amp-mode'\n-\n-export function useAmp(): boolean {\n-  // Don't assign the context value to a variable to save bytes\n-  return isInAmpMode(React.useContext(AmpStateContext))\n-}"
        },
        {
            "sha": "f291848d7acd2307d49f1e582659628ca253ea49",
            "filename": "packages/next/src/shared/lib/constants.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fconstants.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fconstants.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fconstants.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -142,8 +142,6 @@ export const CLIENT_STATIC_FILES_RUNTIME_MAIN_APP = `${CLIENT_STATIC_FILES_RUNTI\n export const APP_CLIENT_INTERNALS = 'app-pages-internals'\n // static/runtime/react-refresh.js\n export const CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH = `react-refresh`\n-// static/runtime/amp.js\n-export const CLIENT_STATIC_FILES_RUNTIME_AMP = `amp`\n // static/runtime/webpack.js\n export const CLIENT_STATIC_FILES_RUNTIME_WEBPACK = `webpack`\n // static/runtime/polyfills.js\n@@ -203,6 +201,5 @@ export const EDGE_UNSUPPORTED_NODE_APIS = [\n export const SYSTEM_ENTRYPOINTS = new Set<string>([\n   CLIENT_STATIC_FILES_RUNTIME_MAIN,\n   CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH,\n-  CLIENT_STATIC_FILES_RUNTIME_AMP,\n   CLIENT_STATIC_FILES_RUNTIME_MAIN_APP,\n ])"
        },
        {
            "sha": "74e91b6fdfe0b518d9fe719b09a3894970e1746e",
            "filename": "packages/next/src/shared/lib/head.tsx",
            "status": "modified",
            "additions": 8,
            "deletions": 20,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fhead.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fhead.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fhead.tsx?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -2,22 +2,14 @@\n \n import React, { useContext, type JSX } from 'react'\n import Effect from './side-effect'\n-import { AmpStateContext } from './amp-context.shared-runtime'\n import { HeadManagerContext } from './head-manager-context.shared-runtime'\n-import { isInAmpMode } from './amp-mode'\n import { warnOnce } from './utils/warn-once'\n \n-type WithInAmpMode = {\n-  inAmpMode?: boolean\n-}\n-\n-export function defaultHead(inAmpMode = false): JSX.Element[] {\n-  const head = [<meta charSet=\"utf-8\" key=\"charset\" />]\n-  if (!inAmpMode) {\n-    head.push(\n-      <meta name=\"viewport\" content=\"width=device-width\" key=\"viewport\" />\n-    )\n-  }\n+export function defaultHead(): JSX.Element[] {\n+  const head = [\n+    <meta charSet=\"utf-8\" key=\"charset\" />,\n+    <meta name=\"viewport\" content=\"width=device-width\" key=\"viewport\" />,\n+  ]\n   return head\n }\n \n@@ -124,15 +116,13 @@ function unique() {\n  *\n  * @param headChildrenElements List of children of <Head>\n  */\n-function reduceComponents<T extends {} & WithInAmpMode>(\n-  headChildrenElements: Array<React.ReactElement<any>>,\n-  props: T\n+function reduceComponents(\n+  headChildrenElements: Array<React.ReactElement<any>>\n ) {\n-  const { inAmpMode } = props\n   return headChildrenElements\n     .reduce(onlyReactElement, [])\n     .reverse()\n-    .concat(defaultHead(inAmpMode).reverse())\n+    .concat(defaultHead().reverse())\n     .filter(unique())\n     .reverse()\n     .map((c: React.ReactElement<any>, i: number) => {\n@@ -161,13 +151,11 @@ function reduceComponents<T extends {} & WithInAmpMode>(\n  * To avoid duplicated `tags` in `<head>` you can use the `key` property, which will make sure every tag is only rendered once.\n  */\n function Head({ children }: { children: React.ReactNode }) {\n-  const ampState = useContext(AmpStateContext)\n   const headManager = useContext(HeadManagerContext)\n   return (\n     <Effect\n       reduceComponentsToState={reduceComponents}\n       headManager={headManager}\n-      inAmpMode={isInAmpMode(ampState)}\n     >\n       {children}\n     </Effect>"
        },
        {
            "sha": "4bed5a57beffcc12b851a2e6bb2c4338c89d257d",
            "filename": "packages/next/src/shared/lib/html-context.shared-runtime.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fhtml-context.shared-runtime.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fhtml-context.shared-runtime.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fhtml-context.shared-runtime.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -17,9 +17,6 @@ export type HtmlProps = {\n     NextScript?: boolean\n   }\n   buildManifest: BuildManifest\n-  ampPath: string\n-  inAmpMode: boolean\n-  hybridAmp: boolean\n   isDevelopment: boolean\n   dynamicImports: string[]\n   /**\n@@ -28,7 +25,6 @@ export type HtmlProps = {\n    */\n   dynamicCssManifest: Set<string>\n   assetPrefix?: string\n-  canonicalBase: string\n   headTags: any[]\n   unstable_runtimeJS?: false\n   unstable_JsPreload?: false"
        },
        {
            "sha": "64ba4551041b1629177e3786228894654b12af7a",
            "filename": "packages/next/src/shared/lib/side-effect.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fside-effect.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fside-effect.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fside-effect.tsx?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -4,13 +4,9 @@ import { Children, useEffect, useLayoutEffect, type JSX } from 'react'\n type State = JSX.Element[] | undefined\n \n export type SideEffectProps = {\n-  reduceComponentsToState: <T extends {}>(\n-    components: Array<React.ReactElement<any>>,\n-    props: T\n-  ) => State\n+  reduceComponentsToState: (components: Array<React.ReactElement<any>>) => State\n   handleStateChange?: (state: State) => void\n   headManager: any\n-  inAmpMode?: boolean\n   children: React.ReactNode\n }\n \n@@ -28,7 +24,7 @@ export default function SideEffect(props: SideEffectProps) {\n           Boolean\n         )\n       ) as React.ReactElement[]\n-      headManager.updateHead(reduceComponentsToState(headElements, props))\n+      headManager.updateHead(reduceComponentsToState(headElements))\n     }\n   }\n "
        },
        {
            "sha": "96ab331ac6dd2bbd1dee5bd3006e0cb6da1481e0",
            "filename": "packages/next/src/shared/lib/turbopack/manifest-loader.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fturbopack%2Fmanifest-loader.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fturbopack%2Fmanifest-loader.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fturbopack%2Fmanifest-loader.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -445,14 +445,12 @@ export class TurbopackManifestLoader {\n       },\n       // Something in next.js depends on these to exist even for app dir rendering\n       devFiles: [],\n-      ampDevFiles: [],\n       polyfillFiles: [],\n       lowPriorityFiles: [\n         `static/${this.buildId}/_ssgManifest.js`,\n         `static/${this.buildId}/_buildManifest.js`,\n       ],\n       rootMainFiles: [],\n-      ampFirstPages: [],\n     }\n     for (const m of manifests) {\n       Object.assign(manifest.pages, m.pages)"
        },
        {
            "sha": "485e9dd0ad868285e0d2d3846de084f2e13ac643",
            "filename": "packages/next/src/types.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 11,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Ftypes.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Fsrc%2Ftypes.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Ftypes.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -7,7 +7,6 @@\n import type { Agent as HttpAgent } from 'http'\n import type { Agent as HttpsAgent } from 'https'\n \n-import type React from 'react'\n import type { ParsedUrlQuery } from 'querystring'\n import type { IncomingMessage, ServerResponse } from 'http'\n \n@@ -61,11 +60,6 @@ export type Route<RouteInferType = any> = string & {}\n \n // Extend the React types with missing properties\n declare module 'react' {\n-  // <html amp=\"\"> support\n-  interface HtmlHTMLAttributes<T> extends React.HTMLAttributes<T> {\n-    amp?: string\n-  }\n-\n   // <img fetchPriority=\"\"> support\n   // eslint-disable-next-line @typescript-eslint/no-unused-vars -- It's actually required for module augmentation to work.\n   interface ImgHTMLAttributes<T> {\n@@ -114,11 +108,6 @@ export type ResponseLimit = SizeLimit | boolean\n  * `Config` type, use it for export const config\n  */\n export type PageConfig = {\n-  /**\n-   * @deprecated built-in amp support will be removed in Next 16\n-   * @see [`next/amp`](https://nextjs.org/docs/api-reference/next/amp)\n-   */\n-  amp?: boolean | 'hybrid'\n   api?: {\n     /**\n      * Configures or disables body size limit warning. Can take a number or"
        },
        {
            "sha": "87c54b63eef740e1bbfba9f892ee7d3461fb896a",
            "filename": "packages/next/taskfile.js",
            "status": "modified",
            "additions": 4,
            "deletions": 46,
            "changes": 50,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Ftaskfile.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Ftaskfile.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Ftaskfile.js?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -680,32 +680,6 @@ export async function ncc_hapi_accept(task, opts) {\n     .target('src/compiled/@hapi/accept')\n }\n \n-// eslint-disable-next-line camelcase\n-externals['amphtml-validator'] = 'next/dist/compiled/amphtml-validator'\n-export async function ncc_amphtml_validator(task, opts) {\n-  await task\n-    .source(relative(__dirname, require.resolve('amphtml-validator')))\n-    .ncc({ packageName: 'amphtml-validator', externals })\n-    .target('src/compiled/amphtml-validator')\n-\n-  const validatorRes = await fetch(\n-    'https://cdn.ampproject.org/v0/validator_wasm.js'\n-  ).catch((err) => {\n-    throw new Error('Failed to fetch AMP validator', { cause: err })\n-  })\n-\n-  if (!validatorRes.ok) {\n-    throw new Error(\n-      `Failed to get the AMP validator, status: ${validatorRes.status}`\n-    )\n-  }\n-\n-  await fs.writeFile(\n-    join(__dirname, 'src/compiled/amphtml-validator/validator_wasm.js'),\n-    require('buffer').Buffer.from(await validatorRes.arrayBuffer())\n-  )\n-}\n-\n // eslint-disable-next-line camelcase\n export async function ncc_assert(task, opts) {\n   await task\n@@ -1002,20 +976,6 @@ export async function ncc_vm_browserify(task, opts) {\n     .target('src/compiled/vm-browserify')\n }\n \n-// eslint-disable-next-line camelcase\n-externals['@ampproject/toolbox-optimizer'] =\n-  'next/dist/compiled/@ampproject/toolbox-optimizer'\n-export async function ncc_amp_optimizer(task, opts) {\n-  await task\n-    .source(\n-      relative(__dirname, require.resolve('@ampproject/toolbox-optimizer'))\n-    )\n-    .ncc({\n-      externals,\n-      packageName: '@ampproject/toolbox-optimizer',\n-    })\n-    .target('src/compiled/@ampproject/toolbox-optimizer')\n-}\n // eslint-disable-next-line camelcase\n externals['async-retry'] = 'next/dist/compiled/async-retry'\n export async function ncc_async_retry(task, opts) {\n@@ -2330,7 +2290,6 @@ export async function ncc(task, opts) {\n     .parallel(\n       [\n         'ncc_safe_stable_stringify',\n-        'ncc_amp_optimizer',\n         'ncc_node_html_parser',\n         'ncc_napirs_triples',\n         'ncc_p_limit',\n@@ -2346,7 +2305,6 @@ export async function ncc(task, opts) {\n         'ncc_node_cssescape',\n         'ncc_node_shell_quote',\n         'ncc_acorn',\n-        'ncc_amphtml_validator',\n         'ncc_async_retry',\n         'ncc_async_sema',\n         'ncc_postcss_plugin_stub_for_cssnano_simple',\n@@ -2895,7 +2853,7 @@ export async function shared(task, opts) {\n   await task\n     .source('src/shared/**/*.+(js|ts|tsx)', {\n       ignore: [\n-        'src/shared/**/{amp,config,constants,dynamic,app-dynamic,head,runtime-config}.+(js|ts|tsx)',\n+        'src/shared/**/{config,constants,dynamic,app-dynamic,head,runtime-config}.+(js|ts|tsx)',\n         '**/*.test.d.ts',\n         '**/*.test.+(js|ts|tsx)',\n       ],\n@@ -2908,7 +2866,7 @@ export async function shared_esm(task, opts) {\n   await task\n     .source('src/shared/**/*.+(js|ts|tsx)', {\n       ignore: [\n-        'src/shared/**/{amp,config,constants,dynamic,app-dynamic,head,runtime-config}.+(js|ts|tsx)',\n+        'src/shared/**/{config,constants,dynamic,app-dynamic,head,runtime-config}.+(js|ts|tsx)',\n         '**/*.test.d.ts',\n         '**/*.test.+(js|ts|tsx)',\n       ],\n@@ -2920,7 +2878,7 @@ export async function shared_esm(task, opts) {\n export async function shared_re_exported(task, opts) {\n   await task\n     .source(\n-      'src/shared/**/{amp,config,constants,dynamic,app-dynamic,head,runtime-config}.+(js|ts|tsx)',\n+      'src/shared/**/{config,constants,dynamic,app-dynamic,head,runtime-config}.+(js|ts|tsx)',\n       {\n         ignore: ['**/*.test.d.ts', '**/*.test.+(js|ts|tsx)'],\n       }\n@@ -2932,7 +2890,7 @@ export async function shared_re_exported(task, opts) {\n export async function shared_re_exported_esm(task, opts) {\n   await task\n     .source(\n-      'src/shared/**/{amp,config,constants,app-dynamic,dynamic,head}.+(js|ts|tsx)',\n+      'src/shared/**/{config,constants,app-dynamic,dynamic,head}.+(js|ts|tsx)',\n       {\n         ignore: ['**/*.test.d.ts', '**/*.test.+(js|ts|tsx)'],\n       }"
        },
        {
            "sha": "9d674740f5baaad65435ded03875b80c6dcc9bcc",
            "filename": "packages/next/types/$$compiled.internal.d.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Ftypes%2F%24%24compiled.internal.d.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Fnext%2Ftypes%2F%24%24compiled.internal.d.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Ftypes%2F%24%24compiled.internal.d.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -504,11 +504,6 @@ declare module 'next/dist/compiled/acorn' {\n   import m from 'acorn'\n   export = m\n }\n-declare module 'next/dist/compiled/amphtml-validator' {\n-  import m from 'amphtml-validator'\n-  export = m\n-}\n-declare module 'next/dist/compiled/@ampproject/toolbox-optimizer'\n \n declare module 'next/dist/compiled/superstruct' {\n   import * as m from 'superstruct'"
        },
        {
            "sha": "10afaacf3b4ab94c933355dcb4f756836faf7999",
            "filename": "packages/react-refresh-utils/internal/ReactRefreshModule.runtime.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Freact-refresh-utils%2Finternal%2FReactRefreshModule.runtime.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/packages%2Freact-refresh-utils%2Finternal%2FReactRefreshModule.runtime.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Freact-refresh-utils%2Finternal%2FReactRefreshModule.runtime.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -24,7 +24,7 @@ export default function () {\n     // browser context before continuing.\n     if (\n       typeof self !== 'undefined' &&\n-      // AMP / No-JS mode does not inject these helpers:\n+      // No-JS mode does not inject these helpers:\n       '$RefreshHelpers$' in self\n     ) {\n       // @ts-ignore __webpack_module__ is global"
        },
        {
            "sha": "5dc7429572b21189f6bf8150bc4221ee08fb7ae0",
            "filename": "patches/@ampproject__toolbox-optimizer@2.8.3.patch",
            "status": "removed",
            "additions": 0,
            "deletions": 17,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/patches%2F%40ampproject__toolbox-optimizer%402.8.3.patch",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/patches%2F%40ampproject__toolbox-optimizer%402.8.3.patch",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/patches%2F%40ampproject__toolbox-optimizer%402.8.3.patch?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,17 +0,0 @@\n-diff --git a/lib/transformers/OptimizeAmpBind.js b/lib/transformers/OptimizeAmpBind.js\n-index 2d17ce26676853230ec933d8e489bb3633116af4..38a4ac6746d385cdb9292773e575829e708c8c0e 100644\n---- a/lib/transformers/OptimizeAmpBind.js\n-+++ b/lib/transformers/OptimizeAmpBind.js\n-@@ -48,7 +48,11 @@ class OptimizeAmpBind {\n-     for (let node = html; node !== null; node = nextNode(node)) {\n-       if (isTemplate(node)) {\n-         node = skipNodeAndChildren(node);\n--        continue;\n-+        if (node === null) {\n-+          break;\n-+        } else {\n-+          continue;\n-+        }\n-       }\n- \n-       const {attribs} = node;"
        },
        {
            "sha": "6f477b430de1c3d61ded91ca4b1a0095cb4b8225",
            "filename": "pnpm-lock.yaml",
            "status": "modified",
            "additions": 0,
            "deletions": 223,
            "changes": 223,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/pnpm-lock.yaml",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/pnpm-lock.yaml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/pnpm-lock.yaml?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -25,9 +25,6 @@ overrides:\n packageExtensionsChecksum: 2c0398c5f3e8ad5816061c5823d227e9\n \n patchedDependencies:\n-  '@ampproject/toolbox-optimizer@2.8.3':\n-    hash: baeiwbdq3sqmjnnh2lznmpb5bu\n-    path: patches/@ampproject__toolbox-optimizer@2.8.3.patch\n   '@types/node@20.17.6':\n     hash: rvl3vkomen3tospgr67bzubfyu\n     path: patches/@types__node@20.17.6.patch\n@@ -1003,9 +1000,6 @@ importers:\n         specifier: ^0.34.4\n         version: 0.34.4\n     devDependencies:\n-      '@ampproject/toolbox-optimizer':\n-        specifier: 2.8.3\n-        version: 2.8.3(patch_hash=baeiwbdq3sqmjnnh2lznmpb5bu)\n       '@babel/code-frame':\n         specifier: 7.26.2\n         version: 7.26.2\n@@ -1165,9 +1159,6 @@ importers:\n       '@taskr/esnext':\n         specifier: 1.1.0\n         version: 1.1.0\n-      '@types/amphtml-validator':\n-        specifier: 1.0.0\n-        version: 1.0.0\n       '@types/babel__code-frame':\n         specifier: 7.0.6\n         version: 7.0.6\n@@ -1279,9 +1270,6 @@ importers:\n       acorn:\n         specifier: 8.14.0\n         version: 8.14.0\n-      amphtml-validator:\n-        specifier: 1.0.38\n-        version: 1.0.38\n       anser:\n         specifier: 1.4.9\n         version: 1.4.9\n@@ -1968,29 +1956,6 @@ packages:\n     resolution: {integrity: sha512-lFMjJTrFL3j7L9yBxwYfCq2k6qqwHyzuUl/XBnif78PWTJYyL/dfowQHWE3sp6U6ZzqWiiIZnpTMO96zhkjwtg==}\n     engines: {node: '>=6.0.0'}\n \n-  '@ampproject/toolbox-core@2.8.0':\n-    resolution: {integrity: sha512-YrMRrE9zfAChPlFLT+B4yoGEH6CR/Yerjm6SCxuFSPARK/LaytUV+ZhZ03tlMv5wUHDH2Lq8e/lGymME0CXBhA==}\n-\n-  '@ampproject/toolbox-optimizer@2.8.3':\n-    resolution: {integrity: sha512-kcs2vT1bY5hvgLfCn7xzlxZzYc/as2r7cy7YlPpxWSO3kcZQnO25HAQZO5+G+a+RKsd++rb4Ga9GhhZyIthfxQ==}\n-    peerDependencies:\n-      jimp: '*'\n-      probe-image-size: '*'\n-    peerDependenciesMeta:\n-      jimp:\n-        optional: true\n-      probe-image-size:\n-        optional: true\n-\n-  '@ampproject/toolbox-runtime-version@2.8.0':\n-    resolution: {integrity: sha512-vkotDc6S3Q3Xm6LIPzWo2T1+yxvj+bIDrD4SObk6J4SVqilIlPEunLayS602Su+ZXqNC82VjEeD1ARAtc613dQ==}\n-\n-  '@ampproject/toolbox-script-csp@2.8.0':\n-    resolution: {integrity: sha512-5/ytdTzhmdIyOkcEBskh5ZlLJ8V4bbe+1pY9LZQ8DfWrSOVD1pJ+LtAO/7lmTM+HXxMAKPYDRpvsJc0vvbY0tw==}\n-\n-  '@ampproject/toolbox-validator-rules@2.8.0':\n-    resolution: {integrity: sha512-kbInwnzpEPVZkKigpKFkF/DQ2LsuZ5b8vrEFHjJ4P+meKVQg2QF/UWAQpIMMdjGe1AQBT+DWm91n9UyjgqfnWQ==}\n-\n   '@ast-grep/cli-darwin-arm64@0.31.0':\n     resolution: {integrity: sha512-6hQjv3JNMwECcbOEqn3dRAFOf0gsM4Q1/UzBW9mLfQVae935+zw+DIgBKjzKHQPdxr4XO+KJr8GcfeEhOLMbJw==}\n     engines: {node: '>= 10'}\n@@ -5904,9 +5869,6 @@ packages:\n   '@types/acorn@4.0.6':\n     resolution: {integrity: sha512-veQTnWP+1D/xbxVrPC3zHnCZRjSrKfhbMUlEA43iMZLu7EsnTtkJklIuwrCPbOi8YkvDQAiW05VQQFvvz9oieQ==}\n \n-  '@types/amphtml-validator@1.0.0':\n-    resolution: {integrity: sha512-CJOi00fReT1JehItkgTZDI47v9WJxUH/OLX0XzkDgyEed7dGdeUQfXk5CTRM7N9FkHdv3klSjsZxo5sH1oTIGg==}\n-\n   '@types/aria-query@5.0.1':\n     resolution: {integrity: sha512-XTIieEY+gvJ39ChLcB4If5zHtPxt3Syj5rgZR+e1ctpmK8NjPf0zFqsz4JpLJT0xla9GFDKjy8Cpu331nrmE1Q==}\n \n@@ -6749,10 +6711,6 @@ packages:\n   alphanum-sort@1.0.2:\n     resolution: {integrity: sha512-0FcBfdcmaumGPQ0qPn7Q5qTgz/ooXgIyp1rf8ik5bGX8mpE2YHjC0P/eyQvxu1GURYQgq9ozf2mteQ5ZD9YiyQ==}\n \n-  amphtml-validator@1.0.38:\n-    resolution: {integrity: sha512-TqGeHVRUEsMiJoaRvMhzZBv8oljLhhJgzkaPX/zT2eJFG5FLeaMehd6riNwsuMmi9e/5xsI0pocbTgN/u2sonQ==}\n-    hasBin: true\n-\n   anser@1.4.9:\n     resolution: {integrity: sha512-AI+BjTeGt2+WFk4eWcqbQ7snZpDBt8SaLlj0RT2h5xfdWaiy51OjYvqwMrNzJLGy8iOAL6nKDITWO+rd4MkYEA==}\n \n@@ -7780,19 +7738,12 @@ packages:\n   colord@2.9.3:\n     resolution: {integrity: sha512-jeC1axXpnb0/2nn/Y1LPuLdgXBLH7aDcHu4KEKfqw3CUhX7ZpfBSlPKyqXE6btIgEzfWtrX3/tyBCaCvXvMkOw==}\n \n-  colorette@1.4.0:\n-    resolution: {integrity: sha512-Y2oEozpomLn7Q3HFP7dpww7AtMJplbM9lGZP6RDfHqmbeRjiwRg4n6VM6j4KLmRke85uWEI7JqF17f3pqdRA0g==}\n-\n   colorette@2.0.19:\n     resolution: {integrity: sha512-3tlv/dIP7FWvj3BsbHrGLJ6l/oKh1O3TcgBqMn+yyCagOxc23fyzDS6HypQbgxWbkpDnf52p1LuR4eWDQ/K9WQ==}\n \n   colorette@2.0.20:\n     resolution: {integrity: sha512-IfEDxwoWIjkeXL1eXcDiow4UbKjhLdq6/EuSVR9GMN7KVH3r9gQ83e73hsz1Nd1T3ijd5xv1wcWRYO+D6kCI2w==}\n \n-  colors@1.4.0:\n-    resolution: {integrity: sha512-a+UqTh4kgZg/SlGvfbzDHpgRu7AAQOmmqRHJnxhRZICKFUT91brVhNNt58CMWU9PsBbv3PDCZUHbVxuDiH2mtA==}\n-    engines: {node: '>=0.1.90'}\n-\n   columnify@1.5.4:\n     resolution: {integrity: sha512-rFl+iXVT1nhLQPfGDw+3WcS8rmm7XsLKUmhsGE3ihzzpIikeGrTaZPIRKYWeLsLBypsHzjXIvYEltVUZS84XxQ==}\n \n@@ -7810,10 +7761,6 @@ packages:\n     resolution: {integrity: sha512-yPVavfyCcRhmorC7rWlkHn15b4wDVgVmBA7kV4QVBsF7kv/9TKJAbAXVTxvTnwP8HHKjRCJDClKbciiYS7p0DQ==}\n     engines: {node: '>=16'}\n \n-  commander@12.0.0:\n-    resolution: {integrity: sha512-MwVNWlYjDTtOjX5PiD7o5pK0UrFU/OYgcJfjjK4RaHZETNtjJqrZa9Y9ds88+A+f+d5lv+561eZ+yCKoS3gbAA==}\n-    engines: {node: '>=18'}\n-\n   commander@12.1.0:\n     resolution: {integrity: sha512-Vw8qHK3bZM9y/P10u3Vib8o/DdkvA2OtPtZvD871QKjy74Wj1WSKFILMPRPSdUSx5RFK1arlJzEtA4PkFgnbuA==}\n     engines: {node: '>=18'}\n@@ -8061,9 +8008,6 @@ packages:\n     engines: {node: '>=10.14', npm: '>=6', yarn: '>=1'}\n     hasBin: true\n \n-  cross-fetch@3.1.2:\n-    resolution: {integrity: sha512-+JhD65rDNqLbGmB3Gzs3HrEKC0aQnD+XA3SY6RjgkF88jV2q5cTc5+CwxlS3sdmLk98gpPt5CF9XRnPdlxZe6w==}\n-\n   cross-fetch@3.1.4:\n     resolution: {integrity: sha512-1eAtFWdIubi6T4XPy6ei9iUFoKpUkIF971QLN8lIvvvwueI65+Nw5haMNKUwfJxabqlIIDODJKGrQ66gxC0PbQ==}\n \n@@ -8255,16 +8199,6 @@ packages:\n     peerDependencies:\n       postcss: ^8.4.31\n \n-  cssnano-preset-simple@2.0.0:\n-    resolution: {integrity: sha512-HkufSLkaBJbKBFx/7aj5HmCK9Ni/JedRQm0mT2qBzMG/dEuJOLnMt2lK6K1rwOOyV4j9aSY+knbW9WoS7BYpzg==}\n-    peerDependencies:\n-      postcss: ^8.2.1\n-\n-  cssnano-simple@2.0.0:\n-    resolution: {integrity: sha512-0G3TXaFxlh/szPEG/o3VcmCwl0N3E60XNb9YZZijew5eIs6fLjJuOPxQd9yEBaX2p/YfJtt49i4vYi38iH6/6w==}\n-    peerDependencies:\n-      postcss: ^8.2.2\n-\n   cssnano-util-get-arguments@4.0.0:\n     resolution: {integrity: sha512-6RIcwmV3/cBMG8Aj5gucQRsJb4vv4I4rn6YjPbVWd5+Pn/fuG+YseGvXGk00XLkoZkaj31QOD7vMUpNPC4FIuw==}\n     engines: {node: '>=6.9.0'}\n@@ -8874,9 +8808,6 @@ packages:\n   dom-serializer@0.2.2:\n     resolution: {integrity: sha512-2/xPb3ORsQ42nHYiSunXkDjPLBaEj/xTwUO4B7XCZQTRk7EBtTOPaygh10YAAh2OI1Qrp6NWfpAhzswj0ydt9g==}\n \n-  dom-serializer@1.2.0:\n-    resolution: {integrity: sha512-n6kZFH/KlCrqs/1GHMOd5i2fd/beQHuehKdWvNNffbGHTr/almdhuVvTVFb3V7fglz+nC50fFusu3lY33h12pA==}\n-\n   dom-serializer@1.3.1:\n     resolution: {integrity: sha512-Pv2ZluG5ife96udGgEDovOOOA5UELkltfJpnIExPrAk1LTvecolUGn6lIaoLh86d83GiB86CjzciMd9BuRB71Q==}\n \n@@ -8907,10 +8838,6 @@ packages:\n   domhandler@2.4.2:\n     resolution: {integrity: sha512-JiK04h0Ht5u/80fdLMCEmV4zkNh2BcoMFBmZ/91WtYZ8qVXSKjiw7fXMgFPnHcSZgOo3XdinHvmnDUeMf5R4wA==}\n \n-  domhandler@4.0.0:\n-    resolution: {integrity: sha512-KPTbnGQ1JeEMQyO1iYXoagsI6so/C96HZiFyByU3T6iAzpXn8EGEvct6unm1ZGoed8ByO2oirxgwxBmqKF9haA==}\n-    engines: {node: '>= 4'}\n-\n   domhandler@4.2.0:\n     resolution: {integrity: sha512-zk7sgt970kzPks2Bf+dwT/PLzghLnsivb9CcxkvR8Mzr66Olr0Ofd8neSbglHJHaHa2MadfoSdNlKYAaafmWfA==}\n     engines: {node: '>= 4'}\n@@ -8932,9 +8859,6 @@ packages:\n   domutils@1.7.0:\n     resolution: {integrity: sha512-Lgd2XcJ/NjEw+7tFvfKxOzCYKZsdct5lczQ2ZaQY8Djz7pfAD3Gbp8ySJWtreII/vDlMVmxwa6pHmdxIYgttDg==}\n \n-  domutils@2.5.0:\n-    resolution: {integrity: sha512-Ho16rzNMOFk2fPwChGh3D2D9OEHAfG19HgmRR2l+WLSsIstNsAYBzePH412bL0y5T44ejABIVfTHQ8nqi/tBCg==}\n-\n   domutils@2.6.0:\n     resolution: {integrity: sha512-y0BezHuy4MDYxh6OvolXYsH+1EMGmFbwv5FKW7ovwMG6zTPWqNPq3WF9ayZssFq+UlKdffGLbOEaghNdaOm1WA==}\n \n@@ -10632,9 +10556,6 @@ packages:\n   htmlparser2@3.10.1:\n     resolution: {integrity: sha512-IgieNijUMbkDovyoKObU1DUhm1iwNYE/fuifEoEHfd1oZKZDaONBSkal7Y01shxsM49R4XaMdGez3WnF9UfiCQ==}\n \n-  htmlparser2@6.0.1:\n-    resolution: {integrity: sha512-GDKPd+vk4jvSuvCbyuzx/unmXkk090Azec7LovXP8as1Hn8q9p3hbjmDGbUqqhknw0ajwit6LiiWqfiTUPMK7w==}\n-\n   htmlparser2@6.1.0:\n     resolution: {integrity: sha512-gyyPk6rgonLFEDGoeRgQNaEUvdJ4ktTmmUh/h2t7s+M8oPpIPxgNACWa+6ESR57kXstwqPiCut0V8NRpcwgU7A==}\n \n@@ -10699,10 +10620,6 @@ packages:\n     resolution: {integrity: sha512-OmvfoQ53WLjtA9HeYP9RNrWMJzzAz1JGaSFr1nijg0PVR1JaD/xbJq1mdEIIlxGpXp9eSe/O2LgU9DJmTPd0Eg==}\n     engines: {node: '>= 4.5.0'}\n \n-  https-proxy-agent@5.0.0:\n-    resolution: {integrity: sha512-EkYm5BcKUGiduxzSt3Eppko+PiNWNEpa4ySk9vTC6wDsQJW9rHSa+UhGNJoRYp7bz6Ht1eaRIa6QaJqO5rCFbA==}\n-    engines: {node: '>= 6'}\n-\n   https-proxy-agent@5.0.1:\n     resolution: {integrity: sha512-dFcAjpTQFgoLMzC2VwU+C/CbS7uRL0lWmxDITmqm7C+7F0Odmj6s9l6alZc6AELXhrnggM2CeWSXHGOdX2YtwA==}\n     engines: {node: '>= 6'}\n@@ -13219,10 +13136,6 @@ packages:\n     engines: {node: ^14.17.0 || ^16.13.0 || >=18.0.0}\n     hasBin: true\n \n-  normalize-html-whitespace@1.0.0:\n-    resolution: {integrity: sha512-9ui7CGtOOlehQu0t/OhhlmDyc71mKVlv+4vF+me4iZLPrNtRL2xoquEdfZxasC/bdQi/Hr3iTrpyRKIG+ocabA==}\n-    engines: {node: '>= 8'}\n-\n   normalize-package-data@2.5.0:\n     resolution: {integrity: sha512-/5CMN3T0R4XTj4DcGaexo+roZSdSFW/0AOOTROrjxzCG1wrWXEsGbRKevjlIL+ZDE4sZlJr5ED4YW0yqmkK+eA==}\n \n@@ -14473,10 +14386,6 @@ packages:\n     peerDependencies:\n       postcss: ^8.0.3\n \n-  postcss-safe-parser@5.0.2:\n-    resolution: {integrity: sha512-jDUfCPJbKOABhwpUKcqCVbbXiloe/QXMcbJ6Iipf3sDIihEzTqRCeMBfRaOHxhBuTYqtASrI1KJWxzztZU4qUQ==}\n-    engines: {node: '>=10.0'}\n-\n   postcss-safe-parser@6.0.0:\n     resolution: {integrity: sha512-FARHN8pwH+WiS2OPCxJI8FuRJpTVnn6ZNFiqAM2aeW2LwTHWWmWgIyKC6cUo0L8aeKiF/14MNvnpls6R2PBeMQ==}\n     engines: {node: '>=12.0'}\n@@ -14571,10 +14480,6 @@ packages:\n     resolution: {integrity: sha512-03eXong5NLnNCD05xscnGKGDZ98CyzoqPSMjOe6SuoQY7Z2hIj0Ld1g/O/UQRuOle2aRtiIRDg9tDcTGAkLfKw==}\n     engines: {node: '>=6.0.0'}\n \n-  postcss@8.2.13:\n-    resolution: {integrity: sha512-FCE5xLH+hjbzRdpbRb1IMCvPv9yZx2QnDarBEYSN0N0HYk+TcXsEhwdFcFb+SRWOKzKGErhIEbBK2ogyLdTtfQ==}\n-    engines: {node: ^10 || ^12 || >=14}\n-\n   postcss@8.4.31:\n     resolution: {integrity: sha512-PS08Iboia9mts/2ygV3eLpY5ghnUcfLV/EXTOW1E2qYxJKGGBUtNjN76FYHnMs36RmARn41bC0AZmn+rR0OVpQ==}\n     engines: {node: ^10 || ^12 || >=14}\n@@ -14763,9 +14668,6 @@ packages:\n   promise@7.3.1:\n     resolution: {integrity: sha512-nolQXZ/4L+bP/UGlkfaIujX9BKxGwmQ9OT4mOt5yvy8iK1h3wqTEJCijzGANTCCl9nWjY41juyAn2K3Q1hLLTg==}\n \n-  promise@8.3.0:\n-    resolution: {integrity: sha512-rZPNPKTOYVNEEKFaq1HqTgOwZD+4/YHS5ukLzQCypkj+OkYx7iv0mA91lJlpPPZ8vMau3IIGj5Qlwrx+8iiSmg==}\n-\n   prompts@2.4.2:\n     resolution: {integrity: sha512-NxNv/kLguCA7p3jE8oL2aEBsrJWgAakBpgmgK6lpPWV+WuOmY6r2/zbAVnP+T8bQlA0nzHXSJSJW0Hq7ylaD2Q==}\n     engines: {node: '>= 6'}\n@@ -16640,11 +16542,6 @@ packages:\n     engines: {node: '>=10'}\n     hasBin: true\n \n-  terser@5.5.1:\n-    resolution: {integrity: sha512-6VGWZNVP2KTUcltUQJ25TtNjx/XgdDsBDKGt8nN0MpydU36LmbPPcMBd2kmtZNNGVVDLg44k7GKeHHj+4zPIBQ==}\n-    engines: {node: '>=10'}\n-    hasBin: true\n-\n   test-exclude@6.0.0:\n     resolution: {integrity: sha512-cAGWPIyOHU6zlmg88jwm7VRyXnMN7iV68OGAbYDk/Mh/xC/pzVPlQtY6ngoIH/5/tciuhGfvESU8GrHrcxD56w==}\n     engines: {node: '>=8'}\n@@ -18070,43 +17967,6 @@ snapshots:\n       '@jridgewell/gen-mapping': 0.3.3\n       '@jridgewell/trace-mapping': 0.3.25\n \n-  '@ampproject/toolbox-core@2.8.0':\n-    dependencies:\n-      cross-fetch: 3.1.2\n-      lru-cache: 6.0.0\n-\n-  '@ampproject/toolbox-optimizer@2.8.3(patch_hash=baeiwbdq3sqmjnnh2lznmpb5bu)':\n-    dependencies:\n-      '@ampproject/toolbox-core': 2.8.0\n-      '@ampproject/toolbox-runtime-version': 2.8.0\n-      '@ampproject/toolbox-script-csp': 2.8.0\n-      '@ampproject/toolbox-validator-rules': 2.8.0\n-      abort-controller: 3.0.0\n-      cross-fetch: 3.1.2\n-      cssnano-simple: 2.0.0(postcss@8.2.13)\n-      dom-serializer: 1.2.0\n-      domhandler: 4.0.0\n-      domutils: 2.5.0\n-      htmlparser2: 6.0.1\n-      https-proxy-agent: 5.0.0\n-      lru-cache: 6.0.0\n-      normalize-html-whitespace: 1.0.0\n-      postcss: 8.2.13\n-      postcss-safe-parser: 5.0.2\n-      terser: 5.5.1\n-    transitivePeerDependencies:\n-      - supports-color\n-\n-  '@ampproject/toolbox-runtime-version@2.8.0':\n-    dependencies:\n-      '@ampproject/toolbox-core': 2.8.0\n-\n-  '@ampproject/toolbox-script-csp@2.8.0': {}\n-\n-  '@ampproject/toolbox-validator-rules@2.8.0':\n-    dependencies:\n-      cross-fetch: 3.1.2\n-\n   '@ast-grep/cli-darwin-arm64@0.31.0':\n     optional: true\n \n@@ -22909,10 +22769,6 @@ snapshots:\n     dependencies:\n       '@types/estree': 1.0.7\n \n-  '@types/amphtml-validator@1.0.0':\n-    dependencies:\n-      '@types/node': 20.17.6(patch_hash=rvl3vkomen3tospgr67bzubfyu)\n-\n   '@types/aria-query@5.0.1': {}\n \n   '@types/async-retry@1.4.2':\n@@ -24003,12 +23859,6 @@ snapshots:\n \n   alphanum-sort@1.0.2: {}\n \n-  amphtml-validator@1.0.38:\n-    dependencies:\n-      colors: 1.4.0\n-      commander: 12.0.0\n-      promise: 8.3.0\n-\n   anser@1.4.9: {}\n \n   ansi-align@3.0.0:\n@@ -25175,14 +25025,10 @@ snapshots:\n \n   colord@2.9.3: {}\n \n-  colorette@1.4.0: {}\n-\n   colorette@2.0.19: {}\n \n   colorette@2.0.20: {}\n \n-  colors@1.4.0: {}\n-\n   columnify@1.5.4:\n     dependencies:\n       strip-ansi: 3.0.1\n@@ -25198,8 +25044,6 @@ snapshots:\n \n   commander@11.1.0: {}\n \n-  commander@12.0.0: {}\n-\n   commander@12.1.0: {}\n \n   commander@2.20.0: {}\n@@ -25532,10 +25376,6 @@ snapshots:\n     dependencies:\n       cross-spawn: 7.0.3\n \n-  cross-fetch@3.1.2:\n-    dependencies:\n-      node-fetch: 2.6.1\n-\n   cross-fetch@3.1.4:\n     dependencies:\n       node-fetch: 2.6.1\n@@ -25809,16 +25649,6 @@ snapshots:\n       postcss-svgo: 7.0.1(postcss@8.4.31)\n       postcss-unique-selectors: 7.0.3(postcss@8.4.31)\n \n-  cssnano-preset-simple@2.0.0(postcss@8.2.13):\n-    dependencies:\n-      caniuse-lite: 1.0.30001579\n-      postcss: 8.2.13\n-\n-  cssnano-simple@2.0.0(postcss@8.2.13):\n-    dependencies:\n-      cssnano-preset-simple: 2.0.0(postcss@8.2.13)\n-      postcss: 8.2.13\n-\n   cssnano-util-get-arguments@4.0.0: {}\n \n   cssnano-util-get-match@4.0.0: {}\n@@ -26416,12 +26246,6 @@ snapshots:\n       domelementtype: 2.2.0\n       entities: 2.0.0\n \n-  dom-serializer@1.2.0:\n-    dependencies:\n-      domelementtype: 2.2.0\n-      domhandler: 4.2.0\n-      entities: 2.0.0\n-\n   dom-serializer@1.3.1:\n     dependencies:\n       domelementtype: 2.2.0\n@@ -26452,10 +26276,6 @@ snapshots:\n     dependencies:\n       domelementtype: 1.3.1\n \n-  domhandler@4.0.0:\n-    dependencies:\n-      domelementtype: 2.2.0\n-\n   domhandler@4.2.0:\n     dependencies:\n       domelementtype: 2.2.0\n@@ -26480,12 +26300,6 @@ snapshots:\n       dom-serializer: 0.2.2\n       domelementtype: 1.3.1\n \n-  domutils@2.5.0:\n-    dependencies:\n-      dom-serializer: 1.3.1\n-      domelementtype: 2.2.0\n-      domhandler: 4.2.0\n-\n   domutils@2.6.0:\n     dependencies:\n       dom-serializer: 1.3.1\n@@ -29035,13 +28849,6 @@ snapshots:\n       inherits: 2.0.4\n       readable-stream: 3.6.0\n \n-  htmlparser2@6.0.1:\n-    dependencies:\n-      domelementtype: 2.2.0\n-      domhandler: 4.2.0\n-      domutils: 2.6.0\n-      entities: 2.0.0\n-\n   htmlparser2@6.1.0:\n     dependencies:\n       domelementtype: 2.2.0\n@@ -29144,13 +28951,6 @@ snapshots:\n     transitivePeerDependencies:\n       - supports-color\n \n-  https-proxy-agent@5.0.0:\n-    dependencies:\n-      agent-base: 6.0.2\n-      debug: 4.1.1\n-    transitivePeerDependencies:\n-      - supports-color\n-\n   https-proxy-agent@5.0.1:\n     dependencies:\n       agent-base: 6.0.2\n@@ -32542,8 +32342,6 @@ snapshots:\n     dependencies:\n       abbrev: 2.0.0\n \n-  normalize-html-whitespace@1.0.0: {}\n-\n   normalize-package-data@2.5.0:\n     dependencies:\n       hosted-git-info: 2.8.5\n@@ -33979,10 +33777,6 @@ snapshots:\n     dependencies:\n       postcss: 8.4.31\n \n-  postcss-safe-parser@5.0.2:\n-    dependencies:\n-      postcss: 8.4.31\n-\n   postcss-safe-parser@6.0.0(postcss@8.4.31):\n     dependencies:\n       postcss: 8.4.31\n@@ -34095,12 +33889,6 @@ snapshots:\n       source-map: 0.6.1\n       supports-color: 6.1.0\n \n-  postcss@8.2.13:\n-    dependencies:\n-      colorette: 1.4.0\n-      nanoid: 3.1.32\n-      source-map: 0.6.1\n-\n   postcss@8.4.31:\n     dependencies:\n       nanoid: 3.3.7\n@@ -34216,10 +34004,6 @@ snapshots:\n     dependencies:\n       asap: 2.0.6\n \n-  promise@8.3.0:\n-    dependencies:\n-      asap: 2.0.6\n-\n   prompts@2.4.2:\n     dependencies:\n       kleur: 3.0.3\n@@ -36662,13 +36446,6 @@ snapshots:\n       commander: 2.20.0\n       source-map-support: 0.5.20\n \n-  terser@5.5.1:\n-    dependencies:\n-      acorn: 8.14.0\n-      commander: 2.20.0\n-      source-map: 0.7.4\n-      source-map-support: 0.5.20\n-\n   test-exclude@6.0.0:\n     dependencies:\n       '@istanbuljs/schema': 0.1.2"
        },
        {
            "sha": "aec5e04f289ae562d07a0e08df00b62baf942e6a",
            "filename": "test/.stats-app/pages/amp.js",
            "status": "removed",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2F.stats-app%2Fpages%2Famp.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2F.stats-app%2Fpages%2Famp.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2F.stats-app%2Fpages%2Famp.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,9 +0,0 @@\n-import { useAmp } from 'next/amp'\n-\n-export const config = {\n-  amp: 'hybrid',\n-}\n-\n-export default function Amp(props) {\n-  return useAmp() ? 'AMP mode' : 'normal mode'\n-}"
        },
        {
            "sha": "7b6f9fcf77a879f7830d066aca835127bf05e12e",
            "filename": "test/e2e/async-modules/index.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 11,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fe2e%2Fasync-modules%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fe2e%2Fasync-modules%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fasync-modules%2Findex.test.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -1,6 +1,5 @@\n /* eslint-env jest */\n import { nextTestSetup } from 'e2e-utils'\n-import { check } from 'next-test-utils'\n \n describe('Async modules', () => {\n   const { next, isNextDev: dev } = nextTestSetup({\n@@ -41,18 +40,9 @@ describe('Async modules', () => {\n     const browser = await next.browser('/dhiuhefoiahjeoij')\n     expect(await browser.elementByCss('#content-404').text()).toBe(\"hi y'all\")\n   })\n-\n-  // TODO: investigate this test flaking\n-  it.skip('can render async AMP pages', async () => {\n-    const browser = await next.browser('/config')\n-    await check(\n-      () => browser.elementByCss('#amp-timeago').text(),\n-      'just now',\n-      true\n-    )\n-  })\n   ;(dev ? it.skip : it)('can render async error page', async () => {\n     const browser = await next.browser('/make-error')\n+    // eslint-disable-next-line jest/no-standalone-expect\n     expect(await browser.elementByCss('#content-error').text()).toBe(\n       'hello error'\n     )"
        },
        {
            "sha": "25f784880d8fb7ffd781dde8c3298f9b5b0ad282",
            "filename": "test/e2e/async-modules/pages/config.jsx",
            "status": "modified",
            "additions": 1,
            "deletions": 23,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fe2e%2Fasync-modules%2Fpages%2Fconfig.jsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fe2e%2Fasync-modules%2Fpages%2Fconfig.jsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fasync-modules%2Fpages%2Fconfig.jsx?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -1,32 +1,10 @@\n-import Head from 'next/head'\n-\n-export const config = {\n-  amp: true,\n-}\n-\n await Promise.resolve('tadaa')\n \n export default function Config() {\n   const date = new Date()\n   return (\n     <div>\n-      <Head>\n-        <script\n-          async\n-          key=\"amp-timeago\"\n-          custom-element=\"amp-timeago\"\n-          src=\"https://cdn.ampproject.org/v0/amp-timeago-0.1.js\"\n-        />\n-      </Head>\n-      <amp-timeago\n-        id=\"amp-timeago\"\n-        width=\"0\"\n-        height=\"15\"\n-        datetime={date.toJSON()}\n-        layout=\"responsive\"\n-      >\n-        fail\n-      </amp-timeago>\n+      <p>Config page loaded at: {date.toJSON()}</p>\n     </div>\n   )\n }"
        },
        {
            "sha": "a2f513e1a5768a355717f0caa246081dca49a5e2",
            "filename": "test/e2e/basepath/basepath.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fe2e%2Fbasepath%2Fbasepath.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fe2e%2Fbasepath%2Fbasepath.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fbasepath%2Fbasepath.test.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -108,15 +108,6 @@ describe('basePath', () => {\n     expect(await browser.eval('window.beforeNav')).toBe(1)\n   })\n \n-  it('should respect basePath in amphtml link rel', async () => {\n-    const html = await renderViaHTTP(next.url, `${basePath}/amp-hybrid`)\n-    const $ = cheerio.load(html)\n-    const expectedAmpHtmlUrl = isNextDev\n-      ? `${basePath}/amp-hybrid?amp=1`\n-      : `${basePath}/amp-hybrid.amp`\n-    expect($('link[rel=amphtml]').first().attr('href')).toBe(expectedAmpHtmlUrl)\n-  })\n-\n   if (!isNextDev) {\n     if (!isNextDeploy) {\n       it('should add basePath to routes-manifest', async () => {"
        },
        {
            "sha": "c2e7ce0c2d4aa69d73edc0c2b0c77fb1f040785c",
            "filename": "test/e2e/basepath/pages/amp-hybrid.js",
            "status": "removed",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fe2e%2Fbasepath%2Fpages%2Famp-hybrid.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fe2e%2Fbasepath%2Fpages%2Famp-hybrid.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fbasepath%2Fpages%2Famp-hybrid.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,4 +0,0 @@\n-export const config = { amp: 'hybrid' }\n-\n-const Page = () => <p>Hello amp</p>\n-export default Page"
        },
        {
            "sha": "3be6fa6e0bb2f882b3d3c44a12fb2cff60834080",
            "filename": "test/e2e/deprecation-warnings/deprecation-warnings.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fe2e%2Fdeprecation-warnings%2Fdeprecation-warnings.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fe2e%2Fdeprecation-warnings%2Fdeprecation-warnings.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fdeprecation-warnings%2Fdeprecation-warnings.test.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -29,9 +29,6 @@ describe('deprecation-warnings', () => {\n \n       const logs = next.cliOutput\n \n-      // Should warn about amp configuration\n-      expect(logs).toContain('Built-in amp support is deprecated')\n-\n       // Should warn about experimental.instrumentationHook\n       expect(logs).toContain('experimental.instrumentationHook')\n       expect(logs).toContain('no longer needed')"
        },
        {
            "sha": "904121504f6e5923f31b6fac230895e9c06c71f6",
            "filename": "test/e2e/deprecation-warnings/fixtures/with-deprecated-config/next.config.js",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fe2e%2Fdeprecation-warnings%2Ffixtures%2Fwith-deprecated-config%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fe2e%2Fdeprecation-warnings%2Ffixtures%2Fwith-deprecated-config%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fdeprecation-warnings%2Ffixtures%2Fwith-deprecated-config%2Fnext.config.js?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -1,8 +1,5 @@\n module.exports = {\n   // Explicitly configure deprecated options\n-  amp: {\n-    canonicalBase: 'https://example.com',\n-  },\n   experimental: {\n     instrumentationHook: true,\n   },"
        },
        {
            "sha": "03a37f410767b228a70fcd758db9c2a65c87149d",
            "filename": "test/e2e/styled-jsx/index.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fe2e%2Fstyled-jsx%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fe2e%2Fstyled-jsx%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fstyled-jsx%2Findex.test.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -28,20 +28,6 @@ describe('styled-jsx', () => {\n     expect(color).toMatch('0, 255, 255')\n   })\n \n-  it('should render styles during CSR (AMP)', async () => {\n-    const browser = await next.browser('/amp')\n-    const color = await browser.eval(\n-      `getComputedStyle(document.querySelector('button')).color`\n-    )\n-\n-    expect(color).toMatch('0, 255, 255')\n-  })\n-\n-  it('should render styles during SSR (AMP)', async () => {\n-    const html = await next.render('/amp')\n-    expect(html).toMatch(/color:.*?cyan/)\n-  })\n-\n   it('should render styles inside TypeScript', async () => {\n     const browser = await next.browser('/typescript')\n     const color = await browser.eval("
        },
        {
            "sha": "8f71fdbc5ce379b018b011bcb2f5e972abf46d9b",
            "filename": "test/e2e/styled-jsx/pages/amp.js",
            "status": "removed",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fe2e%2Fstyled-jsx%2Fpages%2Famp.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fe2e%2Fstyled-jsx%2Fpages%2Famp.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fstyled-jsx%2Fpages%2Famp.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,12 +0,0 @@\n-import { Button } from 'my-comps/button'\n-\n-export const config = { amp: true }\n-\n-export default function page() {\n-  return (\n-    <>\n-      <p>Hello world</p>\n-      <Button>Click me</Button>\n-    </>\n-  )\n-}"
        },
        {
            "sha": "c756744717f676e53a0a0e52dbc379537ea35d9e",
            "filename": "test/e2e/type-module-interop/index.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fe2e%2Ftype-module-interop%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fe2e%2Ftype-module-interop%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Ftype-module-interop%2Findex.test.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -15,12 +15,10 @@ describe('Type module interop', () => {\n           import Head from 'next/head'\n           import Script from 'next/script'\n           import dynamic from 'next/dynamic'\n-          import { useAmp } from 'next/amp'\n \n           const Dynamic = dynamic(() => import('../components/example'))\n \n           export default function Page() {\n-            const isAmp = useAmp()\n             return (\n               <>\n                 <Head>\n@@ -36,7 +34,6 @@ describe('Type module interop', () => {\n                 />\n                 <p>hello world</p>\n                 <Dynamic />\n-                <p id=\"isAmp\">isAmp: {isAmp ? 'yes' : 'false'}</p>\n                 <Link href=\"/modules\" id=\"link-to-module\">\n                   link to module\n                 </Link>\n@@ -88,9 +85,6 @@ describe('Type module interop', () => {\n     expect(html).toContain('hello world')\n     // component load via next/dynamic should rendered on the server side\n     expect(html).toContain('An example components load via next/dynamic')\n-    // imported next/amp should work on the server side\n-    const $ = cheerio.load(html)\n-    expect($('#isAmp').text()).toContain('false')\n   })\n \n   it('should render client-side', async () => {"
        },
        {
            "sha": "a88c6275e1ea6d9898dcc1fc0495440f904bcb11",
            "filename": "test/examples/examples.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fexamples%2Fexamples.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fexamples%2Fexamples.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fexamples%2Fexamples.test.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -5,7 +5,6 @@ import fs from 'fs-extra'\n const testedExamples = [\n   // Internal features\n   'active-class-name',\n-  'amp',\n   'api-routes-cors',\n   'api-routes-middleware',\n   'api-routes-rest',"
        },
        {
            "sha": "3ecd770f69aebb0e87c68f0481898f5c563ebb40",
            "filename": "test/integration/amp-export-validation/next.config.js",
            "status": "removed",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famp-export-validation%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famp-export-validation%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famp-export-validation%2Fnext.config.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,4 +0,0 @@\n-module.exports = {\n-  output: 'export',\n-  // exportPathMap\n-}"
        },
        {
            "sha": "3fa8f4b72fe40417d5f6882ef2695b02e86f0933",
            "filename": "test/integration/amp-export-validation/pages/cat.js",
            "status": "removed",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famp-export-validation%2Fpages%2Fcat.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famp-export-validation%2Fpages%2Fcat.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famp-export-validation%2Fpages%2Fcat.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,8 +0,0 @@\n-export const config = { amp: true }\n-\n-export default () => (\n-  <div>\n-    {/* I show a warning since the width and height attribute is missing */}\n-    <amp-video src=\"/cats.mp4\" layout=\"responsive\" />\n-  </div>\n-)"
        },
        {
            "sha": "8388a6e7c0403825a1d9e3f67cc81083bb0b7db2",
            "filename": "test/integration/amp-export-validation/pages/dog-cat.js",
            "status": "removed",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famp-export-validation%2Fpages%2Fdog-cat.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famp-export-validation%2Fpages%2Fdog-cat.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famp-export-validation%2Fpages%2Fdog-cat.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,8 +0,0 @@\n-export const config = { amp: true }\n-\n-export default () => (\n-  <div>\n-    {/* I throw an error since <amp-img/> should be used instead */}\n-    <img src=\"/dog.gif\" height={400} width={800} />\n-  </div>\n-)"
        },
        {
            "sha": "8388a6e7c0403825a1d9e3f67cc81083bb0b7db2",
            "filename": "test/integration/amp-export-validation/pages/dog.js",
            "status": "removed",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famp-export-validation%2Fpages%2Fdog.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famp-export-validation%2Fpages%2Fdog.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famp-export-validation%2Fpages%2Fdog.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,8 +0,0 @@\n-export const config = { amp: true }\n-\n-export default () => (\n-  <div>\n-    {/* I throw an error since <amp-img/> should be used instead */}\n-    <img src=\"/dog.gif\" height={400} width={800} />\n-  </div>\n-)"
        },
        {
            "sha": "699bd93f9d03ea8e3d7d3839a03c5451635ebabe",
            "filename": "test/integration/amp-export-validation/pages/first.js",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famp-export-validation%2Fpages%2Ffirst.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famp-export-validation%2Fpages%2Ffirst.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famp-export-validation%2Fpages%2Ffirst.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,3 +0,0 @@\n-export const config = { amp: true }\n-\n-export default () => <p>Hello AMP!</p>"
        },
        {
            "sha": "3f8c92237a856e91eae100a2bf679fbc7eca83ad",
            "filename": "test/integration/amp-export-validation/pages/second.js",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famp-export-validation%2Fpages%2Fsecond.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famp-export-validation%2Fpages%2Fsecond.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famp-export-validation%2Fpages%2Fsecond.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,3 +0,0 @@\n-export const config = { amp: true }\n-\n-export default () => <p>Hello again AMP!</p>"
        },
        {
            "sha": "4ffc688d18901b305ee24bbc07b7a2042f47b924",
            "filename": "test/integration/amp-export-validation/pages/third.js",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famp-export-validation%2Fpages%2Fthird.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famp-export-validation%2Fpages%2Fthird.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famp-export-validation%2Fpages%2Fthird.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,3 +0,0 @@\n-export const config = { amp: 'hybrid' }\n-\n-export default () => 'I am a hybrid AMP page'"
        },
        {
            "sha": "882e1fdf1b592695b70aa727c9415a774cf2d519",
            "filename": "test/integration/amp-export-validation/test/index.test.js",
            "status": "removed",
            "additions": 0,
            "deletions": 126,
            "changes": 126,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famp-export-validation%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famp-export-validation%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famp-export-validation%2Ftest%2Findex.test.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,126 +0,0 @@\n-/* eslint-env jest */\n-\n-import { promises } from 'fs'\n-import { join } from 'path'\n-import { File, nextBuild, runNextCommand } from 'next-test-utils'\n-import { existsSync } from 'fs-extra'\n-\n-const { access } = promises\n-const appDir = join(__dirname, '../')\n-const outDir = join(appDir, 'out')\n-const nextConfig = new File(join(appDir, 'next.config.js'))\n-\n-let buildOutput\n-\n-  // Turbopack does not support AMP rendering.\n-;(process.env.IS_TURBOPACK_TEST ? describe.skip : describe)(\n-  'AMP Validation on Export',\n-  () => {\n-    describe('production mode', () => {\n-      beforeAll(async () => {\n-        const { stdout = '', stderr = '' } = await nextBuild(appDir, [], {\n-          stdout: true,\n-          stderr: true,\n-        })\n-        buildOutput = stdout + stderr\n-      })\n-\n-      it('should have shown errors during build', async () => {\n-        expect(buildOutput).toMatch(\n-          /error.*The mandatory attribute 'height' is missing in tag 'amp-video'\\./\n-        )\n-        expect(existsSync(outDir)).toBeFalse()\n-      })\n-\n-      // this is now an error instead of a warning\n-      it.skip('shows AMP warning without throwing error', async () => {\n-        nextConfig.replace(\n-          '// exportPathMap',\n-          `exportPathMap: function(defaultMap) {\n-      return {\n-        '/cat': { page: '/cat' },\n-      }\n-    },`\n-        )\n-\n-        try {\n-          const { stdout, stderr } = await runNextCommand(['export', appDir], {\n-            stdout: true,\n-            stderr: true,\n-          })\n-          expect(stdout).toMatch(\n-            /error.*The mandatory attribute 'height' is missing in tag 'amp-video'\\./\n-          )\n-          await expect(access(join(outDir, 'cat.html'))).resolves.toBe(\n-            undefined\n-          )\n-          await expect(stderr).not.toMatch(\n-            /Found conflicting amp tag \"meta\" with conflicting prop name=\"viewport\"/\n-          )\n-        } finally {\n-          nextConfig.restore()\n-        }\n-      })\n-\n-      // img instead of amp-img no longer shows a warning\n-      it.skip('throws error on AMP error', async () => {\n-        nextConfig.replace(\n-          '// exportPathMap',\n-          `exportPathMap: function(defaultMap) {\n-      return {\n-        '/dog': { page: '/dog' },\n-      }\n-    },`\n-        )\n-\n-        try {\n-          const { stdout, stderr } = await runNextCommand(['export', appDir], {\n-            stdout: true,\n-            stderr: true,\n-          })\n-          expect(stdout).toMatch(\n-            /error.*The parent tag of tag 'img' is 'div', but it can only be 'i-amphtml-sizer-intrinsic'\\./\n-          )\n-          await expect(access(join(outDir, 'dog.html'))).resolves.toBe(\n-            undefined\n-          )\n-          await expect(stderr).not.toMatch(\n-            /Found conflicting amp tag \"meta\" with conflicting prop name=\"viewport\"/\n-          )\n-        } finally {\n-          nextConfig.restore()\n-        }\n-      })\n-\n-      // img instead of amp-img no longer shows a warning\n-      it.skip('shows warning and error when throwing error', async () => {\n-        nextConfig.replace(\n-          '// exportPathMap',\n-          `exportPathMap: function(defaultMap) {\n-      return {\n-        '/dog-cat': { page: '/dog-cat' },\n-      }\n-    },`\n-        )\n-\n-        try {\n-          const { stdout, stderr } = await runNextCommand(['export', appDir], {\n-            stdout: true,\n-            stderr: true,\n-          })\n-          expect(stdout).toMatch(\n-            /error.*The parent tag of tag 'img' is 'div', but it can only be 'i-amphtml-sizer-intrinsic'\\./\n-          )\n-          await expect(access(join(outDir, 'dog-cat.html'))).resolves.toBe(\n-            undefined\n-          )\n-          await expect(stderr).not.toMatch(\n-            /Found conflicting amp tag \"meta\" with conflicting prop name=\"viewport\"/\n-          )\n-        } finally {\n-          nextConfig.restore()\n-        }\n-      })\n-    })\n-  }\n-)"
        },
        {
            "sha": "072c5b3965f97545f6570e145b116ca8761ab784",
            "filename": "test/integration/amphtml-custom-optimizer/next.config.js",
            "status": "removed",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-custom-optimizer%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-custom-optimizer%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml-custom-optimizer%2Fnext.config.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,12 +0,0 @@\n-module.exports = {\n-  experimental: {\n-    amp: {\n-      optimizer: {\n-        ampRuntimeVersion: '001515617716922',\n-        rtv: true,\n-        verbose: true,\n-      },\n-      skipValidation: true,\n-    },\n-  },\n-}"
        },
        {
            "sha": "2cdfea262e521c0537277ce16edce4dcde957ea1",
            "filename": "test/integration/amphtml-custom-optimizer/pages/dynamic.js",
            "status": "removed",
            "additions": 0,
            "deletions": 20,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-custom-optimizer%2Fpages%2Fdynamic.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-custom-optimizer%2Fpages%2Fdynamic.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml-custom-optimizer%2Fpages%2Fdynamic.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,20 +0,0 @@\n-export const config = {\n-  amp: true,\n-}\n-\n-const Dynamic = (props) => (\n-  <amp-img\n-    width=\"500\"\n-    height=\"500\"\n-    layout=\"responsive\"\n-    src={props.src}\n-  ></amp-img>\n-)\n-\n-Dynamic.getInitialProps = () => {\n-  return {\n-    src: 'https://amp.dev/static/samples/img/story_dog2_portrait.jpg',\n-  }\n-}\n-\n-export default Dynamic"
        },
        {
            "sha": "cca9d141c93810863b1a0b89d945e374b5e02fa7",
            "filename": "test/integration/amphtml-custom-optimizer/pages/index.js",
            "status": "removed",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-custom-optimizer%2Fpages%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-custom-optimizer%2Fpages%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml-custom-optimizer%2Fpages%2Findex.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,12 +0,0 @@\n-export const config = {\n-  amp: true,\n-}\n-\n-export default () => (\n-  <amp-twitter\n-    width=\"500\"\n-    height=\"500\"\n-    layout=\"responsive\"\n-    data-tweetid=\"1159145442896166912\"\n-  ></amp-twitter>\n-)"
        },
        {
            "sha": "d8d9574e8c2ee77c91ae0c848c1d1f2697cf8545",
            "filename": "test/integration/amphtml-custom-optimizer/test/index.test.js",
            "status": "removed",
            "additions": 0,
            "deletions": 60,
            "changes": 60,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-custom-optimizer%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-custom-optimizer%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml-custom-optimizer%2Ftest%2Findex.test.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,60 +0,0 @@\n-/* eslint-env jest */\n-\n-import { join } from 'path'\n-import {\n-  nextBuild,\n-  findPort,\n-  nextStart,\n-  killApp,\n-  renderViaHTTP,\n-} from 'next-test-utils'\n-\n-let app\n-let appPort\n-const appDir = join(__dirname, '../')\n-\n-// Turbopack does not support AMP rendering.\n-;(process.env.IS_TURBOPACK_TEST ? describe.skip : describe)(\n-  'AMP Custom Optimizer',\n-  () => {\n-    describe('production mode', () => {\n-      it('should build and start for static page', async () => {\n-        const { code } = await nextBuild(appDir)\n-        expect(code).toBe(0)\n-\n-        appPort = await findPort()\n-        app = await nextStart(appDir, appPort)\n-\n-        const html = await renderViaHTTP(appPort, '/')\n-        await killApp(app)\n-\n-        expect(html).toContain(\n-          'amp-twitter width=\"500\" height=\"500\" layout=\"responsive\" data-tweetid=\"1159145442896166912\"'\n-        )\n-        expect(html).toContain('i-amphtml-version=\"001515617716922\"')\n-        expect(html).toContain(\n-          'script async src=\"https://cdn.ampproject.org/rtv/001515617716922/v0.mjs\"'\n-        )\n-      })\n-\n-      it('should build and start for dynamic page', async () => {\n-        const { code } = await nextBuild(appDir)\n-        expect(code).toBe(0)\n-\n-        appPort = await findPort()\n-        app = await nextStart(appDir, appPort)\n-\n-        const html = await renderViaHTTP(appPort, '/dynamic')\n-        await killApp(app)\n-\n-        expect(html).toContain(\n-          'amp-img width=\"500\" height=\"500\" layout=\"responsive\" src=\"https://amp.dev/static/samples/img/story_dog2_portrait.jpg\"'\n-        )\n-        expect(html).toContain('i-amphtml-version=\"001515617716922\"')\n-        expect(html).toContain(\n-          'script async src=\"https://cdn.ampproject.org/rtv/001515617716922/v0.mjs\"'\n-        )\n-      })\n-    })\n-  }\n-)"
        },
        {
            "sha": "4ba52ba2c8df6758685c8f65f490306b5c44eb76",
            "filename": "test/integration/amphtml-custom-validator/next.config.js",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-custom-validator%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-custom-validator%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml-custom-validator%2Fnext.config.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1 +0,0 @@\n-module.exports = {}"
        },
        {
            "sha": "b4d8c8f0e616e3dcf225b33ede49d2175d52518e",
            "filename": "test/integration/amphtml-custom-validator/pages/index.js",
            "status": "removed",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-custom-validator%2Fpages%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-custom-validator%2Fpages%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml-custom-validator%2Fpages%2Findex.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,5 +0,0 @@\n-export const config = {\n-  amp: true,\n-}\n-\n-export default () => <p>Hello from AMP</p>"
        },
        {
            "sha": "2b243726250290e0601246d91d89981d1a726db0",
            "filename": "test/integration/amphtml-custom-validator/test/index.test.js",
            "status": "removed",
            "additions": 0,
            "deletions": 57,
            "changes": 57,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-custom-validator%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-custom-validator%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml-custom-validator%2Ftest%2Findex.test.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,57 +0,0 @@\n-/* eslint-env jest */\n-\n-import { join } from 'path'\n-import {\n-  nextBuild,\n-  findPort,\n-  nextStart,\n-  killApp,\n-  launchApp,\n-  renderViaHTTP,\n-} from 'next-test-utils'\n-\n-let app\n-let appPort\n-const appDir = join(__dirname, '../')\n-\n-// Turbopack does not support AMP rendering.\n-;(process.env.IS_TURBOPACK_TEST ? describe.skip : describe)(\n-  'AMP Custom Validator',\n-  () => {\n-    describe('production mode', () => {\n-      it('should build and start successfully', async () => {\n-        const { code } = await nextBuild(appDir)\n-        expect(code).toBe(0)\n-\n-        appPort = await findPort()\n-        app = await nextStart(appDir, appPort)\n-\n-        const html = await renderViaHTTP(appPort, '/')\n-        await killApp(app)\n-\n-        expect(html).toContain('Hello from AMP')\n-      })\n-    })\n-    ;(process.env.TURBOPACK_BUILD ? describe.skip : describe)(\n-      'development mode',\n-      () => {\n-        it('should run in development mode successfully', async () => {\n-          let stderr = ''\n-\n-          appPort = await findPort()\n-          app = await launchApp(appDir, appPort, {\n-            onStderr(msg) {\n-              stderr += msg || ''\n-            },\n-          })\n-\n-          const html = await renderViaHTTP(appPort, '/')\n-          await killApp(app)\n-\n-          expect(stderr).not.toContain('error')\n-          expect(html).toContain('Hello from AMP')\n-        })\n-      }\n-    )\n-  }\n-)"
        },
        {
            "sha": "4ba52ba2c8df6758685c8f65f490306b5c44eb76",
            "filename": "test/integration/amphtml-fragment-style/next.config.js",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-fragment-style%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-fragment-style%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml-fragment-style%2Fnext.config.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1 +0,0 @@\n-module.exports = {}"
        },
        {
            "sha": "c2974b99747ded751d8e760f0d0c92a7ada87469",
            "filename": "test/integration/amphtml-fragment-style/pages/_document.js",
            "status": "removed",
            "additions": 0,
            "deletions": 35,
            "changes": 35,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-fragment-style%2Fpages%2F_document.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-fragment-style%2Fpages%2F_document.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml-fragment-style%2Fpages%2F_document.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,35 +0,0 @@\n-import Document, { Html, Head, Main, NextScript } from 'next/document'\n-\n-class MyDocument extends Document {\n-  static async getInitialProps(ctx) {\n-    const initialProps = await Document.getInitialProps(ctx)\n-\n-    return {\n-      ...initialProps,\n-      styles: (\n-        <>\n-          {initialProps.styles}\n-          <style\n-            dangerouslySetInnerHTML={{\n-              __html: `html { background: hotpink; }`,\n-            }}\n-          />\n-        </>\n-      ),\n-    }\n-  }\n-\n-  render() {\n-    return (\n-      <Html>\n-        <Head />\n-        <body>\n-          <Main />\n-          <NextScript />\n-        </body>\n-      </Html>\n-    )\n-  }\n-}\n-\n-export default MyDocument"
        },
        {
            "sha": "c45defad01f66184545ee5fa0eb43133a12dc6ef",
            "filename": "test/integration/amphtml-fragment-style/pages/index.js",
            "status": "removed",
            "additions": 0,
            "deletions": 15,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-fragment-style%2Fpages%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-fragment-style%2Fpages%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml-fragment-style%2Fpages%2Findex.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,15 +0,0 @@\n-export const config = { amp: true }\n-\n-const Comp = () => (\n-  <div>\n-    <p>Hello world!</p>\n-    <style jsx>{`\n-      p {\n-        font-size: 16.4px;\n-      }\n-    `}</style>\n-  </div>\n-)\n-\n-Comp.getInitialProps = () => ({})\n-export default Comp"
        },
        {
            "sha": "e8782ea0da9e1c08b0ac756307616e4404b9eda1",
            "filename": "test/integration/amphtml-fragment-style/test/index.test.js",
            "status": "removed",
            "additions": 0,
            "deletions": 40,
            "changes": 40,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-fragment-style%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-fragment-style%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml-fragment-style%2Ftest%2Findex.test.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,40 +0,0 @@\n-/* eslint-env jest */\n-\n-import { join } from 'path'\n-import cheerio from 'cheerio'\n-import { validateAMP } from 'amp-test-utils'\n-import {\n-  nextBuild,\n-  renderViaHTTP,\n-  nextStart,\n-  findPort,\n-  killApp,\n-} from 'next-test-utils'\n-\n-const appDir = join(__dirname, '../')\n-let appPort\n-let app\n-\n-  // Turbopack does not support AMP rendering.\n-;(process.env.IS_TURBOPACK_TEST ? describe.skip : describe)(\n-  'AMP Fragment Styles',\n-  () => {\n-    describe('production mode', () => {\n-      beforeAll(async () => {\n-        await nextBuild(appDir, [])\n-        appPort = await findPort()\n-        app = await nextStart(appDir, appPort)\n-      })\n-      afterAll(() => killApp(app))\n-\n-      it('adds styles from fragment in AMP mode correctly', async () => {\n-        const html = await renderViaHTTP(appPort, '/', { amp: 1 })\n-        await validateAMP(html)\n-        const $ = cheerio.load(html)\n-        const styles = $('style[amp-custom]').text()\n-        expect(styles).toMatch(/background:(.*|)hotpink/)\n-        expect(styles).toMatch(/font-size:(.*|)16\\.4px/)\n-      })\n-    })\n-  }\n-)"
        },
        {
            "sha": "4ba52ba2c8df6758685c8f65f490306b5c44eb76",
            "filename": "test/integration/amphtml-ssg/next.config.js",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-ssg%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-ssg%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml-ssg%2Fnext.config.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1 +0,0 @@\n-module.exports = {}"
        },
        {
            "sha": "620b5f48e0c8cadcd4227496698670db09926eb2",
            "filename": "test/integration/amphtml-ssg/pages/amp.js",
            "status": "removed",
            "additions": 0,
            "deletions": 22,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-ssg%2Fpages%2Famp.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-ssg%2Fpages%2Famp.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml-ssg%2Fpages%2Famp.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,22 +0,0 @@\n-import { useAmp } from 'next/amp'\n-\n-export const config = {\n-  amp: true,\n-}\n-\n-export const getStaticProps = () => {\n-  return {\n-    props: {\n-      hello: 'hello',\n-      random: Math.random(),\n-    },\n-  }\n-}\n-\n-export default ({ hello, random }) => (\n-  <>\n-    <p id=\"use-amp\">useAmp: {useAmp() ? 'yes' : 'no'}</p>\n-    <p id=\"hello\">{hello}</p>\n-    <p id=\"random\">{random}</p>\n-  </>\n-)"
        },
        {
            "sha": "d93d82ef049d5b1f02be73966291428f3c7ecc7e",
            "filename": "test/integration/amphtml-ssg/pages/blog/[slug].js",
            "status": "removed",
            "additions": 0,
            "deletions": 29,
            "changes": 29,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-ssg%2Fpages%2Fblog%2F%5Bslug%5D.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-ssg%2Fpages%2Fblog%2F%5Bslug%5D.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml-ssg%2Fpages%2Fblog%2F%5Bslug%5D.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,29 +0,0 @@\n-import { useAmp } from 'next/amp'\n-\n-export const config = {\n-  amp: 'hybrid',\n-}\n-\n-export const getStaticProps = (ctx) => {\n-  return {\n-    props: {\n-      slug: ctx.params?.slug || null,\n-      hello: 'hello',\n-      random: Math.random(),\n-    },\n-  }\n-}\n-\n-export const getStaticPaths = () => ({\n-  paths: ['/blog/post-1', '/blog/post-2'],\n-  fallback: false,\n-})\n-\n-export default ({ hello, random, slug }) => (\n-  <>\n-    <p id=\"use-amp\">useAmp: {useAmp() ? 'yes' : 'no'}</p>\n-    <p id=\"hello\">{hello}</p>\n-    <p id=\"random\">{random}</p>\n-    <p id=\"slug\">{slug}</p>\n-  </>\n-)"
        },
        {
            "sha": "0239032eb2934123da0fcc62a7c31d79760c0411",
            "filename": "test/integration/amphtml-ssg/pages/hybrid.js",
            "status": "removed",
            "additions": 0,
            "deletions": 22,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-ssg%2Fpages%2Fhybrid.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-ssg%2Fpages%2Fhybrid.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml-ssg%2Fpages%2Fhybrid.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,22 +0,0 @@\n-import { useAmp } from 'next/amp'\n-\n-export const config = {\n-  amp: 'hybrid',\n-}\n-\n-export const getStaticProps = () => {\n-  return {\n-    props: {\n-      hello: 'hello',\n-      random: Math.random(),\n-    },\n-  }\n-}\n-\n-export default ({ hello, random }) => (\n-  <>\n-    <p id=\"use-amp\">useAmp: {useAmp() ? 'yes' : 'no'}</p>\n-    <p id=\"hello\">{hello}</p>\n-    <p id=\"random\">{random}</p>\n-  </>\n-)"
        },
        {
            "sha": "a1ac8ba17756eb9df0d50eedd42fac7f1a3c78d5",
            "filename": "test/integration/amphtml-ssg/pages/index.js",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-ssg%2Fpages%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-ssg%2Fpages%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml-ssg%2Fpages%2Findex.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1 +0,0 @@\n-export default () => <p>normal old page</p>"
        },
        {
            "sha": "145ad212f65eeb66c969236ba6f301585de4198a",
            "filename": "test/integration/amphtml-ssg/test/index.test.js",
            "status": "removed",
            "additions": 0,
            "deletions": 160,
            "changes": 160,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-ssg%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml-ssg%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml-ssg%2Ftest%2Findex.test.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,160 +0,0 @@\n-/* eslint-env jest */\n-\n-import fs from 'fs-extra'\n-import { join } from 'path'\n-import cheerio from 'cheerio'\n-import { validateAMP } from 'amp-test-utils'\n-import {\n-  nextBuild,\n-  renderViaHTTP,\n-  File,\n-  findPort,\n-  launchApp,\n-  killApp,\n-  nextStart,\n-} from 'next-test-utils'\n-\n-const appDir = join(__dirname, '../')\n-const nextConfig = new File(join(appDir, 'next.config.js'))\n-let builtServerPagesDir\n-let appPort\n-let app\n-\n-const fsExists = (file) =>\n-  fs\n-    .access(file)\n-    .then(() => true)\n-    .catch(() => false)\n-\n-const runTests = (isDev = false) => {\n-  it('should load an amp first page correctly', async () => {\n-    const html = await renderViaHTTP(appPort, '/amp')\n-\n-    if (!isDev) {\n-      await validateAMP(html)\n-    }\n-    const $ = cheerio.load(html)\n-    expect($('#use-amp').text()).toContain('yes')\n-  })\n-\n-  it('should load a hybrid amp page without query correctly', async () => {\n-    const html = await renderViaHTTP(appPort, '/hybrid')\n-    const $ = cheerio.load(html)\n-    expect($('#use-amp').text()).toContain('no')\n-    expect($('#hello').text()).toContain('hello')\n-  })\n-\n-  it('should load dynamic hybrid SSG/AMP page', async () => {\n-    const html = await renderViaHTTP(appPort, '/blog/post-1')\n-    const $ = cheerio.load(html)\n-    expect($('#use-amp').text()).toContain('no')\n-    expect($('#hello').text()).toContain('hello')\n-    expect($('#slug').text()).toContain('post-1')\n-  })\n-\n-  it('should load dynamic hybrid SSG/AMP page with trailing slash', async () => {\n-    const html = await renderViaHTTP(appPort, '/blog/post-1/')\n-    const $ = cheerio.load(html)\n-    expect($('#use-amp').text()).toContain('no')\n-    expect($('#hello').text()).toContain('hello')\n-    expect($('#slug').text()).toContain('post-1')\n-  })\n-\n-  it('should load dynamic hybrid SSG/AMP page with query', async () => {\n-    const html = await renderViaHTTP(appPort, '/blog/post-1?amp=1')\n-    const $ = cheerio.load(html)\n-    expect($('#use-amp').text()).toContain('yes')\n-    expect($('#hello').text()).toContain('hello')\n-    expect($('#slug').text()).toContain('post-1')\n-  })\n-\n-  it('should load a hybrid amp page with query correctly', async () => {\n-    const html = await renderViaHTTP(appPort, '/hybrid?amp=1')\n-\n-    if (!isDev) {\n-      await validateAMP(html)\n-    }\n-    const $ = cheerio.load(html)\n-    expect($('#use-amp').text()).toContain('yes')\n-    expect($('#hello').text()).toContain('hello')\n-  })\n-\n-  if (!isDev) {\n-    const builtPage = (file) => join(builtServerPagesDir, file)\n-\n-    it('should output prerendered files correctly during build', async () => {\n-      expect(await fsExists(builtPage('amp.js'))).toBe(true)\n-      expect(await fsExists(builtPage('amp.html'))).toBe(true)\n-      expect(await fsExists(builtPage('amp.json'))).toBe(true)\n-\n-      expect(await fsExists(builtPage('hybrid.js'))).toBe(true)\n-      expect(await fsExists(builtPage('hybrid.html'))).toBe(true)\n-      expect(await fsExists(builtPage('hybrid.json'))).toBe(true)\n-\n-      expect(await fsExists(builtPage('hybrid.amp.js'))).toBe(false)\n-      expect(await fsExists(builtPage('hybrid.amp.html'))).toBe(true)\n-      expect(await fsExists(builtPage('hybrid.amp.json'))).toBe(true)\n-    })\n-  }\n-}\n-\n-// Turbopack does not support AMP rendering.\n-;(process.env.IS_TURBOPACK_TEST ? describe.skip : describe)(\n-  'AMP SSG Support',\n-  () => {\n-    describe('production mode', () => {\n-      beforeAll(async () => {\n-        await nextBuild(appDir)\n-        appPort = await findPort()\n-        app = await nextStart(appDir, appPort)\n-        // TODO: use browser instead to do checks that now need filesystem access\n-        builtServerPagesDir = join(appDir, '.next', 'server', 'pages')\n-      })\n-      afterAll(() => killApp(app))\n-      runTests()\n-    })\n-\n-    describe('development mode', () => {\n-      beforeAll(async () => {\n-        appPort = await findPort()\n-        app = await launchApp(appDir, appPort)\n-      })\n-      afterAll(() => killApp(app))\n-      runTests(true)\n-    })\n-\n-    describe('export mode', () => {\n-      describe('production mode', () => {\n-        let buildId\n-\n-        beforeAll(async () => {\n-          nextConfig.write(`module.exports = { output: 'export' }`)\n-          await nextBuild(appDir)\n-          buildId = await fs.readFile(join(appDir, '.next/BUILD_ID'), 'utf8')\n-        })\n-\n-        afterAll(() => nextConfig.delete())\n-\n-        it('should have copied SSG files correctly', async () => {\n-          const outFile = (file) => join(appDir, 'out', file)\n-\n-          expect(await fsExists(outFile('amp.html'))).toBe(true)\n-          expect(await fsExists(outFile('index.html'))).toBe(true)\n-          expect(await fsExists(outFile('hybrid.html'))).toBe(true)\n-          expect(await fsExists(outFile('amp.amp.html'))).toBe(false)\n-          expect(await fsExists(outFile('hybrid.amp.html'))).toBe(true)\n-          expect(await fsExists(outFile('blog/post-1.html'))).toBe(true)\n-          expect(await fsExists(outFile('blog/post-1.amp.html'))).toBe(true)\n-\n-          expect(\n-            await fsExists(outFile(join('_next/data', buildId, 'amp.json')))\n-          ).toBe(true)\n-\n-          expect(\n-            await fsExists(outFile(join('_next/data', buildId, 'hybrid.json')))\n-          ).toBe(true)\n-        })\n-      })\n-    })\n-  }\n-)"
        },
        {
            "sha": "7a3c4cc3233d6b9d10f6585a779e77caaefdc4c2",
            "filename": "test/integration/amphtml/components/Bar.js",
            "status": "removed",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fcomponents%2FBar.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fcomponents%2FBar.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fcomponents%2FBar.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,12 +0,0 @@\n-export default function Bar() {\n-  return (\n-    <div>\n-      <span>Bar!</span>\n-      <style jsx>{`\n-        span {\n-          color: blue;\n-        }\n-      `}</style>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "8b86fc48a08841614a2a880cc7b6ba865da098be",
            "filename": "test/integration/amphtml/components/Foo.js",
            "status": "removed",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fcomponents%2FFoo.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fcomponents%2FFoo.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fcomponents%2FFoo.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,12 +0,0 @@\n-export default function Foo() {\n-  return (\n-    <div>\n-      <div>Foo!</div>\n-      <style jsx>{`\n-        div {\n-          color: red;\n-        }\n-      `}</style>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "bf8b7c3bbb0fb7974417de999076eb515d3d59ed",
            "filename": "test/integration/amphtml/components/hello.js",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fcomponents%2Fhello.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fcomponents%2Fhello.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fcomponents%2Fhello.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1 +0,0 @@\n-export default () => <p id=\"hello-comp\">hello</p>"
        },
        {
            "sha": "9645154cca88575f44149e92e8eb5201675506e7",
            "filename": "test/integration/amphtml/next.config.js",
            "status": "removed",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fnext.config.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,10 +0,0 @@\n-module.exports = {\n-  onDemandEntries: {\n-    // Make sure entries are not getting disposed.\n-    maxInactiveAge: 1000 * 60 * 60,\n-  },\n-  amp: {\n-    canonicalBase: 'http://localhost:1234',\n-  },\n-  // edit here\n-}"
        },
        {
            "sha": "ca7b61891dde7a5487502d33968563a492bb9528",
            "filename": "test/integration/amphtml/pages/_document.js",
            "status": "removed",
            "additions": 0,
            "deletions": 29,
            "changes": 29,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2F_document.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2F_document.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2F_document.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,29 +0,0 @@\n-import { useAmp } from 'next/amp'\n-import Document, { Html, Head, Main, NextScript } from 'next/document'\n-\n-const AmpTst = () => {\n-  const isAmp = useAmp()\n-  return <p>{isAmp ? 'AMP Power!!!' : 'no AMP for you...'}</p>\n-}\n-\n-class MyDocument extends Document {\n-  static async getInitialProps(ctx) {\n-    const initialProps = await Document.getInitialProps(ctx)\n-    return { ...initialProps }\n-  }\n-\n-  render() {\n-    return (\n-      <Html>\n-        <Head nonce=\"test-nonce\" />\n-        <body>\n-          <Main />\n-          <AmpTst />\n-          <NextScript />\n-        </body>\n-      </Html>\n-    )\n-  }\n-}\n-\n-export default MyDocument"
        },
        {
            "sha": "cea35ec7b56b9f88c59088e1d961a21283f48553",
            "filename": "test/integration/amphtml/pages/amp-script.js",
            "status": "removed",
            "additions": 0,
            "deletions": 21,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Famp-script.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Famp-script.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Famp-script.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,21 +0,0 @@\n-import Head from 'next/head'\n-export const config = { amp: true }\n-\n-const date = new Date().toJSON()\n-\n-export default () => (\n-  <>\n-    <Head>\n-      <script\n-        async\n-        key=\"amp-timeago\"\n-        custom-element=\"amp-timeago\"\n-        src=\"https://cdn.ampproject.org/v0/amp-timeago-0.1.js\"\n-      />\n-    </Head>\n-\n-    <amp-timeago width=\"160\" height=\"20\" datetime={date} layout=\"responsive\">\n-      {date}\n-    </amp-timeago>\n-  </>\n-)"
        },
        {
            "sha": "8cf13df2548751eb0b9d8864c02ca0ffb15d3c9b",
            "filename": "test/integration/amphtml/pages/amp-ssr.js",
            "status": "removed",
            "additions": 0,
            "deletions": 15,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Famp-ssr.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Famp-ssr.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Famp-ssr.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,15 +0,0 @@\n-export const config = { amp: true }\n-\n-export default function Page() {\n-  return (\n-    <div>\n-      <p id=\"only-amp\">Only AMP for me...</p>\n-    </div>\n-  )\n-}\n-\n-export function getServerSideProps() {\n-  return {\n-    props: {},\n-  }\n-}"
        },
        {
            "sha": "666aa7eb0ba30e69e2241c9d44bdfb877229a939",
            "filename": "test/integration/amphtml/pages/another-amp.js",
            "status": "removed",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fanother-amp.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fanother-amp.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fanother-amp.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,7 +0,0 @@\n-import { useAmp } from 'next/amp'\n-\n-export const config = {\n-  amp: true,\n-}\n-\n-export default () => (useAmp() ? 'AMP mode' : 'Normal mode')"
        },
        {
            "sha": "3c143238592a7729c6675962a9499d1c92fc1fc7",
            "filename": "test/integration/amphtml/pages/auto-import.js",
            "status": "removed",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fauto-import.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fauto-import.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fauto-import.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,10 +0,0 @@\n-export const config = { amp: true }\n-\n-export default () => (\n-  <amp-twitter\n-    width=\"390\"\n-    height=\"330\"\n-    layout=\"responsive\"\n-    data-momentid=\"1018806709412876288\"\n-  ></amp-twitter>\n-)"
        },
        {
            "sha": "4895b0aebf6759b98e5de4345cdce2ef667275f9",
            "filename": "test/integration/amphtml/pages/conflicting-tag.js",
            "status": "removed",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fconflicting-tag.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fconflicting-tag.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fconflicting-tag.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,12 +0,0 @@\n-import Head from 'next/head'\n-\n-export const config = { amp: true }\n-\n-export default () => (\n-  <amp-layout className=\"abc\" layout=\"responsive\" width=\"1\" height=\"1\">\n-    <Head>\n-      <meta name=\"viewport\" content=\"something :p\" />\n-    </Head>\n-    <span>Hello World</span>\n-  </amp-layout>\n-)"
        },
        {
            "sha": "a0fad2d8231f483a1574597f32d94288a1ba9d6a",
            "filename": "test/integration/amphtml/pages/custom-scripts.js",
            "status": "removed",
            "additions": 0,
            "deletions": 17,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fcustom-scripts.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fcustom-scripts.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fcustom-scripts.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,17 +0,0 @@\n-import Head from 'next/head'\n-\n-export const config = { amp: true }\n-\n-export default () => (\n-  <div>\n-    <Head>\n-      <script src=\"/im-not-allowed.js\" type=\"text/javascript\" />\n-      <script\n-        dangerouslySetInnerHTML={{\n-          __html: `console.log(\"I'm not either :p\")`,\n-        }}\n-      />\n-    </Head>\n-    <p>We only allow AMP scripts now</p>\n-  </div>\n-)"
        },
        {
            "sha": "19cb44fdcfc9c7612ba04e17bc6c6c753220f534",
            "filename": "test/integration/amphtml/pages/hmr/amp.js",
            "status": "removed",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fhmr%2Famp.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fhmr%2Famp.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fhmr%2Famp.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,8 +0,0 @@\n-export const config = { amp: true }\n-\n-export default () => (\n-  <>\n-    <p>I'm an AMP page!</p>\n-    <span>{new Date().getTime()}</span>\n-  </>\n-)"
        },
        {
            "sha": "39b914e6e746ec154c06295cfb5fb453d9d1c814",
            "filename": "test/integration/amphtml/pages/hmr/comp.js",
            "status": "removed",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fhmr%2Fcomp.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fhmr%2Fcomp.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fhmr%2Fcomp.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,10 +0,0 @@\n-import Hello from '../../components/hello'\n-\n-export const config = { amp: true }\n-\n-export default () => (\n-  <>\n-    <Hello />\n-    <span>{new Date().getTime()}</span>\n-  </>\n-)"
        },
        {
            "sha": "5a27acbb3af58637c705216f6ef1f0b725db7f80",
            "filename": "test/integration/amphtml/pages/hmr/hybrid.js",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fhmr%2Fhybrid.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fhmr%2Fhybrid.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fhmr%2Fhybrid.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,3 +0,0 @@\n-export const config = { amp: 'hybrid' }\n-\n-export default () => <p>I'm a hybrid AMP page!</p>"
        },
        {
            "sha": "3f297303d62e200be88039cb5216912336e4e9e1",
            "filename": "test/integration/amphtml/pages/hmr/test.js",
            "status": "removed",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fhmr%2Ftest.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fhmr%2Ftest.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fhmr%2Ftest.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,7 +0,0 @@\n-export default function Page() {\n-  return (\n-    <div className=\"hmr-amp-page\">\n-      <p>This is the hot AMP page.</p>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "5fefb03ccf2657e153b168379be28e7bb66d4ead",
            "filename": "test/integration/amphtml/pages/index.js",
            "status": "removed",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Findex.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,7 +0,0 @@\n-export const config = { amp: 'hybrid' }\n-\n-export default () => (\n-  <amp-layout className=\"abc\" layout=\"responsive\" width=\"1\" height=\"1\">\n-    <span>Hello World</span>\n-  </amp-layout>\n-)"
        },
        {
            "sha": "e87c488a15ab8ea90800bf4dca3d262be7040d87",
            "filename": "test/integration/amphtml/pages/invalid-amp.js",
            "status": "removed",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Finvalid-amp.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Finvalid-amp.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Finvalid-amp.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,10 +0,0 @@\n-export const config = { amp: true }\n-\n-export default function Page() {\n-  return (\n-    <div>\n-      <p id=\"invalid-amp\">Invalid AMP Page</p>\n-      <amp-video src=\"/cats.mp4\" layout=\"responsive\" />\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "23f2fe68725f5ac8e61b933e44ccb97e30d011d2",
            "filename": "test/integration/amphtml/pages/manual-rels.js",
            "status": "removed",
            "additions": 0,
            "deletions": 15,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fmanual-rels.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fmanual-rels.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fmanual-rels.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,15 +0,0 @@\n-import Head from 'next/head'\n-import { useAmp } from 'next/amp'\n-\n-export const config = { amp: 'hybrid' }\n-\n-export default () => (\n-  <>\n-    <Head>\n-      {!useAmp() && <link rel=\"amphtml\" href=\"/my-custom-amphtml\" />}\n-      <link rel=\"canonical\" href=\"/my-custom-canonical\" />\n-    </Head>\n-\n-    <p>Hello world</p>\n-  </>\n-)"
        },
        {
            "sha": "ebc1771db14ec184141df3ea4c39d268f6563de1",
            "filename": "test/integration/amphtml/pages/nav.js",
            "status": "removed",
            "additions": 0,
            "deletions": 22,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fnav.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fnav.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fnav.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,22 +0,0 @@\n-import Link from 'next/link'\n-\n-if (typeof window !== 'undefined') {\n-  window.NAV_PAGE_LOADED = true\n-}\n-\n-export default function Nav() {\n-  return (\n-    <ul>\n-      <li>\n-        <Link href=\"/only-amp\" id=\"only-amp-link\">\n-          AMP First Page\n-        </Link>\n-      </li>\n-      <li>\n-        <Link href=\"/var-before-export\" id=\"var-before-export-link\">\n-          Another AMP First Page\n-        </Link>\n-      </li>\n-    </ul>\n-  )\n-}"
        },
        {
            "sha": "3df335a0ce35b032ba2171b0b72183f0767b5407",
            "filename": "test/integration/amphtml/pages/nested/index.js",
            "status": "removed",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fnested%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fnested%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fnested%2Findex.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,8 +0,0 @@\n-import { useAmp } from 'next/amp'\n-\n-export const config = { amp: 'hybrid' }\n-\n-export default () => {\n-  const isAmp = useAmp()\n-  return `Hello ${isAmp ? 'AMP' : 'others'}`\n-}"
        },
        {
            "sha": "85762ddb85c1ac5fa2e8fb6489a206e9a6a87462",
            "filename": "test/integration/amphtml/pages/normal.js",
            "status": "removed",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fnormal.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fnormal.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fnormal.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,10 +0,0 @@\n-import Link from 'next/link'\n-\n-export default () => (\n-  <div>\n-    <p>No AMP for me...</p>\n-    <Link href=\"/only-amp\" id=\"to-amp\">\n-      To AMP page!\n-    </Link>\n-  </div>\n-)"
        },
        {
            "sha": "41866b35c52c3fe53bc2d61dcbb5372fe2c5efc6",
            "filename": "test/integration/amphtml/pages/only-amp.js",
            "status": "removed",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fonly-amp.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fonly-amp.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fonly-amp.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,9 +0,0 @@\n-export const config = { amp: true }\n-\n-export default function Page() {\n-  return (\n-    <div>\n-      <p id=\"only-amp\">Only AMP for me...</p>\n-    </div>\n-  )\n-}"
        },
        {
            "sha": "67ae5203bfd67916b122b5177356a263514c31cd",
            "filename": "test/integration/amphtml/pages/root-hmr.js",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Froot-hmr.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Froot-hmr.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Froot-hmr.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,3 +0,0 @@\n-export const config = { amp: true }\n-\n-export default () => <p>I'm an AMP page!</p>"
        },
        {
            "sha": "c67b956589ad7ac517c51638741100b5de2aaf0a",
            "filename": "test/integration/amphtml/pages/special-chars.js",
            "status": "removed",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fspecial-chars.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fspecial-chars.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fspecial-chars.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,7 +0,0 @@\n-export const config = { amp: true }\n-\n-export default () => (\n-  <div data-amp-bind-text=\"fields_maxPrice_live < 801 ? '$' + round(fields_maxPrice_live) : '$800+'\">\n-    $800+\n-  </div>\n-)"
        },
        {
            "sha": "b6c7fb8aef391e46ff59762181a6311589f1f349",
            "filename": "test/integration/amphtml/pages/styled.js",
            "status": "removed",
            "additions": 0,
            "deletions": 16,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fstyled.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fstyled.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fstyled.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,16 +0,0 @@\n-import Foo from '../components/Foo'\n-import Bar from '../components/Bar'\n-\n-export const config = { amp: true }\n-\n-export default () => (\n-  <div>\n-    <Foo />\n-    <Bar />\n-    <style jsx global>{`\n-      body {\n-        background-color: green;\n-      }\n-    `}</style>\n-  </div>\n-)"
        },
        {
            "sha": "3df335a0ce35b032ba2171b0b72183f0767b5407",
            "filename": "test/integration/amphtml/pages/use-amp-hook.js",
            "status": "removed",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fuse-amp-hook.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fuse-amp-hook.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fuse-amp-hook.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,8 +0,0 @@\n-import { useAmp } from 'next/amp'\n-\n-export const config = { amp: 'hybrid' }\n-\n-export default () => {\n-  const isAmp = useAmp()\n-  return `Hello ${isAmp ? 'AMP' : 'others'}`\n-}"
        },
        {
            "sha": "3df335a0ce35b032ba2171b0b72183f0767b5407",
            "filename": "test/integration/amphtml/pages/use-amp-hook.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fuse-amp-hook.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fuse-amp-hook.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fuse-amp-hook.tsx?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,8 +0,0 @@\n-import { useAmp } from 'next/amp'\n-\n-export const config = { amp: 'hybrid' }\n-\n-export default () => {\n-  const isAmp = useAmp()\n-  return `Hello ${isAmp ? 'AMP' : 'others'}`\n-}"
        },
        {
            "sha": "0653f0eb63f4e03834aabc641df37e100bb7ac7a",
            "filename": "test/integration/amphtml/pages/var-before-export.js",
            "status": "removed",
            "additions": 0,
            "deletions": 11,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fvar-before-export.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Fpages%2Fvar-before-export.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Fpages%2Fvar-before-export.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,11 +0,0 @@\n-export const config = { amp: true }\n-\n-const Page = () => {\n-  return (\n-    <div>\n-      <p id=\"var-before-export\">Only AMP for me...</p>\n-    </div>\n-  )\n-}\n-\n-export default Page"
        },
        {
            "sha": "b97ba624ebdb32fb1eb5f148ac612fa4bab86536",
            "filename": "test/integration/amphtml/test/index.test.js",
            "status": "removed",
            "additions": 0,
            "deletions": 574,
            "changes": 574,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Famphtml%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Famphtml%2Ftest%2Findex.test.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,574 +0,0 @@\n-/* eslint-env jest */\n-\n-import { validateAMP } from 'amp-test-utils'\n-import cheerio from 'cheerio'\n-import { readFileSync, writeFileSync, rename } from 'fs-extra'\n-import {\n-  check,\n-  findPort,\n-  getBrowserBodyText,\n-  killApp,\n-  launchApp,\n-  nextBuild,\n-  nextStart,\n-  renderViaHTTP,\n-  waitFor,\n-} from 'next-test-utils'\n-import webdriver from 'next-webdriver'\n-import { join } from 'path'\n-import stripAnsi from 'strip-ansi'\n-\n-const appDir = join(__dirname, '../')\n-let appPort\n-let app\n-\n-const context = {}\n-\n-// Turbopack does not support AMP rendering.\n-;(process.env.IS_TURBOPACK_TEST ? describe.skip : describe)('AMP Usage', () => {\n-  describe('production mode', () => {\n-    let output = ''\n-\n-    beforeAll(async () => {\n-      await rename(\n-        join(appDir, 'pages/custom-scripts.js'),\n-        join(appDir, 'pages/custom-scripts.js.bak')\n-      )\n-      await rename(\n-        join(appDir, 'pages/invalid-amp.js'),\n-        join(appDir, 'pages/invalid-amp.js.bak')\n-      )\n-      const result = await nextBuild(appDir, undefined, {\n-        stdout: true,\n-        stderr: true,\n-      })\n-\n-      output = stripAnsi(result.stdout + result.stderr)\n-\n-      appPort = context.appPort = await findPort()\n-      app = await nextStart(appDir, context.appPort)\n-    })\n-    afterAll(async () => {\n-      await rename(\n-        join(appDir, 'pages/custom-scripts.js.bak'),\n-        join(appDir, 'pages/custom-scripts.js')\n-      )\n-      await rename(\n-        join(appDir, 'pages/invalid-amp.js.bak'),\n-        join(appDir, 'pages/invalid-amp.js')\n-      )\n-      return killApp(app)\n-    })\n-\n-    it('should not have deprecation warning', async () => {\n-      expect(output.toLowerCase()).not.toContain('deprecation')\n-    })\n-\n-    it('should have amp optimizer in trace', async () => {\n-      const trace = JSON.parse(\n-        readFileSync(join(appDir, '.next/next-server.js.nft.json'), 'utf8')\n-      )\n-      expect(\n-        trace.files.some((file) =>\n-          file.replace(/\\\\/g, '/').includes('@ampproject/toolbox-optimizer')\n-        )\n-      ).toBe(true)\n-    })\n-\n-    it('should not contain missing files warning', async () => {\n-      expect(output).toContain('Compiled successfully')\n-      expect(output).not.toContain('Could not find files for')\n-    })\n-\n-    describe('With basic usage', () => {\n-      it('should render the page', async () => {\n-        const html = await renderViaHTTP(appPort, '/')\n-        expect(html).toMatch(/Hello World/)\n-      })\n-    })\n-\n-    describe('With basic AMP usage', () => {\n-      it('should render the page as valid AMP', async () => {\n-        const html = await renderViaHTTP(appPort, '/?amp=1')\n-        await validateAMP(html)\n-        expect(html).toMatch(/Hello World/)\n-\n-        const $ = cheerio.load(html)\n-        expect($('.abc')).toHaveLength(1)\n-      })\n-\n-      it('should render the page without leaving render target', async () => {\n-        const html = await renderViaHTTP(appPort, '/special-chars')\n-        await validateAMP(html)\n-        expect(html).not.toContain('__NEXT_AMP_RENDER_TARGET__')\n-      })\n-\n-      it('should not output client pages for AMP only', async () => {\n-        const browser = await webdriver(appPort, '/nav')\n-        await browser.elementByCss('#only-amp-link').click()\n-\n-        const result = await browser.eval('window.NAV_PAGE_LOADED')\n-\n-        expect(result).toBeFalsy()\n-      })\n-\n-      it('should not output client pages for AMP only with config exported after declaration', async () => {\n-        const browser = await webdriver(appPort, '/nav')\n-        await browser.elementByCss('#var-before-export-link').click()\n-\n-        const result = await browser.eval('window.NAV_PAGE_LOADED')\n-\n-        expect(result).toBeFalsy()\n-      })\n-\n-      it('should drop custom scripts', async () => {\n-        const html = await renderViaHTTP(appPort, '/custom-scripts')\n-        expect(html).not.toMatch(/src='\\/im-not-allowed\\.js'/)\n-        expect(html).not.toMatch(/console\\.log(\"I'm not either :p\")'/)\n-      })\n-\n-      it('should not drop custom amp scripts', async () => {\n-        const html = await renderViaHTTP(appPort, '/amp-script?amp=1')\n-        await validateAMP(html)\n-      })\n-\n-      it('should optimize clean', async () => {\n-        const html = await renderViaHTTP(appPort, '/only-amp')\n-        await validateAMP(html)\n-      })\n-\n-      it('should auto import extensions', async () => {\n-        const html = await renderViaHTTP(appPort, '/auto-import')\n-        await validateAMP(html)\n-      })\n-    })\n-\n-    describe('With AMP context', () => {\n-      it('should render the normal page that uses the AMP hook', async () => {\n-        const html = await renderViaHTTP(appPort, '/use-amp-hook')\n-        expect(html).toMatch(/Hello others/)\n-        expect(html).toMatch(/no AMP for you\\.\\.\\./)\n-      })\n-\n-      it('should render the AMP page that uses the AMP hook', async () => {\n-        const html = await renderViaHTTP(appPort, '/use-amp-hook?amp=1')\n-        await validateAMP(html)\n-        expect(html).toMatch(/Hello AMP/)\n-        expect(html).toMatch(/AMP Power!!!/)\n-      })\n-\n-      it('should render nested normal page with AMP hook', async () => {\n-        const html = await renderViaHTTP(appPort, '/nested')\n-        expect(html).toMatch(/Hello others/)\n-      })\n-\n-      it('should render nested AMP page with AMP hook', async () => {\n-        const html = await renderViaHTTP(appPort, '/nested?amp=1')\n-        await validateAMP(html)\n-        expect(html).toMatch(/Hello AMP/)\n-      })\n-    })\n-\n-    describe('canonical amphtml', () => {\n-      it('should render link rel amphtml', async () => {\n-        const html = await renderViaHTTP(appPort, '/use-amp-hook')\n-        const $ = cheerio.load(html)\n-        expect($('link[rel=amphtml]').first().attr('href')).toBe(\n-          'http://localhost:1234/use-amp-hook.amp'\n-        )\n-      })\n-\n-      it('should render amphtml from provided rel link', async () => {\n-        const html = await renderViaHTTP(appPort, '/use-amp-hook.amp')\n-        await validateAMP(html)\n-      })\n-\n-      it('should render link rel amphtml with existing query', async () => {\n-        const html = await renderViaHTTP(appPort, '/use-amp-hook?hello=1')\n-        expect(html).not.toMatch(/&amp;amp=1/)\n-      })\n-\n-      it('should render the AMP page that uses the AMP hook', async () => {\n-        const html = await renderViaHTTP(appPort, '/use-amp-hook?amp=1')\n-        const $ = cheerio.load(html)\n-        await validateAMP(html)\n-        expect($('link[rel=canonical]').first().attr('href')).toBe(\n-          'http://localhost:1234/use-amp-hook'\n-        )\n-      })\n-\n-      it('should render a canonical regardless of amp-only status (explicit)', async () => {\n-        const html = await renderViaHTTP(appPort, '/only-amp')\n-        const $ = cheerio.load(html)\n-        await validateAMP(html)\n-        expect($('link[rel=canonical]').first().attr('href')).toBe(\n-          'http://localhost:1234/only-amp'\n-        )\n-      })\n-\n-      it('should not render amphtml link tag with no AMP page', async () => {\n-        const html = await renderViaHTTP(appPort, '/normal')\n-        const $ = cheerio.load(html)\n-        expect($('link[rel=amphtml]').first().attr('href')).not.toBeTruthy()\n-      })\n-\n-      it('should remove conflicting amp tags', async () => {\n-        const html = await renderViaHTTP(appPort, '/conflicting-tag?amp=1')\n-        const $ = cheerio.load(html)\n-        await validateAMP(html)\n-        expect($('meta[name=viewport]').attr('content')).not.toBe(\n-          'something :p'\n-        )\n-      })\n-\n-      it('should allow manually setting canonical', async () => {\n-        const html = await renderViaHTTP(appPort, '/manual-rels?amp=1')\n-        const $ = cheerio.load(html)\n-        await validateAMP(html)\n-        expect($('link[rel=canonical]').attr('href')).toBe(\n-          '/my-custom-canonical'\n-        )\n-      })\n-\n-      it('should allow manually setting amphtml rel', async () => {\n-        const html = await renderViaHTTP(appPort, '/manual-rels')\n-        const $ = cheerio.load(html)\n-        expect($('link[rel=amphtml]').attr('href')).toBe('/my-custom-amphtml')\n-        expect($('link[rel=amphtml]')).toHaveLength(1)\n-      })\n-    })\n-\n-    describe('combined styles', () => {\n-      it('should combine style tags', async () => {\n-        const html = await renderViaHTTP(appPort, '/styled?amp=1')\n-        const $ = cheerio.load(html)\n-        expect($('style[amp-custom]').first().text()).toMatch(\n-          /div.jsx-[a-zA-Z0-9]{1,}{color:red}span.jsx-[a-zA-Z0-9]{1,}{color:(?:blue|#00f)}body{background-color:green}/\n-        )\n-      })\n-\n-      it('should remove sourceMaps from styles', async () => {\n-        const html = await renderViaHTTP(appPort, '/styled?amp=1')\n-        const $ = cheerio.load(html)\n-        const styles = $('style[amp-custom]').first().text()\n-\n-        expect(styles).not.toMatch(/\\/\\*@ sourceURL=.*?\\*\\//)\n-        expect(styles).not.toMatch(/\\/\\*# sourceMappingURL=.*\\*\\//)\n-      })\n-    })\n-  })\n-\n-  describe('AMP dev no-warn', () => {\n-    let dynamicAppPort\n-    let ampDynamic\n-\n-    it('should not warn on valid amp', async () => {\n-      let inspectPayload = ''\n-      dynamicAppPort = await findPort()\n-      ampDynamic = await launchApp(join(__dirname, '../'), dynamicAppPort, {\n-        onStdout(msg) {\n-          inspectPayload += msg\n-        },\n-        onStderr(msg) {\n-          inspectPayload += msg\n-        },\n-      })\n-\n-      await renderViaHTTP(dynamicAppPort, '/only-amp')\n-\n-      await killApp(ampDynamic)\n-\n-      expect(inspectPayload).not.toContain('warn')\n-    })\n-  })\n-\n-  describe('AMP development mode', () => {\n-    let dynamicAppPort\n-    let ampDynamic\n-    let output = ''\n-\n-    beforeAll(async () => {\n-      dynamicAppPort = await findPort()\n-      ampDynamic = await launchApp(join(__dirname, '../'), dynamicAppPort, {\n-        onStdout(msg) {\n-          output += msg\n-        },\n-        onStderr(msg) {\n-          output += msg\n-        },\n-      })\n-    })\n-\n-    afterAll(() => killApp(ampDynamic))\n-\n-    it('should navigate from non-AMP to AMP without error', async () => {\n-      const browser = await webdriver(dynamicAppPort, '/normal')\n-      await browser.elementByCss('#to-amp').click()\n-      await browser.waitForElementByCss('#only-amp')\n-      expect(await browser.elementByCss('#only-amp').text()).toMatch(/Only AMP/)\n-    })\n-\n-    it('should add data-ampdevmode to development script tags', async () => {\n-      const html = await renderViaHTTP(dynamicAppPort, '/only-amp')\n-      const $ = cheerio.load(html)\n-      expect($('html').attr('data-ampdevmode')).toBe('')\n-      expect(\n-        [].slice\n-          .apply($('script[data-ampdevmode]'))\n-          .map((el) => el.attribs.src || el.attribs.id)\n-          .map((e) =>\n-            e.startsWith('/') ? new URL(e, 'http://x.x').pathname : e\n-          )\n-      ).not.toBeEmpty()\n-    })\n-\n-    it.skip('should detect the changes and display it', async () => {\n-      let browser\n-      try {\n-        browser = await webdriver(dynamicAppPort, '/hmr/test')\n-        const text = await browser.elementByCss('p').text()\n-        expect(text).toBe('This is the hot AMP page.')\n-\n-        const hmrTestPagePath = join(\n-          __dirname,\n-          '../',\n-          'pages',\n-          'hmr',\n-          'test.js'\n-        )\n-\n-        const originalContent = readFileSync(hmrTestPagePath, 'utf8')\n-        const editedContent = originalContent.replace(\n-          'This is the hot AMP page',\n-          'This is a cold AMP page'\n-        )\n-\n-        // change the content\n-        writeFileSync(hmrTestPagePath, editedContent, 'utf8')\n-\n-        await check(\n-          () => getBrowserBodyText(browser),\n-          /This is a cold AMP page/\n-        )\n-\n-        // add the original content\n-        writeFileSync(hmrTestPagePath, originalContent, 'utf8')\n-\n-        await check(\n-          () => getBrowserBodyText(browser),\n-          /This is the hot AMP page/\n-        )\n-      } finally {\n-        await browser.close()\n-      }\n-    })\n-\n-    it.skip('should detect changes and refresh an AMP page', async () => {\n-      let browser\n-      try {\n-        browser = await webdriver(dynamicAppPort, '/hmr/amp')\n-        const text = await browser.elementByCss('p').text()\n-        expect(text).toBe(`I'm an AMP page!`)\n-\n-        const hmrTestPagePath = join(__dirname, '../', 'pages', 'hmr', 'amp.js')\n-\n-        const originalContent = readFileSync(hmrTestPagePath, 'utf8')\n-        const editedContent = originalContent.replace(\n-          `I'm an AMP page!`,\n-          'replaced it!'\n-        )\n-\n-        // change the content\n-        writeFileSync(hmrTestPagePath, editedContent, 'utf8')\n-\n-        await check(() => getBrowserBodyText(browser), /replaced it!/)\n-\n-        // add the original content\n-        writeFileSync(hmrTestPagePath, originalContent, 'utf8')\n-\n-        await check(() => getBrowserBodyText(browser), /I'm an AMP page!/)\n-      } finally {\n-        await browser.close()\n-      }\n-    })\n-\n-    it.skip('should detect changes to component and refresh an AMP page', async () => {\n-      const browser = await webdriver(dynamicAppPort, '/hmr/comp')\n-      await check(() => browser.elementByCss('#hello-comp').text(), /hello/)\n-\n-      const testComp = join(__dirname, '../components/hello.js')\n-\n-      const origContent = readFileSync(testComp, 'utf8')\n-      const newContent = origContent.replace('>hello<', '>hi<')\n-\n-      writeFileSync(testComp, newContent, 'utf8')\n-      await check(() => browser.elementByCss('#hello-comp').text(), /hi/)\n-\n-      writeFileSync(testComp, origContent, 'utf8')\n-      await check(() => browser.elementByCss('#hello-comp').text(), /hello/)\n-    })\n-\n-    it.skip('should not reload unless the page is edited for an AMP page', async () => {\n-      let browser\n-      const hmrTestPagePath = join(__dirname, '../', 'pages', 'hmr', 'test.js')\n-      const originalContent = readFileSync(hmrTestPagePath, 'utf8')\n-      try {\n-        await renderViaHTTP(dynamicAppPort, '/hmr/test')\n-\n-        browser = await webdriver(dynamicAppPort, '/hmr/amp')\n-        await check(() => browser.elementByCss('p').text(), /I'm an AMP page!/)\n-\n-        const origDate = await browser.elementByCss('span').text()\n-\n-        const editedContent = originalContent.replace(\n-          `This is the hot AMP page.`,\n-          'replaced it!'\n-        )\n-\n-        // change the content\n-        writeFileSync(hmrTestPagePath, editedContent, 'utf8')\n-\n-        let checks = 5\n-        let i = 0\n-        while (i < checks) {\n-          const curText = await browser.elementByCss('span').text()\n-          expect(curText).toBe(origDate)\n-          await waitFor(1000)\n-          i++\n-        }\n-\n-        // add the original content\n-        writeFileSync(hmrTestPagePath, originalContent, 'utf8')\n-\n-        const otherHmrTestPage = join(__dirname, '../pages/hmr/amp.js')\n-\n-        const otherOrigContent = readFileSync(otherHmrTestPage, 'utf8')\n-        const otherEditedContent = otherOrigContent.replace(\n-          `I'm an AMP page!`,\n-          `replaced it!`\n-        )\n-\n-        // change the content\n-        writeFileSync(otherHmrTestPage, otherEditedContent, 'utf8')\n-\n-        await check(() => getBrowserBodyText(browser), /replaced it!/)\n-\n-        // restore original content\n-        writeFileSync(otherHmrTestPage, otherOrigContent, 'utf8')\n-\n-        await check(() => getBrowserBodyText(browser), /I'm an AMP page!/)\n-      } finally {\n-        writeFileSync(hmrTestPagePath, originalContent, 'utf8')\n-        await browser.close()\n-      }\n-    })\n-\n-    it.skip('should detect changes and refresh a hybrid AMP page', async () => {\n-      let browser\n-      try {\n-        browser = await webdriver(dynamicAppPort, '/hmr/hybrid?amp=1')\n-        const text = await browser.elementByCss('p').text()\n-        expect(text).toBe(`I'm a hybrid AMP page!`)\n-\n-        const hmrTestPagePath = join(\n-          __dirname,\n-          '../',\n-          'pages',\n-          'hmr',\n-          'hybrid.js'\n-        )\n-\n-        const originalContent = readFileSync(hmrTestPagePath, 'utf8')\n-        const editedContent = originalContent.replace(\n-          `I'm a hybrid AMP page!`,\n-          'replaced it!'\n-        )\n-\n-        // change the content\n-        writeFileSync(hmrTestPagePath, editedContent, 'utf8')\n-\n-        await check(() => getBrowserBodyText(browser), /replaced it!/)\n-\n-        // add the original content\n-        writeFileSync(hmrTestPagePath, originalContent, 'utf8')\n-\n-        await check(() => getBrowserBodyText(browser), /I'm a hybrid AMP page!/)\n-      } finally {\n-        await browser.close()\n-      }\n-    })\n-\n-    it.skip('should detect changes and refresh an AMP page at root pages/', async () => {\n-      let browser\n-      try {\n-        browser = await webdriver(dynamicAppPort, '/root-hmr')\n-        const text = await browser.elementByCss('p').text()\n-        expect(text).toBe(`I'm an AMP page!`)\n-\n-        const hmrTestPagePath = join(__dirname, '../', 'pages', 'root-hmr.js')\n-\n-        const originalContent = readFileSync(hmrTestPagePath, 'utf8')\n-        const editedContent = originalContent.replace(\n-          `I'm an AMP page!`,\n-          'replaced it!'\n-        )\n-\n-        // change the content\n-        writeFileSync(hmrTestPagePath, editedContent, 'utf8')\n-\n-        await check(() => getBrowserBodyText(browser), /replaced it!/)\n-\n-        // add the original content\n-        writeFileSync(hmrTestPagePath, originalContent, 'utf8')\n-\n-        await check(() => getBrowserBodyText(browser), /I'm an AMP page!/)\n-      } finally {\n-        await browser.close()\n-      }\n-    })\n-\n-    it('should detect amp validator warning on invalid amp', async () => {\n-      let inspectPayload = ''\n-      dynamicAppPort = await findPort()\n-      ampDynamic = await launchApp(join(__dirname, '../'), dynamicAppPort, {\n-        onStdout(msg) {\n-          inspectPayload += msg\n-        },\n-        onStderr(msg) {\n-          inspectPayload += msg\n-        },\n-      })\n-\n-      await renderViaHTTP(dynamicAppPort, '/invalid-amp')\n-\n-      await killApp(ampDynamic)\n-\n-      expect(inspectPayload).toContain('error')\n-    })\n-\n-    it('should detect amp validator warning on custom scripts', async () => {\n-      let inspectPayload = ''\n-      dynamicAppPort = await findPort()\n-      ampDynamic = await launchApp(join(__dirname, '../'), dynamicAppPort, {\n-        onStdout(msg) {\n-          inspectPayload += msg\n-        },\n-        onStderr(msg) {\n-          inspectPayload += msg\n-        },\n-      })\n-\n-      await renderViaHTTP(dynamicAppPort, '/custom-scripts')\n-\n-      await killApp(ampDynamic)\n-\n-      expect(inspectPayload).toContain('error')\n-    })\n-\n-    // eslint-disable-next-line jest/no-identical-title\n-    it('should not contain missing files warning', async () => {\n-      expect(output).toContain('Compiled /only-amp')\n-      expect(output).not.toContain('Could not find files for')\n-    })\n-  })\n-})"
        },
        {
            "sha": "744087472736e2401363440f800c866683388252",
            "filename": "test/integration/auto-export-query-error/next.config.js",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Fauto-export-query-error%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Fauto-export-query-error%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fauto-export-query-error%2Fnext.config.js?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -3,7 +3,6 @@ module.exports = {\n   exportPathMap() {\n     return {\n       '/': { page: '/hello', query: { first: 'second' } },\n-      '/amp': { page: '/amp' },\n       '/ssr': { page: '/ssr', query: { another: 'one' } },\n     }\n   },"
        },
        {
            "sha": "e9c90ebfe5ac7b6b155cecb70cc5643b8963ee35",
            "filename": "test/integration/auto-export-query-error/pages/amp.js",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fauto-export-query-error%2Fpages%2Famp.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fauto-export-query-error%2Fpages%2Famp.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fauto-export-query-error%2Fpages%2Famp.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,3 +0,0 @@\n-export const config = { amp: 'hybrid' }\n-\n-export default () => 'hi from hybrid AMP'"
        },
        {
            "sha": "41ecffd4c155687c70ccd3fbe9154c5f4e160c51",
            "filename": "test/integration/auto-export-query-error/test/index.test.js",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Fauto-export-query-error%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Fauto-export-query-error%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fauto-export-query-error%2Ftest%2Findex.test.js?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -14,7 +14,6 @@ const runTests = () => {\n       'Error: you provided query values for / which is an auto-exported page. These can not be applied since the page can no longer be re-rendered on the server. To disable auto-export for this page add `getInitialProps`'\n     )\n \n-    expect(stderr).not.toContain('Error: you provided query values for /amp')\n     expect(stderr).not.toContain('Error: you provided query values for /ssr')\n     expect(stderr).not.toContain('Error: you provided query values for /ssg')\n   })"
        },
        {
            "sha": "4ba52ba2c8df6758685c8f65f490306b5c44eb76",
            "filename": "test/integration/build-output/fixtures/with-amp/next.config.js",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fbuild-output%2Ffixtures%2Fwith-amp%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fbuild-output%2Ffixtures%2Fwith-amp%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fbuild-output%2Ffixtures%2Fwith-amp%2Fnext.config.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1 +0,0 @@\n-module.exports = {}"
        },
        {
            "sha": "58639d8ba206d6297360861cf81f524697a1e337",
            "filename": "test/integration/build-output/fixtures/with-amp/pages/amp.js",
            "status": "removed",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fbuild-output%2Ffixtures%2Fwith-amp%2Fpages%2Famp.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fbuild-output%2Ffixtures%2Fwith-amp%2Fpages%2Famp.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fbuild-output%2Ffixtures%2Fwith-amp%2Fpages%2Famp.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,2 +0,0 @@\n-export const config = { amp: true }\n-export default () => 'hi'"
        },
        {
            "sha": "d656f2f3e7fe7ae5c85a2fa43e4145d228a819a8",
            "filename": "test/integration/build-output/fixtures/with-amp/pages/hybrid.js",
            "status": "removed",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fbuild-output%2Ffixtures%2Fwith-amp%2Fpages%2Fhybrid.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fbuild-output%2Ffixtures%2Fwith-amp%2Fpages%2Fhybrid.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fbuild-output%2Ffixtures%2Fwith-amp%2Fpages%2Fhybrid.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,2 +0,0 @@\n-export const config = { amp: 'hybrid' }\n-export default () => 'hi'"
        },
        {
            "sha": "7176cf77721112bd9e78c65d05b23bb0ae3d8d74",
            "filename": "test/integration/build-output/fixtures/with-amp/pages/index.js",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fbuild-output%2Ffixtures%2Fwith-amp%2Fpages%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fbuild-output%2Ffixtures%2Fwith-amp%2Fpages%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fbuild-output%2Ffixtures%2Fwith-amp%2Fpages%2Findex.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,3 +0,0 @@\n-export default function () {\n-  return <div />\n-}"
        },
        {
            "sha": "36625e2941effc0ebfe2136f4f8812b57dd74c66",
            "filename": "test/integration/build-output/test/index.test.js",
            "status": "modified",
            "additions": 0,
            "deletions": 28,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Fbuild-output%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Fbuild-output%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fbuild-output%2Ftest%2Findex.test.js?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -215,34 +215,6 @@ describe('Build Output', () => {\n         })\n       })\n \n-      // AMP is not supported with Turbopack.\n-      ;(process.env.IS_TURBOPACK_TEST ? describe.skip : describe)(\n-        'With AMP Output',\n-        () => {\n-          const appDir = join(fixturesDir, 'with-amp')\n-\n-          beforeAll(async () => {\n-            await remove(join(appDir, '.next'))\n-          })\n-\n-          it('should not include custom error', async () => {\n-            const { stdout } = await nextBuild(appDir, [], {\n-              stdout: true,\n-            })\n-\n-            expect(stdout).toMatch(/\\//)\n-            expect(stdout).toMatch(/\\/amp (.* )?AMP/)\n-            expect(stdout).toMatch(/\\/hybrid (.* )?/)\n-\n-            expect(stdout).not.toContain(' /_document')\n-            expect(stdout).not.toContain(' /_error')\n-            expect(stdout).not.toContain('<buildId>')\n-\n-            expect(stdout).toContain(' /')\n-          })\n-        }\n-      )\n-\n       describe('Custom Error Output', () => {\n         const appDir = join(fixturesDir, 'with-error')\n "
        },
        {
            "sha": "9e304e5d7ce80c5a8835bee90a76df63b0e22892",
            "filename": "test/integration/draft-mode/tsconfig.json",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Fdraft-mode%2Ftsconfig.json",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Fdraft-mode%2Ftsconfig.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fdraft-mode%2Ftsconfig.json?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -17,7 +17,6 @@\n     \"paths\": {\n       \"development-sandbox\": [\"test/lib/development-sandbox\"],\n       \"next-test-utils\": [\"test/lib/next-test-utils\"],\n-      \"amp-test-utils\": [\"test/lib/amp-test-utils\"],\n       \"next-webdriver\": [\"test/lib/next-webdriver\"],\n       \"e2e-utils\": [\"test/lib/e2e-utils\"]\n     },"
        },
        {
            "sha": "ad4f19abb7e6d49504763b3a68021db957f42d3e",
            "filename": "test/integration/export-default-map/next.config.js",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fexport-default-map%2Fnext.config.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,3 +0,0 @@\n-module.exports = {\n-  output: 'export',\n-}"
        },
        {
            "sha": "a9a0dda5d87e4e5e245dd759638b5920ed6827c6",
            "filename": "test/integration/export-default-map/pages/docs/index.js",
            "status": "removed",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Fpages%2Fdocs%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Fpages%2Fdocs%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fexport-default-map%2Fpages%2Fdocs%2Findex.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,5 +0,0 @@\n-import { useAmp } from 'next/amp'\n-\n-export const config = { amp: 'hybrid' }\n-\n-export default () => <p>I'm an {useAmp() ? 'AMP' : 'normal'} page</p>"
        },
        {
            "sha": "75c983e69e85b6f22d0a6a5104c2e31b2e968742",
            "filename": "test/integration/export-default-map/pages/index.js",
            "status": "removed",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Fpages%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Fpages%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fexport-default-map%2Fpages%2Findex.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,2 +0,0 @@\n-export default () => <p>Simple hybrid amp/non-amp page</p>\n-export const config = { amp: 'hybrid' }"
        },
        {
            "sha": "a9a0dda5d87e4e5e245dd759638b5920ed6827c6",
            "filename": "test/integration/export-default-map/pages/info.js",
            "status": "removed",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Fpages%2Finfo.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Fpages%2Finfo.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fexport-default-map%2Fpages%2Finfo.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,5 +0,0 @@\n-import { useAmp } from 'next/amp'\n-\n-export const config = { amp: 'hybrid' }\n-\n-export default () => <p>I'm an {useAmp() ? 'AMP' : 'normal'} page</p>"
        },
        {
            "sha": "332a64770b868583c96eccda40e34f4f0f36cad8",
            "filename": "test/integration/export-default-map/pages/just-amp/index.js",
            "status": "removed",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Fpages%2Fjust-amp%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Fpages%2Fjust-amp%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fexport-default-map%2Fpages%2Fjust-amp%2Findex.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,2 +0,0 @@\n-export default () => <p>I am an AMP only page</p>\n-export const config = { amp: true }"
        },
        {
            "sha": "76b8930bd6f4650e4367f4de34f95460d73f1a64",
            "filename": "test/integration/export-default-map/pages/some.js",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Fpages%2Fsome.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Fpages%2Fsome.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fexport-default-map%2Fpages%2Fsome.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,3 +0,0 @@\n-export const config = { amp: 'hybrid' }\n-\n-export default () => <p>I'm an AMP page</p>"
        },
        {
            "sha": "569e62008df65d348ddac911901ca59f15a4813a",
            "filename": "test/integration/export-default-map/pages/v1.12/docs.js",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Fpages%2Fv1.12%2Fdocs.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Fpages%2Fv1.12%2Fdocs.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fexport-default-map%2Fpages%2Fv1.12%2Fdocs.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,3 +0,0 @@\n-export default function Docs(props) {\n-  return <div>Hello again </div>\n-}"
        },
        {
            "sha": "6a9540f9efec55ff7a554d71d54b7af6fa99bdee",
            "filename": "test/integration/export-default-map/pages/v1.12/index.js",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Fpages%2Fv1.12%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Fpages%2Fv1.12%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fexport-default-map%2Fpages%2Fv1.12%2Findex.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,3 +0,0 @@\n-export default function Index(props) {\n-  return <div>Hello </div>\n-}"
        },
        {
            "sha": "2411e381a677e701af7aa36173c31905ccf6491c",
            "filename": "test/integration/export-default-map/test/index.test.js",
            "status": "removed",
            "additions": 0,
            "deletions": 79,
            "changes": 79,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fexport-default-map%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fexport-default-map%2Ftest%2Findex.test.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,79 +0,0 @@\n-/* eslint-env jest */\n-\n-import { promises } from 'fs'\n-import { join } from 'path'\n-import cheerio from 'cheerio'\n-import { nextBuild } from 'next-test-utils'\n-\n-const { access, readFile } = promises\n-const appDir = join(__dirname, '../')\n-const outdir = join(appDir, 'out')\n-\n-describe('Export with default map', () => {\n-  ;(process.env.TURBOPACK_DEV ? describe.skip : describe)(\n-    'production mode',\n-    () => {\n-      beforeAll(async () => {\n-        await nextBuild(appDir)\n-      })\n-\n-      it('should export with folder that has dot in name', async () => {\n-        expect.assertions(1)\n-        await expect(access(join(outdir, 'v1.12.html'))).resolves.toBe(\n-          undefined\n-        )\n-      })\n-\n-      it('should export an amp only page to clean path', async () => {\n-        expect.assertions(1)\n-        await expect(access(join(outdir, 'docs.html'))).resolves.toBe(undefined)\n-      })\n-\n-      it('should export hybrid amp page correctly', async () => {\n-        expect.assertions(2)\n-        await expect(access(join(outdir, 'some.html'))).resolves.toBe(undefined)\n-        await expect(access(join(outdir, 'some.amp.html'))).resolves.toBe(\n-          undefined\n-        )\n-      })\n-\n-      it('should export nested hybrid amp page correctly', async () => {\n-        expect.assertions(3)\n-        await expect(access(join(outdir, 'docs.html'))).resolves.toBe(undefined)\n-        await expect(access(join(outdir, 'docs.amp.html'))).resolves.toBe(\n-          undefined\n-        )\n-\n-        const html = await readFile(join(outdir, 'docs.html'))\n-        const $ = cheerio.load(html)\n-        expect($('link[rel=amphtml]').attr('href')).toBe('/docs.amp')\n-      })\n-\n-      it('should export nested hybrid amp page correctly with folder', async () => {\n-        expect.assertions(3)\n-        await expect(access(join(outdir, 'info.html'))).resolves.toBe(undefined)\n-        await expect(access(join(outdir, 'info.amp.html'))).resolves.toBe(\n-          undefined\n-        )\n-\n-        const html = await readFile(join(outdir, 'info.html'))\n-        const $ = cheerio.load(html)\n-        expect($('link[rel=amphtml]').attr('href')).toBe('/info.amp')\n-      })\n-\n-      it('should export hybrid index amp page correctly', async () => {\n-        expect.assertions(3)\n-        await expect(access(join(outdir, 'index.html'))).resolves.toBe(\n-          undefined\n-        )\n-        await expect(access(join(outdir, 'index.amp.html'))).resolves.toBe(\n-          undefined\n-        )\n-\n-        const html = await readFile(join(outdir, 'index.html'))\n-        const $ = cheerio.load(html)\n-        expect($('link[rel=amphtml]').attr('href')).toBe('/index.amp')\n-      })\n-    }\n-  )\n-})"
        },
        {
            "sha": "eeb68575a23d8dca44557a2fbe38f058cbe6d143",
            "filename": "test/integration/i18n-support-base-path/pages/amp/amp-first.js",
            "status": "removed",
            "additions": 0,
            "deletions": 32,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fi18n-support-base-path%2Fpages%2Famp%2Famp-first.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fi18n-support-base-path%2Fpages%2Famp%2Famp-first.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fi18n-support-base-path%2Fpages%2Famp%2Famp-first.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,32 +0,0 @@\n-import { useAmp } from 'next/amp'\n-import { useRouter } from 'next/router'\n-\n-export const config = {\n-  amp: true,\n-}\n-\n-export default function Page(props) {\n-  const router = useRouter()\n-\n-  return (\n-    <>\n-      <p id=\"another\">another page</p>\n-      <p id=\"is-amp\">{useAmp() ? 'yes' : 'no'}</p>\n-      <p id=\"props\">{JSON.stringify(props)}</p>\n-      <p id=\"router-locale\">{router.locale}</p>\n-      <p id=\"router-locales\">{JSON.stringify(router.locales)}</p>\n-      <p id=\"router-query\">{JSON.stringify(router.query)}</p>\n-      <p id=\"router-pathname\">{router.pathname}</p>\n-      <p id=\"router-as-path\">{router.asPath}</p>\n-    </>\n-  )\n-}\n-\n-export const getServerSideProps = ({ locale, locales }) => {\n-  return {\n-    props: {\n-      locale,\n-      locales,\n-    },\n-  }\n-}"
        },
        {
            "sha": "c693898eb538912acd51fb3d707399144fec1e18",
            "filename": "test/integration/i18n-support-base-path/pages/amp/amp-hybrid.js",
            "status": "removed",
            "additions": 0,
            "deletions": 23,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fi18n-support-base-path%2Fpages%2Famp%2Famp-hybrid.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fi18n-support-base-path%2Fpages%2Famp%2Famp-hybrid.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fi18n-support-base-path%2Fpages%2Famp%2Famp-hybrid.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,23 +0,0 @@\n-import { useAmp } from 'next/amp'\n-import { useRouter } from 'next/router'\n-\n-export const config = {\n-  amp: 'hybrid',\n-}\n-\n-export default function Page(props) {\n-  const router = useRouter()\n-\n-  return (\n-    <>\n-      <p id=\"another\">another page</p>\n-      <p id=\"is-amp\">{useAmp() ? 'yes' : 'no'}</p>\n-      <p id=\"props\">{JSON.stringify(props)}</p>\n-      <p id=\"router-locale\">{router.locale}</p>\n-      <p id=\"router-locales\">{JSON.stringify(router.locales)}</p>\n-      <p id=\"router-query\">{JSON.stringify(router.query)}</p>\n-      <p id=\"router-pathname\">{router.pathname}</p>\n-      <p id=\"router-as-path\">{router.asPath}</p>\n-    </>\n-  )\n-}"
        },
        {
            "sha": "eeb68575a23d8dca44557a2fbe38f058cbe6d143",
            "filename": "test/integration/i18n-support/pages/amp/amp-first.js",
            "status": "removed",
            "additions": 0,
            "deletions": 32,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fi18n-support%2Fpages%2Famp%2Famp-first.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fi18n-support%2Fpages%2Famp%2Famp-first.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fi18n-support%2Fpages%2Famp%2Famp-first.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,32 +0,0 @@\n-import { useAmp } from 'next/amp'\n-import { useRouter } from 'next/router'\n-\n-export const config = {\n-  amp: true,\n-}\n-\n-export default function Page(props) {\n-  const router = useRouter()\n-\n-  return (\n-    <>\n-      <p id=\"another\">another page</p>\n-      <p id=\"is-amp\">{useAmp() ? 'yes' : 'no'}</p>\n-      <p id=\"props\">{JSON.stringify(props)}</p>\n-      <p id=\"router-locale\">{router.locale}</p>\n-      <p id=\"router-locales\">{JSON.stringify(router.locales)}</p>\n-      <p id=\"router-query\">{JSON.stringify(router.query)}</p>\n-      <p id=\"router-pathname\">{router.pathname}</p>\n-      <p id=\"router-as-path\">{router.asPath}</p>\n-    </>\n-  )\n-}\n-\n-export const getServerSideProps = ({ locale, locales }) => {\n-  return {\n-    props: {\n-      locale,\n-      locales,\n-    },\n-  }\n-}"
        },
        {
            "sha": "c693898eb538912acd51fb3d707399144fec1e18",
            "filename": "test/integration/i18n-support/pages/amp/amp-hybrid.js",
            "status": "removed",
            "additions": 0,
            "deletions": 23,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fi18n-support%2Fpages%2Famp%2Famp-hybrid.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fi18n-support%2Fpages%2Famp%2Famp-hybrid.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fi18n-support%2Fpages%2Famp%2Famp-hybrid.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,23 +0,0 @@\n-import { useAmp } from 'next/amp'\n-import { useRouter } from 'next/router'\n-\n-export const config = {\n-  amp: 'hybrid',\n-}\n-\n-export default function Page(props) {\n-  const router = useRouter()\n-\n-  return (\n-    <>\n-      <p id=\"another\">another page</p>\n-      <p id=\"is-amp\">{useAmp() ? 'yes' : 'no'}</p>\n-      <p id=\"props\">{JSON.stringify(props)}</p>\n-      <p id=\"router-locale\">{router.locale}</p>\n-      <p id=\"router-locales\">{JSON.stringify(router.locales)}</p>\n-      <p id=\"router-query\">{JSON.stringify(router.query)}</p>\n-      <p id=\"router-pathname\">{router.pathname}</p>\n-      <p id=\"router-as-path\">{router.asPath}</p>\n-    </>\n-  )\n-}"
        },
        {
            "sha": "a7aff2d47588997f42cf5b489f786b1317dff977",
            "filename": "test/integration/i18n-support/test/shared.js",
            "status": "modified",
            "additions": 0,
            "deletions": 53,
            "changes": 53,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Fi18n-support%2Ftest%2Fshared.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Fi18n-support%2Ftest%2Fshared.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fi18n-support%2Ftest%2Fshared.js?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -2870,59 +2870,6 @@ export function runTests(ctx) {\n     }\n   })\n \n-  it('should generate AMP pages with all locales', async () => {\n-    for (const locale of nonDomainLocales) {\n-      const localePath = locale !== 'en-US' ? `/${locale}` : ''\n-      const html = await renderViaHTTP(\n-        ctx.appPort,\n-        `${ctx.basePath}${localePath}/amp/amp-hybrid`\n-      )\n-      const $ = cheerio.load(html)\n-      expect($('html').attr('lang')).toBe(locale)\n-      expect($('#is-amp').text()).toBe('no')\n-      expect($('#router-locale').text()).toBe(locale)\n-      expect(JSON.parse($('#router-locales').text())).toEqual(locales)\n-      expect($('#router-pathname').text()).toBe('/amp/amp-hybrid')\n-      expect($('#router-as-path').text()).toBe('/amp/amp-hybrid')\n-      expect(JSON.parse($('#router-query').text())).toEqual({})\n-\n-      const amphtmlPath = `${ctx.basePath}${localePath}/amp/amp-hybrid${\n-        ctx.isDev ? '?amp=1' : '.amp'\n-      }`\n-      expect($('link[rel=amphtml]').attr('href')).toBe(amphtmlPath)\n-\n-      const html2 = await renderViaHTTP(ctx.appPort, amphtmlPath)\n-      const $2 = cheerio.load(html2)\n-      expect($2('html').attr('lang')).toBe(locale)\n-      expect($2('#is-amp').text()).toBe('yes')\n-      expect($2('#router-locale').text()).toBe(locale)\n-      expect(JSON.parse($2('#router-locales').text())).toEqual(locales)\n-      expect($2('#router-pathname').text()).toBe('/amp/amp-hybrid')\n-      expect($2('#router-as-path').text()).toBe('/amp/amp-hybrid')\n-      expect(JSON.parse($2('#router-query').text())).toEqual({ amp: '1' })\n-      expect($2('link[rel=amphtml]').attr('href')).toBeFalsy()\n-    }\n-  })\n-\n-  it('should work with AMP first page with all locales', async () => {\n-    for (const locale of nonDomainLocales) {\n-      const localePath = locale !== 'en-US' ? `/${locale}` : ''\n-      const html = await renderViaHTTP(\n-        ctx.appPort,\n-        `${ctx.basePath}${localePath}/amp/amp-first`\n-      )\n-      const $ = cheerio.load(html)\n-      expect($('html').attr('lang')).toBe(locale)\n-      expect($('#is-amp').text()).toBe('yes')\n-      expect($('#router-locale').text()).toBe(locale)\n-      expect(JSON.parse($('#router-locales').text())).toEqual(locales)\n-      expect($('#router-pathname').text()).toBe('/amp/amp-first')\n-      expect($('#router-as-path').text()).toBe('/amp/amp-first')\n-      expect(JSON.parse($('#router-query').text())).toEqual({})\n-      expect($('link[rel=amphtml]').attr('href')).toBeFalsy()\n-    }\n-  })\n-\n   it('should generate fallbacks with all locales', async () => {\n     for (const locale of nonDomainLocales) {\n       const html = await renderViaHTTP("
        },
        {
            "sha": "b3a95c53f561f29449f18cdeb5deb343eae66c5b",
            "filename": "test/integration/nullish-config/test/index.test.js",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Fnullish-config%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Fnullish-config%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnullish-config%2Ftest%2Findex.test.js?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -18,9 +18,6 @@ const runTests = (type) => {\n           env: undefined,\n           webpack: undefined,\n           pageExtensions: undefined,\n-          amp: {\n-            canonicalBase: undefined,\n-          },\n         }\n       `\n     )\n@@ -43,9 +40,6 @@ const runTests = (type) => {\n           env: null,\n           webpack: null,\n           pageExtensions: null,\n-          amp: {\n-            canonicalBase: null,\n-          },\n         }\n       `\n     )"
        },
        {
            "sha": "fae2214867d3fe61f12a2acca7ec7fff59b42d79",
            "filename": "test/integration/page-config/pages/invalid/invalid-property.js",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fpage-config%2Fpages%2Finvalid%2Finvalid-property.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fpage-config%2Fpages%2Finvalid%2Finvalid-property.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fpage-config%2Fpages%2Finvalid%2Finvalid-property.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,3 +0,0 @@\n-// export const config = { amp() {} }\n-\n-export default () => <p>hello world</p>"
        },
        {
            "sha": "10fcd812d31fb7f496bff95a8a5df167dacdefd8",
            "filename": "test/integration/page-config/pages/invalid/invalid-value.js",
            "status": "removed",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fpage-config%2Fpages%2Finvalid%2Finvalid-value.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fintegration%2Fpage-config%2Fpages%2Finvalid%2Finvalid-value.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fpage-config%2Fpages%2Finvalid%2Finvalid-value.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,5 +0,0 @@\n-const amp = 'hybrid'\n-\n-// export const config = { amp }\n-\n-export default () => <p>hello ${amp}</p>"
        },
        {
            "sha": "43f5d5503a906f409fd78601f336434a83bcb3d1",
            "filename": "test/integration/page-config/pages/invalid/spread-config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Fpage-config%2Fpages%2Finvalid%2Fspread-config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Fpage-config%2Fpages%2Finvalid%2Fspread-config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fpage-config%2Fpages%2Finvalid%2Fspread-config.js?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -1,4 +1,4 @@\n-const props = { amp: true }\n+const props = { runtime: 'nodejs' }\n \n // export const config = { ...props }\n "
        },
        {
            "sha": "acab36c9ac10880cd206dc5df9172a84225da547",
            "filename": "test/integration/page-config/test/index.test.js",
            "status": "modified",
            "additions": 0,
            "deletions": 35,
            "changes": 35,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Fpage-config%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Fpage-config%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fpage-config%2Ftest%2Findex.test.js?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -70,41 +70,6 @@ describe('Page Config', () => {\n         }\n       })\n \n-      it('shows error when page config has invalid properties', async () => {\n-        const reset = await uncommentExport('invalid/invalid-property.js')\n-\n-        try {\n-          const { stderr } = await nextBuild(appDir, undefined, {\n-            stderr: true,\n-          })\n-          expect(stderr).toContain(\n-            \"Next.js can't recognize the exported `config`\"\n-          )\n-        } finally {\n-          await reset()\n-        }\n-      })\n-\n-      // Turbopack ignores the config.amp property\n-      ;(process.env.IS_TURBOPACK_TEST ? it.skip : it)(\n-        'shows error when page config has invalid property value',\n-        async () => {\n-          const reset = await uncommentExport('invalid/invalid-value.js')\n-\n-          try {\n-            const { stderr } = await nextBuild(appDir, undefined, {\n-              stderr: true,\n-            })\n-            // eslint-disable-next-line jest/no-standalone-expect\n-            expect(stderr).toContain(\n-              \"Next.js can't recognize the exported `config`\"\n-            )\n-          } finally {\n-            await reset()\n-          }\n-        }\n-      )\n-\n       it('shows error when page config is export from', async () => {\n         const reset = await uncommentExport('invalid/export-from.js')\n "
        },
        {
            "sha": "6661177bc6ce3c83b9ff1b445193dfeb4b55af35",
            "filename": "test/integration/required-server-files-ssr-404/test/index.test.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Frequired-server-files-ssr-404%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fintegration%2Frequired-server-files-ssr-404%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Frequired-server-files-ssr-404%2Ftest%2Findex.test.js?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -68,7 +68,7 @@ describe('Required Server Files', () => {\n         expect(Array.isArray(requiredFilesManifest.files)).toBe(true)\n         expect(Array.isArray(requiredFilesManifest.ignore)).toBe(true)\n         expect(requiredFilesManifest.files.length).toBeGreaterThan(0)\n-        expect(requiredFilesManifest.ignore.length).toBeGreaterThan(0)\n+        expect(requiredFilesManifest.ignore.length).toBe(0)\n         expect(typeof requiredFilesManifest.config.configFile).toBe('undefined')\n         expect(typeof requiredFilesManifest.config.trailingSlash).toBe(\n           'boolean'"
        },
        {
            "sha": "4e90fb682cfe32893587b49a6a372d222b3f44db",
            "filename": "test/lib/amp-test-utils.js",
            "status": "removed",
            "additions": 0,
            "deletions": 87,
            "changes": 87,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Flib%2Famp-test-utils.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Flib%2Famp-test-utils.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Famp-test-utils.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,87 +0,0 @@\n-/* eslint-env jest */\n-import AmpHtmlValidator from 'next/dist/compiled/amphtml-validator'\n-\n-export async function validateAMP(/** @type {string} */ html) {\n-  const validatorPath = getBundledAmpValidatorFilepath()\n-  const validator = await getAmpValidatorInstance(validatorPath)\n-  const result = validator.validateString(html)\n-  const errors = result.errors.filter((error) => {\n-    if (error.severity === 'ERROR') {\n-      // Unclear yet if these actually prevent the page from being indexed by the AMP cache.\n-      // These are coming from React so all we can do is ignore them for now.\n-\n-      // <link rel=\"expect\" blocking=\"render\" />\n-      // https://github.com/ampproject/amphtml/issues/40279\n-      if (\n-        error.code === 'DISALLOWED_ATTR' &&\n-        error.params[0] === 'blocking' &&\n-        error.params[1] === 'link'\n-      ) {\n-        return false\n-      }\n-      // <template> without type\n-      // https://github.com/ampproject/amphtml/issues/40280\n-      if (\n-        error.code === 'MANDATORY_ATTR_MISSING' &&\n-        error.params[0] === 'type' &&\n-        error.params[1] === 'template'\n-      ) {\n-        return false\n-      }\n-      // <template> without type\n-      // https://github.com/ampproject/amphtml/issues/40280\n-      if (\n-        error.code === 'MISSING_REQUIRED_EXTENSION' &&\n-        error.params[0] === 'template' &&\n-        error.params[1] === 'amp-mustache'\n-      ) {\n-        return false\n-      }\n-      return true\n-    }\n-    return false\n-  })\n-  const warnings = result.errors.filter((error) => {\n-    return error.severity !== 'ERROR'\n-  })\n-\n-  expect({ errors, warnings }).toEqual({\n-    errors: [],\n-    warnings: [],\n-  })\n-}\n-\n-/** @typedef {import('next/dist/compiled/amphtml-validator').Validator} Validator */\n-\n-/** @type {Map<string | undefined, Promise<Validator>>} */\n-const instancePromises = new Map()\n-\n-/**\n- * This is a workaround for issues with concurrent `AmpHtmlValidator.getInstance()` calls,\n- * duplicated from 'packages/next/src/export/helpers/get-amp-html-validator.ts'.\n- * see original code for explanation.\n- *\n- * @returns {Promise<Validator>}\n- * */\n-function getAmpValidatorInstance(\n-  /** @type {string | undefined} */ validatorPath\n-) {\n-  let promise = instancePromises.get(validatorPath)\n-  if (!promise) {\n-    // NOTE: if `validatorPath` is undefined, `AmpHtmlValidator` will load the code from its default URL\n-    promise = AmpHtmlValidator.getInstance(validatorPath)\n-    instancePromises.set(validatorPath, promise)\n-  }\n-  return promise\n-}\n-\n-/**\n- * Use the same validator that we use for builds.\n- * This avoids trying to load one from the network, which can cause random test flakiness.\n- * (duplicated from 'packages/next/src/export/helpers/get-amp-html-validator.ts')\n- */\n-function getBundledAmpValidatorFilepath() {\n-  return require.resolve(\n-    'next/dist/compiled/amphtml-validator/validator_wasm.js'\n-  )\n-}"
        },
        {
            "sha": "29a931c2333b639bfe1ecc2cdc2b1b10959a138d",
            "filename": "test/production/next-server-nft/next-server-nft.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fproduction%2Fnext-server-nft%2Fnext-server-nft.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fproduction%2Fnext-server-nft%2Fnext-server-nft.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fnext-server-nft%2Fnext-server-nft.test.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -267,7 +267,6 @@ const isReact18 = parseInt(process.env.NEXT_TEST_REACT_VERSION) === 18\n          \"/node_modules/next/dist/server/load-manifest.external.js\",\n          \"/node_modules/next/dist/server/response-cache/types.js\",\n          \"/node_modules/next/dist/server/route-modules/app-page/module.compiled.js\",\n-         \"/node_modules/next/dist/server/route-modules/app-page/vendored/contexts/amp-context.js\",\n          \"/node_modules/next/dist/server/route-modules/app-page/vendored/contexts/app-router-context.js\",\n          \"/node_modules/next/dist/server/route-modules/app-page/vendored/contexts/entrypoints.js\",\n          \"/node_modules/next/dist/server/route-modules/app-page/vendored/contexts/head-manager-context.js\",\n@@ -276,7 +275,6 @@ const isReact18 = parseInt(process.env.NEXT_TEST_REACT_VERSION) === 18\n          \"/node_modules/next/dist/server/route-modules/app-page/vendored/contexts/router-context.js\",\n          \"/node_modules/next/dist/server/route-modules/app-page/vendored/contexts/server-inserted-html.js\",\n          \"/node_modules/next/dist/server/route-modules/pages/module.compiled.js\",\n-         \"/node_modules/next/dist/server/route-modules/pages/vendored/contexts/amp-context.js\",\n          \"/node_modules/next/dist/server/route-modules/pages/vendored/contexts/app-router-context.js\",\n          \"/node_modules/next/dist/server/route-modules/pages/vendored/contexts/entrypoints.js\",\n          \"/node_modules/next/dist/server/route-modules/pages/vendored/contexts/head-manager-context.js\","
        },
        {
            "sha": "2657813c5f5d37b5d6cbfec9e7e39f348300c3c7",
            "filename": "test/production/pages-dir/production/fixture/pages/amp-hybrid.js",
            "status": "removed",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fproduction%2Fpages-dir%2Fproduction%2Ffixture%2Fpages%2Famp-hybrid.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fproduction%2Fpages-dir%2Fproduction%2Ffixture%2Fpages%2Famp-hybrid.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fpages-dir%2Fproduction%2Ffixture%2Fpages%2Famp-hybrid.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,2 +0,0 @@\n-export default () => 'hi'\n-export const config = { amp: 'hybrid' }"
        },
        {
            "sha": "d3f2da805ef89dd78da2fc3a24cd0dbd1eb4ba30",
            "filename": "test/production/pages-dir/production/fixture/pages/amp.js",
            "status": "removed",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fproduction%2Fpages-dir%2Fproduction%2Ffixture%2Fpages%2Famp.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fproduction%2Fpages-dir%2Fproduction%2Ffixture%2Fpages%2Famp.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fpages-dir%2Fproduction%2Ffixture%2Fpages%2Famp.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,2 +0,0 @@\n-export default () => 'hi'\n-export const config = { amp: true }"
        },
        {
            "sha": "1d5e82525af1b6f789904115fe6188329a865a13",
            "filename": "test/production/pages-dir/production/fixture/pages/some-amp.js",
            "status": "removed",
            "additions": 0,
            "deletions": 11,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Fproduction%2Fpages-dir%2Fproduction%2Ffixture%2Fpages%2Fsome-amp.js",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Fproduction%2Fpages-dir%2Fproduction%2Ffixture%2Fpages%2Fsome-amp.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fpages-dir%2Fproduction%2Ffixture%2Fpages%2Fsome-amp.js?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,11 +0,0 @@\n-import { useAmp } from 'next/amp'\n-\n-if (typeof window !== 'undefined') {\n-  window.addEventListener('error', () => {\n-    document.querySelector('p').innerText('error')\n-  })\n-}\n-\n-export const config = { amp: 'hybrid' }\n-\n-export default () => <p>{useAmp() ? 'AMP' : 'Not AMP'}</p>"
        },
        {
            "sha": "3880888c925a5c5d87a5c3f46955e04118c6bfc4",
            "filename": "test/production/pages-dir/production/test/index.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 10,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fproduction%2Fpages-dir%2Fproduction%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fproduction%2Fpages-dir%2Fproduction%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fpages-dir%2Fproduction%2Ftest%2Findex.test.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -111,7 +111,7 @@ describe('Production Usage', () => {\n   })\n \n   it('should contain generated page count in output', async () => {\n-    const pageCount = 37\n+    const pageCount = 34\n     expect(next.cliOutput).toContain(`Generating static pages (0/${pageCount})`)\n     expect(next.cliOutput).toContain(\n       `Generating static pages (${pageCount}/${pageCount})`\n@@ -342,7 +342,7 @@ describe('Production Usage', () => {\n \n   // This test checks webpack chunks in particular\n   ;(process.env.IS_TURBOPACK_TEST ? it.skip : it)(\n-    'should not contain amp, rsc APIs in main chunk',\n+    'should not contain rsc APIs in main chunk',\n     async () => {\n       const globResult = await glob('main-*.js', {\n         cwd: join(next.testDir, '.next/static/chunks'),\n@@ -357,8 +357,6 @@ describe('Production Usage', () => {\n         'utf8'\n       )\n \n-      // eslint-disable-next-line jest/no-standalone-expect\n-      expect(content).not.toContain('useAmp')\n       // eslint-disable-next-line jest/no-standalone-expect\n       expect(content).not.toContain('useRefreshRoot')\n     }\n@@ -1118,12 +1116,6 @@ describe('Production Usage', () => {\n     }\n   })\n \n-  it('should handle AMP correctly in IE', async () => {\n-    const browser = await webdriver(next.appPort, '/some-amp')\n-    const text = await browser.elementByCss('p').text()\n-    expect(text).toBe('Not AMP')\n-  })\n-\n   it('should warn when prefetch is true', async () => {\n     if (global.browserName !== 'chrome') return\n     let browser"
        },
        {
            "sha": "66a930e4bdb7aa29ab77ded4d4dfa3dcf79320cd",
            "filename": "test/production/standalone-mode/required-server-files/required-server-files-i18n.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fproduction%2Fstandalone-mode%2Frequired-server-files%2Frequired-server-files-i18n.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fproduction%2Fstandalone-mode%2Frequired-server-files%2Frequired-server-files-i18n.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Frequired-server-files%2Frequired-server-files-i18n.test.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -164,7 +164,7 @@ describe('required server files i18n', () => {\n     expect(Array.isArray(requiredFilesManifest.files)).toBe(true)\n     expect(Array.isArray(requiredFilesManifest.ignore)).toBe(true)\n     expect(requiredFilesManifest.files.length).toBeGreaterThan(0)\n-    expect(requiredFilesManifest.ignore.length).toBeGreaterThan(0)\n+    expect(requiredFilesManifest.ignore.length).toBe(0)\n     expect(typeof requiredFilesManifest.config.configFile).toBe('undefined')\n     expect(typeof requiredFilesManifest.config.trailingSlash).toBe('boolean')\n     expect(typeof requiredFilesManifest.appDir).toBe('string')"
        },
        {
            "sha": "be2542049c4584e35c13d41d1a26344d49b3c6f5",
            "filename": "test/production/standalone-mode/required-server-files/required-server-files.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fproduction%2Fstandalone-mode%2Frequired-server-files%2Frequired-server-files.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fproduction%2Fstandalone-mode%2Frequired-server-files%2Frequired-server-files.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fstandalone-mode%2Frequired-server-files%2Frequired-server-files.test.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -412,7 +412,7 @@ describe('required server files', () => {\n     expect(Array.isArray(requiredFilesManifest.files)).toBe(true)\n     expect(Array.isArray(requiredFilesManifest.ignore)).toBe(true)\n     expect(requiredFilesManifest.files.length).toBeGreaterThan(0)\n-    expect(requiredFilesManifest.ignore.length).toBeGreaterThan(0)\n+    expect(requiredFilesManifest.ignore.length).toBe(0)\n     expect(typeof requiredFilesManifest.config.configFile).toBe('undefined')\n     expect(typeof requiredFilesManifest.config.trailingSlash).toBe('boolean')\n     expect(typeof requiredFilesManifest.appDir).toBe('string')"
        },
        {
            "sha": "d3c796aaef2dd300a64c4a98defc6b743d5e71b9",
            "filename": "test/production/typescript-basic/typechecking/index.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fproduction%2Ftypescript-basic%2Ftypechecking%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fproduction%2Ftypescript-basic%2Ftypechecking%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Ftypescript-basic%2Ftypechecking%2Findex.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -1,4 +1,3 @@\n-import 'next/amp'\n import 'next/app'\n // FIXME\n // import 'next/babel';"
        },
        {
            "sha": "6a100e2659626bfdc037bb25969decb9ff8efbad",
            "filename": "test/rspack-build-tests-manifest.json",
            "status": "modified",
            "additions": 2,
            "deletions": 145,
            "changes": 147,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Frspack-build-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Frspack-build-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Frspack-build-tests-manifest.json?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -7550,7 +7550,7 @@\n       \"Async modules works with getStaticProps\"\n     ],\n     \"failed\": [],\n-    \"pending\": [\"Async modules can render async AMP pages\"],\n+    \"pending\": [],\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n@@ -7590,7 +7590,6 @@\n       \"basePath should prefetch pages correctly when manually called\",\n       \"basePath should redirect trailing slash correctly\",\n       \"basePath should redirect trailing slash on root correctly\",\n-      \"basePath should respect basePath in amphtml link rel\",\n       \"basePath should serve public file with basePath correctly\",\n       \"basePath should show 404 for page not under the /docs prefix\",\n       \"basePath should show the hello page under the /docs prefix\",\n@@ -10022,8 +10021,6 @@\n     \"passed\": [\n       \"styled-jsx should contain styled-jsx styles during SSR\",\n       \"styled-jsx should render styles during CSR\",\n-      \"styled-jsx should render styles during CSR (AMP)\",\n-      \"styled-jsx should render styles during SSR (AMP)\",\n       \"styled-jsx should render styles inside TypeScript\"\n     ],\n     \"failed\": [],\n@@ -10586,120 +10583,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/amp-export-validation/test/index.test.js\": {\n-    \"passed\": [\n-      \"AMP Validation on Export production mode should have shown errors during build\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [\n-      \"AMP Validation on Export production mode shows AMP warning without throwing error\",\n-      \"AMP Validation on Export production mode shows warning and error when throwing error\",\n-      \"AMP Validation on Export production mode throws error on AMP error\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml-custom-optimizer/test/index.test.js\": {\n-    \"passed\": [\n-      \"AMP Custom Optimizer production mode should build and start for dynamic page\",\n-      \"AMP Custom Optimizer production mode should build and start for static page\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml-custom-validator/test/index.test.js\": {\n-    \"passed\": [\n-      \"AMP Custom Validator production mode should build and start successfully\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [\n-      \"AMP Custom Validator development mode should run in development mode successfully\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml-fragment-style/test/index.test.js\": {\n-    \"passed\": [\n-      \"AMP Fragment Styles production mode adds styles from fragment in AMP mode correctly\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml-ssg/test/index.test.js\": {\n-    \"passed\": [\n-      \"AMP SSG Support development mode should load a hybrid amp page with query correctly\",\n-      \"AMP SSG Support development mode should load a hybrid amp page without query correctly\",\n-      \"AMP SSG Support development mode should load an amp first page correctly\",\n-      \"AMP SSG Support development mode should load dynamic hybrid SSG/AMP page\",\n-      \"AMP SSG Support development mode should load dynamic hybrid SSG/AMP page with query\",\n-      \"AMP SSG Support development mode should load dynamic hybrid SSG/AMP page with trailing slash\",\n-      \"AMP SSG Support export mode production mode should have copied SSG files correctly\",\n-      \"AMP SSG Support production mode should load a hybrid amp page with query correctly\",\n-      \"AMP SSG Support production mode should load a hybrid amp page without query correctly\",\n-      \"AMP SSG Support production mode should load an amp first page correctly\",\n-      \"AMP SSG Support production mode should load dynamic hybrid SSG/AMP page\",\n-      \"AMP SSG Support production mode should load dynamic hybrid SSG/AMP page with query\",\n-      \"AMP SSG Support production mode should load dynamic hybrid SSG/AMP page with trailing slash\",\n-      \"AMP SSG Support production mode should output prerendered files correctly during build\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml/test/index.test.js\": {\n-    \"passed\": [\n-      \"AMP Usage AMP dev no-warn should not warn on valid amp\",\n-      \"AMP Usage AMP development mode should add data-ampdevmode to development script tags\",\n-      \"AMP Usage AMP development mode should detect amp validator warning on custom scripts\",\n-      \"AMP Usage AMP development mode should detect amp validator warning on invalid amp\",\n-      \"AMP Usage AMP development mode should navigate from non-AMP to AMP without error\",\n-      \"AMP Usage AMP development mode should not contain missing files warning\",\n-      \"AMP Usage production mode With AMP context should render nested AMP page with AMP hook\",\n-      \"AMP Usage production mode With AMP context should render nested normal page with AMP hook\",\n-      \"AMP Usage production mode With AMP context should render the AMP page that uses the AMP hook\",\n-      \"AMP Usage production mode With AMP context should render the normal page that uses the AMP hook\",\n-      \"AMP Usage production mode With basic AMP usage should auto import extensions\",\n-      \"AMP Usage production mode With basic AMP usage should drop custom scripts\",\n-      \"AMP Usage production mode With basic AMP usage should not drop custom amp scripts\",\n-      \"AMP Usage production mode With basic AMP usage should optimize clean\",\n-      \"AMP Usage production mode With basic AMP usage should render the page as valid AMP\",\n-      \"AMP Usage production mode With basic AMP usage should render the page without leaving render target\",\n-      \"AMP Usage production mode With basic usage should render the page\",\n-      \"AMP Usage production mode canonical amphtml should allow manually setting amphtml rel\",\n-      \"AMP Usage production mode canonical amphtml should allow manually setting canonical\",\n-      \"AMP Usage production mode canonical amphtml should not render amphtml link tag with no AMP page\",\n-      \"AMP Usage production mode canonical amphtml should remove conflicting amp tags\",\n-      \"AMP Usage production mode canonical amphtml should render a canonical regardless of amp-only status (explicit)\",\n-      \"AMP Usage production mode canonical amphtml should render amphtml from provided rel link\",\n-      \"AMP Usage production mode canonical amphtml should render link rel amphtml\",\n-      \"AMP Usage production mode canonical amphtml should render link rel amphtml with existing query\",\n-      \"AMP Usage production mode canonical amphtml should render the AMP page that uses the AMP hook\",\n-      \"AMP Usage production mode combined styles should combine style tags\",\n-      \"AMP Usage production mode combined styles should remove sourceMaps from styles\",\n-      \"AMP Usage production mode should have amp optimizer in trace\",\n-      \"AMP Usage production mode should not contain missing files warning\",\n-      \"AMP Usage production mode should not have deprecation warning\"\n-    ],\n-    \"failed\": [\n-      \"AMP Usage production mode With basic AMP usage should not output client pages for AMP only\",\n-      \"AMP Usage production mode With basic AMP usage should not output client pages for AMP only with config exported after declaration\"\n-    ],\n-    \"pending\": [\n-      \"AMP Usage AMP development mode should detect changes and refresh a hybrid AMP page\",\n-      \"AMP Usage AMP development mode should detect changes and refresh an AMP page\",\n-      \"AMP Usage AMP development mode should detect changes and refresh an AMP page at root pages/\",\n-      \"AMP Usage AMP development mode should detect changes to component and refresh an AMP page\",\n-      \"AMP Usage AMP development mode should detect the changes and display it\",\n-      \"AMP Usage AMP development mode should not reload unless the page is edited for an AMP page\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/integration/api-body-parser/test/index.test.js\": {\n     \"passed\": [\n       \"should not throw if request body is already parsed in custom middleware\",\n@@ -11164,9 +11047,7 @@\n       \"Build Output production mode Custom Static Error Output should not specify /404 as lambda when static\",\n       \"Build Output production mode With Parallel Routes should not have duplicate paths that resolve to the same route\"\n     ],\n-    \"failed\": [\n-      \"Build Output production mode With AMP Output should not include custom error\"\n-    ],\n+    \"failed\": [],\n     \"pending\": [\n       \"Build Output production mode Basic Application Output (experimental: {\\\"gzipSize\\\":false}) should not deviate from snapshot\",\n       \"Build Output production mode Basic Application Output (experimental: {}) should not deviate from snapshot\"\n@@ -13346,20 +13227,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/export-default-map/test/index.test.js\": {\n-    \"passed\": [\n-      \"Export with default map production mode should export an amp only page to clean path\",\n-      \"Export with default map production mode should export hybrid amp page correctly\",\n-      \"Export with default map production mode should export hybrid index amp page correctly\",\n-      \"Export with default map production mode should export nested hybrid amp page correctly\",\n-      \"Export with default map production mode should export nested hybrid amp page correctly with folder\",\n-      \"Export with default map production mode should export with folder that has dot in name\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/integration/export-dynamic-pages/test/index.test.js\": {\n     \"passed\": [\n       \"Export Dynamic Pages production mode should hydrate with correct asPath\",\n@@ -15211,7 +15078,6 @@\n       \"i18n Support basePath production mode should apply redirects correctly\",\n       \"i18n Support basePath production mode should apply rewrites correctly\",\n       \"i18n Support basePath production mode should apply trailingSlash redirect correctly\",\n-      \"i18n Support basePath production mode should generate AMP pages with all locales\",\n       \"i18n Support basePath production mode should generate auto-export page with all locales\",\n       \"i18n Support basePath production mode should generate fallbacks with all locales\",\n       \"i18n Support basePath production mode should generate non-dynamic GSP page with all locales\",\n@@ -15290,7 +15156,6 @@\n       \"i18n Support basePath production mode should use default locale when no locale is in href with locale false\",\n       \"i18n Support basePath production mode should visit API route directly correctly\",\n       \"i18n Support basePath production mode should visit dynamic API route directly correctly\",\n-      \"i18n Support basePath production mode should work with AMP first page with all locales\",\n       \"i18n Support basePath with localeDetection disabled production mode should have localeDetection in routes-manifest\",\n       \"i18n Support basePath with localeDetection disabled production mode should not detect locale from accept-language\",\n       \"i18n Support basePath with localeDetection disabled production mode should set locale from detected path\"\n@@ -15305,7 +15170,6 @@\n       \"i18n Support basePath development mode should apply redirects correctly\",\n       \"i18n Support basePath development mode should apply rewrites correctly\",\n       \"i18n Support basePath development mode should apply trailingSlash redirect correctly\",\n-      \"i18n Support basePath development mode should generate AMP pages with all locales\",\n       \"i18n Support basePath development mode should generate auto-export page with all locales\",\n       \"i18n Support basePath development mode should generate fallbacks with all locales\",\n       \"i18n Support basePath development mode should generate non-dynamic GSP page with all locales\",\n@@ -15382,7 +15246,6 @@\n       \"i18n Support basePath development mode should use default locale when no locale is in href with locale false\",\n       \"i18n Support basePath development mode should visit API route directly correctly\",\n       \"i18n Support basePath development mode should visit dynamic API route directly correctly\",\n-      \"i18n Support basePath development mode should work with AMP first page with all locales\",\n       \"i18n Support basePath production mode should redirect to locale domain correctly client-side\",\n       \"i18n Support basePath production mode should render the correct href for locale domain\"\n     ],\n@@ -15490,7 +15353,6 @@\n       \"i18n Support production mode should apply redirects correctly\",\n       \"i18n Support production mode should apply rewrites correctly\",\n       \"i18n Support production mode should apply trailingSlash redirect correctly\",\n-      \"i18n Support production mode should generate AMP pages with all locales\",\n       \"i18n Support production mode should generate auto-export page with all locales\",\n       \"i18n Support production mode should generate fallbacks with all locales\",\n       \"i18n Support production mode should generate non-dynamic GSP page with all locales\",\n@@ -15572,7 +15434,6 @@\n       \"i18n Support production mode should use default locale when no locale is in href with locale false\",\n       \"i18n Support production mode should visit API route directly correctly\",\n       \"i18n Support production mode should visit dynamic API route directly correctly\",\n-      \"i18n Support production mode should work with AMP first page with all locales\",\n       \"i18n Support with localeDetection disabled production mode should have localeDetection in routes-manifest\",\n       \"i18n Support with localeDetection disabled production mode should ignore the invalid accept-language header\",\n       \"i18n Support with localeDetection disabled production mode should not detect locale from accept-language\",\n@@ -15595,7 +15456,6 @@\n       \"i18n Support development mode should apply redirects correctly\",\n       \"i18n Support development mode should apply rewrites correctly\",\n       \"i18n Support development mode should apply trailingSlash redirect correctly\",\n-      \"i18n Support development mode should generate AMP pages with all locales\",\n       \"i18n Support development mode should generate auto-export page with all locales\",\n       \"i18n Support development mode should generate fallbacks with all locales\",\n       \"i18n Support development mode should generate non-dynamic GSP page with all locales\",\n@@ -15671,7 +15531,6 @@\n       \"i18n Support development mode should use default locale when no locale is in href with locale false\",\n       \"i18n Support development mode should visit API route directly correctly\",\n       \"i18n Support development mode should visit dynamic API route directly correctly\",\n-      \"i18n Support development mode should work with AMP first page with all locales\",\n       \"i18n Support production mode should redirect to locale domain correctly client-side\",\n       \"i18n Support production mode should render the correct href for locale domain\",\n       \"i18n Support with trailingSlash: false development mode should redirect correctly\",\n@@ -21079,7 +20938,6 @@\n       \"Production Usage should clear all core performance marks\",\n       \"Production Usage should contain generated page count in output\",\n       \"Production Usage should contain the Next.js version in window export\",\n-      \"Production Usage should handle AMP correctly in IE\",\n       \"Production Usage should handle failed param decoding\",\n       \"Production Usage should handle query/hash correctly during query updating ## $search\",\n       \"Production Usage should handle query/hash correctly during query updating ##? $search\",\n@@ -21097,7 +20955,6 @@\n       \"Production Usage should navigate to external site and back (with query)\",\n       \"Production Usage should navigate to page with CSS and back\",\n       \"Production Usage should not clear custom performance marks\",\n-      \"Production Usage should not contain amp, rsc APIs in main chunk\",\n       \"Production Usage should not contain currentScript usage for publicPath\",\n       \"Production Usage should not emit stats\",\n       \"Production Usage should not expose the compiled page file in development\","
        },
        {
            "sha": "c0518a79cc1d465150eec4bbdad9199b8c65b524",
            "filename": "test/rspack-dev-tests-manifest.json",
            "status": "modified",
            "additions": 2,
            "deletions": 144,
            "changes": 146,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Frspack-dev-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Frspack-dev-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Frspack-dev-tests-manifest.json?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -9384,10 +9384,7 @@\n       \"Async modules works with getStaticProps\"\n     ],\n     \"failed\": [],\n-    \"pending\": [\n-      \"Async modules can render async AMP pages\",\n-      \"Async modules can render async error page\"\n-    ],\n+    \"pending\": [\"Async modules can render async error page\"],\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n@@ -9424,7 +9421,6 @@\n       \"basePath should not add header without basePath without disabling\",\n       \"basePath should redirect trailing slash correctly\",\n       \"basePath should redirect trailing slash on root correctly\",\n-      \"basePath should respect basePath in amphtml link rel\",\n       \"basePath should serve public file with basePath correctly\",\n       \"basePath should show 404 for page not under the /docs prefix\",\n       \"basePath should show the hello page under the /docs prefix\",\n@@ -11829,8 +11825,6 @@\n     \"passed\": [\n       \"styled-jsx should contain styled-jsx styles during SSR\",\n       \"styled-jsx should render styles during CSR\",\n-      \"styled-jsx should render styles during CSR (AMP)\",\n-      \"styled-jsx should render styles during SSR (AMP)\",\n       \"styled-jsx should render styles inside TypeScript\"\n     ],\n     \"failed\": [],\n@@ -12391,119 +12385,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/amp-export-validation/test/index.test.js\": {\n-    \"passed\": [\n-      \"AMP Validation on Export production mode should have shown errors during build\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [\n-      \"AMP Validation on Export production mode shows AMP warning without throwing error\",\n-      \"AMP Validation on Export production mode shows warning and error when throwing error\",\n-      \"AMP Validation on Export production mode throws error on AMP error\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml-custom-optimizer/test/index.test.js\": {\n-    \"passed\": [\n-      \"AMP Custom Optimizer production mode should build and start for dynamic page\",\n-      \"AMP Custom Optimizer production mode should build and start for static page\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml-custom-validator/test/index.test.js\": {\n-    \"passed\": [\n-      \"AMP Custom Validator development mode should run in development mode successfully\",\n-      \"AMP Custom Validator production mode should build and start successfully\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml-fragment-style/test/index.test.js\": {\n-    \"passed\": [\n-      \"AMP Fragment Styles production mode adds styles from fragment in AMP mode correctly\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml-ssg/test/index.test.js\": {\n-    \"passed\": [\n-      \"AMP SSG Support development mode should load a hybrid amp page with query correctly\",\n-      \"AMP SSG Support development mode should load a hybrid amp page without query correctly\",\n-      \"AMP SSG Support development mode should load an amp first page correctly\",\n-      \"AMP SSG Support development mode should load dynamic hybrid SSG/AMP page\",\n-      \"AMP SSG Support development mode should load dynamic hybrid SSG/AMP page with query\",\n-      \"AMP SSG Support development mode should load dynamic hybrid SSG/AMP page with trailing slash\",\n-      \"AMP SSG Support export mode production mode should have copied SSG files correctly\",\n-      \"AMP SSG Support production mode should load a hybrid amp page with query correctly\",\n-      \"AMP SSG Support production mode should load a hybrid amp page without query correctly\",\n-      \"AMP SSG Support production mode should load an amp first page correctly\",\n-      \"AMP SSG Support production mode should load dynamic hybrid SSG/AMP page\",\n-      \"AMP SSG Support production mode should load dynamic hybrid SSG/AMP page with query\",\n-      \"AMP SSG Support production mode should load dynamic hybrid SSG/AMP page with trailing slash\",\n-      \"AMP SSG Support production mode should output prerendered files correctly during build\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml/test/index.test.js\": {\n-    \"passed\": [\n-      \"AMP Usage AMP dev no-warn should not warn on valid amp\",\n-      \"AMP Usage AMP development mode should add data-ampdevmode to development script tags\",\n-      \"AMP Usage AMP development mode should detect amp validator warning on custom scripts\",\n-      \"AMP Usage AMP development mode should detect amp validator warning on invalid amp\",\n-      \"AMP Usage AMP development mode should navigate from non-AMP to AMP without error\",\n-      \"AMP Usage AMP development mode should not contain missing files warning\",\n-      \"AMP Usage production mode With AMP context should render nested AMP page with AMP hook\",\n-      \"AMP Usage production mode With AMP context should render nested normal page with AMP hook\",\n-      \"AMP Usage production mode With AMP context should render the AMP page that uses the AMP hook\",\n-      \"AMP Usage production mode With AMP context should render the normal page that uses the AMP hook\",\n-      \"AMP Usage production mode With basic AMP usage should auto import extensions\",\n-      \"AMP Usage production mode With basic AMP usage should drop custom scripts\",\n-      \"AMP Usage production mode With basic AMP usage should not drop custom amp scripts\",\n-      \"AMP Usage production mode With basic AMP usage should optimize clean\",\n-      \"AMP Usage production mode With basic AMP usage should render the page as valid AMP\",\n-      \"AMP Usage production mode With basic AMP usage should render the page without leaving render target\",\n-      \"AMP Usage production mode With basic usage should render the page\",\n-      \"AMP Usage production mode canonical amphtml should allow manually setting amphtml rel\",\n-      \"AMP Usage production mode canonical amphtml should allow manually setting canonical\",\n-      \"AMP Usage production mode canonical amphtml should not render amphtml link tag with no AMP page\",\n-      \"AMP Usage production mode canonical amphtml should remove conflicting amp tags\",\n-      \"AMP Usage production mode canonical amphtml should render a canonical regardless of amp-only status (explicit)\",\n-      \"AMP Usage production mode canonical amphtml should render amphtml from provided rel link\",\n-      \"AMP Usage production mode canonical amphtml should render link rel amphtml\",\n-      \"AMP Usage production mode canonical amphtml should render link rel amphtml with existing query\",\n-      \"AMP Usage production mode canonical amphtml should render the AMP page that uses the AMP hook\",\n-      \"AMP Usage production mode combined styles should combine style tags\",\n-      \"AMP Usage production mode combined styles should remove sourceMaps from styles\",\n-      \"AMP Usage production mode should have amp optimizer in trace\",\n-      \"AMP Usage production mode should not contain missing files warning\",\n-      \"AMP Usage production mode should not have deprecation warning\"\n-    ],\n-    \"failed\": [\n-      \"AMP Usage production mode With basic AMP usage should not output client pages for AMP only\",\n-      \"AMP Usage production mode With basic AMP usage should not output client pages for AMP only with config exported after declaration\"\n-    ],\n-    \"pending\": [\n-      \"AMP Usage AMP development mode should detect changes and refresh a hybrid AMP page\",\n-      \"AMP Usage AMP development mode should detect changes and refresh an AMP page\",\n-      \"AMP Usage AMP development mode should detect changes and refresh an AMP page at root pages/\",\n-      \"AMP Usage AMP development mode should detect changes to component and refresh an AMP page\",\n-      \"AMP Usage AMP development mode should detect the changes and display it\",\n-      \"AMP Usage AMP development mode should not reload unless the page is edited for an AMP page\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/integration/api-body-parser/test/index.test.js\": {\n     \"passed\": [\n       \"should not throw if request body is already parsed in custom middleware\",\n@@ -12971,7 +12852,6 @@\n       \"Build Output production mode Custom App Output should not include custom error\",\n       \"Build Output production mode Custom Error Output should not include custom app\",\n       \"Build Output production mode Custom Static Error Output should not specify /404 as lambda when static\",\n-      \"Build Output production mode With AMP Output should not include custom error\",\n       \"Build Output production mode With Parallel Routes should not have duplicate paths that resolve to the same route\"\n     ],\n     \"flakey\": [],\n@@ -15153,20 +15033,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/export-default-map/test/index.test.js\": {\n-    \"passed\": [],\n-    \"failed\": [],\n-    \"pending\": [\n-      \"Export with default map production mode should export an amp only page to clean path\",\n-      \"Export with default map production mode should export hybrid amp page correctly\",\n-      \"Export with default map production mode should export hybrid index amp page correctly\",\n-      \"Export with default map production mode should export nested hybrid amp page correctly\",\n-      \"Export with default map production mode should export nested hybrid amp page correctly with folder\",\n-      \"Export with default map production mode should export with folder that has dot in name\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/integration/export-dynamic-pages/test/index.test.js\": {\n     \"passed\": [],\n     \"failed\": [],\n@@ -17016,7 +16882,6 @@\n       \"i18n Support basePath development mode should apply redirects correctly\",\n       \"i18n Support basePath development mode should apply rewrites correctly\",\n       \"i18n Support basePath development mode should apply trailingSlash redirect correctly\",\n-      \"i18n Support basePath development mode should generate AMP pages with all locales\",\n       \"i18n Support basePath development mode should generate auto-export page with all locales\",\n       \"i18n Support basePath development mode should generate fallbacks with all locales\",\n       \"i18n Support basePath development mode should generate non-dynamic GSP page with all locales\",\n@@ -17090,8 +16955,7 @@\n       \"i18n Support basePath development mode should use default locale for / without accept-language\",\n       \"i18n Support basePath development mode should use default locale when no locale is in href with locale false\",\n       \"i18n Support basePath development mode should visit API route directly correctly\",\n-      \"i18n Support basePath development mode should visit dynamic API route directly correctly\",\n-      \"i18n Support basePath development mode should work with AMP first page with all locales\"\n+      \"i18n Support basePath development mode should visit dynamic API route directly correctly\"\n     ],\n     \"failed\": [],\n     \"pending\": [\n@@ -17106,7 +16970,6 @@\n       \"i18n Support basePath production mode should apply redirects correctly\",\n       \"i18n Support basePath production mode should apply rewrites correctly\",\n       \"i18n Support basePath production mode should apply trailingSlash redirect correctly\",\n-      \"i18n Support basePath production mode should generate AMP pages with all locales\",\n       \"i18n Support basePath production mode should generate auto-export page with all locales\",\n       \"i18n Support basePath production mode should generate fallbacks with all locales\",\n       \"i18n Support basePath production mode should generate non-dynamic GSP page with all locales\",\n@@ -17187,7 +17050,6 @@\n       \"i18n Support basePath production mode should use default locale when no locale is in href with locale false\",\n       \"i18n Support basePath production mode should visit API route directly correctly\",\n       \"i18n Support basePath production mode should visit dynamic API route directly correctly\",\n-      \"i18n Support basePath production mode should work with AMP first page with all locales\",\n       \"i18n Support basePath with localeDetection disabled production mode should have localeDetection in routes-manifest\",\n       \"i18n Support basePath with localeDetection disabled production mode should not detect locale from accept-language\",\n       \"i18n Support basePath with localeDetection disabled production mode should set locale from detected path\"\n@@ -17295,7 +17157,6 @@\n       \"i18n Support development mode should apply redirects correctly\",\n       \"i18n Support development mode should apply rewrites correctly\",\n       \"i18n Support development mode should apply trailingSlash redirect correctly\",\n-      \"i18n Support development mode should generate AMP pages with all locales\",\n       \"i18n Support development mode should generate auto-export page with all locales\",\n       \"i18n Support development mode should generate fallbacks with all locales\",\n       \"i18n Support development mode should generate non-dynamic GSP page with all locales\",\n@@ -17369,7 +17230,6 @@\n       \"i18n Support development mode should use default locale when no locale is in href with locale false\",\n       \"i18n Support development mode should visit API route directly correctly\",\n       \"i18n Support development mode should visit dynamic API route directly correctly\",\n-      \"i18n Support development mode should work with AMP first page with all locales\",\n       \"i18n Support with trailingSlash: false development mode should redirect correctly\",\n       \"i18n Support with trailingSlash: true development mode should navigate between pages correctly\",\n       \"i18n Support with trailingSlash: true development mode should redirect correctly\",\n@@ -17389,7 +17249,6 @@\n       \"i18n Support production mode should apply redirects correctly\",\n       \"i18n Support production mode should apply rewrites correctly\",\n       \"i18n Support production mode should apply trailingSlash redirect correctly\",\n-      \"i18n Support production mode should generate AMP pages with all locales\",\n       \"i18n Support production mode should generate auto-export page with all locales\",\n       \"i18n Support production mode should generate fallbacks with all locales\",\n       \"i18n Support production mode should generate non-dynamic GSP page with all locales\",\n@@ -17473,7 +17332,6 @@\n       \"i18n Support production mode should use default locale when no locale is in href with locale false\",\n       \"i18n Support production mode should visit API route directly correctly\",\n       \"i18n Support production mode should visit dynamic API route directly correctly\",\n-      \"i18n Support production mode should work with AMP first page with all locales\",\n       \"i18n Support with localeDetection disabled production mode should have localeDetection in routes-manifest\",\n       \"i18n Support with localeDetection disabled production mode should ignore the invalid accept-language header\",\n       \"i18n Support with localeDetection disabled production mode should not detect locale from accept-language\","
        },
        {
            "sha": "ad0719427ff2381610972472ad66013f0526dd9b",
            "filename": "test/turbopack-build-tests-manifest.json",
            "status": "modified",
            "additions": 3,
            "deletions": 141,
            "changes": 144,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fturbopack-build-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fturbopack-build-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fturbopack-build-tests-manifest.json?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -6326,7 +6326,7 @@\n       \"Async modules works with getStaticProps\"\n     ],\n     \"failed\": [],\n-    \"pending\": [\"Async modules can render async AMP pages\"],\n+    \"pending\": [],\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n@@ -6359,7 +6359,6 @@\n       \"basePath should prefetch pages correctly when manually called\",\n       \"basePath should redirect trailing slash correctly\",\n       \"basePath should redirect trailing slash on root correctly\",\n-      \"basePath should respect basePath in amphtml link rel\",\n       \"basePath should serve public file with basePath correctly\",\n       \"basePath should show 404 for page not under the /docs prefix\",\n       \"basePath should show the hello page under the /docs prefix\",\n@@ -8650,9 +8649,7 @@\n   \"test/e2e/styled-jsx/index.test.ts\": {\n     \"passed\": [\n       \"styled-jsx should contain styled-jsx styles during SSR\",\n-      \"styled-jsx should render styles during CSR\",\n-      \"styled-jsx should render styles during CSR (AMP)\",\n-      \"styled-jsx should render styles during SSR (AMP)\"\n+      \"styled-jsx should render styles during CSR\"\n     ],\n     \"failed\": [],\n     \"pending\": [],\n@@ -9182,116 +9179,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/amp-export-validation/test/index.test.js\": {\n-    \"passed\": [],\n-    \"failed\": [],\n-    \"pending\": [\n-      \"AMP Validation on Export production mode should have shown errors during build\",\n-      \"AMP Validation on Export production mode shows AMP warning without throwing error\",\n-      \"AMP Validation on Export production mode shows warning and error when throwing error\",\n-      \"AMP Validation on Export production mode throws error on AMP error\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml-custom-optimizer/test/index.test.js\": {\n-    \"passed\": [],\n-    \"failed\": [],\n-    \"pending\": [\n-      \"AMP Custom Optimizer production mode should build and start for dynamic page\",\n-      \"AMP Custom Optimizer production mode should build and start for static page\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml-custom-validator/test/index.test.js\": {\n-    \"passed\": [],\n-    \"failed\": [],\n-    \"pending\": [\n-      \"AMP Custom Validator development mode should run in development mode successfully\",\n-      \"AMP Custom Validator production mode should build and start successfully\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml-fragment-style/test/index.test.js\": {\n-    \"passed\": [],\n-    \"failed\": [],\n-    \"pending\": [\n-      \"AMP Fragment Styles production mode adds styles from fragment in AMP mode correctly\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml-ssg/test/index.test.js\": {\n-    \"passed\": [],\n-    \"failed\": [],\n-    \"pending\": [\n-      \"AMP SSG Support development mode should load a hybrid amp page with query correctly\",\n-      \"AMP SSG Support development mode should load a hybrid amp page without query correctly\",\n-      \"AMP SSG Support development mode should load an amp first page correctly\",\n-      \"AMP SSG Support development mode should load dynamic hybrid SSG/AMP page\",\n-      \"AMP SSG Support development mode should load dynamic hybrid SSG/AMP page with query\",\n-      \"AMP SSG Support development mode should load dynamic hybrid SSG/AMP page with trailing slash\",\n-      \"AMP SSG Support export mode production mode should have copied SSG files correctly\",\n-      \"AMP SSG Support production mode should load a hybrid amp page with query correctly\",\n-      \"AMP SSG Support production mode should load a hybrid amp page without query correctly\",\n-      \"AMP SSG Support production mode should load an amp first page correctly\",\n-      \"AMP SSG Support production mode should load dynamic hybrid SSG/AMP page\",\n-      \"AMP SSG Support production mode should load dynamic hybrid SSG/AMP page with query\",\n-      \"AMP SSG Support production mode should load dynamic hybrid SSG/AMP page with trailing slash\",\n-      \"AMP SSG Support production mode should output prerendered files correctly during build\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml/test/index.test.js\": {\n-    \"passed\": [],\n-    \"failed\": [],\n-    \"pending\": [\n-      \"AMP Usage AMP dev no-warn should not warn on valid amp\",\n-      \"AMP Usage AMP development mode should add data-ampdevmode to development script tags\",\n-      \"AMP Usage AMP development mode should detect amp validator warning on custom scripts\",\n-      \"AMP Usage AMP development mode should detect amp validator warning on invalid amp\",\n-      \"AMP Usage AMP development mode should detect changes and refresh a hybrid AMP page\",\n-      \"AMP Usage AMP development mode should detect changes and refresh an AMP page\",\n-      \"AMP Usage AMP development mode should detect changes and refresh an AMP page at root pages/\",\n-      \"AMP Usage AMP development mode should detect changes to component and refresh an AMP page\",\n-      \"AMP Usage AMP development mode should detect the changes and display it\",\n-      \"AMP Usage AMP development mode should navigate from non-AMP to AMP without error\",\n-      \"AMP Usage AMP development mode should not contain missing files warning\",\n-      \"AMP Usage AMP development mode should not reload unless the page is edited for an AMP page\",\n-      \"AMP Usage production mode With AMP context should render nested AMP page with AMP hook\",\n-      \"AMP Usage production mode With AMP context should render nested normal page with AMP hook\",\n-      \"AMP Usage production mode With AMP context should render the AMP page that uses the AMP hook\",\n-      \"AMP Usage production mode With AMP context should render the normal page that uses the AMP hook\",\n-      \"AMP Usage production mode With basic AMP usage should auto import extensions\",\n-      \"AMP Usage production mode With basic AMP usage should drop custom scripts\",\n-      \"AMP Usage production mode With basic AMP usage should not drop custom amp scripts\",\n-      \"AMP Usage production mode With basic AMP usage should not output client pages for AMP only\",\n-      \"AMP Usage production mode With basic AMP usage should not output client pages for AMP only with config exported after declaration\",\n-      \"AMP Usage production mode With basic AMP usage should optimize clean\",\n-      \"AMP Usage production mode With basic AMP usage should render the page as valid AMP\",\n-      \"AMP Usage production mode With basic AMP usage should render the page without leaving render target\",\n-      \"AMP Usage production mode With basic usage should render the page\",\n-      \"AMP Usage production mode canonical amphtml should allow manually setting amphtml rel\",\n-      \"AMP Usage production mode canonical amphtml should allow manually setting canonical\",\n-      \"AMP Usage production mode canonical amphtml should not render amphtml link tag with no AMP page\",\n-      \"AMP Usage production mode canonical amphtml should remove conflicting amp tags\",\n-      \"AMP Usage production mode canonical amphtml should render a canonical regardless of amp-only status (explicit)\",\n-      \"AMP Usage production mode canonical amphtml should render amphtml from provided rel link\",\n-      \"AMP Usage production mode canonical amphtml should render link rel amphtml\",\n-      \"AMP Usage production mode canonical amphtml should render link rel amphtml with existing query\",\n-      \"AMP Usage production mode canonical amphtml should render the AMP page that uses the AMP hook\",\n-      \"AMP Usage production mode combined styles should combine style tags\",\n-      \"AMP Usage production mode combined styles should remove sourceMaps from styles\",\n-      \"AMP Usage production mode should have amp optimizer in trace\",\n-      \"AMP Usage production mode should not contain missing files warning\",\n-      \"AMP Usage production mode should not have deprecation warning\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/integration/api-body-parser/test/index.test.js\": {\n     \"passed\": [\n       \"should not throw if request body is already parsed in custom middleware\",\n@@ -9780,8 +9667,7 @@\n     \"failed\": [],\n     \"pending\": [\n       \"Build Output production mode Basic Application Output (experimental: {\\\"gzipSize\\\":false}) should not deviate from snapshot\",\n-      \"Build Output production mode Basic Application Output (experimental: {}) should not deviate from snapshot\",\n-      \"Build Output production mode With AMP Output should not include custom error\"\n+      \"Build Output production mode Basic Application Output (experimental: {}) should not deviate from snapshot\"\n     ],\n     \"flakey\": [],\n     \"runtimeError\": false\n@@ -11924,20 +11810,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/export-default-map/test/index.test.js\": {\n-    \"passed\": [\n-      \"Export with default map production mode should export an amp only page to clean path\",\n-      \"Export with default map production mode should export hybrid amp page correctly\",\n-      \"Export with default map production mode should export hybrid index amp page correctly\",\n-      \"Export with default map production mode should export nested hybrid amp page correctly\",\n-      \"Export with default map production mode should export nested hybrid amp page correctly with folder\",\n-      \"Export with default map production mode should export with folder that has dot in name\"\n-    ],\n-    \"failed\": [],\n-    \"pending\": [],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/integration/export-dynamic-pages/test/index.test.js\": {\n     \"passed\": [\n       \"Export Dynamic Pages production mode should hydrate with correct asPath\",\n@@ -13790,7 +13662,6 @@\n       \"i18n Support basePath production mode should apply redirects correctly\",\n       \"i18n Support basePath production mode should apply rewrites correctly\",\n       \"i18n Support basePath production mode should apply trailingSlash redirect correctly\",\n-      \"i18n Support basePath production mode should generate AMP pages with all locales\",\n       \"i18n Support basePath production mode should generate auto-export page with all locales\",\n       \"i18n Support basePath production mode should generate fallbacks with all locales\",\n       \"i18n Support basePath production mode should generate non-dynamic GSP page with all locales\",\n@@ -13869,7 +13740,6 @@\n       \"i18n Support basePath production mode should use default locale when no locale is in href with locale false\",\n       \"i18n Support basePath production mode should visit API route directly correctly\",\n       \"i18n Support basePath production mode should visit dynamic API route directly correctly\",\n-      \"i18n Support basePath production mode should work with AMP first page with all locales\",\n       \"i18n Support basePath with localeDetection disabled production mode should have localeDetection in routes-manifest\",\n       \"i18n Support basePath with localeDetection disabled production mode should not detect locale from accept-language\",\n       \"i18n Support basePath with localeDetection disabled production mode should set locale from detected path\"\n@@ -13884,7 +13754,6 @@\n       \"i18n Support basePath development mode should apply redirects correctly\",\n       \"i18n Support basePath development mode should apply rewrites correctly\",\n       \"i18n Support basePath development mode should apply trailingSlash redirect correctly\",\n-      \"i18n Support basePath development mode should generate AMP pages with all locales\",\n       \"i18n Support basePath development mode should generate auto-export page with all locales\",\n       \"i18n Support basePath development mode should generate fallbacks with all locales\",\n       \"i18n Support basePath development mode should generate non-dynamic GSP page with all locales\",\n@@ -13961,7 +13830,6 @@\n       \"i18n Support basePath development mode should use default locale when no locale is in href with locale false\",\n       \"i18n Support basePath development mode should visit API route directly correctly\",\n       \"i18n Support basePath development mode should visit dynamic API route directly correctly\",\n-      \"i18n Support basePath development mode should work with AMP first page with all locales\",\n       \"i18n Support basePath production mode should redirect to locale domain correctly client-side\",\n       \"i18n Support basePath production mode should render the correct href for locale domain\"\n     ],\n@@ -14069,7 +13937,6 @@\n       \"i18n Support production mode should apply redirects correctly\",\n       \"i18n Support production mode should apply rewrites correctly\",\n       \"i18n Support production mode should apply trailingSlash redirect correctly\",\n-      \"i18n Support production mode should generate AMP pages with all locales\",\n       \"i18n Support production mode should generate auto-export page with all locales\",\n       \"i18n Support production mode should generate fallbacks with all locales\",\n       \"i18n Support production mode should generate non-dynamic GSP page with all locales\",\n@@ -14151,7 +14018,6 @@\n       \"i18n Support production mode should use default locale when no locale is in href with locale false\",\n       \"i18n Support production mode should visit API route directly correctly\",\n       \"i18n Support production mode should visit dynamic API route directly correctly\",\n-      \"i18n Support production mode should work with AMP first page with all locales\",\n       \"i18n Support with localeDetection disabled production mode should have localeDetection in routes-manifest\",\n       \"i18n Support with localeDetection disabled production mode should ignore the invalid accept-language header\",\n       \"i18n Support with localeDetection disabled production mode should not detect locale from accept-language\",\n@@ -14174,7 +14040,6 @@\n       \"i18n Support development mode should apply redirects correctly\",\n       \"i18n Support development mode should apply rewrites correctly\",\n       \"i18n Support development mode should apply trailingSlash redirect correctly\",\n-      \"i18n Support development mode should generate AMP pages with all locales\",\n       \"i18n Support development mode should generate auto-export page with all locales\",\n       \"i18n Support development mode should generate fallbacks with all locales\",\n       \"i18n Support development mode should generate non-dynamic GSP page with all locales\",\n@@ -14250,7 +14115,6 @@\n       \"i18n Support development mode should use default locale when no locale is in href with locale false\",\n       \"i18n Support development mode should visit API route directly correctly\",\n       \"i18n Support development mode should visit dynamic API route directly correctly\",\n-      \"i18n Support development mode should work with AMP first page with all locales\",\n       \"i18n Support production mode should redirect to locale domain correctly client-side\",\n       \"i18n Support production mode should render the correct href for locale domain\",\n       \"i18n Support with trailingSlash: false development mode should redirect correctly\",\n@@ -19471,7 +19335,6 @@\n       \"Production Usage should clear all core performance marks\",\n       \"Production Usage should contain generated page count in output\",\n       \"Production Usage should contain the Next.js version in window export\",\n-      \"Production Usage should handle AMP correctly in IE\",\n       \"Production Usage should handle failed param decoding\",\n       \"Production Usage should handle query/hash correctly during query updating ## $search\",\n       \"Production Usage should handle query/hash correctly during query updating ##? $search\",\n@@ -19506,7 +19369,6 @@\n     \"pending\": [\n       \"Production Usage With Security Related Issues should handle invalid URL properly\",\n       \"Production Usage With basic usage should allow etag header support with getServerSideProps\",\n-      \"Production Usage should not contain amp, rsc APIs in main chunk\",\n       \"Production Usage should not contain currentScript usage for publicPath\"\n     ],\n     \"flakey\": [],"
        },
        {
            "sha": "5da92ad76a7b4f430ca5709893f3aabda11da408",
            "filename": "test/turbopack-dev-tests-manifest.json",
            "status": "modified",
            "additions": 3,
            "deletions": 143,
            "changes": 146,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fturbopack-dev-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Fturbopack-dev-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fturbopack-dev-tests-manifest.json?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -9865,7 +9865,6 @@\n       \"Document and App - Rendering via HTTP _app should show valid error when thrown in _app getInitialProps\",\n       \"Document and App - Rendering via HTTP _app shows a custom tag\",\n       \"Document and App - Rendering via HTTP _document Document.getInitialProps returns html prop representing app shell\",\n-      \"Document and App - Rendering via HTTP _document adds a timestamp to link tags with preload attribute to invalidate the cache in dev\",\n       \"Document and App - Rendering via HTTP _document adds crossOrigin to all scripts and preload links\",\n       \"Document and App - Rendering via HTTP _document adds nonces to all scripts and preload links\",\n       \"Document and App - Rendering via HTTP _document renders ctx.renderPage with enhanceApp and enhanceComponent correctly\",\n@@ -9889,10 +9888,7 @@\n       \"Async modules works with getStaticProps\"\n     ],\n     \"failed\": [],\n-    \"pending\": [\n-      \"Async modules can render async AMP pages\",\n-      \"Async modules can render async error page\"\n-    ],\n+    \"pending\": [\"Async modules can render async error page\"],\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n@@ -9922,7 +9918,6 @@\n       \"basePath should not add header without basePath without disabling\",\n       \"basePath should redirect trailing slash correctly\",\n       \"basePath should redirect trailing slash on root correctly\",\n-      \"basePath should respect basePath in amphtml link rel\",\n       \"basePath should serve public file with basePath correctly\",\n       \"basePath should show 404 for page not under the /docs prefix\",\n       \"basePath should show the hello page under the /docs prefix\",\n@@ -12181,9 +12176,7 @@\n   \"test/e2e/styled-jsx/index.test.ts\": {\n     \"passed\": [\n       \"styled-jsx should contain styled-jsx styles during SSR\",\n-      \"styled-jsx should render styles during CSR\",\n-      \"styled-jsx should render styles during CSR (AMP)\",\n-      \"styled-jsx should render styles during SSR (AMP)\"\n+      \"styled-jsx should render styles during CSR\"\n     ],\n     \"failed\": [],\n     \"pending\": [],\n@@ -12712,116 +12705,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/amp-export-validation/test/index.test.js\": {\n-    \"passed\": [],\n-    \"failed\": [],\n-    \"pending\": [\n-      \"AMP Validation on Export production mode should have shown errors during build\",\n-      \"AMP Validation on Export production mode shows AMP warning without throwing error\",\n-      \"AMP Validation on Export production mode shows warning and error when throwing error\",\n-      \"AMP Validation on Export production mode throws error on AMP error\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml-custom-optimizer/test/index.test.js\": {\n-    \"passed\": [],\n-    \"failed\": [],\n-    \"pending\": [\n-      \"AMP Custom Optimizer production mode should build and start for dynamic page\",\n-      \"AMP Custom Optimizer production mode should build and start for static page\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml-custom-validator/test/index.test.js\": {\n-    \"passed\": [],\n-    \"failed\": [],\n-    \"pending\": [\n-      \"AMP Custom Validator development mode should run in development mode successfully\",\n-      \"AMP Custom Validator production mode should build and start successfully\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml-fragment-style/test/index.test.js\": {\n-    \"passed\": [],\n-    \"failed\": [],\n-    \"pending\": [\n-      \"AMP Fragment Styles production mode adds styles from fragment in AMP mode correctly\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml-ssg/test/index.test.js\": {\n-    \"passed\": [],\n-    \"failed\": [],\n-    \"pending\": [\n-      \"AMP SSG Support development mode should load a hybrid amp page with query correctly\",\n-      \"AMP SSG Support development mode should load a hybrid amp page without query correctly\",\n-      \"AMP SSG Support development mode should load an amp first page correctly\",\n-      \"AMP SSG Support development mode should load dynamic hybrid SSG/AMP page\",\n-      \"AMP SSG Support development mode should load dynamic hybrid SSG/AMP page with query\",\n-      \"AMP SSG Support development mode should load dynamic hybrid SSG/AMP page with trailing slash\",\n-      \"AMP SSG Support export mode production mode should have copied SSG files correctly\",\n-      \"AMP SSG Support production mode should load a hybrid amp page with query correctly\",\n-      \"AMP SSG Support production mode should load a hybrid amp page without query correctly\",\n-      \"AMP SSG Support production mode should load an amp first page correctly\",\n-      \"AMP SSG Support production mode should load dynamic hybrid SSG/AMP page\",\n-      \"AMP SSG Support production mode should load dynamic hybrid SSG/AMP page with query\",\n-      \"AMP SSG Support production mode should load dynamic hybrid SSG/AMP page with trailing slash\",\n-      \"AMP SSG Support production mode should output prerendered files correctly during build\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n-  \"test/integration/amphtml/test/index.test.js\": {\n-    \"passed\": [],\n-    \"failed\": [],\n-    \"pending\": [\n-      \"AMP Usage AMP dev no-warn should not warn on valid amp\",\n-      \"AMP Usage AMP development mode should add data-ampdevmode to development script tags\",\n-      \"AMP Usage AMP development mode should detect amp validator warning on custom scripts\",\n-      \"AMP Usage AMP development mode should detect amp validator warning on invalid amp\",\n-      \"AMP Usage AMP development mode should detect changes and refresh a hybrid AMP page\",\n-      \"AMP Usage AMP development mode should detect changes and refresh an AMP page\",\n-      \"AMP Usage AMP development mode should detect changes and refresh an AMP page at root pages/\",\n-      \"AMP Usage AMP development mode should detect changes to component and refresh an AMP page\",\n-      \"AMP Usage AMP development mode should detect the changes and display it\",\n-      \"AMP Usage AMP development mode should navigate from non-AMP to AMP without error\",\n-      \"AMP Usage AMP development mode should not contain missing files warning\",\n-      \"AMP Usage AMP development mode should not reload unless the page is edited for an AMP page\",\n-      \"AMP Usage production mode With AMP context should render nested AMP page with AMP hook\",\n-      \"AMP Usage production mode With AMP context should render nested normal page with AMP hook\",\n-      \"AMP Usage production mode With AMP context should render the AMP page that uses the AMP hook\",\n-      \"AMP Usage production mode With AMP context should render the normal page that uses the AMP hook\",\n-      \"AMP Usage production mode With basic AMP usage should auto import extensions\",\n-      \"AMP Usage production mode With basic AMP usage should drop custom scripts\",\n-      \"AMP Usage production mode With basic AMP usage should not drop custom amp scripts\",\n-      \"AMP Usage production mode With basic AMP usage should not output client pages for AMP only\",\n-      \"AMP Usage production mode With basic AMP usage should not output client pages for AMP only with config exported after declaration\",\n-      \"AMP Usage production mode With basic AMP usage should optimize clean\",\n-      \"AMP Usage production mode With basic AMP usage should render the page as valid AMP\",\n-      \"AMP Usage production mode With basic AMP usage should render the page without leaving render target\",\n-      \"AMP Usage production mode With basic usage should render the page\",\n-      \"AMP Usage production mode canonical amphtml should allow manually setting amphtml rel\",\n-      \"AMP Usage production mode canonical amphtml should allow manually setting canonical\",\n-      \"AMP Usage production mode canonical amphtml should not render amphtml link tag with no AMP page\",\n-      \"AMP Usage production mode canonical amphtml should remove conflicting amp tags\",\n-      \"AMP Usage production mode canonical amphtml should render a canonical regardless of amp-only status (explicit)\",\n-      \"AMP Usage production mode canonical amphtml should render amphtml from provided rel link\",\n-      \"AMP Usage production mode canonical amphtml should render link rel amphtml\",\n-      \"AMP Usage production mode canonical amphtml should render link rel amphtml with existing query\",\n-      \"AMP Usage production mode canonical amphtml should render the AMP page that uses the AMP hook\",\n-      \"AMP Usage production mode combined styles should combine style tags\",\n-      \"AMP Usage production mode combined styles should remove sourceMaps from styles\",\n-      \"AMP Usage production mode should have amp optimizer in trace\",\n-      \"AMP Usage production mode should not contain missing files warning\",\n-      \"AMP Usage production mode should not have deprecation warning\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/integration/api-body-parser/test/index.test.js\": {\n     \"passed\": [\n       \"should not throw if request body is already parsed in custom middleware\",\n@@ -13309,7 +13192,6 @@\n       \"Build Output production mode Custom App Output should not include custom error\",\n       \"Build Output production mode Custom Error Output should not include custom app\",\n       \"Build Output production mode Custom Static Error Output should not specify /404 as lambda when static\",\n-      \"Build Output production mode With AMP Output should not include custom error\",\n       \"Build Output production mode With Parallel Routes should not have duplicate paths that resolve to the same route\"\n     ],\n     \"flakey\": [],\n@@ -15452,20 +15334,6 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/export-default-map/test/index.test.js\": {\n-    \"passed\": [],\n-    \"failed\": [],\n-    \"pending\": [\n-      \"Export with default map production mode should export an amp only page to clean path\",\n-      \"Export with default map production mode should export hybrid amp page correctly\",\n-      \"Export with default map production mode should export hybrid index amp page correctly\",\n-      \"Export with default map production mode should export nested hybrid amp page correctly\",\n-      \"Export with default map production mode should export nested hybrid amp page correctly with folder\",\n-      \"Export with default map production mode should export with folder that has dot in name\"\n-    ],\n-    \"flakey\": [],\n-    \"runtimeError\": false\n-  },\n   \"test/integration/export-dynamic-pages/test/index.test.js\": {\n     \"passed\": [],\n     \"failed\": [],\n@@ -17315,7 +17183,6 @@\n       \"i18n Support basePath development mode should apply redirects correctly\",\n       \"i18n Support basePath development mode should apply rewrites correctly\",\n       \"i18n Support basePath development mode should apply trailingSlash redirect correctly\",\n-      \"i18n Support basePath development mode should generate AMP pages with all locales\",\n       \"i18n Support basePath development mode should generate auto-export page with all locales\",\n       \"i18n Support basePath development mode should generate fallbacks with all locales\",\n       \"i18n Support basePath development mode should generate non-dynamic GSP page with all locales\",\n@@ -17389,8 +17256,7 @@\n       \"i18n Support basePath development mode should use default locale for / without accept-language\",\n       \"i18n Support basePath development mode should use default locale when no locale is in href with locale false\",\n       \"i18n Support basePath development mode should visit API route directly correctly\",\n-      \"i18n Support basePath development mode should visit dynamic API route directly correctly\",\n-      \"i18n Support basePath development mode should work with AMP first page with all locales\"\n+      \"i18n Support basePath development mode should visit dynamic API route directly correctly\"\n     ],\n     \"failed\": [],\n     \"pending\": [\n@@ -17405,7 +17271,6 @@\n       \"i18n Support basePath production mode should apply redirects correctly\",\n       \"i18n Support basePath production mode should apply rewrites correctly\",\n       \"i18n Support basePath production mode should apply trailingSlash redirect correctly\",\n-      \"i18n Support basePath production mode should generate AMP pages with all locales\",\n       \"i18n Support basePath production mode should generate auto-export page with all locales\",\n       \"i18n Support basePath production mode should generate fallbacks with all locales\",\n       \"i18n Support basePath production mode should generate non-dynamic GSP page with all locales\",\n@@ -17486,7 +17351,6 @@\n       \"i18n Support basePath production mode should use default locale when no locale is in href with locale false\",\n       \"i18n Support basePath production mode should visit API route directly correctly\",\n       \"i18n Support basePath production mode should visit dynamic API route directly correctly\",\n-      \"i18n Support basePath production mode should work with AMP first page with all locales\",\n       \"i18n Support basePath with localeDetection disabled production mode should have localeDetection in routes-manifest\",\n       \"i18n Support basePath with localeDetection disabled production mode should not detect locale from accept-language\",\n       \"i18n Support basePath with localeDetection disabled production mode should set locale from detected path\"\n@@ -17594,7 +17458,6 @@\n       \"i18n Support development mode should apply redirects correctly\",\n       \"i18n Support development mode should apply rewrites correctly\",\n       \"i18n Support development mode should apply trailingSlash redirect correctly\",\n-      \"i18n Support development mode should generate AMP pages with all locales\",\n       \"i18n Support development mode should generate auto-export page with all locales\",\n       \"i18n Support development mode should generate fallbacks with all locales\",\n       \"i18n Support development mode should generate non-dynamic GSP page with all locales\",\n@@ -17668,7 +17531,6 @@\n       \"i18n Support development mode should use default locale when no locale is in href with locale false\",\n       \"i18n Support development mode should visit API route directly correctly\",\n       \"i18n Support development mode should visit dynamic API route directly correctly\",\n-      \"i18n Support development mode should work with AMP first page with all locales\",\n       \"i18n Support with trailingSlash: false development mode should redirect correctly\",\n       \"i18n Support with trailingSlash: true development mode should navigate between pages correctly\",\n       \"i18n Support with trailingSlash: true development mode should redirect correctly\",\n@@ -17688,7 +17550,6 @@\n       \"i18n Support production mode should apply redirects correctly\",\n       \"i18n Support production mode should apply rewrites correctly\",\n       \"i18n Support production mode should apply trailingSlash redirect correctly\",\n-      \"i18n Support production mode should generate AMP pages with all locales\",\n       \"i18n Support production mode should generate auto-export page with all locales\",\n       \"i18n Support production mode should generate fallbacks with all locales\",\n       \"i18n Support production mode should generate non-dynamic GSP page with all locales\",\n@@ -17772,7 +17633,6 @@\n       \"i18n Support production mode should use default locale when no locale is in href with locale false\",\n       \"i18n Support production mode should visit API route directly correctly\",\n       \"i18n Support production mode should visit dynamic API route directly correctly\",\n-      \"i18n Support production mode should work with AMP first page with all locales\",\n       \"i18n Support with localeDetection disabled production mode should have localeDetection in routes-manifest\",\n       \"i18n Support with localeDetection disabled production mode should ignore the invalid accept-language header\",\n       \"i18n Support with localeDetection disabled production mode should not detect locale from accept-language\","
        },
        {
            "sha": "969b019adec118e3b1952b09f3d7836e9d4edd22",
            "filename": "test/unit/babel-plugin-next-page-config.test.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 31,
            "changes": 31,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Funit%2Fbabel-plugin-next-page-config.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Funit%2Fbabel-plugin-next-page-config.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Funit%2Fbabel-plugin-next-page-config.test.ts?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -28,35 +28,4 @@ describe('babel plugin (next-page-config)', () => {\n \n     expect(output).toMatch('export const config={};')\n   })\n-\n-  test('amp enabled', () => {\n-    jest.spyOn(Date, 'now').mockReturnValue(1234)\n-    const output = babel(`\n-      export const config = { amp: true }\n-\n-      function About(props) {\n-        return <h3>My AMP About Page!</h3>\n-      }\n-      \n-      export default About`)\n-\n-    expect(output).toMatch(\n-      'const __NEXT_DROP_CLIENT_FILE__=\"__NEXT_DROP_CLIENT_FILE__ 1234\";'\n-    )\n-  })\n-\n-  test('amp hybrid enabled', () => {\n-    const output = babel(`\n-      export const config = { amp: 'hybrid' }\n-\n-      function About(props) {\n-        return <h3>My AMP About Page!</h3>\n-      }\n-      \n-      export default About`)\n-\n-    expect(output).toMatch(\n-      \"export const config={amp:'hybrid'};function About(props){return<h3>My AMP About Page!</h3>;}export default About;\"\n-    )\n-  })\n })"
        },
        {
            "sha": "e2bf5159b2c9a5d027abc2d97c225c8f99c516eb",
            "filename": "test/unit/fixtures/page-runtime/edge.js",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Funit%2Ffixtures%2Fpage-runtime%2Fedge.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Funit%2Ffixtures%2Fpage-runtime%2Fedge.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Funit%2Ffixtures%2Fpage-runtime%2Fedge.js?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -4,5 +4,4 @@ export default function Edge() {\n \n export const config = {\n   runtime: 'experimental-edge',\n-  amp: false,\n }"
        },
        {
            "sha": "a11790c845288a16090ca39bf913df3ae816569f",
            "filename": "test/unit/fixtures/page-runtime/nodejs-ssr.js",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Funit%2Ffixtures%2Fpage-runtime%2Fnodejs-ssr.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Funit%2Ffixtures%2Fpage-runtime%2Fnodejs-ssr.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Funit%2Ffixtures%2Fpage-runtime%2Fnodejs-ssr.js?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -7,6 +7,5 @@ export function getServerSideProps() {\n }\n \n export const config = {\n-  amp: false,\n   runtime: 'nodejs',\n }"
        },
        {
            "sha": "b7914d5c5522a35144f3f96e4dc6488e1f30d800",
            "filename": "test/unit/fixtures/page-runtime/nodejs.js",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Funit%2Ffixtures%2Fpage-runtime%2Fnodejs.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/test%2Funit%2Ffixtures%2Fpage-runtime%2Fnodejs.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Funit%2Ffixtures%2Fpage-runtime%2Fnodejs.js?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -3,6 +3,5 @@ export default function Nodejs() {\n }\n \n export const config = {\n-  amp: false,\n   runtime: 'nodejs',\n }"
        },
        {
            "sha": "62bde372e8f3563a9ea9f857862ee25a94f612c5",
            "filename": "test/unit/next-server-utils.test.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 23,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/643eb60de0e29684538448d9105a508de1699d50/test%2Funit%2Fnext-server-utils.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/643eb60de0e29684538448d9105a508de1699d50/test%2Funit%2Fnext-server-utils.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Funit%2Fnext-server-utils.test.ts?ref=643eb60de0e29684538448d9105a508de1699d50",
            "patch": "@@ -1,23 +0,0 @@\n-/* eslint-env jest */\n-import { cleanAmpPath } from 'next/dist/server/utils'\n-\n-// convenience function so tests can be aligned neatly\n-// and easy to eyeball\n-const check = (input, expected) => expect(cleanAmpPath(input)).toBe(expected)\n-\n-describe('cleanAmpPath', () => {\n-  it('should leave url unchanged when no apm parameter is present', () =>\n-    check('/some/path?param=blah', '/some/path?param=blah'))\n-\n-  it('should handle amp as the only parameter', () =>\n-    check('/some/path?amp=1', '/some/path'))\n-\n-  it('should handle amp as the first parameter', () =>\n-    check('/some/path?amp=1&page=10', '/some/path?page=10'))\n-\n-  it('should handle amp as the middle parameter', () =>\n-    check('/some/path?page=10&amp=1&last=here', '/some/path?page=10&last=here'))\n-\n-  it('should handle amp as the last parameter', () =>\n-    check('/some/path?page=10&amp=1', '/some/path?page=10'))\n-})"
        },
        {
            "sha": "7b0efe9b48073ef0b454616640f1d62a42c6ae26",
            "filename": "tsconfig.json",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/tsconfig.json",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/tsconfig.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/tsconfig.json?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -13,7 +13,6 @@\n     \"paths\": {\n       \"development-sandbox\": [\"./test/lib/development-sandbox\"],\n       \"next-test-utils\": [\"./test/lib/next-test-utils\"],\n-      \"amp-test-utils\": [\"./test/lib/amp-test-utils\"],\n       \"next-webdriver\": [\"./test/lib/next-webdriver\"],\n       \"e2e-utils\": [\"./test/lib/e2e-utils\"],\n       \"e2e-utils/*\": [\"./test/lib/e2e-utils/*\"],"
        },
        {
            "sha": "00ea8570a7429e4ba946fc0c912bc7cb60fefc8b",
            "filename": "turbopack/crates/turbopack-ecmascript/src/transform/mod.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -191,7 +191,7 @@ impl EcmascriptInputTransform {\n                     debug_assert_eq!(TURBOPACK_REFRESH.full, \"__turbopack_context__.k\");\n                     debug_assert_eq!(TURBOPACK_MODULE.full, \"__turbopack_context__.m\");\n                     let stmt = quote!(\n-                        // AMP / No-JS mode does not inject these helpers\n+                        // No-JS mode does not inject these helpers\n                         \"if (typeof globalThis.$RefreshHelpers$ === 'object' && \\\n                          globalThis.$RefreshHelpers !== null) { \\\n                          __turbopack_context__.k.registerExports(__turbopack_context__.m, \\"
        },
        {
            "sha": "0d681fce0f9cc4b492e8f77d26dd3b9ce887d1c4",
            "filename": "turbopack/crates/turbopack-tracing/tests/node-file-trace/test/unit/webpack-wrapper-strs-namespaces-large/input.js",
            "status": "modified",
            "additions": 20,
            "deletions": 223,
            "changes": 243,
            "blob_url": "https://github.com/vercel/next.js/blob/a432e06ded535bdba2f88a0af92aecf9ec9c8769/turbopack%2Fcrates%2Fturbopack-tracing%2Ftests%2Fnode-file-trace%2Ftest%2Funit%2Fwebpack-wrapper-strs-namespaces-large%2Finput.js",
            "raw_url": "https://github.com/vercel/next.js/raw/a432e06ded535bdba2f88a0af92aecf9ec9c8769/turbopack%2Fcrates%2Fturbopack-tracing%2Ftests%2Fnode-file-trace%2Ftest%2Funit%2Fwebpack-wrapper-strs-namespaces-large%2Finput.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tracing%2Ftests%2Fnode-file-trace%2Ftest%2Funit%2Fwebpack-wrapper-strs-namespaces-large%2Finput.js?ref=a432e06ded535bdba2f88a0af92aecf9ec9c8769",
            "patch": "@@ -2883,9 +2883,7 @@ module.exports = /******/ (function (modules) {\n             '/test',\n             Object.assign(\n               {},\n-              getStaticProps\n-                ? { ...(parsedUrl.query.amp ? { amp: '1' } : {}) }\n-                : parsedUrl.query,\n+              getStaticProps ? {} : parsedUrl.query,\n               nowParams ? nowParams : params,\n               _params,\n               isFallback ? { __nextFallback: 'true' } : {}\n@@ -3034,7 +3032,7 @@ module.exports = /******/ (function (modules) {\n \n     /***/ LZ9C: /***/ function (module) {\n       module.exports = JSON.parse(\n-        '{\"polyfillFiles\":[\"static/chunks/polyfills-44e7deebf1b266dcf675.js\"],\"devFiles\":[],\"ampDevFiles\":[],\"lowPriorityFiles\":[\"static/xXPgpxsbhoEyVP2leRiec/_buildManifest.js\",\"static/xXPgpxsbhoEyVP2leRiec/_ssgManifest.js\"],\"pages\":{\"/\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/index-0350bccc3946992232ac.js\"],\"/_app\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/css/5e476a366bed88f8b9f3.css\",\"static/chunks/pages/_app-2081a31b0a6e8b7db882.js\"],\"/_error\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/pages/_error-7277dcbf0c0b576c1e3e.js\"],\"/blog\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/blog-5c7c385199e0b0959acd.js\"],\"/blog/[slug]\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/blog/[slug]-ee9cb4b02c47c8d4bef9.js\"],\"/blog/page/[page_index]\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/blog/page/[page_index]-d68d02f9d083d8bf2d1a.js\"],\"/community\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/community-38f4d61f7ca67529fe66.js\"],\"/docs\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/docs-c9d3626996e04659c268.js\"],\"/docs/[...slug]\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/docs/[...slug]-bdc94a519e1a467006bb.js\"],\"/enterprise\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/enterprise-14dc9228780e1ce74192.js\"],\"/github/authorizing\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/pages/github/authorizing-e1ff90682736baea1a04.js\"],\"/guides\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/guides-9b1cc78b2eaf806e17d3.js\"],\"/guides/[category]\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/pages/guides/[category]-d2d1a6c24b3783a6fa41.js\"],\"/guides/[category]/[guide]\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/pages/guides/[category]/[guide]-27af636987a9e3218796.js\"],\"/guides/[category]/[guide]/[step]\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/guides/[category]/[guide]/[step]-f77bd391f3f96eebe2ce.js\"],\"/packages\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/packages-2a722e6df3ec71761e18.js\"],\"/packages/[slug]\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/packages/[slug]-ce28f90819ea44484e6e.js\"],\"/rss.xml\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/pages/rss.xml-cfed46631da8a5671a30.js\"],\"/study\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/f65a48b9.0c2183cdce73b14efff6.js\",\"static/chunks/c660bb88.5b95f2f2bc14f46233f7.js\",\"static/chunks/1606726a.b8957708a490d99afa5c.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/15.c418fababbd9004121e9.js\",\"static/chunks/pages/study-19fd7fc84181629929cb.js\"],\"/test\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/pages/test-cd299461f54649fd8d4f.js\"]},\"ampFirstPages\":[]}'\n+        '{\"polyfillFiles\":[\"static/chunks/polyfills-44e7deebf1b266dcf675.js\"],\"devFiles\":[],\"lowPriorityFiles\":[\"static/xXPgpxsbhoEyVP2leRiec/_buildManifest.js\",\"static/xXPgpxsbhoEyVP2leRiec/_ssgManifest.js\"],\"pages\":{\"/\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/index-0350bccc3946992232ac.js\"],\"/_app\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/css/5e476a366bed88f8b9f3.css\",\"static/chunks/pages/_app-2081a31b0a6e8b7db882.js\"],\"/_error\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/pages/_error-7277dcbf0c0b576c1e3e.js\"],\"/blog\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/blog-5c7c385199e0b0959acd.js\"],\"/blog/[slug]\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/blog/[slug]-ee9cb4b02c47c8d4bef9.js\"],\"/blog/page/[page_index]\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/blog/page/[page_index]-d68d02f9d083d8bf2d1a.js\"],\"/community\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/community-38f4d61f7ca67529fe66.js\"],\"/docs\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/docs-c9d3626996e04659c268.js\"],\"/docs/[...slug]\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/docs/[...slug]-bdc94a519e1a467006bb.js\"],\"/enterprise\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/enterprise-14dc9228780e1ce74192.js\"],\"/github/authorizing\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/pages/github/authorizing-e1ff90682736baea1a04.js\"],\"/guides\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/guides-9b1cc78b2eaf806e17d3.js\"],\"/guides/[category]\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/pages/guides/[category]-d2d1a6c24b3783a6fa41.js\"],\"/guides/[category]/[guide]\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/pages/guides/[category]/[guide]-27af636987a9e3218796.js\"],\"/guides/[category]/[guide]/[step]\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/guides/[category]/[guide]/[step]-f77bd391f3f96eebe2ce.js\"],\"/packages\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/packages-2a722e6df3ec71761e18.js\"],\"/packages/[slug]\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/pages/packages/[slug]-ce28f90819ea44484e6e.js\"],\"/rss.xml\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/pages/rss.xml-cfed46631da8a5671a30.js\"],\"/study\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/9f96d65d.94eaa061f5101393e8b9.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/f65a48b9.0c2183cdce73b14efff6.js\",\"static/chunks/c660bb88.5b95f2f2bc14f46233f7.js\",\"static/chunks/1606726a.b8957708a490d99afa5c.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/639450e8358faed403e05bd668fc2025839c0e75.9d96b4889c26ea3f419b.js\",\"static/chunks/32e0182ed7b54628a0a44a157e49374d7c7bd4ce.103d3eb568f7b84c9a1c.js\",\"static/chunks/ac68861718235a2888c83e092b5d7c5b38ad32c3.a4a2a1a3f86651749432.js\",\"static/chunks/a86a4545d8ddf745cee364476b36481a32008394.a40c8bd2a3999dd2274f.js\",\"static/chunks/cddb7223a4c886108c505f61c2f46f1fe5225407.d24285df362f530361cb.js\",\"static/chunks/2229e39afb097a6fcb24228cd3bb782f7896cef4.0e3682cba91611b19854.js\",\"static/chunks/e407d73b61faf5a0b6b1ef72bef0f5760151a773.3253f417e0fae387167e.js\",\"static/chunks/15.c418fababbd9004121e9.js\",\"static/chunks/pages/study-19fd7fc84181629929cb.js\"],\"/test\":[\"static/chunks/main-e0150adb3182a3fe8176.js\",\"static/chunks/webpack-9b006fe6ea0a8f66dad3.js\",\"static/chunks/framework.1b5fae6dde8a26be77ac.js\",\"static/chunks/bee240a3.10c4afc3b077b2c1abd6.js\",\"static/chunks/cf9921a6eda31d205431ef5b8c0f59d3dfc7d8e1.b8c2224ffd0e70bc1f9c.js\",\"static/chunks/pages/test-cd299461f54649fd8d4f.js\"]}}'\n       )\n \n       /***/\n@@ -3320,16 +3318,9 @@ module.exports = /******/ (function (modules) {\n       Document.headTagsMiddleware = false ? undefined : () => []\n \n       function Html(props) {\n-        const { inAmpMode } = (0, _react.useContext)(\n-          _documentContext.DocumentContext\n-        )._documentProps\n-\n         return /*#__PURE__*/ _react.default.createElement(\n           'html',\n-          Object.assign({}, props, {\n-            amp: inAmpMode ? '' : undefined,\n-            'data-ampdevmode': inAmpMode && false ? '' : undefined,\n-          })\n+          Object.assign({}, props)\n         )\n       }\n \n@@ -3422,9 +3413,6 @@ module.exports = /******/ (function (modules) {\n         render() {\n           const {\n             styles,\n-            ampPath,\n-            inAmpMode,\n-            hybridAmp,\n             canonicalBase,\n             __NEXT_DATA__,\n             dangerousAsPath,\n@@ -3435,88 +3423,8 @@ module.exports = /******/ (function (modules) {\n           let { head } = this.context._documentProps\n           let children = this.props.children // show a warning if Head contains <title> (only in development)\n \n-          if (false) {\n-          }\n-\n-          let hasAmphtmlRel = false\n-          let hasCanonicalRel = false // show warning and remove conflicting amp head tags\n-\n-          head = _react.default.Children.map(head || [], (child) => {\n-            if (!child) return child\n-            const { type, props } = child\n-\n-            if (inAmpMode) {\n-              let badProp = ''\n-\n-              if (type === 'meta' && props.name === 'viewport') {\n-                badProp = 'name=\"viewport\"'\n-              } else if (type === 'link' && props.rel === 'canonical') {\n-                hasCanonicalRel = true\n-              } else if (type === 'script') {\n-                // only block if\n-                // 1. it has a src and isn't pointing to ampproject's CDN\n-                // 2. it is using dangerouslySetInnerHTML without a type or\n-                // a type of text/javascript\n-                if (\n-                  (props.src && props.src.indexOf('ampproject') < -1) ||\n-                  (props.dangerouslySetInnerHTML &&\n-                    (!props.type || props.type === 'text/javascript'))\n-                ) {\n-                  badProp = '<script'\n-                  Object.keys(props).forEach((prop) => {\n-                    badProp += ` ${prop}=\"${props[prop]}\"`\n-                  })\n-                  badProp += '/>'\n-                }\n-              }\n-\n-              if (badProp) {\n-                console.warn(\n-                  `Found conflicting amp tag \"${child.type}\" with conflicting prop ${badProp} in ${__NEXT_DATA__.page}. https://err.sh/next.js/conflicting-amp-tag`\n-                )\n-                return null\n-              }\n-            } else {\n-              // non-amp mode\n-              if (type === 'link' && props.rel === 'amphtml') {\n-                hasAmphtmlRel = true\n-              }\n-            }\n-\n-            return child\n-          }) // try to parse styles from fragment for backwards compat\n-\n           const curStyles = Array.isArray(styles) ? styles : []\n \n-          if (\n-            inAmpMode &&\n-            styles && // @ts-ignore Property 'props' does not exist on type ReactElement\n-            styles.props && // @ts-ignore Property 'props' does not exist on type ReactElement\n-            Array.isArray(styles.props.children)\n-          ) {\n-            const hasStyles = (el) => {\n-              var _el$props, _el$props$dangerously\n-\n-              return el === null || el === void 0\n-                ? void 0\n-                : (_el$props = el.props) === null || _el$props === void 0\n-                  ? void 0\n-                  : (_el$props$dangerously =\n-                        _el$props.dangerouslySetInnerHTML) === null ||\n-                      _el$props$dangerously === void 0\n-                    ? void 0\n-                    : _el$props$dangerously.__html\n-            } // @ts-ignore Property 'props' does not exist on type ReactElement\n-\n-            styles.props.children.forEach((child) => {\n-              if (Array.isArray(child)) {\n-                child.forEach((el) => hasStyles(el) && curStyles.push(el))\n-              } else if (hasStyles(child)) {\n-                curStyles.push(child)\n-              }\n-            })\n-          }\n-\n           return /*#__PURE__*/ _react.default.createElement(\n             'head',\n             this.props,\n@@ -3526,7 +3434,6 @@ module.exports = /******/ (function (modules) {\n                 null,\n                 /*#__PURE__*/ _react.default.createElement('style', {\n                   'data-next-hide-fouc': true,\n-                  'data-ampdevmode': inAmpMode ? 'true' : undefined,\n                   dangerouslySetInnerHTML: {\n                     __html: `body{display:none}`,\n                   },\n@@ -3535,7 +3442,6 @@ module.exports = /******/ (function (modules) {\n                   'noscript',\n                   {\n                     'data-next-hide-fouc': true,\n-                    'data-ampdevmode': inAmpMode ? 'true' : undefined,\n                   },\n                   /*#__PURE__*/ _react.default.createElement('style', {\n                     dangerouslySetInnerHTML: {\n@@ -3550,83 +3456,22 @@ module.exports = /******/ (function (modules) {\n               name: 'next-head-count',\n               content: _react.default.Children.count(head || []).toString(),\n             }),\n-            inAmpMode &&\n-              /*#__PURE__*/ _react.default.createElement(\n-                _react.default.Fragment,\n-                null,\n-                /*#__PURE__*/ _react.default.createElement('meta', {\n-                  name: 'viewport',\n-                  content: 'width=device-width,minimum-scale=1,initial-scale=1',\n-                }),\n-                !hasCanonicalRel &&\n-                  /*#__PURE__*/ _react.default.createElement('link', {\n-                    rel: 'canonical',\n-                    href:\n-                      canonicalBase +\n-                      (0, _utils2.cleanAmpPath)(dangerousAsPath),\n-                  }),\n-                /*#__PURE__*/ _react.default.createElement('link', {\n-                  rel: 'preload',\n-                  as: 'script',\n-                  href: 'https://cdn.ampproject.org/v0.js',\n-                }),\n-                styles &&\n-                  /*#__PURE__*/ _react.default.createElement('style', {\n-                    'amp-custom': '',\n-                    dangerouslySetInnerHTML: {\n-                      __html: curStyles\n-                        .map(\n-                          (style) => style.props.dangerouslySetInnerHTML.__html\n-                        )\n-                        .join('')\n-                        .replace(/\\/\\*# sourceMappingURL=.*\\*\\//g, '')\n-                        .replace(/\\/\\*@ sourceURL=.*?\\*\\//g, ''),\n-                    },\n-                  }),\n-                /*#__PURE__*/ _react.default.createElement('style', {\n-                  'amp-boilerplate': '',\n-                  dangerouslySetInnerHTML: {\n-                    __html: `body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}`,\n-                  },\n+            /*#__PURE__*/ _react.default.createElement(\n+              _react.default.Fragment,\n+              null,\n+              this.getCssLinks(),\n+              !disableRuntimeJS && this.getPreloadDynamicChunks(),\n+              !disableRuntimeJS && this.getPreloadMainLinks(),\n+              this.context._documentProps.isDevelopment &&\n+                /*#__PURE__*/\n+                // this element is used to mount development styles so the\n+                // ordering matches production\n+                // (by default, style-loader injects at the bottom of <head />)\n+                _react.default.createElement('noscript', {\n+                  id: '__next_css__DO_NOT_USE__',\n                 }),\n-                /*#__PURE__*/ _react.default.createElement(\n-                  'noscript',\n-                  null,\n-                  /*#__PURE__*/ _react.default.createElement('style', {\n-                    'amp-boilerplate': '',\n-                    dangerouslySetInnerHTML: {\n-                      __html: `body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}`,\n-                    },\n-                  })\n-                ),\n-                /*#__PURE__*/ _react.default.createElement('script', {\n-                  async: true,\n-                  src: 'https://cdn.ampproject.org/v0.js',\n-                })\n-              ),\n-            !inAmpMode &&\n-              /*#__PURE__*/ _react.default.createElement(\n-                _react.default.Fragment,\n-                null,\n-                !hasAmphtmlRel &&\n-                  hybridAmp &&\n-                  /*#__PURE__*/ _react.default.createElement('link', {\n-                    rel: 'amphtml',\n-                    href: canonicalBase + getAmpPath(ampPath, dangerousAsPath),\n-                  }),\n-                this.getCssLinks(),\n-                !disableRuntimeJS && this.getPreloadDynamicChunks(),\n-                !disableRuntimeJS && this.getPreloadMainLinks(),\n-                this.context._documentProps.isDevelopment &&\n-                  /*#__PURE__*/\n-                  // this element is used to mount development styles so the\n-                  // ordering matches production\n-                  // (by default, style-loader injects at the bottom of <head />)\n-                  _react.default.createElement('noscript', {\n-                    id: '__next_css__DO_NOT_USE__',\n-                  }),\n-                styles || null\n-              ),\n+              styles || null\n+            ),\n             _react.default.createElement(\n               _react.default.Fragment,\n               {},\n@@ -3644,16 +3489,10 @@ module.exports = /******/ (function (modules) {\n       }\n \n       function Main() {\n-        const { inAmpMode, html } = (0, _react.useContext)(\n+        const { html } = (0, _react.useContext)(\n           _documentContext.DocumentContext\n         )._documentProps\n \n-        if (inAmpMode)\n-          return /*#__PURE__*/ _react.default.createElement(\n-            _react.default.Fragment,\n-            null,\n-            _constants.AMP_RENDER_TARGET\n-          )\n         return /*#__PURE__*/ _react.default.createElement('div', {\n           id: '__next',\n           dangerouslySetInnerHTML: {\n@@ -3772,49 +3611,11 @@ module.exports = /******/ (function (modules) {\n         }\n \n         render() {\n-          const { assetPrefix, inAmpMode, buildManifest, unstable_runtimeJS } =\n+          const { assetPrefix, buildManifest, unstable_runtimeJS } =\n             this.context._documentProps\n           const disableRuntimeJS = unstable_runtimeJS === false\n           const { _devOnlyInvalidateCacheQueryString } = this.context\n \n-          if (inAmpMode) {\n-            if (true) {\n-              return null\n-            }\n-\n-            const ampDevFiles = [\n-              ...buildManifest.devFiles,\n-              ...buildManifest.ampDevFiles,\n-            ]\n-            return /*#__PURE__*/ _react.default.createElement(\n-              _react.default.Fragment,\n-              null,\n-              disableRuntimeJS\n-                ? null\n-                : /*#__PURE__*/ _react.default.createElement('script', {\n-                    id: '__NEXT_DATA__',\n-                    type: 'application/json',\n-                    nonce: this.props.nonce,\n-                    crossOrigin: this.props.crossOrigin || undefined,\n-                    dangerouslySetInnerHTML: {\n-                      __html: NextScript.getInlineScriptSource(\n-                        this.context._documentProps\n-                      ),\n-                    },\n-                    'data-ampdevmode': true,\n-                  }),\n-              ampDevFiles.map((file) =>\n-                /*#__PURE__*/ _react.default.createElement('script', {\n-                  key: file,\n-                  src: `${assetPrefix}/_next/${file}${_devOnlyInvalidateCacheQueryString}`,\n-                  nonce: this.props.nonce,\n-                  crossOrigin: this.props.crossOrigin || undefined,\n-                  'data-ampdevmode': true,\n-                })\n-              )\n-            )\n-          }\n-\n           if (false) {\n           }\n \n@@ -3861,10 +3662,6 @@ module.exports = /******/ (function (modules) {\n       NextScript.safariNomoduleFix =\n         '!function(){var e=document,t=e.createElement(\"script\");if(!(\"noModule\"in t)&&\"onbeforeload\"in t){var n=!1;e.addEventListener(\"beforeload\",function(e){if(e.target===t)n=!0;else if(!e.target.hasAttribute(\"nomodule\")||!n)return;e.preventDefault()},!0),t.type=\"module\",t.src=\".\",e.head.appendChild(t),t.remove()}}();'\n \n-      function getAmpPath(ampPath, asPath) {\n-        return ampPath || `${asPath}${asPath.includes('?') ? '&' : '?'}amp=1`\n-      }\n-\n       /***/\n     },\n "
        }
    ],
    "stats": {
        "total": 7987,
        "additions": 161,
        "deletions": 7826
    }
}