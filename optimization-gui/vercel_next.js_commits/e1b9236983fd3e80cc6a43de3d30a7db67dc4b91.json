{
    "author": "bgw",
    "message": "chore(turbopack): Dedupe rustls dependencies by updating reqwest (#80632)\n\nWe were pinning the `reqwest` version because of build issues: https://github.com/vercel/next.js/pull/61076 . I don't imagine that's an issue anymore, as we've been shipping the newer version of `reqwest` as part of `wasmer`.\n\nIt seems like the tls dependencies can be a little slow to build, so deduping them is nice.\n\nbuild-and-deploy job: https://github.com/vercel/next.js/actions/runs/15719542395",
    "sha": "e1b9236983fd3e80cc6a43de3d30a7db67dc4b91",
    "files": [
        {
            "sha": "1c0be99196b8ec9e994ad9d736d86ead6558fbba",
            "filename": "Cargo.lock",
            "status": "modified",
            "additions": 84,
            "deletions": 191,
            "changes": 275,
            "blob_url": "https://github.com/vercel/next.js/blob/e1b9236983fd3e80cc6a43de3d30a7db67dc4b91/Cargo.lock",
            "raw_url": "https://github.com/vercel/next.js/raw/e1b9236983fd3e80cc6a43de3d30a7db67dc4b91/Cargo.lock",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/Cargo.lock?ref=e1b9236983fd3e80cc6a43de3d30a7db67dc4b91",
            "patch": "@@ -457,7 +457,7 @@ dependencies = [\n  \"rustversion\",\n  \"serde\",\n  \"sync_wrapper\",\n- \"tower\",\n+ \"tower 0.4.13\",\n  \"tower-layer\",\n  \"tower-service\",\n ]\n@@ -2600,7 +2600,7 @@ dependencies = [\n  \"hash32\",\n  \"rustc_version\",\n  \"serde\",\n- \"spin 0.9.8\",\n+ \"spin\",\n  \"stable_deref_trait\",\n ]\n \n@@ -2751,7 +2751,7 @@ dependencies = [\n  \"httpdate\",\n  \"itoa\",\n  \"pin-project-lite\",\n- \"socket2 0.4.9\",\n+ \"socket2 0.5.10\",\n  \"tokio\",\n  \"tower-service\",\n  \"tracing\",\n@@ -2781,33 +2781,19 @@ dependencies = [\n \n [[package]]\n name = \"hyper-rustls\"\n-version = \"0.23.2\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"1788965e61b367cd03a62950836d5cd41560c3577d90e40e0819373194d1661c\"\n-dependencies = [\n- \"http 0.2.11\",\n- \"hyper 0.14.28\",\n- \"rustls 0.20.9\",\n- \"tokio\",\n- \"tokio-rustls 0.23.4\",\n-]\n-\n-[[package]]\n-name = \"hyper-rustls\"\n-version = \"0.27.5\"\n+version = \"0.27.7\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"2d191583f3da1305256f22463b9bb0471acad48a4e534a5218b9963e9c1f59b2\"\n+checksum = \"e3c93eb611681b207e1fe55d5a71ecf91572ec8a6705cdb6857f7d8d5242cf58\"\n dependencies = [\n- \"futures-util\",\n  \"http 1.1.0\",\n  \"hyper 1.6.0\",\n  \"hyper-util\",\n- \"rustls 0.23.20\",\n+ \"rustls\",\n  \"rustls-pki-types\",\n  \"tokio\",\n- \"tokio-rustls 0.26.1\",\n+ \"tokio-rustls\",\n  \"tower-service\",\n- \"webpki-roots 0.26.7\",\n+ \"webpki-roots 1.0.0\",\n ]\n \n [[package]]\n@@ -2871,14 +2857,17 @@ version = \"0.1.14\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"dc2fdfdbff08affe55bb779f33b053aa1fe5dd5b54c257343c17edfa55711bdb\"\n dependencies = [\n+ \"base64 0.22.1\",\n  \"bytes\",\n  \"futures-channel\",\n  \"futures-core\",\n  \"futures-util\",\n  \"http 1.1.0\",\n  \"http-body 1.0.1\",\n  \"hyper 1.6.0\",\n+ \"ipnet\",\n  \"libc\",\n+ \"percent-encoding\",\n  \"pin-project-lite\",\n  \"socket2 0.5.10\",\n  \"tokio\",\n@@ -3240,6 +3229,16 @@ dependencies = [\n  \"ipnet\",\n ]\n \n+[[package]]\n+name = \"iri-string\"\n+version = \"0.7.8\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"dbc5ebe9c3a1a7a5127f920a418f7585e9e758e911d0466ed004f393b0e380b2\"\n+dependencies = [\n+ \"memchr\",\n+ \"serde\",\n+]\n+\n [[package]]\n name = \"is-macro\"\n version = \"0.3.5\"\n@@ -5436,7 +5435,7 @@ dependencies = [\n  \"quinn-proto\",\n  \"quinn-udp\",\n  \"rustc-hash 2.1.1\",\n- \"rustls 0.23.20\",\n+ \"rustls\",\n  \"socket2 0.5.10\",\n  \"thiserror 2.0.12\",\n  \"tokio\",\n@@ -5454,9 +5453,9 @@ dependencies = [\n  \"getrandom 0.3.2\",\n  \"lru-slab\",\n  \"rand 0.9.0\",\n- \"ring 0.17.8\",\n+ \"ring\",\n  \"rustc-hash 2.1.1\",\n- \"rustls 0.23.20\",\n+ \"rustls\",\n  \"rustls-pki-types\",\n  \"slab\",\n  \"thiserror 2.0.12\",\n@@ -5837,7 +5836,6 @@ dependencies = [\n  \"http 0.2.11\",\n  \"http-body 0.4.5\",\n  \"hyper 0.14.28\",\n- \"hyper-rustls 0.23.2\",\n  \"hyper-tls 0.5.0\",\n  \"ipnet\",\n  \"js-sys\",\n@@ -5847,28 +5845,24 @@ dependencies = [\n  \"once_cell\",\n  \"percent-encoding\",\n  \"pin-project-lite\",\n- \"rustls 0.20.9\",\n- \"rustls-pemfile 1.0.2\",\n  \"serde\",\n  \"serde_json\",\n  \"serde_urlencoded\",\n  \"tokio\",\n  \"tokio-native-tls\",\n- \"tokio-rustls 0.23.4\",\n  \"tower-service\",\n  \"url\",\n  \"wasm-bindgen\",\n  \"wasm-bindgen-futures\",\n  \"web-sys\",\n- \"webpki-roots 0.22.6\",\n  \"winreg 0.10.1\",\n ]\n \n [[package]]\n name = \"reqwest\"\n-version = \"0.12.9\"\n+version = \"0.12.20\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"a77c62af46e79de0a562e1a9849205ffcb7fc1238876e9bd743357570e04046f\"\n+checksum = \"eabf4c97d9130e2bf606614eb937e86edac8292eaa6f422f995d7e8de1eb1813\"\n dependencies = [\n  \"base64 0.22.1\",\n  \"bytes\",\n@@ -5879,38 +5873,34 @@ dependencies = [\n  \"http-body 1.0.1\",\n  \"http-body-util\",\n  \"hyper 1.6.0\",\n- \"hyper-rustls 0.27.5\",\n+ \"hyper-rustls\",\n  \"hyper-tls 0.6.0\",\n  \"hyper-util\",\n- \"ipnet\",\n  \"js-sys\",\n  \"log\",\n- \"mime\",\n  \"native-tls\",\n- \"once_cell\",\n  \"percent-encoding\",\n  \"pin-project-lite\",\n  \"quinn\",\n- \"rustls 0.23.20\",\n- \"rustls-pemfile 2.2.0\",\n+ \"rustls\",\n  \"rustls-pki-types\",\n  \"serde\",\n  \"serde_json\",\n  \"serde_urlencoded\",\n  \"sync_wrapper\",\n  \"tokio\",\n  \"tokio-native-tls\",\n- \"tokio-rustls 0.26.1\",\n- \"tokio-socks\",\n+ \"tokio-rustls\",\n  \"tokio-util\",\n+ \"tower 0.5.2\",\n+ \"tower-http\",\n  \"tower-service\",\n  \"url\",\n  \"wasm-bindgen\",\n  \"wasm-bindgen-futures\",\n  \"wasm-streams\",\n  \"web-sys\",\n- \"webpki-roots 0.26.7\",\n- \"windows-registry\",\n+ \"webpki-roots 1.0.0\",\n ]\n \n [[package]]\n@@ -5922,21 +5912,6 @@ dependencies = [\n  \"bytemuck\",\n ]\n \n-[[package]]\n-name = \"ring\"\n-version = \"0.16.20\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"3053cf52e236a3ed746dfc745aa9cacf1b791d846bdaf412f60a8d7d6e17c8fc\"\n-dependencies = [\n- \"cc\",\n- \"libc\",\n- \"once_cell\",\n- \"spin 0.5.2\",\n- \"untrusted 0.7.1\",\n- \"web-sys\",\n- \"winapi\",\n-]\n-\n [[package]]\n name = \"ring\"\n version = \"0.17.8\"\n@@ -5947,8 +5922,8 @@ dependencies = [\n  \"cfg-if\",\n  \"getrandom 0.2.15\",\n  \"libc\",\n- \"spin 0.9.8\",\n- \"untrusted 0.9.0\",\n+ \"spin\",\n+ \"untrusted\",\n  \"windows-sys 0.52.0\",\n ]\n \n@@ -6113,18 +6088,6 @@ dependencies = [\n  \"windows-sys 0.59.0\",\n ]\n \n-[[package]]\n-name = \"rustls\"\n-version = \"0.20.9\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"1b80e3dec595989ea8510028f30c408a4630db12c9cbb8de34203b89d6577e99\"\n-dependencies = [\n- \"log\",\n- \"ring 0.16.20\",\n- \"sct\",\n- \"webpki\",\n-]\n-\n [[package]]\n name = \"rustls\"\n version = \"0.23.20\"\n@@ -6133,31 +6096,13 @@ checksum = \"5065c3f250cbd332cd894be57c40fa52387247659b14a2d6041d121547903b1b\"\n dependencies = [\n  \"log\",\n  \"once_cell\",\n- \"ring 0.17.8\",\n+ \"ring\",\n  \"rustls-pki-types\",\n  \"rustls-webpki\",\n  \"subtle\",\n  \"zeroize\",\n ]\n \n-[[package]]\n-name = \"rustls-pemfile\"\n-version = \"1.0.2\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"d194b56d58803a43635bdc398cd17e383d6f71f9182b9a192c127ca42494a59b\"\n-dependencies = [\n- \"base64 0.21.4\",\n-]\n-\n-[[package]]\n-name = \"rustls-pemfile\"\n-version = \"2.2.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"dce314e5fee3f39953d46bb63bb8a46d40c2f8fb7cc5a3b6cab2bde9721d6e50\"\n-dependencies = [\n- \"rustls-pki-types\",\n-]\n-\n [[package]]\n name = \"rustls-pki-types\"\n version = \"1.10.1\"\n@@ -6173,9 +6118,9 @@ version = \"0.102.8\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"64ca1bc8749bd4cf37b5ce386cc146580777b4e8572c7b97baf22c83f444bee9\"\n dependencies = [\n- \"ring 0.17.8\",\n+ \"ring\",\n  \"rustls-pki-types\",\n- \"untrusted 0.9.0\",\n+ \"untrusted\",\n ]\n \n [[package]]\n@@ -6286,16 +6231,6 @@ version = \"1.2.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"94143f37725109f92c262ed2cf5e59bce7498c01bcc1502d7b9afe439a4e9f49\"\n \n-[[package]]\n-name = \"sct\"\n-version = \"0.7.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"d53dcdb7c9f8158937a7981b48accfd39a43af418591a5d008c7b22b5e1b7ca4\"\n-dependencies = [\n- \"ring 0.16.20\",\n- \"untrusted 0.7.1\",\n-]\n-\n [[package]]\n name = \"seahash\"\n version = \"4.1.0\"\n@@ -6765,12 +6700,6 @@ dependencies = [\n  \"windows-sys 0.52.0\",\n ]\n \n-[[package]]\n-name = \"spin\"\n-version = \"0.5.2\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"6e63cff320ae2c57904679ba7cb63280a3dc4613885beafb148ee7bf9aa9042d\"\n-\n [[package]]\n name = \"spin\"\n version = \"0.9.8\"\n@@ -8712,36 +8641,13 @@ dependencies = [\n  \"tokio\",\n ]\n \n-[[package]]\n-name = \"tokio-rustls\"\n-version = \"0.23.4\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"c43ee83903113e03984cb9e5cebe6c04a5116269e900e3ddba8f068a62adda59\"\n-dependencies = [\n- \"rustls 0.20.9\",\n- \"tokio\",\n- \"webpki\",\n-]\n-\n [[package]]\n name = \"tokio-rustls\"\n version = \"0.26.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"5f6d0975eaace0cf0fcadee4e4aaa5da15b5c079146f2cffb67c113be122bf37\"\n dependencies = [\n- \"rustls 0.23.20\",\n- \"tokio\",\n-]\n-\n-[[package]]\n-name = \"tokio-socks\"\n-version = \"0.5.2\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"0d4770b8024672c1101b3f6733eab95b18007dbe0847a8afe341fcf79e06043f\"\n-dependencies = [\n- \"either\",\n- \"futures-util\",\n- \"thiserror 1.0.69\",\n+ \"rustls\",\n  \"tokio\",\n ]\n \n@@ -8888,7 +8794,7 @@ dependencies = [\n  \"socket2 0.5.10\",\n  \"tokio\",\n  \"tokio-stream\",\n- \"tower\",\n+ \"tower 0.4.13\",\n  \"tower-layer\",\n  \"tower-service\",\n  \"tracing\",\n@@ -8914,17 +8820,50 @@ dependencies = [\n  \"tracing\",\n ]\n \n+[[package]]\n+name = \"tower\"\n+version = \"0.5.2\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"d039ad9159c98b70ecfd540b2573b97f7f52c3e8d9f8ad57a24b916a536975f9\"\n+dependencies = [\n+ \"futures-core\",\n+ \"futures-util\",\n+ \"pin-project-lite\",\n+ \"sync_wrapper\",\n+ \"tokio\",\n+ \"tower-layer\",\n+ \"tower-service\",\n+]\n+\n+[[package]]\n+name = \"tower-http\"\n+version = \"0.6.6\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"adc82fd73de2a9722ac5da747f12383d2bfdb93591ee6c58486e0097890f05f2\"\n+dependencies = [\n+ \"bitflags 2.9.0\",\n+ \"bytes\",\n+ \"futures-util\",\n+ \"http 1.1.0\",\n+ \"http-body 1.0.1\",\n+ \"iri-string\",\n+ \"pin-project-lite\",\n+ \"tower 0.5.2\",\n+ \"tower-layer\",\n+ \"tower-service\",\n+]\n+\n [[package]]\n name = \"tower-layer\"\n-version = \"0.3.2\"\n+version = \"0.3.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"c20c8dbed6283a09604c3e69b4b7eeb54e298b8a600d4d5ecb5ad39de609f1d0\"\n+checksum = \"121c2a6cda46980bb0fcd1647ffaf6cd3fc79a013de288782836f6df9c48780e\"\n \n [[package]]\n name = \"tower-service\"\n-version = \"0.3.2\"\n+version = \"0.3.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"b6bc1c9ce2b5135ac7f93c72918fc37feb872bdc6a5533a8b85eb4b86bfdae52\"\n+checksum = \"8df9b6e13f2d32c91b9bd719c00d1958837bc7dec474d94952798cc8e69eeec3\"\n \n [[package]]\n name = \"tracing\"\n@@ -9318,7 +9257,7 @@ version = \"0.1.0\"\n dependencies = [\n  \"anyhow\",\n  \"mockito\",\n- \"reqwest 0.11.17\",\n+ \"reqwest 0.12.20\",\n  \"tokio\",\n  \"turbo-rcstr\",\n  \"turbo-tasks\",\n@@ -10204,12 +10143,6 @@ dependencies = [\n  \"autocfg\",\n ]\n \n-[[package]]\n-name = \"untrusted\"\n-version = \"0.7.1\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"a156c684c91ea7d62626509bce3cb4e1d9ed5c4d978f7b4352658f96a4c26b4a\"\n-\n [[package]]\n name = \"untrusted\"\n version = \"0.9.0\"\n@@ -10226,7 +10159,7 @@ dependencies = [\n  \"flate2\",\n  \"log\",\n  \"once_cell\",\n- \"rustls 0.23.20\",\n+ \"rustls\",\n  \"rustls-pki-types\",\n  \"url\",\n  \"webpki-roots 0.26.7\",\n@@ -10956,7 +10889,7 @@ dependencies = [\n  \"pin-project\",\n  \"pin-utils\",\n  \"rand 0.8.5\",\n- \"reqwest 0.12.9\",\n+ \"reqwest 0.12.20\",\n  \"rkyv 0.8.9\",\n  \"rusty_pool\",\n  \"semver\",\n@@ -11125,30 +11058,20 @@ dependencies = [\n  \"url\",\n ]\n \n-[[package]]\n-name = \"webpki\"\n-version = \"0.22.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"f095d78192e208183081cc07bc5515ef55216397af48b873e5edcd72637fa1bd\"\n-dependencies = [\n- \"ring 0.16.20\",\n- \"untrusted 0.7.1\",\n-]\n-\n [[package]]\n name = \"webpki-roots\"\n-version = \"0.22.6\"\n+version = \"0.26.7\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"b6c71e40d7d2c34a5106301fb632274ca37242cd0c9d3e64dbece371a40a2d87\"\n+checksum = \"5d642ff16b7e79272ae451b7322067cdc17cadf68c23264be9d94a32319efe7e\"\n dependencies = [\n- \"webpki\",\n+ \"rustls-pki-types\",\n ]\n \n [[package]]\n name = \"webpki-roots\"\n-version = \"0.26.7\"\n+version = \"1.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"5d642ff16b7e79272ae451b7322067cdc17cadf68c23264be9d94a32319efe7e\"\n+checksum = \"2853738d1cc4f2da3a225c18ec6c3721abb31961096e9dbf5ab35fa88b19cfdb\"\n dependencies = [\n  \"rustls-pki-types\",\n ]\n@@ -11217,36 +11140,6 @@ version = \"0.1.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"76840935b766e1b0a05c0066835fb9ec80071d4c09a16f6bd5f7e655e3c14c38\"\n \n-[[package]]\n-name = \"windows-registry\"\n-version = \"0.2.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"e400001bb720a623c1c69032f8e3e4cf09984deec740f007dd2b03ec864804b0\"\n-dependencies = [\n- \"windows-result\",\n- \"windows-strings\",\n- \"windows-targets 0.52.6\",\n-]\n-\n-[[package]]\n-name = \"windows-result\"\n-version = \"0.2.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"1d1043d8214f791817bab27572aaa8af63732e11bf84aa21a45a78d6c317ae0e\"\n-dependencies = [\n- \"windows-targets 0.52.6\",\n-]\n-\n-[[package]]\n-name = \"windows-strings\"\n-version = \"0.1.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"4cd9b125c486025df0eabcb585e62173c6c9eddcec5d117d3b6e8c30e2ee4d10\"\n-dependencies = [\n- \"windows-result\",\n- \"windows-targets 0.52.6\",\n-]\n-\n [[package]]\n name = \"windows-sys\"\n version = \"0.42.0\""
        },
        {
            "sha": "dbb58d99416621c980e00eff41a3f80c432c30d3",
            "filename": "Cargo.toml",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e1b9236983fd3e80cc6a43de3d30a7db67dc4b91/Cargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/e1b9236983fd3e80cc6a43de3d30a7db67dc4b91/Cargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/Cargo.toml?ref=e1b9236983fd3e80cc6a43de3d30a7db67dc4b91",
            "patch": "@@ -394,7 +394,7 @@ rand = \"0.9.0\"\n rayon = \"1.10.0\"\n regex = \"1.10.6\"\n regress = \"0.10.3\"\n-reqwest = { version = \"=0.11.17\", default-features = false }\n+reqwest = { version = \"0.12.20\", default-features = false }\n rstest = \"0.16.0\"\n rustc-hash = \"2.1.1\"\n semver = \"1.0.16\""
        }
    ],
    "stats": {
        "total": 277,
        "additions": 85,
        "deletions": 192
    }
}