{
    "author": "icyJoseph",
    "message": "docs: implications of mutating cookies in server actions (#83691)\n\nRef: https://github.com/vercel/next.js/discussions/83481 Closes:\nhttps://linear.app/vercel/issue/DOC-5070/mutating-cookies-invalidates-router-cache\n\nMaking sure those using cookies in server actions, know that the server\ntree is re-rendered and merged with the current client tree.",
    "sha": "aab50c395b4a3ba96cb4319714869f2b3fa0895c",
    "files": [
        {
            "sha": "ccefe259fdb60f96604359f0d9d840f538cbb922",
            "filename": "docs/01-app/01-getting-started/08-updating-data.mdx",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/aab50c395b4a3ba96cb4319714869f2b3fa0895c/docs%2F01-app%2F01-getting-started%2F08-updating-data.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/aab50c395b4a3ba96cb4319714869f2b3fa0895c/docs%2F01-app%2F01-getting-started%2F08-updating-data.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F01-getting-started%2F08-updating-data.mdx?ref=aab50c395b4a3ba96cb4319714869f2b3fa0895c",
            "patch": "@@ -393,7 +393,11 @@ Calling `redirect` [throws](/docs/app/api-reference/functions/redirect#behavior)\n \n ### Cookies\n \n-You can `get`, `set`, and `delete` cookies inside a Server Action using the [`cookies`](/docs/app/api-reference/functions/cookies) API:\n+You can `get`, `set`, and `delete` cookies inside a Server Action using the [`cookies`](/docs/app/api-reference/functions/cookies) API.\n+\n+When you [set or delete](/docs/app/api-reference/functions/cookies#understanding-cookie-behavior-in-server-actions) a cookie in a Server Action, Next.js re-renders the current page and its layouts on the server so the **UI reflects the new cookie value**.\n+\n+> **Good to know**: The server update applies to the current React tree, re-rendering, mounting, or unmounting components, as needed. Client state is preserved for re-rendered components, and effects re-run if their dependencies changed.\n \n ```ts filename=\"app/actions.ts\" switcher\n 'use server'"
        },
        {
            "sha": "1a36dc874e5dc74705a1a7c8612f43be6feb79dc",
            "filename": "docs/01-app/03-api-reference/04-functions/cookies.mdx",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/aab50c395b4a3ba96cb4319714869f2b3fa0895c/docs%2F01-app%2F03-api-reference%2F04-functions%2Fcookies.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/aab50c395b4a3ba96cb4319714869f2b3fa0895c/docs%2F01-app%2F03-api-reference%2F04-functions%2Fcookies.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F04-functions%2Fcookies.mdx?ref=aab50c395b4a3ba96cb4319714869f2b3fa0895c",
            "patch": "@@ -82,6 +82,14 @@ When working with cookies in Server Components, it's important to understand tha\n \n The server can only send instructions (via `Set-Cookie` headers) to tell the browser to store cookies - the actual storage happens on the client side. This is why cookie operations that modify state (`.set`, `.delete`, `.clear`) must be performed in a Route Handler or Server Action where the response headers can be properly set.\n \n+## Understanding Cookie Behavior in Server Actions\n+\n+After you set or delete a cookie in a Server Action, Next.js re-renders the current page and its layouts on the server so the UI reflects the new cookie value. See the [Caching guide](/docs/app/guides/caching#cookies).\n+\n+The UI is not unmounted, but effects that depend on data coming from the server will re-run.\n+\n+To refresh cached data too, call [`revalidatePath`](/docs/app/api-reference/functions/revalidatePath) or [`revalidateTag`](/docs/app/api-reference/functions/revalidateTag) inside the action.\n+\n ## Examples\n \n ### Getting a cookie"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 13,
        "deletions": 1
    }
}