{
    "author": "RobPruzan",
    "message": "feat: resizable panel (#81233)\n\nCloses NEXT-4599\n\nThis pr introduces the ability to resize panels in devtools\n\n### Details\n- we dynamically show a drag area on the sides of the panels to make it\neasier to find the drag target of the panel\n- remove all media queries for panel sizing and rely on resizing +\nmin/max heights as source of truth\n- handles vertical, horizontal, diagonal resizing\n- clamp panel width/height to viewport incase user resizes\n\n### Example\n\nhttps://github.com/user-attachments/assets/9053f716-ca79-440b-add4-a841ff84427d",
    "sha": "4b850b2f8f2fe21e7f221e14aed14b1617f220bd",
    "files": [
        {
            "sha": "91222d99189723800f46308e4da0d8c4f433c0c7",
            "filename": "packages/next/.storybook/main.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4b850b2f8f2fe21e7f221e14aed14b1617f220bd/packages%2Fnext%2F.storybook%2Fmain.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/4b850b2f8f2fe21e7f221e14aed14b1617f220bd/packages%2Fnext%2F.storybook%2Fmain.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2F.storybook%2Fmain.ts?ref=4b850b2f8f2fe21e7f221e14aed14b1617f220bd",
            "patch": "@@ -1,7 +1,5 @@\n import type { StorybookConfig } from '@storybook/react-webpack5'\n-\n import { join, dirname } from 'path'\n-\n /**\n  * This function is used to resolve the absolute path of a package.\n  * It is needed in projects that use Yarn PnP or are set up within a monorepo."
        },
        {
            "sha": "7cd248f6718b2a1de81337faef22f4a7b40e38cb",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-panel/devtools-panel-footer.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/4b850b2f8f2fe21e7f221e14aed14b1617f220bd/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel-footer.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b850b2f8f2fe21e7f221e14aed14b1617f220bd/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel-footer.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel-footer.tsx?ref=4b850b2f8f2fe21e7f221e14aed14b1617f220bd",
            "patch": "@@ -52,6 +52,7 @@ export const DEVTOOLS_PANEL_FOOTER_STYLES = css`\n     align-items: center;\n     border-top: 1px solid var(--color-gray-400);\n     border-radius: 0 0 var(--rounded-xl) var(--rounded-xl);\n+    height: auto;\n   }\n \n   [data-nextjs-devtools-panel-footer-tab-group] {"
        },
        {
            "sha": "40cdd2198a92afd024ba39b8f0ef2cc426dc72ce",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-panel/devtools-panel.tsx",
            "status": "modified",
            "additions": 162,
            "deletions": 154,
            "changes": 316,
            "blob_url": "https://github.com/vercel/next.js/blob/4b850b2f8f2fe21e7f221e14aed14b1617f220bd/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b850b2f8f2fe21e7f221e14aed14b1617f220bd/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx?ref=4b850b2f8f2fe21e7f221e14aed14b1617f220bd",
            "patch": "@@ -2,7 +2,7 @@ import type { OverlayDispatch, OverlayState, Corners } from '../../shared'\n import type { ReadyRuntimeError } from '../../utils/get-error-by-type'\n import type { HydrationErrorState } from '../../../shared/hydration-error'\n \n-import { useState, useEffect } from 'react'\n+import { useState, useEffect, useRef } from 'react'\n \n import { DevToolsPanelFooter } from './devtools-panel-footer'\n import { DevToolsPanelTab } from './devtools-panel-tab/devtools-panel-tab'\n@@ -24,6 +24,8 @@ import { INDICATOR_PADDING } from '../devtools-indicator/devtools-indicator'\n import { FullScreenIcon } from '../../icons/fullscreen'\n import { Cross } from '../../icons/cross'\n import { MinimizeIcon } from '../../icons/minimize'\n+import { ResizeProvider } from './resize/resize-provider'\n+import { ResizeHandle } from './resize/resize-handle'\n \n export type DevToolsPanelTabType = 'issues' | 'route' | 'settings'\n \n@@ -73,6 +75,7 @@ export function DevToolsPanel({\n \n   const [isFullscreen, setIsFullscreen] = useState(false)\n   const [prevIsErrorOverlayOpen, setPrevIsErrorOverlayOpen] = useState(false)\n+  const resizeRef = useRef<HTMLDivElement>(null)\n \n   if (state.isErrorOverlayOpen !== prevIsErrorOverlayOpen) {\n     if (state.isErrorOverlayOpen) {\n@@ -113,176 +116,182 @@ export function DevToolsPanel({\n   }\n \n   return (\n-    <Overlay\n-      data-nextjs-devtools-panel-overlay\n-      style={\n-        !isFullscreen\n-          ? {\n-              [vertical]: `${INDICATOR_PADDING}px`,\n-              [horizontal]: `${INDICATOR_PADDING}px`,\n-              [vertical === 'top' ? 'bottom' : 'top']: 'auto',\n-              [horizontal === 'left' ? 'right' : 'left']: 'auto',\n-            }\n-          : {}\n-      }\n+    <ResizeProvider\n+      value={{\n+        resizeRef,\n+        minWidth: 400,\n+        minHeight: 350,\n+        devToolsPosition: state.devToolsPosition,\n+      }}\n     >\n-      {/* TODO: Investigate why onCloseDevToolsPanel on Dialog doesn't close when clicked outside. */}\n-      <OverlayBackdrop\n-        data-nextjs-devtools-panel-overlay-backdrop={isFullscreen}\n-        onClick={onCloseDevToolsPanel}\n-      />\n-      <Draggable\n-        data-nextjs-devtools-panel-draggable\n-        padding={INDICATOR_PADDING}\n-        onDragStart={() => {}}\n-        position={state.devToolsPosition}\n-        setPosition={(p) => {\n-          localStorage.setItem(STORAGE_KEY_POSITION, p)\n-          dispatch({\n-            type: ACTION_DEVTOOLS_POSITION,\n-            devToolsPosition: p,\n-          })\n-        }}\n-        dragHandleSelector=\"[data-nextjs-devtools-panel-header], [data-nextjs-devtools-panel-footer]\"\n-        disableDrag={isFullscreen}\n+      <Overlay\n+        ref={resizeRef}\n+        data-nextjs-devtools-panel-overlay\n+        style={\n+          !isFullscreen\n+            ? {\n+                [vertical]: `${INDICATOR_PADDING}px`,\n+                [horizontal]: `${INDICATOR_PADDING}px`,\n+                [vertical === 'top' ? 'bottom' : 'top']: 'auto',\n+                [horizontal === 'left' ? 'right' : 'left']: 'auto',\n+              }\n+            : {}\n+        }\n       >\n-        <>\n-          <Dialog\n-            data-nextjs-devtools-panel-dialog\n-            aria-labelledby=\"nextjs__container_dev_tools_panel_label\"\n-            aria-describedby=\"nextjs__container_dev_tools_panel_desc\"\n-            onClose={onCloseDevToolsPanel}\n-          >\n-            <DialogContent data-nextjs-devtools-panel-dialog-content>\n-              <DialogHeader data-nextjs-devtools-panel-dialog-header>\n-                <div\n-                  data-nextjs-devtools-panel-header\n-                  data-nextjs-devtools-panel-draggable={!isFullscreen}\n-                >\n-                  <div data-nextjs-devtools-panel-header-tab-group>\n-                    <button\n-                      data-nextjs-devtools-panel-header-tab={\n-                        activeTab === 'issues'\n-                      }\n-                      onClick={() => setActiveTab('issues')}\n-                    >\n-                      Issues\n-                      {issueCount > 0 ? (\n-                        <span\n-                          data-nextjs-devtools-panel-header-tab-issues-badge\n-                        >\n-                          {issueCount}\n-                        </span>\n-                      ) : null}\n-                    </button>\n-                    <button\n-                      data-nextjs-devtools-panel-header-tab={\n-                        activeTab === 'route'\n-                      }\n-                      onClick={() => setActiveTab('route')}\n-                    >\n-                      Route Info\n-                    </button>\n-                    <button\n-                      data-nextjs-devtools-panel-header-tab={\n-                        activeTab === 'settings'\n-                      }\n-                      onClick={() => setActiveTab('settings')}\n-                    >\n-                      Settings\n-                    </button>\n+        {/* TODO: Investigate why onCloseDevToolsPanel on Dialog doesn't close when clicked outside. */}\n+        <OverlayBackdrop\n+          data-nextjs-devtools-panel-overlay-backdrop={isFullscreen}\n+          onClick={onCloseDevToolsPanel}\n+        />\n+\n+        <Draggable\n+          data-nextjs-devtools-panel-draggable\n+          padding={INDICATOR_PADDING}\n+          onDragStart={() => {}}\n+          position={state.devToolsPosition}\n+          setPosition={(p) => {\n+            localStorage.setItem(STORAGE_KEY_POSITION, p)\n+            dispatch({\n+              type: ACTION_DEVTOOLS_POSITION,\n+              devToolsPosition: p,\n+            })\n+          }}\n+          dragHandleSelector=\"[data-nextjs-devtools-panel-header], [data-nextjs-devtools-panel-footer]\"\n+          disableDrag={isFullscreen}\n+        >\n+          <>\n+            <Dialog\n+              data-nextjs-devtools-panel-dialog\n+              aria-labelledby=\"nextjs__container_dev_tools_panel_label\"\n+              aria-describedby=\"nextjs__container_dev_tools_panel_desc\"\n+              onClose={onCloseDevToolsPanel}\n+            >\n+              <DialogContent data-nextjs-devtools-panel-dialog-content>\n+                <DialogHeader data-nextjs-devtools-panel-dialog-header>\n+                  <div\n+                    data-nextjs-devtools-panel-header\n+                    data-nextjs-devtools-panel-draggable={!isFullscreen}\n+                  >\n+                    <div data-nextjs-devtools-panel-header-tab-group>\n+                      <button\n+                        data-nextjs-devtools-panel-header-tab={\n+                          activeTab === 'issues'\n+                        }\n+                        onClick={() => setActiveTab('issues')}\n+                      >\n+                        Issues\n+                        {issueCount > 0 ? (\n+                          <span\n+                            data-nextjs-devtools-panel-header-tab-issues-badge\n+                          >\n+                            {issueCount}\n+                          </span>\n+                        ) : null}\n+                      </button>\n+                      <button\n+                        data-nextjs-devtools-panel-header-tab={\n+                          activeTab === 'route'\n+                        }\n+                        onClick={() => setActiveTab('route')}\n+                      >\n+                        Route Info\n+                      </button>\n+                      <button\n+                        data-nextjs-devtools-panel-header-tab={\n+                          activeTab === 'settings'\n+                        }\n+                        onClick={() => setActiveTab('settings')}\n+                      >\n+                        Settings\n+                      </button>\n+                    </div>\n+                    <div data-nextjs-devtools-panel-header-action-button-group>\n+                      <button\n+                        data-nextjs-devtools-panel-header-action-button\n+                        onClick={handleFullscreenToggle}\n+                      >\n+                        {isFullscreen ? (\n+                          <MinimizeIcon width={16} height={16} />\n+                        ) : (\n+                          <FullScreenIcon width={16} height={16} />\n+                        )}\n+                      </button>\n+                      <button\n+                        data-nextjs-devtools-panel-header-action-button\n+                        onClick={onCloseDevToolsPanel}\n+                      >\n+                        <Cross width={16} height={16} />\n+                      </button>\n+                    </div>\n                   </div>\n-                  <div data-nextjs-devtools-panel-header-action-button-group>\n-                    <button\n-                      data-nextjs-devtools-panel-header-action-button\n-                      onClick={handleFullscreenToggle}\n-                    >\n-                      {isFullscreen ? (\n-                        <MinimizeIcon width={16} height={16} />\n-                      ) : (\n-                        <FullScreenIcon width={16} height={16} />\n-                      )}\n-                    </button>\n-                    <button\n-                      data-nextjs-devtools-panel-header-action-button\n-                      onClick={onCloseDevToolsPanel}\n-                    >\n-                      <Cross width={16} height={16} />\n-                    </button>\n-                  </div>\n-                </div>\n-              </DialogHeader>\n-              <DialogBody data-nextjs-devtools-panel-dialog-body>\n-                <DevToolsPanelTab\n-                  page={state.page}\n-                  activeTab={activeTab}\n-                  devToolsPosition={state.devToolsPosition}\n-                  scale={state.scale}\n-                  routerType={state.routerType}\n-                  handlePositionChange={handlePositionChange}\n-                  handleScaleChange={handleScaleChange}\n-                  debugInfo={state.debugInfo}\n-                  runtimeErrors={runtimeErrors}\n-                  getSquashedHydrationErrorDetails={\n-                    getSquashedHydrationErrorDetails\n-                  }\n-                  buildError={state.buildError}\n-                />\n-              </DialogBody>\n-            </DialogContent>\n-            <DevToolsPanelFooter\n-              versionInfo={state.versionInfo}\n-              isDraggable={!isFullscreen}\n-              showRestartServerButton={state.showRestartServerButton}\n-            />\n-          </Dialog>\n-        </>\n-      </Draggable>\n-    </Overlay>\n+                </DialogHeader>\n+                <DialogBody data-nextjs-devtools-panel-dialog-body>\n+                  <DevToolsPanelTab\n+                    page={state.page}\n+                    activeTab={activeTab}\n+                    devToolsPosition={state.devToolsPosition}\n+                    scale={state.scale}\n+                    routerType={state.routerType}\n+                    handlePositionChange={handlePositionChange}\n+                    handleScaleChange={handleScaleChange}\n+                    debugInfo={state.debugInfo}\n+                    runtimeErrors={runtimeErrors}\n+                    getSquashedHydrationErrorDetails={\n+                      getSquashedHydrationErrorDetails\n+                    }\n+                    buildError={state.buildError}\n+                  />\n+                </DialogBody>\n+              </DialogContent>\n+              <DevToolsPanelFooter\n+                versionInfo={state.versionInfo}\n+                isDraggable={!isFullscreen}\n+                showRestartServerButton={state.showRestartServerButton}\n+              />\n+            </Dialog>\n+\n+            {!isFullscreen && (\n+              <>\n+                <ResizeHandle direction=\"top\" />\n+                <ResizeHandle direction=\"right\" />\n+                <ResizeHandle direction=\"bottom\" />\n+                <ResizeHandle direction=\"left\" />\n+                <ResizeHandle direction=\"top-left\" />\n+                <ResizeHandle direction=\"top-right\" />\n+                <ResizeHandle direction=\"bottom-left\" />\n+                <ResizeHandle direction=\"bottom-right\" />\n+              </>\n+            )}\n+          </>\n+        </Draggable>\n+      </Overlay>\n+    </ResizeProvider>\n   )\n }\n \n export const DEVTOOLS_PANEL_STYLES = css`\n   /* TODO: Better override dialog header style. This conflicts with issues tab content. */\n   [data-nextjs-devtools-panel-dialog-header] {\n+    flex-shrink: 0;\n     margin-bottom: 0 !important;\n   }\n \n   [data-nextjs-devtools-panel-dialog-content] {\n-    /* Make DialogContent expand to push footer to bottom. */\n     flex: 1;\n-    /* Hide overflow of devtools panel dialog since we want it on the dialog body only. */\n-    overflow: hidden;\n+    display: flex;\n+    flex-direction: column;\n+    min-height: 0; // what allows content to overflow\n   }\n \n   [data-nextjs-devtools-panel-dialog-body] {\n+    flex: 1;\n     overflow: auto;\n-    /* Make DialogBody a flex container so its children can expand. */\n-    display: flex;\n-    flex-direction: column;\n   }\n \n   [data-nextjs-devtools-panel-overlay] {\n     margin: auto;\n-    width: 100%;\n-\n-    @media (max-width: 575px) {\n-      left: 20px !important;\n-      right: 20px !important;\n-      width: auto;\n-    }\n-\n-    @media (min-width: 576px) {\n-      max-width: 540px;\n-    }\n-\n-    @media (min-width: 768px) {\n-      max-width: 720px;\n-    }\n-\n-    @media (min-width: 992px) {\n-      max-width: 920px;\n-    }\n+    width: 525px;\n+    height: 375px;\n   }\n \n   [data-nextjs-devtools-panel-overlay-backdrop] {\n@@ -298,6 +307,7 @@ export const DEVTOOLS_PANEL_STYLES = css`\n   [data-nextjs-devtools-panel-draggable] {\n     /* For responsiveness */\n     width: 100%;\n+    height: 100%;\n   }\n \n   [data-nextjs-devtools-panel-dialog] {\n@@ -311,11 +321,9 @@ export const DEVTOOLS_PANEL_STYLES = css`\n     box-shadow: var(--shadow-lg);\n     position: relative;\n     width: 100%;\n-    height: 350px;\n-\n-    @media (min-width: 768px) {\n-      height: 450px;\n-    }\n+    height: 100%;\n+    min-width: 400px;\n+    min-height: 350px;\n   }\n \n   [data-nextjs-devtools-panel-header] {"
        },
        {
            "sha": "24ce1b80cecf255725c1057152fb734ccc56e93e",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-panel/resize/resize-handle.css",
            "status": "added",
            "additions": 162,
            "deletions": 0,
            "changes": 162,
            "blob_url": "https://github.com/vercel/next.js/blob/4b850b2f8f2fe21e7f221e14aed14b1617f220bd/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-handle.css",
            "raw_url": "https://github.com/vercel/next.js/raw/4b850b2f8f2fe21e7f221e14aed14b1617f220bd/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-handle.css",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-handle.css?ref=4b850b2f8f2fe21e7f221e14aed14b1617f220bd",
            "patch": "@@ -0,0 +1,162 @@\n+.resize-container {\n+  position: absolute;\n+  /* todo: better z index */\n+  z-index: 10;\n+  /* todo: is this needed */\n+  background: transparent;\n+}\n+\n+.resize-line {\n+  position: absolute;\n+  /* todo smarter z index */\n+  z-index: -1;\n+  pointer-events: none;\n+  /* a normal exit animation curve- at this point the exit animation is */\n+  /* immediately responsive so we don't need a bespoke curve */\n+  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n+  /* todo: better var? */\n+  border: 1px solid var(--color-gray-100);\n+}\n+\n+/* start really fast because we start super hidden initially behind the panel, otherwise feels like an unintended animation delay */\n+.resize-container:hover ~ .resize-line {\n+  transition: transform 0.2s cubic-bezier(0.05, 0.9, 0.2, 1); /* Fast start for animate in */\n+}\n+\n+.resize-container.right,\n+.resize-container.left {\n+  top: 0;\n+  height: 100%;\n+  width: 25px;\n+  cursor: ew-resize;\n+}\n+\n+/* todo: don't hard code all these values/use vars */\n+\n+.resize-container.bottom,\n+.resize-container.top {\n+  left: 0;\n+  width: 100%;\n+  height: 25px;\n+  cursor: ns-resize;\n+}\n+\n+.resize-container.top {\n+  top: -12px;\n+}\n+.resize-container.bottom {\n+  bottom: -12px;\n+}\n+.resize-container.left {\n+  left: -12px;\n+}\n+.resize-container.right {\n+  right: -12px;\n+}\n+\n+.resize-container.top-left,\n+.resize-container.top-right,\n+.resize-container.bottom-left,\n+.resize-container.bottom-right {\n+  width: 32px;\n+  height: 32px;\n+  z-index: 15;\n+}\n+\n+.resize-container.top-left {\n+  top: -16px;\n+  left: -16px;\n+  cursor: nwse-resize;\n+}\n+.resize-container.top-right {\n+  top: -16px;\n+  right: -16px;\n+  cursor: nesw-resize;\n+}\n+.resize-container.bottom-left {\n+  bottom: -16px;\n+  left: -16px;\n+  cursor: nesw-resize;\n+}\n+.resize-container.bottom-right {\n+  bottom: -16px;\n+  right: -16px;\n+  cursor: nwse-resize;\n+}\n+\n+.resize-line.top,\n+.resize-line.bottom {\n+  height: 28px;\n+  width: 100%;\n+  background-color: var(--color-background-100);\n+}\n+\n+.resize-line.left,\n+.resize-line.right {\n+  width: 28px;\n+  height: 100%;\n+  background-color: var(--color-background-100);\n+}\n+\n+.resize-line.top {\n+  top: -12px;\n+  left: calc(-1 * var(--border-left, 2px));\n+  width: calc(100% + var(--border-horizontal, 4px));\n+  border-radius: var(--rounded-md) var(--rounded-md) 0 0;\n+  transform: translateY(28px);\n+}\n+\n+.resize-line.bottom {\n+  bottom: -12px;\n+  left: calc(-1 * var(--border-left, 2px));\n+  width: calc(100% + var(--border-horizontal, 4px));\n+  border-radius: 0 0 var(--rounded-md) var(--rounded-md);\n+  transform: translateY(-28px);\n+}\n+\n+.resize-line.left {\n+  top: calc(-1 * var(--border-top, 2px));\n+  left: -12px;\n+  height: calc(100% + var(--border-vertical, 4px));\n+  border-radius: var(--rounded-md) 0 0 var(--rounded-md);\n+  transform: translateX(28px);\n+}\n+\n+.resize-line.right {\n+  top: calc(-1 * var(--border-top, 2px));\n+  right: -12px;\n+  height: calc(100% + var(--border-vertical, 4px));\n+  border-radius: 0 var(--rounded-md) var(--rounded-md) 0;\n+  transform: translateX(-28px);\n+}\n+\n+.resize-container.right:hover ~ .resize-line.right,\n+.resize-container.left:hover ~ .resize-line.left,\n+.resize-line.right.dragging,\n+.resize-line.left.dragging {\n+  transform: translateX(0);\n+}\n+\n+.resize-container.bottom:hover ~ .resize-line.bottom,\n+.resize-container.top:hover ~ .resize-line.top,\n+.resize-line.bottom.dragging,\n+.resize-line.top.dragging {\n+  transform: translateY(0);\n+}\n+\n+/* make sure that we don't show multiple handles at once\n+ * we should only ever show the currently resizing handle\n+ * regardless of hover state \n+ */\n+.resize-container.no-hover.right:hover ~ .resize-line.right {\n+  transform: translateX(-28px);\n+}\n+.resize-container.no-hover.left:hover ~ .resize-line.left {\n+  transform: translateX(28px);\n+}\n+.resize-container.no-hover.bottom:hover ~ .resize-line.bottom {\n+  transform: translateY(-28px);\n+}\n+.resize-container.no-hover.top:hover ~ .resize-line.top {\n+  transform: translateY(28px);\n+}"
        },
        {
            "sha": "bdf08d81d6f3a4fb5830a56d4d198fba41a97f81",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-panel/resize/resize-handle.tsx",
            "status": "added",
            "additions": 309,
            "deletions": 0,
            "changes": 309,
            "blob_url": "https://github.com/vercel/next.js/blob/4b850b2f8f2fe21e7f221e14aed14b1617f220bd/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-handle.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b850b2f8f2fe21e7f221e14aed14b1617f220bd/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-handle.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-handle.tsx?ref=4b850b2f8f2fe21e7f221e14aed14b1617f220bd",
            "patch": "@@ -0,0 +1,309 @@\n+import { useState, useLayoutEffect } from 'react'\n+import type { Corners } from '../../../shared'\n+import { useResize, type ResizeDirection } from './resize-provider'\n+import './resize-handle.css'\n+\n+const STORAGE_KEY_DIMENSIONS = 'nextjs-devtools-dimensions'\n+\n+export const ResizeHandle = ({ direction }: { direction: ResizeDirection }) => {\n+  const {\n+    resizeRef,\n+    minWidth,\n+    minHeight,\n+    devToolsPosition,\n+    draggingDirection,\n+    setDraggingDirection,\n+  } = useResize()\n+  const [borderWidths, setBorderWidths] = useState({\n+    top: 0,\n+    right: 0,\n+    bottom: 0,\n+    left: 0,\n+  })\n+\n+  // TODO(rob): if parallel with >2 sides (user resizes panel to be max width/height)\n+  // then we need to relax disabled resize heuristic\n+  const shouldShowHandle = () => {\n+    const getOppositeCorner = (corner: Corners): ResizeDirection => {\n+      switch (corner) {\n+        case 'top-left':\n+          return 'bottom-right'\n+        case 'top-right':\n+          return 'bottom-left'\n+        case 'bottom-left':\n+          return 'top-right'\n+        case 'bottom-right':\n+          return 'top-left'\n+        default: {\n+          corner satisfies never\n+          return null!\n+        }\n+      }\n+    }\n+\n+    // we block the sides of the corner its in (bottom-left has bottom and left sides blocked from resizing)\n+    // because there shouldn't be anywhere to resize, and if the user decides to resize from that point it\n+    // would be unhandled/slightly janky (the component would have to re-magnetic-snap after the resize)\n+    if (devToolsPosition.split('-').includes(direction)) return false\n+\n+    // same logic as above, but the only corner resize that makes\n+    // sense is the corner fully exposed (the opposing corner)\n+    const isCorner = direction.includes('-')\n+    if (isCorner) {\n+      const opposite = getOppositeCorner(devToolsPosition)\n+      return direction === opposite\n+    }\n+\n+    return true\n+  }\n+\n+  // we want the resize lines to be flush with the entire true width of the containers box\n+  // and we don't want the user of ResizeHandle to have to tell us the border width\n+  useLayoutEffect(() => {\n+    if (!resizeRef.current) return\n+\n+    const element = resizeRef.current\n+    const computedStyle = window.getComputedStyle(element)\n+\n+    const borderTop = parseFloat(computedStyle.borderTopWidth) || 0\n+    const borderRight = parseFloat(computedStyle.borderRightWidth) || 0\n+    const borderBottom = parseFloat(computedStyle.borderBottomWidth) || 0\n+    const borderLeft = parseFloat(computedStyle.borderLeftWidth) || 0\n+\n+    setBorderWidths({\n+      top: borderTop,\n+      right: borderRight,\n+      bottom: borderBottom,\n+      left: borderLeft,\n+    })\n+  }, [resizeRef])\n+\n+  const handleMouseDown = (mouseDownEvent: React.MouseEvent) => {\n+    mouseDownEvent.preventDefault()\n+    if (!resizeRef.current) return\n+    setDraggingDirection(direction)\n+\n+    const element = resizeRef.current\n+    const initialRect = element.getBoundingClientRect()\n+    const initialLeft = element.offsetLeft\n+    const initialTop = element.offsetTop\n+    const startX = mouseDownEvent.clientX\n+    const startY = mouseDownEvent.clientY\n+\n+    const handleMouseMove = (mouseMoveEvent: MouseEvent) => {\n+      const deltaX = mouseMoveEvent.clientX - startX\n+      const deltaY = mouseMoveEvent.clientY - startY\n+\n+      const { newWidth, newHeight, newLeft, newTop } = getNewDimensions(\n+        direction,\n+        deltaX,\n+        deltaY,\n+        initialRect,\n+        initialLeft,\n+        initialTop,\n+        minWidth,\n+        minHeight\n+      )\n+\n+      element.style.width = `${newWidth}px`\n+      element.style.height = `${newHeight}px`\n+\n+      if (direction.includes('left') || direction === 'left') {\n+        element.style.left = `${newLeft}px`\n+      }\n+      if (direction.includes('top') || direction === 'top') {\n+        element.style.top = `${newTop}px`\n+      }\n+    }\n+\n+    const handleMouseUp = () => {\n+      setDraggingDirection(null)\n+      document.removeEventListener('mousemove', handleMouseMove)\n+      document.removeEventListener('mouseup', handleMouseUp)\n+\n+      // invariant ref exists\n+      const { width, height } = resizeRef.current!.getBoundingClientRect()\n+      localStorage.setItem(\n+        STORAGE_KEY_DIMENSIONS,\n+        JSON.stringify({ width, height })\n+      )\n+    }\n+    document.addEventListener('mousemove', handleMouseMove)\n+    document.addEventListener('mouseup', handleMouseUp)\n+  }\n+\n+  if (!shouldShowHandle()) {\n+    return null\n+  }\n+  const totalHorizontalBorder = borderWidths.left + borderWidths.right\n+  const totalVerticalBorder = borderWidths.top + borderWidths.bottom\n+\n+  const isCornerHandle = direction.includes('-')\n+\n+  return (\n+    <>\n+      {/* this is what actually captures the events, its partially on the container, and partially off */}\n+      <div\n+        className={`resize-container ${direction} ${draggingDirection && draggingDirection !== direction ? 'no-hover' : ''}`}\n+        onMouseDown={handleMouseDown}\n+      />\n+\n+      {/* this panel appears to capture the click, but its just a visual indicator for user of the resize target */}\n+      {!isCornerHandle && (\n+        <div\n+          className={`resize-line ${direction} ${draggingDirection === direction ? 'dragging' : ''}`}\n+          style={\n+            {\n+              // We want the resize line to appear to come out of the back\n+              // of the div flush with the full box, otherwise there are a\n+              // few px missing and it looks jank\n+              '--border-horizontal': `${totalHorizontalBorder}px`,\n+              '--border-vertical': `${totalVerticalBorder}px`,\n+              '--border-top': `${borderWidths.top}px`,\n+              '--border-right': `${borderWidths.right}px`,\n+              '--border-bottom': `${borderWidths.bottom}px`,\n+              '--border-left': `${borderWidths.left}px`,\n+            } as React.CSSProperties\n+          }\n+        />\n+      )}\n+    </>\n+  )\n+}\n+\n+const getNewDimensions = (\n+  direction: ResizeDirection,\n+  deltaX: number,\n+  deltaY: number,\n+  initialRect: DOMRect,\n+  initialLeft: number,\n+  initialTop: number,\n+  minWidth: number,\n+  minHeight: number\n+) => {\n+  const maxWidth = window.innerWidth * 0.95\n+  const maxHeight = window.innerHeight * 0.95\n+\n+  switch (direction) {\n+    case 'right':\n+      return {\n+        newWidth: Math.min(\n+          maxWidth,\n+          Math.max(minWidth, initialRect.width + deltaX)\n+        ),\n+        newHeight: initialRect.height,\n+        newLeft: initialLeft,\n+        newTop: initialTop,\n+      }\n+\n+    case 'left': {\n+      const newWidth = Math.min(\n+        maxWidth,\n+        Math.max(minWidth, initialRect.width - deltaX)\n+      )\n+      const widthDiff = newWidth - initialRect.width\n+      return {\n+        newWidth,\n+        newHeight: initialRect.height,\n+        newLeft: initialLeft - widthDiff,\n+        newTop: initialTop,\n+      }\n+    }\n+\n+    case 'bottom':\n+      return {\n+        newWidth: initialRect.width,\n+        newHeight: Math.min(\n+          maxHeight,\n+          Math.max(minHeight, initialRect.height + deltaY)\n+        ),\n+        newLeft: initialLeft,\n+        newTop: initialTop,\n+      }\n+\n+    case 'top': {\n+      const newHeight = Math.min(\n+        maxHeight,\n+        Math.max(minHeight, initialRect.height - deltaY)\n+      )\n+      const heightDiff = newHeight - initialRect.height\n+      return {\n+        newWidth: initialRect.width,\n+        newHeight,\n+        newLeft: initialLeft,\n+        newTop: initialTop - heightDiff,\n+      }\n+    }\n+\n+    case 'top-left': {\n+      const newWidth = Math.min(\n+        maxWidth,\n+        Math.max(minWidth, initialRect.width - deltaX)\n+      )\n+      const newHeight = Math.min(\n+        maxHeight,\n+        Math.max(minHeight, initialRect.height - deltaY)\n+      )\n+      const widthDiff = newWidth - initialRect.width\n+      const heightDiff = newHeight - initialRect.height\n+      return {\n+        newWidth,\n+        newHeight,\n+        newLeft: initialLeft - widthDiff,\n+        newTop: initialTop - heightDiff,\n+      }\n+    }\n+\n+    case 'top-right': {\n+      const newHeight = Math.min(\n+        maxHeight,\n+        Math.max(minHeight, initialRect.height - deltaY)\n+      )\n+      const heightDiff = newHeight - initialRect.height\n+      return {\n+        newWidth: Math.min(\n+          maxWidth,\n+          Math.max(minWidth, initialRect.width + deltaX)\n+        ),\n+        newHeight,\n+        newLeft: initialLeft,\n+        newTop: initialTop - heightDiff,\n+      }\n+    }\n+\n+    case 'bottom-left': {\n+      const newWidth = Math.min(\n+        maxWidth,\n+        Math.max(minWidth, initialRect.width - deltaX)\n+      )\n+      const widthDiff = newWidth - initialRect.width\n+      return {\n+        newWidth,\n+        newHeight: Math.min(\n+          maxHeight,\n+          Math.max(minHeight, initialRect.height + deltaY)\n+        ),\n+        newLeft: initialLeft - widthDiff,\n+        newTop: initialTop,\n+      }\n+    }\n+\n+    case 'bottom-right':\n+      return {\n+        newWidth: Math.min(\n+          maxWidth,\n+          Math.max(minWidth, initialRect.width + deltaX)\n+        ),\n+        newHeight: Math.min(\n+          maxHeight,\n+          Math.max(minHeight, initialRect.height + deltaY)\n+        ),\n+        newLeft: initialLeft,\n+        newTop: initialTop,\n+      }\n+    default: {\n+      direction satisfies never\n+      return null!\n+    }\n+  }\n+}"
        },
        {
            "sha": "ae1360e60b3b7cecf9d7a5d63026abf7f645f5fd",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-panel/resize/resize-provider.tsx",
            "status": "added",
            "additions": 137,
            "deletions": 0,
            "changes": 137,
            "blob_url": "https://github.com/vercel/next.js/blob/4b850b2f8f2fe21e7f221e14aed14b1617f220bd/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-provider.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b850b2f8f2fe21e7f221e14aed14b1617f220bd/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-provider.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fresize%2Fresize-provider.tsx?ref=4b850b2f8f2fe21e7f221e14aed14b1617f220bd",
            "patch": "@@ -0,0 +1,137 @@\n+import {\n+  createContext,\n+  useContext,\n+  useLayoutEffect,\n+  useState,\n+  type RefObject,\n+} from 'react'\n+import type { Corners } from '../../../shared'\n+const STORAGE_KEY_DIMENSIONS = 'nextjs-devtools-dimensions'\n+\n+export type ResizeDirection =\n+  | 'top'\n+  | 'right'\n+  | 'bottom'\n+  | 'left'\n+  | 'top-left'\n+  | 'top-right'\n+  | 'bottom-left'\n+  | 'bottom-right'\n+\n+interface ResizeContextValue {\n+  resizeRef: RefObject<HTMLElement | null>\n+  minWidth: number\n+  minHeight: number\n+  devToolsPosition: Corners\n+  draggingDirection: ResizeDirection | null\n+  setDraggingDirection: (direction: ResizeDirection | null) => void\n+}\n+\n+const ResizeContext = createContext<ResizeContextValue>(null!)\n+\n+const constrainDimensions = (params: {\n+  width: number\n+  height: number\n+  minWidth: number\n+  minHeight: number\n+}) => {\n+  const maxWidth = window.innerWidth * 0.95\n+  const maxHeight = window.innerHeight * 0.95\n+\n+  return {\n+    width: Math.min(maxWidth, Math.max(params.minWidth, params.width)),\n+    height: Math.min(maxHeight, Math.max(params.minHeight, params.height)),\n+  }\n+}\n+\n+const parseResizeLocalStorage = () => {\n+  const savedDimensions = localStorage.getItem(STORAGE_KEY_DIMENSIONS)\n+  if (!savedDimensions) return null\n+  try {\n+    const parsed = JSON.parse(savedDimensions)\n+    if (\n+      typeof parsed === 'object' &&\n+      parsed !== null &&\n+      typeof parsed.width === 'number' &&\n+      typeof parsed.height === 'number'\n+    ) {\n+      return { width: parsed.width, height: parsed.height }\n+    }\n+    return null\n+  } catch (e) {\n+    localStorage.removeItem(STORAGE_KEY_DIMENSIONS)\n+    return null\n+  }\n+}\n+\n+interface ResizeProviderProps {\n+  value: {\n+    resizeRef: RefObject<HTMLElement | null>\n+    minWidth?: number\n+    minHeight?: number\n+    devToolsPosition: Corners\n+  }\n+  children: React.ReactNode\n+}\n+\n+export const ResizeProvider = ({ value, children }: ResizeProviderProps) => {\n+  const minWidth = value.minWidth ?? 100\n+  const minHeight = value.minHeight ?? 80\n+  const [draggingDirection, setDraggingDirection] =\n+    useState<ResizeDirection | null>(null)\n+\n+  useLayoutEffect(() => {\n+    const applyConstrainedDimensions = () => {\n+      if (!value.resizeRef.current) return\n+\n+      // this feels weird to read local storage on resize, but we don't\n+      // track the dimensions of the container, and this is better than\n+      // getBoundingClientReact\n+\n+      // an optimization if this is too expensive is to maintain the current\n+      // container size in a ref and update it on resize, which is essentially\n+      // what we're doing here, just dumber\n+      const dim = parseResizeLocalStorage()\n+      if (!dim) {\n+        return\n+      }\n+      const { height, width } = constrainDimensions({\n+        ...dim,\n+        minWidth: minWidth ?? 100,\n+        minHeight: minHeight ?? 80,\n+      })\n+\n+      value.resizeRef.current.style.width = `${width}px`\n+      value.resizeRef.current.style.height = `${height}px`\n+    }\n+\n+    applyConstrainedDimensions()\n+\n+    window.addEventListener('resize', applyConstrainedDimensions)\n+    return () =>\n+      window.removeEventListener('resize', applyConstrainedDimensions)\n+  }, [value.resizeRef, minWidth, minHeight])\n+\n+  return (\n+    <ResizeContext.Provider\n+      value={{\n+        resizeRef: value.resizeRef,\n+        minWidth,\n+        minHeight,\n+        devToolsPosition: value.devToolsPosition,\n+        draggingDirection,\n+        setDraggingDirection,\n+      }}\n+    >\n+      {children}\n+    </ResizeContext.Provider>\n+  )\n+}\n+\n+export const useResize = () => {\n+  const context = useContext(ResizeContext)\n+  if (!context) {\n+    throw new Error('useResize must be used within a Resize provider')\n+  }\n+  return context\n+}"
        },
        {
            "sha": "71e1ae9994d067221c533347b2836d54e1d703c9",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/dev-tools-indicator/draggable.tsx",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/4b850b2f8f2fe21e7f221e14aed14b1617f220bd/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdraggable.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b850b2f8f2fe21e7f221e14aed14b1617f220bd/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdraggable.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdraggable.tsx?ref=4b850b2f8f2fe21e7f221e14aed14b1617f220bd",
            "patch": "@@ -39,6 +39,14 @@ export function Draggable({\n   })\n \n   function onDragEnd(translation: Point, velocity: Point) {\n+    const distance = Math.sqrt(\n+      translation.x * translation.x + translation.y * translation.y\n+    )\n+    if (distance === 0) {\n+      ref.current?.style.removeProperty('translate')\n+      return\n+    }\n+\n     const projectedPosition = {\n       x: translation.x + project(velocity.x),\n       y: translation.y + project(velocity.y),"
        },
        {
            "sha": "0cf0583c54a6401c2cfb930705ff2460ce896999",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/overlay/overlay.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/4b850b2f8f2fe21e7f221e14aed14b1617f220bd/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverlay%2Foverlay.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4b850b2f8f2fe21e7f221e14aed14b1617f220bd/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverlay%2Foverlay.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverlay%2Foverlay.tsx?ref=4b850b2f8f2fe21e7f221e14aed14b1617f220bd",
            "patch": "@@ -3,6 +3,7 @@ import { lock, unlock } from './body-locker'\n \n export type OverlayProps = React.HTMLAttributes<HTMLDivElement> & {\n   fixed?: boolean\n+  ref?: React.Ref<HTMLDivElement>\n }\n \n const Overlay: React.FC<OverlayProps> = function Overlay({"
        }
    ],
    "stats": {
        "total": 936,
        "additions": 780,
        "deletions": 156
    }
}