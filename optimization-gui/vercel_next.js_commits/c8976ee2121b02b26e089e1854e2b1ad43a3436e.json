{
    "author": "mischnic",
    "message": "Turbopack: don't emit `blurDataURL: null` (#81387)\n\nDo what Webpack does and don't generate `blurDataUrl: null`, just omit that property.",
    "sha": "c8976ee2121b02b26e089e1854e2b1ad43a3436e",
    "files": [
        {
            "sha": "ff667df76eaa73e88d7616f611b9e08b80cb2459",
            "filename": "crates/next-core/src/next_image/source_asset.rs",
            "status": "modified",
            "additions": 11,
            "deletions": 5,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/c8976ee2121b02b26e089e1854e2b1ad43a3436e/crates%2Fnext-core%2Fsrc%2Fnext_image%2Fsource_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/c8976ee2121b02b26e089e1854e2b1ad43a3436e/crates%2Fnext-core%2Fsrc%2Fnext_image%2Fsource_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_image%2Fsource_asset.rs?ref=c8976ee2121b02b26e089e1854e2b1ad43a3436e",
            "patch": "@@ -84,19 +84,25 @@ impl Asset for StructuredImageFileSource {\n             }\n             BlurPlaceholderMode::DataUrl => {\n                 let info = get_meta_data(*self.image, *content, Some(blur_options)).await?;\n-                writeln!(\n+                write!(\n                     result,\n-                    \"export default {{ src, width: {width}, height: {height}, blurDataURL: \\\n-                     {blur_data_url}, blurWidth: {blur_width}, blurHeight: {blur_height} }}\",\n+                    \"export default {{ src, width: {width}, height: {height}, blurWidth: \\\n+                     {blur_width}, blurHeight: {blur_height}\",\n                     width = StringifyJs(&info.width),\n                     height = StringifyJs(&info.height),\n-                    blur_data_url =\n-                        StringifyJs(&info.blur_placeholder.as_ref().map(|p| p.data_url.as_str())),\n                     blur_width =\n                         StringifyJs(&info.blur_placeholder.as_ref().map_or(0, |p| p.width)),\n                     blur_height =\n                         StringifyJs(&info.blur_placeholder.as_ref().map_or(0, |p| p.height),),\n                 )?;\n+                if let Some(blur_placeholder) = &info.blur_placeholder {\n+                    write!(\n+                        result,\n+                        \", blurDataURL: {blur_data_url}\",\n+                        blur_data_url = StringifyJs(blur_placeholder.data_url.as_str()),\n+                    )?;\n+                }\n+                writeln!(result, \"}};\")?;\n             }\n             BlurPlaceholderMode::None => {\n                 let info = get_meta_data(*self.image, *content, None).await?;"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 11,
        "deletions": 5
    }
}