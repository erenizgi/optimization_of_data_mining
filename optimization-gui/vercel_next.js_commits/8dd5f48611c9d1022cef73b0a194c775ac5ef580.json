{
    "author": "Hareesh108",
    "message": "fix: update @types/node to resolve Vite 7.x peer dependency conflict (#82794)\n\n## Problem\nThe project was experiencing npm dependency resolution conflicts when\nrunning `npm install`, caused by incompatible @types/node versions\nbetween Vite 7.1.3 and the existing project dependencies.\n\nFixes: https://github.com/vercel/next.js/issues/82779\n\n**Error Details:**\n- Vite 7.1.3 requires `@types/node@\"^20.19.0 || >=22.12.0\"`\n- Project was using `@types/node@20.10.4`\n- This created a peer dependency conflict, preventing clean installs\n\n## Solution\nUpdated `@types/node` from `20.10.4` to a compatible version that\nsatisfies Vite 7.x requirements while maintaining compatibility with\nVitest 3.2.4.\n\n## Changes Made\n- Updated `@types/node` version in package.json\n- Verified compatibility with all existing dependencies\n- Confirmed tests still pass with deprecation warnings (React.act import\nwarnings - separate issue)\n\n## Testing\n- [x] `npm install` runs without errors\n- [x] `npm test` passes all existing tests\n- [x] No breaking changes to existing functionality\n\n## Additional Notes\nThis fix resolves the immediate dependency conflict. The React.act\ndeprecation warnings in tests are a separate issue and should be\naddressed in a future PR by updating test imports from\n`react-dom/test-utils` to `react`.\n\n\nDetails Issue:\n1]\nnpm test                      \n\n> test\n> vitest\n\nThe CJS build of Vite's Node API is deprecated. See\nhttps://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated\nfor more details.\n\nDEV v1.0.4\n/home/hareesh/learn-frontend/front-open-source/next.js/examples/with-vitest\n\nstderr | app/blog/[slug]/page.test.tsx > App Router: Works with dynamic\nroute segments\nWarning: `ReactDOMTestUtils.act` is deprecated in favor of `React.act`.\nImport `act` from `react` instead of `react-dom/test-utils`. See\nhttps://react.dev/warnings/react-dom-test-utils for more info.\n\nstderr | app/page.test.tsx > App Router: Works with Server Components\nWarning: `ReactDOMTestUtils.act` is deprecated in favor of `React.act`.\nImport `act` from `react` instead of `react-dom/test-utils`. See\nhttps://react.dev/warnings/react-dom-test-utils for more info.\n\nstderr | app/counter.test.tsx > App Router: Works with Client Components\nWarning: `ReactDOMTestUtils.act` is deprecated in favor of `React.act`.\nImport `act` from `react` instead of `react-dom/test-utils`. See\nhttps://react.dev/warnings/react-dom-test-utils for more info.\n\nstderr | __tests__/Home.test.tsx > Pages Router\nWarning: `ReactDOMTestUtils.act` is deprecated in favor of `React.act`.\nImport `act` from `react` instead of `react-dom/test-utils`. See\nhttps://react.dev/warnings/react-dom-test-utils for more info.\n\n2]\nnpm install\n\nnpm error code ERESOLVE\nnpm error ERESOLVE could not resolve\nnpm error\nnpm error While resolving: vite@7.1.3\nnpm error Found: @types/node@20.10.4\nnpm error node_modules/@types/node\nnpm error   dev @types/node@\"20.10.4\" from the root project\nnpm error peerOptional @types/node@\"^18.0.0 || ^20.0.0 || >=22.0.0\" from\nvitest@3.2.4\nnpm error   node_modules/vitest\nnpm error     dev vitest@\"^3.2.4\" from the root project\nnpm error\nnpm error Could not resolve dependency:\nnpm error peerOptional @types/node@\"^20.19.0 || >=22.12.0\" from\nvite@7.1.3\nnpm error node_modules/vite\nnpm error peer vite@\"^4.2.0 || ^5.0.0 || ^6.0.0 || ^7.0.0\" from\n@vitejs/plugin-react@4.7.0\nnpm error   node_modules/@vitejs/plugin-react\nnpm error     dev @vitejs/plugin-react@\"^4.2.1\" from the root project\nnpm error   vite@\"^5.0.0 || ^6.0.0 || ^7.0.0-0\" from vitest@3.2.4\nnpm error   node_modules/vitest\nnpm error     dev vitest@\"^3.2.4\" from the root project\nnpm error\nnpm error Conflicting peer dependency: @types/node@24.3.0\nnpm error node_modules/@types/node\nnpm error peerOptional @types/node@\"^20.19.0 || >=22.12.0\" from\nvite@7.1.3\nnpm error   node_modules/vite\nnpm error peer vite@\"^4.2.0 || ^5.0.0 || ^6.0.0 || ^7.0.0\" from\n@vitejs/plugin-react@4.7.0\nnpm error     node_modules/@vitejs/plugin-react\nnpm error       dev @vitejs/plugin-react@\"^4.2.1\" from the root project\nnpm error     vite@\"^5.0.0 || ^6.0.0 || ^7.0.0-0\" from vitest@3.2.4\nnpm error     node_modules/vitest\nnpm error       dev vitest@\"^3.2.4\" from the root project\nnpm error\nnpm error Fix the upstream dependency conflict, or retry\nnpm error this command with --force or --legacy-peer-deps\nnpm error to accept an incorrect (and potentially broken) dependency\nresolution.\nnpm error\nnpm error\nnpm error For a full report see:\nnpm error\n/home/hareesh/.npm/_logs/2025-08-19T17_17_17_782Z-eresolve-report.txt\nnpm error A complete log of this run can be found in:\n/home/hareesh/.npm/_logs/2025-08-19T17_17_17_782Z-debug-0.log\n\n---------\n\nCo-authored-by: Joseph <sephxd1234@gmail.com>\nCo-authored-by: Joseph <joseph.chamochumbi@vercel.com>",
    "sha": "8dd5f48611c9d1022cef73b0a194c775ac5ef580",
    "files": [
        {
            "sha": "40e46f23b2b2b33598eb5b35fc9f19ef80bd1601",
            "filename": "examples/with-vitest/package.json",
            "status": "modified",
            "additions": 10,
            "deletions": 9,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/8dd5f48611c9d1022cef73b0a194c775ac5ef580/examples%2Fwith-vitest%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/8dd5f48611c9d1022cef73b0a194c775ac5ef580/examples%2Fwith-vitest%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-vitest%2Fpackage.json?ref=8dd5f48611c9d1022cef73b0a194c775ac5ef580",
            "patch": "@@ -8,17 +8,18 @@\n   },\n   \"dependencies\": {\n     \"next\": \"latest\",\n-    \"react\": \"^18.2.0\",\n-    \"react-dom\": \"^18.2.0\",\n+    \"react\": \"^19.1.1\",\n+    \"react-dom\": \"^19.1.1\",\n     \"server-only\": \"^0.0.1\"\n   },\n   \"devDependencies\": {\n-    \"@testing-library/react\": \"14.1.2\",\n-    \"@types/node\": \"20.10.4\",\n-    \"@types/react\": \"18.2.45\",\n-    \"@vitejs/plugin-react\": \"^4.2.1\",\n-    \"jsdom\": \"^23.0.1\",\n-    \"typescript\": \"5.3.3\",\n-    \"vitest\": \"1.0.4\"\n+    \"@testing-library/react\": \"^16.3.0\",\n+    \"@types/node\": \"^20.19.11\",\n+    \"@types/react\": \"^19.1.10\",\n+    \"@types/react-dom\": \"^19.1.7\",\n+    \"@vitejs/plugin-react\": \"^5.0.1\",\n+    \"jsdom\": \"^26.1.0\",\n+    \"typescript\": \"^5.9.2\",\n+    \"vitest\": \"^3.2.4\"\n   }\n }"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 10,
        "deletions": 9
    }
}