{
    "author": "lukesandberg",
    "message": "[turbopack] Optimize `export const` to bind readonly values not getters (#82760)\n\n## Optimize ESM Exports\n\n### What\n\nThis builds on the work from #82214\n\nFor an esm module like\n\n```\nexport const foo = 2;\n```\n\nturbopack will generate a factory function like\n\n```\n__turbopack_context__ => {\n  __turbopack_context__.s(['foo', ()=>foo]);\n  const foo = 2;\n}\n```\n\n- we expose the exports early to enable circular imports  between modules\n- we expose as 'getter functions' to enable live bindings\n\nThese behaviors are necessary to uphold the ESM specification, however, we can optimize it by avoiding getter functions most of the time\n\n```\n\n  const foo = 2;\n__turbopack_context__ => {\n  __turbopack_context__.s(['foo', 0, foo]);\n}\n```\n\nIf we can statically detect that the module is not part of an import cycle then we can delay registering its exports until the end of evaluation.  Then if we also determine that a given export is never mutated (after module evaluation) then we can export it as a value instead of a getter.\n\nWe use a small numeric discriminator flag this to the runtime (otherwise exporting a function is ambiguous).\n\nThis approach will save code size (2 bytes per const binding), memory (no functions to allocate), and improve parsing and execution performance.\n\nCurrently we use `export const` as a hint and `export default <expr>` to decide that a binding is not 'live'.  Future PRs will enhance this to cover more cases.\n\n# Performance\n\nthe module-cost benchmark just uses `export const` so that is enough to prove the effectiveness of avoiding getters.\n\n## Benchmark Results: CHANGE vs HEAD (Median Values)\n\n| Scenario | Metric | HEAD (ms) | CHANGE (ms) | Speedup | % Improvement |\n| --- | --- | --- | --- | --- | --- |\n| **Client CommonJS** | Load Duration | 19\\.80 | 19\\.60 | 1\\.01x | \\+1.0% ✅ |\n|  | Execute Duration | 19\\.30 | 19\\.00 | 1\\.02x | \\+1.6% ✅ |\n| **Client ESM** | Load Duration | 18\\.15 | 17\\.70 | 1\\.03x | \\+2.5% ✅ |\n|  | Execute Duration | 46\\.85 | 27\\.95 | 1\\.68x | \\+40.3% ✅ |\n| **Pages API CommonJS** | Load Duration | 19\\.41 | 19\\.52 | 0\\.99x | \\-0.6% ❌ |\n|  | Execute Duration | 25\\.34 | 25\\.15 | 1\\.01x | \\+0.7% ✅ |\n| **Pages API ESM** | Load Duration | 26\\.02 | 22\\.08 | 1\\.18x | \\+15.1% ✅ |\n|  | Execute Duration | 56\\.30 | 35\\.12 | 1\\.60x | \\+37.6% ✅ |\n\nAs expected this is a substantial improvement to ESM.  The CJS results are just noise and should provide an idea of the variance of the run.\n\nLoad time improves due to smaller and simpler code\nExecution time improves since there are fewer function objects to construct",
    "sha": "3e0247431e59f6796f8a1c25a39dc17c78f979bc",
    "files": [
        {
            "sha": "131c9faf53b3cd9ea732c2f4603a14aaed052c0c",
            "filename": "crates/next-core/src/next_server_component/server_component_module.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/crates%2Fnext-core%2Fsrc%2Fnext_server_component%2Fserver_component_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/crates%2Fnext-core%2Fsrc%2Fnext_server_component%2Fserver_component_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_server_component%2Fserver_component_module.rs?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -100,9 +100,10 @@ impl EcmascriptChunkPlaceable for NextServerComponentModule {\n         );\n \n         let mut exports = BTreeMap::new();\n+        let default = rcstr!(\"default\");\n         exports.insert(\n-            rcstr!(\"default\"),\n-            EsmExport::ImportedBinding(module_reference, rcstr!(\"default\"), false),\n+            default.clone(),\n+            EsmExport::ImportedBinding(module_reference, default, false),\n         );\n \n         Ok(EcmascriptExports::EsmExports("
        },
        {
            "sha": "b113ff58068e6c4013ca8840f9a93cab34c7c52a",
            "filename": "crates/next-core/src/next_server_utility/server_utility_module.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/crates%2Fnext-core%2Fsrc%2Fnext_server_utility%2Fserver_utility_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/crates%2Fnext-core%2Fsrc%2Fnext_server_utility%2Fserver_utility_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_server_utility%2Fserver_utility_module.rs?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -100,9 +100,10 @@ impl EcmascriptChunkPlaceable for NextServerUtilityModule {\n         );\n \n         let mut exports = BTreeMap::new();\n+        let default = rcstr!(\"default\");\n         exports.insert(\n-            rcstr!(\"default\"),\n-            EsmExport::ImportedBinding(module_reference, rcstr!(\"default\"), false),\n+            default.clone(),\n+            EsmExport::ImportedBinding(module_reference, default, false),\n         );\n \n         Ok(EcmascriptExports::EsmExports("
        },
        {
            "sha": "0411b80e42f9b83b5707f8b29611b639caa8115a",
            "filename": "turbopack/crates/turbopack-browser/src/chunking_context.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fchunking_context.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fchunking_context.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fchunking_context.rs?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -24,7 +24,7 @@ use turbopack_core::{\n     module_graph::{\n         ModuleGraph,\n         chunk_group_info::ChunkGroup,\n-        export_usage::{ExportUsageInfo, ModuleExportUsageInfo},\n+        export_usage::{ExportUsageInfo, ModuleExportUsage},\n     },\n     output::{OutputAsset, OutputAssets},\n };\n@@ -756,11 +756,13 @@ impl ChunkingContext for BrowserChunkingContext {\n     async fn module_export_usage(\n         self: Vc<Self>,\n         module: ResolvedVc<Box<dyn Module>>,\n-    ) -> Result<Vc<ModuleExportUsageInfo>> {\n+    ) -> Result<Vc<ModuleExportUsage>> {\n         if let Some(export_usage) = self.await?.export_usage {\n-            Ok(export_usage.await?.used_exports(module))\n+            Ok(export_usage.await?.used_exports(module).await?)\n         } else {\n-            Ok(ModuleExportUsageInfo::all())\n+            // In development mode, we don't have export usage info, so we assume all exports are\n+            // used.\n+            Ok(ModuleExportUsage::all())\n         }\n     }\n }"
        },
        {
            "sha": "5c161d4212f0d7e215c937b0fb5ede4a0e75841b",
            "filename": "turbopack/crates/turbopack-core/src/chunk/chunking_context.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunking_context.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunking_context.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunking_context.rs?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -14,7 +14,7 @@ use crate::{\n     ident::AssetIdent,\n     module::Module,\n     module_graph::{\n-        ModuleGraph, chunk_group_info::ChunkGroup, export_usage::ModuleExportUsageInfo,\n+        ModuleGraph, chunk_group_info::ChunkGroup, export_usage::ModuleExportUsage,\n         module_batches::BatchingConfig,\n     },\n     output::{OutputAsset, OutputAssets},\n@@ -295,7 +295,7 @@ pub trait ChunkingContext {\n     async fn module_export_usage(\n         self: Vc<Self>,\n         module: Vc<Box<dyn Module>>,\n-    ) -> Result<Vc<ModuleExportUsageInfo>>;\n+    ) -> Result<Vc<ModuleExportUsage>>;\n }\n \n pub trait ChunkingContextExt {"
        },
        {
            "sha": "1371a4350d5e91dc4800503d4e453fd2fbaf52a1",
            "filename": "turbopack/crates/turbopack-core/src/module_graph/export_usage.rs",
            "status": "modified",
            "additions": 65,
            "deletions": 13,
            "changes": 78,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fmodule_graph%2Fexport_usage.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fmodule_graph%2Fexport_usage.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fmodule_graph%2Fexport_usage.rs?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -2,7 +2,7 @@\n \n use anyhow::Result;\n use auto_hash_map::AutoSet;\n-use rustc_hash::FxHashMap;\n+use rustc_hash::{FxHashMap, FxHashSet};\n use turbo_rcstr::RcStr;\n use turbo_tasks::{ResolvedVc, Vc};\n \n@@ -13,22 +13,45 @@ pub async fn compute_export_usage_info(\n     graph: ResolvedVc<ModuleGraph>,\n ) -> Result<Vc<ExportUsageInfo>> {\n     let mut used_exports = FxHashMap::<_, ModuleExportUsageInfo>::default();\n-\n+    let graph = graph.await?;\n     graph\n-        .await?\n         .traverse_all_edges_unordered(|(_, ref_data), target| {\n-            if let Some(target_module) = ResolvedVc::try_downcast::<Box<dyn Module>>(target.module)\n-            {\n-                let e = used_exports.entry(target_module).or_default();\n+            let e = used_exports.entry(target.module).or_default();\n \n-                e.add(&ref_data.export);\n-            }\n+            e.add(&ref_data.export);\n \n             Ok(())\n         })\n         .await?;\n+    // Compute cycles and select modules to be 'circuit breakers'\n+    // A circuit breaker module will need to eagerly export lazy getters for its exports to break an\n+    // evaluation cycle all other modules can export values after defining them\n+    let mut circuit_breakers = FxHashSet::default();\n+    graph\n+        .traverse_cycles(\n+            |e| e.chunking_type.is_parallel(),\n+            |cycle| {\n+                // To break cycles we need to ensure that no importing module can observe a\n+                // partially populated exports object.\n+\n+                // We could compute this based on the module graph via a DFS from each entry point\n+                // to the cycle.  Whatever node is hit first is an entry point to the cycle.\n+                // (scope hoisting does something similar) and then we would only need to\n+                // mark 'entry' modules (basically the targets of back edges in the export graph) as\n+                // circuit breakers.  For now we just mark everything on the theory that cycles are\n+                // rare.  For vercel-site on 8/22/2025 there were 106 cycles covering 800 modules\n+                // (or 1.2% of all modules).  So with this analysis we could potentially drop 80% of\n+                // the cycle breaker modules.\n+                circuit_breakers.extend(cycle.iter().map(|n| n.module));\n+            },\n+        )\n+        .await?;\n \n-    Ok(ExportUsageInfo { used_exports }.cell())\n+    Ok(ExportUsageInfo {\n+        used_exports,\n+        circuit_breakers,\n+    }\n+    .cell())\n }\n \n #[turbo_tasks::value(transparent)]\n@@ -37,17 +60,46 @@ pub struct OptionExportUsageInfo(Option<ResolvedVc<ExportUsageInfo>>);\n #[turbo_tasks::value]\n pub struct ExportUsageInfo {\n     used_exports: FxHashMap<ResolvedVc<Box<dyn Module>>, ModuleExportUsageInfo>,\n+    circuit_breakers: FxHashSet<ResolvedVc<Box<dyn Module>>>,\n+}\n+\n+#[turbo_tasks::value(shared)]\n+pub struct ModuleExportUsage {\n+    pub export_usage: ResolvedVc<ModuleExportUsageInfo>,\n+    // Whether this module exists in an import cycle and has been selected to break the cycle.\n+    pub is_circuit_breaker: bool,\n+}\n+\n+#[turbo_tasks::value_impl]\n+impl ModuleExportUsage {\n+    #[turbo_tasks::function]\n+    pub async fn all() -> Result<Vc<Self>> {\n+        Ok(Self {\n+            export_usage: ModuleExportUsageInfo::all().to_resolved().await?,\n+            is_circuit_breaker: true,\n+        }\n+        .cell())\n+    }\n }\n \n impl ExportUsageInfo {\n-    pub fn used_exports(&self, module: ResolvedVc<Box<dyn Module>>) -> Vc<ModuleExportUsageInfo> {\n-        if let Some(exports) = self.used_exports.get(&module) {\n-            exports.clone().cell()\n+    pub async fn used_exports(\n+        &self,\n+        module: ResolvedVc<Box<dyn Module>>,\n+    ) -> Result<Vc<ModuleExportUsage>> {\n+        let is_circuit_breaker = self.circuit_breakers.contains(&module);\n+        let export_usage = if let Some(exports) = self.used_exports.get(&module) {\n+            exports.clone().resolved_cell()\n         } else {\n             // We exclude template files from tree shaking because they are entrypoints to the\n             // module graph.\n-            ModuleExportUsageInfo::all()\n+            ModuleExportUsageInfo::all().to_resolved().await?\n+        };\n+        Ok(ModuleExportUsage {\n+            export_usage,\n+            is_circuit_breaker,\n         }\n+        .cell())\n     }\n }\n "
        },
        {
            "sha": "c1adc83bc9d1e0f929036a74f6296503f4f3bd57",
            "filename": "turbopack/crates/turbopack-ecmascript-runtime/js/src/shared/runtime-utils.ts",
            "status": "modified",
            "additions": 50,
            "deletions": 27,
            "changes": 77,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fshared%2Fruntime-utils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fshared%2Fruntime-utils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fjs%2Fsrc%2Fshared%2Fruntime-utils.ts?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -105,29 +105,52 @@ function createModuleObject(id: ModuleId): Module {\n   }\n }\n \n+type BindingTag = 0\n+const BindingTag_Value = 0 as BindingTag\n+\n+// an arbitrary sequence of bindings as\n+// - a prop name\n+// - BindingTag_Value, a value to be bound directly, or\n+// - 1 or 2 functions to bind as getters and sdetters\n+type EsmBindings = Array<\n+  string | BindingTag | (() => unknown) | ((v: unknown) => void) | unknown\n+>\n+\n /**\n  * Adds the getters to the exports object.\n  */\n-function esm(\n-  exports: Exports,\n-  getters: Array<string | (() => unknown) | ((v: unknown) => void)>\n-) {\n+function esm(exports: Exports, bindings: EsmBindings) {\n   defineProp(exports, '__esModule', { value: true })\n   if (toStringTag) defineProp(exports, toStringTag, { value: 'Module' })\n   let i = 0\n-  while (i < getters.length) {\n-    const propName = getters[i++] as string\n-    // TODO(luke.sandberg): we could support raw values here, but would need a discriminator beyond 'not a function'\n-    const getter = getters[i++] as () => unknown\n-    if (typeof getters[i] === 'function') {\n-      // a setter\n-      defineProp(exports, propName, {\n-        get: getter,\n-        set: getters[i++] as (v: unknown) => void,\n-        enumerable: true,\n-      })\n+  while (i < bindings.length) {\n+    const propName = bindings[i++] as string\n+    const tagOrFunction = bindings[i++]\n+    if (typeof tagOrFunction === 'number') {\n+      if (tagOrFunction === BindingTag_Value) {\n+        defineProp(exports, propName, {\n+          value: bindings[i++],\n+          enumerable: true,\n+          writable: false,\n+        })\n+      } else {\n+        throw new Error(`unexpected tag: ${tagOrFunction}`)\n+      }\n     } else {\n-      defineProp(exports, propName, { get: getter, enumerable: true })\n+      const getterFn = tagOrFunction as () => unknown\n+      if (typeof bindings[i] === 'function') {\n+        const setterFn = bindings[i++] as (v: unknown) => void\n+        defineProp(exports, propName, {\n+          get: getterFn,\n+          set: setterFn,\n+          enumerable: true,\n+        })\n+      } else {\n+        defineProp(exports, propName, {\n+          get: getterFn,\n+          enumerable: true,\n+        })\n+      }\n     }\n   }\n   Object.seal(exports)\n@@ -138,7 +161,7 @@ function esm(\n  */\n function esmExport(\n   this: TurbopackBaseContext<Module>,\n-  getters: Array<string | (() => unknown) | ((v: unknown) => void)>,\n+  bindings: EsmBindings,\n   id: ModuleId | undefined\n ) {\n   let module: Module\n@@ -151,7 +174,7 @@ function esmExport(\n     exports = this.e\n   }\n   module.namespaceObject = exports\n-  esm(exports, getters)\n+  esm(exports, bindings)\n }\n contextPrototype.s = esmExport\n \n@@ -203,7 +226,7 @@ function dynamicExport(\n   id: ModuleId | undefined\n ) {\n   let module: Module\n-  let exports: Module['exports']\n+  let exports: Exports\n   if (id != null) {\n     module = getOverwrittenModule(this.c, id)\n     exports = module.exports\n@@ -275,8 +298,7 @@ function interopEsm(\n   ns: EsmNamespaceObject,\n   allowExportDefault?: boolean\n ) {\n-  const getters: Array<string | (() => unknown) | ((v: unknown) => void)> = []\n-  // The index of the `default` export if any\n+  const bindings: EsmBindings = []\n   let defaultLocation = -1\n   for (\n     let current = raw;\n@@ -285,9 +307,9 @@ function interopEsm(\n     current = getProto(current)\n   ) {\n     for (const key of Object.getOwnPropertyNames(current)) {\n-      getters.push(key, createGetter(raw, key))\n+      bindings.push(key, createGetter(raw, key))\n       if (defaultLocation === -1 && key === 'default') {\n-        defaultLocation = getters.length - 1\n+        defaultLocation = bindings.length - 1\n       }\n     }\n   }\n@@ -297,13 +319,14 @@ function interopEsm(\n   if (!(allowExportDefault && defaultLocation >= 0)) {\n     // Replace the binding with one for the namespace itself in order to preserve iteration order.\n     if (defaultLocation >= 0) {\n-      getters[defaultLocation] = () => raw\n+      // Replace the getter with the value\n+      bindings.splice(defaultLocation, 1, BindingTag_Value, raw)\n     } else {\n-      getters.push('default', () => raw)\n+      bindings.push('default', BindingTag_Value, raw)\n     }\n   }\n \n-  esm(ns, getters)\n+  esm(ns, bindings)\n   return ns\n }\n \n@@ -343,7 +366,7 @@ function asyncLoader(\n   const loader = this.r(moduleId) as (\n     importFunction: EsmImport\n   ) => Promise<Exports>\n-  return loader(this.i.bind(this))\n+  return loader(esmImport.bind(this))\n }\n contextPrototype.A = asyncLoader\n "
        },
        {
            "sha": "09112dec3fbcf13505a82e0c82efd8b2f18752ad",
            "filename": "turbopack/crates/turbopack-ecmascript/src/code_gen.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fcode_gen.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fcode_gen.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fcode_gen.rs?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -45,6 +45,8 @@ pub struct CodeGeneration {\n     pub visitors: Vec<(Vec<AstParentKind>, Box<dyn AstModifier>)>,\n     pub hoisted_stmts: Vec<CodeGenerationHoistedStmt>,\n     pub early_hoisted_stmts: Vec<CodeGenerationHoistedStmt>,\n+    pub late_stmts: Vec<CodeGenerationHoistedStmt>,\n+    pub early_late_stmts: Vec<CodeGenerationHoistedStmt>,\n     pub comments: Option<SwcComments>,\n }\n \n@@ -59,11 +61,15 @@ impl CodeGeneration {\n         visitors: Vec<(Vec<AstParentKind>, Box<dyn AstModifier>)>,\n         hoisted_stmts: Vec<CodeGenerationHoistedStmt>,\n         early_hoisted_stmts: Vec<CodeGenerationHoistedStmt>,\n+        late_stmts: Vec<CodeGenerationHoistedStmt>,\n+        early_late_stmts: Vec<CodeGenerationHoistedStmt>,\n     ) -> Self {\n         CodeGeneration {\n             visitors,\n             hoisted_stmts,\n             early_hoisted_stmts,\n+            late_stmts,\n+            early_late_stmts,\n             ..Default::default()\n         }\n     }"
        },
        {
            "sha": "af914cdb93571f8e7be2c19e775cd30631708943",
            "filename": "turbopack/crates/turbopack-ecmascript/src/lib.rs",
            "status": "modified",
            "additions": 19,
            "deletions": 1,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -2015,14 +2015,21 @@ fn process_content_with_code_gens(\n     let mut root_visitors = Vec::new();\n     let mut early_hoisted_stmts = FxIndexMap::default();\n     let mut hoisted_stmts = FxIndexMap::default();\n+    let mut early_late_stmts = FxIndexMap::default();\n+    let mut late_stmts = FxIndexMap::default();\n     for code_gen in code_gens {\n         for CodeGenerationHoistedStmt { key, stmt } in code_gen.hoisted_stmts.drain(..) {\n             hoisted_stmts.entry(key).or_insert(stmt);\n         }\n         for CodeGenerationHoistedStmt { key, stmt } in code_gen.early_hoisted_stmts.drain(..) {\n             early_hoisted_stmts.insert(key.clone(), stmt);\n         }\n-\n+        for CodeGenerationHoistedStmt { key, stmt } in code_gen.late_stmts.drain(..) {\n+            late_stmts.insert(key.clone(), stmt);\n+        }\n+        for CodeGenerationHoistedStmt { key, stmt } in code_gen.early_late_stmts.drain(..) {\n+            early_late_stmts.insert(key.clone(), stmt);\n+        }\n         for (path, visitor) in &code_gen.visitors {\n             if path.is_empty() {\n                 root_visitors.push(&**visitor);\n@@ -2053,6 +2060,12 @@ fn process_content_with_code_gens(\n                     .chain(hoisted_stmts.into_values())\n                     .map(ModuleItem::Stmt),\n             );\n+            body.extend(\n+                early_late_stmts\n+                    .into_values()\n+                    .chain(late_stmts.into_values())\n+                    .map(ModuleItem::Stmt),\n+            );\n         }\n         Program::Script(Script { body, .. }) => {\n             body.splice(\n@@ -2061,6 +2074,11 @@ fn process_content_with_code_gens(\n                     .into_values()\n                     .chain(hoisted_stmts.into_values()),\n             );\n+            body.extend(\n+                early_late_stmts\n+                    .into_values()\n+                    .chain(late_stmts.into_values()),\n+            );\n         }\n     };\n }"
        },
        {
            "sha": "74cc5e097fb565e1ab1aefcb53ba674e9fa9d55d",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/esm/base.rs",
            "status": "modified",
            "additions": 13,
            "deletions": 5,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fbase.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fbase.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fbase.rs?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -41,6 +41,7 @@ use crate::{\n     analyzer::imports::ImportAnnotations,\n     chunk::{EcmascriptChunkPlaceable, EcmascriptExports},\n     code_gen::{CodeGeneration, CodeGenerationHoistedStmt},\n+    export::Liveness,\n     magic_identifier,\n     references::{\n         esm::EsmExport,\n@@ -62,7 +63,11 @@ pub enum ReferencedAsset {\n #[derive(Debug)]\n pub enum ReferencedAssetIdent {\n     /// The given export (or namespace) is a local binding in the current scope hoisting group.\n-    LocalBinding { ident: RcStr, ctxt: SyntaxContext },\n+    LocalBinding {\n+        ident: RcStr,\n+        ctxt: SyntaxContext,\n+        liveness: Liveness,\n+    },\n     /// The given export (or namespace) should be imported and will be assigned to a new variable.\n     Module {\n         namespace_ident: String,\n@@ -85,9 +90,11 @@ impl ReferencedAssetIdent {\n \n     pub fn as_expr_individual(&self, span: Span) -> Either<Ident, MemberExpr> {\n         match self {\n-            ReferencedAssetIdent::LocalBinding { ident, ctxt } => {\n-                Either::Left(Ident::new(ident.as_str().into(), span, *ctxt))\n-            }\n+            ReferencedAssetIdent::LocalBinding {\n+                ident,\n+                ctxt,\n+                liveness: _,\n+            } => Either::Left(Ident::new(ident.as_str().into(), span, *ctxt)),\n             ReferencedAssetIdent::Module {\n                 namespace_ident,\n                 ctxt,\n@@ -172,13 +179,14 @@ impl ReferencedAsset {\n                     let exports = exports.expand_exports(ModuleExportUsageInfo::all()).await?;\n                     let esm_export = exports.exports.get(export);\n                     match esm_export {\n-                        Some(EsmExport::LocalBinding(_, _)) => {\n+                        Some(EsmExport::LocalBinding(_name, liveness)) => {\n                             // A local binding in a module that is merged in the same group. Use the\n                             // export name as identifier, it will be replaced with the actual\n                             // variable name during AST merging.\n                             return Ok(Some(ReferencedAssetIdent::LocalBinding {\n                                 ident: export.clone(),\n                                 ctxt,\n+                                liveness: *liveness,\n                             }));\n                         }\n                         Some(b @ EsmExport::ImportedBinding(esm_ref, _, _))"
        },
        {
            "sha": "4b3cbc7d874c87c0ab6a449aa6c0dfbc871ae971",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/esm/export.rs",
            "status": "modified",
            "additions": 146,
            "deletions": 67,
            "changes": 213,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fexport.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fexport.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fexport.rs?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -3,11 +3,10 @@ use std::{borrow::Cow, collections::BTreeMap, ops::ControlFlow};\n use anyhow::{Result, bail};\n use rustc_hash::FxHashSet;\n use serde::{Deserialize, Serialize};\n-use smallvec::{SmallVec, smallvec};\n use swc_core::{\n     common::{DUMMY_SP, SyntaxContext},\n     ecma::ast::{\n-        ArrayLit, AssignTarget, Expr, ExprOrSpread, ExprStmt, Ident, SimpleAssignTarget, Stmt, Str,\n+        ArrayLit, AssignTarget, Expr, ExprStmt, Ident, Lit, Number, SimpleAssignTarget, Stmt, Str,\n     },\n     quote, quote_expr,\n };\n@@ -39,12 +38,29 @@ use crate::{\n     utils::module_id_to_lit,\n };\n \n+/// Models the 'liveness' of an esm export\n+/// All ESM exports are technically live but many never change and we can optimize representation to\n+/// support that, this enum tracks the actual behavior of the export binding.\n+#[derive(\n+    Copy, Clone, Hash, Debug, PartialEq, Eq, Serialize, Deserialize, TraceRawVcs, NonLocalValue,\n+)]\n+pub enum Liveness {\n+    // The binding never changes after module evaluation\n+    Constant,\n+    // The binding may change after module evaluation\n+    Live,\n+    // The binding needs to be exposed as mutable to callers.  This isn't part of the spec but is\n+    // part of our module-fragments optimization where we split modules into parts and preserve\n+    // mutability of variables via mutable exports.\n+    Mutable,\n+}\n+\n #[derive(Clone, Hash, Debug, PartialEq, Eq, Serialize, Deserialize, TraceRawVcs, NonLocalValue)]\n pub enum EsmExport {\n     /// A local binding that is exported (export { a } or export const a = 1)\n     ///\n     /// The last bool is true if the binding is a mutable binding\n-    LocalBinding(RcStr, bool),\n+    LocalBinding(RcStr, Liveness),\n     /// An imported binding that is exported (export { a as b } from \"...\")\n     ///\n     /// The last bool is true if the binding is a mutable binding\n@@ -561,8 +577,10 @@ impl EsmExports {\n         eval_context: &EvalContext,\n         module: ResolvedVc<Box<dyn EcmascriptChunkPlaceable>>,\n     ) -> Result<CodeGeneration> {\n-        let export_usage_info = chunking_context.module_export_usage(*ResolvedVc::upcast(module));\n-        let expanded = self.expand_exports(export_usage_info).await?;\n+        let export_usage_info = chunking_context\n+            .module_export_usage(*ResolvedVc::upcast(module))\n+            .await?;\n+        let expanded = self.expand_exports(*export_usage_info.export_usage).await?;\n \n         if scope_hoisting_context.skip_module_exports() && expanded.dynamic_exports.is_empty() {\n             // If the current module is not exposed, no need to generate exports.\n@@ -607,13 +625,21 @@ impl EsmExports {\n             }\n         }\n \n+        #[derive(Eq, PartialEq)]\n+        enum ExportBinding {\n+            Getter(Expr),\n+            GetterSetter(Expr, Expr),\n+            Value(Expr),\n+            None,\n+        }\n+\n         let mut getters = Vec::new();\n         for (exported, local) in &expanded.exports {\n-            let exprs: SmallVec<[Expr; 1]> = match local {\n-                EsmExport::Error => smallvec![quote!(\n+            let exprs: ExportBinding = match local {\n+                EsmExport::Error => ExportBinding::Getter(quote!(\n                     \"(() => { throw new Error(\\\"Failed binding. See build errors!\\\"); })\" as Expr,\n-                )],\n-                EsmExport::LocalBinding(name, mutable) => {\n+                )),\n+                EsmExport::LocalBinding(name, liveness) => {\n                     // TODO ideally, this information would just be stored in\n                     // EsmExport::LocalBinding and we wouldn't have to re-correlated this\n                     // information with eval_context.imports.exports to get the syntax context.\n@@ -639,21 +665,22 @@ impl EsmExports {\n                         )\n                     });\n \n-                    if *mutable {\n-                        let local = Ident::new(local.into(), DUMMY_SP, ctxt);\n-                        smallvec![\n+                    let local = Ident::new(local.into(), DUMMY_SP, ctxt);\n+                    match (liveness, export_usage_info.is_circuit_breaker) {\n+                        (Liveness::Constant, false) => ExportBinding::Value(Expr::Ident(local)),\n+                        // If the value might change or we are a circuit breaker we must bind a\n+                        // getter to avoid capturing the value at the wrong time.\n+                        (Liveness::Live, _) | (Liveness::Constant, true) => {\n+                            ExportBinding::Getter(quote!(\"() => $local\" as Expr, local = local))\n+                        }\n+                        (Liveness::Mutable, _) => ExportBinding::GetterSetter(\n                             quote!(\"() => $local\" as Expr, local = local.clone()),\n                             quote!(\n                                 \"($new) => $local = $new\" as Expr,\n-                                local = local,\n+                                local: AssignTarget = AssignTarget::Simple(local.into()),\n                                 new = Ident::new(format!(\"new_{name}\").into(), DUMMY_SP, ctxt),\n-                            )\n-                        ]\n-                    } else {\n-                        smallvec![quote!(\n-                            \"() => $local\" as Expr,\n-                            local = Ident::new((name as &str).into(), DUMMY_SP, ctxt)\n-                        )]\n+                            ),\n+                        ),\n                     }\n                 }\n                 EsmExport::ImportedBinding(esm_ref, name, mutable) => {\n@@ -664,30 +691,62 @@ impl EsmExports {\n                         .await?\n                         .map(|ident| {\n                             let expr = ident.as_expr_individual(DUMMY_SP);\n-                            if *mutable {\n-                                smallvec![\n-                                quote!(\n-                                    \"() => $expr\" as Expr,\n-                                    expr: Expr = expr.clone().map_either(Expr::from, Expr::from).into_inner(),\n-                                ),\n-                                quote!(\n-                                    \"($new) => $lhs = $new\" as Expr,\n-                                    lhs: AssignTarget = AssignTarget::Simple(\n-                                        expr.map_either(|i| SimpleAssignTarget::Ident(i.into()), SimpleAssignTarget::Member).into_inner()),\n-                                    new = Ident::new(\n-                                        format!(\"new_{name}\").into(),\n-                                        DUMMY_SP,\n-                                        Default::default()\n-                                    ),\n-                                )\n-                                ]\n-                            } else {\n-                                smallvec![quote!(\n-                                    \"(() => $expr)\" as Expr,\n-                                    expr: Expr = expr.map_either(Expr::from, Expr::from).into_inner()\n-                                )]\n+                            let read_expr = expr.map_either(Expr::from, Expr::from).into_inner();\n+                            use crate::references::esm::base::ReferencedAssetIdent;\n+                            match &ident {\n+                                ReferencedAssetIdent::LocalBinding {ctxt, liveness,.. } => {\n+                                    debug_assert!(*mutable == (*liveness == Liveness::Mutable), \"If the re-export is mutable, the merged local must be too\");\n+                                    // If we are re-exporting something but got merged with it we can treat it like a local export\n+                                     match (liveness, export_usage_info.is_circuit_breaker) {\n+                                        (Liveness::Constant, false) => {\n+                                            ExportBinding::Value(read_expr)\n+                                        }\n+                                        // If the value might change or we are a circuit breaker we must bind a\n+                                        // getter to avoid capturing the value at the wrong time.\n+                                        (Liveness::Live, _) | (Liveness::Constant, true) => {\n+                                            // In the constant case, we could still export as a value if we knew that the module\n+                                            // came _before_ us, but we don't at this point.\n+                                            ExportBinding::Getter(quote!(\"() => $local\" as Expr, local: Expr = read_expr))\n+                                        }\n+                                        (Liveness::Mutable, _) => {\n+                                            let assign_target = AssignTarget::Simple(\n+                                                        ident.as_expr_individual(DUMMY_SP).map_either(|i| SimpleAssignTarget::Ident(i.into()), SimpleAssignTarget::Member).into_inner());\n+                                            ExportBinding::GetterSetter(\n+                                                quote!(\"() => $local\" as Expr, local: Expr= read_expr.clone()),\n+                                                quote!(\n+                                                    \"($new) => $lhs = $new\" as Expr,\n+                                                    lhs: AssignTarget = assign_target,\n+                                                    new = Ident::new(format!(\"new_{name}\").into(), DUMMY_SP, *ctxt),\n+                                                )\n+                                            )\n+                                        }\n+                                    }\n+                                },\n+                                ReferencedAssetIdent::Module { namespace_ident:_, ctxt:_, export:_ } => {\n+                                    // Otherwise we need to bind as a getter to preserve the 'liveness' of the other modules bindings.\n+                                    // TODO: If this becomes important it might be faster to use the runtime to copy PropertyDescriptors across modules\n+                                    // since that would reduce allocations and optimize access. We could do this by passing the module-id up.\n+                                    let getter = quote!(\"() => $expr\" as Expr, expr: Expr = read_expr);\n+                                    let assign_target = AssignTarget::Simple(\n+                                                    ident.as_expr_individual(DUMMY_SP).map_either(|i| SimpleAssignTarget::Ident(i.into()), SimpleAssignTarget::Member).into_inner());\n+                                    if *mutable {\n+                                        ExportBinding::GetterSetter(\n+                                            getter,\n+                                            quote!(\n+                                                \"($new) => $lhs = $new\" as Expr,\n+                                                lhs: AssignTarget = assign_target,\n+                                                new = Ident::new(\n+                                                    format!(\"new_{name}\").into(),\n+                                                    DUMMY_SP,\n+                                                    Default::default()\n+                                                ),\n+                                            ))\n+                                    } else {\n+                                        ExportBinding::Getter(getter)\n+                                    }\n+                                }\n                             }\n-                        }).unwrap_or_default()\n+                        }).unwrap_or(ExportBinding::None)\n                 }\n                 EsmExport::ImportedNamespace(esm_ref) => {\n                     let referenced_asset =\n@@ -696,40 +755,63 @@ impl EsmExports {\n                         .get_ident(chunking_context, None, scope_hoisting_context)\n                         .await?\n                         .map(|ident| {\n-                            smallvec![quote!(\n-                                \"(() => $imported)\" as Expr,\n-                                imported: Expr = ident.as_expr(DUMMY_SP, false)\n-                            )]\n+                            let imported = ident.as_expr(DUMMY_SP, false);\n+                            if export_usage_info.is_circuit_breaker {\n+                                ExportBinding::Getter(quote!(\n+                                    \"(() => $imported)\" as Expr,\n+                                    imported: Expr = imported\n+                                ))\n+                            } else {\n+                                ExportBinding::Value(imported)\n+                            }\n                         })\n-                        .unwrap_or_default()\n+                        .unwrap_or(ExportBinding::None)\n                 }\n             };\n-            if !exprs.is_empty() {\n+            if exprs != ExportBinding::None {\n                 getters.push(Some(\n-                    Expr::Lit(swc_core::ecma::ast::Lit::Str(Str {\n+                    Expr::Lit(Lit::Str(Str {\n                         span: DUMMY_SP,\n                         value: exported.as_str().into(),\n                         raw: None,\n                     }))\n                     .into(),\n                 ));\n-                getters.extend(exprs.into_iter().map(|e| Some(ExprOrSpread::from(e))));\n+                match exprs {\n+                    ExportBinding::Getter(getter) => {\n+                        getters.push(Some(getter.into()));\n+                    }\n+                    ExportBinding::GetterSetter(getter, setter) => {\n+                        getters.push(Some(getter.into()));\n+                        getters.push(Some(setter.into()));\n+                    }\n+                    ExportBinding::Value(value) => {\n+                        // We need to push a discriminator in this case to make the fact that we are\n+                        // binding a value unambiguous to the runtime.\n+                        getters.push(Some(Expr::Lit(Lit::Num(Number::from(0))).into()));\n+                        getters.push(Some(value.into()));\n+                    }\n+                    ExportBinding::None => {}\n+                };\n             }\n         }\n         let getters = Expr::Array(ArrayLit {\n             span: DUMMY_SP,\n             elems: getters,\n         });\n         let dynamic_stmt = if !dynamic_exports.is_empty() {\n-            Some(Stmt::Expr(ExprStmt {\n-                span: DUMMY_SP,\n-                expr: Expr::from_exprs(dynamic_exports),\n-            }))\n+            vec![CodeGenerationHoistedStmt::new(\n+                rcstr!(\"__turbopack_dynamic__\"),\n+                Stmt::Expr(ExprStmt {\n+                    span: DUMMY_SP,\n+                    expr: Expr::from_exprs(dynamic_exports),\n+                }),\n+            )]\n         } else {\n-            None\n+            vec![]\n         };\n \n-        let early_hoisted_stmts = vec![CodeGenerationHoistedStmt::new(\n+        let esm_exports = vec![CodeGenerationHoistedStmt::new(\n             rcstr!(\"__turbopack_esm__\"),\n             if let Some(module) = scope_hoisting_context.module() {\n                 let id = module.chunk_item_id(Vc::upcast(chunking_context)).await?;\n@@ -745,15 +827,12 @@ impl EsmExports {\n                 )\n             },\n         )];\n-\n-        Ok(CodeGeneration::new(\n-            vec![],\n-            [dynamic_stmt\n-                .map(|stmt| CodeGenerationHoistedStmt::new(rcstr!(\"__turbopack_dynamic__\"), stmt))]\n-            .into_iter()\n-            .flatten()\n-            .collect(),\n-            early_hoisted_stmts,\n-        ))\n+        // If we are a circuit breaker module we need to expose exports first so they are available\n+        // to a cyclic importer otherwise we put them at the bottom of the module factory.\n+        Ok(if export_usage_info.is_circuit_breaker {\n+            CodeGeneration::new(vec![], dynamic_stmt, esm_exports, vec![], vec![])\n+        } else {\n+            CodeGeneration::new(vec![], vec![], vec![], dynamic_stmt, esm_exports)\n+        })\n     }\n }"
        },
        {
            "sha": "d5eef8f1f6a409e25244d4c62cc95c08ea299a78",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/esm/mod.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fmod.rs?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -11,7 +11,7 @@ pub use self::{\n     base::EsmAssetReference,\n     binding::EsmBinding,\n     dynamic::EsmAsyncAssetReference,\n-    export::{EsmExport, EsmExports, FoundExportType},\n+    export::{EsmExport, EsmExports, FoundExportType, Liveness},\n     meta::{ImportMetaBinding, ImportMetaRef},\n     module_item::EsmModuleItem,\n     url::{UrlAssetReference, UrlRewriteBehavior},"
        },
        {
            "sha": "770fef400406039481fe709d292b9fcf88858a42",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/mod.rs",
            "status": "modified",
            "additions": 65,
            "deletions": 33,
            "changes": 98,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -141,6 +141,7 @@ use crate::{\n     },\n     chunk::EcmascriptExports,\n     code_gen::{CodeGen, CodeGens, IntoCodeGenReference},\n+    export::Liveness,\n     magic_identifier,\n     parse::parse,\n     references::{\n@@ -3219,28 +3220,6 @@ fn as_parent_path(ast_path: &AstNodePath<AstParentNodeRef<'_>>) -> Vec<AstParent\n     ast_path.iter().map(|n| n.kind()).collect()\n }\n \n-fn for_each_ident_in_decl(decl: &Decl, f: &mut impl FnMut(RcStr)) {\n-    match decl {\n-        Decl::Class(ClassDecl { ident, .. }) | Decl::Fn(FnDecl { ident, .. }) => {\n-            f(ident.sym.as_str().into());\n-        }\n-        Decl::Var(var_decl) => {\n-            let decls = &*var_decl.decls;\n-            decls\n-                .iter()\n-                .for_each(|VarDeclarator { name, .. }| for_each_ident_in_pat(name, f));\n-        }\n-        Decl::Using(using_decl) => {\n-            let decls = &*using_decl.decls;\n-            decls\n-                .iter()\n-                .for_each(|VarDeclarator { name, .. }| for_each_ident_in_pat(name, f));\n-        }\n-        Decl::TsInterface(_) | Decl::TsTypeAlias(_) | Decl::TsEnum(_) | Decl::TsModule(_) => {\n-            // ignore typescript for code generation\n-        }\n-    }\n-}\n fn for_each_ident_in_pat(pat: &Pat, f: &mut impl FnMut(RcStr)) {\n     match pat {\n         Pat::Ident(BindingIdent { id, .. }) => {\n@@ -3301,8 +3280,8 @@ impl VisitAstPath for ModuleReferencesVisitor<'_> {\n \n         if export.src.is_none() {\n             for spec in export.specifiers.iter() {\n-                fn to_string(name: &ModuleExportName) -> &Atom {\n-                    name.atom()\n+                fn to_rcstr(name: &ModuleExportName) -> RcStr {\n+                    name.atom().as_str().into()\n                 }\n                 match spec {\n                     ExportSpecifier::Namespace(_) => {\n@@ -3318,8 +3297,8 @@ impl VisitAstPath for ModuleReferencesVisitor<'_> {\n                         );\n                     }\n                     ExportSpecifier::Named(ExportNamedSpecifier { orig, exported, .. }) => {\n-                        let key = to_string(exported.as_ref().unwrap_or(orig)).as_str().into();\n-                        let binding_name = to_string(orig).as_str().into();\n+                        let key = to_rcstr(exported.as_ref().unwrap_or(orig));\n+                        let binding_name = to_rcstr(orig);\n                         let export = {\n                             let imported_binding = if let ModuleExportName::Ident(ident) = orig {\n                                 self.eval_context.imports.get_binding(&ident.to_id())\n@@ -3339,7 +3318,16 @@ impl VisitAstPath for ModuleReferencesVisitor<'_> {\n                                     EsmExport::ImportedNamespace(ResolvedVc::upcast(esm_ref))\n                                 }\n                             } else {\n-                                EsmExport::LocalBinding(binding_name, is_fake_esm)\n+                                EsmExport::LocalBinding(\n+                                    binding_name,\n+                                    if is_fake_esm {\n+                                        Liveness::Mutable\n+                                    } else {\n+                                        // If this is `export {foo} from 'mod'` and `foo` is a const\n+                                        // in mod then we could export as Const here.\n+                                        Liveness::Live\n+                                    },\n+                                )\n                             }\n                         };\n                         self.esm_exports.insert(key, export);\n@@ -3358,10 +3346,45 @@ impl VisitAstPath for ModuleReferencesVisitor<'_> {\n         export: &'ast ExportDecl,\n         ast_path: &mut AstNodePath<AstParentNodeRef<'r>>,\n     ) {\n-        for_each_ident_in_decl(&export.decl, &mut |name| {\n-            self.esm_exports\n-                .insert(name.clone(), EsmExport::LocalBinding(name, false));\n-        });\n+        {\n+            let decl: &Decl = &export.decl;\n+            let insert_export_binding = &mut |name: RcStr, liveness: Liveness| {\n+                self.esm_exports\n+                    .insert(name.clone(), EsmExport::LocalBinding(name, liveness));\n+            };\n+            match decl {\n+                Decl::Class(ClassDecl { ident, .. }) | Decl::Fn(FnDecl { ident, .. }) => {\n+                    // TODO: examine whether the value is ever mutated rather than just checking\n+                    // 'const'\n+                    insert_export_binding(ident.sym.as_str().into(), Liveness::Live);\n+                }\n+                Decl::Var(var_decl) => {\n+                    // TODO: examine whether the value is ever mutated rather than just checking\n+                    // 'const'\n+                    let liveness = match var_decl.kind {\n+                        VarDeclKind::Var => Liveness::Live,\n+                        VarDeclKind::Let => Liveness::Live,\n+                        VarDeclKind::Const => Liveness::Constant,\n+                    };\n+                    let decls = &*var_decl.decls;\n+                    decls.iter().for_each(|VarDeclarator { name, .. }| {\n+                        for_each_ident_in_pat(name, &mut |name| {\n+                            insert_export_binding(name, liveness)\n+                        })\n+                    });\n+                }\n+                Decl::Using(_) => {\n+                    // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export#:~:text=You%20cannot%20use%20export%20on%20a%20using%20or%20await%20using%20declaration\n+                    unreachable!(\"using declarations can not be exported\");\n+                }\n+                Decl::TsInterface(_)\n+                | Decl::TsTypeAlias(_)\n+                | Decl::TsEnum(_)\n+                | Decl::TsModule(_) => {\n+                    // ignore typescript for code generation\n+                }\n+            }\n+        };\n         self.analysis\n             .add_code_gen(EsmModuleItem::new(as_parent_path(ast_path).into()));\n         export.visit_children_with_ast_path(self, ast_path);\n@@ -3374,7 +3397,11 @@ impl VisitAstPath for ModuleReferencesVisitor<'_> {\n     ) {\n         self.esm_exports.insert(\n             rcstr!(\"default\"),\n-            EsmExport::LocalBinding(magic_identifier::mangle(\"default export\").into(), false),\n+            EsmExport::LocalBinding(\n+                magic_identifier::mangle(\"default export\").into(),\n+                // The expression passed to `export default` cannot be mutated\n+                Liveness::Constant,\n+            ),\n         );\n         self.analysis\n             .add_code_gen(EsmModuleItem::new(as_parent_path(ast_path).into()));\n@@ -3395,7 +3422,12 @@ impl VisitAstPath for ModuleReferencesVisitor<'_> {\n                             .as_ref()\n                             .map(|i| i.sym.as_str().into())\n                             .unwrap_or_else(|| magic_identifier::mangle(\"default export\").into()),\n-                        false,\n+                        // Default export declarations can only be mutated if they have a name.\n+                        if ident.is_some() {\n+                            Liveness::Live\n+                        } else {\n+                            Liveness::Constant\n+                        },\n                     ),\n                 );\n             }"
        },
        {
            "sha": "3e020863c25a990fc17cc49d1ec4964ae82b342d",
            "filename": "turbopack/crates/turbopack-ecmascript/src/side_effect_optimization/facade/module.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fmodule.rs?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -22,6 +22,7 @@ use crate::{\n     EcmascriptModuleContentOptions, EcmascriptOptions, MergedEcmascriptModule, SpecifiedModuleType,\n     chunk::{EcmascriptChunkPlaceable, EcmascriptExports},\n     code_gen::CodeGens,\n+    export::Liveness,\n     parse::ParseResult,\n     references::{\n         async_module::{AsyncModule, OptionAsyncModule},\n@@ -251,7 +252,7 @@ impl EcmascriptChunkPlaceable for EcmascriptModuleFacadeModule {\n                 for (name, export) in &esm_exports.exports {\n                     let name = name.clone();\n                     match export {\n-                        EsmExport::LocalBinding(_, mutable) => {\n+                        EsmExport::LocalBinding(_, liveness) => {\n                             exports.insert(\n                                 name.clone(),\n                                 EsmExport::ImportedBinding(\n@@ -265,7 +266,7 @@ impl EcmascriptChunkPlaceable for EcmascriptModuleFacadeModule {\n                                         .await?,\n                                     ),\n                                     name,\n-                                    *mutable,\n+                                    *liveness == Liveness::Mutable,\n                                 ),\n                             );\n                         }"
        },
        {
            "sha": "5280b07b5bd90ad4584a8749c1218de9bffc5758",
            "filename": "turbopack/crates/turbopack-nodejs/src/chunking_context.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fchunking_context.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fchunking_context.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fchunking_context.rs?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -19,7 +19,7 @@ use turbopack_core::{\n     module_graph::{\n         ModuleGraph,\n         chunk_group_info::ChunkGroup,\n-        export_usage::{ExportUsageInfo, ModuleExportUsageInfo},\n+        export_usage::{ExportUsageInfo, ModuleExportUsage},\n     },\n     output::{OutputAsset, OutputAssets},\n };\n@@ -529,11 +529,13 @@ impl ChunkingContext for NodeJsChunkingContext {\n     async fn module_export_usage(\n         self: Vc<Self>,\n         module: ResolvedVc<Box<dyn Module>>,\n-    ) -> Result<Vc<ModuleExportUsageInfo>> {\n+    ) -> Result<Vc<ModuleExportUsage>> {\n         if let Some(export_usage) = self.await?.export_usage {\n-            Ok(export_usage.await?.used_exports(module))\n+            Ok(export_usage.await?.used_exports(module).await?)\n         } else {\n-            Ok(ModuleExportUsageInfo::all())\n+            // In development mode, we don't have export usage info, so we assume all exports are\n+            // used.\n+            Ok(ModuleExportUsage::all())\n         }\n     }\n }"
        },
        {
            "sha": "fdf51235849183ba12033111ad64cf609ac2a2e3",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/exports/live/input/const_default_export_function.js",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Flive%2Finput%2Fconst_default_export_function.js",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Flive%2Finput%2Fconst_default_export_function.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Flive%2Finput%2Fconst_default_export_function.js?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -0,0 +1,3 @@\n+export default function defaultFunction() {\n+  return 'defaultFunction'\n+}"
        },
        {
            "sha": "d2926e3448177b38ce081c46348d8a826590e684",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/exports/live/input/index.js",
            "status": "added",
            "additions": 59,
            "deletions": 0,
            "changes": 59,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Flive%2Finput%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Flive%2Finput%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Flive%2Finput%2Findex.js?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -0,0 +1,59 @@\n+import * as liveExports from './live_exports.js'\n+import {\n+  default as liveDefaultClass,\n+  setDefaultClass,\n+} from './live_default_class.js'\n+import * as constDefaultExportFunction from './const_default_export_function.js'\n+\n+it('hoisted declarations are live', () => {\n+  expect(liveExports.bar()).toBe('bar')\n+  liveExports.setBar(() => 'patched')\n+  expect(liveExports.bar()).toBe('patched')\n+})\n+\n+it('default class export declarations are live', () => {\n+  expect(liveDefaultClass.default()).toBe('defaultClass')\n+  setDefaultClass(\n+    class {\n+      static default() {\n+        return 'patched'\n+      }\n+    }\n+  )\n+  expect(liveDefaultClass.default()).toBe('patched')\n+})\n+\n+it('default function export declarations are live', () => {\n+  expect(liveExports.default()).toBe('defaultFunction')\n+  liveExports.setDefaultFunction(() => 'patched')\n+  expect(liveExports.default()).toBe('patched')\n+})\n+\n+it('exported lets are live', () => {\n+  expect(liveExports.foo).toBe('foo')\n+  liveExports.setFoo('new')\n+  expect(liveExports.foo).toBe('new')\n+})\n+\n+it('exported bindings that are not mutated are not live', () => {\n+  // These should be bound to values, but we don't have the analysis yet\n+  expectGetter(liveExports, 'obviouslyneverMutated')\n+  expectGetter(liveExports, 'neverMutated')\n+  expectGetter(constDefaultExportFunction, 'default')\n+})\n+\n+it('exported bindings that are free vars are live', () => {\n+  expectGetter(liveExports, 'g')\n+})\n+\n+function expectGetter(ns, propName) {\n+  const gDesc = Object.getOwnPropertyDescriptor(ns, propName)\n+  expect(gDesc).toEqual(\n+    expect.objectContaining({\n+      enumerable: true,\n+      configurable: false,\n+      set: undefined,\n+    })\n+  )\n+  expect(gDesc).toHaveProperty('get')\n+}"
        },
        {
            "sha": "e72753a337610f21bd8b8b90d7aa3c91070197b3",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/exports/live/input/live_default_class.js",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Flive%2Finput%2Flive_default_class.js",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Flive%2Finput%2Flive_default_class.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Flive%2Finput%2Flive_default_class.js?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -0,0 +1,9 @@\n+export default class DefaultClass {\n+  static default() {\n+    return 'defaultClass'\n+  }\n+}\n+\n+export function setDefaultClass(c) {\n+  DefaultClass = c\n+}"
        },
        {
            "sha": "37614bf8fd2efde80fbb28b27bc28231fbd0db49",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/exports/live/input/live_exports.js",
            "status": "added",
            "additions": 27,
            "deletions": 0,
            "changes": 27,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Flive%2Finput%2Flive_exports.js",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Flive%2Finput%2Flive_exports.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Flive%2Finput%2Flive_exports.js?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -0,0 +1,27 @@\n+let foo = 'foo'\n+\n+function setFoo(n) {\n+  foo = n\n+}\n+let neverMutated = 'neverMutated'\n+const obviouslyneverMutated = 'obviouslyneverMutated'\n+export { foo, setFoo, neverMutated, obviouslyneverMutated }\n+\n+// biome-ignore lint/suspicious/noFunctionAssign: testing crimes\n+export function bar() {\n+  return 'bar'\n+}\n+\n+export function setBar(b) {\n+  bar = b\n+}\n+\n+export { globalThis as g }\n+\n+export default function defaultFunction() {\n+  return 'defaultFunction'\n+}\n+\n+export function setDefaultFunction(f) {\n+  defaultFunction = f\n+}"
        },
        {
            "sha": "bf30b867b72132fe909283a871c7916ee8109fb5",
            "filename": "turbopack/crates/turbopack-tests/tests/execution/turbopack/exports/live/options.json",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Flive%2Foptions.json",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Flive%2Foptions.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution%2Fturbopack%2Fexports%2Flive%2Foptions.json?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -0,0 +1,3 @@\n+{\n+  \"scopeHoisting\": false\n+}"
        },
        {
            "sha": "16d25049adf9c4af323ce0f59526079520edd21c",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/reexport-with-locals/output/bf321_tests_snapshot_intermediate-tree-shake_reexport-with-locals_input_328b13f8._.js",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Freexport-with-locals%2Foutput%2Fbf321_tests_snapshot_intermediate-tree-shake_reexport-with-locals_input_328b13f8._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Freexport-with-locals%2Foutput%2Fbf321_tests_snapshot_intermediate-tree-shake_reexport-with-locals_input_328b13f8._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Freexport-with-locals%2Foutput%2Fbf321_tests_snapshot_intermediate-tree-shake_reexport-with-locals_input_328b13f8._.js?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -2,30 +2,26 @@\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/reexport-with-locals/input/index.js [test] (ecmascript)\", ((__turbopack_context__) => {\n \"use strict\";\n \n-__turbopack_context__.s([]);\n var __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$intermediate$2d$tree$2d$shake$2f$reexport$2d$with$2d$locals$2f$input$2f$node_modules$2f$lib$2f$index$2e$js__$5b$test$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/reexport-with-locals/input/node_modules/lib/index.js [test] (ecmascript) <locals>\");\n ;\n (0, __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$intermediate$2d$tree$2d$shake$2f$reexport$2d$with$2d$locals$2f$input$2f$node_modules$2f$lib$2f$index$2e$js__$5b$test$5d$__$28$ecmascript$29$__$3c$locals$3e$__[\"local\"])();\n+__turbopack_context__.s([]);\n }),\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/reexport-with-locals/input/node_modules/lib/unused.js [test] (ecmascript)\", ((__turbopack_context__) => {\n \"use strict\";\n \n-__turbopack_context__.s([]);\n function unusedStar() {}\n+__turbopack_context__.s([]);\n }),\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/reexport-with-locals/input/node_modules/lib/unused-star.js [test] (ecmascript)\", ((__turbopack_context__) => {\n \"use strict\";\n \n-__turbopack_context__.s([]);\n function unused() {}\n+__turbopack_context__.s([]);\n }),\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/reexport-with-locals/input/node_modules/lib/index.js [test] (ecmascript) <locals>\", ((__turbopack_context__) => {\n \"use strict\";\n \n-__turbopack_context__.s([\n-    \"local\",\n-    ()=>local\n-]);\n var __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$intermediate$2d$tree$2d$shake$2f$reexport$2d$with$2d$locals$2f$input$2f$node_modules$2f$lib$2f$unused$2e$js__$5b$test$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/reexport-with-locals/input/node_modules/lib/unused.js [test] (ecmascript)\");\n var __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$intermediate$2d$tree$2d$shake$2f$reexport$2d$with$2d$locals$2f$input$2f$node_modules$2f$lib$2f$unused$2d$star$2e$js__$5b$test$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/reexport-with-locals/input/node_modules/lib/unused-star.js [test] (ecmascript)\");\n ;\n@@ -37,6 +33,10 @@ function localUnused() {\n     console.log('This is a local unused function');\n }\n ;\n+__turbopack_context__.s([\n+    \"local\",\n+    ()=>local\n+]);\n }),\n ]);\n "
        },
        {
            "sha": "381f676f9355017cf481d7afd34f6e7ffb69611a",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/reexport-with-locals/output/bf321_tests_snapshot_intermediate-tree-shake_reexport-with-locals_input_328b13f8._.js.map",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Freexport-with-locals%2Foutput%2Fbf321_tests_snapshot_intermediate-tree-shake_reexport-with-locals_input_328b13f8._.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Freexport-with-locals%2Foutput%2Fbf321_tests_snapshot_intermediate-tree-shake_reexport-with-locals_input_328b13f8._.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Freexport-with-locals%2Foutput%2Fbf321_tests_snapshot_intermediate-tree-shake_reexport-with-locals_input_328b13f8._.js.map?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -2,8 +2,8 @@\n   \"version\": 3,\n   \"sources\": [],\n   \"sections\": [\n-    {\"offset\": {\"line\": 4, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/reexport-with-locals/input/index.js\"],\"sourcesContent\":[\"import { local } from 'lib'\\n\\nlocal()\\n\"],\"names\":[],\"mappings\":\";AAAA;;AAEA,IAAA,yRAAK\"}},\n-    {\"offset\": {\"line\": 12, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/reexport-with-locals/input/node_modules/lib/unused.js\"],\"sourcesContent\":[\"export function unusedStar() {}\\n\"],\"names\":[],\"mappings\":\";AAAO,SAAS,cAAc\",\"ignoreList\":[0]}},\n-    {\"offset\": {\"line\": 18, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/reexport-with-locals/input/node_modules/lib/unused-star.js\"],\"sourcesContent\":[\"export function unused() {}\\n\"],\"names\":[],\"mappings\":\";AAAO,SAAS,UAAU\",\"ignoreList\":[0]}},\n-    {\"offset\": {\"line\": 24, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/reexport-with-locals/input/node_modules/lib/index.js\"],\"sourcesContent\":[\"export { unused } from './unused.js'\\nexport * from './unused-star.js'\\n\\nfunction local() {\\n  console.log('This is a local function')\\n}\\nfunction localUnused() {\\n  console.log('This is a local unused function')\\n}\\n\\nexport { local, localUnused }\\n\"],\"names\":[],\"mappings\":\";;;;AAAA;AACA;;;AAEA,SAAS;IACP,QAAQ,GAAG,CAAC;AACd;AACA,SAAS;IACP,QAAQ,GAAG,CAAC;AACd\",\"ignoreList\":[0]}}]\n+    {\"offset\": {\"line\": 4, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/reexport-with-locals/input/index.js\"],\"sourcesContent\":[\"import { local } from 'lib'\\n\\nlocal()\\n\"],\"names\":[],\"mappings\":\"AAAA;;AAEA,IAAA,yRAAK\"}},\n+    {\"offset\": {\"line\": 12, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/reexport-with-locals/input/node_modules/lib/unused.js\"],\"sourcesContent\":[\"export function unusedStar() {}\\n\"],\"names\":[],\"mappings\":\"AAAO,SAAS,cAAc\",\"ignoreList\":[0]}},\n+    {\"offset\": {\"line\": 18, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/reexport-with-locals/input/node_modules/lib/unused-star.js\"],\"sourcesContent\":[\"export function unused() {}\\n\"],\"names\":[],\"mappings\":\"AAAO,SAAS,UAAU\",\"ignoreList\":[0]}},\n+    {\"offset\": {\"line\": 24, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/reexport-with-locals/input/node_modules/lib/index.js\"],\"sourcesContent\":[\"export { unused } from './unused.js'\\nexport * from './unused-star.js'\\n\\nfunction local() {\\n  console.log('This is a local function')\\n}\\nfunction localUnused() {\\n  console.log('This is a local unused function')\\n}\\n\\nexport { local, localUnused }\\n\"],\"names\":[],\"mappings\":\"AAAA;AACA;;;AAEA,SAAS;IACP,QAAQ,GAAG,CAAC;AACd;AACA,SAAS;IACP,QAAQ,GAAG,CAAC;AACd\",\"ignoreList\":[0]}}]\n }\n\\ No newline at end of file"
        },
        {
            "sha": "5b9b180237800816fbfc1f127b71ee6559e3056c",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/rename-side-effect-free-facade/output/53446_snapshot_intermediate-tree-shake_rename-side-effect-free-facade_input_cbcbaae7._.js",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Frename-side-effect-free-facade%2Foutput%2F53446_snapshot_intermediate-tree-shake_rename-side-effect-free-facade_input_cbcbaae7._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Frename-side-effect-free-facade%2Foutput%2F53446_snapshot_intermediate-tree-shake_rename-side-effect-free-facade_input_cbcbaae7._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Frename-side-effect-free-facade%2Foutput%2F53446_snapshot_intermediate-tree-shake_rename-side-effect-free-facade_input_cbcbaae7._.js?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -2,29 +2,30 @@\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/rename-side-effect-free-facade/input/index.js [test] (ecmascript)\", ((__turbopack_context__) => {\n \"use strict\";\n \n-__turbopack_context__.s([]);\n var __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$intermediate$2d$tree$2d$shake$2f$rename$2d$side$2d$effect$2d$free$2d$facade$2f$input$2f$node_modules$2f$lib$2f$a$2e$js__$5b$test$5d$__$28$ecmascript$29$__$3c$export__a__as__a0$3e$__ = __turbopack_context__.i(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/rename-side-effect-free-facade/input/node_modules/lib/a.js [test] (ecmascript) <export a as a0>\");\n ;\n console.log(__TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$intermediate$2d$tree$2d$shake$2f$rename$2d$side$2d$effect$2d$free$2d$facade$2f$input$2f$node_modules$2f$lib$2f$a$2e$js__$5b$test$5d$__$28$ecmascript$29$__$3c$export__a__as__a0$3e$__[\"a0\"]);\n+__turbopack_context__.s([]);\n }),\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/rename-side-effect-free-facade/input/node_modules/lib/a.js [test] (ecmascript)\", ((__turbopack_context__) => {\n \"use strict\";\n \n+const a = 'a';\n+const a_unused = 'a_unused';\n __turbopack_context__.s([\n     \"a\",\n-    ()=>a\n+    0,\n+    a\n ]);\n-const a = 'a';\n-const a_unused = 'a_unused';\n }),\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/rename-side-effect-free-facade/input/node_modules/lib/a.js [test] (ecmascript) <export a as a0>\", ((__turbopack_context__) => {\n \"use strict\";\n \n+var __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$intermediate$2d$tree$2d$shake$2f$rename$2d$side$2d$effect$2d$free$2d$facade$2f$input$2f$node_modules$2f$lib$2f$a$2e$js__$5b$test$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/rename-side-effect-free-facade/input/node_modules/lib/a.js [test] (ecmascript)\");\n __turbopack_context__.s([\n     \"a0\",\n     ()=>__TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$intermediate$2d$tree$2d$shake$2f$rename$2d$side$2d$effect$2d$free$2d$facade$2f$input$2f$node_modules$2f$lib$2f$a$2e$js__$5b$test$5d$__$28$ecmascript$29$__[\"a\"]\n ]);\n-var __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$intermediate$2d$tree$2d$shake$2f$rename$2d$side$2d$effect$2d$free$2d$facade$2f$input$2f$node_modules$2f$lib$2f$a$2e$js__$5b$test$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/rename-side-effect-free-facade/input/node_modules/lib/a.js [test] (ecmascript)\");\n }),\n ]);\n "
        },
        {
            "sha": "fdfdadc95be3125f6911da53f061b5e36cbc4361",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/rename-side-effect-free-facade/output/53446_snapshot_intermediate-tree-shake_rename-side-effect-free-facade_input_cbcbaae7._.js.map",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Frename-side-effect-free-facade%2Foutput%2F53446_snapshot_intermediate-tree-shake_rename-side-effect-free-facade_input_cbcbaae7._.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Frename-side-effect-free-facade%2Foutput%2F53446_snapshot_intermediate-tree-shake_rename-side-effect-free-facade_input_cbcbaae7._.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Frename-side-effect-free-facade%2Foutput%2F53446_snapshot_intermediate-tree-shake_rename-side-effect-free-facade_input_cbcbaae7._.js.map?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -2,6 +2,6 @@\n   \"version\": 3,\n   \"sources\": [],\n   \"sections\": [\n-    {\"offset\": {\"line\": 4, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/rename-side-effect-free-facade/input/index.js\"],\"sourcesContent\":[\"import { a0 } from 'lib'\\n\\nconsole.log(a0)\\n\"],\"names\":[],\"mappings\":\";AAAA;;AAEA,QAAQ,GAAG,CAAC,6SAAE\"}},\n-    {\"offset\": {\"line\": 12, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/rename-side-effect-free-facade/input/node_modules/lib/a.js\"],\"sourcesContent\":[\"export const a = 'a'\\nexport const a_unused = 'a_unused'\\n\"],\"names\":[],\"mappings\":\";;;;AAAO,MAAM,IAAI;AACV,MAAM,WAAW\",\"ignoreList\":[0]}}]\n+    {\"offset\": {\"line\": 4, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/rename-side-effect-free-facade/input/index.js\"],\"sourcesContent\":[\"import { a0 } from 'lib'\\n\\nconsole.log(a0)\\n\"],\"names\":[],\"mappings\":\"AAAA;;AAEA,QAAQ,GAAG,CAAC,6SAAE\"}},\n+    {\"offset\": {\"line\": 12, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/rename-side-effect-free-facade/input/node_modules/lib/a.js\"],\"sourcesContent\":[\"export const a = 'a'\\nexport const a_unused = 'a_unused'\\n\"],\"names\":[],\"mappings\":\"AAAO,MAAM,IAAI;AACV,MAAM,WAAW\",\"ignoreList\":[0]}}]\n }\n\\ No newline at end of file"
        },
        {
            "sha": "4aa0125365a51c4aa4b313645a9f2e907183398a",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/tree-shake-test-1/output/bf321_tests_snapshot_intermediate-tree-shake_tree-shake-test-1_input_c88ec7da._.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Ftree-shake-test-1%2Foutput%2Fbf321_tests_snapshot_intermediate-tree-shake_tree-shake-test-1_input_c88ec7da._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Ftree-shake-test-1%2Foutput%2Fbf321_tests_snapshot_intermediate-tree-shake_tree-shake-test-1_input_c88ec7da._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Ftree-shake-test-1%2Foutput%2Fbf321_tests_snapshot_intermediate-tree-shake_tree-shake-test-1_input_c88ec7da._.js?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -2,18 +2,14 @@\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/tree-shake-test-1/input/index.js [test] (ecmascript)\", ((__turbopack_context__) => {\n \"use strict\";\n \n-__turbopack_context__.s([]);\n var __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$intermediate$2d$tree$2d$shake$2f$tree$2d$shake$2d$test$2d$1$2f$input$2f$node_modules$2f$lib$2f$index$2e$js__$5b$test$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/tree-shake-test-1/input/node_modules/lib/index.js [test] (ecmascript)\");\n ;\n console.log(`I like ${(0, __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$intermediate$2d$tree$2d$shake$2f$tree$2d$shake$2d$test$2d$1$2f$input$2f$node_modules$2f$lib$2f$index$2e$js__$5b$test$5d$__$28$ecmascript$29$__[\"getCat\"])()}`);\n+__turbopack_context__.s([]);\n }),\n \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/tree-shake-test-1/input/node_modules/lib/index.js [test] (ecmascript)\", ((__turbopack_context__) => {\n \"use strict\";\n \n-__turbopack_context__.s([\n-    \"getCat\",\n-    ()=>getCat\n-]);\n let cat = \"cat\";\n let dog = \"dog\";\n function getChimera() {\n@@ -25,6 +21,10 @@ function getCat() {\n function getDog() {\n     return dog;\n }\n+__turbopack_context__.s([\n+    \"getCat\",\n+    ()=>getCat\n+]);\n }),\n ]);\n "
        },
        {
            "sha": "b9b3bf4ffa29612c7df59c902d26db64fe4e400b",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/tree-shake-test-1/output/bf321_tests_snapshot_intermediate-tree-shake_tree-shake-test-1_input_c88ec7da._.js.map",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Ftree-shake-test-1%2Foutput%2Fbf321_tests_snapshot_intermediate-tree-shake_tree-shake-test-1_input_c88ec7da._.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Ftree-shake-test-1%2Foutput%2Fbf321_tests_snapshot_intermediate-tree-shake_tree-shake-test-1_input_c88ec7da._.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fintermediate-tree-shake%2Ftree-shake-test-1%2Foutput%2Fbf321_tests_snapshot_intermediate-tree-shake_tree-shake-test-1_input_c88ec7da._.js.map?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -2,6 +2,6 @@\n   \"version\": 3,\n   \"sources\": [],\n   \"sections\": [\n-    {\"offset\": {\"line\": 4, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/tree-shake-test-1/input/index.js\"],\"sourcesContent\":[\"import { getCat } from 'lib'\\n\\nconsole.log(`I like ${getCat()}`)\\n\"],\"names\":[],\"mappings\":\";AAAA;;AAEA,QAAQ,GAAG,CAAC,CAAC,OAAO,EAAE,IAAA,0QAAM,KAAI\"}},\n-    {\"offset\": {\"line\": 12, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/tree-shake-test-1/input/node_modules/lib/index.js\"],\"sourcesContent\":[\"\\nlet cat = \\\"cat\\\";\\nlet dog = \\\"dog\\\";\\n\\nexport function getChimera() {\\n  return cat + dog;\\n}\\n\\nexport function getCat() {\\n  return cat;\\n}\\n\\nexport function getDog() {\\n  return dog;\\n}\\n\\n\"],\"names\":[],\"mappings\":\";;;;AACA,IAAI,MAAM;AACV,IAAI,MAAM;AAEH,SAAS;IACd,OAAO,MAAM;AACf;AAEO,SAAS;IACd,OAAO;AACT;AAEO,SAAS;IACd,OAAO;AACT\",\"ignoreList\":[0]}}]\n+    {\"offset\": {\"line\": 4, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/tree-shake-test-1/input/index.js\"],\"sourcesContent\":[\"import { getCat } from 'lib'\\n\\nconsole.log(`I like ${getCat()}`)\\n\"],\"names\":[],\"mappings\":\"AAAA;;AAEA,QAAQ,GAAG,CAAC,CAAC,OAAO,EAAE,IAAA,0QAAM,KAAI\"}},\n+    {\"offset\": {\"line\": 12, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/intermediate-tree-shake/tree-shake-test-1/input/node_modules/lib/index.js\"],\"sourcesContent\":[\"\\nlet cat = \\\"cat\\\";\\nlet dog = \\\"dog\\\";\\n\\nexport function getChimera() {\\n  return cat + dog;\\n}\\n\\nexport function getCat() {\\n  return cat;\\n}\\n\\nexport function getDog() {\\n  return dog;\\n}\\n\\n\"],\"names\":[],\"mappings\":\"AACA,IAAI,MAAM;AACV,IAAI,MAAM;AAEH,SAAS;IACd,OAAO,MAAM;AACf;AAEO,SAAS;IACd,OAAO;AACT;AAEO,SAAS;IACd,OAAO;AACT\",\"ignoreList\":[0]}}]\n }\n\\ No newline at end of file"
        },
        {
            "sha": "fe6a79404b3878d9ba86fe83621580070332ab11",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/runtime/default_build_runtime/output/[turbopack]_runtime.js",
            "status": "modified",
            "additions": 39,
            "deletions": 26,
            "changes": 65,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_build_runtime%2Foutput%2F%5Bturbopack%5D_runtime.js",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_build_runtime%2Foutput%2F%5Bturbopack%5D_runtime.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_build_runtime%2Foutput%2F%5Bturbopack%5D_runtime.js?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -47,39 +47,52 @@ function getOverwrittenModule(moduleCache, id) {\n         namespaceObject: undefined\n     };\n }\n+const BindingTag_Value = 0;\n /**\n  * Adds the getters to the exports object.\n- */ function esm(exports, getters) {\n+ */ function esm(exports, bindings) {\n     defineProp(exports, '__esModule', {\n         value: true\n     });\n     if (toStringTag) defineProp(exports, toStringTag, {\n         value: 'Module'\n     });\n     let i = 0;\n-    while(i < getters.length){\n-        const propName = getters[i++];\n-        // TODO(luke.sandberg): we could support raw values here, but would need a discriminator beyond 'not a function'\n-        const getter = getters[i++];\n-        if (typeof getters[i] === 'function') {\n-            // a setter\n-            defineProp(exports, propName, {\n-                get: getter,\n-                set: getters[i++],\n-                enumerable: true\n-            });\n+    while(i < bindings.length){\n+        const propName = bindings[i++];\n+        const tagOrFunction = bindings[i++];\n+        if (typeof tagOrFunction === 'number') {\n+            if (tagOrFunction === BindingTag_Value) {\n+                defineProp(exports, propName, {\n+                    value: bindings[i++],\n+                    enumerable: true,\n+                    writable: false\n+                });\n+            } else {\n+                throw new Error(`unexpected tag: ${tagOrFunction}`);\n+            }\n         } else {\n-            defineProp(exports, propName, {\n-                get: getter,\n-                enumerable: true\n-            });\n+            const getterFn = tagOrFunction;\n+            if (typeof bindings[i] === 'function') {\n+                const setterFn = bindings[i++];\n+                defineProp(exports, propName, {\n+                    get: getterFn,\n+                    set: setterFn,\n+                    enumerable: true\n+                });\n+            } else {\n+                defineProp(exports, propName, {\n+                    get: getterFn,\n+                    enumerable: true\n+                });\n+            }\n         }\n     }\n     Object.seal(exports);\n }\n /**\n  * Makes the module an ESM with exports\n- */ function esmExport(getters, id) {\n+ */ function esmExport(bindings, id) {\n     let module;\n     let exports;\n     if (id != null) {\n@@ -90,7 +103,7 @@ function getOverwrittenModule(moduleCache, id) {\n         exports = this.e;\n     }\n     module.namespaceObject = exports;\n-    esm(exports, getters);\n+    esm(exports, bindings);\n }\n contextPrototype.s = esmExport;\n function ensureDynamicExports(module, exports) {\n@@ -178,14 +191,13 @@ function createGetter(obj, key) {\n  *   * `false`: will have the raw module as default export\n  *   * `true`: will have the default property as default export\n  */ function interopEsm(raw, ns, allowExportDefault) {\n-    const getters = [];\n-    // The index of the `default` export if any\n+    const bindings = [];\n     let defaultLocation = -1;\n     for(let current = raw; (typeof current === 'object' || typeof current === 'function') && !LEAF_PROTOTYPES.includes(current); current = getProto(current)){\n         for (const key of Object.getOwnPropertyNames(current)){\n-            getters.push(key, createGetter(raw, key));\n+            bindings.push(key, createGetter(raw, key));\n             if (defaultLocation === -1 && key === 'default') {\n-                defaultLocation = getters.length - 1;\n+                defaultLocation = bindings.length - 1;\n             }\n         }\n     }\n@@ -194,12 +206,13 @@ function createGetter(obj, key) {\n     if (!(allowExportDefault && defaultLocation >= 0)) {\n         // Replace the binding with one for the namespace itself in order to preserve iteration order.\n         if (defaultLocation >= 0) {\n-            getters[defaultLocation] = ()=>raw;\n+            // Replace the getter with the value\n+            bindings.splice(defaultLocation, 1, BindingTag_Value, raw);\n         } else {\n-            getters.push('default', ()=>raw);\n+            bindings.push('default', BindingTag_Value, raw);\n         }\n     }\n-    esm(ns, getters);\n+    esm(ns, bindings);\n     return ns;\n }\n function createNS(raw) {\n@@ -222,7 +235,7 @@ function esmImport(id) {\n contextPrototype.i = esmImport;\n function asyncLoader(moduleId) {\n     const loader = this.r(moduleId);\n-    return loader(this.i.bind(this));\n+    return loader(esmImport.bind(this));\n }\n contextPrototype.A = asyncLoader;\n // Add a simple runtime require so that environments without one can still pass"
        },
        {
            "sha": "95e3b88f41c49b53262edfaaac345d62b921a328",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/runtime/default_build_runtime/output/[turbopack]_runtime.js.map",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_build_runtime%2Foutput%2F%5Bturbopack%5D_runtime.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_build_runtime%2Foutput%2F%5Bturbopack%5D_runtime.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_build_runtime%2Foutput%2F%5Bturbopack%5D_runtime.js.map?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -2,9 +2,9 @@\n   \"version\": 3,\n   \"sources\": [],\n   \"sections\": [\n-    {\"offset\": {\"line\": 3, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/shared/runtime-utils.ts\"],\"sourcesContent\":[\"/**\\n * This file contains runtime types and functions that are shared between all\\n * TurboPack ECMAScript runtimes.\\n *\\n * It will be prepended to the runtime code of each runtime.\\n */\\n\\n/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\n/// <reference path=\\\"./runtime-types.d.ts\\\" />\\n\\ntype EsmNamespaceObject = Record<string, any>\\n\\n// @ts-ignore Defined in `dev-base.ts`\\ndeclare function getOrInstantiateModuleFromParent<M>(\\n  id: ModuleId,\\n  sourceModule: M\\n): M\\n\\nconst REEXPORTED_OBJECTS = new WeakMap<Module, ReexportedObjects>()\\n\\n/**\\n * Constructs the `__turbopack_context__` object for a module.\\n */\\nfunction Context(\\n  this: TurbopackBaseContext<Module>,\\n  module: Module,\\n  exports: Exports\\n) {\\n  this.m = module\\n  // We need to store this here instead of accessing it from the module object to:\\n  // 1. Make it available to factories directly, since we rewrite `this` to\\n  //    `__turbopack_context__.e` in CJS modules.\\n  // 2. Support async modules which rewrite `module.exports` to a promise, so we\\n  //    can still access the original exports object from functions like\\n  //    `esmExport`\\n  // Ideally we could find a new approach for async modules and drop this property altogether.\\n  this.e = exports\\n}\\nconst contextPrototype = Context.prototype as TurbopackBaseContext<Module>\\n\\ntype ModuleContextMap = Record<ModuleId, ModuleContextEntry>\\n\\ninterface ModuleContextEntry {\\n  id: () => ModuleId\\n  module: () => any\\n}\\n\\ninterface ModuleContext {\\n  // require call\\n  (moduleId: ModuleId): Exports | EsmNamespaceObject\\n\\n  // async import call\\n  import(moduleId: ModuleId): Promise<Exports | EsmNamespaceObject>\\n\\n  keys(): ModuleId[]\\n\\n  resolve(moduleId: ModuleId): ModuleId\\n}\\n\\ntype GetOrInstantiateModuleFromParent<M extends Module> = (\\n  moduleId: M['id'],\\n  parentModule: M\\n) => M\\n\\ndeclare function getOrInstantiateRuntimeModule(\\n  chunkPath: ChunkPath,\\n  moduleId: ModuleId\\n): Module\\n\\nconst hasOwnProperty = Object.prototype.hasOwnProperty\\nconst toStringTag = typeof Symbol !== 'undefined' && Symbol.toStringTag\\n\\nfunction defineProp(\\n  obj: any,\\n  name: PropertyKey,\\n  options: PropertyDescriptor & ThisType<any>\\n) {\\n  if (!hasOwnProperty.call(obj, name)) Object.defineProperty(obj, name, options)\\n}\\n\\nfunction getOverwrittenModule(\\n  moduleCache: ModuleCache<Module>,\\n  id: ModuleId\\n): Module {\\n  let module = moduleCache[id]\\n  if (!module) {\\n    // This is invoked when a module is merged into another module, thus it wasn't invoked via\\n    // instantiateModule and the cache entry wasn't created yet.\\n    module = createModuleObject(id)\\n    moduleCache[id] = module\\n  }\\n  return module\\n}\\n\\n/**\\n * Creates the module object. Only done here to ensure all module objects have the same shape.\\n */\\nfunction createModuleObject(id: ModuleId): Module {\\n  return {\\n    exports: {},\\n    error: undefined,\\n    id,\\n    namespaceObject: undefined,\\n  }\\n}\\n\\n/**\\n * Adds the getters to the exports object.\\n */\\nfunction esm(\\n  exports: Exports,\\n  getters: Array<string | (() => unknown) | ((v: unknown) => void)>\\n) {\\n  defineProp(exports, '__esModule', { value: true })\\n  if (toStringTag) defineProp(exports, toStringTag, { value: 'Module' })\\n  let i = 0\\n  while (i < getters.length) {\\n    const propName = getters[i++] as string\\n    // TODO(luke.sandberg): we could support raw values here, but would need a discriminator beyond 'not a function'\\n    const getter = getters[i++] as () => unknown\\n    if (typeof getters[i] === 'function') {\\n      // a setter\\n      defineProp(exports, propName, {\\n        get: getter,\\n        set: getters[i++] as (v: unknown) => void,\\n        enumerable: true,\\n      })\\n    } else {\\n      defineProp(exports, propName, { get: getter, enumerable: true })\\n    }\\n  }\\n  Object.seal(exports)\\n}\\n\\n/**\\n * Makes the module an ESM with exports\\n */\\nfunction esmExport(\\n  this: TurbopackBaseContext<Module>,\\n  getters: Array<string | (() => unknown) | ((v: unknown) => void)>,\\n  id: ModuleId | undefined\\n) {\\n  let module: Module\\n  let exports: Module['exports']\\n  if (id != null) {\\n    module = getOverwrittenModule(this.c, id)\\n    exports = module.exports\\n  } else {\\n    module = this.m\\n    exports = this.e\\n  }\\n  module.namespaceObject = exports\\n  esm(exports, getters)\\n}\\ncontextPrototype.s = esmExport\\n\\ntype ReexportedObjects = Record<PropertyKey, unknown>[]\\nfunction ensureDynamicExports(\\n  module: Module,\\n  exports: Exports\\n): ReexportedObjects {\\n  let reexportedObjects: ReexportedObjects | undefined =\\n    REEXPORTED_OBJECTS.get(module)\\n\\n  if (!reexportedObjects) {\\n    REEXPORTED_OBJECTS.set(module, (reexportedObjects = []))\\n    module.exports = module.namespaceObject = new Proxy(exports, {\\n      get(target, prop) {\\n        if (\\n          hasOwnProperty.call(target, prop) ||\\n          prop === 'default' ||\\n          prop === '__esModule'\\n        ) {\\n          return Reflect.get(target, prop)\\n        }\\n        for (const obj of reexportedObjects!) {\\n          const value = Reflect.get(obj, prop)\\n          if (value !== undefined) return value\\n        }\\n        return undefined\\n      },\\n      ownKeys(target) {\\n        const keys = Reflect.ownKeys(target)\\n        for (const obj of reexportedObjects!) {\\n          for (const key of Reflect.ownKeys(obj)) {\\n            if (key !== 'default' && !keys.includes(key)) keys.push(key)\\n          }\\n        }\\n        return keys\\n      },\\n    })\\n  }\\n  return reexportedObjects\\n}\\n\\n/**\\n * Dynamically exports properties from an object\\n */\\nfunction dynamicExport(\\n  this: TurbopackBaseContext<Module>,\\n  object: Record<string, any>,\\n  id: ModuleId | undefined\\n) {\\n  let module: Module\\n  let exports: Module['exports']\\n  if (id != null) {\\n    module = getOverwrittenModule(this.c, id)\\n    exports = module.exports\\n  } else {\\n    module = this.m\\n    exports = this.e\\n  }\\n  const reexportedObjects = ensureDynamicExports(module, exports)\\n\\n  if (typeof object === 'object' && object !== null) {\\n    reexportedObjects.push(object)\\n  }\\n}\\ncontextPrototype.j = dynamicExport\\n\\nfunction exportValue(\\n  this: TurbopackBaseContext<Module>,\\n  value: any,\\n  id: ModuleId | undefined\\n) {\\n  let module: Module\\n  if (id != null) {\\n    module = getOverwrittenModule(this.c, id)\\n  } else {\\n    module = this.m\\n  }\\n  module.exports = value\\n}\\ncontextPrototype.v = exportValue\\n\\nfunction exportNamespace(\\n  this: TurbopackBaseContext<Module>,\\n  namespace: any,\\n  id: ModuleId | undefined\\n) {\\n  let module: Module\\n  if (id != null) {\\n    module = getOverwrittenModule(this.c, id)\\n  } else {\\n    module = this.m\\n  }\\n  module.exports = module.namespaceObject = namespace\\n}\\ncontextPrototype.n = exportNamespace\\n\\nfunction createGetter(obj: Record<string | symbol, any>, key: string | symbol) {\\n  return () => obj[key]\\n}\\n\\n/**\\n * @returns prototype of the object\\n */\\nconst getProto: (obj: any) => any = Object.getPrototypeOf\\n  ? (obj) => Object.getPrototypeOf(obj)\\n  : (obj) => obj.__proto__\\n\\n/** Prototypes that are not expanded for exports */\\nconst LEAF_PROTOTYPES = [null, getProto({}), getProto([]), getProto(getProto)]\\n\\n/**\\n * @param raw\\n * @param ns\\n * @param allowExportDefault\\n *   * `false`: will have the raw module as default export\\n *   * `true`: will have the default property as default export\\n */\\nfunction interopEsm(\\n  raw: Exports,\\n  ns: EsmNamespaceObject,\\n  allowExportDefault?: boolean\\n) {\\n  const getters: Array<string | (() => unknown) | ((v: unknown) => void)> = []\\n  // The index of the `default` export if any\\n  let defaultLocation = -1\\n  for (\\n    let current = raw;\\n    (typeof current === 'object' || typeof current === 'function') &&\\n    !LEAF_PROTOTYPES.includes(current);\\n    current = getProto(current)\\n  ) {\\n    for (const key of Object.getOwnPropertyNames(current)) {\\n      getters.push(key, createGetter(raw, key))\\n      if (defaultLocation === -1 && key === 'default') {\\n        defaultLocation = getters.length - 1\\n      }\\n    }\\n  }\\n\\n  // this is not really correct\\n  // we should set the `default` getter if the imported module is a `.cjs file`\\n  if (!(allowExportDefault && defaultLocation >= 0)) {\\n    // Replace the binding with one for the namespace itself in order to preserve iteration order.\\n    if (defaultLocation >= 0) {\\n      getters[defaultLocation] = () => raw\\n    } else {\\n      getters.push('default', () => raw)\\n    }\\n  }\\n\\n  esm(ns, getters)\\n  return ns\\n}\\n\\nfunction createNS(raw: Module['exports']): EsmNamespaceObject {\\n  if (typeof raw === 'function') {\\n    return function (this: any, ...args: any[]) {\\n      return raw.apply(this, args)\\n    }\\n  } else {\\n    return Object.create(null)\\n  }\\n}\\n\\nfunction esmImport(\\n  this: TurbopackBaseContext<Module>,\\n  id: ModuleId\\n): Exclude<Module['namespaceObject'], undefined> {\\n  const module = getOrInstantiateModuleFromParent(id, this.m)\\n\\n  // any ES module has to have `module.namespaceObject` defined.\\n  if (module.namespaceObject) return module.namespaceObject\\n\\n  // only ESM can be an async module, so we don't need to worry about exports being a promise here.\\n  const raw = module.exports\\n  return (module.namespaceObject = interopEsm(\\n    raw,\\n    createNS(raw),\\n    raw && (raw as any).__esModule\\n  ))\\n}\\ncontextPrototype.i = esmImport\\n\\nfunction asyncLoader(\\n  this: TurbopackBaseContext<Module>,\\n  moduleId: ModuleId\\n): Promise<Exports> {\\n  const loader = this.r(moduleId) as (\\n    importFunction: EsmImport\\n  ) => Promise<Exports>\\n  return loader(this.i.bind(this))\\n}\\ncontextPrototype.A = asyncLoader\\n\\n// Add a simple runtime require so that environments without one can still pass\\n// `typeof require` CommonJS checks so that exports are correctly registered.\\nconst runtimeRequire =\\n  // @ts-ignore\\n  typeof require === 'function'\\n    ? // @ts-ignore\\n      require\\n    : function require() {\\n        throw new Error('Unexpected use of runtime require')\\n      }\\ncontextPrototype.t = runtimeRequire\\n\\nfunction commonJsRequire(\\n  this: TurbopackBaseContext<Module>,\\n  id: ModuleId\\n): Exports {\\n  return getOrInstantiateModuleFromParent(id, this.m).exports\\n}\\ncontextPrototype.r = commonJsRequire\\n\\n/**\\n * `require.context` and require/import expression runtime.\\n */\\nfunction moduleContext(map: ModuleContextMap): ModuleContext {\\n  function moduleContext(id: ModuleId): Exports {\\n    if (hasOwnProperty.call(map, id)) {\\n      return map[id].module()\\n    }\\n\\n    const e = new Error(`Cannot find module '${id}'`)\\n    ;(e as any).code = 'MODULE_NOT_FOUND'\\n    throw e\\n  }\\n\\n  moduleContext.keys = (): ModuleId[] => {\\n    return Object.keys(map)\\n  }\\n\\n  moduleContext.resolve = (id: ModuleId): ModuleId => {\\n    if (hasOwnProperty.call(map, id)) {\\n      return map[id].id()\\n    }\\n\\n    const e = new Error(`Cannot find module '${id}'`)\\n    ;(e as any).code = 'MODULE_NOT_FOUND'\\n    throw e\\n  }\\n\\n  moduleContext.import = async (id: ModuleId) => {\\n    return await (moduleContext(id) as Promise<Exports>)\\n  }\\n\\n  return moduleContext\\n}\\ncontextPrototype.f = moduleContext\\n\\n/**\\n * Returns the path of a chunk defined by its data.\\n */\\nfunction getChunkPath(chunkData: ChunkData): ChunkPath {\\n  return typeof chunkData === 'string' ? chunkData : chunkData.path\\n}\\n\\nfunction isPromise<T = any>(maybePromise: any): maybePromise is Promise<T> {\\n  return (\\n    maybePromise != null &&\\n    typeof maybePromise === 'object' &&\\n    'then' in maybePromise &&\\n    typeof maybePromise.then === 'function'\\n  )\\n}\\n\\nfunction isAsyncModuleExt<T extends {}>(obj: T): obj is AsyncModuleExt & T {\\n  return turbopackQueues in obj\\n}\\n\\nfunction createPromise<T>() {\\n  let resolve: (value: T | PromiseLike<T>) => void\\n  let reject: (reason?: any) => void\\n\\n  const promise = new Promise<T>((res, rej) => {\\n    reject = rej\\n    resolve = res\\n  })\\n\\n  return {\\n    promise,\\n    resolve: resolve!,\\n    reject: reject!,\\n  }\\n}\\n\\n// Load the CompressedmoduleFactories of a chunk into the `moduleFactories` Map.\\n// The CompressedModuleFactories format is\\n// - 1 or more module ids\\n// - a module factory function\\n// So walking this is a little complex but the flat structure is also fast to\\n// traverse, we can use `typeof` operators to distinguish the two cases.\\nfunction installCompressedModuleFactories(\\n  chunkModules: CompressedModuleFactories,\\n  offset: number,\\n  moduleFactories: ModuleFactories,\\n  newModuleId?: (id: ModuleId) => void\\n) {\\n  let i = offset\\n  while (i < chunkModules.length) {\\n    let moduleId = chunkModules[i] as ModuleId\\n    let end = i + 1\\n    // Find our factory function\\n    while (\\n      end < chunkModules.length &&\\n      typeof chunkModules[end] !== 'function'\\n    ) {\\n      end++\\n    }\\n    if (end === chunkModules.length) {\\n      throw new Error('malformed chunk format, expected a factory function')\\n    }\\n    // Each chunk item has a 'primary id' and optional additional ids. If the primary id is already\\n    // present we know all the additional ids are also present, so we don't need to check.\\n    if (!moduleFactories.has(moduleId)) {\\n      const moduleFactoryFn = chunkModules[end] as Function\\n      applyModuleFactoryName(moduleFactoryFn)\\n      newModuleId?.(moduleId)\\n      for (; i < end; i++) {\\n        moduleId = chunkModules[i] as ModuleId\\n        moduleFactories.set(moduleId, moduleFactoryFn)\\n      }\\n    }\\n    i = end + 1 // end is pointing at the last factory advance to the next id or the end of the array.\\n  }\\n}\\n\\n// everything below is adapted from webpack\\n// https://github.com/webpack/webpack/blob/6be4065ade1e252c1d8dcba4af0f43e32af1bdc1/lib/runtime/AsyncModuleRuntimeModule.js#L13\\n\\nconst turbopackQueues = Symbol('turbopack queues')\\nconst turbopackExports = Symbol('turbopack exports')\\nconst turbopackError = Symbol('turbopack error')\\n\\nconst enum QueueStatus {\\n  Unknown = -1,\\n  Unresolved = 0,\\n  Resolved = 1,\\n}\\n\\ntype AsyncQueueFn = (() => void) & { queueCount: number }\\ntype AsyncQueue = AsyncQueueFn[] & {\\n  status: QueueStatus\\n}\\n\\nfunction resolveQueue(queue?: AsyncQueue) {\\n  if (queue && queue.status !== QueueStatus.Resolved) {\\n    queue.status = QueueStatus.Resolved\\n    queue.forEach((fn) => fn.queueCount--)\\n    queue.forEach((fn) => (fn.queueCount-- ? fn.queueCount++ : fn()))\\n  }\\n}\\n\\ntype Dep = Exports | AsyncModulePromise | Promise<Exports>\\n\\ntype AsyncModuleExt = {\\n  [turbopackQueues]: (fn: (queue: AsyncQueue) => void) => void\\n  [turbopackExports]: Exports\\n  [turbopackError]?: any\\n}\\n\\ntype AsyncModulePromise<T = Exports> = Promise<T> & AsyncModuleExt\\n\\nfunction wrapDeps(deps: Dep[]): AsyncModuleExt[] {\\n  return deps.map((dep): AsyncModuleExt => {\\n    if (dep !== null && typeof dep === 'object') {\\n      if (isAsyncModuleExt(dep)) return dep\\n      if (isPromise(dep)) {\\n        const queue: AsyncQueue = Object.assign([], {\\n          status: QueueStatus.Unresolved,\\n        })\\n\\n        const obj: AsyncModuleExt = {\\n          [turbopackExports]: {},\\n          [turbopackQueues]: (fn: (queue: AsyncQueue) => void) => fn(queue),\\n        }\\n\\n        dep.then(\\n          (res) => {\\n            obj[turbopackExports] = res\\n            resolveQueue(queue)\\n          },\\n          (err) => {\\n            obj[turbopackError] = err\\n            resolveQueue(queue)\\n          }\\n        )\\n\\n        return obj\\n      }\\n    }\\n\\n    return {\\n      [turbopackExports]: dep,\\n      [turbopackQueues]: () => {},\\n    }\\n  })\\n}\\n\\nfunction asyncModule(\\n  this: TurbopackBaseContext<Module>,\\n  body: (\\n    handleAsyncDependencies: (\\n      deps: Dep[]\\n    ) => Exports[] | Promise<() => Exports[]>,\\n    asyncResult: (err?: any) => void\\n  ) => void,\\n  hasAwait: boolean\\n) {\\n  const module = this.m\\n  const queue: AsyncQueue | undefined = hasAwait\\n    ? Object.assign([], { status: QueueStatus.Unknown })\\n    : undefined\\n\\n  const depQueues: Set<AsyncQueue> = new Set()\\n\\n  const { resolve, reject, promise: rawPromise } = createPromise<Exports>()\\n\\n  const promise: AsyncModulePromise = Object.assign(rawPromise, {\\n    [turbopackExports]: module.exports,\\n    [turbopackQueues]: (fn) => {\\n      queue && fn(queue)\\n      depQueues.forEach(fn)\\n      promise['catch'](() => {})\\n    },\\n  } satisfies AsyncModuleExt)\\n\\n  const attributes: PropertyDescriptor = {\\n    get(): any {\\n      return promise\\n    },\\n    set(v: any) {\\n      // Calling `esmExport` leads to this.\\n      if (v !== promise) {\\n        promise[turbopackExports] = v\\n      }\\n    },\\n  }\\n\\n  Object.defineProperty(module, 'exports', attributes)\\n  Object.defineProperty(module, 'namespaceObject', attributes)\\n\\n  function handleAsyncDependencies(deps: Dep[]) {\\n    const currentDeps = wrapDeps(deps)\\n\\n    const getResult = () =>\\n      currentDeps.map((d) => {\\n        if (d[turbopackError]) throw d[turbopackError]\\n        return d[turbopackExports]\\n      })\\n\\n    const { promise, resolve } = createPromise<() => Exports[]>()\\n\\n    const fn: AsyncQueueFn = Object.assign(() => resolve(getResult), {\\n      queueCount: 0,\\n    })\\n\\n    function fnQueue(q: AsyncQueue) {\\n      if (q !== queue && !depQueues.has(q)) {\\n        depQueues.add(q)\\n        if (q && q.status === QueueStatus.Unresolved) {\\n          fn.queueCount++\\n          q.push(fn)\\n        }\\n      }\\n    }\\n\\n    currentDeps.map((dep) => dep[turbopackQueues](fnQueue))\\n\\n    return fn.queueCount ? promise : getResult()\\n  }\\n\\n  function asyncResult(err?: any) {\\n    if (err) {\\n      reject((promise[turbopackError] = err))\\n    } else {\\n      resolve(promise[turbopackExports])\\n    }\\n\\n    resolveQueue(queue)\\n  }\\n\\n  body(handleAsyncDependencies, asyncResult)\\n\\n  if (queue && queue.status === QueueStatus.Unknown) {\\n    queue.status = QueueStatus.Unresolved\\n  }\\n}\\ncontextPrototype.a = asyncModule\\n\\n/**\\n * A pseudo \\\"fake\\\" URL object to resolve to its relative path.\\n *\\n * When UrlRewriteBehavior is set to relative, calls to the `new URL()` will construct url without base using this\\n * runtime function to generate context-agnostic urls between different rendering context, i.e ssr / client to avoid\\n * hydration mismatch.\\n *\\n * This is based on webpack's existing implementation:\\n * https://github.com/webpack/webpack/blob/87660921808566ef3b8796f8df61bd79fc026108/lib/runtime/RelativeUrlRuntimeModule.js\\n */\\nconst relativeURL = function relativeURL(this: any, inputUrl: string) {\\n  const realUrl = new URL(inputUrl, 'x:/')\\n  const values: Record<string, any> = {}\\n  for (const key in realUrl) values[key] = (realUrl as any)[key]\\n  values.href = inputUrl\\n  values.pathname = inputUrl.replace(/[?#].*/, '')\\n  values.origin = values.protocol = ''\\n  values.toString = values.toJSON = (..._args: Array<any>) => inputUrl\\n  for (const key in values)\\n    Object.defineProperty(this, key, {\\n      enumerable: true,\\n      configurable: true,\\n      value: values[key],\\n    })\\n}\\nrelativeURL.prototype = URL.prototype\\ncontextPrototype.U = relativeURL\\n\\n/**\\n * Utility function to ensure all variants of an enum are handled.\\n */\\nfunction invariant(never: never, computeMessage: (arg: any) => string): never {\\n  throw new Error(`Invariant: ${computeMessage(never)}`)\\n}\\n\\n/**\\n * A stub function to make `require` available but non-functional in ESM.\\n */\\nfunction requireStub(_moduleId: ModuleId): never {\\n  throw new Error('dynamic usage of require is not supported')\\n}\\ncontextPrototype.z = requireStub\\n\\n// Make `globalThis` available to the module in a way that cannot be shadowed by a local variable.\\ncontextPrototype.g = globalThis\\n\\ntype ContextConstructor<M> = {\\n  new (module: Module, exports: Exports): TurbopackBaseContext<M>\\n}\\n\\nfunction applyModuleFactoryName(factory: Function) {\\n  // Give the module factory a nice name to improve stack traces.\\n  Object.defineProperty(factory, 'name', {\\n    value: '__TURBOPACK__module__evaluation__',\\n  })\\n}\\n\"],\"names\":[],\"mappings\":\"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\",\"ignoreList\":[0]}},\n-    {\"offset\": {\"line\": 470, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/shared-node/base-externals-utils.ts\"],\"sourcesContent\":[\"/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\n/// <reference path=\\\"../shared/runtime-utils.ts\\\" />\\n\\n/// A 'base' utilities to support runtime can have externals.\\n/// Currently this is for node.js / edge runtime both.\\n/// If a fn requires node.js specific behavior, it should be placed in `node-external-utils` instead.\\n\\nasync function externalImport(id: DependencySpecifier) {\\n  let raw\\n  try {\\n    raw = await import(id)\\n  } catch (err) {\\n    // TODO(alexkirsz) This can happen when a client-side module tries to load\\n    // an external module we don't provide a shim for (e.g. querystring, url).\\n    // For now, we fail semi-silently, but in the future this should be a\\n    // compilation error.\\n    throw new Error(`Failed to load external module ${id}: ${err}`)\\n  }\\n\\n  if (raw && raw.__esModule && raw.default && 'default' in raw.default) {\\n    return interopEsm(raw.default, createNS(raw), true)\\n  }\\n\\n  return raw\\n}\\ncontextPrototype.y = externalImport\\n\\nfunction externalRequire(\\n  id: ModuleId,\\n  thunk: () => any,\\n  esm: boolean = false\\n): Exports | EsmNamespaceObject {\\n  let raw\\n  try {\\n    raw = thunk()\\n  } catch (err) {\\n    // TODO(alexkirsz) This can happen when a client-side module tries to load\\n    // an external module we don't provide a shim for (e.g. querystring, url).\\n    // For now, we fail semi-silently, but in the future this should be a\\n    // compilation error.\\n    throw new Error(`Failed to load external module ${id}: ${err}`)\\n  }\\n\\n  if (!esm || raw.__esModule) {\\n    return raw\\n  }\\n\\n  return interopEsm(raw, createNS(raw), true)\\n}\\n\\nexternalRequire.resolve = (\\n  id: string,\\n  options?: {\\n    paths?: string[]\\n  }\\n) => {\\n  return require.resolve(id, options)\\n}\\ncontextPrototype.x = externalRequire\\n\"],\"names\":[],\"mappings\":\"AAAA,oDAAoD,GAEpD,mDAAmD;AAEnD,6DAA6D;AAC7D,sDAAsD;AACtD,qGAAqG;AAErG,eAAe,eAAe,EAAuB;IACnD,IAAI;IACJ,IAAI;QACF,MAAM,MAAM,MAAM,CAAC;IACrB,EAAE,OAAO,KAAK;QACZ,0EAA0E;QAC1E,0EAA0E;QAC1E,qEAAqE;QACrE,qBAAqB;QACrB,MAAM,IAAI,MAAM,CAAC,+BAA+B,EAAE,GAAG,EAAE,EAAE,KAAK;IAChE;IAEA,IAAI,OAAO,IAAI,UAAU,IAAI,IAAI,OAAO,IAAI,aAAa,IAAI,OAAO,EAAE;QACpE,OAAO,WAAW,IAAI,OAAO,EAAE,SAAS,MAAM;IAChD;IAEA,OAAO;AACT;AACA,iBAAiB,CAAC,GAAG;AAErB,SAAS,gBACP,EAAY,EACZ,KAAgB,EAChB,MAAe,KAAK;IAEpB,IAAI;IACJ,IAAI;QACF,MAAM;IACR,EAAE,OAAO,KAAK;QACZ,0EAA0E;QAC1E,0EAA0E;QAC1E,qEAAqE;QACrE,qBAAqB;QACrB,MAAM,IAAI,MAAM,CAAC,+BAA+B,EAAE,GAAG,EAAE,EAAE,KAAK;IAChE;IAEA,IAAI,CAAC,OAAO,IAAI,UAAU,EAAE;QAC1B,OAAO;IACT;IAEA,OAAO,WAAW,KAAK,SAAS,MAAM;AACxC;AAEA,gBAAgB,OAAO,GAAG,CACxB,IACA;IAIA,OAAO,QAAQ,OAAO,CAAC,IAAI;AAC7B;AACA,iBAAiB,CAAC,GAAG\",\"ignoreList\":[0]}},\n-    {\"offset\": {\"line\": 511, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/shared-node/node-externals-utils.ts\"],\"sourcesContent\":[\"/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\ndeclare var RUNTIME_PUBLIC_PATH: string\\ndeclare var RELATIVE_ROOT_PATH: string\\ndeclare var ASSET_PREFIX: string\\n\\nconst path = require('path')\\n\\nconst relativePathToRuntimeRoot = path.relative(RUNTIME_PUBLIC_PATH, '.')\\n// Compute the relative path to the `distDir`.\\nconst relativePathToDistRoot = path.join(\\n  relativePathToRuntimeRoot,\\n  RELATIVE_ROOT_PATH\\n)\\nconst RUNTIME_ROOT = path.resolve(__filename, relativePathToRuntimeRoot)\\n// Compute the absolute path to the root, by stripping distDir from the absolute path to this file.\\nconst ABSOLUTE_ROOT = path.resolve(__filename, relativePathToDistRoot)\\n\\n/**\\n * Returns an absolute path to the given module path.\\n * Module path should be relative, either path to a file or a directory.\\n *\\n * This fn allows to calculate an absolute path for some global static values, such as\\n * `__dirname` or `import.meta.url` that Turbopack will not embeds in compile time.\\n * See ImportMetaBinding::code_generation for the usage.\\n */\\nfunction resolveAbsolutePath(modulePath?: string): string {\\n  if (modulePath) {\\n    return path.join(ABSOLUTE_ROOT, modulePath)\\n  }\\n  return ABSOLUTE_ROOT\\n}\\nContext.prototype.P = resolveAbsolutePath\\n\"],\"names\":[],\"mappings\":\"AAAA,oDAAoD,GAMpD,MAAM,OAAO,QAAQ;AAErB,MAAM,4BAA4B,KAAK,QAAQ,CAAC,qBAAqB;AACrE,8CAA8C;AAC9C,MAAM,yBAAyB,KAAK,IAAI,CACtC,2BACA;AAEF,MAAM,eAAe,KAAK,OAAO,CAAC,YAAY;AAC9C,mGAAmG;AACnG,MAAM,gBAAgB,KAAK,OAAO,CAAC,YAAY;AAE/C;;;;;;;CAOC,GACD,SAAS,oBAAoB,UAAmB;IAC9C,IAAI,YAAY;QACd,OAAO,KAAK,IAAI,CAAC,eAAe;IAClC;IACA,OAAO;AACT;AACA,QAAQ,SAAS,CAAC,CAAC,GAAG\",\"ignoreList\":[0]}},\n-    {\"offset\": {\"line\": 532, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/shared-node/node-wasm-utils.ts\"],\"sourcesContent\":[\"/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\n/// <reference path=\\\"../shared/runtime-utils.ts\\\" />\\n\\nfunction readWebAssemblyAsResponse(path: string) {\\n  const { createReadStream } = require('fs') as typeof import('fs')\\n  const { Readable } = require('stream') as typeof import('stream')\\n\\n  const stream = createReadStream(path)\\n\\n  // @ts-ignore unfortunately there's a slight type mismatch with the stream.\\n  return new Response(Readable.toWeb(stream), {\\n    headers: {\\n      'content-type': 'application/wasm',\\n    },\\n  })\\n}\\n\\nasync function compileWebAssemblyFromPath(\\n  path: string\\n): Promise<WebAssembly.Module> {\\n  const response = readWebAssemblyAsResponse(path)\\n\\n  return await WebAssembly.compileStreaming(response)\\n}\\n\\nasync function instantiateWebAssemblyFromPath(\\n  path: string,\\n  importsObj: WebAssembly.Imports\\n): Promise<Exports> {\\n  const response = readWebAssemblyAsResponse(path)\\n\\n  const { instance } = await WebAssembly.instantiateStreaming(\\n    response,\\n    importsObj\\n  )\\n\\n  return instance.exports\\n}\\n\"],\"names\":[],\"mappings\":\"AAAA,oDAAoD,GAEpD,mDAAmD;AAEnD,SAAS,0BAA0B,IAAY;IAC7C,MAAM,EAAE,gBAAgB,EAAE,GAAG,QAAQ;IACrC,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ;IAE7B,MAAM,SAAS,iBAAiB;IAEhC,2EAA2E;IAC3E,OAAO,IAAI,SAAS,SAAS,KAAK,CAAC,SAAS;QAC1C,SAAS;YACP,gBAAgB;QAClB;IACF;AACF;AAEA,eAAe,2BACb,IAAY;IAEZ,MAAM,WAAW,0BAA0B;IAE3C,OAAO,MAAM,YAAY,gBAAgB,CAAC;AAC5C;AAEA,eAAe,+BACb,IAAY,EACZ,UAA+B;IAE/B,MAAM,WAAW,0BAA0B;IAE3C,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,YAAY,oBAAoB,CACzD,UACA;IAGF,OAAO,SAAS,OAAO;AACzB\",\"ignoreList\":[0]}},\n-    {\"offset\": {\"line\": 553, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/nodejs/runtime.ts\"],\"sourcesContent\":[\"/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\n/// <reference path=\\\"../shared/runtime-utils.ts\\\" />\\n/// <reference path=\\\"../shared-node/base-externals-utils.ts\\\" />\\n/// <reference path=\\\"../shared-node/node-externals-utils.ts\\\" />\\n/// <reference path=\\\"../shared-node/node-wasm-utils.ts\\\" />\\n\\nenum SourceType {\\n  /**\\n   * The module was instantiated because it was included in an evaluated chunk's\\n   * runtime.\\n   * SourceData is a ChunkPath.\\n   */\\n  Runtime = 0,\\n  /**\\n   * The module was instantiated because a parent module imported it.\\n   * SourceData is a ModuleId.\\n   */\\n  Parent = 1,\\n}\\n\\ntype SourceData = ChunkPath | ModuleId\\n\\nprocess.env.TURBOPACK = '1'\\n\\ninterface TurbopackNodeBuildContext extends TurbopackBaseContext<Module> {\\n  R: ResolvePathFromModule\\n  x: ExternalRequire\\n  y: ExternalImport\\n}\\n\\nconst nodeContextPrototype = Context.prototype as TurbopackNodeBuildContext\\n\\ntype ModuleFactory = (\\n  this: Module['exports'],\\n  context: TurbopackNodeBuildContext\\n) => unknown\\n\\nconst url = require('url') as typeof import('url')\\n\\nconst moduleFactories: ModuleFactories = new Map()\\nnodeContextPrototype.M = moduleFactories\\nconst moduleCache: ModuleCache<Module> = Object.create(null)\\nnodeContextPrototype.c = moduleCache\\n\\n/**\\n * Returns an absolute path to the given module's id.\\n */\\nfunction resolvePathFromModule(\\n  this: TurbopackBaseContext<Module>,\\n  moduleId: string\\n): string {\\n  const exported = this.r(moduleId)\\n  const exportedPath = exported?.default ?? exported\\n  if (typeof exportedPath !== 'string') {\\n    return exported as any\\n  }\\n\\n  const strippedAssetPrefix = exportedPath.slice(ASSET_PREFIX.length)\\n  const resolved = path.resolve(RUNTIME_ROOT, strippedAssetPrefix)\\n\\n  return url.pathToFileURL(resolved).href\\n}\\nnodeContextPrototype.R = resolvePathFromModule\\n\\nfunction loadRuntimeChunk(sourcePath: ChunkPath, chunkData: ChunkData): void {\\n  if (typeof chunkData === 'string') {\\n    loadRuntimeChunkPath(sourcePath, chunkData)\\n  } else {\\n    loadRuntimeChunkPath(sourcePath, chunkData.path)\\n  }\\n}\\n\\nconst loadedChunks = new Set<ChunkPath>()\\nconst unsupportedLoadChunk = Promise.resolve(undefined)\\nconst loadedChunk: Promise<void> = Promise.resolve(undefined)\\nconst chunkCache = new Map<ChunkPath, Promise<void>>()\\n\\nfunction clearChunkCache() {\\n  chunkCache.clear()\\n}\\n\\nfunction loadRuntimeChunkPath(\\n  sourcePath: ChunkPath,\\n  chunkPath: ChunkPath\\n): void {\\n  if (!isJs(chunkPath)) {\\n    // We only support loading JS chunks in Node.js.\\n    // This branch can be hit when trying to load a CSS chunk.\\n    return\\n  }\\n\\n  if (loadedChunks.has(chunkPath)) {\\n    return\\n  }\\n\\n  try {\\n    const resolved = path.resolve(RUNTIME_ROOT, chunkPath)\\n    const chunkModules: CompressedModuleFactories = require(resolved)\\n    installCompressedModuleFactories(chunkModules, 0, moduleFactories)\\n    loadedChunks.add(chunkPath)\\n  } catch (e) {\\n    let errorMessage = `Failed to load chunk ${chunkPath}`\\n\\n    if (sourcePath) {\\n      errorMessage += ` from runtime for chunk ${sourcePath}`\\n    }\\n\\n    throw new Error(errorMessage, {\\n      cause: e,\\n    })\\n  }\\n}\\n\\nfunction loadChunkAsync(\\n  this: TurbopackBaseContext<Module>,\\n  chunkData: ChunkData\\n): Promise<void> {\\n  const chunkPath = typeof chunkData === 'string' ? chunkData : chunkData.path\\n  if (!isJs(chunkPath)) {\\n    // We only support loading JS chunks in Node.js.\\n    // This branch can be hit when trying to load a CSS chunk.\\n    return unsupportedLoadChunk\\n  }\\n\\n  let entry = chunkCache.get(chunkPath)\\n  if (entry === undefined) {\\n    try {\\n      // resolve to an absolute path to simplify `require` handling\\n      const resolved = path.resolve(RUNTIME_ROOT, chunkPath)\\n      // TODO: consider switching to `import()` to enable concurrent chunk loading and async file io\\n      // However this is incompatible with hot reloading (since `import` doesn't use the require cache)\\n      const chunkModules: CompressedModuleFactories = require(resolved)\\n      installCompressedModuleFactories(chunkModules, 0, moduleFactories)\\n      entry = loadedChunk\\n    } catch (e) {\\n      const errorMessage = `Failed to load chunk ${chunkPath} from module ${this.m.id}`\\n\\n      // Cache the failure promise, future requests will also get this same rejection\\n      entry = Promise.reject(\\n        new Error(errorMessage, {\\n          cause: e,\\n        })\\n      )\\n    }\\n    chunkCache.set(chunkPath, entry)\\n  }\\n  // TODO: Return an instrumented Promise that React can use instead of relying on referential equality.\\n  return entry\\n}\\ncontextPrototype.l = loadChunkAsync\\n\\nfunction loadChunkAsyncByUrl(\\n  this: TurbopackBaseContext<Module>,\\n  chunkUrl: string\\n) {\\n  const path = url.fileURLToPath(new URL(chunkUrl, RUNTIME_ROOT)) as ChunkPath\\n  return loadChunkAsync.call(this, path)\\n}\\ncontextPrototype.L = loadChunkAsyncByUrl\\n\\nfunction loadWebAssembly(\\n  chunkPath: ChunkPath,\\n  _edgeModule: () => WebAssembly.Module,\\n  imports: WebAssembly.Imports\\n) {\\n  const resolved = path.resolve(RUNTIME_ROOT, chunkPath)\\n\\n  return instantiateWebAssemblyFromPath(resolved, imports)\\n}\\ncontextPrototype.w = loadWebAssembly\\n\\nfunction loadWebAssemblyModule(\\n  chunkPath: ChunkPath,\\n  _edgeModule: () => WebAssembly.Module\\n) {\\n  const resolved = path.resolve(RUNTIME_ROOT, chunkPath)\\n\\n  return compileWebAssemblyFromPath(resolved)\\n}\\ncontextPrototype.u = loadWebAssemblyModule\\n\\nfunction getWorkerBlobURL(_chunks: ChunkPath[]): string {\\n  throw new Error('Worker blobs are not implemented yet for Node.js')\\n}\\n\\nnodeContextPrototype.b = getWorkerBlobURL\\n\\nfunction instantiateModule(\\n  id: ModuleId,\\n  sourceType: SourceType,\\n  sourceData: SourceData\\n): Module {\\n  const moduleFactory = moduleFactories.get(id)\\n  if (typeof moduleFactory !== 'function') {\\n    // This can happen if modules incorrectly handle HMR disposes/updates,\\n    // e.g. when they keep a `setTimeout` around which still executes old code\\n    // and contains e.g. a `require(\\\"something\\\")` call.\\n    let instantiationReason: string\\n    switch (sourceType) {\\n      case SourceType.Runtime:\\n        instantiationReason = `as a runtime entry of chunk ${sourceData}`\\n        break\\n      case SourceType.Parent:\\n        instantiationReason = `because it was required from module ${sourceData}`\\n        break\\n      default:\\n        invariant(\\n          sourceType,\\n          (sourceType) => `Unknown source type: ${sourceType}`\\n        )\\n    }\\n    throw new Error(\\n      `Module ${id} was instantiated ${instantiationReason}, but the module factory is not available.`\\n    )\\n  }\\n\\n  const module: Module = createModuleObject(id)\\n  const exports = module.exports\\n  moduleCache[id] = module\\n\\n  const context = new (Context as any as ContextConstructor<Module>)(\\n    module,\\n    exports\\n  )\\n  // NOTE(alexkirsz) This can fail when the module encounters a runtime error.\\n  try {\\n    moduleFactory(context, module, exports)\\n  } catch (error) {\\n    module.error = error as any\\n    throw error\\n  }\\n\\n  module.loaded = true\\n  if (module.namespaceObject && module.exports !== module.namespaceObject) {\\n    // in case of a circular dependency: cjs1 -> esm2 -> cjs1\\n    interopEsm(module.exports, module.namespaceObject)\\n  }\\n\\n  return module\\n}\\n\\n/**\\n * Retrieves a module from the cache, or instantiate it if it is not cached.\\n */\\n// @ts-ignore\\nfunction getOrInstantiateModuleFromParent(\\n  id: ModuleId,\\n  sourceModule: Module\\n): Module {\\n  const module = moduleCache[id]\\n\\n  if (module) {\\n    if (module.error) {\\n      throw module.error\\n    }\\n\\n    return module\\n  }\\n\\n  return instantiateModule(id, SourceType.Parent, sourceModule.id)\\n}\\n\\n/**\\n * Instantiates a runtime module.\\n */\\nfunction instantiateRuntimeModule(\\n  chunkPath: ChunkPath,\\n  moduleId: ModuleId\\n): Module {\\n  return instantiateModule(moduleId, SourceType.Runtime, chunkPath)\\n}\\n\\n/**\\n * Retrieves a module from the cache, or instantiate it as a runtime module if it is not cached.\\n */\\n// @ts-ignore TypeScript doesn't separate this module space from the browser runtime\\nfunction getOrInstantiateRuntimeModule(\\n  chunkPath: ChunkPath,\\n  moduleId: ModuleId\\n): Module {\\n  const module = moduleCache[moduleId]\\n  if (module) {\\n    if (module.error) {\\n      throw module.error\\n    }\\n    return module\\n  }\\n\\n  return instantiateRuntimeModule(chunkPath, moduleId)\\n}\\n\\nconst regexJsUrl = /\\\\.js(?:\\\\?[^#]*)?(?:#.*)?$/\\n/**\\n * Checks if a given path/URL ends with .js, optionally followed by ?query or #fragment.\\n */\\nfunction isJs(chunkUrlOrPath: ChunkUrl | ChunkPath): boolean {\\n  return regexJsUrl.test(chunkUrlOrPath)\\n}\\n\\nmodule.exports = (sourcePath: ChunkPath) => ({\\n  m: (id: ModuleId) => getOrInstantiateRuntimeModule(sourcePath, id),\\n  c: (chunkData: ChunkData) => loadRuntimeChunk(sourcePath, chunkData),\\n})\\n\"],\"names\":[],\"mappings\":\"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\",\"ignoreList\":[0]}}]\n+    {\"offset\": {\"line\": 3, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/shared/runtime-utils.ts\"],\"sourcesContent\":[\"/**\\n * This file contains runtime types and functions that are shared between all\\n * TurboPack ECMAScript runtimes.\\n *\\n * It will be prepended to the runtime code of each runtime.\\n */\\n\\n/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\n/// <reference path=\\\"./runtime-types.d.ts\\\" />\\n\\ntype EsmNamespaceObject = Record<string, any>\\n\\n// @ts-ignore Defined in `dev-base.ts`\\ndeclare function getOrInstantiateModuleFromParent<M>(\\n  id: ModuleId,\\n  sourceModule: M\\n): M\\n\\nconst REEXPORTED_OBJECTS = new WeakMap<Module, ReexportedObjects>()\\n\\n/**\\n * Constructs the `__turbopack_context__` object for a module.\\n */\\nfunction Context(\\n  this: TurbopackBaseContext<Module>,\\n  module: Module,\\n  exports: Exports\\n) {\\n  this.m = module\\n  // We need to store this here instead of accessing it from the module object to:\\n  // 1. Make it available to factories directly, since we rewrite `this` to\\n  //    `__turbopack_context__.e` in CJS modules.\\n  // 2. Support async modules which rewrite `module.exports` to a promise, so we\\n  //    can still access the original exports object from functions like\\n  //    `esmExport`\\n  // Ideally we could find a new approach for async modules and drop this property altogether.\\n  this.e = exports\\n}\\nconst contextPrototype = Context.prototype as TurbopackBaseContext<Module>\\n\\ntype ModuleContextMap = Record<ModuleId, ModuleContextEntry>\\n\\ninterface ModuleContextEntry {\\n  id: () => ModuleId\\n  module: () => any\\n}\\n\\ninterface ModuleContext {\\n  // require call\\n  (moduleId: ModuleId): Exports | EsmNamespaceObject\\n\\n  // async import call\\n  import(moduleId: ModuleId): Promise<Exports | EsmNamespaceObject>\\n\\n  keys(): ModuleId[]\\n\\n  resolve(moduleId: ModuleId): ModuleId\\n}\\n\\ntype GetOrInstantiateModuleFromParent<M extends Module> = (\\n  moduleId: M['id'],\\n  parentModule: M\\n) => M\\n\\ndeclare function getOrInstantiateRuntimeModule(\\n  chunkPath: ChunkPath,\\n  moduleId: ModuleId\\n): Module\\n\\nconst hasOwnProperty = Object.prototype.hasOwnProperty\\nconst toStringTag = typeof Symbol !== 'undefined' && Symbol.toStringTag\\n\\nfunction defineProp(\\n  obj: any,\\n  name: PropertyKey,\\n  options: PropertyDescriptor & ThisType<any>\\n) {\\n  if (!hasOwnProperty.call(obj, name)) Object.defineProperty(obj, name, options)\\n}\\n\\nfunction getOverwrittenModule(\\n  moduleCache: ModuleCache<Module>,\\n  id: ModuleId\\n): Module {\\n  let module = moduleCache[id]\\n  if (!module) {\\n    // This is invoked when a module is merged into another module, thus it wasn't invoked via\\n    // instantiateModule and the cache entry wasn't created yet.\\n    module = createModuleObject(id)\\n    moduleCache[id] = module\\n  }\\n  return module\\n}\\n\\n/**\\n * Creates the module object. Only done here to ensure all module objects have the same shape.\\n */\\nfunction createModuleObject(id: ModuleId): Module {\\n  return {\\n    exports: {},\\n    error: undefined,\\n    id,\\n    namespaceObject: undefined,\\n  }\\n}\\n\\ntype BindingTag = 0\\nconst BindingTag_Value = 0 as BindingTag\\n\\n// an arbitrary sequence of bindings as\\n// - a prop name\\n// - BindingTag_Value, a value to be bound directly, or\\n// - 1 or 2 functions to bind as getters and sdetters\\ntype EsmBindings = Array<\\n  string | BindingTag | (() => unknown) | ((v: unknown) => void) | unknown\\n>\\n\\n/**\\n * Adds the getters to the exports object.\\n */\\nfunction esm(exports: Exports, bindings: EsmBindings) {\\n  defineProp(exports, '__esModule', { value: true })\\n  if (toStringTag) defineProp(exports, toStringTag, { value: 'Module' })\\n  let i = 0\\n  while (i < bindings.length) {\\n    const propName = bindings[i++] as string\\n    const tagOrFunction = bindings[i++]\\n    if (typeof tagOrFunction === 'number') {\\n      if (tagOrFunction === BindingTag_Value) {\\n        defineProp(exports, propName, {\\n          value: bindings[i++],\\n          enumerable: true,\\n          writable: false,\\n        })\\n      } else {\\n        throw new Error(`unexpected tag: ${tagOrFunction}`)\\n      }\\n    } else {\\n      const getterFn = tagOrFunction as () => unknown\\n      if (typeof bindings[i] === 'function') {\\n        const setterFn = bindings[i++] as (v: unknown) => void\\n        defineProp(exports, propName, {\\n          get: getterFn,\\n          set: setterFn,\\n          enumerable: true,\\n        })\\n      } else {\\n        defineProp(exports, propName, {\\n          get: getterFn,\\n          enumerable: true,\\n        })\\n      }\\n    }\\n  }\\n  Object.seal(exports)\\n}\\n\\n/**\\n * Makes the module an ESM with exports\\n */\\nfunction esmExport(\\n  this: TurbopackBaseContext<Module>,\\n  bindings: EsmBindings,\\n  id: ModuleId | undefined\\n) {\\n  let module: Module\\n  let exports: Module['exports']\\n  if (id != null) {\\n    module = getOverwrittenModule(this.c, id)\\n    exports = module.exports\\n  } else {\\n    module = this.m\\n    exports = this.e\\n  }\\n  module.namespaceObject = exports\\n  esm(exports, bindings)\\n}\\ncontextPrototype.s = esmExport\\n\\ntype ReexportedObjects = Record<PropertyKey, unknown>[]\\nfunction ensureDynamicExports(\\n  module: Module,\\n  exports: Exports\\n): ReexportedObjects {\\n  let reexportedObjects: ReexportedObjects | undefined =\\n    REEXPORTED_OBJECTS.get(module)\\n\\n  if (!reexportedObjects) {\\n    REEXPORTED_OBJECTS.set(module, (reexportedObjects = []))\\n    module.exports = module.namespaceObject = new Proxy(exports, {\\n      get(target, prop) {\\n        if (\\n          hasOwnProperty.call(target, prop) ||\\n          prop === 'default' ||\\n          prop === '__esModule'\\n        ) {\\n          return Reflect.get(target, prop)\\n        }\\n        for (const obj of reexportedObjects!) {\\n          const value = Reflect.get(obj, prop)\\n          if (value !== undefined) return value\\n        }\\n        return undefined\\n      },\\n      ownKeys(target) {\\n        const keys = Reflect.ownKeys(target)\\n        for (const obj of reexportedObjects!) {\\n          for (const key of Reflect.ownKeys(obj)) {\\n            if (key !== 'default' && !keys.includes(key)) keys.push(key)\\n          }\\n        }\\n        return keys\\n      },\\n    })\\n  }\\n  return reexportedObjects\\n}\\n\\n/**\\n * Dynamically exports properties from an object\\n */\\nfunction dynamicExport(\\n  this: TurbopackBaseContext<Module>,\\n  object: Record<string, any>,\\n  id: ModuleId | undefined\\n) {\\n  let module: Module\\n  let exports: Exports\\n  if (id != null) {\\n    module = getOverwrittenModule(this.c, id)\\n    exports = module.exports\\n  } else {\\n    module = this.m\\n    exports = this.e\\n  }\\n  const reexportedObjects = ensureDynamicExports(module, exports)\\n\\n  if (typeof object === 'object' && object !== null) {\\n    reexportedObjects.push(object)\\n  }\\n}\\ncontextPrototype.j = dynamicExport\\n\\nfunction exportValue(\\n  this: TurbopackBaseContext<Module>,\\n  value: any,\\n  id: ModuleId | undefined\\n) {\\n  let module: Module\\n  if (id != null) {\\n    module = getOverwrittenModule(this.c, id)\\n  } else {\\n    module = this.m\\n  }\\n  module.exports = value\\n}\\ncontextPrototype.v = exportValue\\n\\nfunction exportNamespace(\\n  this: TurbopackBaseContext<Module>,\\n  namespace: any,\\n  id: ModuleId | undefined\\n) {\\n  let module: Module\\n  if (id != null) {\\n    module = getOverwrittenModule(this.c, id)\\n  } else {\\n    module = this.m\\n  }\\n  module.exports = module.namespaceObject = namespace\\n}\\ncontextPrototype.n = exportNamespace\\n\\nfunction createGetter(obj: Record<string | symbol, any>, key: string | symbol) {\\n  return () => obj[key]\\n}\\n\\n/**\\n * @returns prototype of the object\\n */\\nconst getProto: (obj: any) => any = Object.getPrototypeOf\\n  ? (obj) => Object.getPrototypeOf(obj)\\n  : (obj) => obj.__proto__\\n\\n/** Prototypes that are not expanded for exports */\\nconst LEAF_PROTOTYPES = [null, getProto({}), getProto([]), getProto(getProto)]\\n\\n/**\\n * @param raw\\n * @param ns\\n * @param allowExportDefault\\n *   * `false`: will have the raw module as default export\\n *   * `true`: will have the default property as default export\\n */\\nfunction interopEsm(\\n  raw: Exports,\\n  ns: EsmNamespaceObject,\\n  allowExportDefault?: boolean\\n) {\\n  const bindings: EsmBindings = []\\n  let defaultLocation = -1\\n  for (\\n    let current = raw;\\n    (typeof current === 'object' || typeof current === 'function') &&\\n    !LEAF_PROTOTYPES.includes(current);\\n    current = getProto(current)\\n  ) {\\n    for (const key of Object.getOwnPropertyNames(current)) {\\n      bindings.push(key, createGetter(raw, key))\\n      if (defaultLocation === -1 && key === 'default') {\\n        defaultLocation = bindings.length - 1\\n      }\\n    }\\n  }\\n\\n  // this is not really correct\\n  // we should set the `default` getter if the imported module is a `.cjs file`\\n  if (!(allowExportDefault && defaultLocation >= 0)) {\\n    // Replace the binding with one for the namespace itself in order to preserve iteration order.\\n    if (defaultLocation >= 0) {\\n      // Replace the getter with the value\\n      bindings.splice(defaultLocation, 1, BindingTag_Value, raw)\\n    } else {\\n      bindings.push('default', BindingTag_Value, raw)\\n    }\\n  }\\n\\n  esm(ns, bindings)\\n  return ns\\n}\\n\\nfunction createNS(raw: Module['exports']): EsmNamespaceObject {\\n  if (typeof raw === 'function') {\\n    return function (this: any, ...args: any[]) {\\n      return raw.apply(this, args)\\n    }\\n  } else {\\n    return Object.create(null)\\n  }\\n}\\n\\nfunction esmImport(\\n  this: TurbopackBaseContext<Module>,\\n  id: ModuleId\\n): Exclude<Module['namespaceObject'], undefined> {\\n  const module = getOrInstantiateModuleFromParent(id, this.m)\\n\\n  // any ES module has to have `module.namespaceObject` defined.\\n  if (module.namespaceObject) return module.namespaceObject\\n\\n  // only ESM can be an async module, so we don't need to worry about exports being a promise here.\\n  const raw = module.exports\\n  return (module.namespaceObject = interopEsm(\\n    raw,\\n    createNS(raw),\\n    raw && (raw as any).__esModule\\n  ))\\n}\\ncontextPrototype.i = esmImport\\n\\nfunction asyncLoader(\\n  this: TurbopackBaseContext<Module>,\\n  moduleId: ModuleId\\n): Promise<Exports> {\\n  const loader = this.r(moduleId) as (\\n    importFunction: EsmImport\\n  ) => Promise<Exports>\\n  return loader(esmImport.bind(this))\\n}\\ncontextPrototype.A = asyncLoader\\n\\n// Add a simple runtime require so that environments without one can still pass\\n// `typeof require` CommonJS checks so that exports are correctly registered.\\nconst runtimeRequire =\\n  // @ts-ignore\\n  typeof require === 'function'\\n    ? // @ts-ignore\\n      require\\n    : function require() {\\n        throw new Error('Unexpected use of runtime require')\\n      }\\ncontextPrototype.t = runtimeRequire\\n\\nfunction commonJsRequire(\\n  this: TurbopackBaseContext<Module>,\\n  id: ModuleId\\n): Exports {\\n  return getOrInstantiateModuleFromParent(id, this.m).exports\\n}\\ncontextPrototype.r = commonJsRequire\\n\\n/**\\n * `require.context` and require/import expression runtime.\\n */\\nfunction moduleContext(map: ModuleContextMap): ModuleContext {\\n  function moduleContext(id: ModuleId): Exports {\\n    if (hasOwnProperty.call(map, id)) {\\n      return map[id].module()\\n    }\\n\\n    const e = new Error(`Cannot find module '${id}'`)\\n    ;(e as any).code = 'MODULE_NOT_FOUND'\\n    throw e\\n  }\\n\\n  moduleContext.keys = (): ModuleId[] => {\\n    return Object.keys(map)\\n  }\\n\\n  moduleContext.resolve = (id: ModuleId): ModuleId => {\\n    if (hasOwnProperty.call(map, id)) {\\n      return map[id].id()\\n    }\\n\\n    const e = new Error(`Cannot find module '${id}'`)\\n    ;(e as any).code = 'MODULE_NOT_FOUND'\\n    throw e\\n  }\\n\\n  moduleContext.import = async (id: ModuleId) => {\\n    return await (moduleContext(id) as Promise<Exports>)\\n  }\\n\\n  return moduleContext\\n}\\ncontextPrototype.f = moduleContext\\n\\n/**\\n * Returns the path of a chunk defined by its data.\\n */\\nfunction getChunkPath(chunkData: ChunkData): ChunkPath {\\n  return typeof chunkData === 'string' ? chunkData : chunkData.path\\n}\\n\\nfunction isPromise<T = any>(maybePromise: any): maybePromise is Promise<T> {\\n  return (\\n    maybePromise != null &&\\n    typeof maybePromise === 'object' &&\\n    'then' in maybePromise &&\\n    typeof maybePromise.then === 'function'\\n  )\\n}\\n\\nfunction isAsyncModuleExt<T extends {}>(obj: T): obj is AsyncModuleExt & T {\\n  return turbopackQueues in obj\\n}\\n\\nfunction createPromise<T>() {\\n  let resolve: (value: T | PromiseLike<T>) => void\\n  let reject: (reason?: any) => void\\n\\n  const promise = new Promise<T>((res, rej) => {\\n    reject = rej\\n    resolve = res\\n  })\\n\\n  return {\\n    promise,\\n    resolve: resolve!,\\n    reject: reject!,\\n  }\\n}\\n\\n// Load the CompressedmoduleFactories of a chunk into the `moduleFactories` Map.\\n// The CompressedModuleFactories format is\\n// - 1 or more module ids\\n// - a module factory function\\n// So walking this is a little complex but the flat structure is also fast to\\n// traverse, we can use `typeof` operators to distinguish the two cases.\\nfunction installCompressedModuleFactories(\\n  chunkModules: CompressedModuleFactories,\\n  offset: number,\\n  moduleFactories: ModuleFactories,\\n  newModuleId?: (id: ModuleId) => void\\n) {\\n  let i = offset\\n  while (i < chunkModules.length) {\\n    let moduleId = chunkModules[i] as ModuleId\\n    let end = i + 1\\n    // Find our factory function\\n    while (\\n      end < chunkModules.length &&\\n      typeof chunkModules[end] !== 'function'\\n    ) {\\n      end++\\n    }\\n    if (end === chunkModules.length) {\\n      throw new Error('malformed chunk format, expected a factory function')\\n    }\\n    // Each chunk item has a 'primary id' and optional additional ids. If the primary id is already\\n    // present we know all the additional ids are also present, so we don't need to check.\\n    if (!moduleFactories.has(moduleId)) {\\n      const moduleFactoryFn = chunkModules[end] as Function\\n      applyModuleFactoryName(moduleFactoryFn)\\n      newModuleId?.(moduleId)\\n      for (; i < end; i++) {\\n        moduleId = chunkModules[i] as ModuleId\\n        moduleFactories.set(moduleId, moduleFactoryFn)\\n      }\\n    }\\n    i = end + 1 // end is pointing at the last factory advance to the next id or the end of the array.\\n  }\\n}\\n\\n// everything below is adapted from webpack\\n// https://github.com/webpack/webpack/blob/6be4065ade1e252c1d8dcba4af0f43e32af1bdc1/lib/runtime/AsyncModuleRuntimeModule.js#L13\\n\\nconst turbopackQueues = Symbol('turbopack queues')\\nconst turbopackExports = Symbol('turbopack exports')\\nconst turbopackError = Symbol('turbopack error')\\n\\nconst enum QueueStatus {\\n  Unknown = -1,\\n  Unresolved = 0,\\n  Resolved = 1,\\n}\\n\\ntype AsyncQueueFn = (() => void) & { queueCount: number }\\ntype AsyncQueue = AsyncQueueFn[] & {\\n  status: QueueStatus\\n}\\n\\nfunction resolveQueue(queue?: AsyncQueue) {\\n  if (queue && queue.status !== QueueStatus.Resolved) {\\n    queue.status = QueueStatus.Resolved\\n    queue.forEach((fn) => fn.queueCount--)\\n    queue.forEach((fn) => (fn.queueCount-- ? fn.queueCount++ : fn()))\\n  }\\n}\\n\\ntype Dep = Exports | AsyncModulePromise | Promise<Exports>\\n\\ntype AsyncModuleExt = {\\n  [turbopackQueues]: (fn: (queue: AsyncQueue) => void) => void\\n  [turbopackExports]: Exports\\n  [turbopackError]?: any\\n}\\n\\ntype AsyncModulePromise<T = Exports> = Promise<T> & AsyncModuleExt\\n\\nfunction wrapDeps(deps: Dep[]): AsyncModuleExt[] {\\n  return deps.map((dep): AsyncModuleExt => {\\n    if (dep !== null && typeof dep === 'object') {\\n      if (isAsyncModuleExt(dep)) return dep\\n      if (isPromise(dep)) {\\n        const queue: AsyncQueue = Object.assign([], {\\n          status: QueueStatus.Unresolved,\\n        })\\n\\n        const obj: AsyncModuleExt = {\\n          [turbopackExports]: {},\\n          [turbopackQueues]: (fn: (queue: AsyncQueue) => void) => fn(queue),\\n        }\\n\\n        dep.then(\\n          (res) => {\\n            obj[turbopackExports] = res\\n            resolveQueue(queue)\\n          },\\n          (err) => {\\n            obj[turbopackError] = err\\n            resolveQueue(queue)\\n          }\\n        )\\n\\n        return obj\\n      }\\n    }\\n\\n    return {\\n      [turbopackExports]: dep,\\n      [turbopackQueues]: () => {},\\n    }\\n  })\\n}\\n\\nfunction asyncModule(\\n  this: TurbopackBaseContext<Module>,\\n  body: (\\n    handleAsyncDependencies: (\\n      deps: Dep[]\\n    ) => Exports[] | Promise<() => Exports[]>,\\n    asyncResult: (err?: any) => void\\n  ) => void,\\n  hasAwait: boolean\\n) {\\n  const module = this.m\\n  const queue: AsyncQueue | undefined = hasAwait\\n    ? Object.assign([], { status: QueueStatus.Unknown })\\n    : undefined\\n\\n  const depQueues: Set<AsyncQueue> = new Set()\\n\\n  const { resolve, reject, promise: rawPromise } = createPromise<Exports>()\\n\\n  const promise: AsyncModulePromise = Object.assign(rawPromise, {\\n    [turbopackExports]: module.exports,\\n    [turbopackQueues]: (fn) => {\\n      queue && fn(queue)\\n      depQueues.forEach(fn)\\n      promise['catch'](() => {})\\n    },\\n  } satisfies AsyncModuleExt)\\n\\n  const attributes: PropertyDescriptor = {\\n    get(): any {\\n      return promise\\n    },\\n    set(v: any) {\\n      // Calling `esmExport` leads to this.\\n      if (v !== promise) {\\n        promise[turbopackExports] = v\\n      }\\n    },\\n  }\\n\\n  Object.defineProperty(module, 'exports', attributes)\\n  Object.defineProperty(module, 'namespaceObject', attributes)\\n\\n  function handleAsyncDependencies(deps: Dep[]) {\\n    const currentDeps = wrapDeps(deps)\\n\\n    const getResult = () =>\\n      currentDeps.map((d) => {\\n        if (d[turbopackError]) throw d[turbopackError]\\n        return d[turbopackExports]\\n      })\\n\\n    const { promise, resolve } = createPromise<() => Exports[]>()\\n\\n    const fn: AsyncQueueFn = Object.assign(() => resolve(getResult), {\\n      queueCount: 0,\\n    })\\n\\n    function fnQueue(q: AsyncQueue) {\\n      if (q !== queue && !depQueues.has(q)) {\\n        depQueues.add(q)\\n        if (q && q.status === QueueStatus.Unresolved) {\\n          fn.queueCount++\\n          q.push(fn)\\n        }\\n      }\\n    }\\n\\n    currentDeps.map((dep) => dep[turbopackQueues](fnQueue))\\n\\n    return fn.queueCount ? promise : getResult()\\n  }\\n\\n  function asyncResult(err?: any) {\\n    if (err) {\\n      reject((promise[turbopackError] = err))\\n    } else {\\n      resolve(promise[turbopackExports])\\n    }\\n\\n    resolveQueue(queue)\\n  }\\n\\n  body(handleAsyncDependencies, asyncResult)\\n\\n  if (queue && queue.status === QueueStatus.Unknown) {\\n    queue.status = QueueStatus.Unresolved\\n  }\\n}\\ncontextPrototype.a = asyncModule\\n\\n/**\\n * A pseudo \\\"fake\\\" URL object to resolve to its relative path.\\n *\\n * When UrlRewriteBehavior is set to relative, calls to the `new URL()` will construct url without base using this\\n * runtime function to generate context-agnostic urls between different rendering context, i.e ssr / client to avoid\\n * hydration mismatch.\\n *\\n * This is based on webpack's existing implementation:\\n * https://github.com/webpack/webpack/blob/87660921808566ef3b8796f8df61bd79fc026108/lib/runtime/RelativeUrlRuntimeModule.js\\n */\\nconst relativeURL = function relativeURL(this: any, inputUrl: string) {\\n  const realUrl = new URL(inputUrl, 'x:/')\\n  const values: Record<string, any> = {}\\n  for (const key in realUrl) values[key] = (realUrl as any)[key]\\n  values.href = inputUrl\\n  values.pathname = inputUrl.replace(/[?#].*/, '')\\n  values.origin = values.protocol = ''\\n  values.toString = values.toJSON = (..._args: Array<any>) => inputUrl\\n  for (const key in values)\\n    Object.defineProperty(this, key, {\\n      enumerable: true,\\n      configurable: true,\\n      value: values[key],\\n    })\\n}\\nrelativeURL.prototype = URL.prototype\\ncontextPrototype.U = relativeURL\\n\\n/**\\n * Utility function to ensure all variants of an enum are handled.\\n */\\nfunction invariant(never: never, computeMessage: (arg: any) => string): never {\\n  throw new Error(`Invariant: ${computeMessage(never)}`)\\n}\\n\\n/**\\n * A stub function to make `require` available but non-functional in ESM.\\n */\\nfunction requireStub(_moduleId: ModuleId): never {\\n  throw new Error('dynamic usage of require is not supported')\\n}\\ncontextPrototype.z = requireStub\\n\\n// Make `globalThis` available to the module in a way that cannot be shadowed by a local variable.\\ncontextPrototype.g = globalThis\\n\\ntype ContextConstructor<M> = {\\n  new (module: Module, exports: Exports): TurbopackBaseContext<M>\\n}\\n\\nfunction applyModuleFactoryName(factory: Function) {\\n  // Give the module factory a nice name to improve stack traces.\\n  Object.defineProperty(factory, 'name', {\\n    value: '__TURBOPACK__module__evaluation__',\\n  })\\n}\\n\"],\"names\":[],\"mappings\":\"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\",\"ignoreList\":[0]}},\n+    {\"offset\": {\"line\": 483, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/shared-node/base-externals-utils.ts\"],\"sourcesContent\":[\"/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\n/// <reference path=\\\"../shared/runtime-utils.ts\\\" />\\n\\n/// A 'base' utilities to support runtime can have externals.\\n/// Currently this is for node.js / edge runtime both.\\n/// If a fn requires node.js specific behavior, it should be placed in `node-external-utils` instead.\\n\\nasync function externalImport(id: DependencySpecifier) {\\n  let raw\\n  try {\\n    raw = await import(id)\\n  } catch (err) {\\n    // TODO(alexkirsz) This can happen when a client-side module tries to load\\n    // an external module we don't provide a shim for (e.g. querystring, url).\\n    // For now, we fail semi-silently, but in the future this should be a\\n    // compilation error.\\n    throw new Error(`Failed to load external module ${id}: ${err}`)\\n  }\\n\\n  if (raw && raw.__esModule && raw.default && 'default' in raw.default) {\\n    return interopEsm(raw.default, createNS(raw), true)\\n  }\\n\\n  return raw\\n}\\ncontextPrototype.y = externalImport\\n\\nfunction externalRequire(\\n  id: ModuleId,\\n  thunk: () => any,\\n  esm: boolean = false\\n): Exports | EsmNamespaceObject {\\n  let raw\\n  try {\\n    raw = thunk()\\n  } catch (err) {\\n    // TODO(alexkirsz) This can happen when a client-side module tries to load\\n    // an external module we don't provide a shim for (e.g. querystring, url).\\n    // For now, we fail semi-silently, but in the future this should be a\\n    // compilation error.\\n    throw new Error(`Failed to load external module ${id}: ${err}`)\\n  }\\n\\n  if (!esm || raw.__esModule) {\\n    return raw\\n  }\\n\\n  return interopEsm(raw, createNS(raw), true)\\n}\\n\\nexternalRequire.resolve = (\\n  id: string,\\n  options?: {\\n    paths?: string[]\\n  }\\n) => {\\n  return require.resolve(id, options)\\n}\\ncontextPrototype.x = externalRequire\\n\"],\"names\":[],\"mappings\":\"AAAA,oDAAoD,GAEpD,mDAAmD;AAEnD,6DAA6D;AAC7D,sDAAsD;AACtD,qGAAqG;AAErG,eAAe,eAAe,EAAuB;IACnD,IAAI;IACJ,IAAI;QACF,MAAM,MAAM,MAAM,CAAC;IACrB,EAAE,OAAO,KAAK;QACZ,0EAA0E;QAC1E,0EAA0E;QAC1E,qEAAqE;QACrE,qBAAqB;QACrB,MAAM,IAAI,MAAM,CAAC,+BAA+B,EAAE,GAAG,EAAE,EAAE,KAAK;IAChE;IAEA,IAAI,OAAO,IAAI,UAAU,IAAI,IAAI,OAAO,IAAI,aAAa,IAAI,OAAO,EAAE;QACpE,OAAO,WAAW,IAAI,OAAO,EAAE,SAAS,MAAM;IAChD;IAEA,OAAO;AACT;AACA,iBAAiB,CAAC,GAAG;AAErB,SAAS,gBACP,EAAY,EACZ,KAAgB,EAChB,MAAe,KAAK;IAEpB,IAAI;IACJ,IAAI;QACF,MAAM;IACR,EAAE,OAAO,KAAK;QACZ,0EAA0E;QAC1E,0EAA0E;QAC1E,qEAAqE;QACrE,qBAAqB;QACrB,MAAM,IAAI,MAAM,CAAC,+BAA+B,EAAE,GAAG,EAAE,EAAE,KAAK;IAChE;IAEA,IAAI,CAAC,OAAO,IAAI,UAAU,EAAE;QAC1B,OAAO;IACT;IAEA,OAAO,WAAW,KAAK,SAAS,MAAM;AACxC;AAEA,gBAAgB,OAAO,GAAG,CACxB,IACA;IAIA,OAAO,QAAQ,OAAO,CAAC,IAAI;AAC7B;AACA,iBAAiB,CAAC,GAAG\",\"ignoreList\":[0]}},\n+    {\"offset\": {\"line\": 524, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/shared-node/node-externals-utils.ts\"],\"sourcesContent\":[\"/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\ndeclare var RUNTIME_PUBLIC_PATH: string\\ndeclare var RELATIVE_ROOT_PATH: string\\ndeclare var ASSET_PREFIX: string\\n\\nconst path = require('path')\\n\\nconst relativePathToRuntimeRoot = path.relative(RUNTIME_PUBLIC_PATH, '.')\\n// Compute the relative path to the `distDir`.\\nconst relativePathToDistRoot = path.join(\\n  relativePathToRuntimeRoot,\\n  RELATIVE_ROOT_PATH\\n)\\nconst RUNTIME_ROOT = path.resolve(__filename, relativePathToRuntimeRoot)\\n// Compute the absolute path to the root, by stripping distDir from the absolute path to this file.\\nconst ABSOLUTE_ROOT = path.resolve(__filename, relativePathToDistRoot)\\n\\n/**\\n * Returns an absolute path to the given module path.\\n * Module path should be relative, either path to a file or a directory.\\n *\\n * This fn allows to calculate an absolute path for some global static values, such as\\n * `__dirname` or `import.meta.url` that Turbopack will not embeds in compile time.\\n * See ImportMetaBinding::code_generation for the usage.\\n */\\nfunction resolveAbsolutePath(modulePath?: string): string {\\n  if (modulePath) {\\n    return path.join(ABSOLUTE_ROOT, modulePath)\\n  }\\n  return ABSOLUTE_ROOT\\n}\\nContext.prototype.P = resolveAbsolutePath\\n\"],\"names\":[],\"mappings\":\"AAAA,oDAAoD,GAMpD,MAAM,OAAO,QAAQ;AAErB,MAAM,4BAA4B,KAAK,QAAQ,CAAC,qBAAqB;AACrE,8CAA8C;AAC9C,MAAM,yBAAyB,KAAK,IAAI,CACtC,2BACA;AAEF,MAAM,eAAe,KAAK,OAAO,CAAC,YAAY;AAC9C,mGAAmG;AACnG,MAAM,gBAAgB,KAAK,OAAO,CAAC,YAAY;AAE/C;;;;;;;CAOC,GACD,SAAS,oBAAoB,UAAmB;IAC9C,IAAI,YAAY;QACd,OAAO,KAAK,IAAI,CAAC,eAAe;IAClC;IACA,OAAO;AACT;AACA,QAAQ,SAAS,CAAC,CAAC,GAAG\",\"ignoreList\":[0]}},\n+    {\"offset\": {\"line\": 545, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/shared-node/node-wasm-utils.ts\"],\"sourcesContent\":[\"/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\n/// <reference path=\\\"../shared/runtime-utils.ts\\\" />\\n\\nfunction readWebAssemblyAsResponse(path: string) {\\n  const { createReadStream } = require('fs') as typeof import('fs')\\n  const { Readable } = require('stream') as typeof import('stream')\\n\\n  const stream = createReadStream(path)\\n\\n  // @ts-ignore unfortunately there's a slight type mismatch with the stream.\\n  return new Response(Readable.toWeb(stream), {\\n    headers: {\\n      'content-type': 'application/wasm',\\n    },\\n  })\\n}\\n\\nasync function compileWebAssemblyFromPath(\\n  path: string\\n): Promise<WebAssembly.Module> {\\n  const response = readWebAssemblyAsResponse(path)\\n\\n  return await WebAssembly.compileStreaming(response)\\n}\\n\\nasync function instantiateWebAssemblyFromPath(\\n  path: string,\\n  importsObj: WebAssembly.Imports\\n): Promise<Exports> {\\n  const response = readWebAssemblyAsResponse(path)\\n\\n  const { instance } = await WebAssembly.instantiateStreaming(\\n    response,\\n    importsObj\\n  )\\n\\n  return instance.exports\\n}\\n\"],\"names\":[],\"mappings\":\"AAAA,oDAAoD,GAEpD,mDAAmD;AAEnD,SAAS,0BAA0B,IAAY;IAC7C,MAAM,EAAE,gBAAgB,EAAE,GAAG,QAAQ;IACrC,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ;IAE7B,MAAM,SAAS,iBAAiB;IAEhC,2EAA2E;IAC3E,OAAO,IAAI,SAAS,SAAS,KAAK,CAAC,SAAS;QAC1C,SAAS;YACP,gBAAgB;QAClB;IACF;AACF;AAEA,eAAe,2BACb,IAAY;IAEZ,MAAM,WAAW,0BAA0B;IAE3C,OAAO,MAAM,YAAY,gBAAgB,CAAC;AAC5C;AAEA,eAAe,+BACb,IAAY,EACZ,UAA+B;IAE/B,MAAM,WAAW,0BAA0B;IAE3C,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,YAAY,oBAAoB,CACzD,UACA;IAGF,OAAO,SAAS,OAAO;AACzB\",\"ignoreList\":[0]}},\n+    {\"offset\": {\"line\": 566, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[turbopack]/nodejs/runtime.ts\"],\"sourcesContent\":[\"/* eslint-disable @typescript-eslint/no-unused-vars */\\n\\n/// <reference path=\\\"../shared/runtime-utils.ts\\\" />\\n/// <reference path=\\\"../shared-node/base-externals-utils.ts\\\" />\\n/// <reference path=\\\"../shared-node/node-externals-utils.ts\\\" />\\n/// <reference path=\\\"../shared-node/node-wasm-utils.ts\\\" />\\n\\nenum SourceType {\\n  /**\\n   * The module was instantiated because it was included in an evaluated chunk's\\n   * runtime.\\n   * SourceData is a ChunkPath.\\n   */\\n  Runtime = 0,\\n  /**\\n   * The module was instantiated because a parent module imported it.\\n   * SourceData is a ModuleId.\\n   */\\n  Parent = 1,\\n}\\n\\ntype SourceData = ChunkPath | ModuleId\\n\\nprocess.env.TURBOPACK = '1'\\n\\ninterface TurbopackNodeBuildContext extends TurbopackBaseContext<Module> {\\n  R: ResolvePathFromModule\\n  x: ExternalRequire\\n  y: ExternalImport\\n}\\n\\nconst nodeContextPrototype = Context.prototype as TurbopackNodeBuildContext\\n\\ntype ModuleFactory = (\\n  this: Module['exports'],\\n  context: TurbopackNodeBuildContext\\n) => unknown\\n\\nconst url = require('url') as typeof import('url')\\n\\nconst moduleFactories: ModuleFactories = new Map()\\nnodeContextPrototype.M = moduleFactories\\nconst moduleCache: ModuleCache<Module> = Object.create(null)\\nnodeContextPrototype.c = moduleCache\\n\\n/**\\n * Returns an absolute path to the given module's id.\\n */\\nfunction resolvePathFromModule(\\n  this: TurbopackBaseContext<Module>,\\n  moduleId: string\\n): string {\\n  const exported = this.r(moduleId)\\n  const exportedPath = exported?.default ?? exported\\n  if (typeof exportedPath !== 'string') {\\n    return exported as any\\n  }\\n\\n  const strippedAssetPrefix = exportedPath.slice(ASSET_PREFIX.length)\\n  const resolved = path.resolve(RUNTIME_ROOT, strippedAssetPrefix)\\n\\n  return url.pathToFileURL(resolved).href\\n}\\nnodeContextPrototype.R = resolvePathFromModule\\n\\nfunction loadRuntimeChunk(sourcePath: ChunkPath, chunkData: ChunkData): void {\\n  if (typeof chunkData === 'string') {\\n    loadRuntimeChunkPath(sourcePath, chunkData)\\n  } else {\\n    loadRuntimeChunkPath(sourcePath, chunkData.path)\\n  }\\n}\\n\\nconst loadedChunks = new Set<ChunkPath>()\\nconst unsupportedLoadChunk = Promise.resolve(undefined)\\nconst loadedChunk: Promise<void> = Promise.resolve(undefined)\\nconst chunkCache = new Map<ChunkPath, Promise<void>>()\\n\\nfunction clearChunkCache() {\\n  chunkCache.clear()\\n}\\n\\nfunction loadRuntimeChunkPath(\\n  sourcePath: ChunkPath,\\n  chunkPath: ChunkPath\\n): void {\\n  if (!isJs(chunkPath)) {\\n    // We only support loading JS chunks in Node.js.\\n    // This branch can be hit when trying to load a CSS chunk.\\n    return\\n  }\\n\\n  if (loadedChunks.has(chunkPath)) {\\n    return\\n  }\\n\\n  try {\\n    const resolved = path.resolve(RUNTIME_ROOT, chunkPath)\\n    const chunkModules: CompressedModuleFactories = require(resolved)\\n    installCompressedModuleFactories(chunkModules, 0, moduleFactories)\\n    loadedChunks.add(chunkPath)\\n  } catch (e) {\\n    let errorMessage = `Failed to load chunk ${chunkPath}`\\n\\n    if (sourcePath) {\\n      errorMessage += ` from runtime for chunk ${sourcePath}`\\n    }\\n\\n    throw new Error(errorMessage, {\\n      cause: e,\\n    })\\n  }\\n}\\n\\nfunction loadChunkAsync(\\n  this: TurbopackBaseContext<Module>,\\n  chunkData: ChunkData\\n): Promise<void> {\\n  const chunkPath = typeof chunkData === 'string' ? chunkData : chunkData.path\\n  if (!isJs(chunkPath)) {\\n    // We only support loading JS chunks in Node.js.\\n    // This branch can be hit when trying to load a CSS chunk.\\n    return unsupportedLoadChunk\\n  }\\n\\n  let entry = chunkCache.get(chunkPath)\\n  if (entry === undefined) {\\n    try {\\n      // resolve to an absolute path to simplify `require` handling\\n      const resolved = path.resolve(RUNTIME_ROOT, chunkPath)\\n      // TODO: consider switching to `import()` to enable concurrent chunk loading and async file io\\n      // However this is incompatible with hot reloading (since `import` doesn't use the require cache)\\n      const chunkModules: CompressedModuleFactories = require(resolved)\\n      installCompressedModuleFactories(chunkModules, 0, moduleFactories)\\n      entry = loadedChunk\\n    } catch (e) {\\n      const errorMessage = `Failed to load chunk ${chunkPath} from module ${this.m.id}`\\n\\n      // Cache the failure promise, future requests will also get this same rejection\\n      entry = Promise.reject(\\n        new Error(errorMessage, {\\n          cause: e,\\n        })\\n      )\\n    }\\n    chunkCache.set(chunkPath, entry)\\n  }\\n  // TODO: Return an instrumented Promise that React can use instead of relying on referential equality.\\n  return entry\\n}\\ncontextPrototype.l = loadChunkAsync\\n\\nfunction loadChunkAsyncByUrl(\\n  this: TurbopackBaseContext<Module>,\\n  chunkUrl: string\\n) {\\n  const path = url.fileURLToPath(new URL(chunkUrl, RUNTIME_ROOT)) as ChunkPath\\n  return loadChunkAsync.call(this, path)\\n}\\ncontextPrototype.L = loadChunkAsyncByUrl\\n\\nfunction loadWebAssembly(\\n  chunkPath: ChunkPath,\\n  _edgeModule: () => WebAssembly.Module,\\n  imports: WebAssembly.Imports\\n) {\\n  const resolved = path.resolve(RUNTIME_ROOT, chunkPath)\\n\\n  return instantiateWebAssemblyFromPath(resolved, imports)\\n}\\ncontextPrototype.w = loadWebAssembly\\n\\nfunction loadWebAssemblyModule(\\n  chunkPath: ChunkPath,\\n  _edgeModule: () => WebAssembly.Module\\n) {\\n  const resolved = path.resolve(RUNTIME_ROOT, chunkPath)\\n\\n  return compileWebAssemblyFromPath(resolved)\\n}\\ncontextPrototype.u = loadWebAssemblyModule\\n\\nfunction getWorkerBlobURL(_chunks: ChunkPath[]): string {\\n  throw new Error('Worker blobs are not implemented yet for Node.js')\\n}\\n\\nnodeContextPrototype.b = getWorkerBlobURL\\n\\nfunction instantiateModule(\\n  id: ModuleId,\\n  sourceType: SourceType,\\n  sourceData: SourceData\\n): Module {\\n  const moduleFactory = moduleFactories.get(id)\\n  if (typeof moduleFactory !== 'function') {\\n    // This can happen if modules incorrectly handle HMR disposes/updates,\\n    // e.g. when they keep a `setTimeout` around which still executes old code\\n    // and contains e.g. a `require(\\\"something\\\")` call.\\n    let instantiationReason: string\\n    switch (sourceType) {\\n      case SourceType.Runtime:\\n        instantiationReason = `as a runtime entry of chunk ${sourceData}`\\n        break\\n      case SourceType.Parent:\\n        instantiationReason = `because it was required from module ${sourceData}`\\n        break\\n      default:\\n        invariant(\\n          sourceType,\\n          (sourceType) => `Unknown source type: ${sourceType}`\\n        )\\n    }\\n    throw new Error(\\n      `Module ${id} was instantiated ${instantiationReason}, but the module factory is not available.`\\n    )\\n  }\\n\\n  const module: Module = createModuleObject(id)\\n  const exports = module.exports\\n  moduleCache[id] = module\\n\\n  const context = new (Context as any as ContextConstructor<Module>)(\\n    module,\\n    exports\\n  )\\n  // NOTE(alexkirsz) This can fail when the module encounters a runtime error.\\n  try {\\n    moduleFactory(context, module, exports)\\n  } catch (error) {\\n    module.error = error as any\\n    throw error\\n  }\\n\\n  module.loaded = true\\n  if (module.namespaceObject && module.exports !== module.namespaceObject) {\\n    // in case of a circular dependency: cjs1 -> esm2 -> cjs1\\n    interopEsm(module.exports, module.namespaceObject)\\n  }\\n\\n  return module\\n}\\n\\n/**\\n * Retrieves a module from the cache, or instantiate it if it is not cached.\\n */\\n// @ts-ignore\\nfunction getOrInstantiateModuleFromParent(\\n  id: ModuleId,\\n  sourceModule: Module\\n): Module {\\n  const module = moduleCache[id]\\n\\n  if (module) {\\n    if (module.error) {\\n      throw module.error\\n    }\\n\\n    return module\\n  }\\n\\n  return instantiateModule(id, SourceType.Parent, sourceModule.id)\\n}\\n\\n/**\\n * Instantiates a runtime module.\\n */\\nfunction instantiateRuntimeModule(\\n  chunkPath: ChunkPath,\\n  moduleId: ModuleId\\n): Module {\\n  return instantiateModule(moduleId, SourceType.Runtime, chunkPath)\\n}\\n\\n/**\\n * Retrieves a module from the cache, or instantiate it as a runtime module if it is not cached.\\n */\\n// @ts-ignore TypeScript doesn't separate this module space from the browser runtime\\nfunction getOrInstantiateRuntimeModule(\\n  chunkPath: ChunkPath,\\n  moduleId: ModuleId\\n): Module {\\n  const module = moduleCache[moduleId]\\n  if (module) {\\n    if (module.error) {\\n      throw module.error\\n    }\\n    return module\\n  }\\n\\n  return instantiateRuntimeModule(chunkPath, moduleId)\\n}\\n\\nconst regexJsUrl = /\\\\.js(?:\\\\?[^#]*)?(?:#.*)?$/\\n/**\\n * Checks if a given path/URL ends with .js, optionally followed by ?query or #fragment.\\n */\\nfunction isJs(chunkUrlOrPath: ChunkUrl | ChunkPath): boolean {\\n  return regexJsUrl.test(chunkUrlOrPath)\\n}\\n\\nmodule.exports = (sourcePath: ChunkPath) => ({\\n  m: (id: ModuleId) => getOrInstantiateRuntimeModule(sourcePath, id),\\n  c: (chunkData: ChunkData) => loadRuntimeChunk(sourcePath, chunkData),\\n})\\n\"],\"names\":[],\"mappings\":\"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\",\"ignoreList\":[0]}}]\n }\n\\ No newline at end of file"
        },
        {
            "sha": "d9a5eb8b988ed4914aae97bd683b9b360c7cf156",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/runtime/default_dev_runtime/output/5c1d0_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_c0f7e0b0.js",
            "status": "modified",
            "additions": 39,
            "deletions": 26,
            "changes": 65,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_dev_runtime%2Foutput%2F5c1d0_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_c0f7e0b0.js",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_dev_runtime%2Foutput%2F5c1d0_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_c0f7e0b0.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_dev_runtime%2Foutput%2F5c1d0_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_c0f7e0b0.js?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc",
            "patch": "@@ -57,39 +57,52 @@ function getOverwrittenModule(moduleCache, id) {\n         namespaceObject: undefined\n     };\n }\n+const BindingTag_Value = 0;\n /**\n  * Adds the getters to the exports object.\n- */ function esm(exports, getters) {\n+ */ function esm(exports, bindings) {\n     defineProp(exports, '__esModule', {\n         value: true\n     });\n     if (toStringTag) defineProp(exports, toStringTag, {\n         value: 'Module'\n     });\n     let i = 0;\n-    while(i < getters.length){\n-        const propName = getters[i++];\n-        // TODO(luke.sandberg): we could support raw values here, but would need a discriminator beyond 'not a function'\n-        const getter = getters[i++];\n-        if (typeof getters[i] === 'function') {\n-            // a setter\n-            defineProp(exports, propName, {\n-                get: getter,\n-                set: getters[i++],\n-                enumerable: true\n-            });\n+    while(i < bindings.length){\n+        const propName = bindings[i++];\n+        const tagOrFunction = bindings[i++];\n+        if (typeof tagOrFunction === 'number') {\n+            if (tagOrFunction === BindingTag_Value) {\n+                defineProp(exports, propName, {\n+                    value: bindings[i++],\n+                    enumerable: true,\n+                    writable: false\n+                });\n+            } else {\n+                throw new Error(`unexpected tag: ${tagOrFunction}`);\n+            }\n         } else {\n-            defineProp(exports, propName, {\n-                get: getter,\n-                enumerable: true\n-            });\n+            const getterFn = tagOrFunction;\n+            if (typeof bindings[i] === 'function') {\n+                const setterFn = bindings[i++];\n+                defineProp(exports, propName, {\n+                    get: getterFn,\n+                    set: setterFn,\n+                    enumerable: true\n+                });\n+            } else {\n+                defineProp(exports, propName, {\n+                    get: getterFn,\n+                    enumerable: true\n+                });\n+            }\n         }\n     }\n     Object.seal(exports);\n }\n /**\n  * Makes the module an ESM with exports\n- */ function esmExport(getters, id) {\n+ */ function esmExport(bindings, id) {\n     let module;\n     let exports;\n     if (id != null) {\n@@ -100,7 +113,7 @@ function getOverwrittenModule(moduleCache, id) {\n         exports = this.e;\n     }\n     module.namespaceObject = exports;\n-    esm(exports, getters);\n+    esm(exports, bindings);\n }\n contextPrototype.s = esmExport;\n function ensureDynamicExports(module, exports) {\n@@ -188,14 +201,13 @@ function createGetter(obj, key) {\n  *   * `false`: will have the raw module as default export\n  *   * `true`: will have the default property as default export\n  */ function interopEsm(raw, ns, allowExportDefault) {\n-    const getters = [];\n-    // The index of the `default` export if any\n+    const bindings = [];\n     let defaultLocation = -1;\n     for(let current = raw; (typeof current === 'object' || typeof current === 'function') && !LEAF_PROTOTYPES.includes(current); current = getProto(current)){\n         for (const key of Object.getOwnPropertyNames(current)){\n-            getters.push(key, createGetter(raw, key));\n+            bindings.push(key, createGetter(raw, key));\n             if (defaultLocation === -1 && key === 'default') {\n-                defaultLocation = getters.length - 1;\n+                defaultLocation = bindings.length - 1;\n             }\n         }\n     }\n@@ -204,12 +216,13 @@ function createGetter(obj, key) {\n     if (!(allowExportDefault && defaultLocation >= 0)) {\n         // Replace the binding with one for the namespace itself in order to preserve iteration order.\n         if (defaultLocation >= 0) {\n-            getters[defaultLocation] = ()=>raw;\n+            // Replace the getter with the value\n+            bindings.splice(defaultLocation, 1, BindingTag_Value, raw);\n         } else {\n-            getters.push('default', ()=>raw);\n+            bindings.push('default', BindingTag_Value, raw);\n         }\n     }\n-    esm(ns, getters);\n+    esm(ns, bindings);\n     return ns;\n }\n function createNS(raw) {\n@@ -232,7 +245,7 @@ function esmImport(id) {\n contextPrototype.i = esmImport;\n function asyncLoader(moduleId) {\n     const loader = this.r(moduleId);\n-    return loader(this.i.bind(this));\n+    return loader(esmImport.bind(this));\n }\n contextPrototype.A = asyncLoader;\n // Add a simple runtime require so that environments without one can still pass"
        },
        {
            "sha": "42f7d75b42c2aa4fa85d74bf9fb5e698700d6679",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/runtime/default_dev_runtime/output/780ce_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_c0f7e0b0.js.map",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_dev_runtime%2Foutput%2F780ce_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_c0f7e0b0.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/3e0247431e59f6796f8a1c25a39dc17c78f979bc/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_dev_runtime%2Foutput%2F780ce_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_c0f7e0b0.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fruntime%2Fdefault_dev_runtime%2Foutput%2F780ce_turbopack-tests_tests_snapshot_runtime_default_dev_runtime_input_index_c0f7e0b0.js.map?ref=3e0247431e59f6796f8a1c25a39dc17c78f979bc"
        }
    ],
    "stats": {
        "total": 853,
        "additions": 603,
        "deletions": 250
    }
}