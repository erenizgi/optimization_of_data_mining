{
    "author": "eps1lon",
    "message": "[dev-overlay] Harden types when handling hydration mismatches (#77334)",
    "sha": "b571c525d0a2a7a633dc9886f4d3c01aa22202c2",
    "files": [
        {
            "sha": "7624ffb8295b020398a9e93c16628f6a7e9e4778",
            "filename": "packages/next/src/client/components/errors/attach-hydration-error-state.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/b571c525d0a2a7a633dc9886f4d3c01aa22202c2/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Ferrors%2Fattach-hydration-error-state.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/b571c525d0a2a7a633dc9886f4d3c01aa22202c2/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Ferrors%2Fattach-hydration-error-state.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Ferrors%2Fattach-hydration-error-state.ts?ref=b571c525d0a2a7a633dc9886f4d3c01aa22202c2",
            "patch": "@@ -6,6 +6,7 @@ import {\n import {\n   hydrationErrorState,\n   getReactHydrationDiffSegments,\n+  type HydrationErrorState,\n } from './hydration-error-info'\n \n export function attachHydrationErrorState(error: Error) {\n@@ -27,15 +28,19 @@ export function attachHydrationErrorState(error: Error) {\n   if (reactHydrationDiffSegments) {\n     const diff = reactHydrationDiffSegments[1]\n     parsedHydrationErrorState = {\n-      ...(error as any).details,\n+      ...((error as any).details as HydrationErrorState),\n       ...hydrationErrorState,\n       // If diff is present in error, we don't need to pick up the console logged warning.\n       // - if hydration error has diff, and is not hydration diff log, then it's a normal hydration error.\n       // - if hydration error no diff, then leverage the one from the hydration diff log.\n \n       warning: (diff && !isHydrationWarning\n         ? null\n-        : hydrationErrorState.warning) || [getDefaultHydrationErrorMessage()],\n+        : hydrationErrorState.warning) || [\n+        getDefaultHydrationErrorMessage(),\n+        '',\n+        '',\n+      ],\n       // When it's hydration diff log, do not show notes section.\n       // This condition is only for the 1st squashed error.\n       notes: isHydrationWarning ? '' : reactHydrationDiffSegments[0],"
        }
    ],
    "stats": {
        "total": 9,
        "additions": 7,
        "deletions": 2
    }
}