{
    "author": "icyJoseph",
    "message": "docs: server-only/client-only in Next.js (#80408)\n\nCloses:\nhttps://linear.app/vercel/issue/DOC-4679/server-only-client-only-as-managed-by-nextjs\nFixes: https://github.com/vercel/next.js/issues/71071",
    "sha": "2251d0f74a25a9da0b0efb7b62431bab218d5b6a",
    "files": [
        {
            "sha": "d3775d88212a30453e627c0068e78f5589287959",
            "filename": "docs/01-app/01-getting-started/08-server-and-client-components.mdx",
            "status": "modified",
            "additions": 24,
            "deletions": 6,
            "changes": 30,
            "blob_url": "https://github.com/vercel/next.js/blob/2251d0f74a25a9da0b0efb7b62431bab218d5b6a/docs%2F01-app%2F01-getting-started%2F08-server-and-client-components.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/2251d0f74a25a9da0b0efb7b62431bab218d5b6a/docs%2F01-app%2F01-getting-started%2F08-server-and-client-components.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F01-getting-started%2F08-server-and-client-components.mdx?ref=2251d0f74a25a9da0b0efb7b62431bab218d5b6a",
            "patch": "@@ -507,7 +507,7 @@ export default function Page() {\n \n ### Preventing environment poisoning\n \n-JavaScript modules can be shared between both Server and Client Components modules. This means it's possible to accidentanlly import server-only code into the client. For example, consider the following function:\n+JavaScript modules can be shared between both Server and Client Components modules. This means it's possible to accidentally import server-only code into the client. For example, consider the following function:\n \n ```ts filename=\"lib/data.ts\" switcher\n export async function getData() {\n@@ -541,10 +541,6 @@ As a result, even though `getData()` can be imported and executed on the client,\n \n To prevent accidental usage in Client Components, you can use the [`server-only` package](https://www.npmjs.com/package/server-only).\n \n-```bash filename=\"Terminal\"\n-npm install server-only\n-```\n-\n Then, import the package into a file that contains server-only code:\n \n ```js filename=\"lib/data.js\"\n@@ -563,4 +559,26 @@ export async function getData() {\n \n Now, if you try to import the module into a Client Component, there will be a build-time error.\n \n-> **Good to know**: The corresponding [`client-only` package](https://www.npmjs.com/package/client-only) can be used to mark modules that contain client-only logic like code that accesses the `window` object.\n+The corresponding [`client-only` package](https://www.npmjs.com/package/client-only) can be used to mark modules that contain client-only logic like code that accesses the `window` object.\n+\n+In Next.js, installing `server-only` or `client-only` is **optional**. However, if your linting rules flag extraneous dependencies, you may install them to avoid issues.\n+\n+```bash package=\"npm\"\n+npm install server-only\n+```\n+\n+```bash package=\"yarn\"\n+yarn add server-only\n+```\n+\n+```bash package=\"pnpm\"\n+pnpm add server-only\n+```\n+\n+```bash package=\"bun\"\n+bun add server-only\n+```\n+\n+Next.js handles `server-only` and `client-only` imports internally to provide clearer error messages when a module is used in the wrong environment. The contents of these packages from NPM are not used by Next.js.\n+\n+Next.js also provides its own type declarations for `server-only` and `client-only`, for TypeScript configurations where [`noUncheckedSideEffectImports`](https://www.typescriptlang.org/tsconfig/#noUncheckedSideEffectImports) is active."
        }
    ],
    "stats": {
        "total": 30,
        "additions": 24,
        "deletions": 6
    }
}