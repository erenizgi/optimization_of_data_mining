{
    "author": "sokra",
    "message": "Turbopack: add separate turbopackPersistentCachingForBuild/ForDev flags (#84215)\n\n### What?\n\nMove persistent caching for `next build` into a separate config option: `turbopackPersistentCachingForBuild`.\nAnd `next dev` to `turbopackPersistentCachingForDev`.",
    "sha": "8586cdf17dd1460fd2560bcdc8288e122e8eaff7",
    "files": [
        {
            "sha": "c0132fd14cc1cdecf720ca2a0b034e15c88221c4",
            "filename": "bench/heavy-npm-deps/next.config.mjs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/bench%2Fheavy-npm-deps%2Fnext.config.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/bench%2Fheavy-npm-deps%2Fnext.config.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/bench%2Fheavy-npm-deps%2Fnext.config.mjs?ref=8586cdf17dd1460fd2560bcdc8288e122e8eaff7",
            "patch": "@@ -7,7 +7,8 @@ const nextConfig = {\n     ignoreBuildErrors: true,\n   },\n   experimental: {\n-    turbopackPersistentCaching: process.env.TURBO_CACHE === '1',\n+    turbopackPersistentCachingForDev: process.env.TURBO_CACHE === '1',\n+    turbopackPersistentCachingForBuild: process.env.TURBO_CACHE === '1',\n   },\n }\n "
        },
        {
            "sha": "140bf9762ff6a4450ccf9c6b34147d75d254823b",
            "filename": "docs/01-app/03-api-reference/05-config/01-next-config-js/turbopackPersistentCaching.mdx",
            "status": "modified",
            "additions": 9,
            "deletions": 2,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2FturbopackPersistentCaching.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2FturbopackPersistentCaching.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2FturbopackPersistentCaching.mdx?ref=8586cdf17dd1460fd2560bcdc8288e122e8eaff7",
            "patch": "@@ -18,7 +18,10 @@ import type { NextConfig } from 'next'\n \n const nextConfig: NextConfig = {\n   experimental: {\n-    turbopackPersistentCaching: true,\n+    // Enable persistent caching for `next dev`\n+    turbopackPersistentCachingForDev: true,\n+    // Enable persistent caching for `next build`\n+    turbopackPersistentCachingForBuild: true,\n   },\n }\n \n@@ -29,7 +32,10 @@ export default nextConfig\n /** @type {import('next').NextConfig} */\n const nextConfig = {\n   experimental: {\n-    turbopackPersistentCaching: true,\n+    // Enable persistent caching for `next dev`\n+    turbopackPersistentCachingForDev: true,\n+    // Enable persistent caching for `next build`\n+    turbopackPersistentCachingForBuild: true,\n   },\n }\n \n@@ -40,4 +46,5 @@ module.exports = nextConfig\n \n | Version   | Changes                                     |\n | --------- | ------------------------------------------- |\n+| `v16.0.0` | Separate flags for build and dev.           |\n | `v15.5.0` | Persistent caching released as experimental |"
        },
        {
            "sha": "0a370c065d93af383b9397c789cfe9a26a242843",
            "filename": "docs/01-app/03-api-reference/08-turbopack.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/docs%2F01-app%2F03-api-reference%2F08-turbopack.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/docs%2F01-app%2F03-api-reference%2F08-turbopack.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F08-turbopack.mdx?ref=8586cdf17dd1460fd2560bcdc8288e122e8eaff7",
            "patch": "@@ -140,7 +140,7 @@ We are planning to offer an equivalent to the `innerGraph` optimization in Turbo\n \n ### Build Caching\n \n-Webpack supports [disk build caching](https://webpack.js.org/configuration/cache/#cache) to speed up builds. We are planning to support an analogous feature in Turbopack but it is not ready yet. On the `next@canary` release you can experiment with our solution by enabling the [`experimental.turbopackPersistentCaching` flag](/docs/app/api-reference/config/next-config-js/turbopackPersistentCaching).\n+Webpack supports [disk build caching](https://webpack.js.org/configuration/cache/#cache) to speed up builds. We are planning to support an analogous feature in Turbopack but it is not ready yet. On the `next@canary` release you can experiment with our solution by enabling the [`experimental.turbopackPersistentCachingForDev`/`experimental.turbopackPersistentCachingForBuild` flags](/docs/app/api-reference/config/next-config-js/turbopackPersistentCaching).\n \n > **Good to know:** For this reason, when comparing webpack and Turbopack performance, make sure to delete the `.next` folder between builds to see a fair comparison.\n "
        },
        {
            "sha": "bf5da1895f4622876efa40743fbee852f8fad164",
            "filename": "packages/next/src/build/define-env.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts?ref=8586cdf17dd1460fd2560bcdc8288e122e8eaff7",
            "patch": "@@ -331,7 +331,8 @@ export function getDefineEnv({\n     // In the worst case we'll show an option to clear the cache, but it'll be a\n     // no-op that just restarts the development server.\n     'process.env.__NEXT_BUNDLER_HAS_PERSISTENT_CACHE':\n-      !isTurbopack || (config.experimental.turbopackPersistentCaching ?? false),\n+      !isTurbopack ||\n+      (config.experimental.turbopackPersistentCachingForDev ?? false),\n     'process.env.__NEXT_REACT_DEBUG_CHANNEL':\n       config.experimental.reactDebugChannel ?? false,\n   }"
        },
        {
            "sha": "bb3648fdb8467a4035d0a754e3fbfc0fc5ccc5db",
            "filename": "packages/next/src/build/index.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts?ref=8586cdf17dd1460fd2560bcdc8288e122e8eaff7",
            "patch": "@@ -206,7 +206,7 @@ import {\n } from '../server/lib/router-utils/build-prefetch-segment-data-route'\n \n import { turbopackBuild } from './turbopack-build'\n-import { isPersistentCachingEnabled } from '../shared/lib/turbopack/utils'\n+import { isPersistentCachingEnabledForBuild } from '../shared/lib/turbopack/utils'\n import { inlineStaticEnv } from '../lib/inline-static-env'\n import { populateStaticEnv } from '../lib/static-env'\n import { durationToString } from './duration-to-string'\n@@ -2756,7 +2756,7 @@ export default async function build(\n         },\n         {\n           featureName: 'turbopackPersistentCaching',\n-          invocationCount: isPersistentCachingEnabled(config) ? 1 : 0,\n+          invocationCount: isPersistentCachingEnabledForBuild(config) ? 1 : 0,\n         },\n       ]\n       telemetry.record("
        },
        {
            "sha": "5d30e8a4fb166552ea17aa31d28331e268ce9e46",
            "filename": "packages/next/src/build/turbopack-build/impl.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fbuild%2Fturbopack-build%2Fimpl.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fbuild%2Fturbopack-build%2Fimpl.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fturbopack-build%2Fimpl.ts?ref=8586cdf17dd1460fd2560bcdc8288e122e8eaff7",
            "patch": "@@ -2,7 +2,7 @@ import path from 'path'\n import { validateTurboNextConfig } from '../../lib/turbopack-warning'\n import {\n   formatIssue,\n-  isPersistentCachingEnabled,\n+  isPersistentCachingEnabledForBuild,\n   isRelevantWarning,\n } from '../../shared/lib/turbopack/utils'\n import { NextBuildContext } from '../build-context'\n@@ -50,7 +50,7 @@ export async function turbopackBuild(): Promise<{\n \n   const supportedBrowsers = getSupportedBrowsers(dir, dev)\n \n-  const persistentCaching = isPersistentCachingEnabled(config)\n+  const persistentCaching = isPersistentCachingEnabledForBuild(config)\n   const rootPath = config.turbopack?.root || config.outputFileTracingRoot || dir\n   const project = await bindings.turbo.createProject(\n     {"
        },
        {
            "sha": "05edd797feead3b9e54440a36df3cc710452346d",
            "filename": "packages/next/src/server/config-schema.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-schema.ts?ref=8586cdf17dd1460fd2560bcdc8288e122e8eaff7",
            "patch": "@@ -436,7 +436,8 @@ export const configSchema: zod.ZodType<NextConfig> = z.lazy(() =>\n         webpackMemoryOptimizations: z.boolean().optional(),\n         turbopackMemoryLimit: z.number().optional(),\n         turbopackMinify: z.boolean().optional(),\n-        turbopackPersistentCaching: z.boolean().optional(),\n+        turbopackPersistentCachingForDev: z.boolean().optional(),\n+        turbopackPersistentCachingForBuild: z.boolean().optional(),\n         turbopackSourceMaps: z.boolean().optional(),\n         turbopackTreeShaking: z.boolean().optional(),\n         turbopackRemoveUnusedExports: z.boolean().optional(),"
        },
        {
            "sha": "889bfcb002818d4c722b72c2e9dd124734106ad6",
            "filename": "packages/next/src/server/config-shared.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts?ref=8586cdf17dd1460fd2560bcdc8288e122e8eaff7",
            "patch": "@@ -423,9 +423,14 @@ export interface ExperimentalConfig {\n   turbopackScopeHoisting?: boolean\n \n   /**\n-   * Enable persistent caching for the turbopack dev server and build.\n+   * Enable persistent caching for the turbopack dev server.\n    */\n-  turbopackPersistentCaching?: boolean\n+  turbopackPersistentCachingForDev?: boolean\n+\n+  /**\n+   * Enable persistent caching for the turbopack build.\n+   */\n+  turbopackPersistentCachingForBuild?: boolean\n \n   /**\n    * Enable source maps. Defaults to true."
        },
        {
            "sha": "cb8802e593da90a7d58b8adedc5b89477207e669",
            "filename": "packages/next/src/server/config.test.ts",
            "status": "modified",
            "additions": 17,
            "deletions": 3,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.test.ts?ref=8586cdf17dd1460fd2560bcdc8288e122e8eaff7",
            "patch": "@@ -133,17 +133,31 @@ describe('loadConfig', () => {\n       )\n     })\n \n-    it('errors when using persistentCaching if not in canary', async () => {\n+    it('errors when using persistentCachingForDev if not in canary', async () => {\n       await expect(\n         loadConfig(PHASE_PRODUCTION_BUILD, __dirname, {\n           customConfig: {\n             experimental: {\n-              turbopackPersistentCaching: true,\n+              turbopackPersistentCachingForDev: true,\n             },\n           },\n         })\n       ).rejects.toThrow(\n-        /The experimental feature \"experimental.turbopackPersistentCaching\" can only be enabled when using the latest canary version of Next.js./\n+        /The experimental feature \"experimental.turbopackPersistentCachingForDev\" can only be enabled when using the latest canary version of Next.js./\n+      )\n+    })\n+\n+    it('errors when using persistentCachingForBuild if not in canary', async () => {\n+      await expect(\n+        loadConfig(PHASE_PRODUCTION_BUILD, __dirname, {\n+          customConfig: {\n+            experimental: {\n+              turbopackPersistentCachingForBuild: true,\n+            },\n+          },\n+        })\n+      ).rejects.toThrow(\n+        /The experimental feature \"experimental.turbopackPersistentCachingForBuild\" can only be enabled when using the latest canary version of Next.js./\n       )\n     })\n   })"
        },
        {
            "sha": "3ff3cdbc018efae8b53f1f7549348ff9b0fb9adb",
            "filename": "packages/next/src/server/config.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts?ref=8586cdf17dd1460fd2560bcdc8288e122e8eaff7",
            "patch": "@@ -354,9 +354,13 @@ function assignDefaultsAndValidate(\n       throw new CanaryOnlyError({ feature: 'experimental.ppr' })\n     } else if (result.experimental?.cacheComponents) {\n       throw new CanaryOnlyError({ feature: 'experimental.cacheComponents' })\n-    } else if (result.experimental?.turbopackPersistentCaching) {\n+    } else if (result.experimental?.turbopackPersistentCachingForDev) {\n       throw new CanaryOnlyError({\n-        feature: 'experimental.turbopackPersistentCaching',\n+        feature: 'experimental.turbopackPersistentCachingForDev',\n+      })\n+    } else if (result.experimental?.turbopackPersistentCachingForBuild) {\n+      throw new CanaryOnlyError({\n+        feature: 'experimental.turbopackPersistentCachingForBuild',\n       })\n     }\n   }"
        },
        {
            "sha": "fcf7ad11104d11f8b59e1ab30eaea4c616608d92",
            "filename": "packages/next/src/server/dev/hot-reloader-turbopack.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-turbopack.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-turbopack.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-turbopack.ts?ref=8586cdf17dd1460fd2560bcdc8288e122e8eaff7",
            "patch": "@@ -84,7 +84,7 @@ import { setBundlerFindSourceMapImplementation } from '../patch-error-inspect'\n import { getNextErrorFeedbackMiddleware } from '../../next-devtools/server/get-next-error-feedback-middleware'\n import {\n   formatIssue,\n-  isPersistentCachingEnabled,\n+  isPersistentCachingEnabledForDev,\n   isWellKnownError,\n   processIssues,\n   renderStyledStringToErrorAnsi,\n@@ -273,7 +273,7 @@ export async function createHotReloaderTurbopack(\n       currentNodeJsVersion,\n     },\n     {\n-      persistentCaching: isPersistentCachingEnabled(opts.nextConfig),\n+      persistentCaching: isPersistentCachingEnabledForDev(opts.nextConfig),\n       memoryLimit: opts.nextConfig.experimental?.turbopackMemoryLimit,\n       isShortSession: false,\n     }"
        },
        {
            "sha": "ea55e9ad18f84b447842844e72cc7a4b6ebec9de",
            "filename": "packages/next/src/server/lib/router-utils/setup-dev-bundler.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Fsetup-dev-bundler.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Fsetup-dev-bundler.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Fsetup-dev-bundler.ts?ref=8586cdf17dd1460fd2560bcdc8288e122e8eaff7",
            "patch": "@@ -69,7 +69,7 @@ import { normalizeMetadataPageToRoute } from '../../../lib/metadata/get-metadata\n import { JsConfigPathsPlugin } from '../../../build/webpack/plugins/jsconfig-paths-plugin'\n import { store as consoleStore } from '../../../build/output/store'\n import {\n-  isPersistentCachingEnabled,\n+  isPersistentCachingEnabledForDev,\n   ModuleBuildError,\n } from '../../../shared/lib/turbopack/utils'\n import { getDefineEnv } from '../../../build/define-env'\n@@ -1239,7 +1239,9 @@ export async function setupDevBundler(opts: SetupOpts) {\n     eventName: EVENT_BUILD_FEATURE_USAGE,\n     payload: {\n       featureName: 'turbopackPersistentCaching',\n-      invocationCount: isPersistentCachingEnabled(opts.nextConfig) ? 1 : 0,\n+      invocationCount: isPersistentCachingEnabledForDev(opts.nextConfig)\n+        ? 1\n+        : 0,\n     },\n   })\n "
        },
        {
            "sha": "2f1084560316912b03ecc03dc1b9903eb7fa5918",
            "filename": "packages/next/src/shared/lib/turbopack/utils.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fturbopack%2Futils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fturbopack%2Futils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Fturbopack%2Futils.ts?ref=8586cdf17dd1460fd2560bcdc8288e122e8eaff7",
            "patch": "@@ -314,8 +314,14 @@ export function renderStyledStringToErrorAnsi(string: StyledString): string {\n   }\n }\n \n-export function isPersistentCachingEnabled(\n+export function isPersistentCachingEnabledForDev(\n   config: NextConfigComplete\n ): boolean {\n-  return config.experimental?.turbopackPersistentCaching || false\n+  return config.experimental?.turbopackPersistentCachingForDev || false\n+}\n+\n+export function isPersistentCachingEnabledForBuild(\n+  config: NextConfigComplete\n+): boolean {\n+  return config.experimental?.turbopackPersistentCachingForBuild || false\n }"
        },
        {
            "sha": "115aa76ea58977f25e82fcd2b734c5d232cee564",
            "filename": "test/e2e/persistent-caching/next.config.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/test%2Fe2e%2Fpersistent-caching%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/test%2Fe2e%2Fpersistent-caching%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fpersistent-caching%2Fnext.config.js?ref=8586cdf17dd1460fd2560bcdc8288e122e8eaff7",
            "patch": "@@ -16,7 +16,8 @@ const nextConfig = {\n     },\n   },\n   experimental: {\n-    turbopackPersistentCaching: true,\n+    turbopackPersistentCachingForDev: true,\n+    turbopackPersistentCachingForBuild: true,\n   },\n   env: {\n     NEXT_PUBLIC_CONFIG_ENV: 'hello world',"
        },
        {
            "sha": "f2640a89b0360442c1d1eab3e6a3612c05cea934",
            "filename": "test/integration/telemetry/next.config.persistent-cache",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/test%2Fintegration%2Ftelemetry%2Fnext.config.persistent-cache",
            "raw_url": "https://github.com/vercel/next.js/raw/8586cdf17dd1460fd2560bcdc8288e122e8eaff7/test%2Fintegration%2Ftelemetry%2Fnext.config.persistent-cache",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Ftelemetry%2Fnext.config.persistent-cache?ref=8586cdf17dd1460fd2560bcdc8288e122e8eaff7",
            "patch": "@@ -1,5 +1,6 @@\n module.exports = {\n   experimental: {\n-    turbopackPersistentCaching: true\n+    turbopackPersistentCachingForDev: true,\n+    turbopackPersistentCachingForBuild: true,\n   }\n }"
        }
    ],
    "stats": {
        "total": 93,
        "additions": 68,
        "deletions": 25
    }
}