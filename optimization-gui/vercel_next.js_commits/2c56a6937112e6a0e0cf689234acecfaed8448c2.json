{
    "author": "eps1lon",
    "message": "[test] Move all files to .ts (4/6) (#85639)",
    "sha": "2c56a6937112e6a0e0cf689234acecfaed8448c2",
    "files": [
        {
            "sha": "8ae12b7b8d9296e3712627ec4d16647baee7aafa",
            "filename": "test/integration/link-ref-app/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Flink-ref-app%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Flink-ref-app%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Flink-ref-app%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/link-ref-app/test/index.test.js"
        },
        {
            "sha": "9f3c714e74900d4e51f76e2134dccba2a87aa9ab",
            "filename": "test/integration/link-ref-pages/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Flink-ref-pages%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Flink-ref-pages%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Flink-ref-pages%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/link-ref-pages/test/index.test.js"
        },
        {
            "sha": "4d6fd8a5abddbd82a50bcf4b9a88fe1722ee6562",
            "filename": "test/integration/link-with-encoding/test/index.test.ts",
            "status": "renamed",
            "additions": 40,
            "deletions": 50,
            "changes": 90,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Flink-with-encoding%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Flink-with-encoding%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Flink-with-encoding%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -40,11 +40,10 @@ describe('Link Component with Encoding', () => {\n             { pathname: encodeURI('/single/hello world ') }\n           )`\n         )\n-        await check(() => browser.hasElementByCssSelector('#query-content'), {\n-          test(val) {\n-            return Boolean(val)\n-          },\n-        })\n+        await check(\n+          () => browser.hasElementByCssSelector('#query-content'),\n+          true\n+        )\n         const text = await browser.elementByCss('#query-content').text()\n         expect(text).toMatchInlineSnapshot(`\"{\"slug\":\"hello world \"}\"`)\n       } finally {\n@@ -57,11 +56,10 @@ describe('Link Component with Encoding', () => {\n       try {\n         await waitFor(2000)\n         await browser.elementByCss('#single-spaces').click()\n-        await check(() => browser.hasElementByCssSelector('#query-content'), {\n-          test(val) {\n-            return Boolean(val)\n-          },\n-        })\n+        await check(\n+          () => browser.hasElementByCssSelector('#query-content'),\n+          true\n+        )\n         const text = await browser.elementByCss('#query-content').text()\n         expect(text).toMatchInlineSnapshot(`\"{\"slug\":\"hello world \"}\"`)\n       } finally {\n@@ -91,11 +89,10 @@ describe('Link Component with Encoding', () => {\n             { pathname: encodeURI('/single/hello%world') }\n           )`\n         )\n-        await check(() => browser.hasElementByCssSelector('#query-content'), {\n-          test(val) {\n-            return Boolean(val)\n-          },\n-        })\n+        await check(\n+          () => browser.hasElementByCssSelector('#query-content'),\n+          true\n+        )\n         const text = await browser.elementByCss('#query-content').text()\n         expect(text).toMatchInlineSnapshot(`\"{\"slug\":\"hello%world\"}\"`)\n       } finally {\n@@ -108,11 +105,10 @@ describe('Link Component with Encoding', () => {\n       try {\n         await waitFor(2000)\n         await browser.elementByCss('#single-percent').click()\n-        await check(() => browser.hasElementByCssSelector('#query-content'), {\n-          test(val) {\n-            return Boolean(val)\n-          },\n-        })\n+        await check(\n+          () => browser.hasElementByCssSelector('#query-content'),\n+          true\n+        )\n         const text = await browser.elementByCss('#query-content').text()\n         expect(text).toMatchInlineSnapshot(`\"{\"slug\":\"hello%world\"}\"`)\n       } finally {\n@@ -145,11 +141,10 @@ describe('Link Component with Encoding', () => {\n             { pathname: '/single/hello${encodeURIComponent('/')}world' }\n           )`\n         )\n-        await check(() => browser.hasElementByCssSelector('#query-content'), {\n-          test(val) {\n-            return Boolean(val)\n-          },\n-        })\n+        await check(\n+          () => browser.hasElementByCssSelector('#query-content'),\n+          true\n+        )\n         const text = await browser.elementByCss('#query-content').text()\n         expect(text).toMatchInlineSnapshot(`\"{\"slug\":\"hello/world\"}\"`)\n       } finally {\n@@ -162,11 +157,10 @@ describe('Link Component with Encoding', () => {\n       try {\n         await waitFor(2000)\n         await browser.elementByCss('#single-slash').click()\n-        await check(() => browser.hasElementByCssSelector('#query-content'), {\n-          test(val) {\n-            return Boolean(val)\n-          },\n-        })\n+        await check(\n+          () => browser.hasElementByCssSelector('#query-content'),\n+          true\n+        )\n         const text = await browser.elementByCss('#query-content').text()\n         expect(text).toMatchInlineSnapshot(`\"{\"slug\":\"hello/world\"}\"`)\n       } finally {\n@@ -203,11 +197,10 @@ describe('Link Component with Encoding', () => {\n             { pathname: '/single/hello${encodeURIComponent('\"')}world' }\n           )`\n         )\n-        await check(() => browser.hasElementByCssSelector('#query-content'), {\n-          test(val) {\n-            return Boolean(val)\n-          },\n-        })\n+        await check(\n+          () => browser.hasElementByCssSelector('#query-content'),\n+          true\n+        )\n         const text = await browser.elementByCss('#query-content').text()\n         expect(JSON.parse(text)).toMatchInlineSnapshot(`\n           {\n@@ -224,11 +217,10 @@ describe('Link Component with Encoding', () => {\n       try {\n         await waitFor(2000)\n         await browser.elementByCss('#single-double-quote').click()\n-        await check(() => browser.hasElementByCssSelector('#query-content'), {\n-          test(val) {\n-            return Boolean(val)\n-          },\n-        })\n+        await check(\n+          () => browser.hasElementByCssSelector('#query-content'),\n+          true\n+        )\n         const text = await browser.elementByCss('#query-content').text()\n         expect(JSON.parse(text)).toMatchInlineSnapshot(`\n           {\n@@ -265,11 +257,10 @@ describe('Link Component with Encoding', () => {\n             { pathname: '/single/hello${encodeURIComponent(':')}world' }\n           )`\n         )\n-        await check(() => browser.hasElementByCssSelector('#query-content'), {\n-          test(val) {\n-            return Boolean(val)\n-          },\n-        })\n+        await check(\n+          () => browser.hasElementByCssSelector('#query-content'),\n+          true\n+        )\n         const text = await browser.elementByCss('#query-content').text()\n         expect(text).toMatchInlineSnapshot(`\"{\"slug\":\"hello:world\"}\"`)\n       } finally {\n@@ -282,11 +273,10 @@ describe('Link Component with Encoding', () => {\n       try {\n         await waitFor(2000)\n         await browser.elementByCss('#single-colon').click()\n-        await check(() => browser.hasElementByCssSelector('#query-content'), {\n-          test(val) {\n-            return Boolean(val)\n-          },\n-        })\n+        await check(\n+          () => browser.hasElementByCssSelector('#query-content'),\n+          true\n+        )\n         const text = await browser.elementByCss('#query-content').text()\n         expect(text).toMatchInlineSnapshot(`\"{\"slug\":\"hello:world\"}\"`)\n       } finally {",
            "previous_filename": "test/integration/link-with-encoding/test/index.test.js"
        },
        {
            "sha": "279e62db9eccb7caa47adea14fb8e39e72b090f2",
            "filename": "test/integration/link-without-router/test/index.test.tsx",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Flink-without-router%2Ftest%2Findex.test.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Flink-without-router%2Ftest%2Findex.test.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Flink-without-router%2Ftest%2Findex.test.tsx?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/link-without-router/test/index.test.js"
        },
        {
            "sha": "b604bfed844cd227bc46f6c7894b0ae84bcee7ed",
            "filename": "test/integration/middleware-basic/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmiddleware-basic%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmiddleware-basic%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fmiddleware-basic%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/middleware-basic/test/index.test.js"
        },
        {
            "sha": "4d2ad13dd3d41053f2684fe7c9cd6d95d3020161",
            "filename": "test/integration/middleware-build-errors/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmiddleware-build-errors%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmiddleware-build-errors%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fmiddleware-build-errors%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/middleware-build-errors/test/index.test.js"
        },
        {
            "sha": "54ee3ae775d5e4830547ecce523d9295a188c2ae",
            "filename": "test/integration/middleware-dev-update/test/index.test.ts",
            "status": "renamed",
            "additions": 8,
            "deletions": 6,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmiddleware-dev-update%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmiddleware-dev-update%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fmiddleware-dev-update%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -10,6 +10,8 @@ import {\n import { join } from 'path'\n import webdriver from 'next-webdriver'\n \n+let app\n+let appPort\n const context = {\n   appDir: join(__dirname, '../'),\n   logs: { output: '', stdout: '', stderr: '' },\n@@ -19,8 +21,8 @@ const context = {\n describe('Middleware development errors', () => {\n   beforeEach(async () => {\n     context.logs = { output: '', stdout: '', stderr: '' }\n-    context.appPort = await findPort()\n-    context.app = await launchApp(context.appDir, context.appPort, {\n+    appPort = await findPort()\n+    app = await launchApp(context.appDir, appPort, {\n       onStdout(msg) {\n         context.logs.output += msg\n         context.logs.stdout += msg\n@@ -34,14 +36,14 @@ describe('Middleware development errors', () => {\n \n   afterEach(async () => {\n     context.middleware.restore()\n-    if (context.app) {\n-      await killApp(context.app)\n+    if (app) {\n+      await killApp(app)\n     }\n   })\n \n   async function assertMiddlewareFetch(hasMiddleware, path = '/') {\n     await check(async () => {\n-      const res = await fetchViaHTTP(context.appPort, path)\n+      const res = await fetchViaHTTP(appPort, path)\n       expect(res.status).toBe(200)\n       expect(res.headers.get('x-from-middleware')).toBe(\n         hasMiddleware ? 'true' : null\n@@ -51,7 +53,7 @@ describe('Middleware development errors', () => {\n   }\n \n   async function assertMiddlewareRender(hasMiddleware, path = '/') {\n-    const browser = await webdriver(context.appPort, path)\n+    const browser = await webdriver(appPort, path)\n     const fromMiddleware = await browser.elementById('from-middleware').text()\n     expect(fromMiddleware).toBe(hasMiddleware ? 'true' : 'null')\n   }",
            "previous_filename": "test/integration/middleware-dev-update/test/index.test.js"
        },
        {
            "sha": "4cb98aea4ae14d6fdadb056d47e510aafe78b4d4",
            "filename": "test/integration/middleware-prefetch/tests/index.test.ts",
            "status": "renamed",
            "additions": 8,
            "deletions": 10,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmiddleware-prefetch%2Ftests%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmiddleware-prefetch%2Ftests%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fmiddleware-prefetch%2Ftests%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -14,6 +14,8 @@ import {\n \n jest.setTimeout(1000 * 60 * 2)\n \n+let appPort\n+let app\n const context = {\n   appDir: join(__dirname, '../'),\n   buildLogs: { output: '', stdout: '', stderr: '' },\n@@ -24,27 +26,23 @@ describe('Middleware Production Prefetch', () => {\n   ;(process.env.TURBOPACK_DEV ? describe.skip : describe)(\n     'production mode',\n     () => {\n-      afterAll(() => killApp(context.app))\n+      afterAll(() => killApp(app))\n       beforeAll(async () => {\n         const build = await nextBuild(context.appDir, undefined, {\n           stderr: true,\n           stdout: true,\n         })\n \n-        context.buildId = await fs.readFile(\n-          join(context.appDir, '.next/BUILD_ID'),\n-          'utf8'\n-        )\n+        await fs.readFile(join(context.appDir, '.next/BUILD_ID'), 'utf8')\n \n         context.buildLogs = {\n           output: build.stdout + build.stderr,\n           stderr: build.stderr,\n           stdout: build.stdout,\n         }\n-        context.dev = false\n \n-        context.appPort = await findPort()\n-        context.app = await nextStart(context.appDir, context.appPort, {\n+        appPort = await findPort()\n+        app = await nextStart(context.appDir, appPort, {\n           env: {\n             MIDDLEWARE_TEST: 'asdf',\n           },\n@@ -60,7 +58,7 @@ describe('Middleware Production Prefetch', () => {\n       })\n \n       it(`prefetch correctly for unexistent routes`, async () => {\n-        const browser = await webdriver(context.appPort, `/`)\n+        const browser = await webdriver(appPort, `/`)\n         await browser.elementByCss('#made-up-link').moveTo()\n         await check(async () => {\n           const scripts = await browser.elementsByCss('script')\n@@ -76,7 +74,7 @@ describe('Middleware Production Prefetch', () => {\n       })\n \n       it(`does not prefetch provided path if it will be rewritten`, async () => {\n-        const browser = await webdriver(context.appPort, `/`)\n+        const browser = await webdriver(appPort, `/`)\n         await browser.elementByCss('#ssg-page-2').moveTo()\n         await check(async () => {\n           const scripts = await browser.elementsByCss('script')",
            "previous_filename": "test/integration/middleware-prefetch/tests/index.test.js"
        },
        {
            "sha": "8df93a188a1f9219fbe7a074103b858cbb512d0c",
            "filename": "test/integration/middleware-src-node/test/index.test.ts",
            "status": "renamed",
            "additions": 14,
            "deletions": 5,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmiddleware-src-node%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmiddleware-src-node%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fmiddleware-src-node%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -1,5 +1,3 @@\n-/* eslint-env jest */\n-\n import fs from 'fs-extra'\n import { join } from 'path'\n import {\n@@ -40,6 +38,7 @@ function runDoubleMiddlewareTests() {\n \n async function writeRootMiddleware() {\n   await fs.copy(join(appDir, 'src/pages'), join(appDir, 'pages'), {\n+    // @ts-expect-error\n     force: true,\n     recursive: true,\n   })\n@@ -68,9 +67,19 @@ return response\n }\n \n async function removeRootMiddleware() {\n-  await fs.remove(rootMiddlewareJSFile, { force: true })\n-  await fs.remove(rootMiddlewareTSFile, { force: true })\n-  await fs.remove(join(appDir, 'pages'), { force: true, recursive: true })\n+  await fs.remove(rootMiddlewareJSFile, {\n+    // @ts-expect-error\n+    force: true,\n+  })\n+  await fs.remove(rootMiddlewareTSFile, {\n+    // @ts-expect-error\n+    force: true,\n+  })\n+  await fs.remove(join(appDir, 'pages'), {\n+    // @ts-expect-error\n+    force: true,\n+    recursive: true,\n+  })\n }\n \n describe.each([",
            "previous_filename": "test/integration/middleware-src-node/test/index.test.js"
        },
        {
            "sha": "bfd71a231446484945b1381de662356d6ecbec32",
            "filename": "test/integration/middleware-src/test/index.test.ts",
            "status": "renamed",
            "additions": 14,
            "deletions": 5,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmiddleware-src%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmiddleware-src%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fmiddleware-src%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -1,5 +1,3 @@\n-/* eslint-env jest */\n-\n import fs from 'fs-extra'\n import { join } from 'path'\n import {\n@@ -40,6 +38,7 @@ function runDoubleMiddlewareTests() {\n \n async function writeRootMiddleware() {\n   await fs.copy(join(appDir, 'src/pages'), join(appDir, 'pages'), {\n+    // @ts-expect-error\n     force: true,\n     recursive: true,\n   })\n@@ -68,9 +67,19 @@ return response\n }\n \n async function removeRootMiddleware() {\n-  await fs.remove(rootMiddlewareJSFile, { force: true })\n-  await fs.remove(rootMiddlewareTSFile, { force: true })\n-  await fs.remove(join(appDir, 'pages'), { force: true, recursive: true })\n+  await fs.remove(rootMiddlewareJSFile, {\n+    // @ts-expect-error\n+    force: true,\n+  })\n+  await fs.remove(rootMiddlewareTSFile, {\n+    // @ts-expect-error\n+    force: true,\n+  })\n+  await fs.remove(join(appDir, 'pages'), {\n+    // @ts-expect-error\n+    force: true,\n+    recursive: true,\n+  })\n }\n \n describe.each([",
            "previous_filename": "test/integration/middleware-src/test/index.test.js"
        },
        {
            "sha": "dee1b7de9d21cf3b111bb40550a986a5077e18f4",
            "filename": "test/integration/missing-document-component-error/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmissing-document-component-error%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmissing-document-component-error%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fmissing-document-component-error%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/missing-document-component-error/test/index.test.js"
        },
        {
            "sha": "f0380fa136d11441ee6edbf2b76df45828745bda",
            "filename": "test/integration/mixed-ssg-serverprops-error/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmixed-ssg-serverprops-error%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmixed-ssg-serverprops-error%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fmixed-ssg-serverprops-error%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/mixed-ssg-serverprops-error/test/index.test.js"
        },
        {
            "sha": "69d92ff496c3363387900ea470b8fd995422c317",
            "filename": "test/integration/module-ids/test/index.test.ts",
            "status": "renamed",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmodule-ids%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fmodule-ids%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fmodule-ids%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -103,9 +103,9 @@ describe('minified module ids', () => {\n         staticBundles += output\n       }\n     })\n-    afterAll(() => {\n+    afterAll(async () => {\n       global.isNextDev = originalIsNextDev\n-      killApp(app)\n+      await killApp(app)\n     })\n \n     it('should have long module ids for basic modules', async () => {",
            "previous_filename": "test/integration/module-ids/test/index.test.js"
        },
        {
            "sha": "bdbd481589ea5fff4558a0089a9bdcc09725c33e",
            "filename": "test/integration/next-dynamic-css-asset-prefix/test/index.test.ts",
            "status": "renamed",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnext-dynamic-css-asset-prefix%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnext-dynamic-css-asset-prefix%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-dynamic-css-asset-prefix%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -58,7 +58,7 @@ describe('next/dynamic with assetPrefix', () => {\n         cdnPort = await findPort()\n         // lightweight http proxy\n         cdn = createServer((clientReq, clientRes) => {\n-          const proxyPath = clientReq.url.slice('/path-prefix'.length)\n+          const proxyPath = clientReq.url!.slice('/path-prefix'.length)\n           const proxyReq = request(\n             {\n               hostname: 'localhost',\n@@ -71,7 +71,7 @@ describe('next/dynamic with assetPrefix', () => {\n               // cdn must be configured to allow requests from this origin\n               proxyRes.headers['Access-Control-Allow-Origin'] =\n                 `http://localhost:${appPort}`\n-              clientRes.writeHead(proxyRes.statusCode, proxyRes.headers)\n+              clientRes.writeHead(proxyRes.statusCode!, proxyRes.headers)\n               // [NOTE] if socket doesn't have a handler to error event and if error\n               // event leaks, node.js ends its process with errored exit code.\n               // However, there can be failing socket event while running test\n@@ -105,7 +105,7 @@ describe('next/dynamic with assetPrefix', () => {\n       afterAll(() => cdn.close())\n       afterAll(() => nextConfig.restore())\n \n-      runTests(true)\n+      runTests()\n     }\n   )\n   ;(process.env.TURBOPACK_DEV ? describe.skip : describe)(\n@@ -115,7 +115,7 @@ describe('next/dynamic with assetPrefix', () => {\n         cdnPort = await findPort()\n         // lightweight http proxy\n         cdn = createServer((clientReq, clientRes) => {\n-          const proxyPath = clientReq.url.slice('/path-prefix'.length)\n+          const proxyPath = clientReq.url!.slice('/path-prefix'.length)\n           const proxyReq = request(\n             {\n               hostname: 'localhost',\n@@ -128,7 +128,7 @@ describe('next/dynamic with assetPrefix', () => {\n               // cdn must be configured to allow requests from this origin\n               proxyRes.headers['Access-Control-Allow-Origin'] =\n                 `http://localhost:${appPort}`\n-              clientRes.writeHead(proxyRes.statusCode, proxyRes.headers)\n+              clientRes.writeHead(proxyRes.statusCode!, proxyRes.headers)\n               // [NOTE] if socket doesn't have a handler to error event and if error\n               // event leaks, node.js ends its process with errored exit code.\n               // However, there can be failing socket event while running test",
            "previous_filename": "test/integration/next-dynamic-css-asset-prefix/test/index.test.js"
        },
        {
            "sha": "ce8701fb2649fa1e0d436ffbd1927045b377b470",
            "filename": "test/integration/next-dynamic-css-asset-prefix/tsconfig.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnext-dynamic-css-asset-prefix%2Ftsconfig.json",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnext-dynamic-css-asset-prefix%2Ftsconfig.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-dynamic-css-asset-prefix%2Ftsconfig.json?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -21,5 +21,5 @@\n     \"strictNullChecks\": true\n   },\n   \"include\": [\"next-env.d.ts\", \".next/types/**/*.ts\", \"**/*.ts\", \"**/*.tsx\"],\n-  \"exclude\": [\"node_modules\"]\n+  \"exclude\": [\"node_modules\", \"**/*.test.ts\", \"**/*.test.tsx\"]\n }"
        },
        {
            "sha": "2036123b8e30d9450e9922851bdc278563fe281c",
            "filename": "test/integration/next-dynamic-css/test/index.test.ts",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnext-dynamic-css%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnext-dynamic-css%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-dynamic-css%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -54,7 +54,7 @@ describe('next/dynamic', () => {\n       })\n       afterAll(() => killApp(app))\n \n-      runTests(true)\n+      runTests()\n     }\n   )\n   ;(process.env.TURBOPACK_DEV ? describe.skip : describe)(",
            "previous_filename": "test/integration/next-dynamic-css/test/index.test.js"
        },
        {
            "sha": "d3209f9939c2f762e6ff4e275cf907bf9e1cdb2e",
            "filename": "test/integration/next-dynamic-lazy-compilation/test/index.test.ts",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnext-dynamic-lazy-compilation%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnext-dynamic-lazy-compilation%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-dynamic-lazy-compilation%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -59,7 +59,7 @@ function runTests() {\n         })\n         afterAll(() => killApp(app))\n \n-        runTests(true)\n+        runTests()\n       }\n     )\n     ;(process.env.TURBOPACK_DEV ? describe.skip : describe)(",
            "previous_filename": "test/integration/next-dynamic-lazy-compilation/test/index.test.js"
        },
        {
            "sha": "360bb488788dc2a026a720890d6bd7534152c0cf",
            "filename": "test/integration/next-dynamic/test/index.test.ts",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnext-dynamic%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnext-dynamic%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-dynamic%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -52,7 +52,7 @@ describe('next/dynamic', () => {\n       })\n       afterAll(() => killApp(app))\n \n-      runTests(true)\n+      runTests()\n     }\n   )\n   ;(process.env.TURBOPACK_DEV ? describe.skip : describe)(",
            "previous_filename": "test/integration/next-dynamic/test/index.test.js"
        },
        {
            "sha": "fb71088d257ca9543b7d47949989069d33ec62cc",
            "filename": "test/integration/next-image-new/asset-prefix/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnext-image-new%2Fasset-prefix%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnext-image-new%2Fasset-prefix%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-image-new%2Fasset-prefix%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/next-image-new/asset-prefix/test/index.test.js"
        },
        {
            "sha": "f51ac964c0dc69e745c0794ae3b0439108e872af",
            "filename": "test/integration/next-image-new/base-path/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnext-image-new%2Fbase-path%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnext-image-new%2Fbase-path%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-image-new%2Fbase-path%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/next-image-new/base-path/test/index.test.js"
        },
        {
            "sha": "531f99be3342210c616f35d6d32c19a05147b60d",
            "filename": "test/integration/next-image-new/base-path/test/static.test.ts",
            "status": "renamed",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnext-image-new%2Fbase-path%2Ftest%2Fstatic.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnext-image-new%2Fbase-path%2Ftest%2Fstatic.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnext-image-new%2Fbase-path%2Ftest%2Fstatic.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -82,8 +82,10 @@ const runTests = (isDev) => {\n           linkPreload = { index, attribs }\n         }\n       })\n-    expect(metaViewport.attribs.content).toContain('width=device-width')\n-    expect(linkPreload.attribs.imagesrcset).toMatch(\n+    expect((metaViewport.attribs as any).content).toContain(\n+      'width=device-width'\n+    )\n+    expect((linkPreload.attribs as any).imagesrcset).toMatch(\n       /%2F_next%2Fstatic%2Fmedia%2Ftest-rect\\.(.*)\\.jpg/g\n     )\n     expect(metaViewport.index).toBeLessThan(linkPreload.index)",
            "previous_filename": "test/integration/next-image-new/base-path/test/static.test.js"
        },
        {
            "sha": "4e65c3dcc71e96d72b21437d6cb39b38ffdd59c8",
            "filename": "test/integration/no-op-export/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fno-op-export%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fno-op-export%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fno-op-export%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/no-op-export/test/index.test.js"
        },
        {
            "sha": "bcd0f52a046684b85d6eb93c21e8fbdde4f060d3",
            "filename": "test/integration/no-override-next-props/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fno-override-next-props%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fno-override-next-props%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fno-override-next-props%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/no-override-next-props/test/index.test.js"
        },
        {
            "sha": "02740082b0f6116f63c01579a51c723e6115b2c5",
            "filename": "test/integration/no-page-props/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fno-page-props%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fno-page-props%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fno-page-props%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/no-page-props/test/index.test.js"
        },
        {
            "sha": "b327822d20fae9f2a17cffe8d88b145ecd5432ba",
            "filename": "test/integration/node-fetch-keep-alive/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnode-fetch-keep-alive%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnode-fetch-keep-alive%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnode-fetch-keep-alive%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/node-fetch-keep-alive/test/index.test.js"
        },
        {
            "sha": "25278be7f44026ba00a8623fa380ca5d9e860815",
            "filename": "test/integration/non-next-dist-exclude/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnon-next-dist-exclude%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnon-next-dist-exclude%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnon-next-dist-exclude%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/non-next-dist-exclude/test/index.test.js"
        },
        {
            "sha": "f39da2498ac9cf31d37223fb7a095b50a7fbc06f",
            "filename": "test/integration/non-standard-node-env-warning/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnon-standard-node-env-warning%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnon-standard-node-env-warning%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnon-standard-node-env-warning%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/non-standard-node-env-warning/test/index.test.js"
        },
        {
            "sha": "57ddb31d205e454ca3dc147f1da001e654301295",
            "filename": "test/integration/not-found-revalidate/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnot-found-revalidate%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnot-found-revalidate%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnot-found-revalidate%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/not-found-revalidate/test/index.test.js"
        },
        {
            "sha": "b3a95c53f561f29449f18cdeb5deb343eae66c5b",
            "filename": "test/integration/nullish-config/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnullish-config%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnullish-config%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnullish-config%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/nullish-config/test/index.test.js"
        },
        {
            "sha": "8af9e9d1a3c18d87a6a2ec879ae95abb16a32fe1",
            "filename": "test/integration/numeric-sep/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnumeric-sep%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fnumeric-sep%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fnumeric-sep%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/numeric-sep/test/index.test.js"
        },
        {
            "sha": "c0ca22041ef7f84d153c3170f4a4f8dc7255b596",
            "filename": "test/integration/ondemand/test/index.test.ts",
            "status": "renamed",
            "additions": 14,
            "deletions": 20,
            "changes": 34,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fondemand%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fondemand%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fondemand%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -13,19 +13,16 @@ import {\n   initNextServerScript,\n } from 'next-test-utils'\n \n+let app\n+let appPort\n const appDir = join(__dirname, '../')\n-const context = {}\n \n-const startServer = async (optEnv = {}, opts) => {\n+const startServer = async (optEnv = {}, opts?: any) => {\n   const scriptPath = join(appDir, 'server.js')\n-  context.appPort = await getPort()\n-  const env = Object.assign(\n-    { ...process.env },\n-    { PORT: `${context.appPort}` },\n-    optEnv\n-  )\n+  appPort = await getPort()\n+  const env = Object.assign({ ...process.env }, { PORT: `${appPort}` }, optEnv)\n \n-  context.server = await initNextServerScript(scriptPath, /ready on/i, env)\n+  app = await initNextServerScript(scriptPath, /ready on/i, env)\n }\n \n // Tests are skipped in Turbopack because they are not relevant to Turbopack.\n@@ -42,33 +39,30 @@ const startServer = async (optEnv = {}, opts) => {\n     })\n     afterAll(async () => {\n       global.isNextDev = originalIsNextDev\n-      await killApp(context.server)\n+      await killApp(app)\n     })\n \n     it('should compile pages for SSR', async () => {\n       // The buffer of built page uses the on-demand-entries-ping to know which pages should be\n       // buffered. Therefore, we need to double each render call with a ping.\n-      const pageContent = await renderViaHTTP(context.appPort, '/')\n+      const pageContent = await renderViaHTTP(appPort, '/')\n       expect(pageContent.includes('Index Page')).toBeTrue()\n     })\n \n     it('should compile pages for JSON page requests', async () => {\n-      await renderViaHTTP(context.appPort, '/about')\n+      await renderViaHTTP(appPort, '/about')\n       const pageFile = getPageFileFromBuildManifest(appDir, '/about')\n-      const pageContent = await renderViaHTTP(\n-        context.appPort,\n-        join('/_next', pageFile)\n-      )\n+      const pageContent = await renderViaHTTP(appPort, join('/_next', pageFile))\n       expect(pageContent.includes('About Page')).toBeTrue()\n     })\n \n     it('should dispose inactive pages', async () => {\n-      await renderViaHTTP(context.appPort, '/')\n+      await renderViaHTTP(appPort, '/')\n \n       // Render two pages after the index, since the server keeps at least two pages\n-      await renderViaHTTP(context.appPort, '/about')\n+      await renderViaHTTP(appPort, '/about')\n \n-      await renderViaHTTP(context.appPort, '/third')\n+      await renderViaHTTP(appPort, '/third')\n \n       // Wait maximum of jest.setTimeout checking\n       // for disposing /about\n@@ -90,7 +84,7 @@ const startServer = async (optEnv = {}, opts) => {\n     it('should navigate to pages with dynamic imports', async () => {\n       let browser\n       try {\n-        browser = await webdriver(context.appPort, '/nav')\n+        browser = await webdriver(appPort, '/nav')\n \n         await browser.eval('document.getElementById(\"to-dynamic\").click()')\n ",
            "previous_filename": "test/integration/ondemand/test/index.test.js"
        },
        {
            "sha": "b323322ceb5a5e392a90a201e18b868e0ff64ca3",
            "filename": "test/integration/optional-chaining-nullish-coalescing/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Foptional-chaining-nullish-coalescing%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Foptional-chaining-nullish-coalescing%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Foptional-chaining-nullish-coalescing%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/optional-chaining-nullish-coalescing/test/index.test.js"
        },
        {
            "sha": "acab36c9ac10880cd206dc5df9172a84225da547",
            "filename": "test/integration/page-config/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fpage-config%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fpage-config%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fpage-config%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/page-config/test/index.test.js"
        },
        {
            "sha": "36806e2736924d675e1e4a7c4c258804cd6b63ea",
            "filename": "test/integration/page-extensions/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fpage-extensions%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fpage-extensions%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fpage-extensions%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/page-extensions/test/index.test.js"
        },
        {
            "sha": "039ad2311537285b303e882a01e60437438fe2e4",
            "filename": "test/integration/plugin-mdx-rs/test/index.test.ts",
            "status": "renamed",
            "additions": 12,
            "deletions": 13,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fplugin-mdx-rs%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fplugin-mdx-rs%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fplugin-mdx-rs%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -9,30 +9,29 @@ import {\n   File,\n } from 'next-test-utils'\n \n+let appPort\n+let app\n const appDir = join(__dirname, '..')\n-const context = {}\n \n describe('MDX-rs Configuration', () => {\n   describe('MDX-rs Plugin support', () => {\n     beforeAll(async () => {\n-      context.appPort = await findPort()\n-      context.server = await launchApp(join(__dirname, '../'), context.appPort)\n+      appPort = await findPort()\n+      app = await launchApp(join(__dirname, '../'), appPort)\n     })\n     afterAll(async () => {\n-      await killApp(context.server)\n+      await killApp(app)\n     })\n     it('should render an MDX page correctly', async () => {\n-      expect(await renderViaHTTP(context.appPort, '/')).toMatch(/Hello MDX/)\n+      expect(await renderViaHTTP(appPort, '/')).toMatch(/Hello MDX/)\n     })\n \n     it('should render an MDX page with component correctly', async () => {\n-      expect(await renderViaHTTP(context.appPort, '/button')).toMatch(\n-        /Look, a button!/\n-      )\n+      expect(await renderViaHTTP(appPort, '/button')).toMatch(/Look, a button!/)\n     })\n \n     it('should render an MDX page with globally provided components (from `mdx-components.js`) correctly', async () => {\n-      expect(await renderViaHTTP(context.appPort, '/provider')).toMatch(\n+      expect(await renderViaHTTP(appPort, '/provider')).toMatch(\n         /Marker was rendered!/\n       )\n     })\n@@ -57,16 +56,16 @@ describe('MDX-rs Configuration', () => {\n       })\n     `)\n \n-      context.appPort = await findPort()\n-      context.server = await launchApp(join(__dirname, '../'), context.appPort)\n+      appPort = await findPort()\n+      app = await launchApp(join(__dirname, '../'), appPort)\n     })\n     afterAll(async () => {\n-      await killApp(context.server)\n+      await killApp(app)\n       nextConfig.restore()\n     })\n \n     it('should render an MDX page correctly', async () => {\n-      expect(await renderViaHTTP(context.appPort, '/gfm')).toMatch(\n+      expect(await renderViaHTTP(appPort, '/gfm')).toMatch(\n         /<table>\\n<thead>\\n<tr>\\n<th>foo/\n       )\n     })",
            "previous_filename": "test/integration/plugin-mdx-rs/test/index.test.js"
        },
        {
            "sha": "ef38bdf8c8bde85ff61ea1b4a5ba2c4256cb4e67",
            "filename": "test/integration/polyfilling-minimal/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fpolyfilling-minimal%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fpolyfilling-minimal%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fpolyfilling-minimal%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/polyfilling-minimal/test/index.test.js"
        },
        {
            "sha": "800a827c1bf11074884eb02aa6b88a49c2dec3aa",
            "filename": "test/integration/polyfills/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fpolyfills%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fpolyfills%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fpolyfills%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/polyfills/test/index.test.js"
        },
        {
            "sha": "d11f6af098e14616d32a33b3cc7ddb06fbf8141d",
            "filename": "test/integration/port-env-var/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fport-env-var%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fport-env-var%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fport-env-var%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/port-env-var/test/index.test.js"
        },
        {
            "sha": "6a313df90d56127b160623b79166e0565bb9ca83",
            "filename": "test/integration/preload-viewport/test/index.test.ts",
            "status": "renamed",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fpreload-viewport%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fpreload-viewport%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fpreload-viewport%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -52,7 +52,7 @@ describe('Prefetching Links in viewport', () => {\n           console.warn('Failed to proxy', err)\n         })\n \n-        await new Promise((resolve) => {\n+        await new Promise<void>((resolve) => {\n           proxyServer.listen(appPort, () => resolve())\n         })\n       })\n@@ -65,9 +65,9 @@ describe('Prefetching Links in viewport', () => {\n         nextDataRequests = []\n         const browser = await webdriver(appPort, '/')\n         await browser.eval(function navigate() {\n-          window.next.router.push('/ssg/slow')\n-          window.next.router.push('/ssg/slow')\n-          window.next.router.push('/ssg/slow')\n+          ;(window as any).next.router.push('/ssg/slow')\n+          ;(window as any).next.router.push('/ssg/slow')\n+          ;(window as any).next.router.push('/ssg/slow')\n         })\n         await browser.waitForElementByCss('#content')\n         expect(\n@@ -550,7 +550,7 @@ describe('Prefetching Links in viewport', () => {\n           'utf8'\n         )\n \n-        let self = {}\n+        let self: Record<string, any> = {}\n         // eslint-disable-next-line no-eval\n         eval(content)\n         expect([...self.__SSG_MANIFEST].sort()).toMatchInlineSnapshot(`",
            "previous_filename": "test/integration/preload-viewport/test/index.test.js"
        },
        {
            "sha": "c7a3cc6b0098ed0478dc4a42a475250dde591e29",
            "filename": "test/integration/prerender-export/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fprerender-export%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fprerender-export%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fprerender-export%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/prerender-export/test/index.test.js"
        },
        {
            "sha": "43690d893281a2d88235dd1e64115aef6d093bfe",
            "filename": "test/integration/prerender-fallback-encoding/test/index.test.ts",
            "status": "renamed",
            "additions": 8,
            "deletions": 18,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fprerender-fallback-encoding%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fprerender-fallback-encoding%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fprerender-fallback-encoding%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -54,18 +54,14 @@ const urlPaths = [\n const modePaths = ['fallback-blocking', 'fallback-false', 'fallback-true']\n const pagesDir = join(appDir, '.next/server/pages')\n \n-function runTests(isDev) {\n+function runTests(isDev: boolean) {\n   if (!isDev) {\n     it('should output paths correctly', async () => {\n       for (const path of prerenderedPaths) {\n         for (const mode of modePaths) {\n           console.log('checking output', { path, mode })\n-          expect(await fs.exists(join(pagesDir, mode, path + '.html'))).toBe(\n-            true\n-          )\n-          expect(await fs.exists(join(pagesDir, mode, path + '.json'))).toBe(\n-            true\n-          )\n+          expect(fs.existsSync(join(pagesDir, mode, path + '.html'))).toBe(true)\n+          expect(fs.existsSync(join(pagesDir, mode, path + '.json'))).toBe(true)\n         }\n       }\n     })\n@@ -112,18 +108,12 @@ function runTests(isDev) {\n               // we don't block on writing incremental data to the\n               // disk so use check\n               await check(\n-                () =>\n-                  fs\n-                    .exists(join(pagesDir, mode, path + '.html'))\n-                    .then((res) => (res ? 'yes' : 'no')),\n-                'yes'\n+                () => fs.existsSync(join(pagesDir, mode, path + '.html')),\n+                true\n               )\n               await check(\n-                () =>\n-                  fs\n-                    .exists(join(pagesDir, mode, path + '.json'))\n-                    .then((res) => (res ? 'yes' : 'no')),\n-                'yes'\n+                () => fs.existsSync(join(pagesDir, mode, path + '.json')),\n+                true\n               )\n             }\n \n@@ -352,7 +342,7 @@ describe('Fallback path encoding', () => {\n       })\n       afterAll(() => killApp(app))\n \n-      runTests()\n+      runTests(false)\n     }\n   )\n })",
            "previous_filename": "test/integration/prerender-fallback-encoding/test/index.test.js"
        },
        {
            "sha": "66dd43bc2b6b3d0c9f6d13992291e6d26483ab70",
            "filename": "test/integration/prerender-invalid-catchall-params/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fprerender-invalid-catchall-params%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fprerender-invalid-catchall-params%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fprerender-invalid-catchall-params%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/prerender-invalid-catchall-params/test/index.test.js"
        },
        {
            "sha": "f4e72fcec8c1730c3d570a415f9aa6526605b93a",
            "filename": "test/integration/prerender-invalid-paths/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fprerender-invalid-paths%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fprerender-invalid-paths%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fprerender-invalid-paths%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/prerender-invalid-paths/test/index.test.js"
        },
        {
            "sha": "71a8ded317f727c5ff75cae3025172d9e9c1ab48",
            "filename": "test/integration/prerender-no-revalidate/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fprerender-no-revalidate%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fprerender-no-revalidate%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fprerender-no-revalidate%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/prerender-no-revalidate/test/index.test.js"
        },
        {
            "sha": "8785c66f5f7953184c4a9bfcdc83aa84f451950a",
            "filename": "test/integration/prerender-preview/test/index.test.ts",
            "status": "renamed",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fprerender-preview%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fprerender-preview%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fprerender-preview%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -80,7 +80,7 @@ function runTests(startServer = nextStart) {\n     expect(res.status).toBe(200)\n \n     const originalCookies = res.headers.get('set-cookie').split(',')\n-    const cookies = originalCookies.map(cookie.parse)\n+    const cookies = originalCookies.map((cookieRaw) => cookie.parse(cookieRaw))\n \n     expect(originalCookies.every((c) => c.includes('; Secure;'))).toBe(true)\n \n@@ -106,7 +106,7 @@ function runTests(startServer = nextStart) {\n     expect(res.status).toBe(200)\n \n     const originalCookies = res.headers.get('set-cookie').split(',')\n-    const cookies = originalCookies.map(cookie.parse)\n+    const cookies = originalCookies.map((cookieRaw) => cookie.parse(cookieRaw))\n \n     expect(originalCookies.every((c) => c.includes('; Secure;'))).toBe(true)\n \n@@ -126,7 +126,7 @@ function runTests(startServer = nextStart) {\n     expect(res.status).toBe(200)\n \n     const originalCookies = res.headers.get('set-cookie').split(',')\n-    const cookies = originalCookies.map(cookie.parse)\n+    const cookies = originalCookies.map((cookieRaw) => cookie.parse(cookieRaw))\n \n     expect(originalCookies.every((c) => c.includes('; Secure;'))).toBe(true)\n \n@@ -189,7 +189,7 @@ function runTests(startServer = nextStart) {\n       .get('set-cookie')\n       .replace(/(=(?!Lax)\\w{3}),/g, '$1')\n       .split(',')\n-      .map(cookie.parse)\n+      .map((cookieRaw) => cookie.parse(cookieRaw))\n \n     expect(cookies.length).toBe(2)\n     expect(cookies[0]).toMatchObject({\n@@ -221,7 +221,7 @@ function runTests(startServer = nextStart) {\n       .get('set-cookie')\n       .replace(/(=(?!Lax)\\w{3}),/g, '$1')\n       .split(',')\n-      .map(cookie.parse)\n+      .map((cookieRaw) => cookie.parse(cookieRaw))\n \n     expect(cookies.length).toBe(2)\n     expect(cookies[0]).toMatchObject({\n@@ -286,7 +286,7 @@ describe('Prerender Preview Mode', () => {\n         const cookies = res.headers\n           .get('set-cookie')\n           .split(',')\n-          .map(cookie.parse)\n+          .map((cookieRaw) => cookie.parse(cookieRaw))\n \n         expect(cookies.length).toBe(2)\n         previewCookieString =\n@@ -324,7 +324,7 @@ describe('Prerender Preview Mode', () => {\n           .get('set-cookie')\n           .replace(/(=(?!Lax)\\w{3}),/g, '$1')\n           .split(',')\n-          .map(cookie.parse)\n+          .map((cookieRaw) => cookie.parse(cookieRaw))\n \n         expect(cookies.length).toBe(2)\n       })",
            "previous_filename": "test/integration/prerender-preview/test/index.test.js"
        },
        {
            "sha": "f3123dbc25b6cc729811c96090391dbf925e212b",
            "filename": "test/integration/prerender-revalidate/test/index.test.ts",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fprerender-revalidate%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fprerender-revalidate%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fprerender-revalidate%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -109,7 +109,7 @@ describe('SSG Prerender Revalidate', () => {\n           app = await nextStart(appDir, appPort, {\n             // The lowest size of the LRU cache that can be set is \"1\"\n             // this will cause the cache size to always be exceeded\n-            env: { __NEXT_TEST_MAX_ISR_CACHE: 1 },\n+            env: { __NEXT_TEST_MAX_ISR_CACHE: '1' },\n           })\n           buildId = await fs.readFile(join(appDir, '.next/BUILD_ID'), 'utf8')\n         })",
            "previous_filename": "test/integration/prerender-revalidate/test/index.test.js"
        },
        {
            "sha": "cbe5ce8c8cf222f60b392b3567a90ee92c334542",
            "filename": "test/integration/prerender/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fprerender%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fprerender%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fprerender%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/prerender/test/index.test.js"
        },
        {
            "sha": "422f5ce80d457f1637b146557140280379a1acde",
            "filename": "test/integration/preview-fallback/test/index.test.ts",
            "status": "renamed",
            "additions": 7,
            "deletions": 9,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fpreview-fallback%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fpreview-fallback%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fpreview-fallback%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -26,7 +26,7 @@ const getCacheFile = (path = '') => {\n   return join(appDir, '.next', 'server', 'pages', path)\n }\n \n-function runTests(isDev) {\n+function runTests(isDev: boolean) {\n   it('should get preview cookie correctly', async () => {\n     const res = await fetchViaHTTP(appPort, '/api/enable')\n     previewCookie = ''\n@@ -39,15 +39,15 @@ function runTests(isDev) {\n       .get('set-cookie')\n       .split(',')\n       .forEach((c) => {\n-        c = cookie.parse(c)\n-        const isBypass = c.__prerender_bypass\n+        const cookies = cookie.parse(c)\n+        const isBypass = cookies.__prerender_bypass\n \n-        if (isBypass || c.__next_preview_data) {\n+        if (isBypass || cookies.__next_preview_data) {\n           if (previewCookie) previewCookie += '; '\n \n           previewCookie += `${\n             isBypass ? '__prerender_bypass' : '__next_preview_data'\n-          }=${c[isBypass ? '__prerender_bypass' : '__next_preview_data']}`\n+          }=${cookies[isBypass ? '__prerender_bypass' : '__next_preview_data']}`\n         }\n       })\n   })\n@@ -155,9 +155,7 @@ function runTests(isDev) {\n     })\n \n     if (!isDev) {\n-      expect(await fs.exists(getCacheFile('no-fallback/second.html'))).toBe(\n-        false\n-      )\n+      expect(fs.existsSync(getCacheFile('no-fallback/second.html'))).toBe(false)\n     }\n \n     const res2 = await fetchViaHTTP(appPort, '/no-fallback/second')\n@@ -290,7 +288,7 @@ describe('Preview mode with fallback pages', () => {\n       })\n       afterAll(() => killApp(app))\n \n-      runTests()\n+      runTests(false)\n     }\n   )\n })",
            "previous_filename": "test/integration/preview-fallback/test/index.test.js"
        },
        {
            "sha": "5ca3d76fd081bed781c4bed89cb8ce8b7d27a7e6",
            "filename": "test/integration/production-build-dir/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fproduction-build-dir%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fproduction-build-dir%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fproduction-build-dir%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/production-build-dir/test/index.test.js"
        },
        {
            "sha": "076077dc0e10cffcdffc9c3d48243ae1251769e1",
            "filename": "test/integration/production-config/test/index.test.ts",
            "status": "renamed",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fproduction-config%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fproduction-config%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fproduction-config%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -41,7 +41,7 @@ describe('Production Config Usage', () => {\n       describe('env', () => {\n         it('should fail with leading __ in env key', async () => {\n           const result = await runNextCommand(['build', appDir], {\n-            env: { ENABLE_ENV_FAIL_UNDERSCORE: true },\n+            env: { ENABLE_ENV_FAIL_UNDERSCORE: 'true' },\n             stdout: true,\n             stderr: true,\n           })\n@@ -51,7 +51,7 @@ describe('Production Config Usage', () => {\n \n         it('should fail with NODE_ in env key', async () => {\n           const result = await runNextCommand(['build', appDir], {\n-            env: { ENABLE_ENV_FAIL_NODE: true },\n+            env: { ENABLE_ENV_FAIL_NODE: 'true' },\n             stdout: true,\n             stderr: true,\n           })\n@@ -61,7 +61,7 @@ describe('Production Config Usage', () => {\n \n         it('should fail with NEXT_RUNTIME in env key', async () => {\n           const result = await runNextCommand(['build', appDir], {\n-            env: { ENABLE_ENV_NEXT_PRESERVED: true },\n+            env: { ENABLE_ENV_NEXT_PRESERVED: 'true' },\n             stdout: true,\n             stderr: true,\n           })\n@@ -71,7 +71,7 @@ describe('Production Config Usage', () => {\n \n         it('should allow __ within env key', async () => {\n           const result = await runNextCommand(['build', appDir], {\n-            env: { ENABLE_ENV_WITH_UNDERSCORES: true },\n+            env: { ENABLE_ENV_WITH_UNDERSCORES: 'true' },\n             stdout: true,\n             stderr: true,\n           })",
            "previous_filename": "test/integration/production-config/test/index.test.js"
        },
        {
            "sha": "3fb11d4d1d690978866f856097dd6f4e4b821c48",
            "filename": "test/integration/production-nav/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fproduction-nav%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fproduction-nav%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fproduction-nav%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/production-nav/test/index.test.js"
        },
        {
            "sha": "45300fbd08d80e2b8ec5d2af149cbb16aa3623b2",
            "filename": "test/integration/production-start-no-build/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fproduction-start-no-build%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fproduction-start-no-build%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fproduction-start-no-build%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/production-start-no-build/test/index.test.js"
        },
        {
            "sha": "f854453ca3c34502ffdd9e1fd24abd45866241af",
            "filename": "test/integration/query-with-encoding/test/index.test.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fquery-with-encoding%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fintegration%2Fquery-with-encoding%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fquery-with-encoding%2Ftest%2Findex.test.ts?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "previous_filename": "test/integration/query-with-encoding/test/index.test.js"
        },
        {
            "sha": "854c9619b789b4c438e02a52c8e118b28808ba1d",
            "filename": "test/rspack-build-tests-manifest.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Frspack-build-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Frspack-build-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Frspack-build-tests-manifest.json?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -17665,7 +17665,7 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/module-ids/test/index.test.js\": {\n+  \"test/integration/module-ids/test/index.test.ts\": {\n     \"passed\": [],\n     \"failed\": [],\n     \"pending\": [\n@@ -18872,7 +18872,7 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/preload-viewport/test/index.test.js\": {\n+  \"test/integration/preload-viewport/test/index.test.ts\": {\n     \"passed\": [\n       \"Prefetching Links in viewport production mode should correctly omit pre-generated dynamic pages from SSG manifest\",\n       \"Prefetching Links in viewport production mode should de-dupe inflight SSG requests\","
        },
        {
            "sha": "2ab2b524093198afcf39e5662b583970244b37df",
            "filename": "test/rspack-dev-tests-manifest.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Frspack-dev-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Frspack-dev-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Frspack-dev-tests-manifest.json?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -19634,7 +19634,7 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/module-ids/test/index.test.js\": {\n+  \"test/integration/module-ids/test/index.test.ts\": {\n     \"passed\": [],\n     \"failed\": [],\n     \"pending\": [\n@@ -20843,7 +20843,7 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/preload-viewport/test/index.test.js\": {\n+  \"test/integration/preload-viewport/test/index.test.ts\": {\n     \"passed\": [],\n     \"failed\": [],\n     \"pending\": ["
        },
        {
            "sha": "a32d9c81898a5f1076b304e076cca72f0b1864f7",
            "filename": "test/turbopack-build-tests-manifest.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fturbopack-build-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fturbopack-build-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fturbopack-build-tests-manifest.json?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -15564,7 +15564,7 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/module-ids/test/index.test.js\": {\n+  \"test/integration/module-ids/test/index.test.ts\": {\n     \"passed\": [\n       \"minified module ids production mode should have no long module id for the next client runtime module\",\n       \"minified module ids production mode should have no long module ids for async loader modules\",\n@@ -16761,7 +16761,7 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/preload-viewport/test/index.test.js\": {\n+  \"test/integration/preload-viewport/test/index.test.ts\": {\n     \"passed\": [\n       \"Prefetching Links in viewport production mode should correctly omit pre-generated dynamic pages from SSG manifest\",\n       \"Prefetching Links in viewport production mode should de-dupe inflight SSG requests\","
        },
        {
            "sha": "d52965a3515de09adc6a74285f1478a042cf5882",
            "filename": "test/turbopack-dev-tests-manifest.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fturbopack-dev-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/2c56a6937112e6a0e0cf689234acecfaed8448c2/test%2Fturbopack-dev-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fturbopack-dev-tests-manifest.json?ref=2c56a6937112e6a0e0cf689234acecfaed8448c2",
            "patch": "@@ -19086,7 +19086,7 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/module-ids/test/index.test.js\": {\n+  \"test/integration/module-ids/test/index.test.ts\": {\n     \"passed\": [\n       \"minified module ids development mode should have long module id for the next client runtime module\",\n       \"minified module ids development mode should have long module ids for async loader modules\",\n@@ -20288,7 +20288,7 @@\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n-  \"test/integration/preload-viewport/test/index.test.js\": {\n+  \"test/integration/preload-viewport/test/index.test.ts\": {\n     \"passed\": [],\n     \"failed\": [],\n     \"pending\": ["
        }
    ],
    "stats": {
        "total": 339,
        "additions": 165,
        "deletions": 174
    }
}