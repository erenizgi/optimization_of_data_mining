{
    "author": "unstubbable",
    "message": "[test] Consolidate identical snapshots across different bundlers (#85532)\n\nI noticed that we fixed some of the differences in error stacks and source frames between bundlers, which allows us to consolidate duplicate snapshots. To accomplish this, I asked Claude to write an AST-based script to find and deduplicate the affected snapshots.",
    "sha": "e51b136afb13d98c8a2598153ca383c101f28583",
    "files": [
        {
            "sha": "24def5ecf06b3daf3747917a60df101f7461c992",
            "filename": "test/e2e/app-dir/cache-components-errors/cache-components-errors.test.ts",
            "status": "modified",
            "additions": 93,
            "deletions": 634,
            "changes": 727,
            "blob_url": "https://github.com/vercel/next.js/blob/e51b136afb13d98c8a2598153ca383c101f28583/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e51b136afb13d98c8a2598153ca383c101f28583/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts?ref=e51b136afb13d98c8a2598153ca383c101f28583",
            "patch": "@@ -111,38 +111,20 @@ describe('Cache Components Errors', () => {\n             { isMinified: !isDebugPrerender }\n           )\n \n-          if (isTurbopack) {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n+          if (isDebugPrerender) {\n+            expect(output).toMatchInlineSnapshot(`\n                \"Route \"/dynamic-metadata-static-route\" has a \\`generateMetadata\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata\n                Error occurred prerendering page \"/dynamic-metadata-static-route\". Read more: https://nextjs.org/docs/messages/prerender-error\n \n                > Export encountered errors on following paths:\n                \t/dynamic-metadata-static-route/page: /dynamic-metadata-static-route\"\n               `)\n-            } else {\n-              expect(output).toMatchInlineSnapshot(`\n-               \"Route \"/dynamic-metadata-static-route\" has a \\`generateMetadata\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata\n-               Error occurred prerendering page \"/dynamic-metadata-static-route\". Read more: https://nextjs.org/docs/messages/prerender-error\n-               Export encountered an error on /dynamic-metadata-static-route/page: /dynamic-metadata-static-route, exiting the build.\"\n-              `)\n-            }\n           } else {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n-               \"Route \"/dynamic-metadata-static-route\" has a \\`generateMetadata\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata\n-               Error occurred prerendering page \"/dynamic-metadata-static-route\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-               > Export encountered errors on following paths:\n-               \t/dynamic-metadata-static-route/page: /dynamic-metadata-static-route\"\n-              `)\n-            } else {\n-              expect(output).toMatchInlineSnapshot(`\n+            expect(output).toMatchInlineSnapshot(`\n                \"Route \"/dynamic-metadata-static-route\" has a \\`generateMetadata\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata\n                Error occurred prerendering page \"/dynamic-metadata-static-route\". Read more: https://nextjs.org/docs/messages/prerender-error\n                Export encountered an error on /dynamic-metadata-static-route/page: /dynamic-metadata-static-route, exiting the build.\"\n               `)\n-            }\n           }\n         })\n       }\n@@ -307,38 +289,20 @@ describe('Cache Components Errors', () => {\n             { isMinified: !isDebugPrerender }\n           )\n \n-          if (isTurbopack) {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n+          if (isDebugPrerender) {\n+            expect(output).toMatchInlineSnapshot(`\n                \"Route \"/dynamic-metadata-static-with-suspense\" has a \\`generateMetadata\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata\n                Error occurred prerendering page \"/dynamic-metadata-static-with-suspense\". Read more: https://nextjs.org/docs/messages/prerender-error\n \n                > Export encountered errors on following paths:\n                \t/dynamic-metadata-static-with-suspense/page: /dynamic-metadata-static-with-suspense\"\n               `)\n-            } else {\n-              expect(output).toMatchInlineSnapshot(`\n-               \"Route \"/dynamic-metadata-static-with-suspense\" has a \\`generateMetadata\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata\n-               Error occurred prerendering page \"/dynamic-metadata-static-with-suspense\". Read more: https://nextjs.org/docs/messages/prerender-error\n-               Export encountered an error on /dynamic-metadata-static-with-suspense/page: /dynamic-metadata-static-with-suspense, exiting the build.\"\n-              `)\n-            }\n           } else {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n-               \"Route \"/dynamic-metadata-static-with-suspense\" has a \\`generateMetadata\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata\n-               Error occurred prerendering page \"/dynamic-metadata-static-with-suspense\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-               > Export encountered errors on following paths:\n-               \t/dynamic-metadata-static-with-suspense/page: /dynamic-metadata-static-with-suspense\"\n-              `)\n-            } else {\n-              expect(output).toMatchInlineSnapshot(`\n+            expect(output).toMatchInlineSnapshot(`\n                \"Route \"/dynamic-metadata-static-with-suspense\" has a \\`generateMetadata\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata\n                Error occurred prerendering page \"/dynamic-metadata-static-with-suspense\". Read more: https://nextjs.org/docs/messages/prerender-error\n                Export encountered an error on /dynamic-metadata-static-with-suspense/page: /dynamic-metadata-static-with-suspense, exiting the build.\"\n               `)\n-            }\n           }\n         })\n       }\n@@ -401,38 +365,20 @@ describe('Cache Components Errors', () => {\n             { isMinified: !isDebugPrerender }\n           )\n \n-          if (isTurbopack) {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n+          if (isDebugPrerender) {\n+            expect(output).toMatchInlineSnapshot(`\n                \"Route \"/dynamic-viewport-static-route\" has a \\`generateViewport\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport\n                Error occurred prerendering page \"/dynamic-viewport-static-route\". Read more: https://nextjs.org/docs/messages/prerender-error\n \n                > Export encountered errors on following paths:\n                \t/dynamic-viewport-static-route/page: /dynamic-viewport-static-route\"\n               `)\n-            } else {\n-              expect(output).toMatchInlineSnapshot(`\n-               \"Route \"/dynamic-viewport-static-route\" has a \\`generateViewport\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport\n-               Error occurred prerendering page \"/dynamic-viewport-static-route\". Read more: https://nextjs.org/docs/messages/prerender-error\n-               Export encountered an error on /dynamic-viewport-static-route/page: /dynamic-viewport-static-route, exiting the build.\"\n-              `)\n-            }\n           } else {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n-               \"Route \"/dynamic-viewport-static-route\" has a \\`generateViewport\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport\n-               Error occurred prerendering page \"/dynamic-viewport-static-route\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-               > Export encountered errors on following paths:\n-               \t/dynamic-viewport-static-route/page: /dynamic-viewport-static-route\"\n-              `)\n-            } else {\n-              expect(output).toMatchInlineSnapshot(`\n+            expect(output).toMatchInlineSnapshot(`\n                \"Route \"/dynamic-viewport-static-route\" has a \\`generateViewport\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport\n                Error occurred prerendering page \"/dynamic-viewport-static-route\". Read more: https://nextjs.org/docs/messages/prerender-error\n                Export encountered an error on /dynamic-viewport-static-route/page: /dynamic-viewport-static-route, exiting the build.\"\n               `)\n-            }\n           }\n         })\n       }\n@@ -470,38 +416,20 @@ describe('Cache Components Errors', () => {\n             { isMinified: !isDebugPrerender }\n           )\n \n-          if (isTurbopack) {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n+          if (isDebugPrerender) {\n+            expect(output).toMatchInlineSnapshot(`\n                \"Route \"/dynamic-viewport-dynamic-route\" has a \\`generateViewport\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport\n                Error occurred prerendering page \"/dynamic-viewport-dynamic-route\". Read more: https://nextjs.org/docs/messages/prerender-error\n \n                > Export encountered errors on following paths:\n                \t/dynamic-viewport-dynamic-route/page: /dynamic-viewport-dynamic-route\"\n               `)\n-            } else {\n-              expect(output).toMatchInlineSnapshot(`\n-               \"Route \"/dynamic-viewport-dynamic-route\" has a \\`generateViewport\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport\n-               Error occurred prerendering page \"/dynamic-viewport-dynamic-route\". Read more: https://nextjs.org/docs/messages/prerender-error\n-               Export encountered an error on /dynamic-viewport-dynamic-route/page: /dynamic-viewport-dynamic-route, exiting the build.\"\n-              `)\n-            }\n           } else {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n-               \"Route \"/dynamic-viewport-dynamic-route\" has a \\`generateViewport\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport\n-               Error occurred prerendering page \"/dynamic-viewport-dynamic-route\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-               > Export encountered errors on following paths:\n-               \t/dynamic-viewport-dynamic-route/page: /dynamic-viewport-dynamic-route\"\n-              `)\n-            } else {\n-              expect(output).toMatchInlineSnapshot(`\n+            expect(output).toMatchInlineSnapshot(`\n                \"Route \"/dynamic-viewport-dynamic-route\" has a \\`generateViewport\\` that depends on Request data (\\`cookies()\\`, etc...) or uncached external data (\\`fetch(...)\\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport\n                Error occurred prerendering page \"/dynamic-viewport-dynamic-route\". Read more: https://nextjs.org/docs/messages/prerender-error\n                Export encountered an error on /dynamic-viewport-dynamic-route/page: /dynamic-viewport-dynamic-route, exiting the build.\"\n               `)\n-            }\n           }\n         })\n       }\n@@ -533,69 +461,7 @@ describe('Cache Components Errors', () => {\n         it('should show a collapsed redbox with two errors', async () => {\n           const browser = await next.browser(pathname)\n \n-          if (isTurbopack) {\n-            await expect(browser).toDisplayCollapsedRedbox(`\n-             [\n-               {\n-                 \"description\": \"Uncached data was accessed outside of <Suspense>\n-\n-             This delays the entire page from rendering, resulting in a slow user experience. Next.js uses this error to ensure your app loads instantly on every navigation.\n-\n-             To fix this, you can either:\n-\n-             Wrap the component in a <Suspense> boundary. This allows Next.js to stream its contents to the user as soon as it's ready, without blocking the rest of the app.\n-\n-             or\n-\n-             Move the asynchronous await into a Cache Component (\"use cache\"). This allows Next.js to statically prerender the component as part of the HTML document, so it's instantly visible to the user.\n-\n-             Note that request-specific information — such as params, cookies, and headers — is not available during static prerendering, so must be wrapped in <Suspense>.\n-\n-             Learn more: https://nextjs.org/docs/messages/blocking-route\",\n-                 \"environmentLabel\": \"Server\",\n-                 \"label\": \"Blocking Route\",\n-                 \"source\": \"app/dynamic-root/page.tsx (59:26) @ fetchRandom\n-             > 59 |   const response = await fetch(\n-                  |                          ^\",\n-                 \"stack\": [\n-                   \"fetchRandom app/dynamic-root/page.tsx (59:26)\",\n-                   \"FetchingComponent app/dynamic-root/page.tsx (45:56)\",\n-                   \"Page app/dynamic-root/page.tsx (22:9)\",\n-                   \"LogSafely <anonymous>\",\n-                 ],\n-               },\n-               {\n-                 \"description\": \"Uncached data was accessed outside of <Suspense>\n-\n-             This delays the entire page from rendering, resulting in a slow user experience. Next.js uses this error to ensure your app loads instantly on every navigation.\n-\n-             To fix this, you can either:\n-\n-             Wrap the component in a <Suspense> boundary. This allows Next.js to stream its contents to the user as soon as it's ready, without blocking the rest of the app.\n-\n-             or\n-\n-             Move the asynchronous await into a Cache Component (\"use cache\"). This allows Next.js to statically prerender the component as part of the HTML document, so it's instantly visible to the user.\n-\n-             Note that request-specific information — such as params, cookies, and headers — is not available during static prerendering, so must be wrapped in <Suspense>.\n-\n-             Learn more: https://nextjs.org/docs/messages/blocking-route\",\n-                 \"environmentLabel\": \"Server\",\n-                 \"label\": \"Blocking Route\",\n-                 \"source\": \"app/dynamic-root/page.tsx (59:26) @ fetchRandom\n-             > 59 |   const response = await fetch(\n-                  |                          ^\",\n-                 \"stack\": [\n-                   \"fetchRandom app/dynamic-root/page.tsx (59:26)\",\n-                   \"FetchingComponent app/dynamic-root/page.tsx (45:56)\",\n-                   \"Page app/dynamic-root/page.tsx (27:7)\",\n-                   \"LogSafely <anonymous>\",\n-                 ],\n-               },\n-             ]\n-            `)\n-          } else {\n-            await expect(browser).toDisplayCollapsedRedbox(`\n+          await expect(browser).toDisplayCollapsedRedbox(`\n              [\n                {\n                  \"description\": \"Uncached data was accessed outside of <Suspense>\n@@ -655,7 +521,6 @@ describe('Cache Components Errors', () => {\n                },\n              ]\n             `)\n-          }\n         })\n       } else {\n         it('should error the build if cache components happens in the root (outside a Suspense)', async () => {\n@@ -879,9 +744,8 @@ describe('Cache Components Errors', () => {\n               { isMinified: !isDebugPrerender }\n             )\n \n-            if (isTurbopack) {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n+            if (isDebugPrerender) {\n+              expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route \"/sync-random-with-fallback\" used \\`Math.random()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-random\n                      at RandomReadingComponent (bundler:///app/sync-random-with-fallback/page.tsx:37:23)\n                    35 |     use(new Promise((r) => process.nextTick(r)))\n@@ -897,7 +761,8 @@ describe('Cache Components Errors', () => {\n                  > Export encountered errors on following paths:\n                  \t/sync-random-with-fallback/page: /sync-random-with-fallback\"\n                 `)\n-              } else {\n+            } else {\n+              if (isTurbopack) {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route \"/sync-random-with-fallback\" used \\`Math.random()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-random\n                      at a (bundler:///app/sync-random-with-fallback/page.tsx:37:23)\n@@ -914,25 +779,6 @@ describe('Cache Components Errors', () => {\n                  Error occurred prerendering page \"/sync-random-with-fallback\". Read more: https://nextjs.org/docs/messages/prerender-error\n                  Export encountered an error on /sync-random-with-fallback/page: /sync-random-with-fallback, exiting the build.\"\n                 `)\n-              }\n-            } else {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n-                 \"Error: Route \"/sync-random-with-fallback\" used \\`Math.random()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-random\n-                     at RandomReadingComponent (bundler:///app/sync-random-with-fallback/page.tsx:37:23)\n-                   35 |     use(new Promise((r) => process.nextTick(r)))\n-                   36 |   }\n-                 > 37 |   const random = Math.random()\n-                      |                       ^\n-                   38 |   return (\n-                   39 |     <div>\n-                   40 |       <span id=\"rand\">{random}</span>\n-                 To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/sync-random-with-fallback\" in your browser to investigate the error.\n-                 Error occurred prerendering page \"/sync-random-with-fallback\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-                 > Export encountered errors on following paths:\n-                 \t/sync-random-with-fallback/page: /sync-random-with-fallback\"\n-                `)\n               } else {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route \"/sync-random-with-fallback\" used \\`Math.random()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-random\n@@ -990,9 +836,8 @@ describe('Cache Components Errors', () => {\n               { isMinified: !isDebugPrerender }\n             )\n \n-            if (isTurbopack) {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n+            if (isDebugPrerender) {\n+              expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route \"/sync-random-without-fallback\" used \\`Math.random()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-random\n                      at getRandomNumber (bundler:///app/sync-random-without-fallback/page.tsx:32:15)\n                      at RandomReadingComponent (bundler:///app/sync-random-without-fallback/page.tsx:40:18)\n@@ -1009,7 +854,8 @@ describe('Cache Components Errors', () => {\n                  > Export encountered errors on following paths:\n                  \t/sync-random-without-fallback/page: /sync-random-without-fallback\"\n                 `)\n-              } else {\n+            } else {\n+              if (isTurbopack) {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route \"/sync-random-without-fallback\" used \\`Math.random()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-random\n                      at a (bundler:///app/sync-random-without-fallback/page.tsx:32:15)\n@@ -1026,26 +872,6 @@ describe('Cache Components Errors', () => {\n                  Error occurred prerendering page \"/sync-random-without-fallback\". Read more: https://nextjs.org/docs/messages/prerender-error\n                  Export encountered an error on /sync-random-without-fallback/page: /sync-random-without-fallback, exiting the build.\"\n                 `)\n-              }\n-            } else {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n-                 \"Error: Route \"/sync-random-without-fallback\" used \\`Math.random()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-random\n-                     at getRandomNumber (bundler:///app/sync-random-without-fallback/page.tsx:32:15)\n-                     at RandomReadingComponent (bundler:///app/sync-random-without-fallback/page.tsx:40:18)\n-                   30 |\n-                   31 | function getRandomNumber() {\n-                 > 32 |   return Math.random()\n-                      |               ^\n-                   33 | }\n-                   34 |\n-                   35 | function RandomReadingComponent() {\n-                 To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/sync-random-without-fallback\" in your browser to investigate the error.\n-                 Error occurred prerendering page \"/sync-random-without-fallback\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-                 > Export encountered errors on following paths:\n-                 \t/sync-random-without-fallback/page: /sync-random-without-fallback\"\n-                `)\n               } else {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route \"/sync-random-without-fallback\" used \\`Math.random()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-random\n@@ -1248,9 +1074,8 @@ describe('Cache Components Errors', () => {\n               { isMinified: !isDebugPrerender }\n             )\n \n-            if (isTurbopack) {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n+            if (isDebugPrerender) {\n+              expect(output).toMatchInlineSnapshot(`\n                  \"Error occurred prerendering page \"/sync-cookies\". Read more: https://nextjs.org/docs/messages/prerender-error\n                  TypeError: <module-function>().get is not a function\n                      at CookiesReadingComponent (bundler:///app/sync-cookies/page.tsx:18:36)\n@@ -1268,7 +1093,8 @@ describe('Cache Components Errors', () => {\n                  > Export encountered errors on following paths:\n                  \t/sync-cookies/page: /sync-cookies\"\n                 `)\n-              } else {\n+            } else {\n+              if (isTurbopack) {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error occurred prerendering page \"/sync-cookies\". Read more: https://nextjs.org/docs/messages/prerender-error\n                  TypeError: <module-function>().get is not a function\n@@ -1285,27 +1111,6 @@ describe('Cache Components Errors', () => {\n                  }\n                  Export encountered an error on /sync-cookies/page: /sync-cookies, exiting the build.\"\n                 `)\n-              }\n-            } else {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n-                 \"Error occurred prerendering page \"/sync-cookies\". Read more: https://nextjs.org/docs/messages/prerender-error\n-                 TypeError: <module-function>().get is not a function\n-                     at CookiesReadingComponent (bundler:///app/sync-cookies/page.tsx:18:36)\n-                     at stringify (<anonymous>)\n-                   16 | async function CookiesReadingComponent() {\n-                   17 |   // Cast to any as we removed UnsafeUnwrapped types, but still need to test with the sync access\n-                 > 18 |   const token = (cookies() as any).get('token')\n-                      |                                    ^\n-                   19 |\n-                   20 |   return (\n-                   21 |     <div> {\n-                   digest: '<error-digest>'\n-                 }\n-\n-                 > Export encountered errors on following paths:\n-                 \t/sync-cookies/page: /sync-cookies\"\n-                `)\n               } else {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error occurred prerendering page \"/sync-cookies\". Read more: https://nextjs.org/docs/messages/prerender-error\n@@ -1439,22 +1244,7 @@ describe('Cache Components Errors', () => {\n           it('should show a collapsed redbox with a sync access error', async () => {\n             const browser = await next.browser(`${pathname}`)\n \n-            if (isTurbopack) {\n-              await expect(browser).toDisplayCollapsedRedbox(`\n-               {\n-                 \"description\": \"Route \"/sync-draft-mode\" used \\`draftMode().isEnabled\\`. \\`draftMode()\\` returns a Promise and must be unwrapped with \\`await\\` or \\`React.use()\\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n-                 \"environmentLabel\": \"Prerender\",\n-                 \"label\": \"Console Error\",\n-                 \"source\": \"app/sync-draft-mode/page.tsx (24:31) @ DraftModeReadingComponent\n-               > 24 |   const isEnabled = (draftMode() as any).isEnabled\n-                    |                               ^\",\n-                 \"stack\": [\n-                   \"DraftModeReadingComponent app/sync-draft-mode/page.tsx (24:31)\",\n-                   \"Page app/sync-draft-mode/page.tsx (13:7)\",\n-                 ],\n-               }\n-              `)\n-            } else if (isRspack) {\n+            if (isTurbopack || isRspack) {\n               await expect(browser).toDisplayCollapsedRedbox(`\n                {\n                  \"description\": \"Route \"/sync-draft-mode\" used \\`draftMode().isEnabled\\`. \\`draftMode()\\` returns a Promise and must be unwrapped with \\`await\\` or \\`React.use()\\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n@@ -1599,9 +1389,8 @@ describe('Cache Components Errors', () => {\n               { isMinified: !isDebugPrerender }\n             )\n \n-            if (isTurbopack) {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n+            if (isDebugPrerender) {\n+              expect(output).toMatchInlineSnapshot(`\n                  \"Error occurred prerendering page \"/sync-headers\". Read more: https://nextjs.org/docs/messages/prerender-error\n                  TypeError: <module-function>().get is not a function\n                      at HeadersReadingComponent (bundler:///app/sync-headers/page.tsx:18:40)\n@@ -1619,7 +1408,8 @@ describe('Cache Components Errors', () => {\n                  > Export encountered errors on following paths:\n                  \t/sync-headers/page: /sync-headers\"\n                 `)\n-              } else {\n+            } else {\n+              if (isTurbopack) {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error occurred prerendering page \"/sync-headers\". Read more: https://nextjs.org/docs/messages/prerender-error\n                  TypeError: <module-function>().get is not a function\n@@ -1636,27 +1426,6 @@ describe('Cache Components Errors', () => {\n                  }\n                  Export encountered an error on /sync-headers/page: /sync-headers, exiting the build.\"\n                 `)\n-              }\n-            } else {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n-                 \"Error occurred prerendering page \"/sync-headers\". Read more: https://nextjs.org/docs/messages/prerender-error\n-                 TypeError: <module-function>().get is not a function\n-                     at HeadersReadingComponent (bundler:///app/sync-headers/page.tsx:18:40)\n-                     at stringify (<anonymous>)\n-                   16 | async function HeadersReadingComponent() {\n-                   17 |   // Cast to any as we removed UnsafeUnwrapped types, but still need to test with the sync access\n-                 > 18 |   const userAgent = (headers() as any).get('user-agent')\n-                      |                                        ^\n-                   19 |   return (\n-                   20 |     <div>\n-                   21 |       this component reads the \\`user-agent\\` header synchronously: {userAgent} {\n-                   digest: '<error-digest>'\n-                 }\n-\n-                 > Export encountered errors on following paths:\n-                 \t/sync-headers/page: /sync-headers\"\n-                `)\n               } else {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error occurred prerendering page \"/sync-headers\". Read more: https://nextjs.org/docs/messages/prerender-error\n@@ -1788,23 +1557,7 @@ describe('Cache Components Errors', () => {\n           it('should show a collapsed redbox with a sync access error', async () => {\n             const browser = await next.browser(`${pathname}/test`)\n \n-            if (isTurbopack) {\n-              await expect(browser).toDisplayCollapsedRedbox(`\n-               {\n-                 \"description\": \"A param property was accessed directly with \\`params.slug\\`. \\`params\\` is a Promise and must be unwrapped with \\`React.use()\\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n-                 \"environmentLabel\": null,\n-                 \"label\": \"Console Error\",\n-                 \"source\": \"app/sync-client-params/[slug]/page.tsx (20:39) @ ParamsReadingComponent\n-               > 20 |       <span id=\"param\">{String(params.slug)}</span>\n-                    |                                       ^\",\n-                 \"stack\": [\n-                   \"ParamsReadingComponent app/sync-client-params/[slug]/page.tsx (20:39)\",\n-                   \"Page app/sync-client-params/[slug]/page.tsx (11:7)\",\n-                 ],\n-               }\n-              `)\n-            } else {\n-              await expect(browser).toDisplayCollapsedRedbox(`\n+            await expect(browser).toDisplayCollapsedRedbox(`\n                {\n                  \"description\": \"A param property was accessed directly with \\`params.slug\\`. \\`params\\` is a Promise and must be unwrapped with \\`React.use()\\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis\",\n                  \"environmentLabel\": null,\n@@ -1818,7 +1571,6 @@ describe('Cache Components Errors', () => {\n                  ],\n                }\n               `)\n-            }\n           })\n         }\n       })\n@@ -1925,9 +1677,8 @@ describe('Cache Components Errors', () => {\n               { isMinified: !isDebugPrerender }\n             )\n \n-            if (isTurbopack) {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n+            if (isDebugPrerender) {\n+              expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route \"/sync-attribution/guarded-async-unguarded-clientsync\" used \\`new Date()\\` inside a Client Component without a Suspense boundary above it. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time-client\n                      at SyncIO (bundler:///app/sync-attribution/guarded-async-unguarded-clientsync/client.tsx:5:16)\n                    3 | export function SyncIO() {\n@@ -1943,7 +1694,8 @@ describe('Cache Components Errors', () => {\n                  > Export encountered errors on following paths:\n                  \t/sync-attribution/guarded-async-unguarded-clientsync/page: /sync-attribution/guarded-async-unguarded-clientsync\"\n                 `)\n-              } else {\n+            } else {\n+              if (isTurbopack) {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route \"/sync-attribution/guarded-async-unguarded-clientsync\" used \\`new Date()\\` inside a Client Component without a Suspense boundary above it. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time-client\n                      at a (bundler:///app/sync-attribution/guarded-async-unguarded-clientsync/client.tsx:5:16)\n@@ -1960,25 +1712,6 @@ describe('Cache Components Errors', () => {\n                  Error occurred prerendering page \"/sync-attribution/guarded-async-unguarded-clientsync\". Read more: https://nextjs.org/docs/messages/prerender-error\n                  Export encountered an error on /sync-attribution/guarded-async-unguarded-clientsync/page: /sync-attribution/guarded-async-unguarded-clientsync, exiting the build.\"\n                 `)\n-              }\n-            } else {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n-                 \"Error: Route \"/sync-attribution/guarded-async-unguarded-clientsync\" used \\`new Date()\\` inside a Client Component without a Suspense boundary above it. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time-client\n-                     at SyncIO (bundler:///app/sync-attribution/guarded-async-unguarded-clientsync/client.tsx:5:16)\n-                   3 | export function SyncIO() {\n-                   4 |   // This is a sync IO access that should not cause an error\n-                 > 5 |   const data = new Date().toISOString()\n-                     |                ^\n-                   6 |\n-                   7 |   return (\n-                   8 |     <main>\n-                 To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/sync-attribution/guarded-async-unguarded-clientsync\" in your browser to investigate the error.\n-                 Error occurred prerendering page \"/sync-attribution/guarded-async-unguarded-clientsync\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-                 > Export encountered errors on following paths:\n-                 \t/sync-attribution/guarded-async-unguarded-clientsync/page: /sync-attribution/guarded-async-unguarded-clientsync\"\n-                `)\n               } else {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route \"/sync-attribution/guarded-async-unguarded-clientsync\" used \\`new Date()\\` inside a Client Component without a Suspense boundary above it. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time-client\n@@ -2006,38 +1739,7 @@ describe('Cache Components Errors', () => {\n           it('should show a collapsed redbox error', async () => {\n             const browser = await next.browser(pathname)\n \n-            if (isTurbopack) {\n-              await expect(browser).toDisplayCollapsedRedbox(`\n-               {\n-                 \"description\": \"Uncached data was accessed outside of <Suspense>\n-\n-               This delays the entire page from rendering, resulting in a slow user experience. Next.js uses this error to ensure your app loads instantly on every navigation.\n-\n-               To fix this, you can either:\n-\n-               Wrap the component in a <Suspense> boundary. This allows Next.js to stream its contents to the user as soon as it's ready, without blocking the rest of the app.\n-\n-               or\n-\n-               Move the asynchronous await into a Cache Component (\"use cache\"). This allows Next.js to statically prerender the component as part of the HTML document, so it's instantly visible to the user.\n-\n-               Note that request-specific information — such as params, cookies, and headers — is not available during static prerendering, so must be wrapped in <Suspense>.\n-\n-               Learn more: https://nextjs.org/docs/messages/blocking-route\",\n-                 \"environmentLabel\": \"Server\",\n-                 \"label\": \"Blocking Route\",\n-                 \"source\": \"app/sync-attribution/unguarded-async-guarded-clientsync/page.tsx (34:18) @ RequestData\n-               > 34 |   ;(await cookies()).get('foo')\n-                    |                  ^\",\n-                 \"stack\": [\n-                   \"RequestData app/sync-attribution/unguarded-async-guarded-clientsync/page.tsx (34:18)\",\n-                   \"Page app/sync-attribution/unguarded-async-guarded-clientsync/page.tsx (27:9)\",\n-                   \"LogSafely <anonymous>\",\n-                 ],\n-               }\n-              `)\n-            } else {\n-              await expect(browser).toDisplayCollapsedRedbox(`\n+            await expect(browser).toDisplayCollapsedRedbox(`\n                {\n                  \"description\": \"Uncached data was accessed outside of <Suspense>\n \n@@ -2066,7 +1768,6 @@ describe('Cache Components Errors', () => {\n                  ],\n                }\n               `)\n-            }\n           })\n         } else {\n           it('should error the build with a reason related dynamic data', async () => {\n@@ -2222,9 +1923,8 @@ describe('Cache Components Errors', () => {\n               { isMinified: !isDebugPrerender }\n             )\n \n-            if (isTurbopack) {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n+            if (isDebugPrerender) {\n+              expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route \"/sync-attribution/unguarded-async-unguarded-clientsync\" used \\`new Date()\\` inside a Client Component without a Suspense boundary above it. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time-client\n                      at SyncIO (bundler:///app/sync-attribution/unguarded-async-unguarded-clientsync/client.tsx:5:16)\n                    3 | export function SyncIO() {\n@@ -2240,7 +1940,8 @@ describe('Cache Components Errors', () => {\n                  > Export encountered errors on following paths:\n                  \t/sync-attribution/unguarded-async-unguarded-clientsync/page: /sync-attribution/unguarded-async-unguarded-clientsync\"\n                 `)\n-              } else {\n+            } else {\n+              if (isTurbopack) {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route \"/sync-attribution/unguarded-async-unguarded-clientsync\" used \\`new Date()\\` inside a Client Component without a Suspense boundary above it. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time-client\n                      at a (bundler:///app/sync-attribution/unguarded-async-unguarded-clientsync/client.tsx:5:16)\n@@ -2257,25 +1958,6 @@ describe('Cache Components Errors', () => {\n                  Error occurred prerendering page \"/sync-attribution/unguarded-async-unguarded-clientsync\". Read more: https://nextjs.org/docs/messages/prerender-error\n                  Export encountered an error on /sync-attribution/unguarded-async-unguarded-clientsync/page: /sync-attribution/unguarded-async-unguarded-clientsync, exiting the build.\"\n                 `)\n-              }\n-            } else {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n-                 \"Error: Route \"/sync-attribution/unguarded-async-unguarded-clientsync\" used \\`new Date()\\` inside a Client Component without a Suspense boundary above it. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time-client\n-                     at SyncIO (bundler:///app/sync-attribution/unguarded-async-unguarded-clientsync/client.tsx:5:16)\n-                   3 | export function SyncIO() {\n-                   4 |   // This is a sync IO access that should not cause an error\n-                 > 5 |   const data = new Date().toISOString()\n-                     |                ^\n-                   6 |\n-                   7 |   return (\n-                   8 |     <main>\n-                 To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/sync-attribution/unguarded-async-unguarded-clientsync\" in your browser to investigate the error.\n-                 Error occurred prerendering page \"/sync-attribution/unguarded-async-unguarded-clientsync\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-                 > Export encountered errors on following paths:\n-                 \t/sync-attribution/unguarded-async-unguarded-clientsync/page: /sync-attribution/unguarded-async-unguarded-clientsync\"\n-                `)\n               } else {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route \"/sync-attribution/unguarded-async-unguarded-clientsync\" used \\`new Date()\\` inside a Client Component without a Suspense boundary above it. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time-client\n@@ -2301,22 +1983,7 @@ describe('Cache Components Errors', () => {\n           it('should show a redbox error', async () => {\n             const browser = await next.browser(pathname)\n \n-            if (isTurbopack) {\n-              await expect(browser).toDisplayRedbox(`\n-               {\n-                 \"description\": \"Route /use-cache-cookies used \\`cookies()\\` inside \"use cache\". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \\`cookies()\\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache\",\n-                 \"environmentLabel\": null,\n-                 \"label\": \"Runtime Error\",\n-                 \"source\": \"app/use-cache-cookies/page.tsx (22:18) @ CookiesReadingComponent\n-               > 22 |     await cookies()\n-                    |                  ^\",\n-                 \"stack\": [\n-                   \"CookiesReadingComponent app/use-cache-cookies/page.tsx (22:18)\",\n-                 ],\n-               }\n-              `)\n-            } else {\n-              await expect(browser).toDisplayRedbox(`\n+            await expect(browser).toDisplayRedbox(`\n                {\n                  \"description\": \"Route /use-cache-cookies used \\`cookies()\\` inside \"use cache\". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \\`cookies()\\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache\",\n                  \"environmentLabel\": null,\n@@ -2329,7 +1996,6 @@ describe('Cache Components Errors', () => {\n                  ],\n                }\n               `)\n-            }\n           })\n         } else {\n           it('should error the build', async () => {\n@@ -2418,28 +2084,13 @@ describe('Cache Components Errors', () => {\n       })\n \n       describe('draftMode', () => {\n-        const pathname = '/use-cache-draft-mode'\n-\n-        if (isNextDev) {\n-          it('should show a redbox error', async () => {\n-            const browser = await next.browser(pathname)\n-\n-            if (isTurbopack) {\n-              await expect(browser).toDisplayRedbox(`\n-               {\n-                 \"description\": \"Route /use-cache-draft-mode used \"draftMode().enable()\" inside \"use cache\". The enabled status of \\`draftMode()\\` can be read in caches but you must not enable or disable \\`draftMode()\\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache\",\n-                 \"environmentLabel\": null,\n-                 \"label\": \"Runtime Error\",\n-                 \"source\": \"app/use-cache-draft-mode/page.tsx (20:26) @ DraftModeEnablingComponent\n-               > 20 |     ;(await draftMode()).enable()\n-                    |                          ^\",\n-                 \"stack\": [\n-                   \"DraftModeEnablingComponent app/use-cache-draft-mode/page.tsx (20:26)\",\n-                 ],\n-               }\n-              `)\n-            } else {\n-              await expect(browser).toDisplayRedbox(`\n+        const pathname = '/use-cache-draft-mode'\n+\n+        if (isNextDev) {\n+          it('should show a redbox error', async () => {\n+            const browser = await next.browser(pathname)\n+\n+            await expect(browser).toDisplayRedbox(`\n                {\n                  \"description\": \"Route /use-cache-draft-mode used \"draftMode().enable()\" inside \"use cache\". The enabled status of \\`draftMode()\\` can be read in caches but you must not enable or disable \\`draftMode()\\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache\",\n                  \"environmentLabel\": null,\n@@ -2452,7 +2103,6 @@ describe('Cache Components Errors', () => {\n                  ],\n                }\n               `)\n-            }\n           })\n         } else {\n           it('should error the build', async () => {\n@@ -2467,9 +2117,8 @@ describe('Cache Components Errors', () => {\n               { isMinified: !isDebugPrerender }\n             )\n \n-            if (isTurbopack) {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n+            if (isDebugPrerender) {\n+              expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route /use-cache-draft-mode used \"draftMode().enable()\" inside \"use cache\". The enabled status of \\`draftMode()\\` can be read in caches but you must not enable or disable \\`draftMode()\\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache\n                      at DraftModeEnablingComponent (bundler:///app/use-cache-draft-mode/page.tsx:20:26)\n                    18 |   // here to ensure that this error is shown even when it's caught in userland.\n@@ -2485,7 +2134,8 @@ describe('Cache Components Errors', () => {\n                  > Export encountered errors on following paths:\n                  \t/use-cache-draft-mode/page: /use-cache-draft-mode\"\n                 `)\n-              } else {\n+            } else {\n+              if (isTurbopack) {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route /use-cache-draft-mode used \"draftMode().enable()\" inside \"use cache\". The enabled status of \\`draftMode()\\` can be read in caches but you must not enable or disable \\`draftMode()\\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache\n                      at <unknown> (bundler:///app/use-cache-draft-mode/page.tsx:20:26)\n@@ -2502,25 +2152,6 @@ describe('Cache Components Errors', () => {\n                  Error occurred prerendering page \"/use-cache-draft-mode\". Read more: https://nextjs.org/docs/messages/prerender-error\n                  Export encountered an error on /use-cache-draft-mode/page: /use-cache-draft-mode, exiting the build.\"\n                 `)\n-              }\n-            } else {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n-                 \"Error: Route /use-cache-draft-mode used \"draftMode().enable()\" inside \"use cache\". The enabled status of \\`draftMode()\\` can be read in caches but you must not enable or disable \\`draftMode()\\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache\n-                     at DraftModeEnablingComponent (bundler:///app/use-cache-draft-mode/page.tsx:20:26)\n-                   18 |   // here to ensure that this error is shown even when it's caught in userland.\n-                   19 |   try {\n-                 > 20 |     ;(await draftMode()).enable()\n-                      |                          ^\n-                   21 |   } catch {}\n-                   22 |\n-                   23 |   return null\n-                 To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/use-cache-draft-mode\" in your browser to investigate the error.\n-                 Error occurred prerendering page \"/use-cache-draft-mode\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-                 > Export encountered errors on following paths:\n-                 \t/use-cache-draft-mode/page: /use-cache-draft-mode\"\n-                `)\n               } else {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error: Route /use-cache-draft-mode used \"draftMode().enable()\" inside \"use cache\". The enabled status of \\`draftMode()\\` can be read in caches but you must not enable or disable \\`draftMode()\\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache\n@@ -2544,22 +2175,7 @@ describe('Cache Components Errors', () => {\n           it('should show a redbox error', async () => {\n             const browser = await next.browser(pathname)\n \n-            if (isTurbopack) {\n-              await expect(browser).toDisplayRedbox(`\n-               {\n-                 \"description\": \"Route /use-cache-headers used \\`headers()\\` inside \"use cache\". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \\`headers()\\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache\",\n-                 \"environmentLabel\": null,\n-                 \"label\": \"Runtime Error\",\n-                 \"source\": \"app/use-cache-headers/page.tsx (21:18) @ HeadersReadingComponent\n-               > 21 |     await headers()\n-                    |                  ^\",\n-                 \"stack\": [\n-                   \"HeadersReadingComponent app/use-cache-headers/page.tsx (21:18)\",\n-                 ],\n-               }\n-              `)\n-            } else {\n-              await expect(browser).toDisplayRedbox(`\n+            await expect(browser).toDisplayRedbox(`\n                {\n                  \"description\": \"Route /use-cache-headers used \\`headers()\\` inside \"use cache\". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \\`headers()\\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache\",\n                  \"environmentLabel\": null,\n@@ -2572,7 +2188,6 @@ describe('Cache Components Errors', () => {\n                  ],\n                }\n               `)\n-            }\n           })\n         } else {\n           it('should error the build', async () => {\n@@ -2910,15 +2525,9 @@ describe('Cache Components Errors', () => {\n           it('should show a redbox error', async () => {\n             const browser = await next.browser('/use-cache-params/foo')\n \n-            if (isTurbopack) {\n-              await expect(browser).toDisplayCollapsedRedbox(\n-                `\"Redbox did not open.\"`\n-              )\n-            } else {\n-              await expect(browser).toDisplayCollapsedRedbox(\n-                `\"Redbox did not open.\"`\n-              )\n-            }\n+            await expect(browser).toDisplayCollapsedRedbox(\n+              `\"Redbox did not open.\"`\n+            )\n           })\n         } else {\n           it('should error the build', async () => {\n@@ -3126,9 +2735,10 @@ describe('Cache Components Errors', () => {\n                  Export encountered an error on /use-cache-private-in-unstable-cache/page: /use-cache-private-in-unstable-cache, exiting the build.\"\n                 `)\n               }\n-            } else if (isRspack) {\n+            } else {\n               if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n+                if (isRspack) {\n+                  expect(output).toMatchInlineSnapshot(`\n                  \"Error: \"use cache: private\" must not be used within \\`unstable_cache()\\`.\n                      at 0 (bundler:///app/use-cache-private-in-unstable-cache/page.tsx:21:38)\n                      at a (<next-dist-dir>)\n@@ -3145,21 +2755,8 @@ describe('Cache Components Errors', () => {\n                  > Export encountered errors on following paths:\n                  \t/use-cache-private-in-unstable-cache/page: /use-cache-private-in-unstable-cache\"\n                 `)\n-              } else {\n-                expect(output).toMatchInlineSnapshot(`\n-                 \"Error: \"use cache: private\" must not be used within \\`unstable_cache()\\`.\n-                     at a (<next-dist-dir>)\n-                     at b (<next-dist-dir>)\n-                 To get a more detailed stack trace and pinpoint the issue, try one of the following:\n-                   - Start the app in development mode by running \\`next dev\\`, then open \"/use-cache-private-in-unstable-cache\" in your browser to investigate the error.\n-                   - Rerun the production build with \\`next build --debug-prerender\\` to generate better stack traces.\n-                 Error occurred prerendering page \"/use-cache-private-in-unstable-cache\". Read more: https://nextjs.org/docs/messages/prerender-error\n-                 Export encountered an error on /use-cache-private-in-unstable-cache/page: /use-cache-private-in-unstable-cache, exiting the build.\"\n-                `)\n-              }\n-            } else {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n+                } else {\n+                  expect(output).toMatchInlineSnapshot(`\n                  \"Error: \"use cache: private\" must not be used within \\`unstable_cache()\\`.\n                      at 0 (bundler:///app/use-cache-private-in-unstable-cache/page.tsx:21:38)\n                    19 | }\n@@ -3175,6 +2772,7 @@ describe('Cache Components Errors', () => {\n                  > Export encountered errors on following paths:\n                  \t/use-cache-private-in-unstable-cache/page: /use-cache-private-in-unstable-cache\"\n                 `)\n+                }\n               } else {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error: \"use cache: private\" must not be used within \\`unstable_cache()\\`.\n@@ -3317,9 +2915,10 @@ describe('Cache Components Errors', () => {\n                  Export encountered an error on /use-cache-private-in-use-cache/page: /use-cache-private-in-use-cache, exiting the build.\"\n                 `)\n               }\n-            } else if (isRspack) {\n+            } else {\n               if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n+                if (isRspack) {\n+                  expect(output).toMatchInlineSnapshot(`\n                  \"Error: \"use cache: private\" must not be used within \"use cache\". It can only be nested inside of another \"use cache: private\".\n                      at 0 (bundler:///app/use-cache-private-in-use-cache/page.tsx:15:1)\n                      at a (<next-dist-dir>)\n@@ -3346,24 +2945,8 @@ describe('Cache Components Errors', () => {\n                  > Export encountered errors on following paths:\n                  \t/use-cache-private-in-use-cache/page: /use-cache-private-in-use-cache\"\n                 `)\n-              } else {\n-                expect(output).toMatchInlineSnapshot(`\n-                 \"Error: \"use cache: private\" must not be used within \"use cache\". It can only be nested inside of another \"use cache: private\".\n-                     at a (<next-dist-dir>)\n-                     at b (<next-dist-dir>)\n-                 Error: \"use cache: private\" must not be used within \"use cache\". It can only be nested inside of another \"use cache: private\".\n-                     at c (<next-dist-dir>)\n-                     at d (<next-dist-dir>)\n-                 To get a more detailed stack trace and pinpoint the issue, try one of the following:\n-                   - Start the app in development mode by running \\`next dev\\`, then open \"/use-cache-private-in-use-cache\" in your browser to investigate the error.\n-                   - Rerun the production build with \\`next build --debug-prerender\\` to generate better stack traces.\n-                 Error occurred prerendering page \"/use-cache-private-in-use-cache\". Read more: https://nextjs.org/docs/messages/prerender-error\n-                 Export encountered an error on /use-cache-private-in-use-cache/page: /use-cache-private-in-use-cache, exiting the build.\"\n-                `)\n-              }\n-            } else {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n+                } else {\n+                  expect(output).toMatchInlineSnapshot(`\n                  \"Error: \"use cache: private\" must not be used within \"use cache\". It can only be nested inside of another \"use cache: private\".\n                      at 0 (bundler:///app/use-cache-private-in-use-cache/page.tsx:15:1)\n                    13 | }\n@@ -3388,6 +2971,7 @@ describe('Cache Components Errors', () => {\n                  > Export encountered errors on following paths:\n                  \t/use-cache-private-in-use-cache/page: /use-cache-private-in-use-cache\"\n                 `)\n+                }\n               } else {\n                 expect(output).toMatchInlineSnapshot(`\n                  \"Error: \"use cache: private\" must not be used within \"use cache\". It can only be nested inside of another \"use cache: private\".\n@@ -3544,22 +3128,7 @@ describe('Cache Components Errors', () => {\n           it.skip('should show a redbox error', async () => {\n             const browser = await next.browser('/use-cache-private-connection')\n \n-            if (isTurbopack) {\n-              await expect(browser).toDisplayCollapsedRedbox(`\n-               {\n-                 \"description\": \"Route /use-cache-private-connection used \\`connection()\\` inside \"use cache: private\". The \\`connection()\\` function is used to indicate the subsequent code must only run when there is an actual navigation request, but caches must be able to be produced before a navigation request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache\",\n-                 \"environmentLabel\": null,\n-                 \"label\": \"Runtime Error\",\n-                 \"source\": \"app/use-cache-private-connection/page.tsx (25:21) @ Private\n-               > 25 |     await connection()\n-                    |                     ^\",\n-                 \"stack\": [\n-                   \"Private app/use-cache-private-connection/page.tsx (25:21)\",\n-                 ],\n-               }\n-              `)\n-            } else {\n-              await expect(browser).toDisplayCollapsedRedbox(`\n+            await expect(browser).toDisplayCollapsedRedbox(`\n                {\n                  \"description\": \"Route /use-cache-private-connection used \\`connection()\\` inside \"use cache: private\". The \\`connection()\\` function is used to indicate the subsequent code must only run when there is an actual navigation request, but caches must be able to be produced before a navigation request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache\",\n                  \"environmentLabel\": null,\n@@ -3572,7 +3141,6 @@ describe('Cache Components Errors', () => {\n                  ],\n                }\n               `)\n-            }\n           })\n         } else {\n           // TODO: With prefetch sentinels this should yield a build error.\n@@ -3633,9 +3201,8 @@ describe('Cache Components Errors', () => {\n             { isMinified: !isDebugPrerender }\n           )\n \n-          if (isTurbopack) {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n+          if (isDebugPrerender) {\n+            expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-current-time/date\" used \\`Date()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing the current time in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time\n                    at DateReadingComponent (bundler:///app/sync-io-current-time/date/page.tsx:19:16)\n                  17 | async function DateReadingComponent() {\n@@ -3650,7 +3217,8 @@ describe('Cache Components Errors', () => {\n                > Export encountered errors on following paths:\n                \t/sync-io-current-time/date/page: /sync-io-current-time/date\"\n               `)\n-            } else {\n+          } else {\n+            if (isTurbopack) {\n               expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-current-time/date\" used \\`Date()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing the current time in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time\n                    at a (bundler:///app/sync-io-current-time/date/page.tsx:19:16)\n@@ -3666,24 +3234,6 @@ describe('Cache Components Errors', () => {\n                Error occurred prerendering page \"/sync-io-current-time/date\". Read more: https://nextjs.org/docs/messages/prerender-error\n                Export encountered an error on /sync-io-current-time/date/page: /sync-io-current-time/date, exiting the build.\"\n               `)\n-            }\n-          } else {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n-               \"Error: Route \"/sync-io-current-time/date\" used \\`Date()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing the current time in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time\n-                   at DateReadingComponent (bundler:///app/sync-io-current-time/date/page.tsx:19:16)\n-                 17 | async function DateReadingComponent() {\n-                 18 |   await new Promise((r) => process.nextTick(r))\n-               > 19 |   return <div>{Date()}</div>\n-                    |                ^\n-                 20 | }\n-                 21 |\n-               To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/sync-io-current-time/date\" in your browser to investigate the error.\n-               Error occurred prerendering page \"/sync-io-current-time/date\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-               > Export encountered errors on following paths:\n-               \t/sync-io-current-time/date/page: /sync-io-current-time/date\"\n-              `)\n             } else {\n               expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-current-time/date\" used \\`Date()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing the current time in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time\n@@ -3736,9 +3286,8 @@ describe('Cache Components Errors', () => {\n             { isMinified: !isDebugPrerender }\n           )\n \n-          if (isTurbopack) {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n+          if (isDebugPrerender) {\n+            expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-current-time/date-now\" used \\`Date.now()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing the current time in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time\n                    at DateReadingComponent (bundler:///app/sync-io-current-time/date-now/page.tsx:19:21)\n                  17 | async function DateReadingComponent() {\n@@ -3753,7 +3302,8 @@ describe('Cache Components Errors', () => {\n                > Export encountered errors on following paths:\n                \t/sync-io-current-time/date-now/page: /sync-io-current-time/date-now\"\n               `)\n-            } else {\n+          } else {\n+            if (isTurbopack) {\n               expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-current-time/date-now\" used \\`Date.now()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing the current time in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time\n                    at a (bundler:///app/sync-io-current-time/date-now/page.tsx:19:21)\n@@ -3769,24 +3319,6 @@ describe('Cache Components Errors', () => {\n                Error occurred prerendering page \"/sync-io-current-time/date-now\". Read more: https://nextjs.org/docs/messages/prerender-error\n                Export encountered an error on /sync-io-current-time/date-now/page: /sync-io-current-time/date-now, exiting the build.\"\n               `)\n-            }\n-          } else {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n-               \"Error: Route \"/sync-io-current-time/date-now\" used \\`Date.now()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing the current time in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time\n-                   at DateReadingComponent (bundler:///app/sync-io-current-time/date-now/page.tsx:19:21)\n-                 17 | async function DateReadingComponent() {\n-                 18 |   await new Promise((r) => process.nextTick(r))\n-               > 19 |   return <div>{Date.now()}</div>\n-                    |                     ^\n-                 20 | }\n-                 21 |\n-               To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/sync-io-current-time/date-now\" in your browser to investigate the error.\n-               Error occurred prerendering page \"/sync-io-current-time/date-now\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-               > Export encountered errors on following paths:\n-               \t/sync-io-current-time/date-now/page: /sync-io-current-time/date-now\"\n-              `)\n             } else {\n               expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-current-time/date-now\" used \\`Date.now()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing the current time in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time\n@@ -3839,9 +3371,8 @@ describe('Cache Components Errors', () => {\n             { isMinified: !isDebugPrerender }\n           )\n \n-          if (isTurbopack) {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n+          if (isDebugPrerender) {\n+            expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-current-time/new-date\" used \\`new Date()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing the current time in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time\n                    at DateReadingComponent (bundler:///app/sync-io-current-time/new-date/page.tsx:19:16)\n                  17 | async function DateReadingComponent() {\n@@ -3856,7 +3387,8 @@ describe('Cache Components Errors', () => {\n                > Export encountered errors on following paths:\n                \t/sync-io-current-time/new-date/page: /sync-io-current-time/new-date\"\n               `)\n-            } else {\n+          } else {\n+            if (isTurbopack) {\n               expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-current-time/new-date\" used \\`new Date()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing the current time in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time\n                    at a (bundler:///app/sync-io-current-time/new-date/page.tsx:19:16)\n@@ -3872,24 +3404,6 @@ describe('Cache Components Errors', () => {\n                Error occurred prerendering page \"/sync-io-current-time/new-date\". Read more: https://nextjs.org/docs/messages/prerender-error\n                Export encountered an error on /sync-io-current-time/new-date/page: /sync-io-current-time/new-date, exiting the build.\"\n               `)\n-            }\n-          } else {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n-               \"Error: Route \"/sync-io-current-time/new-date\" used \\`new Date()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing the current time in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time\n-                   at DateReadingComponent (bundler:///app/sync-io-current-time/new-date/page.tsx:19:16)\n-                 17 | async function DateReadingComponent() {\n-                 18 |   await new Promise((r) => process.nextTick(r))\n-               > 19 |   return <div>{new Date().toString()}</div>\n-                    |                ^\n-                 20 | }\n-                 21 |\n-               To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/sync-io-current-time/new-date\" in your browser to investigate the error.\n-               Error occurred prerendering page \"/sync-io-current-time/new-date\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-               > Export encountered errors on following paths:\n-               \t/sync-io-current-time/new-date/page: /sync-io-current-time/new-date\"\n-              `)\n             } else {\n               expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-current-time/new-date\" used \\`new Date()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing the current time in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-current-time\n@@ -3942,9 +3456,8 @@ describe('Cache Components Errors', () => {\n             { isMinified: !isDebugPrerender }\n           )\n \n-          if (isTurbopack) {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n+          if (isDebugPrerender) {\n+            expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-random/math-random\" used \\`Math.random()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-random\n                    at SyncIOComponent (bundler:///app/sync-io-random/math-random/page.tsx:19:21)\n                  17 | async function SyncIOComponent() {\n@@ -3959,7 +3472,8 @@ describe('Cache Components Errors', () => {\n                > Export encountered errors on following paths:\n                \t/sync-io-random/math-random/page: /sync-io-random/math-random\"\n               `)\n-            } else {\n+          } else {\n+            if (isTurbopack) {\n               expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-random/math-random\" used \\`Math.random()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-random\n                    at a (bundler:///app/sync-io-random/math-random/page.tsx:19:21)\n@@ -3975,24 +3489,6 @@ describe('Cache Components Errors', () => {\n                Error occurred prerendering page \"/sync-io-random/math-random\". Read more: https://nextjs.org/docs/messages/prerender-error\n                Export encountered an error on /sync-io-random/math-random/page: /sync-io-random/math-random, exiting the build.\"\n               `)\n-            }\n-          } else {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n-               \"Error: Route \"/sync-io-random/math-random\" used \\`Math.random()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-random\n-                   at SyncIOComponent (bundler:///app/sync-io-random/math-random/page.tsx:19:21)\n-                 17 | async function SyncIOComponent() {\n-                 18 |   await new Promise((r) => process.nextTick(r))\n-               > 19 |   return <div>{Math.random()}</div>\n-                    |                     ^\n-                 20 | }\n-                 21 |\n-               To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/sync-io-random/math-random\" in your browser to investigate the error.\n-               Error occurred prerendering page \"/sync-io-random/math-random\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-               > Export encountered errors on following paths:\n-               \t/sync-io-random/math-random/page: /sync-io-random/math-random\"\n-              `)\n             } else {\n               expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-random/math-random\" used \\`Math.random()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-random\n@@ -4045,9 +3541,8 @@ describe('Cache Components Errors', () => {\n             { isMinified: !isDebugPrerender }\n           )\n \n-          if (isTurbopack) {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n+          if (isDebugPrerender) {\n+            expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-web-crypto/get-random-value\" used \\`crypto.getRandomValues()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random cryptographic values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-crypto\n                    at SyncIOComponent (bundler:///app/sync-io-web-crypto/get-random-value/page.tsx:20:10)\n                  18 |   await new Promise((r) => process.nextTick(r))\n@@ -4063,7 +3558,8 @@ describe('Cache Components Errors', () => {\n                > Export encountered errors on following paths:\n                \t/sync-io-web-crypto/get-random-value/page: /sync-io-web-crypto/get-random-value\"\n               `)\n-            } else {\n+          } else {\n+            if (isTurbopack) {\n               expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-web-crypto/get-random-value\" used \\`crypto.getRandomValues()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random cryptographic values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-crypto\n                    at a (bundler:///app/sync-io-web-crypto/get-random-value/page.tsx:20:10)\n@@ -4080,25 +3576,6 @@ describe('Cache Components Errors', () => {\n                Error occurred prerendering page \"/sync-io-web-crypto/get-random-value\". Read more: https://nextjs.org/docs/messages/prerender-error\n                Export encountered an error on /sync-io-web-crypto/get-random-value/page: /sync-io-web-crypto/get-random-value, exiting the build.\"\n               `)\n-            }\n-          } else {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n-               \"Error: Route \"/sync-io-web-crypto/get-random-value\" used \\`crypto.getRandomValues()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random cryptographic values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-crypto\n-                   at SyncIOComponent (bundler:///app/sync-io-web-crypto/get-random-value/page.tsx:20:10)\n-                 18 |   await new Promise((r) => process.nextTick(r))\n-                 19 |   const buffer = new Uint8Array(8)\n-               > 20 |   crypto.getRandomValues(buffer)\n-                    |          ^\n-                 21 |   return <div>{buffer.toString()}</div>\n-                 22 | }\n-                 23 |\n-               To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/sync-io-web-crypto/get-random-value\" in your browser to investigate the error.\n-               Error occurred prerendering page \"/sync-io-web-crypto/get-random-value\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-               > Export encountered errors on following paths:\n-               \t/sync-io-web-crypto/get-random-value/page: /sync-io-web-crypto/get-random-value\"\n-              `)\n             } else {\n               expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-web-crypto/get-random-value\" used \\`crypto.getRandomValues()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random cryptographic values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-crypto\n@@ -4151,9 +3628,8 @@ describe('Cache Components Errors', () => {\n             { isMinified: !isDebugPrerender }\n           )\n \n-          if (isTurbopack) {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n+          if (isDebugPrerender) {\n+            expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-web-crypto/random-uuid\" used \\`crypto.randomUUID()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random cryptographic values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-crypto\n                    at SyncIOComponent (bundler:///app/sync-io-web-crypto/random-uuid/page.tsx:19:23)\n                  17 | async function SyncIOComponent() {\n@@ -4168,7 +3644,8 @@ describe('Cache Components Errors', () => {\n                > Export encountered errors on following paths:\n                \t/sync-io-web-crypto/random-uuid/page: /sync-io-web-crypto/random-uuid\"\n               `)\n-            } else {\n+          } else {\n+            if (isTurbopack) {\n               expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-web-crypto/random-uuid\" used \\`crypto.randomUUID()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random cryptographic values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-crypto\n                    at a (bundler:///app/sync-io-web-crypto/random-uuid/page.tsx:19:23)\n@@ -4184,24 +3661,6 @@ describe('Cache Components Errors', () => {\n                Error occurred prerendering page \"/sync-io-web-crypto/random-uuid\". Read more: https://nextjs.org/docs/messages/prerender-error\n                Export encountered an error on /sync-io-web-crypto/random-uuid/page: /sync-io-web-crypto/random-uuid, exiting the build.\"\n               `)\n-            }\n-          } else {\n-            if (isDebugPrerender) {\n-              expect(output).toMatchInlineSnapshot(`\n-               \"Error: Route \"/sync-io-web-crypto/random-uuid\" used \\`crypto.randomUUID()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random cryptographic values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-crypto\n-                   at SyncIOComponent (bundler:///app/sync-io-web-crypto/random-uuid/page.tsx:19:23)\n-                 17 | async function SyncIOComponent() {\n-                 18 |   await new Promise((r) => process.nextTick(r))\n-               > 19 |   return <div>{crypto.randomUUID()}</div>\n-                    |                       ^\n-                 20 | }\n-                 21 |\n-               To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/sync-io-web-crypto/random-uuid\" in your browser to investigate the error.\n-               Error occurred prerendering page \"/sync-io-web-crypto/random-uuid\". Read more: https://nextjs.org/docs/messages/prerender-error\n-\n-               > Export encountered errors on following paths:\n-               \t/sync-io-web-crypto/random-uuid/page: /sync-io-web-crypto/random-uuid\"\n-              `)\n             } else {\n               expect(output).toMatchInlineSnapshot(`\n                \"Error: Route \"/sync-io-web-crypto/random-uuid\" used \\`crypto.randomUUID()\\` before accessing either uncached data (e.g. \\`fetch()\\`) or Request data (e.g. \\`cookies()\\`, \\`headers()\\`, \\`connection()\\`, and \\`searchParams\\`). Accessing random cryptographic values synchronously in a Server Component requires reading one of these data sources first. Alternatively, consider moving this expression into a Client Component or Cache Component. See more info here: https://nextjs.org/docs/messages/next-prerender-crypto"
        }
    ],
    "stats": {
        "total": 727,
        "additions": 93,
        "deletions": 634
    }
}