{
    "author": "devjiwonchoi",
    "message": "[devtools] port call stack (#80550)\n\nSince the Error Overlay call stack had dedicated handlers for animation, it wasn't able to reuse them. Therefore, port the UI part of the call stack and receive handlers as props, so that the call stack component can be shared with the Error Overlay and the DevTools panel.",
    "sha": "44c0809a31fd23e5c33c24636bfe82a6024e230b",
    "files": [
        {
            "sha": "3538a671d67e47d9840bed97bd8af3b76d66bb01",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/call-stack/call-stack.stories.tsx",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/44c0809a31fd23e5c33c24636bfe82a6024e230b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fcall-stack%2Fcall-stack.stories.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/44c0809a31fd23e5c33c24636bfe82a6024e230b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fcall-stack%2Fcall-stack.stories.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fcall-stack%2Fcall-stack.stories.tsx?ref=44c0809a31fd23e5c33c24636bfe82a6024e230b",
            "patch": "@@ -1,6 +1,6 @@\n import type { Meta, StoryObj } from '@storybook/react'\n import { CallStack } from './call-stack'\n-import { withShadowPortal } from '../../../storybook/with-shadow-portal'\n+import { withShadowPortal } from '../../storybook/with-shadow-portal'\n \n const meta: Meta<typeof CallStack> = {\n   component: CallStack,",
            "previous_filename": "packages/next/src/next-devtools/dev-overlay/components/errors/call-stack/call-stack.stories.tsx"
        },
        {
            "sha": "16fcbb6585e395f2dafaf5c358125312050ae4bc",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/call-stack/call-stack.tsx",
            "status": "added",
            "additions": 117,
            "deletions": 0,
            "changes": 117,
            "blob_url": "https://github.com/vercel/next.js/blob/44c0809a31fd23e5c33c24636bfe82a6024e230b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fcall-stack%2Fcall-stack.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/44c0809a31fd23e5c33c24636bfe82a6024e230b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fcall-stack%2Fcall-stack.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fcall-stack%2Fcall-stack.tsx?ref=44c0809a31fd23e5c33c24636bfe82a6024e230b",
            "patch": "@@ -0,0 +1,117 @@\n+import type { OriginalStackFrame } from '../../../shared/stack-frame'\n+\n+import { CallStackFrame } from '../call-stack-frame/call-stack-frame'\n+import { ChevronUpDownIcon } from '../../icons/chevron-up-down'\n+import { css } from '../../utils/css'\n+\n+export function CallStack({\n+  frames,\n+  isIgnoreListOpen,\n+  ignoredFramesTally,\n+  onToggleIgnoreList,\n+}: {\n+  frames: OriginalStackFrame[]\n+  isIgnoreListOpen: boolean\n+  ignoredFramesTally: number\n+  onToggleIgnoreList: () => void\n+}) {\n+  return (\n+    <div data-nextjs-call-stack-container>\n+      <div data-nextjs-call-stack-header>\n+        <p data-nextjs-call-stack-title>\n+          Call Stack <span data-nextjs-call-stack-count>{frames.length}</span>\n+        </p>\n+        {ignoredFramesTally > 0 && (\n+          <button\n+            // The isIgnoreListOpen value is used by tests to confirm whether it is open or not.\n+            data-nextjs-call-stack-ignored-list-toggle-button={isIgnoreListOpen}\n+            onClick={onToggleIgnoreList}\n+          >\n+            {`${isIgnoreListOpen ? 'Hide' : 'Show'} ${ignoredFramesTally} ignore-listed frame(s)`}\n+            <ChevronUpDownIcon />\n+          </button>\n+        )}\n+      </div>\n+      {frames.map((frame, frameIndex) => {\n+        return !frame.ignored || isIgnoreListOpen ? (\n+          <CallStackFrame key={frameIndex} frame={frame} />\n+        ) : null\n+      })}\n+    </div>\n+  )\n+}\n+\n+export const CALL_STACK_STYLES = css`\n+  [data-nextjs-call-stack-container] {\n+    position: relative;\n+    margin-top: 8px;\n+  }\n+\n+  [data-nextjs-call-stack-header] {\n+    display: flex;\n+    justify-content: space-between;\n+    align-items: center;\n+    min-height: var(--size-28);\n+    padding: 8px 8px 12px 4px;\n+    width: 100%;\n+  }\n+\n+  [data-nextjs-call-stack-title] {\n+    display: flex;\n+    justify-content: space-between;\n+    align-items: center;\n+    gap: 8px;\n+\n+    margin: 0;\n+\n+    color: var(--color-gray-1000);\n+    font-size: var(--size-16);\n+    font-weight: 500;\n+  }\n+\n+  [data-nextjs-call-stack-count] {\n+    display: flex;\n+    justify-content: center;\n+    align-items: center;\n+\n+    width: var(--size-20);\n+    height: var(--size-20);\n+    gap: 4px;\n+\n+    color: var(--color-gray-1000);\n+    text-align: center;\n+    font-size: var(--size-11);\n+    font-weight: 500;\n+    line-height: var(--size-16);\n+\n+    border-radius: var(--rounded-full);\n+    background: var(--color-gray-300);\n+  }\n+\n+  [data-nextjs-call-stack-ignored-list-toggle-button] {\n+    all: unset;\n+    display: flex;\n+    align-items: center;\n+    gap: 6px;\n+    color: var(--color-gray-900);\n+    font-size: var(--size-14);\n+    line-height: var(--size-20);\n+    border-radius: 6px;\n+    padding: 4px 6px;\n+    margin-right: -6px;\n+    transition: background 150ms ease;\n+\n+    &:hover {\n+      background: var(--color-gray-100);\n+    }\n+\n+    &:focus {\n+      outline: var(--focus-ring);\n+    }\n+\n+    svg {\n+      width: var(--size-16);\n+      height: var(--size-16);\n+    }\n+  }\n+`"
        },
        {
            "sha": "6888395517f8bb298b71269aeb4d4340009ec9c0",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/call-stack/call-stack.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 164,
            "changes": 164,
            "blob_url": "https://github.com/vercel/next.js/blob/8a9682f791953e13af7f53fd17caa29c749e503a/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fcall-stack%2Fcall-stack.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8a9682f791953e13af7f53fd17caa29c749e503a/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fcall-stack%2Fcall-stack.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fcall-stack%2Fcall-stack.tsx?ref=8a9682f791953e13af7f53fd17caa29c749e503a",
            "patch": "@@ -1,164 +0,0 @@\n-import type { OriginalStackFrame } from '../../../../shared/stack-frame'\n-import { useMemo, useState, useRef } from 'react'\n-import { CallStackFrame } from '../../call-stack-frame/call-stack-frame'\n-\n-interface CallStackProps {\n-  frames: OriginalStackFrame[]\n-  dialogResizerRef: React.RefObject<HTMLDivElement | null>\n-}\n-\n-export function CallStack({ frames, dialogResizerRef }: CallStackProps) {\n-  const initialDialogHeight = useRef<number>(NaN)\n-  const [isIgnoreListOpen, setIsIgnoreListOpen] = useState(false)\n-\n-  const ignoredFramesTally = useMemo(() => {\n-    return frames.reduce((tally, frame) => tally + (frame.ignored ? 1 : 0), 0)\n-  }, [frames])\n-\n-  function onToggleIgnoreList() {\n-    const dialog = dialogResizerRef?.current as HTMLElement\n-\n-    if (!dialog) {\n-      return\n-    }\n-\n-    const { height: currentHeight } = dialog?.getBoundingClientRect()\n-\n-    if (!initialDialogHeight.current) {\n-      initialDialogHeight.current = currentHeight\n-    }\n-\n-    if (isIgnoreListOpen) {\n-      function onTransitionEnd() {\n-        dialog.removeEventListener('transitionend', onTransitionEnd)\n-        setIsIgnoreListOpen(false)\n-      }\n-      dialog.style.height = `${initialDialogHeight.current}px`\n-      dialog.addEventListener('transitionend', onTransitionEnd)\n-    } else {\n-      setIsIgnoreListOpen(true)\n-    }\n-  }\n-\n-  return (\n-    <div className=\"error-overlay-call-stack-container\">\n-      <div className=\"error-overlay-call-stack-header\">\n-        <p className=\"error-overlay-call-stack-title\">\n-          Call Stack{' '}\n-          <span className=\"error-overlay-call-stack-count\">\n-            {frames.length}\n-          </span>\n-        </p>\n-        {ignoredFramesTally > 0 && (\n-          <button\n-            data-expand-ignore-button={isIgnoreListOpen}\n-            className=\"error-overlay-call-stack-ignored-list-toggle-button\"\n-            onClick={onToggleIgnoreList}\n-          >\n-            {`${isIgnoreListOpen ? 'Hide' : 'Show'} ${ignoredFramesTally} ignore-listed frame(s)`}\n-            <ChevronUpDown />\n-          </button>\n-        )}\n-      </div>\n-      {frames.map((frame, frameIndex) => {\n-        return !frame.ignored || isIgnoreListOpen ? (\n-          <CallStackFrame key={frameIndex} frame={frame} />\n-        ) : null\n-      })}\n-    </div>\n-  )\n-}\n-\n-function ChevronUpDown() {\n-  return (\n-    <svg\n-      width=\"16\"\n-      height=\"16\"\n-      viewBox=\"0 0 16 16\"\n-      fill=\"none\"\n-      xmlns=\"http://www.w3.org/2000/svg\"\n-    >\n-      <path\n-        fillRule=\"evenodd\"\n-        clipRule=\"evenodd\"\n-        d=\"M8.70722 2.39641C8.3167 2.00588 7.68353 2.00588 7.29301 2.39641L4.46978 5.21963L3.93945 5.74996L5.00011 6.81062L5.53044 6.28029L8.00011 3.81062L10.4698 6.28029L11.0001 6.81062L12.0608 5.74996L11.5304 5.21963L8.70722 2.39641ZM5.53044 9.71963L5.00011 9.1893L3.93945 10.25L4.46978 10.7803L7.29301 13.6035C7.68353 13.994 8.3167 13.994 8.70722 13.6035L11.5304 10.7803L12.0608 10.25L11.0001 9.1893L10.4698 9.71963L8.00011 12.1893L5.53044 9.71963Z\"\n-        fill=\"currentColor\"\n-      />\n-    </svg>\n-  )\n-}\n-\n-export const CALL_STACK_STYLES = `\n-  .error-overlay-call-stack-container {\n-    position: relative;\n-    margin-top: 8px;\n-  }\n-\n-  .error-overlay-call-stack-header {\n-    display: flex;\n-    justify-content: space-between;\n-    align-items: center;\n-    min-height: var(--size-28);\n-    padding: 8px 8px 12px 4px;\n-    width: 100%;\n-  }\n-\n-  .error-overlay-call-stack-title {\n-    display: flex;\n-    justify-content: space-between;\n-    align-items: center;\n-    gap: 8px;\n-\n-    margin: 0;\n-\n-    color: var(--color-gray-1000);\n-    font-size: var(--size-16);\n-    font-weight: 500;\n-  }\n-\n-  .error-overlay-call-stack-count {\n-    display: flex;\n-    justify-content: center;\n-    align-items: center;\n-\n-    width: var(--size-20);\n-    height: var(--size-20);\n-    gap: 4px;\n-\n-    color: var(--color-gray-1000);\n-    text-align: center;\n-    font-size: var(--size-11);\n-    font-weight: 500;\n-    line-height: var(--size-16);\n-\n-    border-radius: var(--rounded-full);\n-    background: var(--color-gray-300);\n-  }\n-\n-  .error-overlay-call-stack-ignored-list-toggle-button {\n-    all: unset;\n-    display: flex;\n-    align-items: center;\n-    gap: 6px;\n-    color: var(--color-gray-900);\n-    font-size: var(--size-14);\n-    line-height: var(--size-20);\n-    border-radius: 6px;\n-    padding: 4px 6px;\n-    margin-right: -6px;\n-    transition: background 150ms ease;\n-\n-    &:hover {\n-      background: var(--color-gray-100);\n-    }\n-\n-    &:focus {\n-      outline: var(--focus-ring);\n-    }\n-\n-    svg {\n-      width: var(--size-16);\n-      height: var(--size-16);\n-    }\n-  }\n-`"
        },
        {
            "sha": "eefc507caf5315808d8bcc5c31598e523d8bfd48",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/error-overlay-call-stack/error-overlay-call-stack.stories.tsx",
            "status": "added",
            "additions": 89,
            "deletions": 0,
            "changes": 89,
            "blob_url": "https://github.com/vercel/next.js/blob/44c0809a31fd23e5c33c24636bfe82a6024e230b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-call-stack%2Ferror-overlay-call-stack.stories.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/44c0809a31fd23e5c33c24636bfe82a6024e230b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-call-stack%2Ferror-overlay-call-stack.stories.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-call-stack%2Ferror-overlay-call-stack.stories.tsx?ref=44c0809a31fd23e5c33c24636bfe82a6024e230b",
            "patch": "@@ -0,0 +1,89 @@\n+import type { Meta, StoryObj } from '@storybook/react'\n+import { ErrorOverlayCallStack } from './error-overlay-call-stack'\n+import { withShadowPortal } from '../../../storybook/with-shadow-portal'\n+\n+const meta: Meta<typeof ErrorOverlayCallStack> = {\n+  component: ErrorOverlayCallStack,\n+  parameters: {\n+    layout: 'fullscreen',\n+    backgrounds: {\n+      default: 'background-100-dark',\n+    },\n+    a11y: {\n+      config: {\n+        rules: [\n+          {\n+            id: 'color-contrast',\n+            // Manual testing shows no violation.\n+            // TODO: We might have setup more explicit backgrounds depending on theme.\n+            enabled: false,\n+          },\n+        ],\n+      },\n+    },\n+  },\n+  decorators: [withShadowPortal],\n+}\n+\n+export default meta\n+type Story = StoryObj<typeof ErrorOverlayCallStack>\n+\n+const frame = {\n+  originalStackFrame: {\n+    file: './app/page.tsx',\n+    methodName: 'MyComponent',\n+    arguments: [],\n+    lineNumber: 10,\n+    column: 5,\n+    ignored: false,\n+  },\n+  sourceStackFrame: {\n+    file: './app/page.tsx',\n+    methodName: 'MyComponent',\n+    arguments: [],\n+    lineNumber: 10,\n+    column: 5,\n+  },\n+  originalCodeFrame: 'export default function MyComponent() {',\n+  error: false as const,\n+  reason: null,\n+  external: false,\n+  ignored: false,\n+}\n+\n+const ignoredFrame = {\n+  ...frame,\n+  ignored: true,\n+}\n+\n+export const SingleFrame: Story = {\n+  args: {\n+    frames: [frame],\n+  },\n+}\n+\n+export const MultipleFrames: Story = {\n+  args: {\n+    frames: [\n+      frame,\n+      {\n+        ...frame,\n+        originalStackFrame: {\n+          ...frame.originalStackFrame,\n+          methodName: 'ParentComponent',\n+          lineNumber: 5,\n+        },\n+      },\n+      ...Array(5).fill(ignoredFrame),\n+      {\n+        ...frame,\n+        originalStackFrame: {\n+          ...frame.originalStackFrame,\n+          methodName: 'GrandparentComponent',\n+          lineNumber: 1,\n+        },\n+      },\n+      ...Array(5).fill(ignoredFrame),\n+    ],\n+  },\n+}"
        },
        {
            "sha": "6ad843946b5351e3cb7287856a05cf7b6e956930",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/error-overlay-call-stack/error-overlay-call-stack.tsx",
            "status": "added",
            "additions": 54,
            "deletions": 0,
            "changes": 54,
            "blob_url": "https://github.com/vercel/next.js/blob/44c0809a31fd23e5c33c24636bfe82a6024e230b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-call-stack%2Ferror-overlay-call-stack.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/44c0809a31fd23e5c33c24636bfe82a6024e230b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-call-stack%2Ferror-overlay-call-stack.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-call-stack%2Ferror-overlay-call-stack.tsx?ref=44c0809a31fd23e5c33c24636bfe82a6024e230b",
            "patch": "@@ -0,0 +1,54 @@\n+import type { OriginalStackFrame } from '../../../../shared/stack-frame'\n+import { useMemo, useState, useRef } from 'react'\n+import { CallStack } from '../../call-stack/call-stack'\n+\n+interface CallStackProps {\n+  frames: OriginalStackFrame[]\n+  dialogResizerRef: React.RefObject<HTMLDivElement | null>\n+}\n+\n+export function ErrorOverlayCallStack({\n+  frames,\n+  dialogResizerRef,\n+}: CallStackProps) {\n+  const initialDialogHeight = useRef<number>(NaN)\n+  const [isIgnoreListOpen, setIsIgnoreListOpen] = useState(false)\n+\n+  const ignoredFramesTally = useMemo(() => {\n+    return frames.reduce((tally, frame) => tally + (frame.ignored ? 1 : 0), 0)\n+  }, [frames])\n+\n+  function onToggleIgnoreList() {\n+    const dialog = dialogResizerRef?.current as HTMLElement\n+\n+    if (!dialog) {\n+      return\n+    }\n+\n+    const { height: currentHeight } = dialog?.getBoundingClientRect()\n+\n+    if (!initialDialogHeight.current) {\n+      initialDialogHeight.current = currentHeight\n+    }\n+\n+    if (isIgnoreListOpen) {\n+      function onTransitionEnd() {\n+        dialog.removeEventListener('transitionend', onTransitionEnd)\n+        setIsIgnoreListOpen(false)\n+      }\n+      dialog.style.height = `${initialDialogHeight.current}px`\n+      dialog.addEventListener('transitionend', onTransitionEnd)\n+    } else {\n+      setIsIgnoreListOpen(true)\n+    }\n+  }\n+\n+  return (\n+    <CallStack\n+      frames={frames}\n+      isIgnoreListOpen={isIgnoreListOpen}\n+      onToggleIgnoreList={onToggleIgnoreList}\n+      ignoredFramesTally={ignoredFramesTally}\n+    />\n+  )\n+}"
        },
        {
            "sha": "7c943634c8a890bc5afbd9911c4a07d051d47d42",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/error-overlay-layout/error-overlay-layout.tsx",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/44c0809a31fd23e5c33c24636bfe82a6024e230b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-layout%2Ferror-overlay-layout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/44c0809a31fd23e5c33c24636bfe82a6024e230b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-layout%2Ferror-overlay-layout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-layout%2Ferror-overlay-layout.tsx?ref=44c0809a31fd23e5c33c24636bfe82a6024e230b",
            "patch": "@@ -28,7 +28,6 @@ import {\n   DIALOG_HEADER_STYLES,\n } from '../dialog/header'\n import { ErrorOverlayDialogBody, DIALOG_BODY_STYLES } from '../dialog/body'\n-import { CALL_STACK_STYLES } from '../call-stack/call-stack'\n import { OVERLAY_STYLES, ErrorOverlayOverlay } from '../overlay/overlay'\n import { ErrorOverlayBottomStack } from '../error-overlay-bottom-stack'\n import type { ErrorBaseProps } from '../error-overlay/error-overlay'\n@@ -186,7 +185,6 @@ export const styles = `\n   ${errorTypeLabelStyles}\n   ${errorMessageStyles}\n   ${toolbarStyles}\n-  ${CALL_STACK_STYLES}\n \n   [data-nextjs-error-label-group] {\n     display: flex;"
        },
        {
            "sha": "c2e14da49237fea7a5421bbe6fa7fec8e1993bcc",
            "filename": "packages/next/src/next-devtools/dev-overlay/container/runtime-error/index.tsx",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/44c0809a31fd23e5c33c24636bfe82a6024e230b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcontainer%2Fruntime-error%2Findex.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/44c0809a31fd23e5c33c24636bfe82a6024e230b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcontainer%2Fruntime-error%2Findex.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcontainer%2Fruntime-error%2Findex.tsx?ref=44c0809a31fd23e5c33c24636bfe82a6024e230b",
            "patch": "@@ -1,6 +1,6 @@\n import { useMemo } from 'react'\n import { CodeFrame } from '../../components/code-frame/code-frame'\n-import { CallStack } from '../../components/errors/call-stack/call-stack'\n+import { ErrorOverlayCallStack } from '../../components/errors/error-overlay-call-stack/error-overlay-call-stack'\n import { PSEUDO_HTML_DIFF_STYLES } from './component-stack-pseudo-html'\n import {\n   useFrames,\n@@ -36,7 +36,10 @@ export function RuntimeError({ error, dialogResizerRef }: RuntimeErrorProps) {\n       )}\n \n       {frames.length > 0 && (\n-        <CallStack dialogResizerRef={dialogResizerRef} frames={frames} />\n+        <ErrorOverlayCallStack\n+          dialogResizerRef={dialogResizerRef}\n+          frames={frames}\n+        />\n       )}\n     </>\n   )"
        },
        {
            "sha": "9c9f5f31a3d8f133f4b8dee331f54656ad353d8a",
            "filename": "packages/next/src/next-devtools/dev-overlay/icons/chevron-up-down.tsx",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/44c0809a31fd23e5c33c24636bfe82a6024e230b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Ficons%2Fchevron-up-down.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/44c0809a31fd23e5c33c24636bfe82a6024e230b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Ficons%2Fchevron-up-down.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Ficons%2Fchevron-up-down.tsx?ref=44c0809a31fd23e5c33c24636bfe82a6024e230b",
            "patch": "@@ -0,0 +1,18 @@\n+export function ChevronUpDownIcon() {\n+  return (\n+    <svg\n+      width=\"16\"\n+      height=\"16\"\n+      viewBox=\"0 0 16 16\"\n+      fill=\"none\"\n+      xmlns=\"http://www.w3.org/2000/svg\"\n+    >\n+      <path\n+        fillRule=\"evenodd\"\n+        clipRule=\"evenodd\"\n+        d=\"M8.70722 2.39641C8.3167 2.00588 7.68353 2.00588 7.29301 2.39641L4.46978 5.21963L3.93945 5.74996L5.00011 6.81062L5.53044 6.28029L8.00011 3.81062L10.4698 6.28029L11.0001 6.81062L12.0608 5.74996L11.5304 5.21963L8.70722 2.39641ZM5.53044 9.71963L5.00011 9.1893L3.93945 10.25L4.46978 10.7803L7.29301 13.6035C7.68353 13.994 8.3167 13.994 8.70722 13.6035L11.5304 10.7803L12.0608 10.25L11.0001 9.1893L10.4698 9.71963L8.00011 12.1893L5.53044 9.71963Z\"\n+        fill=\"currentColor\"\n+      />\n+    </svg>\n+  )\n+}"
        },
        {
            "sha": "1c262fe33e4f309068ed51549cfb6262a25b78eb",
            "filename": "packages/next/src/next-devtools/dev-overlay/styles/component-styles.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/44c0809a31fd23e5c33c24636bfe82a6024e230b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstyles%2Fcomponent-styles.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/44c0809a31fd23e5c33c24636bfe82a6024e230b/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstyles%2Fcomponent-styles.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstyles%2Fcomponent-styles.tsx?ref=44c0809a31fd23e5c33c24636bfe82a6024e230b",
            "patch": "@@ -28,13 +28,15 @@ import { DEVTOOLS_PANEL_STYLES } from '../components/devtools-panel/devtools-pan\n import { DEVTOOLS_PANEL_FOOTER_STYLES } from '../components/devtools-panel/devtools-panel-footer'\n import { DEVTOOLS_PANEL_VERSION_INFO_STYLES } from '../components/devtools-panel/devtools-panel-version-info'\n import { DEVTOOLS_PANEL_TAB_SETTINGS_STYLES } from '../components/devtools-panel/devtools-panel-tab/settings-tab'\n+import { CALL_STACK_STYLES } from '../components/call-stack/call-stack'\n \n export function ComponentStyles() {\n   return (\n     <style>\n       {css`\n         ${COPY_BUTTON_STYLES}\n         ${CALL_STACK_FRAME_STYLES}\n+        ${CALL_STACK_STYLES}\n         ${ENVIRONMENT_NAME_LABEL_STYLES}\n         ${overlay}\n         ${toast}"
        },
        {
            "sha": "84e8e04848cd3c88ea10f16e8e3d055c7af457ac",
            "filename": "test/lib/next-test-utils.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 3,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/44c0809a31fd23e5c33c24636bfe82a6024e230b/test%2Flib%2Fnext-test-utils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/44c0809a31fd23e5c33c24636bfe82a6024e230b/test%2Flib%2Fnext-test-utils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Fnext-test-utils.ts?ref=44c0809a31fd23e5c33c24636bfe82a6024e230b",
            "patch": "@@ -1678,12 +1678,18 @@ export async function getStackFramesContent(browser) {\n }\n \n export async function toggleCollapseCallStackFrames(browser: Playwright) {\n-  const button = await browser.elementByCss('[data-expand-ignore-button]')\n-  const lastExpanded = await button.getAttribute('data-expand-ignore-button')\n+  const button = await browser.elementByCss(\n+    '[data-nextjs-call-stack-ignored-list-toggle-button]'\n+  )\n+  const lastExpanded = await button.getAttribute(\n+    'data-nextjs-call-stack-ignored-list-toggle-button'\n+  )\n   await button.click()\n \n   await retry(async () => {\n-    const currExpanded = await button.getAttribute('data-expand-ignore-button')\n+    const currExpanded = await button.getAttribute(\n+      'data-nextjs-call-stack-ignored-list-toggle-button'\n+    )\n     expect(currExpanded).not.toBe(lastExpanded)\n   })\n }"
        }
    ],
    "stats": {
        "total": 467,
        "additions": 295,
        "deletions": 172
    }
}