{
    "author": "eps1lon",
    "message": "Plumbing for cache indicator (#84955)",
    "sha": "f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
    "files": [
        {
            "sha": "c71a6a267e7a8a4b2168a31dacddf9a960286591",
            "filename": "packages/next/src/build/templates/app-page.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -503,6 +503,7 @@ export async function handler(\n           subresourceIntegrityManifest,\n           serverActionsManifest,\n           clientReferenceManifest,\n+          setCacheStatus: routerServerContext?.setCacheStatus,\n           setIsrStatus: routerServerContext?.setIsrStatus,\n           setReactDebugChannel: routerServerContext?.setReactDebugChannel,\n "
        },
        {
            "sha": "e5bf5baf299684e562df9e47a7992258a11c731a",
            "filename": "packages/next/src/client/app-next-dev.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fclient%2Fapp-next-dev.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fclient%2Fapp-next-dev.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fapp-next-dev.ts?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -15,6 +15,7 @@ appBootstrap((assetPrefix) => {\n   try {\n     hydrate(instrumentationHooks, assetPrefix)\n   } finally {\n-    renderAppDevOverlay(getOwnerStack, isRecoverableError)\n+    const enableCacheIndicator = process.env.__NEXT_CACHE_COMPONENTS\n+    renderAppDevOverlay(getOwnerStack, isRecoverableError, enableCacheIndicator)\n   }\n })"
        },
        {
            "sha": "10e8416e4fed47a61711dccf85b65011d9e3c64f",
            "filename": "packages/next/src/client/app-next-turbopack.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fclient%2Fapp-next-turbopack.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fclient%2Fapp-next-turbopack.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fapp-next-turbopack.ts?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -13,11 +13,16 @@ appBootstrap((assetPrefix) => {\n     hydrate(instrumentationHooks, assetPrefix)\n   } finally {\n     if (process.env.NODE_ENV !== 'production') {\n+      const enableCacheIndicator = process.env.__NEXT_CACHE_COMPONENTS\n       const { getOwnerStack } =\n         require('../next-devtools/userspace/app/errors/stitched-error') as typeof import('../next-devtools/userspace/app/errors/stitched-error')\n       const { renderAppDevOverlay } =\n         require('next/dist/compiled/next-devtools') as typeof import('next/dist/compiled/next-devtools')\n-      renderAppDevOverlay(getOwnerStack, isRecoverableError)\n+      renderAppDevOverlay(\n+        getOwnerStack,\n+        isRecoverableError,\n+        enableCacheIndicator\n+      )\n     }\n   }\n })"
        },
        {
            "sha": "7952ad1e7ade64239baa9afea5636ce36d0c7af2",
            "filename": "packages/next/src/client/dev/hot-reloader/app/hot-reloader-app.tsx",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fapp%2Fhot-reloader-app.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fapp%2Fhot-reloader-app.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fapp%2Fhot-reloader-app.tsx?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -500,6 +500,10 @@ export function processMessage(\n       sendMessage(JSON.stringify(response))\n       return\n     }\n+    case HMR_MESSAGE_SENT_TO_BROWSER.CACHE_INDICATOR: {\n+      dispatcher.onCacheIndicator(message.state)\n+      return\n+    }\n     case HMR_MESSAGE_SENT_TO_BROWSER.MIDDLEWARE_CHANGES:\n     case HMR_MESSAGE_SENT_TO_BROWSER.CLIENT_CHANGES:\n     case HMR_MESSAGE_SENT_TO_BROWSER.SERVER_ONLY_CHANGES:"
        },
        {
            "sha": "4352d1b0857ef6c55579309dfbc223b58734b95d",
            "filename": "packages/next/src/client/dev/hot-reloader/pages/hot-reloader-pages.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fpages%2Fhot-reloader-pages.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fpages%2Fhot-reloader-pages.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fpages%2Fhot-reloader-pages.ts?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -392,6 +392,7 @@ function processMessage(message: HmrMessageSentToBrowser) {\n     case HMR_MESSAGE_SENT_TO_BROWSER.DEVTOOLS_CONFIG:\n       dispatcher.onDevToolsConfig(message.data)\n       break\n+    case HMR_MESSAGE_SENT_TO_BROWSER.CACHE_INDICATOR:\n     case HMR_MESSAGE_SENT_TO_BROWSER.REACT_DEBUG_CHUNK:\n       // Only relevant for app router.\n       break"
        },
        {
            "sha": "1f19fb42062ad4a9d17a51a9cb1e4c0c35d2085d",
            "filename": "packages/next/src/client/page-bootstrap.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fclient%2Fpage-bootstrap.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fclient%2Fpage-bootstrap.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fpage-bootstrap.ts?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -123,6 +123,7 @@ export function pageBootstrap(assetPrefix: string) {\n         case HMR_MESSAGE_SENT_TO_BROWSER.REACT_DEBUG_CHUNK:\n         case HMR_MESSAGE_SENT_TO_BROWSER.REQUEST_CURRENT_ERROR_STATE:\n         case HMR_MESSAGE_SENT_TO_BROWSER.REQUEST_PAGE_METADATA:\n+        case HMR_MESSAGE_SENT_TO_BROWSER.CACHE_INDICATOR:\n           // Most of these action types are handled in\n           // src/client/dev/hot-reloader/pages/hot-reloader-pages.ts and\n           // src/client/dev/hot-reloader/app/hot-reloader-app.tsx"
        },
        {
            "sha": "6e6ee662a6cda4ca6f083c03e75b1d5e9908b615",
            "filename": "packages/next/src/next-devtools/dev-overlay.browser.tsx",
            "status": "modified",
            "additions": 17,
            "deletions": 2,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay.browser.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay.browser.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay.browser.tsx?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -21,6 +21,7 @@ import {\n   ACTION_DEVTOOLS_CONFIG,\n   type OverlayState,\n   type DispatcherEvent,\n+  ACTION_CACHE_INDICATOR,\n } from './dev-overlay/shared'\n \n import {\n@@ -33,6 +34,7 @@ import {\n   type ActionDispatch,\n } from 'react'\n import { createRoot } from 'react-dom/client'\n+import type { CacheIndicatorState } from './dev-overlay/cache-indicator'\n import { FontStyles } from './dev-overlay/font/font-styles'\n import type { HydrationErrorState } from './shared/hydration-error'\n import type { DebugInfo } from './shared/types'\n@@ -55,6 +57,7 @@ export interface Dispatcher {\n   onDebugInfo(debugInfo: DebugInfo): void\n   onBeforeRefresh(): void\n   onRefresh(): void\n+  onCacheIndicator(status: CacheIndicatorState): void\n   onStaticIndicator(status: 'pending' | 'static' | 'dynamic' | 'disabled'): void\n   onDevIndicator(devIndicator: DevIndicatorServerState): void\n   onDevToolsConfig(config: DevToolsConfig): void\n@@ -147,6 +150,11 @@ export const dispatcher: Dispatcher = {\n       dispatch({ type: ACTION_VERSION_INFO, versionInfo })\n     }\n   ),\n+  onCacheIndicator: createQueuable(\n+    (dispatch: Dispatch, status: CacheIndicatorState) => {\n+      dispatch({ type: ACTION_CACHE_INDICATOR, cacheIndicator: status })\n+    }\n+  ),\n   onStaticIndicator: createQueuable(\n     (\n       dispatch: Dispatch,\n@@ -230,12 +238,14 @@ function replayQueuedEvents(dispatch: NonNullable<typeof maybeDispatch>) {\n }\n \n function DevOverlayRoot({\n+  enableCacheIndicator,\n   getOwnerStack,\n   getSquashedHydrationErrorDetails,\n   isRecoverableError,\n   routerType,\n   shadowRoot,\n }: {\n+  enableCacheIndicator: boolean\n   getOwnerStack: (error: Error) => string | null | undefined\n   getSquashedHydrationErrorDetails: (error: Error) => HydrationErrorState | null\n   isRecoverableError: (error: Error) => boolean\n@@ -245,7 +255,8 @@ function DevOverlayRoot({\n   const [state, dispatch] = useErrorOverlayReducer(\n     routerType,\n     getOwnerStack,\n-    isRecoverableError\n+    isRecoverableError,\n+    enableCacheIndicator\n   )\n \n   useEffect(() => {\n@@ -319,7 +330,8 @@ function getSquashedHydrationErrorDetailsApp() {\n \n export function renderAppDevOverlay(\n   getOwnerStack: (error: Error) => string | null | undefined,\n-  isRecoverableError: (error: Error) => boolean\n+  isRecoverableError: (error: Error) => boolean,\n+  enableCacheIndicator: boolean\n ): void {\n   if (isPagesMounted) {\n     // Switching between App and Pages Router is always a hard navigation\n@@ -361,6 +373,7 @@ export function renderAppDevOverlay(\n       // At least it won't unmount any user code if it errors.\n       root.render(\n         <DevOverlayRoot\n+          enableCacheIndicator={enableCacheIndicator}\n           getOwnerStack={getOwnerStack}\n           getSquashedHydrationErrorDetails={getSquashedHydrationErrorDetailsApp}\n           isRecoverableError={isRecoverableError}\n@@ -426,6 +439,8 @@ export function renderPagesDevOverlay(\n       // At least it won't unmount any user code if it errors.\n       root.render(\n         <DevOverlayRoot\n+          // Pages Router does not support Cache Components\n+          enableCacheIndicator={false}\n           getOwnerStack={getOwnerStack}\n           getSquashedHydrationErrorDetails={getSquashedHydrationErrorDetails}\n           isRecoverableError={isRecoverableError}"
        },
        {
            "sha": "f3ee5548029a243ddd6fd0db13bf678dbe1df118",
            "filename": "packages/next/src/next-devtools/dev-overlay/cache-indicator.tsx",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcache-indicator.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcache-indicator.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcache-indicator.tsx?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -0,0 +1,2 @@\n+export type ServerCacheStatus = 'filling' | 'filled'\n+export type CacheIndicatorState = 'disabled' | 'ready' | ServerCacheStatus"
        },
        {
            "sha": "7f60165b5ff3fefb75cc59e78adb6215fa3bafa1",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-indicator/devtools-indicator.tsx",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fdevtools-indicator.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fdevtools-indicator.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fdevtools-indicator.tsx?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -31,6 +31,10 @@ export function DevToolsIndicator() {\n     <Toast\n       id=\"devtools-indicator\"\n       data-nextjs-toast\n+      // TODO: Remove once we have actual UI for this.\n+      data-nextjs-cache-indicator={\n+        state.cacheIndicator === 'disabled' ? undefined : state.cacheIndicator\n+      }\n       style={\n         {\n           '--animate-out-duration-ms': `${MENU_DURATION_MS}ms`,"
        },
        {
            "sha": "65256de48d881dfadb88b4ef7bd577411337335f",
            "filename": "packages/next/src/next-devtools/dev-overlay/shared.ts",
            "status": "modified",
            "additions": 19,
            "deletions": 3,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fshared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fshared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fshared.ts?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -6,6 +6,7 @@ import type { DebugInfo } from '../shared/types'\n import type { DevIndicatorServerState } from '../../server/dev/dev-indicator-server-state'\n import { parseStack } from '../../server/lib/parse-stack'\n import { isConsoleError } from '../shared/console-error'\n+import type { CacheIndicatorState } from './cache-indicator'\n \n export type DevToolsConfig = {\n   theme?: 'light' | 'dark' | 'system'\n@@ -49,6 +50,7 @@ export interface OverlayState {\n   readonly notFound: boolean\n   readonly buildingIndicator: boolean\n   readonly renderingIndicator: boolean\n+  readonly cacheIndicator: CacheIndicatorState\n   readonly staticIndicator: 'pending' | 'static' | 'dynamic' | 'disabled'\n   readonly showIndicator: boolean\n   readonly disableDevIndicator: boolean\n@@ -72,6 +74,7 @@ export interface OverlayState {\n type DevtoolsPanelName = string\n export type OverlayDispatch = React.Dispatch<DispatcherEvent>\n \n+export const ACTION_CACHE_INDICATOR = 'cache-indicator'\n export const ACTION_STATIC_INDICATOR = 'static-indicator'\n export const ACTION_BUILD_OK = 'build-ok'\n export const ACTION_BUILD_ERROR = 'build-error'\n@@ -110,6 +113,11 @@ export const STORE_KEY_SHARED_PANEL_LOCATION =\n export const ACTION_DEVTOOL_UPDATE_ROUTE_STATE =\n   'segment-explorer-update-route-state'\n \n+interface CacheIndicatorAction {\n+  type: typeof ACTION_CACHE_INDICATOR\n+  cacheIndicator: CacheIndicatorState\n+}\n+\n interface StaticIndicatorAction {\n   type: typeof ACTION_STATIC_INDICATOR\n   staticIndicator: 'pending' | 'static' | 'dynamic' | 'disabled'\n@@ -216,6 +224,7 @@ export type DispatcherEvent =\n   | UnhandledErrorAction\n   | UnhandledRejectionAction\n   | VersionInfoAction\n+  | CacheIndicatorAction\n   | StaticIndicatorAction\n   | DebugInfoAction\n   | DevIndicatorAction\n@@ -263,6 +272,7 @@ export const INITIAL_OVERLAY_STATE: Omit<\n   errors: [],\n   notFound: false,\n   renderingIndicator: false,\n+  cacheIndicator: 'disabled',\n   staticIndicator: 'disabled',\n   /* \n     This is set to `true` when we can reliably know\n@@ -287,7 +297,8 @@ export const INITIAL_OVERLAY_STATE: Omit<\n }\n \n function getInitialState(\n-  routerType: 'pages' | 'app'\n+  routerType: 'pages' | 'app',\n+  enableCacheIndicator: boolean\n ): OverlayState & { routerType: 'pages' | 'app' } {\n   return {\n     ...INITIAL_OVERLAY_STATE,\n@@ -296,13 +307,15 @@ function getInitialState(\n     // TODO: Should be the same default as App Router once we surface console.error in Pages Router.\n     isErrorOverlayOpen: routerType === 'pages',\n     routerType,\n+    cacheIndicator: enableCacheIndicator ? 'ready' : 'disabled',\n   }\n }\n \n export function useErrorOverlayReducer(\n   routerType: 'pages' | 'app',\n   getOwnerStack: (error: Error) => string | null | undefined,\n-  isRecoverableError: (error: Error) => boolean\n+  isRecoverableError: (error: Error) => boolean,\n+  enableCacheIndicator: boolean\n ) {\n   function pushErrorFilterDuplicates(\n     events: readonly SupportedErrorEvent[],\n@@ -349,6 +362,9 @@ export function useErrorOverlayReducer(\n         case ACTION_DEBUG_INFO: {\n           return { ...state, debugInfo: action.debugInfo }\n         }\n+        case ACTION_CACHE_INDICATOR: {\n+          return { ...state, cacheIndicator: action.cacheIndicator }\n+        }\n         case ACTION_STATIC_INDICATOR: {\n           return { ...state, staticIndicator: action.staticIndicator }\n         }\n@@ -496,6 +512,6 @@ export function useErrorOverlayReducer(\n         }\n       }\n     },\n-    getInitialState(routerType)\n+    getInitialState(routerType, enableCacheIndicator)\n   )\n }"
        },
        {
            "sha": "d8f0201cda36769b6c4b7297debcc10cc41d403d",
            "filename": "packages/next/src/next-devtools/dev-overlay/storybook/use-overlay-reducer.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstorybook%2Fuse-overlay-reducer.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstorybook%2Fuse-overlay-reducer.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstorybook%2Fuse-overlay-reducer.ts?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -7,6 +7,7 @@ import {\n   ACTION_BUILD_OK,\n   ACTION_BUILDING_INDICATOR_HIDE,\n   ACTION_BUILDING_INDICATOR_SHOW,\n+  ACTION_CACHE_INDICATOR,\n   ACTION_DEBUG_INFO,\n   ACTION_DEV_INDICATOR,\n   ACTION_DEV_INDICATOR_SET,\n@@ -81,6 +82,7 @@ export function useStorybookOverlayReducer(initialState?: OverlayState) {\n         case ACTION_REFRESH:\n         case ACTION_RENDERING_INDICATOR_HIDE:\n         case ACTION_RENDERING_INDICATOR_SHOW:\n+        case ACTION_CACHE_INDICATOR:\n         case ACTION_STATIC_INDICATOR:\n         case ACTION_UNHANDLED_ERROR:\n         case ACTION_UNHANDLED_REJECTION:"
        },
        {
            "sha": "4b8474f8529494f79827a0a2df96cfa19040134f",
            "filename": "packages/next/src/server/app-render/app-render.tsx",
            "status": "modified",
            "additions": 17,
            "deletions": 3,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -2768,9 +2768,13 @@ async function renderWithRestartOnCacheMissInDev(\n   getPayload: (requestStore: RequestStore) => Promise<RSCPayload>,\n   onError: (error: unknown) => void\n ) {\n-  const { renderOpts } = ctx\n-  const { clientReferenceManifest, ComponentMod, setReactDebugChannel } =\n-    renderOpts\n+  const { htmlRequestId, renderOpts, requestId } = ctx\n+  const {\n+    clientReferenceManifest,\n+    ComponentMod,\n+    setCacheStatus,\n+    setReactDebugChannel,\n+  } = renderOpts\n   assertClientReferenceManifest(clientReferenceManifest)\n \n   // If the render is restarted, we'll recreate a fresh request store\n@@ -2898,6 +2902,10 @@ async function renderWithRestartOnCacheMissInDev(\n     }\n   }\n \n+  if (process.env.NODE_ENV === 'development') {\n+    setCacheStatus!('filling', htmlRequestId, requestId)\n+  }\n+\n   // Cache miss. We will use the initial render to fill caches, and discard its result.\n   // Then, we can render again with warm caches.\n \n@@ -2967,6 +2975,12 @@ async function renderWithRestartOnCacheMissInDev(\n     )\n   )\n \n+  if (process.env.NODE_ENV === 'development') {\n+    // TODO: Don't know if this is the right time.\n+    // It's not wired up on the frontend though.\n+    setCacheStatus!('filled', htmlRequestId, requestId)\n+  }\n+\n   return {\n     stream: finalServerStream,\n     debugChannel,"
        },
        {
            "sha": "060c1094ae29d267d8f2afb747f47d89b17d04f4",
            "filename": "packages/next/src/server/app-render/types.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Ftypes.ts?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -19,6 +19,7 @@ import type { NextRequestHint } from '../web/adapter'\n import type { BaseNextRequest } from '../base-http'\n import type { IncomingMessage } from 'http'\n import type { RenderResumeDataCache } from '../resume-data-cache/resume-data-cache'\n+import type { ServerCacheStatus } from '../../next-devtools/dev-overlay/cache-indicator'\n \n const dynamicParamTypesSchema = s.enums(['c', 'ci', 'oc', 'd', 'di'])\n \n@@ -96,6 +97,11 @@ export interface RenderOptsPartial {\n   }\n   isOnDemandRevalidate?: boolean\n   isPossibleServerAction?: boolean\n+  setCacheStatus?: (\n+    status: ServerCacheStatus,\n+    htmlRequestId: string,\n+    requestId: string\n+  ) => void\n   setIsrStatus?: (key: string, value: boolean | undefined) => void\n   setReactDebugChannel?: (\n     debugChannel: { readable: ReadableStream<Uint8Array> },"
        },
        {
            "sha": "b59cdeb82e7e0f90ea11838245a09026e3a2b127",
            "filename": "packages/next/src/server/dev/hot-reloader-turbopack.ts",
            "status": "modified",
            "additions": 35,
            "deletions": 3,
            "changes": 38,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-turbopack.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-turbopack.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-turbopack.ts?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -120,6 +120,7 @@ import { handleErrorStateResponse } from '../mcp/tools/get-errors'\n import { handlePageMetadataResponse } from '../mcp/tools/get-page-metadata'\n import { setStackFrameResolver } from '../mcp/tools/utils/format-errors'\n import { getFileLogger } from './browser-logs/file-logger'\n+import type { ServerCacheStatus } from '../../next-devtools/dev-overlay/cache-indicator'\n \n const wsServer = new ws.Server({ noServer: true })\n const isTestMode = !!(\n@@ -435,6 +436,7 @@ export async function createHotReloaderTurbopack(\n \n   const clientsWithoutRequestId = new Set<ws>()\n   const clientsByRequestId = new Map<string, ws>()\n+  const cacheStatusesByRequestId = new Map<string, ServerCacheStatus>()\n   const clientStates = new WeakMap<ws, ClientState>()\n \n   function sendToClient(client: ws, message: HmrMessageSentToBrowser) {\n@@ -880,9 +882,20 @@ export async function createHotReloaderTurbopack(\n         // inferring it from the presence of a request ID.\n         if (requestId) {\n           clientsByRequestId.set(requestId, client)\n-          onUpgrade(client, {\n-            isLegacyClient: !nextConfig.cacheComponents,\n-          })\n+          const enableCacheComponents = nextConfig.cacheComponents\n+          if (enableCacheComponents) {\n+            onUpgrade(client, { isLegacyClient: false })\n+            const cacheStatus = cacheStatusesByRequestId.get(requestId)\n+            if (cacheStatus !== undefined) {\n+              sendToClient(client, {\n+                type: HMR_MESSAGE_SENT_TO_BROWSER.CACHE_INDICATOR,\n+                state: cacheStatus,\n+              })\n+              cacheStatusesByRequestId.delete(requestId)\n+            }\n+          } else {\n+            onUpgrade(client, { isLegacyClient: true })\n+          }\n         } else {\n           clientsWithoutRequestId.add(client)\n           onUpgrade(client, { isLegacyClient: true })\n@@ -1113,6 +1126,25 @@ export async function createHotReloaderTurbopack(\n       }\n     },\n \n+    setCacheStatus(\n+      status: ServerCacheStatus,\n+      htmlRequestId: string,\n+      requestId: string\n+    ): void {\n+      // Legacy clients don't have Cache Components.\n+      const client = clientsByRequestId.get(htmlRequestId)\n+      if (client !== undefined) {\n+        sendToClient(client, {\n+          type: HMR_MESSAGE_SENT_TO_BROWSER.CACHE_INDICATOR,\n+          state: status,\n+        })\n+      } else {\n+        // If the client is not connected, store the status so that we can send it\n+        // when the client connects.\n+        cacheStatusesByRequestId.set(requestId, status)\n+      }\n+    },\n+\n     setReactDebugChannel(debugChannel, htmlRequestId, requestId) {\n       // Store the debug channel, regardless of whether the client is connected.\n       setReactDebugChannel(requestId, debugChannel)"
        },
        {
            "sha": "d24fa646c98274f835e0bd71e308f8bed4c6b6ec",
            "filename": "packages/next/src/server/dev/hot-reloader-types.ts",
            "status": "modified",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-types.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-types.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-types.ts?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -8,6 +8,10 @@ import type { Project, Update as TurbopackUpdate } from '../../build/swc/types'\n import type { VersionInfo } from './parse-version-info'\n import type { DebugInfo } from '../../next-devtools/shared/types'\n import type { DevIndicatorServerState } from './dev-indicator-server-state'\n+import type {\n+  CacheIndicatorState,\n+  ServerCacheStatus,\n+} from '../../next-devtools/dev-overlay/cache-indicator'\n import type { DevToolsConfig } from '../../next-devtools/dev-overlay/shared'\n import type { ReactDebugChannelForBrowser } from './debug-channel'\n \n@@ -28,6 +32,7 @@ export const enum HMR_MESSAGE_SENT_TO_BROWSER {\n   SERVER_ERROR = 'serverError',\n   TURBOPACK_CONNECTED = 'turbopack-connected',\n   ISR_MANIFEST = 'isrManifest',\n+  CACHE_INDICATOR = 'cacheIndicator',\n   DEV_INDICATOR = 'devIndicator',\n   DEVTOOLS_CONFIG = 'devtoolsConfig',\n   REQUEST_CURRENT_ERROR_STATE = 'requestCurrentErrorState',\n@@ -162,6 +167,11 @@ export interface RequestPageMetadataMessage {\n   requestId: string\n }\n \n+export interface CacheIndicatorMessage {\n+  type: HMR_MESSAGE_SENT_TO_BROWSER.CACHE_INDICATOR\n+  state: CacheIndicatorState\n+}\n+\n export type HmrMessageSentToBrowser =\n   | TurbopackMessage\n   | TurbopackConnectedMessage\n@@ -182,6 +192,7 @@ export type HmrMessageSentToBrowser =\n   | ReactDebugChunkMessage\n   | RequestCurrentErrorStateMessage\n   | RequestPageMetadataMessage\n+  | CacheIndicatorMessage\n \n export type BinaryHmrMessageSentToBrowser = Extract<\n   HmrMessageSentToBrowser,\n@@ -218,6 +229,11 @@ export interface NextJsHotReloaderInterface {\n    * and App Router clients that don't have Cache Components enabled.\n    */\n   sendToLegacyClients(action: HmrMessageSentToBrowser): void\n+  setCacheStatus(\n+    status: ServerCacheStatus,\n+    htmlRequestId: string,\n+    requestId: string\n+  ): void\n   setReactDebugChannel(\n     debugChannel: ReactDebugChannelForBrowser,\n     htmlRequestId: string,"
        },
        {
            "sha": "adade3442fb541d9c92d390e7261deefe6c5667c",
            "filename": "packages/next/src/server/dev/hot-reloader-webpack.ts",
            "status": "modified",
            "additions": 32,
            "deletions": 1,
            "changes": 33,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-webpack.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-webpack.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-webpack.ts?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -110,6 +110,7 @@ import {\n import { getMcpMiddleware } from '../mcp/get-mcp-middleware'\n import { setStackFrameResolver } from '../mcp/tools/utils/format-errors'\n import { getFileLogger } from './browser-logs/file-logger'\n+import type { ServerCacheStatus } from '../../next-devtools/dev-overlay/cache-indicator'\n \n const MILLISECONDS_IN_NANOSECOND = BigInt(1_000_000)\n \n@@ -252,6 +253,7 @@ export default class HotReloaderWebpack implements NextJsHotReloaderInterface {\n   private devtoolsFrontendUrl: string | undefined\n   private reloadAfterInvalidation: boolean = false\n   private isSrcDir: boolean\n+  private cacheStatusesByRequestId = new Map<string, ServerCacheStatus>()\n \n   public serverStats: webpack.Stats | null\n   public edgeServerStats: webpack.Stats | null\n@@ -441,12 +443,13 @@ export default class HotReloaderWebpack implements NextJsHotReloaderInterface {\n       this.webpackHotMiddleware.onHMR(client, requestId)\n       this.onDemandEntries?.onHMR(client, () => this.hmrServerError)\n \n+      const enableCacheComponents = this.config.cacheComponents\n       // Clients with a request ID are inferred App Router clients. If Cache\n       // Components is not enabled, we consider those legacy clients. Pages\n       // Router clients are also considered legacy clients. TODO: Maybe mark\n       // clients as App Router / Pages Router clients explicitly, instead of\n       // inferring it from the presence of a request ID.\n-      const isLegacyClient = !requestId || !this.config.cacheComponents\n+      const isLegacyClient = !requestId || !enableCacheComponents\n \n       callback(client, { isLegacyClient })\n \n@@ -629,6 +632,16 @@ export default class HotReloaderWebpack implements NextJsHotReloaderInterface {\n           requestId,\n           this.sendToClient.bind(this, client)\n         )\n+        if (enableCacheComponents) {\n+          const status = this.cacheStatusesByRequestId.get(requestId)\n+          if (status) {\n+            this.sendToClient(client, {\n+              type: HMR_MESSAGE_SENT_TO_BROWSER.CACHE_INDICATOR,\n+              state: status,\n+            })\n+            this.cacheStatusesByRequestId.delete(requestId)\n+          }\n+        }\n       }\n \n       client.on('close', () => {\n@@ -1720,6 +1733,24 @@ export default class HotReloaderWebpack implements NextJsHotReloaderInterface {\n     this.webpackHotMiddleware!.publishToLegacyClients(message)\n   }\n \n+  public setCacheStatus(\n+    status: ServerCacheStatus,\n+    htmlRequestId: string,\n+    requestId: string\n+  ): void {\n+    const client = this.webpackHotMiddleware?.getClient(htmlRequestId)\n+    if (client !== undefined) {\n+      this.sendToClient(client, {\n+        type: HMR_MESSAGE_SENT_TO_BROWSER.CACHE_INDICATOR,\n+        state: status,\n+      })\n+    } else {\n+      // If the client is not connected, store the status so that we can send it\n+      // when the client connects.\n+      this.cacheStatusesByRequestId.set(requestId, status)\n+    }\n+  }\n+\n   public setReactDebugChannel(\n     debugChannel: ReactDebugChannelForBrowser,\n     htmlRequestId: string,"
        },
        {
            "sha": "0b8f53c2a1e18dee7301565196fc1b1cf1241d82",
            "filename": "packages/next/src/server/lib/dev-bundler-service.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Fdev-bundler-service.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Fdev-bundler-service.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Fdev-bundler-service.ts?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -6,6 +6,7 @@ import { LRUCache } from './lru-cache'\n import { createRequestResponseMocks } from './mock-request'\n import { HMR_MESSAGE_SENT_TO_BROWSER } from '../dev/hot-reloader-types'\n import type { ReactDebugChannelForBrowser } from '../dev/debug-channel'\n+import type { ServerCacheStatus } from '../../next-devtools/dev-overlay/cache-indicator'\n \n /**\n  * The DevBundlerService provides an interface to perform tasks with the\n@@ -95,6 +96,14 @@ export class DevBundlerService {\n     return serializableManifest\n   }\n \n+  public setCacheStatus(\n+    status: ServerCacheStatus,\n+    htmlRequestId: string,\n+    requestId: string\n+  ): void {\n+    this.bundler.hotReloader.setCacheStatus(status, htmlRequestId, requestId)\n+  }\n+\n   public setIsrStatus(key: string, value: boolean | undefined) {\n     if (value === undefined) {\n       this.appIsrManifestInner.remove(key)"
        },
        {
            "sha": "7c2360520f638e326dd3975b23aac89f783f7106",
            "filename": "packages/next/src/server/lib/router-server.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-server.ts?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -722,6 +722,9 @@ export async function initialize(opts: {\n     logErrorWithOriginalStack: opts.dev\n       ? handlers.server.logErrorWithOriginalStack.bind(handlers.server)\n       : (err: unknown) => !opts.quiet && Log.error(err),\n+    setCacheStatus: config.cacheComponents\n+      ? devBundlerService?.setCacheStatus.bind(devBundlerService)\n+      : undefined,\n     setIsrStatus: devBundlerService?.setIsrStatus.bind(devBundlerService),\n     setReactDebugChannel: config.experimental.reactDebugChannel\n       ? devBundlerService?.setReactDebugChannel.bind(devBundlerService)"
        },
        {
            "sha": "6d321aac8ad5334b3863c54a0d54ef2abe4ca9dd",
            "filename": "packages/next/src/server/lib/router-utils/router-server-context.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Frouter-server-context.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Frouter-server-context.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Frouter-server-context.ts?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -1,6 +1,7 @@\n import type { IncomingMessage, ServerResponse } from 'node:http'\n import type { NextConfigComplete } from '../../config-shared'\n import type { UrlWithParsedQuery } from 'node:url'\n+import type { ServerCacheStatus } from '../../../next-devtools/dev-overlay/cache-indicator'\n \n export type RevalidateFn = (config: {\n   urlPath: string\n@@ -43,6 +44,11 @@ export type RouterServerContext = Record<\n       htmlRequestId: string,\n       requestId: string\n     ) => void\n+    setCacheStatus?: (\n+      status: ServerCacheStatus,\n+      htmlRequestId: string,\n+      requestId: string\n+    ) => void\n   }\n >\n "
        },
        {
            "sha": "9d7705fc033c105672800f9af4605981599f0d8a",
            "filename": "test/development/app-dir/cache-indicator/app/layout.tsx",
            "status": "added",
            "additions": 15,
            "deletions": 0,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/test%2Fdevelopment%2Fapp-dir%2Fcache-indicator%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/test%2Fdevelopment%2Fapp-dir%2Fcache-indicator%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcache-indicator%2Fapp%2Flayout.tsx?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -0,0 +1,15 @@\n+import Link from 'next/link'\n+import { ReactNode } from 'react'\n+export default function Root({ children }: { children: ReactNode }) {\n+  return (\n+    <html>\n+      <body>\n+        <nav>\n+          <Link href=\"/\">/index</Link> |{' '}\n+          <Link href=\"/navigation\">/navigation</Link>\n+        </nav>\n+        {children}\n+      </body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "27bce2fc19f6a7814cfb586b9f2ddeb3f62a419e",
            "filename": "test/development/app-dir/cache-indicator/app/navigation/page.tsx",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/test%2Fdevelopment%2Fapp-dir%2Fcache-indicator%2Fapp%2Fnavigation%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/test%2Fdevelopment%2Fapp-dir%2Fcache-indicator%2Fapp%2Fnavigation%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcache-indicator%2Fapp%2Fnavigation%2Fpage.tsx?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -0,0 +1,11 @@\n+import { setTimeout } from 'timers/promises'\n+\n+async function triggerSlowCacheFilling() {\n+  'use cache'\n+  await setTimeout(1000)\n+}\n+\n+export default async function NavigationPage() {\n+  await triggerSlowCacheFilling()\n+  return <p>Hello, navigation!</p>\n+}"
        },
        {
            "sha": "841e4e11ae10fd4e71c0835ed0db591c7a5c70bc",
            "filename": "test/development/app-dir/cache-indicator/app/page.tsx",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/test%2Fdevelopment%2Fapp-dir%2Fcache-indicator%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/test%2Fdevelopment%2Fapp-dir%2Fcache-indicator%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcache-indicator%2Fapp%2Fpage.tsx?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -0,0 +1,11 @@\n+import { setTimeout } from 'timers/promises'\n+\n+async function triggerSlowCacheFilling() {\n+  'use cache'\n+  await setTimeout(1000)\n+}\n+\n+export default async function Page() {\n+  await triggerSlowCacheFilling()\n+  return <p>Hello, initial load!</p>\n+}"
        },
        {
            "sha": "63338144b27527e3b932037b5a18d3e6264f412d",
            "filename": "test/development/app-dir/cache-indicator/cache-indicator.test.ts",
            "status": "added",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/test%2Fdevelopment%2Fapp-dir%2Fcache-indicator%2Fcache-indicator.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/test%2Fdevelopment%2Fapp-dir%2Fcache-indicator%2Fcache-indicator.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcache-indicator%2Fcache-indicator.test.ts?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -0,0 +1,19 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+const enableCacheComponents = process.env.__NEXT_CACHE_COMPONENTS === 'true'\n+\n+describe('cache-indicator', () => {\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('is filled on initial load', async () => {\n+    const browser = await next.browser('/')\n+\n+    const toast = await browser.elementByCss('[data-nextjs-toast]')\n+\n+    expect(await toast.getAttribute('data-nextjs-cache-indicator')).toEqual(\n+      enableCacheComponents ? 'filled' : null\n+    )\n+  })\n+})"
        },
        {
            "sha": "807126e4cf0bf5b1c8c917e6e0148a27331587d1",
            "filename": "test/development/app-dir/cache-indicator/next.config.js",
            "status": "added",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/test%2Fdevelopment%2Fapp-dir%2Fcache-indicator%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/f8f24aa47924ca8c9ce2094cde3014c50fe85ac7/test%2Fdevelopment%2Fapp-dir%2Fcache-indicator%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fcache-indicator%2Fnext.config.js?ref=f8f24aa47924ca8c9ce2094cde3014c50fe85ac7",
            "patch": "@@ -0,0 +1,6 @@\n+/**\n+ * @type {import('next').NextConfig}\n+ */\n+const nextConfig = {}\n+\n+module.exports = nextConfig"
        }
    ],
    "stats": {
        "total": 259,
        "additions": 245,
        "deletions": 14
    }
}