{
    "author": "mischnic",
    "message": "Turbopack: fix sourcemaps of scopehoisted comments (#80987)\n\nThere was a bug in the source mappings for scope hoisted comments. They actually contained invalid mappings, which was only caught by the invalid mapping landing exactly on an invalid multibyte character boundary, which triggered a debug assertion:\r\n![Bildschirmfoto 2025-06-27 um 10 01 15](https://github.com/user-attachments/assets/90cd7771-72c2-41ea-bc54-05b3be5f17f7)\r\n\r\nWhat's happening is:\r\n1. You do `comments.add_leading` with a `Comment` containing the real span\r\n2. Traverse the AST and encode all bytepos in the soans\r\n3. codegen, the bytepos in the AST are encoded, but the ones in the comments (Comment.span) are not (i.e. via `comments.take_leading`\r\n\r\nNow, they are all consistently encoded and correctly mapped:\r\n![Bildschirmfoto 2025-06-27 um 10 02 47](https://github.com/user-attachments/assets/90b4bb58-e946-4781-b498-d88668193107)",
    "sha": "c1f4e3e759ed6eb5f27a028fc547f513a7386d92",
    "files": [
        {
            "sha": "c584136a7d66db7d3c15b44e7ce4c44ac5fe05c3",
            "filename": "turbopack/crates/turbopack-ecmascript/src/lib.rs",
            "status": "modified",
            "additions": 39,
            "deletions": 4,
            "changes": 43,
            "blob_url": "https://github.com/vercel/next.js/blob/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Flib.rs?ref=c1f4e3e759ed6eb5f27a028fc547f513a7386d92",
            "patch": "@@ -2416,6 +2416,21 @@ enum CodeGenResultCommentsConsumable<'a> {\n unsafe impl Send for CodeGenResultComments {}\n unsafe impl Sync for CodeGenResultComments {}\n \n+/// All BytePos in Spans in the AST are encoded correctly in [`merge_modules`], but the Comments\n+/// also contain spans. These also need to be encoded so that all pos in `mappings` are consistently\n+/// encoded.\n+fn encode_module_into_comment_span(\n+    modules_header_width: u32,\n+    module: usize,\n+    mut comment: Comment,\n+) -> Comment {\n+    comment.span.lo =\n+        CodeGenResultComments::encode_bytepos(modules_header_width, module as u32, comment.span.lo);\n+    comment.span.hi =\n+        CodeGenResultComments::encode_bytepos(modules_header_width, module as u32, comment.span.hi);\n+    comment\n+}\n+\n impl Comments for CodeGenResultCommentsConsumable<'_> {\n     fn add_leading(&self, _pos: BytePos, _cmt: Comment) {\n         unimplemented!()\n@@ -2459,7 +2474,12 @@ impl Comments for CodeGenResultCommentsConsumable<'_> {\n             } => {\n                 let (module, pos) =\n                     CodeGenResultComments::decode_bytepos(*modules_header_width, pos);\n-                comments[module].take_leading(pos)\n+                comments[module].take_leading(pos).map(|comments| {\n+                    comments\n+                        .into_iter()\n+                        .map(|c| encode_module_into_comment_span(*modules_header_width, module, c))\n+                        .collect()\n+                })\n             }\n             Self::Empty => None,\n         }\n@@ -2477,7 +2497,12 @@ impl Comments for CodeGenResultCommentsConsumable<'_> {\n             } => {\n                 let (module, pos) =\n                     CodeGenResultComments::decode_bytepos(*modules_header_width, pos);\n-                comments[module].get_leading(pos)\n+                comments[module].get_leading(pos).map(|comments| {\n+                    comments\n+                        .into_iter()\n+                        .map(|c| encode_module_into_comment_span(*modules_header_width, module, c))\n+                        .collect()\n+                })\n             }\n             Self::Empty => None,\n         }\n@@ -2528,7 +2553,12 @@ impl Comments for CodeGenResultCommentsConsumable<'_> {\n             } => {\n                 let (module, pos) =\n                     CodeGenResultComments::decode_bytepos(*modules_header_width, pos);\n-                comments[module].take_trailing(pos)\n+                comments[module].take_trailing(pos).map(|comments| {\n+                    comments\n+                        .into_iter()\n+                        .map(|c| encode_module_into_comment_span(*modules_header_width, module, c))\n+                        .collect()\n+                })\n             }\n             Self::Empty => None,\n         }\n@@ -2546,7 +2576,12 @@ impl Comments for CodeGenResultCommentsConsumable<'_> {\n             } => {\n                 let (module, pos) =\n                     CodeGenResultComments::decode_bytepos(*modules_header_width, pos);\n-                comments[module].get_leading(pos)\n+                comments[module].get_leading(pos).map(|comments| {\n+                    comments\n+                        .into_iter()\n+                        .map(|c| encode_module_into_comment_span(*modules_header_width, module, c))\n+                        .collect()\n+                })\n             }\n             Self::Empty => None,\n         }"
        },
        {
            "sha": "7c6be690f432633fdf60590bd1cdde23d854959f",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/collect-segment-data.js",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Fcollect-segment-data.js",
            "raw_url": "https://github.com/vercel/next.js/raw/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Fcollect-segment-data.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Fcollect-segment-data.js?ref=c1f4e3e759ed6eb5f27a028fc547f513a7386d92",
            "patch": "@@ -0,0 +1,8 @@\n+import { jsx as _jsx } from \"./jsx-runtime\";\n+// eslint-disable-next-line import/no-extraneous-dependencies\n+const createFromReadableStream = 123; //import { createFromReadableStream } from 'react-server-dom-webpack/client.edge';\n+// eslint-disable-next-line import/no-extraneous-dependencies\n+const prerender = 123; // import { unstable_prerender as prerender } from 'react-server-dom-webpack/static.edge';\n+const streamFromBuffer=1,streamToBuffer=1; // import { streamFromBuffer, streamToBuffer } from '../stream-utils/node-web-streams-helper';\n+const waitAtLeastOneReactRenderTask=1; //import { waitAtLeastOneReactRenderTask } from '../../lib/scheduler';\n+// import  './segment-value-encoding';"
        },
        {
            "sha": "e720c728f790c4a3eb0798ce8cf4432446dbbc45",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/entry-base.js",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Fentry-base.js",
            "raw_url": "https://github.com/vercel/next.js/raw/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Fentry-base.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Fentry-base.js?ref=c1f4e3e759ed6eb5f27a028fc547f513a7386d92",
            "patch": "@@ -0,0 +1,2 @@\n+import './params'\n+import './collect-segment-data'"
        },
        {
            "sha": "f9d5a205262210bd65b7a7834be9d49656c389a6",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/index.js",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Findex.js?ref=c1f4e3e759ed6eb5f27a028fc547f513a7386d92",
            "patch": "@@ -0,0 +1,21 @@\n+// \"entry-base.js [app-rsc] (ecmascript) <module evaluation>\" with\n+// [\"reflect-utils.js [app-rsc] (ecmascript)\",\n+// \"params.js [app-rsc] (ecmascript)\",\n+// \"segment-value-encoding.js [app-rsc] (ecmascript)\",\n+// \"collect-segment-data.js [app-rsc] (ecmascript)\",\n+// \"entry-base.js [app-rsc] (ecmascript) <locals>\"]\n+\n+// \"entry-base.js [test] (ecmascript) <module evaluation>\" with\n+// [\"reflect-utils.js [test] (ecmascript)\",\n+// \"params.js [test] (ecmascript)\",\n+// \"segment-value-encoding.js [test] (ecmascript)\",\n+//  \"collect-segment-data.js [test] (ecmascript)\",\n+//  \"entry-base.js [test] (ecmascript) <locals>\"]\n+\n+if (Date.now() > 0) {\n+  require('./index1.js')\n+}\n+if (Date.now() > 0) {\n+  require('./index2.js')\n+}\n+"
        },
        {
            "sha": "bc752b2c1ca4fa3ea6e3f218c5d3008710f9a214",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/index1.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Findex1.js",
            "raw_url": "https://github.com/vercel/next.js/raw/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Findex1.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Findex1.js?ref=c1f4e3e759ed6eb5f27a028fc547f513a7386d92",
            "patch": "@@ -0,0 +1 @@\n+import \"./entry-base.js\";"
        },
        {
            "sha": "bc752b2c1ca4fa3ea6e3f218c5d3008710f9a214",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/index2.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Findex2.js",
            "raw_url": "https://github.com/vercel/next.js/raw/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Findex2.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Findex2.js?ref=c1f4e3e759ed6eb5f27a028fc547f513a7386d92",
            "patch": "@@ -0,0 +1 @@\n+import \"./entry-base.js\";"
        },
        {
            "sha": "f053ebf7976e3726d11f3c03fade2170903889a5",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/jsx-runtime.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Fjsx-runtime.js",
            "raw_url": "https://github.com/vercel/next.js/raw/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Fjsx-runtime.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Fjsx-runtime.js?ref=c1f4e3e759ed6eb5f27a028fc547f513a7386d92",
            "patch": "@@ -0,0 +1 @@\n+module.exports = {};"
        },
        {
            "sha": "3b0bcba884586333376be205e534289d150ab315",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/params.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Fparams.js",
            "raw_url": "https://github.com/vercel/next.js/raw/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Fparams.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Fparams.js?ref=c1f4e3e759ed6eb5f27a028fc547f513a7386d92",
            "patch": "@@ -0,0 +1 @@\n+import './reflect-utils'"
        },
        {
            "sha": "625d855f892cc4b13279970af4ac80d1126b997d",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/reflect-utils.js",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Freflect-utils.js",
            "raw_url": "https://github.com/vercel/next.js/raw/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Freflect-utils.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Finput%2Freflect-utils.js?ref=c1f4e3e759ed6eb5f27a028fc547f513a7386d92",
            "patch": "@@ -0,0 +1,9 @@\n+// This regex will have fast negatives meaning valid identifiers may not pass\n+// this test. However this is only used during static generation to provide hints\n+// about why a page bailed out of some or all prerendering and we can use bracket notation\n+// for example while `ಠ_ಠ` is a valid identifier it's ok to print `searchParams['ಠ_ಠ']`\n+// even if this would have been fine too `searchParams.ಠ_ಠ`\n+const isDefinitelyAValidIdentifier = /s/;\n+export function describeStringPropertyAccess(target, prop) {}\n+export function describeHasCheckingStringProperty(target, prop) {}\n+export const wellKnownProperties = new Set([])"
        },
        {
            "sha": "117ffe107f02a72a649bcb8b447cbb4ae6b943a3",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/options.json",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Foptions.json",
            "raw_url": "https://github.com/vercel/next.js/raw/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Foptions.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Foptions.json?ref=c1f4e3e759ed6eb5f27a028fc547f513a7386d92",
            "patch": "@@ -0,0 +1,4 @@\n+{\n+  \"treeShakingMode\": \"reexports-only\",\n+  \"scopeHoisting\": true\n+}"
        },
        {
            "sha": "44d8a295ca6e752fdd4bcc78091a2fdef648c3cd",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/output/4e721_crates_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_795dc95a._.js",
            "status": "added",
            "additions": 82,
            "deletions": 0,
            "changes": 82,
            "blob_url": "https://github.com/vercel/next.js/blob/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_795dc95a._.js",
            "raw_url": "https://github.com/vercel/next.js/raw/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_795dc95a._.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_795dc95a._.js?ref=c1f4e3e759ed6eb5f27a028fc547f513a7386d92",
            "patch": "@@ -0,0 +1,82 @@\n+(globalThis.TURBOPACK = globalThis.TURBOPACK || []).push([\"output/4e721_crates_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_795dc95a._.js\", {\n+\n+\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/jsx-runtime.js [test] (ecmascript)\": ((__turbopack_context__) => {\n+\n+var { m: module, e: exports } = __turbopack_context__;\n+{\n+module.exports = {};\n+}}),\n+\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/entry-base.js [test] (ecmascript)\": ((__turbopack_context__) => {\n+\"use strict\";\n+\n+// MERGED MODULE: [project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/entry-base.js [test] (ecmascript)\n+;\n+__turbopack_context__.s({}, \"[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/entry-base.js [test] (ecmascript)\");\n+// MERGED MODULE: [project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/params.js [test] (ecmascript)\n+;\n+// MERGED MODULE: [project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/reflect-utils.js [test] (ecmascript)\n+;\n+// This regex will have fast negatives meaning valid identifiers may not pass\n+// this test. However this is only used during static generation to provide hints\n+// about why a page bailed out of some or all prerendering and we can use bracket notation\n+// for example while `ಠ_ಠ` is a valid identifier it's ok to print `searchParams['ಠ_ಠ']`\n+// even if this would have been fine too `searchParams.ಠ_ಠ`\n+const isDefinitelyAValidIdentifier = /s/;\n+function describeStringPropertyAccess(target, prop) {}\n+function describeHasCheckingStringProperty(target, prop) {}\n+const wellKnownProperties = new Set([]);\n+;\n+// MERGED MODULE: [project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/collect-segment-data.js [test] (ecmascript)\n+;\n+var __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$source_maps$2f$merged$2d$unicode$2f$input$2f$jsx$2d$runtime$2e$js__$5b$test$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/jsx-runtime.js [test] (ecmascript)\");\n+;\n+// eslint-disable-next-line import/no-extraneous-dependencies\n+const createFromReadableStream = 123; //import { createFromReadableStream } from 'react-server-dom-webpack/client.edge';\n+// eslint-disable-next-line import/no-extraneous-dependencies\n+const prerender = 123; // import { unstable_prerender as prerender } from 'react-server-dom-webpack/static.edge';\n+const streamFromBuffer = 1, streamToBuffer = 1; // import { streamFromBuffer, streamToBuffer } from '../stream-utils/node-web-streams-helper';\n+const waitAtLeastOneReactRenderTask = 1; //import { waitAtLeastOneReactRenderTask } from '../../lib/scheduler';\n+ // import  './segment-value-encoding';\n+;\n+;\n+}),\n+\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/index1.js [test] (ecmascript)\": ((__turbopack_context__) => {\n+\"use strict\";\n+\n+__turbopack_context__.s({});\n+var __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$source_maps$2f$merged$2d$unicode$2f$input$2f$entry$2d$base$2e$js__$5b$test$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/entry-base.js [test] (ecmascript)\");\n+;\n+}),\n+\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/index2.js [test] (ecmascript)\": ((__turbopack_context__) => {\n+\"use strict\";\n+\n+__turbopack_context__.s({});\n+var __TURBOPACK__imported__module__$5b$project$5d2f$turbopack$2f$crates$2f$turbopack$2d$tests$2f$tests$2f$snapshot$2f$source_maps$2f$merged$2d$unicode$2f$input$2f$entry$2d$base$2e$js__$5b$test$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/entry-base.js [test] (ecmascript)\");\n+;\n+}),\n+\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/index.js [test] (ecmascript)\": ((__turbopack_context__) => {\n+\n+var { m: module, e: exports } = __turbopack_context__;\n+{\n+// \"entry-base.js [app-rsc] (ecmascript) <module evaluation>\" with\n+// [\"reflect-utils.js [app-rsc] (ecmascript)\",\n+// \"params.js [app-rsc] (ecmascript)\",\n+// \"segment-value-encoding.js [app-rsc] (ecmascript)\",\n+// \"collect-segment-data.js [app-rsc] (ecmascript)\",\n+// \"entry-base.js [app-rsc] (ecmascript) <locals>\"]\n+// \"entry-base.js [test] (ecmascript) <module evaluation>\" with\n+// [\"reflect-utils.js [test] (ecmascript)\",\n+// \"params.js [test] (ecmascript)\",\n+// \"segment-value-encoding.js [test] (ecmascript)\",\n+//  \"collect-segment-data.js [test] (ecmascript)\",\n+//  \"entry-base.js [test] (ecmascript) <locals>\"]\n+if (Date.now() > 0) {\n+    __turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/index1.js [test] (ecmascript)\");\n+}\n+if (Date.now() > 0) {\n+    __turbopack_context__.r(\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/index2.js [test] (ecmascript)\");\n+}\n+}}),\n+}]);\n+\n+//# sourceMappingURL=4e721_crates_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_795dc95a._.js.map\n\\ No newline at end of file"
        },
        {
            "sha": "9f2fc0077ca60d25358236dd27bad99e50b5838e",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/output/4e721_crates_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_795dc95a._.js.map",
            "status": "added",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_795dc95a._.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_795dc95a._.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Foutput%2F4e721_crates_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_795dc95a._.js.map?ref=c1f4e3e759ed6eb5f27a028fc547f513a7386d92",
            "patch": "@@ -0,0 +1,10 @@\n+{\n+  \"version\": 3,\n+  \"sources\": [],\n+  \"sections\": [\n+    {\"offset\": {\"line\": 6, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/jsx-runtime.js\"],\"sourcesContent\":[\"module.exports = {};\\n\"],\"names\":[],\"mappings\":\"AAAA,OAAO,OAAO,GAAG,CAAC\"}},\n+    {\"offset\": {\"line\": 11, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/reflect-utils.js\",\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/collect-segment-data.js\"],\"sourcesContent\":[\"// This regex will have fast negatives meaning valid identifiers may not pass\\n// this test. However this is only used during static generation to provide hints\\n// about why a page bailed out of some or all prerendering and we can use bracket notation\\n// for example while `ಠ_ಠ` is a valid identifier it's ok to print `searchParams['ಠ_ಠ']`\\n// even if this would have been fine too `searchParams.ಠ_ಠ`\\nconst isDefinitelyAValidIdentifier = /s/;\\nexport function describeStringPropertyAccess(target, prop) {}\\nexport function describeHasCheckingStringProperty(target, prop) {}\\nexport const wellKnownProperties = new Set([])\\n\",\"import { jsx as _jsx } from \\\"./jsx-runtime\\\";\\n// eslint-disable-next-line import/no-extraneous-dependencies\\nconst createFromReadableStream = 123; //import { createFromReadableStream } from 'react-server-dom-webpack/client.edge';\\n// eslint-disable-next-line import/no-extraneous-dependencies\\nconst prerender = 123; // import { unstable_prerender as prerender } from 'react-server-dom-webpack/static.edge';\\nconst streamFromBuffer=1,streamToBuffer=1; // import { streamFromBuffer, streamToBuffer } from '../stream-utils/node-web-streams-helper';\\nconst waitAtLeastOneReactRenderTask=1; //import { waitAtLeastOneReactRenderTask } from '../../lib/scheduler';\\n// import  './segment-value-encoding';\\n\"],\"names\":[],\"mappings\":\";;;;;;;AAAA,6EAA6E;AAC7E,iFAAiF;AACjF,0FAA0F;AAC1F,uFAAuF;AACvF,2DAA2D;AAC3D,MAAM,+BAA+B;AAC9B,SAAS,6BAA6B,MAAM,EAAE,IAAI,GAAG;AACrD,SAAS,kCAAkC,MAAM,EAAE,IAAI,GAAG;AAC1D,MAAM,sBAAsB,IAAI,IAAI,EAAE;;;;ACR7C;;AACA,6DAA6D;AAC7D,MAAM,2BAA2B,KAAK,kFAAkF;AACxH,6DAA6D;AAC7D,MAAM,YAAY,KAAK,0FAA0F;AACjH,MAAM,mBAAiB,GAAE,iBAAe,GAAG,8FAA8F;AACzI,MAAM,gCAA8B,GAAG,sEAAsE;CAC7G,sCAAsC\"}},\n+    {\"offset\": {\"line\": 45, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/index1.js\"],\"sourcesContent\":[\"import \\\"./entry-base.js\\\";\\n\"],\"names\":[],\"mappings\":\";AAAA\"}},\n+    {\"offset\": {\"line\": 52, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/index2.js\"],\"sourcesContent\":[\"import \\\"./entry-base.js\\\";\\n\"],\"names\":[],\"mappings\":\";AAAA\"}},\n+    {\"offset\": {\"line\": 60, \"column\": 0}, \"map\": {\"version\":3,\"sources\":[\"turbopack:///[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/index.js\"],\"sourcesContent\":[\"// \\\"entry-base.js [app-rsc] (ecmascript) <module evaluation>\\\" with\\n// [\\\"reflect-utils.js [app-rsc] (ecmascript)\\\",\\n// \\\"params.js [app-rsc] (ecmascript)\\\",\\n// \\\"segment-value-encoding.js [app-rsc] (ecmascript)\\\",\\n// \\\"collect-segment-data.js [app-rsc] (ecmascript)\\\",\\n// \\\"entry-base.js [app-rsc] (ecmascript) <locals>\\\"]\\n\\n// \\\"entry-base.js [test] (ecmascript) <module evaluation>\\\" with\\n// [\\\"reflect-utils.js [test] (ecmascript)\\\",\\n// \\\"params.js [test] (ecmascript)\\\",\\n// \\\"segment-value-encoding.js [test] (ecmascript)\\\",\\n//  \\\"collect-segment-data.js [test] (ecmascript)\\\",\\n//  \\\"entry-base.js [test] (ecmascript) <locals>\\\"]\\n\\nif (Date.now() > 0) {\\n  require('./index1.js')\\n}\\nif (Date.now() > 0) {\\n  require('./index2.js')\\n}\\n\\n\"],\"names\":[],\"mappings\":\"AAAA,kEAAkE;AAClE,8CAA8C;AAC9C,sCAAsC;AACtC,sDAAsD;AACtD,oDAAoD;AACpD,mDAAmD;AAEnD,+DAA+D;AAC/D,2CAA2C;AAC3C,mCAAmC;AACnC,mDAAmD;AACnD,kDAAkD;AAClD,iDAAiD;AAEjD,IAAI,KAAK,GAAG,KAAK,GAAG;;AAEpB;AACA,IAAI,KAAK,GAAG,KAAK,GAAG;;AAEpB\"}}]\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "6ab5c7c5017c2a5c9e21cbc52f8af927cb31f6d9",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/output/b1abf_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_index_a93cc521.js",
            "status": "added",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_index_a93cc521.js",
            "raw_url": "https://github.com/vercel/next.js/raw/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_index_a93cc521.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_index_a93cc521.js?ref=c1f4e3e759ed6eb5f27a028fc547f513a7386d92",
            "patch": "@@ -0,0 +1,6 @@\n+(globalThis.TURBOPACK = globalThis.TURBOPACK || []).push([\n+    \"output/b1abf_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_index_a93cc521.js\",\n+    {},\n+    {\"otherChunks\":[\"output/4e721_crates_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_795dc95a._.js\"],\"runtimeModuleIds\":[\"[project]/turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/input/index.js [test] (ecmascript)\"]}\n+]);\n+// Dummy runtime\n\\ No newline at end of file"
        },
        {
            "sha": "c15d7ec00382d3604310ddb8b53cbdb90d9e1942",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot/source_maps/merged-unicode/output/b1abf_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_index_a93cc521.js.map",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_index_a93cc521.js.map",
            "raw_url": "https://github.com/vercel/next.js/raw/c1f4e3e759ed6eb5f27a028fc547f513a7386d92/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_index_a93cc521.js.map",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot%2Fsource_maps%2Fmerged-unicode%2Foutput%2Fb1abf_turbopack-tests_tests_snapshot_source_maps_merged-unicode_input_index_a93cc521.js.map?ref=c1f4e3e759ed6eb5f27a028fc547f513a7386d92",
            "patch": "@@ -0,0 +1,5 @@\n+{\n+  \"version\": 3,\n+  \"sources\": [],\n+  \"sections\": []\n+}\n\\ No newline at end of file"
        }
    ],
    "stats": {
        "total": 194,
        "additions": 190,
        "deletions": 4
    }
}