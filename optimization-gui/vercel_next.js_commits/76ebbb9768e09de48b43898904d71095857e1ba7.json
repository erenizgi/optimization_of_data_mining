{
    "author": "Karthikeya-Thatipamula",
    "message": "docs: add missing RLS step to Next.js tutorial (#82714)\n\n## What\nThis PR updates\n`examples/with-supabase/components/tutorial/fetch-data-steps.tsx` to\ninclude a missing step about enabling Row Level Security (RLS) and\ncreating a simple read policy for the `notes` table.\n\nFixes: #82218\n\n## Why\nCurrently, the tutorial shows how to:\n- create a `notes` table\n- insert data\n- query data from Next.js\n\nHowever, since RLS is enabled by default in Supabase, new users will get\n`permission denied` errors when querying data unless they configure\npolicies.\nThe official Supabase Next.js quickstart docs already mention this:  \nhttps://supabase.com/docs/guides/getting-started/quickstarts/nextjs\n\nAdding this step will help newcomers understand why RLS is required and\nhow to set it up.\n\n## Changes\n- Added a new `<TutorialStep>` in `fetch-data-steps.tsx`:\n  - Explains that RLS is enabled by default\n  - Shows SQL snippet to enable RLS + create a public read policy\n  - Links to the Supabase RLS docs\n\n## Checklist\n- [x] Added RLS tutorial step\n- [x] Verified formatting matches other tutorial steps\n- [x] Added links to relevant Supabase docs\n\nCo-authored-by: Joseph <joseph.chamochumbi@vercel.com>",
    "sha": "76ebbb9768e09de48b43898904d71095857e1ba7",
    "files": [
        {
            "sha": "e49d4049570b2dbad3449d7a6a366407934bd89a",
            "filename": "examples/with-supabase/components/tutorial/fetch-data-steps.tsx",
            "status": "modified",
            "additions": 48,
            "deletions": 0,
            "changes": 48,
            "blob_url": "https://github.com/vercel/next.js/blob/76ebbb9768e09de48b43898904d71095857e1ba7/examples%2Fwith-supabase%2Fcomponents%2Ftutorial%2Ffetch-data-steps.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/76ebbb9768e09de48b43898904d71095857e1ba7/examples%2Fwith-supabase%2Fcomponents%2Ftutorial%2Ffetch-data-steps.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/examples%2Fwith-supabase%2Fcomponents%2Ftutorial%2Ffetch-data-steps.tsx?ref=76ebbb9768e09de48b43898904d71095857e1ba7",
            "patch": "@@ -13,6 +13,11 @@ values\n   ('It was awesome!');\n `.trim();\n \n+const rls = `alter table notes enable row level security;\n+create policy \"Allow public read access\" on notes\n+for select\n+using (true);`.trim();\n+\n const server = `import { createClient } from '@/utils/supabase/server'\n \n export default async function Page() {\n@@ -74,6 +79,49 @@ export function FetchDataSteps() {\n         <CodeBlock code={create} />\n       </TutorialStep>\n \n+      <TutorialStep title=\"Enable Row Level Security (RLS)\">\n+        <p>\n+          Supabase enables Row Level Security (RLS) by default. To query data\n+          from your <code>notes</code> table, you need to add a policy. You can\n+          do this in the{\" \"}\n+          <a\n+            href=\"https://supabase.com/dashboard/project/_/editor\"\n+            className=\"font-bold hover:underline text-foreground/80\"\n+            target=\"_blank\"\n+            rel=\"noreferrer\"\n+          >\n+            Table Editor\n+          </a>{\" \"}\n+          or via the{\" \"}\n+          <a\n+            href=\"https://supabase.com/dashboard/project/_/sql/new\"\n+            className=\"font-bold hover:underline text-foreground/80\"\n+            target=\"_blank\"\n+            rel=\"noreferrer\"\n+          >\n+            SQL Editor\n+          </a>\n+          .\n+        </p>\n+        <p>\n+          For example, you can run the following SQL to allow public read\n+          access:\n+        </p>\n+        <CodeBlock code={rls} />\n+        <p>\n+          You can learn more about RLS in the{\" \"}\n+          <a\n+            href=\"https://supabase.com/docs/guides/auth/row-level-security\"\n+            className=\"font-bold hover:underline text-foreground/80\"\n+            target=\"_blank\"\n+            rel=\"noreferrer\"\n+          >\n+            Supabase docs\n+          </a>\n+          .\n+        </p>\n+      </TutorialStep>\n+\n       <TutorialStep title=\"Query Supabase data from Next.js\">\n         <p>\n           To create a Supabase client and query data from an Async Server"
        }
    ],
    "stats": {
        "total": 48,
        "additions": 48,
        "deletions": 0
    }
}