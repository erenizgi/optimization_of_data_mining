{
    "author": "bgw",
    "message": "create-next-app: Add `ignoreScripts` for `unrs-resolver` on bun (#86324)\n\n`unrs-resolver`'s postinstall script is only needed for legacy versions\nof npm, so it's safe to ignore:\nhttps://github.com/unrs/unrs-resolver/issues/193#issuecomment-3295510146\n\nWithout this, bun blocks the postinstall script (okay) and logs a\nwarning (not ideal, confusing to end users). This prevents it from\nrunning and suppresses the warning. This matches what we now do in\n`pnpm` (https://github.com/vercel/next.js/pull/83168) but for `bun`.\n\nContext:\n- https://vercel.slack.com/archives/C03KAR5DCKC/p1763570835510729\n- https://vercel.slack.com/archives/C06DNAH5LSG/p1763580178004169\n\n## Before\n\n![CleanShot 2025-11-19 at\n08.46.56@2x.png](https://app.graphite.com/user-attachments/assets/4979ca3c-0a05-4c05-831a-93c358832ed4.png)\n\n## After\n\n![Screenshot 2025-11-19 at\n1.02.01â€¯PM.png](https://app.graphite.com/user-attachments/assets/f99b419b-a30e-449a-9118-77621b15fcd9.png)",
    "sha": "d53a7a72f2ef04b8a348de8e69a328dcaca9a105",
    "files": [
        {
            "sha": "315db15713d54680e2a3edbd5be04d240ed11201",
            "filename": "packages/create-next-app/templates/index.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/d53a7a72f2ef04b8a348de8e69a328dcaca9a105/packages%2Fcreate-next-app%2Ftemplates%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d53a7a72f2ef04b8a348de8e69a328dcaca9a105/packages%2Fcreate-next-app%2Ftemplates%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fcreate-next-app%2Ftemplates%2Findex.ts?ref=d53a7a72f2ef04b8a348de8e69a328dcaca9a105",
            "patch": "@@ -340,6 +340,19 @@ export const installTemplate = async ({\n     );\n   }\n \n+  if (packageManager === \"bun\") {\n+    // Equivalent to pnpm's `ignoredBuiltDependencies`, added in bun 1.3.2.\n+    // - https://bun.com/blog/bun-v1.3.2#faster-bun-install\n+    // - https://github.com/oven-sh/bun/pull/24283\n+    // Bun ignores `sharp` by default, but does not ignore `unrs-resolver`\n+    // unless configured.\n+    packageJson.ignoreScripts = [\"sharp\", \"unrs-resolver\"];\n+    // The script must be in *both* `ignoreScripts` and `trustedDependencies` to\n+    // suppress the warning. This could change in future versions of Bun.\n+    // https://vercel.slack.com/archives/C06DNAH5LSG/p1763582930218709?thread_ts=1763580178.004169&cid=C06DNAH5LSG\n+    packageJson.trustedDependencies = [\"sharp\", \"unrs-resolver\"];\n+  }\n+\n   await fs.writeFile(\n     path.join(root, \"package.json\"),\n     JSON.stringify(packageJson, null, 2) + os.EOL,"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 13,
        "deletions": 0
    }
}