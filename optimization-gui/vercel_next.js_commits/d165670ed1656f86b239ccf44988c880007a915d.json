{
    "author": "devjiwonchoi",
    "message": "feat: use Node.js native TS resolver for `next.config.ts` (#83240)\n\n### Why?\n\nSince `next.config.ts` was resolved via require-hook, it had a\nrestriction with Native ESM syntax, like top-level await, dynamic\nimport, and Node.js ESM APIs like `import.meta.url`. There were previous\nattempts to resolve this via the ESM loader, but those approaches\n(https://github.com/vercel/next.js/pull/68365,\nhttps://github.com/vercel/next.js/pull/83120) ended up adding ~39ms\ncompared to the require-hook due to the loader registration time.\n\nHowever, Node.js natively supports TS since v22.7.0 under the\nexperimental flag, and was enabled by default since v23.6.0. Therefore,\nthis PR feature detects the Node.js version and uses its feature to\nresolve `next.config.ts` and allows native ESM syntax.\n\nAs a comparison, the usage of ESM loader vs Native TS on a \"Large App\":\n\n- Duration: ~65% faster (186 ms → 66 ms)\n- RSS: ~41% lower (80 MB → 47 MB)\n- Heap: ~78% lower (18 MB → 4 MB)\n\n<details><summary>Benchmark Details</summary>\n<p>\n\n| Type | Transpile Duration (ms) | Resident Set Size (MB) | Heap Used\n(MB) |\n\n|---------|--------------------------|------------------------|----------------|\n| ESM | 186.04 | 79.94 | 17.68 |\n| Native | 66.09 | 47.32 | 3.81 |\n| **Δ (Abs)** | -119.95 | -32.62 | -13.87 |\n| **Δ (%)** | -64.5% | -40.8% | -78.4% |\n\n</p>\n</details> \n\n### How?\n\nUsed Node.js Native TS support (since v22.7.0). Feature detected with\n`process.features.typescript` (since v22.10.0), and fallback to the\nlegacy resolution for the current session if it throws. This feature\nfollows the restriction of the Native TS support. The notable\nrestrictions are:\n\n- Requires extensions for file imports\n- Doesn't read tsconfig.json (no import alias)\n- Requires `with { type: 'json' }` when importing JSON\n\nFor details, see [Node.js Type\nstripping](https://nodejs.org/api/typescript.html#type-stripping).\n\nSee the changes below to get the idea of what is restricted or newly\nallowed.\n\n- Changes to fixtures due to restrictions:\nhttps://github.com/vercel/next.js/pull/83240/commits/de1bec89f1976aa6f0cba03aa38cae4c1977abec\n- Additions to fixtures due to ESM support:\nhttps://github.com/vercel/next.js/pull/83240/commits/622a2a828693422aa511793af56734f40569d9f5\n\nAdded `next-config-ts-native-ts` tests on CI to run on Node.js v22 and\nv24.\n\n## Benchmark\n\n#### Hello World App\n\n- Duration: ~68% faster (102 ms → 32 ms)\n- RSS: ~65% lower (72 MB → 25 MB)\n- Heap: ~87% lower (31 MB → 4 MB)\n\n<details><summary>Benchmark Details</summary>\n<p>\n\n| Attempt | Transpile Duration (ms) | Resident Set Size (MB) | Heap Used\n(MB) |\n\n|-----------|--------------------------|------------------------|----------------|\n| CJS 1 | 104.03 | 69.16 | 30.32 |\n| CJS 2 | 100.35 | 59.95 | 30.14 |\n| CJS 3 | 100.77 | 75.83 | 32.18 |\n| CJS 4 | 103.43 | 77.33 | 30.13 |\n| CJS 5 | 100.82 | 76.30 | 30.22 |\n| Native 1 | 33.75 | 25.19 | 3.84 |\n| Native 2 | 28.71 | 21.72 | 3.85 |\n| Native 3 | 33.49 | 28.95 | 3.85 |\n| Native 4 | 32.78 | 24.97 | 3.85 |\n| Native 5 | 33.43 | 24.89 | 3.85 |\n| **CJS Avg** | 101.88 | 71.71 | 30.60 |\n| **Native Avg**| 32.43 | 25.14 | 3.85 |\n| **Δ (Abs)** | -69.45 | -46.57 | -26.75 |\n| **Δ (%)** | -68.2% | -64.9% | -87.4% |\n\n</p>\n</details> \n\n#### Large App\n\n> Benchmarked from a large repository that imports packages like\n`@next/bundle-analyzer`.\n\n- Duration: ~56% faster (152 ms → 66 ms)\n- RSS: ~30% lower (68 MB → 47 MB)\n- Heap: ~78% lower (17 MB → 4 MB)\n\n<details><summary>Benchmark Details</summary>\n<p>\n\n| Attempt | Transpile Duration (ms) | Resident Set Size (MB) | Heap Used\n(MB) |\n\n|-----------|--------------------------|------------------------|----------------|\n| CJS 1 | 154.35 | 67.73 | 17.16 |\n| CJS 2 | 148.02 | 61.33 | 17.32 |\n| CJS 3 | 152.44 | 66.06 | 17.14 |\n| CJS 4 | 149.89 | 74.33 | 17.17 |\n| CJS 5 | 156.27 | 68.20 | 17.25 |\n| Native 1 | 68.01 | 34.66 | 5.51 |\n| Native 2 | 66.41 | 53.83 | 5.48 |\n| Native 3 | 62.39 | 45.80 | 1.48 |\n| Native 4 | 65.20 | 52.02 | 1.35 |\n| Native 5 | 68.44 | 50.31 | 5.25 |\n| **CJS Avg** | 152.19 | 67.53 | 17.21 |\n| **Native Avg**| 66.09 | 47.32 | 3.81 |\n| **Δ (Abs)** | -86.10 | -20.21 | -13.39 |\n| **Δ (%)** | -56.6% | -29.9% | -77.8% |\n\n</p>\n</details>\n\nFixes https://github.com/vercel/next.js/issues/67765\nFixes https://github.com/vercel/next.js/issues/71705\nCloses [NDX-494](https://linear.app/vercel/issue/NDX-494)\n\n---------\n\nCo-authored-by: vercel[bot] <35613825+vercel[bot]@users.noreply.github.com>\nCo-authored-by: graphite-app[bot] <96075541+graphite-app[bot]@users.noreply.github.com>\nCo-authored-by: Sebastian \"Sebbie\" Silbermann <silbermann.sebastian@gmail.com>",
    "sha": "d165670ed1656f86b239ccf44988c880007a915d",
    "files": [
        {
            "sha": "5196d03a0a0655799733793a60ac27b44827e4d3",
            "filename": ".github/workflows/build_and_test.yml",
            "status": "modified",
            "additions": 46,
            "deletions": 0,
            "changes": 46,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/.github%2Fworkflows%2Fbuild_and_test.yml",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/.github%2Fworkflows%2Fbuild_and_test.yml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.github%2Fworkflows%2Fbuild_and_test.yml?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -521,6 +521,50 @@ jobs:\n \n     secrets: inherit\n \n+  # TODO: Remove this once we bump minimum Node.js version to v22\n+  test-next-config-ts-native-ts-dev:\n+    name: test next-config-ts-native-ts dev\n+    needs: ['changes', 'build-next', 'build-native']\n+    if: ${{ needs.changes.outputs.docs-only == 'false' }}\n+\n+    strategy:\n+      fail-fast: false\n+      matrix:\n+        node: [22, 24]\n+\n+    uses: ./.github/workflows/build_reusable.yml\n+    with:\n+      nodeVersion: ${{ matrix.node }}\n+      afterBuild: |\n+        export NEXT_TEST_MODE=dev\n+        export NODE_OPTIONS=--experimental-transform-types\n+        node run-tests.js test/e2e/app-dir/next-config-ts-native-ts/**/*.test.ts\n+      stepName: 'test-next-config-ts-native-ts-dev-${{ matrix.node }}'\n+\n+    secrets: inherit\n+\n+  # TODO: Remove this once we bump minimum Node.js version to v22\n+  test-next-config-ts-native-ts-prod:\n+    name: test next-config-ts-native-ts prod\n+    needs: ['changes', 'build-next', 'build-native']\n+    if: ${{ needs.changes.outputs.docs-only == 'false' }}\n+\n+    strategy:\n+      fail-fast: false\n+      matrix:\n+        node: [22, 24]\n+\n+    uses: ./.github/workflows/build_reusable.yml\n+    with:\n+      nodeVersion: ${{ matrix.node }}\n+      afterBuild: |\n+        export NEXT_TEST_MODE=start\n+        export NODE_OPTIONS=--experimental-transform-types\n+        node run-tests.js test/e2e/app-dir/next-config-ts-native-ts/**/*.test.ts\n+      stepName: 'test-next-config-ts-native-ts-prod-${{ matrix.node }}'\n+\n+    secrets: inherit\n+\n   test-unit-windows:\n     name: test unit windows\n     needs: ['changes', 'build-native', 'build-native-windows']\n@@ -956,6 +1000,8 @@ jobs:\n         'validate-docs-links',\n         'check-types-precompiled',\n         'test-unit',\n+        'test-next-config-ts-native-ts-dev',\n+        'test-next-config-ts-native-ts-prod',\n         'test-dev',\n         'test-prod',\n         'test-integration',"
        },
        {
            "sha": "a8c8fa41f8e563de026fce1f0c56be443be9aff1",
            "filename": "packages/next/src/build/next-config-ts/transpile-config.ts",
            "status": "modified",
            "additions": 38,
            "deletions": 1,
            "changes": 39,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/packages%2Fnext%2Fsrc%2Fbuild%2Fnext-config-ts%2Ftranspile-config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/packages%2Fnext%2Fsrc%2Fbuild%2Fnext-config-ts%2Ftranspile-config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fnext-config-ts%2Ftranspile-config.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -3,9 +3,11 @@ import type { CompilerOptions } from 'typescript'\n \n import { resolve } from 'node:path'\n import { readFile } from 'node:fs/promises'\n+import { pathToFileURL } from 'node:url'\n import { deregisterHook, registerHook, requireFromString } from './require-hook'\n-import { warn } from '../output/log'\n+import { warn, warnOnce } from '../output/log'\n import { installDependencies } from '../../lib/install-dependencies'\n+import { getNodeOptionsArgs } from '../../server/lib/utils'\n \n function resolveSWCOptions(\n   cwd: string,\n@@ -103,6 +105,8 @@ async function getTsConfig(cwd: string): Promise<CompilerOptions> {\n   return parsedCommandLine.options\n }\n \n+let useNodeNativeTSLoader = true\n+\n export async function transpileConfig({\n   nextConfigPath,\n   configFileName,\n@@ -113,6 +117,39 @@ export async function transpileConfig({\n   cwd: string\n }) {\n   try {\n+    if (useNodeNativeTSLoader) {\n+      try {\n+        // Node.js v22.10.0+\n+        // Value is 'strip' or 'transform' based on how the feature is enabled.\n+        // https://nodejs.org/api/process.html#processfeaturestypescript\n+        if ((process.features as any).typescript) {\n+          return import(pathToFileURL(nextConfigPath).href)\n+        }\n+\n+        if (\n+          getNodeOptionsArgs().includes('--no-experimental-strip-types') ||\n+          process.execArgv.includes('--no-experimental-strip-types')\n+        ) {\n+          // TODO: Add Next.js docs link.\n+          warnOnce(\n+            `Skipped resolving \"${configFileName}\" using Node.js native TypeScript resolution because it was disabled by the \"--no-experimental-strip-types\" flag.` +\n+              ' Falling back to legacy resolution.'\n+          )\n+        }\n+\n+        // Feature is not enabled, fallback to legacy resolution for current session.\n+        useNodeNativeTSLoader = false\n+      } catch (cause) {\n+        warnOnce(\n+          `Failed to import \"${configFileName}\" using Node.js native TypeScript resolution.` +\n+            ' Falling back to legacy resolution.',\n+          { cause }\n+        )\n+        // Once failed, fallback to legacy resolution for current session.\n+        useNodeNativeTSLoader = false\n+      }\n+    }\n+\n     // Ensure TypeScript is installed to use the API.\n     await verifyTypeScriptSetup(cwd, configFileName)\n     const compilerOptions = await getTsConfig(cwd)"
        },
        {
            "sha": "ac8d62fb4356c15797a35312cd091c002b40fa2e",
            "filename": "packages/next/src/server/lib/utils.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Futils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Futils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Futils.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -118,7 +118,7 @@ export const tokenizeArgs = (input: string): string[] => {\n  *\n  * @returns An array of strings with the node options.\n  */\n-const getNodeOptionsArgs = () => {\n+export const getNodeOptionsArgs = () => {\n   if (!process.env.NODE_OPTIONS) return []\n \n   return tokenizeArgs(process.env.NODE_OPTIONS)"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/async-function/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fasync-function%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fasync-function%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fasync-function%2Fapp%2Flayout.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/async-function/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fasync-function%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fasync-function%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fasync-function%2Fapp%2Fpage.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "ffd1f65483d9025870af2eac41b2412621473fc3",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/async-function/async-function-cjs.test.ts",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fasync-function%2Fasync-function-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fasync-function%2Fasync-function-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fasync-function%2Fasync-function-cjs.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,18 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-async-function-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should support config as async function (CJS)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "6977a7b9784ce40f2fab3eecc9a061545ccad219",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/async-function/async-function-esm.test.ts",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fasync-function%2Fasync-function-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fasync-function%2Fasync-function-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fasync-function%2Fasync-function-esm.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,21 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-async-function-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should support config as async function (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "7ef2f3d74f3bd9cc3e0c2c99bca800191e4aae8b",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/async-function/next.config.ts",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fasync-function%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fasync-function%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fasync-function%2Fnext.config.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,17 @@\n+import type { NextConfig } from 'next'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+const nextConfigAsyncFunction = async (phase, { defaultConfig }) => {\n+  const nextConfig: NextConfig = {\n+    ...defaultConfig,\n+    env: {\n+      foo: phase ? 'foo' : 'bar',\n+    },\n+  }\n+  return nextConfig\n+}\n+\n+export default nextConfigAsyncFunction"
        },
        {
            "sha": "888614deda3ba5d744d1a7e5dac131038dba2b12",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/dynamic-import-esm/app/layout.tsx",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Fapp%2Flayout.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,8 @@\n+import { ReactNode } from 'react'\n+export default function Root({ children }: { children: ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/dynamic-import-esm/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Fapp%2Fpage.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "cb356468240d506ec494bbe2cdd8c46c20a50558",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/dynamic-import-esm/foo.ts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Ffoo.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Ffoo.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Ffoo.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+export const foo = 'foo'"
        },
        {
            "sha": "dbe727d5cdf0815a60782570e54d74418b66e7f2",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/dynamic-import-esm/next-config-ts-dynamic-import-esm.test.ts",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Fnext-config-ts-dynamic-import-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Fnext-config-ts-dynamic-import-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Fnext-config-ts-dynamic-import-esm.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,21 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-dynamic-import-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should support dynamic import (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "54cf1d5cde8839a1e1bd89965b7b8a6825d86b14",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/dynamic-import-esm/next.config.ts",
            "status": "added",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Fnext.config.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,19 @@\n+import type { NextConfig } from 'next'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+const nextConfig = async () => {\n+  const { foo } = await import('./foo.ts')\n+\n+  const nextConfig: NextConfig = {\n+    env: {\n+      foo,\n+    },\n+  }\n+\n+  return nextConfig\n+}\n+\n+export default nextConfig"
        },
        {
            "sha": "d8c3d4d9917ccceba2459671757e3f63a33bb694",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/dynamic-import-esm/tsconfig.test.json",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Ftsconfig.test.json",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Ftsconfig.test.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fdynamic-import-esm%2Ftsconfig.test.json?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,5 @@\n+{\n+  \"compilerOptions\": {\n+    \"allowImportingTsExtensions\": true\n+  }\n+}"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/export-as-default/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-as-default%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-as-default%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-as-default%2Fapp%2Flayout.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/export-as-default/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-as-default%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-as-default%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-as-default%2Fapp%2Fpage.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "63361e01355327825456179c75909b0b0a21868d",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/export-as-default/next-config-ts-export-as-default-cjs.test.ts",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-as-default%2Fnext-config-ts-export-as-default-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-as-default%2Fnext-config-ts-export-as-default-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-as-default%2Fnext-config-ts-export-as-default-cjs.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,18 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-export-as-default-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should support export as default (CJS)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "5cd4000e1a5f93590131c5494d58591e80a89a59",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/export-as-default/next-config-ts-export-as-default-esm.test.ts",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-as-default%2Fnext-config-ts-export-as-default-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-as-default%2Fnext-config-ts-export-as-default-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-as-default%2Fnext-config-ts-export-as-default-esm.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,21 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-export-as-default-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should support export as default (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "fd4489326348d2f583a39ae3ddf5b4c7fa4a5601",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/export-as-default/next.config.ts",
            "status": "added",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-as-default%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-as-default%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-as-default%2Fnext.config.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,13 @@\n+import type { NextConfig } from 'next'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    foo: 'foo',\n+  },\n+}\n+\n+export { nextConfig as default }"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/export-default/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-default%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-default%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-default%2Fapp%2Flayout.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/export-default/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-default%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-default%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-default%2Fapp%2Fpage.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "57778993a4393522b4590b708bef04d23494c408",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/export-default/next-config-ts-export-default-cjs.test.ts",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-default%2Fnext-config-ts-export-default-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-default%2Fnext-config-ts-export-default-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-default%2Fnext-config-ts-export-default-cjs.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,18 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-export-default-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should support export default (CJS)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "2e7cead4b60be5b5089a68141066a3c986e0af1f",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/export-default/next-config-ts-export-default-esm.test.ts",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-default%2Fnext-config-ts-export-default-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-default%2Fnext-config-ts-export-default-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-default%2Fnext-config-ts-export-default-esm.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,21 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-export-default-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should support export default (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "54ef54e003b52ce8abbb9b6665884e3b0f9b60b0",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/export-default/next.config.ts",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-default%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-default%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fexport-default%2Fnext.config.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,11 @@\n+import type { NextConfig } from 'next'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+export default {\n+  env: {\n+    foo: 'foo',\n+  },\n+} satisfies NextConfig"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-from-node-modules/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fapp%2Flayout.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "e5ca1a77124e2b939b05914d2a9ca9745b823950",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-from-node-modules/app/page.tsx",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fapp%2Fpage.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,12 @@\n+export default function Page() {\n+  return (\n+    <p>\n+      {JSON.stringify([\n+        process.env.cjs,\n+        process.env.mjs,\n+        process.env.jsCJS,\n+        process.env.jsESM,\n+      ])}\n+    </p>\n+  )\n+}"
        },
        {
            "sha": "316b3820f640d513ce5d5be55a91b95b4c2dbc0c",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-from-node-modules/next-config-ts-import-from-node-modules-cjs.test.ts",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnext-config-ts-import-from-node-modules-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnext-config-ts-import-from-node-modules-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnext-config-ts-import-from-node-modules-cjs.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,22 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-import-from-node-modules-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should import from node_modules (CJS)', async () => {\n+    const $ = await next.render$('/')\n+    const text = $('p').text()\n+    expect(text).toContain('cjs')\n+    expect(text).toContain('mjs')\n+    expect(text).toContain('jsCJS')\n+    expect(text).toContain('jsESM')\n+  })\n+})"
        },
        {
            "sha": "a2db84ed405770668f39584227b2c81794a86658",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-from-node-modules/next-config-ts-import-from-node-modules-esm.test.ts",
            "status": "added",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnext-config-ts-import-from-node-modules-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnext-config-ts-import-from-node-modules-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnext-config-ts-import-from-node-modules-esm.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,25 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-import-from-node-modules-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should import from node_modules (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    const text = $('p').text()\n+    expect(text).toContain('cjs')\n+    expect(text).toContain('mjs')\n+    expect(text).toContain('jsCJS')\n+    expect(text).toContain('jsESM')\n+  })\n+})"
        },
        {
            "sha": "35b13ea3640dbedfd2c2f7e747f8c4980e1efc24",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-from-node-modules/next.config.ts",
            "status": "added",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnext.config.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,20 @@\n+import type { NextConfig } from 'next'\n+import cjs from 'cjs'\n+import mjs from 'mjs'\n+import jsCJS from 'js-cjs'\n+import jsESM from 'js-esm'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    cjs,\n+    mjs,\n+    jsCJS,\n+    jsESM,\n+  },\n+}\n+\n+export default nextConfig"
        },
        {
            "sha": "011bde74737d04c2c40410a590f76e6a6509264f",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-from-node-modules/node_modules/cjs/index.cjs",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Findex.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Findex.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Findex.cjs?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+module.exports = 'cjs'"
        },
        {
            "sha": "443834d04c84c1a62bf236c6d98052555ec47ea1",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-from-node-modules/node_modules/cjs/index.d.ts",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Findex.d.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Findex.d.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Findex.d.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,2 @@\n+declare const cjs: string\n+export default cjs"
        },
        {
            "sha": "490dbe501c0eb0d81a8d8de778eab6388086b79d",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-from-node-modules/node_modules/cjs/package.json",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fcjs%2Fpackage.json?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,4 @@\n+{\n+  \"type\": \"commonjs\",\n+  \"main\": \"index.cjs\"\n+}"
        },
        {
            "sha": "828616938f8f9fe8c99ab35d39a02f3b4ec5e6ee",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-from-node-modules/node_modules/js-cjs/index.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-cjs%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-cjs%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-cjs%2Findex.js?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+module.exports = 'jsCJS'"
        },
        {
            "sha": "4aaa4a2388d533377fabe40476492f1b20d81efa",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-from-node-modules/node_modules/js-cjs/package.json",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-cjs%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-cjs%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-cjs%2Fpackage.json?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,4 @@\n+{\n+  \"type\": \"commonjs\",\n+  \"main\": \"index.js\"\n+}"
        },
        {
            "sha": "93663ef708ac8be1ed3e91bf8c754cf92a6f3bb2",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-from-node-modules/node_modules/js-esm/index.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-esm%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-esm%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-esm%2Findex.js?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+export default 'jsESM'"
        },
        {
            "sha": "07aec65d5a4f318072e44bafd186b56a387d9f58",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-from-node-modules/node_modules/js-esm/package.json",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-esm%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-esm%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fjs-esm%2Fpackage.json?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,4 @@\n+{\n+  \"type\": \"module\",\n+  \"main\": \"index.js\"\n+}"
        },
        {
            "sha": "396adc75950033e5ebba375b2a205a045d200ff6",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-from-node-modules/node_modules/mjs/index.d.ts",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Findex.d.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Findex.d.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Findex.d.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,2 @@\n+declare const mjs: string\n+export default mjs"
        },
        {
            "sha": "e7b27c03ffc66b50cedbbed53422e05f3e83b09e",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-from-node-modules/node_modules/mjs/index.mjs",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Findex.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Findex.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Findex.mjs?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+export default 'mjs'"
        },
        {
            "sha": "d06c01d9b1a8b044536e03512c3fd2418d334ca3",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-from-node-modules/node_modules/mjs/package.json",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-from-node-modules%2Fnode_modules%2Fmjs%2Fpackage.json?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,4 @@\n+{\n+  \"type\": \"commonjs\",\n+  \"main\": \"index.mjs\"\n+}"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-cjs/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Fapp%2Flayout.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "3ed1e8d2583a5d152830042d9a0a0d3e873af0ac",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-cjs/app/page.tsx",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Fapp%2Fpage.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,14 @@\n+export default function Page() {\n+  return (\n+    <p>\n+      {JSON.stringify([\n+        process.env.js,\n+        process.env.cjs,\n+        process.env.mjs,\n+        process.env.cts,\n+        process.env.mts,\n+        process.env.ts,\n+      ])}\n+    </p>\n+  )\n+}"
        },
        {
            "sha": "011bde74737d04c2c40410a590f76e6a6509264f",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-cjs/fixtures/cjs.cjs",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fcjs.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fcjs.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fcjs.cjs?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+module.exports = 'cjs'"
        },
        {
            "sha": "b8e1125a55649c23274833122f655a16f4fc0701",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-cjs/fixtures/cts.cts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fcts.cts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fcts.cts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fcts.cts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+module.exports = 'cts'"
        },
        {
            "sha": "828616938f8f9fe8c99ab35d39a02f3b4ec5e6ee",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-cjs/fixtures/js-cjs.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fjs-cjs.js",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fjs-cjs.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fjs-cjs.js?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+module.exports = 'jsCJS'"
        },
        {
            "sha": "e7b27c03ffc66b50cedbbed53422e05f3e83b09e",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-cjs/fixtures/mjs.mjs",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fmjs.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fmjs.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fmjs.mjs?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+export default 'mjs'"
        },
        {
            "sha": "f6744bd66196f3ae87fb9128617a2be68309b15a",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-cjs/fixtures/mts.mts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fmts.mts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fmts.mts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fmts.mts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+export default 'mts'"
        },
        {
            "sha": "ef5c20433536154aba302e4e0525b2962959efc5",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-cjs/fixtures/ts.ts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fts.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fts.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ffixtures%2Fts.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+export default 'ts'"
        },
        {
            "sha": "da0af39863774dde2dcb27e307b9bb6f49521c75",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-cjs/next-config-ts-import-js-extensions-cjs.test.ts",
            "status": "added",
            "additions": 24,
            "deletions": 0,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Fnext-config-ts-import-js-extensions-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Fnext-config-ts-import-js-extensions-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Fnext-config-ts-import-js-extensions-cjs.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,24 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-import-js-extensions-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should import js extensions (CJS)', async () => {\n+    const $ = await next.render$('/')\n+    const text = $('p').text()\n+    expect(text).toContain('jsCJS')\n+    expect(text).toContain('cjs')\n+    expect(text).toContain('mjs')\n+    expect(text).toContain('cts')\n+    expect(text).toContain('mts')\n+    expect(text).toContain('ts')\n+  })\n+})"
        },
        {
            "sha": "37d5451b8472e2658b4b5101e7cf9f0b1001db49",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-cjs/next.config.ts",
            "status": "added",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Fnext.config.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,25 @@\n+import type { NextConfig } from 'next'\n+import cjs from './fixtures/cjs.cjs'\n+import mjs from './fixtures/mjs.mjs'\n+import * as cts from './fixtures/cts.cts'\n+import mts from './fixtures/mts.mts'\n+import ts from './fixtures/ts.ts'\n+import js from './fixtures/js-cjs.js'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    cjs,\n+    mjs,\n+    // Node.js native TS can't handle `export =` syntax.\n+    cts: (cts as any).default,\n+    mts,\n+    ts,\n+    js,\n+  },\n+}\n+\n+export default nextConfig"
        },
        {
            "sha": "8393f2663ceb2ebd2d2643a05f83e2514477c278",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-cjs/tsconfig.test.json",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ftsconfig.test.json",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ftsconfig.test.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-cjs%2Ftsconfig.test.json?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,7 @@\n+{\n+  \"compilerOptions\": {\n+    \"allowImportingTsExtensions\": true,\n+    \"esModuleInterop\": true,\n+    \"allowJs\": true\n+  }\n+}"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-esm/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Fapp%2Flayout.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "3ed1e8d2583a5d152830042d9a0a0d3e873af0ac",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-esm/app/page.tsx",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Fapp%2Fpage.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,14 @@\n+export default function Page() {\n+  return (\n+    <p>\n+      {JSON.stringify([\n+        process.env.js,\n+        process.env.cjs,\n+        process.env.mjs,\n+        process.env.cts,\n+        process.env.mts,\n+        process.env.ts,\n+      ])}\n+    </p>\n+  )\n+}"
        },
        {
            "sha": "011bde74737d04c2c40410a590f76e6a6509264f",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-esm/fixtures/cjs.cjs",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fcjs.cjs",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fcjs.cjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fcjs.cjs?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+module.exports = 'cjs'"
        },
        {
            "sha": "b8e1125a55649c23274833122f655a16f4fc0701",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-esm/fixtures/cts.cts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fcts.cts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fcts.cts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fcts.cts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+module.exports = 'cts'"
        },
        {
            "sha": "93663ef708ac8be1ed3e91bf8c754cf92a6f3bb2",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-esm/fixtures/js-esm.js",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fjs-esm.js",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fjs-esm.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fjs-esm.js?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+export default 'jsESM'"
        },
        {
            "sha": "e7b27c03ffc66b50cedbbed53422e05f3e83b09e",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-esm/fixtures/mjs.mjs",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fmjs.mjs",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fmjs.mjs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fmjs.mjs?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+export default 'mjs'"
        },
        {
            "sha": "f6744bd66196f3ae87fb9128617a2be68309b15a",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-esm/fixtures/mts.mts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fmts.mts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fmts.mts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fmts.mts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+export default 'mts'"
        },
        {
            "sha": "ef5c20433536154aba302e4e0525b2962959efc5",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-esm/fixtures/ts.ts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fts.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fts.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ffixtures%2Fts.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+export default 'ts'"
        },
        {
            "sha": "0fbe14b9a3824623189f2df13f2bd1237c1543e3",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-esm/next-config-ts-import-js-extensions-esm.test.ts",
            "status": "added",
            "additions": 27,
            "deletions": 0,
            "changes": 27,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Fnext-config-ts-import-js-extensions-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Fnext-config-ts-import-js-extensions-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Fnext-config-ts-import-js-extensions-esm.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,27 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-import-js-extensions-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should import js extensions (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    const text = $('p').text()\n+    expect(text).toContain('jsESM')\n+    expect(text).toContain('cjs')\n+    expect(text).toContain('mjs')\n+    expect(text).toContain('cts')\n+    expect(text).toContain('mts')\n+    expect(text).toContain('ts')\n+  })\n+})"
        },
        {
            "sha": "245c502c66cf6510aa498929b4cc4ae37edf4de5",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-esm/next.config.ts",
            "status": "added",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Fnext.config.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,25 @@\n+import type { NextConfig } from 'next'\n+import cjs from './fixtures/cjs.cjs'\n+import mjs from './fixtures/mjs.mjs'\n+import * as cts from './fixtures/cts.cts'\n+import mts from './fixtures/mts.mts'\n+import ts from './fixtures/ts.ts'\n+import js from './fixtures/js-esm.js'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    cjs,\n+    mjs,\n+    // Node.js native TS can't handle `export =` syntax.\n+    cts: (cts as any).default,\n+    mts,\n+    ts,\n+    js,\n+  },\n+}\n+\n+export default nextConfig"
        },
        {
            "sha": "8393f2663ceb2ebd2d2643a05f83e2514477c278",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-js-extensions-esm/tsconfig.test.json",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ftsconfig.test.json",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ftsconfig.test.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-js-extensions-esm%2Ftsconfig.test.json?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,7 @@\n+{\n+  \"compilerOptions\": {\n+    \"allowImportingTsExtensions\": true,\n+    \"esModuleInterop\": true,\n+    \"allowJs\": true\n+  }\n+}"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-json/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Fapp%2Flayout.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-json/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Fapp%2Fpage.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "abdd5202bdfbe6a1112fc94eff5682ef785975ea",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-json/foo.json",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Ffoo.json",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Ffoo.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Ffoo.json?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,3 @@\n+{\n+  \"foo\": \"foo\"\n+}"
        },
        {
            "sha": "c165cf364d7625fb5ae0b4ded02a3e1fa921c653",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-json/next-config-ts-import-json-cjs.test.ts",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Fnext-config-ts-import-json-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Fnext-config-ts-import-json-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Fnext-config-ts-import-json-cjs.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,18 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-import-json-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should support import json (CJS)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "9878766fb6c2a59f21cd553293dee96730be6dc4",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-json/next-config-ts-import-json-esm.test.ts",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Fnext-config-ts-import-json-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Fnext-config-ts-import-json-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Fnext-config-ts-import-json-esm.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,21 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-import-json-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should support import json (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "975bc289a147f26f6aacd75cad5391de545b14e9",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/import-json/next.config.ts",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fimport-json%2Fnext.config.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,12 @@\n+import type { NextConfig } from 'next'\n+import fooJson from './foo.json' with { type: 'json' }\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+export default {\n+  env: {\n+    foo: fooJson.foo,\n+  },\n+} satisfies NextConfig"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/nested-imports/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fapp%2Flayout.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "a810a8c6a6afef8b96824cc668bc3e0635e62500",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/nested-imports/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fapp%2Fpage.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foobarbaz}</p>\n+}"
        },
        {
            "sha": "e1bba987f729b9c4eb1b75ff47da38958198c4c4",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/nested-imports/bar.ts",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fbar.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fbar.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fbar.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,3 @@\n+import { baz } from './baz.ts'\n+\n+export const barbaz = 'bar' + baz"
        },
        {
            "sha": "24abaad3a5efe9beb5d41076b522ed5b678cbf62",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/nested-imports/baz.ts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fbaz.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fbaz.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fbaz.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+export const baz = 'baz'"
        },
        {
            "sha": "70404db45c96eed3c275935e4113404ca762ae6d",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/nested-imports/foo.ts",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Ffoo.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Ffoo.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Ffoo.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,3 @@\n+import { barbaz } from './bar.ts'\n+\n+export const foobarbaz = 'foo' + barbaz"
        },
        {
            "sha": "5648973a0cd2311573ef980cfb7fd632e9d557b4",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/nested-imports/next-config-ts-nested-imports-cjs.test.ts",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fnext-config-ts-nested-imports-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fnext-config-ts-nested-imports-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fnext-config-ts-nested-imports-cjs.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,18 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-nested-imports-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should handle nested imports (CJS)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foobarbaz')\n+  })\n+})"
        },
        {
            "sha": "20d61c6a05dfde0e7b10affdff50bbd0ad6b3a02",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/nested-imports/next-config-ts-nested-imports-esm.test.ts",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fnext-config-ts-nested-imports-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fnext-config-ts-nested-imports-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fnext-config-ts-nested-imports-esm.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,21 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-nested-imports-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should handle nested imports (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foobarbaz')\n+  })\n+})"
        },
        {
            "sha": "1511f1aefbd808bf4b949efdded58316a81b45d1",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/nested-imports/next.config.ts",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Fnext.config.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,14 @@\n+import type { NextConfig } from 'next'\n+import { foobarbaz } from './foo.ts'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    foobarbaz,\n+  },\n+}\n+\n+export default nextConfig"
        },
        {
            "sha": "d8c3d4d9917ccceba2459671757e3f63a33bb694",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/nested-imports/tsconfig.test.json",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Ftsconfig.test.json",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Ftsconfig.test.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnested-imports%2Ftsconfig.test.json?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,5 @@\n+{\n+  \"compilerOptions\": {\n+    \"allowImportingTsExtensions\": true\n+  }\n+}"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/node-api-cjs/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-cjs%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-cjs%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-cjs%2Fapp%2Flayout.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/node-api-cjs/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-cjs%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-cjs%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-cjs%2Fapp%2Fpage.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "19102815663d23f8b75a47e7a01965dcdc96468c",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/node-api-cjs/foo.txt",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-cjs%2Ffoo.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-cjs%2Ffoo.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-cjs%2Ffoo.txt?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+foo\n\\ No newline at end of file"
        },
        {
            "sha": "d90e0956a51d064274f5e6a549a44d7fa09c7b21",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/node-api-cjs/next-config-ts-node-api-cjs.test.ts",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-cjs%2Fnext-config-ts-node-api-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-cjs%2Fnext-config-ts-node-api-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-cjs%2Fnext-config-ts-node-api-cjs.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,18 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-node-api-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+  })\n+\n+  it('should be able to use Node.js API (CJS)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "327c6e9e3bd318f64bb37c5d883dae61b2f83dbe",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/node-api-cjs/next.config.ts",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-cjs%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-cjs%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-cjs%2Fnext.config.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,17 @@\n+import type { NextConfig } from 'next'\n+import fs from 'node:fs'\n+import { join } from 'node:path'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+const foo = fs.readFileSync(join('.', 'foo.txt'), 'utf8')\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    foo,\n+  },\n+}\n+\n+export default nextConfig"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/node-api-esm/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-esm%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-esm%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-esm%2Fapp%2Flayout.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/node-api-esm/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-esm%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-esm%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-esm%2Fapp%2Fpage.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "19102815663d23f8b75a47e7a01965dcdc96468c",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/node-api-esm/foo.txt",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-esm%2Ffoo.txt",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-esm%2Ffoo.txt",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-esm%2Ffoo.txt?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1 @@\n+foo\n\\ No newline at end of file"
        },
        {
            "sha": "9712b9c4367d61ecde1c008145bfe83db996e4b1",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/node-api-esm/next-config-ts-node-api-esm.test.ts",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-esm%2Fnext-config-ts-node-api-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-esm%2Fnext-config-ts-node-api-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-esm%2Fnext-config-ts-node-api-esm.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,21 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-node-api-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should be able to use Node.js API (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "7e7cd06dab41145b227c76b87493c5e8a9c50b97",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/node-api-esm/next.config.ts",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-esm%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-esm%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Fnode-api-esm%2Fnext.config.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,22 @@\n+import type { NextConfig } from 'next'\n+import fs from 'node:fs'\n+import { dirname, join } from 'node:path'\n+import { fileURLToPath } from 'node:url'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+// import.meta.url only works in ESM\n+const __filename = fileURLToPath(import.meta.url)\n+const __dirname = dirname(__filename)\n+\n+const foo = fs.readFileSync(join(__dirname, 'foo.txt'), 'utf8')\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    foo,\n+  },\n+}\n+\n+export default nextConfig"
        },
        {
            "sha": "888614deda3ba5d744d1a7e5dac131038dba2b12",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/top-level-await-esm/app/layout.tsx",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Fapp%2Flayout.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,8 @@\n+import { ReactNode } from 'react'\n+export default function Root({ children }: { children: ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/top-level-await-esm/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Fapp%2Fpage.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "d430909ba65a44e1aa2c940a518eab941a0a79fb",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/top-level-await-esm/get-foo.ts",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Fget-foo.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Fget-foo.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Fget-foo.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,3 @@\n+export async function getFoo() {\n+  return 'foo'\n+}"
        },
        {
            "sha": "55d5bf343b5a0e81800af0ab05d10bae0e45e5f6",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/top-level-await-esm/next-config-ts-top-level-await-esm.test.ts",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Fnext-config-ts-top-level-await-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Fnext-config-ts-top-level-await-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Fnext-config-ts-top-level-await-esm.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,21 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-top-level-await-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next } = nextTestSetup({\n+    files: __dirname,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  it('should support top-level await (ESM)', async () => {\n+    const $ = await next.render$('/')\n+    expect($('p').text()).toBe('foo')\n+  })\n+})"
        },
        {
            "sha": "c4fe04bd54f8626282a9d683038e78bc700cfdad",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/top-level-await-esm/next.config.ts",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Fnext.config.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,12 @@\n+import type { NextConfig } from 'next'\n+import { getFoo } from './get-foo.ts'\n+\n+const foo = await getFoo()\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    foo,\n+  },\n+}\n+\n+export default nextConfig"
        },
        {
            "sha": "d8c3d4d9917ccceba2459671757e3f63a33bb694",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/top-level-await-esm/tsconfig.test.json",
            "status": "added",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Ftsconfig.test.json",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Ftsconfig.test.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftop-level-await-esm%2Ftsconfig.test.json?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,5 @@\n+{\n+  \"compilerOptions\": {\n+    \"allowImportingTsExtensions\": true\n+  }\n+}"
        },
        {
            "sha": "e7077399c03ce1479a655dc647c0545b64531628",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/type-error/app/layout.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftype-error%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftype-error%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftype-error%2Fapp%2Flayout.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Root({ children }: { children: React.ReactNode }) {\n+  return (\n+    <html>\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "b5f92b56c02e4e66c6c1d8c6581c23763ccc3414",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/type-error/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftype-error%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftype-error%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftype-error%2Fapp%2Fpage.tsx?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <p>{process.env.foo}</p>\n+}"
        },
        {
            "sha": "eae3fd49bcab153d2a824424313a934453f09904",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/type-error/next-config-ts-type-error-cjs.test.ts",
            "status": "added",
            "additions": 32,
            "deletions": 0,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftype-error%2Fnext-config-ts-type-error-cjs.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftype-error%2Fnext-config-ts-type-error-cjs.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftype-error%2Fnext-config-ts-type-error-cjs.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,32 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-type-error-cjs', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next, isNextDev, skipped } = nextTestSetup({\n+    files: __dirname,\n+    skipStart: true,\n+    skipDeployment: true,\n+  })\n+\n+  if (skipped) {\n+    return\n+  }\n+\n+  it('should throw with type error on build (CJS)', async () => {\n+    if (isNextDev) {\n+      await next.start()\n+      const $ = await next.render$('/')\n+      expect($('p').text()).toBe('foo')\n+    } else {\n+      const { cliOutput } = await next.build()\n+      await expect(cliOutput).toContain(\n+        `Type 'string' is not assignable to type 'number'.`\n+      )\n+    }\n+  })\n+})"
        },
        {
            "sha": "b925d05dfaa3d819b1b3c946f1e99b2728900b9d",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/type-error/next-config-ts-type-error-esm.test.ts",
            "status": "added",
            "additions": 35,
            "deletions": 0,
            "changes": 35,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftype-error%2Fnext-config-ts-type-error-esm.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftype-error%2Fnext-config-ts-type-error-esm.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftype-error%2Fnext-config-ts-type-error-esm.test.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,35 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('next-config-ts-type-error-esm', () => {\n+  // TODO: Remove this once we bump minimum Node.js version to v22\n+  if (!(process.features as any).typescript) {\n+    it.skip('requires `process.features.typescript` to feature detect Node.js native TS', () => {})\n+    return\n+  }\n+\n+  const { next, isNextDev, skipped } = nextTestSetup({\n+    files: __dirname,\n+    skipStart: true,\n+    skipDeployment: true,\n+    packageJson: {\n+      type: 'module',\n+    },\n+  })\n+\n+  if (skipped) {\n+    return\n+  }\n+\n+  it('should throw with type error on build (ESM)', async () => {\n+    if (isNextDev) {\n+      await next.start()\n+      const $ = await next.render$('/')\n+      expect($('p').text()).toBe('foo')\n+    } else {\n+      const { cliOutput } = await next.build()\n+      await expect(cliOutput).toContain(\n+        `Type 'string' is not assignable to type 'number'.`\n+      )\n+    }\n+  })\n+})"
        },
        {
            "sha": "bfa814e503a6aa611ac823f727241854993d97a4",
            "filename": "test/e2e/app-dir/next-config-ts-native-ts/type-error/next.config.ts",
            "status": "added",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftype-error%2Fnext.config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/d165670ed1656f86b239ccf44988c880007a915d/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftype-error%2Fnext.config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fnext-config-ts-native-ts%2Ftype-error%2Fnext.config.ts?ref=d165670ed1656f86b239ccf44988c880007a915d",
            "patch": "@@ -0,0 +1,16 @@\n+import type { NextConfig } from 'next'\n+\n+// top-level await will only work in Native TS mode.\n+// This is to ensure that the test is running in Native TS mode.\n+await Promise.resolve()\n+\n+// type error\n+let foo: number = 'foo'\n+\n+const nextConfig: NextConfig = {\n+  env: {\n+    foo,\n+  },\n+}\n+\n+export default nextConfig"
        }
    ],
    "stats": {
        "total": 995,
        "additions": 993,
        "deletions": 2
    }
}