{
    "author": "kdy1",
    "message": "perf(turbopack): Use `Byte::from_static` when possible (#79215)\n\n### What?\n\nUse the `Bytes::from_static` method, which does not allocate at all. As the lifetime dispatch is unsound, `Bytes as From<&[u8]>` is very unlikely to be able to optimize it as `Bytes::from_static`.\n\n### Why?\n\nx-ref: Numbers at https://vercel.slack.com/archives/C06PPGZ0FD3/p1747238443434299?thread_ts=1746834549.272939&cid=C06PPGZ0FD3",
    "sha": "249f413b6ab57054c63da55b10bd1a84f7fdc94e",
    "files": [
        {
            "sha": "cc42bf8bbec2204d457678250ffb53b0cca50e60",
            "filename": "turbopack/crates/turbo-tasks-fs/src/rope.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/249f413b6ab57054c63da55b10bd1a84f7fdc94e/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Frope.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/249f413b6ab57054c63da55b10bd1a84f7fdc94e/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Frope.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Frope.rs?ref=249f413b6ab57054c63da55b10bd1a84f7fdc94e",
            "patch": "@@ -181,7 +181,7 @@ impl RopeBuilder {\n         self.finish();\n \n         self.length += bytes.len();\n-        self.committed.push(Local(bytes.into()));\n+        self.committed.push(Local(Bytes::from_static(bytes)));\n     }\n \n     /// Concatenate another Rope instance into our builder.\n@@ -323,7 +323,7 @@ impl Uncommitted {\n     fn finish(&mut self) -> Option<Bytes> {\n         match mem::take(self) {\n             Self::None => None,\n-            Self::Static(s) => Some(s.into()),\n+            Self::Static(s) => Some(Bytes::from_static(s)),\n             Self::Owned(mut v) => {\n                 v.shrink_to_fit();\n                 Some(v.into())"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}