{
    "author": "sokra",
    "message": "Use deterministic env for public env vars (#82859)\n\n### What?\n\nFor persistent caching the order of defined variables need to be deterministic.",
    "sha": "4b567eb0bfec14e51ca74fdfa2b44dd60a87047b",
    "files": [
        {
            "sha": "c5fda08aadf7fe32ff99f638fef5a9620ae19ca8",
            "filename": "packages/next/src/lib/static-env.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/4b567eb0bfec14e51ca74fdfa2b44dd60a87047b/packages%2Fnext%2Fsrc%2Flib%2Fstatic-env.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/4b567eb0bfec14e51ca74fdfa2b44dd60a87047b/packages%2Fnext%2Fsrc%2Flib%2Fstatic-env.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Flib%2Fstatic-env.ts?ref=4b567eb0bfec14e51ca74fdfa2b44dd60a87047b",
            "patch": "@@ -15,16 +15,17 @@ function errorIfEnvConflicted(config: NextConfigComplete, key: string) {\n  * Collects all environment variables that are using the `NEXT_PUBLIC_` prefix.\n  */\n export function getNextPublicEnvironmentVariables() {\n-  const defineEnv: Record<string, string | undefined> = {}\n+  const defineEnv: [string, string | undefined][] = []\n   for (const key in process.env) {\n     if (key.startsWith('NEXT_PUBLIC_')) {\n       const value = process.env[key]\n       if (value != null) {\n-        defineEnv[`process.env.${key}`] = value\n+        defineEnv.push([`process.env.${key}`, value])\n       }\n     }\n   }\n-  return defineEnv\n+  defineEnv.sort((a, b) => a[0].localeCompare(b[0]))\n+  return Object.fromEntries(defineEnv)\n }\n \n /**"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 4,
        "deletions": 3
    }
}