{
    "author": "eps1lon",
    "message": "[build-sourcemaps] Include codeframes in prod when sourcemaps are enabled (#78710)",
    "sha": "e6ea4b75a3a9f5a0ec5e6b257645c34b3b20de05",
    "files": [
        {
            "sha": "6a775255ec2fbb01aab3e8d4d803d5de9ebf236a",
            "filename": "packages/next/src/server/patch-error-inspect.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 14,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/e6ea4b75a3a9f5a0ec5e6b257645c34b3b20de05/packages%2Fnext%2Fsrc%2Fserver%2Fpatch-error-inspect.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e6ea4b75a3a9f5a0ec5e6b257645c34b3b20de05/packages%2Fnext%2Fsrc%2Fserver%2Fpatch-error-inspect.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fpatch-error-inspect.ts?ref=e6ea4b75a3a9f5a0ec5e6b257645c34b3b20de05",
            "patch": "@@ -184,7 +184,6 @@ function getSourcemappedFrameIfPossible(\n   inspectOptions: util.InspectOptions\n ): {\n   stack: IgnoreableStackFrame\n-  // DEV only\n   code: string | null\n } {\n   const sourceMapCacheEntry = sourceMapCache.get(frame.file)\n@@ -322,14 +321,11 @@ function getSourcemappedFrameIfPossible(\n     ignored,\n   }\n \n-  const codeFrame =\n-    process.env.NODE_ENV !== 'production'\n-      ? getOriginalCodeFrame(\n-          originalFrame,\n-          sourceContent,\n-          inspectOptions.colors\n-        )\n-      : null\n+  const codeFrame = getOriginalCodeFrame(\n+    originalFrame,\n+    sourceContent,\n+    inspectOptions.colors\n+  )\n \n   return {\n     stack: originalFrame,\n@@ -363,7 +359,7 @@ function parseAndSourceMap(\n   const sourceMapCache: SourceMapCache = new Map()\n \n   let sourceMappedStack = ''\n-  let sourceFrameDEV: null | string = null\n+  let sourceFrame: null | string = null\n   for (const frame of unsourcemappedStack) {\n     if (frame.file === null) {\n       sourceMappedStack += '\\n' + frameToString(frame)\n@@ -376,13 +372,12 @@ function parseAndSourceMap(\n       )\n \n       if (\n-        process.env.NODE_ENV !== 'production' &&\n         sourcemappedFrame.code !== null &&\n-        sourceFrameDEV === null &&\n+        sourceFrame === null &&\n         // TODO: Is this the right choice?\n         !sourcemappedFrame.stack.ignored\n       ) {\n-        sourceFrameDEV = sourcemappedFrame.code\n+        sourceFrame = sourcemappedFrame.code\n       }\n       if (!sourcemappedFrame.stack.ignored) {\n         // TODO: Consider what happens if every frame is ignore listed.\n@@ -400,7 +395,7 @@ function parseAndSourceMap(\n     ': ' +\n     error.message +\n     sourceMappedStack +\n-    (sourceFrameDEV !== null ? '\\n' + sourceFrameDEV : '')\n+    (sourceFrame !== null ? '\\n' + sourceFrame : '')\n   )\n }\n "
        }
    ],
    "stats": {
        "total": 23,
        "additions": 9,
        "deletions": 14
    }
}