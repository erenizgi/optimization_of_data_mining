{
    "author": "eps1lon",
    "message": "[test] Use new Redbox matchers in app/ hook-functuon-names (#76785)",
    "sha": "92b18a95ee8c904d7052a9c8e12068ae3e789bd3",
    "files": [
        {
            "sha": "a1adffec0fd173b424d9a7fb4b488878f337c132",
            "filename": "test/development/app-dir/hook-function-names/hook-function-names.test.ts",
            "status": "modified",
            "additions": 32,
            "deletions": 56,
            "changes": 88,
            "blob_url": "https://github.com/vercel/next.js/blob/92b18a95ee8c904d7052a9c8e12068ae3e789bd3/test%2Fdevelopment%2Fapp-dir%2Fhook-function-names%2Fhook-function-names.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/92b18a95ee8c904d7052a9c8e12068ae3e789bd3/test%2Fdevelopment%2Fapp-dir%2Fhook-function-names%2Fhook-function-names.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fhook-function-names%2Fhook-function-names.test.ts?ref=92b18a95ee8c904d7052a9c8e12068ae3e789bd3",
            "patch": "@@ -1,8 +1,7 @@\n import { nextTestSetup } from 'e2e-utils'\n-import { assertHasRedbox, getRedboxSource, openRedbox } from 'next-test-utils'\n \n describe('hook-function-names', () => {\n-  const { next, isTurbopack } = nextTestSetup({\n+  const { next } = nextTestSetup({\n     files: __dirname,\n   })\n \n@@ -11,64 +10,41 @@ describe('hook-function-names', () => {\n \n     await browser.elementByCss('button').click()\n \n-    await openRedbox(browser)\n-\n-    if (isTurbopack) {\n-      expect(await getRedboxSource(browser)).toMatchInlineSnapshot(`\n-        \"app/button/page.tsx (7:11) @ Button.useCallback[handleClick]\n-\n-           5 | const Button = ({ message }: { message: string }) => {\n-           6 |   const handleClick = useCallback(() => {\n-        >  7 |     throw new Error(message)\n-             |           ^\n-           8 |   }, [message])\n-           9 |\n-          10 |   return (\"\n-      `)\n-    } else {\n-      expect(await getRedboxSource(browser)).toMatchInlineSnapshot(`\n-            \"app/button/page.tsx (7:11) @ Button.useCallback[handleClick]\n-\n-               5 | const Button = ({ message }: { message: string }) => {\n-               6 |   const handleClick = useCallback(() => {\n-            >  7 |     throw new Error(message)\n-                 |           ^\n-               8 |   }, [message])\n-               9 |\n-              10 |   return (\"\n-        `)\n-    }\n+    await expect(browser).toDisplayCollapsedRedbox(`\n+     {\n+       \"count\": 1,\n+       \"description\": \"Error: Kaputt!\",\n+       \"environmentLabel\": null,\n+       \"label\": \"Unhandled Runtime Error\",\n+       \"source\": \"app/button/page.tsx (7:11) @ Button.useCallback[handleClick]\n+     >  7 |     throw new Error(message)\n+          |           ^\",\n+       \"stack\": [\n+         \"Button.useCallback[handleClick] app/button/page.tsx (7:11)\",\n+         \"button <anonymous> (0:0)\",\n+         \"Button app/button/page.tsx (11:5)\",\n+         \"Page app/button/page.tsx (18:10)\",\n+       ],\n+     }\n+    `)\n   })\n \n   it('should show readable hook names in stacks for default-exported components', async () => {\n     const browser = await next.browser('/')\n \n-    await assertHasRedbox(browser)\n-\n-    if (isTurbopack) {\n-      expect(await getRedboxSource(browser)).toMatchInlineSnapshot(`\n-        \"app/page.tsx (7:11) @ Page.useEffect\n-\n-           5 | export default function Page() {\n-           6 |   useEffect(() => {\n-        >  7 |     throw new Error('error in useEffect')\n-             |           ^\n-           8 |   }, [])\n-           9 |\n-          10 |   return <p>Hello world!</p>\"\n-      `)\n-    } else {\n-      expect(await getRedboxSource(browser)).toMatchInlineSnapshot(`\n-              \"app/page.tsx (7:11) @ Page.useEffect\n-\n-                 5 | export default function Page() {\n-                 6 |   useEffect(() => {\n-              >  7 |     throw new Error('error in useEffect')\n-                   |           ^\n-                 8 |   }, [])\n-                 9 |\n-                10 |   return <p>Hello world!</p>\"\n-          `)\n-    }\n+    await expect(browser).toDisplayRedbox(`\n+     {\n+       \"count\": 1,\n+       \"description\": \"Error: error in useEffect\",\n+       \"environmentLabel\": null,\n+       \"label\": \"Unhandled Runtime Error\",\n+       \"source\": \"app/page.tsx (7:11) @ Page.useEffect\n+     >  7 |     throw new Error('error in useEffect')\n+          |           ^\",\n+       \"stack\": [\n+         \"Page.useEffect app/page.tsx (7:11)\",\n+       ],\n+     }\n+    `)\n   })\n })"
        }
    ],
    "stats": {
        "total": 88,
        "additions": 32,
        "deletions": 56
    }
}