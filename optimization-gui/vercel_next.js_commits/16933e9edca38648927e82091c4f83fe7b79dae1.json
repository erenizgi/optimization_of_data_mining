{
    "author": "kdy1",
    "message": "perf(turbopack): Optimize `Rope` correctly (#80335)\n\n### What?\n\nUtilize _cheap clone_ of `bytes::Bytes`. I made an error in the previous pull request.\n\n### Why?\n\n - In the name of the performance.\n - `bytes::Bytes` is cheap to clone.",
    "sha": "16933e9edca38648927e82091c4f83fe7b79dae1",
    "files": [
        {
            "sha": "4713f09cca71e0b8fdfcc3f3f3a08a139f56b307",
            "filename": "turbopack/crates/turbo-tasks-fs/src/rope.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/16933e9edca38648927e82091c4f83fe7b79dae1/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Frope.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/16933e9edca38648927e82091c4f83fe7b79dae1/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Frope.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Frope.rs?ref=16933e9edca38648927e82091c4f83fe7b79dae1",
            "patch": "@@ -550,6 +550,10 @@ impl InnerRope {\n                     return data.into_iter().next().unwrap().into_bytes(len);\n                 }\n                 Err(data) => {\n+                    // If we have a single element, we can return it directly.\n+                    if let Local(bytes) = &data[0] {\n+                        return bytes.clone();\n+                    }\n                     self.0 = data;\n                 }\n             }"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 4,
        "deletions": 0
    }
}