{
    "author": "raunofreiberg",
    "message": "[dev-tools] Navigation header replaces close button (#80097)\n\nThis PR implements the latest changes from @pranathip to our info\npopovers.\n\n| Before | After |\n|:------:|:-----:|\n| ![CleanShot 2025-06-03 at 13 54\n48@2x](https://github.com/user-attachments/assets/164109f9-ae41-4c8a-9154-9ec1f6b8297d)\n| ![CleanShot 2025-06-03 at 13 54\n29@2x](https://github.com/user-attachments/assets/267e9e88-2f61-48f1-88a9-d639e4750734)\n|",
    "sha": "4172a4f4cc0ca2178711e9bf06d8e76630dc9173",
    "files": [
        {
            "sha": "86a1343b61a443c3df2ce26f572392ad240657ed",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/dev-tools-indicator/dev-tools-info/dev-tools-info.tsx",
            "status": "modified",
            "additions": 68,
            "deletions": 41,
            "changes": 109,
            "blob_url": "https://github.com/vercel/next.js/blob/4172a4f4cc0ca2178711e9bf06d8e76630dc9173/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fdev-tools-info.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4172a4f4cc0ca2178711e9bf06d8e76630dc9173/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fdev-tools-info.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fdev-tools-info.tsx?ref=4172a4f4cc0ca2178711e9bf06d8e76630dc9173",
            "patch": "@@ -12,7 +12,6 @@ export interface DevToolsInfoProps extends DevToolsInfoPropsCore {\n   title: React.ReactNode\n   children: React.ReactNode\n   learnMoreLink?: string\n-  closeButton?: boolean\n }\n \n export function DevToolsInfo({\n@@ -21,7 +20,6 @@ export function DevToolsInfo({\n   learnMoreLink,\n   isOpen,\n   triggerRef,\n-  closeButton = true,\n   close,\n   ...props\n }: DevToolsInfoProps) {\n@@ -55,20 +53,21 @@ export function DevToolsInfo({\n       data-rendered={rendered}\n     >\n       <div className=\"dev-tools-info-container\">\n-        <h1 className=\"dev-tools-info-title\">{title}</h1>\n-        {children}\n-        {(closeButton || learnMoreLink) && (\n-          <div className=\"dev-tools-info-button-container\">\n-            {closeButton ? (\n-              <button\n-                ref={closeButtonRef}\n-                className=\"dev-tools-info-close-button\"\n-                onClick={close}\n-              >\n-                Close\n-              </button>\n-            ) : null}\n-            {learnMoreLink && (\n+        <div className=\"dev-tools-info-header\">\n+          <button\n+            ref={closeButtonRef}\n+            className=\"dev-tools-info-close-button\"\n+            onClick={close}\n+            aria-label=\"Close dialog\"\n+          >\n+            <IconChevronLeft />\n+          </button>\n+          <h3 className=\"dev-tools-info-title\">{title}</h3>\n+        </div>\n+        <div className=\"dev-tools-info-body\">\n+          {children}\n+          {learnMoreLink && (\n+            <div className=\"dev-tools-info-button-container\">\n               <a\n                 className=\"dev-tools-info-learn-more-button\"\n                 href={learnMoreLink}\n@@ -77,9 +76,9 @@ export function DevToolsInfo({\n               >\n                 Learn More\n               </a>\n-            )}\n-          </div>\n-        )}\n+            </div>\n+          )}\n+        </div>\n       </div>\n     </div>\n   )\n@@ -117,15 +116,43 @@ export const DEV_TOOLS_INFO_STYLES = `\n   }\n \n   .dev-tools-info-container {\n-    padding: 12px;\n     width: 100%;\n   }\n \n+  .dev-tools-info-body {\n+    padding: 16px;\n+  }\n+\n+  .dev-tools-info-header {\n+    height: 48px;\n+    display: flex;\n+    align-items: center;\n+    gap: 6px;\n+    padding: 6px 8px;\n+    border-bottom: 1px solid var(--color-gray-alpha-400);\n+  }\n+\n+  .dev-tools-info-close-button {\n+    all: unset;\n+    width: 20px;\n+    height: 20px;    \n+    display: flex;\n+    align-items: center;\n+    justify-content: center;\n+    color: var(--color-gray-900);\n+    transition: color 150ms ease;\n+    translate: 0 1px;\n+    border-radius: 3px;\n+\n+    &:hover {\n+      color: var(--color-gray-1000);\n+    }\n+  }\n+\n   .dev-tools-info-title {\n-    padding: 8px 6px;\n     color: var(--color-gray-1000);\n-    font-size: var(--size-16);\n-    font-weight: 600;\n+    font-size: var(--size-14);\n+    font-weight: 500;\n     line-height: var(--size-20);\n     margin: 0;\n   }\n@@ -147,24 +174,6 @@ export const DEV_TOOLS_INFO_STYLES = `\n     display: flex;\n     justify-content: space-between;\n     align-items: center;\n-    padding: 8px 6px;\n-  }\n-\n-  .dev-tools-info-close-button {\n-    padding: 0 8px;\n-    height: var(--size-28);\n-    font-size: var(--size-14);\n-    font-weight: 500;\n-    line-height: var(--size-20);\n-    transition: background var(--duration-short) ease;\n-    color: var(--color-gray-1000);\n-    border-radius: var(--rounded-md-2);\n-    border: 1px solid var(--color-gray-alpha-400);\n-    background: var(--color-background-200);\n-  }\n-\n-  .dev-tools-info-close-button:hover {\n-    background: var(--color-gray-400);\n   }\n \n   .dev-tools-info-learn-more-button {\n@@ -178,6 +187,7 @@ export const DEV_TOOLS_INFO_STYLES = `\n     color: var(--color-background-100);\n     border-radius: var(--rounded-md-2);\n     background: var(--color-gray-1000);\n+    margin-left: auto;\n   }\n \n   .dev-tools-info-learn-more-button:hover {\n@@ -186,3 +196,20 @@ export const DEV_TOOLS_INFO_STYLES = `\n     opacity: 0.9;\n   }\n `\n+\n+function IconChevronLeft() {\n+  return (\n+    <svg\n+      width=\"16\"\n+      height=\"16\"\n+      viewBox=\"0 0 16 16\"\n+      fill=\"none\"\n+      xmlns=\"http://www.w3.org/2000/svg\"\n+    >\n+      <path\n+        d=\"M5.14645 8.70703C4.75595 8.31651 4.75595 7.68349 5.14645 7.29297L10.5 1.93945L11.5605 3L6.56051 8L11.5605 13L10.5 14.0605L5.14645 8.70703Z\"\n+        fill=\"currentColor\"\n+      />\n+    </svg>\n+  )\n+}"
        },
        {
            "sha": "5bbafa4650aeb63b7a3294af0286312ac319cc07",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/dev-tools-indicator/dev-tools-info/user-preferences.tsx",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/4172a4f4cc0ca2178711e9bf06d8e76630dc9173/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fuser-preferences.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4172a4f4cc0ca2178711e9bf06d8e76630dc9173/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fuser-preferences.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fuser-preferences.tsx?ref=4172a4f4cc0ca2178711e9bf06d8e76630dc9173",
            "patch": "@@ -200,7 +200,6 @@ function ThemeIcon({ theme }: { theme: 'dark' | 'light' | 'system' }) {\n \n export const DEV_TOOLS_INFO_USER_PREFERENCES_STYLES = css`\n   .preferences-container {\n-    padding: 8px 6px;\n     width: 100%;\n   }\n "
        },
        {
            "sha": "eee60cd1e210ef2e5498ab2ec0c39f38b2c811e8",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/overview/segment-explorer.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 25,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/4172a4f4cc0ca2178711e9bf06d8e76630dc9173/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Foverview%2Fsegment-explorer.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/4172a4f4cc0ca2178711e9bf06d8e76630dc9173/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Foverview%2Fsegment-explorer.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Foverview%2Fsegment-explorer.tsx?ref=4172a4f4cc0ca2178711e9bf06d8e76630dc9173",
            "patch": "@@ -3,7 +3,6 @@ import { css } from '../../../utils/css'\n import type { DevToolsInfoPropsCore } from '../errors/dev-tools-indicator/dev-tools-info/dev-tools-info'\n import { DevToolsInfo } from '../errors/dev-tools-indicator/dev-tools-info/dev-tools-info'\n import { cx } from '../../utils/cx'\n-import { LeftArrow } from '../../icons/left-arrow'\n import {\n   useSegmentTreeClientState,\n   type SegmentNode,\n@@ -126,36 +125,13 @@ export function SegmentsExplorer(\n   }\n \n   return (\n-    <DevToolsInfo\n-      title={\n-        <>\n-          <button\n-            className=\"segment-explorer-back-button\"\n-            onClick={props.close}\n-          >\n-            <LeftArrow />\n-          </button>\n-          {'Segment Explorer'}\n-        </>\n-      }\n-      closeButton={false}\n-      {...props}\n-    >\n+    <DevToolsInfo title=\"Segment Explorer\" {...props}>\n       <PageSegmentTree tree={ctx.tree} />\n     </DevToolsInfo>\n   )\n }\n \n export const DEV_TOOLS_INFO_RENDER_FILES_STYLES = css`\n-  .segment-explorer-back-button {\n-    margin-right: 12px;\n-    color: var(--color-gray-1000);\n-  }\n-  .segment-explorer-back-button svg {\n-    width: 20px;\n-    height: 20px;\n-  }\n-\n   .segment-explorer-content {\n     overflow-y: auto;\n     padding: 0 12px;"
        }
    ],
    "stats": {
        "total": 136,
        "additions": 69,
        "deletions": 67
    }
}