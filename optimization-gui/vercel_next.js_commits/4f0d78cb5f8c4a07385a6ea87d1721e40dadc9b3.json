{
    "author": "timneutkens",
    "message": "agent.md: Explain where the Next.js core code lives (#88314)\n\n## What?\n\nExplain in agent.md where the Next.js core code lives.",
    "sha": "4f0d78cb5f8c4a07385a6ea87d1721e40dadc9b3",
    "files": [
        {
            "sha": "d77d74c82520bd35312dc042688543fc6152b16e",
            "filename": "AGENTS.md",
            "status": "modified",
            "additions": 49,
            "deletions": 11,
            "changes": 60,
            "blob_url": "https://github.com/vercel/next.js/blob/4f0d78cb5f8c4a07385a6ea87d1721e40dadc9b3/AGENTS.md",
            "raw_url": "https://github.com/vercel/next.js/raw/4f0d78cb5f8c4a07385a6ea87d1721e40dadc9b3/AGENTS.md",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/AGENTS.md?ref=4f0d78cb5f8c4a07385a6ea87d1721e40dadc9b3",
            "patch": "@@ -1,5 +1,44 @@\n # Next.js Development Guide\n \n+## Codebase structure\n+\n+### Monorepo Overview\n+\n+This is a pnpm monorepo containing the Next.js framework and related packages.\n+\n+```\n+next.js/\n+├── packages/           # Published npm packages\n+├── turbopack/          # Turbopack bundler (Rust) - git subtree\n+├── crates/             # Rust crates for Next.js SWC bindings\n+├── test/               # All test suites\n+├── examples/           # Example Next.js applications\n+├── docs/               # Documentation\n+└── scripts/            # Build and maintenance scripts\n+```\n+\n+### Core Package: `packages/next`\n+\n+The main Next.js framework lives in `packages/next/`. This is what gets published as the `next` npm package.\n+\n+**Source code** is in `packages/next/src/`.\n+\n+**Key entry points:**\n+\n+- Dev server: `src/cli/next-dev.ts` → `src/server/dev/next-dev-server.ts`\n+- Production server: `src/cli/next-start.ts` → `src/server/next-server.ts`\n+- Build: `src/cli/next-build.ts` → `src/build/index.ts`\n+\n+**Compiled output** goes to `packages/next/dist/` (mirrors src/ structure).\n+\n+### Other Important Packages\n+\n+- `packages/create-next-app/` - The `create-next-app` CLI tool\n+- `packages/next-swc/` - Native Rust bindings (SWC transforms)\n+- `packages/eslint-plugin-next/` - ESLint rules for Next.js\n+- `packages/font/` - `next/font` implementation\n+- `packages/third-parties/` - Third-party script integrations\n+\n ## Git Workflow\n \n **Use Graphite for all git operations** instead of raw git commands:\n@@ -221,19 +260,18 @@ pnpm test-dev-turbo test/path/to/test.ts\n pnpm test-start-turbo test/path/to/test.ts\n ```\n \n-## Key Directories\n+## Key Directories (Quick Reference)\n+\n+See [Codebase structure](#codebase-structure) above for detailed explanations.\n \n - `packages/next/src/` - Main Next.js source code\n-  - `server/` - Server runtime (dev server, router, rendering)\n-  - `client/` - Client-side code\n-  - `build/` - Build tooling (webpack, turbopack configs)\n-  - `cli/` - CLI entry points\n-- `packages/next/dist/` - Compiled output\n-- `turbopack/` - Turbopack bundler (Rust)\n-- `test/` - Test suites\n-  - `development/` - Dev server tests\n-  - `production/` - Production build tests\n-  - `e2e/` - End-to-end tests\n+- `packages/next/src/server/` - Server runtime (most changes happen here)\n+- `packages/next/src/client/` - Client-side runtime\n+- `packages/next/src/build/` - Build tooling\n+- `test/e2e/` - End-to-end tests\n+- `test/development/` - Dev server tests\n+- `test/production/` - Production build tests\n+- `test/unit/` - Unit tests (fast, no browser)\n \n ## Development Tips\n "
        }
    ],
    "stats": {
        "total": 60,
        "additions": 49,
        "deletions": 11
    }
}