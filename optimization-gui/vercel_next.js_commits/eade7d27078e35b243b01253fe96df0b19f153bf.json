{
    "author": "devjiwonchoi",
    "message": "[devtools] add panel ui placeholder under feature flag (#80354)\n\nThis PR adds a placeholder for the DevTools panel UI under the feature flag, focusing on the interaction with the dispatcher.",
    "sha": "eade7d27078e35b243b01253fe96df0b19f153bf",
    "files": [
        {
            "sha": "00921a2a0d74a3b438ebb3bc58b4722563e182ca",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-indicator/devtools-indicator.tsx",
            "status": "modified",
            "additions": 13,
            "deletions": 3,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/eade7d27078e35b243b01253fe96df0b19f153bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fdevtools-indicator.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/eade7d27078e35b243b01253fe96df0b19f153bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fdevtools-indicator.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-indicator%2Fdevtools-indicator.tsx?ref=eade7d27078e35b243b01253fe96df0b19f153bf",
            "patch": "@@ -9,7 +9,13 @@ import {\n   MENU_CURVE,\n   MENU_DURATION_MS,\n } from '../errors/dev-tools-indicator/utils'\n-import { ACTION_ERROR_OVERLAY_TOGGLE, STORAGE_KEY_POSITION } from '../../shared'\n+import {\n+  ACTION_DEVTOOLS_PANEL_TOGGLE,\n+  ACTION_ERROR_OVERLAY_TOGGLE,\n+  ACTION_ERROR_OVERLAY_CLOSE,\n+  STORAGE_KEY_POSITION,\n+  ACTION_DEVTOOLS_PANEL_CLOSE,\n+} from '../../shared'\n import { getInitialPosition } from '../errors/dev-tools-indicator/dev-tools-info/preferences'\n import { Draggable } from '../errors/dev-tools-indicator/draggable'\n \n@@ -34,10 +40,14 @@ export function DevToolsIndicator({\n   const [vertical, horizontal] = position.split('-', 2)\n \n   const toggleErrorOverlay = () => {\n+    dispatch({ type: ACTION_DEVTOOLS_PANEL_CLOSE })\n     dispatch({ type: ACTION_ERROR_OVERLAY_TOGGLE })\n   }\n \n-  const onTriggerClick = () => {}\n+  const toggleDevToolsPanel = () => {\n+    dispatch({ type: ACTION_ERROR_OVERLAY_CLOSE })\n+    dispatch({ type: ACTION_DEVTOOLS_PANEL_TOGGLE })\n+  }\n \n   return (\n     <Toast\n@@ -71,7 +81,7 @@ export function DevToolsIndicator({\n           data-nextjs-dev-tools-button\n           disabled={state.disableDevIndicator}\n           issueCount={errorCount}\n-          onTriggerClick={onTriggerClick}\n+          onTriggerClick={toggleDevToolsPanel}\n           toggleErrorOverlay={toggleErrorOverlay}\n           isDevBuilding={state.buildingIndicator}\n           isDevRendering={state.renderingIndicator}"
        },
        {
            "sha": "cce453010e3e7bd62a2f11768d62ebc905b4cc89",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-panel/devtools-panel.tsx",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/eade7d27078e35b243b01253fe96df0b19f153bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/eade7d27078e35b243b01253fe96df0b19f153bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx?ref=eade7d27078e35b243b01253fe96df0b19f153bf",
            "patch": "@@ -0,0 +1,12 @@\n+import { css } from '../../utils/css'\n+\n+export function DevToolsPanel() {\n+  // TODO: Remove style; It is to indicate faster in the browser.\n+  return <div data-nextjs-devtools-panel>DevToolsPanel</div>\n+}\n+\n+export const DEVTOOLS_PANEL_STYLES = css`\n+  [data-nextjs-devtools-panel] {\n+    color: black;\n+  }\n+`"
        },
        {
            "sha": "c53954bb659a78e937d4220b3dd85c9aa3a895f1",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/dev-tools-indicator/dev-tools-indicator.stories.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/eade7d27078e35b243b01253fe96df0b19f153bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.stories.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/eade7d27078e35b243b01253fe96df0b19f153bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.stories.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-indicator.stories.tsx?ref=eade7d27078e35b243b01253fe96df0b19f153bf",
            "patch": "@@ -59,6 +59,8 @@ const state: OverlayState = {\n   staticIndicator: true,\n   debugInfo: { devtoolsFrontendUrl: undefined },\n   isErrorOverlayOpen: false,\n+  // TODO: This will be handled on the next stack——with proper story.\n+  isDevToolsPanelOpen: false,\n }\n \n export const StaticRoute: Story = {"
        },
        {
            "sha": "92abe480613f623cd657cd91eb19a221e9a914bf",
            "filename": "packages/next/src/next-devtools/dev-overlay/dev-overlay.stories.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/eade7d27078e35b243b01253fe96df0b19f153bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.stories.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/eade7d27078e35b243b01253fe96df0b19f153bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.stories.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.stories.tsx?ref=eade7d27078e35b243b01253fe96df0b19f153bf",
            "patch": "@@ -94,6 +94,8 @@ const initialState: OverlayState = {\n     staleness: 'fresh',\n   },\n   isErrorOverlayOpen: true,\n+  // TODO: This will be handled on the next stack——with proper story.\n+  isDevToolsPanelOpen: false,\n }\n \n function useOverlayReducer() {"
        },
        {
            "sha": "aa10526cd68795acd74c5427963b11bcc554af88",
            "filename": "packages/next/src/next-devtools/dev-overlay/dev-overlay.tsx",
            "status": "modified",
            "additions": 12,
            "deletions": 7,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/eade7d27078e35b243b01253fe96df0b19f153bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/eade7d27078e35b243b01253fe96df0b19f153bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fdev-overlay.tsx?ref=eade7d27078e35b243b01253fe96df0b19f153bf",
            "patch": "@@ -12,6 +12,7 @@ import { DarkTheme } from './styles/dark-theme'\n import { useDevToolsScale } from './components/errors/dev-tools-indicator/dev-tools-info/preferences'\n import type { HydrationErrorState } from '../shared/hydration-error'\n import { DevToolsIndicator as DevToolsIndicatorNew } from './components/devtools-indicator/devtools-indicator'\n+import { DevToolsPanel } from './components/devtools-panel/devtools-panel'\n \n export function DevOverlay({\n   state,\n@@ -38,13 +39,17 @@ export function DevOverlay({\n             <>\n               {state.showIndicator &&\n                 (process.env.__NEXT_DEVTOOL_NEW_PANEL_UI ? (\n-                  <DevToolsIndicatorNew\n-                    scale={scale}\n-                    state={state}\n-                    dispatch={dispatch}\n-                    errorCount={totalErrorCount}\n-                    isBuildError={isBuildError}\n-                  />\n+                  <>\n+                    <DevToolsIndicatorNew\n+                      scale={scale}\n+                      state={state}\n+                      dispatch={dispatch}\n+                      errorCount={totalErrorCount}\n+                      isBuildError={isBuildError}\n+                    />\n+\n+                    {state.isDevToolsPanelOpen && <DevToolsPanel />}\n+                  </>\n                 ) : (\n                   <DevToolsIndicator\n                     scale={scale}"
        },
        {
            "sha": "be38f44081883969a0ea9c27e1e61c0237e1d993",
            "filename": "packages/next/src/next-devtools/dev-overlay/shared.ts",
            "status": "modified",
            "additions": 30,
            "deletions": 0,
            "changes": 30,
            "blob_url": "https://github.com/vercel/next.js/blob/eade7d27078e35b243b01253fe96df0b19f153bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fshared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/eade7d27078e35b243b01253fe96df0b19f153bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fshared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fshared.ts?ref=eade7d27078e35b243b01253fe96df0b19f153bf",
            "patch": "@@ -29,6 +29,7 @@ export interface OverlayState {\n   debugInfo: DebugInfo\n   routerType: 'pages' | 'app'\n   isErrorOverlayOpen: boolean\n+  isDevToolsPanelOpen: boolean\n }\n export type OverlayDispatch = React.Dispatch<DispatcherEvent>\n \n@@ -42,14 +43,20 @@ export const ACTION_UNHANDLED_ERROR = 'unhandled-error'\n export const ACTION_UNHANDLED_REJECTION = 'unhandled-rejection'\n export const ACTION_DEBUG_INFO = 'debug-info'\n export const ACTION_DEV_INDICATOR = 'dev-indicator'\n+\n export const ACTION_ERROR_OVERLAY_OPEN = 'error-overlay-open'\n export const ACTION_ERROR_OVERLAY_CLOSE = 'error-overlay-close'\n export const ACTION_ERROR_OVERLAY_TOGGLE = 'error-overlay-toggle'\n+\n export const ACTION_BUILDING_INDICATOR_SHOW = 'building-indicator-show'\n export const ACTION_BUILDING_INDICATOR_HIDE = 'building-indicator-hide'\n export const ACTION_RENDERING_INDICATOR_SHOW = 'rendering-indicator-show'\n export const ACTION_RENDERING_INDICATOR_HIDE = 'rendering-indicator-hide'\n \n+export const ACTION_DEVTOOLS_PANEL_OPEN = 'devtools-panel-open'\n+export const ACTION_DEVTOOLS_PANEL_CLOSE = 'devtools-panel-close'\n+export const ACTION_DEVTOOLS_PANEL_TOGGLE = 'devtools-panel-toggle'\n+\n export const STORAGE_KEY_THEME = '__nextjs-dev-tools-theme'\n export const STORAGE_KEY_POSITION = '__nextjs-dev-tools-position'\n export const STORAGE_KEY_SCALE = '__nextjs-dev-tools-scale'\n@@ -121,6 +128,16 @@ export interface RenderingIndicatorHideAction {\n   type: typeof ACTION_RENDERING_INDICATOR_HIDE\n }\n \n+export interface DevToolsPanelOpenAction {\n+  type: typeof ACTION_DEVTOOLS_PANEL_OPEN\n+}\n+export interface DevToolsPanelCloseAction {\n+  type: typeof ACTION_DEVTOOLS_PANEL_CLOSE\n+}\n+export interface DevToolsPanelToggleAction {\n+  type: typeof ACTION_DEVTOOLS_PANEL_TOGGLE\n+}\n+\n export type DispatcherEvent =\n   | BuildOkAction\n   | BuildErrorAction\n@@ -139,6 +156,9 @@ export type DispatcherEvent =\n   | BuildingIndicatorHideAction\n   | RenderingIndicatorShowAction\n   | RenderingIndicatorHideAction\n+  | DevToolsPanelOpenAction\n+  | DevToolsPanelCloseAction\n+  | DevToolsPanelToggleAction\n \n const REACT_ERROR_STACK_BOTTOM_FRAME_REGEX =\n   // 1st group: v8\n@@ -177,6 +197,7 @@ export const INITIAL_OVERLAY_STATE: Omit<\n   refreshState: { type: 'idle' },\n   versionInfo: { installed: '0.0.0', staleness: 'unknown' },\n   debugInfo: { devtoolsFrontendUrl: undefined },\n+  isDevToolsPanelOpen: false,\n }\n \n function getInitialState(\n@@ -339,6 +360,15 @@ export function useErrorOverlayReducer(\n         case ACTION_RENDERING_INDICATOR_HIDE: {\n           return { ...state, renderingIndicator: false }\n         }\n+        case ACTION_DEVTOOLS_PANEL_OPEN: {\n+          return { ...state, isDevToolsPanelOpen: true }\n+        }\n+        case ACTION_DEVTOOLS_PANEL_CLOSE: {\n+          return { ...state, isDevToolsPanelOpen: false }\n+        }\n+        case ACTION_DEVTOOLS_PANEL_TOGGLE: {\n+          return { ...state, isDevToolsPanelOpen: !state.isDevToolsPanelOpen }\n+        }\n         default: {\n           return state\n         }"
        },
        {
            "sha": "29a7d148c51eb438963500aa850ff0478bc56d45",
            "filename": "packages/next/src/next-devtools/dev-overlay/styles/component-styles.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/eade7d27078e35b243b01253fe96df0b19f153bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstyles%2Fcomponent-styles.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/eade7d27078e35b243b01253fe96df0b19f153bf/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstyles%2Fcomponent-styles.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fstyles%2Fcomponent-styles.tsx?ref=eade7d27078e35b243b01253fe96df0b19f153bf",
            "patch": "@@ -24,6 +24,7 @@ import { DEV_TOOLS_INFO_USER_PREFERENCES_STYLES } from '../components/errors/dev\n import { DEV_TOOLS_INFO_RENDER_FILES_STYLES } from '../components/overview/segment-explorer'\n import { FADER_STYLES } from '../components/fader'\n import { RESTART_SERVER_BUTTON_STYLES } from '../components/errors/error-overlay-toolbar/restart-server-button'\n+import { DEVTOOLS_PANEL_STYLES } from '../components/devtools-panel/devtools-panel'\n \n export function ComponentStyles() {\n   return (\n@@ -54,6 +55,7 @@ export function ComponentStyles() {\n         ${DEV_TOOLS_INFO_USER_PREFERENCES_STYLES}\n         ${DEV_TOOLS_INFO_RENDER_FILES_STYLES}\n         ${FADER_STYLES}\n+        ${DEVTOOLS_PANEL_STYLES}\n       `}\n     </style>\n   )"
        }
    ],
    "stats": {
        "total": 83,
        "additions": 73,
        "deletions": 10
    }
}