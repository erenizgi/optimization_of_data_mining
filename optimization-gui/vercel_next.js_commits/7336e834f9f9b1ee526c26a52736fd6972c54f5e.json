{
    "author": "ztanner",
    "message": "[cache components]: show cache components enabled in DevTools (#85048)\n\nSimilar to how in DevTools we show if Turbopack is enabled, this shows\nthat Cache Components is enabled. In the future, we might have a similar\nCTA to suggest enabling the feature. For now it only shows if it's\nactually enabled.",
    "sha": "7336e834f9f9b1ee526c26a52736fd6972c54f5e",
    "files": [
        {
            "sha": "5ab12f1a8b7641c6ec90db0bed422ded30ae6f52",
            "filename": "packages/next/src/next-devtools/dev-overlay/menu/panel-router.tsx",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/7336e834f9f9b1ee526c26a52736fd6972c54f5e/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fmenu%2Fpanel-router.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/7336e834f9f9b1ee526c26a52736fd6972c54f5e/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fmenu%2Fpanel-router.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fmenu%2Fpanel-router.tsx?ref=7336e834f9f9b1ee526c26a52736fd6972c54f5e",
            "patch": "@@ -92,6 +92,11 @@ const MenuPanel = () => {\n               value: <ChevronRight />,\n               onClick: () => setPanel('turbo-info'),\n             },\n+        !!process.env.__NEXT_CACHE_COMPONENTS && {\n+          title: 'Cache Components is enabled.',\n+          label: 'Cache Components',\n+          value: 'Enabled',\n+        },\n         isAppRouter && {\n           label: 'Route Info',\n           value: <ChevronRight />,"
        },
        {
            "sha": "d7995665fd2cde2931c5c3959dfd2033faa8c0e1",
            "filename": "test/development/client-dev-overlay/index.test.ts",
            "status": "modified",
            "additions": 61,
            "deletions": 0,
            "changes": 61,
            "blob_url": "https://github.com/vercel/next.js/blob/7336e834f9f9b1ee526c26a52736fd6972c54f5e/test%2Fdevelopment%2Fclient-dev-overlay%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/7336e834f9f9b1ee526c26a52736fd6972c54f5e/test%2Fdevelopment%2Fclient-dev-overlay%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fclient-dev-overlay%2Findex.test.ts?ref=7336e834f9f9b1ee526c26a52736fd6972c54f5e",
            "patch": "@@ -156,3 +156,64 @@ describe('client-dev-overlay', () => {\n     }\n   })\n })\n+\n+describe('client-dev-overlay with Cache Components', () => {\n+  const { next, isTurbopack } = nextTestSetup({\n+    files: {\n+      pages: new FileRef(join(__dirname, 'pages')),\n+      'next.config.js': `\n+        module.exports = {\n+          cacheComponents: true,\n+        }\n+      `,\n+    },\n+    env: {\n+      __NEXT_DEV_INDICATOR_COOLDOWN_MS: '0',\n+    },\n+  })\n+\n+  it('should show Cache Components as enabled in the devtools menu', async () => {\n+    const browser = await next.browser('/')\n+\n+    const devToolsIndicator = await assertHasDevToolsIndicator(browser)\n+    try {\n+      await devToolsIndicator.click()\n+    } catch (cause) {\n+      const error = new Error('No DevTools Indicator to open.', { cause })\n+      throw error\n+    }\n+\n+    const devtoolsMenu = await browser.elementByCss('#nextjs-dev-tools-menu')\n+    const menuText = await devtoolsMenu.innerText()\n+\n+    // Should include Cache Components\n+    expect(menuText).toContain('Cache Components')\n+    expect(menuText).toContain('Enabled')\n+\n+    // Should also include Turbopack info\n+    if (isTurbopack) {\n+      expect(menuText).toMatchInlineSnapshot(`\n+       \"Issues\n+       1\n+       Route\n+       Static\n+       Turbopack\n+       Enabled\n+       Cache Components\n+       Enabled\n+       Preferences\"\n+      `)\n+    } else {\n+      expect(menuText).toMatchInlineSnapshot(`\n+       \"Issues\n+       1\n+       Route\n+       Static\n+       Try Turbopack\n+       Cache Components\n+       Enabled\n+       Preferences\"\n+      `)\n+    }\n+  })\n+})"
        }
    ],
    "stats": {
        "total": 66,
        "additions": 66,
        "deletions": 0
    }
}