{
    "author": "leerob",
    "message": "docs: remove Vercel mentions and improve deployment page (#78557)\n\nThis PR prunes references to Vercel in the documentation. Some of the\nmentions were egregious and unneeded. Others were documenting specific\nbehavior for how Next.js runs on Vercel, which is better suited for the\nVercel documentation.\n\nIt also restructures our deployment documentation to remove any previous\nbias toward Vercel. Rather than separating self-hosting (Node.js server,\nDocker, static export) into its own section from managed platforms, it\nnow lists them all together. Vercel is listed under \"Adapters\",\nalongside Netlify, Cloudflare, and AWS Amplify (in alphabetical order).\nThese are the companies we're working with on the [Deployment Adapters\nAPI](https://github.com/vercel/next.js/discussions/77740), who currently\nmaintain their own adapters and will eventually migrate to use this new\nAPI. We've [started working\non](https://github.com/vercel/next.js/pull/78166) that API.\n\nFor different features in the docs, like ISR or Middleware, this PR also\nadds a new feature matrix that shows the different deployment options\nand whether this feature is supported. For example, features that\nrequire using the server are not supported with static exports.\nAdditionally, when there is configuration possible (like changing the\ncaching behavior of ISR) we link back to our guide which explains these\noptions in detail.\n\n\n![image](https://github.com/user-attachments/assets/6dff819b-c46f-4b1a-833c-0827c6ef8735)\n\nThis PR also updates the Middleware section of the self-hosting guide to\nmention [Node.js runtime\nsupport](https://nextjs.org/blog/next-15-2#nodejs-middleware-experimental).\n\nI've also removed the \"Managed Next.js (Vercel)\" entry for the docs\nsidebar, as it is not necessary and Vercel should not have additional\npriority there over other providers.\n\n\n![image](https://github.com/user-attachments/assets/6d3291b8-f9bd-47e7-a21e-b843c0e1ef0c)\n\n\nNetlify has confirmed they're okay with the specific feature matrix link\nincluded in the adapters section, and I did my best to include the\nCloudflare and Amplify versions based on their documentation. If any of\nthe providers want to see changes to those links, please let me know and\nI'll open a PR.",
    "sha": "27d2fa2838655d0109ef83dae8987f9150188f6f",
    "files": [
        {
            "sha": "909891dbcabbef04e9b80e7986df2f91d2db472d",
            "filename": "docs/01-app/01-getting-started/11-deploying.mdx",
            "status": "modified",
            "additions": 56,
            "deletions": 19,
            "changes": 75,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F01-getting-started%2F11-deploying.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F01-getting-started%2F11-deploying.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F01-getting-started%2F11-deploying.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -4,40 +4,77 @@ nav_title: Deploying\n description: Learn how to deploy your Next.js application.\n ---\n \n-Once you're ready to deploy your Next.js app, you can choose a [managed infrastructure provider](#managed-infrastructure-providers) or [self-host](#self-hosting) your application.\n+Next.js can be deployed as a Node.js server, Docker container, static export, or adapted to run on different platforms.\n \n-## Managed infrastructure providers\n+| Deployment Option                | Feature Support   |\n+| -------------------------------- | ----------------- |\n+| [Node.js server](#nodejs-server) | All               |\n+| [Docker container](#docker)      | All               |\n+| [Static export](#static-export)  | Limited           |\n+| [Adapters](#adapters)            | Platform-specific |\n \n-A managed platform is a practical option for deploying your Next.js app, as these providers take care of hosting, scaling, and server configuration for you.\n+## Node.js server\n \n-[Vercel](https://vercel.com/docs/frameworks/nextjs?utm_source=next-site&utm_medium=docs&utm_campaign=next-website), the creators and maintainers of Next.js, allows you to deploy your application with **full-feature support** and **zero-configuration**.\n+Next.js can be deployed to any provider that supports Node.js. Ensure your `package.json` has the `\"build\"` and `\"start\"` scripts:\n \n-- Learn more about [Next.js on Vercel](https://vercel.com/docs/frameworks/nextjs?utm_source=next-site&utm_medium=docs&utm_campaign=next-website).\n-- Try Next.js on Vercel by [deploying a template](https://vercel.com/templates/next.js?utm_source=next-site&utm_medium=docs&utm_campaign=next-website).\n+```json filename=\"package.json\"\n+{\n+  \"scripts\": {\n+    \"dev\": \"next dev\",\n+    \"build\": \"next build\",\n+    \"start\": \"next start\"\n+  }\n+}\n+```\n \n-We also have community maintained deployment templates for:\n+Then, run `npm run build` to build your application and `npm run start` to start the Node.js server. This server supports all Next.js features. If needed, you can also eject to a [custom server](/docs/app/guides/custom-server).\n+\n+Node.js deployments support all Next.js features. Learn how to [configure them](/docs/app/guides/self-hosting) for your infrastructure.\n+\n+### Templates\n \n-- [Deno](https://github.com/nextjs/deploy-deno)\n - [Flightcontrol](https://github.com/nextjs/deploy-flightcontrol)\n - [Railway](https://github.com/nextjs/deploy-railway)\n+- [Replit](https://github.com/nextjs/deploy-replit)\n+\n+## Docker\n+\n+Next.js can be deployed to any provider that supports [Docker](https://www.docker.com/) containers. This includes container orchestrators like Kubernetes or a cloud provider that runs Docker.\n+\n+Docker deployments support all Next.js features. Learn how to [configure them](/docs/app/guides/self-hosting) for your infrastructure.\n+\n+### Templates\n+\n+- [Docker](https://github.com/vercel/next.js/tree/canary/examples/with-docker)\n+- [Docker Multi-Environment](https://github.com/vercel/next.js/tree/canary/examples/with-docker-multi-env)\n+- [DigitalOcean](https://github.com/nextjs/deploy-digitalocean)\n+- [Fly.io](https://github.com/nextjs/deploy-fly)\n+- [Google Cloud Run](https://github.com/nextjs/deploy-google-cloud-run)\n - [Render](https://github.com/nextjs/deploy-render)\n - [SST](https://github.com/nextjs/deploy-sst)\n \n-Please refer to each provider's documentation for information on supported Next.js features.\n+## Static export\n \n-## Self-Hosting\n+Next.js enables starting as a static site or [Single-Page Application (SPA)](/docs/app/guides/single-page-applications), then later optionally upgrading to use features that require a server.\n \n-Self-hosting may mean you're responsible for provisioning your own servers, managing containers, and scaling. You can self-host Next.js in three different ways:\n+Since Next.js supports [static exports](/docs/app/guides/static-exports), it can be deployed and hosted on any web server that can serve HTML/CSS/JS static assets. This includes tools like AWS S3, Nginx, or Apache.\n \n-- [A Node.js server](/docs/app/guides/self-hosting#nodejs-server)\n-- [A Docker container](/docs/app/guides/self-hosting#docker-image)\n-- [A static export](/docs/app/guides/self-hosting#static-html-export)\n+Running as a [static export](/docs/app/guides/static-exports) **does not** support Next.js features that require a server. [Learn more](/docs/app/guides/static-exports#unsupported-features).\n \n-We have community maintained deployment examples with the following self-hosting providers:\n+### Templates\n \n-- [DigitalOcean](https://github.com/nextjs/deploy-digitalocean)\n-- [Fly.io](https://github.com/nextjs/deploy-fly)\n - [GitHub Pages](https://github.com/nextjs/deploy-github-pages)\n-- [Google Cloud Run](https://github.com/nextjs/deploy-google-cloud-run)\n \n-> **ðŸŽ¥ Watch:** Learn more about self-hosting Next.js â†’ [YouTube (45 minutes)](https://www.youtube.com/watch?v=sIVL4JMqRfc).\n+## Adapters\n+\n+Next.js can be adapted to run on different platforms to support their infrastructure capabilities.\n+\n+Refer to each provider's documentation for information on supported Next.js features:\n+\n+- [AWS Amplify](https://docs.amplify.aws/nextjs/start/quickstart/nextjs-app-router-client-components)\n+- [Cloudflare](https://developers.cloudflare.com/pages/framework-guides/nextjs/ssr/supported-features)\n+- [Deno Deploy](https://docs.deno.com/examples/next_tutorial)\n+- [Netlify](https://docs.netlify.com/frameworks/next-js/overview/#next-js-support-on-netlify)\n+- [Vercel](https://vercel.com/docs/frameworks/nextjs)\n+\n+> **Note:** We are working on a [Deployment Adapters API](https://github.com/vercel/next.js/discussions/77740) for all platforms to adopt. After completion, we will add documentation on how to write your own adapters."
        },
        {
            "sha": "05406f2dc73a73eaf948bd70aa3323bb19c177bd",
            "filename": "docs/01-app/02-guides/authentication.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F02-guides%2Fauthentication.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F02-guides%2Fauthentication.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fauthentication.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -949,7 +949,7 @@ export async function createSession(id) {\n \n > **Tips**:\n >\n-> - For faster data retrieval, consider using a database like [Vercel Redis](https://vercel.com/docs/storage/vercel-kv). However, you can also keep the session data in your primary database, and combine data requests to reduce the number of queries.\n+> - For faster access, you may consider adding server caching for the lifetime of the session. You can also keep the session data in your primary database, and combine data requests to reduce the number of queries.\n > - You may opt to use database sessions for more advanced use cases, such as keeping track of the last time a user logged in, or number of active devices, or give users the ability to log out of all devices.\n \n After implementing session management, you'll need to add authorization logic to control what users can access and do within your application. Continue to the [Authorization](#authorization) section to learn more."
        },
        {
            "sha": "85842910090f3117cd91256bb35ff8a2ca24f728",
            "filename": "docs/01-app/02-guides/custom-server.mdx",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F02-guides%2Fcustom-server.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F02-guides%2Fcustom-server.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fcustom-server.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -11,7 +11,6 @@ Next.js includes its own server with `next start` by default. If you have an exi\n > **Good to know**:\n >\n > - Before deciding to use a custom server, keep in mind that it should only be used when the integrated router of Next.js can't meet your app requirements. A custom server will remove important performance optimizations, like **[Automatic Static Optimization](/docs/pages/building-your-application/rendering/automatic-static-optimization).**\n-> - A custom server **cannot** be deployed on [Vercel](https://vercel.com/frameworks/nextjs).\n > - When using standalone output mode, it does not trace custom server files. This mode outputs a separate minimal `server.js` file, instead. These cannot be used together.\n \n Take a look at the [following example](https://github.com/vercel/next.js/tree/canary/examples/custom-server) of a custom server:"
        },
        {
            "sha": "f02921143ff190d9b20726bf3f97a8dcea591399",
            "filename": "docs/01-app/02-guides/environment-variables.mdx",
            "status": "modified",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F02-guides%2Fenvironment-variables.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F02-guides%2Fenvironment-variables.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fenvironment-variables.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -230,20 +230,6 @@ This allows you to use a singular Docker image that can be promoted through mult\n - You can run code on server startup using the [`register` function](/docs/app/guides/instrumentation).\n - We do not recommend using the [`runtimeConfig`](/docs/pages/api-reference/config/next-config-js/runtime-configuration) option, as this does not work with the standalone output mode. Instead, we recommend [incrementally adopting](/docs/app/guides/migrating/app-router-migration) the App Router if you need this feature.\n \n-## Environment Variables on Vercel\n-\n-When deploying your Next.js application to [Vercel](https://vercel.com), Environment Variables can be configured [in the Project Settings](https://vercel.com/docs/projects/environment-variables?utm_medium=docs&utm_source=next-site&utm_campaign=next-website).\n-\n-All types of Environment Variables should be configured there. Even Environment Variables used in Development â€“ which can be [downloaded onto your local device](https://vercel.com/docs/concepts/projects/environment-variables#development-environment-variables?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) afterwards.\n-\n-If you've configured [Development Environment Variables](https://vercel.com/docs/concepts/projects/environment-variables#development-environment-variables?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) you can pull them into a `.env.local` for usage on your local machine using the following command:\n-\n-```bash filename=\"Terminal\"\n-vercel env pull\n-```\n-\n-> **Good to know**: When deploying your Next.js application to [Vercel](https://vercel.com), your environment variables in `.env*` files will not be made available to Edge Runtime, unless their name are prefixed with `NEXT_PUBLIC_`. We strongly recommend managing your environment variables in [Project Settings](https://vercel.com/docs/projects/environment-variables?utm_medium=docs&utm_source=next-site&utm_campaign=next-website) instead, from where all environment variables are available.\n-\n ## Test Environment Variables\n \n Apart from `development` and `production` environments, there is a 3rd option available: `test`. In the same way you can set defaults for development or production environments, you can do the same with a `.env.test` file for the `testing` environment (though this one is not as common as the previous two). Next.js will not load environment variables from `.env.development` or `.env.production` in the `testing` environment."
        },
        {
            "sha": "6b8c77bc56ac92987d06c2acf7933e108d0fadd8",
            "filename": "docs/01-app/02-guides/index.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F02-guides%2Findex.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F02-guides%2Findex.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Findex.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -57,7 +57,7 @@ description: Learn how to implement common UI patterns and use cases using Next.\n \n ### Deployment\n \n-- [Creating a Dockerfile](/docs/app/guides/self-hosting#docker-image)\n+- [Creating a Dockerfile](/docs/app/getting-started/deploying#docker)\n - [Creating a static export (SPA)](/docs/app/guides/static-exports)\n - [Configuring caching when self-hosting](/docs/app/guides/self-hosting#configuring-caching)\n - [Configuring Image Optimization when self-hosting](/docs/app/guides/self-hosting#image-optimization)"
        },
        {
            "sha": "382acedc4cc14861cc3a8704b2361a52c1ee2896",
            "filename": "docs/01-app/02-guides/multi-zones.mdx",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F02-guides%2Fmulti-zones.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F02-guides%2Fmulti-zones.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fmulti-zones.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -117,8 +117,6 @@ The Next.js applications that make up the different zones can live in any reposi\n \n Since the pages in different zones may be released at different times, feature flags can be useful for enabling or disabling features in unison across the different zones.\n \n-For [Next.js on Vercel](https://vercel.com?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) applications, you can use a [monorepo](https://vercel.com/blog/monorepos-are-changing-how-teams-build-software?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) to deploy all affected zones with a single `git push`.\n-\n <AppOnly>\n \n ## Server Actions"
        },
        {
            "sha": "3dacd847671cd1488a15b075b34da2d54019d728",
            "filename": "docs/01-app/02-guides/production-checklist.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 17,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F02-guides%2Fproduction-checklist.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F02-guides%2Fproduction-checklist.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fproduction-checklist.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -6,7 +6,7 @@ description: Recommendations to ensure the best performance and user experience\n \n Before taking your Next.js application to production, there are some optimizations and patterns you should consider implementing for the best user experience, performance, and security.\n \n-This page provides best practices that you can use as a reference when [building your application](#during-development), [before going to production](#before-going-to-production), and [after deployment](#after-deployment) - as well as the [automatic Next.js optimizations](#automatic-optimizations) you should be aware of.\n+This page provides best practices that you can use as a reference when [building your application](#during-development) and [before going to production](#before-going-to-production), as well as the [automatic Next.js optimizations](#automatic-optimizations) you should be aware of.\n \n ## Automatic optimizations\n \n@@ -148,19 +148,3 @@ Additionally, the following tools can help you understand the impact of adding n\n - [Package Phobia](https://packagephobia.com/)\n - [Bundle Phobia](https://bundlephobia.com/)\n - [bundlejs](https://bundlejs.com/)\n-\n-## After deployment\n-\n-Depending on where you deploy your application, you might have access to additional tools and integrations to help you monitor and improve your application's performance.\n-\n-For Vercel deployments, we recommend the following:\n-\n-- **[Analytics](https://vercel.com/analytics?utm_source=next-site&utm_campaign=nextjs-docs&utm_medium=docs):** A built-in analytics dashboard to help you understand your application's traffic, including the number of unique visitors, page views, and more.\n-- **[Speed Insights](https://vercel.com/docs/speed-insights?utm_source=next-site&utm_campaign=nextjs-docs&utm_medium=docs):** Real-world performance insights based on visitor data, offering a practical view of how your website is performing in the field.\n-- **[Logging](https://vercel.com/docs/observability/runtime-logs?utm_source=next-site&utm_campaign=nextjs-docs&utm_medium=docs):** Runtime and Activity logs to help you debug issues and monitor your application in production. Alternatively, see the [integrations page](https://vercel.com/integrations?utm_source=next-site&utm_campaign=nextjs-docs&utm_medium=docs) for a list of third-party tools and services.\n-\n-> **Good to know:**\n->\n-> To get a comprehensive understanding of the best practices for production deployments on Vercel, including detailed strategies for improving website performance, refer to the [Vercel Production Checklist](https://vercel.com/docs/production-checklist?utm_source=next-site&utm_campaign=nextjs-docs&utm_medium=docs).\n-\n-Following these recommendations will help you build a faster, more reliable, and secure application for your users."
        },
        {
            "sha": "5e28a621d16f5409168b271e7db1db1407717269",
            "filename": "docs/01-app/02-guides/self-hosting.mdx",
            "status": "modified",
            "additions": 18,
            "deletions": 135,
            "changes": 153,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F02-guides%2Fself-hosting.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F02-guides%2Fself-hosting.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fself-hosting.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -6,60 +6,11 @@ description: Learn how to self-host your Next.js application on a Node.js server\n \n {/* The content of this doc is shared between the app and pages router. You can use the `<PagesOnly>Content</PagesOnly>` component to add content that is specific to the Pages Router. Any shared content should not be wrapped in a component. */}\n \n-You can self-host Next.js in three different ways:\n-\n-- [A Node.js server](#nodejs-server)\n-- [A Docker container](#docker-image)\n-- [A static export](#static-html-export)\n+When [deploying](docs/app/getting-started/deploying) your Next.js app, you may want to configure how different features are handled based on your infrastructure.\n \n > **ðŸŽ¥ Watch:** Learn more about self-hosting Next.js â†’ [YouTube (45 minutes)](https://www.youtube.com/watch?v=sIVL4JMqRfc).\n \n-## Production Builds\n-\n-Running `next build` generates an optimized version of your application for production. HTML, CSS, and JavaScript files are created based on your pages. JavaScript is **compiled** and browser bundles are **minified** using the [Next.js Compiler](/docs/architecture/nextjs-compiler) to help achieve the best performance and support [all modern browsers](/docs/architecture/supported-browsers).\n-\n-### Node.js Server\n-\n-Next.js can be deployed to any hosting provider that supports Node.js. Ensure your `package.json` has the `\"build\"` and `\"start\"` scripts:\n-\n-```json filename=\"package.json\"\n-{\n-  \"scripts\": {\n-    \"dev\": \"next dev\",\n-    \"build\": \"next build\",\n-    \"start\": \"next start\"\n-  }\n-}\n-```\n-\n-Then, run `npm run build` to build your application. Finally, run `npm run start` to start the Node.js server. This server supports all Next.js features.\n-\n-### Docker Image\n-\n-Next.js can be deployed to any hosting provider that supports [Docker](https://www.docker.com/) containers. You can use this approach when deploying to container orchestrators such as [Kubernetes](https://kubernetes.io/) or when running inside a container in any cloud provider.\n-\n-1. [Install Docker](https://docs.docker.com/get-docker/) on your machine\n-2. [Clone our example](https://github.com/vercel/next.js/tree/canary/examples/with-docker) (or the [multi-environment example](https://github.com/vercel/next.js/tree/canary/examples/with-docker-multi-env))\n-3. Build your container: `docker build -t nextjs-docker .`\n-4. Run your container: `docker run -p 3000:3000 nextjs-docker`\n-\n-Next.js through Docker supports all Next.js features.\n-\n-### Static HTML Export\n-\n-Next.js enables starting as a static site or Single-Page Application (SPA), then later optionally upgrading to use features that require a server.\n-\n-Since Next.js supports this [static export](/docs/app/guides/static-exports), it can be deployed and hosted on any web server that can serve HTML/CSS/JS static assets. This includes tools like AWS S3, Nginx, or Apache.\n-\n-Running as a [static export](/docs/app/guides/static-exports) does not support Next.js features that require a server. [Learn more](/docs/app/guides/static-exports#unsupported-features).\n-\n-> **Good to know:**\n->\n-> - [Server Components](/docs/app/building-your-application/rendering/server-components) are supported with static exports.\n-\n-## Features\n-\n-### Image Optimization\n+## Image Optimization\n \n [Image Optimization](/docs/app/building-your-application/optimizing/images) through `next/image` works self-hosted with zero configuration when deploying using `next start`. If you would prefer to have a separate service to optimize images, you can [configure an image loader](/docs/app/building-your-application/optimizing/images#loaders).\n \n@@ -71,15 +22,15 @@ Image Optimization can be used with a [static export](/docs/app/guides/static-ex\n > - Learn more about the [caching behavior of optimized images](/docs/app/api-reference/components/image#caching-behavior) and how to configure the TTL.\n > - You can also [disable Image Optimization](/docs/app/api-reference/components/image#unoptimized) and still retain other benefits of using `next/image` if you prefer. For example, if you are optimizing images yourself separately.\n \n-### Middleware\n+## Middleware\n \n [Middleware](/docs/app/building-your-application/routing/middleware) works self-hosted with zero configuration when deploying using `next start`. Since it requires access to the incoming request, it is not supported when using a [static export](/docs/app/guides/static-exports).\n \n-Middleware uses a [runtime](/docs/app/building-your-application/rendering/edge-and-nodejs-runtimes) that is a subset of all available Node.js APIs to help ensure low latency, since it may run in front of every route or asset in your application. This runtime does not require running â€œat the edgeâ€ and works in a single-region server. Additional configuration and infrastructure are required to run Middleware in multiple regions.\n+Middleware uses a [runtime](/docs/app/building-your-application/rendering/edge-and-nodejs-runtimes) that is a subset of all available Node.js APIs to help ensure low latency, since it may run in front of every route or asset in your application. If you do not want this, you can use the [full Node.js runtime](/blog/next-15-2#nodejs-middleware-experimental) to run Middleware.\n \n If you are looking to add logic (or use an external package) that requires all Node.js APIs, you might be able to move this logic to a [layout](/docs/app/building-your-application/routing/layouts-and-templates#layouts) as a [Server Component](/docs/app/building-your-application/rendering/server-components). For example, checking [headers](/docs/app/api-reference/functions/headers) and [redirecting](/docs/app/api-reference/functions/redirect). You can also use headers, cookies, or query parameters to [redirect](/docs/app/api-reference/config/next-config-js/redirects#header-cookie-and-query-matching) or [rewrite](/docs/app/api-reference/config/next-config-js/rewrites#header-cookie-and-query-matching) through `next.config.js`. If that does not work, you can also use a [custom server](/docs/pages/guides/custom-server).\n \n-### Environment Variables\n+## Environment Variables\n \n Next.js can support both build time and runtime environment variables.\n \n@@ -130,27 +81,27 @@ This allows you to use a singular Docker image that can be promoted through mult\n > - You can run code on server startup using the [`register` function](/docs/app/guides/instrumentation).\n > - We do not recommend using the [runtimeConfig](/docs/pages/api-reference/config/next-config-js/runtime-configuration) option, as this does not work with the standalone output mode. Instead, we recommend [incrementally adopting](/docs/app/guides/migrating/app-router-migration) the App Router.\n \n-### Caching and ISR\n+## Caching and ISR\n \n Next.js can cache responses, generated static pages, build outputs, and other static assets like images, fonts, and scripts.\n \n Caching and revalidating pages (with [Incremental Static Regeneration](/docs/app/building-your-application/data-fetching/incremental-static-regeneration)) use the **same shared cache**. By default, this cache is stored to the filesystem (on disk) on your Next.js server. **This works automatically when self-hosting** using both the Pages and App Router.\n \n You can configure the Next.js cache location if you want to persist cached pages and data to durable storage, or share the cache across multiple containers or instances of your Next.js application.\n \n-#### Automatic Caching\n+### Automatic Caching\n \n - Next.js sets the `Cache-Control` header of `public, max-age=31536000, immutable` to truly immutable assets. It cannot be overridden. These immutable files contain a SHA-hash in the file name, so they can be safely cached indefinitely. For example, [Static Image Imports](/docs/app/building-your-application/optimizing/images#local-images). You can [configure the TTL](/docs/app/api-reference/components/image#caching-behavior) for images.\n - Incremental Static Regeneration (ISR) sets the `Cache-Control` header of `s-maxage: <revalidate in getStaticProps>, stale-while-revalidate`. This revalidation time is defined in your [`getStaticProps` function](/docs/pages/building-your-application/data-fetching/get-static-props) in seconds. If you set `revalidate: false`, it will default to a one-year cache duration.\n - Dynamically rendered pages set a `Cache-Control` header of `private, no-cache, no-store, max-age=0, must-revalidate` to prevent user-specific data from being cached. This applies to both the App Router and Pages Router. This also includes [Draft Mode](/docs/app/guides/draft-mode).\n \n-#### Static Assets\n+### Static Assets\n \n If you want to host static assets on a different domain or CDN, you can use the `assetPrefix` [configuration](/docs/app/api-reference/config/next-config-js/assetPrefix) in `next.config.js`. Next.js will use this asset prefix when retrieving JavaScript or CSS files. Separating your assets to a different domain does come with the downside of extra time spent on DNS and TLS resolution.\n \n [Learn more about `assetPrefix`](/docs/app/api-reference/config/next-config-js/assetPrefix).\n \n-#### Configuring Caching\n+### Configuring Caching\n \n By default, generated cache assets will be stored in memory (defaults to 50mb) and on disk. If you are hosting Next.js using a container orchestration platform like Kubernetes, each pod will have a copy of the cache. To prevent stale data from being shown since the cache is not shared between pods by default, you can configure the Next.js cache to provide a cache handler and disable in-memory caching.\n \n@@ -211,7 +162,7 @@ Using a custom cache handler will allow you to ensure consistency across all pod\n >\n > - `revalidatePath` is a convenience layer on top of cache tags. Calling `revalidatePath` will call the `revalidateTag` function with a special default tag for the provided page.\n \n-### Build Cache\n+## Build Cache\n \n Next.js generates an ID during `next build` to identify which version of your application is being served. The same build should be used and boot up multiple containers.\n \n@@ -226,19 +177,15 @@ module.exports = {\n }\n ```\n \n-### Version Skew\n+## Version Skew\n \n Next.js will automatically mitigate most instances of [version skew](https://www.industrialempathy.com/posts/version-skew/) and automatically reload the application to retrieve new assets when detected. For example, if there is a mismatch in the `deploymentId`, transitions between pages will perform a hard navigation versus using a prefetched value.\n \n When the application is reloaded, there may be a loss of application state if it's not designed to persist between page navigations. For example, using URL state or local storage would persist state after a page refresh. However, component state like `useState` would be lost in such navigations.\n \n-Vercel provides additional [skew protection](https://vercel.com/docs/deployments/skew-protection?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) for Next.js applications to ensure assets and functions from the previous version are still available to older clients, even after the new version is deployed.\n-\n-You can manually configure the `deploymentId` property in your `next.config.js` file to ensure each request uses either `?dpl` query string or `x-deployment-id` header.\n-\n <AppOnly>\n \n-### Streaming and Suspense\n+## Streaming and Suspense\n \n The Next.js App Router supports [streaming responses](/docs/app/building-your-application/routing/loading-ui-and-streaming) when self-hosting. If you are using Nginx or a similar proxy, you will need to configure it to disable buffering to enable streaming.\n \n@@ -262,78 +209,28 @@ module.exports = {\n }\n ```\n \n-### Partial Prerendering\n+## Partial Prerendering\n \n-[Partial Prerendering (experimental)](/docs/app/building-your-application/rendering/partial-prerendering) works by default with Next.js and is not a CDN feature. This includes deployment as a Node.js server (through `next start`) and when used with a Docker container.\n+[Partial Prerendering (experimental)](/docs/app/building-your-application/rendering/partial-prerendering) works by default with Next.js and is not a CDN-only feature. This includes deployment as a Node.js server (through `next start`) and when used with a Docker container.\n \n-### Usage with CDNs\n+## Usage with CDNs\n \n When using a CDN in front on your Next.js application, the page will include `Cache-Control: private` response header when dynamic APIs are accessed. This ensures that the resulting HTML page is marked as non-cachable. If the page is fully prerendered to static, it will include `Cache-Control: public` to allow the page to be cached on the CDN.\n \n If you don't need a mix of both static and dynamic components, you can make your entire route static and cache the output HTML on a CDN. This Automatic Static Optimization is the default behavior when running `next build` if dynamic APIs are not used.\n \n+As Partial Prerendering moves to stable, we will provide support through the Deployment Adapters API.\n+\n </AppOnly>\n \n <AppOnly>\n \n-### `after`\n+## `after`\n \n [`after`](/docs/app/api-reference/functions/after) is fully supported when self-hosting with `next start`.\n \n When stopping the server, ensure a graceful shutdown by sending `SIGINT` or `SIGTERM` signals and waiting. This allows the Next.js server to wait until after pending callback functions or promises used inside `after` have finished.\n \n-If you want to use `after` on custom infrastructure, check your provider documentation to view support for `after`.\n-\n-<details id=\"after-serverless\">\n-  <summary>Reference: supporting `after` for serverless platforms</summary>\n-  Using `after` in a serverless context requires waiting for asynchronous tasks to finish after the response has been sent. In Next.js and Vercel, this is achieved using a primitive called `waitUntil(promise)`, which extends the lifetime of a serverless invocation until all promises passed to [`waitUntil`](https://vercel.com/docs/functions/functions-api-reference#waituntil) have settled.\n-\n-If you want your users to be able to run `after`, you will have to provide your implementation of `waitUntil` that behaves in an analogous way.\n-\n-When `after` is called, Next.js will access `waitUntil` like this:\n-\n-```jsx\n-const RequestContext = globalThis[Symbol.for('@next/request-context')]\n-const contextValue = RequestContext?.get()\n-const waitUntil = contextValue?.waitUntil\n-```\n-\n-Which means that `globalThis[Symbol.for('@next/request-context')]` is expected to contain an object like this:\n-\n-```tsx\n-type NextRequestContext = {\n-  get(): NextRequestContextValue | undefined\n-}\n-\n-type NextRequestContextValue = {\n-  waitUntil?: (promise: Promise<any>) => void\n-}\n-```\n-\n-Here is an example of the implementation.\n-\n-```tsx\n-import { AsyncLocalStorage } from 'node:async_hooks'\n-\n-const RequestContextStorage = new AsyncLocalStorage<NextRequestContextValue>()\n-\n-// Define and inject the accessor that next.js will use\n-const RequestContext: NextRequestContext = {\n-  get() {\n-    return RequestContextStorage.getStore()\n-  },\n-}\n-globalThis[Symbol.for('@next/request-context')] = RequestContext\n-\n-const handler = (req, res) => {\n-  const contextValue = { waitUntil: YOUR_WAITUNTIL }\n-  // Provide the value\n-  return RequestContextStorage.run(contextValue, () => nextJsHandler(req, res))\n-}\n-```\n-\n-</details>\n-\n </AppOnly>\n \n <PagesOnly>\n@@ -370,17 +267,3 @@ if (process.env.NEXT_MANUAL_SIG_HANDLE) {\n ```\n \n </PagesOnly>\n-\n-## Examples\n-\n-We have community maintained deployment examples with the following providers:\n-\n-- [Deno](https://github.com/nextjs/deploy-deno)\n-- [DigitalOcean](https://github.com/nextjs/deploy-digitalocean)\n-- [Flightcontrol](https://github.com/nextjs/deploy-flightcontrol)\n-- [Fly.io](https://github.com/nextjs/deploy-fly)\n-- [GitHub Pages](https://github.com/nextjs/deploy-github-pages)\n-- [Google Cloud Run](https://github.com/nextjs/deploy-google-cloud-run)\n-- [Railway](https://github.com/nextjs/deploy-railway)\n-- [Render](https://github.com/nextjs/deploy-render)\n-- [SST](https://github.com/nextjs/deploy-sst)"
        },
        {
            "sha": "6d81d7995582cb932bbe181e0da4a77d55aa2903",
            "filename": "docs/01-app/03-building-your-application/01-routing/06-loading-ui-and-streaming.mdx",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F03-building-your-application%2F01-routing%2F06-loading-ui-and-streaming.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F03-building-your-application%2F01-routing%2F06-loading-ui-and-streaming.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-building-your-application%2F01-routing%2F06-loading-ui-and-streaming.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -182,3 +182,14 @@ For more Suspense examples and use cases, please see the [React Documentation](h\n When streaming, a `200` status code will be returned to signal that the request was successful.\n \n The server can still communicate errors or issues to the client within the streamed content itself, for example, when using [`redirect`](/docs/app/api-reference/functions/redirect) or [`notFound`](/docs/app/api-reference/functions/not-found). Since the response headers have already been sent to the client, the status code of the response cannot be updated. This does not affect SEO.\n+\n+## Platform Support\n+\n+| Deployment Option                                                   | Supported         |\n+| ------------------------------------------------------------------- | ----------------- |\n+| [Node.js server](/docs/app/getting-started/deploying#nodejs-server) | Yes               |\n+| [Docker container](/docs/app/getting-started/deploying#docker)      | Yes               |\n+| [Static export](/docs/app/getting-started/deploying#static-export)  | No                |\n+| [Adapters](/docs/app/getting-started/deploying#adapters)            | Platform-specific |\n+\n+Learn how to [configure streaming](/docs/app/guides/self-hosting#streaming-and-suspense) when self-hosting Next.js."
        },
        {
            "sha": "de11dcdc36f6f292351068ddf648717cfad1d71d",
            "filename": "docs/01-app/03-building-your-application/01-routing/07-redirecting.mdx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F03-building-your-application%2F01-routing%2F07-redirecting.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F03-building-your-application%2F01-routing%2F07-redirecting.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-building-your-application%2F01-routing%2F07-redirecting.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -375,7 +375,7 @@ Consider the following data structure:\n }\n ```\n \n-In [Middleware](/docs/app/building-your-application/routing/middleware), you can read from a database such as Vercel's [Edge Config](https://vercel.com/docs/storage/edge-config/get-started?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) or [Redis](https://vercel.com/docs/storage/vercel-kv?utm_source=next-site&utm_medium=docs&utm_campaign=next-website), and redirect the user based on the incoming request:\n+In [Middleware](/docs/app/building-your-application/routing/middleware), you can read from a database such as Vercel's [Edge Config](https://vercel.com/docs/edge-config/get-started) or [Redis](https://vercel.com/docs/redis), and redirect the user based on the incoming request:\n \n ```ts filename=\"middleware.ts\" switcher\n import { NextResponse, NextRequest } from 'next/server'\n@@ -424,7 +424,7 @@ export async function middleware(request) {\n \n Reading a large dataset for every incoming request can be slow and expensive. There are two ways you can optimize data lookup performance:\n \n-- Use a database that is optimized for fast reads, such as [Vercel Edge Config](https://vercel.com/docs/storage/edge-config/get-started?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) or [Redis](https://vercel.com/docs/storage/vercel-kv?utm_source=next-site&utm_medium=docs&utm_campaign=next-website).\n+- Use a database that is optimized for fast reads\n - Use a data lookup strategy such as a [Bloom filter](https://en.wikipedia.org/wiki/Bloom_filter) to efficiently check if a redirect exists **before** reading the larger redirects file or database.\n \n Considering the previous example, you can import a generated bloom filter file into Middleware, then, check if the incoming request pathname exists in the bloom filter."
        },
        {
            "sha": "a535e696274a934676f0fa7e3197ca4fb6dadb69",
            "filename": "docs/01-app/03-building-your-application/01-routing/14-middleware.mdx",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F03-building-your-application%2F01-routing%2F14-middleware.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F03-building-your-application%2F01-routing%2F14-middleware.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-building-your-application%2F01-routing%2F14-middleware.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -638,6 +638,17 @@ export const config = {\n \n > **Note**: This feature is not yet recommended for production use. Therefore, Next.js will throw an error unless you are using the next@canary release instead of the stable release.\n \n+## Platform Support\n+\n+| Deployment Option                                                   | Supported         |\n+| ------------------------------------------------------------------- | ----------------- |\n+| [Node.js server](/docs/app/getting-started/deploying#nodejs-server) | Yes               |\n+| [Docker container](/docs/app/getting-started/deploying#docker)      | Yes               |\n+| [Static export](/docs/app/getting-started/deploying#static-export)  | No                |\n+| [Adapters](/docs/app/getting-started/deploying#adapters)            | Platform-specific |\n+\n+Learn how to [configure Middleware](/docs/app/guides/self-hosting#middleware) when self-hosting Next.js.\n+\n ## Version History\n \n | Version   | Changes                                                                                       |"
        },
        {
            "sha": "d1311978edd1b4881a77ca9d25570dc259b5081b",
            "filename": "docs/01-app/03-building-your-application/02-data-fetching/04-incremental-static-regeneration.mdx",
            "status": "modified",
            "additions": 11,
            "deletions": 4,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F03-building-your-application%2F02-data-fetching%2F04-incremental-static-regeneration.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F03-building-your-application%2F02-data-fetching%2F04-incremental-static-regeneration.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-building-your-application%2F02-data-fetching%2F04-incremental-static-regeneration.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -539,10 +539,6 @@ export async function getStaticProps({ params }) {\n \n ### Customizing the cache location\n \n-Caching and revalidating pages (with Incremental Static Regeneration) use the same shared cache. When [deploying to Vercel](https://vercel.com/docs/incremental-static-regeneration?utm_source=next-site&utm_medium=docs&utm_campaign=next-website), the ISR cache is automatically persisted to durable storage.\n-\n-When self-hosting, the ISR cache is stored to the filesystem (on disk) on your Next.js server. This works automatically when self-hosting using both the Pages and App Router.\n-\n You can configure the Next.js cache location if you want to persist cached pages and data to durable storage, or share the cache across multiple containers or instances of your Next.js application. [Learn more](/docs/app/guides/self-hosting#caching-and-isr).\n \n ## Troubleshooting\n@@ -593,6 +589,17 @@ This will make the Next.js server console log ISR cache hits and misses. You can\n \n </PagesOnly>\n \n+## Platform Support\n+\n+| Deployment Option                                                   | Supported         |\n+| ------------------------------------------------------------------- | ----------------- |\n+| [Node.js server](/docs/app/getting-started/deploying#nodejs-server) | Yes               |\n+| [Docker container](/docs/app/getting-started/deploying#docker)      | Yes               |\n+| [Static export](/docs/app/getting-started/deploying#static-export)  | No                |\n+| [Adapters](/docs/app/getting-started/deploying#adapters)            | Platform-specific |\n+\n+Learn how to [configure ISR](/docs/app/guides/self-hosting#caching-and-isr) when self-hosting Next.js.\n+\n ## Version history\n \n | Version   | Changes                                                                             |"
        },
        {
            "sha": "fa349ab5fa519f9053bf12f778f2832c6c957311",
            "filename": "docs/01-app/03-building-your-application/03-rendering/04-partial-prerendering.mdx",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F03-building-your-application%2F03-rendering%2F04-partial-prerendering.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F03-building-your-application%2F03-rendering%2F04-partial-prerendering.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-building-your-application%2F03-rendering%2F04-partial-prerendering.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -219,3 +219,16 @@ export async function Table({ searchParams }) {\n   return '...'\n }\n ```\n+\n+## Platform Support\n+\n+> **Note:** Partial Prerendering is an **experimental** feature only available on canary and is subject to change. It is not ready for production use.\n+\n+| Deployment Option                                                   | Supported         |\n+| ------------------------------------------------------------------- | ----------------- |\n+| [Node.js server](/docs/app/getting-started/deploying#nodejs-server) | Yes               |\n+| [Docker container](/docs/app/getting-started/deploying#docker)      | Yes               |\n+| [Static export](/docs/app/getting-started/deploying#static-export)  | No                |\n+| [Adapters](/docs/app/getting-started/deploying#adapters)            | Platform-specific |\n+\n+Learn how to [configure PPR](/docs/app/guides/self-hosting#partial-prerendering) when self-hosting Next.js."
        },
        {
            "sha": "0cf66fe021ee45e5368e400b123b2a6c33df197e",
            "filename": "docs/01-app/05-api-reference/01-directives/use-cache.mdx",
            "status": "modified",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F01-directives%2Fuse-cache.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F01-directives%2Fuse-cache.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F01-directives%2Fuse-cache.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -356,3 +356,20 @@ export default function ClientComponent({ action }) {\n   return <button onClick={action}>Update</button>\n }\n ```\n+\n+## Platform Support\n+\n+| Deployment Option                                                   | Supported         |\n+| ------------------------------------------------------------------- | ----------------- |\n+| [Node.js server](/docs/app/getting-started/deploying#nodejs-server) | Yes               |\n+| [Docker container](/docs/app/getting-started/deploying#docker)      | Yes               |\n+| [Static export](/docs/app/getting-started/deploying#static-export)  | No                |\n+| [Adapters](/docs/app/getting-started/deploying#adapters)            | Platform-specific |\n+\n+Learn how to [configure caching](/docs/app/guides/self-hosting#caching-and-isr) when self-hosting Next.js.\n+\n+## Version History\n+\n+| Version   | Changes                                                 |\n+| --------- | ------------------------------------------------------- |\n+| `v15.0.0` | `\"use cache\"` is introduced as an experimental feature. |"
        },
        {
            "sha": "5695fc15f0c187ed7cfd0c6755aedd53629ebb60",
            "filename": "docs/01-app/05-api-reference/03-file-conventions/public-folder.mdx",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F03-file-conventions%2Fpublic-folder.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F03-file-conventions%2Fpublic-folder.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F03-file-conventions%2Fpublic-folder.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -43,8 +43,3 @@ The folder is also useful for `robots.txt`, `favicon.ico`, Google Site Verificat\n For static metadata files, such as `robots.txt`, `favicon.ico`, etc, you should use [special metadata files](/docs/app/api-reference/file-conventions/metadata) inside the `app` folder.\n \n </AppOnly>\n-\n-> Good to know:\n->\n-> - The directory must be named `public`. The name cannot be changed and it's the only directory used to serve static assets.\n-> - Only assets that are in the `public` directory at [build time](/docs/app/api-reference/cli/next#next-build-options) will be served by Next.js. Files added at request time won't be available. We recommend using a third-party service like [Vercel Blob](https://vercel.com/docs/storage/vercel-blob?utm_source=next-site&utm_medium=docs&utm_campaign=next-website) for persistent file storage."
        },
        {
            "sha": "a26cdccec4dc49850af8a3c479c822c665323777",
            "filename": "docs/01-app/05-api-reference/03-file-conventions/route-segment-config.mdx",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F03-file-conventions%2Froute-segment-config.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F03-file-conventions%2Froute-segment-config.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F03-file-conventions%2Froute-segment-config.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -201,7 +201,6 @@ Support for `preferredRegion`, and regions supported, is dependent on your deplo\n \n By default, Next.js does not limit the execution of server-side logic (rendering a page or handling an API).\n Deployment platforms can use `maxDuration` from the Next.js build output to add specific execution limits.\n-For example, on [Vercel](https://vercel.com/docs/functions/serverless-functions/runtimes#max-duration).\n \n **Note**: This setting requires Next.js `13.4.10` or higher.\n "
        },
        {
            "sha": "4998bc962838092df090354f7af100646aebda00",
            "filename": "docs/01-app/05-api-reference/04-functions/after.mdx",
            "status": "modified",
            "additions": 63,
            "deletions": 9,
            "changes": 72,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F04-functions%2Fafter.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F04-functions%2Fafter.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F04-functions%2Fafter.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -55,15 +55,6 @@ export default function Layout({ children }) {\n - You can use React `cache` to deduplicate functions called inside `after`.\n - `after` can be nested inside other `after` calls, for example, you can create utility functions that wrap `after` calls to add additional functionality.\n \n-## Alternatives\n-\n-The use case for `after` is to process secondary tasks without blocking the primary response. It's similar to using the platform's [`waitUntil()`](https://vercel.com/docs/functions/functions-api-reference) or removing `await` from a promise, but with the following differences:\n-\n-- **`waitUntil()`**: accepts a promise and enqueues a task to be executed during the lifecycle of the request, whereas `after` accepts a callback that will be executed **after** the response is finished.\n-- **Removing `await`**: starts executing during the response, which uses resources. It's also not reliable in serverless environments as the function stops computation immediately after the response is sent, potentially interrupting the task.\n-\n-We recommend using `after` as it has been designed to consider other Next.js APIs and contexts.\n-\n ## Examples\n \n ### With request APIs\n@@ -122,6 +113,69 @@ export async function POST(request) {\n \n However, you cannot use these request APIs inside `after` in [Server Components](/docs/app/building-your-application/rendering/server-components). This is because Next.js needs to know which part of the tree access the request APIs to support [Partial Prerendering](/docs/app/building-your-application/rendering/partial-prerendering), but `after` runs after React's rendering lifecycle.\n \n+## Platform Support\n+\n+| Deployment Option                                                   | Supported         |\n+| ------------------------------------------------------------------- | ----------------- |\n+| [Node.js server](/docs/app/getting-started/deploying#nodejs-server) | Yes               |\n+| [Docker container](/docs/app/getting-started/deploying#docker)      | Yes               |\n+| [Static export](/docs/app/getting-started/deploying#static-export)  | No                |\n+| [Adapters](/docs/app/getting-started/deploying#adapters)            | Platform-specific |\n+\n+Learn how to [configure `after`](/docs/app/guides/self-hosting#after) when self-hosting Next.js.\n+\n+<details id=\"after-serverless\">\n+  <summary>Reference: supporting `after` for serverless platforms</summary>\n+  Using `after` in a serverless context requires waiting for asynchronous tasks to finish after the response has been sent. In Next.js and Vercel, this is achieved using a primitive called `waitUntil(promise)`, which extends the lifetime of a serverless invocation until all promises passed to [`waitUntil`](https://vercel.com/docs/functions/functions-api-reference#waituntil) have settled.\n+\n+If you want your users to be able to run `after`, you will have to provide your implementation of `waitUntil` that behaves in an analogous way.\n+\n+When `after` is called, Next.js will access `waitUntil` like this:\n+\n+```jsx\n+const RequestContext = globalThis[Symbol.for('@next/request-context')]\n+const contextValue = RequestContext?.get()\n+const waitUntil = contextValue?.waitUntil\n+```\n+\n+Which means that `globalThis[Symbol.for('@next/request-context')]` is expected to contain an object like this:\n+\n+```tsx\n+type NextRequestContext = {\n+  get(): NextRequestContextValue | undefined\n+}\n+\n+type NextRequestContextValue = {\n+  waitUntil?: (promise: Promise<any>) => void\n+}\n+```\n+\n+Here is an example of the implementation.\n+\n+```tsx\n+import { AsyncLocalStorage } from 'node:async_hooks'\n+\n+const RequestContextStorage = new AsyncLocalStorage<NextRequestContextValue>()\n+\n+// Define and inject the accessor that next.js will use\n+const RequestContext: NextRequestContext = {\n+  get() {\n+    return RequestContextStorage.getStore()\n+  },\n+}\n+globalThis[Symbol.for('@next/request-context')] = RequestContext\n+\n+const handler = (req, res) => {\n+  const contextValue = { waitUntil: YOUR_WAITUNTIL }\n+  // Provide the value\n+  return RequestContextStorage.run(contextValue, () => nextJsHandler(req, res))\n+}\n+```\n+\n+</details>\n+\n+## Version History\n+\n | Version History | Description                  |\n | --------------- | ---------------------------- |\n | `v15.1.0`       | `after` became stable.       |"
        },
        {
            "sha": "880257cf0fae898ea0fca18dd7d4e4db0f1ecf03",
            "filename": "docs/01-app/05-api-reference/04-functions/generate-metadata.mdx",
            "status": "modified",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F04-functions%2Fgenerate-metadata.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F04-functions%2Fgenerate-metadata.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F04-functions%2Fgenerate-metadata.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -391,7 +391,6 @@ export const metadata = {\n \n - `metadataBase` allows URL-based `metadata` fields defined in the **current route segment and below** to use a **relative path** instead of an otherwise required absolute URL.\n - The field's relative path will be composed with `metadataBase` to form a fully qualified URL.\n-- If not configured, `metadataBase` is **automatically populated** with a [default value](#default-value).\n \n ```jsx filename=\"layout.js | page.js\"\n export const metadata = {\n@@ -425,19 +424,6 @@ export const metadata = {\n > - Using a relative path in a URL-based `metadata` field without configuring a `metadataBase` will cause a build error.\n > - Next.js will normalize duplicate slashes between `metadataBase` (e.g. `https://acme.com/`) and a relative field (e.g. `/path`) to a single slash (e.g. `https://acme.com/path`)\n \n-#### Default value\n-\n-If not configured, `metadataBase` has a **default value**.\n-\n-> On Vercel:\n->\n-> - For production deployments, `VERCEL_PROJECT_PRODUCTION_URL` will be used.\n-> - For preview deployments, `VERCEL_BRANCH_URL` will take priority, and fallback to `VERCEL_URL` if it's not present.\n->\n-> If these values are present they will be used as the **default value** of `metadataBase`, otherwise it falls back to `http://localhost:${process.env.PORT || 3000}`. This allows Open Graph images to work on both local build and Vercel preview and production deployments. When overriding the default, we recommend using environment variables to compute the URL. This allows configuring a URL for local development, staging, and production environments.\n->\n-> See more details about these environment variables in the [System Environment Variables](https://vercel.com/docs/concepts/projects/environment-variables/system-environment-variables) docs.\n-\n #### URL Composition\n \n URL composition favors developer intent over default directory traversal semantics."
        },
        {
            "sha": "5a1a12134164820aeecff326ec57dfa5197a2a78",
            "filename": "docs/01-app/05-api-reference/04-functions/use-report-web-vitals.mdx",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F04-functions%2Fuse-report-web-vitals.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F04-functions%2Fuse-report-web-vitals.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F04-functions%2Fuse-report-web-vitals.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -194,11 +194,6 @@ These metrics work in all browsers that support the [User Timing API](https://ca\n \n </PagesOnly>\n \n-## Usage on Vercel\n-\n-[Vercel Speed Insights](https://vercel.com/docs/speed-insights/quickstart) does not `useReportWebVitals`, but `@vercel/speed-insights` package instead.\n-`useReportWebVitals` hook is useful in local development, or if you're using a different service for collecting Web Vitals.\n-\n ## Sending results to external systems\n \n You can send results to any endpoint to measure and track"
        },
        {
            "sha": "132f4375d8fdff27255eff638db27fdbf0f09cbe",
            "filename": "docs/01-app/05-api-reference/05-config/01-next-config-js/compress.mdx",
            "status": "modified",
            "additions": 2,
            "deletions": 15,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F05-config%2F01-next-config-js%2Fcompress.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F05-config%2F01-next-config-js%2Fcompress.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F05-config%2F01-next-config-js%2Fcompress.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -7,10 +7,7 @@ description: Next.js provides gzip compression to compress rendered content and\n \n By default, Next.js uses `gzip` to compress rendered content and static files when using `next start` or a custom server. This is an optimization for applications that do not have compression configured. If compression is _already_ configured in your application via a custom server, Next.js will not add compression.\n \n-> **Good to know:**\n->\n-> - When hosting your application on [Vercel](https://vercel.com/docs/edge-network/compression), compression uses `brotli` first, then `gzip`.\n-> - You can check if compression is enabled and which algorithm is used by looking at the [`Accept-Encoding`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Encoding) (browser accepted options) and [`Content-Encoding`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Encoding) (currently used) headers in the response.\n+You can check if compression is enabled and which algorithm is used by looking at the [`Accept-Encoding`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Encoding) (browser accepted options) and [`Content-Encoding`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Encoding) (currently used) headers in the response.\n \n ## Disabling compression\n \n@@ -22,14 +19,4 @@ module.exports = {\n }\n ```\n \n-We do not recommend disabling compression unless you have compression configured on your server, as compression reduces bandwidth usage and improves the performance of your application.\n-\n-## Changing the compression algorithm\n-\n-To change your compression algorithm, you will need to configure your custom server and set the `compress` option to `false` in your `next.config.js` file.\n-\n-For example, you're using [nginx](https://nginx.org/) and want to switch to `brotli`, set the `compress` option to `false` to allow nginx to handle compression.\n-\n-> **Good to know:**\n->\n-> - For Next.js applications on Vercel, compression is handled by the Vercel's Edge Network and not Next.js. See the [Vercel documentation](https://vercel.com/docs/edge-network/compression) for more information.\n+We **do not recommend disabling compression** unless you have compression configured on your server, as compression reduces bandwidth usage and improves the performance of your application. For example, you're using [nginx](https://nginx.org/) and want to switch to `brotli`, set the `compress` option to `false` to allow nginx to handle compression."
        },
        {
            "sha": "3acc58f9e8ef77024706c1cd2a017c85f7d59241",
            "filename": "docs/01-app/05-api-reference/05-config/01-next-config-js/headers.mdx",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F05-config%2F01-next-config-js%2Fheaders.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F05-config%2F01-next-config-js%2Fheaders.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F05-config%2F01-next-config-js%2Fheaders.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -518,8 +518,6 @@ async headers() {\n \n [This header](https://developer.mozilla.org/docs/Web/HTTP/Headers/Strict-Transport-Security) informs browsers it should only be accessed using HTTPS, instead of using HTTP. Using the configuration below, all present and future subdomains will use HTTPS for a `max-age` of 2 years. This blocks access to pages or subdomains that can only be served over HTTP.\n \n-If you're deploying to [Vercel](https://vercel.com/docs/concepts/edge-network/headers#strict-transport-security?utm_source=next-site&utm_medium=docs&utm_campaign=next-website), this header is not necessary as it's automatically added to all deployments unless you declare `headers` in your `next.config.js`.\n-\n ```js\n {\n   key: 'Strict-Transport-Security',"
        },
        {
            "sha": "f82d3b3138faa7c759b07086194b6269e68f0c85",
            "filename": "docs/01-app/05-api-reference/05-config/01-next-config-js/incrementalCacheHandlerPath.mdx",
            "status": "modified",
            "additions": 19,
            "deletions": 6,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F05-config%2F01-next-config-js%2FincrementalCacheHandlerPath.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F05-config%2F01-next-config-js%2FincrementalCacheHandlerPath.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F05-config%2F01-next-config-js%2FincrementalCacheHandlerPath.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -4,10 +4,6 @@ nav_title: cacheHandler\n description: Configure the Next.js cache used for storing and revalidating data to use any external service like Redis, Memcached, or others.\n ---\n \n-Caching and revalidating pages (with Incremental Static Regeneration) use the same shared cache. When [deploying to Vercel](https://vercel.com/docs/incremental-static-regeneration?utm_source=next-site&utm_medium=docs&utm_campaign=next-website), the ISR cache is automatically persisted to durable storage.\n-\n-When self-hosting, the ISR cache is stored to the filesystem (on disk) on your Next.js server. This works automatically when self-hosting using both the Pages and App Router.\n-\n You can configure the Next.js cache location if you want to persist cached pages and data to durable storage, or share the cache across multiple containers or instances of your Next.js application.\n \n ```js filename=\"next.config.js\"\n@@ -17,11 +13,11 @@ module.exports = {\n }\n ```\n \n-View an example of a [custom cache handler](/docs/app/guides/self-hosting#configuring-caching) and learn more about implementation.\n+View an example of a [custom cache handler](/docs/app/guides/self-hosting#configuring-caching) and learn more about the implementation.\n \n ## API Reference\n \n-The cache handler can implement the following methods: `get`, `set`, and `revalidateTag`.\n+The cache handler can implement the following methods: `get`, `set`, `revalidateTag`, and `resetRequestCache`.\n \n ### `get()`\n \n@@ -49,10 +45,27 @@ Returns `Promise<void>`.\n \n Returns `Promise<void>`. Learn more about [revalidating data](/docs/app/building-your-application/data-fetching/incremental-static-regeneration) or the [`revalidateTag()`](/docs/app/api-reference/functions/revalidateTag) function.\n \n+### `resetRequestCache()`\n+\n+This method resets the temporary in-memory cache for a single request before the next request.\n+\n+Returns `void`.\n+\n **Good to know:**\n \n - `revalidatePath` is a convenience layer on top of cache tags. Calling `revalidatePath` will call your `revalidateTag` function, which you can then choose if you want to tag cache keys based on the path.\n \n+## Platform Support\n+\n+| Deployment Option                                                   | Supported         |\n+| ------------------------------------------------------------------- | ----------------- |\n+| [Node.js server](/docs/app/getting-started/deploying#nodejs-server) | Yes               |\n+| [Docker container](/docs/app/getting-started/deploying#docker)      | Yes               |\n+| [Static export](/docs/app/getting-started/deploying#static-export)  | No                |\n+| [Adapters](/docs/app/getting-started/deploying#adapters)            | Platform-specific |\n+\n+Learn how to [configure ISR](/docs/app/guides/self-hosting#caching-and-isr) when self-hosting Next.js.\n+\n ## Version History\n \n | Version   | Changes                                                      |"
        },
        {
            "sha": "4132613a30e9aa86f0534eb9b1eab233941edbf8",
            "filename": "docs/01-app/05-api-reference/05-config/01-next-config-js/output.mdx",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F05-config%2F01-next-config-js%2Foutput.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F05-config%2F01-next-config-js%2Foutput.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F05-config%2F01-next-config-js%2Foutput.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -93,8 +93,6 @@ module.exports = {\n \n **Note:** The key of `outputFileTracingIncludes`/`outputFileTracingExcludes` is a [glob](https://www.npmjs.com/package/picomatch#basic-globbing), so special characters need to be escaped.\n \n-- Currently, Next.js does not do anything with the emitted `.nft.json` files. The files must be read by your deployment platform, for example [Vercel](https://vercel.com), to create a minimal deployment. In a future release, a new command is planned to utilize these `.nft.json` files.\n-\n ## Experimental `turbotrace`\n \n Tracing dependencies can be slow because it requires very complex computations and analysis. We created `turbotrace` in Rust as a faster and smarter alternative to the JavaScript implementation."
        },
        {
            "sha": "998719f8ba6666a4cfe90d1644b0ac1d045b2290",
            "filename": "docs/01-app/05-api-reference/06-cli/next.mdx",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F06-cli%2Fnext.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F01-app%2F05-api-reference%2F06-cli%2Fnext.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F06-cli%2Fnext.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -217,8 +217,6 @@ next dev --experimental-https --experimental-https-key ./certificates/localhost-\n \n `next dev --experimental-https` is only intended for development and creates a locally trusted certificate with [`mkcert`](https://github.com/FiloSottile/mkcert). In production, use properly issued certificates from trusted authorities.\n \n-> **Good to know**: When deploying to Vercel, HTTPS is [automatically configured](https://vercel.com/docs/security/encryption) for your Next.js application.\n-\n ### Configuring a timeout for downstream proxies\n \n When deploying Next.js behind a downstream proxy (e.g. a load-balancer like AWS ELB/ALB), it's important to configure Next's underlying HTTP server with [keep-alive timeouts](https://nodejs.org/api/http.html#http_server_keepalivetimeout) that are _larger_ than the downstream proxy's timeouts. Otherwise, once a keep-alive timeout is reached for a given TCP connection, Node.js will immediately terminate that connection without notifying the downstream proxy. This results in a proxy error whenever it attempts to reuse a connection that Node.js has already terminated."
        },
        {
            "sha": "e0be09e6ebc470bdce35f21d564656d386031fa4",
            "filename": "docs/02-pages/02-guides/upgrading/version-9.mdx",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F02-pages%2F02-guides%2Fupgrading%2Fversion-9.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/27d2fa2838655d0109ef83dae8987f9150188f6f/docs%2F02-pages%2F02-guides%2Fupgrading%2Fversion-9.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F02-pages%2F02-guides%2Fupgrading%2Fversion-9.mdx?ref=27d2fa2838655d0109ef83dae8987f9150188f6f",
            "patch": "@@ -24,14 +24,6 @@ bun add next@9\n \n > **Good to know:** If you are using TypeScript, ensure you also upgrade `@types/react` and `@types/react-dom` to their corresponding versions.\n \n-## Production Deployment on Vercel\n-\n-If you previously configured `routes` in your `vercel.json` file for dynamic routes, these rules can be removed when leveraging Next.js 9's new [Dynamic Routing feature](/docs/pages/building-your-application/routing/dynamic-routes).\n-\n-Next.js 9's dynamic routes are **automatically configured on [Vercel](https://vercel.com/)** and do not require any `vercel.json` customization.\n-\n-You can read more about [Dynamic Routing here](/docs/pages/building-your-application/routing/dynamic-routes).\n-\n ## Check your Custom App File (`pages/_app.js`)\n \n If you previously copied the [Custom `<App>`](/docs/pages/building-your-application/routing/custom-app) example, you may be able to remove your `getInitialProps`."
        }
    ],
    "stats": {
        "total": 491,
        "additions": 226,
        "deletions": 265
    }
}