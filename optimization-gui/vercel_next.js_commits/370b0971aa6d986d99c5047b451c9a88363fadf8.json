{
    "author": "timneutkens",
    "message": "Turbopack Build: Fix metadata-edge test (#80842)\n\nThis test is checking if `@vercel/og` gets shared between two routes, it\nassumed that `next/og` itself (the wrapper code) would also be chunked,\nbut the size limit for Turbopack is slightly larger so it doesn't end up\nbundling it into a separate chunk. Changed the test to check that\n`@vercel/og` is correctly chunked.",
    "sha": "370b0971aa6d986d99c5047b451c9a88363fadf8",
    "files": [
        {
            "sha": "f0f1cec60ae61dffb290e6dc36bd619b0af04a34",
            "filename": "test/e2e/app-dir/metadata-edge/index.test.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 4,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/370b0971aa6d986d99c5047b451c9a88363fadf8/test%2Fe2e%2Fapp-dir%2Fmetadata-edge%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/370b0971aa6d986d99c5047b451c9a88363fadf8/test%2Fe2e%2Fapp-dir%2Fmetadata-edge%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fmetadata-edge%2Findex.test.ts?ref=370b0971aa6d986d99c5047b451c9a88363fadf8",
            "patch": "@@ -22,21 +22,26 @@ describe('app dir - Metadata API on the Edge runtime', () => {\n           (file) => {\n             return next\n               .readFileSync(path.join('.next', file))\n-              .includes('ImageResponse')\n+              .includes('experimental_FigmaImageResponse')\n           }\n         )\n+        expect(pageFilesThatHaveImageResponse).not.toBeEmpty()\n \n         const uniqueAnotherFiles = [\n           ...new Set<string>(\n             middlewareManifest.functions['/another/page'].files\n           ),\n         ]\n+        expect(uniqueAnotherFiles).not.toBeEmpty()\n \n         const anotherFilesThatHaveImageResponse = uniqueAnotherFiles.filter(\n           (file) => {\n-            return next\n-              .readFileSync(path.join('.next', file))\n-              .includes('ImageResponse')\n+            return (\n+              next\n+                .readFileSync(path.join('.next', file))\n+                // This export is not used but it checks if the `@vercel/og` package is shared between the two routes.\n+                .includes('experimental_FigmaImageResponse')\n+            )\n           }\n         )\n "
        },
        {
            "sha": "f8b5e098ab8826b084c822ec029b14cff188b5a5",
            "filename": "test/turbopack-build-tests-manifest.json",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/370b0971aa6d986d99c5047b451c9a88363fadf8/test%2Fturbopack-build-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/370b0971aa6d986d99c5047b451c9a88363fadf8/test%2Fturbopack-build-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fturbopack-build-tests-manifest.json?ref=370b0971aa6d986d99c5047b451c9a88363fadf8",
            "patch": "@@ -3045,11 +3045,10 @@\n   },\n   \"test/e2e/app-dir/metadata-edge/index.test.ts\": {\n     \"passed\": [\n-      \"app dir - Metadata API on the Edge runtime should render OpenGraph image meta tag correctly\"\n-    ],\n-    \"failed\": [\n+      \"app dir - Metadata API on the Edge runtime should render OpenGraph image meta tag correctly\",\n       \"app dir - Metadata API on the Edge runtime OG image route should not bundle `ImageResponse` into the page worker\"\n     ],\n+    \"failed\": [],\n     \"pending\": [],\n     \"flakey\": [],\n     \"runtimeError\": false"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 11,
        "deletions": 7
    }
}