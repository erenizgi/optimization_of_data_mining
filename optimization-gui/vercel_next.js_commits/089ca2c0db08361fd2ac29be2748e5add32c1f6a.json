{
    "author": "huozhi",
    "message": "docs: update multi sitemap argumenmt type (#85701)\n\nIn v16, `id` argument in metadata routes becomes promise which requries\nto to unwrap it first to access the value\n\nFollow up of #84491\n\nCloses #85632\n\n---------\n\nCo-authored-by: Joseph Chamochumbi <joseph.chamochumbi@vercel.com>",
    "sha": "089ca2c0db08361fd2ac29be2748e5add32c1f6a",
    "files": [
        {
            "sha": "9fae37e0e599060f3143c05b7dae261deabad334",
            "filename": "docs/01-app/02-guides/upgrading/version-16.mdx",
            "status": "modified",
            "additions": 31,
            "deletions": 0,
            "changes": 31,
            "blob_url": "https://github.com/vercel/next.js/blob/089ca2c0db08361fd2ac29be2748e5add32c1f6a/docs%2F01-app%2F02-guides%2Fupgrading%2Fversion-16.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/089ca2c0db08361fd2ac29be2748e5add32c1f6a/docs%2F01-app%2F02-guides%2Fupgrading%2Fversion-16.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fupgrading%2Fversion-16.mdx?ref=089ca2c0db08361fd2ac29be2748e5add32c1f6a",
            "patch": "@@ -338,6 +338,37 @@ export default async function Image({ params, id }) {\n }\n ```\n \n+## Async `id` parameter for `sitemap` (Breaking change)\n+\n+Previously, the `id` values returned from [`generateSitemaps`](/docs/app/api-reference/functions/generate-sitemaps) were passed directly to the `sitemap` generating function.\n+\n+```js filename=\"app/product/sitemap.js\"\n+export async function generateSitemaps() {\n+  return [{ id: 0 }, { id: 1 }, { id: 2 }, { id: 3 }]\n+}\n+\n+// Next.js 15 - synchronous id access\n+export default async function sitemap({ id }) {\n+  const start = id * 50000 // id is a number\n+  // ...\n+}\n+```\n+\n+Starting with **Next.js 16**, the `sitemap` generating function now receives `id` as a promise.\n+\n+```js filename=\"app/product/sitemap.js\"\n+export async function generateSitemaps() {\n+  return [{ id: 0 }, { id: 1 }, { id: 2 }, { id: 3 }]\n+}\n+\n+// Next.js 16 - asynchronous id access\n+export default async function sitemap({ id }) {\n+  const resolvedId = await id // id is now Promise<number>\n+  const start = resolvedId * 50000\n+  // ...\n+}\n+```\n+\n ## React 19.2\n \n The App Router in **Next.js 16** uses the latest React [Canary release](https://react.dev/blog/2023/05/03/react-canaries), which includes the newly released React 19.2 features and other features being incrementally stabilized. Highlights include:"
        },
        {
            "sha": "561bc862970674c3211a1c9970594282ae4c0e22",
            "filename": "docs/01-app/03-api-reference/03-file-conventions/01-metadata/sitemap.mdx",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/089ca2c0db08361fd2ac29be2748e5add32c1f6a/docs%2F01-app%2F03-api-reference%2F03-file-conventions%2F01-metadata%2Fsitemap.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/089ca2c0db08361fd2ac29be2748e5add32c1f6a/docs%2F01-app%2F03-api-reference%2F03-file-conventions%2F01-metadata%2Fsitemap.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F03-file-conventions%2F01-metadata%2Fsitemap.mdx?ref=089ca2c0db08361fd2ac29be2748e5add32c1f6a",
            "patch": "@@ -349,11 +349,10 @@ export async function generateSitemaps() {\n   return [{ id: 0 }, { id: 1 }, { id: 2 }, { id: 3 }]\n }\n \n-export default async function sitemap({\n-  id,\n-}: {\n-  id: number\n+export default async function sitemap(props: {\n+  id: Promise<number>\n }): Promise<MetadataRoute.Sitemap> {\n+  const id = await props.id\n   // Google's limit is 50,000 URLs per sitemap\n   const start = id * 50000\n   const end = start + 50000\n@@ -375,7 +374,8 @@ export async function generateSitemaps() {\n   return [{ id: 0 }, { id: 1 }, { id: 2 }, { id: 3 }]\n }\n \n-export default async function sitemap({ id }) {\n+export default async function sitemap(props) {\n+  const id = await props.id\n   // Google's limit is 50,000 URLs per sitemap\n   const start = id * 50000\n   const end = start + 50000\n@@ -420,6 +420,7 @@ type Sitemap = Array<{\n \n | Version    | Changes                                                      |\n | ---------- | ------------------------------------------------------------ |\n+| `v16.0.0`  | `id` is now a promise that resolves to a number.             |\n | `v14.2.0`  | Add localizations support.                                   |\n | `v13.4.14` | Add `changeFrequency` and `priority` attributes to sitemaps. |\n | `v13.3.0`  | `sitemap` introduced.                                        |"
        }
    ],
    "stats": {
        "total": 42,
        "additions": 37,
        "deletions": 5
    }
}