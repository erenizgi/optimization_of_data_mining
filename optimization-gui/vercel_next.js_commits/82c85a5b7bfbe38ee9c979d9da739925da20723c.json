{
    "author": "huozhi",
    "message": "[segment explorer] trigger boundary initial support (#80948)",
    "sha": "82c85a5b7bfbe38ee9c979d9da739925da20723c",
    "files": [
        {
            "sha": "5a50674629a69c3cdef7ddaae106121097c503c2",
            "filename": "packages/next/errors.json",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Ferrors.json",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Ferrors.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Ferrors.json?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -713,5 +713,6 @@\n   \"712\": \"`rspack.warnForEdgeRuntime` is not supported by the wasm bindings.\",\n   \"713\": \"Unexpected error during process lookup\",\n   \"714\": \"cannot run loadNative when `NEXT_TEST_WASM` is set\",\n-  \"715\": \"Server Action \\\"%s\\\" was not found on the server. \\\\nRead more: https://nextjs.org/docs/messages/failed-to-find-server-action\"\n+  \"715\": \"Server Action \\\"%s\\\" was not found on the server. \\\\nRead more: https://nextjs.org/docs/messages/failed-to-find-server-action\",\n+  \"716\": \"NEXT_DEVTOOLS_SIMULATED_ERROR\"\n }"
        },
        {
            "sha": "b92d6fcf58b87b8e31d37a5354e67b4e5843852f",
            "filename": "packages/next/src/client/components/layout-router.tsx",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Flayout-router.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Flayout-router.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Flayout-router.tsx?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -658,6 +658,17 @@ export default function OuterLayoutRouter({\n       </TemplateContext.Provider>\n     )\n \n+    if (process.env.NODE_ENV !== 'production') {\n+      const SegmentStateProvider = (\n+        require('../../next-devtools/userspace/app/segment-explorer-node') as typeof import('../../next-devtools/userspace/app/segment-explorer-node')\n+      )\n+        .SegmentStateProvider as typeof import('../../next-devtools/userspace/app/segment-explorer-node').SegmentStateProvider as typeof import('../../next-devtools/userspace/app/segment-explorer-node').SegmentStateProvider\n+\n+      child = (\n+        <SegmentStateProvider key={stateKey}>{child}</SegmentStateProvider>\n+      )\n+    }\n+\n     if (process.env.__NEXT_ROUTER_BF_CACHE) {\n       child = (\n         <Activity"
        },
        {
            "sha": "a4ec4ca78e4b8b202c5411670cfd0a14d57ffd80",
            "filename": "packages/next/src/client/react-client-callbacks/error-boundary-callbacks.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fclient%2Freact-client-callbacks%2Ferror-boundary-callbacks.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fclient%2Freact-client-callbacks%2Ferror-boundary-callbacks.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Freact-client-callbacks%2Ferror-boundary-callbacks.ts?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -13,6 +13,7 @@ import { reportGlobalError } from './report-global-error'\n import { originConsoleError } from '../../next-devtools/userspace/app/errors/intercept-console-error'\n import { ErrorBoundaryHandler } from '../components/error-boundary'\n import DefaultErrorBoundary from '../components/builtin/global-error'\n+import { SEGMENT_EXPLORER_SIMULATED_ERROR_MESSAGE } from '../../next-devtools/userspace/app/segment-explorer-node'\n \n export function onCaughtError(\n   thrownValue: unknown,\n@@ -36,6 +37,15 @@ export function onCaughtError(\n       (errorInfo.errorBoundary! as InstanceType<typeof ErrorBoundaryHandler>)\n         .props.errorComponent === DefaultErrorBoundary)\n \n+  // Skip the segment explorer triggered error\n+  if (\n+    process.env.NODE_ENV !== 'production' &&\n+    thrownValue instanceof Error &&\n+    thrownValue.message === SEGMENT_EXPLORER_SIMULATED_ERROR_MESSAGE\n+  ) {\n+    return\n+  }\n+\n   if (isImplicitErrorBoundary) {\n     // We don't consider errors caught unless they're caught by an explicit error\n     // boundary. The built-in ones are considered implicit."
        },
        {
            "sha": "1a1b98153d9243bff9de9fdda0699ff639e8dc4b",
            "filename": "packages/next/src/next-devtools/dev-overlay.browser.tsx",
            "status": "modified",
            "additions": 8,
            "deletions": 22,
            "changes": 30,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay.browser.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay.browser.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay.browser.tsx?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -30,8 +30,8 @@ import type { VersionInfo } from '../server/dev/parse-version-info'\n import {\n   insertSegmentNode,\n   removeSegmentNode,\n-  type SegmentNode,\n-} from './dev-overlay/segment-explorer'\n+} from './dev-overlay/segment-explorer-trie'\n+import type { SegmentNodeState } from './userspace/app/segment-explorer-node'\n \n export interface Dispatcher {\n   onBuildOk(): void\n@@ -51,14 +51,8 @@ export interface Dispatcher {\n   buildingIndicatorShow(): void\n   renderingIndicatorHide(): void\n   renderingIndicatorShow(): void\n-  segmentExplorerNodeAdd(\n-    nodeType: SegmentNode['type'],\n-    pagePath: SegmentNode['pagePath']\n-  ): void\n-  segmentExplorerNodeRemove(\n-    nodeType: SegmentNode['type'],\n-    pagePath: SegmentNode['pagePath']\n-  ): void\n+  segmentExplorerNodeAdd(nodeState: SegmentNodeState): void\n+  segmentExplorerNodeRemove(nodeState: SegmentNodeState): void\n }\n \n type Dispatch = ReturnType<typeof useErrorOverlayReducer>[1]\n@@ -145,21 +139,13 @@ export const dispatcher: Dispatcher = {\n     dispatch({ type: ACTION_RENDERING_INDICATOR_SHOW })\n   }),\n   segmentExplorerNodeAdd: createQueuable(\n-    (\n-      _: Dispatch,\n-      nodeType: SegmentNode['type'],\n-      pagePath: SegmentNode['pagePath']\n-    ) => {\n-      insertSegmentNode({ type: nodeType, pagePath })\n+    (_: Dispatch, nodeState: SegmentNodeState) => {\n+      insertSegmentNode(nodeState)\n     }\n   ),\n   segmentExplorerNodeRemove: createQueuable(\n-    (\n-      _: Dispatch,\n-      nodeType: SegmentNode['type'],\n-      pagePath: SegmentNode['pagePath']\n-    ) => {\n-      removeSegmentNode({ type: nodeType, pagePath })\n+    (_: Dispatch, nodeState: SegmentNodeState) => {\n+      removeSegmentNode(nodeState)\n     }\n   ),\n }"
        },
        {
            "sha": "e8f500afd7fb190edb6c7a8720b29df544ddff57",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/overview/segment-boundary-trigger.tsx",
            "status": "added",
            "additions": 364,
            "deletions": 0,
            "changes": 364,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-boundary-trigger.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-boundary-trigger.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-boundary-trigger.tsx?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -0,0 +1,364 @@\n+import {\n+  useCallback,\n+  useState,\n+  useRef,\n+  useLayoutEffect,\n+  useEffect,\n+} from 'react'\n+import type { SegmentNodeState } from '../../../userspace/app/segment-explorer-node'\n+\n+export function SegmentBoundaryTrigger({\n+  onSelectBoundary,\n+  offset,\n+}: {\n+  onSelectBoundary: SegmentNodeState['setBoundaryType']\n+  offset: number\n+}) {\n+  const [isOpen, setIsOpen] = useState(false)\n+  const [dropdownPosition, setDropdownPosition] = useState({ top: 0, right: 0 })\n+  const triggerRef = useRef<HTMLButtonElement>(null)\n+  const rootRef = useRef<HTMLDivElement>(null)\n+  const [shadowRoot] = useState<ShadowRoot>(() => {\n+    const ownerDocument = document\n+    const portalNode = ownerDocument.querySelector('nextjs-portal')!\n+    return portalNode.shadowRoot! as ShadowRoot\n+  })\n+\n+  const updateDropdownPosition = useCallback(() => {\n+    if (triggerRef.current) {\n+      const rect = triggerRef.current.getBoundingClientRect()\n+      setDropdownPosition({\n+        top: rect.bottom + offset,\n+        right: window.innerWidth - rect.right,\n+      })\n+    }\n+  }, [offset])\n+\n+  useLayoutEffect(() => {\n+    if (isOpen) {\n+      updateDropdownPosition()\n+    }\n+  }, [isOpen, updateDropdownPosition])\n+\n+  const handleClickOutside = useCallback(\n+    (e: Event) => {\n+      const target = e.target as HTMLElement\n+      if (!target || !isOpen) return\n+      if (\n+        target.closest(\n+          '[data-nextjs-dev-overlay-segment-boundary-dropdown-backdrop]'\n+        ) ||\n+        target.closest(\n+          '[data-nextjs-dev-overlay-segment-boundary-trigger-button]'\n+        )\n+      ) {\n+        return\n+      }\n+      setIsOpen(false)\n+    },\n+    [isOpen]\n+  )\n+\n+  // click outside of the trigger button or dropdown menu, in shadow root\n+  useEffect(() => {\n+    shadowRoot.addEventListener('click', handleClickOutside)\n+    return () => {\n+      shadowRoot.removeEventListener('click', handleClickOutside)\n+    }\n+  }, [handleClickOutside, isOpen, shadowRoot])\n+\n+  // close itself when unfocus: click outside of shadow root or clicking other triggers\n+  const handleFocusOut = useCallback((e: Event) => {\n+    const triggerRootNode = rootRef.current\n+    if (\n+      e.target instanceof HTMLElement &&\n+      triggerRootNode &&\n+      !triggerRootNode.contains(e.target)\n+    ) {\n+      setIsOpen(false)\n+    }\n+  }, [])\n+  useEffect(() => {\n+    shadowRoot.addEventListener('focusout', handleFocusOut)\n+    return () => {\n+      shadowRoot.removeEventListener('focusout', handleFocusOut)\n+    }\n+  }, [handleFocusOut, shadowRoot])\n+\n+  const handleToggleMenu = useCallback(() => {\n+    setIsOpen((prev) => !prev)\n+    updateDropdownPosition()\n+  }, [updateDropdownPosition])\n+\n+  const triggerOptions = [\n+    { label: 'Trigger Loading', value: 'loading', icon: <LoadingIcon /> },\n+    { label: 'Trigger Error', value: 'error', icon: <ErrorIcon /> },\n+    { label: 'Trigger Not Found', value: 'not-found', icon: <NotFoundIcon /> },\n+  ]\n+\n+  const resetOption = {\n+    label: 'Reset',\n+    value: 'reset',\n+    icon: <ResetIcon />,\n+  }\n+\n+  const handleSelect = (value: string) => {\n+    if (value === 'not-found') {\n+      onSelectBoundary('not-found')\n+    } else if (value === 'loading') {\n+      onSelectBoundary('loading')\n+    } else if (value === 'error') {\n+      onSelectBoundary('error')\n+    } else if (value === 'reset') {\n+      onSelectBoundary(null)\n+    }\n+    setIsOpen(false)\n+  }\n+\n+  return (\n+    <div className=\"segment-boundary-trigger\" ref={rootRef}>\n+      <button\n+        ref={triggerRef}\n+        className=\"segment-boundary-trigger-button\"\n+        data-nextjs-dev-overlay-segment-boundary-trigger-button\n+        onClick={handleToggleMenu}\n+        type=\"button\"\n+      >\n+        <DropdownIcon />\n+      </button>\n+      {isOpen && (\n+        <div\n+          className=\"segment-boundary-dropdown-backdrop\"\n+          data-nextjs-dev-overlay-segment-boundary-dropdown-backdrop\n+          style={{\n+            top: dropdownPosition.top - offset, // Extend upward to cover the gap\n+            right: dropdownPosition.right,\n+            paddingTop: offset, // Visual spacing while backdrop covers the gap\n+          }}\n+        >\n+          <div className=\"segment-boundary-dropdown\">\n+            {triggerOptions.map((option) => (\n+              <div\n+                key={option.value}\n+                className=\"segment-boundary-dropdown-item\"\n+                onClick={() => handleSelect(option.value)}\n+              >\n+                {option.icon}\n+                {option.label}\n+              </div>\n+            ))}\n+            <div className=\"segment-boundary-dropdown-divider\" />\n+            <div\n+              key={resetOption.value}\n+              className=\"segment-boundary-dropdown-item\"\n+              onClick={() => handleSelect(resetOption.value)}\n+            >\n+              {resetOption.icon}\n+              {resetOption.label}\n+            </div>\n+          </div>\n+        </div>\n+      )}\n+    </div>\n+  )\n+}\n+\n+/**\n+ * Inline svg icons for the dropdown trigger.\n+ * The child svg icons like `rect` are fixed size, so they can be used as shared scalable icons.\n+ */\n+function DropdownIcon() {\n+  return (\n+    <svg\n+      width=\"20px\"\n+      height=\"20px\"\n+      viewBox=\"0 0 16 16\"\n+      fill=\"none\"\n+      xmlns=\"http://www.w3.org/2000/svg\"\n+    >\n+      <path\n+        d=\"M2.5 6.5C3.32843 6.5 4 7.17157 4 8C4 8.82843 3.32843 9.5 2.5 9.5C1.67157 9.5 1 8.82843 1 8C1 7.17157 1.67157 6.5 2.5 6.5ZM8 6.5C8.82843 6.5 9.5 7.17157 9.5 8C9.5 8.82843 8.82843 9.5 8 9.5C7.17157 9.5 6.5 8.82843 6.5 8C6.5 7.17157 7.17157 6.5 8 6.5ZM13.5 6.5C14.3284 6.5 15 7.17157 15 8C15 8.82843 14.3284 9.5 13.5 9.5C12.6716 9.5 12 8.82843 12 8C12 7.17157 12.6716 6.5 13.5 6.5Z\"\n+        fill=\"currentColor\"\n+      />\n+    </svg>\n+  )\n+}\n+\n+function LoadingIcon() {\n+  return (\n+    <svg\n+      width=\"20px\"\n+      height=\"20px\"\n+      viewBox=\"0 0 20 20\"\n+      fill=\"none\"\n+      xmlns=\"http://www.w3.org/2000/svg\"\n+    >\n+      <g clipPath=\"url(#clip0_2759_1866)\">\n+        <path\n+          fillRule=\"evenodd\"\n+          clipRule=\"evenodd\"\n+          d=\"M10 3.5C13.5899 3.5 16.5 6.41015 16.5 10C16.5 13.5899 13.5899 16.5 10 16.5C6.41015 16.5 3.5 13.5899 3.5 10C3.5 6.41015 6.41015 3.5 10 3.5ZM2 10C2 14.4183 5.58172 18 10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10ZM10.75 9.62402V6H9.25V9.875C9.25 10.1898 9.39858 10.486 9.65039 10.6748L11.5498 12.0996L12.1504 12.5498L13.0498 11.3496L12.4502 10.9004L10.75 9.62402Z\"\n+          fill=\"currentColor\"\n+        />\n+      </g>\n+      <defs>\n+        <clipPath id=\"clip0_2759_1866\">\n+          <rect\n+            width=\"16\"\n+            height=\"16\"\n+            fill=\"white\"\n+            transform=\"translate(2 2)\"\n+          />\n+        </clipPath>\n+      </defs>\n+    </svg>\n+  )\n+}\n+\n+function ErrorIcon() {\n+  return (\n+    <svg\n+      width=\"20\"\n+      height=\"20\"\n+      viewBox=\"0 0 20 20\"\n+      fill=\"none\"\n+      xmlns=\"http://www.w3.org/2000/svg\"\n+    >\n+      <g clipPath=\"url(#clip0_2759_1881)\">\n+        <path\n+          fillRule=\"evenodd\"\n+          clipRule=\"evenodd\"\n+          d=\"M3.5 7.30762V12.6924L7.30762 16.5H12.6924L16.5 12.6924V7.30762L12.6924 3.5H7.30762L3.5 7.30762ZM18 12.8994L17.9951 12.998C17.9724 13.2271 17.8712 13.4423 17.707 13.6064L13.6064 17.707L13.5332 17.7734C13.3806 17.8985 13.1944 17.9757 12.998 17.9951L12.8994 18H7.10059L7.00195 17.9951C6.80562 17.9757 6.6194 17.8985 6.4668 17.7734L6.39355 17.707L2.29297 13.6064C2.12883 13.4423 2.02756 13.2271 2.00488 12.998L2 12.8994V7.10059C2 6.83539 2.10546 6.58109 2.29297 6.39355L6.39355 2.29297C6.55771 2.12883 6.77294 2.02756 7.00195 2.00488L7.10059 2H12.8994L12.998 2.00488C13.2271 2.02756 13.4423 2.12883 13.6064 2.29297L17.707 6.39355C17.8945 6.58109 18 6.83539 18 7.10059V12.8994ZM9.25 5.75H10.75L10.75 10.75H9.25L9.25 5.75ZM10 14C10.5523 14 11 13.5523 11 13C11 12.4477 10.5523 12 10 12C9.44772 12 9 12.4477 9 13C9 13.5523 9.44772 14 10 14Z\"\n+          fill=\"currentColor\"\n+        />\n+      </g>\n+      <defs>\n+        <clipPath id=\"clip0_2759_1881\">\n+          <rect\n+            width=\"16\"\n+            height=\"16\"\n+            fill=\"white\"\n+            transform=\"translate(2 2)\"\n+          />\n+        </clipPath>\n+      </defs>\n+    </svg>\n+  )\n+}\n+\n+function NotFoundIcon() {\n+  return (\n+    <svg\n+      width=\"20px\"\n+      height=\"20px\"\n+      viewBox=\"0 0 20 20\"\n+      fill=\"none\"\n+      xmlns=\"http://www.w3.org/2000/svg\"\n+    >\n+      <path\n+        fillRule=\"evenodd\"\n+        clipRule=\"evenodd\"\n+        d=\"M10.5586 2.5C11.1341 2.50004 11.6588 2.8294 11.9091 3.34766L17.8076 15.5654C18.1278 16.2292 17.6442 16.9997 16.9072 17H3.09274C2.35574 16.9997 1.8721 16.2292 2.19235 15.5654L8.09079 3.34766C8.34109 2.8294 8.86583 2.50004 9.44137 2.5H10.5586ZM3.89059 15.5H16.1093L10.5586 4H9.44137L3.89059 15.5ZM9.24997 6.75H10.75L10.75 10.75H9.24997L9.24997 6.75ZM9.99997 14C10.5523 14 11 13.5523 11 13C11 12.4477 10.5523 12 9.99997 12C9.44768 12 8.99997 12.4477 8.99997 13C8.99997 13.5523 9.44768 14 9.99997 14Z\"\n+        fill=\"currentColor\"\n+      />\n+    </svg>\n+  )\n+}\n+\n+function ResetIcon() {\n+  return (\n+    <svg\n+      width=\"20\"\n+      height=\"20\"\n+      viewBox=\"0 0 20 20\"\n+      fill=\"none\"\n+      xmlns=\"http://www.w3.org/2000/svg\"\n+    >\n+      <path\n+        d=\"M9.96484 3C13.8463 3.00018 17 6.13012 17 10C17 13.8699 13.8463 16.9998 9.96484 17C7.62404 17 5.54877 15.8617 4.27051 14.1123L3.82812 13.5068L5.03906 12.6221L5.48145 13.2275C6.48815 14.6053 8.12092 15.5 9.96484 15.5C13.0259 15.4998 15.5 13.0335 15.5 10C15.5 6.96654 13.0259 4.50018 9.96484 4.5C7.42905 4.5 5.29544 6.19429 4.63867 8.5H8V10H2.75C2.33579 10 2 9.66421 2 9.25V4H3.5V7.2373C4.57781 4.74376 7.06749 3 9.96484 3Z\"\n+        fill=\"currentColor\"\n+      />\n+    </svg>\n+  )\n+}\n+\n+export const styles = `\n+  .segment-boundary-trigger {\n+    position: relative;\n+    display: inline-flex;\n+    margin-left: auto;\n+    gap: 8px;\n+  }\n+\n+  .segment-boundary-trigger-button {\n+    width: 24px;\n+    height: 24px;\n+    display: flex;\n+    align-items: center;\n+    justify-content: center;\n+    font-weight: 500;\n+    color: var(--color-gray-1000);\n+    border-radius: 6px;\n+  }\n+  .segment-boundary-trigger-button--reset {\n+    background: transparent;\n+    border: none;\n+  }\n+  .segment-boundary-trigger-button svg {\n+    width: 20px;\n+    height: 20px;\n+  }\n+  .segment-boundary-trigger-button:hover {\n+    background: var(--color-gray-400);\n+    color: var(--color-gray-1000);\n+  }\n+  .segment-boundary-dropdown-backdrop {\n+    position: fixed;\n+    z-index: 3;\n+  }\n+\n+  .segment-boundary-dropdown {\n+    padding: 8px;\n+    background: var(--color-background-100);\n+    border: 1px solid var(--color-gray-400);\n+    border-radius: 6px;\n+    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n+    min-width: 120px;\n+  }\n+\n+  .segment-boundary-dropdown-item {\n+    display: flex;\n+    align-items: center;\n+    padding: 10px 8px;\n+    line-height: 20px;\n+    font-size: 14px;\n+    border-radius: 6px;\n+    color: var(--color-gray-1000);\n+    cursor: pointer;\n+  }\n+\n+  .segment-boundary-dropdown-item svg {\n+    margin-right: 12px;\n+    color: var(--color-gray-900);\n+  }\n+\n+  .segment-boundary-dropdown-item:hover {\n+    background: var(--color-gray-200);\n+  }\n+\n+  .segment-boundary-dropdown-item:first-child {\n+    border-top-left-radius: 4px;\n+    border-top-right-radius: 4px;\n+  }\n+\n+  .segment-boundary-dropdown-item:last-child {\n+    border-bottom-left-radius: 4px;\n+    border-bottom-right-radius: 4px;\n+  }\n+\n+  .segment-boundary-dropdown-divider {\n+    height: 1px;\n+    background: var(--color-gray-400);\n+    margin: 8px 0;\n+  }\n+`"
        },
        {
            "sha": "9fc6a00e05e4a26be562c1bcd8be3114cbfe5fea",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/overview/segment-explorer.tsx",
            "status": "modified",
            "additions": 45,
            "deletions": 3,
            "changes": 48,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-explorer.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-explorer.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverview%2Fsegment-explorer.tsx?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -1,6 +1,13 @@\n-import { useSegmentTree, type SegmentTrieNode } from '../../segment-explorer'\n+import {\n+  useSegmentTree,\n+  type SegmentTrieNode,\n+} from '../../segment-explorer-trie'\n import { css } from '../../utils/css'\n import { cx } from '../../utils/cx'\n+import {\n+  SegmentBoundaryTrigger,\n+  styles as segmentBoundaryTriggerStyles,\n+} from './segment-boundary-trigger'\n \n const BUILTIN_PREFIX = '__next_builtin__'\n \n@@ -68,6 +75,7 @@ function PageSegmentTreeLayerPresentation({\n \n   const folderChildrenKeys: string[] = []\n   const filesChildrenKeys: string[] = []\n+  let pageChild = null\n \n   for (const childKey of sortedChildrenKeys) {\n     const childNode = node.children[childKey]\n@@ -83,6 +91,20 @@ function PageSegmentTreeLayerPresentation({\n     folderChildrenKeys.push(childKey)\n   }\n \n+  for (const fileChildSegment of filesChildrenKeys) {\n+    const childNode = node.children[fileChildSegment]\n+    if (!childNode || !childNode.value) continue\n+\n+    // If it's a page node, we can use it as the page child\n+    if (\n+      childNode.value.type !== 'layout' &&\n+      childNode.value.type !== 'template'\n+    ) {\n+      pageChild = childNode\n+      break // We only need one page child\n+    }\n+  }\n+\n   const hasFilesChildren = filesChildrenKeys.length > 0\n \n   return (\n@@ -146,6 +168,15 @@ function PageSegmentTreeLayerPresentation({\n                   })}\n                 </span>\n               )}\n+              {/* TODO: only show triggers in dev panel remove this once the new panel UI is stable */}\n+              {process.env.__NEXT_DEVTOOL_NEW_PANEL_UI &&\n+                pageChild &&\n+                pageChild.value && (\n+                  <SegmentBoundaryTrigger\n+                    offset={6}\n+                    onSelectBoundary={pageChild.value.setBoundaryType}\n+                  />\n+                )}\n             </div>\n           </div>\n         </div>\n@@ -206,6 +237,12 @@ export const DEV_TOOLS_INFO_RENDER_FILES_STYLES = css`\n \n   .segment-explorer-filename {\n     display: inline-flex;\n+    width: 100%;\n+    align-items: center;\n+  }\n+\n+  .segment-explorer-filename select {\n+    margin-left: auto;\n   }\n \n   .segment-explorer-filename--path {\n@@ -226,6 +263,10 @@ export const DEV_TOOLS_INFO_RENDER_FILES_STYLES = css`\n   }\n \n   .segment-explorer-file-label {\n+    display: inline-flex;\n+    align-items: center;\n+    justify-content: center;\n+    height: 20px;\n     padding: 2px 6px;\n     border-radius: 16px;\n     font-size: var(--size-12);\n@@ -263,17 +304,18 @@ export const DEV_TOOLS_INFO_RENDER_FILES_STYLES = css`\n     background-color: var(--color-red-300);\n     color: var(--color-red-900);\n   }\n-\n   .segment-explorer-file-label--builtin {\n     background-color: transparent;\n     color: var(--color-gray-900);\n     border: 1px dashed var(--color-gray-500);\n+    cursor: default;\n   }\n-\n   .segment-explorer-file-label--builtin svg {\n     margin-left: 4px;\n     margin-right: -4px;\n   }\n+\n+  ${segmentBoundaryTriggerStyles}\n `\n \n function openInEditor({ filePath }: { filePath: string }) {"
        },
        {
            "sha": "a4812bb49fec27430d277cd7267395a31557d9bc",
            "filename": "packages/next/src/next-devtools/dev-overlay/segment-explorer-trie.test.tsx",
            "status": "renamed",
            "additions": 71,
            "deletions": 11,
            "changes": 82,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fsegment-explorer-trie.test.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fsegment-explorer-trie.test.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fsegment-explorer-trie.test.tsx?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -4,7 +4,24 @@\n /* eslint-disable @next/internal/typechecked-require -- Not a prod file */\n /* eslint-disable import/no-extraneous-dependencies -- Not a prod file */\n \n-import type * as SegmentExplorer from './segment-explorer'\n+import type { SegmentNodeState } from '../userspace/app/segment-explorer-node'\n+import type * as SegmentExplorer from './segment-explorer-trie'\n+\n+const createSegmentNode = ({\n+  pagePath,\n+  type,\n+}: {\n+  pagePath: string\n+  type: string\n+}): SegmentNodeState => {\n+  function placeholder() {}\n+  return {\n+    type,\n+    pagePath,\n+    boundaryType: null,\n+    setBoundaryType: placeholder,\n+  }\n+}\n \n describe('Segment Explorer', () => {\n   let cleanup: typeof import('@testing-library/react').cleanup\n@@ -17,7 +34,8 @@ describe('Segment Explorer', () => {\n     jest.resetModules()\n     jest.clearAllMocks()\n \n-    const segmentExplorer = require('./segment-explorer')\n+    const segmentExplorer =\n+      require('./segment-explorer-trie') as typeof SegmentExplorer\n     useSegmentTree = segmentExplorer.useSegmentTree\n     insertSegmentNode = segmentExplorer.insertSegmentNode\n     removeSegmentNode = segmentExplorer.removeSegmentNode\n@@ -31,9 +49,15 @@ describe('Segment Explorer', () => {\n   })\n \n   test('add complex structure', () => {\n-    insertSegmentNode({ pagePath: '/a/page.js', type: 'page' })\n-    insertSegmentNode({ pagePath: '/a/layout.js', type: 'layout' })\n-    insertSegmentNode({ pagePath: '/layout.js', type: 'layout' })\n+    insertSegmentNode(\n+      createSegmentNode({ pagePath: '/a/page.js', type: 'page' })\n+    )\n+    insertSegmentNode(\n+      createSegmentNode({ pagePath: '/a/layout.js', type: 'layout' })\n+    )\n+    insertSegmentNode(\n+      createSegmentNode({ pagePath: '/layout.js', type: 'layout' })\n+    )\n \n     const { result } = renderHook(useSegmentTree)\n \n@@ -48,13 +72,17 @@ describe('Segment Explorer', () => {\n                   value: {\n                     pagePath: '/a/layout.js',\n                     type: 'layout',\n+                    boundaryType: null,\n+                    setBoundaryType: expect.anything(),\n                   },\n                 },\n                 'page.js': {\n                   children: {},\n                   value: {\n                     pagePath: '/a/page.js',\n                     type: 'page',\n+                    boundaryType: null,\n+                    setBoundaryType: expect.anything(),\n                   },\n                 },\n               },\n@@ -65,6 +93,8 @@ describe('Segment Explorer', () => {\n               value: {\n                 pagePath: '/layout.js',\n                 type: 'layout',\n+                boundaryType: null,\n+                setBoundaryType: expect.anything(),\n               },\n             },\n           },\n@@ -76,11 +106,21 @@ describe('Segment Explorer', () => {\n   })\n \n   test('remove node in the middle', () => {\n-    insertSegmentNode({ pagePath: '/a/b/@sidebar/page.js', type: 'page' })\n-    insertSegmentNode({ pagePath: '/a/b/page.js', type: 'page' })\n-    insertSegmentNode({ pagePath: '/a/b/layout.js', type: 'layout' })\n-    insertSegmentNode({ pagePath: '/a/layout.js', type: 'layout' })\n-    insertSegmentNode({ pagePath: '/layout.js', type: 'layout' })\n+    insertSegmentNode(\n+      createSegmentNode({ pagePath: '/a/b/@sidebar/page.js', type: 'page' })\n+    )\n+    insertSegmentNode(\n+      createSegmentNode({ pagePath: '/a/b/page.js', type: 'page' })\n+    )\n+    insertSegmentNode(\n+      createSegmentNode({ pagePath: '/a/b/layout.js', type: 'layout' })\n+    )\n+    insertSegmentNode(\n+      createSegmentNode({ pagePath: '/a/layout.js', type: 'layout' })\n+    )\n+    insertSegmentNode(\n+      createSegmentNode({ pagePath: '/layout.js', type: 'layout' })\n+    )\n \n     const { result } = renderHook(useSegmentTree)\n \n@@ -99,6 +139,8 @@ describe('Segment Explorer', () => {\n                           value: {\n                             pagePath: '/a/b/@sidebar/page.js',\n                             type: 'page',\n+                            boundaryType: null,\n+                            setBoundaryType: expect.anything(),\n                           },\n                         },\n                       },\n@@ -109,13 +151,17 @@ describe('Segment Explorer', () => {\n                       value: {\n                         pagePath: '/a/b/layout.js',\n                         type: 'layout',\n+                        boundaryType: null,\n+                        setBoundaryType: expect.anything(),\n                       },\n                     },\n                     'page.js': {\n                       children: {},\n                       value: {\n                         pagePath: '/a/b/page.js',\n                         type: 'page',\n+                        boundaryType: null,\n+                        setBoundaryType: expect.anything(),\n                       },\n                     },\n                   },\n@@ -126,6 +172,8 @@ describe('Segment Explorer', () => {\n                   value: {\n                     pagePath: '/a/layout.js',\n                     type: 'layout',\n+                    boundaryType: null,\n+                    setBoundaryType: expect.anything(),\n                   },\n                 },\n               },\n@@ -136,6 +184,8 @@ describe('Segment Explorer', () => {\n               value: {\n                 pagePath: '/layout.js',\n                 type: 'layout',\n+                boundaryType: null,\n+                setBoundaryType: expect.anything(),\n               },\n             },\n           },\n@@ -145,7 +195,9 @@ describe('Segment Explorer', () => {\n       value: undefined,\n     })\n \n-    removeSegmentNode({ pagePath: '/a/b/layout.js', type: 'layout' })\n+    removeSegmentNode(\n+      createSegmentNode({ pagePath: '/a/b/layout.js', type: 'layout' })\n+    )\n \n     expect(result.current).toEqual({\n       children: {\n@@ -162,6 +214,8 @@ describe('Segment Explorer', () => {\n                           value: {\n                             pagePath: '/a/b/@sidebar/page.js',\n                             type: 'page',\n+                            boundaryType: null,\n+                            setBoundaryType: expect.anything(),\n                           },\n                         },\n                       },\n@@ -172,6 +226,8 @@ describe('Segment Explorer', () => {\n                       value: {\n                         pagePath: '/a/b/page.js',\n                         type: 'page',\n+                        boundaryType: null,\n+                        setBoundaryType: expect.anything(),\n                       },\n                     },\n                   },\n@@ -182,6 +238,8 @@ describe('Segment Explorer', () => {\n                   value: {\n                     pagePath: '/a/layout.js',\n                     type: 'layout',\n+                    boundaryType: null,\n+                    setBoundaryType: expect.anything(),\n                   },\n                 },\n               },\n@@ -192,6 +250,8 @@ describe('Segment Explorer', () => {\n               value: {\n                 pagePath: '/layout.js',\n                 type: 'layout',\n+                boundaryType: null,\n+                setBoundaryType: expect.anything(),\n               },\n             },\n           },",
            "previous_filename": "packages/next/src/next-devtools/dev-overlay/segment-explorer.test.tsx"
        },
        {
            "sha": "b8adfd9a93d45983dfa5a9a0dbabab29faca3f18",
            "filename": "packages/next/src/next-devtools/dev-overlay/segment-explorer-trie.ts",
            "status": "renamed",
            "additions": 11,
            "deletions": 9,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fsegment-explorer-trie.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fsegment-explorer-trie.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fsegment-explorer-trie.ts?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -1,4 +1,5 @@\n import { useSyncExternalStore } from 'react'\n+import type { SegmentNodeState } from '../userspace/app/segment-explorer-node'\n \n /**\n  * Trie data structure for storing and searching paths\n@@ -61,7 +62,7 @@ function createTrie<Value = string>({\n   getCharacters?: (item: Value) => string[]\n   compare?: (a: Value | undefined, b: Value | undefined) => boolean\n }): Trie<Value> {\n-  const root: TrieNode<Value> = {\n+  let root: TrieNode<Value> = {\n     value: undefined,\n     children: {},\n   }\n@@ -89,6 +90,7 @@ function createTrie<Value = string>({\n \n     currentNode.value = value\n \n+    root = { ...root }\n     markUpdated()\n   }\n \n@@ -118,6 +120,7 @@ function createTrie<Value = string>({\n       }\n     }\n \n+    root = { ...root }\n     markUpdated()\n   }\n \n@@ -128,18 +131,17 @@ function createTrie<Value = string>({\n   return { insert, remove, getRoot }\n }\n \n-export type SegmentNode = {\n-  type: string\n-  pagePath: string\n-}\n-\n-export type SegmentTrie = Trie<SegmentNode>\n-export type SegmentTrieNode = TrieNode<SegmentNode>\n+export type SegmentTrie = Trie<SegmentNodeState>\n+export type SegmentTrieNode = TrieNode<SegmentNodeState>\n \n const trie: SegmentTrie = createTrie({\n   compare: (a, b) => {\n     if (!a || !b) return false\n-    return a.pagePath === b.pagePath && a.type === b.type\n+    return (\n+      a.pagePath === b.pagePath &&\n+      a.type === b.type &&\n+      a.boundaryType === b.boundaryType\n+    )\n   },\n   getCharacters: (item) => item.pagePath.split('/'),\n })",
            "previous_filename": "packages/next/src/next-devtools/dev-overlay/segment-explorer.ts"
        },
        {
            "sha": "de94c8df8f9c043f7dc72e853165e10f412ddef0",
            "filename": "packages/next/src/next-devtools/userspace/app/app-dev-overlay-error-boundary.tsx",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fapp-dev-overlay-error-boundary.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fapp-dev-overlay-error-boundary.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fapp-dev-overlay-error-boundary.tsx?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -4,6 +4,7 @@ import { RuntimeErrorHandler } from '../../../client/dev/runtime-error-handler'\n import { ErrorBoundary } from '../../../client/components/error-boundary'\n import DefaultGlobalError from '../../../client/components/builtin/global-error'\n import type { GlobalErrorState } from '../../../client/components/app-router-instance'\n+import { SEGMENT_EXPLORER_SIMULATED_ERROR_MESSAGE } from './segment-explorer-node'\n \n type AppDevOverlayErrorBoundaryProps = {\n   children: React.ReactNode\n@@ -51,7 +52,13 @@ export class AppDevOverlayErrorBoundary extends PureComponent<\n     }\n   }\n \n-  componentDidCatch() {\n+  componentDidCatch(err: Error) {\n+    if (\n+      process.env.NODE_ENV === 'development' &&\n+      err.message === SEGMENT_EXPLORER_SIMULATED_ERROR_MESSAGE\n+    ) {\n+      return\n+    }\n     dispatcher.openErrorOverlay()\n   }\n "
        },
        {
            "sha": "efd8274c7ffed0d16b02b9e1339bd3ba6c9ca8e5",
            "filename": "packages/next/src/next-devtools/userspace/app/segment-explorer-node.tsx",
            "status": "added",
            "additions": 119,
            "deletions": 0,
            "changes": 119,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fsegment-explorer-node.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fsegment-explorer-node.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fsegment-explorer-node.tsx?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -0,0 +1,119 @@\n+'use client'\n+\n+import type { ReactNode } from 'react'\n+import { useState, createContext, useContext, use, useMemo } from 'react'\n+import { useLayoutEffect } from 'react'\n+import { dispatcher } from 'next/dist/compiled/next-devtools'\n+import { notFound } from '../../../client/components/not-found'\n+\n+export const SEGMENT_EXPLORER_SIMULATED_ERROR_MESSAGE =\n+  'NEXT_DEVTOOLS_SIMULATED_ERROR'\n+\n+export type SegmentNodeState = {\n+  type: string\n+  pagePath: string\n+  boundaryType: string | null\n+  setBoundaryType: (type: 'error' | 'not-found' | 'loading' | null) => void\n+}\n+\n+function SegmentTrieNode({\n+  type,\n+  pagePath,\n+}: {\n+  type: string\n+  pagePath: string\n+}): React.ReactNode {\n+  const { boundaryType, setBoundaryType } = useSegmentState()\n+  const nodeState: SegmentNodeState = useMemo(\n+    () => ({\n+      type,\n+      pagePath,\n+      boundaryType,\n+      setBoundaryType,\n+    }),\n+    [type, pagePath, boundaryType, setBoundaryType]\n+  )\n+\n+  // Use `useLayoutEffect` to ensure the state is updated during suspense.\n+  // `useEffect` won't work as the state is preserved during suspense.\n+  useLayoutEffect(() => {\n+    dispatcher.segmentExplorerNodeAdd(nodeState)\n+    return () => {\n+      dispatcher.segmentExplorerNodeRemove(nodeState)\n+    }\n+  }, [nodeState])\n+\n+  return null\n+}\n+\n+function NotFoundSegmentNode(): React.ReactNode {\n+  notFound()\n+}\n+\n+function ErrorSegmentNode(): React.ReactNode {\n+  throw new Error(SEGMENT_EXPLORER_SIMULATED_ERROR_MESSAGE)\n+}\n+\n+const forever = new Promise(() => {})\n+function LoadingSegmentNode(): React.ReactNode {\n+  use(forever)\n+  return null\n+}\n+\n+export function SegmentViewNode({\n+  type,\n+  pagePath,\n+  children,\n+}: {\n+  type: string\n+  pagePath: string\n+  children?: ReactNode\n+}): React.ReactNode {\n+  const { boundaryType } = useSegmentState()\n+\n+  const isChildBoundary = type !== 'layout' && type !== 'template'\n+\n+  let segmentNode = (\n+    <SegmentTrieNode key={type} type={type} pagePath={pagePath} />\n+  )\n+  if (boundaryType && boundaryType !== type && isChildBoundary) {\n+    if (boundaryType === 'loading') {\n+      segmentNode = <LoadingSegmentNode />\n+    } else if (boundaryType === 'not-found') {\n+      segmentNode = <NotFoundSegmentNode />\n+    } else if (boundaryType === 'error') {\n+      segmentNode = <ErrorSegmentNode />\n+    }\n+  }\n+\n+  return (\n+    <>\n+      {segmentNode}\n+      {children}\n+    </>\n+  )\n+}\n+\n+const SegmentStateContext = createContext<{\n+  boundaryType: 'not-found' | 'error' | 'loading' | null\n+  setBoundaryType: (type: 'not-found' | 'error' | 'loading' | null) => void\n+}>({\n+  boundaryType: null,\n+  setBoundaryType: () => {},\n+})\n+\n+export function SegmentStateProvider({ children }: { children: ReactNode }) {\n+  const [boundaryType, setBoundaryType] = useState<\n+    'not-found' | 'error' | 'loading' | null\n+  >(null)\n+\n+  return (\n+    <SegmentStateContext.Provider value={{ boundaryType, setBoundaryType }}>\n+      {children}\n+    </SegmentStateContext.Provider>\n+  )\n+}\n+\n+export function useSegmentState() {\n+  return useContext(SegmentStateContext)\n+}"
        },
        {
            "sha": "13c515ca280e8a5c7dfc9cd91d03782a39052a22",
            "filename": "packages/next/src/next-devtools/userspace/app/segment-explorer.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 23,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/0888886df0394bf28cb465e8ca302e5b52f3d90f/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fsegment-explorer.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0888886df0394bf28cb465e8ca302e5b52f3d90f/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fsegment-explorer.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fuserspace%2Fapp%2Fsegment-explorer.ts?ref=0888886df0394bf28cb465e8ca302e5b52f3d90f",
            "patch": "@@ -1,23 +0,0 @@\n-'use client'\n-import type { ReactNode } from 'react'\n-import { useEffect } from 'react'\n-import { dispatcher } from 'next/dist/compiled/next-devtools'\n-\n-export function SegmentViewNode({\n-  type,\n-  pagePath,\n-  children,\n-}: {\n-  type: string\n-  pagePath: string\n-  children?: ReactNode\n-}) {\n-  useEffect(() => {\n-    dispatcher.segmentExplorerNodeAdd(type, pagePath)\n-    return () => {\n-      dispatcher.segmentExplorerNodeRemove(type, pagePath)\n-    }\n-  }, [type, pagePath])\n-\n-  return children\n-}"
        },
        {
            "sha": "b390637cd711b0bc77db2144cfe8d4d072e3842c",
            "filename": "packages/next/src/server/app-render/create-component-tree.tsx",
            "status": "modified",
            "additions": 10,
            "deletions": 3,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -606,7 +606,11 @@ async function createComponentTreeInternal({\n     const loadingFilePath = getConventionPathByType(tree, dir, 'loading')\n     if (loadingFilePath) {\n       loadingElement = (\n-        <SegmentViewNode type=\"loading\" pagePath={loadingFilePath}>\n+        <SegmentViewNode\n+          key={cacheNodeKey + '-loading'}\n+          type=\"loading\"\n+          pagePath={loadingFilePath}\n+        >\n           {loadingElement}\n         </SegmentViewNode>\n       )\n@@ -747,10 +751,12 @@ async function createComponentTreeInternal({\n     const pageFilePath =\n       getConventionPathByType(tree, dir, 'page') ??\n       getConventionPathByType(tree, dir, 'defaultPage')\n+    const segmentType = isDefaultSegment ? 'default' : 'page'\n     const wrappedPageElement =\n       isSegmentViewEnabled && pageFilePath ? (\n         <SegmentViewNode\n-          type={isDefaultSegment ? 'default' : 'page'}\n+          key={cacheNodeKey + '-' + segmentType}\n+          type={segmentType}\n           pagePath={pageFilePath}\n         >\n           {pageElement}\n@@ -937,7 +943,7 @@ async function createComponentTreeInternal({\n     const layoutFilePath = getConventionPathByType(tree, dir, 'layout')\n     const wrappedSegmentNode =\n       isSegmentViewEnabled && layoutFilePath ? (\n-        <SegmentViewNode type=\"layout\" pagePath={layoutFilePath}>\n+        <SegmentViewNode key=\"layout\" type=\"layout\" pagePath={layoutFilePath}>\n           {segmentNode}\n         </SegmentViewNode>\n       ) : (\n@@ -1092,6 +1098,7 @@ async function createBoundaryConventionElement({\n   const wrappedElement =\n     isSegmentViewEnabled && element ? (\n       <SegmentViewNode\n+        key={cacheNodeKey + '-' + conventionName}\n         type={conventionName}\n         pagePath={getConventionPathByType(tree, dir, conventionName)!}\n       >"
        },
        {
            "sha": "6838edc9ff7aa1e91b7dd43fa551f8fcbc68ac9f",
            "filename": "packages/next/src/server/app-render/entry-base.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fentry-base.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fentry-base.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fentry-base.ts?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -49,11 +49,11 @@ import { workAsyncStorage } from '../app-render/work-async-storage.external'\n import { workUnitAsyncStorage } from './work-unit-async-storage.external'\n import { patchFetch as _patchFetch } from '../lib/patch-fetch'\n \n-let SegmentViewNode: typeof import('../../next-devtools/userspace/app/segment-explorer').SegmentViewNode =\n+let SegmentViewNode: typeof import('../../next-devtools/userspace/app/segment-explorer-node').SegmentViewNode =\n   () => null\n if (process.env.NODE_ENV === 'development') {\n   SegmentViewNode = (\n-    require('../../next-devtools/userspace/app/segment-explorer') as typeof import('../../next-devtools/userspace/app/segment-explorer')\n+    require('../../next-devtools/userspace/app/segment-explorer-node') as typeof import('../../next-devtools/userspace/app/segment-explorer-node')\n   ).SegmentViewNode\n }\n "
        },
        {
            "sha": "ddb5c37c38087b09d70bcf94ac2c17b3765b8cd9",
            "filename": "test/development/app-dir/hydration-error-count/hydration-error-count.test.ts",
            "status": "modified",
            "additions": 71,
            "deletions": 76,
            "changes": 147,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/test%2Fdevelopment%2Fapp-dir%2Fhydration-error-count%2Fhydration-error-count.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/test%2Fdevelopment%2Fapp-dir%2Fhydration-error-count%2Fhydration-error-count.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fhydration-error-count%2Fhydration-error-count.test.ts?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -12,21 +12,20 @@ describe('hydration-error-count', () => {\n      [\n        {\n          \"componentStack\": \"...\n-         <OuterLayoutRouter parallelRouterKey=\"children\" template={<RenderFromTemplateContext>}>\n-           <RenderFromTemplateContext>\n-             <ScrollAndFocusHandler segmentPath={[...]}>\n-               <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n-                 <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                   <LoadingBoundary loading={null}>\n-                     <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n-                       <RedirectBoundary>\n-                         <RedirectErrorBoundary router={{...}}>\n-                           <InnerLayoutRouter url=\"/bad-nesting\" tree={[...]} cacheNode={{lazyData:null, ...}} ...>\n-                             <ClientPageRoot Component={function Page} searchParams={{}} params={{}}>\n-                               <Page params={Promise} searchParams={Promise}>\n+         <RenderFromTemplateContext>\n+           <ScrollAndFocusHandler segmentPath={[...]}>\n+             <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n+               <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n+                 <LoadingBoundary loading={null}>\n+                   <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n+                     <RedirectBoundary>\n+                       <RedirectErrorBoundary router={{...}}>\n+                         <InnerLayoutRouter url=\"/bad-nesting\" tree={[...]} cacheNode={{lazyData:null, ...}} ...>\n+                           <ClientPageRoot Component={function Page} searchParams={{}} params={{}}>\n+                             <Page params={Promise} searchParams={Promise}>\n+     >                         <p>\n      >                           <p>\n-     >                             <p>\n-                             ...\",\n+                           ...\",\n          \"description\": \"In HTML, <p> cannot be a descendant of <p>.\n      This will cause a hydration error.\",\n          \"environmentLabel\": null,\n@@ -61,22 +60,21 @@ describe('hydration-error-count', () => {\n     await expect(browser).toDisplayCollapsedRedbox(`\n      {\n        \"componentStack\": \"...\n-         <OuterLayoutRouter parallelRouterKey=\"children\" template={<RenderFromTemplateContext>}>\n-           <RenderFromTemplateContext>\n-             <ScrollAndFocusHandler segmentPath={[...]}>\n-               <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n-                 <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                   <LoadingBoundary loading={null}>\n-                     <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n-                       <RedirectBoundary>\n-                         <RedirectErrorBoundary router={{...}}>\n-                           <InnerLayoutRouter url=\"/html-diff\" tree={[...]} cacheNode={{lazyData:null, ...}} ...>\n-                             <ClientPageRoot Component={function Page} searchParams={{}} params={{}}>\n-                               <Page params={Promise} searchParams={Promise}>\n-                                 <p>\n-     +                             client\n-     -                             server\n-                             ...\",\n+         <RenderFromTemplateContext>\n+           <ScrollAndFocusHandler segmentPath={[...]}>\n+             <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n+               <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n+                 <LoadingBoundary loading={null}>\n+                   <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n+                     <RedirectBoundary>\n+                       <RedirectErrorBoundary router={{...}}>\n+                         <InnerLayoutRouter url=\"/html-diff\" tree={[...]} cacheNode={{lazyData:null, ...}} segmentPath={[...]}>\n+                           <ClientPageRoot Component={function Page} searchParams={{}} params={{}}>\n+                             <Page params={Promise} searchParams={Promise}>\n+                               <p>\n+     +                           client\n+     -                           server\n+                           ...\",\n        \"description\": \"Hydration failed because the server rendered text didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:\",\n        \"environmentLabel\": null,\n        \"label\": \"Recoverable Error\",\n@@ -98,21 +96,20 @@ describe('hydration-error-count', () => {\n      [\n        {\n          \"componentStack\": \"...\n-         <OuterLayoutRouter parallelRouterKey=\"children\" template={<RenderFromTemplateContext>}>\n-           <RenderFromTemplateContext>\n-             <ScrollAndFocusHandler segmentPath={[...]}>\n-               <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n-                 <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                   <LoadingBoundary loading={null}>\n-                     <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n-                       <RedirectBoundary>\n-                         <RedirectErrorBoundary router={{...}}>\n-                           <InnerLayoutRouter url=\"/two-issues\" tree={[...]} cacheNode={{lazyData:null, ...}} ...>\n-                             <ClientPageRoot Component={function Page} searchParams={{}} params={{}}>\n-                               <Page params={Promise} searchParams={Promise}>\n-     >                           <p className=\"client\">\n-     >                             <p>\n-                             ...\",\n+         <RenderFromTemplateContext>\n+           <ScrollAndFocusHandler segmentPath={[...]}>\n+             <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n+               <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n+                 <LoadingBoundary loading={null}>\n+                   <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n+                     <RedirectBoundary>\n+                       <RedirectErrorBoundary router={{...}}>\n+                         <InnerLayoutRouter url=\"/two-issues\" tree={[...]} cacheNode={{lazyData:null, ...}} ...>\n+                           <ClientPageRoot Component={function Page} searchParams={{}} params={{}}>\n+                             <Page params={Promise} searchParams={Promise}>\n+     >                         <p className=\"client\">\n+     >                           <p>\n+                           ...\",\n          \"description\": \"In HTML, <p> cannot be a descendant of <p>.\n      This will cause a hydration error.\",\n          \"environmentLabel\": null,\n@@ -127,23 +124,22 @@ describe('hydration-error-count', () => {\n        },\n        {\n          \"componentStack\": \"...\n-         <OuterLayoutRouter parallelRouterKey=\"children\" template={<RenderFromTemplateContext>}>\n-           <RenderFromTemplateContext>\n-             <ScrollAndFocusHandler segmentPath={[...]}>\n-               <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n-                 <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                   <LoadingBoundary loading={null}>\n-                     <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n-                       <RedirectBoundary>\n-                         <RedirectErrorBoundary router={{...}}>\n-                           <InnerLayoutRouter url=\"/two-issues\" tree={[...]} cacheNode={{lazyData:null, ...}} ...>\n-                             <ClientPageRoot Component={function Page} searchParams={{}} params={{}}>\n-                               <Page params={Promise} searchParams={Promise}>\n-                                 <p\n-     +                             className=\"client\"\n-     -                             className=\"server\"\n-                                 >\n-                             ...\",\n+         <RenderFromTemplateContext>\n+           <ScrollAndFocusHandler segmentPath={[...]}>\n+             <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n+               <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n+                 <LoadingBoundary loading={null}>\n+                   <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n+                     <RedirectBoundary>\n+                       <RedirectErrorBoundary router={{...}}>\n+                         <InnerLayoutRouter url=\"/two-issues\" tree={[...]} cacheNode={{lazyData:null, ...}} ...>\n+                           <ClientPageRoot Component={function Page} searchParams={{}} params={{}}>\n+                             <Page params={Promise} searchParams={Promise}>\n+                               <p\n+     +                           className=\"client\"\n+     -                           className=\"server\"\n+                               >\n+                           ...\",\n          \"description\": \"Hydration failed because the server rendered HTML didn't match the client. As a result this tree will be regenerated on the client. This can happen if a SSR-ed Client Component used:\",\n          \"environmentLabel\": null,\n          \"label\": \"Recoverable Error\",\n@@ -166,21 +162,20 @@ describe('hydration-error-count', () => {\n      [\n        {\n          \"componentStack\": \"...\n-         <OuterLayoutRouter parallelRouterKey=\"children\" template={<RenderFromTemplateContext>}>\n-           <RenderFromTemplateContext>\n-             <ScrollAndFocusHandler segmentPath={[...]}>\n-               <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n-                 <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n-                   <LoadingBoundary loading={null}>\n-                     <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n-                       <RedirectBoundary>\n-                         <RedirectErrorBoundary router={{...}}>\n-                           <InnerLayoutRouter url=\"/hydration...\" tree={[...]} cacheNode={{lazyData:null, ...}} ...>\n-                             <ClientPageRoot Component={function Page} searchParams={{}} params={{}}>\n-                               <Page params={Promise} searchParams={Promise}>\n+         <RenderFromTemplateContext>\n+           <ScrollAndFocusHandler segmentPath={[...]}>\n+             <InnerScrollAndFocusHandler segmentPath={[...]} focusAndScrollRef={{apply:false, ...}}>\n+               <ErrorBoundary errorComponent={undefined} errorStyles={undefined} errorScripts={undefined}>\n+                 <LoadingBoundary loading={null}>\n+                   <HTTPAccessFallbackBoundary notFound={undefined} forbidden={undefined} unauthorized={undefined}>\n+                     <RedirectBoundary>\n+                       <RedirectErrorBoundary router={{...}}>\n+                         <InnerLayoutRouter url=\"/hydration...\" tree={[...]} cacheNode={{lazyData:null, ...}} ...>\n+                           <ClientPageRoot Component={function Page} searchParams={{}} params={{}}>\n+                             <Page params={Promise} searchParams={Promise}>\n+     >                         <p>\n      >                           <p>\n-     >                             <p>\n-                             ...\",\n+                           ...\",\n          \"description\": \"In HTML, <p> cannot be a descendant of <p>.\n      This will cause a hydration error.\",\n          \"environmentLabel\": null,"
        },
        {
            "sha": "7687467f9c79e3d3d51b280f8329cd00ac4ea3a7",
            "filename": "test/development/app-dir/segment-explorer/app/boundary/deep/error.tsx",
            "status": "added",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Fdeep%2Ferror.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Fdeep%2Ferror.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Fdeep%2Ferror.tsx?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -0,0 +1,10 @@\n+'use client'\n+\n+export default function Error() {\n+  return (\n+    <div>\n+      <h3>Error Boundary</h3>\n+      <p>Something went wrong in the deep boundary.</p>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "4093dfbb59f1ede0534dc1c2504e74e9d8d45aa0",
            "filename": "test/development/app-dir/segment-explorer/app/boundary/deep/layout.tsx",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Fdeep%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Fdeep%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Fdeep%2Flayout.tsx?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -0,0 +1,8 @@\n+export default function Layout({ children }: { children: React.ReactNode }) {\n+  return (\n+    <div>\n+      <h2>Boundary Layout - /deep</h2>\n+      {children}\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "3a4108c72d3038b400081823debf9c1a0abc1194",
            "filename": "test/development/app-dir/segment-explorer/app/boundary/deep/loading.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Fdeep%2Floading.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Fdeep%2Floading.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Fdeep%2Floading.tsx?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Loading() {\n+  return (\n+    <div>\n+      <h3>Loading Boundary...</h3>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "2e05eed943ed5c0b359a1378de423e05b49cb692",
            "filename": "test/development/app-dir/segment-explorer/app/boundary/deep/not-found.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Fdeep%2Fnot-found.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Fdeep%2Fnot-found.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Fdeep%2Fnot-found.tsx?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -0,0 +1,3 @@\n+export default function NotFound() {\n+  return <h2>Custom Not Found</h2>\n+}"
        },
        {
            "sha": "dd5a793232281054d57955726c53ba4576445f11",
            "filename": "test/development/app-dir/segment-explorer/app/boundary/deep/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Fdeep%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Fdeep%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Fdeep%2Fpage.tsx?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -0,0 +1,3 @@\n+export default async function Page() {\n+  return <p>{'/boundary/deep'}</p>\n+}"
        },
        {
            "sha": "3efb0f63e51215d71e944cd88d05ad2693eeac3c",
            "filename": "test/development/app-dir/segment-explorer/app/boundary/error.tsx",
            "status": "added",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Ferror.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Ferror.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Ferror.tsx?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -0,0 +1,10 @@\n+'use client'\n+\n+export default function Error({ reset }) {\n+  return (\n+    <div>\n+      <h3>Error Boundary</h3>\n+      <p>Something went wrong in the deep boundary.</p>\n+    </div>\n+  )\n+}"
        },
        {
            "sha": "3a4108c72d3038b400081823debf9c1a0abc1194",
            "filename": "test/development/app-dir/segment-explorer/app/boundary/loading.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/82c85a5b7bfbe38ee9c979d9da739925da20723c/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Floading.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/82c85a5b7bfbe38ee9c979d9da739925da20723c/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Floading.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Fapp-dir%2Fsegment-explorer%2Fapp%2Fboundary%2Floading.tsx?ref=82c85a5b7bfbe38ee9c979d9da739925da20723c",
            "patch": "@@ -0,0 +1,7 @@\n+export default function Loading() {\n+  return (\n+    <div>\n+      <h3>Loading Boundary...</h3>\n+    </div>\n+  )\n+}"
        }
    ],
    "stats": {
        "total": 931,
        "additions": 780,
        "deletions": 151
    }
}