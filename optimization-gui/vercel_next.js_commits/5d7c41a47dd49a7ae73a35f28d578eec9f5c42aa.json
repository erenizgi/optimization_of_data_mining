{
    "author": "lubieowoce",
    "message": "[Cache Components] Ensure cache misses always cause a restart in dev (#86583)\n\nThis PR works around a problem in the restart-on-cache-miss rendering\nflow where short-lived caches wouldn't be considered dynamic if they\nmanaged to fill microtaskily.\n\nThe problem is that:\n\n1. If a cache fills microtaskily, it won't register as a cache miss, so\nwe won't restart the render\n2. The logic for omitting short-lived caches only runs for cache hits\n(because it expects to run in the final render), so it won't be applied\nto a cache we just filled\n\nThe fix implemented here isn't ideal, but fixes the problem -- we just\nmake it so that all caches take at least a task to fill, and thus all\ncache misses will be \"noticed\" and cause a restart.\n\nThis sacrifices the nice property we had before where a microtasky cache\nmiss wouldn't trigger a restart, but we can live with that for now for\nthe sake of correctness.",
    "sha": "5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa",
    "files": [
        {
            "sha": "82b1b121503973f4c87b1e2eacbd6b534addc4cd",
            "filename": "packages/next/src/server/use-cache/use-cache-wrapper.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 1,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa/packages%2Fnext%2Fsrc%2Fserver%2Fuse-cache%2Fuse-cache-wrapper.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa/packages%2Fnext%2Fsrc%2Fserver%2Fuse-cache%2Fuse-cache-wrapper.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fuse-cache%2Fuse-cache-wrapper.ts?ref=5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa",
            "patch": "@@ -691,9 +691,23 @@ async function generateCacheEntryImpl(\n         stream = prelude\n       }\n       break\n+    case 'request':\n+      // If we're filling caches for a staged render, make sure that\n+      // it takes at least a task, so we'll always notice a cache miss between stages.\n+      //\n+      // TODO(restart-on-cache-miss): This is suboptimal.\n+      // Ideally we wouldn't need to restart for microtasky caches,\n+      // but the current logic for omitting short-lived caches only works correctly\n+      // if we do a second render, so that's the best we can do until we refactor that.\n+      if (\n+        process.env.NODE_ENV === 'development' &&\n+        outerWorkUnitStore.cacheSignal\n+      ) {\n+        await new Promise((resolve) => setTimeout(resolve))\n+      }\n+    // fallthrough\n     case 'prerender-ppr':\n     case 'prerender-legacy':\n-    case 'request':\n     case 'cache':\n     case 'private-cache':\n     case 'unstable-cache':"
        },
        {
            "sha": "a8958189720c5a8145a71b3d6f1b7d2643b68111",
            "filename": "test/e2e/app-dir/cache-components-errors/cache-components-errors.test.ts",
            "status": "modified",
            "additions": 506,
            "deletions": 172,
            "changes": 678,
            "blob_url": "https://github.com/vercel/next.js/blob/5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Fcache-components-errors.test.ts?ref=5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa",
            "patch": "@@ -2451,199 +2451,533 @@ describe('Cache Components Errors', () => {\n       })\n \n       describe('cacheLife with expire < 5 minutes', () => {\n-        if (isNextDev) {\n-          it('should show a redbox error', async () => {\n-            const browser = await next.browser('/use-cache-low-expire')\n+        describe('microtasky cache', () => {\n+          if (isNextDev) {\n+            it('should show a redbox error', async () => {\n+              const browser = await next.browser('/use-cache-low-expire/fast')\n \n-            await expect(browser).toDisplayCollapsedRedbox(\n-              `\"Redbox did not open.\"`\n-            )\n-          })\n-        } else {\n-          it('should error the build', async () => {\n-            try {\n-              await prerender('/use-cache-low-expire')\n-            } catch {\n-              // we expect the build to fail\n-            }\n+              await expect(browser).toDisplayCollapsedRedbox(`\n+               {\n+                 \"description\": \"Runtime data was accessed outside of <Suspense>\n \n-            const output = getPrerenderOutput(\n-              next.cliOutput.slice(cliOutputLength),\n-              { isMinified: !isDebugPrerender }\n-            )\n+               This delays the entire page from rendering, resulting in a slow user experience. Next.js uses this error to ensure your app loads instantly on every navigation. cookies(), headers(), and searchParams, are examples of Runtime data that can only come from a user request.\n \n-            if (isTurbopack) {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n-                 \"Error: Route \"/use-cache-low-expire\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n-                     at main (<anonymous>)\n-                     at body (<anonymous>)\n-                     at html (<anonymous>)\n-                 To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/use-cache-low-expire\" in your browser to investigate the error.\n-                 Error occurred prerendering page \"/use-cache-low-expire\". Read more: https://nextjs.org/docs/messages/prerender-error\n+               To fix this:\n \n-                 > Export encountered errors on following paths:\n-                 \t/use-cache-low-expire/page: /use-cache-low-expire\"\n-                `)\n+               Provide a fallback UI using <Suspense> around this component.\n+\n+               or\n+\n+               Move the Runtime data access into a deeper component wrapped in <Suspense>.\n+\n+               In either case this allows Next.js to stream its contents to the user when they request the page, while still providing an initial UI that is prerendered and prefetchable for instant navigations.\n+\n+               Learn more: https://nextjs.org/docs/messages/blocking-route\",\n+                 \"environmentLabel\": \"Server\",\n+                 \"label\": \"Blocking Route\",\n+                 \"source\": \"app/use-cache-low-expire/fast/page.tsx (3:16) @ Page\n+               > 3 | export default async function Page() {\n+                   |                ^\",\n+                 \"stack\": [\n+                   \"Page app/use-cache-low-expire/fast/page.tsx (3:16)\",\n+                 ],\n+               }\n+              `)\n+            })\n+          } else {\n+            it('should error the build', async () => {\n+              try {\n+                await prerender('/use-cache-low-expire/fast')\n+              } catch {\n+                // we expect the build to fail\n+              }\n+\n+              const output = getPrerenderOutput(\n+                next.cliOutput.slice(cliOutputLength),\n+                { isMinified: !isDebugPrerender }\n+              )\n+\n+              if (isTurbopack) {\n+                if (isDebugPrerender) {\n+                  expect(output).toMatchInlineSnapshot(`\n+                   \"Error: Route \"/use-cache-low-expire/fast\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n+                       at main (<anonymous>)\n+                       at body (<anonymous>)\n+                       at html (<anonymous>)\n+                   To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/use-cache-low-expire/fast\" in your browser to investigate the error.\n+                   Error occurred prerendering page \"/use-cache-low-expire/fast\". Read more: https://nextjs.org/docs/messages/prerender-error\n+\n+                   > Export encountered errors on following paths:\n+                   \t/use-cache-low-expire/fast/page: /use-cache-low-expire/fast\"\n+                  `)\n+                } else {\n+                  expect(output).toMatchInlineSnapshot(`\n+                   \"Error: Route \"/use-cache-low-expire/fast\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n+                       at main (<anonymous>)\n+                       at body (<anonymous>)\n+                       at html (<anonymous>)\n+                   To get a more detailed stack trace and pinpoint the issue, try one of the following:\n+                     - Start the app in development mode by running \\`next dev\\`, then open \"/use-cache-low-expire/fast\" in your browser to investigate the error.\n+                     - Rerun the production build with \\`next build --debug-prerender\\` to generate better stack traces.\n+                   Error occurred prerendering page \"/use-cache-low-expire/fast\". Read more: https://nextjs.org/docs/messages/prerender-error\n+                   Export encountered an error on /use-cache-low-expire/fast/page: /use-cache-low-expire/fast, exiting the build.\"\n+                  `)\n+                }\n               } else {\n-                expect(output).toMatchInlineSnapshot(`\n-                 \"Error: Route \"/use-cache-low-expire\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n-                     at main (<anonymous>)\n-                     at body (<anonymous>)\n-                     at html (<anonymous>)\n-                 To get a more detailed stack trace and pinpoint the issue, try one of the following:\n-                   - Start the app in development mode by running \\`next dev\\`, then open \"/use-cache-low-expire\" in your browser to investigate the error.\n-                   - Rerun the production build with \\`next build --debug-prerender\\` to generate better stack traces.\n-                 Error occurred prerendering page \"/use-cache-low-expire\". Read more: https://nextjs.org/docs/messages/prerender-error\n-                 Export encountered an error on /use-cache-low-expire/page: /use-cache-low-expire, exiting the build.\"\n-                `)\n+                if (isDebugPrerender) {\n+                  expect(output).toMatchInlineSnapshot(`\n+                   \"Error: Route \"/use-cache-low-expire/fast\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n+                       at <FIXME-library-internal>\n+                   To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/use-cache-low-expire/fast\" in your browser to investigate the error.\n+                   Error occurred prerendering page \"/use-cache-low-expire/fast\". Read more: https://nextjs.org/docs/messages/prerender-error\n+\n+                   > Export encountered errors on following paths:\n+                   \t/use-cache-low-expire/fast/page: /use-cache-low-expire/fast\"\n+                  `)\n+                } else {\n+                  expect(output).toMatchInlineSnapshot(`\n+                   \"Error: Route \"/use-cache-low-expire/fast\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n+                       at a (<next-dist-dir>)\n+                       at b (<next-dist-dir>)\n+                       at c (<next-dist-dir>)\n+                       at d (<next-dist-dir>)\n+                       at e (<next-dist-dir>)\n+                       at f (<next-dist-dir>)\n+                       at g (<next-dist-dir>)\n+                       at h (<next-dist-dir>)\n+                       at i (<next-dist-dir>)\n+                       at j (<next-dist-dir>)\n+                       at k (<next-dist-dir>)\n+                       at l (<next-dist-dir>)\n+                       at m (<next-dist-dir>)\n+                       at n (<next-dist-dir>)\n+                       at o (<next-dist-dir>)\n+                       at p (<next-dist-dir>)\n+                       at q (<next-dist-dir>)\n+                       at r (<next-dist-dir>)\n+                       at s (<next-dist-dir>)\n+                       at t (<next-dist-dir>)\n+                       at main (<anonymous>)\n+                       at body (<anonymous>)\n+                       at html (<anonymous>)\n+                       at u (<next-dist-dir>)\n+                       at v (<next-dist-dir>)\n+                       at w (<next-dist-dir>)\n+                       at x (<next-dist-dir>)\n+                       at y (<next-dist-dir>)\n+                       at z (<next-dist-dir>)\n+                       at a (<next-dist-dir>)\n+                       at b (<next-dist-dir>)\n+                       at c (<next-dist-dir>)\n+                       at d (<next-dist-dir>)\n+                       at e (<next-dist-dir>)\n+                   To get a more detailed stack trace and pinpoint the issue, try one of the following:\n+                     - Start the app in development mode by running \\`next dev\\`, then open \"/use-cache-low-expire/fast\" in your browser to investigate the error.\n+                     - Rerun the production build with \\`next build --debug-prerender\\` to generate better stack traces.\n+                   Error occurred prerendering page \"/use-cache-low-expire/fast\". Read more: https://nextjs.org/docs/messages/prerender-error\n+                   Export encountered an error on /use-cache-low-expire/fast/page: /use-cache-low-expire/fast, exiting the build.\"\n+                  `)\n+                }\n               }\n-            } else {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n-                 \"Error: Route \"/use-cache-low-expire\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n-                     at <FIXME-library-internal>\n-                 To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/use-cache-low-expire\" in your browser to investigate the error.\n-                 Error occurred prerendering page \"/use-cache-low-expire\". Read more: https://nextjs.org/docs/messages/prerender-error\n+            })\n+          }\n+        })\n+        describe('slow cache', () => {\n+          if (isNextDev) {\n+            it('should show a redbox error', async () => {\n+              const browser = await next.browser('/use-cache-low-expire/slow')\n \n-                 > Export encountered errors on following paths:\n-                 \t/use-cache-low-expire/page: /use-cache-low-expire\"\n-                `)\n+              await expect(browser).toDisplayCollapsedRedbox(`\n+               {\n+                 \"description\": \"Runtime data was accessed outside of <Suspense>\n+\n+               This delays the entire page from rendering, resulting in a slow user experience. Next.js uses this error to ensure your app loads instantly on every navigation. cookies(), headers(), and searchParams, are examples of Runtime data that can only come from a user request.\n+\n+               To fix this:\n+\n+               Provide a fallback UI using <Suspense> around this component.\n+\n+               or\n+\n+               Move the Runtime data access into a deeper component wrapped in <Suspense>.\n+\n+               In either case this allows Next.js to stream its contents to the user when they request the page, while still providing an initial UI that is prerendered and prefetchable for instant navigations.\n+\n+               Learn more: https://nextjs.org/docs/messages/blocking-route\",\n+                 \"environmentLabel\": \"Server\",\n+                 \"label\": \"Blocking Route\",\n+                 \"source\": \"app/use-cache-low-expire/slow/page.tsx (3:16) @ Page\n+               > 3 | export default async function Page() {\n+                   |                ^\",\n+                 \"stack\": [\n+                   \"Page app/use-cache-low-expire/slow/page.tsx (3:16)\",\n+                 ],\n+               }\n+              `)\n+            })\n+          } else {\n+            it('should error the build', async () => {\n+              try {\n+                await prerender('/use-cache-low-expire/slow')\n+              } catch {\n+                // we expect the build to fail\n+              }\n+\n+              const output = getPrerenderOutput(\n+                next.cliOutput.slice(cliOutputLength),\n+                { isMinified: !isDebugPrerender }\n+              )\n+\n+              if (isTurbopack) {\n+                if (isDebugPrerender) {\n+                  expect(output).toMatchInlineSnapshot(`\n+                   \"Error: Route \"/use-cache-low-expire/slow\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n+                       at main (<anonymous>)\n+                       at body (<anonymous>)\n+                       at html (<anonymous>)\n+                   To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/use-cache-low-expire/slow\" in your browser to investigate the error.\n+                   Error occurred prerendering page \"/use-cache-low-expire/slow\". Read more: https://nextjs.org/docs/messages/prerender-error\n+\n+                   > Export encountered errors on following paths:\n+                   \t/use-cache-low-expire/slow/page: /use-cache-low-expire/slow\"\n+                  `)\n+                } else {\n+                  expect(output).toMatchInlineSnapshot(`\n+                   \"Error: Route \"/use-cache-low-expire/slow\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n+                       at main (<anonymous>)\n+                       at body (<anonymous>)\n+                       at html (<anonymous>)\n+                   To get a more detailed stack trace and pinpoint the issue, try one of the following:\n+                     - Start the app in development mode by running \\`next dev\\`, then open \"/use-cache-low-expire/slow\" in your browser to investigate the error.\n+                     - Rerun the production build with \\`next build --debug-prerender\\` to generate better stack traces.\n+                   Error occurred prerendering page \"/use-cache-low-expire/slow\". Read more: https://nextjs.org/docs/messages/prerender-error\n+                   Export encountered an error on /use-cache-low-expire/slow/page: /use-cache-low-expire/slow, exiting the build.\"\n+                  `)\n+                }\n               } else {\n-                expect(output).toMatchInlineSnapshot(`\n-                 \"Error: Route \"/use-cache-low-expire\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n-                     at a (<next-dist-dir>)\n-                     at b (<next-dist-dir>)\n-                     at c (<next-dist-dir>)\n-                     at d (<next-dist-dir>)\n-                     at e (<next-dist-dir>)\n-                     at f (<next-dist-dir>)\n-                     at g (<next-dist-dir>)\n-                     at h (<next-dist-dir>)\n-                     at i (<next-dist-dir>)\n-                     at j (<next-dist-dir>)\n-                     at main (<anonymous>)\n-                     at body (<anonymous>)\n-                     at html (<anonymous>)\n-                     at k (<next-dist-dir>)\n-                     at l (<next-dist-dir>)\n-                     at m (<next-dist-dir>)\n-                     at n (<next-dist-dir>)\n-                     at o (<next-dist-dir>)\n-                     at p (<next-dist-dir>)\n-                     at q (<next-dist-dir>)\n-                     at r (<next-dist-dir>)\n-                     at s (<next-dist-dir>)\n-                     at t (<next-dist-dir>)\n-                     at u (<next-dist-dir>)\n-                 To get a more detailed stack trace and pinpoint the issue, try one of the following:\n-                   - Start the app in development mode by running \\`next dev\\`, then open \"/use-cache-low-expire\" in your browser to investigate the error.\n-                   - Rerun the production build with \\`next build --debug-prerender\\` to generate better stack traces.\n-                 Error occurred prerendering page \"/use-cache-low-expire\". Read more: https://nextjs.org/docs/messages/prerender-error\n-                 Export encountered an error on /use-cache-low-expire/page: /use-cache-low-expire, exiting the build.\"\n-                `)\n+                if (isDebugPrerender) {\n+                  expect(output).toMatchInlineSnapshot(`\n+                   \"Error: Route \"/use-cache-low-expire/slow\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n+                       at <FIXME-library-internal>\n+                   To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/use-cache-low-expire/slow\" in your browser to investigate the error.\n+                   Error occurred prerendering page \"/use-cache-low-expire/slow\". Read more: https://nextjs.org/docs/messages/prerender-error\n+\n+                   > Export encountered errors on following paths:\n+                   \t/use-cache-low-expire/slow/page: /use-cache-low-expire/slow\"\n+                  `)\n+                } else {\n+                  expect(output).toMatchInlineSnapshot(`\n+                   \"Error: Route \"/use-cache-low-expire/slow\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n+                       at a (<next-dist-dir>)\n+                       at b (<next-dist-dir>)\n+                       at c (<next-dist-dir>)\n+                       at d (<next-dist-dir>)\n+                       at e (<next-dist-dir>)\n+                       at f (<next-dist-dir>)\n+                       at g (<next-dist-dir>)\n+                       at h (<next-dist-dir>)\n+                       at i (<next-dist-dir>)\n+                       at j (<next-dist-dir>)\n+                       at k (<next-dist-dir>)\n+                       at l (<next-dist-dir>)\n+                       at m (<next-dist-dir>)\n+                       at n (<next-dist-dir>)\n+                       at o (<next-dist-dir>)\n+                       at p (<next-dist-dir>)\n+                       at q (<next-dist-dir>)\n+                       at r (<next-dist-dir>)\n+                       at s (<next-dist-dir>)\n+                       at t (<next-dist-dir>)\n+                       at main (<anonymous>)\n+                       at body (<anonymous>)\n+                       at html (<anonymous>)\n+                       at u (<next-dist-dir>)\n+                       at v (<next-dist-dir>)\n+                       at w (<next-dist-dir>)\n+                       at x (<next-dist-dir>)\n+                       at y (<next-dist-dir>)\n+                       at z (<next-dist-dir>)\n+                       at a (<next-dist-dir>)\n+                       at b (<next-dist-dir>)\n+                       at c (<next-dist-dir>)\n+                       at d (<next-dist-dir>)\n+                       at e (<next-dist-dir>)\n+                   To get a more detailed stack trace and pinpoint the issue, try one of the following:\n+                     - Start the app in development mode by running \\`next dev\\`, then open \"/use-cache-low-expire/slow\" in your browser to investigate the error.\n+                     - Rerun the production build with \\`next build --debug-prerender\\` to generate better stack traces.\n+                   Error occurred prerendering page \"/use-cache-low-expire/slow\". Read more: https://nextjs.org/docs/messages/prerender-error\n+                   Export encountered an error on /use-cache-low-expire/slow/page: /use-cache-low-expire/slow, exiting the build.\"\n+                  `)\n+                }\n               }\n-            }\n-          })\n-        }\n+            })\n+          }\n+        })\n       })\n \n       describe('cacheLife with revalidate: 0', () => {\n-        if (isNextDev) {\n-          it('should show a redbox error', async () => {\n-            const browser = await next.browser('/use-cache-revalidate-0')\n+        describe('microtasky cache', () => {\n+          if (isNextDev) {\n+            it('should show a redbox error', async () => {\n+              const browser = await next.browser('/use-cache-revalidate-0/fast')\n \n-            await expect(browser).toDisplayCollapsedRedbox(\n-              `\"Redbox did not open.\"`\n-            )\n-          })\n-        } else {\n-          it('should error the build', async () => {\n-            try {\n-              await prerender('/use-cache-revalidate-0')\n-            } catch {\n-              // we expect the build to fail\n-            }\n+              await expect(browser).toDisplayCollapsedRedbox(`\n+               {\n+                 \"description\": \"Runtime data was accessed outside of <Suspense>\n \n-            const output = getPrerenderOutput(\n-              next.cliOutput.slice(cliOutputLength),\n-              { isMinified: !isDebugPrerender }\n-            )\n+               This delays the entire page from rendering, resulting in a slow user experience. Next.js uses this error to ensure your app loads instantly on every navigation. cookies(), headers(), and searchParams, are examples of Runtime data that can only come from a user request.\n \n-            if (isTurbopack) {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n-                 \"Error: Route \"/use-cache-revalidate-0\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n-                     at main (<anonymous>)\n-                     at body (<anonymous>)\n-                     at html (<anonymous>)\n-                 To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/use-cache-revalidate-0\" in your browser to investigate the error.\n-                 Error occurred prerendering page \"/use-cache-revalidate-0\". Read more: https://nextjs.org/docs/messages/prerender-error\n+               To fix this:\n \n-                 > Export encountered errors on following paths:\n-                 \t/use-cache-revalidate-0/page: /use-cache-revalidate-0\"\n-                `)\n+               Provide a fallback UI using <Suspense> around this component.\n+\n+               or\n+\n+               Move the Runtime data access into a deeper component wrapped in <Suspense>.\n+\n+               In either case this allows Next.js to stream its contents to the user when they request the page, while still providing an initial UI that is prerendered and prefetchable for instant navigations.\n+\n+               Learn more: https://nextjs.org/docs/messages/blocking-route\",\n+                 \"environmentLabel\": \"Server\",\n+                 \"label\": \"Blocking Route\",\n+                 \"source\": \"app/use-cache-revalidate-0/fast/page.tsx (3:16) @ Page\n+               > 3 | export default async function Page() {\n+                   |                ^\",\n+                 \"stack\": [\n+                   \"Page app/use-cache-revalidate-0/fast/page.tsx (3:16)\",\n+                 ],\n+               }\n+              `)\n+            })\n+          } else {\n+            it('should error the build', async () => {\n+              try {\n+                await prerender('/use-cache-revalidate-0/fast')\n+              } catch {\n+                // we expect the build to fail\n+              }\n+\n+              const output = getPrerenderOutput(\n+                next.cliOutput.slice(cliOutputLength),\n+                { isMinified: !isDebugPrerender }\n+              )\n+\n+              if (isTurbopack) {\n+                if (isDebugPrerender) {\n+                  expect(output).toMatchInlineSnapshot(`\n+                   \"Error: Route \"/use-cache-revalidate-0/fast\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n+                       at main (<anonymous>)\n+                       at body (<anonymous>)\n+                       at html (<anonymous>)\n+                   To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/use-cache-revalidate-0/fast\" in your browser to investigate the error.\n+                   Error occurred prerendering page \"/use-cache-revalidate-0/fast\". Read more: https://nextjs.org/docs/messages/prerender-error\n+\n+                   > Export encountered errors on following paths:\n+                   \t/use-cache-revalidate-0/fast/page: /use-cache-revalidate-0/fast\"\n+                  `)\n+                } else {\n+                  expect(output).toMatchInlineSnapshot(`\n+                   \"Error: Route \"/use-cache-revalidate-0/fast\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n+                       at main (<anonymous>)\n+                       at body (<anonymous>)\n+                       at html (<anonymous>)\n+                   To get a more detailed stack trace and pinpoint the issue, try one of the following:\n+                     - Start the app in development mode by running \\`next dev\\`, then open \"/use-cache-revalidate-0/fast\" in your browser to investigate the error.\n+                     - Rerun the production build with \\`next build --debug-prerender\\` to generate better stack traces.\n+                   Error occurred prerendering page \"/use-cache-revalidate-0/fast\". Read more: https://nextjs.org/docs/messages/prerender-error\n+                   Export encountered an error on /use-cache-revalidate-0/fast/page: /use-cache-revalidate-0/fast, exiting the build.\"\n+                  `)\n+                }\n               } else {\n-                expect(output).toMatchInlineSnapshot(`\n-                 \"Error: Route \"/use-cache-revalidate-0\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n-                     at main (<anonymous>)\n-                     at body (<anonymous>)\n-                     at html (<anonymous>)\n-                 To get a more detailed stack trace and pinpoint the issue, try one of the following:\n-                   - Start the app in development mode by running \\`next dev\\`, then open \"/use-cache-revalidate-0\" in your browser to investigate the error.\n-                   - Rerun the production build with \\`next build --debug-prerender\\` to generate better stack traces.\n-                 Error occurred prerendering page \"/use-cache-revalidate-0\". Read more: https://nextjs.org/docs/messages/prerender-error\n-                 Export encountered an error on /use-cache-revalidate-0/page: /use-cache-revalidate-0, exiting the build.\"\n-                `)\n+                if (isDebugPrerender) {\n+                  expect(output).toMatchInlineSnapshot(`\n+                   \"Error: Route \"/use-cache-revalidate-0/fast\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n+                       at <FIXME-library-internal>\n+                   To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/use-cache-revalidate-0/fast\" in your browser to investigate the error.\n+                   Error occurred prerendering page \"/use-cache-revalidate-0/fast\". Read more: https://nextjs.org/docs/messages/prerender-error\n+\n+                   > Export encountered errors on following paths:\n+                   \t/use-cache-revalidate-0/fast/page: /use-cache-revalidate-0/fast\"\n+                  `)\n+                } else {\n+                  expect(output).toMatchInlineSnapshot(`\n+                   \"Error: Route \"/use-cache-revalidate-0/fast\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n+                       at a (<next-dist-dir>)\n+                       at b (<next-dist-dir>)\n+                       at c (<next-dist-dir>)\n+                       at d (<next-dist-dir>)\n+                       at e (<next-dist-dir>)\n+                       at f (<next-dist-dir>)\n+                       at g (<next-dist-dir>)\n+                       at h (<next-dist-dir>)\n+                       at i (<next-dist-dir>)\n+                       at j (<next-dist-dir>)\n+                       at k (<next-dist-dir>)\n+                       at l (<next-dist-dir>)\n+                       at m (<next-dist-dir>)\n+                       at n (<next-dist-dir>)\n+                       at o (<next-dist-dir>)\n+                       at p (<next-dist-dir>)\n+                       at q (<next-dist-dir>)\n+                       at r (<next-dist-dir>)\n+                       at s (<next-dist-dir>)\n+                       at t (<next-dist-dir>)\n+                       at main (<anonymous>)\n+                       at body (<anonymous>)\n+                       at html (<anonymous>)\n+                       at u (<next-dist-dir>)\n+                       at v (<next-dist-dir>)\n+                       at w (<next-dist-dir>)\n+                       at x (<next-dist-dir>)\n+                       at y (<next-dist-dir>)\n+                       at z (<next-dist-dir>)\n+                       at a (<next-dist-dir>)\n+                       at b (<next-dist-dir>)\n+                       at c (<next-dist-dir>)\n+                       at d (<next-dist-dir>)\n+                       at e (<next-dist-dir>)\n+                   To get a more detailed stack trace and pinpoint the issue, try one of the following:\n+                     - Start the app in development mode by running \\`next dev\\`, then open \"/use-cache-revalidate-0/fast\" in your browser to investigate the error.\n+                     - Rerun the production build with \\`next build --debug-prerender\\` to generate better stack traces.\n+                   Error occurred prerendering page \"/use-cache-revalidate-0/fast\". Read more: https://nextjs.org/docs/messages/prerender-error\n+                   Export encountered an error on /use-cache-revalidate-0/fast/page: /use-cache-revalidate-0/fast, exiting the build.\"\n+                  `)\n+                }\n               }\n-            } else {\n-              if (isDebugPrerender) {\n-                expect(output).toMatchInlineSnapshot(`\n-                 \"Error: Route \"/use-cache-revalidate-0\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n-                     at <FIXME-library-internal>\n-                 To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/use-cache-revalidate-0\" in your browser to investigate the error.\n-                 Error occurred prerendering page \"/use-cache-revalidate-0\". Read more: https://nextjs.org/docs/messages/prerender-error\n+            })\n+          }\n+        })\n+        describe('slow cache', () => {\n+          if (isNextDev) {\n+            it('should show a redbox error', async () => {\n+              const browser = await next.browser('/use-cache-revalidate-0/slow')\n \n-                 > Export encountered errors on following paths:\n-                 \t/use-cache-revalidate-0/page: /use-cache-revalidate-0\"\n-                `)\n+              await expect(browser).toDisplayCollapsedRedbox(`\n+               {\n+                 \"description\": \"Runtime data was accessed outside of <Suspense>\n+\n+               This delays the entire page from rendering, resulting in a slow user experience. Next.js uses this error to ensure your app loads instantly on every navigation. cookies(), headers(), and searchParams, are examples of Runtime data that can only come from a user request.\n+\n+               To fix this:\n+\n+               Provide a fallback UI using <Suspense> around this component.\n+\n+               or\n+\n+               Move the Runtime data access into a deeper component wrapped in <Suspense>.\n+\n+               In either case this allows Next.js to stream its contents to the user when they request the page, while still providing an initial UI that is prerendered and prefetchable for instant navigations.\n+\n+               Learn more: https://nextjs.org/docs/messages/blocking-route\",\n+                 \"environmentLabel\": \"Server\",\n+                 \"label\": \"Blocking Route\",\n+                 \"source\": \"app/use-cache-revalidate-0/slow/page.tsx (3:16) @ Page\n+               > 3 | export default async function Page() {\n+                   |                ^\",\n+                 \"stack\": [\n+                   \"Page app/use-cache-revalidate-0/slow/page.tsx (3:16)\",\n+                 ],\n+               }\n+              `)\n+            })\n+          } else {\n+            it('should error the build', async () => {\n+              try {\n+                await prerender('/use-cache-revalidate-0/slow')\n+              } catch {\n+                // we expect the build to fail\n+              }\n+\n+              const output = getPrerenderOutput(\n+                next.cliOutput.slice(cliOutputLength),\n+                { isMinified: !isDebugPrerender }\n+              )\n+\n+              if (isTurbopack) {\n+                if (isDebugPrerender) {\n+                  expect(output).toMatchInlineSnapshot(`\n+                   \"Error: Route \"/use-cache-revalidate-0/slow\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n+                       at main (<anonymous>)\n+                       at body (<anonymous>)\n+                       at html (<anonymous>)\n+                   To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/use-cache-revalidate-0/slow\" in your browser to investigate the error.\n+                   Error occurred prerendering page \"/use-cache-revalidate-0/slow\". Read more: https://nextjs.org/docs/messages/prerender-error\n+\n+                   > Export encountered errors on following paths:\n+                   \t/use-cache-revalidate-0/slow/page: /use-cache-revalidate-0/slow\"\n+                  `)\n+                } else {\n+                  expect(output).toMatchInlineSnapshot(`\n+                    \"Error: Route \"/use-cache-revalidate-0/slow\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n+                        at main (<anonymous>)\n+                        at body (<anonymous>)\n+                        at html (<anonymous>)\n+                    To get a more detailed stack trace and pinpoint the issue, try one of the following:\n+                      - Start the app in development mode by running \\`next dev\\`, then open \"/use-cache-revalidate-0/slow\" in your browser to investigate the error.\n+                      - Rerun the production build with \\`next build --debug-prerender\\` to generate better stack traces.\n+                    Error occurred prerendering page \"/use-cache-revalidate-0/slow\". Read more: https://nextjs.org/docs/messages/prerender-error\n+                    Export encountered an error on /use-cache-revalidate-0/slow/page: /use-cache-revalidate-0/slow, exiting the build.\"\n+                  `)\n+                }\n               } else {\n-                expect(output).toMatchInlineSnapshot(`\n-                 \"Error: Route \"/use-cache-revalidate-0\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n-                     at a (<next-dist-dir>)\n-                     at b (<next-dist-dir>)\n-                     at c (<next-dist-dir>)\n-                     at d (<next-dist-dir>)\n-                     at e (<next-dist-dir>)\n-                     at f (<next-dist-dir>)\n-                     at g (<next-dist-dir>)\n-                     at h (<next-dist-dir>)\n-                     at i (<next-dist-dir>)\n-                     at j (<next-dist-dir>)\n-                     at main (<anonymous>)\n-                     at body (<anonymous>)\n-                     at html (<anonymous>)\n-                     at k (<next-dist-dir>)\n-                     at l (<next-dist-dir>)\n-                     at m (<next-dist-dir>)\n-                     at n (<next-dist-dir>)\n-                     at o (<next-dist-dir>)\n-                     at p (<next-dist-dir>)\n-                     at q (<next-dist-dir>)\n-                     at r (<next-dist-dir>)\n-                     at s (<next-dist-dir>)\n-                     at t (<next-dist-dir>)\n-                     at u (<next-dist-dir>)\n-                 To get a more detailed stack trace and pinpoint the issue, try one of the following:\n-                   - Start the app in development mode by running \\`next dev\\`, then open \"/use-cache-revalidate-0\" in your browser to investigate the error.\n-                   - Rerun the production build with \\`next build --debug-prerender\\` to generate better stack traces.\n-                 Error occurred prerendering page \"/use-cache-revalidate-0\". Read more: https://nextjs.org/docs/messages/prerender-error\n-                 Export encountered an error on /use-cache-revalidate-0/page: /use-cache-revalidate-0, exiting the build.\"\n-                `)\n+                if (isDebugPrerender) {\n+                  expect(output).toMatchInlineSnapshot(`\n+                   \"Error: Route \"/use-cache-revalidate-0/slow\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n+                       at <FIXME-library-internal>\n+                   To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \\`next dev\\`, then open \"/use-cache-revalidate-0/slow\" in your browser to investigate the error.\n+                   Error occurred prerendering page \"/use-cache-revalidate-0/slow\". Read more: https://nextjs.org/docs/messages/prerender-error\n+\n+                   > Export encountered errors on following paths:\n+                   \t/use-cache-revalidate-0/slow/page: /use-cache-revalidate-0/slow\"\n+                  `)\n+                } else {\n+                  expect(output).toMatchInlineSnapshot(`\n+                   \"Error: Route \"/use-cache-revalidate-0/slow\": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route\n+                       at a (<next-dist-dir>)\n+                       at b (<next-dist-dir>)\n+                       at c (<next-dist-dir>)\n+                       at d (<next-dist-dir>)\n+                       at e (<next-dist-dir>)\n+                       at f (<next-dist-dir>)\n+                       at g (<next-dist-dir>)\n+                       at h (<next-dist-dir>)\n+                       at i (<next-dist-dir>)\n+                       at j (<next-dist-dir>)\n+                       at k (<next-dist-dir>)\n+                       at l (<next-dist-dir>)\n+                       at m (<next-dist-dir>)\n+                       at n (<next-dist-dir>)\n+                       at o (<next-dist-dir>)\n+                       at p (<next-dist-dir>)\n+                       at q (<next-dist-dir>)\n+                       at r (<next-dist-dir>)\n+                       at s (<next-dist-dir>)\n+                       at t (<next-dist-dir>)\n+                       at main (<anonymous>)\n+                       at body (<anonymous>)\n+                       at html (<anonymous>)\n+                       at u (<next-dist-dir>)\n+                       at v (<next-dist-dir>)\n+                       at w (<next-dist-dir>)\n+                       at x (<next-dist-dir>)\n+                       at y (<next-dist-dir>)\n+                       at z (<next-dist-dir>)\n+                       at a (<next-dist-dir>)\n+                       at b (<next-dist-dir>)\n+                       at c (<next-dist-dir>)\n+                       at d (<next-dist-dir>)\n+                       at e (<next-dist-dir>)\n+                   To get a more detailed stack trace and pinpoint the issue, try one of the following:\n+                     - Start the app in development mode by running \\`next dev\\`, then open \"/use-cache-revalidate-0/slow\" in your browser to investigate the error.\n+                     - Rerun the production build with \\`next build --debug-prerender\\` to generate better stack traces.\n+                   Error occurred prerendering page \"/use-cache-revalidate-0/slow\". Read more: https://nextjs.org/docs/messages/prerender-error\n+                   Export encountered an error on /use-cache-revalidate-0/slow/page: /use-cache-revalidate-0/slow, exiting the build.\"\n+                  `)\n+                }\n               }\n-            }\n-          })\n-        }\n+            })\n+          }\n+        })\n       })\n \n       describe('reading fallback params', () => {"
        },
        {
            "sha": "c4c253f52db6f2f5e9332b428572ccaeff6f7ce6",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/use-cache-low-expire/fast/page.tsx",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fuse-cache-low-expire%2Ffast%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fuse-cache-low-expire%2Ffast%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fuse-cache-low-expire%2Ffast%2Fpage.tsx?ref=5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa",
            "patch": "@@ -0,0 +1,22 @@\n+import { cacheLife } from 'next/cache'\n+\n+export default async function Page() {\n+  'use cache: remote'\n+\n+  cacheLife({ expire: 299 }) // 1 second below the threshold of 5 minutes\n+\n+  // This cache can produce an entry microtaskily.\n+  // We explicitly test it separately from \"slow\" caches,\n+  // because of a dev bug where \"fast\" caches like this didn't register as a cache miss\n+  // and thus sidestepped the usual logic for omitting short-lived caches.\n+\n+  return (\n+    <>\n+      <p>\n+        This page is cached with a low expire time. Such a short-lived cache is\n+        excluded from prerenders, and creates a dynamic hole. Without a parent\n+        suspense boundary, this will cause an error during prerendering.\n+      </p>\n+    </>\n+  )\n+}"
        },
        {
            "sha": "a67d98a7cea5b621559ec10d1c6a6d725a705816",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/use-cache-low-expire/slow/page.tsx",
            "status": "renamed",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fuse-cache-low-expire%2Fslow%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fuse-cache-low-expire%2Fslow%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fuse-cache-low-expire%2Fslow%2Fpage.tsx?ref=5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa",
            "patch": "@@ -5,6 +5,9 @@ export default async function Page() {\n \n   cacheLife({ expire: 299 }) // 1 second below the threshold of 5 minutes\n \n+  // This cache takes >1 task to fill, so it'll always show up as a cache miss in dev\n+  await new Promise((resolve) => setTimeout(resolve, 5))\n+\n   return (\n     <>\n       <p>",
            "previous_filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/use-cache-low-expire/page.tsx"
        },
        {
            "sha": "07ea777b565f388a4980264cad6c2326d6b4e3e6",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/use-cache-revalidate-0/fast/page.tsx",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fuse-cache-revalidate-0%2Ffast%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fuse-cache-revalidate-0%2Ffast%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fuse-cache-revalidate-0%2Ffast%2Fpage.tsx?ref=5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa",
            "patch": "@@ -0,0 +1,22 @@\n+import { cacheLife } from 'next/cache'\n+\n+export default async function Page() {\n+  'use cache: remote'\n+\n+  cacheLife({ revalidate: 0 })\n+\n+  // This cache can produce an entry microtaskily.\n+  // We explicitly test it separately from \"slow\" caches,\n+  // because of a dev bug where \"fast\" caches like this didn't register as a cache miss\n+  // and thus sidestepped the usual logic for omitting short-lived caches.\n+\n+  return (\n+    <>\n+      <p>\n+        This page is cached with a zero revalidate time. Such a short-lived\n+        cache is excluded from prerenders, and creates a dynamic hole. Without a\n+        parent suspense boundary, this will cause an error during prerendering.\n+      </p>\n+    </>\n+  )\n+}"
        },
        {
            "sha": "5419157cbbc94dce5d53e5d3627030602e55a679",
            "filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/use-cache-revalidate-0/slow/page.tsx",
            "status": "renamed",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fuse-cache-revalidate-0%2Fslow%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fuse-cache-revalidate-0%2Fslow%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fcache-components-errors%2Ffixtures%2Fdefault%2Fapp%2Fuse-cache-revalidate-0%2Fslow%2Fpage.tsx?ref=5d7c41a47dd49a7ae73a35f28d578eec9f5c42aa",
            "patch": "@@ -5,6 +5,9 @@ export default async function Page() {\n \n   cacheLife({ revalidate: 0 })\n \n+  // This cache takes >1 task to fill, so it'll always show up as a cache miss in dev\n+  await new Promise((resolve) => setTimeout(resolve, 5))\n+\n   return (\n     <>\n       <p>",
            "previous_filename": "test/e2e/app-dir/cache-components-errors/fixtures/default/app/use-cache-revalidate-0/page.tsx"
        }
    ],
    "stats": {
        "total": 744,
        "additions": 571,
        "deletions": 173
    }
}