{
    "author": "eps1lon",
    "message": "[dev-overlay] Fix unactionable `useLayoutEffect` warning if React 18 is used (#77737)",
    "sha": "bc2964c41a55170e91eadded6e0c46ff6a340a53",
    "files": [
        {
            "sha": "97c5350f5db7dfd61074a5bf4f81a25b926234ca",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/shadow-portal.tsx",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/bc2964c41a55170e91eadded6e0c46ff6a340a53/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Fshadow-portal.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/bc2964c41a55170e91eadded6e0c46ff6a340a53/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Fshadow-portal.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Fshadow-portal.tsx?ref=bc2964c41a55170e91eadded6e0c46ff6a340a53",
            "patch": "@@ -7,7 +7,11 @@ export function ShadowPortal({ children }: { children: React.ReactNode }) {\n   let shadowNode = React.useRef<ShadowRoot | null>(null)\n   let [, forceUpdate] = React.useState<{} | undefined>()\n \n-  React.useLayoutEffect(() => {\n+  // Don't use useLayoutEffect here, as it will cause warnings during SSR in React 18.\n+  // Don't use useSyncExternalStore as an SSR gate unless you verified it doesn't\n+  // downgrade a Transition of the initial root render to a sync render or\n+  // we can assure the root render is not a Transition.\n+  React.useEffect(() => {\n     const ownerDocument = document\n     portalNode.current = ownerDocument.createElement('nextjs-portal')\n     // load default color preference from localstorage"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 5,
        "deletions": 1
    }
}