{
    "author": "timneutkens",
    "message": "Reuse routeModule loaderTree (#82987)\n\n## What?\n\nCurrently there are two paths to access the same variable loaderTree variable. This makes it one path.",
    "sha": "62f9611facd13ca7720b8fcfbc609c948a0563ba",
    "files": [
        {
            "sha": "5bc74ed6fe036199c00fa1c9009c02885ddd626e",
            "filename": "packages/next/src/build/templates/app-page.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/62f9611facd13ca7720b8fcfbc609c948a0563ba/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/62f9611facd13ca7720b8fcfbc609c948a0563ba/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Ftemplates%2Fapp-page.ts?ref=62f9611facd13ca7720b8fcfbc609c948a0563ba",
            "patch": "@@ -70,7 +70,7 @@ declare const pages: any\n // INJECT:tree\n // INJECT:pages\n \n-export { tree, pages }\n+export { pages }\n \n import GlobalError from 'VAR_MODULE_GLOBAL_ERROR' with { 'turbopack-transition': 'next-server-utility' }\n "
        },
        {
            "sha": "0b9e16ea5a5c1a1d99cc71d1462a01fa20581156",
            "filename": "packages/next/src/server/app-render/app-render.tsx",
            "status": "modified",
            "additions": 17,
            "deletions": 6,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/62f9611facd13ca7720b8fcfbc609c948a0563ba/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/62f9611facd13ca7720b8fcfbc609c948a0563ba/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx?ref=62f9611facd13ca7720b8fcfbc609c948a0563ba",
            "patch": "@@ -430,7 +430,9 @@ async function generateDynamicRSCPayload(\n \n   const {\n     componentMod: {\n-      tree: loaderTree,\n+      routeModule: {\n+        userland: { loaderTree },\n+      },\n       createMetadataComponents,\n       MetadataBoundary,\n       ViewportBoundary,\n@@ -619,10 +621,14 @@ async function generateRuntimePrefetchResult(\n   const generatePayload = () => generateDynamicRSCPayload(ctx, undefined)\n \n   const {\n-    componentMod: { tree },\n+    componentMod: {\n+      routeModule: {\n+        userland: { loaderTree },\n+      },\n+    },\n     getDynamicParamFromSegment,\n   } = ctx\n-  const rootParams = getRootParams(tree, getDynamicParamFromSegment)\n+  const rootParams = getRootParams(loaderTree, getDynamicParamFromSegment)\n \n   // We need to share caches between the prospective prerender and the final prerender,\n   // but we're not going to persist this anywhere.\n@@ -953,7 +959,7 @@ async function warmupDevRender(\n   }\n \n   const rootParams = getRootParams(\n-    ComponentMod.tree,\n+    ComponentMod.routeModule.userland.loaderTree,\n     getDynamicParamFromSegment\n   )\n \n@@ -1589,7 +1595,12 @@ async function renderToHTMLOrFlightImpl(\n   ComponentMod.patchFetch()\n \n   // Pull out the hooks/references from the component.\n-  const { tree: loaderTree, taintObjectReference } = ComponentMod\n+  const {\n+    routeModule: {\n+      userland: { loaderTree },\n+    },\n+    taintObjectReference,\n+  } = ComponentMod\n   if (enableTainting) {\n     taintObjectReference(\n       'Do not pass process.env to Client Components since it will leak sensitive data',\n@@ -2601,7 +2612,7 @@ async function spawnDynamicValidationInDev(\n   const { ServerInsertedHTMLProvider } = createServerInsertedHTML()\n \n   const rootParams = getRootParams(\n-    ComponentMod.tree,\n+    ComponentMod.routeModule.userland.loaderTree,\n     getDynamicParamFromSegment\n   )\n "
        }
    ],
    "stats": {
        "total": 25,
        "additions": 18,
        "deletions": 7
    }
}