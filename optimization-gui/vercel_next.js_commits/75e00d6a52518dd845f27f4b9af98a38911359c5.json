{
    "author": "mischnic",
    "message": "Turbopack: inline `typeof window` in node_modules for server (#80945)",
    "sha": "75e00d6a52518dd845f27f4b9af98a38911359c5",
    "files": [
        {
            "sha": "d72f06ad5da92557a32093726682612fa8be12dc",
            "filename": "crates/next-core/src/next_server/context.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/75e00d6a52518dd845f27f4b9af98a38911359c5/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fcontext.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75e00d6a52518dd845f27f4b9af98a38911359c5/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fcontext.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fcontext.rs?ref=75e00d6a52518dd845f27f4b9af98a38911359c5",
            "patch": "@@ -613,10 +613,6 @@ pub async fn get_server_module_options_context(\n             };\n \n             let foreign_code_module_options_context = ModuleOptionsContext {\n-                ecmascript: EcmascriptOptionsContext {\n-                    enable_typeof_window_inlining: None,\n-                    ..module_options_context.ecmascript\n-                },\n                 module_rules: foreign_next_server_rules.clone(),\n                 enable_webpack_loaders: foreign_enable_webpack_loaders,\n                 // NOTE(WEB-1016) PostCSS transforms should also apply to foreign code.\n@@ -680,10 +676,6 @@ pub async fn get_server_module_options_context(\n             next_server_rules.extend(source_transform_rules);\n \n             let foreign_code_module_options_context = ModuleOptionsContext {\n-                ecmascript: EcmascriptOptionsContext {\n-                    enable_typeof_window_inlining: None,\n-                    ..module_options_context.ecmascript\n-                },\n                 module_rules: foreign_next_server_rules.clone(),\n                 enable_webpack_loaders: foreign_enable_webpack_loaders,\n                 // NOTE(WEB-1016) PostCSS transforms should also apply to foreign code."
        },
        {
            "sha": "6ec2be9640024248c0f0d6fc19c1de706150aa65",
            "filename": "turbopack/crates/turbopack/src/module_options/module_options_context.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/75e00d6a52518dd845f27f4b9af98a38911359c5/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmodule_options_context.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/75e00d6a52518dd845f27f4b9af98a38911359c5/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmodule_options_context.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Fmodule_options_context.rs?ref=75e00d6a52518dd845f27f4b9af98a38911359c5",
            "patch": "@@ -71,7 +71,7 @@ pub enum DecoratorsKind {\n }\n \n /// The types when replacing `typeof window` with a constant.\n-#[derive(Clone, PartialEq, Eq, Debug, TraceRawVcs, Serialize, Deserialize, NonLocalValue)]\n+#[derive(Copy, Clone, PartialEq, Eq, Debug, TraceRawVcs, Serialize, Deserialize, NonLocalValue)]\n pub enum TypeofWindow {\n     Object,\n     Undefined,"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 1,
        "deletions": 9
    }
}