{
    "author": "eps1lon",
    "message": "[devtools] Fix various `exhaustive-deps` violations (#82010)\n\nThese fixes are pretty local and isolated so I felt safe bundling them up.",
    "sha": "0b0e242821687832e02a205d6b050ed327498df1",
    "files": [
        {
            "sha": "5881f8b0a262e45e3d987b71bf528b1faf6c18d6",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/dialog/dialog.tsx",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/0b0e242821687832e02a205d6b050ed327498df1/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdialog%2Fdialog.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0b0e242821687832e02a205d6b050ed327498df1/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdialog%2Fdialog.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdialog%2Fdialog.tsx?ref=0b0e242821687832e02a205d6b050ed327498df1",
            "patch": "@@ -7,7 +7,6 @@ export type DialogProps = {\n   'aria-describedby': string\n   className?: string\n   onClose?: () => void\n-  dialogResizerRef?: React.RefObject<HTMLDivElement | null>\n } & React.HTMLAttributes<HTMLDivElement>\n \n const CSS_SELECTORS_TO_EXCLUDE_ON_CLICK_OUTSIDE = [\n@@ -27,7 +26,6 @@ const Dialog: React.FC<DialogProps> = function Dialog({\n   onClose,\n   'aria-labelledby': ariaLabelledBy,\n   'aria-describedby': ariaDescribedBy,\n-  dialogResizerRef,\n   ...props\n }) {\n   const dialogRef = React.useRef<HTMLDivElement | null>(null)"
        },
        {
            "sha": "0196e4acc731f0706d43805a23619d25fbba64ef",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/dialog/dialog.tsx",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/0b0e242821687832e02a205d6b050ed327498df1/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdialog%2Fdialog.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0b0e242821687832e02a205d6b050ed327498df1/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdialog%2Fdialog.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Fdialog%2Fdialog.tsx?ref=0b0e242821687832e02a205d6b050ed327498df1",
            "patch": "@@ -3,7 +3,6 @@ import { Dialog } from '../../dialog/dialog'\n type ErrorOverlayDialogProps = {\n   children?: React.ReactNode\n   onClose?: () => void\n-  dialogResizerRef?: React.RefObject<HTMLDivElement | null>\n   footer?: React.ReactNode\n } & React.HTMLAttributes<HTMLDivElement>\n "
        },
        {
            "sha": "cfc3aaed4f869d045ab67fec16267b51ad1fb9d8",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/error-overlay-layout/error-overlay-layout.tsx",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/0b0e242821687832e02a205d6b050ed327498df1/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-layout%2Ferror-overlay-layout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0b0e242821687832e02a205d6b050ed327498df1/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-layout%2Ferror-overlay-layout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-layout%2Ferror-overlay-layout.tsx?ref=0b0e242821687832e02a205d6b050ed327498df1",
            "patch": "@@ -128,7 +128,6 @@ export function ErrorOverlayLayout({\n         />\n         <ErrorOverlayDialog\n           onClose={onClose}\n-          dialogResizerRef={dialogResizerRef}\n           data-has-footer={hasFooter}\n           onScroll={onScroll}\n           footer={hasFooter && <ErrorOverlayFooter errorCode={errorCode} />}"
        },
        {
            "sha": "07e475c30007303cfed84f50656629a67a5b7590",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/resizer/index.tsx",
            "status": "modified",
            "additions": 8,
            "deletions": 10,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/0b0e242821687832e02a205d6b050ed327498df1/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fresizer%2Findex.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/0b0e242821687832e02a205d6b050ed327498df1/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fresizer%2Findex.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fresizer%2Findex.tsx?ref=0b0e242821687832e02a205d6b050ed327498df1",
            "patch": "@@ -1,4 +1,4 @@\n-import { useEffect, useRef, useState, forwardRef } from 'react'\n+import { forwardRef, useEffect, useState } from 'react'\n \n export const Resizer = forwardRef(function Resizer(\n   {\n@@ -11,8 +11,8 @@ export const Resizer = forwardRef(function Resizer(\n   } & React.HTMLProps<HTMLDivElement>,\n   resizerRef: React.Ref<HTMLDivElement | null>\n ) {\n-  const ref = useRef<HTMLDivElement | null>(null)\n-  const [height, measuring] = useMeasureHeight(ref, measure)\n+  const [element, setElement] = useState<HTMLDivElement | null>(null)\n+  const [height, measuring] = useMeasureHeight(element, measure)\n \n   return (\n     <div\n@@ -26,13 +26,13 @@ export const Resizer = forwardRef(function Resizer(\n         transition: 'height 250ms var(--timing-swift)',\n       }}\n     >\n-      <div ref={ref}>{children}</div>\n+      <div ref={setElement}>{children}</div>\n     </div>\n   )\n })\n \n function useMeasureHeight(\n-  ref: React.RefObject<HTMLDivElement | null>,\n+  element: HTMLDivElement | null,\n   measure: boolean\n ): [number, boolean] {\n   const [height, setHeight] = useState<number>(0)\n@@ -44,9 +44,8 @@ function useMeasureHeight(\n     }\n \n     let timerId: number\n-    const el = ref.current\n \n-    if (!el) {\n+    if (!element) {\n       return\n     }\n \n@@ -60,10 +59,9 @@ function useMeasureHeight(\n       setHeight(contentRect.height)\n     })\n \n-    observer.observe(el)\n+    observer.observe(element)\n     return () => observer.disconnect()\n-    // eslint-disable-next-line react-hooks/exhaustive-deps\n-  }, [measure])\n+  }, [measure, element])\n \n   return [height, measuring]\n }"
        },
        {
            "sha": "f762c23def43be7f98a554b8c969195c9d8461c2",
            "filename": "packages/next/src/next-devtools/dev-overlay/hooks/use-shortcuts.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/0b0e242821687832e02a205d6b050ed327498df1/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fhooks%2Fuse-shortcuts.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/0b0e242821687832e02a205d6b050ed327498df1/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fhooks%2Fuse-shortcuts.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fhooks%2Fuse-shortcuts.ts?ref=0b0e242821687832e02a205d6b050ed327498df1",
            "patch": "@@ -35,8 +35,7 @@ export function useShortcuts(\n \n     window.addEventListener('keydown', handleKeyDown)\n     return () => window.removeEventListener('keydown', handleKeyDown)\n-    // eslint-disable-next-line react-hooks/exhaustive-deps\n-  }, [shortcuts])\n+  }, [rootRef, shortcuts])\n }\n \n export function isFocusedOnElement("
        }
    ],
    "stats": {
        "total": 25,
        "additions": 9,
        "deletions": 16
    }
}