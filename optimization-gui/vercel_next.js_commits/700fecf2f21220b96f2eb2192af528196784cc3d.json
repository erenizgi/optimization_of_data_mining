{
    "author": "huozhi",
    "message": "cli: build partial entries --debug-build-paths arg (#85052)\n\nAdd `--debug-build-paths` CLI option to next build for selective route\nbuilding. This enables building only specific routes for faster\ndevelopment and debugging.\n\n### Changes\n\n - Add `--debug-build-paths=<patterns>` CLI option\n - Support comma-separated paths and glob patterns\n - Filter collected routes after normal file system scanning\n - Works with both app router and pages router\n\n### Usage\n\n#### Build specific routes\n```sh\n next build --debug-build-paths=\"app/page.tsx,app/dashboard/page.tsx\"\n next build --debug-build-paths=\"pages/index.tsx,pages/about.tsx\"\n```\n#### Use glob patterns\n\n```sh\nnext build --debug-build-paths \"app/**/page.tsx\"\nnext build --debug-build-paths \"pages/*.tsx\"\n```\n\n#### Mix both routers\n```\nnext build --debug-build-paths \"app/page.tsx,pages/index.tsx\"\n```",
    "sha": "700fecf2f21220b96f2eb2192af528196784cc3d",
    "files": [
        {
            "sha": "19f2a0b300dcaff793b082fb8d416d79ae54f21a",
            "filename": "packages/next/errors.json",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/700fecf2f21220b96f2eb2192af528196784cc3d/packages%2Fnext%2Ferrors.json",
            "raw_url": "https://github.com/vercel/next.js/raw/700fecf2f21220b96f2eb2192af528196784cc3d/packages%2Fnext%2Ferrors.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Ferrors.json?ref=700fecf2f21220b96f2eb2192af528196784cc3d",
            "patch": "@@ -888,5 +888,7 @@\n   \"887\": \"`cacheLife()` is only available with the `cacheComponents` config.\",\n   \"888\": \"Unknown \\\\`cacheLife()\\\\` profile \\\"%s\\\" is not configured in next.config.js\\\\nmodule.exports = {\\n  cacheLife: {\\n    \\\"%s\\\": ...\\\\n  }\\n}\",\n   \"889\": \"Unknown \\\\`cacheLife()\\\\` profile \\\"%s\\\" is not configured in next.config.js\\\\nmodule.exports = {\\n  cacheLife: {\\n      \\\"%s\\\": ...\\\\n    }\\n}\",\n-  \"890\": \"Received an underlying cookies object that does not match either `cookies` or `mutableCookies`\"\n+  \"890\": \"Received an underlying cookies object that does not match either `cookies` or `mutableCookies`\",\n+  \"891\": \"Failed to read build paths file \\\"%s\\\": %s\",\n+  \"892\": \"Failed to resolve glob pattern \\\"%s\\\": %s\"\n }"
        },
        {
            "sha": "31ae88706e0fcfcdc329e1a31687cc53a95a5dfb",
            "filename": "packages/next/src/bin/next.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/700fecf2f21220b96f2eb2192af528196784cc3d/packages%2Fnext%2Fsrc%2Fbin%2Fnext.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/700fecf2f21220b96f2eb2192af528196784cc3d/packages%2Fnext%2Fsrc%2Fbin%2Fnext.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbin%2Fnext.ts?ref=700fecf2f21220b96f2eb2192af528196784cc3d",
            "patch": "@@ -154,6 +154,10 @@ program\n     '--experimental-next-config-strip-types',\n     'Use Node.js native TypeScript resolution for next.config.(ts|mts)'\n   )\n+  .option(\n+    '--debug-build-paths <patterns>',\n+    'Comma-separated glob patterns or explicit paths for selective builds. Examples: \"app/*\", \"app/page.tsx\", \"app/**/page.tsx\"'\n+  )\n   .action((directory: string, options: NextBuildOptions) => {\n     if (options.experimentalNextConfigStripTypes) {\n       process.env.__NEXT_NODE_NATIVE_TS_LOADER_ENABLED = 'true'"
        },
        {
            "sha": "aa81db30e0b4d3755b697104116d46a319236a15",
            "filename": "packages/next/src/build/index.ts",
            "status": "modified",
            "additions": 32,
            "deletions": 2,
            "changes": 34,
            "blob_url": "https://github.com/vercel/next.js/blob/700fecf2f21220b96f2eb2192af528196784cc3d/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/700fecf2f21220b96f2eb2192af528196784cc3d/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Findex.ts?ref=700fecf2f21220b96f2eb2192af528196784cc3d",
            "patch": "@@ -910,7 +910,9 @@ export default async function build(\n   appDirOnly = false,\n   bundler = Bundler.Turbopack,\n   experimentalBuildMode: 'default' | 'compile' | 'generate' | 'generate-env',\n-  traceUploadUrl: string | undefined\n+  traceUploadUrl: string | undefined,\n+  debugBuildAppPaths?: string[],\n+  debugBuildPagePaths?: string[]\n ): Promise<void> {\n   const isCompileMode = experimentalBuildMode === 'compile'\n   const isGenerateMode = experimentalBuildMode === 'generate'\n@@ -1166,6 +1168,20 @@ export default async function build(\n               .traceAsyncFn(() => collectPagesFiles(pagesDir, validFileMatcher))\n           : []\n \n+      // Apply debug build paths filter if specified\n+      // If debugBuildPagePaths is defined (even if empty), only build specified pages\n+      if (debugBuildPagePaths !== undefined) {\n+        if (debugBuildPagePaths.length > 0) {\n+          const debugPathsSet = new Set(debugBuildPagePaths)\n+          pagesPaths = pagesPaths.filter((pagePath) =>\n+            debugPathsSet.has(pagePath)\n+          )\n+        } else {\n+          // Empty array means build no pages\n+          pagesPaths = []\n+        }\n+      }\n+\n       const middlewareDetectionRegExp = new RegExp(\n         `^${MIDDLEWARE_FILENAME}\\\\.(?:${config.pageExtensions.join('|')})$`\n       )\n@@ -1275,7 +1291,7 @@ export default async function build(\n         let layoutPaths: string[]\n \n         if (Boolean(process.env.NEXT_PRIVATE_APP_PATHS)) {\n-          // used for testing?\n+          // used for testing\n           appPaths = providedAppPaths\n           layoutPaths = []\n         } else {\n@@ -1286,6 +1302,20 @@ export default async function build(\n \n           appPaths = result.appPaths\n           layoutPaths = result.layoutPaths\n+\n+          // Apply debug build paths filter if specified\n+          // If debugBuildAppPaths is defined (even if empty), only build specified app paths\n+          if (debugBuildAppPaths !== undefined) {\n+            if (debugBuildAppPaths.length > 0) {\n+              const debugPathsSet = new Set(debugBuildAppPaths)\n+              appPaths = appPaths.filter((appPath) =>\n+                debugPathsSet.has(appPath)\n+              )\n+            } else {\n+              // Empty array means build no app paths\n+              appPaths = []\n+            }\n+          }\n           // Note: defaultPaths are not used in the build process, only for slot detection in generating route types\n         }\n "
        },
        {
            "sha": "d3fbce8ffb19fa3c6eae04e3eee39f022a46857e",
            "filename": "packages/next/src/cli/next-build.ts",
            "status": "modified",
            "additions": 31,
            "deletions": 2,
            "changes": 33,
            "blob_url": "https://github.com/vercel/next.js/blob/700fecf2f21220b96f2eb2192af528196784cc3d/packages%2Fnext%2Fsrc%2Fcli%2Fnext-build.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/700fecf2f21220b96f2eb2192af528196784cc3d/packages%2Fnext%2Fsrc%2Fcli%2Fnext-build.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcli%2Fnext-build.ts?ref=700fecf2f21220b96f2eb2192af528196784cc3d",
            "patch": "@@ -11,6 +11,10 @@ import { getProjectDir } from '../lib/get-project-dir'\n import { enableMemoryDebuggingMode } from '../lib/memory/startup'\n import { disableMemoryDebuggingMode } from '../lib/memory/shutdown'\n import { parseBundlerArgs } from '../lib/bundler'\n+import {\n+  resolveBuildPaths,\n+  parseBuildPathsInput,\n+} from '../lib/resolve-build-paths'\n \n export type NextBuildOptions = {\n   debug?: boolean\n@@ -26,9 +30,10 @@ export type NextBuildOptions = {\n   experimentalBuildMode: 'default' | 'compile' | 'generate' | 'generate-env'\n   experimentalUploadTrace?: string\n   experimentalNextConfigStripTypes?: boolean\n+  debugBuildPaths?: string\n }\n \n-const nextBuild = (options: NextBuildOptions, directory?: string) => {\n+const nextBuild = async (options: NextBuildOptions, directory?: string) => {\n   process.on('SIGTERM', () => process.exit(143))\n   process.on('SIGINT', () => process.exit(130))\n \n@@ -41,6 +46,7 @@ const nextBuild = (options: NextBuildOptions, directory?: string) => {\n     experimentalAppOnly,\n     experimentalBuildMode,\n     experimentalUploadTrace,\n+    debugBuildPaths,\n   } = options\n \n   let traceUploadUrl: string | undefined\n@@ -81,6 +87,27 @@ const nextBuild = (options: NextBuildOptions, directory?: string) => {\n \n   const bundler = parseBundlerArgs(options)\n \n+  // Resolve selective build paths\n+  let resolvedAppPaths: string[] | undefined\n+  let resolvedPagePaths: string[] | undefined\n+\n+  if (debugBuildPaths) {\n+    try {\n+      const patterns = parseBuildPathsInput(debugBuildPaths)\n+\n+      if (patterns.length > 0) {\n+        const resolved = await resolveBuildPaths(patterns, dir)\n+        // Pass empty arrays to indicate \"build nothing\" vs undefined for \"build everything\"\n+        resolvedAppPaths = resolved.appPaths\n+        resolvedPagePaths = resolved.pagePaths\n+      }\n+    } catch (err) {\n+      printAndExit(\n+        `Failed to resolve build paths: ${isError(err) ? err.message : String(err)}`\n+      )\n+    }\n+  }\n+\n   return build(\n     dir,\n     profile,\n@@ -90,7 +117,9 @@ const nextBuild = (options: NextBuildOptions, directory?: string) => {\n     experimentalAppOnly,\n     bundler,\n     experimentalBuildMode,\n-    traceUploadUrl\n+    traceUploadUrl,\n+    resolvedAppPaths,\n+    resolvedPagePaths\n   )\n     .catch((err) => {\n       if (experimentalDebugMemoryUsage) {"
        },
        {
            "sha": "e526f147d34128545ffa6afe381bb1f4312d0b4f",
            "filename": "packages/next/src/lib/resolve-build-paths.ts",
            "status": "added",
            "additions": 156,
            "deletions": 0,
            "changes": 156,
            "blob_url": "https://github.com/vercel/next.js/blob/700fecf2f21220b96f2eb2192af528196784cc3d/packages%2Fnext%2Fsrc%2Flib%2Fresolve-build-paths.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/700fecf2f21220b96f2eb2192af528196784cc3d/packages%2Fnext%2Fsrc%2Flib%2Fresolve-build-paths.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Flib%2Fresolve-build-paths.ts?ref=700fecf2f21220b96f2eb2192af528196784cc3d",
            "patch": "@@ -0,0 +1,156 @@\n+import { promisify } from 'util'\n+import globOriginal from 'next/dist/compiled/glob'\n+import * as Log from '../build/output/log'\n+import path from 'path'\n+import fs from 'fs'\n+import isError from './is-error'\n+\n+const glob = promisify(globOriginal)\n+\n+interface ResolvedBuildPaths {\n+  appPaths: string[]\n+  pagePaths: string[]\n+}\n+\n+/**\n+ * Resolves glob patterns and explicit paths to actual file paths\n+ * Categorizes them into App Router and Pages Router paths\n+ *\n+ * @param patterns - Array of glob patterns or explicit paths\n+ * @param projectDir - Root project directory\n+ * @returns Object with categorized app and page paths\n+ */\n+export async function resolveBuildPaths(\n+  patterns: string[],\n+  projectDir: string\n+): Promise<ResolvedBuildPaths> {\n+  const appPaths: Set<string> = new Set()\n+  const pagePaths: Set<string> = new Set()\n+\n+  for (const pattern of patterns) {\n+    const trimmed = pattern.trim()\n+\n+    if (!trimmed) {\n+      continue\n+    }\n+\n+    // Detect if pattern is glob pattern (contains glob special chars)\n+    const isGlobPattern = /[*?[\\]{}!]/.test(trimmed)\n+\n+    if (isGlobPattern) {\n+      try {\n+        // Resolve glob pattern\n+        const matches = (await glob(trimmed, {\n+          cwd: projectDir,\n+        })) as string[]\n+\n+        if (matches.length === 0) {\n+          Log.warn(`Glob pattern \"${trimmed}\" did not match any files`)\n+        }\n+\n+        for (const file of matches) {\n+          // Skip directories, only process files\n+          if (!fs.statSync(path.join(projectDir, file)).isDirectory()) {\n+            categorizeAndAddPath(file, appPaths, pagePaths)\n+          }\n+        }\n+      } catch (error) {\n+        throw new Error(\n+          `Failed to resolve glob pattern \"${trimmed}\": ${\n+            isError(error) ? error.message : String(error)\n+          }`\n+        )\n+      }\n+    } else {\n+      // Explicit path - categorize based on prefix\n+      categorizeAndAddPath(trimmed, appPaths, pagePaths, projectDir)\n+    }\n+  }\n+\n+  return {\n+    appPaths: Array.from(appPaths).sort(),\n+    pagePaths: Array.from(pagePaths).sort(),\n+  }\n+}\n+\n+/**\n+ * Categorizes a file path to either app or pages router based on its prefix,\n+ * and normalizes it to the format expected by Next.js internal build system.\n+ *\n+ * The internal build system expects:\n+ * - App router: paths with leading slash (e.g., \"/page.tsx\", \"/dashboard/page.tsx\")\n+ * - Pages router: paths with leading slash (e.g., \"/index.tsx\", \"/about.tsx\")\n+ *\n+ * Examples:\n+ * - \"app/page.tsx\" → appPaths.add(\"/page.tsx\")\n+ * - \"app/dashboard/page.tsx\" → appPaths.add(\"/dashboard/page.tsx\")\n+ * - \"pages/index.tsx\" → pagePaths.add(\"/index.tsx\")\n+ * - \"pages/about.tsx\" → pagePaths.add(\"/about.tsx\")\n+ * - \"/page.tsx\" → appPaths.add(\"/page.tsx\") (already in app router format)\n+ */\n+function categorizeAndAddPath(\n+  filePath: string,\n+  appPaths: Set<string>,\n+  pagePaths: Set<string>,\n+  projectDir?: string\n+): void {\n+  // Normalize path separators to forward slashes (Windows compatibility)\n+  const normalized = filePath.replace(/\\\\/g, '/')\n+\n+  // Skip non-file entries (like directories without extensions)\n+  if (normalized.endsWith('/')) {\n+    return\n+  }\n+\n+  if (normalized.startsWith('app/')) {\n+    // App router path: remove 'app/' prefix and ensure leading slash\n+    // \"app/page.tsx\" → \"/page.tsx\"\n+    // \"app/dashboard/page.tsx\" → \"/dashboard/page.tsx\"\n+    const withoutPrefix = normalized.slice(4) // Remove \"app/\"\n+    appPaths.add('/' + withoutPrefix)\n+  } else if (normalized.startsWith('pages/')) {\n+    // Pages router path: remove 'pages/' prefix and add leading slash\n+    // \"pages/index.tsx\" → \"/index.tsx\"\n+    // \"pages/about.tsx\" → \"/about.tsx\"\n+    const withoutPrefix = normalized.slice(6) // Remove \"pages/\"\n+    pagePaths.add('/' + withoutPrefix)\n+  } else if (normalized.startsWith('/')) {\n+    // Leading slash suggests app router format (already in correct format)\n+    // \"/page.tsx\" → \"/page.tsx\" (no change needed)\n+    appPaths.add(normalized)\n+  } else {\n+    // No obvious prefix - try to detect based on file existence\n+    if (projectDir) {\n+      const appPath = path.join(projectDir, 'app', normalized)\n+      const pagesPath = path.join(projectDir, 'pages', normalized)\n+\n+      if (fs.existsSync(appPath)) {\n+        appPaths.add('/' + normalized)\n+      } else if (fs.existsSync(pagesPath)) {\n+        pagePaths.add('/' + normalized)\n+      } else {\n+        // Default to pages router for paths without clear indicator\n+        pagePaths.add('/' + normalized)\n+      }\n+    } else {\n+      // Without projectDir context, default to pages router\n+      pagePaths.add('/' + normalized)\n+    }\n+  }\n+}\n+\n+/**\n+ * Parse build paths from comma-separated format\n+ * Supports:\n+ * - Comma-separated values: \"app/page.tsx,app/about/page.tsx\"\n+ *\n+ * @param input - String input to parse\n+ * @returns Array of path patterns\n+ */\n+export function parseBuildPathsInput(input: string): string[] {\n+  // Comma-separated values\n+  return input\n+    .split(',')\n+    .map((p) => p.trim())\n+    .filter((p) => p.length > 0)\n+}"
        },
        {
            "sha": "c0d0d084009e191351a2de61d6c421336c1a84fb",
            "filename": "test/production/debug-build-path/app/about/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fapp%2Fabout%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fapp%2Fabout%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fdebug-build-path%2Fapp%2Fabout%2Fpage.tsx?ref=700fecf2f21220b96f2eb2192af528196784cc3d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function About() {\n+  return <h1>App About</h1>\n+}"
        },
        {
            "sha": "ec8d77ad448b7f7e18eac37f7a8182f4d2d8072c",
            "filename": "test/production/debug-build-path/app/dashboard/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fapp%2Fdashboard%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fapp%2Fdashboard%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fdebug-build-path%2Fapp%2Fdashboard%2Fpage.tsx?ref=700fecf2f21220b96f2eb2192af528196784cc3d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Dashboard() {\n+  return <h1>App Dashboard</h1>\n+}"
        },
        {
            "sha": "2fe9492f615e99649b8ac42302ee3baa83e9cc6c",
            "filename": "test/production/debug-build-path/app/layout.tsx",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fapp%2Flayout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fapp%2Flayout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fdebug-build-path%2Fapp%2Flayout.tsx?ref=700fecf2f21220b96f2eb2192af528196784cc3d",
            "patch": "@@ -0,0 +1,17 @@\n+import React from 'react'\n+\n+export const metadata = {\n+  title: 'Debug Build Paths Test',\n+}\n+\n+export default function RootLayout({\n+  children,\n+}: {\n+  children: React.ReactNode\n+}) {\n+  return (\n+    <html lang=\"en\">\n+      <body>{children}</body>\n+    </html>\n+  )\n+}"
        },
        {
            "sha": "784e15ee1902bb996e26b3e4d9fbc81f557e9b50",
            "filename": "test/production/debug-build-path/app/page.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fapp%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fapp%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fdebug-build-path%2Fapp%2Fpage.tsx?ref=700fecf2f21220b96f2eb2192af528196784cc3d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Home() {\n+  return <h1>App Home</h1>\n+}"
        },
        {
            "sha": "80dc15154fea40a398a873c9267d78e2855794df",
            "filename": "test/production/debug-build-path/debug-build-paths.test.ts",
            "status": "added",
            "additions": 66,
            "deletions": 0,
            "changes": 66,
            "blob_url": "https://github.com/vercel/next.js/blob/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fdebug-build-paths.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fdebug-build-paths.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fdebug-build-path%2Fdebug-build-paths.test.ts?ref=700fecf2f21220b96f2eb2192af528196784cc3d",
            "patch": "@@ -0,0 +1,66 @@\n+import { nextTestSetup } from 'e2e-utils'\n+\n+describe('debug-build-paths', () => {\n+  const { next, skipped } = nextTestSetup({\n+    files: __dirname,\n+    skipDeployment: true,\n+    skipStart: true,\n+  })\n+\n+  if (skipped) return\n+\n+  describe('explicit path formats', () => {\n+    it('should build single page with pages/ prefix', async () => {\n+      const buildResult = await next.build({\n+        args: ['--debug-build-paths', 'pages/foo.tsx'],\n+      })\n+      expect(buildResult.exitCode).toBe(0)\n+      expect(buildResult.cliOutput).toBeDefined()\n+\n+      // Should only build the specified page\n+      expect(buildResult.cliOutput).toContain('Route (pages)')\n+      expect(buildResult.cliOutput).toContain('○ /foo')\n+      // Should not build other pages\n+      expect(buildResult.cliOutput).not.toContain('○ /bar')\n+      // Should not build app routes\n+      expect(buildResult.cliOutput).not.toContain('Route (app)')\n+    })\n+\n+    it('should build multiple pages routes', async () => {\n+      const buildResult = await next.build({\n+        args: ['--debug-build-paths', 'pages/foo.tsx,pages/bar.tsx'],\n+      })\n+      expect(buildResult.exitCode).toBe(0)\n+      expect(buildResult.cliOutput).toBeDefined()\n+\n+      // Should build both specified pages\n+      expect(buildResult.cliOutput).toContain('Route (pages)')\n+      expect(buildResult.cliOutput).toContain('○ /foo')\n+      expect(buildResult.cliOutput).toContain('○ /bar')\n+      // Should not build app routes\n+      expect(buildResult.cliOutput).not.toContain('Route (app)')\n+    })\n+  })\n+\n+  describe('glob pattern matching', () => {\n+    it('should match app and pages routes with glob patterns', async () => {\n+      const buildResult = await next.build({\n+        args: ['--debug-build-paths', 'pages/*.tsx,app/page.tsx'],\n+      })\n+      expect(buildResult.exitCode).toBe(0)\n+      expect(buildResult.cliOutput).toBeDefined()\n+\n+      // Should build pages matching the glob\n+      expect(buildResult.cliOutput).toContain('Route (pages)')\n+      expect(buildResult.cliOutput).toContain('○ /foo')\n+      expect(buildResult.cliOutput).toContain('○ /bar')\n+\n+      // Should build the specified app route\n+      expect(buildResult.cliOutput).toContain('Route (app)')\n+      expect(buildResult.cliOutput).toContain('○ /')\n+      // Should not build other app routes\n+      expect(buildResult.cliOutput).not.toContain('○ /about')\n+      expect(buildResult.cliOutput).not.toContain('○ /dashboard')\n+    })\n+  })\n+})"
        },
        {
            "sha": "767719fc4fba59345ae29e29159c9aff270f5819",
            "filename": "test/production/debug-build-path/next.config.js",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fnext.config.js",
            "raw_url": "https://github.com/vercel/next.js/raw/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fnext.config.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fdebug-build-path%2Fnext.config.js?ref=700fecf2f21220b96f2eb2192af528196784cc3d",
            "patch": "@@ -0,0 +1,4 @@\n+/** @type {import('next').NextConfig} */\n+const nextConfig = {}\n+\n+module.exports = nextConfig"
        },
        {
            "sha": "5aeb8ca249036c6b66ccc86c1317590bb67b8caf",
            "filename": "test/production/debug-build-path/pages/api/hello.ts",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fpages%2Fapi%2Fhello.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fpages%2Fapi%2Fhello.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fdebug-build-path%2Fpages%2Fapi%2Fhello.ts?ref=700fecf2f21220b96f2eb2192af528196784cc3d",
            "patch": "@@ -0,0 +1,12 @@\n+import type { NextApiRequest, NextApiResponse } from 'next'\n+\n+type ResponseData = {\n+  message: string\n+}\n+\n+export default function handler(\n+  req: NextApiRequest,\n+  res: NextApiResponse<ResponseData>\n+) {\n+  res.status(200).json({ message: 'Hello from API' })\n+}"
        },
        {
            "sha": "b66f5b826b7e43e529b1e66ffad356c00deb7f8f",
            "filename": "test/production/debug-build-path/pages/bar.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fpages%2Fbar.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fpages%2Fbar.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fdebug-build-path%2Fpages%2Fbar.tsx?ref=700fecf2f21220b96f2eb2192af528196784cc3d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <h1>Bar</h1>\n+}"
        },
        {
            "sha": "9c373d74ea69ae132266201e2c21143080e5e95a",
            "filename": "test/production/debug-build-path/pages/foo.tsx",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fpages%2Ffoo.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/700fecf2f21220b96f2eb2192af528196784cc3d/test%2Fproduction%2Fdebug-build-path%2Fpages%2Ffoo.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fdebug-build-path%2Fpages%2Ffoo.tsx?ref=700fecf2f21220b96f2eb2192af528196784cc3d",
            "patch": "@@ -0,0 +1,3 @@\n+export default function Page() {\n+  return <h1>Foo</h1>\n+}"
        }
    ],
    "stats": {
        "total": 345,
        "additions": 340,
        "deletions": 5
    }
}