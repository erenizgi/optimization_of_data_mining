{
    "author": "ztanner",
    "message": "[test]: fix broken scroll restoration test (#85599)",
    "sha": "d349bd08949737c38f162e9d2b44688751a36cea",
    "files": [
        {
            "sha": "6e711e982f747f869844b7a9e7c4754c7ed790cf",
            "filename": "test/integration/scroll-back-restoration/test/index.test.js",
            "status": "modified",
            "additions": 7,
            "deletions": 9,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/d349bd08949737c38f162e9d2b44688751a36cea/test%2Fintegration%2Fscroll-back-restoration%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/d349bd08949737c38f162e9d2b44688751a36cea/test%2Fintegration%2Fscroll-back-restoration%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fscroll-back-restoration%2Ftest%2Findex.test.js?ref=d349bd08949737c38f162e9d2b44688751a36cea",
            "patch": "@@ -8,7 +8,7 @@ import {\n   launchApp,\n   nextStart,\n   nextBuild,\n-  check,\n+  retry,\n } from 'next-test-utils'\n \n const appDir = join(__dirname, '../')\n@@ -35,17 +35,15 @@ const runTests = () => {\n \n     await browser.eval(() => window.next.router.push('/another'))\n \n-    await check(\n-      () => browser.eval(() => document.documentElement.innerHTML),\n-      /hi from another/\n-    )\n+    await retry(async () => {\n+      const html = await browser.eval(() => document.documentElement.innerHTML)\n+      expect(html).toMatch(/hi from another/)\n+    })\n     await browser.eval(() => (window.didHydrate = false))\n \n     await browser.eval(() => window.history.back())\n-    await check(() => browser.eval(() => window.didHydrate), {\n-      test(content) {\n-        return content\n-      },\n+    await retry(async () => {\n+      expect(await browser.eval(() => window.didHydrate)).toBe(true)\n     })\n \n     const newScrollX = Math.floor(await browser.eval(() => window.scrollX))"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 7,
        "deletions": 9
    }
}