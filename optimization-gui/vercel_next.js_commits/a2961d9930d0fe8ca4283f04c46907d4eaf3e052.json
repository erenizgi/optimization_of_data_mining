{
    "author": "huozhi",
    "message": "[build] remove obsolete module field alias for barrel optimized pkg (#80769)",
    "sha": "a2961d9930d0fe8ca4283f04c46907d4eaf3e052",
    "files": [
        {
            "sha": "9953160ef68147a2f7a0e71a9b31523940db55c8",
            "filename": "packages/next/src/build/create-compiler-aliases.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 34,
            "changes": 34,
            "blob_url": "https://github.com/vercel/next.js/blob/a2961d9930d0fe8ca4283f04c46907d4eaf3e052/packages%2Fnext%2Fsrc%2Fbuild%2Fcreate-compiler-aliases.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a2961d9930d0fe8ca4283f04c46907d4eaf3e052/packages%2Fnext%2Fsrc%2Fbuild%2Fcreate-compiler-aliases.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fcreate-compiler-aliases.ts?ref=a2961d9930d0fe8ca4283f04c46907d4eaf3e052",
            "patch": "@@ -30,7 +30,6 @@ export function createWebpackAliases({\n   distDir,\n   isClient,\n   isEdgeServer,\n-  isNodeServer,\n   dev,\n   config,\n   pagesDir,\n@@ -42,7 +41,6 @@ export function createWebpackAliases({\n   distDir: string\n   isClient: boolean\n   isEdgeServer: boolean\n-  isNodeServer: boolean\n   dev: boolean\n   config: NextConfigComplete\n   pagesDir: string | undefined\n@@ -157,14 +155,6 @@ export function createWebpackAliases({\n     ...(isClient || isEdgeServer ? getOptimizedModuleAliases() : {}),\n     ...(reactProductionProfiling ? getReactProfilingInProduction() : {}),\n \n-    // For Node server, we need to re-alias the package imports to prefer to\n-    // resolve to the ESM export.\n-    ...(isNodeServer\n-      ? getBarrelOptimizationAliases(\n-          config.experimental.optimizePackageImports || []\n-        )\n-      : {}),\n-\n     [RSC_ACTION_VALIDATE_ALIAS]:\n       'next/dist/build/webpack/loaders/next-flight-loader/action-validate',\n \n@@ -397,30 +387,6 @@ export function getOptimizedModuleAliases(): CompilerAliases {\n   }\n }\n \n-// Alias these modules to be resolved with \"module\" if possible.\n-function getBarrelOptimizationAliases(packages: string[]): CompilerAliases {\n-  const aliases: { [pkg: string]: string } = {}\n-  const mainFields = ['module', 'main']\n-\n-  for (const pkg of packages) {\n-    try {\n-      const descriptionFileData = require(`${pkg}/package.json`)\n-      const descriptionFilePath = require.resolve(`${pkg}/package.json`)\n-\n-      for (const field of mainFields) {\n-        if (descriptionFileData.hasOwnProperty(field)) {\n-          aliases[pkg + '$'] = path.join(\n-            path.dirname(descriptionFilePath),\n-            descriptionFileData[field]\n-          )\n-          break\n-        }\n-      }\n-    } catch {}\n-  }\n-\n-  return aliases\n-}\n function getReactProfilingInProduction(): CompilerAliases {\n   return {\n     'react-dom/client$': 'react-dom/profiling',"
        },
        {
            "sha": "78f45274074f83a198afd706ff3cbb431b0816d7",
            "filename": "packages/next/src/build/webpack-config.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/a2961d9930d0fe8ca4283f04c46907d4eaf3e052/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a2961d9930d0fe8ca4283f04c46907d4eaf3e052/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts?ref=a2961d9930d0fe8ca4283f04c46907d4eaf3e052",
            "patch": "@@ -771,7 +771,6 @@ export default async function getBaseWebpackConfig(\n       distDir,\n       isClient,\n       isEdgeServer,\n-      isNodeServer,\n       dev,\n       config,\n       pagesDir,"
        }
    ],
    "stats": {
        "total": 35,
        "additions": 0,
        "deletions": 35
    }
}