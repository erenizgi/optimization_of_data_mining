{
    "author": "lukesandberg",
    "message": "[turbopack] Eliminate many calls to `into` and from and cell involving RcStr (#80076)\n\nAdopt the `rcstr!` macro in turbopack\n\nInstead of `\"foo\".into()` call `rcstr!(\"foo\")` while being slightly more annoying to type the macro approach is more readabie and faster as it can leverage constant folding for small strings and amortize construction of larger strings.  In general these performance improvement are very small but consistent.\n\nAt the same time, eliminate uses of turbo-tasks where they were amortizing construction of RcStr instances since the `rcstr!` macro can do the same thing.  Generally speaking we should prefer `RcStr` over `ResolvedVc<RcStr>` as a task input since it has much more reasonable equality semantics and observationally many of these values were constructed via `Vc::cell(\"foo\".into())`.\n\n## Why?\n\nGenerally this should be a small consistent memory and performance improvement.  My understanding is that many uses of `ResolvedVc<RcStr>` actually predate `RcStr` when we were using `String` directly.  In that world, turbotasks are fulfilling a vital function, but now that we can rely on RcStr this is much less needed.\n\n## How?\n\nMostly this was a bunch of regex replacements and manual fixups.  An AstGrep rule would have been ideal but beyond matching `RcStr::from(\"...\")` this doesn't work since it was mostly calls to `into()` which rely on type inference.  Still by seeding the codebase with the pattern we can probably prevent regressions.\n\n## Performance\n\nFrom measuring vercel-site this is a latency progression of a few percent.  codspeed agrees!\n\n![image.png](https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/AwJ29EfoPcPdLSwCZxAz/c08ffcaa-2856-4742-a049-1306491d69ba.png)",
    "sha": "4e110ef3af176385d669f1a886eb46f1d169bd87",
    "files": [
        {
            "sha": "d84e2dc319d19c8d40280a87369fdfb3bbfef7df",
            "filename": "Cargo.lock",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/Cargo.lock",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/Cargo.lock",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/Cargo.lock?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -10180,6 +10180,7 @@ dependencies = [\n  \"rustc-hash 2.1.1\",\n  \"serde\",\n  \"serde_with\",\n+ \"turbo-rcstr\",\n  \"turbo-tasks\",\n  \"turbo-tasks-build\",\n  \"turbo-tasks-fs\","
        },
        {
            "sha": "878e5b73c45ef20539058b601c31a0270bd1a1e1",
            "filename": "crates/napi/src/next_api/project.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnapi%2Fsrc%2Fnext_api%2Fproject.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnapi%2Fsrc%2Fnext_api%2Fproject.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnapi%2Fsrc%2Fnext_api%2Fproject.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -28,7 +28,7 @@ use serde::{Deserialize, Serialize};\n use tokio::{io::AsyncWriteExt, time::Instant};\n use tracing::Instrument;\n use tracing_subscriber::{Registry, layer::SubscriberExt, util::SubscriberInitExt};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     Completion, Effects, FxIndexSet, NonLocalValue, OperationValue, OperationVc, ReadRef,\n     ResolvedVc, TaskInput, TransientInstance, TryJoinIterExt, UpdateInfo, Vc, get_effects,\n@@ -426,7 +426,7 @@ pub async fn project_new(\n     let options: ProjectOptions = options.into();\n     let container = turbo_tasks\n         .run_once(async move {\n-            let project = ProjectContainer::new(\"next.js\".into(), options.dev);\n+            let project = ProjectContainer::new(rcstr!(\"next.js\"), options.dev);\n             let project = project.to_resolved().await?;\n             project.initialize(options).await?;\n             Ok(project)"
        },
        {
            "sha": "7484a071b99ace7ce04d2680a6b18cc90ca1e17c",
            "filename": "crates/next-api/src/app.rs",
            "status": "modified",
            "additions": 48,
            "deletions": 51,
            "changes": 99,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-api%2Fsrc%2Fapp.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-api%2Fsrc%2Fapp.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fapp.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -99,8 +99,6 @@ pub struct OptionAppProject(Option<ResolvedVc<AppProject>>);\n \n impl AppProject {}\n \n-pub(crate) const ECMASCRIPT_CLIENT_TRANSITION_NAME: &str = \"next-ecmascript-client-reference\";\n-\n fn styles_rule_condition() -> RuleCondition {\n     RuleCondition::any(vec![\n         RuleCondition::all(vec![\n@@ -131,6 +129,11 @@ fn module_styles_rule_condition() -> RuleCondition {\n         RuleCondition::ContentTypeStartsWith(\"text/css+module\".into()),\n     ])\n }\n+impl AppProject {\n+    pub fn client_transition_name() -> RcStr {\n+        rcstr!(\"next-ecmascript-client-reference\")\n+    }\n+}\n \n #[turbo_tasks::value_impl]\n impl AppProject {\n@@ -165,9 +168,7 @@ impl AppProject {\n             client_transition: Some(ResolvedVc::upcast(\n                 self.client_transition().to_resolved().await?,\n             )),\n-            ecmascript_client_reference_transition_name: Some(\n-                self.client_transition_name().to_resolved().await?,\n-            ),\n+            ecmascript_client_reference_transition_name: Some(Self::client_transition_name()),\n         }\n         .cell())\n     }\n@@ -177,9 +178,7 @@ impl AppProject {\n         let this = self.await?;\n         Ok(ServerContextType::AppRoute {\n             app_dir: this.app_dir,\n-            ecmascript_client_reference_transition_name: Some(\n-                self.client_transition_name().to_resolved().await?,\n-            ),\n+            ecmascript_client_reference_transition_name: Some(Self::client_transition_name()),\n         }\n         .cell())\n     }\n@@ -227,11 +226,6 @@ impl AppProject {\n         ))\n     }\n \n-    #[turbo_tasks::function]\n-    pub(crate) fn client_transition_name(self: Vc<Self>) -> Vc<RcStr> {\n-        Vc::cell(ECMASCRIPT_CLIENT_TRANSITION_NAME.into())\n-    }\n-\n     #[turbo_tasks::function]\n     fn client_transition(self: Vc<Self>) -> Vc<FullContextTransition> {\n         let module_context = self.client_module_context();\n@@ -369,25 +363,28 @@ impl AppProject {\n         Ok(TransitionOptions {\n             named_transitions: [\n                 (\n-                    ECMASCRIPT_CLIENT_TRANSITION_NAME.into(),\n+                    AppProject::client_transition_name(),\n                     ecmascript_client_reference_transition.to_resolved().await?,\n                 ),\n                 (\n-                    \"next-dynamic\".into(),\n+                    rcstr!(\"next-dynamic\"),\n                     ResolvedVc::upcast(NextDynamicTransition::new_marker().to_resolved().await?),\n                 ),\n                 (\n-                    \"next-dynamic-client\".into(),\n+                    rcstr!(\"next-dynamic-client\"),\n                     ResolvedVc::upcast(\n                         NextDynamicTransition::new_client(Vc::upcast(self.client_transition()))\n                             .to_resolved()\n                             .await?,\n                     ),\n                 ),\n-                (\"next-ssr\".into(), ssr_transition.to_resolved().await?),\n-                (\"next-shared\".into(), shared_transition.to_resolved().await?),\n+                (rcstr!(\"next-ssr\"), ssr_transition.to_resolved().await?),\n+                (\n+                    rcstr!(\"next-shared\"),\n+                    shared_transition.to_resolved().await?,\n+                ),\n                 (\n-                    \"next-server-utility\".into(),\n+                    rcstr!(\"next-server-utility\"),\n                     ResolvedVc::upcast(NextServerUtilityTransition::new().to_resolved().await?),\n                 ),\n             ]\n@@ -461,33 +458,33 @@ impl AppProject {\n     async fn route_module_context(self: Vc<Self>) -> Result<Vc<ModuleAssetContext>> {\n         let transitions = [\n             (\n-                ECMASCRIPT_CLIENT_TRANSITION_NAME.into(),\n+                AppProject::client_transition_name(),\n                 self.ecmascript_client_reference_transition()\n                     .to_resolved()\n                     .await?,\n             ),\n             (\n-                \"next-dynamic\".into(),\n+                rcstr!(\"next-dynamic\"),\n                 ResolvedVc::upcast(NextDynamicTransition::new_marker().to_resolved().await?),\n             ),\n             (\n-                \"next-dynamic-client\".into(),\n+                rcstr!(\"next-dynamic-client\"),\n                 ResolvedVc::upcast(\n                     NextDynamicTransition::new_client(Vc::upcast(self.client_transition()))\n                         .to_resolved()\n                         .await?,\n                 ),\n             ),\n             (\n-                \"next-ssr\".into(),\n+                rcstr!(\"next-ssr\"),\n                 ResolvedVc::upcast(self.ssr_transition().to_resolved().await?),\n             ),\n             (\n-                \"next-shared\".into(),\n+                rcstr!(\"next-shared\"),\n                 ResolvedVc::upcast(self.shared_transition().to_resolved().await?),\n             ),\n             (\n-                \"next-server-utility\".into(),\n+                rcstr!(\"next-server-utility\"),\n                 ResolvedVc::upcast(NextServerUtilityTransition::new().to_resolved().await?),\n             ),\n         ]\n@@ -512,33 +509,33 @@ impl AppProject {\n     async fn edge_route_module_context(self: Vc<Self>) -> Result<Vc<ModuleAssetContext>> {\n         let transitions = [\n             (\n-                ECMASCRIPT_CLIENT_TRANSITION_NAME.into(),\n+                AppProject::client_transition_name(),\n                 self.edge_ecmascript_client_reference_transition()\n                     .to_resolved()\n                     .await?,\n             ),\n             (\n-                \"next-dynamic\".into(),\n+                rcstr!(\"next-dynamic\"),\n                 ResolvedVc::upcast(NextDynamicTransition::new_marker().to_resolved().await?),\n             ),\n             (\n-                \"next-dynamic-client\".into(),\n+                rcstr!(\"next-dynamic-client\"),\n                 ResolvedVc::upcast(\n                     NextDynamicTransition::new_client(Vc::upcast(self.client_transition()))\n                         .to_resolved()\n                         .await?,\n                 ),\n             ),\n             (\n-                \"next-ssr\".into(),\n+                rcstr!(\"next-ssr\"),\n                 ResolvedVc::upcast(self.edge_ssr_transition().to_resolved().await?),\n             ),\n             (\n-                \"next-shared\".into(),\n+                rcstr!(\"next-shared\"),\n                 ResolvedVc::upcast(self.edge_shared_transition().to_resolved().await?),\n             ),\n             (\n-                \"next-server-utility\".into(),\n+                rcstr!(\"next-server-utility\"),\n                 ResolvedVc::upcast(NextServerUtilityTransition::new().to_resolved().await?),\n             ),\n         ]\n@@ -562,11 +559,11 @@ impl AppProject {\n     async fn client_module_context(self: Vc<Self>) -> Result<Vc<ModuleAssetContext>> {\n         let transitions = [\n             (\n-                \"next-dynamic\".into(),\n+                rcstr!(\"next-dynamic\"),\n                 ResolvedVc::upcast(NextDynamicTransition::new_marker().to_resolved().await?),\n             ),\n             (\n-                \"next-dynamic-client\".into(),\n+                rcstr!(\"next-dynamic-client\"),\n                 ResolvedVc::upcast(NextDynamicTransition::new_marker().to_resolved().await?),\n             ),\n         ]\n@@ -637,19 +634,19 @@ impl AppProject {\n     async fn ssr_module_context(self: Vc<Self>) -> Result<Vc<ModuleAssetContext>> {\n         let transitions = [\n             (\n-                \"next-dynamic\".into(),\n+                rcstr!(\"next-dynamic\"),\n                 ResolvedVc::upcast(NextDynamicTransition::new_marker().to_resolved().await?),\n             ),\n             (\n-                \"next-dynamic-client\".into(),\n+                rcstr!(\"next-dynamic-client\"),\n                 ResolvedVc::upcast(\n                     NextDynamicTransition::new_client(Vc::upcast(self.client_transition()))\n                         .to_resolved()\n                         .await?,\n                 ),\n             ),\n             (\n-                \"next-shared\".into(),\n+                rcstr!(\"next-shared\"),\n                 ResolvedVc::upcast(self.shared_transition().to_resolved().await?),\n             ),\n         ]\n@@ -697,19 +694,19 @@ impl AppProject {\n     async fn edge_ssr_module_context(self: Vc<Self>) -> Result<Vc<ModuleAssetContext>> {\n         let transitions = [\n             (\n-                \"next-dynamic\".into(),\n+                rcstr!(\"next-dynamic\"),\n                 ResolvedVc::upcast(NextDynamicTransition::new_marker().to_resolved().await?),\n             ),\n             (\n-                \"next-dynamic-client\".into(),\n+                rcstr!(\"next-dynamic-client\"),\n                 ResolvedVc::upcast(\n                     NextDynamicTransition::new_client(Vc::upcast(self.client_transition()))\n                         .to_resolved()\n                         .await?,\n                 ),\n             ),\n             (\n-                \"next-shared\".into(),\n+                rcstr!(\"next-shared\"),\n                 ResolvedVc::upcast(self.edge_shared_transition().to_resolved().await?),\n             ),\n         ]\n@@ -824,11 +821,11 @@ impl AppProject {\n         let client_main_module = cjs_resolve(\n             Vc::upcast(PlainResolveOrigin::new(\n                 client_module_context,\n-                self.project().project_path().join(\"_\".into()),\n+                self.project().project_path().join(rcstr!(\"_\")),\n             )),\n-            Request::parse(Value::new(Pattern::Constant(\n-                \"next/dist/client/app-next-turbopack.js\".into(),\n-            ))),\n+            Request::parse(Value::new(Pattern::Constant(rcstr!(\n+                \"next/dist/client/app-next-turbopack.js\"\n+            )))),\n             None,\n             false,\n         )\n@@ -1180,7 +1177,7 @@ impl AppEndpoint {\n \n         let node_root = project.node_root().to_resolved().await?;\n         let client_relative_path = project.client_relative_path().to_resolved().await?;\n-        let server_path = node_root.join(\"server\".into());\n+        let server_path = node_root.join(rcstr!(\"server\"));\n \n         let mut server_assets = fxindexset![];\n         let mut client_assets = fxindexset![];\n@@ -1321,11 +1318,11 @@ impl AppEndpoint {\n         // load it as a RawModule.\n         let next_package = get_next_package(project.project_path());\n         let polyfill_source =\n-            FileSource::new(next_package.join(\"dist/build/polyfills/polyfill-nomodule.js\".into()));\n+            FileSource::new(next_package.join(rcstr!(\"dist/build/polyfills/polyfill-nomodule.js\")));\n         let polyfill_output_path = client_chunking_context.chunk_path(\n             Some(Vc::upcast(polyfill_source)),\n             polyfill_source.ident(),\n-            \".js\".into(),\n+            rcstr!(\".js\"),\n         );\n         let polyfill_output_asset = ResolvedVc::upcast(\n             RawOutput::new(polyfill_output_path, Vc::upcast(polyfill_source))\n@@ -1485,10 +1482,10 @@ impl AppEndpoint {\n                 //\n                 // they are created in `setup-dev-bundler.ts`\n                 let mut file_paths_from_root = fxindexset![\n-                    \"server/server-reference-manifest.js\".into(),\n-                    \"server/middleware-build-manifest.js\".into(),\n-                    \"server/next-font-manifest.js\".into(),\n-                    \"server/interception-route-rewrite-manifest.js\".into(),\n+                    rcstr!(\"server/server-reference-manifest.js\"),\n+                    rcstr!(\"server/middleware-build-manifest.js\"),\n+                    rcstr!(\"server/next-font-manifest.js\"),\n+                    rcstr!(\"server/interception-route-rewrite-manifest.js\"),\n                 ];\n                 let mut wasm_paths_from_root = fxindexset![];\n \n@@ -1509,7 +1506,7 @@ impl AppEndpoint {\n                 let all_assets =\n                     get_asset_paths_from_root(&node_root_value, &all_output_assets).await?;\n \n-                let entry_file = \"app-edge-has-no-entrypoint\".into();\n+                let entry_file = rcstr!(\"app-edge-has-no-entrypoint\");\n \n                 if emit_manifests == EmitManifests::Full {\n                     let dynamic_import_entries = collect_next_dynamic_chunks("
        },
        {
            "sha": "cffcacfedde3890996c663a597354d8f3ff57e4d",
            "filename": "crates/next-api/src/instrumentation.rs",
            "status": "modified",
            "additions": 11,
            "deletions": 9,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-api%2Fsrc%2Finstrumentation.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-api%2Fsrc%2Finstrumentation.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Finstrumentation.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -6,7 +6,7 @@ use next_core::{\n     next_server::{ServerContextType, get_server_runtime_entries},\n };\n use tracing::Instrument;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{Completion, ResolvedVc, Value, Vc};\n use turbo_tasks_fs::{File, FileContent, FileSystemPath};\n use turbopack_core::{\n@@ -44,7 +44,7 @@ pub struct InstrumentationEndpoint {\n     is_edge: bool,\n \n     app_dir: Option<ResolvedVc<FileSystemPath>>,\n-    ecmascript_client_reference_transition_name: Option<ResolvedVc<RcStr>>,\n+    ecmascript_client_reference_transition_name: Option<RcStr>,\n }\n \n #[turbo_tasks::value_impl]\n@@ -56,7 +56,7 @@ impl InstrumentationEndpoint {\n         source: ResolvedVc<Box<dyn Source>>,\n         is_edge: bool,\n         app_dir: Option<ResolvedVc<FileSystemPath>>,\n-        ecmascript_client_reference_transition_name: Option<ResolvedVc<RcStr>>,\n+        ecmascript_client_reference_transition_name: Option<RcStr>,\n     ) -> Vc<Self> {\n         Self {\n             project,\n@@ -85,7 +85,7 @@ impl InstrumentationEndpoint {\n             *self.asset_context,\n             self.project.project_path(),\n             *userland_module,\n-            \"instrumentation\".into(),\n+            rcstr!(\"instrumentation\"),\n         )\n         .to_resolved()\n         .await?;\n@@ -108,7 +108,8 @@ impl InstrumentationEndpoint {\n             Value::new(ServerContextType::Instrumentation {\n                 app_dir: this.app_dir,\n                 ecmascript_client_reference_transition_name: this\n-                    .ecmascript_client_reference_transition_name,\n+                    .ecmascript_client_reference_transition_name\n+                    .clone(),\n             }),\n             this.project.next_mode(),\n         )\n@@ -147,12 +148,13 @@ impl InstrumentationEndpoint {\n             .entry_chunk_group(\n                 this.project\n                     .node_root()\n-                    .join(\"server/instrumentation.js\".into()),\n+                    .join(rcstr!(\"server/instrumentation.js\")),\n                 get_server_runtime_entries(\n                     Value::new(ServerContextType::Instrumentation {\n                         app_dir: this.app_dir,\n                         ecmascript_client_reference_transition_name: this\n-                            .ecmascript_client_reference_transition_name,\n+                            .ecmascript_client_reference_transition_name\n+                            .clone(),\n                     }),\n                     this.project.next_mode(),\n                 )\n@@ -188,15 +190,15 @@ impl InstrumentationEndpoint {\n             let instrumentation_definition = InstrumentationDefinition {\n                 files: file_paths_from_root,\n                 wasm: wasm_paths_to_bindings(wasm_paths_from_root).await?,\n-                name: \"instrumentation\".into(),\n+                name: rcstr!(\"instrumentation\"),\n                 ..Default::default()\n             };\n             let middleware_manifest_v2 = MiddlewaresManifestV2 {\n                 instrumentation: Some(instrumentation_definition),\n                 ..Default::default()\n             };\n             let middleware_manifest_v2 = VirtualOutputAsset::new(\n-                node_root.join(\"server/instrumentation/middleware-manifest.json\".into()),\n+                node_root.join(rcstr!(\"server/instrumentation/middleware-manifest.json\")),\n                 AssetContent::file(\n                     FileContent::Content(File::from(serde_json::to_string_pretty(\n                         &middleware_manifest_v2,"
        },
        {
            "sha": "453392d4e512b4a377a6bfec7c23df48267a2838",
            "filename": "crates/next-api/src/middleware.rs",
            "status": "modified",
            "additions": 18,
            "deletions": 14,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-api%2Fsrc%2Fmiddleware.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-api%2Fsrc%2Fmiddleware.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fmiddleware.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -10,7 +10,7 @@ use next_core::{\n     util::{MiddlewareMatcherKind, NextRuntime, parse_config_from_source},\n };\n use tracing::Instrument;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{Completion, ResolvedVc, Value, Vc};\n use turbo_tasks_fs::{self, File, FileContent, FileSystemPath};\n use turbopack_core::{\n@@ -47,7 +47,7 @@ pub struct MiddlewareEndpoint {\n     asset_context: ResolvedVc<Box<dyn AssetContext>>,\n     source: ResolvedVc<Box<dyn Source>>,\n     app_dir: Option<ResolvedVc<FileSystemPath>>,\n-    ecmascript_client_reference_transition_name: Option<ResolvedVc<RcStr>>,\n+    ecmascript_client_reference_transition_name: Option<RcStr>,\n }\n \n #[turbo_tasks::value_impl]\n@@ -58,7 +58,7 @@ impl MiddlewareEndpoint {\n         asset_context: ResolvedVc<Box<dyn AssetContext>>,\n         source: ResolvedVc<Box<dyn Source>>,\n         app_dir: Option<ResolvedVc<FileSystemPath>>,\n-        ecmascript_client_reference_transition_name: Option<ResolvedVc<RcStr>>,\n+        ecmascript_client_reference_transition_name: Option<RcStr>,\n     ) -> Vc<Self> {\n         Self {\n             project,\n@@ -95,7 +95,7 @@ impl MiddlewareEndpoint {\n             *self.asset_context,\n             self.project.project_path(),\n             module,\n-            \"middleware\".into(),\n+            rcstr!(\"middleware\"),\n         ))\n     }\n \n@@ -110,7 +110,8 @@ impl MiddlewareEndpoint {\n             Value::new(ServerContextType::Middleware {\n                 app_dir: this.app_dir,\n                 ecmascript_client_reference_transition_name: this\n-                    .ecmascript_client_reference_transition_name,\n+                    .ecmascript_client_reference_transition_name\n+                    .clone(),\n             }),\n             this.project.next_mode(),\n         )\n@@ -146,12 +147,15 @@ impl MiddlewareEndpoint {\n \n         let EntryChunkGroupResult { asset: chunk, .. } = *chunking_context\n             .entry_chunk_group(\n-                this.project.node_root().join(\"server/middleware.js\".into()),\n+                this.project\n+                    .node_root()\n+                    .join(rcstr!(\"server/middleware.js\")),\n                 get_server_runtime_entries(\n                     Value::new(ServerContextType::Middleware {\n                         app_dir: this.app_dir,\n                         ecmascript_client_reference_transition_name: this\n-                            .ecmascript_client_reference_transition_name,\n+                            .ecmascript_client_reference_transition_name\n+                            .clone(),\n                     }),\n                     this.project.next_mode(),\n                 )\n@@ -233,8 +237,8 @@ impl MiddlewareEndpoint {\n                 .collect()\n         } else {\n             vec![MiddlewareMatcher {\n-                regexp: Some(\"^/.*$\".into()),\n-                original_source: \"/:path*\".into(),\n+                regexp: Some(rcstr!(\"^/.*$\")),\n+                original_source: rcstr!(\"/:path*\"),\n                 ..Default::default()\n             }]\n         };\n@@ -256,7 +260,7 @@ impl MiddlewareEndpoint {\n             let middleware_manifest_v2 = VirtualOutputAsset::new(\n                 this.project\n                     .node_root()\n-                    .join(\"server/middleware/middleware-manifest.json\".into()),\n+                    .join(rcstr!(\"server/middleware/middleware-manifest.json\")),\n                 AssetContent::file(\n                     FileContent::Content(File::from(serde_json::to_string_pretty(\n                         &middleware_manifest_v2,\n@@ -303,20 +307,20 @@ impl MiddlewareEndpoint {\n                 files: file_paths_from_root,\n                 wasm: wasm_paths_to_bindings(wasm_paths_from_root).await?,\n                 assets: paths_to_bindings(all_assets),\n-                name: \"middleware\".into(),\n-                page: \"/\".into(),\n+                name: rcstr!(\"middleware\"),\n+                page: rcstr!(\"/\"),\n                 regions,\n                 matchers: matchers.clone(),\n                 env: this.project.edge_env().owned().await?,\n             };\n             let middleware_manifest_v2 = MiddlewaresManifestV2 {\n-                middleware: [(\"/\".into(), edge_function_definition)]\n+                middleware: [(rcstr!(\"/\"), edge_function_definition)]\n                     .into_iter()\n                     .collect(),\n                 ..Default::default()\n             };\n             let middleware_manifest_v2 = VirtualOutputAsset::new(\n-                node_root.join(\"server/middleware/middleware-manifest.json\".into()),\n+                node_root.join(rcstr!(\"server/middleware/middleware-manifest.json\")),\n                 AssetContent::file(\n                     FileContent::Content(File::from(serde_json::to_string_pretty(\n                         &middleware_manifest_v2,"
        },
        {
            "sha": "4bb55e75ff49edccf160df897ef293f1ffb65986",
            "filename": "crates/next-api/src/pages.rs",
            "status": "modified",
            "additions": 51,
            "deletions": 56,
            "changes": 107,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-api%2Fsrc%2Fpages.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-api%2Fsrc%2Fpages.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fpages.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -110,8 +110,8 @@ impl PagesProject {\n             routes: &mut FxIndexMap<RcStr, Route>,\n             page: Vc<PagesStructureItem>,\n             make_route: impl Fn(\n-                Vc<RcStr>,\n-                Vc<RcStr>,\n+                RcStr,\n+                RcStr,\n                 Vc<PagesStructureItem>,\n             ) -> BoxFuture<'static, Result<Route>>,\n         ) -> Result<()> {\n@@ -121,9 +121,8 @@ impl PagesProject {\n                 ..\n             } = *page.await?;\n             let pathname: RcStr = format!(\"/{}\", next_router_path.await?.path).into();\n-            let pathname_vc = Vc::cell(pathname.clone());\n-            let original_name = Vc::cell(format!(\"/{}\", original_path.await?.path).into());\n-            let route = make_route(pathname_vc, original_name, page).await?;\n+            let original_name = format!(\"/{}\", original_path.await?.path).into();\n+            let route = make_route(pathname.clone(), original_name, page).await?;\n             routes.insert(pathname, route);\n             Ok(())\n         }\n@@ -132,8 +131,8 @@ impl PagesProject {\n             routes: &mut FxIndexMap<RcStr, Route>,\n             dir: Vc<PagesDirectoryStructure>,\n             make_route: impl Fn(\n-                Vc<RcStr>,\n-                Vc<RcStr>,\n+                RcStr,\n+                RcStr,\n                 Vc<PagesStructureItem>,\n             ) -> BoxFuture<'static, Result<Route>>,\n         ) -> Result<()> {\n@@ -177,15 +176,15 @@ impl PagesProject {\n             .await?;\n         }\n \n-        let make_page_route = |pathname, original_name, page| -> BoxFuture<_> {\n+        let make_page_route = |pathname: RcStr, original_name: RcStr, page| -> BoxFuture<_> {\n             Box::pin(async move {\n                 Ok(Route::Page {\n                     html_endpoint: ResolvedVc::upcast(\n                         PageEndpoint::new(\n                             PageEndpointType::Html,\n                             self,\n-                            pathname,\n-                            original_name,\n+                            pathname.clone(),\n+                            original_name.clone(),\n                             page,\n                             pages_structure,\n                         )\n@@ -227,12 +226,11 @@ impl PagesProject {\n             ..\n         } = *item.await?;\n         let pathname: RcStr = format!(\"/{}\", next_router_path.await?.path).into();\n-        let pathname_vc = Vc::cell(pathname.clone());\n-        let original_name = Vc::cell(format!(\"/{}\", original_path.await?.path).into());\n+        let original_name = format!(\"/{}\", original_path.await?.path).into();\n         let endpoint = Vc::upcast(PageEndpoint::new(\n             ty,\n             self,\n-            pathname_vc,\n+            pathname,\n             original_name,\n             item,\n             self.pages_structure(),\n@@ -279,7 +277,7 @@ impl PagesProject {\n         Ok(if let Some(pages) = self.pages_structure().await?.pages {\n             pages.project_path()\n         } else {\n-            self.project().project_path().join(\"pages\".into())\n+            self.project().project_path().join(rcstr!(\"pages\"))\n         })\n     }\n \n@@ -288,11 +286,11 @@ impl PagesProject {\n         Ok(TransitionOptions {\n             named_transitions: [\n                 (\n-                    \"next-dynamic\".into(),\n+                    rcstr!(\"next-dynamic\"),\n                     ResolvedVc::upcast(NextDynamicTransition::new_marker().to_resolved().await?),\n                 ),\n                 (\n-                    \"next-dynamic-client\".into(),\n+                    rcstr!(\"next-dynamic-client\"),\n                     ResolvedVc::upcast(NextDynamicTransition::new_marker().to_resolved().await?),\n                 ),\n             ]\n@@ -308,11 +306,11 @@ impl PagesProject {\n         Ok(TransitionOptions {\n             named_transitions: [\n                 (\n-                    \"next-dynamic\".into(),\n+                    rcstr!(\"next-dynamic\"),\n                     ResolvedVc::upcast(NextDynamicTransition::new_marker().to_resolved().await?),\n                 ),\n                 (\n-                    \"next-dynamic-client\".into(),\n+                    rcstr!(\"next-dynamic-client\"),\n                     ResolvedVc::upcast(\n                         NextDynamicTransition::new_client(Vc::upcast(self.client_transition()))\n                             .to_resolved()\n@@ -629,7 +627,7 @@ impl PagesProject {\n         let client_main_module = esm_resolve(\n             Vc::upcast(PlainResolveOrigin::new(\n                 client_module_context,\n-                self.project().project_path().join(\"_\".into()),\n+                self.project().project_path().join(rcstr!(\"_\")),\n             )),\n             Request::parse(Value::new(Pattern::Constant(\n                 match *self.project().next_mode().await? {\n@@ -655,8 +653,8 @@ impl PagesProject {\n struct PageEndpoint {\n     ty: PageEndpointType,\n     pages_project: ResolvedVc<PagesProject>,\n-    pathname: ResolvedVc<RcStr>,\n-    original_name: ResolvedVc<RcStr>,\n+    pathname: RcStr,\n+    original_name: RcStr,\n     page: ResolvedVc<PagesStructureItem>,\n     pages_structure: ResolvedVc<PagesStructure>,\n }\n@@ -706,8 +704,8 @@ impl PageEndpoint {\n     fn new(\n         ty: PageEndpointType,\n         pages_project: ResolvedVc<PagesProject>,\n-        pathname: ResolvedVc<RcStr>,\n-        original_name: ResolvedVc<RcStr>,\n+        pathname: RcStr,\n+        original_name: RcStr,\n         page: ResolvedVc<PagesStructureItem>,\n         pages_structure: ResolvedVc<PagesStructure>,\n     ) -> Vc<Self> {\n@@ -733,7 +731,7 @@ impl PageEndpoint {\n         let page_loader = create_page_loader_entry_module(\n             Vc::upcast(this.pages_project.client_module_context()),\n             self.source(),\n-            *this.pathname,\n+            this.pathname.clone(),\n         );\n         if matches!(\n             *this.pages_project.project().next_mode().await?,\n@@ -865,7 +863,7 @@ impl PageEndpoint {\n         let client_relative_path = self.client_relative_path();\n         let page_loader = PageLoaderAsset::new(\n             node_root,\n-            *this.pathname,\n+            this.pathname.clone(),\n             client_relative_path,\n             client_chunks,\n         );\n@@ -902,13 +900,12 @@ impl PageEndpoint {\n             .module();\n \n         let config = parse_config_from_source(ssr_module, NextRuntime::default()).await?;\n-        let pathname = &**this.pathname.await?;\n \n         Ok(\n             // `/_app` and `/_document` never get rendered directly so they don't need to be\n             // wrapped in the route module, and don't need to be handled as edge runtime as the\n             // rendering for edge is part of the page bundle.\n-            if pathname == \"/_app\" || pathname == \"/_document\" {\n+            if this.pathname == \"/_app\" || this.pathname == \"/_document\" {\n                 InternalSsrChunkModule {\n                     ssr_module: ssr_module.to_resolved().await?,\n                     app_module: None,\n@@ -920,12 +917,12 @@ impl PageEndpoint {\n                 }\n             } else if config.runtime == NextRuntime::Edge {\n                 let modules = create_page_ssr_entry_module(\n-                    *this.pathname,\n+                    this.pathname.clone(),\n                     reference_type,\n                     project_root,\n                     Vc::upcast(edge_module_context),\n                     self.source(),\n-                    *this.original_name,\n+                    this.original_name.clone(),\n                     *this.pages_structure,\n                     config.runtime,\n                     this.pages_project.project().next_config(),\n@@ -941,12 +938,12 @@ impl PageEndpoint {\n                 }\n             } else {\n                 let modules = create_page_ssr_entry_module(\n-                    *this.pathname,\n+                    this.pathname.clone(),\n                     reference_type,\n                     project_root,\n                     Vc::upcast(module_context),\n                     self.source(),\n-                    *this.original_name,\n+                    this.original_name.clone(),\n                     *this.pages_structure,\n                     config.runtime,\n                     this.pages_project.project().next_config(),\n@@ -1082,7 +1079,7 @@ impl PageEndpoint {\n                 }\n                 .cell())\n             } else {\n-                let pathname = &**this.pathname.await?;\n+                let pathname = &this.pathname;\n \n                 let asset_path = get_asset_path_from_pathname(pathname, \".js\");\n \n@@ -1151,7 +1148,7 @@ impl PageEndpoint {\n             this.pages_project\n                 .project()\n                 .node_root()\n-                .join(\"server\".into()),\n+                .join(rcstr!(\"server\")),\n             project.server_chunking_context(true),\n             project.edge_chunking_context(true),\n             this.pages_project.ssr_runtime_entries(),\n@@ -1167,7 +1164,7 @@ impl PageEndpoint {\n             this.pages_project\n                 .project()\n                 .node_root()\n-                .join(\"server/data\".into()),\n+                .join(rcstr!(\"server/data\")),\n             this.pages_project.project().server_chunking_context(true),\n             this.pages_project.project().edge_chunking_context(true),\n             this.pages_project.ssr_data_runtime_entries(),\n@@ -1183,7 +1180,7 @@ impl PageEndpoint {\n             this.pages_project\n                 .project()\n                 .node_root()\n-                .join(\"server\".into()),\n+                .join(rcstr!(\"server\")),\n             this.pages_project.project().server_chunking_context(false),\n             this.pages_project.project().edge_chunking_context(false),\n             this.pages_project.ssr_runtime_entries(),\n@@ -1200,17 +1197,17 @@ impl PageEndpoint {\n         let chunk_path = entry_chunk.path().await?;\n \n         let asset_path = node_root\n-            .join(\"server\".into())\n+            .join(rcstr!(\"server\"))\n             .await?\n             .get_path_to(&chunk_path)\n             .context(\"ssr chunk entry path must be inside the node root\")?;\n \n         let pages_manifest = PagesManifest {\n-            pages: [(self.pathname.owned().await?, asset_path.into())]\n+            pages: [(self.pathname.clone(), asset_path.into())]\n                 .into_iter()\n                 .collect(),\n         };\n-        let manifest_path_prefix = get_asset_prefix_from_pathname(&self.pathname.await?);\n+        let manifest_path_prefix = get_asset_prefix_from_pathname(&self.pathname);\n         let asset = Vc::upcast(VirtualOutputAsset::new(\n             node_root\n                 .join(format!(\"server/pages{manifest_path_prefix}/pages-manifest.json\",).into()),\n@@ -1227,7 +1224,7 @@ impl PageEndpoint {\n     ) -> Result<Vc<OutputAssets>> {\n         let node_root = self.pages_project.project().node_root();\n         let client_relative_path = self.pages_project.project().client_relative_path();\n-        let loadable_path_prefix = get_asset_prefix_from_pathname(&self.pathname.await?);\n+        let loadable_path_prefix = get_asset_prefix_from_pathname(&self.pathname);\n         Ok(create_react_loadable_manifest(\n             dynamic_import_entries,\n             client_relative_path,\n@@ -1245,10 +1242,10 @@ impl PageEndpoint {\n         let node_root = self.pages_project.project().node_root();\n         let client_relative_path = self.pages_project.project().client_relative_path();\n         let build_manifest = BuildManifest {\n-            pages: fxindexmap!(self.pathname.owned().await? => client_chunks),\n+            pages: fxindexmap!(self.pathname.clone() => client_chunks),\n             ..Default::default()\n         };\n-        let manifest_path_prefix = get_asset_prefix_from_pathname(&self.pathname.await?);\n+        let manifest_path_prefix = get_asset_prefix_from_pathname(&self.pathname);\n         Ok(Vc::upcast(\n             build_manifest\n                 .build_output(\n@@ -1284,20 +1281,20 @@ impl PageEndpoint {\n         };\n         let emit_manifests = !matches!(this.ty, PageEndpointType::Data);\n \n-        let pathname = this.pathname.owned().await?;\n-        let original_name = &*this.original_name.await?;\n+        let pathname = &this.pathname;\n+        let original_name = &this.original_name;\n \n         let client_assets = OutputAssets::new(client_assets).to_resolved().await?;\n \n-        let manifest_path_prefix = get_asset_prefix_from_pathname(&pathname);\n+        let manifest_path_prefix = get_asset_prefix_from_pathname(pathname);\n         let node_root = this.pages_project.project().node_root();\n         let next_font_manifest_output = create_font_manifest(\n             this.pages_project.project().client_root(),\n             node_root,\n             this.pages_project.pages_dir(),\n             original_name,\n             &manifest_path_prefix,\n-            &pathname,\n+            pathname,\n             *client_assets,\n             false,\n         )\n@@ -1374,9 +1371,9 @@ impl PageEndpoint {\n                     //\n                     // they are created in `setup-dev-bundler.ts`\n                     let mut file_paths_from_root = vec![\n-                        \"server/server-reference-manifest.js\".into(),\n-                        \"server/middleware-build-manifest.js\".into(),\n-                        \"server/next-font-manifest.js\".into(),\n+                        rcstr!(\"server/server-reference-manifest.js\"),\n+                        rcstr!(\"server/middleware-build-manifest.js\"),\n+                        rcstr!(\"server/next-font-manifest.js\"),\n                     ];\n                     let mut wasm_paths_from_root = fxindexset![];\n \n@@ -1398,7 +1395,7 @@ impl PageEndpoint {\n                     let all_assets =\n                         get_asset_paths_from_root(&node_root_value, &all_output_assets).await?;\n \n-                    let named_regex = get_named_middleware_regex(&pathname).into();\n+                    let named_regex = get_named_middleware_regex(pathname).into();\n                     let matchers = MiddlewareMatcher {\n                         regexp: Some(named_regex),\n                         original_source: pathname.clone(),\n@@ -1416,13 +1413,12 @@ impl PageEndpoint {\n                         None\n                     };\n \n-                    let original_name = this.original_name.owned().await?;\n                     let edge_function_definition = EdgeFunctionDefinition {\n                         files: file_paths_from_root,\n                         wasm: wasm_paths_to_bindings(wasm_paths_from_root).await?,\n                         assets: paths_to_bindings(all_assets),\n                         name: pathname.clone(),\n-                        page: original_name.clone(),\n+                        page: this.original_name.clone(),\n                         regions,\n                         matchers: vec![matchers],\n                         env: this.pages_project.project().edge_env().owned().await?,\n@@ -1434,8 +1430,7 @@ impl PageEndpoint {\n                             .collect(),\n                         ..Default::default()\n                     };\n-                    let manifest_path_prefix =\n-                        get_asset_prefix_from_pathname(&this.pathname.await?);\n+                    let manifest_path_prefix = get_asset_prefix_from_pathname(&this.pathname);\n                     let middleware_manifest_v2 = VirtualOutputAsset::new(\n                         node_root.join(\n                             format!(\"server/pages{manifest_path_prefix}/middleware-manifest.json\")\n@@ -1489,10 +1484,10 @@ pub struct InternalSsrChunkModule {\n impl Endpoint for PageEndpoint {\n     #[turbo_tasks::function]\n     async fn output(self: ResolvedVc<Self>) -> Result<Vc<EndpointOutput>> {\n-        let this = self.await?;\n-        let original_name = this.original_name.await?;\n+        let this = &*self.await?;\n+        let original_name = &this.original_name;\n         let span = {\n-            match this.ty {\n+            match &this.ty {\n                 PageEndpointType::Html => {\n                     tracing::info_span!(\"page endpoint HTML\", name = original_name.to_string())\n                 }"
        },
        {
            "sha": "8753051369a9837f217ed1e4d2fd9c3c30c15c37",
            "filename": "crates/next-api/src/project.rs",
            "status": "modified",
            "additions": 62,
            "deletions": 61,
            "changes": 123,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-api%2Fsrc%2Fproject.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-api%2Fsrc%2Fproject.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fproject.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -70,7 +70,7 @@ use turbopack_node::execution_context::ExecutionContext;\n use turbopack_nodejs::NodeJsChunkingContext;\n \n use crate::{\n-    app::{AppProject, ECMASCRIPT_CLIENT_TRANSITION_NAME, OptionAppProject},\n+    app::{AppProject, OptionAppProject},\n     empty::EmptyEndpoint,\n     entrypoints::Entrypoints,\n     instrumentation::InstrumentationEndpoint,\n@@ -467,7 +467,7 @@ impl ProjectContainer {\n             .await?\n             .dist_dir\n             .as_ref()\n-            .map_or_else(|| \".next\".into(), |d| d.clone());\n+            .map_or_else(|| rcstr!(\".next\"), |d| d.clone());\n \n         Ok(Project {\n             root_path,\n@@ -657,13 +657,13 @@ impl Project {\n \n     #[turbo_tasks::function]\n     pub fn client_fs(self: Vc<Self>) -> Vc<Box<dyn FileSystem>> {\n-        let virtual_fs = VirtualFileSystem::new_with_name(\"client-fs\".into());\n+        let virtual_fs = VirtualFileSystem::new_with_name(rcstr!(\"client-fs\"));\n         Vc::upcast(virtual_fs)\n     }\n \n     #[turbo_tasks::function]\n     pub fn output_fs(&self) -> Vc<DiskFileSystem> {\n-        DiskFileSystem::new(\"output\".into(), self.project_path.clone(), vec![])\n+        DiskFileSystem::new(rcstr!(\"output\"), self.project_path.clone(), vec![])\n     }\n \n     #[turbo_tasks::function]\n@@ -693,7 +693,7 @@ impl Project {\n         Ok(self.client_root().join(\n             format!(\n                 \"{}/_next\",\n-                next_config.base_path.clone().unwrap_or_else(|| \"\".into()),\n+                next_config.base_path.clone().unwrap_or_default(),\n             )\n             .into(),\n         ))\n@@ -766,7 +766,7 @@ impl Project {\n     #[turbo_tasks::function]\n     pub(super) async fn should_create_webpack_stats(&self) -> Result<Vc<bool>> {\n         Ok(Vc::cell(\n-            self.env.read(\"TURBOPACK_STATS\".into()).await?.is_some(),\n+            self.env.read(rcstr!(\"TURBOPACK_STATS\")).await?.is_some(),\n         ))\n     }\n \n@@ -779,10 +779,10 @@ impl Project {\n             NodeJsChunkingContext::builder(\n                 self.project_root_path().to_resolved().await?,\n                 node_root,\n-                self.node_root_to_root_path().to_resolved().await?,\n+                self.node_root_to_root_path().owned().await?,\n                 node_root,\n-                node_root.join(\"build/chunks\".into()).to_resolved().await?,\n-                node_root.join(\"build/assets\".into()).to_resolved().await?,\n+                node_root.join(rcstr!(\"build/chunks\")).to_resolved().await?,\n+                node_root.join(rcstr!(\"build/assets\")).to_resolved().await?,\n                 node_build_environment().to_resolved().await?,\n                 next_mode.runtime_type(),\n             )\n@@ -984,45 +984,47 @@ impl Project {\n     #[turbo_tasks::function]\n     pub(super) fn edge_env(&self) -> Vc<EnvMap> {\n         let edge_env = fxindexmap! {\n-            \"__NEXT_BUILD_ID\".into() => self.build_id.clone(),\n-            \"NEXT_SERVER_ACTIONS_ENCRYPTION_KEY\".into() => self.encryption_key.clone(),\n-            \"__NEXT_PREVIEW_MODE_ID\".into() => self.preview_props.preview_mode_id.clone(),\n-            \"__NEXT_PREVIEW_MODE_ENCRYPTION_KEY\".into() => self.preview_props.preview_mode_encryption_key.clone(),\n-            \"__NEXT_PREVIEW_MODE_SIGNING_KEY\".into() => self.preview_props.preview_mode_signing_key.clone(),\n+            rcstr!(\"__NEXT_BUILD_ID\") => self.build_id.clone(),\n+            rcstr!(\"NEXT_SERVER_ACTIONS_ENCRYPTION_KEY\") => self.encryption_key.clone(),\n+            rcstr!(\"__NEXT_PREVIEW_MODE_ID\") => self.preview_props.preview_mode_id.clone(),\n+            rcstr!(\"__NEXT_PREVIEW_MODE_ENCRYPTION_KEY\") => self.preview_props.preview_mode_encryption_key.clone(),\n+            rcstr!(\"__NEXT_PREVIEW_MODE_SIGNING_KEY\") => self.preview_props.preview_mode_signing_key.clone(),\n         };\n         Vc::cell(edge_env)\n     }\n \n     #[turbo_tasks::function]\n-    pub(super) fn client_chunking_context(self: Vc<Self>) -> Vc<Box<dyn ChunkingContext>> {\n-        get_client_chunking_context(\n+    pub(super) async fn client_chunking_context(\n+        self: Vc<Self>,\n+    ) -> Result<Vc<Box<dyn ChunkingContext>>> {\n+        Ok(get_client_chunking_context(\n             self.project_root_path(),\n             self.client_relative_path(),\n-            Vc::cell(\"/ROOT\".into()),\n-            self.next_config().computed_asset_prefix(),\n-            self.next_config().chunk_suffix_path(),\n+            rcstr!(\"/ROOT\"),\n+            self.next_config().computed_asset_prefix().owned().await?,\n+            self.next_config().chunk_suffix_path().owned().await?,\n             self.client_compile_time_info().environment(),\n             self.next_mode(),\n             self.module_ids(),\n             self.next_config().turbo_minify(self.next_mode()),\n             self.next_config().client_source_maps(self.next_mode()),\n             self.no_mangling(),\n-        )\n+        ))\n     }\n \n     #[turbo_tasks::function]\n-    pub(super) fn server_chunking_context(\n+    pub(super) async fn server_chunking_context(\n         self: Vc<Self>,\n         client_assets: bool,\n-    ) -> Vc<NodeJsChunkingContext> {\n-        if client_assets {\n+    ) -> Result<Vc<NodeJsChunkingContext>> {\n+        Ok(if client_assets {\n             get_server_chunking_context_with_client_assets(\n                 self.next_mode(),\n                 self.project_root_path(),\n                 self.node_root(),\n-                self.node_root_to_root_path(),\n+                self.node_root_to_root_path().owned().await?,\n                 self.client_relative_path(),\n-                self.next_config().computed_asset_prefix(),\n+                self.next_config().computed_asset_prefix().owned().await?,\n                 self.server_compile_time_info().environment(),\n                 self.module_ids(),\n                 self.next_config().turbo_minify(self.next_mode()),\n@@ -1034,29 +1036,29 @@ impl Project {\n                 self.next_mode(),\n                 self.project_root_path(),\n                 self.node_root(),\n-                self.node_root_to_root_path(),\n+                self.node_root_to_root_path().owned().await?,\n                 self.server_compile_time_info().environment(),\n                 self.module_ids(),\n                 self.next_config().turbo_minify(self.next_mode()),\n                 self.next_config().server_source_maps(),\n                 self.no_mangling(),\n             )\n-        }\n+        })\n     }\n \n     #[turbo_tasks::function]\n-    pub(super) fn edge_chunking_context(\n+    pub(super) async fn edge_chunking_context(\n         self: Vc<Self>,\n         client_assets: bool,\n-    ) -> Vc<Box<dyn ChunkingContext>> {\n-        if client_assets {\n+    ) -> Result<Vc<Box<dyn ChunkingContext>>> {\n+        Ok(if client_assets {\n             get_edge_chunking_context_with_client_assets(\n                 self.next_mode(),\n                 self.project_root_path(),\n                 self.node_root(),\n-                self.node_root_to_root_path(),\n+                self.node_root_to_root_path().owned().await?,\n                 self.client_relative_path(),\n-                self.next_config().computed_asset_prefix(),\n+                self.next_config().computed_asset_prefix().owned().await?,\n                 self.edge_compile_time_info().environment(),\n                 self.module_ids(),\n                 self.next_config().turbo_minify(self.next_mode()),\n@@ -1068,14 +1070,14 @@ impl Project {\n                 self.next_mode(),\n                 self.project_root_path(),\n                 self.node_root(),\n-                self.node_root_to_root_path(),\n+                self.node_root_to_root_path().owned().await?,\n                 self.edge_compile_time_info().environment(),\n                 self.module_ids(),\n                 self.next_config().turbo_minify(self.next_mode()),\n                 self.next_config().server_source_maps(),\n                 self.no_mangling(),\n             )\n-        }\n+        })\n     }\n \n     #[turbo_tasks::function]\n@@ -1264,14 +1266,12 @@ impl Project {\n         let app_dir = *find_app_dir(self.project_path()).await?;\n         let app_project = *self.app_project().await?;\n \n-        let ecmascript_client_reference_transition_name = match app_project {\n-            Some(app_project) => Some(app_project.client_transition_name().to_resolved().await?),\n-            None => None,\n-        };\n+        let ecmascript_client_reference_transition_name =\n+            app_project.map(|_| AppProject::client_transition_name());\n \n         if let Some(app_project) = app_project {\n             transitions.push((\n-                ECMASCRIPT_CLIENT_TRANSITION_NAME.into(),\n+                AppProject::client_transition_name(),\n                 app_project\n                     .edge_ecmascript_client_reference_transition()\n                     .to_resolved()\n@@ -1291,7 +1291,8 @@ impl Project {\n                 self.execution_context(),\n                 Value::new(ServerContextType::Middleware {\n                     app_dir,\n-                    ecmascript_client_reference_transition_name,\n+                    ecmascript_client_reference_transition_name:\n+                        ecmascript_client_reference_transition_name.clone(),\n                 }),\n                 self.next_mode(),\n                 self.next_config(),\n@@ -1302,7 +1303,8 @@ impl Project {\n                 self.project_path(),\n                 Value::new(ServerContextType::Middleware {\n                     app_dir,\n-                    ecmascript_client_reference_transition_name,\n+                    ecmascript_client_reference_transition_name:\n+                        ecmascript_client_reference_transition_name.clone(),\n                 }),\n                 self.next_mode(),\n                 self.next_config(),\n@@ -1319,14 +1321,12 @@ impl Project {\n         let app_dir = *find_app_dir(self.project_path()).await?;\n         let app_project = *self.app_project().await?;\n \n-        let ecmascript_client_reference_transition_name = match app_project {\n-            Some(app_project) => Some(app_project.client_transition_name().to_resolved().await?),\n-            None => None,\n-        };\n+        let ecmascript_client_reference_transition_name =\n+            app_project.map(|_| AppProject::client_transition_name());\n \n         if let Some(app_project) = app_project {\n             transitions.push((\n-                ECMASCRIPT_CLIENT_TRANSITION_NAME.into(),\n+                AppProject::client_transition_name(),\n                 app_project\n                     .edge_ecmascript_client_reference_transition()\n                     .to_resolved()\n@@ -1346,7 +1346,8 @@ impl Project {\n                 self.execution_context(),\n                 Value::new(ServerContextType::Middleware {\n                     app_dir,\n-                    ecmascript_client_reference_transition_name,\n+                    ecmascript_client_reference_transition_name:\n+                        ecmascript_client_reference_transition_name.clone(),\n                 }),\n                 self.next_mode(),\n                 self.next_config(),\n@@ -1411,7 +1412,7 @@ impl Project {\n         let app_dir = *find_app_dir(self.project_path()).await?;\n         let ecmascript_client_reference_transition_name = (*self.app_project().await?)\n             .as_ref()\n-            .map(|app_project| app_project.client_transition_name());\n+            .map(|_| AppProject::client_transition_name());\n \n         let middleware_asset_context = self.middleware_context();\n \n@@ -1431,14 +1432,13 @@ impl Project {\n         let app_dir = *find_app_dir(self.project_path()).await?;\n         let app_project = &*self.app_project().await?;\n \n-        let ecmascript_client_reference_transition_name = match app_project {\n-            Some(app_project) => Some(app_project.client_transition_name().to_resolved().await?),\n-            None => None,\n-        };\n+        let ecmascript_client_reference_transition_name = app_project\n+            .as_ref()\n+            .map(|_| AppProject::client_transition_name());\n \n         if let Some(app_project) = app_project {\n             transitions.push((\n-                ECMASCRIPT_CLIENT_TRANSITION_NAME.into(),\n+                AppProject::client_transition_name(),\n                 app_project\n                     .ecmascript_client_reference_transition()\n                     .to_resolved()\n@@ -1458,7 +1458,8 @@ impl Project {\n                 self.execution_context(),\n                 Value::new(ServerContextType::Instrumentation {\n                     app_dir,\n-                    ecmascript_client_reference_transition_name,\n+                    ecmascript_client_reference_transition_name:\n+                        ecmascript_client_reference_transition_name.clone(),\n                 }),\n                 self.next_mode(),\n                 self.next_config(),\n@@ -1486,14 +1487,13 @@ impl Project {\n         let app_dir = *find_app_dir(self.project_path()).await?;\n         let app_project = &*self.app_project().await?;\n \n-        let ecmascript_client_reference_transition_name = match app_project {\n-            Some(app_project) => Some(app_project.client_transition_name().to_resolved().await?),\n-            None => None,\n-        };\n+        let ecmascript_client_reference_transition_name = app_project\n+            .as_ref()\n+            .map(|_| AppProject::client_transition_name());\n \n         if let Some(app_project) = app_project {\n             transitions.push((\n-                ECMASCRIPT_CLIENT_TRANSITION_NAME.into(),\n+                AppProject::client_transition_name(),\n                 app_project\n                     .edge_ecmascript_client_reference_transition()\n                     .to_resolved()\n@@ -1513,7 +1513,8 @@ impl Project {\n                 self.execution_context(),\n                 Value::new(ServerContextType::Instrumentation {\n                     app_dir,\n-                    ecmascript_client_reference_transition_name,\n+                    ecmascript_client_reference_transition_name:\n+                        ecmascript_client_reference_transition_name.clone(),\n                 }),\n                 self.next_mode(),\n                 self.next_config(),\n@@ -1555,7 +1556,7 @@ impl Project {\n         let app_dir = *find_app_dir(self.project_path()).await?;\n         let ecmascript_client_reference_transition_name = (*self.app_project().await?)\n             .as_ref()\n-            .map(|app_project| app_project.client_transition_name());\n+            .map(|_| AppProject::client_transition_name());\n \n         let instrumentation_asset_context = if is_edge {\n             self.edge_instrumentation_context()"
        },
        {
            "sha": "e243045fedcef5bfa7561270307707ad5a982a95",
            "filename": "crates/next-core/src/app_structure.rs",
            "status": "modified",
            "additions": 28,
            "deletions": 28,
            "changes": 56,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fapp_structure.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fapp_structure.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fapp_structure.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -5,7 +5,7 @@ use indexmap::map::{Entry, OccupiedEntry};\n use rustc_hash::FxHashMap;\n use serde::{Deserialize, Serialize};\n use tracing::Instrument;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     FxIndexMap, NonLocalValue, ResolvedVc, TaskInput, TryJoinIterExt, ValueDefault, ValueToString,\n     Vc, debug::ValueDebugFormat, fxindexmap, trace::TraceRawVcs,\n@@ -131,7 +131,7 @@ pub async fn get_metadata_route_name(meta: MetadataItem) -> Result<Vc<RcStr>> {\n             };\n \n             match stem.as_str() {\n-                \"manifest\" => Vc::cell(\"manifest.webmanifest\".into()),\n+                \"manifest\" => Vc::cell(rcstr!(\"manifest.webmanifest\")),\n                 _ => Vc::cell(stem.clone()),\n             }\n         }\n@@ -263,8 +263,8 @@ pub struct OptionAppDir(Option<ResolvedVc<FileSystemPath>>);\n /// Finds and returns the [DirectoryTree] of the app directory if existing.\n #[turbo_tasks::function]\n pub async fn find_app_dir(project_path: Vc<FileSystemPath>) -> Result<Vc<OptionAppDir>> {\n-    let app = project_path.join(\"app\".into());\n-    let src_app = project_path.join(\"src/app\".into());\n+    let app = project_path.join(rcstr!(\"app\"));\n+    let src_app = project_path.join(rcstr!(\"src/app\"));\n     let app_dir = if *app.get_type().await? == FileSystemEntryType::Directory {\n         app\n     } else if *src_app.get_type().await? == FileSystemEntryType::Directory {\n@@ -763,7 +763,7 @@ fn directory_tree_to_entrypoints(\n         app_dir,\n         global_metadata,\n         is_global_not_found_enabled,\n-        \"\".into(),\n+        rcstr!(\"\"),\n         directory_tree,\n         AppPage::new(),\n         root_layouts,\n@@ -911,23 +911,23 @@ async fn directory_tree_to_loader_tree_internal(\n         if modules.not_found.is_none() {\n             modules.not_found = Some(\n                 get_next_package(app_dir)\n-                    .join(\"dist/client/components/not-found-error.js\".into())\n+                    .join(rcstr!(\"dist/client/components/not-found-error.js\"))\n                     .to_resolved()\n                     .await?,\n             );\n         }\n         if modules.forbidden.is_none() {\n             modules.forbidden = Some(\n                 get_next_package(app_dir)\n-                    .join(\"dist/client/components/forbidden-error.js\".into())\n+                    .join(rcstr!(\"dist/client/components/forbidden-error.js\"))\n                     .to_resolved()\n                     .await?,\n             );\n         }\n         if modules.unauthorized.is_none() {\n             modules.unauthorized = Some(\n                 get_next_package(app_dir)\n-                    .join(\"dist/client/components/unauthorized-error.js\".into())\n+                    .join(rcstr!(\"dist/client/components/unauthorized-error.js\"))\n                     .to_resolved()\n                     .await?,\n             );\n@@ -945,18 +945,18 @@ async fn directory_tree_to_loader_tree_internal(\n     let current_level_is_parallel_route = is_parallel_route(&directory_name);\n \n     if current_level_is_parallel_route {\n-        tree.segment = \"children\".into();\n+        tree.segment = rcstr!(\"children\");\n     }\n \n     if let Some(page) = (app_path == for_app_path || app_path.is_catchall())\n         .then_some(modules.page)\n         .flatten()\n     {\n         tree.parallel_routes.insert(\n-            \"children\".into(),\n+            rcstr!(\"children\"),\n             AppPageLoaderTree {\n                 page: app_page.clone(),\n-                segment: \"__PAGE__\".into(),\n+                segment: rcstr!(\"__PAGE__\"),\n                 parallel_routes: FxIndexMap::default(),\n                 modules: AppDirModules {\n                     page: Some(page),\n@@ -968,7 +968,7 @@ async fn directory_tree_to_loader_tree_internal(\n         );\n \n         if current_level_is_parallel_route {\n-            tree.segment = \"page$\".into();\n+            tree.segment = rcstr!(\"page$\");\n         }\n     }\n \n@@ -1022,10 +1022,10 @@ async fn directory_tree_to_loader_tree_internal(\n                         || current_tree.get_specificity() < subtree.get_specificity())\n                 {\n                     tree.parallel_routes\n-                        .insert(\"children\".into(), subtree.clone());\n+                        .insert(rcstr!(\"children\"), subtree.clone());\n                 }\n             } else {\n-                tree.parallel_routes.insert(\"children\".into(), subtree);\n+                tree.parallel_routes.insert(rcstr!(\"children\"), subtree);\n             }\n         } else if let Some(key) = parallel_route_key {\n             bail!(\n@@ -1089,7 +1089,7 @@ async fn directory_tree_to_loader_tree_internal(\n         }\n     } else if tree.parallel_routes.get(\"children\").is_none() {\n         tree.parallel_routes.insert(\n-            \"children\".into(),\n+            rcstr!(\"children\"),\n             default_route_tree(\n                 app_dir,\n                 global_metadata,\n@@ -1119,7 +1119,7 @@ async fn default_route_tree(\n ) -> Result<AppPageLoaderTree> {\n     Ok(AppPageLoaderTree {\n         page: app_page.clone(),\n-        segment: \"__DEFAULT__\".into(),\n+        segment: rcstr!(\"__DEFAULT__\"),\n         parallel_routes: FxIndexMap::default(),\n         modules: if let Some(default) = default_component {\n             AppDirModules {\n@@ -1131,7 +1131,7 @@ async fn default_route_tree(\n             AppDirModules {\n                 default: Some(\n                     get_next_package(app_dir)\n-                        .join(\"dist/client/components/parallel-route-default.js\".into())\n+                        .join(rcstr!(\"dist/client/components/parallel-route-default.js\"))\n                         .to_resolved()\n                         .await?,\n                 ),\n@@ -1276,7 +1276,7 @@ async fn directory_tree_to_entrypoints_internal_untraced(\n         if modules.layout.is_none() {\n             modules.layout = Some(\n                 get_next_package(*app_dir)\n-                    .join(\"dist/client/components/default-layout.js\".into())\n+                    .join(rcstr!(\"dist/client/components/default-layout.js\"))\n                     .to_resolved()\n                     .await?,\n             );\n@@ -1285,23 +1285,23 @@ async fn directory_tree_to_entrypoints_internal_untraced(\n         if modules.not_found.is_none() {\n             modules.not_found = Some(\n                 get_next_package(*app_dir)\n-                    .join(\"dist/client/components/not-found-error.js\".into())\n+                    .join(rcstr!(\"dist/client/components/not-found-error.js\"))\n                     .to_resolved()\n                     .await?,\n             );\n         }\n         if modules.forbidden.is_none() {\n             modules.forbidden = Some(\n                 get_next_package(*app_dir)\n-                    .join(\"dist/client/components/forbidden-error.js\".into())\n+                    .join(rcstr!(\"dist/client/components/forbidden-error.js\"))\n                     .to_resolved()\n                     .await?,\n             );\n         }\n         if modules.unauthorized.is_none() {\n             modules.unauthorized = Some(\n                 get_next_package(*app_dir)\n-                    .join(\"dist/client/components/unauthorized-error.js\".into())\n+                    .join(rcstr!(\"dist/client/components/unauthorized-error.js\"))\n                     .to_resolved()\n                     .await?,\n             );\n@@ -1320,13 +1320,13 @@ async fn directory_tree_to_entrypoints_internal_untraced(\n             page: app_page.clone(),\n             segment: directory_name.clone(),\n             parallel_routes: fxindexmap! {\n-                \"children\".into() => AppPageLoaderTree {\n+                rcstr!(\"children\") => AppPageLoaderTree {\n                     page: app_page.clone(),\n-                    segment: \"/_not-found\".into(),\n+                    segment: rcstr!(\"/_not-found\"),\n                     parallel_routes: fxindexmap! {\n-                        \"children\".into() => AppPageLoaderTree {\n+                        rcstr!(\"children\") => AppPageLoaderTree {\n                             page: app_page.clone(),\n-                            segment: \"__PAGE__\".into(),\n+                            segment: rcstr!(\"__PAGE__\"),\n                             parallel_routes: FxIndexMap::default(),\n                             modules: if use_global_not_found {\n                                 // if global-not-found.js is present:\n@@ -1336,7 +1336,7 @@ async fn directory_tree_to_entrypoints_internal_untraced(\n                                     page: match modules.global_not_found {\n                                         Some(v) => Some(v),\n                                         None => Some(get_next_package(*app_dir)\n-                                            .join(\"dist/client/components/global-not-found.js\".into())\n+                                            .join(rcstr!(\"dist/client/components/global-not-found.js\"))\n                                             .to_resolved()\n                                             .await?),\n                                     },\n@@ -1349,7 +1349,7 @@ async fn directory_tree_to_entrypoints_internal_untraced(\n                                     page: match modules.not_found {\n                                         Some(v) => Some(v),\n                                         None => Some(get_next_package(*app_dir)\n-                                            .join(\"dist/client/components/not-found-error.js\".into())\n+                                            .join(rcstr!(\"dist/client/components/not-found-error.js\"))\n                                             .to_resolved()\n                                             .await?),\n                                     },\n@@ -1544,7 +1544,7 @@ impl Issue for DirectoryTreeIssue {\n \n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\"An issue occurred while preparing your Next.js app\".into()).cell()\n+        StyledString::Text(rcstr!(\"An issue occurred while preparing your Next.js app\")).cell()\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "6a85dd9ccf8751b32057394ca5ed707c6fb8646c",
            "filename": "crates/next-core/src/hmr_entry.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fhmr_entry.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fhmr_entry.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fhmr_entry.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -119,7 +119,7 @@ impl HmrEntryModuleReference {\n impl ValueToString for HmrEntryModuleReference {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        Vc::cell(\"entry\".into())\n+        Vc::cell(rcstr!(\"entry\"))\n     }\n }\n "
        },
        {
            "sha": "25ff626f2a3cad8fd5e8e1087be18f070f15be11",
            "filename": "crates/next-core/src/next_client/context.rs",
            "status": "modified",
            "additions": 18,
            "deletions": 18,
            "changes": 36,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_client%2Fcontext.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_client%2Fcontext.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_client%2Fcontext.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,7 +1,7 @@\n use std::iter::once;\n \n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{FxIndexMap, OptionVcExt, ResolvedVc, Value, Vc};\n use turbo_tasks_env::EnvMap;\n use turbo_tasks_fs::FileSystemPath;\n@@ -102,14 +102,14 @@ async fn next_client_free_vars(define_env: Vc<EnvMap>) -> Result<Vc<FreeVarRefer\n     Ok(free_var_references!(\n         ..defines(&*define_env.await?).into_iter(),\n         Buffer = FreeVarReference::EcmaScriptModule {\n-            request: \"node:buffer\".into(),\n+            request: rcstr!(\"node:buffer\"),\n             lookup_path: None,\n-            export: Some(\"Buffer\".into()),\n+            export: Some(rcstr!(\"Buffer\")),\n         },\n         process = FreeVarReference::EcmaScriptModule {\n-            request: \"node:process\".into(),\n+            request: rcstr!(\"node:process\"),\n             lookup_path: None,\n-            export: Some(\"default\".into()),\n+            export: Some(rcstr!(\"default\")),\n         }\n     )\n     .cell())\n@@ -265,15 +265,15 @@ pub async fn get_client_module_options_context(\n     // foreign_code_context_condition. This allows to import codes from\n     // node_modules that requires webpack loaders, which next-dev implicitly\n     // does by default.\n-    let conditions = vec![\"browser\".into(), mode.await?.condition().into()];\n+    let conditions = vec![rcstr!(\"browser\"), mode.await?.condition().into()];\n     let foreign_enable_webpack_loaders = webpack_loader_options(\n         project_path,\n         next_config,\n         true,\n         conditions\n             .iter()\n             .cloned()\n-            .chain(once(\"foreign\".into()))\n+            .chain(once(rcstr!(\"foreign\")))\n             .collect(),\n     )\n     .await?;\n@@ -425,9 +425,9 @@ pub async fn get_client_module_options_context(\n pub async fn get_client_chunking_context(\n     root_path: ResolvedVc<FileSystemPath>,\n     client_root: ResolvedVc<FileSystemPath>,\n-    client_root_to_root_path: ResolvedVc<RcStr>,\n-    asset_prefix: ResolvedVc<Option<RcStr>>,\n-    chunk_suffix_path: ResolvedVc<Option<RcStr>>,\n+    client_root_to_root_path: RcStr,\n+    asset_prefix: Option<RcStr>,\n+    chunk_suffix_path: Option<RcStr>,\n     environment: ResolvedVc<Environment>,\n     mode: Vc<NextMode>,\n     module_id_strategy: ResolvedVc<Box<dyn ModuleIdStrategy>>,\n@@ -442,14 +442,14 @@ pub async fn get_client_chunking_context(\n         client_root_to_root_path,\n         client_root,\n         client_root\n-            .join(\"static/chunks\".into())\n+            .join(rcstr!(\"static/chunks\"))\n             .to_resolved()\n             .await?,\n         get_client_assets_path(*client_root).to_resolved().await?,\n         environment,\n         next_mode.runtime_type(),\n     )\n-    .chunk_base_path(asset_prefix)\n+    .chunk_base_path(asset_prefix.clone())\n     .chunk_suffix_path(chunk_suffix_path)\n     .minify_type(if *minify.await? {\n         MinifyType::Minify {\n@@ -494,7 +494,7 @@ pub async fn get_client_chunking_context(\n \n #[turbo_tasks::function]\n pub fn get_client_assets_path(client_root: Vc<FileSystemPath>) -> Vc<FileSystemPath> {\n-    client_root.join(\"static/media\".into())\n+    client_root.join(rcstr!(\"static/media\"))\n }\n \n #[turbo_tasks::function]\n@@ -522,7 +522,7 @@ pub async fn get_client_runtime_entries(\n             runtime_entries.push(\n                 RuntimeEntry::Request(\n                     request.to_resolved().await?,\n-                    project_root.join(\"_\".into()).to_resolved().await?,\n+                    project_root.join(rcstr!(\"_\")).to_resolved().await?,\n                 )\n                 .resolved_cell(),\n             )\n@@ -532,12 +532,12 @@ pub async fn get_client_runtime_entries(\n     if matches!(*ty, ClientContextType::App { .. },) {\n         runtime_entries.push(\n             RuntimeEntry::Request(\n-                Request::parse(Value::new(Pattern::Constant(\n-                    \"next/dist/client/app-next-turbopack.js\".into(),\n-                )))\n+                Request::parse(Value::new(Pattern::Constant(rcstr!(\n+                    \"next/dist/client/app-next-turbopack.js\"\n+                ))))\n                 .to_resolved()\n                 .await?,\n-                project_root.join(\"_\".into()).to_resolved().await?,\n+                project_root.join(rcstr!(\"_\")).to_resolved().await?,\n             )\n             .resolved_cell(),\n         );"
        },
        {
            "sha": "55c0b79285abd87ebbca0bb98d97784e8062f907",
            "filename": "crates/next-core/src/next_client_reference/css_client_reference/css_client_reference_module.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_client_reference%2Fcss_client_reference%2Fcss_client_reference_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_client_reference%2Fcss_client_reference%2Fcss_client_reference_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_client_reference%2Fcss_client_reference%2Fcss_client_reference_module.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -80,7 +80,7 @@ impl ChunkableModuleReference for CssClientReference {\n     fn chunking_type(&self) -> Vc<ChunkingTypeOption> {\n         Vc::cell(Some(ChunkingType::Isolated {\n             _ty: ChunkGroupType::Evaluated,\n-            merge_tag: Some(\"client\".into()),\n+            merge_tag: Some(rcstr!(\"client\")),\n         }))\n     }\n }\n@@ -97,6 +97,6 @@ impl ModuleReference for CssClientReference {\n impl ValueToString for CssClientReference {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        Vc::cell(\"css client reference to client\".into())\n+        Vc::cell(rcstr!(\"css client reference to client\"))\n     }\n }"
        },
        {
            "sha": "8fdc8f4b25ceded9066dd2d3aada9180f6bd3421",
            "filename": "crates/next-core/src/next_client_reference/ecmascript_client_reference/ecmascript_client_reference_module.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 20,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_client_reference%2Fecmascript_client_reference%2Fecmascript_client_reference_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_client_reference%2Fecmascript_client_reference%2Fecmascript_client_reference_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_client_reference%2Fecmascript_client_reference%2Fecmascript_client_reference_module.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -176,16 +176,6 @@ impl EcmascriptClientReferenceModule {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn ecmascript_client_reference_client_ref_modifier() -> Vc<RcStr> {\n-    Vc::cell(\"ecmascript client reference to client\".into())\n-}\n-\n-#[turbo_tasks::function]\n-fn ecmascript_client_reference_ssr_ref_modifier() -> Vc<RcStr> {\n-    Vc::cell(\"ecmascript client reference to ssr\".into())\n-}\n-\n pub fn ecmascript_client_reference_merge_tag() -> RcStr {\n     rcstr!(\"client\")\n }\n@@ -222,7 +212,7 @@ impl Module for EcmascriptClientReferenceModule {\n                     *ResolvedVc::upcast(*client_module),\n                     ChunkGroupType::Evaluated,\n                     Some(ecmascript_client_reference_merge_tag()),\n-                    ecmascript_client_reference_client_ref_modifier(),\n+                    rcstr!(\"ecmascript client reference to client\"),\n                 )\n                 .to_resolved()\n                 .await?,\n@@ -232,7 +222,7 @@ impl Module for EcmascriptClientReferenceModule {\n                     *ResolvedVc::upcast(*ssr_module),\n                     ChunkGroupType::Entry,\n                     Some(ecmascript_client_reference_merge_tag_ssr()),\n-                    ecmascript_client_reference_ssr_ref_modifier(),\n+                    rcstr!(\"ecmascript client reference to ssr\"),\n                 )\n                 .to_resolved()\n                 .await?,\n@@ -298,11 +288,6 @@ struct EcmascriptClientReferenceProxyChunkItem {\n     chunking_context: ResolvedVc<Box<dyn ChunkingContext>>,\n }\n \n-#[turbo_tasks::function]\n-fn client_reference_description() -> Vc<RcStr> {\n-    Vc::cell(\"client references\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkItem for EcmascriptClientReferenceProxyChunkItem {\n     #[turbo_tasks::function]\n@@ -348,7 +333,7 @@ pub(crate) struct EcmascriptClientReference {\n     module: ResolvedVc<Box<dyn Module>>,\n     ty: ChunkGroupType,\n     merge_tag: Option<RcStr>,\n-    description: ResolvedVc<RcStr>,\n+    description: RcStr,\n }\n \n #[turbo_tasks::value_impl]\n@@ -358,7 +343,7 @@ impl EcmascriptClientReference {\n         module: ResolvedVc<Box<dyn Module>>,\n         ty: ChunkGroupType,\n         merge_tag: Option<RcStr>,\n-        description: ResolvedVc<RcStr>,\n+        description: RcStr,\n     ) -> Vc<Self> {\n         Self::cell(EcmascriptClientReference {\n             module,\n@@ -392,6 +377,6 @@ impl ModuleReference for EcmascriptClientReference {\n impl ValueToString for EcmascriptClientReference {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        *self.description\n+        Vc::cell(self.description.clone())\n     }\n }"
        },
        {
            "sha": "32453c52fc0be3115d9c21fa96cdc42489e73524",
            "filename": "crates/next-core/src/next_config.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_config.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_config.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -3,7 +3,7 @@ use rustc_hash::FxHashSet;\n use serde::{Deserialize, Deserializer, Serialize};\n use serde_json::Value as JsonValue;\n use turbo_esregex::EsRegex;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     FxIndexMap, NonLocalValue, OperationValue, ResolvedVc, TaskInput, Vc, debug::ValueDebugFormat,\n     trace::TraceRawVcs,\n@@ -1655,7 +1655,7 @@ impl Issue for OutdatedConfigIssue {\n     fn title(&self) -> Vc<StyledString> {\n         StyledString::Line(vec![\n             StyledString::Code(self.old_name.clone()),\n-            StyledString::Text(\" has been replaced by \".into()),\n+            StyledString::Text(rcstr!(\" has been replaced by \")),\n             StyledString::Code(self.new_name.clone()),\n         ])\n         .cell()"
        },
        {
            "sha": "d2df594e6dff2422d8573b694097ba5f476363ca",
            "filename": "crates/next-core/src/next_dynamic/dynamic_module.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_dynamic%2Fdynamic_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_dynamic%2Fdynamic_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_dynamic%2Fdynamic_module.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -37,9 +37,8 @@ impl NextDynamicEntryModule {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn dynamic_ref_description() -> Vc<RcStr> {\n-    Vc::cell(\"next/dynamic reference\".into())\n+fn dynamic_ref_description() -> RcStr {\n+    rcstr!(\"next/dynamic reference\")\n }\n \n #[turbo_tasks::value_impl]\n@@ -105,9 +104,10 @@ impl EcmascriptChunkPlaceable for NextDynamicEntryModule {\n         );\n \n         let mut exports = BTreeMap::new();\n+        let default = rcstr!(\"default\");\n         exports.insert(\n-            \"default\".into(),\n-            EsmExport::ImportedBinding(module_reference, \"default\".into(), false),\n+            default.clone(),\n+            EsmExport::ImportedBinding(module_reference, default, false),\n         );\n \n         Ok(EcmascriptExports::EsmExports("
        },
        {
            "sha": "0ab4c33685f97937db75b949db92d9451f36e6c6",
            "filename": "crates/next-core/src/next_edge/context.rs",
            "status": "modified",
            "additions": 23,
            "deletions": 18,
            "changes": 41,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_edge%2Fcontext.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_edge%2Fcontext.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_edge%2Fcontext.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{FxIndexMap, OptionVcExt, ResolvedVc, Value, Vc};\n use turbo_tasks_env::EnvMap;\n use turbo_tasks_fs::FileSystemPath;\n@@ -71,9 +71,9 @@ async fn next_edge_free_vars(\n     Ok(free_var_references!(\n         ..defines(&*define_env.await?).into_iter(),\n         Buffer = FreeVarReference::EcmaScriptModule {\n-            request: \"buffer\".into(),\n+            request: rcstr!(\"buffer\"),\n             lookup_path: Some(project_path),\n-            export: Some(\"Buffer\".into()),\n+            export: Some(rcstr!(\"Buffer\")),\n         },\n     )\n     .cell())\n@@ -109,10 +109,15 @@ pub async fn get_edge_resolve_options_context(\n     next_config: Vc<NextConfig>,\n     execution_context: Vc<ExecutionContext>,\n ) -> Result<Vc<ResolveOptionsContext>> {\n-    let next_edge_import_map =\n-        get_next_edge_import_map(*project_path, ty, next_config, mode, execution_context)\n-            .to_resolved()\n-            .await?;\n+    let next_edge_import_map = get_next_edge_import_map(\n+        *project_path,\n+        ty.clone(),\n+        next_config,\n+        mode,\n+        execution_context,\n+    )\n+    .to_resolved()\n+    .await?;\n \n     let ty: ServerContextType = ty.into_value();\n \n@@ -171,7 +176,7 @@ pub async fn get_edge_resolve_options_context(\n     );\n \n     if ty.supports_react_server() {\n-        custom_conditions.push(\"react-server\".into());\n+        custom_conditions.push(rcstr!(\"react-server\"));\n     };\n \n     let resolve_options_context = ResolveOptionsContext {\n@@ -214,25 +219,25 @@ pub async fn get_edge_chunking_context_with_client_assets(\n     mode: Vc<NextMode>,\n     root_path: ResolvedVc<FileSystemPath>,\n     node_root: ResolvedVc<FileSystemPath>,\n-    output_root_to_root_path: ResolvedVc<RcStr>,\n+    output_root_to_root_path: RcStr,\n     client_root: ResolvedVc<FileSystemPath>,\n-    asset_prefix: ResolvedVc<Option<RcStr>>,\n+    asset_prefix: Option<RcStr>,\n     environment: ResolvedVc<Environment>,\n     module_id_strategy: ResolvedVc<Box<dyn ModuleIdStrategy>>,\n     turbo_minify: Vc<bool>,\n     turbo_source_maps: Vc<bool>,\n     no_mangling: Vc<bool>,\n ) -> Result<Vc<Box<dyn ChunkingContext>>> {\n-    let output_root = node_root.join(\"server/edge\".into()).to_resolved().await?;\n+    let output_root = node_root.join(rcstr!(\"server/edge\")).to_resolved().await?;\n     let next_mode = mode.await?;\n     let mut builder = BrowserChunkingContext::builder(\n         root_path,\n         output_root,\n         output_root_to_root_path,\n         client_root,\n-        output_root.join(\"chunks/ssr\".into()).to_resolved().await?,\n+        output_root.join(rcstr!(\"chunks/ssr\")).to_resolved().await?,\n         client_root\n-            .join(\"static/media\".into())\n+            .join(rcstr!(\"static/media\"))\n             .to_resolved()\n             .await?,\n         environment,\n@@ -279,30 +284,30 @@ pub async fn get_edge_chunking_context(\n     mode: Vc<NextMode>,\n     root_path: ResolvedVc<FileSystemPath>,\n     node_root: ResolvedVc<FileSystemPath>,\n-    node_root_to_root_path: ResolvedVc<RcStr>,\n+    node_root_to_root_path: RcStr,\n     environment: ResolvedVc<Environment>,\n     module_id_strategy: ResolvedVc<Box<dyn ModuleIdStrategy>>,\n     turbo_minify: Vc<bool>,\n     turbo_source_maps: Vc<bool>,\n     no_mangling: Vc<bool>,\n ) -> Result<Vc<Box<dyn ChunkingContext>>> {\n-    let output_root = node_root.join(\"server/edge\".into()).to_resolved().await?;\n+    let output_root = node_root.join(rcstr!(\"server/edge\")).to_resolved().await?;\n     let next_mode = mode.await?;\n     let mut builder = BrowserChunkingContext::builder(\n         root_path,\n         output_root,\n         node_root_to_root_path,\n         output_root,\n-        output_root.join(\"chunks\".into()).to_resolved().await?,\n-        output_root.join(\"assets\".into()).to_resolved().await?,\n+        output_root.join(rcstr!(\"chunks\")).to_resolved().await?,\n+        output_root.join(rcstr!(\"assets\")).to_resolved().await?,\n         environment,\n         next_mode.runtime_type(),\n     )\n     // Since one can't read files in edge directly, any asset need to be fetched\n     // instead. This special blob url is handled by the custom fetch\n     // implementation in the edge sandbox. It will respond with the\n     // asset from the output directory.\n-    .asset_base_path(ResolvedVc::cell(Some(\"blob:server/edge/\".into())))\n+    .asset_base_path(Some(rcstr!(\"blob:server/edge/\")))\n     .minify_type(if *turbo_minify.await? {\n         MinifyType::Minify {\n             mangle: (!*no_mangling.await?).then_some(MangleType::OptimalSize),"
        },
        {
            "sha": "56f467a2b6e021cb5184ccbf91ea4dddcec07563",
            "filename": "crates/next-core/src/next_font/font_fallback.rs",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Ffont_fallback.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Ffont_fallback.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_font%2Ffont_fallback.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,7 +1,7 @@\n use anyhow::Result;\n use once_cell::sync::Lazy;\n use serde::{Deserialize, Serialize};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{NonLocalValue, ResolvedVc, Vc, trace::TraceRawVcs};\n \n pub(crate) struct DefaultFallbackFont {\n@@ -14,16 +14,16 @@ pub(crate) struct DefaultFallbackFont {\n // From https://github.com/vercel/next.js/blob/a3893bf69c83fb08e88c87bf8a21d987a0448c8e/packages/font/src/utils.ts#L4\n pub(crate) static DEFAULT_SANS_SERIF_FONT: Lazy<DefaultFallbackFont> =\n     Lazy::new(|| DefaultFallbackFont {\n-        name: \"Arial\".into(),\n-        capsize_key: \"arial\".into(),\n+        name: rcstr!(\"Arial\"),\n+        capsize_key: rcstr!(\"arial\"),\n         az_avg_width: 934.5116279069767,\n         units_per_em: 2048,\n     });\n \n pub(crate) static DEFAULT_SERIF_FONT: Lazy<DefaultFallbackFont> =\n     Lazy::new(|| DefaultFallbackFont {\n-        name: \"Times New Roman\".into(),\n-        capsize_key: \"timesNewRoman\".into(),\n+        name: rcstr!(\"Times New Roman\"),\n+        capsize_key: rcstr!(\"timesNewRoman\"),\n         az_avg_width: 854.3953488372093,\n         units_per_em: 2048,\n     });\n@@ -32,9 +32,9 @@ pub(crate) static DEFAULT_SERIF_FONT: Lazy<DefaultFallbackFont> =\n #[turbo_tasks::value(shared)]\n pub(crate) struct AutomaticFontFallback {\n     /// e.g. `__Roboto_Fallback_c123b8`\n-    pub scoped_font_family: ResolvedVc<RcStr>,\n+    pub scoped_font_family: RcStr,\n     /// The name of font locally, used in `src: local(\"{}\")`\n-    pub local_font_family: ResolvedVc<RcStr>,\n+    pub local_font_family: RcStr,\n     pub adjustment: Option<FontAdjustment>,\n }\n "
        },
        {
            "sha": "f89d3a6ae008962de21b52f3677d1488969440fb",
            "filename": "crates/next-core/src/next_font/google/font_fallback.rs",
            "status": "modified",
            "additions": 12,
            "deletions": 13,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Ffont_fallback.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Ffont_fallback.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Ffont_fallback.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -3,7 +3,7 @@ use once_cell::sync::Lazy;\n use regex::Regex;\n use rustc_hash::FxHashMap;\n use serde::{Deserialize, Serialize};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{NonLocalValue, ResolvedVc, Vc, trace::TraceRawVcs};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::issue::{IssueExt, IssueSeverity, StyledString};\n@@ -53,7 +53,7 @@ pub(super) async fn get_font_fallback(\n         None => {\n             let metrics_json = load_next_js_templateon(\n                 lookup_path,\n-                \"dist/server/capsize-font-metrics.json\".into(),\n+                rcstr!(\"dist/server/capsize-font-metrics.json\"),\n             )\n             .await?;\n             let fallback = lookup_fallback(\n@@ -65,12 +65,10 @@ pub(super) async fn get_font_fallback(\n             match fallback {\n                 Ok(fallback) => FontFallback::Automatic(AutomaticFontFallback {\n                     scoped_font_family: get_scoped_font_family(\n-                        FontFamilyType::Fallback.cell(),\n-                        options_vc.font_family(),\n-                    )\n-                    .to_resolved()\n-                    .await?,\n-                    local_font_family: ResolvedVc::cell(fallback.font_family),\n+                        FontFamilyType::Fallback,\n+                        options_vc.font_family().await?,\n+                    ),\n+                    local_font_family: fallback.font_family,\n                     adjustment: fallback.adjustment,\n                 })\n                 .cell(),\n@@ -85,9 +83,9 @@ pub(super) async fn get_font_fallback(\n                             .into(),\n                         )\n                         .resolved_cell(),\n-                        description: StyledString::Text(\n-                            \"Skipping generating a fallback font.\".into(),\n-                        )\n+                        description: StyledString::Text(rcstr!(\n+                            \"Skipping generating a fallback font.\"\n+                        ))\n                         .resolved_cell(),\n                         severity: IssueSeverity::Warning.resolved_cell(),\n                     }\n@@ -172,6 +170,7 @@ fn lookup_fallback(\n #[cfg(test)]\n mod tests {\n     use anyhow::Result;\n+    use turbo_rcstr::rcstr;\n     use turbo_tasks_fs::json::parse_json_with_source_context;\n \n     use super::{FontAdjustment, FontMetricsMap};\n@@ -211,7 +210,7 @@ mod tests {\n         assert_eq!(\n             lookup_fallback(\"Inter\", font_metrics, true)?,\n             Fallback {\n-                font_family: \"Arial\".into(),\n+                font_family: rcstr!(\"Arial\"),\n                 adjustment: Some(FontAdjustment {\n                     ascent: 0.901_989_700_374_532,\n                     descent: -0.224_836_142_322_097_4,\n@@ -257,7 +256,7 @@ mod tests {\n         assert_eq!(\n             lookup_fallback(\"Roboto Slab\", font_metrics, true)?,\n             Fallback {\n-                font_family: \"Times New Roman\".into(),\n+                font_family: rcstr!(\"Times New Roman\"),\n                 adjustment: Some(FontAdjustment {\n                     ascent: 0.885_645_438_273_993_8,\n                     descent: -0.229_046_234_036_377_7,"
        },
        {
            "sha": "7a792376158c372b2b2d2e260ae53748606661f2",
            "filename": "crates/next-core/src/next_font/google/mod.rs",
            "status": "modified",
            "additions": 31,
            "deletions": 32,
            "changes": 63,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Fmod.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -5,7 +5,7 @@ use futures::FutureExt;\n use indoc::formatdoc;\n use rustc_hash::FxHashMap;\n use serde::{Deserialize, Serialize};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{Completion, FxIndexMap, ResolvedVc, Value, Vc};\n use turbo_tasks_bytes::stream::SingleValue;\n use turbo_tasks_env::{CommandLineProcessEnv, ProcessEnv};\n@@ -96,8 +96,8 @@ impl NextFontGoogleReplacer {\n         let fallback = get_font_fallback(*self.project_path, options);\n         let properties = get_font_css_properties(options, fallback).await?;\n         let js_asset = VirtualSource::new(\n-            next_js_file_path(\"internal/font/google\".into())\n-                .join(format!(\"{}.js\", get_request_id(options.font_family(), request_hash).await?).into()),\n+            next_js_file_path(rcstr!(\"internal/font/google\"))\n+                .join(format!(\"{}.js\", get_request_id(options.font_family().await?, request_hash)).into()),\n             AssetContent::file(FileContent::Content(\n                 formatdoc!(\n                     r#\"\n@@ -203,28 +203,28 @@ impl NextFontGoogleCssModuleReplacer {\n         let request_hash = get_request_hash(&query);\n         let font_data = load_font_data(*self.project_path);\n         let options = font_options_from_query_map(query, font_data);\n-        let stylesheet_url = get_stylesheet_url_from_options(options, font_data);\n+        let stylesheet_url = get_stylesheet_url_from_options(options, font_data)\n+            .owned()\n+            .await?;\n+        let font_family = options.font_family().await?;\n         let scoped_font_family =\n-            get_scoped_font_family(FontFamilyType::WebFont.cell(), options.font_family());\n-        let css_virtual_path = next_js_file_path(\"internal/font/google\".into()).join(\n-            format!(\n-                \"/{}.module.css\",\n-                get_request_id(options.font_family(), request_hash).await?\n-            )\n-            .into(),\n-        );\n+            get_scoped_font_family(FontFamilyType::WebFont, font_family.clone());\n+        let css_virtual_path = next_js_file_path(rcstr!(\"internal/font/google\"))\n+            .join(format!(\"/{}.module.css\", get_request_id(font_family, request_hash)).into());\n \n         // When running Next.js integration tests, use the mock data available in\n         // process.env.NEXT_FONT_GOOGLE_MOCKED_RESPONSES instead of making real\n         // requests to Google Fonts.\n         let env = Vc::upcast::<Box<dyn ProcessEnv>>(CommandLineProcessEnv::new());\n-        let mocked_responses_path = &*env.read(\"NEXT_FONT_GOOGLE_MOCKED_RESPONSES\".into()).await?;\n+        let mocked_responses_path = &*env\n+            .read(rcstr!(\"NEXT_FONT_GOOGLE_MOCKED_RESPONSES\"))\n+            .await?;\n \n         let stylesheet_str = mocked_responses_path\n             .as_ref()\n             .map_or_else(\n-                || fetch_real_stylesheet(stylesheet_url, css_virtual_path).boxed(),\n-                |p| get_mock_stylesheet(stylesheet_url, p, *self.execution_context).boxed(),\n+                || fetch_real_stylesheet(stylesheet_url.clone(), css_virtual_path).boxed(),\n+                |p| get_mock_stylesheet(stylesheet_url.clone(), p, *self.execution_context).boxed(),\n             )\n             .await?;\n \n@@ -416,12 +416,11 @@ impl ImportMappingReplacement for NextFontGoogleFontFileReplacer {\n         }\n \n         let font_virtual_path =\n-            next_js_file_path(\"internal/font/google\".into()).join(format!(\"/{name}.{ext}\").into());\n+            next_js_file_path(rcstr!(\"internal/font/google\")).join(format!(\"/{name}.{ext}\").into());\n \n         // doesn't seem ideal to download the font into a string, but probably doesn't\n         // really matter either.\n-        let Some(font) = fetch_from_google_fonts(Vc::cell(url.into()), font_virtual_path).await?\n-        else {\n+        let Some(font) = fetch_from_google_fonts(url.into(), font_virtual_path).await? else {\n             return Ok(ImportMapResult::Result(ResolveResult::unresolvable()).cell());\n         };\n \n@@ -440,7 +439,7 @@ impl ImportMappingReplacement for NextFontGoogleFontFileReplacer {\n async fn load_font_data(project_root: ResolvedVc<FileSystemPath>) -> Result<Vc<FontData>> {\n     let data: FontData = load_next_js_templateon(\n         project_root,\n-        \"dist/compiled/@next/font/dist/google/font-data.json\".into(),\n+        rcstr!(\"dist/compiled/@next/font/dist/google/font-data.json\"),\n     )\n     .await?;\n \n@@ -453,7 +452,7 @@ async fn load_font_data(project_root: ResolvedVc<FileSystemPath>) -> Result<Vc<F\n async fn update_google_stylesheet(\n     stylesheet: Vc<RcStr>,\n     options: Vc<NextFontGoogleOptions>,\n-    scoped_font_family: Vc<RcStr>,\n+    scoped_font_family: RcStr,\n     has_size_adjust: Vc<bool>,\n ) -> Result<Vc<RcStr>> {\n     let options = &*options.await?;\n@@ -462,7 +461,7 @@ async fn update_google_stylesheet(\n     // TODO: Do this more resiliently, e.g. transforming an swc ast\n     let mut stylesheet = stylesheet.await?.replace(\n         &format!(\"font-family: '{}';\", &options.font_family),\n-        &format!(\"font-family: '{}';\", &*scoped_font_family.await?),\n+        &format!(\"font-family: '{scoped_font_family}';\"),\n     );\n \n     let font_files = find_font_files_in_css(\n@@ -541,7 +540,7 @@ async fn get_stylesheet_url_from_options(\n         use turbo_tasks_env::{CommandLineProcessEnv, ProcessEnv};\n \n         let env = CommandLineProcessEnv::new();\n-        if let Some(url) = &*env.read(\"TURBOPACK_TEST_ONLY_MOCK_SERVER\".into()).await? {\n+        if let Some(url) = &*env.read(rcstr!(\"TURBOPACK_TEST_ONLY_MOCK_SERVER\")).await? {\n             css_url = Some(format!(\"{url}/css2\"));\n         }\n     }\n@@ -571,7 +570,7 @@ async fn get_font_css_properties(\n ) -> Result<Vc<FontCssProperties>> {\n     let options = &*options_vc.await?;\n     let scoped_font_family =\n-        &*get_scoped_font_family(FontFamilyType::WebFont.cell(), options_vc.font_family()).await?;\n+        get_scoped_font_family(FontFamilyType::WebFont, options_vc.font_family().await?);\n \n     let mut font_families = vec![format!(\"'{}'\", scoped_font_family.clone()).into()];\n     let font_fallback = &*font_fallback.await?;\n@@ -580,7 +579,7 @@ async fn get_font_css_properties(\n             font_families.extend_from_slice(fonts);\n         }\n         FontFallback::Automatic(fallback) => {\n-            font_families.push(format!(\"'{}'\", *fallback.scoped_font_family.await?).into());\n+            font_families.push(format!(\"'{}'\", fallback.scoped_font_family).into());\n         }\n         FontFallback::Error => {}\n     }\n@@ -642,7 +641,7 @@ fn font_file_options_from_query_map(query: &RcStr) -> Result<NextFontGoogleFontF\n }\n \n async fn fetch_real_stylesheet(\n-    stylesheet_url: Vc<RcStr>,\n+    stylesheet_url: RcStr,\n     css_virtual_path: Vc<FileSystemPath>,\n ) -> Result<Option<Vc<RcStr>>> {\n     let body = fetch_from_google_fonts(stylesheet_url, css_virtual_path).await?;\n@@ -651,12 +650,12 @@ async fn fetch_real_stylesheet(\n }\n \n async fn fetch_from_google_fonts(\n-    url: Vc<RcStr>,\n+    url: RcStr,\n     virtual_path: Vc<FileSystemPath>,\n ) -> Result<Option<Vc<HttpResponseBody>>> {\n     let result = fetch(\n         url,\n-        Vc::cell(Some(USER_AGENT_FOR_GOOGLE_FONTS.into())),\n+        Some(rcstr!(USER_AGENT_FOR_GOOGLE_FONTS)),\n         Vc::cell(None),\n     )\n     .await?;\n@@ -675,13 +674,13 @@ async fn fetch_from_google_fonts(\n }\n \n async fn get_mock_stylesheet(\n-    stylesheet_url: Vc<RcStr>,\n+    stylesheet_url: RcStr,\n     mocked_responses_path: &str,\n     execution_context: Vc<ExecutionContext>,\n ) -> Result<Option<Vc<RcStr>>> {\n     let response_path = Path::new(&mocked_responses_path);\n     let mock_fs = Vc::upcast::<Box<dyn FileSystem>>(DiskFileSystem::new(\n-        \"mock\".into(),\n+        rcstr!(\"mock\"),\n         response_path\n             .parent()\n             .context(\"Must be valid path\")?\n@@ -697,8 +696,8 @@ async fn get_mock_stylesheet(\n         chunking_context,\n     } = *execution_context.await?;\n     let asset_context =\n-        node_evaluate_asset_context(execution_context, None, None, \"next_font\".into(), false);\n-    let loader_path = mock_fs.root().join(\"loader.js\".into());\n+        node_evaluate_asset_context(execution_context, None, None, rcstr!(\"next_font\"), false);\n+    let loader_path = mock_fs.root().join(rcstr!(\"loader.js\"));\n     let mocked_response_asset = asset_context\n         .process(\n             Vc::upcast(VirtualSource::new(\n@@ -741,7 +740,7 @@ async fn get_mock_stylesheet(\n             let val: FxHashMap<RcStr, Option<RcStr>> =\n                 parse_json_with_source_context(val.to_str()?)?;\n             Ok(val\n-                .get(&*stylesheet_url.await?)\n+                .get(&stylesheet_url)\n                 .context(\"url not found\")?\n                 .clone()\n                 .map(Vc::cell))"
        },
        {
            "sha": "80d067e84a8b3ca8a5a52551f6748aa9ae06f5be",
            "filename": "crates/next-core/src/next_font/google/options.rs",
            "status": "modified",
            "additions": 15,
            "deletions": 14,
            "changes": 29,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Foptions.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Foptions.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fgoogle%2Foptions.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,6 @@\n use anyhow::{Context, Result};\n use serde::{Deserialize, Serialize};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     FxIndexMap, FxIndexSet, NonLocalValue, Value, Vc, fxindexset, trace::TraceRawVcs,\n };\n@@ -29,17 +29,18 @@ pub(super) struct NextFontGoogleOptions {\n     pub subsets: Option<Vec<RcStr>>,\n }\n \n+impl NextFontGoogleOptions {\n+    pub async fn font_family(self: Vc<Self>) -> Result<RcStr> {\n+        Ok(self.await?.font_family.clone())\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl NextFontGoogleOptions {\n     #[turbo_tasks::function]\n     pub fn new(options: Value<NextFontGoogleOptions>) -> Vc<NextFontGoogleOptions> {\n         Self::cell(options.into_value())\n     }\n-\n-    #[turbo_tasks::function]\n-    pub fn font_family(&self) -> Vc<RcStr> {\n-        Vc::cell((*self.font_family).into())\n-    }\n }\n \n #[derive(\n@@ -155,7 +156,7 @@ pub(super) fn options_from_request(\n         if font_data.styles.len() == 1 {\n             styles.push(font_data.styles[0].clone());\n         } else {\n-            styles.push(\"normal\".into());\n+            styles.push(rcstr!(\"normal\"));\n         }\n     }\n \n@@ -170,7 +171,7 @@ pub(super) fn options_from_request(\n         }\n     }\n \n-    let display = argument.display.unwrap_or_else(|| \"swap\".into());\n+    let display = argument.display.unwrap_or_else(|| rcstr!(\"swap\"));\n \n     if !ALLOWED_DISPLAY_VALUES.contains(&display.as_str()) {\n         anyhow::bail!(\n@@ -213,7 +214,7 @@ pub(super) fn options_from_request(\n #[cfg(test)]\n mod tests {\n     use anyhow::Result;\n-    use turbo_rcstr::RcStr;\n+    use turbo_rcstr::{RcStr, rcstr};\n     use turbo_tasks::FxIndexMap;\n     use turbo_tasks_fs::json::parse_json_with_source_context;\n \n@@ -280,10 +281,10 @@ mod tests {\n         assert_eq!(\n             options_from_request(&request, &data)?,\n             NextFontGoogleOptions {\n-                font_family: \"ABeeZee\".into(),\n+                font_family: rcstr!(\"ABeeZee\"),\n                 weights: FontWeights::Variable,\n-                styles: vec![\"normal\".into()],\n-                display: \"swap\".into(),\n+                styles: vec![rcstr!(\"normal\")],\n+                display: rcstr!(\"swap\"),\n                 preload: true,\n                 selected_variable_axes: None,\n                 fallback: None,\n@@ -436,7 +437,7 @@ mod tests {\n         )?;\n \n         let options = options_from_request(&request, &data)?;\n-        assert_eq!(options.styles, vec![RcStr::from(\"italic\")]);\n+        assert_eq!(options.styles, vec![rcstr!(\"italic\")]);\n \n         Ok(())\n     }\n@@ -468,7 +469,7 @@ mod tests {\n         )?;\n \n         let options = options_from_request(&request, &data)?;\n-        assert_eq!(options.styles, vec![RcStr::from(\"normal\")]);\n+        assert_eq!(options.styles, vec![rcstr!(\"normal\")]);\n \n         Ok(())\n     }"
        },
        {
            "sha": "37cfb623c1708e2e27dacaa41b272bf648e918e7",
            "filename": "crates/next-core/src/next_font/local/font_fallback.rs",
            "status": "modified",
            "additions": 46,
            "deletions": 42,
            "changes": 88,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Ffont_fallback.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Ffont_fallback.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Ffont_fallback.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -3,6 +3,7 @@ use allsorts::{\n     font_data::{DynamicFontTableProvider, FontData},\n };\n use anyhow::{Context, Result, bail};\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::{FileContent, FileSystemPath};\n \n@@ -38,7 +39,7 @@ pub(super) async fn get_font_fallbacks(\n ) -> Result<Vc<FontFallbackResult>> {\n     let options = &*options_vc.await?;\n     let scoped_font_family =\n-        get_scoped_font_family(FontFamilyType::Fallback.cell(), options_vc.font_family());\n+        get_scoped_font_family(FontFamilyType::Fallback, options_vc.font_family().await?);\n \n     let mut font_fallbacks = vec![];\n     match options.adjust_font_fallback {\n@@ -49,8 +50,8 @@ pub(super) async fn get_font_fallbacks(\n             match adjustment {\n                 FontResult::Ok(adjustment) => font_fallbacks.push(\n                     FontFallback::Automatic(AutomaticFontFallback {\n-                        scoped_font_family: scoped_font_family.to_resolved().await?,\n-                        local_font_family: ResolvedVc::cell(\"Arial\".into()),\n+                        scoped_font_family,\n+                        local_font_family: rcstr!(\"Arial\"),\n                         adjustment: Some(adjustment),\n                     })\n                     .resolved_cell(),\n@@ -67,8 +68,8 @@ pub(super) async fn get_font_fallbacks(\n             match adjustment {\n                 FontResult::Ok(adjustment) => font_fallbacks.push(\n                     FontFallback::Automatic(AutomaticFontFallback {\n-                        scoped_font_family: scoped_font_family.to_resolved().await?,\n-                        local_font_family: ResolvedVc::cell(\"Times New Roman\".into()),\n+                        scoped_font_family,\n+                        local_font_family: rcstr!(\"Times New Roman\"),\n                         adjustment: Some(adjustment),\n                     })\n                     .resolved_cell(),\n@@ -193,7 +194,7 @@ fn pick_font_for_fallback_generation(\n \n                 // Prefer normal style if they have the same weight\n                 if used_font_distance == current_font_distance\n-                    && current_descriptor.style != Some(\"italic\".into())\n+                    && current_descriptor.style != Some(rcstr!(\"italic\"))\n                 {\n                     used_descriptor = current_descriptor;\n                     continue;\n@@ -280,18 +281,18 @@ fn parse_weight_string(weight_str: &str) -> Result<f64> {\n #[cfg(test)]\n mod tests {\n     use anyhow::Result;\n-    use turbo_rcstr::RcStr;\n+    use turbo_rcstr::{RcStr, rcstr};\n \n     use crate::next_font::local::{\n         font_fallback::pick_font_for_fallback_generation,\n         options::{FontDescriptor, FontDescriptors, FontWeight},\n     };\n \n-    fn generate_font_descriptor(weight: &FontWeight, style: &Option<String>) -> FontDescriptor {\n+    fn generate_font_descriptor(weight: &FontWeight, style: Option<RcStr>) -> FontDescriptor {\n         FontDescriptor {\n-            ext: \"ttf\".into(),\n-            path: \"foo.ttf\".into(),\n-            style: style.clone().map(RcStr::from),\n+            ext: rcstr!(\"ttf\"),\n+            path: rcstr!(\"foo.ttf\"),\n+            style,\n             weight: Some(weight.clone()),\n         }\n     }\n@@ -300,34 +301,34 @@ mod tests {\n     fn test_picks_weight_closest_to_400() -> Result<()> {\n         assert_eq!(\n             pick_font_for_fallback_generation(&FontDescriptors::Many(vec![\n-                generate_font_descriptor(&FontWeight::Fixed(\"300\".into()), &None),\n-                generate_font_descriptor(&FontWeight::Fixed(\"600\".into()), &None)\n+                generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"300\")), None),\n+                generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"600\")), None)\n             ]))?,\n-            &generate_font_descriptor(&FontWeight::Fixed(\"300\".into()), &None)\n+            &generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"300\")), None)\n         );\n \n         assert_eq!(\n             pick_font_for_fallback_generation(&FontDescriptors::Many(vec![\n-                generate_font_descriptor(&FontWeight::Fixed(\"200\".into()), &None),\n-                generate_font_descriptor(&FontWeight::Fixed(\"500\".into()), &None)\n+                generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"200\")), None),\n+                generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"500\")), None)\n             ]))?,\n-            &generate_font_descriptor(&FontWeight::Fixed(\"500\".into()), &None)\n+            &generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"500\")), None)\n         );\n \n         assert_eq!(\n             pick_font_for_fallback_generation(&FontDescriptors::Many(vec![\n-                generate_font_descriptor(&FontWeight::Fixed(\"normal\".into()), &None),\n-                generate_font_descriptor(&FontWeight::Fixed(\"700\".into()), &None)\n+                generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"normal\")), None),\n+                generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"700\")), None)\n             ]))?,\n-            &generate_font_descriptor(&FontWeight::Fixed(\"normal\".into()), &None)\n+            &generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"normal\")), None)\n         );\n \n         assert_eq!(\n             pick_font_for_fallback_generation(&FontDescriptors::Many(vec![\n-                generate_font_descriptor(&FontWeight::Fixed(\"bold\".into()), &None),\n-                generate_font_descriptor(&FontWeight::Fixed(\"900\".into()), &None)\n+                generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"bold\")), None),\n+                generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"900\")), None)\n             ]))?,\n-            &generate_font_descriptor(&FontWeight::Fixed(\"bold\".into()), &None)\n+            &generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"bold\")), None)\n         );\n \n         Ok(())\n@@ -337,10 +338,10 @@ mod tests {\n     fn test_picks_thinner_weight_if_same_distance_to_400() -> Result<()> {\n         assert_eq!(\n             pick_font_for_fallback_generation(&FontDescriptors::Many(vec![\n-                generate_font_descriptor(&FontWeight::Fixed(\"300\".into()), &None),\n-                generate_font_descriptor(&FontWeight::Fixed(\"500\".into()), &None)\n+                generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"300\")), None),\n+                generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"500\")), None)\n             ]))?,\n-            &generate_font_descriptor(&FontWeight::Fixed(\"300\".into()), &None)\n+            &generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"300\")), None)\n         );\n \n         Ok(())\n@@ -350,26 +351,26 @@ mod tests {\n     fn test_picks_variable_closest_to_400() -> Result<()> {\n         assert_eq!(\n             pick_font_for_fallback_generation(&FontDescriptors::Many(vec![\n-                generate_font_descriptor(&FontWeight::Variable(\"100\".into(), \"300\".into()), &None),\n-                generate_font_descriptor(&FontWeight::Variable(\"600\".into(), \"900\".into()), &None)\n+                generate_font_descriptor(&FontWeight::Variable(rcstr!(\"100\"), rcstr!(\"300\")), None),\n+                generate_font_descriptor(&FontWeight::Variable(rcstr!(\"600\"), rcstr!(\"900\")), None)\n             ]))?,\n-            &generate_font_descriptor(&FontWeight::Variable(\"100\".into(), \"300\".into()), &None)\n+            &generate_font_descriptor(&FontWeight::Variable(rcstr!(\"100\"), rcstr!(\"300\")), None)\n         );\n \n         assert_eq!(\n             pick_font_for_fallback_generation(&FontDescriptors::Many(vec![\n-                generate_font_descriptor(&FontWeight::Variable(\"100\".into(), \"200\".into()), &None),\n-                generate_font_descriptor(&FontWeight::Variable(\"500\".into(), \"800\".into()), &None)\n+                generate_font_descriptor(&FontWeight::Variable(rcstr!(\"100\"), rcstr!(\"200\")), None),\n+                generate_font_descriptor(&FontWeight::Variable(rcstr!(\"500\"), rcstr!(\"800\")), None)\n             ]))?,\n-            &generate_font_descriptor(&FontWeight::Variable(\"500\".into(), \"800\".into()), &None)\n+            &generate_font_descriptor(&FontWeight::Variable(rcstr!(\"500\"), rcstr!(\"800\")), None)\n         );\n \n         assert_eq!(\n             pick_font_for_fallback_generation(&FontDescriptors::Many(vec![\n-                generate_font_descriptor(&FontWeight::Variable(\"100\".into(), \"900\".into()), &None),\n-                generate_font_descriptor(&FontWeight::Variable(\"300\".into(), \"399\".into()), &None)\n+                generate_font_descriptor(&FontWeight::Variable(rcstr!(\"100\"), rcstr!(\"900\")), None),\n+                generate_font_descriptor(&FontWeight::Variable(rcstr!(\"300\"), rcstr!(\"399\")), None)\n             ]))?,\n-            &generate_font_descriptor(&FontWeight::Variable(\"100\".into(), \"900\".into()), &None)\n+            &generate_font_descriptor(&FontWeight::Variable(rcstr!(\"100\"), rcstr!(\"900\")), None)\n         );\n \n         Ok(())\n@@ -379,10 +380,10 @@ mod tests {\n     fn test_prefer_normal_over_italic() -> Result<()> {\n         assert_eq!(\n             pick_font_for_fallback_generation(&FontDescriptors::Many(vec![\n-                generate_font_descriptor(&FontWeight::Fixed(\"400\".into()), &Some(\"normal\".into())),\n-                generate_font_descriptor(&FontWeight::Fixed(\"400\".into()), &Some(\"italic\".into()))\n+                generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"400\")), Some(rcstr!(\"normal\"))),\n+                generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"400\")), Some(rcstr!(\"italic\")))\n             ]))?,\n-            &generate_font_descriptor(&FontWeight::Fixed(\"400\".into()), &Some(\"normal\".into()))\n+            &generate_font_descriptor(&FontWeight::Fixed(rcstr!(\"400\")), Some(rcstr!(\"normal\")))\n         );\n \n         Ok(())\n@@ -391,10 +392,13 @@ mod tests {\n     #[test]\n     fn test_errors_on_invalid_weight() -> Result<()> {\n         match pick_font_for_fallback_generation(&FontDescriptors::Many(vec![\n-            generate_font_descriptor(&FontWeight::Variable(\"normal\".into(), \"bold\".into()), &None),\n-            generate_font_descriptor(&FontWeight::Variable(\"400\".into(), \"bold\".into()), &None),\n-            generate_font_descriptor(&FontWeight::Variable(\"normal\".into(), \"700\".into()), &None),\n-            generate_font_descriptor(&FontWeight::Variable(\"100\".into(), \"abc\".into()), &None),\n+            generate_font_descriptor(\n+                &FontWeight::Variable(rcstr!(\"normal\"), rcstr!(\"bold\")),\n+                None,\n+            ),\n+            generate_font_descriptor(&FontWeight::Variable(rcstr!(\"400\"), rcstr!(\"bold\")), None),\n+            generate_font_descriptor(&FontWeight::Variable(rcstr!(\"normal\"), rcstr!(\"700\")), None),\n+            generate_font_descriptor(&FontWeight::Variable(rcstr!(\"100\"), rcstr!(\"abc\")), None),\n         ])) {\n             Ok(_) => panic!(),\n             Err(err) => {"
        },
        {
            "sha": "b6cf853f9b0679c9ff7ba9e2c90989cf9d7cc327",
            "filename": "crates/next-core/src/next_font/local/mod.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Fmod.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -2,7 +2,7 @@ use anyhow::{Context, Result, bail};\n use font_fallback::FontFallbackResult;\n use indoc::formatdoc;\n use serde::{Deserialize, Serialize};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Value, Vc};\n use turbo_tasks_fs::{\n     FileContent, FileSystemPath, glob::Glob, json::parse_json_with_source_context,\n@@ -68,9 +68,9 @@ impl NextFontLocalResolvePlugin {\n impl BeforeResolvePlugin for NextFontLocalResolvePlugin {\n     #[turbo_tasks::function]\n     fn before_resolve_condition(&self) -> Vc<BeforeResolvePluginCondition> {\n-        BeforeResolvePluginCondition::from_request_glob(Glob::new(\n-            \"{next,@vercel/turbopack-next/internal}/font/local/*\".into(),\n-        ))\n+        BeforeResolvePluginCondition::from_request_glob(Glob::new(rcstr!(\n+            \"{next,@vercel/turbopack-next/internal}/font/local/*\"\n+        )))\n     }\n \n     #[turbo_tasks::function]\n@@ -163,7 +163,7 @@ impl BeforeResolvePlugin for NextFontLocalResolvePlugin {\n                     lookup_path.join(\n                         format!(\n                             \"{}.js\",\n-                            get_request_id(options_vc.font_family(), request_hash).await?\n+                            get_request_id(options_vc.font_family().await?, request_hash)\n                         )\n                         .into(),\n                     ),\n@@ -182,7 +182,7 @@ impl BeforeResolvePlugin for NextFontLocalResolvePlugin {\n                 let css_virtual_path = lookup_path.join(\n                     format!(\n                         \"/{}.module.css\",\n-                        get_request_id(options.font_family(), request_hash).await?\n+                        get_request_id(options.font_family().await?, request_hash)\n                     )\n                     .into(),\n                 );\n@@ -348,9 +348,9 @@ impl Issue for FontResolvingIssue {\n     async fn title(self: Vc<Self>) -> Result<Vc<StyledString>> {\n         let this = self.await?;\n         Ok(StyledString::Line(vec![\n-            StyledString::Text(\"Font file not found: Can't resolve '\".into()),\n+            StyledString::Text(rcstr!(\"Font file not found: Can't resolve '\")),\n             StyledString::Code(this.font_path.owned().await?),\n-            StyledString::Text(\"'\".into()),\n+            StyledString::Text(rcstr!(\"'\")),\n         ])\n         .cell())\n     }"
        },
        {
            "sha": "59095f32a06ee686e656a12b01571489c0344f14",
            "filename": "crates/next-core/src/next_font/local/options.rs",
            "status": "modified",
            "additions": 32,
            "deletions": 30,
            "changes": 62,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Foptions.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Foptions.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Foptions.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -34,17 +34,18 @@ pub(super) struct NextFontLocalOptions {\n     pub variable_name: RcStr,\n }\n \n+impl NextFontLocalOptions {\n+    pub async fn font_family(self: Vc<Self>) -> Result<RcStr> {\n+        Ok(self.await?.variable_name.clone())\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl NextFontLocalOptions {\n     #[turbo_tasks::function]\n     pub fn new(options: Value<NextFontLocalOptions>) -> Vc<NextFontLocalOptions> {\n         Self::cell(options.into_value())\n     }\n-\n-    #[turbo_tasks::function]\n-    pub fn font_family(&self) -> Vc<RcStr> {\n-        Vc::cell(self.variable_name.clone())\n-    }\n }\n \n /// Describes an individual font file's path, weight, style, etc. Derived from\n@@ -204,6 +205,7 @@ pub(super) fn options_from_request(request: &NextFontLocalRequest) -> Result<Nex\n #[cfg(test)]\n mod tests {\n     use anyhow::Result;\n+    use turbo_rcstr::rcstr;\n     use turbo_tasks_fs::json::parse_json_with_source_context;\n \n     use super::{NextFontLocalOptions, options_from_request};\n@@ -231,19 +233,19 @@ mod tests {\n             options_from_request(&request)?,\n             NextFontLocalOptions {\n                 fonts: FontDescriptors::One(FontDescriptor {\n-                    path: \"./Roboto-Regular.ttf\".into(),\n+                    path: rcstr!(\"./Roboto-Regular.ttf\"),\n                     weight: None,\n                     style: None,\n-                    ext: \"ttf\".into(),\n+                    ext: rcstr!(\"ttf\"),\n                 }),\n                 default_style: None,\n                 default_weight: None,\n-                display: \"swap\".into(),\n+                display: rcstr!(\"swap\"),\n                 preload: true,\n                 fallback: None,\n                 adjust_font_fallback: AdjustFontFallback::Arial,\n                 variable: None,\n-                variable_name: \"myFont\".into()\n+                variable_name: rcstr!(\"myFont\")\n             },\n         );\n \n@@ -279,26 +281,26 @@ mod tests {\n             NextFontLocalOptions {\n                 fonts: FontDescriptors::Many(vec![\n                     FontDescriptor {\n-                        path: \"./Roboto-Regular.ttf\".into(),\n-                        weight: Some(FontWeight::Fixed(\"400\".into())),\n-                        style: Some(\"normal\".into()),\n-                        ext: \"ttf\".into(),\n+                        path: rcstr!(\"./Roboto-Regular.ttf\"),\n+                        weight: Some(FontWeight::Fixed(rcstr!(\"400\"))),\n+                        style: Some(rcstr!(\"normal\")),\n+                        ext: rcstr!(\"ttf\"),\n                     },\n                     FontDescriptor {\n-                        path: \"./Roboto-Italic.ttf\".into(),\n-                        weight: Some(FontWeight::Fixed(\"400\".into())),\n+                        path: rcstr!(\"./Roboto-Italic.ttf\"),\n+                        weight: Some(FontWeight::Fixed(rcstr!(\"400\"))),\n                         style: None,\n-                        ext: \"ttf\".into(),\n+                        ext: rcstr!(\"ttf\"),\n                     }\n                 ]),\n-                default_weight: Some(FontWeight::Fixed(\"300\".into())),\n-                default_style: Some(\"italic\".into()),\n-                display: \"swap\".into(),\n+                default_weight: Some(FontWeight::Fixed(rcstr!(\"300\"))),\n+                default_style: Some(rcstr!(\"italic\")),\n+                display: rcstr!(\"swap\"),\n                 preload: true,\n                 fallback: None,\n                 adjust_font_fallback: AdjustFontFallback::Arial,\n                 variable: None,\n-                variable_name: \"myFont\".into()\n+                variable_name: rcstr!(\"myFont\")\n             },\n         );\n \n@@ -360,19 +362,19 @@ mod tests {\n             options_from_request(&request)?,\n             NextFontLocalOptions {\n                 fonts: FontDescriptors::One(FontDescriptor {\n-                    path: \"./Roboto-Regular.woff\".into(),\n-                    weight: Some(FontWeight::Fixed(\"500\".into())),\n-                    style: Some(\"italic\".into()),\n-                    ext: \"woff\".into(),\n+                    path: rcstr!(\"./Roboto-Regular.woff\"),\n+                    weight: Some(FontWeight::Fixed(rcstr!(\"500\"))),\n+                    style: Some(rcstr!(\"italic\")),\n+                    ext: rcstr!(\"woff\"),\n                 }),\n-                default_style: Some(\"italic\".into()),\n-                default_weight: Some(FontWeight::Fixed(\"500\".into())),\n-                display: \"optional\".into(),\n+                default_style: Some(rcstr!(\"italic\")),\n+                default_weight: Some(FontWeight::Fixed(rcstr!(\"500\"))),\n+                display: rcstr!(\"optional\"),\n                 preload: false,\n-                fallback: Some(vec![\"Fallback\".into()]),\n+                fallback: Some(vec![rcstr!(\"Fallback\")]),\n                 adjust_font_fallback: AdjustFontFallback::TimesNewRoman,\n-                variable: Some(\"myvar\".into()),\n-                variable_name: \"myFont\".into()\n+                variable: Some(rcstr!(\"myvar\")),\n+                variable_name: rcstr!(\"myFont\")\n             },\n         );\n "
        },
        {
            "sha": "18661ff9de9f539d212c424e34baa59a5650b815",
            "filename": "crates/next-core/src/next_font/local/stylesheet.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Fstylesheet.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Fstylesheet.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Fstylesheet.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -18,7 +18,7 @@ pub(super) async fn build_stylesheet(\n     css_properties: Vc<FontCssProperties>,\n ) -> Result<Vc<RcStr>> {\n     let scoped_font_family =\n-        get_scoped_font_family(FontFamilyType::WebFont.cell(), options.font_family());\n+        get_scoped_font_family(FontFamilyType::WebFont, options.font_family().await?);\n \n     Ok(Vc::cell(\n         formatdoc!(\n@@ -39,7 +39,7 @@ pub(super) async fn build_stylesheet(\n /// Builds a string of `@font-face` definitions for each local font file\n #[turbo_tasks::function]\n pub(super) async fn build_font_face_definitions(\n-    scoped_font_family: Vc<RcStr>,\n+    scoped_font_family: RcStr,\n     options: Vc<NextFontLocalOptions>,\n     has_size_adjust: Vc<bool>,\n ) -> Result<Vc<RcStr>> {\n@@ -70,7 +70,7 @@ pub(super) async fn build_font_face_definitions(\n                     {}{}\n                 }}\n             \"#,\n-            *scoped_font_family.await?,\n+            scoped_font_family,\n             query_str,\n             ext_to_format(&font.ext)?,\n             options.display,"
        },
        {
            "sha": "50a6d0972c0f842c3af4e479a78c99566ae6ad5d",
            "filename": "crates/next-core/src/next_font/local/util.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Futil.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Futil.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_font%2Flocal%2Futil.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -17,15 +17,15 @@ pub(super) async fn build_font_family_string(\n     let mut font_families = vec![\n         format!(\n             \"'{}'\",\n-            *get_scoped_font_family(FontFamilyType::WebFont.cell(), options.font_family(),).await?\n+            get_scoped_font_family(FontFamilyType::WebFont, options.font_family().await?)\n         )\n         .into(),\n     ];\n \n     for font_fallback in &*font_fallbacks.await? {\n         match &*font_fallback.await? {\n             FontFallback::Automatic(fallback) => {\n-                font_families.push(format!(\"'{}'\", *fallback.scoped_font_family.await?).into());\n+                font_families.push(format!(\"'{}'\", fallback.scoped_font_family).into());\n             }\n             FontFallback::Manual(fallbacks) => {\n                 font_families.extend_from_slice(fallbacks);"
        },
        {
            "sha": "149da57f5c4ec95f119e07804e7e91d7a3cd286a",
            "filename": "crates/next-core/src/next_font/stylesheet.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fstylesheet.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fstylesheet.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_font%2Fstylesheet.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -38,8 +38,8 @@ pub(crate) async fn build_fallback_definition(fallbacks: Vc<FontFallbacks>) -> R\n                     {}\n                 }}\n             \"#,\n-                fallback.scoped_font_family.await?,\n-                fallback.local_font_family.await?,\n+                fallback.scoped_font_family,\n+                fallback.local_font_family,\n                 override_properties\n             ));\n         }"
        },
        {
            "sha": "9e95f5f5b198f0edac7c745b8079200bbf6f99c8",
            "filename": "crates/next-core/src/next_font/util.rs",
            "status": "modified",
            "additions": 17,
            "deletions": 27,
            "changes": 44,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Futil.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_font%2Futil.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_font%2Futil.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,6 @@\n use anyhow::{Context, Result};\n use serde::Deserialize;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::{FileSystemPath, json::parse_json_with_source_context};\n use turbo_tasks_hash::hash_xxh3_hash64;\n@@ -46,31 +46,21 @@ pub(crate) enum FontFamilyType {\n ///   e.g. `__Roboto_Fallback_c123b8`\n /// * `font_family_name` - The font name to scope, e.g. `Roboto`\n /// * `request_hash` - The hash value of the font request\n-#[turbo_tasks::function]\n-pub(crate) async fn get_scoped_font_family(\n-    ty: Vc<FontFamilyType>,\n-    font_family_name: Vc<RcStr>,\n-) -> Result<Vc<RcStr>> {\n-    let font_family_base = font_family_name.await?.to_string();\n-    let font_family_name = match &*ty.await? {\n-        FontFamilyType::WebFont => font_family_base,\n-        FontFamilyType::Fallback => format!(\"{font_family_base} Fallback\"),\n-    };\n-\n-    Ok(Vc::cell(font_family_name.into()))\n+pub(crate) fn get_scoped_font_family(ty: FontFamilyType, font_family_name: RcStr) -> RcStr {\n+    match ty {\n+        FontFamilyType::WebFont => font_family_name,\n+        FontFamilyType::Fallback => format!(\"{font_family_name} Fallback\").into(),\n+    }\n }\n \n-/// Returns a [Vc] for [String] uniquely identifying the request for the font.\n-#[turbo_tasks::function]\n-pub async fn get_request_id(font_family: Vc<RcStr>, request_hash: u32) -> Result<Vc<RcStr>> {\n-    Ok(Vc::cell(\n-        format!(\n-            \"{}_{:x?}\",\n-            font_family.await?.to_lowercase().replace(' ', \"_\"),\n-            request_hash\n-        )\n-        .into(),\n-    ))\n+/// Returns a [RcStr] for [String] uniquely identifying the request for the font.\n+pub fn get_request_id(font_family: RcStr, request_hash: u32) -> RcStr {\n+    format!(\n+        \"{}_{:x?}\",\n+        font_family.to_lowercase().replace(' ', \"_\"),\n+        request_hash\n+    )\n+    .into()\n }\n \n #[derive(Debug, Deserialize)]\n@@ -98,12 +88,12 @@ pub(crate) async fn can_use_next_font(\n         NextFontIssue {\n             path: path.to_resolved().await?,\n             title: StyledString::Line(vec![\n-                StyledString::Code(\"next/font:\".into()),\n-                StyledString::Text(\" error:\".into()),\n+                StyledString::Code(rcstr!(\"next/font:\")),\n+                StyledString::Text(rcstr!(\" error:\")),\n             ])\n             .resolved_cell(),\n             description: StyledString::Line(vec![\n-                StyledString::Text(\"Cannot be used within \".into()),\n+                StyledString::Text(rcstr!(\"Cannot be used within \")),\n                 StyledString::Code(request.path),\n             ])\n             .resolved_cell(),"
        },
        {
            "sha": "a83b90fed89698415007bd4ebab4484b9666ffc9",
            "filename": "crates/next-core/src/next_import_map.rs",
            "status": "modified",
            "additions": 11,
            "deletions": 11,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_import_map.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_import_map.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_import_map.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -2,7 +2,7 @@ use std::collections::BTreeMap;\n \n use anyhow::{Context, Result};\n use rustc_hash::FxHashMap;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{FxIndexMap, ResolvedVc, Value, Vc, fxindexmap};\n use turbo_tasks_fs::{FileSystem, FileSystemPath};\n use turbopack_core::{\n@@ -333,7 +333,7 @@ pub async fn get_next_server_import_map(\n             import_map.insert_exact_alias(\n                 \"styled-jsx/style\",\n                 ImportMapping::External(\n-                    Some(\"styled-jsx/style.js\".into()),\n+                    Some(rcstr!(\"styled-jsx/style.js\")),\n                     ExternalType::CommonJs,\n                     ExternalTraced::Traced,\n                 )\n@@ -456,7 +456,7 @@ pub async fn get_next_edge_import_map(\n     .await?;\n \n     let ty = ty.into_value();\n-    match ty {\n+    match &ty {\n         ServerContextType::Pages { .. }\n         | ServerContextType::PagesData { .. }\n         | ServerContextType::PagesApi { .. }\n@@ -486,7 +486,7 @@ pub async fn get_next_edge_import_map(\n     insert_next_server_special_aliases(\n         &mut import_map,\n         project_path,\n-        ty,\n+        ty.clone(),\n         NextRuntime::Edge,\n         next_config,\n     )\n@@ -607,14 +607,14 @@ async fn insert_next_server_special_aliases(\n         .resolved_cell(),\n     );\n \n-    match ty {\n+    match &ty {\n         ServerContextType::Pages { .. } | ServerContextType::PagesApi { .. } => {}\n         ServerContextType::PagesData { .. } => {}\n         // the logic closely follows the one in createRSCAliases in webpack-config.ts\n         ServerContextType::AppSSR { app_dir }\n         | ServerContextType::AppRSC { app_dir, .. }\n         | ServerContextType::AppRoute { app_dir, .. } => {\n-            let next_package = get_next_package(*app_dir).to_resolved().await?;\n+            let next_package = get_next_package(**app_dir).to_resolved().await?;\n             import_map.insert_exact_alias(\n                 \"styled-jsx\",\n                 request_to_import_mapping(next_package, \"styled-jsx\"),\n@@ -624,10 +624,10 @@ async fn insert_next_server_special_aliases(\n                 request_to_import_mapping(next_package, \"styled-jsx/*\"),\n             );\n \n-            rsc_aliases(import_map, project_path, ty, runtime, next_config).await?;\n+            rsc_aliases(import_map, project_path, ty.clone(), runtime, next_config).await?;\n         }\n         ServerContextType::Middleware { .. } | ServerContextType::Instrumentation { .. } => {\n-            rsc_aliases(import_map, project_path, ty, runtime, next_config).await?;\n+            rsc_aliases(import_map, project_path, ty.clone(), runtime, next_config).await?;\n         }\n     }\n \n@@ -636,7 +636,7 @@ async fn insert_next_server_special_aliases(\n     // context, it'll resolve to the noop where it's allowed, or aliased into\n     // the error which throws a runtime error. This works with in combination of\n     // build-time error as well, refer https://github.com/vercel/next.js/blob/0060de1c4905593ea875fa7250d4b5d5ce10897d/packages/next-swc/crates/next-core/src/next_server/context.rs#L103\n-    match ty {\n+    match &ty {\n         ServerContextType::Pages { .. } => {\n             insert_exact_alias_map(\n                 import_map,\n@@ -1014,7 +1014,7 @@ pub async fn get_next_package(context_directory: Vc<FileSystemPath>) -> Result<V\n     let result = resolve(\n         context_directory,\n         Value::new(ReferenceType::CommonJs(CommonJsReferenceSubType::Undefined)),\n-        Request::parse(Value::new(Pattern::Constant(\"next/package.json\".into()))),\n+        Request::parse(Value::new(Pattern::Constant(rcstr!(\"next/package.json\")))),\n         node_cjs_resolve_options(context_directory.root()),\n     );\n     let source = result\n@@ -1113,7 +1113,7 @@ fn insert_package_alias(\n ) {\n     import_map.insert_wildcard_alias(\n         prefix,\n-        ImportMapping::PrimaryAlternative(\"./*\".into(), Some(package_root)).resolved_cell(),\n+        ImportMapping::PrimaryAlternative(rcstr!(\"./*\"), Some(package_root)).resolved_cell(),\n     );\n }\n "
        },
        {
            "sha": "de4c80ffc95fc800c7010a3e843f1b5020904aed",
            "filename": "crates/next-core/src/next_pages/page_entry.rs",
            "status": "modified",
            "additions": 20,
            "deletions": 20,
            "changes": 40,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_pages%2Fpage_entry.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_pages%2Fpage_entry.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_pages%2Fpage_entry.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -2,7 +2,7 @@ use std::io::Write;\n \n use anyhow::{Result, bail};\n use serde::Serialize;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{FxIndexMap, ResolvedVc, Value, Vc, fxindexmap};\n use turbo_tasks_fs::{File, FileSystemPath, rope::RopeBuilder};\n use turbopack_core::{\n@@ -32,18 +32,18 @@ pub struct PageSsrEntryModule {\n \n #[turbo_tasks::function]\n pub async fn create_page_ssr_entry_module(\n-    pathname: Vc<RcStr>,\n+    pathname: RcStr,\n     reference_type: Value<ReferenceType>,\n     project_root: Vc<FileSystemPath>,\n     ssr_module_context: Vc<Box<dyn AssetContext>>,\n     source: Vc<Box<dyn Source>>,\n-    next_original_name: Vc<RcStr>,\n+    next_original_name: RcStr,\n     pages_structure: Vc<PagesStructure>,\n     runtime: NextRuntime,\n     next_config: Vc<NextConfig>,\n ) -> Result<Vc<PageSsrEntryModule>> {\n-    let definition_page = &*next_original_name.await?;\n-    let definition_pathname = &*pathname.await?;\n+    let definition_page = next_original_name;\n+    let definition_pathname = pathname;\n \n     let ssr_module = ssr_module_context\n         .process(source, reference_type.clone())\n@@ -69,20 +69,20 @@ pub async fn create_page_ssr_entry_module(\n         _ => bail!(\"Invalid path type\"),\n     };\n \n-    const INNER: &str = \"INNER_PAGE\";\n+    let inner = rcstr!(\"INNER_PAGE\");\n \n-    const INNER_DOCUMENT: &str = \"INNER_DOCUMENT\";\n-    const INNER_APP: &str = \"INNER_APP\";\n+    let inner_document = rcstr!(\"INNER_DOCUMENT\");\n+    let inner_app = rcstr!(\"INNER_APP\");\n \n     let mut replacements = fxindexmap! {\n         \"VAR_DEFINITION_PAGE\" => definition_page.clone(),\n         \"VAR_DEFINITION_PATHNAME\" => definition_pathname.clone(),\n-        \"VAR_USERLAND\" => INNER.into(),\n+        \"VAR_USERLAND\" => inner.clone(),\n     };\n \n     if reference_type == ReferenceType::Entry(EntryReferenceSubType::Page) {\n-        replacements.insert(\"VAR_MODULE_DOCUMENT\", INNER_DOCUMENT.into());\n-        replacements.insert(\"VAR_MODULE_APP\", INNER_APP.into());\n+        replacements.insert(\"VAR_MODULE_DOCUMENT\", inner_document.clone());\n+        replacements.insert(\"VAR_MODULE_APP\", inner_app.clone());\n     }\n \n     // Load the file from the next.js codebase.\n@@ -99,7 +99,7 @@ pub async fn create_page_ssr_entry_module(\n     // instrumentation file conflicts with a page also labeled\n     // /instrumentation) hoist the `register` method.\n     if reference_type == ReferenceType::Entry(EntryReferenceSubType::Page)\n-        && (*definition_page == \"/instrumentation\" || *definition_page == \"/src/instrumentation\")\n+        && (definition_page == \"/instrumentation\" || definition_page == \"/src/instrumentation\")\n     {\n         let file = &*file_content_rope(source.content().file_content()).await?;\n \n@@ -120,7 +120,7 @@ pub async fn create_page_ssr_entry_module(\n     }\n \n     let mut inner_assets = fxindexmap! {\n-        INNER.into() => ssr_module,\n+        inner => ssr_module,\n     };\n \n     let pages_structure_ref = pages_structure.await?;\n@@ -141,8 +141,8 @@ pub async fn create_page_ssr_entry_module(\n             )\n             .to_resolved()\n             .await?;\n-            inner_assets.insert(INNER_DOCUMENT.into(), document_module);\n-            inner_assets.insert(INNER_APP.into(), app_module);\n+            inner_assets.insert(inner_document, document_module);\n+            inner_assets.insert(inner_app, app_module);\n             (Some(app_module), Some(document_module))\n         } else {\n             (None, None)\n@@ -244,8 +244,8 @@ async fn wrap_edge_page(\n             \"nextConfig\" => serde_json::to_string(next_config_val)?.into(),\n             \"dev\" => serde_json::Value::Bool(dev).to_string().into(),\n             \"pageRouteModuleOptions\" => serde_json::to_string(&get_route_module_options(page.clone(), pathname.clone()))?.into(),\n-            \"errorRouteModuleOptions\" => serde_json::to_string(&get_route_module_options(\"/_error\".into(), \"/_error\".into()))?.into(),\n-            \"user500RouteModuleOptions\" => serde_json::to_string(&get_route_module_options(\"/500\".into(), \"/500\".into()))?.into(),\n+            \"errorRouteModuleOptions\" => serde_json::to_string(&get_route_module_options(rcstr!(\"/_error\"), rcstr!(\"/_error\")))?.into(),\n+            \"user500RouteModuleOptions\" => serde_json::to_string(&get_route_module_options(rcstr!(\"/500\"), rcstr!(\"/500\")))?.into(),\n         },\n         fxindexmap! {\n             // TODO\n@@ -322,12 +322,12 @@ struct RouteDefinition {\n fn get_route_module_options(page: RcStr, pathname: RcStr) -> PartialRouteModuleOptions {\n     PartialRouteModuleOptions {\n         definition: RouteDefinition {\n-            kind: \"PAGES\".into(),\n+            kind: rcstr!(\"PAGES\"),\n             page,\n             pathname,\n             // The following aren't used in production.\n-            bundle_path: \"\".into(),\n-            filename: \"\".into(),\n+            bundle_path: rcstr!(\"\"),\n+            filename: rcstr!(\"\"),\n         },\n     }\n }"
        },
        {
            "sha": "d1ac537c07748f6b5e4bbd48973249b6ca8c9f3a",
            "filename": "crates/next-core/src/next_server/context.rs",
            "status": "modified",
            "additions": 36,
            "deletions": 25,
            "changes": 61,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fcontext.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fcontext.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_server%2Fcontext.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,7 +1,7 @@\n use std::iter::once;\n \n use anyhow::{Result, bail};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{FxIndexMap, OptionVcExt, ResolvedVc, Value, Vc};\n use turbo_tasks_env::{EnvMap, ProcessEnv};\n use turbo_tasks_fs::FileSystemPath;\n@@ -79,7 +79,7 @@ use crate::{\n };\n \n #[turbo_tasks::value(shared, serialization = \"auto_for_input\")]\n-#[derive(Debug, Copy, Clone, Hash)]\n+#[derive(Debug, Clone, Hash)]\n pub enum ServerContextType {\n     Pages {\n         pages_dir: ResolvedVc<FileSystemPath>,\n@@ -95,20 +95,20 @@ pub enum ServerContextType {\n     },\n     AppRSC {\n         app_dir: ResolvedVc<FileSystemPath>,\n-        ecmascript_client_reference_transition_name: Option<ResolvedVc<RcStr>>,\n+        ecmascript_client_reference_transition_name: Option<RcStr>,\n         client_transition: Option<ResolvedVc<Box<dyn Transition>>>,\n     },\n     AppRoute {\n         app_dir: ResolvedVc<FileSystemPath>,\n-        ecmascript_client_reference_transition_name: Option<ResolvedVc<RcStr>>,\n+        ecmascript_client_reference_transition_name: Option<RcStr>,\n     },\n     Middleware {\n         app_dir: Option<ResolvedVc<FileSystemPath>>,\n-        ecmascript_client_reference_transition_name: Option<ResolvedVc<RcStr>>,\n+        ecmascript_client_reference_transition_name: Option<RcStr>,\n     },\n     Instrumentation {\n         app_dir: Option<ResolvedVc<FileSystemPath>>,\n-        ecmascript_client_reference_transition_name: Option<ResolvedVc<RcStr>>,\n+        ecmascript_client_reference_transition_name: Option<RcStr>,\n     },\n }\n \n@@ -133,10 +133,15 @@ pub async fn get_server_resolve_options_context(\n     next_config: Vc<NextConfig>,\n     execution_context: Vc<ExecutionContext>,\n ) -> Result<Vc<ResolveOptionsContext>> {\n-    let next_server_import_map =\n-        get_next_server_import_map(*project_path, ty, next_config, mode, execution_context)\n-            .to_resolved()\n-            .await?;\n+    let next_server_import_map = get_next_server_import_map(\n+        *project_path,\n+        ty.clone(),\n+        next_config,\n+        mode,\n+        execution_context,\n+    )\n+    .to_resolved()\n+    .await?;\n     let foreign_code_context_condition =\n         foreign_code_context_condition(next_config, project_path).await?;\n     let root_dir = project_path.root().to_resolved().await?;\n@@ -154,7 +159,7 @@ pub async fn get_server_resolve_options_context(\n     // Always load these predefined packages as external.\n     let mut external_packages: Vec<RcStr> = load_next_js_templateon(\n         project_path,\n-        \"dist/lib/server-external-packages.json\".into(),\n+        rcstr!(\"dist/lib/server-external-packages.json\"),\n     )\n     .await?;\n \n@@ -209,7 +214,7 @@ pub async fn get_server_resolve_options_context(\n     );\n \n     if ty.supports_react_server() {\n-        custom_conditions.push(\"react-server\".into());\n+        custom_conditions.push(rcstr!(\"react-server\"));\n     };\n \n     let external_cjs_modules_plugin = if *next_config.bundle_pages_router_dependencies().await? {\n@@ -229,11 +234,11 @@ pub async fn get_server_resolve_options_context(\n         .to_resolved()\n         .await?;\n     let next_node_shared_runtime_plugin =\n-        NextNodeSharedRuntimeResolvePlugin::new(*project_path, Value::new(ty))\n+        NextNodeSharedRuntimeResolvePlugin::new(*project_path, Value::new(ty.clone()))\n             .to_resolved()\n             .await?;\n \n-    let mut before_resolve_plugins = match ty {\n+    let mut before_resolve_plugins = match &ty {\n         ServerContextType::Pages { .. }\n         | ServerContextType::AppSSR { .. }\n         | ServerContextType::AppRSC { .. } => {\n@@ -415,7 +420,7 @@ pub async fn get_server_module_options_context(\n     let next_mode = mode.await?;\n     let mut next_server_rules = get_next_server_transforms_rules(\n         next_config,\n-        ty.into_value(),\n+        ty.clone().into_value(),\n         mode,\n         false,\n         next_runtime,\n@@ -424,15 +429,15 @@ pub async fn get_server_module_options_context(\n     .await?;\n     let mut foreign_next_server_rules = get_next_server_transforms_rules(\n         next_config,\n-        ty.into_value(),\n+        ty.clone().into_value(),\n         mode,\n         true,\n         next_runtime,\n         encryption_key,\n     )\n     .await?;\n     let mut internal_custom_rules = get_next_server_internal_transforms_rules(\n-        ty.into_value(),\n+        ty.clone().into_value(),\n         next_config.mdx_rs().await?.is_some(),\n     )\n     .await?;\n@@ -478,7 +483,7 @@ pub async fn get_server_module_options_context(\n         conditions\n             .iter()\n             .cloned()\n-            .chain(once(\"foreign\".into()))\n+            .chain(once(rcstr!(\"foreign\")))\n             .collect(),\n     )\n     .await?;\n@@ -983,9 +988,9 @@ pub async fn get_server_chunking_context_with_client_assets(\n     mode: Vc<NextMode>,\n     root_path: ResolvedVc<FileSystemPath>,\n     node_root: ResolvedVc<FileSystemPath>,\n-    node_root_to_root_path: ResolvedVc<RcStr>,\n+    node_root_to_root_path: RcStr,\n     client_root: ResolvedVc<FileSystemPath>,\n-    asset_prefix: ResolvedVc<Option<RcStr>>,\n+    asset_prefix: Option<RcStr>,\n     environment: ResolvedVc<Environment>,\n     module_id_strategy: ResolvedVc<Box<dyn ModuleIdStrategy>>,\n     turbo_minify: Vc<bool>,\n@@ -1002,11 +1007,11 @@ pub async fn get_server_chunking_context_with_client_assets(\n         node_root_to_root_path,\n         client_root,\n         node_root\n-            .join(\"server/chunks/ssr\".into())\n+            .join(rcstr!(\"server/chunks/ssr\"))\n             .to_resolved()\n             .await?,\n         client_root\n-            .join(\"static/media\".into())\n+            .join(rcstr!(\"static/media\"))\n             .to_resolved()\n             .await?,\n         environment,\n@@ -1058,7 +1063,7 @@ pub async fn get_server_chunking_context(\n     mode: Vc<NextMode>,\n     root_path: ResolvedVc<FileSystemPath>,\n     node_root: ResolvedVc<FileSystemPath>,\n-    node_root_to_root_path: ResolvedVc<RcStr>,\n+    node_root_to_root_path: RcStr,\n     environment: ResolvedVc<Environment>,\n     module_id_strategy: ResolvedVc<Box<dyn ModuleIdStrategy>>,\n     turbo_minify: Vc<bool>,\n@@ -1074,8 +1079,14 @@ pub async fn get_server_chunking_context(\n         node_root,\n         node_root_to_root_path,\n         node_root,\n-        node_root.join(\"server/chunks\".into()).to_resolved().await?,\n-        node_root.join(\"server/assets\".into()).to_resolved().await?,\n+        node_root\n+            .join(rcstr!(\"server/chunks\"))\n+            .to_resolved()\n+            .await?,\n+        node_root\n+            .join(rcstr!(\"server/assets\"))\n+            .to_resolved()\n+            .await?,\n         environment,\n         next_mode.runtime_type(),\n     )"
        },
        {
            "sha": "163cbe1b629b0d8c7eef14e33cbe21f1cf03d404",
            "filename": "crates/next-core/src/next_server/transforms.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_server%2Ftransforms.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_server%2Ftransforms.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_server%2Ftransforms.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -86,7 +86,7 @@ pub async fn get_next_server_transforms_rules(\n     if !foreign_code {\n         rules.push(get_next_page_static_info_assert_rule(\n             mdx_rs,\n-            Some(context_ty),\n+            Some(context_ty.clone()),\n             None,\n         ));\n     }\n@@ -95,7 +95,7 @@ pub async fn get_next_server_transforms_rules(\n     let cache_kinds = next_config.cache_kinds().to_resolved().await?;\n     let mut is_app_dir = false;\n \n-    let is_server_components = match context_ty {\n+    let is_server_components = match &context_ty {\n         ServerContextType::Pages { pages_dir } | ServerContextType::PagesApi { pages_dir } => {\n             if !foreign_code {\n                 rules.push(get_next_disallow_export_all_in_page_rule(\n@@ -109,7 +109,7 @@ pub async fn get_next_server_transforms_rules(\n             if !foreign_code {\n                 rules.push(\n                     get_next_pages_transforms_rule(\n-                        *pages_dir,\n+                        **pages_dir,\n                         ExportFilter::StripDefaultExport,\n                         mdx_rs,\n                     )"
        },
        {
            "sha": "872f031bc614002bec5a42599175658fca2cd5b2",
            "filename": "crates/next-core/src/next_telemetry.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_telemetry.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fnext_telemetry.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_telemetry.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,4 +1,4 @@\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{Vc, fxindexmap};\n use turbopack_core::diagnostics::{Diagnostic, DiagnosticPayload};\n \n@@ -17,7 +17,7 @@ pub struct NextFeatureTelemetry {\n impl NextFeatureTelemetry {\n     pub fn new(feature_name: RcStr, enabled: bool) -> Self {\n         NextFeatureTelemetry {\n-            event_name: \"EVENT_BUILD_FEATURE_USAGE\".into(),\n+            event_name: rcstr!(\"EVENT_BUILD_FEATURE_USAGE\"),\n             feature_name,\n             enabled,\n         }\n@@ -28,7 +28,7 @@ impl NextFeatureTelemetry {\n impl Diagnostic for NextFeatureTelemetry {\n     #[turbo_tasks::function]\n     fn category(&self) -> Vc<RcStr> {\n-        Vc::cell(\"NextFeatureTelemetry_category_tbd\".into())\n+        Vc::cell(rcstr!(\"NextFeatureTelemetry_category_tbd\"))\n     }\n \n     #[turbo_tasks::function]\n@@ -57,7 +57,7 @@ pub struct ModuleFeatureTelemetry {\n impl ModuleFeatureTelemetry {\n     pub fn new(feature_name: RcStr, invocation_count: usize) -> Self {\n         ModuleFeatureTelemetry {\n-            event_name: \"EVENT_BUILD_FEATURE_USAGE\".into(),\n+            event_name: rcstr!(\"EVENT_BUILD_FEATURE_USAGE\"),\n             feature_name,\n             invocation_count,\n         }\n@@ -68,7 +68,7 @@ impl ModuleFeatureTelemetry {\n impl Diagnostic for ModuleFeatureTelemetry {\n     #[turbo_tasks::function]\n     fn category(&self) -> Vc<RcStr> {\n-        Vc::cell(\"ModuleFeatureTelemetry_category_tbd\".into())\n+        Vc::cell(rcstr!(\"ModuleFeatureTelemetry_category_tbd\"))\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "9fd9dd6bcd4e068c315f48eb029cd477da3590e8",
            "filename": "crates/next-core/src/page_loader.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 18,
            "changes": 27,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fpage_loader.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-core%2Fsrc%2Fpage_loader.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fpage_loader.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,7 +1,7 @@\n use std::io::Write;\n \n use anyhow::{Result, bail};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, Value, Vc, fxindexmap};\n use turbo_tasks_fs::{\n     self, File, FileContent, FileSystemPath, FileSystemPathOption, rope::RopeBuilder,\n@@ -25,16 +25,12 @@ use crate::{embed_js::next_js_file_path, util::get_asset_path_from_pathname};\n pub async fn create_page_loader_entry_module(\n     client_context: Vc<Box<dyn AssetContext>>,\n     entry_asset: Vc<Box<dyn Source>>,\n-    pathname: Vc<RcStr>,\n+    pathname: RcStr,\n ) -> Result<Vc<Box<dyn Module>>> {\n     let mut result = RopeBuilder::default();\n-    writeln!(\n-        result,\n-        \"const PAGE_PATH = {};\\n\",\n-        StringifyJs(&*pathname.await?)\n-    )?;\n+    writeln!(result, \"const PAGE_PATH = {};\\n\", StringifyJs(&pathname))?;\n \n-    let page_loader_path = next_js_file_path(\"entry/page-loader.ts\".into());\n+    let page_loader_path = next_js_file_path(rcstr!(\"entry/page-loader.ts\"));\n     let base_code = page_loader_path.read();\n     if let FileContent::Content(base_file) = &*base_code.await? {\n         result += base_file.content()\n@@ -62,7 +58,7 @@ pub async fn create_page_loader_entry_module(\n         .process(\n             virtual_source,\n             Value::new(ReferenceType::Internal(ResolvedVc::cell(fxindexmap! {\n-                \"PAGE\".into() => module,\n+                rcstr!(\"PAGE\") => module,\n             }))),\n         )\n         .module();\n@@ -72,7 +68,7 @@ pub async fn create_page_loader_entry_module(\n #[turbo_tasks::value(shared)]\n pub struct PageLoaderAsset {\n     pub server_root: ResolvedVc<FileSystemPath>,\n-    pub pathname: ResolvedVc<RcStr>,\n+    pub pathname: RcStr,\n     pub rebase_prefix_path: ResolvedVc<FileSystemPathOption>,\n     pub page_chunks: ResolvedVc<OutputAssets>,\n }\n@@ -82,7 +78,7 @@ impl PageLoaderAsset {\n     #[turbo_tasks::function]\n     pub fn new(\n         server_root: ResolvedVc<FileSystemPath>,\n-        pathname: ResolvedVc<RcStr>,\n+        pathname: RcStr,\n         rebase_prefix_path: ResolvedVc<FileSystemPathOption>,\n         page_chunks: ResolvedVc<OutputAssets>,\n     ) -> Vc<Self> {\n@@ -125,11 +121,6 @@ impl PageLoaderAsset {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn page_loader_chunk_reference_description() -> Vc<RcStr> {\n-    Vc::cell(\"page loader chunk\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl OutputAsset for PageLoaderAsset {\n     #[turbo_tasks::function]\n@@ -141,7 +132,7 @@ impl OutputAsset for PageLoaderAsset {\n         Ok(root.join(\n             format!(\n                 \"static/chunks/pages{}\",\n-                get_asset_path_from_pathname(&self.pathname.await?, \".js\")\n+                get_asset_path_from_pathname(&self.pathname, \".js\")\n             )\n             .into(),\n         ))\n@@ -181,7 +172,7 @@ impl Asset for PageLoaderAsset {\n \n         let content = format!(\n             \"__turbopack_load_page_chunks__({}, {:#})\\n\",\n-            StringifyJs(&this.pathname.await?),\n+            StringifyJs(&this.pathname),\n             StringifyJs(&chunks_data)\n         );\n "
        },
        {
            "sha": "e208ffa37d58977ab6c8e04acb1c04cc82daf62a",
            "filename": "crates/next-custom-transforms/src/transforms/server_actions.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fserver_actions.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fserver_actions.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-custom-transforms%2Fsrc%2Ftransforms%2Fserver_actions.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -32,7 +32,7 @@ use swc_core::{\n     },\n     quote,\n };\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{rcstr, RcStr};\n \n use crate::FxIndexMap;\n \n@@ -2778,7 +2778,7 @@ impl DirectiveVisitor<'_> {\n \n                         if value == \"use cache\" {\n                             self.directive = Some(Directive::UseCache {\n-                                cache_kind: RcStr::from(\"default\"),\n+                                cache_kind: rcstr!(\"default\"),\n                             });\n                             self.increment_cache_usage_counter(\"default\");\n                         } else {"
        },
        {
            "sha": "687ff6d86b1edb71eb78670783920322e9300760",
            "filename": "turbopack/crates/turbo-rcstr/src/lib.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbo-rcstr%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbo-rcstr%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-rcstr%2Fsrc%2Flib.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -37,18 +37,24 @@ mod tagged_value;\n ///\n /// ## Conversion\n ///\n-/// Converting a `String` or `&str` to an `RcStr` can be perfomed using `.into()` or\n-/// `RcStr::from(...)`:\n+/// Converting a `String` or `&str` to an `RcStr` can be perfomed using `.into()`,\n+/// `RcStr::from(...)`, or the `rcstr!` macro.\n ///\n /// ```\n /// # use turbo_rcstr::RcStr;\n /// #\n /// let s = \"foo\";\n /// let rc_s1: RcStr = s.into();\n /// let rc_s2 = RcStr::from(s);\n+/// let rc_s3 = rcstr!(\"foo\");\n /// assert_eq!(rc_s1, rc_s2);\n /// ```\n ///\n+/// Generally speaking you should\n+///  * use `rcstr!` when converting a `const`-compatible `str`\n+///  * use `RcStr::from` for readability\n+///  * use `.into()` when context makes it clear.\n+///\n /// Converting from an [`RcStr`] to a `&str` should be done with [`RcStr::as_str`]. Converting to a\n /// `String` should be done with [`RcStr::into_owned`].\n ///"
        },
        {
            "sha": "c0c1c8efdada3fc8366dae7d43141aa5bf1b4975",
            "filename": "turbopack/crates/turbo-tasks-fetch/src/lib.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 7,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbo-tasks-fetch%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbo-tasks-fetch%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fetch%2Fsrc%2Flib.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -3,7 +3,7 @@\n #![feature(arbitrary_self_types_pointers)]\n \n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc, duration_span, mark_session_dependent};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::issue::{Issue, IssueSeverity, IssueStage, OptionStyledString, StyledString};\n@@ -50,12 +50,10 @@ pub struct OptionProxyConfig(Option<ProxyConfig>);\n \n #[turbo_tasks::function(network)]\n pub async fn fetch(\n-    url: Vc<RcStr>,\n-    user_agent: Vc<Option<RcStr>>,\n+    url: RcStr,\n+    user_agent: Option<RcStr>,\n     proxy_option: Vc<OptionProxyConfig>,\n ) -> Result<Vc<FetchResult>> {\n-    let url = &*url.await?;\n-    let user_agent = &*user_agent.await?;\n     let proxy_option = &*proxy_option.await?;\n \n     let client_builder = reqwest::Client::builder();\n@@ -96,7 +94,7 @@ pub async fn fetch(\n         Err(err) => {\n             mark_session_dependent();\n             Ok(Vc::cell(Err(\n-                FetchError::from_reqwest_error(&err, url).resolved_cell()\n+                FetchError::from_reqwest_error(&err, &url).resolved_cell()\n             )))\n         }\n     }\n@@ -181,7 +179,7 @@ impl Issue for FetchIssue {\n \n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\"Error while requesting resource\".into()).cell()\n+        StyledString::Text(rcstr!(\"Error while requesting resource\")).cell()\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "2bda0469f66c74b2a5e0c0492fcc971402e64516",
            "filename": "turbopack/crates/turbo-tasks-fetch/tests/fetch.rs",
            "status": "modified",
            "additions": 17,
            "deletions": 24,
            "changes": 41,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbo-tasks-fetch%2Ftests%2Ffetch.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbo-tasks-fetch%2Ftests%2Ffetch.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fetch%2Ftests%2Ffetch.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,7 @@\n #![allow(clippy::needless_return)] // tokio macro-generated code doesn't respect this\n #![cfg(test)]\n \n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::Vc;\n use turbo_tasks_fetch::{FetchErrorKind, fetch};\n use turbo_tasks_fs::{DiskFileSystem, FileSystem, FileSystemPath};\n@@ -18,13 +19,9 @@ async fn basic_get() {\n             then.status(200).body(\"responsebody\");\n         });\n \n-        let result = &*fetch(\n-            Vc::cell(server.url(\"/foo.woff\").into()),\n-            Vc::cell(None),\n-            Vc::cell(None),\n-        )\n-        .await\n-        .unwrap();\n+        let result = &*fetch(server.url(\"/foo.woff\").into(), None, Vc::cell(None))\n+            .await\n+            .unwrap();\n         resource_mock.assert();\n \n         match result {\n@@ -51,8 +48,8 @@ async fn sends_user_agent() {\n         });\n \n         let result = &*fetch(\n-            Vc::cell(server.url(\"/foo.woff\").into()),\n-            Vc::cell(Some(\"foo\".into())),\n+            server.url(\"/foo.woff\").into(),\n+            Some(rcstr!(\"foo\")),\n             Vc::cell(None),\n         )\n         .await\n@@ -81,10 +78,10 @@ async fn invalidation_does_not_invalidate() {\n             then.status(200).body(\"responsebody\");\n         });\n \n-        let url = Vc::cell(server.url(\"/foo.woff\").into());\n-        let user_agent = Vc::cell(Some(\"foo\".into()));\n+        let url: RcStr = server.url(\"/foo.woff\").into();\n+        let user_agent = Some(rcstr!(\"foo\"));\n         let proxy = Vc::cell(None);\n-        let result = &*fetch(url, user_agent, proxy).await?;\n+        let result = &*fetch(url.clone(), user_agent.clone(), proxy).await?;\n         resource_mock.assert();\n \n         let Ok(response_vc) = result else { panic!() };\n@@ -111,8 +108,8 @@ async fn invalidation_does_not_invalidate() {\n #[tokio::test]\n async fn errors_on_failed_connection() {\n     run(&REGISTRATION, || async {\n-        let url = \"https://doesnotexist/foo.woff\";\n-        let result = &*fetch(Vc::cell(url.into()), Vc::cell(None), Vc::cell(None)).await?;\n+        let url = rcstr!(\"https://doesnotexist/foo.woff\");\n+        let result = &*fetch(url.clone(), None, Vc::cell(None)).await?;\n         let Err(err_vc) = result else {\n             panic!()\n         };\n@@ -122,7 +119,7 @@ async fn errors_on_failed_connection() {\n \n         let issue = err_vc.to_issue(IssueSeverity::Error.into(), get_issue_context());\n         assert_eq!(*issue.severity().await?, IssueSeverity::Error);\n-        assert_eq!(*issue.description().await?.unwrap().await?, StyledString::Text(\"There was an issue establishing a connection while requesting https://doesnotexist/foo.woff.\".into()));\n+        assert_eq!(*issue.description().await?.unwrap().await?, StyledString::Text(rcstr!(\"There was an issue establishing a connection while requesting https://doesnotexist/foo.woff.\")));\n         anyhow::Ok(())\n     })\n     .await.unwrap()\n@@ -132,14 +129,10 @@ async fn errors_on_failed_connection() {\n async fn errors_on_404() {\n     run(&REGISTRATION, || async {\n         let server = httpmock::MockServer::start();\n-        let resource_url = server.url(\"/\");\n-        let result = &*fetch(\n-            Vc::cell(resource_url.clone().into()),\n-            Vc::cell(None),\n-            Vc::cell(None),\n-        )\n-        .await\n-        .unwrap();\n+        let resource_url: RcStr = server.url(\"/\").into();\n+        let result = &*fetch(resource_url.clone(), None, Vc::cell(None))\n+            .await\n+            .unwrap();\n         let Err(err_vc) = result else { panic!() };\n         let err = &*err_vc.await?;\n         assert!(matches!(*err.kind.await?, FetchErrorKind::Status(404)));\n@@ -164,5 +157,5 @@ async fn errors_on_404() {\n }\n \n fn get_issue_context() -> Vc<FileSystemPath> {\n-    DiskFileSystem::new(\"root\".into(), \"/\".into(), vec![]).root()\n+    DiskFileSystem::new(rcstr!(\"root\"), rcstr!(\"/\"), vec![]).root()\n }"
        },
        {
            "sha": "2140171221431fb3c6f165f579e7cb0baafc96a3",
            "filename": "turbopack/crates/turbo-tasks-fs/src/lib.rs",
            "status": "modified",
            "additions": 18,
            "deletions": 17,
            "changes": 35,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Flib.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -23,7 +23,6 @@ pub mod source_context;\n pub mod util;\n pub(crate) mod virtual_fs;\n mod watcher;\n-\n use std::{\n     borrow::Cow,\n     cmp::{Ordering, min},\n@@ -57,7 +56,7 @@ use tokio::{\n     sync::{RwLock, RwLockReadGuard},\n };\n use tracing::Instrument;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     ApplyEffectsContext, Completion, InvalidationReason, Invalidator, NonLocalValue, ReadRef,\n     ResolvedVc, ValueToString, Vc, debug::ValueDebugFormat, effect, mark_session_dependent,\n@@ -1286,7 +1285,7 @@ impl FileSystemPath {\n \n     #[turbo_tasks::function]\n     pub fn extension(&self) -> Vc<RcStr> {\n-        Vc::cell(self.extension_ref().unwrap_or(\"\").into())\n+        Vc::cell(self.extension_ref().map(RcStr::from).unwrap_or_default())\n     }\n \n     #[turbo_tasks::function]\n@@ -2404,7 +2403,7 @@ impl FileSystem for NullFileSystem {\n impl ValueToString for NullFileSystem {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        Vc::cell(RcStr::from(\"null\"))\n+        Vc::cell(rcstr!(\"null\"))\n     }\n }\n \n@@ -2431,6 +2430,8 @@ pub fn register() {\n \n #[cfg(test)]\n mod tests {\n+    use turbo_rcstr::rcstr;\n+\n     use super::*;\n \n     #[test]\n@@ -2456,26 +2457,26 @@ mod tests {\n         turbo_tasks_testing::VcStorage::with(async {\n             let fs = Vc::upcast(VirtualFileSystem::new());\n \n-            let path_txt = FileSystemPath::new_normalized(fs, \"foo/bar.txt\".into());\n+            let path_txt = FileSystemPath::new_normalized(fs, rcstr!(\"foo/bar.txt\"));\n \n-            let path_json = path_txt.with_extension(\"json\".into());\n+            let path_json = path_txt.with_extension(rcstr!(\"json\"));\n             assert_eq!(&*path_json.await.unwrap().path, \"foo/bar.json\");\n \n-            let path_no_ext = path_txt.with_extension(\"\".into());\n+            let path_no_ext = path_txt.with_extension(rcstr!(\"\"));\n             assert_eq!(&*path_no_ext.await.unwrap().path, \"foo/bar\");\n \n-            let path_new_ext = path_no_ext.with_extension(\"json\".into());\n+            let path_new_ext = path_no_ext.with_extension(rcstr!(\"json\"));\n             assert_eq!(&*path_new_ext.await.unwrap().path, \"foo/bar.json\");\n \n-            let path_no_slash_txt = FileSystemPath::new_normalized(fs, \"bar.txt\".into());\n+            let path_no_slash_txt = FileSystemPath::new_normalized(fs, rcstr!(\"bar.txt\"));\n \n-            let path_no_slash_json = path_no_slash_txt.with_extension(\"json\".into());\n+            let path_no_slash_json = path_no_slash_txt.with_extension(rcstr!(\"json\"));\n             assert_eq!(path_no_slash_json.await.unwrap().path.as_str(), \"bar.json\");\n \n-            let path_no_slash_no_ext = path_no_slash_txt.with_extension(\"\".into());\n+            let path_no_slash_no_ext = path_no_slash_txt.with_extension(rcstr!(\"\"));\n             assert_eq!(path_no_slash_no_ext.await.unwrap().path.as_str(), \"bar\");\n \n-            let path_no_slash_new_ext = path_no_slash_no_ext.with_extension(\"json\".into());\n+            let path_no_slash_new_ext = path_no_slash_no_ext.with_extension(rcstr!(\"json\"));\n             assert_eq!(\n                 path_no_slash_new_ext.await.unwrap().path.as_str(),\n                 \"bar.json\"\n@@ -2494,19 +2495,19 @@ mod tests {\n         turbo_tasks_testing::VcStorage::with(async {\n             let fs = Vc::upcast::<Box<dyn FileSystem>>(VirtualFileSystem::new());\n \n-            let path = FileSystemPath::new_normalized(fs, \"\".into());\n+            let path = FileSystemPath::new_normalized(fs, rcstr!(\"\"));\n             assert_eq!(path.file_stem().await.unwrap().as_deref(), None);\n \n-            let path = FileSystemPath::new_normalized(fs, \"foo/bar.txt\".into());\n+            let path = FileSystemPath::new_normalized(fs, rcstr!(\"foo/bar.txt\"));\n             assert_eq!(path.file_stem().await.unwrap().as_deref(), Some(\"bar\"));\n \n-            let path = FileSystemPath::new_normalized(fs, \"bar.txt\".into());\n+            let path = FileSystemPath::new_normalized(fs, rcstr!(\"bar.txt\"));\n             assert_eq!(path.file_stem().await.unwrap().as_deref(), Some(\"bar\"));\n \n-            let path = FileSystemPath::new_normalized(fs, \"foo/bar\".into());\n+            let path = FileSystemPath::new_normalized(fs, rcstr!(\"foo/bar\"));\n             assert_eq!(path.file_stem().await.unwrap().as_deref(), Some(\"bar\"));\n \n-            let path = FileSystemPath::new_normalized(fs, \"foo/.bar\".into());\n+            let path = FileSystemPath::new_normalized(fs, rcstr!(\"foo/.bar\"));\n             assert_eq!(path.file_stem().await.unwrap().as_deref(), Some(\".bar\"));\n \n             anyhow::Ok(())"
        },
        {
            "sha": "b1edb37cfc0c9f3a4441503a168dc423e8cf0882",
            "filename": "turbopack/crates/turbo-tasks-fuzz/src/main.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbo-tasks-fuzz%2Fsrc%2Fmain.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbo-tasks-fuzz%2Fsrc%2Fmain.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fuzz%2Fsrc%2Fmain.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -11,7 +11,7 @@ use clap::{Args, Parser, Subcommand};\n use rand::{Rng, RngCore, SeedableRng};\n use rustc_hash::FxHashSet;\n use tokio::time::sleep;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{NonLocalValue, ResolvedVc, TransientInstance, Vc, trace::TraceRawVcs};\n use turbo_tasks_backend::{BackendOptions, TurboTasksBackend, noop_backing_storage};\n use turbo_tasks_fs::{DiskFileSystem, FileSystem, FileSystemPath};\n@@ -142,7 +142,7 @@ async fn fuzz_fs_watcher(args: FsWatcher) -> anyhow::Result<()> {\n \n #[turbo_tasks::function(operation)]\n fn disk_file_system_operation(fs_root: RcStr) -> Vc<DiskFileSystem> {\n-    DiskFileSystem::new(\"project\".into(), fs_root, Vec::new())\n+    DiskFileSystem::new(rcstr!(\"project\"), fs_root, Vec::new())\n }\n \n #[turbo_tasks::function(operation)]"
        },
        {
            "sha": "42b33d759efbc0363108fc695e5cf7fee3b08c8a",
            "filename": "turbopack/crates/turbo-tasks-testing/tests/all_in_one.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbo-tasks-testing%2Ftests%2Fall_in_one.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbo-tasks-testing%2Ftests%2Fall_in_one.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-testing%2Ftests%2Fall_in_one.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -3,7 +3,7 @@\n #![feature(arbitrary_self_types_pointers)]\n \n use anyhow::{Result, bail};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Value, ValueToString, Vc};\n use turbo_tasks_testing::{Registration, register, run};\n \n@@ -93,7 +93,7 @@ impl ValueToString for MyEnumValue {\n     fn to_string(&self) -> Vc<RcStr> {\n         match self {\n             MyEnumValue::Yeah(value) => Vc::cell(value.to_string().into()),\n-            MyEnumValue::Nah => Vc::cell(\"nah\".into()),\n+            MyEnumValue::Nah => Vc::cell(rcstr!(\"nah\")),\n             MyEnumValue::More(more) => more.to_string(),\n         }\n     }"
        },
        {
            "sha": "ccf2e871461b6cfd5d66287d2db00317c7dfce2e",
            "filename": "turbopack/crates/turbo-tasks-testing/tests/collectibles.rs",
            "status": "modified",
            "additions": 14,
            "deletions": 14,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbo-tasks-testing%2Ftests%2Fcollectibles.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbo-tasks-testing%2Ftests%2Fcollectibles.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-testing%2Ftests%2Fcollectibles.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -8,7 +8,7 @@ use anyhow::Result;\n use auto_hash_map::AutoSet;\n use rustc_hash::FxHashSet;\n use tokio::time::sleep;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{CollectiblesSource, ResolvedVc, ValueToString, Vc, emit};\n use turbo_tasks_testing::{Registration, register, run};\n \n@@ -17,7 +17,7 @@ static REGISTRATION: Registration = register!();\n #[tokio::test]\n async fn transitive_emitting() {\n     run(&REGISTRATION, || async {\n-        let result_op = my_transitive_emitting_function(\"\".into(), \"\".into());\n+        let result_op = my_transitive_emitting_function(rcstr!(\"\"), rcstr!(\"\"));\n         let result_val = result_op.connect().strongly_consistent().await?;\n         let list = result_op.peek_collectibles::<Box<dyn ValueToString>>();\n         assert_eq!(list.len(), 2);\n@@ -35,8 +35,8 @@ async fn transitive_emitting() {\n #[tokio::test]\n async fn transitive_emitting_indirect() {\n     run(&REGISTRATION, || async {\n-        let result_op = my_transitive_emitting_function(\"\".into(), \"\".into());\n-        let collectibles_op = my_transitive_emitting_function_collectibles(\"\".into(), \"\".into());\n+        let result_op = my_transitive_emitting_function(rcstr!(\"\"), rcstr!(\"\"));\n+        let collectibles_op = my_transitive_emitting_function_collectibles(rcstr!(\"\"), rcstr!(\"\"));\n         let list = collectibles_op.connect().strongly_consistent().await?;\n         assert_eq!(list.len(), 2);\n         let mut expected = [\"123\", \"42\"].into_iter().collect::<FxHashSet<_>>();\n@@ -103,34 +103,34 @@ async fn taking_collectibles_extra_layer() {\n #[tokio::test]\n async fn taking_collectibles_parallel() {\n     run(&REGISTRATION, || async {\n-        let result_op = my_transitive_emitting_function(\"\".into(), \"a\".into());\n+        let result_op = my_transitive_emitting_function(rcstr!(\"\"), rcstr!(\"a\"));\n         let result_val = result_op.connect().strongly_consistent().await?;\n         let list = result_op.take_collectibles::<Box<dyn ValueToString>>();\n         assert_eq!(list.len(), 2);\n         assert_eq!(result_val.0, 0);\n \n-        let result_op = my_transitive_emitting_function(\"\".into(), \"b\".into());\n+        let result_op = my_transitive_emitting_function(rcstr!(\"\"), rcstr!(\"b\"));\n         let result_val = result_op.connect().strongly_consistent().await?;\n         let list = result_op.take_collectibles::<Box<dyn ValueToString>>();\n         assert_eq!(list.len(), 2);\n         assert_eq!(result_val.0, 0);\n \n         let result_op =\n-            my_transitive_emitting_function_with_child_scope(\"\".into(), \"b\".into(), \"1\".into());\n+            my_transitive_emitting_function_with_child_scope(rcstr!(\"\"), rcstr!(\"b\"), rcstr!(\"1\"));\n         let result_val = result_op.connect().strongly_consistent().await?;\n         let list = result_op.take_collectibles::<Box<dyn ValueToString>>();\n         assert_eq!(list.len(), 2);\n         assert_eq!(result_val.0, 0);\n \n         let result_op =\n-            my_transitive_emitting_function_with_child_scope(\"\".into(), \"b\".into(), \"2\".into());\n+            my_transitive_emitting_function_with_child_scope(rcstr!(\"\"), rcstr!(\"b\"), rcstr!(\"2\"));\n         let result_val = result_op.connect().strongly_consistent().await?;\n         let list = result_op.take_collectibles::<Box<dyn ValueToString>>();\n         assert_eq!(list.len(), 2);\n         assert_eq!(result_val.0, 0);\n \n         let result_op =\n-            my_transitive_emitting_function_with_child_scope(\"\".into(), \"c\".into(), \"3\".into());\n+            my_transitive_emitting_function_with_child_scope(rcstr!(\"\"), rcstr!(\"c\"), rcstr!(\"3\"));\n         let result_val = result_op.connect().strongly_consistent().await?;\n         let list = result_op.take_collectibles::<Box<dyn ValueToString>>();\n         assert_eq!(list.len(), 2);\n@@ -145,7 +145,7 @@ async fn taking_collectibles_parallel() {\n #[tokio::test]\n async fn taking_collectibles_with_resolve() {\n     run(&REGISTRATION, || async {\n-        let result_op = my_transitive_emitting_function_with_resolve(\"resolve\".into());\n+        let result_op = my_transitive_emitting_function_with_resolve(rcstr!(\"resolve\"));\n         result_op.connect().strongly_consistent().await?;\n         let list = result_op.take_collectibles::<Box<dyn ValueToString>>();\n         assert_eq!(list.len(), 2);\n@@ -161,7 +161,7 @@ struct Collectibles(AutoSet<ResolvedVc<Box<dyn ValueToString>>>);\n \n #[turbo_tasks::function(operation)]\n async fn my_collecting_function() -> Result<Vc<Thing>> {\n-    let result_op = my_transitive_emitting_function(\"\".into(), \"\".into());\n+    let result_op = my_transitive_emitting_function(rcstr!(\"\"), rcstr!(\"\"));\n     let result_vc = result_op.connect();\n     result_vc.await?;\n     result_op.take_collectibles::<Box<dyn ValueToString>>();\n@@ -182,13 +182,13 @@ async fn my_collecting_function_indirect() -> Result<Vc<Thing>> {\n \n #[turbo_tasks::function(operation)]\n async fn my_multi_emitting_function() -> Result<Vc<Thing>> {\n-    my_transitive_emitting_function(\"\".into(), \"a\".into())\n+    my_transitive_emitting_function(rcstr!(\"\"), rcstr!(\"a\"))\n         .connect()\n         .await?;\n-    my_transitive_emitting_function(\"\".into(), \"b\".into())\n+    my_transitive_emitting_function(rcstr!(\"\"), rcstr!(\"b\"))\n         .connect()\n         .await?;\n-    my_emitting_function(\"\".into()).await?;\n+    my_emitting_function(rcstr!(\"\")).await?;\n     Ok(Thing::cell(Thing(0)))\n }\n "
        },
        {
            "sha": "bdcdbad4b098f225bd4a3b98a25a8c166f800034",
            "filename": "turbopack/crates/turbo-tasks/src/task/task_input.rs",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask%2Ftask_input.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask%2Ftask_input.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Ftask%2Ftask_input.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -322,6 +322,7 @@ tuple_impls! { A B C D E F G H I J K L }\n \n #[cfg(test)]\n mod tests {\n+    use turbo_rcstr::rcstr;\n     use turbo_tasks_macros::TaskInput;\n \n     use super::*;\n@@ -364,7 +365,7 @@ mod tests {\n         )]\n         struct MultipleUnnamedFields(u32, RcStr);\n \n-        assert_task_input(MultipleUnnamedFields(42, \"42\".into()));\n+        assert_task_input(MultipleUnnamedFields(42, rcstr!(\"42\")));\n         Ok(())\n     }\n \n@@ -393,7 +394,7 @@ mod tests {\n \n         assert_task_input(MultipleNamedFields {\n             named: 42,\n-            other: \"42\".into(),\n+            other: rcstr!(\"42\"),\n         });\n         Ok(())\n     }\n@@ -406,7 +407,7 @@ mod tests {\n         struct GenericField<T>(T);\n \n         assert_task_input(GenericField(42));\n-        assert_task_input(GenericField(RcStr::from(\"42\")));\n+        assert_task_input(GenericField(rcstr!(\"42\")));\n         Ok(())\n     }\n \n@@ -448,7 +449,7 @@ mod tests {\n     fn test_multiple_variants_and_heterogeneous_fields() -> Result<()> {\n         assert_task_input(MultipleVariantsAndHeterogeneousFields::Variant5 {\n             named: 42,\n-            other: \"42\".into(),\n+            other: rcstr!(\"42\"),\n         });\n         Ok(())\n     }\n@@ -468,12 +469,12 @@ mod tests {\n \n         assert_task_input(NestedVariants::Variant5 {\n             named: OneVariant::Variant,\n-            other: \"42\".into(),\n+            other: rcstr!(\"42\"),\n         });\n         assert_task_input(NestedVariants::Variant2(\n             MultipleVariantsAndHeterogeneousFields::Variant5 {\n                 named: 42,\n-                other: \"42\".into(),\n+                other: rcstr!(\"42\"),\n             },\n         ));\n         Ok(())"
        },
        {
            "sha": "e94bb7b671133aa1628aa8ac2145fcda31678f4f",
            "filename": "turbopack/crates/turbopack-browser/src/chunking_context.rs",
            "status": "modified",
            "additions": 17,
            "deletions": 18,
            "changes": 35,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fchunking_context.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fchunking_context.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fchunking_context.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -97,17 +97,17 @@ impl BrowserChunkingContextBuilder {\n         self\n     }\n \n-    pub fn asset_base_path(mut self, asset_base_path: ResolvedVc<Option<RcStr>>) -> Self {\n+    pub fn asset_base_path(mut self, asset_base_path: Option<RcStr>) -> Self {\n         self.chunking_context.asset_base_path = asset_base_path;\n         self\n     }\n \n-    pub fn chunk_base_path(mut self, chunk_base_path: ResolvedVc<Option<RcStr>>) -> Self {\n+    pub fn chunk_base_path(mut self, chunk_base_path: Option<RcStr>) -> Self {\n         self.chunking_context.chunk_base_path = chunk_base_path;\n         self\n     }\n \n-    pub fn chunk_suffix_path(mut self, chunk_suffix_path: ResolvedVc<Option<RcStr>>) -> Self {\n+    pub fn chunk_suffix_path(mut self, chunk_suffix_path: Option<RcStr>) -> Self {\n         self.chunking_context.chunk_suffix_path = chunk_suffix_path;\n         self\n     }\n@@ -182,7 +182,7 @@ pub struct BrowserChunkingContext {\n     /// This path is used to compute the url to request chunks from\n     output_root: ResolvedVc<FileSystemPath>,\n     /// The relative path from the output_root to the root_path.\n-    output_root_to_root_path: ResolvedVc<RcStr>,\n+    output_root_to_root_path: RcStr,\n     /// This path is used to compute the url to request assets from\n     client_root: ResolvedVc<FileSystemPath>,\n     /// Chunks are placed at this path\n@@ -191,13 +191,13 @@ pub struct BrowserChunkingContext {\n     asset_root_path: ResolvedVc<FileSystemPath>,\n     /// Base path that will be prepended to all chunk URLs when loading them.\n     /// This path will not appear in chunk paths or chunk data.\n-    chunk_base_path: ResolvedVc<Option<RcStr>>,\n+    chunk_base_path: Option<RcStr>,\n     /// Suffix path that will be appended to all chunk URLs when loading them.\n     /// This path will not appear in chunk paths or chunk data.\n-    chunk_suffix_path: ResolvedVc<Option<RcStr>>,\n+    chunk_suffix_path: Option<RcStr>,\n     /// URL prefix that will be prepended to all static asset URLs when loading\n     /// them.\n-    asset_base_path: ResolvedVc<Option<RcStr>>,\n+    asset_base_path: Option<RcStr>,\n     /// Enable HMR for this chunking\n     enable_hot_module_replacement: bool,\n     /// Enable tracing for this chunking\n@@ -226,7 +226,7 @@ impl BrowserChunkingContext {\n     pub fn builder(\n         root_path: ResolvedVc<FileSystemPath>,\n         output_root: ResolvedVc<FileSystemPath>,\n-        output_root_to_root_path: ResolvedVc<RcStr>,\n+        output_root_to_root_path: RcStr,\n         client_root: ResolvedVc<FileSystemPath>,\n         chunk_root_path: ResolvedVc<FileSystemPath>,\n         asset_root_path: ResolvedVc<FileSystemPath>,\n@@ -243,9 +243,9 @@ impl BrowserChunkingContext {\n                 chunk_root_path,\n                 should_use_file_source_map_uris: false,\n                 asset_root_path,\n-                chunk_base_path: ResolvedVc::cell(None),\n-                chunk_suffix_path: ResolvedVc::cell(None),\n-                asset_base_path: ResolvedVc::cell(None),\n+                chunk_base_path: None,\n+                chunk_suffix_path: None,\n+                asset_base_path: None,\n                 enable_hot_module_replacement: false,\n                 enable_tracing: false,\n                 environment,\n@@ -272,13 +272,13 @@ impl BrowserChunkingContext {\n     }\n \n     /// Returns the asset base path.\n-    pub fn chunk_base_path(&self) -> Vc<Option<RcStr>> {\n-        *self.chunk_base_path\n+    pub fn chunk_base_path(&self) -> Option<RcStr> {\n+        self.chunk_base_path.clone()\n     }\n \n     /// Returns the asset suffix path.\n-    pub fn chunk_suffix_path(&self) -> Vc<Option<RcStr>> {\n-        *self.chunk_suffix_path\n+    pub fn chunk_suffix_path(&self) -> Option<RcStr> {\n+        self.chunk_suffix_path.clone()\n     }\n \n     /// Returns the source map type.\n@@ -367,7 +367,7 @@ impl ChunkingContext for BrowserChunkingContext {\n         if let Some(name) = &self.name {\n             Vc::cell(name.clone())\n         } else {\n-            Vc::cell(\"unknown\".into())\n+            Vc::cell(rcstr!(\"unknown\"))\n         }\n     }\n \n@@ -383,7 +383,7 @@ impl ChunkingContext for BrowserChunkingContext {\n \n     #[turbo_tasks::function]\n     fn output_root_to_root_path(&self) -> Vc<RcStr> {\n-        *self.output_root_to_root_path\n+        Vc::cell(self.output_root_to_root_path.clone())\n     }\n \n     #[turbo_tasks::function]\n@@ -446,7 +446,6 @@ impl ChunkingContext for BrowserChunkingContext {\n             format!(\n                 \"{}{}\",\n                 self.asset_base_path\n-                    .await?\n                     .as_ref()\n                     .map(|s| s.as_str())\n                     .unwrap_or(\"/\"),"
        },
        {
            "sha": "0486b72e00422d037eb86f183a1584cd7cdd5efa",
            "filename": "turbopack/crates/turbopack-browser/src/ecmascript/chunk.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 15,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fecmascript%2Fchunk.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fecmascript%2Fchunk.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fecmascript%2Fchunk.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -60,7 +60,7 @@ impl EcmascriptBrowserChunk {\n impl ValueToString for EcmascriptBrowserChunk {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        Vc::cell(\"Ecmascript Dev Chunk\".into())\n+        Vc::cell(rcstr!(\"Ecmascript Dev Chunk\"))\n     }\n }\n \n@@ -103,7 +103,7 @@ impl OutputAsset for EcmascriptBrowserChunk {\n         let ident = this.ident_for_path();\n         Ok(this\n             .chunking_context\n-            .chunk_path(Some(Vc::upcast(self)), ident, \".js\".into()))\n+            .chunk_path(Some(Vc::upcast(self)), ident, rcstr!(\".js\")))\n     }\n \n     #[turbo_tasks::function]\n@@ -158,21 +158,11 @@ impl GenerateSourceMap for EcmascriptBrowserChunk {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn introspectable_type() -> Vc<RcStr> {\n-    Vc::cell(\"dev ecmascript chunk\".into())\n-}\n-\n-#[turbo_tasks::function]\n-fn introspectable_details() -> Vc<RcStr> {\n-    Vc::cell(\"generates a development ecmascript chunk\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl Introspectable for EcmascriptBrowserChunk {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        introspectable_type()\n+        Vc::cell(rcstr!(\"dev ecmascript chunk\"))\n     }\n \n     #[turbo_tasks::function]\n@@ -182,14 +172,14 @@ impl Introspectable for EcmascriptBrowserChunk {\n \n     #[turbo_tasks::function]\n     fn details(&self) -> Vc<RcStr> {\n-        introspectable_details()\n+        Vc::cell(rcstr!(\"generates a development ecmascript chunk\"))\n     }\n \n     #[turbo_tasks::function]\n     async fn children(&self) -> Result<Vc<IntrospectableChildren>> {\n         let mut children = FxIndexSet::default();\n         let chunk = ResolvedVc::upcast::<Box<dyn Introspectable>>(self.chunk);\n-        children.insert((ResolvedVc::cell(\"chunk\".into()), chunk));\n+        children.insert((rcstr!(\"chunk\"), chunk));\n         Ok(Vc::cell(children))\n     }\n }"
        },
        {
            "sha": "7358dcf7dddc80be85e0e9d4e920a1298d79d40b",
            "filename": "turbopack/crates/turbopack-browser/src/ecmascript/evaluate/chunk.rs",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fecmascript%2Fevaluate%2Fchunk.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fecmascript%2Fevaluate%2Fchunk.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fecmascript%2Fevaluate%2Fchunk.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -78,7 +78,11 @@ impl EcmascriptBrowserEvaluateChunk {\n         let chunking_context = this.chunking_context.await?;\n         let environment = this.chunking_context.environment();\n \n-        let output_root_to_root_path = this.chunking_context.output_root_to_root_path();\n+        let output_root_to_root_path = this\n+            .chunking_context\n+            .output_root_to_root_path()\n+            .owned()\n+            .await?;\n         let source_maps = *this\n             .chunking_context\n             .reference_chunk_source_maps(Vc::upcast(self))\n@@ -242,7 +246,7 @@ impl EcmascriptBrowserEvaluateChunk {\n impl ValueToString for EcmascriptBrowserEvaluateChunk {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        Vc::cell(\"Ecmascript Browser Evaluate Chunk\".into())\n+        Vc::cell(rcstr!(\"Ecmascript Browser Evaluate Chunk\"))\n     }\n }\n \n@@ -254,7 +258,7 @@ impl OutputAsset for EcmascriptBrowserEvaluateChunk {\n         let ident = self.ident_for_path();\n         Ok(this\n             .chunking_context\n-            .chunk_path(Some(Vc::upcast(self)), ident, \".js\".into()))\n+            .chunk_path(Some(Vc::upcast(self)), ident, rcstr!(\".js\")))\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "23b95b3e4268b0fff43b64ae4f11d9da97dd56ca",
            "filename": "turbopack/crates/turbopack-browser/src/ecmascript/list/asset.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fecmascript%2Flist%2Fasset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fecmascript%2Flist%2Fasset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Fecmascript%2Flist%2Fasset.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -64,7 +64,7 @@ impl EcmascriptDevChunkList {\n impl ValueToString for EcmascriptDevChunkList {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        Vc::cell(\"Ecmascript Dev Chunk List\".into())\n+        Vc::cell(rcstr!(\"Ecmascript Dev Chunk List\"))\n     }\n }\n \n@@ -90,7 +90,7 @@ impl OutputAsset for EcmascriptDevChunkList {\n         let ident = AssetIdent::new(Value::new(ident));\n         Ok(this\n             .chunking_context\n-            .chunk_path(Some(Vc::upcast(self)), ident, \".js\".into()))\n+            .chunk_path(Some(Vc::upcast(self)), ident, rcstr!(\".js\")))\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "cf52a375e62bd7b31b9583f7d1795d58b34f3903",
            "filename": "turbopack/crates/turbopack-browser/src/react_refresh.rs",
            "status": "modified",
            "additions": 13,
            "deletions": 10,
            "changes": 23,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Freact_refresh.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Freact_refresh.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-browser%2Fsrc%2Freact_refresh.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,4 +1,5 @@\n use anyhow::Result;\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Value, Vc};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::{\n@@ -12,12 +13,14 @@ use turbopack_resolve::{\n \n #[turbo_tasks::function]\n fn react_refresh_request() -> Vc<Request> {\n-    Request::parse_string(\"@next/react-refresh-utils/dist/runtime\".into())\n+    Request::parse_string(rcstr!(\"@next/react-refresh-utils/dist/runtime\"))\n }\n \n #[turbo_tasks::function]\n fn react_refresh_request_in_next() -> Vc<Request> {\n-    Request::parse_string(\"next/dist/compiled/@next/react-refresh-utils/dist/runtime\".into())\n+    Request::parse_string(rcstr!(\n+        \"next/dist/compiled/@next/react-refresh-utils/dist/runtime\"\n+    ))\n }\n \n #[turbo_tasks::value]\n@@ -84,7 +87,7 @@ impl Issue for ReactRefreshResolvingIssue {\n \n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\"Could not resolve React Refresh runtime\".into()).cell()\n+        StyledString::Text(rcstr!(\"Could not resolve React Refresh runtime\")).cell()\n     }\n \n     #[turbo_tasks::function]\n@@ -101,13 +104,13 @@ impl Issue for ReactRefreshResolvingIssue {\n     fn description(&self) -> Vc<OptionStyledString> {\n         Vc::cell(Some(\n             StyledString::Line(vec![\n-                StyledString::Text(\n-                    \"React Refresh will be disabled.\\nTo enable React Refresh, install the \".into(),\n-                ),\n-                StyledString::Code(\"react-refresh\".into()),\n-                StyledString::Text(\" and \".into()),\n-                StyledString::Code(\"@next/react-refresh-utils\".into()),\n-                StyledString::Text(\" modules.\".into()),\n+                StyledString::Text(rcstr!(\n+                    \"React Refresh will be disabled.\\nTo enable React Refresh, install the \"\n+                )),\n+                StyledString::Code(rcstr!(\"react-refresh\")),\n+                StyledString::Text(rcstr!(\" and \")),\n+                StyledString::Code(rcstr!(\"@next/react-refresh-utils\")),\n+                StyledString::Text(rcstr!(\" modules.\")),\n             ])\n             .resolved_cell(),\n         ))"
        },
        {
            "sha": "1936435a5722d5035003a9b1bb594c170e1f8544",
            "filename": "turbopack/crates/turbopack-cli/src/build/mod.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Fbuild%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Fbuild%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Fbuild%2Fmod.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -8,7 +8,7 @@ use std::{\n use anyhow::{Context, Result, bail};\n use rustc_hash::FxHashSet;\n use tracing::Instrument;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     ReadConsistency, ResolvedVc, TransientInstance, TryJoinIterExt, TurboTasks, Value, Vc,\n     apply_effects,\n@@ -208,12 +208,12 @@ async fn build_internal(\n         .into();\n     let root_path = project_fs.root().to_resolved().await?;\n     let project_path = root_path.join(project_relative).to_resolved().await?;\n-    let build_output_root = output_fs.root().join(\"dist\".into()).to_resolved().await?;\n+    let build_output_root = output_fs.root().join(rcstr!(\"dist\")).to_resolved().await?;\n \n     let node_env = NodeEnv::Production.cell();\n \n     let build_output_root_to_root_path = project_path\n-        .join(\"dist\".into())\n+        .join(rcstr!(\"dist\"))\n         .await?\n         .get_relative_path_to(&*root_path.await?)\n         .context(\"Project path is in root path\")?;\n@@ -230,7 +230,7 @@ async fn build_internal(\n             NodeJsChunkingContext::builder(\n                 project_path,\n                 build_output_root,\n-                ResolvedVc::cell(build_output_root_to_root_path.clone()),\n+                build_output_root_to_root_path.clone(),\n                 build_output_root,\n                 build_output_root,\n                 build_output_root,\n@@ -276,7 +276,7 @@ async fn build_internal(\n         .await?)\n         .to_vec();\n \n-    let origin = PlainResolveOrigin::new(asset_context, project_fs.root().join(\"_\".into()));\n+    let origin = PlainResolveOrigin::new(asset_context, project_fs.root().join(rcstr!(\"_\")));\n     let project_dir = &project_dir;\n     let entries = async move {\n         entry_requests\n@@ -318,7 +318,7 @@ async fn build_internal(\n             let mut builder = BrowserChunkingContext::builder(\n                 project_path,\n                 build_output_root,\n-                ResolvedVc::cell(build_output_root_to_root_path),\n+                build_output_root_to_root_path,\n                 build_output_root,\n                 build_output_root,\n                 build_output_root,\n@@ -369,7 +369,7 @@ async fn build_internal(\n             let mut builder = NodeJsChunkingContext::builder(\n                 project_path,\n                 build_output_root,\n-                ResolvedVc::cell(build_output_root_to_root_path),\n+                build_output_root_to_root_path,\n                 build_output_root,\n                 build_output_root,\n                 build_output_root,\n@@ -433,7 +433,7 @@ async fn build_internal(\n                                                     .unwrap()\n                                                     .into(),\n                                             )\n-                                            .with_extension(\"entry.js\".into()),\n+                                            .with_extension(rcstr!(\"entry.js\")),\n                                     ),\n                                     ChunkGroup::Entry(\n                                         [ResolvedVc::upcast(ecmascript)].into_iter().collect(),\n@@ -458,7 +458,7 @@ async fn build_internal(\n                                                 .unwrap()\n                                                 .into(),\n                                         )\n-                                        .with_extension(\"entry.js\".into()),\n+                                        .with_extension(rcstr!(\"entry.js\")),\n                                     EvaluatableAssets::one(*ResolvedVc::upcast(ecmascript)),\n                                     module_graph,\n                                     OutputAssets::empty(),"
        },
        {
            "sha": "6b8f515ffc85c0d0c40e3b39320c537c823a1ab9",
            "filename": "turbopack/crates/turbopack-cli/src/dev/mod.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Fdev%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Fdev%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Fdev%2Fmod.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -11,7 +11,7 @@ use std::{\n use anyhow::{Context, Result};\n use owo_colors::OwoColorize;\n use rustc_hash::FxHashSet;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     NonLocalValue, OperationVc, ResolvedVc, TransientInstance, TurboTasks, UpdateInfo, Value, Vc,\n     trace::TraceRawVcs,\n@@ -271,28 +271,28 @@ async fn source(\n     let env = load_env(*root_path);\n     let build_output_root = output_fs\n         .root()\n-        .join(\".turbopack/build\".into())\n+        .join(rcstr!(\".turbopack/build\"))\n         .to_resolved()\n         .await?;\n \n     let build_output_root_to_root_path = project_path\n-        .join(\".turbopack/build\".into())\n+        .join(rcstr!(\".turbopack/build\"))\n         .await?\n         .get_relative_path_to(&*root_path.await?)\n         .context(\"Project path is in root path\")?;\n-    let build_output_root_to_root_path = ResolvedVc::cell(build_output_root_to_root_path);\n+    let build_output_root_to_root_path = build_output_root_to_root_path;\n \n     let build_chunking_context = NodeJsChunkingContext::builder(\n         root_path,\n         build_output_root,\n         build_output_root_to_root_path,\n         build_output_root,\n         build_output_root\n-            .join(\"chunks\".into())\n+            .join(rcstr!(\"chunks\"))\n             .to_resolved()\n             .await?,\n         build_output_root\n-            .join(\"assets\".into())\n+            .join(rcstr!(\"assets\"))\n             .to_resolved()\n             .await?,\n         node_build_environment().to_resolved().await?,\n@@ -328,7 +328,7 @@ async fn source(\n         execution_context,\n         entry_requests,\n         server_root,\n-        Vc::cell(\"/ROOT\".into()),\n+        rcstr!(\"/ROOT\"),\n         env,\n         eager_compile,\n         NodeEnv::Development.cell(),\n@@ -338,7 +338,7 @@ async fn source(\n     .to_resolved()\n     .await?;\n     let static_source = ResolvedVc::upcast(\n-        StaticAssetsContentSource::new(Default::default(), project_path.join(\"public\".into()))\n+        StaticAssetsContentSource::new(Default::default(), project_path.join(rcstr!(\"public\")))\n             .to_resolved()\n             .await?,\n     );\n@@ -354,7 +354,7 @@ async fn source(\n     let main_source = ResolvedVc::upcast(main_source);\n     Ok(Vc::upcast(PrefixedRouterContentSource::new(\n         Default::default(),\n-        vec![(\"__turbopack__\".into(), introspect)],\n+        vec![(rcstr!(\"__turbopack__\"), introspect)],\n         *main_source,\n     )))\n }"
        },
        {
            "sha": "5e2899769b2dbbcd23354f16944f84fc417ca67f",
            "filename": "turbopack/crates/turbopack-cli/src/dev/web_entry_source.rs",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Fdev%2Fweb_entry_source.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Fdev%2Fweb_entry_source.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-cli%2Fsrc%2Fdev%2Fweb_entry_source.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::{Result, anyhow};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryFlatJoinIterExt, TryJoinIterExt, Value, Vc};\n use turbo_tasks_env::ProcessEnv;\n use turbo_tasks_fs::FileSystemPath;\n@@ -36,7 +36,7 @@ use crate::{\n pub async fn get_client_chunking_context(\n     root_path: ResolvedVc<FileSystemPath>,\n     server_root: ResolvedVc<FileSystemPath>,\n-    server_root_to_root_path: ResolvedVc<RcStr>,\n+    server_root_to_root_path: RcStr,\n     environment: ResolvedVc<Environment>,\n ) -> Result<Vc<Box<dyn ChunkingContext>>> {\n     Ok(Vc::upcast(\n@@ -45,8 +45,8 @@ pub async fn get_client_chunking_context(\n             server_root,\n             server_root_to_root_path,\n             server_root,\n-            server_root.join(\"/_chunks\".into()).to_resolved().await?,\n-            server_root.join(\"/_assets\".into()).to_resolved().await?,\n+            server_root.join(rcstr!(\"/_chunks\")).to_resolved().await?,\n+            server_root.join(rcstr!(\"/_assets\")).to_resolved().await?,\n             environment,\n             RuntimeType::Development,\n         )\n@@ -76,15 +76,15 @@ pub async fn get_client_runtime_entries(\n         runtime_entries.push(\n             RuntimeEntry::Request(\n                 request.to_resolved().await?,\n-                project_path.join(\"_\".into()).to_resolved().await?,\n+                project_path.join(rcstr!(\"_\")).to_resolved().await?,\n             )\n             .resolved_cell(),\n         )\n     };\n \n     runtime_entries.push(\n         RuntimeEntry::Source(ResolvedVc::upcast(\n-            FileSource::new(embed_file_path(\"entry/bootstrap.ts\".into()))\n+            FileSource::new(embed_file_path(rcstr!(\"entry/bootstrap.ts\")))\n                 .to_resolved()\n                 .await?,\n         ))\n@@ -100,7 +100,7 @@ pub async fn create_web_entry_source(\n     execution_context: Vc<ExecutionContext>,\n     entry_requests: Vec<Vc<Request>>,\n     server_root: Vc<FileSystemPath>,\n-    server_root_to_root_path: ResolvedVc<RcStr>,\n+    server_root_to_root_path: RcStr,\n     _env: Vc<Box<dyn ProcessEnv>>,\n     eager_compile: bool,\n     node_env: Vc<NodeEnv>,\n@@ -118,7 +118,7 @@ pub async fn create_web_entry_source(\n     let chunking_context = get_client_chunking_context(\n         root_path,\n         server_root,\n-        *server_root_to_root_path,\n+        server_root_to_root_path,\n         compile_time_info.environment(),\n     )\n     .to_resolved()\n@@ -127,7 +127,7 @@ pub async fn create_web_entry_source(\n \n     let runtime_entries = entries.resolve_entries(asset_context);\n \n-    let origin = PlainResolveOrigin::new(asset_context, root_path.join(\"_\".into()));\n+    let origin = PlainResolveOrigin::new(asset_context, root_path.join(rcstr!(\"_\")));\n     let entries = entry_requests\n         .into_iter()\n         .map(|request| async move {\n@@ -196,7 +196,7 @@ pub async fn create_web_entry_source(\n         .await?;\n \n     let entry_asset = Vc::upcast(DevHtmlAsset::new(\n-        server_root.join(\"index.html\".into()).to_resolved().await?,\n+        server_root.join(rcstr!(\"index.html\")).to_resolved().await?,\n         entries,\n     ));\n "
        },
        {
            "sha": "3bcfeaa79bb986e2e2f2073c755d14341de00be1",
            "filename": "turbopack/crates/turbopack-core/src/chunk/data.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fdata.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fdata.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fdata.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,5 +1,4 @@\n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n use turbo_tasks::{ReadRef, ResolvedVc, TryJoinIterExt, ValueToString, Vc};\n use turbo_tasks_fs::FileSystemPath;\n use turbo_tasks_hash::Xxh3Hash64Hasher;\n@@ -40,11 +39,6 @@ impl ChunksData {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn module_chunk_reference_description() -> Vc<RcStr> {\n-    Vc::cell(\"module chunk\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkData {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "42dc7f68d916c0cbb64344b8ddf1d98b261414ad",
            "filename": "turbopack/crates/turbopack-core/src/environment.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fenvironment.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fenvironment.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fenvironment.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -5,7 +5,7 @@ use std::{\n \n use anyhow::{Context, Result, anyhow};\n use swc_core::ecma::preset_env::{Version, Versions};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TaskInput, Value, Vc};\n use turbo_tasks_env::ProcessEnv;\n \n@@ -146,7 +146,7 @@ impl Environment {\n         let env = self;\n         match env.execution {\n             ExecutionEnvironment::NodeJsBuildTime(..) | ExecutionEnvironment::NodeJsLambda(_) => {\n-                Vc::cell(vec![\".js\".into(), \".node\".into(), \".json\".into()])\n+                Vc::cell(vec![rcstr!(\".js\"), rcstr!(\".node\"), rcstr!(\".json\")])\n             }\n             ExecutionEnvironment::EdgeWorker(_) | ExecutionEnvironment::Browser(_) => {\n                 Vc::<Vec<RcStr>>::default()\n@@ -174,11 +174,11 @@ impl Environment {\n         let env = self;\n         match env.execution {\n             ExecutionEnvironment::NodeJsBuildTime(..) | ExecutionEnvironment::NodeJsLambda(_) => {\n-                Vc::cell(vec![\"node\".into()])\n+                Vc::cell(vec![rcstr!(\"node\")])\n             }\n             ExecutionEnvironment::Browser(_) => Vc::<Vec<RcStr>>::default(),\n             ExecutionEnvironment::EdgeWorker(_) => {\n-                Vc::cell(vec![\"edge-light\".into(), \"worker\".into()])\n+                Vc::cell(vec![rcstr!(\"edge-light\"), rcstr!(\"worker\")])\n             }\n             ExecutionEnvironment::Custom(_) => todo!(),\n         }\n@@ -302,7 +302,7 @@ pub struct RuntimeVersions(#[turbo_tasks(trace_ignore)] pub Versions);\n \n #[turbo_tasks::function]\n pub async fn get_current_nodejs_version(env: Vc<Box<dyn ProcessEnv>>) -> Result<Vc<RcStr>> {\n-    let path_read = env.read(\"PATH\".into()).await?;\n+    let path_read = env.read(rcstr!(\"PATH\")).await?;\n     let path = path_read.as_ref().context(\"env must have PATH\")?;\n     let mut cmd = Command::new(\"node\");\n     cmd.arg(\"--version\");"
        },
        {
            "sha": "00a9ef90d45cfce5371518d6a3f0082a97f2f715",
            "filename": "turbopack/crates/turbopack-core/src/introspect/mod.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Fmod.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -9,7 +9,7 @@ use turbo_tasks::{FxIndexSet, ResolvedVc, Vc};\n type VcDynIntrospectable = ResolvedVc<Box<dyn Introspectable>>;\n \n #[turbo_tasks::value(transparent)]\n-pub struct IntrospectableChildren(FxIndexSet<(ResolvedVc<RcStr>, VcDynIntrospectable)>);\n+pub struct IntrospectableChildren(FxIndexSet<(RcStr, VcDynIntrospectable)>);\n \n #[turbo_tasks::value_trait]\n pub trait Introspectable {"
        },
        {
            "sha": "fbeb8417d70d9fa5d7605bf3481980e4fbdc3db3",
            "filename": "turbopack/crates/turbopack-core/src/introspect/module.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 7,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Fmodule.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, ValueToString, Vc};\n \n use super::{\n@@ -20,16 +20,11 @@ impl IntrospectableModule {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn ty() -> Vc<RcStr> {\n-    Vc::cell(\"asset\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl Introspectable for IntrospectableModule {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        ty()\n+        Vc::cell(rcstr!(\"asset\"))\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "abd587e349bf64c088d0520acaae965bf5623445",
            "filename": "turbopack/crates/turbopack-core/src/introspect/output_asset.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 7,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Foutput_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Foutput_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Foutput_asset.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, ValueToString, Vc};\n \n use super::{\n@@ -25,16 +25,11 @@ impl IntrospectableOutputAsset {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn ty() -> Vc<RcStr> {\n-    Vc::cell(\"output asset\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl Introspectable for IntrospectableOutputAsset {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        ty()\n+        Vc::cell(rcstr!(\"output asset\"))\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "3d49f57a07e34ecb2ecd0bfe2e847a67b15554e6",
            "filename": "turbopack/crates/turbopack-core/src/introspect/source.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 7,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Fsource.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Fsource.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Fsource.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, ValueToString, Vc};\n \n use super::{Introspectable, utils::content_to_details};\n@@ -17,16 +17,11 @@ impl IntrospectableSource {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn ty() -> Vc<RcStr> {\n-    Vc::cell(\"source\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl Introspectable for IntrospectableSource {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        ty()\n+        Vc::cell(rcstr!(\"source\"))\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "5c878669b35df829758a9f508d6d44c5d9be70b5",
            "filename": "turbopack/crates/turbopack-core/src/introspect/utils.rs",
            "status": "modified",
            "additions": 39,
            "deletions": 37,
            "changes": 76,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Futils.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Futils.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fintrospect%2Futils.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{FxIndexSet, ResolvedVc, Vc};\n use turbo_tasks_fs::FileContent;\n \n@@ -13,39 +13,32 @@ use crate::{\n     reference::{ModuleReference, ModuleReferences},\n };\n \n-#[turbo_tasks::function]\n-fn reference_ty() -> Vc<RcStr> {\n-    Vc::cell(\"reference\".into())\n+fn reference_ty() -> RcStr {\n+    rcstr!(\"reference\")\n }\n \n-#[turbo_tasks::function]\n-fn parallel_reference_ty() -> Vc<RcStr> {\n-    Vc::cell(\"parallel reference\".into())\n+fn parallel_reference_ty() -> RcStr {\n+    rcstr!(\"parallel reference\")\n }\n \n-#[turbo_tasks::function]\n-fn parallel_inherit_async_reference_ty() -> Vc<RcStr> {\n-    Vc::cell(\"parallel reference (inherit async module)\".into())\n+fn parallel_inherit_async_reference_ty() -> RcStr {\n+    rcstr!(\"parallel reference (inherit async module)\")\n }\n \n-#[turbo_tasks::function]\n-fn async_reference_ty() -> Vc<RcStr> {\n-    Vc::cell(\"async reference\".into())\n+fn async_reference_ty() -> RcStr {\n+    rcstr!(\"async reference\")\n }\n \n-#[turbo_tasks::function]\n-fn isolated_reference_ty() -> Vc<RcStr> {\n-    Vc::cell(\"isolated reference\".into())\n+fn isolated_reference_ty() -> RcStr {\n+    rcstr!(\"isolated reference\")\n }\n \n-#[turbo_tasks::function]\n-fn shared_reference_ty() -> Vc<RcStr> {\n-    Vc::cell(\"shared reference\".into())\n+fn shared_reference_ty() -> RcStr {\n+    rcstr!(\"shared reference\")\n }\n \n-#[turbo_tasks::function]\n-fn traced_reference_ty() -> Vc<RcStr> {\n-    Vc::cell(\"traced reference\".into())\n+fn traced_reference_ty() -> RcStr {\n+    rcstr!(\"traced reference\")\n }\n \n #[turbo_tasks::function]\n@@ -59,7 +52,7 @@ pub async fn content_to_details(content: Vc<AssetContent>) -> Result<Vc<RcStr>>\n                     Err(_) => Vc::cell(format!(\"{} binary bytes\", content.len()).into()),\n                 }\n             }\n-            FileContent::NotFound => Vc::cell(\"not found\".into()),\n+            FileContent::NotFound => Vc::cell(rcstr!(\"not found\")),\n         },\n         AssetContent::Redirect { target, link_type } => {\n             Vc::cell(format!(\"redirect to {target} with type {link_type:?}\").into())\n@@ -75,21 +68,27 @@ pub async fn children_from_module_references(\n     let mut children = FxIndexSet::default();\n     let references = references.await?;\n     for &reference in &*references {\n-        let mut key = key;\n-        if let Some(chunkable) =\n+        let key = if let Some(chunkable) =\n             ResolvedVc::try_downcast::<Box<dyn ChunkableModuleReference>>(reference)\n         {\n             match &*chunkable.chunking_type().await? {\n-                None => {}\n-                Some(ChunkingType::Parallel { .. }) => key = parallel_reference_ty(),\n-                Some(ChunkingType::Async) => key = async_reference_ty(),\n-                Some(ChunkingType::Isolated { .. }) => key = isolated_reference_ty(),\n-                Some(ChunkingType::Shared { .. }) => key = shared_reference_ty(),\n-                Some(ChunkingType::Traced) => key = traced_reference_ty(),\n+                None => key.clone(),\n+                Some(ChunkingType::Parallel { inherit_async, .. }) => {\n+                    if *inherit_async {\n+                        parallel_inherit_async_reference_ty()\n+                    } else {\n+                        parallel_reference_ty()\n+                    }\n+                }\n+                Some(ChunkingType::Async) => async_reference_ty(),\n+                Some(ChunkingType::Isolated { .. }) => isolated_reference_ty(),\n+                Some(ChunkingType::Shared { .. }) => shared_reference_ty(),\n+                Some(ChunkingType::Traced) => traced_reference_ty(),\n             }\n-        }\n+        } else {\n+            key.clone()\n+        };\n \n-        let key = key.to_resolved().await?;\n         for &module in reference\n             .resolve_reference()\n             .resolve()\n@@ -98,7 +97,10 @@ pub async fn children_from_module_references(\n             .await?\n             .iter()\n         {\n-            children.insert((key, IntrospectableModule::new(*module).to_resolved().await?));\n+            children.insert((\n+                key.clone(),\n+                IntrospectableModule::new(*module).to_resolved().await?,\n+            ));\n         }\n         for &output_asset in reference\n             .resolve_reference()\n@@ -107,7 +109,7 @@ pub async fn children_from_module_references(\n             .iter()\n         {\n             children.insert((\n-                key,\n+                key.clone(),\n                 IntrospectableOutputAsset::new(*output_asset)\n                     .to_resolved()\n                     .await?,\n@@ -121,12 +123,12 @@ pub async fn children_from_module_references(\n pub async fn children_from_output_assets(\n     references: Vc<OutputAssets>,\n ) -> Result<Vc<IntrospectableChildren>> {\n-    let key = reference_ty().to_resolved().await?;\n+    let key = reference_ty();\n     let mut children = FxIndexSet::default();\n     let references = references.await?;\n     for &reference in &*references {\n         children.insert((\n-            key,\n+            key.clone(),\n             IntrospectableOutputAsset::new(*ResolvedVc::upcast(reference))\n                 .to_resolved()\n                 .await?,"
        },
        {
            "sha": "f6bfb07fbea77f15aab121e836ba9657299f0dbe",
            "filename": "turbopack/crates/turbopack-core/src/reference/mod.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 12,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Freference%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Freference%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Freference%2Fmod.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -49,7 +49,7 @@ impl ModuleReferences {\n #[turbo_tasks::value]\n pub struct SingleModuleReference {\n     asset: ResolvedVc<Box<dyn Module>>,\n-    description: ResolvedVc<RcStr>,\n+    description: RcStr,\n }\n \n #[turbo_tasks::value_impl]\n@@ -64,7 +64,7 @@ impl ModuleReference for SingleModuleReference {\n impl ValueToString for SingleModuleReference {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        *self.description\n+        Vc::cell(self.description.clone())\n     }\n }\n \n@@ -73,7 +73,7 @@ impl SingleModuleReference {\n     /// Create a new [Vc<SingleModuleReference>] that resolves to the given\n     /// asset.\n     #[turbo_tasks::function]\n-    pub fn new(asset: ResolvedVc<Box<dyn Module>>, description: ResolvedVc<RcStr>) -> Vc<Self> {\n+    pub fn new(asset: ResolvedVc<Box<dyn Module>>, description: RcStr) -> Vc<Self> {\n         Self::cell(SingleModuleReference { asset, description })\n     }\n \n@@ -87,13 +87,13 @@ impl SingleModuleReference {\n #[turbo_tasks::value]\n pub struct SingleChunkableModuleReference {\n     asset: ResolvedVc<Box<dyn Module>>,\n-    description: ResolvedVc<RcStr>,\n+    description: RcStr,\n }\n \n #[turbo_tasks::value_impl]\n impl SingleChunkableModuleReference {\n     #[turbo_tasks::function]\n-    pub fn new(asset: ResolvedVc<Box<dyn Module>>, description: ResolvedVc<RcStr>) -> Vc<Self> {\n+    pub fn new(asset: ResolvedVc<Box<dyn Module>>, description: RcStr) -> Vc<Self> {\n         Self::cell(SingleChunkableModuleReference { asset, description })\n     }\n }\n@@ -121,15 +121,15 @@ impl ModuleReference for SingleChunkableModuleReference {\n impl ValueToString for SingleChunkableModuleReference {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        *self.description\n+        Vc::cell(self.description.clone())\n     }\n }\n \n /// A reference that always resolves to a single module.\n #[turbo_tasks::value]\n pub struct SingleOutputAssetReference {\n     asset: ResolvedVc<Box<dyn OutputAsset>>,\n-    description: ResolvedVc<RcStr>,\n+    description: RcStr,\n }\n \n #[turbo_tasks::value_impl]\n@@ -144,7 +144,7 @@ impl ModuleReference for SingleOutputAssetReference {\n impl ValueToString for SingleOutputAssetReference {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        *self.description\n+        Vc::cell(self.description.clone())\n     }\n }\n \n@@ -153,10 +153,7 @@ impl SingleOutputAssetReference {\n     /// Create a new [Vc<SingleOutputAssetReference>] that resolves to the given\n     /// asset.\n     #[turbo_tasks::function]\n-    pub fn new(\n-        asset: ResolvedVc<Box<dyn OutputAsset>>,\n-        description: ResolvedVc<RcStr>,\n-    ) -> Vc<Self> {\n+    pub fn new(asset: ResolvedVc<Box<dyn OutputAsset>>, description: RcStr) -> Vc<Self> {\n         Self::cell(SingleOutputAssetReference { asset, description })\n     }\n "
        },
        {
            "sha": "18710aeaa132c35e695270a4bc5350403cbeb0f2",
            "filename": "turbopack/crates/turbopack-core/src/resolve/mod.rs",
            "status": "modified",
            "additions": 24,
            "deletions": 24,
            "changes": 48,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fmod.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -10,7 +10,7 @@ use anyhow::{Result, bail};\n use rustc_hash::{FxHashMap, FxHashSet};\n use serde::{Deserialize, Serialize};\n use tracing::{Instrument, Level};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     FxIndexMap, FxIndexSet, NonLocalValue, ReadRef, ResolvedVc, SliceMap, TaskInput,\n     TryJoinIterExt, Value, ValueToString, Vc, trace::TraceRawVcs,\n@@ -1270,7 +1270,7 @@ async fn imports_field(lookup_path: Vc<FileSystemPath>) -> Result<Vc<ImportsFiel\n \n #[turbo_tasks::function]\n pub fn package_json() -> Vc<Vec<RcStr>> {\n-    Vc::cell(vec![\"package.json\".into()])\n+    Vc::cell(vec![rcstr!(\"package.json\")])\n }\n \n #[turbo_tasks::value(shared)]\n@@ -1326,7 +1326,7 @@ pub async fn find_context_file_or_package_key(\n     package_key: Value<RcStr>,\n ) -> Result<Vc<FindContextFileResult>> {\n     let mut refs = Vec::new();\n-    let package_json_path = lookup_path.join(\"package.json\".into());\n+    let package_json_path = lookup_path.join(rcstr!(\"package.json\"));\n     if let Some(package_json_path) = exists(package_json_path, &mut refs).await? {\n         if let Some(json) = &*read_package_json(*package_json_path).await? {\n             if json.get(&**package_key).is_some() {\n@@ -1519,7 +1519,7 @@ pub async fn resolve_raw(\n         .and_then(|pat| pat.filter_could_not_match(\"/ROOT/fsd8nz8og54z\"))\n     {\n         let path = Pattern::new(pat);\n-        let matches = read_matches(lookup_dir.root(), \"/ROOT/\".into(), true, path).await?;\n+        let matches = read_matches(lookup_dir.root(), rcstr!(\"/ROOT/\"), true, path).await?;\n         if matches.len() > 10000 {\n             let path_str = path.to_string().await?;\n             println!(\n@@ -1538,7 +1538,7 @@ pub async fn resolve_raw(\n     }\n \n     {\n-        let matches = read_matches(lookup_dir, \"\".into(), force_in_lookup_dir, path).await?;\n+        let matches = read_matches(lookup_dir, rcstr!(\"\"), force_in_lookup_dir, path).await?;\n         if matches.len() > 10000 {\n             println!(\n                 \"WARN: resolving pattern {} in {} leads to {} results\",\n@@ -1834,7 +1834,7 @@ async fn resolve_internal_inline(\n                 let mut results = Vec::new();\n                 let matches = read_matches(\n                     lookup_path,\n-                    \"\".into(),\n+                    rcstr!(\"\"),\n                     *force_in_lookup_dir,\n                     Pattern::new(path.clone()).resolve().await?,\n                 )\n@@ -1927,7 +1927,7 @@ async fn resolve_internal_inline(\n                 fragment,\n             } => {\n                 let mut new_pat = path.clone();\n-                new_pat.push_front(RcStr::from(\".\").into());\n+                new_pat.push_front(rcstr!(\".\").into());\n                 let relative =\n                     Request::relative(Value::new(new_pat), query.clone(), fragment.clone(), true);\n \n@@ -2101,7 +2101,7 @@ async fn resolve_into_folder(\n     package_path: ResolvedVc<FileSystemPath>,\n     options: Vc<ResolveOptions>,\n ) -> Result<Vc<ResolveResult>> {\n-    let package_json_path = package_path.join(\"package.json\".into());\n+    let package_json_path = package_path.join(rcstr!(\"package.json\"));\n     let options_value = options.await?;\n \n     for resolve_into_package in options_value.into_package.iter() {\n@@ -2133,7 +2133,7 @@ async fn resolve_into_folder(\n                         // we continue to try other alternatives\n                         if !result.is_unresolvable_ref() {\n                             let mut result: ResolveResultBuilder =\n-                                result.with_request_ref(\".\".into()).into();\n+                                result.with_request_ref(rcstr!(\".\")).into();\n                             result.affecting_sources.push(ResolvedVc::upcast(\n                                 FileSource::new(package_json_path).to_resolved().await?,\n                             ));\n@@ -2166,7 +2166,7 @@ async fn resolve_into_folder(\n \n     Ok(resolve_internal_inline(*package_path, request, options)\n         .await?\n-        .with_request(\".\".into()))\n+        .with_request(rcstr!(\".\")))\n }\n \n #[tracing::instrument(level = Level::TRACE, skip_all)]\n@@ -2231,23 +2231,23 @@ async fn resolve_relative_request(\n                 Some((base, \"js\")) => (\n                     base,\n                     vec![\n-                        Pattern::Constant(\".ts\".into()),\n-                        Pattern::Constant(\".tsx\".into()),\n-                        Pattern::Constant(\".js\".into()),\n+                        Pattern::Constant(rcstr!(\".ts\")),\n+                        Pattern::Constant(rcstr!(\".tsx\")),\n+                        Pattern::Constant(rcstr!(\".js\")),\n                     ],\n                 ),\n                 Some((base, \"mjs\")) => (\n                     base,\n                     vec![\n-                        Pattern::Constant(\".mts\".into()),\n-                        Pattern::Constant(\".mjs\".into()),\n+                        Pattern::Constant(rcstr!(\".mts\")),\n+                        Pattern::Constant(rcstr!(\".mjs\")),\n                     ],\n                 ),\n                 Some((base, \"cjs\")) => (\n                     base,\n                     vec![\n-                        Pattern::Constant(\".cts\".into()),\n-                        Pattern::Constant(\".cjs\".into()),\n+                        Pattern::Constant(rcstr!(\".cts\")),\n+                        Pattern::Constant(rcstr!(\".cjs\")),\n                     ],\n                 ),\n                 _ => {\n@@ -2269,7 +2269,7 @@ async fn resolve_relative_request(\n     let mut results = Vec::new();\n     let matches = read_matches(\n         lookup_path,\n-        \"\".into(),\n+        rcstr!(\"\"),\n         force_in_lookup_dir,\n         Pattern::new(new_path).resolve().await?,\n     )\n@@ -2588,7 +2588,7 @@ async fn resolve_module_request(\n             FindPackageItem::PackageFile(package_path) => {\n                 if path.is_match(\"\") {\n                     let resolved = resolved(\n-                        RequestKey::new(\".\".into()),\n+                        RequestKey::new(rcstr!(\".\")),\n                         *package_path,\n                         lookup_path,\n                         request,\n@@ -2606,13 +2606,13 @@ async fn resolve_module_request(\n \n     let module_result =\n         merge_results_with_affecting_sources(results, result.affecting_sources.clone())\n-            .with_replaced_request_key(\".\".into(), Value::new(RequestKey::new(module.into())));\n+            .with_replaced_request_key(rcstr!(\".\"), Value::new(RequestKey::new(module.into())));\n \n     if options_value.prefer_relative {\n         let module_prefix: RcStr = format!(\"./{module}\").into();\n         let pattern = Pattern::concat([\n             module_prefix.clone().into(),\n-            RcStr::from(\"/\").into(),\n+            rcstr!(\"/\").into(),\n             path.clone(),\n         ]);\n         let relative = Request::relative(Value::new(pattern), query, fragment, true)\n@@ -2652,7 +2652,7 @@ async fn resolve_into_package(\n                 conditions,\n                 unspecified_conditions,\n             } => {\n-                let package_json_path = package_path.join(\"package.json\".into());\n+                let package_json_path = package_path.join(rcstr!(\"package.json\"));\n                 let ExportsFieldResult::Some(exports_field) =\n                     &*exports_field(package_json_path).await?\n                 else {\n@@ -2700,7 +2700,7 @@ async fn resolve_into_package(\n \n     if could_match_others {\n         let mut new_pat = path.clone();\n-        new_pat.push_front(RcStr::from(\".\").into());\n+        new_pat.push_front(rcstr!(\".\").into());\n \n         let relative = Request::relative(Value::new(new_pat), query, fragment, true)\n             .to_resolved()\n@@ -2911,7 +2911,7 @@ async fn handle_exports_imports_field(\n     for (result_path, conditions) in results {\n         if let Some(result_path) = result_path.with_normalized_path() {\n             let request = Request::parse(Value::new(Pattern::Concatenation(vec![\n-                Pattern::Constant(\"./\".into()),\n+                Pattern::Constant(rcstr!(\"./\")),\n                 result_path,\n             ])))\n             .to_resolved()"
        },
        {
            "sha": "4d2e2a5134d7974999d47eeae2c9744a838ff2cc",
            "filename": "turbopack/crates/turbopack-core/src/resolve/options.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Foptions.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Foptions.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Foptions.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -2,7 +2,7 @@ use std::{collections::BTreeMap, future::Future, pin::Pin};\n \n use anyhow::{Result, bail};\n use serde::{Deserialize, Serialize};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     FxIndexSet, NonLocalValue, ResolvedVc, TryJoinIterExt, Value, ValueToString, Vc,\n     debug::ValueDebugFormat, trace::TraceRawVcs,\n@@ -463,9 +463,9 @@ impl ValueToString for ImportMapResult {\n     #[turbo_tasks::function]\n     async fn to_string(&self) -> Result<Vc<RcStr>> {\n         match self {\n-            ImportMapResult::Result(_) => Ok(Vc::cell(\"Resolved by import map\".into())),\n-            ImportMapResult::External(_, _, _) => Ok(Vc::cell(\"TODO external\".into())),\n-            ImportMapResult::AliasExternal { .. } => Ok(Vc::cell(\"TODO external\".into())),\n+            ImportMapResult::Result(_) => Ok(Vc::cell(rcstr!(\"Resolved by import map\"))),\n+            ImportMapResult::External(_, _, _) => Ok(Vc::cell(rcstr!(\"TODO external\"))),\n+            ImportMapResult::AliasExternal { .. } => Ok(Vc::cell(rcstr!(\"TODO external\"))),\n             ImportMapResult::Alias(request, context) => {\n                 let s = if let Some(path) = context {\n                     let path = path.to_string().await?;\n@@ -491,7 +491,7 @@ impl ValueToString for ImportMapResult {\n                     .collect::<Vec<_>>();\n                 Ok(Vc::cell(strings.join(\" | \").into()))\n             }\n-            ImportMapResult::NoEntry => Ok(Vc::cell(\"No import map entry\".into())),\n+            ImportMapResult::NoEntry => Ok(Vc::cell(rcstr!(\"No import map entry\"))),\n         }\n     }\n }"
        },
        {
            "sha": "bbe13d0c23517a5061d899983e8d2153068ca27a",
            "filename": "turbopack/crates/turbopack-core/src/resolve/parse.rs",
            "status": "modified",
            "additions": 20,
            "deletions": 20,
            "changes": 40,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fparse.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fparse.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fparse.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,7 +1,7 @@\n use anyhow::{Ok, Result};\n use lazy_static::lazy_static;\n use regex::Regex;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, Value, ValueToString, Vc};\n \n use super::pattern::Pattern;\n@@ -124,7 +124,7 @@ impl Request {\n                 path: Pattern::Constant(path),\n                 ..\n             } => path.clone(),\n-            Request::Empty => \"\".into(),\n+            Request::Empty => rcstr!(\"\"),\n             Request::PackageInternal {\n                 path: Pattern::Constant(path),\n                 ..\n@@ -158,7 +158,7 @@ impl Request {\n \n         if let Some(remainder) = r.strip_prefix(\"//\") {\n             return Ok(Request::Uri {\n-                protocol: \"//\".into(),\n+                protocol: rcstr!(\"//\"),\n                 remainder: remainder.into(),\n                 query: RcStr::default(),\n                 fragment: RcStr::default(),\n@@ -380,12 +380,12 @@ impl Request {\n                 Self::parse(Value::new(pat))\n             }\n             Request::PackageInternal { path } => {\n-                let mut pat = Pattern::Constant(\"./\".into());\n+                let mut pat = Pattern::Constant(rcstr!(\"./\"));\n                 pat.push(path.clone());\n                 Self::parse(Value::new(pat))\n             }\n             Request::Unknown { path } => {\n-                let mut pat = Pattern::Constant(\"./\".into());\n+                let mut pat = Pattern::Constant(rcstr!(\"./\"));\n                 pat.push(path.clone());\n                 Self::parse(Value::new(pat))\n             }\n@@ -717,7 +717,7 @@ impl Request {\n             }\n             Request::ServerRelative { path, .. } => path.clone(),\n             Request::Windows { path, .. } => path.clone(),\n-            Request::Empty => Pattern::Constant(\"\".into()),\n+            Request::Empty => Pattern::Constant(rcstr!(\"\")),\n             Request::PackageInternal { path } => path.clone(),\n             Request::DataUri {\n                 media_type,\n@@ -785,7 +785,7 @@ impl ValueToString for Request {\n             }\n             Request::ServerRelative { path, .. } => format!(\"server relative {path}\").into(),\n             Request::Windows { path, .. } => format!(\"windows {path}\").into(),\n-            Request::Empty => \"empty\".into(),\n+            Request::Empty => rcstr!(\"empty\"),\n             Request::PackageInternal { path } => format!(\"package internal {path}\").into(),\n             Request::DataUri {\n                 media_type,\n@@ -802,7 +802,7 @@ impl ValueToString for Request {\n                 ..\n             } => format!(\"uri \\\"{protocol}\\\" \\\"{remainder}\\\"\").into(),\n             Request::Unknown { path } => format!(\"unknown {path}\").into(),\n-            Request::Dynamic => \"dynamic\".into(),\n+            Request::Dynamic => rcstr!(\"dynamic\"),\n             Request::Alternatives { requests } => {\n                 let vec = requests.iter().map(|i| i.to_string()).try_join().await?;\n                 vec.iter()\n@@ -835,7 +835,7 @@ mod tests {\n     fn test_split_query_fragment() {\n         assert_eq!(\n             (\n-                Pattern::Constant(\"foo\".into()),\n+                Pattern::Constant(rcstr!(\"foo\")),\n                 RcStr::default(),\n                 RcStr::default()\n             ),\n@@ -845,42 +845,42 @@ mod tests {\n         // from `import './foo'`, ditto for fragments.\n         assert_eq!(\n             (\n-                Pattern::Constant(\"foo\".into()),\n-                RcStr::from(\"?\"),\n+                Pattern::Constant(rcstr!(\"foo\")),\n+                rcstr!(\"?\"),\n                 RcStr::default()\n             ),\n             split_off_query_fragment(\"foo?\")\n         );\n         assert_eq!(\n             (\n-                Pattern::Constant(\"foo\".into()),\n+                Pattern::Constant(rcstr!(\"foo\")),\n                 RcStr::default(),\n-                RcStr::from(\"#\")\n+                rcstr!(\"#\")\n             ),\n             split_off_query_fragment(\"foo#\")\n         );\n         assert_eq!(\n             (\n-                Pattern::Constant(\"foo\".into()),\n-                RcStr::from(\"?bar=baz\"),\n+                Pattern::Constant(rcstr!(\"foo\")),\n+                rcstr!(\"?bar=baz\"),\n                 RcStr::default()\n             ),\n             split_off_query_fragment(\"foo?bar=baz\")\n         );\n         assert_eq!(\n             (\n-                Pattern::Constant(\"foo\".into()),\n+                Pattern::Constant(rcstr!(\"foo\")),\n                 RcStr::default(),\n-                RcStr::from(\"#stuff?bar=baz\")\n+                rcstr!(\"#stuff?bar=baz\")\n             ),\n             split_off_query_fragment(\"foo#stuff?bar=baz\")\n         );\n \n         assert_eq!(\n             (\n-                Pattern::Constant(\"foo\".into()),\n-                RcStr::from(\"?bar=baz\"),\n-                RcStr::from(\"#stuff\")\n+                Pattern::Constant(rcstr!(\"foo\")),\n+                rcstr!(\"?bar=baz\"),\n+                rcstr!(\"#stuff\")\n             ),\n             split_off_query_fragment(\"foo?bar=baz#stuff\")\n         );"
        },
        {
            "sha": "d7bba357a6a0aaae908f9554caf42e9563a94d58",
            "filename": "turbopack/crates/turbopack-core/src/server_fs.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fserver_fs.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fserver_fs.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fserver_fs.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::{Result, bail};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ValueToString, Vc};\n use turbo_tasks_fs::{\n     FileContent, FileMeta, FileSystem, FileSystemPath, LinkContent, RawDirectoryContent,\n@@ -53,6 +53,6 @@ impl FileSystem for ServerFileSystem {\n impl ValueToString for ServerFileSystem {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        Vc::cell(\"root-of-the-server\".into())\n+        Vc::cell(rcstr!(\"root-of-the-server\"))\n     }\n }"
        },
        {
            "sha": "5920daca550f7988f96973740fb3d8f61642a4d5",
            "filename": "turbopack/crates/turbopack-core/src/source_map/source_map_asset.rs",
            "status": "modified",
            "additions": 7,
            "deletions": 17,
            "changes": 24,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fsource_map%2Fsource_map_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fsource_map%2Fsource_map_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fsource_map%2Fsource_map_asset.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,6 @@\n use anyhow::Result;\n use serde::{Deserialize, Serialize};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     FxIndexSet, NonLocalValue, ResolvedVc, ValueToString, Vc, debug::ValueDebugFormat,\n     trace::TraceRawVcs,\n@@ -77,9 +77,9 @@ impl OutputAsset for SourceMapAsset {\n                 chunking_context,\n                 ident_for_path,\n             } => chunking_context\n-                .chunk_path(Some(Vc::upcast(self)), *ident_for_path, \".js\".into())\n-                .append(\".map\".into()),\n-            PathType::Fixed { path } => path.append(\".map\".into()),\n+                .chunk_path(Some(Vc::upcast(self)), *ident_for_path, rcstr!(\".js\"))\n+                .append(rcstr!(\".map\")),\n+            PathType::Fixed { path } => path.append(rcstr!(\".map\")),\n         })\n     }\n }\n@@ -98,21 +98,11 @@ impl Asset for SourceMapAsset {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn introspectable_type() -> Vc<RcStr> {\n-    Vc::cell(\"source map\".into())\n-}\n-\n-#[turbo_tasks::function]\n-fn introspectable_details() -> Vc<RcStr> {\n-    Vc::cell(\"source map of an asset\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl Introspectable for SourceMapAsset {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        introspectable_type()\n+        Vc::cell(rcstr!(\"source map\"))\n     }\n \n     #[turbo_tasks::function]\n@@ -122,7 +112,7 @@ impl Introspectable for SourceMapAsset {\n \n     #[turbo_tasks::function]\n     fn details(&self) -> Vc<RcStr> {\n-        introspectable_details()\n+        Vc::cell(rcstr!(\"source map of an asset\"))\n     }\n \n     #[turbo_tasks::function]\n@@ -131,7 +121,7 @@ impl Introspectable for SourceMapAsset {\n         if let Some(asset) =\n             ResolvedVc::try_sidecast::<Box<dyn Introspectable>>(self.generate_source_map)\n         {\n-            children.insert((ResolvedVc::cell(\"asset\".into()), asset));\n+            children.insert((rcstr!(\"asset\"), asset));\n         }\n         Ok(Vc::cell(children))\n     }"
        },
        {
            "sha": "f20784b33cf531588cec8c1bc3e83d49e0c3eee9",
            "filename": "turbopack/crates/turbopack-css/src/chunk/mod.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 13,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fmod.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -411,21 +411,11 @@ pub trait CssChunkItem: ChunkItem {\n     fn content(self: Vc<Self>) -> Vc<CssChunkItemContent>;\n }\n \n-#[turbo_tasks::function]\n-fn introspectable_type() -> Vc<RcStr> {\n-    Vc::cell(\"css chunk\".into())\n-}\n-\n-#[turbo_tasks::function]\n-fn entry_module_key() -> Vc<RcStr> {\n-    Vc::cell(\"entry module\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl Introspectable for CssChunk {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        introspectable_type()\n+        Vc::cell(rcstr!(\"css chunk\"))\n     }\n \n     #[turbo_tasks::function]\n@@ -461,7 +451,7 @@ impl Introspectable for CssChunk {\n                 .iter()\n                 .map(|chunk_item| async move {\n                     Ok((\n-                        entry_module_key().to_resolved().await?,\n+                        rcstr!(\"entry module\"),\n                         IntrospectableModule::new(chunk_item.module())\n                             .to_resolved()\n                             .await?,\n@@ -482,7 +472,7 @@ pub struct CssChunkType {}\n impl ValueToString for CssChunkType {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        Vc::cell(\"css\".into())\n+        Vc::cell(rcstr!(\"css\"))\n     }\n }\n "
        },
        {
            "sha": "faa436c45ffa936ee9df4b1c0ecd147b6495d730",
            "filename": "turbopack/crates/turbopack-css/src/chunk/single_item_chunk/chunk.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 12,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fsingle_item_chunk%2Fchunk.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fsingle_item_chunk%2Fchunk.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fchunk%2Fsingle_item_chunk%2Fchunk.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -100,7 +100,7 @@ impl OutputAsset for SingleItemCssChunk {\n         Ok(self.await?.chunking_context.chunk_path(\n             Some(Vc::upcast(self)),\n             self.ident_for_path(),\n-            \".single.css\".into(),\n+            rcstr!(\".single.css\"),\n         ))\n     }\n \n@@ -156,21 +156,11 @@ impl GenerateSourceMap for SingleItemCssChunk {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn introspectable_type() -> Vc<RcStr> {\n-    Vc::cell(\"single asset css chunk\".into())\n-}\n-\n-#[turbo_tasks::function]\n-fn entry_module_key() -> Vc<RcStr> {\n-    Vc::cell(\"entry module\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl Introspectable for SingleItemCssChunk {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        introspectable_type()\n+        Vc::cell(rcstr!(\"single asset css chunk\"))\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "71d415640dabb1d37fa1c172b68e9f616bc11bff",
            "filename": "turbopack/crates/turbopack-css/src/process.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 9,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fprocess.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fprocess.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fprocess.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -13,7 +13,7 @@ use rustc_hash::FxHashMap;\n use smallvec::smallvec;\n use swc_core::base::sourcemap::SourceMapBuilder;\n use tracing::Instrument;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{FxIndexMap, ResolvedVc, ValueToString, Vc};\n use turbo_tasks_fs::{FileContent, FileSystemPath, rope::Rope};\n use turbopack_core::{\n@@ -434,7 +434,7 @@ async fn process_content(\n \n                             ParsingIssue {\n                                 file: fs_path_vc,\n-                                msg: ResolvedVc::cell(err.to_string().into()),\n+                                msg: err.to_string().into(),\n                                 source,\n                             }\n                             .resolved_cell()\n@@ -471,7 +471,7 @@ async fn process_content(\n                 };\n                 ParsingIssue {\n                     file: fs_path_vc,\n-                    msg: ResolvedVc::cell(e.to_string().into()),\n+                    msg: e.to_string().into(),\n                     source,\n                 }\n                 .resolved_cell()\n@@ -520,9 +520,8 @@ impl CssError {\n             CssError::CssSelectorInModuleNotPure { selector } => {\n                 ParsingIssue {\n                     file,\n-                    msg: ResolvedVc::cell(\n-                        format!(\"{CSS_MODULE_ERROR}, (lightningcss, {selector})\").into(),\n-                    ),\n+                    msg: format!(\"{CSS_MODULE_ERROR}, (lightningcss, {selector})\").into(),\n+\n                     source: None,\n                 }\n                 .resolved_cell()\n@@ -617,7 +616,7 @@ fn generate_css_source_map(source_map: &parcel_sourcemap::SourceMap) -> Result<R\n \n #[turbo_tasks::value]\n struct ParsingIssue {\n-    msg: ResolvedVc<RcStr>,\n+    msg: RcStr,\n     file: ResolvedVc<FileSystemPath>,\n     source: Option<IssueSource>,\n }\n@@ -636,7 +635,7 @@ impl Issue for ParsingIssue {\n \n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\"Parsing css source code failed\".into()).cell()\n+        StyledString::Text(rcstr!(\"Parsing css source code failed\")).cell()\n     }\n \n     #[turbo_tasks::function]\n@@ -650,7 +649,7 @@ impl Issue for ParsingIssue {\n     #[turbo_tasks::function]\n     async fn description(&self) -> Result<Vc<OptionStyledString>> {\n         Ok(Vc::cell(Some(\n-            StyledString::Text(self.msg.await?.as_str().into()).resolved_cell(),\n+            StyledString::Text(self.msg.clone()).resolved_cell(),\n         )))\n     }\n }"
        },
        {
            "sha": "0f86d3d82f13eb6859471cb780acc05bc639f53a",
            "filename": "turbopack/crates/turbopack-dev-server/src/html.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fhtml.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fhtml.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fhtml.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -40,11 +40,6 @@ pub struct DevHtmlAsset {\n     body: Option<RcStr>,\n }\n \n-#[turbo_tasks::function]\n-fn dev_html_chunk_reference_description() -> Vc<RcStr> {\n-    Vc::cell(\"dev html chunk\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl OutputAsset for DevHtmlAsset {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "a862a52514231b1ac1b8e1b761ef9e231ebdc6b4",
            "filename": "turbopack/crates/turbopack-dev-server/src/introspect/mod.rs",
            "status": "modified",
            "additions": 14,
            "deletions": 8,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fintrospect%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fintrospect%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fintrospect%2Fmod.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -2,7 +2,7 @@ use std::{borrow::Cow, fmt::Display};\n \n use anyhow::Result;\n use rustc_hash::FxHashSet;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ReadRef, ResolvedVc, TryJoinIterExt, Vc};\n use turbo_tasks_fs::{File, json::parse_json_with_source_context};\n use turbopack_core::{\n@@ -22,22 +22,30 @@ pub struct IntrospectionSource {\n     pub roots: FxHashSet<ResolvedVc<Box<dyn Introspectable>>>,\n }\n \n+fn introspection_source() -> RcStr {\n+    rcstr!(\"introspection-source\")\n+}\n+\n #[turbo_tasks::value_impl]\n impl Introspectable for IntrospectionSource {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        Vc::cell(\"introspection-source\".into())\n+        Vc::cell(introspection_source())\n     }\n \n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<RcStr> {\n-        Vc::cell(\"introspection-source\".into())\n+        Vc::cell(introspection_source())\n     }\n \n     #[turbo_tasks::function]\n     fn children(&self) -> Vc<IntrospectableChildren> {\n-        let name = ResolvedVc::cell(\"root\".into());\n-        Vc::cell(self.roots.iter().map(|root| (name, *root)).collect())\n+        Vc::cell(\n+            self.roots\n+                .iter()\n+                .map(|root| (rcstr!(\"root\"), *root))\n+                .collect(),\n+        )\n     }\n }\n \n@@ -127,9 +135,7 @@ impl GetContentSourceContent for IntrospectionSource {\n         let has_children = !children.is_empty();\n         let children = children\n             .iter()\n-            .map(|&(name, child)| async move {\n-                let name = name.await;\n-                let name = str_or_err(&name);\n+            .map(|(name, child)| async move {\n                 let ty = child.ty().await;\n                 let ty = str_or_err(&ty);\n                 let title = child.title().await;"
        },
        {
            "sha": "9d138c7310eb6e36ece45391e107c532b5da49bd",
            "filename": "turbopack/crates/turbopack-dev-server/src/source/asset_graph.rs",
            "status": "modified",
            "additions": 13,
            "deletions": 24,
            "changes": 37,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fasset_graph.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fasset_graph.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fasset_graph.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -2,7 +2,7 @@ use std::{collections::VecDeque, iter::once};\n \n use anyhow::Result;\n use rustc_hash::FxHashSet;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     Completion, FxIndexMap, FxIndexSet, ResolvedVc, State, TryJoinIterExt, Value, ValueToString,\n     Vc, fxindexset,\n@@ -177,7 +177,7 @@ async fn expand(\n     }\n     for (sub_path, asset) in assets {\n         if &*sub_path == \"index.html\" {\n-            map.insert(\"\".into(), asset);\n+            map.insert(rcstr!(\"\"), asset);\n         } else if let Some(p) = sub_path.strip_suffix(\"/index.html\") {\n             map.insert(p.into(), asset);\n             map.insert(format!(\"{p}/\").into(), asset);\n@@ -192,7 +192,7 @@ async fn expand(\n fn get_sub_paths(sub_path: &str) -> ([RcStr; 3], usize) {\n     let sub_paths_buffer: [RcStr; 3];\n     let n = if sub_path == \"index.html\" {\n-        sub_paths_buffer = [\"\".into(), sub_path.into(), Default::default()];\n+        sub_paths_buffer = [rcstr!(\"\"), sub_path.into(), Default::default()];\n         2\n     } else if let Some(p) = sub_path.strip_suffix(\"/index.html\") {\n         sub_paths_buffer = [p.into(), format!(\"{p}/\").into(), sub_path.into()];\n@@ -293,16 +293,11 @@ impl ContentSourceSideEffect for AssetGraphGetContentSourceContent {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn introspectable_type() -> Vc<RcStr> {\n-    Vc::cell(\"asset graph content source\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl Introspectable for AssetGraphContentSource {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        introspectable_type()\n+        Vc::cell(rcstr!(\"asset graph content source\"))\n     }\n \n     #[turbo_tasks::function]\n@@ -315,23 +310,20 @@ impl Introspectable for AssetGraphContentSource {\n         Vc::cell(if let Some(expanded) = &self.expanded {\n             format!(\"{} assets expanded\", expanded.get().len()).into()\n         } else {\n-            \"eager\".into()\n+            rcstr!(\"eager\")\n         })\n     }\n \n     #[turbo_tasks::function]\n     async fn children(self: Vc<Self>) -> Result<Vc<IntrospectableChildren>> {\n         let this = self.await?;\n-        let key = ResolvedVc::cell(\"root\".into());\n-        let inner_key = ResolvedVc::cell(\"inner\".into());\n-        let expanded_key = ResolvedVc::cell(\"expanded\".into());\n \n         let root_assets = this.root_assets.await?;\n         let root_asset_children = root_assets\n             .iter()\n             .map(|&asset| async move {\n                 Ok((\n-                    key,\n+                    rcstr!(\"root\"),\n                     IntrospectableOutputAsset::new(*ResolvedVc::upcast(asset))\n                         .to_resolved()\n                         .await?,\n@@ -346,7 +338,7 @@ impl Introspectable for AssetGraphContentSource {\n             .filter(|&a| !root_assets.contains(a))\n             .map(|&asset| async move {\n                 Ok((\n-                    inner_key,\n+                    rcstr!(\"inner\"),\n                     IntrospectableOutputAsset::new(*ResolvedVc::upcast(asset))\n                         .to_resolved()\n                         .await?,\n@@ -360,27 +352,22 @@ impl Introspectable for AssetGraphContentSource {\n                 .into_iter()\n                 .chain(expanded_asset_children)\n                 .chain(once((\n-                    expanded_key,\n+                    rcstr!(\"expanded\"),\n                     ResolvedVc::upcast(FullyExpanded(self.to_resolved().await?).resolved_cell()),\n                 )))\n                 .collect(),\n         ))\n     }\n }\n \n-#[turbo_tasks::function]\n-fn fully_expanded_introspectable_type() -> Vc<RcStr> {\n-    Vc::cell(\"fully expanded asset graph content source\".into())\n-}\n-\n #[turbo_tasks::value]\n struct FullyExpanded(ResolvedVc<AssetGraphContentSource>);\n \n #[turbo_tasks::value_impl]\n impl Introspectable for FullyExpanded {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        fully_expanded_introspectable_type()\n+        Vc::cell(rcstr!(\"fully expanded asset graph content source\"))\n     }\n \n     #[turbo_tasks::function]\n@@ -391,14 +378,16 @@ impl Introspectable for FullyExpanded {\n     #[turbo_tasks::function]\n     async fn children(&self) -> Result<Vc<IntrospectableChildren>> {\n         let source = self.0.await?;\n-        let key = ResolvedVc::cell(\"asset\".into());\n \n         let expanded_assets =\n             expand(&*source.root_assets.await?, &*source.root_path.await?, None).await?;\n         let children = expanded_assets\n             .iter()\n             .map(|(_k, &v)| async move {\n-                Ok((key, IntrospectableOutputAsset::new(*v).to_resolved().await?))\n+                Ok((\n+                    rcstr!(\"asset\"),\n+                    IntrospectableOutputAsset::new(*v).to_resolved().await?,\n+                ))\n             })\n             .try_join()\n             .await?"
        },
        {
            "sha": "ed2b96d946f7423b49a3b03059ce3eb8d2883d38",
            "filename": "turbopack/crates/turbopack-dev-server/src/source/combined.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fcombined.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fcombined.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fcombined.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, Vc};\n use turbopack_core::introspect::{Introspectable, IntrospectableChildren};\n \n@@ -47,7 +47,7 @@ impl ContentSource for CombinedContentSource {\n impl Introspectable for CombinedContentSource {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        Vc::cell(\"combined content source\".into())\n+        Vc::cell(rcstr!(\"combined content source\"))\n     }\n \n     #[turbo_tasks::function]\n@@ -85,7 +85,6 @@ impl Introspectable for CombinedContentSource {\n \n     #[turbo_tasks::function]\n     async fn children(&self) -> Result<Vc<IntrospectableChildren>> {\n-        let source = ResolvedVc::cell(\"source\".into());\n         Ok(Vc::cell(\n             self.sources\n                 .iter()\n@@ -95,7 +94,7 @@ impl Introspectable for CombinedContentSource {\n                 .await?\n                 .into_iter()\n                 .flatten()\n-                .map(|i| (source, i))\n+                .map(|i| (rcstr!(\"source\"), i))\n                 .collect(),\n         ))\n     }"
        },
        {
            "sha": "7365cbe4db570c74ebbf9e9a0d30a4fff17f4450",
            "filename": "turbopack/crates/turbopack-dev-server/src/source/conditional.rs",
            "status": "modified",
            "additions": 10,
            "deletions": 32,
            "changes": 42,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fconditional.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fconditional.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fconditional.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,6 @@\n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n-use turbo_tasks::{Completion, ResolvedVc, State, TryJoinIterExt, Value, Vc};\n+use turbo_rcstr::{RcStr, rcstr};\n+use turbo_tasks::{Completion, ResolvedVc, State, Value, Vc};\n use turbopack_core::introspect::{Introspectable, IntrospectableChildren};\n \n use super::{\n@@ -90,38 +90,20 @@ impl MapGetContentSourceContent for ConditionalContentSourceMapper {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn introspectable_type() -> Vc<RcStr> {\n-    Vc::cell(\"conditional content source\".into())\n-}\n-\n-#[turbo_tasks::function]\n-fn activator_key() -> Vc<RcStr> {\n-    Vc::cell(\"activator\".into())\n-}\n-\n-#[turbo_tasks::function]\n-fn action_key() -> Vc<RcStr> {\n-    Vc::cell(\"action\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl Introspectable for ConditionalContentSource {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        introspectable_type()\n+        Vc::cell(rcstr!(\"conditional content source\"))\n     }\n \n     #[turbo_tasks::function]\n     fn details(&self) -> Vc<RcStr> {\n-        Vc::cell(\n-            if *self.activated.get() {\n-                \"activated\"\n-            } else {\n-                \"not activated\"\n-            }\n-            .into(),\n-        )\n+        Vc::cell(if *self.activated.get() {\n+            rcstr!(\"activated\")\n+        } else {\n+            rcstr!(\"not activated\")\n+        })\n     }\n \n     #[turbo_tasks::function]\n@@ -139,16 +121,12 @@ impl Introspectable for ConditionalContentSource {\n         Ok(Vc::cell(\n             [\n                 ResolvedVc::try_sidecast::<Box<dyn Introspectable>>(self.activator)\n-                    .map(|i| (activator_key(), i)),\n+                    .map(|i| (rcstr!(\"activator\"), i)),\n                 ResolvedVc::try_sidecast::<Box<dyn Introspectable>>(self.action)\n-                    .map(|i| (action_key(), i)),\n+                    .map(|i| (rcstr!(\"action\"), i)),\n             ]\n             .into_iter()\n             .flatten()\n-            .map(|(k, v)| async move { Ok((k.to_resolved().await?, v)) })\n-            .try_join()\n-            .await?\n-            .into_iter()\n             .collect(),\n         ))\n     }"
        },
        {
            "sha": "449408cff2852f2630be886df41e57fa3cbf8809",
            "filename": "turbopack/crates/turbopack-dev-server/src/source/issue_context.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fissue_context.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fissue_context.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fissue_context.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Value, Vc};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::{\n@@ -156,7 +156,7 @@ impl Introspectable for IssueFilePathContentSource {\n             if let Some(source) = ResolvedVc::try_sidecast::<Box<dyn Introspectable>>(self.source) {\n                 source.ty()\n             } else {\n-                Vc::cell(\"IssueContextContentSource\".into())\n+                Vc::cell(rcstr!(\"IssueContextContentSource\"))\n             },\n         )\n     }"
        },
        {
            "sha": "644f999b44d88c1973ee915c9e007f84fa2ba03b",
            "filename": "turbopack/crates/turbopack-dev-server/src/source/lazy_instantiated.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 18,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Flazy_instantiated.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Flazy_instantiated.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Flazy_instantiated.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,6 @@\n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n-use turbo_tasks::{ResolvedVc, TryJoinIterExt, Vc};\n+use turbo_rcstr::{RcStr, rcstr};\n+use turbo_tasks::{ResolvedVc, Vc};\n use turbopack_core::introspect::{Introspectable, IntrospectableChildren};\n \n use super::{ContentSource, route_tree::RouteTree};\n@@ -28,21 +28,11 @@ impl ContentSource for LazyInstantiatedContentSource {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn introspectable_type() -> Vc<RcStr> {\n-    Vc::cell(\"lazy instantiated content source\".into())\n-}\n-\n-#[turbo_tasks::function]\n-fn source_key() -> Vc<RcStr> {\n-    Vc::cell(\"source\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl Introspectable for LazyInstantiatedContentSource {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        introspectable_type()\n+        Vc::cell(rcstr!(\"lazy instantiated content source\"))\n     }\n \n     #[turbo_tasks::function]\n@@ -51,13 +41,9 @@ impl Introspectable for LazyInstantiatedContentSource {\n             [ResolvedVc::try_sidecast::<Box<dyn Introspectable>>(\n                 self.get_source.content_source().to_resolved().await?,\n             )\n-            .map(|i| (source_key(), i))]\n+            .map(|i| (rcstr!(\"source\"), i))]\n             .into_iter()\n             .flatten()\n-            .map(|(k, v)| async move { Ok((k.to_resolved().await?, v)) })\n-            .try_join()\n-            .await?\n-            .into_iter()\n             .collect(),\n         ))\n     }"
        },
        {
            "sha": "aa2ba3fecb8cb924b6b68d5364684c72c70ef268",
            "filename": "turbopack/crates/turbopack-dev-server/src/source/router.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 10,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Frouter.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Frouter.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Frouter.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,7 +1,7 @@\n use std::iter::once;\n \n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, Value, Vc};\n use turbopack_core::introspect::{Introspectable, IntrospectableChildren};\n \n@@ -63,14 +63,9 @@ async fn get_introspection_children(\n             .iter()\n             .cloned()\n             .chain(std::iter::once((RcStr::default(), *fallback)))\n-            .map(|(path, source)| async move {\n-                Ok(ResolvedVc::try_sidecast::<Box<dyn Introspectable>>(source)\n-                    .map(|i| (ResolvedVc::cell(path), i)))\n+            .filter_map(|(path, source)| {\n+                ResolvedVc::try_sidecast::<Box<dyn Introspectable>>(source).map(|i| (path, i))\n             })\n-            .try_join()\n-            .await?\n-            .into_iter()\n-            .flatten()\n             .collect(),\n     ))\n }\n@@ -169,7 +164,7 @@ impl GetContentSourceContent for PrefixedRouterGetContentSourceContent {\n         let prefix = self.mapper.await?.prefix.await?;\n         if let Some(path) = path.strip_prefix(&**prefix) {\n             if path.is_empty() {\n-                return Ok(self.get_content.get(\"\".into(), data));\n+                return Ok(self.get_content.get(RcStr::default(), data));\n             } else if prefix.is_empty() {\n                 return Ok(self.get_content.get(path.into(), data));\n             } else if let Some(path) = path.strip_prefix('/') {\n@@ -184,7 +179,7 @@ impl GetContentSourceContent for PrefixedRouterGetContentSourceContent {\n impl Introspectable for PrefixedRouterContentSource {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        Vc::cell(\"prefixed router content source\".into())\n+        Vc::cell(rcstr!(\"prefixed router content source\"))\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "c09e8fcff16aeb2610e15fbf3a770e24750959e9",
            "filename": "turbopack/crates/turbopack-dev-server/src/source/static_assets.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fstatic_assets.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fstatic_assets.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-dev-server%2Fsrc%2Fsource%2Fstatic_assets.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, Value, Vc};\n use turbo_tasks_fs::{DirectoryContent, DirectoryEntry, FileSystemPath};\n use turbopack_core::{\n@@ -108,7 +108,7 @@ impl GetContentSourceContent for StaticAssetsContentSourceItem {\n impl Introspectable for StaticAssetsContentSource {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        Vc::cell(\"static assets directory content source\".into())\n+        Vc::cell(rcstr!(\"static assets directory content source\"))\n     }\n \n     #[turbo_tasks::function]\n@@ -144,7 +144,7 @@ impl Introspectable for StaticAssetsContentSource {\n                             todo!(\"unsupported DirectoryContent variant: {entry:?}\")\n                         }\n                     };\n-                    Ok((ResolvedVc::cell(name.clone()), child))\n+                    Ok((name.clone(), child))\n                 }\n             })\n             .try_join()"
        },
        {
            "sha": "391984695be13789178e9ea9bfe7be85f86cf8f6",
            "filename": "turbopack/crates/turbopack-ecmascript-plugins/src/transform/directives/client.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript-plugins%2Fsrc%2Ftransform%2Fdirectives%2Fclient.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript-plugins%2Fsrc%2Ftransform%2Fdirectives%2Fclient.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-plugins%2Fsrc%2Ftransform%2Fdirectives%2Fclient.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -2,18 +2,17 @@ use anyhow::Result;\n use async_trait::async_trait;\n use swc_core::ecma::{ast::Program, transforms::base::resolver, visit::VisitMutWith};\n use turbo_rcstr::RcStr;\n-use turbo_tasks::ResolvedVc;\n use turbopack_ecmascript::{CustomTransformer, TransformContext};\n \n use super::{is_client_module, server_to_client_proxy::create_proxy_module};\n \n #[derive(Debug)]\n pub struct ClientDirectiveTransformer {\n-    transition_name: ResolvedVc<RcStr>,\n+    transition_name: RcStr,\n }\n \n impl ClientDirectiveTransformer {\n-    pub fn new(transition_name: ResolvedVc<RcStr>) -> Self {\n+    pub fn new(transition_name: RcStr) -> Self {\n         Self { transition_name }\n     }\n }\n@@ -23,8 +22,10 @@ impl CustomTransformer for ClientDirectiveTransformer {\n     #[tracing::instrument(level = tracing::Level::TRACE, name = \"client_directive\", skip_all)]\n     async fn transform(&self, program: &mut Program, ctx: &TransformContext<'_>) -> Result<()> {\n         if is_client_module(program) {\n-            let transition_name = &*self.transition_name.await?;\n-            *program = create_proxy_module(transition_name, &format!(\"./{}\", ctx.file_name_str));\n+            *program = create_proxy_module(\n+                self.transition_name.as_str(),\n+                &format!(\"./{}\", ctx.file_name_str),\n+            );\n             program.visit_mut_with(&mut resolver(\n                 ctx.unresolved_mark,\n                 ctx.top_level_mark,"
        },
        {
            "sha": "0cf861036c19bc612a1dda7f9f9b671cd37d427a",
            "filename": "turbopack/crates/turbopack-ecmascript-plugins/src/transform/swc_ecma_transform_plugins.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript-plugins%2Fsrc%2Ftransform%2Fswc_ecma_transform_plugins.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript-plugins%2Fsrc%2Ftransform%2Fswc_ecma_transform_plugins.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-plugins%2Fsrc%2Ftransform%2Fswc_ecma_transform_plugins.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,7 @@\n use anyhow::Result;\n use async_trait::async_trait;\n use swc_core::ecma::ast::Program;\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::issue::{Issue, IssueSeverity, IssueStage, OptionStyledString, StyledString};\n@@ -66,8 +67,10 @@ impl Issue for UnsupportedSwcEcmaTransformPluginsIssue {\n \n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\"Unsupported SWC EcmaScript transform plugins on this platform.\".into())\n-            .cell()\n+        StyledString::Text(rcstr!(\n+            \"Unsupported SWC EcmaScript transform plugins on this platform.\"\n+        ))\n+        .cell()\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "456014b84fe7d63e0ad34dc2d87a74b1e1f270de",
            "filename": "turbopack/crates/turbopack-ecmascript-runtime/src/browser_runtime.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 11,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fsrc%2Fbrowser_runtime.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fsrc%2Fbrowser_runtime.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript-runtime%2Fsrc%2Fbrowser_runtime.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -2,7 +2,7 @@ use std::io::Write;\n \n use anyhow::Result;\n use indoc::writedoc;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{Value, Vc};\n use turbopack_core::{\n     code_builder::{Code, CodeBuilder},\n@@ -17,17 +17,17 @@ use crate::{RuntimeType, asset_context::get_runtime_asset_context, embed_js::emb\n #[turbo_tasks::function]\n pub async fn get_browser_runtime_code(\n     environment: Vc<Environment>,\n-    chunk_base_path: Vc<Option<RcStr>>,\n-    chunk_suffix_path: Vc<Option<RcStr>>,\n+    chunk_base_path: Option<RcStr>,\n+    chunk_suffix_path: Option<RcStr>,\n     runtime_type: Value<RuntimeType>,\n-    output_root_to_root_path: Vc<RcStr>,\n+    output_root_to_root_path: RcStr,\n     generate_source_map: bool,\n ) -> Result<Vc<Code>> {\n     let asset_context = get_runtime_asset_context(environment).await?;\n \n     let shared_runtime_utils_code = embed_static_code(\n         asset_context,\n-        \"shared/runtime-utils.ts\".into(),\n+        rcstr!(\"shared/runtime-utils.ts\"),\n         generate_source_map,\n     );\n \n@@ -78,10 +78,8 @@ pub async fn get_browser_runtime_code(\n     };\n \n     let mut code: CodeBuilder = CodeBuilder::default();\n-    let relative_root_path = output_root_to_root_path.await?;\n-    let chunk_base_path = &*chunk_base_path.await?;\n+    let relative_root_path = output_root_to_root_path;\n     let chunk_base_path = chunk_base_path.as_ref().map_or_else(|| \"\", |f| f.as_str());\n-    let chunk_suffix_path = &*chunk_suffix_path.await?;\n     let chunk_suffix_path = chunk_suffix_path\n         .as_ref()\n         .map_or_else(|| \"\", |f| f.as_str());\n@@ -116,7 +114,7 @@ pub async fn get_browser_runtime_code(\n         code.push_code(\n             &*embed_static_code(\n                 asset_context,\n-                \"shared-node/base-externals-utils.ts\".into(),\n+                rcstr!(\"shared-node/base-externals-utils.ts\"),\n                 generate_source_map,\n             )\n             .await?,\n@@ -126,7 +124,7 @@ pub async fn get_browser_runtime_code(\n         code.push_code(\n             &*embed_static_code(\n                 asset_context,\n-                \"shared-node/node-externals-utils.ts\".into(),\n+                rcstr!(\"shared-node/node-externals-utils.ts\"),\n                 generate_source_map,\n             )\n             .await?,\n@@ -136,7 +134,7 @@ pub async fn get_browser_runtime_code(\n         code.push_code(\n             &*embed_static_code(\n                 asset_context,\n-                \"shared-node/node-wasm-utils.ts\".into(),\n+                rcstr!(\"shared-node/node-wasm-utils.ts\"),\n                 generate_source_map,\n             )\n             .await?,"
        },
        {
            "sha": "ae079d1d996debf780c10c32707e5e1c937383cd",
            "filename": "turbopack/crates/turbopack-ecmascript/src/analyzer/imports.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fimports.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fimports.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fimports.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -11,7 +11,7 @@ use swc_core::{\n         visit::{Visit, VisitWith},\n     },\n };\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{FxIndexMap, FxIndexSet, ResolvedVc};\n use turbopack_core::{issue::IssueSource, source::Source};\n \n@@ -658,7 +658,7 @@ impl Visit for Analyzer<'_> {\n     fn visit_export_default_specifier(&mut self, n: &ExportDefaultSpecifier) {\n         self.data\n             .exports\n-            .insert(\"default\".into(), n.exported.to_id());\n+            .insert(rcstr!(\"default\"), n.exported.to_id());\n     }\n \n     fn visit_export_namespace_specifier(&mut self, n: &ExportNamespaceSpecifier) {"
        },
        {
            "sha": "1cf3273b5931f965f8508702be8cdb02440b4412",
            "filename": "turbopack/crates/turbopack-ecmascript/src/analyzer/mod.rs",
            "status": "modified",
            "additions": 13,
            "deletions": 3,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fmod.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -3847,6 +3847,7 @@ fn is_unresolved_id(i: &Id, unresolved_mark: Mark) -> bool {\n #[doc(hidden)]\n pub mod test_utils {\n     use anyhow::Result;\n+    use turbo_rcstr::rcstr;\n     use turbo_tasks::{FxIndexMap, Vc};\n     use turbopack_core::{compile_time_info::CompileTimeInfo, error::PrettyPrintError};\n \n@@ -3907,9 +3908,18 @@ pub mod test_utils {\n                 Ok(options) => {\n                     let mut map = FxIndexMap::default();\n \n-                    map.insert(\"./a\".into(), format!(\"[context: {}]/a\", options.dir).into());\n-                    map.insert(\"./b\".into(), format!(\"[context: {}]/b\", options.dir).into());\n-                    map.insert(\"./c\".into(), format!(\"[context: {}]/c\", options.dir).into());\n+                    map.insert(\n+                        rcstr!(\"./a\"),\n+                        format!(\"[context: {}]/a\", options.dir).into(),\n+                    );\n+                    map.insert(\n+                        rcstr!(\"./b\"),\n+                        format!(\"[context: {}]/b\", options.dir).into(),\n+                    );\n+                    map.insert(\n+                        rcstr!(\"./c\"),\n+                        format!(\"[context: {}]/c\", options.dir).into(),\n+                    );\n \n                     JsValue::WellKnownFunction(WellKnownFunctionKind::RequireContextRequire(\n                         RequireContextValue(map),"
        },
        {
            "sha": "ed831b885805a6ea378029895b54f17878673d7b",
            "filename": "turbopack/crates/turbopack-ecmascript/src/async_chunk/chunk_item.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fchunk_item.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fchunk_item.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fchunk_item.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,5 @@\n use anyhow::Result;\n use indoc::formatdoc;\n-use turbo_rcstr::RcStr;\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, Value, Vc};\n use turbopack_core::{\n     chunk::{\n@@ -152,11 +151,6 @@ impl EcmascriptChunkItem for AsyncLoaderChunkItem {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn chunk_reference_description() -> Vc<RcStr> {\n-    Vc::cell(\"chunk\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkItem for AsyncLoaderChunkItem {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "c94cb701c4e92d005b0f5c53864f41db27de90a9",
            "filename": "turbopack/crates/turbopack-ecmascript/src/async_chunk/module.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 12,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fasync_chunk%2Fmodule.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::Result;\n-use turbo_rcstr::{RcStr, rcstr};\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Value, Vc};\n use turbopack_core::{\n     asset::{Asset, AssetContent},\n@@ -12,11 +12,6 @@ use turbopack_core::{\n \n use crate::async_chunk::chunk_item::AsyncLoaderChunkItem;\n \n-#[turbo_tasks::function]\n-fn async_loader_modifier() -> Vc<RcStr> {\n-    Vc::cell(\"async loader\".into())\n-}\n-\n /// The AsyncLoaderModule is a module that loads another module async, by\n /// putting it into a separate chunk group.\n #[turbo_tasks::value]\n@@ -47,11 +42,6 @@ impl AsyncLoaderModule {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn inner_module_reference_description() -> Vc<RcStr> {\n-    Vc::cell(\"async module\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl Module for AsyncLoaderModule {\n     #[turbo_tasks::function]\n@@ -64,7 +54,7 @@ impl Module for AsyncLoaderModule {\n         Ok(Vc::cell(vec![ResolvedVc::upcast(\n             SingleModuleReference::new(\n                 *ResolvedVc::upcast(self.await?.inner),\n-                inner_module_reference_description(),\n+                rcstr!(\"async module\"),\n             )\n             .to_resolved()\n             .await?,"
        },
        {
            "sha": "67efe26cadb5baf7a04e08e15461af3654b25d72",
            "filename": "turbopack/crates/turbopack-ecmascript/src/chunk/chunk_type.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fchunk_type.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fchunk_type.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fchunk_type.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::{Result, bail};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, ValueDefault, ValueToString, Vc};\n use turbopack_core::{\n     chunk::{\n@@ -20,7 +20,7 @@ pub struct EcmascriptChunkType {}\n impl ValueToString for EcmascriptChunkType {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        Vc::cell(\"ecmascript\".into())\n+        Vc::cell(rcstr!(\"ecmascript\"))\n     }\n }\n "
        },
        {
            "sha": "51609ea6106597019a5469409d90fbacd7d8e5e1",
            "filename": "turbopack/crates/turbopack-ecmascript/src/chunk/item.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fitem.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fitem.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fitem.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -2,6 +2,7 @@ use std::io::Write;\n \n use anyhow::{Result, bail};\n use serde::{Deserialize, Serialize};\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{\n     NonLocalValue, ResolvedVc, TaskInput, Upcast, ValueToString, Vc, trace::TraceRawVcs,\n };\n@@ -271,7 +272,7 @@ async fn module_factory_with_code_generation_issue(\n                 CodeGenerationIssue {\n                     severity: IssueSeverity::Error.resolved_cell(),\n                     path: chunk_item.asset_ident().path().to_resolved().await?,\n-                    title: StyledString::Text(\"Code generation for chunk item errored\".into())\n+                    title: StyledString::Text(rcstr!(\"Code generation for chunk item errored\"))\n                         .resolved_cell(),\n                     message: StyledString::Text(error_message).resolved_cell(),\n                 }"
        },
        {
            "sha": "e8760cf17eddfab3e1b0bc5907437a94c85baaa9",
            "filename": "turbopack/crates/turbopack-ecmascript/src/chunk/mod.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 13,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fmod.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -165,21 +165,11 @@ impl EcmascriptChunk {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn introspectable_type() -> Vc<RcStr> {\n-    Vc::cell(\"ecmascript chunk\".into())\n-}\n-\n-#[turbo_tasks::function]\n-fn chunk_item_module_key() -> Vc<RcStr> {\n-    Vc::cell(\"module\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl Introspectable for EcmascriptChunk {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        introspectable_type()\n+        Vc::cell(rcstr!(\"ecmascript chunk\"))\n     }\n \n     #[turbo_tasks::function]\n@@ -203,10 +193,9 @@ impl Introspectable for EcmascriptChunk {\n         let mut children = children_from_output_assets(self.references())\n             .owned()\n             .await?;\n-        let chunk_item_module_key = chunk_item_module_key().to_resolved().await?;\n         for chunk_item in self.await?.content.included_chunk_items().await? {\n             children.insert((\n-                chunk_item_module_key,\n+                rcstr!(\"module\"),\n                 IntrospectableModule::new(chunk_item.module())\n                     .to_resolved()\n                     .await?,"
        },
        {
            "sha": "623be779828f786b0cef6c917401b6f74f419fae",
            "filename": "turbopack/crates/turbopack-ecmascript/src/chunk/placeable.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fplaceable.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fplaceable.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fchunk%2Fplaceable.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,4 +1,5 @@\n use anyhow::Result;\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, TryFlatJoinIterExt, Vc};\n use turbo_tasks_fs::{FileJsonContent, FileSystemPath, glob::Glob};\n use turbopack_core::{\n@@ -150,7 +151,7 @@ impl Issue for SideEffectsInPackageJsonIssue {\n \n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\"Invalid value for sideEffects in package.json\".into()).cell()\n+        StyledString::Text(rcstr!(\"Invalid value for sideEffects in package.json\")).cell()\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "01b862a7826d6339891ad220cccccdd91b628b2c",
            "filename": "turbopack/crates/turbopack-ecmascript/src/manifest/chunk_asset.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Fchunk_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Fchunk_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Fchunk_asset.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -105,16 +105,17 @@ impl ManifestAsyncModule {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn manifest_chunk_reference_description() -> Vc<RcStr> {\n-    Vc::cell(\"manifest chunk\".into())\n+fn manifest_chunk_reference_description() -> RcStr {\n+    rcstr!(\"manifest chunk\")\n }\n \n #[turbo_tasks::value_impl]\n impl Module for ManifestAsyncModule {\n     #[turbo_tasks::function]\n     fn ident(&self) -> Vc<AssetIdent> {\n-        self.inner.ident().with_modifier(rcstr!(\"manifest chunk\"))\n+        self.inner\n+            .ident()\n+            .with_modifier(manifest_chunk_reference_description())\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "37cc5e0ec45d19dece56c1177192e07cb35bf4d0",
            "filename": "turbopack/crates/turbopack-ecmascript/src/manifest/loader_item.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Floader_item.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Floader_item.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fmanifest%2Floader_item.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -77,16 +77,6 @@ impl ManifestLoaderChunkItem {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn manifest_loader_chunk_reference_description() -> Vc<RcStr> {\n-    Vc::cell(\"manifest loader chunk\".into())\n-}\n-\n-#[turbo_tasks::function]\n-fn chunk_data_reference_description() -> Vc<RcStr> {\n-    Vc::cell(\"chunk data reference\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkItem for ManifestLoaderChunkItem {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "5883fe7efd761eef9728fae83d527c78e309b662",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/async_module.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fasync_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fasync_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fasync_module.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -5,6 +5,7 @@ use swc_core::{\n     ecma::ast::{ArrayLit, ArrayPat, Expr, Ident},\n     quote,\n };\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{\n     FxIndexSet, NonLocalValue, ReadRef, ResolvedVc, TryFlatJoinIterExt, TryJoinIterExt, Vc,\n     trace::TraceRawVcs,\n@@ -213,7 +214,7 @@ impl AsyncModule {\n                     .collect::<Vec<_>>();\n \n                 return Ok(CodeGeneration::hoisted_stmts([\n-                    CodeGenerationHoistedStmt::new(\"__turbopack_async_dependencies__\".into(),\n+                    CodeGenerationHoistedStmt::new(rcstr!(\"__turbopack_async_dependencies__\"),\n                         quote!(\n                             \"var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__($deps);\"\n                                 as Stmt,\n@@ -226,7 +227,7 @@ impl AsyncModule {\n                             })\n                         )\n                     ),\n-                    CodeGenerationHoistedStmt::new(\"__turbopack_async_dependencies__ await\".into(),\n+                    CodeGenerationHoistedStmt::new(rcstr!(\"__turbopack_async_dependencies__ await\"),\n                         quote!(\n                             \"($deps = __turbopack_async_dependencies__.then ? (await \\\n                             __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);\" as Stmt,"
        },
        {
            "sha": "2c46ca7595f3b2e313ddee16f4925871b775837f",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/esm/base.rs",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fbase.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fbase.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fbase.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -5,7 +5,7 @@ use swc_core::{\n     ecma::ast::{Decl, Expr, ExprStmt, Ident, Stmt},\n     quote,\n };\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Value, ValueToString, Vc};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::{\n@@ -453,9 +453,9 @@ impl Issue for InvalidExport {\n     #[turbo_tasks::function]\n     async fn title(&self) -> Result<Vc<StyledString>> {\n         Ok(StyledString::Line(vec![\n-            StyledString::Text(\"Export \".into()),\n+            StyledString::Text(rcstr!(\"Export \")),\n             StyledString::Code(self.export.clone()),\n-            StyledString::Text(\" doesn't exist in target module\".into()),\n+            StyledString::Text(rcstr!(\" doesn't exist in target module\")),\n         ])\n         .cell())\n     }\n@@ -481,20 +481,20 @@ impl Issue for InvalidExport {\n         Ok(Vc::cell(Some(\n             StyledString::Stack(vec![\n                 StyledString::Line(vec![\n-                    StyledString::Text(\"The export \".into()),\n+                    StyledString::Text(rcstr!(\"The export \")),\n                     StyledString::Code(self.export.clone()),\n-                    StyledString::Text(\" was not found in module \".into()),\n+                    StyledString::Text(rcstr!(\" was not found in module \")),\n                     StyledString::Strong(self.module.ident().to_string().owned().await?),\n-                    StyledString::Text(\".\".into()),\n+                    StyledString::Text(rcstr!(\".\")),\n                 ]),\n                 if let Some(did_you_mean) = did_you_mean {\n                     StyledString::Line(vec![\n-                        StyledString::Text(\"Did you mean to import \".into()),\n+                        StyledString::Text(rcstr!(\"Did you mean to import \")),\n                         StyledString::Code(did_you_mean.clone()),\n-                        StyledString::Text(\"?\".into()),\n+                        StyledString::Text(rcstr!(\"?\")),\n                     ])\n                 } else {\n-                    StyledString::Strong(\"The module has no exports at all.\".into())\n+                    StyledString::Strong(rcstr!(\"The module has no exports at all.\"))\n                 },\n                 StyledString::Text(\n                     \"All exports of the module are statically known (It doesn't have dynamic \\\n@@ -511,7 +511,7 @@ impl Issue for InvalidExport {\n         let export_names = all_known_export_names(*self.module).await?;\n         Ok(Vc::cell(Some(\n             StyledString::Line(vec![\n-                StyledString::Text(\"These are the exports of the module:\\n\".into()),\n+                StyledString::Text(rcstr!(\"These are the exports of the module:\\n\")),\n                 StyledString::Code(\n                     export_names\n                         .iter()"
        },
        {
            "sha": "9cd2600d752e581cedc8bd3c4c44ae65ebfdc042",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/esm/export.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fexport.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fexport.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fexport.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -11,7 +11,7 @@ use swc_core::{\n     },\n     quote, quote_expr,\n };\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     FxIndexMap, FxIndexSet, NonLocalValue, ResolvedVc, TryFlatJoinIterExt, ValueToString, Vc,\n     trace::TraceRawVcs,\n@@ -461,7 +461,7 @@ async fn emit_star_exports_issue(source_ident: Vc<AssetIdent>, message: RcStr) -\n     AnalyzeIssue::new(\n         IssueSeverity::Warning,\n         source_ident,\n-        Vc::cell(\"unexpected export *\".into()),\n+        Vc::cell(rcstr!(\"unexpected export *\")),\n         StyledString::Text(message).cell(),\n         None,\n         None,\n@@ -680,12 +680,12 @@ impl EsmExports {\n         Ok(CodeGeneration::new(\n             vec![],\n             [dynamic_stmt\n-                .map(|stmt| CodeGenerationHoistedStmt::new(\"__turbopack_dynamic__\".into(), stmt))]\n+                .map(|stmt| CodeGenerationHoistedStmt::new(rcstr!(\"__turbopack_dynamic__\"), stmt))]\n             .into_iter()\n             .flatten()\n             .collect(),\n             vec![CodeGenerationHoistedStmt::new(\n-                \"__turbopack_esm__\".into(),\n+                rcstr!(\"__turbopack_esm__\"),\n                 quote!(\"$turbopack_esm($getters);\" as Stmt,\n                     turbopack_esm: Expr = TURBOPACK_ESM.into(),\n                     getters: Expr = getters"
        },
        {
            "sha": "ecf88319cc6b0fdef60c95601b8e2518f8aed5fd",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/esm/meta.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fmeta.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fmeta.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fesm%2Fmeta.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -7,6 +7,7 @@ use swc_core::{\n     ecma::ast::{Expr, Ident},\n     quote,\n };\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{NonLocalValue, ResolvedVc, Vc, debug::ValueDebugFormat, trace::TraceRawVcs};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::{chunk::ChunkingContext, module_graph::ModuleGraph};\n@@ -62,7 +63,7 @@ impl ImportMetaBinding {\n         );\n \n         Ok(CodeGeneration::hoisted_stmt(\n-            \"import.meta\".into(),\n+            rcstr!(\"import.meta\"),\n             // [NOTE] url property is lazy-evaluated, as it should be computed once\n             // turbopack_runtime injects a function to calculate an absolute path.\n             quote!("
        },
        {
            "sha": "0233fb38885989b60223e9e8fcd98360e1e927a6",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/external_module.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fexternal_module.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -118,7 +118,7 @@ impl CachedExternalModule {\n impl Module for CachedExternalModule {\n     #[turbo_tasks::function]\n     fn ident(&self) -> Vc<AssetIdent> {\n-        let fs = VirtualFileSystem::new_with_name(\"externals\".into());\n+        let fs = VirtualFileSystem::new_with_name(rcstr!(\"externals\"));\n \n         AssetIdent::from_path(fs.root().join(self.request.clone()))\n             .with_layer(rcstr!(\"external\"))\n@@ -212,7 +212,7 @@ pub struct CachedExternalModuleChunkItem {\n // Without this wrapper, VirtualFileSystem::new_with_name always returns a new filesystem\n #[turbo_tasks::function]\n fn external_fs() -> Vc<VirtualFileSystem> {\n-    VirtualFileSystem::new_with_name(\"externals\".into())\n+    VirtualFileSystem::new_with_name(rcstr!(\"externals\"))\n }\n \n #[turbo_tasks::value_impl]"
        },
        {
            "sha": "465451e422d560024eabed1f19a2d905fe996054",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/mod.rs",
            "status": "modified",
            "additions": 14,
            "deletions": 14,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fmod.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -51,7 +51,7 @@ use swc_core::{\n     },\n };\n use tracing::Instrument;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     FxIndexMap, FxIndexSet, NonLocalValue, ReadRef, ResolvedVc, TaskInput, TryJoinIterExt, Upcast,\n     Value, ValueToString, Vc, trace::TraceRawVcs,\n@@ -979,8 +979,8 @@ pub(crate) async fn analyse_ecmascript_module_internal(\n             AnalyzeIssue::new(\n                 IssueSeverity::Error,\n                 source.ident(),\n-                Vc::cell(\"unexpected top level await\".into()),\n-                StyledString::Text(\"top level await is only supported in ESM modules.\".into())\n+                Vc::cell(rcstr!(\"unexpected top level await\")),\n+                StyledString::Text(rcstr!(\"top level await is only supported in ESM modules.\"))\n                     .cell(),\n                 None,\n                 Some(issue_source(source, span)),\n@@ -1468,34 +1468,34 @@ async fn compile_time_info_for_module_type(\n     };\n     free_var_references\n         .entry(vec![\n-            DefineableNameSegment::Name(\"import\".into()),\n-            DefineableNameSegment::Name(\"meta\".into()),\n+            DefineableNameSegment::Name(rcstr!(\"import\")),\n+            DefineableNameSegment::Name(rcstr!(\"meta\")),\n             DefineableNameSegment::TypeOf,\n         ])\n         .or_insert(\"object\".into());\n     free_var_references\n         .entry(vec![\n-            DefineableNameSegment::Name(\"exports\".into()),\n+            DefineableNameSegment::Name(rcstr!(\"exports\")),\n             DefineableNameSegment::TypeOf,\n         ])\n         .or_insert(typeof_exports.into());\n     free_var_references\n         .entry(vec![\n-            DefineableNameSegment::Name(\"module\".into()),\n+            DefineableNameSegment::Name(rcstr!(\"module\")),\n             DefineableNameSegment::TypeOf,\n         ])\n         .or_insert(typeof_module.into());\n     free_var_references\n         .entry(vec![\n-            DefineableNameSegment::Name(\"require\".into()),\n+            DefineableNameSegment::Name(rcstr!(\"require\")),\n             DefineableNameSegment::TypeOf,\n         ])\n         .or_insert(\"function\".into());\n     free_var_references\n-        .entry(vec![DefineableNameSegment::Name(\"require\".into())])\n+        .entry(vec![DefineableNameSegment::Name(rcstr!(\"require\"))])\n         .or_insert(require.into());\n \n-    let dir_name: RcStr = \"__dirname\".into();\n+    let dir_name: RcStr = rcstr!(\"__dirname\");\n     free_var_references\n         .entry(vec![\n             DefineableNameSegment::Name(dir_name.clone()),\n@@ -1507,7 +1507,7 @@ async fn compile_time_info_for_module_type(\n         .or_insert(FreeVarReference::InputRelative(\n             InputRelativeConstant::DirName,\n         ));\n-    let file_name: RcStr = \"__filename\".into();\n+    let file_name: RcStr = rcstr!(\"__filename\");\n \n     free_var_references\n         .entry(vec![\n@@ -1522,7 +1522,7 @@ async fn compile_time_info_for_module_type(\n         ));\n \n     // Compiletime rewrite the nodejs `global` to `globalThis`\n-    let global: RcStr = \"global\".into();\n+    let global: RcStr = rcstr!(\"global\");\n     free_var_references\n         .entry(vec![\n             DefineableNameSegment::Name(global.clone()),\n@@ -3349,7 +3349,7 @@ impl VisitAstPath for ModuleReferencesVisitor<'_> {\n         ast_path: &mut AstNodePath<AstParentNodeRef<'r>>,\n     ) {\n         self.esm_exports.insert(\n-            \"default\".into(),\n+            rcstr!(\"default\"),\n             EsmExport::LocalBinding(magic_identifier::mangle(\"default export\").into(), false),\n         );\n         self.analysis\n@@ -3365,7 +3365,7 @@ impl VisitAstPath for ModuleReferencesVisitor<'_> {\n         match &export.decl {\n             DefaultDecl::Class(ClassExpr { ident, .. }) | DefaultDecl::Fn(FnExpr { ident, .. }) => {\n                 self.esm_exports.insert(\n-                    \"default\".into(),\n+                    rcstr!(\"default\"),\n                     EsmExport::LocalBinding(\n                         ident\n                             .as_ref()"
        },
        {
            "sha": "f08afbcd6ce7530d311571b31a597fd536346524",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/node.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fnode.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fnode.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fnode.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,6 @@\n use anyhow::Result;\n use either::Either;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, ValueToString, Vc};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::{\n@@ -77,7 +77,7 @@ async fn resolve_reference_from_dir(\n         (Some(abs_path), Some(rel_path)) => Either::Right(\n             read_matches(\n                 parent_path.root().resolve().await?,\n-                \"/ROOT/\".into(),\n+                rcstr!(\"/ROOT/\"),\n                 true,\n                 Pattern::new(abs_path.or_any_nested_file()),\n             )\n@@ -86,7 +86,7 @@ async fn resolve_reference_from_dir(\n             .chain(\n                 read_matches(\n                     parent_path,\n-                    \"\".into(),\n+                    rcstr!(\"\"),\n                     true,\n                     Pattern::new(rel_path.or_any_nested_file()),\n                 )\n@@ -98,7 +98,7 @@ async fn resolve_reference_from_dir(\n             // absolute path only\n             read_matches(\n                 parent_path.root().resolve().await?,\n-                \"/ROOT/\".into(),\n+                rcstr!(\"/ROOT/\"),\n                 true,\n                 Pattern::new(abs_path.or_any_nested_file()),\n             )\n@@ -109,7 +109,7 @@ async fn resolve_reference_from_dir(\n             // relative path only\n             read_matches(\n                 parent_path,\n-                \"\".into(),\n+                rcstr!(\"\"),\n                 true,\n                 Pattern::new(rel_path.or_any_nested_file()),\n             )"
        },
        {
            "sha": "a07d4f1eec16d1dc637c8dc51e60eb8bd7bc2872",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/require_context.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Frequire_context.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Frequire_context.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Frequire_context.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -14,7 +14,7 @@ use swc_core::{\n     quote, quote_expr,\n };\n use turbo_esregex::EsRegex;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     FxIndexMap, NonLocalValue, ResolvedVc, Value, ValueToString, Vc, debug::ValueDebugFormat,\n     trace::TraceRawVcs,\n@@ -355,7 +355,7 @@ impl ModuleReference for ResolvedModuleReference {\n impl ValueToString for ResolvedModuleReference {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        Vc::cell(\"resolved reference\".into())\n+        Vc::cell(rcstr!(\"resolved reference\"))\n     }\n }\n "
        },
        {
            "sha": "0dc05244fccb176c45ffc7df6daa2d8af7ffc57e",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/util.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Futil.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Futil.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Futil.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,6 @@\n use anyhow::Result;\n use swc_core::{ecma::ast::Expr, quote};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::{FileSystemPath, rope::Rope};\n use turbopack_core::{\n@@ -39,7 +39,7 @@ pub async fn request_to_string(request: Vc<Request>) -> Result<Vc<RcStr>> {\n             .await?\n             .request()\n             // TODO: Handle Request::Dynamic, Request::Alternatives\n-            .unwrap_or_else(|| \"unknown\".into()),\n+            .unwrap_or(rcstr!(\"unknown\")),\n     ))\n }\n "
        },
        {
            "sha": "2c24a147cc8e513a0b2c5d0352f6f3e08970da23",
            "filename": "turbopack/crates/turbopack-ecmascript/src/references/worker.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fworker.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fworker.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Freferences%2Fworker.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -5,7 +5,7 @@ use swc_core::{\n     ecma::ast::{Expr, ExprOrSpread, Lit, NewExpr},\n     quote_expr,\n };\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     NonLocalValue, ResolvedVc, Value, ValueToString, Vc, debug::ValueDebugFormat,\n     trace::TraceRawVcs,\n@@ -72,8 +72,8 @@ impl WorkerAssetReference {\n         let Some(chunkable) = ResolvedVc::try_downcast::<Box<dyn ChunkableModule>>(module) else {\n             CodeGenerationIssue {\n                 severity: IssueSeverity::Bug.resolved_cell(),\n-                title: StyledString::Text(\"non-ecmascript placeable asset\".into()).resolved_cell(),\n-                message: StyledString::Text(\"asset is not placeable in ESM chunks\".into())\n+                title: StyledString::Text(rcstr!(\"non-ecmascript placeable asset\")).resolved_cell(),\n+                message: StyledString::Text(rcstr!(\"asset is not placeable in ESM chunks\"))\n                     .resolved_cell(),\n                 path: self.origin.origin_path().to_resolved().await?,\n             }"
        },
        {
            "sha": "6b273f0441ba14b621597186b43c801e02640c67",
            "filename": "turbopack/crates/turbopack-ecmascript/src/side_effect_optimization/facade/module.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Ffacade%2Fmodule.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,7 @@\n use std::collections::BTreeMap;\n \n use anyhow::{Result, bail};\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::{File, FileContent, glob::Glob};\n use turbopack_core::{\n@@ -299,7 +300,7 @@ impl EcmascriptChunkPlaceable for EcmascriptModuleFacadeModule {\n                 let esm_exports = esm_exports.await?;\n                 if esm_exports.exports.keys().any(|name| name == \"default\") {\n                     exports.insert(\n-                        \"default\".into(),\n+                        rcstr!(\"default\"),\n                         EsmExport::ImportedBinding(\n                             ResolvedVc::upcast(\n                                 EcmascriptModulePartReference::new_part(\n@@ -309,7 +310,7 @@ impl EcmascriptChunkPlaceable for EcmascriptModuleFacadeModule {\n                                 .to_resolved()\n                                 .await?,\n                             ),\n-                            \"default\".into(),\n+                            rcstr!(\"default\"),\n                             false,\n                         ),\n                     );"
        },
        {
            "sha": "b53a11ca6118944edfbbbcd7bc20215e820dc12a",
            "filename": "turbopack/crates/turbopack-ecmascript/src/side_effect_optimization/reference.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Freference.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Freference.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fside_effect_optimization%2Freference.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,6 @@\n use anyhow::{Context, Result, bail};\n use swc_core::{common::DUMMY_SP, ecma::ast::Ident, quote};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, ValueToString, Vc};\n use turbopack_core::{\n     chunk::{\n@@ -55,7 +55,7 @@ impl ValueToString for EcmascriptModulePartReference {\n     async fn to_string(&self) -> Result<Vc<RcStr>> {\n         Ok(match &self.part {\n             Some(part) => Vc::cell(part.to_string().into()),\n-            None => Vc::cell(\"module\".into()),\n+            None => Vc::cell(rcstr!(\"module\")),\n         })\n     }\n }"
        },
        {
            "sha": "44044e7763ce71e509450e5cae87c924708f840c",
            "filename": "turbopack/crates/turbopack-ecmascript/src/transform/mod.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftransform%2Fmod.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -18,7 +18,7 @@ use swc_core::{\n     },\n     quote,\n };\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::{\n@@ -305,9 +305,9 @@ impl Issue for UnsupportedServerActionIssue {\n \n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\n-            \"Server actions (\\\"use server\\\") are not yet supported in Turbopack\".into(),\n-        )\n+        StyledString::Text(rcstr!(\n+            \"Server actions (\\\"use server\\\") are not yet supported in Turbopack\"\n+        ))\n         .cell()\n     }\n "
        },
        {
            "sha": "b2a19733f954e798c01e662ad684452461f53479",
            "filename": "turbopack/crates/turbopack-ecmascript/src/tree_shake/asset.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fasset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fasset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fasset.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,5 +1,5 @@\n use anyhow::Result;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::glob::Glob;\n use turbopack_core::{\n@@ -327,7 +327,7 @@ impl Module for EcmascriptModulePartAsset {\n                     *self.full_module,\n                     part,\n                 )),\n-                Vc::cell(\"part reference\".into()),\n+                rcstr!(\"part reference\"),\n             ))\n         };\n "
        },
        {
            "sha": "7af23c229e8cdb236bbcc10ceb422b5d45bccc44",
            "filename": "turbopack/crates/turbopack-ecmascript/src/tree_shake/side_effect_module.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fside_effect_module.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fside_effect_module.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftree_shake%2Fside_effect_module.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -84,7 +84,7 @@ impl Module for SideEffectsModule {\n                     Ok(ResolvedVc::upcast(\n                         SingleChunkableModuleReference::new(\n                             *ResolvedVc::upcast(*side_effect),\n-                            Vc::cell(rcstr!(\"side effect\")),\n+                            rcstr!(\"side effect\"),\n                         )\n                         .to_resolved()\n                         .await?,\n@@ -97,7 +97,7 @@ impl Module for SideEffectsModule {\n         references.push(ResolvedVc::upcast(\n             SingleChunkableModuleReference::new(\n                 *ResolvedVc::upcast(self.resolved_as),\n-                Vc::cell(rcstr!(\"resolved as\")),\n+                rcstr!(\"resolved as\"),\n             )\n             .to_resolved()\n             .await?,"
        },
        {
            "sha": "ca9e46dd348492d9be73886e348d9f26a6197913",
            "filename": "turbopack/crates/turbopack-ecmascript/src/typescript/mod.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftypescript%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftypescript%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Ftypescript%2Fmod.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,6 @@\n use anyhow::Result;\n use serde_json::Value as JsonValue;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, Value, ValueToString, Vc};\n use turbo_tasks_fs::DirectoryContent;\n use turbopack_core::{\n@@ -138,7 +138,7 @@ impl Module for TsConfigModuleAsset {\n                 let mut current = self.source.ident().path().parent().resolve().await?;\n                 loop {\n                     if let DirectoryContent::Entries(entries) = &*current\n-                        .join(\"node_modules/@types\".into())\n+                        .join(rcstr!(\"node_modules/@types\"))\n                         .read_dir()\n                         .await?\n                     {"
        },
        {
            "sha": "0389388e85452b868a1532e89228c248bb6acb4b",
            "filename": "turbopack/crates/turbopack-ecmascript/src/webpack/mod.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Fmod.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -143,7 +143,7 @@ impl ModuleReference for WebpackEntryAssetReference {\n impl ValueToString for WebpackEntryAssetReference {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        Vc::cell(\"webpack entry\".into())\n+        Vc::cell(rcstr!(\"webpack entry\"))\n     }\n }\n "
        },
        {
            "sha": "ad413e8f07729b8a046d99c427f5ab671afff55e",
            "filename": "turbopack/crates/turbopack-ecmascript/src/webpack/references.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Freferences.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Freferences.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fwebpack%2Freferences.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -6,6 +6,7 @@ use swc_core::{\n         visit::{Visit, VisitWith},\n     },\n };\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Value, Vc};\n use turbopack_core::{\n     reference::{ModuleReference, ModuleReferences},\n@@ -46,7 +47,7 @@ pub async fn module_references(\n             let (emitter, collector) = IssueEmitter::new(\n                 source,\n                 source_map.clone(),\n-                Some(\"Parsing webpack bundle failed\".into()),\n+                Some(rcstr!(\"Parsing webpack bundle failed\")),\n             );\n             let handler = Handler::with_emitter(true, false, Box::new(emitter));\n             HANDLER.set(&handler, || {"
        },
        {
            "sha": "515159a86ac9264cf5deddeede0b599800281931",
            "filename": "turbopack/crates/turbopack-ecmascript/src/worker_chunk/chunk_item.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 6,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fchunk_item.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fchunk_item.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fchunk_item.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,6 @@\n use anyhow::Result;\n use indoc::formatdoc;\n-use turbo_rcstr::{RcStr, rcstr};\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, Value, Vc};\n use turbopack_core::{\n     chunk::{\n@@ -80,11 +80,6 @@ impl EcmascriptChunkItem for WorkerLoaderChunkItem {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn chunk_reference_description() -> Vc<RcStr> {\n-    Vc::cell(\"worker chunk\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl ChunkItem for WorkerLoaderChunkItem {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "1e9072b9a0c2f442670d2f7949f3c8f4dbf1405c",
            "filename": "turbopack/crates/turbopack-ecmascript/src/worker_chunk/module.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fmodule.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fmodule.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fworker_chunk%2Fmodule.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -116,6 +116,6 @@ impl ModuleReference for WorkerModuleReference {\n impl ValueToString for WorkerModuleReference {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        Vc::cell(\"worker module\".into())\n+        Vc::cell(rcstr!(\"worker module\"))\n     }\n }"
        },
        {
            "sha": "f82dc0a22574f8a5e6425dd6a840057596f72eb0",
            "filename": "turbopack/crates/turbopack-env/src/asset.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-env%2Fsrc%2Fasset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-env%2Fsrc%2Fasset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-env%2Fsrc%2Fasset.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,7 @@\n use std::io::Write;\n \n use anyhow::Result;\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_env::ProcessEnv;\n use turbo_tasks_fs::{File, FileSystemPath, rope::RopeBuilder};\n@@ -37,7 +38,7 @@ impl ProcessEnvAsset {\n impl Source for ProcessEnvAsset {\n     #[turbo_tasks::function]\n     fn ident(&self) -> Vc<AssetIdent> {\n-        AssetIdent::from_path(self.root.join(\".env.js\".into()))\n+        AssetIdent::from_path(self.root.join(rcstr!(\".env.js\")))\n     }\n }\n "
        },
        {
            "sha": "8976ea12fafc780cf970e09774ebd9e7e8696855",
            "filename": "turbopack/crates/turbopack-env/src/dotenv.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-env%2Fsrc%2Fdotenv.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-env%2Fsrc%2Fdotenv.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-env%2Fsrc%2Fdotenv.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,4 +1,5 @@\n use anyhow::Result;\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{Vc, fxindexmap};\n use turbo_tasks_env::{CommandLineProcessEnv, CustomProcessEnv, ProcessEnv};\n use turbo_tasks_fs::FileSystemPath;\n@@ -11,13 +12,13 @@ use crate::TryDotenvProcessEnv;\n pub async fn load_env(project_path: Vc<FileSystemPath>) -> Result<Vc<Box<dyn ProcessEnv>>> {\n     let env: Vc<Box<dyn ProcessEnv>> = Vc::upcast(CommandLineProcessEnv::new());\n \n-    let node_env = env.read(\"NODE_ENV\".into()).await?;\n+    let node_env = env.read(rcstr!(\"NODE_ENV\")).await?;\n     let node_env = node_env.as_deref().unwrap_or(\"development\");\n \n     let env = Vc::upcast(CustomProcessEnv::new(\n         env,\n         Vc::cell(fxindexmap! {\n-            \"NODE_ENV\".into() => node_env.into(),\n+            rcstr!(\"NODE_ENV\") => node_env.into(),\n         }),\n     ));\n "
        },
        {
            "sha": "4a680e1a35b0d51815975e1154d9f091212789f0",
            "filename": "turbopack/crates/turbopack-env/src/issue.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-env%2Fsrc%2Fissue.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-env%2Fsrc%2Fissue.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-env%2Fsrc%2Fissue.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,3 +1,4 @@\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::issue::{Issue, IssueStage, OptionStyledString, StyledString};\n@@ -13,7 +14,7 @@ pub struct ProcessEnvIssue {\n impl Issue for ProcessEnvIssue {\n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\"Error loading dotenv file\".into()).cell()\n+        StyledString::Text(rcstr!(\"Error loading dotenv file\")).cell()\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "80801f496ed5bcdb6a8486eee05db5e144568fce",
            "filename": "turbopack/crates/turbopack-image/Cargo.toml",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-image%2FCargo.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-image%2FCargo.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-image%2FCargo.toml?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -35,6 +35,7 @@ regex = { workspace = true }\n rustc-hash = { workspace = true }\n serde = { workspace = true }\n serde_with = { workspace = true }\n+turbo-rcstr = { workspace = true }\n turbo-tasks = { workspace = true }\n turbo-tasks-fs = { workspace = true }\n turbopack-core = { workspace = true }"
        },
        {
            "sha": "861acc68ee866d6b37b671f20ab7189d1f0681e0",
            "filename": "turbopack/crates/turbopack-image/src/process/mod.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-image%2Fsrc%2Fprocess%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-image%2Fsrc%2Fprocess%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-image%2Fsrc%2Fprocess%2Fmod.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -17,6 +17,7 @@ use image::{\n use mime::Mime;\n use serde::{Deserialize, Serialize};\n use serde_with::{DisplayFromStr, serde_as};\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{NonLocalValue, ResolvedVc, Vc, debug::ValueDebugFormat, trace::TraceRawVcs};\n use turbo_tasks_fs::{File, FileContent, FileSystemPath};\n use turbopack_core::{\n@@ -171,7 +172,7 @@ fn load_image_internal(\n                     .into(),\n             )\n             .resolved_cell(),\n-            title: Some(StyledString::Text(\"AVIF image not supported\".into()).resolved_cell()),\n+            title: Some(StyledString::Text(rcstr!(\"AVIF image not supported\")).resolved_cell()),\n             issue_severity: Some(IssueSeverity::Warning.resolved_cell()),\n         }\n         .resolved_cell()\n@@ -189,7 +190,7 @@ fn load_image_internal(\n                     .into(),\n             )\n             .resolved_cell(),\n-            title: Some(StyledString::Text(\"WEBP image not supported\".into()).resolved_cell()),\n+            title: Some(StyledString::Text(rcstr!(\"WEBP image not supported\")).resolved_cell()),\n             issue_severity: Some(IssueSeverity::Warning.resolved_cell()),\n         }\n         .resolved_cell()\n@@ -515,7 +516,7 @@ impl Issue for ImageProcessingIssue {\n     fn title(&self) -> Vc<StyledString> {\n         *self\n             .title\n-            .unwrap_or(StyledString::Text(\"Processing image failed\".into()).resolved_cell())\n+            .unwrap_or(StyledString::Text(rcstr!(\"Processing image failed\")).resolved_cell())\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "f8c1f80937e2da7df3afcb90c409711ad79cdab7",
            "filename": "turbopack/crates/turbopack-mdx/src/lib.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 8,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-mdx%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-mdx%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-mdx%2Fsrc%2Flib.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -4,7 +4,7 @@\n \n use anyhow::Result;\n use mdxjs::{MdxParseOptions, Options, compile};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, ValueDefault, Vc};\n use turbo_tasks_fs::{File, FileContent, FileSystemPath, rope::Rope};\n use turbopack_core::{\n@@ -19,11 +19,6 @@ use turbopack_core::{\n     source_transform::SourceTransform,\n };\n \n-#[turbo_tasks::function]\n-fn modifier() -> Vc<RcStr> {\n-    Vc::cell(\"mdx\".into())\n-}\n-\n #[turbo_tasks::value(shared, operation)]\n #[derive(Hash, Debug, Clone)]\n #[serde(rename_all = \"camelCase\")]\n@@ -115,7 +110,7 @@ struct MdxTransformedAsset {\n impl Source for MdxTransformedAsset {\n     #[turbo_tasks::function]\n     fn ident(&self) -> Vc<AssetIdent> {\n-        self.source.ident().rename_as(\"*.tsx\".into())\n+        self.source.ident().rename_as(rcstr!(\"*.tsx\"))\n     }\n }\n \n@@ -284,7 +279,7 @@ impl Issue for MdxIssue {\n \n     #[turbo_tasks::function]\n     fn title(self: Vc<Self>) -> Vc<StyledString> {\n-        StyledString::Text(\"MDX Parse Error\".into()).cell()\n+        StyledString::Text(rcstr!(\"MDX Parse Error\")).cell()\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "17f77e5f3d903f8f9a5d12068c933bf66c4b14a7",
            "filename": "turbopack/crates/turbopack-node/src/evaluate.rs",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Fevaluate.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Fevaluate.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Fevaluate.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -12,6 +12,7 @@ use futures_retry::{FutureRetry, RetryPolicy};\n use parking_lot::Mutex;\n use serde::{Deserialize, Serialize, de::DeserializeOwned};\n use serde_json::Value as JsonValue;\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{\n     Completion, FxIndexMap, NonLocalValue, OperationVc, RawVc, ResolvedVc, TaskInput,\n     TryJoinIterExt, Value, Vc, apply_effects, duration_span, fxindexmap, mark_finished, prevent_gc,\n@@ -96,7 +97,7 @@ async fn emit_evaluate_pool_assets_operation(\n ) -> Result<Vc<EmittedEvaluatePoolAssets>> {\n     let runtime_asset = asset_context\n         .process(\n-            Vc::upcast(FileSource::new(embed_file_path(\"ipc/evaluate.ts\".into()))),\n+            Vc::upcast(FileSource::new(embed_file_path(rcstr!(\"ipc/evaluate.ts\")))),\n             Value::new(ReferenceType::Internal(\n                 InnerAssets::empty().to_resolved().await?,\n             )),\n@@ -118,14 +119,14 @@ async fn emit_evaluate_pool_assets_operation(\n     let entry_module = asset_context\n         .process(\n             Vc::upcast(VirtualSource::new(\n-                runtime_asset.ident().path().join(\"evaluate.js\".into()),\n+                runtime_asset.ident().path().join(rcstr!(\"evaluate.js\")),\n                 AssetContent::file(\n                     File::from(\"import { run } from 'RUNTIME'; run(() => import('INNER'))\").into(),\n                 ),\n             )),\n             Value::new(ReferenceType::Internal(ResolvedVc::cell(fxindexmap! {\n-                \"INNER\".into() => module_asset,\n-                \"RUNTIME\".into() => runtime_asset\n+                rcstr!(\"INNER\") => module_asset,\n+                rcstr!(\"RUNTIME\") => runtime_asset\n             }))),\n         )\n         .module()\n@@ -135,7 +136,7 @@ async fn emit_evaluate_pool_assets_operation(\n     let runtime_entries = {\n         let globals_module = asset_context\n             .process(\n-                Vc::upcast(FileSource::new(embed_file_path(\"globals.ts\".into()))),\n+                Vc::upcast(FileSource::new(embed_file_path(rcstr!(\"globals.ts\")))),\n                 Value::new(ReferenceType::Internal(\n                     InnerAssets::empty().to_resolved().await?,\n                 )),\n@@ -704,7 +705,7 @@ pub struct EvaluationIssue {\n impl Issue for EvaluationIssue {\n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\"Error evaluating Node.js code\".into()).cell()\n+        StyledString::Text(rcstr!(\"Error evaluating Node.js code\")).cell()\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "657535776c8cc6be6c8bf574a2019bb106d4170c",
            "filename": "turbopack/crates/turbopack-node/src/lib.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Flib.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -7,7 +7,7 @@ use std::{iter::once, thread::available_parallelism};\n use anyhow::{Result, bail};\n pub use node_entry::{NodeEntry, NodeRenderingEntries, NodeRenderingEntry};\n use rustc_hash::FxHashMap;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     FxIndexSet, ResolvedVc, TryJoinIterExt, ValueToString, Vc,\n     graph::{AdjacencyMap, GraphTraversal},\n@@ -189,7 +189,7 @@ async fn separate_assets_operation(\n fn emit_package_json(dir: Vc<FileSystemPath>) -> Vc<()> {\n     emit(\n         Vc::upcast(VirtualOutputAsset::new(\n-            dir.join(\"package.json\".into()),\n+            dir.join(rcstr!(\"package.json\")),\n             AssetContent::file(File::from(\"{\\\"type\\\": \\\"commonjs\\\"}\").into()),\n         )),\n         dir,\n@@ -255,7 +255,7 @@ pub async fn get_intermediate_asset(\n     other_entries: Vc<EvaluatableAssets>,\n ) -> Result<Vc<Box<dyn OutputAsset>>> {\n     Ok(Vc::upcast(chunking_context.root_entry_chunk_group_asset(\n-        chunking_context.chunk_path(None, main_entry.ident(), \".js\".into()),\n+        chunking_context.chunk_path(None, main_entry.ident(), rcstr!(\".js\")),\n         other_entries.with_entry(*main_entry),\n         ModuleGraph::from_modules(\n             Vc::cell(vec![ChunkGroupEntry::Entry("
        },
        {
            "sha": "71f34470a57967def72f124c704b18811c56018c",
            "filename": "turbopack/crates/turbopack-node/src/render/issue.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Fissue.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Fissue.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Fissue.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,7 +1,7 @@\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Vc};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::issue::{Issue, IssueStage, OptionStyledString, StyledString};\n-\n #[turbo_tasks::value(shared)]\n #[derive(Copy, Clone)]\n pub struct RenderingIssue {\n@@ -14,7 +14,7 @@ pub struct RenderingIssue {\n impl Issue for RenderingIssue {\n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\"Error during SSR Rendering\".into()).cell()\n+        StyledString::Text(rcstr!(\"Error during SSR Rendering\")).cell()\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "32ba680270de8294a33a76a999d4a3fda0990b19",
            "filename": "turbopack/crates/turbopack-node/src/render/node_api_source.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 9,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Fnode_api_source.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Fnode_api_source.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Fnode_api_source.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,6 @@\n use anyhow::Result;\n use serde_json::Value as JsonValue;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{FxIndexSet, ResolvedVc, Value, Vc};\n use turbo_tasks_env::ProcessEnv;\n use turbo_tasks_fs::FileSystemPath;\n@@ -156,16 +156,11 @@ impl GetContentSourceContent for NodeApiContentSource {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn introspectable_type() -> Vc<RcStr> {\n-    Vc::cell(\"node api content source\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl Introspectable for NodeApiContentSource {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        introspectable_type()\n+        Vc::cell(rcstr!(\"node api content source\"))\n     }\n \n     #[turbo_tasks::function]\n@@ -190,13 +185,13 @@ impl Introspectable for NodeApiContentSource {\n         for &entry in self.entry.entries().await?.iter() {\n             let entry = entry.await?;\n             set.insert((\n-                ResolvedVc::cell(\"module\".into()),\n+                rcstr!(\"module\"),\n                 IntrospectableModule::new(Vc::upcast(*entry.module))\n                     .to_resolved()\n                     .await?,\n             ));\n             set.insert((\n-                ResolvedVc::cell(\"intermediate asset\".into()),\n+                rcstr!(\"intermediate asset\"),\n                 IntrospectableOutputAsset::new(get_intermediate_asset(\n                     *entry.chunking_context,\n                     Vc::upcast(*entry.module),"
        },
        {
            "sha": "a2a64bcf393b2d8720b781ea2c6184a9a4b4e663",
            "filename": "turbopack/crates/turbopack-node/src/render/render_proxy.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Frender_proxy.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Frender_proxy.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Frender_proxy.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -7,7 +7,7 @@ use futures::{\n };\n use parking_lot::Mutex;\n use serde::{Deserialize, Serialize};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     RawVc, ResolvedVc, TaskInput, ValueToString, Vc, duration_span, mark_finished, prevent_gc,\n     trace::TraceRawVcs, util::SharedError,\n@@ -115,7 +115,7 @@ async fn proxy_error(\n     let status_code = 500;\n     let body = error_html(\n         status_code,\n-        \"An error occurred while proxying the request to Node.js\".into(),\n+        rcstr!(\"An error occurred while proxying the request to Node.js\"),\n         format!(\"{message}\\n\\n{}\", details.join(\"\\n\")).into(),\n     )\n     .owned()\n@@ -289,8 +289,8 @@ async fn render_stream_internal(\n                 yield RenderItem::Headers(ResponseHeaders {\n                     status,\n                     headers: vec![(\n-                        \"content-type\".into(),\n-                        \"text/html; charset=utf-8\".into(),\n+                        rcstr!(\"content-type\"),\n+                        rcstr!(\"text/html; charset=utf-8\"),\n                     )],\n                 });\n                 yield RenderItem::BodyChunk(body.into_owned().into_bytes().into());"
        },
        {
            "sha": "9e49c0a0ca8b3ba180d3b24439c3be4442b80b77",
            "filename": "turbopack/crates/turbopack-node/src/render/render_static.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Frender_static.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Frender_static.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Frender_static.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -7,6 +7,7 @@ use futures::{\n };\n use parking_lot::Mutex;\n use serde::{Deserialize, Serialize};\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{\n     RawVc, ResolvedVc, TaskInput, ValueToString, Vc, duration_span, mark_finished, prevent_gc,\n     trace::TraceRawVcs, util::SharedError,\n@@ -163,7 +164,7 @@ async fn static_error(\n         .to_string();\n \n     body.push_str(\n-        error_html_body(500, \"Error rendering page\".into(), message.into())\n+        error_html_body(500, rcstr!(\"Error rendering page\"), message.into())\n             .await?\n             .as_str(),\n     );"
        },
        {
            "sha": "3bbc5ea13785d2f9489272c151e107fe2812b67f",
            "filename": "turbopack/crates/turbopack-node/src/render/rendered_source.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 9,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Frendered_source.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Frendered_source.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Frender%2Frendered_source.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,6 @@\n use anyhow::Result;\n use serde_json::Value as JsonValue;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{FxIndexSet, OperationVc, ResolvedVc, Value, Vc};\n use turbo_tasks_env::ProcessEnv;\n use turbo_tasks_fs::FileSystemPath;\n@@ -258,16 +258,11 @@ async fn static_streamed_content_to_proxy_result_operation(\n     Ok(*proxy_result)\n }\n \n-#[turbo_tasks::function]\n-fn introspectable_type() -> Vc<RcStr> {\n-    Vc::cell(\"node render content source\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl Introspectable for NodeRenderContentSource {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        introspectable_type()\n+        Vc::cell(rcstr!(\"node render content source\"))\n     }\n \n     #[turbo_tasks::function]\n@@ -292,13 +287,13 @@ impl Introspectable for NodeRenderContentSource {\n         for &entry in self.entry.entries().await?.iter() {\n             let entry = entry.await?;\n             set.insert((\n-                ResolvedVc::cell(\"module\".into()),\n+                rcstr!(\"module\"),\n                 IntrospectableModule::new(Vc::upcast(*entry.module))\n                     .to_resolved()\n                     .await?,\n             ));\n             set.insert((\n-                ResolvedVc::cell(\"intermediate asset\".into()),\n+                rcstr!(\"intermediate asset\"),\n                 IntrospectableOutputAsset::new(get_intermediate_asset(\n                     *entry.chunking_context,\n                     *entry.module,"
        },
        {
            "sha": "d46a698e9b9d817be5559154e2c4257145d4c939",
            "filename": "turbopack/crates/turbopack-node/src/transforms/postcss.rs",
            "status": "modified",
            "additions": 15,
            "deletions": 15,
            "changes": 30,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Ftransforms%2Fpostcss.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Ftransforms%2Fpostcss.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Ftransforms%2Fpostcss.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,7 +1,7 @@\n use anyhow::{Context, Result, bail};\n use indoc::formatdoc;\n use serde::{Deserialize, Serialize};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     Completion, Completions, NonLocalValue, ResolvedVc, TaskInput, TryFlatJoinIterExt, Value, Vc,\n     fxindexmap, trace::TraceRawVcs,\n@@ -224,9 +224,9 @@ async fn extra_configs_changed(\n     let parent_path = postcss_config_path.parent();\n \n     let config_paths = [\n-        parent_path.join(\"tailwind.config.js\".into()),\n-        parent_path.join(\"tailwind.config.mjs\".into()),\n-        parent_path.join(\"tailwind.config.ts\".into()),\n+        parent_path.join(rcstr!(\"tailwind.config.js\")),\n+        parent_path.join(rcstr!(\"tailwind.config.mjs\")),\n+        parent_path.join(rcstr!(\"tailwind.config.ts\")),\n     ];\n \n     let configs = config_paths\n@@ -291,11 +291,11 @@ impl Source for JsonSource {\n         match &*self.key.await? {\n             Some(key) => Ok(AssetIdent::from_path(\n                 self.path\n-                    .append(\".\".into())\n+                    .append(rcstr!(\".\"))\n                     .append(key.clone())\n-                    .append(\".json\".into()),\n+                    .append(rcstr!(\".json\")),\n             )),\n-            None => Ok(AssetIdent::from_path(self.path.append(\".json\".into()))),\n+            None => Ok(AssetIdent::from_path(self.path.append(rcstr!(\".json\")))),\n         }\n     }\n }\n@@ -342,7 +342,7 @@ pub(crate) async fn config_loader_source(\n     if postcss_config_path_filename == \"package.json\" {\n         return Ok(Vc::upcast(JsonSource::new(\n             postcss_config_path,\n-            Vc::cell(Some(\"postcss\".into())),\n+            Vc::cell(Some(rcstr!(\"postcss\"))),\n             false,\n         )));\n     }\n@@ -389,7 +389,7 @@ pub(crate) async fn config_loader_source(\n     };\n \n     Ok(Vc::upcast(VirtualSource::new(\n-        postcss_config_path.append(\"_.loader.mjs\".into()),\n+        postcss_config_path.append(rcstr!(\"_.loader.mjs\")),\n         AssetContent::file(File::from(code).into()),\n     )))\n }\n@@ -410,11 +410,11 @@ async fn postcss_executor(\n         .await?;\n \n     Ok(asset_context.process(\n-        Vc::upcast(FileSource::new(embed_file_path(\n-            \"transforms/postcss.ts\".into(),\n-        ))),\n+        Vc::upcast(FileSource::new(embed_file_path(rcstr!(\n+            \"transforms/postcss.ts\"\n+        )))),\n         Value::new(ReferenceType::Internal(ResolvedVc::cell(fxindexmap! {\n-            \"CONFIG\".into() => config_asset\n+            rcstr!(\"CONFIG\") => config_asset\n         }))),\n     ))\n }\n@@ -427,7 +427,7 @@ async fn find_config_in_location(\n     if let FindContextFileResult::Found(config_path, _) = *find_context_file_or_package_key(\n         project_path,\n         postcss_configs(),\n-        Value::new(\"postcss\".into()),\n+        Value::new(rcstr!(\"postcss\")),\n     )\n     .await?\n     {\n@@ -438,7 +438,7 @@ async fn find_config_in_location(\n         if let FindContextFileResult::Found(config_path, _) = *find_context_file_or_package_key(\n             source.ident().path().parent(),\n             postcss_configs(),\n-            Value::new(\"postcss\".into()),\n+            Value::new(rcstr!(\"postcss\")),\n         )\n         .await?\n         {"
        },
        {
            "sha": "c5ec2457bd786c4e45f45f60a4bbd428bb75cabd",
            "filename": "turbopack/crates/turbopack-node/src/transforms/webpack.rs",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Ftransforms%2Fwebpack.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Ftransforms%2Fwebpack.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Ftransforms%2Fwebpack.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -8,7 +8,7 @@ use futures::try_join;\n use serde::{Deserialize, Serialize};\n use serde_json::{Map as JsonMap, Value as JsonValue, json};\n use serde_with::serde_as;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{\n     Completion, NonLocalValue, OperationValue, OperationVc, ResolvedVc, TaskInput, TryJoinIterExt,\n     Value, ValueToString, Vc, trace::TraceRawVcs,\n@@ -188,9 +188,9 @@ async fn webpack_loaders_executor(\n     evaluate_context: Vc<Box<dyn AssetContext>>,\n ) -> Result<Vc<ProcessResult>> {\n     Ok(evaluate_context.process(\n-        Vc::upcast(FileSource::new(embed_file_path(\n-            \"transforms/webpack-loaders.ts\".into(),\n-        ))),\n+        Vc::upcast(FileSource::new(embed_file_path(rcstr!(\n+            \"transforms/webpack-loaders.ts\"\n+        )))),\n         Value::new(ReferenceType::Internal(\n             InnerAssets::empty().to_resolved().await?,\n         )),\n@@ -742,7 +742,7 @@ impl Issue for BuildDependencyIssue {\n \n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\"Build dependencies are not yet supported\".into()).cell()\n+        StyledString::Text(rcstr!(\"Build dependencies are not yet supported\")).cell()\n     }\n \n     #[turbo_tasks::function]\n@@ -759,7 +759,7 @@ impl Issue for BuildDependencyIssue {\n     async fn description(&self) -> Result<Vc<OptionStyledString>> {\n         Ok(Vc::cell(Some(\n             StyledString::Line(vec![\n-                StyledString::Text(\"The file at \".into()),\n+                StyledString::Text(rcstr!(\"The file at \")),\n                 StyledString::Code(self.path.await?.to_string().into()),\n                 StyledString::Text(\n                     \" is a build dependency, which is not yet implemented.\n@@ -802,7 +802,7 @@ impl Issue for EvaluateEmittedErrorIssue {\n \n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\"Issue while running loader\".into()).cell()\n+        StyledString::Text(rcstr!(\"Issue while running loader\")).cell()\n     }\n \n     #[turbo_tasks::function]\n@@ -854,7 +854,7 @@ impl Issue for EvaluateErrorLoggingIssue {\n \n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\"Error logging while running loader\".into()).cell()\n+        StyledString::Text(rcstr!(\"Error logging while running loader\")).cell()\n     }\n \n     #[turbo_tasks::function]\n@@ -886,7 +886,7 @@ impl Issue for EvaluateErrorLoggingIssue {\n                 LogType::Warn => StyledString::Text(fmt_args(\"<w> \".to_string(), &log.args).into()),\n                 LogType::Info => StyledString::Text(fmt_args(\"<i> \".to_string(), &log.args).into()),\n                 LogType::Log => StyledString::Text(fmt_args(\"<l> \".to_string(), &log.args).into()),\n-                LogType::Clear => StyledString::Strong(\"---\".into()),\n+                LogType::Clear => StyledString::Strong(rcstr!(\"---\")),\n                 _ => {\n                     unimplemented!(\"{:?} is not implemented\", log.log_type)\n                 }"
        },
        {
            "sha": "21f614163fb76c148627bbf2d89e828ba793c798",
            "filename": "turbopack/crates/turbopack-nodejs/src/chunking_context.rs",
            "status": "modified",
            "additions": 15,
            "deletions": 18,
            "changes": 33,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fchunking_context.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fchunking_context.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fchunking_context.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,6 +1,6 @@\n use anyhow::{Context, Result, bail};\n use tracing::Instrument;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, TryJoinIterExt, Upcast, Value, ValueToString, Vc};\n use turbo_tasks_fs::FileSystemPath;\n use turbopack_core::{\n@@ -36,7 +36,7 @@ pub struct NodeJsChunkingContextBuilder {\n }\n \n impl NodeJsChunkingContextBuilder {\n-    pub fn asset_prefix(mut self, asset_prefix: ResolvedVc<Option<RcStr>>) -> Self {\n+    pub fn asset_prefix(mut self, asset_prefix: Option<RcStr>) -> Self {\n         self.chunking_context.asset_prefix = asset_prefix;\n         self\n     }\n@@ -104,15 +104,15 @@ pub struct NodeJsChunkingContext {\n     /// This path is used to compute the url to request chunks or assets from\n     output_root: ResolvedVc<FileSystemPath>,\n     /// The relative path from the output_root to the root_path.\n-    output_root_to_root_path: ResolvedVc<RcStr>,\n+    output_root_to_root_path: RcStr,\n     /// This path is used to compute the url to request chunks or assets from\n     client_root: ResolvedVc<FileSystemPath>,\n     /// Chunks are placed at this path\n     chunk_root_path: ResolvedVc<FileSystemPath>,\n     /// Static assets are placed at this path\n     asset_root_path: ResolvedVc<FileSystemPath>,\n     /// Static assets requested from this url base\n-    asset_prefix: ResolvedVc<Option<RcStr>>,\n+    asset_prefix: Option<RcStr>,\n     /// The environment chunks will be evaluated in.\n     environment: ResolvedVc<Environment>,\n     /// The kind of runtime to include in the output.\n@@ -138,7 +138,7 @@ impl NodeJsChunkingContext {\n     pub fn builder(\n         root_path: ResolvedVc<FileSystemPath>,\n         output_root: ResolvedVc<FileSystemPath>,\n-        output_root_to_root_path: ResolvedVc<RcStr>,\n+        output_root_to_root_path: RcStr,\n         client_root: ResolvedVc<FileSystemPath>,\n         chunk_root_path: ResolvedVc<FileSystemPath>,\n         asset_root_path: ResolvedVc<FileSystemPath>,\n@@ -153,7 +153,7 @@ impl NodeJsChunkingContext {\n                 client_root,\n                 chunk_root_path,\n                 asset_root_path,\n-                asset_prefix: ResolvedVc::cell(None),\n+                asset_prefix: None,\n                 enable_file_tracing: false,\n                 environment,\n                 runtime_type,\n@@ -183,18 +183,19 @@ impl NodeJsChunkingContext {\n     }\n }\n \n+impl NodeJsChunkingContext {\n+    pub async fn asset_prefix(self: Vc<Self>) -> Result<Option<RcStr>> {\n+        Ok(self.await?.asset_prefix.clone())\n+    }\n+}\n+\n #[turbo_tasks::value_impl]\n impl NodeJsChunkingContext {\n     #[turbo_tasks::function]\n     fn new(this: Value<NodeJsChunkingContext>) -> Vc<Self> {\n         this.into_value().cell()\n     }\n \n-    #[turbo_tasks::function]\n-    pub fn asset_prefix(&self) -> Vc<Option<RcStr>> {\n-        *self.asset_prefix\n-    }\n-\n     #[turbo_tasks::function]\n     async fn generate_chunk(\n         self: Vc<Self>,\n@@ -220,7 +221,7 @@ impl NodeJsChunkingContext {\n impl ChunkingContext for NodeJsChunkingContext {\n     #[turbo_tasks::function]\n     fn name(&self) -> Vc<RcStr> {\n-        Vc::cell(\"unknown\".into())\n+        Vc::cell(rcstr!(\"unknown\"))\n     }\n \n     #[turbo_tasks::function]\n@@ -235,7 +236,7 @@ impl ChunkingContext for NodeJsChunkingContext {\n \n     #[turbo_tasks::function]\n     fn output_root_to_root_path(&self) -> Vc<RcStr> {\n-        *self.output_root_to_root_path\n+        Vc::cell(self.output_root_to_root_path.clone())\n     }\n \n     #[turbo_tasks::function]\n@@ -263,11 +264,7 @@ impl ChunkingContext for NodeJsChunkingContext {\n         Ok(Vc::cell(\n             format!(\n                 \"{}{}\",\n-                self.asset_prefix\n-                    .await?\n-                    .as_ref()\n-                    .map(|s| s.clone())\n-                    .unwrap_or_else(|| \"/\".into()),\n+                self.asset_prefix.clone().unwrap_or(rcstr!(\"/\")),\n                 asset_path\n             )\n             .into(),"
        },
        {
            "sha": "e931b683d968fc377cabeb1fee0c1e0f42e4e230",
            "filename": "turbopack/crates/turbopack-nodejs/src/ecmascript/node/chunk.rs",
            "status": "modified",
            "additions": 7,
            "deletions": 15,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fecmascript%2Fnode%2Fchunk.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fecmascript%2Fnode%2Fchunk.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fecmascript%2Fnode%2Fchunk.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -52,7 +52,7 @@ impl EcmascriptBuildNodeChunk {\n impl ValueToString for EcmascriptBuildNodeChunk {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        Vc::cell(\"Ecmascript Build Node Chunk\".into())\n+        Vc::cell(rcstr!(\"Ecmascript Build Node Chunk\"))\n     }\n }\n \n@@ -82,7 +82,7 @@ impl OutputAsset for EcmascriptBuildNodeChunk {\n         let ident = this.chunk.ident().with_modifier(modifier());\n         Ok(this\n             .chunking_context\n-            .chunk_path(Some(Vc::upcast(self)), ident, \".js\".into()))\n+            .chunk_path(Some(Vc::upcast(self)), ident, rcstr!(\".js\")))\n     }\n \n     #[turbo_tasks::function]\n@@ -129,21 +129,11 @@ impl GenerateSourceMap for EcmascriptBuildNodeChunk {\n     }\n }\n \n-#[turbo_tasks::function]\n-fn introspectable_type() -> Vc<RcStr> {\n-    Vc::cell(\"ecmascript build node chunk\".into())\n-}\n-\n-#[turbo_tasks::function]\n-fn introspectable_details() -> Vc<RcStr> {\n-    Vc::cell(\"generates a production EcmaScript chunk targeting Node.js\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl Introspectable for EcmascriptBuildNodeChunk {\n     #[turbo_tasks::function]\n     fn ty(&self) -> Vc<RcStr> {\n-        introspectable_type()\n+        Vc::cell(rcstr!(\"ecmascript build node chunk\"))\n     }\n \n     #[turbo_tasks::function]\n@@ -153,14 +143,16 @@ impl Introspectable for EcmascriptBuildNodeChunk {\n \n     #[turbo_tasks::function]\n     fn details(&self) -> Vc<RcStr> {\n-        introspectable_details()\n+        Vc::cell(rcstr!(\n+            \"generates a production EcmaScript chunk targeting Node.js\"\n+        ))\n     }\n \n     #[turbo_tasks::function]\n     async fn children(&self) -> Result<Vc<IntrospectableChildren>> {\n         let mut children = FxIndexSet::default();\n         let introspectable_chunk = ResolvedVc::upcast::<Box<dyn Introspectable>>(self.chunk);\n-        children.insert((ResolvedVc::cell(\"chunk\".into()), introspectable_chunk));\n+        children.insert((rcstr!(\"chunk\"), introspectable_chunk));\n         Ok(Vc::cell(children))\n     }\n }"
        },
        {
            "sha": "d6784102e25babaa9f28a720231cd6609ffff291",
            "filename": "turbopack/crates/turbopack-nodejs/src/ecmascript/node/entry/chunk.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 12,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fecmascript%2Fnode%2Fentry%2Fchunk.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fecmascript%2Fnode%2Fentry%2Fchunk.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fecmascript%2Fnode%2Fentry%2Fchunk.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -2,7 +2,7 @@ use std::io::Write;\n \n use anyhow::{Result, bail};\n use indoc::writedoc;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, ValueToString, Vc};\n use turbo_tasks_fs::{File, FileSystemPath};\n use turbopack_core::{\n@@ -160,20 +160,10 @@ impl EcmascriptBuildNodeEntryChunk {\n impl ValueToString for EcmascriptBuildNodeEntryChunk {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        Vc::cell(\"Ecmascript Build Node Evaluate Chunk\".into())\n+        Vc::cell(rcstr!(\"Ecmascript Build Node Evaluate Chunk\"))\n     }\n }\n \n-#[turbo_tasks::function]\n-fn modifier() -> Vc<RcStr> {\n-    Vc::cell(\"ecmascript build node evaluate chunk\".into())\n-}\n-\n-#[turbo_tasks::function]\n-fn chunk_reference_description() -> Vc<RcStr> {\n-    Vc::cell(\"chunk\".into())\n-}\n-\n #[turbo_tasks::value_impl]\n impl OutputAsset for EcmascriptBuildNodeEntryChunk {\n     #[turbo_tasks::function]"
        },
        {
            "sha": "ab3b0103eb695aa07ede2c0532691400cbe21fe6",
            "filename": "turbopack/crates/turbopack-nodejs/src/ecmascript/node/entry/runtime.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fecmascript%2Fnode%2Fentry%2Fruntime.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fecmascript%2Fnode%2Fentry%2Fruntime.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-nodejs%2Fsrc%2Fecmascript%2Fnode%2Fentry%2Fruntime.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -2,7 +2,7 @@ use std::io::Write;\n \n use anyhow::{Result, bail};\n use indoc::writedoc;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, ValueToString, Vc};\n use turbo_tasks_fs::{File, FileSystem, FileSystemPath};\n use turbopack_core::{\n@@ -99,7 +99,7 @@ impl EcmascriptBuildNodeRuntimeChunk {\n         AssetIdent::from_path(\n             turbopack_ecmascript_runtime::embed_fs()\n                 .root()\n-                .join(\"runtime.js\".into()),\n+                .join(rcstr!(\"runtime.js\")),\n         )\n     }\n \n@@ -118,7 +118,7 @@ impl EcmascriptBuildNodeRuntimeChunk {\n impl ValueToString for EcmascriptBuildNodeRuntimeChunk {\n     #[turbo_tasks::function]\n     fn to_string(&self) -> Vc<RcStr> {\n-        Vc::cell(\"Ecmascript Build Node Runtime Chunk\".into())\n+        Vc::cell(rcstr!(\"Ecmascript Build Node Runtime Chunk\"))\n     }\n }\n \n@@ -131,7 +131,7 @@ impl OutputAsset for EcmascriptBuildNodeRuntimeChunk {\n \n         Ok(this\n             .chunking_context\n-            .chunk_path(Some(Vc::upcast(self)), ident, \".js\".into()))\n+            .chunk_path(Some(Vc::upcast(self)), ident, rcstr!(\".js\")))\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "a92b33df9d8350794375870b40c4b2203c0a545d",
            "filename": "turbopack/crates/turbopack-resolve/src/ecmascript.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fecmascript.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fecmascript.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fecmascript.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,4 +1,5 @@\n use anyhow::Result;\n+use turbo_rcstr::rcstr;\n use turbo_tasks::{ResolvedVc, Value, Vc};\n use turbopack_core::{\n     issue::IssueSource,\n@@ -63,8 +64,8 @@ async fn apply_esm_specific_options_internal(\n     // TODO set fully_specified when in strict ESM mode\n     // options.fully_specified = true;\n     for conditions in get_condition_maps(&mut options) {\n-        conditions.insert(\"import\".into(), ConditionValue::Set);\n-        conditions.insert(\"require\".into(), ConditionValue::Unset);\n+        conditions.insert(rcstr!(\"import\"), ConditionValue::Set);\n+        conditions.insert(rcstr!(\"require\"), ConditionValue::Unset);\n     }\n \n     if clear_extensions {\n@@ -80,8 +81,8 @@ async fn apply_esm_specific_options_internal(\n pub async fn apply_cjs_specific_options(options: Vc<ResolveOptions>) -> Result<Vc<ResolveOptions>> {\n     let mut options: ResolveOptions = options.owned().await?;\n     for conditions in get_condition_maps(&mut options) {\n-        conditions.insert(\"import\".into(), ConditionValue::Unset);\n-        conditions.insert(\"require\".into(), ConditionValue::Set);\n+        conditions.insert(rcstr!(\"import\"), ConditionValue::Unset);\n+        conditions.insert(rcstr!(\"require\"), ConditionValue::Set);\n     }\n     Ok(options.into())\n }"
        },
        {
            "sha": "76f87809c3bfe325809f0f0dab2478e8317bf96e",
            "filename": "turbopack/crates/turbopack-resolve/src/node_native_binding.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fnode_native_binding.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fnode_native_binding.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fnode_native_binding.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -2,7 +2,7 @@ use anyhow::Result;\n use lazy_static::lazy_static;\n use regex::Regex;\n use serde::{Deserialize, Serialize};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{FxIndexMap, ResolvedVc, TryFlatJoinIterExt, TryJoinIterExt, ValueToString, Vc};\n use turbo_tasks_fs::{\n     DirectoryContent, DirectoryEntry, FileContent, FileSystemEntryType, FileSystemPath,\n@@ -167,7 +167,7 @@ pub async fn resolve_node_pre_gyp_files(\n                 if let DirectoryContent::Entries(entries) = &*config_file_dir\n                     // TODO\n                     // read the dependencies path from `bindings.gyp`\n-                    .join(\"deps/lib\".into())\n+                    .join(rcstr!(\"deps/lib\"))\n                     .read_dir()\n                     .await?\n                 {\n@@ -270,7 +270,7 @@ pub async fn resolve_node_gyp_build_files(\n             Regex::new(r#\"['\"]target_name['\"]\\s*:\\s*(?:\"(.*?)\"|'(.*?)')\"#)\n                 .expect(\"create napi_build_version regex failed\");\n     }\n-    let binding_gyp_pat = Pattern::new(Pattern::Constant(\"binding.gyp\".into()));\n+    let binding_gyp_pat = Pattern::new(Pattern::Constant(rcstr!(\"binding.gyp\")));\n     let gyp_file = resolve_raw(context_dir, binding_gyp_pat, true);\n     if let [binding_gyp] = &gyp_file.primary_sources().await?[..] {\n         let mut merged_affecting_sources =\n@@ -284,7 +284,7 @@ pub async fn resolve_node_gyp_build_files(\n                         FxIndexMap::with_capacity_and_hasher(captured.len(), Default::default());\n                     for found in captured.iter().skip(1).flatten() {\n                         let name = found.as_str();\n-                        let target_path = context_dir.join(\"build/Release\".into());\n+                        let target_path = context_dir.join(rcstr!(\"build/Release\"));\n                         let resolved_prebuilt_file = resolve_raw(\n                             target_path,\n                             Pattern::new(Pattern::Constant(format!(\"{name}.node\").into())),\n@@ -330,7 +330,7 @@ pub async fn resolve_node_gyp_build_files(\n         Pattern::new(Pattern::Concatenation(vec![\n             Pattern::Constant(format!(\"prebuilds/{prebuilt_dir}/\").into()),\n             Pattern::Dynamic,\n-            Pattern::Constant(\".node\".into()),\n+            Pattern::Constant(rcstr!(\".node\")),\n         ])),\n         true,\n     )\n@@ -391,7 +391,7 @@ pub async fn resolve_node_bindings_files(\n     loop {\n         let resolved = resolve_raw(\n             root_context_dir,\n-            Pattern::new(Pattern::Constant(\"package.json\".into())),\n+            Pattern::new(Pattern::Constant(rcstr!(\"package.json\"))),\n             true,\n         )\n         .first_source()"
        },
        {
            "sha": "d742a9bdec0e75d16f5edc0075fd56a6554e0e3d",
            "filename": "turbopack/crates/turbopack-resolve/src/resolve.rs",
            "status": "modified",
            "additions": 21,
            "deletions": 20,
            "changes": 41,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fresolve.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fresolve.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Fresolve.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -1,4 +1,5 @@\n use anyhow::Result;\n+use turbo_rcstr::rcstr;\n use turbo_tasks::Vc;\n use turbo_tasks_fs::{FileSystem, FileSystemPath};\n use turbopack_core::resolve::{\n@@ -143,16 +144,16 @@ async fn base_resolve_options(\n \n     let conditions = {\n         let mut conditions: ResolutionConditions = [\n-            (\"import\".into(), ConditionValue::Unknown),\n-            (\"require\".into(), ConditionValue::Unknown),\n+            (rcstr!(\"import\"), ConditionValue::Unknown),\n+            (rcstr!(\"require\"), ConditionValue::Unknown),\n         ]\n         .into_iter()\n         .collect();\n         if opt.browser {\n-            conditions.insert(\"browser\".into(), ConditionValue::Set);\n+            conditions.insert(rcstr!(\"browser\"), ConditionValue::Set);\n         }\n         if opt.module {\n-            conditions.insert(\"module\".into(), ConditionValue::Set);\n+            conditions.insert(rcstr!(\"module\"), ConditionValue::Set);\n         }\n         if let Some(environment) = emulating {\n             for condition in environment.resolve_conditions().await?.iter() {\n@@ -167,7 +168,7 @@ async fn base_resolve_options(\n         let prod = conditions.get(\"production\").cloned();\n         if prod.is_none() {\n             conditions.insert(\n-                \"production\".into(),\n+                rcstr!(\"production\"),\n                 if matches!(dev, Some(ConditionValue::Set)) {\n                     ConditionValue::Unset\n                 } else {\n@@ -177,7 +178,7 @@ async fn base_resolve_options(\n         }\n         if dev.is_none() {\n             conditions.insert(\n-                \"development\".into(),\n+                rcstr!(\"development\"),\n                 if matches!(prod, Some(ConditionValue::Set)) {\n                     ConditionValue::Unset\n                 } else {\n@@ -195,22 +196,22 @@ async fn base_resolve_options(\n     } else {\n         let mut ext = Vec::new();\n         if opt.enable_typescript && opt.enable_react {\n-            ext.push(\".tsx\".into());\n+            ext.push(rcstr!(\".tsx\"));\n         }\n         if opt.enable_typescript {\n-            ext.push(\".ts\".into());\n+            ext.push(rcstr!(\".ts\"));\n         }\n         if opt.enable_react {\n-            ext.push(\".jsx\".into());\n+            ext.push(rcstr!(\".jsx\"));\n         }\n-        ext.push(\".js\".into());\n+        ext.push(rcstr!(\".js\"));\n         if opt.enable_mjs_extension {\n-            ext.push(\".mjs\".into());\n+            ext.push(rcstr!(\".mjs\"));\n         }\n         if opt.enable_node_native_modules {\n-            ext.push(\".node\".into());\n+            ext.push(rcstr!(\".node\"));\n         }\n-        ext.push(\".json\".into());\n+        ext.push(rcstr!(\".json\"));\n         ext\n     };\n     Ok(ResolveOptions {\n@@ -219,15 +220,15 @@ async fn base_resolve_options(\n             if *environment.resolve_node_modules().await? {\n                 vec![ResolveModules::Nested(\n                     root.to_resolved().await?,\n-                    vec![\"node_modules\".into()],\n+                    vec![rcstr!(\"node_modules\")],\n                 )]\n             } else {\n                 Vec::new()\n             }\n         } else {\n             let mut mods = Vec::new();\n             if let Some(dir) = opt.enable_node_modules {\n-                mods.push(ResolveModules::Nested(dir, vec![\"node_modules\".into()]));\n+                mods.push(ResolveModules::Nested(dir, vec![rcstr!(\"node_modules\")]));\n             }\n             mods\n         },\n@@ -238,16 +239,16 @@ async fn base_resolve_options(\n             }];\n             if opt.browser {\n                 resolve_into.push(ResolveIntoPackage::MainField {\n-                    field: \"browser\".into(),\n+                    field: rcstr!(\"browser\"),\n                 });\n             }\n             if opt.module {\n                 resolve_into.push(ResolveIntoPackage::MainField {\n-                    field: \"module\".into(),\n+                    field: rcstr!(\"module\"),\n                 });\n             }\n             resolve_into.push(ResolveIntoPackage::MainField {\n-                field: \"main\".into(),\n+                field: rcstr!(\"main\"),\n             });\n             resolve_into\n         },\n@@ -257,11 +258,11 @@ async fn base_resolve_options(\n                 unspecified_conditions: ConditionValue::Unset,\n             }];\n             if opt.browser {\n-                resolve_in.push(ResolveInPackage::AliasField(\"browser\".into()));\n+                resolve_in.push(ResolveInPackage::AliasField(rcstr!(\"browser\")));\n             }\n             resolve_in\n         },\n-        default_files: vec![\"index\".into()],\n+        default_files: vec![rcstr!(\"index\")],\n         import_map: Some(import_map),\n         resolved_map: opt.resolved_map,\n         after_resolve_plugins: opt.after_resolve_plugins.clone(),"
        },
        {
            "sha": "61723fe4ac16f0ad412e25a801bdf864130fce2f",
            "filename": "turbopack/crates/turbopack-resolve/src/typescript.rs",
            "status": "modified",
            "additions": 14,
            "deletions": 11,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Ftypescript.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Ftypescript.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-resolve%2Fsrc%2Ftypescript.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -2,7 +2,7 @@ use std::{collections::HashMap, fmt::Write, mem::take};\n \n use anyhow::Result;\n use serde_json::Value as JsonValue;\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::{ResolvedVc, Value, ValueDefault, Vc, fxindexset};\n use turbo_tasks_fs::{FileContent, FileJsonContent, FileSystemPath};\n use turbopack_core::{\n@@ -39,7 +39,7 @@ pub struct TsConfigIssue {\n #[turbo_tasks::function]\n async fn json_only(resolve_options: Vc<ResolveOptions>) -> Result<Vc<ResolveOptions>> {\n     let mut opts = resolve_options.owned().await?;\n-    opts.extensions = vec![\".json\".into()];\n+    opts.extensions = vec![rcstr!(\".json\")];\n     Ok(opts.cell())\n }\n \n@@ -83,7 +83,7 @@ pub async fn read_tsconfigs(\n                 TsConfigIssue {\n                     severity: IssueSeverity::Error.resolved_cell(),\n                     source_ident: tsconfig.ident().to_resolved().await?,\n-                    message: \"tsconfig not found\".into(),\n+                    message: rcstr!(\"tsconfig not found\"),\n                 }\n                 .resolved_cell()\n                 .emit();\n@@ -149,7 +149,7 @@ async fn resolve_extends(\n \n         // An empty extends is treated as \"./tsconfig\"\n         Request::Empty => {\n-            let request = Request::parse_string(\"./tsconfig\".into());\n+            let request = Request::parse_string(rcstr!(\"./tsconfig\"));\n             Ok(resolve(parent_dir,\n                 Value::new(ReferenceType::TypeScript(TypeScriptReferenceSubType::Undefined)), request, resolve_options).first_source())\n         }\n@@ -344,7 +344,7 @@ pub async fn tsconfig_resolve_options(\n \n #[turbo_tasks::function]\n pub fn tsconfig() -> Vc<Vec<RcStr>> {\n-    Vc::cell(vec![\"tsconfig.json\".into(), \"jsconfig.json\".into()])\n+    Vc::cell(vec![rcstr!(\"tsconfig.json\"), rcstr!(\"jsconfig.json\")])\n }\n \n #[turbo_tasks::function]\n@@ -362,7 +362,7 @@ pub async fn apply_tsconfig_resolve_options(\n             ResolveModules::Path {\n                 dir: base_url,\n                 // tsconfig basepath doesn't apply to json requests\n-                excluded_extensions: ResolvedVc::cell(fxindexset![\".json\".into()]),\n+                excluded_extensions: ResolvedVc::cell(fxindexset![rcstr!(\".json\")]),\n             },\n         );\n     }\n@@ -480,7 +480,7 @@ async fn apply_typescript_types_options(\n     resolve_options: Vc<ResolveOptions>,\n ) -> Result<Vc<ResolveOptions>> {\n     let mut resolve_options = resolve_options.owned().await?;\n-    resolve_options.extensions = vec![\".tsx\".into(), \".ts\".into(), \".d.ts\".into()];\n+    resolve_options.extensions = vec![rcstr!(\".tsx\"), rcstr!(\".ts\"), rcstr!(\".d.ts\")];\n     resolve_options.into_package = resolve_options\n         .into_package\n         .drain(..)\n@@ -490,7 +490,7 @@ async fn apply_typescript_types_options(\n                 unspecified_conditions,\n             } = into\n             {\n-                conditions.insert(\"types\".into(), ConditionValue::Set);\n+                conditions.insert(rcstr!(\"types\"), ConditionValue::Set);\n                 Some(ResolveIntoPackage::ExportsField {\n                     conditions,\n                     unspecified_conditions,\n@@ -503,10 +503,10 @@ async fn apply_typescript_types_options(\n     resolve_options\n         .into_package\n         .push(ResolveIntoPackage::MainField {\n-            field: \"types\".into(),\n+            field: rcstr!(\"types\"),\n         });\n     for conditions in get_condition_maps(&mut resolve_options) {\n-        conditions.insert(\"types\".into(), ConditionValue::Set);\n+        conditions.insert(rcstr!(\"types\"), ConditionValue::Set);\n     }\n     Ok(resolve_options.into())\n }\n@@ -520,7 +520,10 @@ impl Issue for TsConfigIssue {\n \n     #[turbo_tasks::function]\n     fn title(&self) -> Vc<StyledString> {\n-        StyledString::Text(\"An issue occurred while parsing a tsconfig.json file.\".into()).cell()\n+        StyledString::Text(rcstr!(\n+            \"An issue occurred while parsing a tsconfig.json file.\"\n+        ))\n+        .cell()\n     }\n \n     #[turbo_tasks::function]"
        },
        {
            "sha": "3c246bc1d9cbb0c5d0bfce2a8687739bcfbcd270",
            "filename": "turbopack/crates/turbopack-tests/tests/execution.rs",
            "status": "modified",
            "additions": 15,
            "deletions": 15,
            "changes": 30,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fexecution.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -263,8 +263,8 @@ async fn prepare_test(resource: RcStr) -> Result<Vc<PreparedTest>> {\n         resource_path.to_str().unwrap()\n     );\n \n-    let root_fs = DiskFileSystem::new(\"workspace\".into(), REPO_ROOT.clone(), vec![]);\n-    let project_fs = DiskFileSystem::new(\"project\".into(), REPO_ROOT.clone(), vec![]);\n+    let root_fs = DiskFileSystem::new(rcstr!(\"workspace\"), REPO_ROOT.clone(), vec![]);\n+    let project_fs = DiskFileSystem::new(rcstr!(\"project\"), REPO_ROOT.clone(), vec![]);\n     let project_root = project_fs.root().to_resolved().await?;\n \n     let relative_path = resource_path.strip_prefix(&*REPO_ROOT).context(format!(\n@@ -277,9 +277,9 @@ async fn prepare_test(resource: RcStr) -> Result<Vc<PreparedTest>> {\n     let project_path = project_root.join(relative_path.clone());\n     let tests_path = project_fs\n         .root()\n-        .join(\"turbopack/crates/turbopack-tests\".into());\n+        .join(rcstr!(\"turbopack/crates/turbopack-tests\"));\n \n-    let options_file = path.join(\"options.json\".into());\n+    let options_file = path.join(rcstr!(\"options.json\"));\n \n     let mut options = TestOptions::default();\n     if matches!(*options_file.get_type().await?, FileSystemEntryType::File) {\n@@ -309,14 +309,14 @@ async fn run_test_operation(prepared_test: ResolvedVc<PreparedTest>) -> Result<V\n         ref options,\n     } = *prepared_test.await?;\n \n-    let jest_entry_path = tests_path.join(\"js/jest-entry.ts\".into());\n-    let test_path = project_path.join(\"input/index.js\".into());\n+    let jest_entry_path = tests_path.join(rcstr!(\"js/jest-entry.ts\"));\n+    let test_path = project_path.join(rcstr!(\"input/index.js\"));\n \n-    let chunk_root_path = path.join(\"output\".into()).to_resolved().await?;\n-    let static_root_path = path.join(\"static\".into()).to_resolved().await?;\n+    let chunk_root_path = path.join(rcstr!(\"output\")).to_resolved().await?;\n+    let static_root_path = path.join(rcstr!(\"static\")).to_resolved().await?;\n \n     let chunk_root_path_in_root_path_offset = project_path\n-        .join(\"output\".into())\n+        .join(rcstr!(\"output\"))\n         .await?\n         .get_relative_path_to(&*project_root.await?)\n         .context(\"Project path is in root path\")?;\n@@ -343,7 +343,7 @@ async fn run_test_operation(prepared_test: ResolvedVc<PreparedTest>) -> Result<V\n     import_map.insert_wildcard_alias(\n         \"esm-external/\",\n         ImportMapping::External(\n-            Some(\"*\".into()),\n+            Some(rcstr!(\"*\")),\n             ExternalType::EcmaScriptModule,\n             ExternalTraced::Untraced,\n         )\n@@ -387,12 +387,12 @@ async fn run_test_operation(prepared_test: ResolvedVc<PreparedTest>) -> Result<V\n         ResolveOptionsContext {\n             enable_typescript: true,\n             enable_node_modules: Some(project_root),\n-            custom_conditions: vec![\"development\".into()],\n+            custom_conditions: vec![rcstr!(\"development\")],\n             rules: vec![(\n                 ContextCondition::InDirectory(\"node_modules\".into()),\n                 ResolveOptionsContext {\n                     enable_node_modules: Some(project_root),\n-                    custom_conditions: vec![\"development\".into()],\n+                    custom_conditions: vec![rcstr!(\"development\")],\n                     browser: true,\n                     ..Default::default()\n                 }\n@@ -410,7 +410,7 @@ async fn run_test_operation(prepared_test: ResolvedVc<PreparedTest>) -> Result<V\n     let chunking_context = NodeJsChunkingContext::builder(\n         project_root,\n         chunk_root_path,\n-        ResolvedVc::cell(chunk_root_path_in_root_path_offset),\n+        chunk_root_path_in_root_path_offset,\n         static_root_path,\n         chunk_root_path,\n         static_root_path,\n@@ -451,7 +451,7 @@ async fn run_test_operation(prepared_test: ResolvedVc<PreparedTest>) -> Result<V\n         .process(\n             Vc::upcast(jest_entry_source),\n             Value::new(ReferenceType::Internal(ResolvedVc::cell(fxindexmap! {\n-                \"TESTS\".into() => test_asset,\n+                rcstr!(\"TESTS\") => test_asset,\n             }))),\n         )\n         .module();\n@@ -515,7 +515,7 @@ async fn snapshot_issues(\n \n     turbopack_test_utils::snapshot::snapshot_issues(\n         plain_issues,\n-        path.join(\"issues\".into()),\n+        path.join(rcstr!(\"issues\")),\n         &REPO_ROOT,\n     )\n     .await"
        },
        {
            "sha": "95c7b65eac919533d927097cb4c85774915c0589",
            "filename": "turbopack/crates/turbopack-tests/tests/snapshot.rs",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-tests%2Ftests%2Fsnapshot.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -188,7 +188,7 @@ async fn run_inner_operation(resource: RcStr) -> Result<()> {\n         .try_join()\n         .await?;\n \n-    snapshot_issues(plain_issues, out_vc.join(\"issues\".into()), &REPO_ROOT)\n+    snapshot_issues(plain_issues, out_vc.join(rcstr!(\"issues\")), &REPO_ROOT)\n         .await\n         .context(\"Unable to handle issues\")?;\n \n@@ -210,7 +210,7 @@ async fn run_test_operation(resource: RcStr) -> Result<Vc<FileSystemPath>> {\n         Err(_) => SnapshotOptions::default(),\n         Ok(options_str) => parse_json_with_source_context(&options_str).unwrap(),\n     };\n-    let project_fs = DiskFileSystem::new(\"project\".into(), REPO_ROOT.clone(), vec![]);\n+    let project_fs = DiskFileSystem::new(rcstr!(\"project\"), REPO_ROOT.clone(), vec![]);\n     let project_root = project_fs.root().to_resolved().await?;\n \n     let relative_path = test_path.strip_prefix(&*REPO_ROOT)?;\n@@ -342,15 +342,15 @@ async fn run_test_operation(resource: RcStr) -> Result<Vc<FileSystemPath>> {\n         .await?\n         .map(|asset| EvaluatableAssets::one(asset.to_evaluatable(asset_context)));\n \n-    let chunk_root_path = project_path.join(\"output\".into()).to_resolved().await?;\n-    let static_root_path = project_path.join(\"static\".into()).to_resolved().await?;\n+    let chunk_root_path = project_path.join(rcstr!(\"output\")).to_resolved().await?;\n+    let static_root_path = project_path.join(rcstr!(\"static\")).to_resolved().await?;\n \n     let chunking_context: Vc<Box<dyn ChunkingContext>> = match options.runtime {\n         Runtime::Browser => Vc::upcast(\n             BrowserChunkingContext::builder(\n                 project_root,\n                 project_path,\n-                ResolvedVc::cell(project_path_to_project_root),\n+                project_path_to_project_root,\n                 project_path,\n                 chunk_root_path,\n                 static_root_path,\n@@ -363,7 +363,7 @@ async fn run_test_operation(resource: RcStr) -> Result<Vc<FileSystemPath>> {\n             NodeJsChunkingContext::builder(\n                 project_root,\n                 project_path,\n-                ResolvedVc::cell(project_path_to_project_root),\n+                project_path_to_project_root,\n                 project_path,\n                 chunk_root_path,\n                 static_root_path,\n@@ -430,7 +430,7 @@ async fn run_test_operation(resource: RcStr) -> Result<Vc<FileSystemPath>> {\n                                         .unwrap()\n                                         .into(),\n                                 )\n-                                .with_extension(\"entry.js\".into()),\n+                                .with_extension(rcstr!(\"entry.js\")),\n                             evaluatable_assets,\n                             module_graph,\n                             OutputAssets::empty(),\n@@ -503,7 +503,7 @@ async fn maybe_load_env(\n     _context: Vc<Box<dyn AssetContext>>,\n     path: Vc<FileSystemPath>,\n ) -> Result<Option<Vc<Box<dyn Source>>>> {\n-    let dotenv_path = path.join(\"input/.env\".into());\n+    let dotenv_path = path.join(rcstr!(\"input/.env\"));\n \n     if !dotenv_path.read().await?.is_content() {\n         return Ok(None);"
        },
        {
            "sha": "37e7cedb18935269ef457bb29807196ff6479a6d",
            "filename": "turbopack/crates/turbopack-wasm/src/loader.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Floader.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Floader.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Floader.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -2,7 +2,7 @@ use std::fmt::Write;\n \n use anyhow::Result;\n use indoc::{formatdoc, writedoc};\n-use turbo_rcstr::RcStr;\n+use turbo_rcstr::{RcStr, rcstr};\n use turbo_tasks::Vc;\n use turbo_tasks_fs::File;\n use turbopack_core::{asset::AssetContent, source::Source, virtual_source::VirtualSource};\n@@ -56,7 +56,7 @@ pub(crate) async fn instantiating_loader_source(\n     let code: RcStr = code.into();\n \n     Ok(Vc::upcast(VirtualSource::new(\n-        source.ident().path().append(\"_.loader.mjs\".into()),\n+        source.ident().path().append(rcstr!(\"_.loader.mjs\")),\n         AssetContent::file(File::from(code).into()),\n     )))\n }\n@@ -80,7 +80,7 @@ pub(crate) async fn compiling_loader_source(\n     .into();\n \n     Ok(Vc::upcast(VirtualSource::new(\n-        source.ident().path().append(\"_.loader.mjs\".into()),\n+        source.ident().path().append(rcstr!(\"_.loader.mjs\")),\n         AssetContent::file(File::from(code).into()),\n     )))\n }"
        },
        {
            "sha": "da5ba379e71b1ddc6b69a50297abea53841d2961",
            "filename": "turbopack/crates/turbopack-wasm/src/module_asset.rs",
            "status": "modified",
            "additions": 4,
            "deletions": 7,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fmodule_asset.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fmodule_asset.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-wasm%2Fsrc%2Fmodule_asset.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -74,7 +74,7 @@ impl WebAssemblyModuleAsset {\n         let module = this.asset_context.process(\n             loader_source,\n             Value::new(ReferenceType::Internal(ResolvedVc::cell(fxindexmap! {\n-                \"WASM_PATH\".into() => ResolvedVc::upcast(RawWebAssemblyModuleAsset::new(*this.source, *this.asset_context).to_resolved().await?),\n+                rcstr!(\"WASM_PATH\") => ResolvedVc::upcast(RawWebAssemblyModuleAsset::new(*this.source, *this.asset_context).to_resolved().await?),\n             }))),\n         ).module();\n \n@@ -108,12 +108,9 @@ impl WebAssemblyModuleAsset {\n     #[turbo_tasks::function]\n     async fn references(self: Vc<Self>) -> Result<Vc<ModuleReferences>> {\n         Ok(Vc::cell(vec![ResolvedVc::upcast(\n-            SingleChunkableModuleReference::new(\n-                Vc::upcast(self.loader()),\n-                Vc::cell(\"wasm loader\".into()),\n-            )\n-            .to_resolved()\n-            .await?,\n+            SingleChunkableModuleReference::new(Vc::upcast(self.loader()), rcstr!(\"wasm loader\"))\n+                .to_resolved()\n+                .await?,\n         )]))\n     }\n }"
        },
        {
            "sha": "b25ef81099a7cd10ff2062e5d44b446025a1b3f0",
            "filename": "turbopack/crates/turbopack/src/module_options/rule_condition.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Frule_condition.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/4e110ef3af176385d669f1a886eb46f1d169bd87/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Frule_condition.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack%2Fsrc%2Fmodule_options%2Frule_condition.rs?ref=4e110ef3af176385d669f1a886eb46f1d169bd87",
            "patch": "@@ -223,6 +223,7 @@ impl RuleCondition {\n \n #[cfg(test)]\n pub mod tests {\n+    use turbo_rcstr::rcstr;\n     use turbo_tasks::Vc;\n     use turbo_tasks_backend::{BackendOptions, TurboTasksBackend, noop_backing_storage};\n     use turbo_tasks_fs::{FileContent, FileSystem, VirtualFileSystem};\n@@ -245,15 +246,15 @@ pub mod tests {\n     #[turbo_tasks::function]\n     pub async fn run_leaves_test() -> Result<()> {\n         let fs = VirtualFileSystem::new();\n-        let virtual_path = fs.root().join(\"foo.js\".into());\n+        let virtual_path = fs.root().join(rcstr!(\"foo.js\"));\n         let virtual_source = Vc::upcast::<Box<dyn Source>>(VirtualSource::new(\n             virtual_path,\n             AssetContent::File(FileContent::NotFound.cell().to_resolved().await?).cell(),\n         ))\n         .to_resolved()\n         .await?;\n \n-        let non_virtual_path = fs.root().join(\"bar.js\".into());\n+        let non_virtual_path = fs.root().join(rcstr!(\"bar.js\"));\n         let non_virtual_source = Vc::upcast::<Box<dyn Source>>(FileSource::new(non_virtual_path))\n             .to_resolved()\n             .await?;\n@@ -336,7 +337,7 @@ pub mod tests {\n                 condition\n                     .matches(\n                         virtual_source,\n-                        &*fs.root().join(\"foo\".into()).await?,\n+                        &*fs.root().join(rcstr!(\"foo\")).await?,\n                         &ReferenceType::Undefined\n                     )\n                     .await\n@@ -394,15 +395,15 @@ pub mod tests {\n     #[turbo_tasks::function]\n     pub async fn run_rule_condition_tree_test() -> Result<()> {\n         let fs = VirtualFileSystem::new();\n-        let virtual_path = fs.root().join(\"foo.js\".into());\n+        let virtual_path = fs.root().join(rcstr!(\"foo.js\"));\n         let virtual_source = Vc::upcast::<Box<dyn Source>>(VirtualSource::new(\n             virtual_path,\n             AssetContent::File(FileContent::NotFound.cell().to_resolved().await?).cell(),\n         ))\n         .to_resolved()\n         .await?;\n \n-        let non_virtual_path = fs.root().join(\"bar.js\".into());\n+        let non_virtual_path = fs.root().join(rcstr!(\"bar.js\"));\n         let non_virtual_source = Vc::upcast::<Box<dyn Source>>(FileSource::new(non_virtual_path))\n             .to_resolved()\n             .await?;"
        }
    ],
    "stats": {
        "total": 2492,
        "additions": 1160,
        "deletions": 1332
    }
}