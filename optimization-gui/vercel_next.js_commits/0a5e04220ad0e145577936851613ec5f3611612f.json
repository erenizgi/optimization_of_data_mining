{
    "author": "delbaoliveira",
    "message": "Getting Started Docs: Add `Metadata and OG images` page (#74077)\n\nCloses:\nhttps://linear.app/vercel/issue/DOC-3701/page-metadata-and-og-images\n\n- Default fields\n- Static metadata\n- Generated metadata\n- Favicons\n- Static OG images\n- Generated OG images\n\n---------\n\nCo-authored-by: Rich Haines <hello@richardhaines.dev>",
    "sha": "0a5e04220ad0e145577936851613ec5f3611612f",
    "files": [
        {
            "sha": "3154ea318d91f086d982cae91d3b221d23a704e7",
            "filename": "docs/01-app/01-getting-started/10-metadata-and-og-images.mdx",
            "status": "added",
            "additions": 306,
            "deletions": 0,
            "changes": 306,
            "blob_url": "https://github.com/vercel/next.js/blob/0a5e04220ad0e145577936851613ec5f3611612f/docs%2F01-app%2F01-getting-started%2F10-metadata-and-og-images.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/0a5e04220ad0e145577936851613ec5f3611612f/docs%2F01-app%2F01-getting-started%2F10-metadata-and-og-images.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F01-getting-started%2F10-metadata-and-og-images.mdx?ref=0a5e04220ad0e145577936851613ec5f3611612f",
            "patch": "@@ -0,0 +1,306 @@\n+---\n+title: How to add metadata and create OG images\n+nav_title: Metadata and OG images\n+description: Learn how to add metadata to your pages and create dynamic OG images.\n+related:\n+  title: API Reference\n+  description: Learn more about the Metadata APIs mentioned in this page.\n+  links:\n+    - app/api-reference/functions/generate-metadata\n+    - app/api-reference/file-conventions/metadata\n+    - app/api-reference/file-conventions/metadata/app-icons\n+    - app/api-reference/file-conventions/metadata/opengraph-image\n+    - app/api-reference/functions/image-response\n+---\n+\n+The Metadata APIs can be used to define your application metadata for improved SEO and web shareability and include:\n+\n+1. [The static `metadata` object](#static-metadata)\n+2. [The dynamic `generateMetadata` function](#generated-metadata)\n+3. Special [file conventions](/docs/app/api-reference/file-conventions/metadata) that can be used to add static or dynamically generated [favicons](#favicons) and [OG images](#static-open-graph-images).\n+\n+With all the options above, Next.js will automatically generate the relevant `<head>` tags for your page, which can be inspected in the browser's developer tools.\n+\n+## Default fields\n+\n+There are two default `meta` tags that are always added even if a route doesn't define metadata:\n+\n+- The [meta charset tag](https://developer.mozilla.org/docs/Web/HTML/Element/meta#attr-charset) sets the character encoding for the website.\n+- The [meta viewport tag](https://developer.mozilla.org/docs/Web/HTML/Viewport_meta_tag) sets the viewport width and scale for the website to adjust for different devices.\n+\n+```html\n+<meta charset=\"utf-8\" />\n+<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n+```\n+\n+The other metadata fields can be defined with the `Metadata` object (for [static metadata](#static-metadata)) or the `generateMetadata` function (for [generated metadata](#generated-metadata)).\n+\n+## Static metadata\n+\n+To define static metadata, export a [`Metadata` object](/docs/app/api-reference/functions/generate-metadata#metadata-object) from a static [`layout.js`](/docs/app/api-reference/file-conventions/layout) or [`page.js`](/docs/app/api-reference/file-conventions/page) file. For example, to add a title and description to the blog route:\n+\n+```tsx filename=\"app/blog/layout.tsx\" switcher\n+import type { Metadata } from 'next'\n+\n+export const metadata: Metadata = {\n+  title: 'My Blog',\n+  description: '...',\n+}\n+\n+export default function Page() {}\n+```\n+\n+```jsx filename=\"app/blog/layout.tsx\" switcher\n+export const metadata = {\n+  title: 'My Blog',\n+  description: '...',\n+}\n+\n+export default function Page() {}\n+```\n+\n+You can view a full list of available options, in the [generate metadata documentation](/docs/app/api-reference/functions/generate-metadata#metadata-fields).\n+\n+## Generated metadata\n+\n+You can use [`generateMetadata`](/docs/app/api-reference/functions/generate-metadata) function to `fetch` metadata that depends on data. For example, to fetch the title and description for a specific blog post:\n+\n+```tsx filename=\"app/blog/[slug]/page.tsx\" switcher\n+import type { Metadata, ResolvingMetadata } from 'next'\n+\n+type Props = {\n+  params: Promise<{ id: string }>\n+  searchParams: Promise<{ [key: string]: string | string[] | undefined }>\n+}\n+\n+export async function generateMetadata(\n+  { params, searchParams }: Props,\n+  parent: ResolvingMetadata\n+): Promise<Metadata> {\n+  const slug = (await params).slug\n+\n+  // fetch post information\n+  const post = await fetch(`https://api.vercel.app/blog/${slug}`).then((res) =>\n+    res.json()\n+  )\n+\n+  return {\n+    title: post.title,\n+    description: post.description,\n+  }\n+}\n+\n+export default function Page({ params, searchParams }: Props) {}\n+```\n+\n+```jsx filename=\"app/blog/[slug]/page.js\" switcher\n+export async function generateMetadata({ params, searchParams }, parent) {\n+  const slug = (await params).slug\n+\n+  // fetch post information\n+  const post = await fetch(`https://api.vercel.app/blog/${slug}`).then((res) =>\n+    res.json()\n+  )\n+\n+  return {\n+    title: post.title,\n+    description: post.description,\n+  }\n+}\n+\n+export default function Page({ params, searchParams }) {}\n+```\n+\n+Behind-the-scenes, Next.js will stream metadata separately from the UI and inject the metadata into the HTML as soon as it's resolved.\n+\n+### Memoizing data requests\n+\n+There may be cases where you need to fetch the **same** data for metadata and the page itself. To avoid duplicate requests, you can use React's [`cache` function](https://react.dev/reference/react/cache) to memoize the return value and only fetch the data once. For example, to fetch the blog post information for both the metadata and the page:\n+\n+```tsx filename=\"app/lib/data.ts\" highlight={4} switcher\n+import { cache } from 'react'\n+import { db } from '@/app/lib/db'\n+\n+// getPost will be used twice, but execute only once\n+export const getPost = cache(async (slug: string) => {\n+  const res = await db.query.posts.findFirst({ where: eq(posts.slug, slug) })\n+  return res\n+})\n+```\n+\n+```jsx filename=\"app/lib/data.js\" highlight={4} switcher\n+import { cache } from 'react'\n+import { db } from '@/app/lib/db'\n+\n+// getPost will be used twice, but execute only once\n+export const getPost = cache(async (slug) => {\n+  const res = await db.query.posts.findFirst({ where: eq(posts.slug, slug) })\n+  return res\n+})\n+```\n+\n+```tsx filename=\"app/blog/[slug]/page.tsx\" switcher\n+import { getPost } from '@/app/lib/data'\n+\n+export async function generateMetadata({\n+  params,\n+}: {\n+  params: { slug: string }\n+}) {\n+  const post = await getPost(params.slug)\n+  return {\n+    title: post.title,\n+    description: post.description,\n+  }\n+}\n+\n+export default async function Page({ params }: { params: { slug: string } }) {\n+  const post = await getPost(params.slug)\n+  return <div>{post.title}</div>\n+}\n+```\n+\n+```jsx filename=\"app/blog/[slug]/page.js\" switcher\n+import { getPost } from '@/app/lib/data'\n+\n+export async function generateMetadata({ params }) {\n+  const post = await getPost(params.slug)\n+  return {\n+    title: post.title,\n+    description: post.description,\n+  }\n+}\n+\n+export default async function Page({ params }) {\n+  const post = await getPost(params.slug)\n+  return <div>{post.title}</div>\n+}\n+```\n+\n+## Favicons\n+\n+Favicons are small icons that represent your site in bookmarks and search results. To add a favicon to your application, create a `favicon.ico` and add to the root of the app folder.\n+\n+<Image\n+  alt=\"Favicon Special File inside the App Folder with sibling layout and page files\"\n+  srcLight=\"/docs/light/favicon-ico.png\"\n+  srcDark=\"/docs/dark/favicon-ico.png\"\n+  width=\"1600\"\n+  height=\"444\"\n+/>\n+\n+> You can also programmatically generate favicons using code. See the [favicon docs](/docs/app/api-reference/file-conventions/metadata/app-icons) for more information.\n+\n+## Static Open Graph images\n+\n+Open Graph (OG) images are images that represent your site in social media. To add a static OG image to your application, create a `opengraph-image.png` file in the root of the app folder.\n+\n+<Image\n+  alt=\"OG image special file inside the App folder with sibling layout and page files\"\n+  srcLight=\"/docs/light/opengraph-image.png\"\n+  srcDark=\"/docs/dark/opengraph-image.png\"\n+  width=\"1600\"\n+  height=\"444\"\n+/>\n+\n+You can also add OG images for specific routes by creating a `opengraph-image.png` deeper down the folder structure. For example, to create an OG image specific to the `/blog` route, add a `opengraph-image.jpg` file inside the `blog` folder.\n+\n+<Image\n+  alt=\"OG image special file inside the blog folder\"\n+  srcLight=\"/docs/light/opengraph-image-blog.png\"\n+  srcDark=\"/docs/dark/opengraph-image-blog.png\"\n+  width=\"1600\"\n+  height=\"525\"\n+/>\n+\n+The more specific image will take precedence over any OG images above it in the folder structure.\n+\n+> Other image formats such as `jpeg`, `png`, and `webp` are also supported. See the [Open Graph Image docs](/docs/app/api-reference/file-conventions/metadata/opengraph-image) for more information.\n+\n+## Generated Open Graph images\n+\n+The [`ImageResponse` constructor](/docs/app/api-reference/functions/image-response) allows you to generate dynamic images using JSX and CSS. This is useful for OG images that depend on data.\n+\n+For example, to generate a unique OG image for each blog post, add a `opengraph-image.ts` file inside the `blog` folder, and import the `ImageResponse` constructor from `next/og`:\n+\n+```tsx filename=\"app/blog/[slug]/opengraph-image.ts\" switcher\n+import { ImageResponse } from 'next/og'\n+import { getPost } from '@/app/lib/data'\n+\n+// Image metadata\n+export const size = {\n+  width: 1200,\n+  height: 630,\n+}\n+\n+export const contentType = 'image/png'\n+\n+// Image generation\n+export default async function Image({ params }: { params: { slug: string } }) {\n+  const post = await getPost(params.slug)\n+\n+  return new ImageResponse(\n+    (\n+      // ImageResponse JSX element\n+      <div\n+        style={{\n+          fontSize: 128,\n+          background: 'white',\n+          width: '100%',\n+          height: '100%',\n+          display: 'flex',\n+          alignItems: 'center',\n+          justifyContent: 'center',\n+        }}\n+      >\n+        {post.title}\n+      </div>\n+    )\n+  )\n+}\n+```\n+\n+```jsx filename=\"app/blog/[slug]/opengraph-image.js\" switcher\n+import { ImageResponse } from 'next/og'\n+import { getPost } from '@/app/lib/data'\n+\n+// Image metadata\n+export const size = {\n+  width: 1200,\n+  height: 630,\n+}\n+\n+export const contentType = 'image/png'\n+\n+// Image generation\n+export default async function Image({ params }) {\n+  const post = await getPost(params.slug)\n+\n+  return new ImageResponse(\n+    (\n+      // ImageResponse JSX element\n+      <div\n+        style={{\n+          fontSize: 128,\n+          background: 'white',\n+          width: '100%',\n+          height: '100%',\n+          display: 'flex',\n+          alignItems: 'center',\n+          justifyContent: 'center',\n+        }}\n+      >\n+        {post.title}\n+      </div>\n+    )\n+  )\n+}\n+```\n+\n+`ImageResponse` supports common CSS properties including flexbox and absolute positioning, custom fonts, text wrapping, centering, and nested images. [See the full list of supported CSS properties](/docs/app/api-reference/functions/image-response).\n+\n+> **Good to know**:\n+>\n+> - Examples are available in the [Vercel OG Playground](https://og-playground.vercel.app/).\n+> - `ImageResponse` uses [@vercel/og](https://vercel.com/docs/concepts/functions/edge-functions/og-image-generation), [Satori](https://github.com/vercel/satori), and Resvg to convert HTML and CSS into PNG.\n+> - Only flexbox and a subset of CSS properties are supported. Advanced layouts (e.g. `display: grid`) will not work."
        }
    ],
    "stats": {
        "total": 306,
        "additions": 306,
        "deletions": 0
    }
}