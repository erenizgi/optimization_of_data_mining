{
    "author": "ztanner",
    "message": "[Deprecation Warnings]: add amp deprecation warning (#82551)\n\nWe are dropping amp support in an upcoming major. This adds a warning\nfor using these configuration options and updates the docs with the\nwarning.\n\n---------\n\nCo-authored-by: Sebastian \"Sebbie\" Silbermann <sebastian.silbermann@vercel.com>",
    "sha": "2bca1fde21db21e39e35c30a5c9eb88cb06178ee",
    "files": [
        {
            "sha": "ff05318a467f6698884f0733426211c4fd18e138",
            "filename": "docs/02-pages/02-guides/amp.mdx",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2bca1fde21db21e39e35c30a5c9eb88cb06178ee/docs%2F02-pages%2F02-guides%2Famp.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/2bca1fde21db21e39e35c30a5c9eb88cb06178ee/docs%2F02-pages%2F02-guides%2Famp.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F02-pages%2F02-guides%2Famp.mdx?ref=2bca1fde21db21e39e35c30a5c9eb88cb06178ee",
            "patch": "@@ -11,6 +11,8 @@ description: With minimal config, and without leaving React, you can start addin\n \n </details>\n \n+> **Warning**: Built-in amp support will be removed in Next.js 16.\n+\n With Next.js you can turn any React page into an AMP page, with minimal config, and without leaving React.\n \n You can read more about AMP in the official [amp.dev](https://amp.dev/) site."
        },
        {
            "sha": "fc41e1d080bab4b810789c84a5efcf15e82f4263",
            "filename": "packages/next/src/server/config-shared.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/2bca1fde21db21e39e35c30a5c9eb88cb06178ee/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2bca1fde21db21e39e35c30a5c9eb88cb06178ee/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig-shared.ts?ref=2bca1fde21db21e39e35c30a5c9eb88cb06178ee",
            "patch": "@@ -500,6 +500,7 @@ export interface ExperimentalConfig {\n   nextScriptWorkers?: boolean\n   scrollRestoration?: boolean\n   externalDir?: boolean\n+  /** @deprecated built-in amp support will be removed in Next 16 */\n   amp?: {\n     optimizer?: any\n     validator?: string\n@@ -1146,7 +1147,10 @@ export interface NextConfig extends Record<string, any> {\n     pagesBufferLength?: number\n   }\n \n-  /** @see [`next/amp`](https://nextjs.org/docs/api-reference/next/amp) */\n+  /**\n+   * @deprecated built-in amp support will be removed in Next 16\n+   * @see [`next/amp`](https://nextjs.org/docs/api-reference/next/amp)\n+   */\n   amp?: {\n     canonicalBase?: string\n   }"
        },
        {
            "sha": "cc264a1efecf01bbe395bace27dff42334cd92fa",
            "filename": "packages/next/src/server/config.ts",
            "status": "modified",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/2bca1fde21db21e39e35c30a5c9eb88cb06178ee/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2bca1fde21db21e39e35c30a5c9eb88cb06178ee/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fconfig.ts?ref=2bca1fde21db21e39e35c30a5c9eb88cb06178ee",
            "patch": "@@ -503,6 +503,26 @@ function assignDefaults(\n     }\n   }\n \n+  // There are a good amount of test fixtures that have amp enabled\n+  // that also assert on stderr output being empty, so we're gating the\n+  // warning to be skipped when running in Next.js tests until we fully\n+  // remove the feature.\n+  if (!process.env.__NEXT_TEST_MODE) {\n+    warnOptionHasBeenDeprecated(\n+      result,\n+      'amp',\n+      `Built-in amp support is deprecated and the \\`amp\\` configuration option will be removed in Next.js 16.`,\n+      silent\n+    )\n+\n+    warnOptionHasBeenDeprecated(\n+      result,\n+      'experimental.amp',\n+      `Built-in amp support is deprecated and the \\`experimental.amp\\` configuration option will be removed in Next.js 16.`,\n+      silent\n+    )\n+  }\n+\n   warnCustomizedOption(\n     result,\n     'experimental.esmExternals',"
        }
    ],
    "stats": {
        "total": 28,
        "additions": 27,
        "deletions": 1
    }
}