{
    "author": "gnoff",
    "message": "[dynamicIO] Don't abort prospective render on sync access during SSR (#81258)\n\nWhen filling caches we never want to let sync IO interrupt the cache\nfilling render. We already handled this for the react-server render\nwhere most caches live. But modules are a form of caches and they\nsimilarly rely on the prospective render to \"fill\" their entry. Prior to\nthis change during SSR prerenders a sync IO could cause the prospective\nrender to abort early. This led to the case where the final render would\nalso potentially abort early for something like a serial sync IO in\nmodule scope.",
    "sha": "f261039200d92b2796dc04f45814457994458c64",
    "files": [
        {
            "sha": "da4114e9a7b5da1bada587b452717b88acac2b2a",
            "filename": "packages/next/src/server/app-render/app-render.tsx",
            "status": "modified",
            "additions": 14,
            "deletions": 12,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/f261039200d92b2796dc04f45814457994458c64/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f261039200d92b2796dc04f45814457994458c64/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fapp-render.tsx?ref=f261039200d92b2796dc04f45814457994458c64",
            "patch": "@@ -2433,14 +2433,15 @@ async function spawnDynamicValidationInDev(\n   }\n \n   if (initialServerResult) {\n-    const initialClientController = new AbortController()\n+    const initialClientRenderController = new AbortController()\n+    const initialClientPrerenderController = new AbortController()\n     const initialClientPrerenderStore: PrerenderStore = {\n       type: 'prerender-client',\n       phase: 'render',\n       rootParams,\n       implicitTags,\n-      renderSignal: initialClientController.signal,\n-      controller: initialClientController,\n+      renderSignal: initialClientRenderController.signal,\n+      controller: initialClientPrerenderController,\n       // For HTML Generation the only cache tracked activity\n       // is module loading, which has it's own cache signal\n       cacheSignal: null,\n@@ -2471,7 +2472,7 @@ async function spawnDynamicValidationInDev(\n         nonce={nonce}\n       />,\n       {\n-        signal: initialClientController.signal,\n+        signal: initialClientRenderController.signal,\n         onError: (err) => {\n           const digest = getDigestForWellKnownError(err)\n \n@@ -2485,7 +2486,7 @@ async function spawnDynamicValidationInDev(\n             return undefined\n           }\n \n-          if (initialClientController.signal.aborted) {\n+          if (initialClientRenderController.signal.aborted) {\n             // These are expected errors that might error the prerender. we ignore them.\n           } else if (\n             process.env.NEXT_DEBUG_BUILD ||\n@@ -2521,7 +2522,7 @@ async function spawnDynamicValidationInDev(\n     // Promises passed to client were already awaited above (assuming that they came from cached functions)\n     trackPendingModules(cacheSignal)\n     await cacheSignal.cacheReady()\n-    initialClientController.abort()\n+    initialClientRenderController.abort()\n   }\n \n   const finalServerController = new AbortController()\n@@ -3053,14 +3054,15 @@ async function prerenderToStream(\n       }\n \n       if (initialServerResult) {\n-        const initialClientController = new AbortController()\n+        const initialClientRenderController = new AbortController()\n+        const initialClientPrerenderController = new AbortController()\n         const initialClientPrerenderStore: PrerenderStore = {\n           type: 'prerender-client',\n           phase: 'render',\n           rootParams,\n           implicitTags,\n-          renderSignal: initialClientController.signal,\n-          controller: initialClientController,\n+          renderSignal: initialClientRenderController.signal,\n+          controller: initialClientPrerenderController,\n           // For HTML Generation the only cache tracked activity\n           // is module loading, which has it's own cache signal\n           cacheSignal: null,\n@@ -3091,7 +3093,7 @@ async function prerenderToStream(\n             nonce={nonce}\n           />,\n           {\n-            signal: initialClientController.signal,\n+            signal: initialClientRenderController.signal,\n             onError: (err) => {\n               const digest = getDigestForWellKnownError(err)\n \n@@ -3105,7 +3107,7 @@ async function prerenderToStream(\n                 return undefined\n               }\n \n-              if (initialClientController.signal.aborted) {\n+              if (initialClientRenderController.signal.aborted) {\n                 // These are expected errors that might error the prerender. we ignore them.\n               } else if (\n                 process.env.NEXT_DEBUG_BUILD ||\n@@ -3140,7 +3142,7 @@ async function prerenderToStream(\n         // Promises passed to client were already awaited above (assuming that they came from cached functions)\n         trackPendingModules(cacheSignal)\n         await cacheSignal.cacheReady()\n-        initialClientController.abort()\n+        initialClientRenderController.abort()\n       }\n \n       let serverIsDynamic = false"
        },
        {
            "sha": "216d1b5a7033fdf70a4140968ab1c587e83334bd",
            "filename": "test/e2e/app-dir/dynamic-io-errors/dynamic-io-errors.module-scope.test.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.module-scope.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.module-scope.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.module-scope.test.ts?ref=f261039200d92b2796dc04f45814457994458c64",
            "patch": "@@ -25,12 +25,23 @@ describe('Lazy Module Init', () => {\n \n     expect(next.cliOutput).toContain('○ /server ')\n     expect(next.cliOutput).toContain('○ /client ')\n+    expect(next.cliOutput).toContain('◐ /client-page ')\n+    expect(next.cliOutput).toContain('◐ /[dyn] ')\n     let $\n \n     $ = await next.render$('/server')\n     expect($('#id').text().length).toBeGreaterThan(0)\n \n     $ = await next.render$('/client')\n     expect($('#id').text().length).toBeGreaterThan(0)\n+\n+    $ = await next.render$('/client-page')\n+    expect($('#id').text().length).toBeGreaterThan(0)\n+\n+    $ = await next.render$('/foo')\n+    expect($('#id').text().length).toBeGreaterThan(0)\n+\n+    $ = await next.render$('/serial-client-sync-io')\n+    expect($('#id').text().length).toBeGreaterThan(0)\n   })\n })"
        },
        {
            "sha": "e1a608c5d9c1dbafcb431c322deaf5ed42ceadf2",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/lazy-module-init/app/serial-client-sync-io/build-id.tsx",
            "status": "added",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Fbuild-id.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Fbuild-id.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Fbuild-id.tsx?ref=f261039200d92b2796dc04f45814457994458c64",
            "patch": "@@ -0,0 +1,10 @@\n+export async function BuildID() {\n+  const buildID = require('./lazy-id').buildID\n+  await 1\n+  return (\n+    <dl>\n+      <dt>Build ID</dt>\n+      <dd id=\"id\">{buildID}</dd>\n+    </dl>\n+  )\n+}"
        },
        {
            "sha": "c9603ec8824e49767630dad3a1a98bddcc1301f7",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/lazy-module-init/app/serial-client-sync-io/client-lazy-now-1.ts",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Fclient-lazy-now-1.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Fclient-lazy-now-1.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Fclient-lazy-now-1.ts?ref=f261039200d92b2796dc04f45814457994458c64",
            "patch": "@@ -0,0 +1,3 @@\n+'use client'\n+\n+export const date = Date.now()"
        },
        {
            "sha": "c9603ec8824e49767630dad3a1a98bddcc1301f7",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/lazy-module-init/app/serial-client-sync-io/client-lazy-now-2.ts",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Fclient-lazy-now-2.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Fclient-lazy-now-2.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Fclient-lazy-now-2.ts?ref=f261039200d92b2796dc04f45814457994458c64",
            "patch": "@@ -0,0 +1,3 @@\n+'use client'\n+\n+export const date = Date.now()"
        },
        {
            "sha": "c9603ec8824e49767630dad3a1a98bddcc1301f7",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/lazy-module-init/app/serial-client-sync-io/client-lazy-now-3.ts",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Fclient-lazy-now-3.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Fclient-lazy-now-3.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Fclient-lazy-now-3.ts?ref=f261039200d92b2796dc04f45814457994458c64",
            "patch": "@@ -0,0 +1,3 @@\n+'use client'\n+\n+export const date = Date.now()"
        },
        {
            "sha": "bf585dc27fcf58f3d1e0e85307d3c1eb37533938",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/lazy-module-init/app/serial-client-sync-io/indirection.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Findirection.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Findirection.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Findirection.tsx?ref=f261039200d92b2796dc04f45814457994458c64",
            "patch": "@@ -0,0 +1,7 @@\n+export default async function Indirection({\n+  children,\n+}: {\n+  children: React.ReactNode\n+}) {\n+  return children\n+}"
        },
        {
            "sha": "656ba1a197745a378659fffd8a1e101e36a3c61b",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/lazy-module-init/app/serial-client-sync-io/lazy-id.ts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Flazy-id.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Flazy-id.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Flazy-id.ts?ref=f261039200d92b2796dc04f45814457994458c64",
            "patch": "@@ -0,0 +1 @@\n+export const buildID = Date.now() + Math.random()"
        },
        {
            "sha": "42680aa1d7a3016b32c6a2461644d9a37dfdce8d",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/lazy-module-init/app/serial-client-sync-io/page.tsx",
            "status": "added",
            "additions": 32,
            "deletions": 0,
            "changes": 32,
            "blob_url": "https://github.com/vercel/next.js/blob/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserial-client-sync-io%2Fpage.tsx?ref=f261039200d92b2796dc04f45814457994458c64",
            "patch": "@@ -0,0 +1,32 @@\n+import { BuildID } from './build-id'\n+import Indirection from './indirection'\n+import { date as date1 } from './client-lazy-now-1'\n+import { date as date2 } from './client-lazy-now-2'\n+import { date as date3 } from './client-lazy-now-3'\n+\n+export default async function Page() {\n+  return (\n+    <>\n+      <p>\n+        This page requires a module lazily during rendering. The Module computes\n+        a \"static\" id using the current time and a random number. If these APIs\n+        are used while prerendering they would normally trigger a synchronous\n+        dynamic bailout. However since these APIs are used in module scope they\n+        are not semantically part of the render and should be usable like other\n+        \"static\" values. We demonstrate this with this fixture by asserting that\n+        this page still produces a static result and it does not warn for\n+        reading current time and random in a prerender.\n+      </p>\n+      <BuildID />\n+      <Indirection>\n+        <p>Date 1: {date1}</p>\n+      </Indirection>\n+      <Indirection>\n+        <p>Date 2: {date2}</p>\n+      </Indirection>\n+      <Indirection>\n+        <p>Date 3: {date3}</p>\n+      </Indirection>\n+    </>\n+  )\n+}"
        },
        {
            "sha": "c9603ec8824e49767630dad3a1a98bddcc1301f7",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/lazy-module-init/app/server/client-lazy-now-1.ts",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserver%2Fclient-lazy-now-1.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserver%2Fclient-lazy-now-1.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserver%2Fclient-lazy-now-1.ts?ref=f261039200d92b2796dc04f45814457994458c64",
            "patch": "@@ -0,0 +1,3 @@\n+'use client'\n+\n+export const date = Date.now()"
        },
        {
            "sha": "c9603ec8824e49767630dad3a1a98bddcc1301f7",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/lazy-module-init/app/server/client-lazy-now-2.ts",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserver%2Fclient-lazy-now-2.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserver%2Fclient-lazy-now-2.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserver%2Fclient-lazy-now-2.ts?ref=f261039200d92b2796dc04f45814457994458c64",
            "patch": "@@ -0,0 +1,3 @@\n+'use client'\n+\n+export const date = Date.now()"
        },
        {
            "sha": "c9603ec8824e49767630dad3a1a98bddcc1301f7",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/lazy-module-init/app/server/client-lazy-now-3.ts",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserver%2Fclient-lazy-now-3.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserver%2Fclient-lazy-now-3.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserver%2Fclient-lazy-now-3.ts?ref=f261039200d92b2796dc04f45814457994458c64",
            "patch": "@@ -0,0 +1,3 @@\n+'use client'\n+\n+export const date = Date.now()"
        },
        {
            "sha": "bf585dc27fcf58f3d1e0e85307d3c1eb37533938",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/lazy-module-init/app/server/indirection.tsx",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserver%2Findirection.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserver%2Findirection.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserver%2Findirection.tsx?ref=f261039200d92b2796dc04f45814457994458c64",
            "patch": "@@ -0,0 +1,7 @@\n+export default async function Indirection({\n+  children,\n+}: {\n+  children: React.ReactNode\n+}) {\n+  return children\n+}"
        },
        {
            "sha": "a96a2eee03900a7e74ac0d57295d0f26800bbb47",
            "filename": "test/e2e/app-dir/dynamic-io-errors/fixtures/lazy-module-init/app/server/page.tsx",
            "status": "modified",
            "additions": 7,
            "deletions": 8,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserver%2Fpage.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/f261039200d92b2796dc04f45814457994458c64/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserver%2Fpage.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Ffixtures%2Flazy-module-init%2Fapp%2Fserver%2Fpage.tsx?ref=f261039200d92b2796dc04f45814457994458c64",
            "patch": "@@ -4,14 +4,13 @@ export default async function Page() {\n   return (\n     <>\n       <p>\n-        This page requires a module lazily during rendering. The Module computes\n-        a \"static\" id using the current time and a random number. If these APIs\n-        are used while prerendering they would normally trigger a synchronous\n-        dynamic bailout. However since these APIs are used in module scope they\n-        are not semantically part of the render and should be usable like other\n-        \"static\" values. We demonstrate this with this fixture by asserting that\n-        this page still produces a static result and it does not warn for\n-        reading current time and random in a prerender.\n+        This page has several client modules that have sync IO in the module\n+        scope that will run in serial when prerendering to HTML. The point of\n+        this test is to assert that the serial nature does not lead to\n+        unexpected sync IO errors. In the past this particular setup would show\n+        up as a sync IO error because the later modules did not initialize\n+        during the prospective render and thus appeared to use sync IO when\n+        being initialized during the final render.\n       </p>\n       <BuildID />\n     </>"
        }
    ],
    "stats": {
        "total": 127,
        "additions": 107,
        "deletions": 20
    }
}