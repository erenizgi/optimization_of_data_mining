{
    "author": "mischnic",
    "message": "Turbopack: refactor tuple variant into struct (#86374)\n\nThe list was getting long...",
    "sha": "29e6b0e38ca255a578103aa2d748b94d7da31d83",
    "files": [
        {
            "sha": "ae51146660d3234632ccae0cc0b72508086dc322",
            "filename": "turbopack/crates/turbopack-core/src/resolve/mod.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/29e6b0e38ca255a578103aa2d748b94d7da31d83/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/29e6b0e38ca255a578103aa2d748b94d7da31d83/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Fmod.rs?ref=29e6b0e38ca255a578103aa2d748b94d7da31d83",
            "patch": "@@ -2721,7 +2721,7 @@ async fn resolve_import_map_result(\n                 ))\n             }\n         }\n-        ImportMapResult::External(name, ty, traced) => {\n+        ImportMapResult::External { name, ty, traced } => {\n             Some(*ResolveResult::primary(ResolveResultItem::External {\n                 name: name.clone(),\n                 ty: *ty,"
        },
        {
            "sha": "212679c8952b0d70f0a8d4bd5380b0cf787fad58",
            "filename": "turbopack/crates/turbopack-core/src/resolve/options.rs",
            "status": "modified",
            "additions": 38,
            "deletions": 17,
            "changes": 55,
            "blob_url": "https://github.com/vercel/next.js/blob/29e6b0e38ca255a578103aa2d748b94d7da31d83/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Foptions.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/29e6b0e38ca255a578103aa2d748b94d7da31d83/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Foptions.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fresolve%2Foptions.rs?ref=29e6b0e38ca255a578103aa2d748b94d7da31d83",
            "patch": "@@ -134,7 +134,11 @@ pub enum ImportMapping {\n #[turbo_tasks::value(shared)]\n #[derive(Clone)]\n pub enum ReplacedImportMapping {\n-    External(Option<RcStr>, ExternalType, ExternalTraced),\n+    External {\n+        name_override: Option<RcStr>,\n+        ty: ExternalType,\n+        traced: ExternalTraced,\n+    },\n     PrimaryAlternativeExternal {\n         name: Option<RcStr>,\n         ty: ExternalType,\n@@ -190,9 +194,11 @@ impl AliasTemplate for Vc<ImportMapping> {\n         Box::pin(async move {\n             let this = &*self.await?;\n             Ok(match this {\n-                ImportMapping::External(name, ty, traced) => {\n-                    ReplacedImportMapping::External(name.clone(), *ty, *traced)\n-                }\n+                ImportMapping::External(name, ty, traced) => ReplacedImportMapping::External {\n+                    name_override: name.clone(),\n+                    ty: *ty,\n+                    traced: *traced,\n+                },\n                 ImportMapping::PrimaryAlternativeExternal {\n                     name,\n                     ty,\n@@ -233,13 +239,20 @@ impl AliasTemplate for Vc<ImportMapping> {\n             Ok(match this {\n                 ImportMapping::External(name, ty, traced) => {\n                     if let Some(name) = name {\n-                        ReplacedImportMapping::External(\n-                            capture.spread_into_star(name).as_constant_string().cloned(),\n-                            *ty,\n-                            *traced,\n-                        )\n+                        ReplacedImportMapping::External {\n+                            name_override: capture\n+                                .spread_into_star(name)\n+                                .as_constant_string()\n+                                .cloned(),\n+                            ty: *ty,\n+                            traced: *traced,\n+                        }\n                     } else {\n-                        ReplacedImportMapping::External(None, *ty, *traced)\n+                        ReplacedImportMapping::External {\n+                            name_override: None,\n+                            ty: *ty,\n+                            traced: *traced,\n+                        }\n                     }\n                 }\n                 ImportMapping::PrimaryAlternativeExternal {\n@@ -393,7 +406,11 @@ pub struct ResolvedMap {\n #[derive(Clone)]\n pub enum ImportMapResult {\n     Result(ResolvedVc<ResolveResult>),\n-    External(RcStr, ExternalType, ExternalTraced),\n+    External {\n+        name: RcStr,\n+        ty: ExternalType,\n+        traced: ExternalTraced,\n+    },\n     AliasExternal {\n         name: RcStr,\n         ty: ExternalType,\n@@ -412,8 +429,12 @@ async fn import_mapping_to_result(\n ) -> Result<ImportMapResult> {\n     Ok(match &*mapping.await? {\n         ReplacedImportMapping::Direct(result) => ImportMapResult::Result(*result),\n-        ReplacedImportMapping::External(name, ty, traced) => ImportMapResult::External(\n-            if let Some(name) = name {\n+        ReplacedImportMapping::External {\n+            name_override,\n+            ty,\n+            traced,\n+        } => ImportMapResult::External {\n+            name: if let Some(name) = name_override {\n                 name.clone()\n             } else if let Some(request) = request.await?.request() {\n                 request\n@@ -423,9 +444,9 @@ async fn import_mapping_to_result(\n                     request.request_pattern().await?.describe_as_string()\n                 )\n             },\n-            *ty,\n-            *traced,\n-        ),\n+            ty: *ty,\n+            traced: *traced,\n+        },\n         ReplacedImportMapping::PrimaryAlternativeExternal {\n             name,\n             ty,\n@@ -480,7 +501,7 @@ impl ValueToString for ImportMapResult {\n     async fn to_string(&self) -> Result<Vc<RcStr>> {\n         match self {\n             ImportMapResult::Result(_) => Ok(Vc::cell(rcstr!(\"Resolved by import map\"))),\n-            ImportMapResult::External(_, _, _) => Ok(Vc::cell(rcstr!(\"TODO external\"))),\n+            ImportMapResult::External { .. } => Ok(Vc::cell(rcstr!(\"TODO external\"))),\n             ImportMapResult::AliasExternal { .. } => Ok(Vc::cell(rcstr!(\"TODO external\"))),\n             ImportMapResult::Alias(request, context) => {\n                 let s = if let Some(path) = context {"
        }
    ],
    "stats": {
        "total": 57,
        "additions": 39,
        "deletions": 18
    }
}