{
    "author": "devjiwonchoi",
    "message": "[devtools] port overlay backdrop out of overlay (#80460)\n\nThe panel UI has two states, with a backdrop and w/o backdrop. To better handle this, port the backdrop out of the overlay to better customize it based on usage.",
    "sha": "15f1c91553b3a19f09677b8f96cd29d475b37526",
    "files": [
        {
            "sha": "350cdc18c0b9d097dd79ae0f5f4938aea9ee6d11",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/errors/error-overlay-layout/error-overlay-layout.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/15f1c91553b3a19f09677b8f96cd29d475b37526/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-layout%2Ferror-overlay-layout.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/15f1c91553b3a19f09677b8f96cd29d475b37526/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-layout%2Ferror-overlay-layout.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Ferrors%2Ferror-overlay-layout%2Ferror-overlay-layout.tsx?ref=15f1c91553b3a19f09677b8f96cd29d475b37526",
            "patch": "@@ -37,6 +37,7 @@ import { EnvironmentNameLabel } from '../environment-name-label/environment-name\n import { useFocusTrap } from '../dev-tools-indicator/utils'\n import { Fader } from '../../fader'\n import { Resizer } from '../../resizer'\n+import { OverlayBackdrop } from '../../overlay'\n \n export interface ErrorOverlayLayoutProps extends ErrorBaseProps {\n   errorMessage: ErrorMessageType\n@@ -109,7 +110,8 @@ export function ErrorOverlayLayout({\n   }\n \n   return (\n-    <ErrorOverlayOverlay fixed={isBuildError} {...animationProps}>\n+    <ErrorOverlayOverlay {...animationProps}>\n+      <OverlayBackdrop fixed={isBuildError} />\n       <div\n         data-nextjs-dialog-root\n         onTransitionEnd={onTransitionEnd}"
        },
        {
            "sha": "6bae1fb57ecab88d4ffb74f2e003a36c8fa1bcfd",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/overlay/index.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/15f1c91553b3a19f09677b8f96cd29d475b37526/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverlay%2Findex.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/15f1c91553b3a19f09677b8f96cd29d475b37526/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverlay%2Findex.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverlay%2Findex.tsx?ref=15f1c91553b3a19f09677b8f96cd29d475b37526",
            "patch": "@@ -1 +1,2 @@\n export { Overlay } from './overlay'\n+export { OverlayBackdrop } from './overlay-backdrop'"
        },
        {
            "sha": "403ed5d17c1861e75529c736d729434302ac3965",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/overlay/overlay-backdrop.tsx",
            "status": "added",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/15f1c91553b3a19f09677b8f96cd29d475b37526/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverlay%2Foverlay-backdrop.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/15f1c91553b3a19f09677b8f96cd29d475b37526/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverlay%2Foverlay-backdrop.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverlay%2Foverlay-backdrop.tsx?ref=15f1c91553b3a19f09677b8f96cd29d475b37526",
            "patch": "@@ -0,0 +1,13 @@\n+export type OverlayBackdropProps = {\n+  fixed?: boolean\n+} & React.HTMLAttributes<HTMLDivElement>\n+\n+export function OverlayBackdrop({ fixed, ...props }: OverlayBackdropProps) {\n+  return (\n+    <div\n+      data-nextjs-dialog-backdrop\n+      data-nextjs-dialog-backdrop-fixed={fixed ? true : undefined}\n+      {...props}\n+    />\n+  )\n+}"
        },
        {
            "sha": "af79cca04d0d3100b83856336b2ef636ee540d4e",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/overlay/overlay.tsx",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/15f1c91553b3a19f09677b8f96cd29d475b37526/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverlay%2Foverlay.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/15f1c91553b3a19f09677b8f96cd29d475b37526/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverlay%2Foverlay.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Foverlay%2Foverlay.tsx?ref=15f1c91553b3a19f09677b8f96cd29d475b37526",
            "patch": "@@ -10,7 +10,6 @@ export type OverlayProps = {\n const Overlay: React.FC<OverlayProps> = function Overlay({\n   className,\n   children,\n-  fixed,\n   ...props\n }) {\n   React.useEffect(() => {\n@@ -22,10 +21,6 @@ const Overlay: React.FC<OverlayProps> = function Overlay({\n \n   return (\n     <div data-nextjs-dialog-overlay className={className} {...props}>\n-      <div\n-        data-nextjs-dialog-backdrop\n-        data-nextjs-dialog-backdrop-fixed={fixed ? true : undefined}\n-      />\n       {children}\n     </div>\n   )"
        },
        {
            "sha": "4adf765c2c8cd61f45fb612c3690eda2d317db49",
            "filename": "packages/next/src/next-devtools/dev-overlay/container/errors.tsx",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/15f1c91553b3a19f09677b8f96cd29d475b37526/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcontainer%2Ferrors.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/15f1c91553b3a19f09677b8f96cd29d475b37526/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcontainer%2Ferrors.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcontainer%2Ferrors.tsx?ref=15f1c91553b3a19f09677b8f96cd29d475b37526",
            "patch": "@@ -1,6 +1,6 @@\n import { useState, useMemo, useRef, Suspense } from 'react'\n import type { DebugInfo } from '../../shared/types'\n-import { Overlay } from '../components/overlay'\n+import { Overlay, OverlayBackdrop } from '../components/overlay'\n import { RuntimeError } from './runtime-error'\n import { getErrorSource } from '../../../shared/lib/error-source'\n import { HotlinkedText } from '../components/hot-linked-text'\n@@ -139,7 +139,11 @@ export function Errors({\n \n   if (isLoading) {\n     // TODO: better loading state\n-    return <Overlay />\n+    return (\n+      <Overlay>\n+        <OverlayBackdrop />\n+      </Overlay>\n+    )\n   }\n \n   if (!activeError) {"
        }
    ],
    "stats": {
        "total": 31,
        "additions": 23,
        "deletions": 8
    }
}