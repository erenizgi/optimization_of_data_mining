{
    "author": "devjiwonchoi",
    "message": "Rename MiddlewareMatcher to ProxyMatcher (#85005)\n\nFollow up on https://github.com/vercel/next.js/pull/84710, `adapterPath`\ndocs had `MiddlewareMatcher` type, used in `ProxyConfig` type. As it's a\nuser-facing type, update it.",
    "sha": "bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
    "files": [
        {
            "sha": "303ba14545ac5008b27bef0e6a26752a2185751a",
            "filename": "crates/next-api/src/app.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/crates%2Fnext-api%2Fsrc%2Fapp.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/crates%2Fnext-api%2Fsrc%2Fapp.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fapp.rs?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -23,9 +23,8 @@ use next_core::{\n     next_dynamic::NextDynamicTransition,\n     next_edge::route_regex::get_named_middleware_regex,\n     next_manifests::{\n-        AppPathsManifest, BuildManifest, EdgeFunctionDefinition, MiddlewareMatcher,\n-        MiddlewaresManifestV2, PagesManifest, Regions,\n-        client_reference_manifest::ClientReferenceManifest,\n+        AppPathsManifest, BuildManifest, EdgeFunctionDefinition, MiddlewaresManifestV2,\n+        PagesManifest, ProxyMatcher, Regions, client_reference_manifest::ClientReferenceManifest,\n     },\n     next_server::{\n         ServerContextType, get_server_module_options_context, get_server_resolve_options_context,\n@@ -1561,7 +1560,7 @@ impl AppEndpoint {\n                 if emit_manifests != EmitManifests::None {\n                     // create middleware manifest\n                     let named_regex = get_named_middleware_regex(&app_entry.pathname);\n-                    let matchers = MiddlewareMatcher {\n+                    let matchers = ProxyMatcher {\n                         regexp: Some(named_regex.into()),\n                         original_source: app_entry.pathname.clone(),\n                         ..Default::default()"
        },
        {
            "sha": "be41bce9a4884fcab8d740b88f63c43718c5332d",
            "filename": "crates/next-api/src/middleware.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/crates%2Fnext-api%2Fsrc%2Fmiddleware.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/crates%2Fnext-api%2Fsrc%2Fmiddleware.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fmiddleware.rs?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -5,7 +5,7 @@ use next_core::{\n     all_assets_from_entries,\n     middleware::get_middleware_module,\n     next_edge::entry::wrap_edge_entry,\n-    next_manifests::{EdgeFunctionDefinition, MiddlewareMatcher, MiddlewaresManifestV2, Regions},\n+    next_manifests::{EdgeFunctionDefinition, MiddlewaresManifestV2, ProxyMatcher, Regions},\n     parse_segment_config_from_source,\n     segment_config::ParseSegmentMode,\n     util::{MiddlewareMatcherKind, NextRuntime},\n@@ -171,7 +171,7 @@ impl MiddlewareEndpoint {\n                 .iter()\n                 .map(|matcher| {\n                     let mut matcher = match matcher {\n-                        MiddlewareMatcherKind::Str(matcher) => MiddlewareMatcher {\n+                        MiddlewareMatcherKind::Str(matcher) => ProxyMatcher {\n                             original_source: matcher.as_str().into(),\n                             ..Default::default()\n                         },\n@@ -216,7 +216,7 @@ impl MiddlewareEndpoint {\n                 })\n                 .collect()\n         } else {\n-            vec![MiddlewareMatcher {\n+            vec![ProxyMatcher {\n                 regexp: Some(rcstr!(\"^/.*$\")),\n                 original_source: rcstr!(\"/:path*\"),\n                 ..Default::default()"
        },
        {
            "sha": "d7b0443655dea2ceed528b1a14a66cdf6e254e71",
            "filename": "crates/next-api/src/pages.rs",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/crates%2Fnext-api%2Fsrc%2Fpages.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/crates%2Fnext-api%2Fsrc%2Fpages.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-api%2Fsrc%2Fpages.rs?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -12,8 +12,8 @@ use next_core::{\n     next_dynamic::NextDynamicTransition,\n     next_edge::route_regex::get_named_middleware_regex,\n     next_manifests::{\n-        BuildManifest, ClientBuildManifest, EdgeFunctionDefinition, MiddlewareMatcher,\n-        MiddlewaresManifestV2, PagesManifest, Regions,\n+        BuildManifest, ClientBuildManifest, EdgeFunctionDefinition, MiddlewaresManifestV2,\n+        PagesManifest, ProxyMatcher, Regions,\n     },\n     next_pages::create_page_ssr_entry_module,\n     next_server::{\n@@ -1500,7 +1500,7 @@ impl PageEndpoint {\n                         };\n \n                     let named_regex = get_named_middleware_regex(&this.pathname).into();\n-                    let matchers = MiddlewareMatcher {\n+                    let matchers = ProxyMatcher {\n                         regexp: Some(named_regex),\n                         original_source: this.pathname.clone(),\n                         ..Default::default()"
        },
        {
            "sha": "c70727971081437a33f4b72c8872b8fa796e1690",
            "filename": "crates/next-core/src/next_manifests/mod.rs",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/crates%2Fnext-core%2Fsrc%2Fnext_manifests%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/crates%2Fnext-core%2Fsrc%2Fnext_manifests%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fnext_manifests%2Fmod.rs?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -238,7 +238,7 @@ impl Default for MiddlewaresManifest {\n     NonLocalValue,\n )]\n #[serde(rename_all = \"camelCase\", default)]\n-pub struct MiddlewareMatcher {\n+pub struct ProxyMatcher {\n     // When skipped next.js with fill that during merging.\n     #[serde(skip_serializing_if = \"Option::is_none\")]\n     pub regexp: Option<RcStr>,\n@@ -251,7 +251,7 @@ pub struct MiddlewareMatcher {\n     pub original_source: RcStr,\n }\n \n-impl Default for MiddlewareMatcher {\n+impl Default for ProxyMatcher {\n     fn default() -> Self {\n         Self {\n             regexp: None,\n@@ -272,7 +272,7 @@ pub struct EdgeFunctionDefinition {\n     pub files: Vec<RcStr>,\n     pub name: RcStr,\n     pub page: RcStr,\n-    pub matchers: Vec<MiddlewareMatcher>,\n+    pub matchers: Vec<ProxyMatcher>,\n     pub wasm: Vec<AssetBinding>,\n     pub assets: Vec<AssetBinding>,\n     #[serde(skip_serializing_if = \"Option::is_none\")]\n@@ -446,14 +446,14 @@ mod tests {\n     #[test]\n     fn test_middleware_matcher_serialization() {\n         let matchers = vec![\n-            MiddlewareMatcher {\n+            ProxyMatcher {\n                 regexp: None,\n                 locale: false,\n                 has: None,\n                 missing: None,\n                 original_source: rcstr!(\"\"),\n             },\n-            MiddlewareMatcher {\n+            ProxyMatcher {\n                 regexp: Some(rcstr!(\".*\")),\n                 locale: true,\n                 has: Some(vec![RouteHas::Query {\n@@ -469,7 +469,7 @@ mod tests {\n         ];\n \n         let serialized = serde_json::to_string(&matchers).unwrap();\n-        let deserialized: Vec<MiddlewareMatcher> = serde_json::from_str(&serialized).unwrap();\n+        let deserialized: Vec<ProxyMatcher> = serde_json::from_str(&serialized).unwrap();\n \n         assert_eq!(matchers, deserialized);\n     }"
        },
        {
            "sha": "9baff06482b1c21924279df7cba5e7f5a991166f",
            "filename": "crates/next-core/src/segment_config.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/crates%2Fnext-core%2Fsrc%2Fsegment_config.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/crates%2Fnext-core%2Fsrc%2Fsegment_config.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Fsegment_config.rs?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -37,7 +37,7 @@ use turbopack_ecmascript::{\n use crate::{\n     app_structure::AppPageLoaderTree,\n     next_config::RouteHas,\n-    next_manifests::MiddlewareMatcher,\n+    next_manifests::ProxyMatcher,\n     util::{MiddlewareMatcherKind, NextRuntime},\n };\n \n@@ -1121,7 +1121,7 @@ async fn parse_route_matcher_from_js_value(\n                 if let Some(matcher) = item.as_str() {\n                     matchers.push(MiddlewareMatcherKind::Str(matcher.to_string()));\n                 } else if let JsValue::Object { parts, .. } = item {\n-                    let mut matcher = MiddlewareMatcher::default();\n+                    let mut matcher = ProxyMatcher::default();\n                     let mut had_source = false;\n                     for matcher_part in parts {\n                         if let ObjectPart::KeyValue(key, value) = matcher_part {"
        },
        {
            "sha": "4689cde0f7d42b0d86765460dea08f567c22de46",
            "filename": "crates/next-core/src/util.rs",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/crates%2Fnext-core%2Fsrc%2Futil.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/crates%2Fnext-core%2Fsrc%2Futil.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/crates%2Fnext-core%2Fsrc%2Futil.rs?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -20,7 +20,7 @@ use turbopack_core::{\n \n use crate::{\n     embed_js::next_js_fs, next_config::NextConfig, next_import_map::get_next_package,\n-    next_manifests::MiddlewareMatcher, next_shared::webpack_rules::WebpackLoaderBuiltinCondition,\n+    next_manifests::ProxyMatcher, next_shared::webpack_rules::WebpackLoaderBuiltinCondition,\n };\n \n const NEXT_TEMPLATE_PATH: &str = \"dist/esm/build/templates\";\n@@ -232,7 +232,7 @@ impl NextRuntime {\n #[derive(PartialEq, Eq, Clone, Debug, TraceRawVcs, Serialize, Deserialize, NonLocalValue)]\n pub enum MiddlewareMatcherKind {\n     Str(String),\n-    Matcher(MiddlewareMatcher),\n+    Matcher(ProxyMatcher),\n }\n \n /// Loads a next.js template, replaces `replacements` and `injections` and makes"
        },
        {
            "sha": "36830508304ef0a204f9db89b380e10df9fccc48",
            "filename": "docs/01-app/03-api-reference/05-config/01-next-config-js/adapterPath.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2FadapterPath.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2FadapterPath.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-api-reference%2F05-config%2F01-next-config-js%2FadapterPath.mdx?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -264,7 +264,7 @@ Middleware function (if present):\n   config: {\n     maxDuration?: number\n     preferredRegion?: string | string[]\n-    matchers?: MiddlewareMatcher[]\n+    matchers?: ProxyMatcher[]\n   }\n }\n ```"
        },
        {
            "sha": "eb042c4569deb3a025dccc4660780f3ccd0ae911",
            "filename": "packages/next/src/build/adapter/build-complete.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fbuild%2Fadapter%2Fbuild-complete.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fbuild%2Fadapter%2Fbuild-complete.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fadapter%2Fbuild-complete.ts?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -10,7 +10,7 @@ import { recursiveReadDir } from '../../lib/recursive-readdir'\n import { isDynamicRoute } from '../../shared/lib/router/utils'\n import type { Revalidate } from '../../server/lib/cache-control'\n import type { NextConfigComplete } from '../../server/config-shared'\n-import type { MiddlewareMatcher } from '../analysis/get-page-static-info'\n+import type { ProxyMatcher } from '../analysis/get-page-static-info'\n import { normalizeAppPath } from '../../shared/lib/router/utils/app-paths'\n import { AdapterOutputType, type PHASE_TYPE } from '../../shared/lib/constants'\n import { normalizePagePath } from '../../shared/lib/page-path/normalize-page-path'\n@@ -212,7 +212,7 @@ export interface AdapterOutput {\n       /**\n        * matchers are the configured matchers for middleware\n        */\n-      matchers?: MiddlewareMatcher[]\n+      matchers?: ProxyMatcher[]\n \n       /**\n        * bypassToken is the generated token that signals a prerender cache\n@@ -246,7 +246,7 @@ export interface AdapterOutput {\n       /**\n        * matchers are the configured matchers for middleware\n        */\n-      matchers?: MiddlewareMatcher[]\n+      matchers?: ProxyMatcher[]\n     }\n   }\n }"
        },
        {
            "sha": "803be7292566dfdd5eb2db71bf4ac3d7e4c3c496",
            "filename": "packages/next/src/build/analysis/get-page-static-info.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fbuild%2Fanalysis%2Fget-page-static-info.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fbuild%2Fanalysis%2Fget-page-static-info.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fanalysis%2Fget-page-static-info.ts?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -44,7 +44,7 @@ import { normalizePagePath } from '../../shared/lib/page-path/normalize-page-pat\n const PARSE_PATTERN =\n   /(?<!(_jsx|jsx-))runtime|preferredRegion|getStaticProps|getServerSideProps|generateStaticParams|export const|generateImageMetadata|generateSitemaps|middleware|proxy/\n \n-export type MiddlewareMatcher = {\n+export type ProxyMatcher = {\n   regexp: string\n   locale?: false\n   has?: RouteHas[]\n@@ -54,13 +54,13 @@ export type MiddlewareMatcher = {\n \n export type ProxyConfig = {\n   /**\n-   * The matcher for the middleware. Read more: [Next.js Docs: Middleware `matcher`](https://nextjs.org/docs/app/api-reference/file-conventions/proxy#matcher),\n-   * [Next.js Docs: Middleware matching paths](https://nextjs.org/docs/app/building-your-application/routing/middleware#matching-paths)\n+   * The matcher for the proxy. Read more: [Next.js Docs: Proxy `matcher`](https://nextjs.org/docs/app/api-reference/file-conventions/proxy#matcher),\n+   * [Next.js Docs: Proxy matching paths](https://nextjs.org/docs/app/building-your-application/routing/proxy#matching-paths)\n    */\n-  matchers?: MiddlewareMatcher[]\n+  matchers?: ProxyMatcher[]\n \n   /**\n-   * The regions that the middleware should run in.\n+   * The regions that the proxy should run in.\n    */\n   regions?: string | string[]\n \n@@ -422,7 +422,7 @@ async function tryToReadFile(filePath: string, shouldThrow: boolean) {\n export function getMiddlewareMatchers(\n   matcherOrMatchers: MiddlewareConfigMatcherInput,\n   nextConfig: Pick<NextConfig, 'basePath' | 'i18n'>\n-): MiddlewareMatcher[] {\n+): ProxyMatcher[] {\n   const matchers = Array.isArray(matcherOrMatchers)\n     ? matcherOrMatchers\n     : [matcherOrMatchers]"
        },
        {
            "sha": "363656ccd58e282f588f07e389a63ea7f6268c50",
            "filename": "packages/next/src/build/define-env.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fdefine-env.ts?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -3,7 +3,7 @@ import type {\n   I18NDomains,\n   NextConfigComplete,\n } from '../server/config-shared'\n-import type { MiddlewareMatcher } from './analysis/get-page-static-info'\n+import type { ProxyMatcher } from './analysis/get-page-static-info'\n import type { Rewrite } from '../lib/load-custom-routes'\n import path from 'node:path'\n import { needsExperimentalReact } from '../lib/needs-experimental-react'\n@@ -32,7 +32,7 @@ export interface DefineEnvOptions {\n   isClient: boolean\n   isEdgeServer: boolean\n   isNodeServer: boolean\n-  middlewareMatchers: MiddlewareMatcher[] | undefined\n+  middlewareMatchers: ProxyMatcher[] | undefined\n   omitNonDeterministic?: boolean\n   rewrites: {\n     beforeFiles: Rewrite[]\n@@ -46,7 +46,7 @@ interface DefineEnv {\n     | string\n     | string[]\n     | boolean\n-    | MiddlewareMatcher[]\n+    | ProxyMatcher[]\n     | BloomFilter\n     | Partial<NextConfigComplete['images']>\n     | I18NDomains"
        },
        {
            "sha": "d279c9a92ced3021e860ba288f21a47386c0993e",
            "filename": "packages/next/src/build/entries.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fbuild%2Fentries.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fbuild%2Fentries.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fentries.ts?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -6,7 +6,7 @@ import type { NextConfigComplete } from '../server/config-shared'\n import type { webpack } from 'next/dist/compiled/webpack/webpack'\n import type {\n   ProxyConfig,\n-  MiddlewareMatcher,\n+  ProxyMatcher,\n   PageStaticInfo,\n } from './analysis/get-page-static-info'\n import type { LoadedEnvFiles } from '@next/env'\n@@ -832,7 +832,7 @@ export async function createEntrypoints(\n   const edgeServer: webpack.EntryObject = {}\n   const server: webpack.EntryObject = {}\n   const client: webpack.EntryObject = {}\n-  let middlewareMatchers: MiddlewareMatcher[] | undefined = undefined\n+  let middlewareMatchers: ProxyMatcher[] | undefined = undefined\n \n   let appPathsPerRoute: Record<string, string[]> = {}\n   if (appDir && appPaths) {"
        },
        {
            "sha": "5eeeb56f04e876f7419030504f0a1128a3da05ac",
            "filename": "packages/next/src/build/webpack-config.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack-config.ts?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -56,7 +56,7 @@ import type {\n   SWC_TARGET_TRIPLE,\n } from './webpack/plugins/telemetry-plugin/telemetry-plugin'\n import type { Span } from '../trace'\n-import type { MiddlewareMatcher } from './analysis/get-page-static-info'\n+import type { ProxyMatcher } from './analysis/get-page-static-info'\n import loadJsConfig, {\n   type JsConfig,\n   type ResolvedBaseUrl,\n@@ -346,7 +346,7 @@ export default async function getBaseWebpackConfig(\n     originalRedirects: CustomRoutes['redirects'] | undefined\n     runWebpackSpan: Span\n     appDir: string | undefined\n-    middlewareMatchers?: MiddlewareMatcher[]\n+    middlewareMatchers?: ProxyMatcher[]\n     noMangling?: boolean\n     jsConfig: any\n     jsConfigPath?: string"
        },
        {
            "sha": "c15052f7cb93ebfb304a39d051101b29e69cc536",
            "filename": "packages/next/src/build/webpack/loaders/get-module-build-info.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fget-module-build-info.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fget-module-build-info.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fget-module-build-info.ts?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -1,6 +1,6 @@\n import type {\n   ProxyConfig,\n-  MiddlewareMatcher,\n+  ProxyMatcher,\n   RSCModuleType,\n } from '../../analysis/get-page-static-info'\n import type { webpack } from 'next/dist/compiled/webpack/webpack'\n@@ -47,7 +47,7 @@ export interface RouteMeta {\n \n export interface EdgeMiddlewareMeta {\n   page: string\n-  matchers?: MiddlewareMatcher[]\n+  matchers?: ProxyMatcher[]\n }\n \n export interface EdgeSSRMeta {"
        },
        {
            "sha": "512d1ca32d05c634090f715e2c6a19d6adbcb572",
            "filename": "packages/next/src/build/webpack/loaders/next-middleware-loader.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-middleware-loader.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-middleware-loader.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Floaders%2Fnext-middleware-loader.ts?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -1,6 +1,6 @@\n import type {\n   ProxyConfig,\n-  MiddlewareMatcher,\n+  ProxyMatcher,\n } from '../../analysis/get-page-static-info'\n import { getModuleBuildInfo } from './get-module-build-info'\n import {\n@@ -20,14 +20,14 @@ export type MiddlewareLoaderOptions = {\n \n // matchers can have special characters that break the loader params\n // parsing so we base64 encode/decode the string\n-export function encodeMatchers(matchers: MiddlewareMatcher[]) {\n+export function encodeMatchers(matchers: ProxyMatcher[]) {\n   return Buffer.from(JSON.stringify(matchers)).toString('base64')\n }\n \n export function decodeMatchers(encodedMatchers: string) {\n   return JSON.parse(\n     Buffer.from(encodedMatchers, 'base64').toString()\n-  ) as MiddlewareMatcher[]\n+  ) as ProxyMatcher[]\n }\n \n export default async function middlewareLoader(this: any) {"
        },
        {
            "sha": "bb347a34c9e69dad334ba91d5f93f741aed488a0",
            "filename": "packages/next/src/build/webpack/plugins/middleware-plugin.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Fplugins%2Fmiddleware-plugin.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Fplugins%2Fmiddleware-plugin.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fbuild%2Fwebpack%2Fplugins%2Fmiddleware-plugin.ts?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -3,7 +3,7 @@ import type {\n   EdgeMiddlewareMeta,\n } from '../loaders/get-module-build-info'\n import type { EdgeSSRMeta } from '../loaders/get-module-build-info'\n-import type { MiddlewareMatcher } from '../../analysis/get-page-static-info'\n+import type { ProxyMatcher } from '../../analysis/get-page-static-info'\n import { getNamedMiddlewareRegex } from '../../../shared/lib/router/utils/route-regex'\n import { getModuleBuildInfo } from '../loaders/get-module-build-info'\n import { getSortedRoutes } from '../../../shared/lib/router/utils'\n@@ -44,7 +44,7 @@ export interface EdgeFunctionDefinition {\n   files: string[]\n   name: string\n   page: string\n-  matchers: MiddlewareMatcher[]\n+  matchers: ProxyMatcher[]\n   env: Record<string, string>\n   wasm?: AssetBinding[]\n   assets?: AssetBinding[]"
        },
        {
            "sha": "205785b9cb2d8635301e20394b1116d435a1bfc9",
            "filename": "packages/next/src/client/page-loader.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fclient%2Fpage-loader.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fclient%2Fpage-loader.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fpage-loader.ts?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -1,6 +1,6 @@\n import type { ComponentType } from 'react'\n import type { RouteLoader } from './route-loader'\n-import type { MiddlewareMatcher } from '../build/analysis/get-page-static-info'\n+import type { ProxyMatcher } from '../build/analysis/get-page-static-info'\n import { addBasePath } from './add-base-path'\n import { interpolateAs } from '../shared/lib/router/utils/interpolate-as'\n import getAssetPathFromRoute from '../shared/lib/router/utils/get-asset-path-from-route'\n@@ -17,7 +17,7 @@ import {\n \n declare global {\n   interface Window {\n-    __DEV_MIDDLEWARE_MATCHERS?: MiddlewareMatcher[]\n+    __DEV_MIDDLEWARE_MATCHERS?: ProxyMatcher[]\n     __DEV_PAGES_MANIFEST?: { pages: string[] }\n     __SSG_MANIFEST_CB?: () => void\n     __SSG_MANIFEST?: Set<string>\n@@ -36,7 +36,7 @@ export default class PageLoader {\n   private assetPrefix: string\n   private promisedSsgManifest: Promise<Set<string>>\n   private promisedDevPagesManifest?: Promise<string[]>\n-  private promisedMiddlewareMatchers?: Promise<MiddlewareMatcher[]>\n+  private promisedMiddlewareMatchers?: Promise<ProxyMatcher[]>\n \n   public routeLoader: RouteLoader\n \n@@ -93,7 +93,7 @@ export default class PageLoader {\n     ) {\n       const middlewareMatchers = process.env.__NEXT_MIDDLEWARE_MATCHERS\n       window.__MIDDLEWARE_MATCHERS = middlewareMatchers\n-        ? (middlewareMatchers as any as MiddlewareMatcher[])\n+        ? (middlewareMatchers as any as ProxyMatcher[])\n         : undefined\n       return window.__MIDDLEWARE_MATCHERS\n       // Turbopack production\n@@ -109,7 +109,7 @@ export default class PageLoader {\n             { credentials: 'same-origin' }\n           )\n             .then((res) => res.json())\n-            .then((matchers: MiddlewareMatcher[]) => {\n+            .then((matchers: ProxyMatcher[]) => {\n               window.__MIDDLEWARE_MATCHERS = matchers\n               return matchers\n             })\n@@ -133,7 +133,7 @@ export default class PageLoader {\n             { credentials: 'same-origin' }\n           )\n             .then((res) => res.json())\n-            .then((matchers: MiddlewareMatcher[]) => {\n+            .then((matchers: ProxyMatcher[]) => {\n               window.__DEV_MIDDLEWARE_MATCHERS = matchers\n               return matchers\n             })"
        },
        {
            "sha": "78a7824a00d5eeeeed5918a25fff02e9da490ddf",
            "filename": "packages/next/src/client/route-loader.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fclient%2Froute-loader.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fclient%2Froute-loader.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Froute-loader.ts?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -1,5 +1,5 @@\n import type { ComponentType } from 'react'\n-import type { MiddlewareMatcher } from '../build/analysis/get-page-static-info'\n+import type { ProxyMatcher } from '../build/analysis/get-page-static-info'\n import getAssetPathFromRoute from '../shared/lib/router/utils/get-asset-path-from-route'\n import { __unsafeCreateTrustedScriptURL } from './trusted-types'\n import { requestIdleCallback } from './request-idle-callback'\n@@ -16,7 +16,7 @@ declare global {\n   interface Window {\n     __BUILD_MANIFEST?: Record<string, string[]>\n     __BUILD_MANIFEST_CB?: Function\n-    __MIDDLEWARE_MATCHERS?: MiddlewareMatcher[]\n+    __MIDDLEWARE_MATCHERS?: ProxyMatcher[]\n     __MIDDLEWARE_MANIFEST_CB?: Function\n     __REACT_LOADABLE_MANIFEST?: any\n     __DYNAMIC_CSS_MANIFEST?: any"
        },
        {
            "sha": "fdcdf363ee4d2429a98362ff4c0ebd2fc15fb10b",
            "filename": "packages/next/src/server/base-server.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fbase-server.ts?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -40,7 +40,7 @@ import type {\n   IncomingMessage,\n   ServerResponse as HTTPServerResponse,\n } from 'http'\n-import type { MiddlewareMatcher } from '../build/analysis/get-page-static-info'\n+import type { ProxyMatcher } from '../build/analysis/get-page-static-info'\n import type { TLSSocket } from 'tls'\n import type { PathnameNormalizer } from './normalizers/request/pathname-normalizer'\n import type { InstrumentationModule } from './instrumentation/types'\n@@ -157,7 +157,7 @@ export type FindComponentsResult = {\n export interface MiddlewareRoutingItem {\n   page: string\n   match: MiddlewareRouteMatch\n-  matchers?: MiddlewareMatcher[]\n+  matchers?: ProxyMatcher[]\n }\n \n export type RouteHandler<"
        },
        {
            "sha": "67bf738049f8f168943f10be40c63654a960d129",
            "filename": "packages/next/src/server/lib/router-utils/setup-dev-bundler.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Fsetup-dev-bundler.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Fsetup-dev-bundler.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Flib%2Frouter-utils%2Fsetup-dev-bundler.ts?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -1,7 +1,7 @@\n import type { NextConfigComplete } from '../../config-shared'\n import type { FilesystemDynamicRoute } from './filesystem'\n import type { UnwrapPromise } from '../../../lib/coalesced-function'\n-import type { MiddlewareMatcher } from '../../../build/analysis/get-page-static-info'\n+import type { ProxyMatcher } from '../../../build/analysis/get-page-static-info'\n import type { RoutesManifest } from '../../../build'\n import type { MiddlewareRouteMatch } from '../../../shared/lib/router/utils/middleware-route-matcher'\n import type { PropagateToWorkersField } from './types'\n@@ -124,7 +124,7 @@ export type ServerFields = {\n     | {\n         page: string\n         match: MiddlewareRouteMatch\n-        matchers?: MiddlewareMatcher[]\n+        matchers?: ProxyMatcher[]\n       }\n     | undefined\n   hasAppNotFound?: boolean\n@@ -359,7 +359,7 @@ async function startWatcher(\n     wp.on('aggregated', async () => {\n       let writeEnvDefinitions = false\n       let typescriptStatusFromLastAggregation = enabledTypeScript\n-      let middlewareMatchers: MiddlewareMatcher[] | undefined\n+      let middlewareMatchers: ProxyMatcher[] | undefined\n       const routedPages: string[] = []\n       const knownFiles = wp.getTimeInfoEntries()\n       const appPaths: Record<string, string[]> = {}"
        },
        {
            "sha": "f97f7746fc6fb0a566e65dbb4bda66e54d898659",
            "filename": "packages/next/src/shared/lib/router/utils/middleware-route-matcher.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Frouter%2Futils%2Fmiddleware-route-matcher.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/bbfcbe9611e1b1edacb266140bc992c3b527ea4a/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Frouter%2Futils%2Fmiddleware-route-matcher.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Frouter%2Futils%2Fmiddleware-route-matcher.ts?ref=bbfcbe9611e1b1edacb266140bc992c3b527ea4a",
            "patch": "@@ -1,5 +1,5 @@\n import type { BaseNextRequest } from '../../../../server/base-http'\n-import type { MiddlewareMatcher } from '../../../../build/analysis/get-page-static-info'\n+import type { ProxyMatcher } from '../../../../build/analysis/get-page-static-info'\n import type { Params } from '../../../../server/request/params'\n import { matchHas } from './prepare-destination'\n \n@@ -12,7 +12,7 @@ export interface MiddlewareRouteMatch {\n }\n \n export function getMiddlewareRouteMatcher(\n-  matchers: MiddlewareMatcher[]\n+  matchers: ProxyMatcher[]\n ): MiddlewareRouteMatch {\n   return (\n     pathname: string | null | undefined,"
        }
    ],
    "stats": {
        "total": 117,
        "additions": 58,
        "deletions": 59
    }
}