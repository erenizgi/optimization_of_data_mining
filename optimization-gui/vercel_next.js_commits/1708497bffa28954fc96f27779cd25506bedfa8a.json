{
    "author": "huozhi",
    "message": "feat: option to disable next types plugin (#76300)",
    "sha": "1708497bffa28954fc96f27779cd25506bedfa8a",
    "files": [
        {
            "sha": "1593d89fbea4cf50497f2159661e43bd8f66a326",
            "filename": "packages/next/src/server/next.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/1708497bffa28954fc96f27779cd25506bedfa8a/packages%2Fnext%2Fsrc%2Fserver%2Fnext.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1708497bffa28954fc96f27779cd25506bedfa8a/packages%2Fnext%2Fsrc%2Fserver%2Fnext.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fnext.ts?ref=1708497bffa28954fc96f27779cd25506bedfa8a",
            "patch": "@@ -466,7 +466,10 @@ function createServer(\n     'typescript' in options &&\n     'version' in (options as any).typescript\n   ) {\n-    return require('./next-typescript').createTSPlugin(options)\n+    const pluginMod: typeof import('./next-typescript') = require('./next-typescript')\n+    return pluginMod.createTSPlugin(\n+      options as any\n+    ) as unknown as NextWrapperServer\n   }\n \n   if (options == null) {"
        },
        {
            "sha": "9b97765c9b1250101190f94f00c35afbf1b76094",
            "filename": "packages/next/src/server/typescript/index.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/vercel/next.js/blob/1708497bffa28954fc96f27779cd25506bedfa8a/packages%2Fnext%2Fsrc%2Fserver%2Ftypescript%2Findex.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/1708497bffa28954fc96f27779cd25506bedfa8a/packages%2Fnext%2Fsrc%2Fserver%2Ftypescript%2Findex.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Ftypescript%2Findex.ts?ref=1708497bffa28954fc96f27779cd25506bedfa8a",
            "patch": "@@ -28,6 +28,10 @@ import metadata from './rules/metadata'\n import errorEntry from './rules/error'\n import type tsModule from 'typescript/lib/tsserverlibrary'\n \n+type NextTypePluginOptions = {\n+  enabled?: boolean\n+}\n+\n export const createTSPlugin: tsModule.server.PluginModuleFactory = ({\n   typescript: ts,\n }) => {\n@@ -44,6 +48,13 @@ export const createTSPlugin: tsModule.server.PluginModuleFactory = ({\n       proxy[k] = (...args: Array<{}>) => x.apply(info.languageService, args)\n     }\n \n+    const pluginOptions: NextTypePluginOptions = info.config ?? {\n+      enabled: true,\n+    }\n+    if (!pluginOptions.enabled) {\n+      return proxy\n+    }\n+\n     // Auto completion\n     proxy.getCompletionsAtPosition = (\n       fileName: string,"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 15,
        "deletions": 1
    }
}