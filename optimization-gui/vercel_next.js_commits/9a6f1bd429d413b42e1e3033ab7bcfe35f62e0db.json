{
    "author": "ztanner",
    "message": "rename `handleSmoothScroll` util (#81546)\n\nThis function has a confusing name because it doesn't do any sort of smooth scroll handling or behavior, it just resets smooth scroll handling on the document before performing a router transition.  This attempts to rename the function to be more accurate to what it's doing.",
    "sha": "9a6f1bd429d413b42e1e3033ab7bcfe35f62e0db",
    "files": [
        {
            "sha": "5670a62d2a4e771d895e9d938d05009367d2307d",
            "filename": "packages/next/src/client/components/layout-router.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/9a6f1bd429d413b42e1e3033ab7bcfe35f62e0db/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Flayout-router.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9a6f1bd429d413b42e1e3033ab7bcfe35f62e0db/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Flayout-router.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Flayout-router.tsx?ref=9a6f1bd429d413b42e1e3033ab7bcfe35f62e0db",
            "patch": "@@ -33,7 +33,7 @@ import { fetchServerResponse } from './router-reducer/fetch-server-response'\n import { unresolvedThenable } from './unresolved-thenable'\n import { ErrorBoundary } from './error-boundary'\n import { matchSegment } from './match-segments'\n-import { handleSmoothScroll } from '../../shared/lib/router/utils/handle-smooth-scroll'\n+import { disableSmoothScrollDuringRouteTransition } from '../../shared/lib/router/utils/disable-smooth-scroll'\n import { RedirectBoundary } from './redirect-boundary'\n import { HTTPAccessFallbackBoundary } from './http-access-fallback/error-boundary'\n import { createRouterCacheKey } from './router-reducer/create-router-cache-key'\n@@ -244,7 +244,7 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n       focusAndScrollRef.hashFragment = null\n       focusAndScrollRef.segmentPaths = []\n \n-      handleSmoothScroll(\n+      disableSmoothScrollDuringRouteTransition(\n         () => {\n           // In case of hash scroll, we only need to scroll the element into view\n           if (hashFragment) {\n@@ -281,7 +281,7 @@ class InnerScrollAndFocusHandler extends React.Component<ScrollAndFocusHandlerPr\n         }\n       )\n \n-      // Mutate after scrolling so that it can be read by `handleSmoothScroll`\n+      // Mutate after scrolling so that it can be read by `disableSmoothScrollDuringRouteTransition`\n       focusAndScrollRef.onlyHashChange = false\n \n       // Set focus on the element"
        },
        {
            "sha": "d63875b6b059059b4e4feb87f9bd1eb968d6c189",
            "filename": "packages/next/src/client/index.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/9a6f1bd429d413b42e1e3033ab7bcfe35f62e0db/packages%2Fnext%2Fsrc%2Fclient%2Findex.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/9a6f1bd429d413b42e1e3033ab7bcfe35f62e0db/packages%2Fnext%2Fsrc%2Fclient%2Findex.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Findex.tsx?ref=9a6f1bd429d413b42e1e3033ab7bcfe35f62e0db",
            "patch": "@@ -14,7 +14,7 @@ import { HeadManagerContext } from '../shared/lib/head-manager-context.shared-ru\n import mitt from '../shared/lib/mitt'\n import type { MittEmitter } from '../shared/lib/mitt'\n import { RouterContext } from '../shared/lib/router-context.shared-runtime'\n-import { handleSmoothScroll } from '../shared/lib/router/utils/handle-smooth-scroll'\n+import { disableSmoothScrollDuringRouteTransition } from '../shared/lib/router/utils/disable-smooth-scroll'\n import { isDynamicRoute } from '../shared/lib/router/utils/is-dynamic'\n import {\n   urlQueryToSearchParams,\n@@ -770,7 +770,7 @@ function doRender(input: RenderRouteInfo): Promise<any> {\n \n     if (input.scroll) {\n       const { x, y } = input.scroll\n-      handleSmoothScroll(() => {\n+      disableSmoothScrollDuringRouteTransition(() => {\n         window.scrollTo(x, y)\n       })\n     }"
        },
        {
            "sha": "6b34e54a658dd1c83beaa0f2e0034afb68ca1699",
            "filename": "packages/next/src/shared/lib/router/router.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/9a6f1bd429d413b42e1e3033ab7bcfe35f62e0db/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Frouter%2Frouter.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/9a6f1bd429d413b42e1e3033ab7bcfe35f62e0db/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Frouter%2Frouter.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Frouter%2Frouter.ts?ref=9a6f1bd429d413b42e1e3033ab7bcfe35f62e0db",
            "patch": "@@ -41,7 +41,7 @@ import { isLocalURL } from './utils/is-local-url'\n import { isBot } from './utils/is-bot'\n import { omit } from './utils/omit'\n import { interpolateAs } from './utils/interpolate-as'\n-import { handleSmoothScroll } from './utils/handle-smooth-scroll'\n+import { disableSmoothScrollDuringRouteTransition } from './utils/disable-smooth-scroll'\n import type { Params } from '../../../server/request/params'\n import { MATCHED_PATH_HEADER } from '../../../lib/constants'\n \n@@ -2286,7 +2286,7 @@ export default class Router implements BaseRouter {\n   scrollToHash(as: string): void {\n     const [, hash = ''] = as.split('#', 2)\n \n-    handleSmoothScroll(\n+    disableSmoothScrollDuringRouteTransition(\n       () => {\n         // Scroll to top if the hash is just `#` with no value or `#top`\n         // To mirror browsers"
        },
        {
            "sha": "d6a6076de78e1fe74850ab88b67d5c563c59efe5",
            "filename": "packages/next/src/shared/lib/router/utils/disable-smooth-scroll.ts",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/9a6f1bd429d413b42e1e3033ab7bcfe35f62e0db/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Frouter%2Futils%2Fdisable-smooth-scroll.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/9a6f1bd429d413b42e1e3033ab7bcfe35f62e0db/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Frouter%2Futils%2Fdisable-smooth-scroll.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fshared%2Flib%2Frouter%2Futils%2Fdisable-smooth-scroll.ts?ref=9a6f1bd429d413b42e1e3033ab7bcfe35f62e0db",
            "patch": "@@ -2,7 +2,7 @@\n  * Run function with `scroll-behavior: auto` applied to `<html/>`.\n  * This css change will be reverted after the function finishes.\n  */\n-export function handleSmoothScroll(\n+export function disableSmoothScrollDuringRouteTransition(\n   fn: () => void,\n   options: { dontForceLayout?: boolean; onlyHashChange?: boolean } = {}\n ) {",
            "previous_filename": "packages/next/src/shared/lib/router/utils/handle-smooth-scroll.ts"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 8,
        "deletions": 8
    }
}