{
    "author": "mischnic",
    "message": "Reenable a few more Turbopack tests (#78153)\n\nSplit out some changes from #76979\r\n\r\nThese were all already passing (and ignored via code as opposed to the manifest)",
    "sha": "f737565989b1f5054c9651830182479c5e3b7cda",
    "files": [
        {
            "sha": "c766cf644322a067c524fdfa50304aa1dbf953fd",
            "filename": "test/e2e/app-dir/dynamic-io/dynamic-io.test.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 15,
            "changes": 25,
            "blob_url": "https://github.com/vercel/next.js/blob/f737565989b1f5054c9651830182479c5e3b7cda/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f737565989b1f5054c9651830182479c5e3b7cda/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io%2Fdynamic-io.test.ts?ref=f737565989b1f5054c9651830182479c5e3b7cda",
            "patch": "@@ -6,7 +6,7 @@ import { BrowserInterface } from 'next-webdriver'\n const WITH_PPR = !!process.env.__NEXT_EXPERIMENTAL_PPR\n \n describe('dynamic-io', () => {\n-  const { next, isNextDev, isTurbopack, skipped } = nextTestSetup({\n+  const { next, isNextDev, skipped } = nextTestSetup({\n     files: __dirname,\n     skipDeployment: true,\n   })\n@@ -15,8 +15,6 @@ describe('dynamic-io', () => {\n     return\n   }\n \n-  const itSkipTurbopack = isTurbopack ? it.skip : it\n-\n   if (isNextDev && !WITH_PPR) {\n     async function hasStaticIndicator(browser: BrowserInterface) {\n       await browser.elementByCss('[data-nextjs-dev-tools-button]').click()\n@@ -245,19 +243,16 @@ describe('dynamic-io', () => {\n     }\n   })\n \n-  itSkipTurbopack(\n-    'should prerender pages that cached the whole page',\n-    async () => {\n-      const $ = await next.render$('/cases/full_cached', {})\n-      if (isNextDev) {\n-        expect($('#layout').text()).toBe('at runtime')\n-        expect($('#page').text()).toBe('at runtime')\n-      } else {\n-        expect($('#layout').text()).toBe('at buildtime')\n-        expect($('#page').text()).toBe('at buildtime')\n-      }\n+  it('should prerender pages that cached the whole page', async () => {\n+    const $ = await next.render$('/cases/full_cached', {})\n+    if (isNextDev) {\n+      expect($('#layout').text()).toBe('at runtime')\n+      expect($('#page').text()).toBe('at runtime')\n+    } else {\n+      expect($('#layout').text()).toBe('at buildtime')\n+      expect($('#page').text()).toBe('at buildtime')\n     }\n-  )\n+  })\n \n   if (WITH_PPR) {\n     it('should partially prerender pages that do any uncached IO', async () => {"
        },
        {
            "sha": "2d3394728a7ed7247869631f766c2774b8a1f316",
            "filename": "test/e2e/app-dir/loader-file-named-export-custom-loader-error/loader-file-named-export-custom-loader-error.test.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 13,
            "changes": 21,
            "blob_url": "https://github.com/vercel/next.js/blob/f737565989b1f5054c9651830182479c5e3b7cda/test%2Fe2e%2Fapp-dir%2Floader-file-named-export-custom-loader-error%2Floader-file-named-export-custom-loader-error.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f737565989b1f5054c9651830182479c5e3b7cda/test%2Fe2e%2Fapp-dir%2Floader-file-named-export-custom-loader-error%2Floader-file-named-export-custom-loader-error.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Floader-file-named-export-custom-loader-error%2Floader-file-named-export-custom-loader-error.test.ts?ref=f737565989b1f5054c9651830182479c5e3b7cda",
            "patch": "@@ -36,18 +36,13 @@ describe('Error test if the loader file export a named function', () => {\n       files: __dirname,\n     })\n \n-    // next build doesn't support turbopack yet\n-    // see https://nextjs.org/docs/app/api-reference/turbopack#unsupported-features\n-    ;(isNextStart && !process.env.IS_TURBOPACK_TEST ? describe : describe.skip)(\n-      'build and start only',\n-      () => {\n-        it('should show the build error', async () => {\n-          await expect(next.start()).rejects.toThrow(\n-            'next build failed with code/signal 1'\n-          )\n-          expect(next.cliOutput).toContain(errorMessage)\n-        })\n-      }\n-    )\n+    ;(isNextStart ? describe : describe.skip)('build and start only', () => {\n+      it('should show the build error', async () => {\n+        await expect(next.start()).rejects.toThrow(\n+          'next build failed with code/signal 1'\n+        )\n+        expect(next.cliOutput).toContain(errorMessage)\n+      })\n+    })\n   })\n })"
        },
        {
            "sha": "0818680967c53717f72d995c72d09a6301591dbe",
            "filename": "test/e2e/app-dir/rsc-webpack-loader/rsc-webpack-loader.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/f737565989b1f5054c9651830182479c5e3b7cda/test%2Fe2e%2Fapp-dir%2Frsc-webpack-loader%2Frsc-webpack-loader.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f737565989b1f5054c9651830182479c5e3b7cda/test%2Fe2e%2Fapp-dir%2Frsc-webpack-loader%2Frsc-webpack-loader.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Frsc-webpack-loader%2Frsc-webpack-loader.test.ts?ref=f737565989b1f5054c9651830182479c5e3b7cda",
            "patch": "@@ -1,4 +1,6 @@\n import { nextTestSetup } from 'e2e-utils'\n+\n+// Skip as Turbopack doesn't support the `!=!` Webpack syntax\n ;(process.env.IS_TURBOPACK_TEST ? describe.skip : describe)(\n   'app dir - rsc webpack loader',\n   () => {\n@@ -16,7 +18,6 @@ import { nextTestSetup } from 'e2e-utils'\n       },\n     })\n \n-    // Skip as Turbopack doesn't support webpack loaders.\n     it('should support webpack loader rules', async () => {\n       const browser = await next.browser('/loader-rule')\n "
        },
        {
            "sha": "7c1842ff51a63679c208b2cec2d0a64d9847d5c5",
            "filename": "test/integration/edge-runtime-streaming-error/test/index.test.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 15,
            "changes": 28,
            "blob_url": "https://github.com/vercel/next.js/blob/f737565989b1f5054c9651830182479c5e3b7cda/test%2Fintegration%2Fedge-runtime-streaming-error%2Ftest%2Findex.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/f737565989b1f5054c9651830182479c5e3b7cda/test%2Fintegration%2Fedge-runtime-streaming-error%2Ftest%2Findex.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fedge-runtime-streaming-error%2Ftest%2Findex.test.ts?ref=f737565989b1f5054c9651830182479c5e3b7cda",
            "patch": "@@ -50,25 +50,23 @@ function createContext() {\n   return ctx\n }\n \n-// TODO(veil): Missing `cause` in Turbopack\n-;(process.env.IS_TURBOPACK_TEST ? describe.skip : describe)(\n-  'development mode',\n-  () => {\n-    const context = createContext()\n+describe('development mode', () => {\n+  const context = createContext()\n \n-    beforeAll(async () => {\n-      context.appPort = await findPort()\n-      context.app = await launchApp(appDir, context.appPort, {\n-        ...context.handler,\n-        env: { __NEXT_TEST_WITH_DEVTOOL: '1' },\n-      })\n+  beforeAll(async () => {\n+    context.appPort = await findPort()\n+    context.app = await launchApp(appDir, context.appPort, {\n+      ...context.handler,\n+      env: { __NEXT_TEST_WITH_DEVTOOL: '1' },\n     })\n+  })\n \n-    afterAll(() => killApp(context.app))\n+  afterAll(() => killApp(context.app))\n \n-    it('logs the error correctly', test(context))\n-  }\n-)\n+  it('logs the error correctly', test(context))\n+})\n+\n+// This test setups fails for unrelated reasons when TURBOPACK_DEV is set\n ;(process.env.TURBOPACK_DEV ? describe.skip : describe)(\n   'production mode',\n   () => {"
        },
        {
            "sha": "c8015dd8a73252941d0c331a0bda21d38b0f99a5",
            "filename": "test/integration/url-imports/test/index.test.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/f737565989b1f5054c9651830182479c5e3b7cda/test%2Fintegration%2Furl-imports%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/f737565989b1f5054c9651830182479c5e3b7cda/test%2Fintegration%2Furl-imports%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Furl-imports%2Ftest%2Findex.test.js?ref=f737565989b1f5054c9651830182479c5e3b7cda",
            "patch": "@@ -21,6 +21,7 @@ import webdriver from 'next-webdriver'\n jest.setTimeout(1000 * 60 * 2)\n const appDir = join(__dirname, '../')\n \n+// experimental.urlImports is not implemented in Turbopack\n ;(process.env.IS_TURBOPACK_TEST ? describe.skip : describe)(\n   `Handle url imports`,\n   () => {"
        },
        {
            "sha": "119c0d4dc348cb5737a9c73ad687477b6bc3a665",
            "filename": "test/turbopack-build-tests-manifest.json",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/f737565989b1f5054c9651830182479c5e3b7cda/test%2Fturbopack-build-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/f737565989b1f5054c9651830182479c5e3b7cda/test%2Fturbopack-build-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fturbopack-build-tests-manifest.json?ref=f737565989b1f5054c9651830182479c5e3b7cda",
            "patch": "@@ -2121,14 +2121,15 @@\n       \"dynamic-io should not prerender pages that use at least one fetch without cache\",\n       \"dynamic-io should not warn about potential memory leak for even listeners on AbortSignal\",\n       \"dynamic-io should prerender fully static pages\",\n+      \"dynamic-io should prerender pages that cached the whole page\",\n       \"dynamic-io should prerender pages that only use cached (\\\"use cache\\\") IO\",\n       \"dynamic-io should prerender pages that only use cached (unstable_cache) IO\",\n       \"dynamic-io should prerender pages that only use cached fetches\",\n       \"dynamic-io should prerender pages that render in a microtask\",\n       \"dynamic-io should prerender static not-found pages\"\n     ],\n     \"failed\": [],\n-    \"pending\": [\"dynamic-io should prerender pages that cached the whole page\"],\n+    \"pending\": [],\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n@@ -2636,10 +2637,11 @@\n     \"runtimeError\": false\n   },\n   \"test/e2e/app-dir/loader-file-named-export-custom-loader-error/loader-file-named-export-custom-loader-error.test.ts\": {\n-    \"passed\": [],\n+    \"passed\": [\n+      \"Error test if the loader file export a named function in Build and Start build and start only should show the build error\"\n+    ],\n     \"failed\": [],\n     \"pending\": [\n-      \"Error test if the loader file export a named function in Build and Start build and start only should show the build error\",\n       \"Error test if the loader file export a named function in Development development only should show the error when using `Image` component\",\n       \"Error test if the loader file export a named function in Development development only should show the error when using `getImageProps` method\"\n     ],"
        },
        {
            "sha": "8ccd17070b2c1d8ed30e233a67f823413637d100",
            "filename": "test/turbopack-dev-tests-manifest.json",
            "status": "modified",
            "additions": 4,
            "deletions": 6,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/f737565989b1f5054c9651830182479c5e3b7cda/test%2Fturbopack-dev-tests-manifest.json",
            "raw_url": "https://github.com/vercel/next.js/raw/f737565989b1f5054c9651830182479c5e3b7cda/test%2Fturbopack-dev-tests-manifest.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fturbopack-dev-tests-manifest.json?ref=f737565989b1f5054c9651830182479c5e3b7cda",
            "patch": "@@ -5565,14 +5565,15 @@\n       \"dynamic-io should not prerender pages that use `searchParams` in Server Components\",\n       \"dynamic-io should not prerender pages that use at least one fetch without cache\",\n       \"dynamic-io should prerender fully static pages\",\n+      \"dynamic-io should prerender pages that cached the whole page\",\n       \"dynamic-io should prerender pages that only use cached (\\\"use cache\\\") IO\",\n       \"dynamic-io should prerender pages that only use cached (unstable_cache) IO\",\n       \"dynamic-io should prerender pages that only use cached fetches\",\n       \"dynamic-io should prerender pages that render in a microtask\",\n       \"dynamic-io should prerender static not-found pages\"\n     ],\n     \"failed\": [],\n-    \"pending\": [\"dynamic-io should prerender pages that cached the whole page\"],\n+    \"pending\": [],\n     \"flakey\": [],\n     \"runtimeError\": false\n   },\n@@ -14104,12 +14105,9 @@\n     \"runtimeError\": false\n   },\n   \"test/integration/edge-runtime-streaming-error/test/index.test.ts\": {\n-    \"passed\": [],\n+    \"passed\": [\"development mode logs the error correctly\"],\n     \"failed\": [],\n-    \"pending\": [\n-      \"development mode logs the error correctly\",\n-      \"production mode logs the error correctly\"\n-    ],\n+    \"pending\": [\"production mode logs the error correctly\"],\n     \"flakey\": [],\n     \"runtimeError\": false\n   },"
        }
    ],
    "stats": {
        "total": 96,
        "additions": 43,
        "deletions": 53
    }
}