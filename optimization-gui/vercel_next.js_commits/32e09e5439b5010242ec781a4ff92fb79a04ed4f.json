{
    "author": "huozhi",
    "message": "[codemod] return origin src in viewport mod if not changed (#83435)",
    "sha": "32e09e5439b5010242ec781a4ff92fb79a04ed4f",
    "files": [
        {
            "sha": "61e39c6b7db859fd323c768f12de1b5716e0aa31",
            "filename": "packages/next-codemod/transforms/metadata-to-viewport-export.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 2,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/32e09e5439b5010242ec781a4ff92fb79a04ed4f/packages%2Fnext-codemod%2Ftransforms%2Fmetadata-to-viewport-export.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/32e09e5439b5010242ec781a4ff92fb79a04ed4f/packages%2Fnext-codemod%2Ftransforms%2Fmetadata-to-viewport-export.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext-codemod%2Ftransforms%2Fmetadata-to-viewport-export.ts?ref=32e09e5439b5010242ec781a4ff92fb79a04ed4f",
            "patch": "@@ -18,17 +18,18 @@ export default function transformer(file: FileInfo, _api: API) {\n   })\n \n   if (metadataExport.size() !== 1) {\n-    return\n+    return file.source\n   }\n \n   const metadataObject = metadataExport.find(j.ObjectExpression).get(0).node\n   if (!metadataObject) {\n     console.error('Could not find metadata object')\n-    return\n+    return file.source\n   }\n \n   let metadataProperties = metadataObject.properties\n   let viewportProperties\n+  let hasChanges = false\n \n   const viewport = metadataProperties.find(\n     (prop) => prop.key.name === 'viewport'\n@@ -38,6 +39,7 @@ export default function transformer(file: FileInfo, _api: API) {\n     metadataProperties = metadataProperties.filter(\n       (prop) => prop.key.name !== 'viewport'\n     )\n+    hasChanges = true\n   } else {\n     viewportProperties = []\n   }\n@@ -50,6 +52,7 @@ export default function transformer(file: FileInfo, _api: API) {\n     metadataProperties = metadataProperties.filter(\n       (prop) => prop.key.name !== 'colorScheme'\n     )\n+    hasChanges = true\n   }\n \n   const themeColor = metadataProperties.find(\n@@ -60,6 +63,12 @@ export default function transformer(file: FileInfo, _api: API) {\n     metadataProperties = metadataProperties.filter(\n       (prop) => prop.key.name !== 'themeColor'\n     )\n+    hasChanges = true\n+  }\n+\n+  // Only apply changes if there were actual modifications\n+  if (!hasChanges) {\n+    return file.source\n   }\n \n   // Update the metadata export"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 11,
        "deletions": 2
    }
}