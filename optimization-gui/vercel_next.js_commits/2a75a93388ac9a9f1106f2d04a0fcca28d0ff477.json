{
    "author": "unstubbable",
    "message": "Don't start next server unnecessarily to assert build output (#80994)\n\nIn some of these tests we only need to check the CLI output after a\nbuild, so we can skip starting the server to save some cycles.",
    "sha": "2a75a93388ac9a9f1106f2d04a0fcca28d0ff477",
    "files": [
        {
            "sha": "a326df8fe94cf59236320d8790852b9d4797d430",
            "filename": "test/e2e/app-dir/dynamic-io-errors/dynamic-io-errors.platform-dynamic.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/2a75a93388ac9a9f1106f2d04a0fcca28d0ff477/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.platform-dynamic.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2a75a93388ac9a9f1106f2d04a0fcca28d0ff477/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.platform-dynamic.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.platform-dynamic.test.ts?ref=2a75a93388ac9a9f1106f2d04a0fcca28d0ff477",
            "patch": "@@ -88,7 +88,7 @@ describe.each([\n     } else {\n       it('should error the build if Math.random() happens before some component outside a Suspense boundary is complete', async () => {\n         try {\n-          await next.start()\n+          await next.build()\n         } catch {\n           // we expect the build to fail\n         }"
        },
        {
            "sha": "407e74804ce8bcc94e3f658e612645d5cfeb5a9a",
            "filename": "test/e2e/app-dir/dynamic-io-errors/dynamic-io-errors.sync-attribution.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/2a75a93388ac9a9f1106f2d04a0fcca28d0ff477/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.sync-attribution.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2a75a93388ac9a9f1106f2d04a0fcca28d0ff477/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.sync-attribution.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.sync-attribution.test.ts?ref=2a75a93388ac9a9f1106f2d04a0fcca28d0ff477",
            "patch": "@@ -38,7 +38,7 @@ describe.each([\n     } else {\n       it('should not error the build sync IO is used inside a Suspense Boundary in a client Component and nothing else is dynamic', async () => {\n         try {\n-          await next.start()\n+          await next.build()\n         } catch {\n           throw new Error('expected build not to fail')\n         }\n@@ -90,7 +90,7 @@ describe.each([\n     } else {\n       it('should error the build with a reason related to sync IO access', async () => {\n         try {\n-          await next.start()\n+          await next.build()\n         } catch {\n           // we expect the build to fail\n         }\n@@ -228,7 +228,7 @@ describe.each([\n     } else {\n       it('should error the build with a reason related dynamic data', async () => {\n         try {\n-          await next.start()\n+          await next.build()\n         } catch {\n           // we expect the build to fail\n         }\n@@ -378,7 +378,7 @@ describe.each([\n     } else {\n       it('should error the build with a reason related to sync IO access', async () => {\n         try {\n-          await next.start()\n+          await next.build()\n         } catch {\n           // we expect the build to fail\n         }"
        },
        {
            "sha": "04b3fae0c3020dc0be00c16b8f0802f27374b5cb",
            "filename": "test/e2e/app-dir/dynamic-io-errors/dynamic-io-errors.sync-dynamic.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/2a75a93388ac9a9f1106f2d04a0fcca28d0ff477/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.sync-dynamic.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2a75a93388ac9a9f1106f2d04a0fcca28d0ff477/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.sync-dynamic.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.sync-dynamic.test.ts?ref=2a75a93388ac9a9f1106f2d04a0fcca28d0ff477",
            "patch": "@@ -124,7 +124,7 @@ describe.each([\n     } else {\n       it('should error the build if dynamic IO happens in the root (outside a Suspense)', async () => {\n         try {\n-          await next.start()\n+          await next.build()\n         } catch {\n           // we expect the build to fail\n         }\n@@ -358,7 +358,7 @@ describe.each([\n     } else {\n       it('should error the build if dynamic IO happens in the root (outside a Suspense)', async () => {\n         try {\n-          await next.start()\n+          await next.build()\n         } catch {\n           // we expect the build to fail\n         }\n@@ -539,7 +539,7 @@ describe.each([\n     } else {\n       it('should error the build if dynamic IO happens in the root (outside a Suspense)', async () => {\n         try {\n-          await next.start()\n+          await next.build()\n         } catch {\n           // we expect the build to fail\n         }"
        },
        {
            "sha": "d429f489725c76e985080690dba3fe1cd5e87e84",
            "filename": "test/e2e/app-dir/dynamic-io-errors/dynamic-io-errors.test.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 8,
            "changes": 15,
            "blob_url": "https://github.com/vercel/next.js/blob/2a75a93388ac9a9f1106f2d04a0fcca28d0ff477/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/2a75a93388ac9a9f1106f2d04a0fcca28d0ff477/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fe2e%2Fapp-dir%2Fdynamic-io-errors%2Fdynamic-io-errors.test.ts?ref=2a75a93388ac9a9f1106f2d04a0fcca28d0ff477",
            "patch": "@@ -47,7 +47,7 @@ describe.each([\n     } else {\n       it('should error the build if generateMetadata is dynamic when the rest of the route is prerenderable', async () => {\n         try {\n-          await next.start()\n+          await next.build()\n         } catch {\n           // we expect the build to fail\n         }\n@@ -166,7 +166,7 @@ describe.each([\n       // This test is just here because there was a bug when dynamic metadata was used alongside another dynamic IO violation which caused the validation to be skipped.\n       it('should error the build for the correct reason when there is a dynamic IO violation alongside dynamic metadata', async () => {\n         try {\n-          await next.start()\n+          await next.build()\n         } catch {\n           // we expect the build to fail\n         }\n@@ -300,7 +300,7 @@ describe.each([\n     } else {\n       it('should error the build if generateMetadata is dynamic when the rest of the route is prerenderable', async () => {\n         try {\n-          await next.start()\n+          await next.build()\n         } catch {\n           // we expect the build to fail\n         }\n@@ -420,7 +420,7 @@ describe.each([\n     } else {\n       it('should error the build if generateViewport is dynamic', async () => {\n         try {\n-          await next.start()\n+          await next.build()\n         } catch {\n           // we expect the build to fail\n         }\n@@ -502,7 +502,7 @@ describe.each([\n     } else {\n       it('should error the build if generateViewport is dynamic even if there are other uses of dynamic on the page', async () => {\n         try {\n-          await next.start()\n+          await next.build()\n         } catch {\n           // we expect the build to fail\n         }\n@@ -573,9 +573,8 @@ describe.each([\n     } else {\n       it('should not error the build when all routes are static', async () => {\n         try {\n-          await next.start()\n+          await next.build()\n         } catch {\n-          // we expect the build to fail\n           throw new Error('expected build not to fail for fully static project')\n         }\n       })\n@@ -694,7 +693,7 @@ describe.each([\n     } else {\n       it('should error the build if dynamic IO happens in the root (outside a Suspense)', async () => {\n         try {\n-          await next.start()\n+          await next.build()\n         } catch {\n           // we expect the build to fail\n         }"
        }
    ],
    "stats": {
        "total": 31,
        "additions": 15,
        "deletions": 16
    }
}