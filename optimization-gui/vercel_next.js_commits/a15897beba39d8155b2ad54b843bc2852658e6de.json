{
    "author": "ztanner",
    "message": "[errors]: default export error should distinguish between layout/page (#76294)\n\nWhen you forget to export a component in the layout, the error message\npoints you to the page component, which is confusing.\n\nThis ensures the error points to the module that's missing the export. \n\nCloses NDX-874",
    "sha": "a15897beba39d8155b2ad54b843bc2852658e6de",
    "files": [
        {
            "sha": "1658adb2764b76d5635df13b89c572983026f842",
            "filename": "packages/next/src/server/app-render/create-component-tree.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/a15897beba39d8155b2ad54b843bc2852658e6de/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/a15897beba39d8155b2ad54b843bc2852658e6de/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fapp-render%2Fcreate-component-tree.tsx?ref=a15897beba39d8155b2ad54b843bc2852658e6de",
            "patch": "@@ -178,7 +178,7 @@ async function createComponentTreeInternal({\n \n   const isLayout = typeof layout !== 'undefined'\n   const isPage = typeof page !== 'undefined'\n-  const { mod: layoutOrPageMod } = await getTracer().trace(\n+  const { mod: layoutOrPageMod, modType } = await getTracer().trace(\n     NextNodeServerSpan.getLayoutOrPageModule,\n     {\n       hideSpan: !(isLayout || isPage),\n@@ -347,10 +347,10 @@ async function createComponentTreeInternal({\n   if (process.env.NODE_ENV === 'development') {\n     const { isValidElementType } = require('next/dist/compiled/react-is')\n     if (\n-      (isPage || typeof MaybeComponent !== 'undefined') &&\n+      typeof MaybeComponent !== 'undefined' &&\n       !isValidElementType(MaybeComponent)\n     ) {\n-      errorMissingDefaultExport(pagePath, 'page')\n+      errorMissingDefaultExport(pagePath, modType ?? 'page')\n     }\n \n     if ("
        },
        {
            "sha": "10740a0378d5f78760859b0ce1292bcdb4f2e02e",
            "filename": "test/development/acceptance-app/undefined-default-export.test.ts",
            "status": "modified",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/vercel/next.js/blob/a15897beba39d8155b2ad54b843bc2852658e6de/test%2Fdevelopment%2Facceptance-app%2Fundefined-default-export.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/a15897beba39d8155b2ad54b843bc2852658e6de/test%2Fdevelopment%2Facceptance-app%2Fundefined-default-export.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2Fundefined-default-export.test.ts?ref=a15897beba39d8155b2ad54b843bc2852658e6de",
            "patch": "@@ -23,6 +23,25 @@ describe('Undefined default export', () => {\n     )\n   })\n \n+  it('should error if layout component does not have default export', async () => {\n+    await using sandbox = await createSandbox(\n+      next,\n+      new Map([\n+        ['app/(group)/specific-path/server/layout.js', 'export const a = 123'],\n+        [\n+          'app/(group)/specific-path/server/page.js',\n+          'export default function Page() { return <div>Hello</div> }',\n+        ],\n+      ]),\n+      '/specific-path/server'\n+    )\n+    const { session } = sandbox\n+    await session.assertHasRedbox()\n+    expect(await session.getRedboxDescription()).toInclude(\n+      'The default export is not a React Component in \"/specific-path/server/layout\"'\n+    )\n+  })\n+\n   it('should error if not-found component does not have default export when trigger not-found boundary', async () => {\n     await using sandbox = await createSandbox(\n       next,"
        }
    ],
    "stats": {
        "total": 25,
        "additions": 22,
        "deletions": 3
    }
}