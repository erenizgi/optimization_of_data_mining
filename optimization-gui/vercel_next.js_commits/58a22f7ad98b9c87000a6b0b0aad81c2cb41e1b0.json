{
    "author": "eps1lon",
    "message": "Disable flaky Turbopack tests (#76760)",
    "sha": "58a22f7ad98b9c87000a6b0b0aad81c2cb41e1b0",
    "files": [
        {
            "sha": "ffc784469a2312b1cf71cb7bbfedfce5f1701f5f",
            "filename": "test/development/acceptance-app/ReactRefreshLogBox.test.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 35,
            "changes": 41,
            "blob_url": "https://github.com/vercel/next.js/blob/58a22f7ad98b9c87000a6b0b0aad81c2cb41e1b0/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/58a22f7ad98b9c87000a6b0b0aad81c2cb41e1b0/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fdevelopment%2Facceptance-app%2FReactRefreshLogBox.test.ts?ref=58a22f7ad98b9c87000a6b0b0aad81c2cb41e1b0",
            "patch": "@@ -344,22 +344,9 @@ describe('ReactRefreshLogBox app', () => {\n     )\n \n     if (isTurbopack) {\n-      await expect(browser).toDisplayRedbox(`\n-       {\n-         \"count\": 1,\n-         \"description\": \"Error: \",\n-         \"environmentLabel\": null,\n-         \"label\": \"Unhandled Runtime Error\",\n-         \"source\": \"Child.js (4:11) @ ClickCount.render\n-       > 4 |     throw new Error()\n-           |           ^\",\n-         \"stack\": [\n-           \"ClickCount.render Child.js (4:11)\",\n-           \"Home index.js (6:7)\",\n-           \"<FIXME-file-protocol>\",\n-         ],\n-       }\n-      `)\n+      // TODO(veil): Turbopack is flaky. Possibly related to https://linear.app/vercel/issue/NDX-920/turbopack-errors-after-hmr-have-no-stacktraces-in-affected-chunks\n+      // Should use `await expect(browser).toDisplayRedbox()`\n+      await session.assertHasRedbox()\n     } else {\n       await expect(browser).toDisplayRedbox(`\n        {\n@@ -1465,25 +1452,9 @@ describe('ReactRefreshLogBox app', () => {\n       await next.patchFile('index.js', \"throw new Error('module error')\")\n \n       if (isTurbopack) {\n-        await expect(browser).toDisplayRedbox(`\n-         {\n-           \"count\": 1,\n-           \"description\": \"Error: module error\",\n-           \"environmentLabel\": null,\n-           \"label\": \"Runtime Error\",\n-           \"source\": \"index.js (1:7) @ [project]/index.js [app-rsc] (ecmascript)\n-         > 1 | throw new Error('module error')\n-             |       ^\",\n-           \"stack\": [\n-             \"[project]/index.js [app-rsc] (ecmascript) index.js (1:7)\",\n-             \"[project]/app/server/page.js [app-rsc] (ecmascript) app/server/page.js (1:1)\",\n-             \"<FIXME-file-protocol>\",\n-             \"<FIXME-file-protocol>\",\n-             \"<FIXME-file-protocol>\",\n-             \"<FIXME-file-protocol>\",\n-           ],\n-         }\n-        `)\n+        // TODO(veil): Turbopack is flaky. Possibly related to https://linear.app/vercel/issue/NDX-920/turbopack-errors-after-hmr-have-no-stacktraces-in-affected-chunks\n+        // Should use `await expect(browser).toDisplayRedbox()`\n+        await session.assertHasRedbox()\n       } else {\n         await expect({ browser, next }).toDisplayRedbox(`\n          {"
        }
    ],
    "stats": {
        "total": 41,
        "additions": 6,
        "deletions": 35
    }
}