{
    "author": "wo-o29",
    "message": "docs: change API route example file extension to .ts and add JS example with switcher prop (#83044)\n\n## For Maintainers\n\n### What?\nChanged the API route example in the documentation to use `.ts` file\nextension for the TypeScript example since it uses TypeScript types.\nAdded a JavaScript example with `.js` extension using the `switcher`\nprop to provide both TypeScript and JavaScript variants in the docs.\n\n### Why?\nThe existing example used a `.js` extension but included\nTypeScript-specific type annotations which is inconsistent and could\nconfuse users.\nProviding both TypeScript and JavaScript examples improves clarity and\nusability, catering to a broader audience.\n\n### How?\n- Updated the filename in the TypeScript example code block to\n`pages/api/hello.ts`.\n- Added a parallel JavaScript example code block with\n`pages/api/hello.js` using the `switcher` property.\n- Ensured both examples show equivalent handler logic with and without\ntype annotations.\n\n---------\n\nCo-authored-by: Joseph <joseph.chamochumbi@vercel.com>",
    "sha": "4a3ea6a20db006a77af1d904f4e24ac10ac4b143",
    "files": [
        {
            "sha": "9b923c5544e3a413fa745cd8f50720c6bd271e7c",
            "filename": "docs/02-pages/03-building-your-application/01-routing/07-api-routes.mdx",
            "status": "modified",
            "additions": 18,
            "deletions": 2,
            "changes": 20,
            "blob_url": "https://github.com/vercel/next.js/blob/4a3ea6a20db006a77af1d904f4e24ac10ac4b143/docs%2F02-pages%2F03-building-your-application%2F01-routing%2F07-api-routes.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/4a3ea6a20db006a77af1d904f4e24ac10ac4b143/docs%2F02-pages%2F03-building-your-application%2F01-routing%2F07-api-routes.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F02-pages%2F03-building-your-application%2F01-routing%2F07-api-routes.mdx?ref=4a3ea6a20db006a77af1d904f4e24ac10ac4b143",
            "patch": "@@ -422,7 +422,7 @@ While the Pages Router does support streaming responses with API Routes, we reco\n \n Here's how you can stream a response from an API Route with `writeHead`:\n \n-```js filename=\"pages/api/hello.js\"\n+```ts filename=\"pages/api/hello.ts\" switcher\n import { NextApiRequest, NextApiResponse } from 'next'\n \n export default async function handler(\n@@ -431,7 +431,23 @@ export default async function handler(\n ) {\n   res.writeHead(200, {\n     'Content-Type': 'text/event-stream',\n-    'Cache-Control': \"no-store\",\n+    'Cache-Control': 'no-store',\n+  })\n+  let i = 0\n+  while (i < 10) {\n+    res.write(`data: ${i}\\n\\n`)\n+    i++\n+    await new Promise((resolve) => setTimeout(resolve, 1000))\n+  }\n+  res.end()\n+}\n+```\n+\n+```js filename=\"pages/api/hello.js\" switcher\n+export default async function handler(req, res) {\n+  res.writeHead(200, {\n+    'Content-Type': 'text/event-stream',\n+    'Cache-Control': 'no-store',\n   })\n   let i = 0\n   while (i < 10) {"
        }
    ],
    "stats": {
        "total": 20,
        "additions": 18,
        "deletions": 2
    }
}