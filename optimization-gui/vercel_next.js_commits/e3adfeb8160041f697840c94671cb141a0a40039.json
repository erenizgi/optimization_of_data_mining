{
    "author": "vercel-release-bot",
    "message": "Upgrade React from `197d6a04-20250424` to `5dc00d6b-20250428` (#78640)",
    "sha": "e3adfeb8160041f697840c94671cb141a0a40039",
    "files": [
        {
            "sha": "3710caa0c97a2e0d9ad46803e40d7f8719ba2292",
            "filename": "package.json",
            "status": "modified",
            "additions": 17,
            "deletions": 16,
            "changes": 33,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/package.json",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/package.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/package.json?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -228,16 +228,16 @@\n     \"pretty-ms\": \"7.0.0\",\n     \"random-seed\": \"0.3.0\",\n     \"react\": \"19.0.0\",\n-    \"react-builtin\": \"npm:react@19.2.0-canary-197d6a04-20250424\",\n+    \"react-builtin\": \"npm:react@19.2.0-canary-5dc00d6b-20250428\",\n     \"react-dom\": \"19.0.0\",\n-    \"react-dom-builtin\": \"npm:react-dom@19.2.0-canary-197d6a04-20250424\",\n-    \"react-dom-experimental-builtin\": \"npm:react-dom@0.0.0-experimental-197d6a04-20250424\",\n-    \"react-experimental-builtin\": \"npm:react@0.0.0-experimental-197d6a04-20250424\",\n-    \"react-is-builtin\": \"npm:react-is@19.2.0-canary-197d6a04-20250424\",\n-    \"react-server-dom-turbopack\": \"19.2.0-canary-197d6a04-20250424\",\n-    \"react-server-dom-turbopack-experimental\": \"npm:react-server-dom-turbopack@0.0.0-experimental-197d6a04-20250424\",\n-    \"react-server-dom-webpack\": \"19.2.0-canary-197d6a04-20250424\",\n-    \"react-server-dom-webpack-experimental\": \"npm:react-server-dom-webpack@0.0.0-experimental-197d6a04-20250424\",\n+    \"react-dom-builtin\": \"npm:react-dom@19.2.0-canary-5dc00d6b-20250428\",\n+    \"react-dom-experimental-builtin\": \"npm:react-dom@0.0.0-experimental-5dc00d6b-20250428\",\n+    \"react-experimental-builtin\": \"npm:react@0.0.0-experimental-5dc00d6b-20250428\",\n+    \"react-is-builtin\": \"npm:react-is@19.2.0-canary-5dc00d6b-20250428\",\n+    \"react-server-dom-turbopack\": \"19.2.0-canary-5dc00d6b-20250428\",\n+    \"react-server-dom-turbopack-experimental\": \"npm:react-server-dom-turbopack@0.0.0-experimental-5dc00d6b-20250428\",\n+    \"react-server-dom-webpack\": \"19.2.0-canary-5dc00d6b-20250428\",\n+    \"react-server-dom-webpack-experimental\": \"npm:react-server-dom-webpack@0.0.0-experimental-5dc00d6b-20250428\",\n     \"react-ssr-prepass\": \"1.0.8\",\n     \"react-virtualized\": \"9.22.3\",\n     \"relay-compiler\": \"13.0.2\",\n@@ -247,8 +247,8 @@\n     \"resolve-from\": \"5.0.0\",\n     \"sass\": \"1.54.0\",\n     \"satori\": \"0.12.2\",\n-    \"scheduler-builtin\": \"npm:scheduler@0.27.0-canary-197d6a04-20250424\",\n-    \"scheduler-experimental-builtin\": \"npm:scheduler@0.0.0-experimental-197d6a04-20250424\",\n+    \"scheduler-builtin\": \"npm:scheduler@0.27.0-canary-5dc00d6b-20250428\",\n+    \"scheduler-experimental-builtin\": \"npm:scheduler@0.0.0-experimental-5dc00d6b-20250428\",\n     \"seedrandom\": \"3.0.5\",\n     \"semver\": \"7.3.7\",\n     \"shell-quote\": \"1.7.3\",\n@@ -290,14 +290,15 @@\n       \"@types/react\": \"^19.1.1\",\n       \"@types/react-dom\": \"19.1.2\",\n       \"jest-snapshot\": \"30.0.0-alpha.6\",\n-      \"react\": \"19.2.0-canary-197d6a04-20250424\",\n-      \"react-dom\": \"19.2.0-canary-197d6a04-20250424\",\n-      \"react-is\": \"19.2.0-canary-197d6a04-20250424\",\n-      \"scheduler\": \"0.27.0-canary-197d6a04-20250424\"\n+      \"react\": \"19.2.0-canary-5dc00d6b-20250428\",\n+      \"react-dom\": \"19.2.0-canary-5dc00d6b-20250428\",\n+      \"react-is\": \"19.2.0-canary-5dc00d6b-20250428\",\n+      \"scheduler\": \"0.27.0-canary-5dc00d6b-20250428\"\n     },\n     \"patchedDependencies\": {\n       \"webpack-sources@3.2.3\": \"patches/webpack-sources@3.2.3.patch\",\n-      \"stacktrace-parser@0.1.10\": \"patches/stacktrace-parser@0.1.10.patch\"\n+      \"stacktrace-parser@0.1.10\": \"patches/stacktrace-parser@0.1.10.patch\",\n+      \"@ampproject/toolbox-optimizer@2.8.3\": \"patches/@ampproject__toolbox-optimizer@2.8.3.patch\"\n     }\n   }\n }"
        },
        {
            "sha": "0139df155baab8fa0b22b3de0b2a7215451e7ea9",
            "filename": "packages/next/src/compiled/@ampproject/toolbox-optimizer/index.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2F%40ampproject%2Ftoolbox-optimizer%2Findex.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2F%40ampproject%2Ftoolbox-optimizer%2Findex.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2F%40ampproject%2Ftoolbox-optimizer%2Findex.js?ref=e3adfeb8160041f697840c94671cb141a0a40039"
        },
        {
            "sha": "df566ddd5740d2f8212f1ec80585b2ce9ff91dd4",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-client.development.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-client.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-client.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-client.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -29871,11 +29871,11 @@\n     };\n     (function () {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-experimental-197d6a04-20250424\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-experimental-5dc00d6b-20250428\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-experimental-197d6a04-20250424\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-experimental-5dc00d6b-20250428\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     })();\n     (\"function\" === typeof Map &&\n@@ -29912,10 +29912,10 @@\n       !(function () {\n         var internals = {\n           bundleType: 1,\n-          version: \"19.2.0-experimental-197d6a04-20250424\",\n+          version: \"19.2.0-experimental-5dc00d6b-20250428\",\n           rendererPackageName: \"react-dom\",\n           currentDispatcherRef: ReactSharedInternals,\n-          reconcilerVersion: \"19.2.0-experimental-197d6a04-20250424\"\n+          reconcilerVersion: \"19.2.0-experimental-5dc00d6b-20250428\"\n         };\n         internals.overrideHookState = overrideHookState;\n         internals.overrideHookStateDeletePath = overrideHookStateDeletePath;\n@@ -30057,7 +30057,7 @@\n       listenToAllSupportedEvents(container);\n       return new ReactDOMHydrationRoot(initialChildren);\n     };\n-    exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+    exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";\n     \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n       \"function\" ===\n         typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "f472d26312f54414568e2ce370da57656b262c24",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-client.production.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-client.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-client.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-client.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -18651,14 +18651,14 @@ ReactDOMHydrationRoot.prototype.unstable_scheduleHydration = function (target) {\n };\n var isomorphicReactPackageVersion$jscomp$inline_2045 = React.version;\n if (\n-  \"19.2.0-experimental-197d6a04-20250424\" !==\n+  \"19.2.0-experimental-5dc00d6b-20250428\" !==\n   isomorphicReactPackageVersion$jscomp$inline_2045\n )\n   throw Error(\n     formatProdErrorMessage(\n       527,\n       isomorphicReactPackageVersion$jscomp$inline_2045,\n-      \"19.2.0-experimental-197d6a04-20250424\"\n+      \"19.2.0-experimental-5dc00d6b-20250428\"\n     )\n   );\n ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n@@ -18680,10 +18680,10 @@ ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n };\n var internals$jscomp$inline_2681 = {\n   bundleType: 0,\n-  version: \"19.2.0-experimental-197d6a04-20250424\",\n+  version: \"19.2.0-experimental-5dc00d6b-20250428\",\n   rendererPackageName: \"react-dom\",\n   currentDispatcherRef: ReactSharedInternals,\n-  reconcilerVersion: \"19.2.0-experimental-197d6a04-20250424\"\n+  reconcilerVersion: \"19.2.0-experimental-5dc00d6b-20250428\"\n };\n if (\"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {\n   var hook$jscomp$inline_2682 = __REACT_DEVTOOLS_GLOBAL_HOOK__;\n@@ -18787,4 +18787,4 @@ exports.hydrateRoot = function (container, initialChildren, options) {\n   listenToAllSupportedEvents(container);\n   return new ReactDOMHydrationRoot(initialChildren);\n };\n-exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";"
        },
        {
            "sha": "1838d6ed864a6006898d867e851172b54b66d68d",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-profiling.development.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-profiling.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-profiling.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-profiling.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -29924,11 +29924,11 @@\n     };\n     (function () {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-experimental-197d6a04-20250424\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-experimental-5dc00d6b-20250428\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-experimental-197d6a04-20250424\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-experimental-5dc00d6b-20250428\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     })();\n     (\"function\" === typeof Map &&\n@@ -29965,10 +29965,10 @@\n       !(function () {\n         var internals = {\n           bundleType: 1,\n-          version: \"19.2.0-experimental-197d6a04-20250424\",\n+          version: \"19.2.0-experimental-5dc00d6b-20250428\",\n           rendererPackageName: \"react-dom\",\n           currentDispatcherRef: ReactSharedInternals,\n-          reconcilerVersion: \"19.2.0-experimental-197d6a04-20250424\"\n+          reconcilerVersion: \"19.2.0-experimental-5dc00d6b-20250428\"\n         };\n         internals.overrideHookState = overrideHookState;\n         internals.overrideHookStateDeletePath = overrideHookStateDeletePath;\n@@ -30440,7 +30440,7 @@\n     exports.useFormStatus = function () {\n       return resolveDispatcher().useHostTransitionStatus();\n     };\n-    exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+    exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";\n     \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n       \"function\" ===\n         typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "e1a17856aa1723ccef6b1575c424c9d5a0788688",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-profiling.profiling.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-profiling.profiling.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-profiling.profiling.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-profiling.profiling.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -20331,14 +20331,14 @@ ReactDOMHydrationRoot.prototype.unstable_scheduleHydration = function (target) {\n };\n var isomorphicReactPackageVersion$jscomp$inline_2245 = React.version;\n if (\n-  \"19.2.0-experimental-197d6a04-20250424\" !==\n+  \"19.2.0-experimental-5dc00d6b-20250428\" !==\n   isomorphicReactPackageVersion$jscomp$inline_2245\n )\n   throw Error(\n     formatProdErrorMessage(\n       527,\n       isomorphicReactPackageVersion$jscomp$inline_2245,\n-      \"19.2.0-experimental-197d6a04-20250424\"\n+      \"19.2.0-experimental-5dc00d6b-20250428\"\n     )\n   );\n ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n@@ -20360,10 +20360,10 @@ ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n };\n var internals$jscomp$inline_2891 = {\n   bundleType: 0,\n-  version: \"19.2.0-experimental-197d6a04-20250424\",\n+  version: \"19.2.0-experimental-5dc00d6b-20250428\",\n   rendererPackageName: \"react-dom\",\n   currentDispatcherRef: ReactSharedInternals,\n-  reconcilerVersion: \"19.2.0-experimental-197d6a04-20250424\"\n+  reconcilerVersion: \"19.2.0-experimental-5dc00d6b-20250428\"\n };\n if (\"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {\n   var hook$jscomp$inline_2892 = __REACT_DEVTOOLS_GLOBAL_HOOK__;\n@@ -20628,7 +20628,7 @@ exports.useFormState = function (action, initialState, permalink) {\n exports.useFormStatus = function () {\n   return ReactSharedInternals.H.useHostTransitionStatus();\n };\n-exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";\n \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n   \"function\" ===\n     typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "9d0e945c67b23763b8cb1cd1228715779a8266f8",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server-legacy.browser.development.js",
            "status": "modified",
            "additions": 169,
            "deletions": 104,
            "changes": 273,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.browser.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -1398,14 +1398,29 @@\n       return content;\n     }\n     function injectFormReplayingRuntime(resumableState, renderState) {\n-      (resumableState.instructions & 16) !== NothingSent ||\n-        renderState.externalRuntimeScript ||\n-        ((resumableState.instructions |= 16),\n-        renderState.bootstrapChunks.unshift(\n-          renderState.startInlineScript,\n-          formReplayingRuntimeScript,\n-          \"\\x3c/script>\"\n-        ));\n+      if (\n+        (resumableState.instructions & 16) === NothingSent &&\n+        !renderState.externalRuntimeScript\n+      ) {\n+        resumableState.instructions |= 16;\n+        var preamble = renderState.preamble,\n+          bootstrapChunks = renderState.bootstrapChunks;\n+        (preamble.htmlChunks || preamble.headChunks) &&\n+        0 === bootstrapChunks.length\n+          ? (bootstrapChunks.push(renderState.startInlineScript),\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+            bootstrapChunks.push(\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              \"\\x3c/script>\"\n+            ))\n+          : bootstrapChunks.unshift(\n+              renderState.startInlineScript,\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              \"\\x3c/script>\"\n+            );\n+      }\n     }\n     function pushLinkImpl(target, props) {\n       target.push(startChunkForTag(\"link\"));\n@@ -3133,6 +3148,15 @@\n       styleQueue.sheets.forEach(preloadLateStyle, this);\n       styleQueue.sheets.clear();\n     }\n+    function pushCompletedShellIdAttribute(target, resumableState) {\n+      (resumableState.instructions & SentCompletedShellId) === NothingSent &&\n+        ((resumableState.instructions |= SentCompletedShellId),\n+        target.push(\n+          completedShellIdAttributeStart,\n+          escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\"),\n+          attributeEnd\n+        ));\n+    }\n     function writeStyleResourceDependenciesInJS(destination, hoistableState) {\n       destination.push(arrayFirstOpenBracket);\n       var nextArrayOpenBrackChunk = arrayFirstOpenBracket;\n@@ -3452,16 +3476,18 @@\n         bootstrapScripts = resumableState.bootstrapScripts,\n         bootstrapModules = resumableState.bootstrapModules;\n       void 0 !== bootstrapScriptContent &&\n+        (bootstrapChunks.push(\"<script\"),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n         bootstrapChunks.push(\n-          \"<script>\",\n+          endOfStartTag,\n           escapeEntireInlineScriptContent(bootstrapScriptContent),\n           \"\\x3c/script>\"\n-        );\n+        ));\n       idPrefix = {\n         placeholderPrefix: idPrefix + \"P:\",\n         segmentPrefix: idPrefix + \"S:\",\n         boundaryPrefix: idPrefix + \"B:\",\n-        startInlineScript: \"<script>\",\n+        startInlineScript: \"<script\",\n         preamble: createPreambleState(),\n         externalRuntimeScript: null,\n         bootstrapChunks: bootstrapChunks,\n@@ -3526,18 +3552,25 @@\n                     ? \"use-credentials\"\n                     : \"\"));\n           preloadBootstrapScriptOrModule(resumableState, idPrefix, src, props);\n-          bootstrapChunks.push('<script src=\"', escapeTextForBrowser(src));\n+          bootstrapChunks.push(\n+            '<script src=\"',\n+            escapeTextForBrowser(src),\n+            attributeEnd\n+          );\n           \"string\" === typeof integrity &&\n             bootstrapChunks.push(\n-              '\" integrity=\"',\n-              escapeTextForBrowser(integrity)\n+              ' integrity=\"',\n+              escapeTextForBrowser(integrity),\n+              attributeEnd\n             );\n           \"string\" === typeof crossOrigin &&\n             bootstrapChunks.push(\n-              '\" crossorigin=\"',\n-              escapeTextForBrowser(crossOrigin)\n+              ' crossorigin=\"',\n+              escapeTextForBrowser(crossOrigin),\n+              attributeEnd\n             );\n-          bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+          pushCompletedShellIdAttribute(bootstrapChunks, resumableState);\n+          bootstrapChunks.push(' async=\"\">\\x3c/script>');\n         }\n       if (void 0 !== bootstrapModules)\n         for (\n@@ -3574,19 +3607,23 @@\n             ),\n             bootstrapChunks.push(\n               '<script type=\"module\" src=\"',\n-              escapeTextForBrowser(scriptConfig)\n+              escapeTextForBrowser(scriptConfig),\n+              attributeEnd\n             ),\n             \"string\" === typeof crossOrigin &&\n               bootstrapChunks.push(\n-                '\" integrity=\"',\n-                escapeTextForBrowser(crossOrigin)\n+                ' integrity=\"',\n+                escapeTextForBrowser(crossOrigin),\n+                attributeEnd\n               ),\n             \"string\" === typeof src &&\n               bootstrapChunks.push(\n-                '\" crossorigin=\"',\n-                escapeTextForBrowser(src)\n+                ' crossorigin=\"',\n+                escapeTextForBrowser(src),\n+                attributeEnd\n               ),\n-            bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+            bootstrapChunks.push(' async=\"\">\\x3c/script>');\n       return {\n         placeholderPrefix: idPrefix.placeholderPrefix,\n         segmentPrefix: idPrefix.segmentPrefix,\n@@ -4461,6 +4498,7 @@\n       this.fatalError = null;\n       this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n       this.completedPreambleSegments = this.completedRootSegment = null;\n+      this.byteSize = 0;\n       this.abortableTasks = abortSet;\n       this.pingedTasks = [];\n       this.clientRenderedBoundaries = [];\n@@ -5665,9 +5703,10 @@\n                     (contentRootSegment.status = COMPLETED),\n                     queueCompletedSegment(newBoundary, contentRootSegment),\n                     0 === newBoundary.pendingTasks &&\n-                      newBoundary.status === PENDING)\n+                      newBoundary.status === PENDING &&\n+                      ((newBoundary.status = COMPLETED),\n+                      !(newBoundary.byteSize > request.progressiveChunkSize)))\n                   ) {\n-                    newBoundary.status = COMPLETED;\n                     0 === request.pendingRootTasks &&\n                       task.blockedPreamble &&\n                       preparePreamble(request);\n@@ -7066,11 +7105,12 @@\n                 boundary.parentFlushed &&\n                   request.completedBoundaries.push(boundary),\n                 boundary.status === COMPLETED &&\n-                  (boundary.fallbackAbortableTasks.forEach(\n-                    abortTaskSoft,\n-                    request\n-                  ),\n-                  boundary.fallbackAbortableTasks.clear(),\n+                  (boundary.byteSize > request.progressiveChunkSize ||\n+                    (boundary.fallbackAbortableTasks.forEach(\n+                      abortTaskSoft,\n+                      request\n+                    ),\n+                    boundary.fallbackAbortableTasks.clear()),\n                   0 === request.pendingRootTasks &&\n                     null === request.trackedPostpones &&\n                     null !== boundary.contentPreamble &&\n@@ -7628,6 +7668,7 @@\n         completedSegments.streamingFormat === ScriptStreamingFormat;\n       scriptFormat\n         ? (destination.push(request.startInlineScript),\n+          destination.push(endOfStartTag),\n           requiresStyleInsertion\n             ? (completedSegments.instructions &\n                 SentCompleteBoundaryFunction) ===\n@@ -7709,6 +7750,7 @@\n       request = request.renderState;\n       (segment = boundary.streamingFormat === ScriptStreamingFormat)\n         ? (destination.push(request.startInlineScript),\n+          destination.push(endOfStartTag),\n           (boundary.instructions & SentCompleteSegmentFunction) === NothingSent\n             ? ((boundary.instructions |= SentCompleteSegmentFunction),\n               destination.push(completeSegmentScript1Full))\n@@ -7736,14 +7778,14 @@\n             if (completedRootSegment.status === POSTPONED) return;\n             var completedPreambleSegments = request.completedPreambleSegments;\n             if (null === completedPreambleSegments) return;\n-            var renderState = request.renderState;\n+            var resumableState = request.resumableState,\n+              renderState = request.renderState;\n             if (\n               (0 !== request.allPendingTasks ||\n                 null !== request.trackedPostpones) &&\n               renderState.externalRuntimeScript\n             ) {\n               var _renderState$external = renderState.externalRuntimeScript,\n-                resumableState = request.resumableState,\n                 src = _renderState$external.src,\n                 chunks = _renderState$external.chunks;\n               resumableState.scriptResources.hasOwnProperty(src) ||\n@@ -7808,6 +7850,13 @@\n             renderState.scripts.clear();\n             renderState.bulkPreloads.forEach(flushResource, destination);\n             renderState.bulkPreloads.clear();\n+            if (htmlChunks || headChunks) {\n+              var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+              destination.push(blockingRenderChunkStart);\n+              var chunk$jscomp$0 = escapeTextForBrowser(shellId);\n+              destination.push(chunk$jscomp$0);\n+              destination.push(blockingRenderChunkEnd);\n+            }\n             var hoistableChunks = renderState.hoistableChunks;\n             for (\n               i$jscomp$0 = 0;\n@@ -7816,28 +7865,23 @@\n             )\n               destination.push(hoistableChunks[i$jscomp$0]);\n             for (\n-              renderState = hoistableChunks.length = 0;\n-              renderState < completedPreambleSegments.length;\n-              renderState++\n+              resumableState = hoistableChunks.length = 0;\n+              resumableState < completedPreambleSegments.length;\n+              resumableState++\n             ) {\n-              var segments = completedPreambleSegments[renderState];\n+              var segments = completedPreambleSegments[resumableState];\n               for (\n-                _renderState$external = 0;\n-                _renderState$external < segments.length;\n-                _renderState$external++\n+                renderState = 0;\n+                renderState < segments.length;\n+                renderState++\n               )\n-                flushSegment(\n-                  request,\n-                  destination,\n-                  segments[_renderState$external],\n-                  null\n-                );\n+                flushSegment(request, destination, segments[renderState], null);\n             }\n             var preamble$jscomp$0 = request.renderState.preamble,\n               headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n             if (preamble$jscomp$0.htmlChunks || headChunks$jscomp$0) {\n-              var chunk$jscomp$0 = endChunkForTag(\"head\");\n-              destination.push(chunk$jscomp$0);\n+              var chunk$jscomp$1 = endChunkForTag(\"head\");\n+              destination.push(chunk$jscomp$1);\n             }\n             var bodyChunks = preamble$jscomp$0.bodyChunks;\n             if (bodyChunks)\n@@ -7849,33 +7893,49 @@\n                 destination.push(bodyChunks[completedPreambleSegments]);\n             flushSegment(request, destination, completedRootSegment, null);\n             request.completedRootSegment = null;\n-            writeBootstrap(destination, request.renderState);\n+            var resumableState$jscomp$0 = request.resumableState,\n+              renderState$jscomp$0 = request.renderState,\n+              preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+            if (\n+              (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+              (resumableState$jscomp$0.instructions & SentCompletedShellId) ===\n+                NothingSent\n+            ) {\n+              var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+              bootstrapChunks.push(startChunkForTag(\"template\"));\n+              pushCompletedShellIdAttribute(\n+                bootstrapChunks,\n+                resumableState$jscomp$0\n+              );\n+              bootstrapChunks.push(endOfStartTag, endChunkForTag(\"template\"));\n+            }\n+            writeBootstrap(destination, renderState$jscomp$0);\n           }\n-          var renderState$jscomp$0 = request.renderState;\n+          var renderState$jscomp$1 = request.renderState;\n           completedRootSegment = 0;\n-          var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+          var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < viewportChunks$jscomp$0.length;\n             completedRootSegment++\n           )\n             destination.push(viewportChunks$jscomp$0[completedRootSegment]);\n           viewportChunks$jscomp$0.length = 0;\n-          renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-          renderState$jscomp$0.preconnects.clear();\n-          renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.fontPreloads.clear();\n-          renderState$jscomp$0.highImagePreloads.forEach(\n+          renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+          renderState$jscomp$1.preconnects.clear();\n+          renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.fontPreloads.clear();\n+          renderState$jscomp$1.highImagePreloads.forEach(\n             flushResource,\n             destination\n           );\n-          renderState$jscomp$0.highImagePreloads.clear();\n-          renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-          renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-          renderState$jscomp$0.scripts.clear();\n-          renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.bulkPreloads.clear();\n-          var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+          renderState$jscomp$1.highImagePreloads.clear();\n+          renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+          renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+          renderState$jscomp$1.scripts.clear();\n+          renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.bulkPreloads.clear();\n+          var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -7886,96 +7946,97 @@\n           var clientRenderedBoundaries = request.clientRenderedBoundaries;\n           for (i = 0; i < clientRenderedBoundaries.length; i++) {\n             var boundary = clientRenderedBoundaries[i];\n-            renderState$jscomp$0 = destination;\n-            var resumableState$jscomp$0 = request.resumableState,\n-              renderState$jscomp$1 = request.renderState,\n+            renderState$jscomp$1 = destination;\n+            var resumableState$jscomp$1 = request.resumableState,\n+              renderState$jscomp$2 = request.renderState,\n               id = boundary.rootSegmentID,\n               errorDigest = boundary.errorDigest,\n               errorMessage = boundary.errorMessage,\n               errorStack = boundary.errorStack,\n               errorComponentStack = boundary.errorComponentStack,\n               scriptFormat =\n-                resumableState$jscomp$0.streamingFormat ===\n+                resumableState$jscomp$1.streamingFormat ===\n                 ScriptStreamingFormat;\n             scriptFormat\n-              ? (renderState$jscomp$0.push(\n-                  renderState$jscomp$1.startInlineScript\n+              ? (renderState$jscomp$1.push(\n+                  renderState$jscomp$2.startInlineScript\n                 ),\n-                (resumableState$jscomp$0.instructions &\n+                renderState$jscomp$1.push(endOfStartTag),\n+                (resumableState$jscomp$1.instructions &\n                   SentClientRenderFunction) ===\n                 NothingSent\n-                  ? ((resumableState$jscomp$0.instructions |=\n+                  ? ((resumableState$jscomp$1.instructions |=\n                       SentClientRenderFunction),\n-                    renderState$jscomp$0.push(clientRenderScript1Full))\n-                  : renderState$jscomp$0.push(clientRenderScript1Partial))\n-              : renderState$jscomp$0.push(clientRenderData1);\n-            renderState$jscomp$0.push(renderState$jscomp$1.boundaryPrefix);\n-            var chunk$jscomp$1 = id.toString(16);\n-            renderState$jscomp$0.push(chunk$jscomp$1);\n-            scriptFormat && renderState$jscomp$0.push(clientRenderScript1A);\n+                    renderState$jscomp$1.push(clientRenderScript1Full))\n+                  : renderState$jscomp$1.push(clientRenderScript1Partial))\n+              : renderState$jscomp$1.push(clientRenderData1);\n+            renderState$jscomp$1.push(renderState$jscomp$2.boundaryPrefix);\n+            var chunk$jscomp$2 = id.toString(16);\n+            renderState$jscomp$1.push(chunk$jscomp$2);\n+            scriptFormat && renderState$jscomp$1.push(clientRenderScript1A);\n             if (\n               errorDigest ||\n               errorMessage ||\n               errorStack ||\n               errorComponentStack\n             )\n               if (scriptFormat) {\n-                renderState$jscomp$0.push(\n+                renderState$jscomp$1.push(\n                   clientRenderErrorScriptArgInterstitial\n                 );\n-                var chunk$jscomp$2 = escapeJSStringsForInstructionScripts(\n+                var chunk$jscomp$3 = escapeJSStringsForInstructionScripts(\n                   errorDigest || \"\"\n                 );\n-                renderState$jscomp$0.push(chunk$jscomp$2);\n+                renderState$jscomp$1.push(chunk$jscomp$3);\n               } else {\n-                renderState$jscomp$0.push(clientRenderData2);\n-                var chunk$jscomp$3 = escapeTextForBrowser(errorDigest || \"\");\n-                renderState$jscomp$0.push(chunk$jscomp$3);\n+                renderState$jscomp$1.push(clientRenderData2);\n+                var chunk$jscomp$4 = escapeTextForBrowser(errorDigest || \"\");\n+                renderState$jscomp$1.push(chunk$jscomp$4);\n               }\n             if (errorMessage || errorStack || errorComponentStack)\n               if (scriptFormat) {\n-                renderState$jscomp$0.push(\n+                renderState$jscomp$1.push(\n                   clientRenderErrorScriptArgInterstitial\n                 );\n-                var chunk$jscomp$4 = escapeJSStringsForInstructionScripts(\n+                var chunk$jscomp$5 = escapeJSStringsForInstructionScripts(\n                   errorMessage || \"\"\n                 );\n-                renderState$jscomp$0.push(chunk$jscomp$4);\n+                renderState$jscomp$1.push(chunk$jscomp$5);\n               } else {\n-                renderState$jscomp$0.push(clientRenderData3);\n-                var chunk$jscomp$5 = escapeTextForBrowser(errorMessage || \"\");\n-                renderState$jscomp$0.push(chunk$jscomp$5);\n+                renderState$jscomp$1.push(clientRenderData3);\n+                var chunk$jscomp$6 = escapeTextForBrowser(errorMessage || \"\");\n+                renderState$jscomp$1.push(chunk$jscomp$6);\n               }\n             if (errorStack || errorComponentStack)\n               if (scriptFormat) {\n-                renderState$jscomp$0.push(\n+                renderState$jscomp$1.push(\n                   clientRenderErrorScriptArgInterstitial\n                 );\n-                var chunk$jscomp$6 = escapeJSStringsForInstructionScripts(\n+                var chunk$jscomp$7 = escapeJSStringsForInstructionScripts(\n                   errorStack || \"\"\n                 );\n-                renderState$jscomp$0.push(chunk$jscomp$6);\n+                renderState$jscomp$1.push(chunk$jscomp$7);\n               } else {\n-                renderState$jscomp$0.push(clientRenderData4);\n-                var chunk$jscomp$7 = escapeTextForBrowser(errorStack || \"\");\n-                renderState$jscomp$0.push(chunk$jscomp$7);\n+                renderState$jscomp$1.push(clientRenderData4);\n+                var chunk$jscomp$8 = escapeTextForBrowser(errorStack || \"\");\n+                renderState$jscomp$1.push(chunk$jscomp$8);\n               }\n             if (errorComponentStack)\n               if (scriptFormat) {\n-                renderState$jscomp$0.push(\n+                renderState$jscomp$1.push(\n                   clientRenderErrorScriptArgInterstitial\n                 );\n-                var chunk$jscomp$8 =\n+                var chunk$jscomp$9 =\n                   escapeJSStringsForInstructionScripts(errorComponentStack);\n-                renderState$jscomp$0.push(chunk$jscomp$8);\n+                renderState$jscomp$1.push(chunk$jscomp$9);\n               } else {\n-                renderState$jscomp$0.push(clientRenderData5);\n-                var chunk$jscomp$9 = escapeTextForBrowser(errorComponentStack);\n-                renderState$jscomp$0.push(chunk$jscomp$9);\n+                renderState$jscomp$1.push(clientRenderData5);\n+                var chunk$jscomp$10 = escapeTextForBrowser(errorComponentStack);\n+                renderState$jscomp$1.push(chunk$jscomp$10);\n               }\n             var JSCompiler_inline_result = scriptFormat\n-              ? renderState$jscomp$0.push(clientRenderScriptEnd)\n-              : renderState$jscomp$0.push(clientRenderDataEnd);\n+              ? renderState$jscomp$1.push(clientRenderScriptEnd)\n+              : renderState$jscomp$1.push(clientRenderDataEnd);\n             if (!JSCompiler_inline_result) {\n               request.destination = null;\n               i++;\n@@ -9265,6 +9326,7 @@\n       SentCompleteBoundaryFunction = 2,\n       SentClientRenderFunction = 4,\n       SentStyleInsertionFunction = 8,\n+      SentCompletedShellId = 32,\n       EXISTS = null,\n       PRELOAD_NO_CREDS = [];\n     Object.freeze(PRELOAD_NO_CREDS);\n@@ -9398,6 +9460,9 @@\n       spaceSeparator = \" \",\n       styleTagResourceOpen3 = '\">',\n       styleTagResourceClose = \"</style>\",\n+      blockingRenderChunkStart = '<link rel=\"expect\" href=\"#',\n+      blockingRenderChunkEnd = '\" blocking=\"render\"/>',\n+      completedShellIdAttributeStart = ' id=\"',\n       arrayFirstOpenBracket = \"[\",\n       arraySubsequentOpenBracket = \",[\",\n       arrayInterstitial = \",\",\n@@ -9672,5 +9737,5 @@\n         'The server used \"renderToString\" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to \"renderToReadableStream\" which supports Suspense on the server'\n       );\n     };\n-    exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+    exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";\n   })();"
        },
        {
            "sha": "cf59ed13c6db9974fa49b23c2109a1e13fcf78b8",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server-legacy.browser.production.js",
            "status": "modified",
            "additions": 165,
            "deletions": 104,
            "changes": 269,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.browser.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.browser.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.browser.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -726,14 +726,28 @@ function flattenOptionChildren(children) {\n   return content;\n }\n function injectFormReplayingRuntime(resumableState, renderState) {\n-  0 !== (resumableState.instructions & 16) ||\n-    renderState.externalRuntimeScript ||\n-    ((resumableState.instructions |= 16),\n-    renderState.bootstrapChunks.unshift(\n-      renderState.startInlineScript,\n-      'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n-      \"\\x3c/script>\"\n-    ));\n+  if (\n+    0 === (resumableState.instructions & 16) &&\n+    !renderState.externalRuntimeScript\n+  ) {\n+    resumableState.instructions |= 16;\n+    var preamble = renderState.preamble,\n+      bootstrapChunks = renderState.bootstrapChunks;\n+    (preamble.htmlChunks || preamble.headChunks) && 0 === bootstrapChunks.length\n+      ? (bootstrapChunks.push(renderState.startInlineScript),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(\n+          \">\",\n+          'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n+          \"\\x3c/script>\"\n+        ))\n+      : bootstrapChunks.unshift(\n+          renderState.startInlineScript,\n+          \">\",\n+          'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n+          \"\\x3c/script>\"\n+        );\n+  }\n }\n function pushLinkImpl(target, props) {\n   target.push(startChunkForTag(\"link\"));\n@@ -2168,6 +2182,15 @@ function preloadLateStyles(styleQueue) {\n   styleQueue.sheets.forEach(preloadLateStyle, this);\n   styleQueue.sheets.clear();\n }\n+function pushCompletedShellIdAttribute(target, resumableState) {\n+  0 === (resumableState.instructions & 32) &&\n+    ((resumableState.instructions |= 32),\n+    target.push(\n+      ' id=\"',\n+      escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\"),\n+      '\"'\n+    ));\n+}\n function writeStyleResourceDependenciesInJS(destination, hoistableState) {\n   destination.push(\"[\");\n   var nextArrayOpenBrackChunk = \"[\";\n@@ -2775,23 +2798,25 @@ function createRenderState(resumableState, generateStaticMarkup) {\n     bootstrapScripts = resumableState.bootstrapScripts,\n     bootstrapModules = resumableState.bootstrapModules;\n   void 0 !== bootstrapScriptContent &&\n+    (bootstrapChunks.push(\"<script\"),\n+    pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n     bootstrapChunks.push(\n-      \"<script>\",\n+      \">\",\n       (\"\" + bootstrapScriptContent).replace(scriptRegex, scriptReplacer),\n       \"\\x3c/script>\"\n-    );\n+    ));\n   bootstrapScriptContent = idPrefix + \"P:\";\n-  var JSCompiler_object_inline_segmentPrefix_1708 = idPrefix + \"S:\";\n+  var JSCompiler_object_inline_segmentPrefix_1751 = idPrefix + \"S:\";\n   idPrefix += \"B:\";\n-  var JSCompiler_object_inline_preamble_1711 = createPreambleState(),\n-    JSCompiler_object_inline_preconnects_1721 = new Set(),\n-    JSCompiler_object_inline_fontPreloads_1722 = new Set(),\n-    JSCompiler_object_inline_highImagePreloads_1723 = new Set(),\n-    JSCompiler_object_inline_styles_1724 = new Map(),\n-    JSCompiler_object_inline_bootstrapScripts_1725 = new Set(),\n-    JSCompiler_object_inline_scripts_1726 = new Set(),\n-    JSCompiler_object_inline_bulkPreloads_1727 = new Set(),\n-    JSCompiler_object_inline_preloads_1728 = {\n+  var JSCompiler_object_inline_preamble_1754 = createPreambleState(),\n+    JSCompiler_object_inline_preconnects_1764 = new Set(),\n+    JSCompiler_object_inline_fontPreloads_1765 = new Set(),\n+    JSCompiler_object_inline_highImagePreloads_1766 = new Set(),\n+    JSCompiler_object_inline_styles_1767 = new Map(),\n+    JSCompiler_object_inline_bootstrapScripts_1768 = new Set(),\n+    JSCompiler_object_inline_scripts_1769 = new Set(),\n+    JSCompiler_object_inline_bulkPreloads_1770 = new Set(),\n+    JSCompiler_object_inline_preloads_1771 = {\n       images: new Map(),\n       stylesheets: new Map(),\n       scripts: new Map(),\n@@ -2828,16 +2853,22 @@ function createRenderState(resumableState, generateStaticMarkup) {\n       scriptConfig.moduleScriptResources[href] = null;\n       scriptConfig = [];\n       pushLinkImpl(scriptConfig, props);\n-      JSCompiler_object_inline_bootstrapScripts_1725.add(scriptConfig);\n-      bootstrapChunks.push('<script src=\"', escapeTextForBrowser(src));\n+      JSCompiler_object_inline_bootstrapScripts_1768.add(scriptConfig);\n+      bootstrapChunks.push('<script src=\"', escapeTextForBrowser(src), '\"');\n       \"string\" === typeof integrity &&\n-        bootstrapChunks.push('\" integrity=\"', escapeTextForBrowser(integrity));\n+        bootstrapChunks.push(\n+          ' integrity=\"',\n+          escapeTextForBrowser(integrity),\n+          '\"'\n+        );\n       \"string\" === typeof crossOrigin &&\n         bootstrapChunks.push(\n-          '\" crossorigin=\"',\n-          escapeTextForBrowser(crossOrigin)\n+          ' crossorigin=\"',\n+          escapeTextForBrowser(crossOrigin),\n+          '\"'\n         );\n-      bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+      pushCompletedShellIdAttribute(bootstrapChunks, resumableState);\n+      bootstrapChunks.push(' async=\"\">\\x3c/script>');\n     }\n   if (void 0 !== bootstrapModules)\n     for (\n@@ -2869,25 +2900,32 @@ function createRenderState(resumableState, generateStaticMarkup) {\n         (props.moduleScriptResources[scriptConfig] = null),\n         (props = []),\n         pushLinkImpl(props, integrity),\n-        JSCompiler_object_inline_bootstrapScripts_1725.add(props),\n+        JSCompiler_object_inline_bootstrapScripts_1768.add(props),\n         bootstrapChunks.push(\n           '<script type=\"module\" src=\"',\n-          escapeTextForBrowser(i)\n+          escapeTextForBrowser(i),\n+          '\"'\n         ),\n         \"string\" === typeof crossOrigin &&\n           bootstrapChunks.push(\n-            '\" integrity=\"',\n-            escapeTextForBrowser(crossOrigin)\n+            ' integrity=\"',\n+            escapeTextForBrowser(crossOrigin),\n+            '\"'\n           ),\n         \"string\" === typeof src &&\n-          bootstrapChunks.push('\" crossorigin=\"', escapeTextForBrowser(src)),\n-        bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+          bootstrapChunks.push(\n+            ' crossorigin=\"',\n+            escapeTextForBrowser(src),\n+            '\"'\n+          ),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(' async=\"\">\\x3c/script>');\n   return {\n     placeholderPrefix: bootstrapScriptContent,\n-    segmentPrefix: JSCompiler_object_inline_segmentPrefix_1708,\n+    segmentPrefix: JSCompiler_object_inline_segmentPrefix_1751,\n     boundaryPrefix: idPrefix,\n-    startInlineScript: \"<script>\",\n-    preamble: JSCompiler_object_inline_preamble_1711,\n+    startInlineScript: \"<script\",\n+    preamble: JSCompiler_object_inline_preamble_1754,\n     externalRuntimeScript: null,\n     bootstrapChunks: bootstrapChunks,\n     importMapChunks: [],\n@@ -2903,14 +2941,14 @@ function createRenderState(resumableState, generateStaticMarkup) {\n     charsetChunks: [],\n     viewportChunks: [],\n     hoistableChunks: [],\n-    preconnects: JSCompiler_object_inline_preconnects_1721,\n-    fontPreloads: JSCompiler_object_inline_fontPreloads_1722,\n-    highImagePreloads: JSCompiler_object_inline_highImagePreloads_1723,\n-    styles: JSCompiler_object_inline_styles_1724,\n-    bootstrapScripts: JSCompiler_object_inline_bootstrapScripts_1725,\n-    scripts: JSCompiler_object_inline_scripts_1726,\n-    bulkPreloads: JSCompiler_object_inline_bulkPreloads_1727,\n-    preloads: JSCompiler_object_inline_preloads_1728,\n+    preconnects: JSCompiler_object_inline_preconnects_1764,\n+    fontPreloads: JSCompiler_object_inline_fontPreloads_1765,\n+    highImagePreloads: JSCompiler_object_inline_highImagePreloads_1766,\n+    styles: JSCompiler_object_inline_styles_1767,\n+    bootstrapScripts: JSCompiler_object_inline_bootstrapScripts_1768,\n+    scripts: JSCompiler_object_inline_scripts_1769,\n+    bulkPreloads: JSCompiler_object_inline_bulkPreloads_1770,\n+    preloads: JSCompiler_object_inline_preloads_1771,\n     stylesToHoist: !1,\n     generateStaticMarkup: generateStaticMarkup\n   };\n@@ -3704,6 +3742,7 @@ function RequestInstance(\n   this.fatalError = null;\n   this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n   this.completedPreambleSegments = this.completedRootSegment = null;\n+  this.byteSize = 0;\n   this.abortableTasks = abortSet;\n   this.pingedTasks = [];\n   this.clientRenderedBoundaries = [];\n@@ -4396,9 +4435,11 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                 ),\n                 (contentRootSegment.status = 1),\n                 queueCompletedSegment(newBoundary, contentRootSegment),\n-                0 === newBoundary.pendingTasks && 0 === newBoundary.status)\n+                0 === newBoundary.pendingTasks &&\n+                  0 === newBoundary.status &&\n+                  ((newBoundary.status = 1),\n+                  !(newBoundary.byteSize > request.progressiveChunkSize)))\n               ) {\n-                newBoundary.status = 1;\n                 0 === request.pendingRootTasks &&\n                   task.blockedPreamble &&\n                   preparePreamble(request);\n@@ -5481,8 +5522,12 @@ function finishedTask(request, boundary, segment) {\n             boundary.parentFlushed &&\n               request.completedBoundaries.push(boundary),\n             1 === boundary.status &&\n-              (boundary.fallbackAbortableTasks.forEach(abortTaskSoft, request),\n-              boundary.fallbackAbortableTasks.clear(),\n+              (boundary.byteSize > request.progressiveChunkSize ||\n+                (boundary.fallbackAbortableTasks.forEach(\n+                  abortTaskSoft,\n+                  request\n+                ),\n+                boundary.fallbackAbortableTasks.clear()),\n               0 === request.pendingRootTasks &&\n                 null === request.trackedPostpones &&\n                 null !== boundary.contentPreamble &&\n@@ -5928,6 +5973,7 @@ function flushCompletedBoundary(request, destination, boundary) {\n   var scriptFormat = 0 === completedSegments.streamingFormat;\n   scriptFormat\n     ? (destination.push(request.startInlineScript),\n+      destination.push(\">\"),\n       requiresStyleInsertion\n         ? 0 === (completedSegments.instructions & 2)\n           ? ((completedSegments.instructions |= 10),\n@@ -5988,6 +6034,7 @@ function flushPartiallyCompletedSegment(\n   request = request.renderState;\n   (segment = 0 === boundary.streamingFormat)\n     ? (destination.push(request.startInlineScript),\n+      destination.push(\">\"),\n       0 === (boundary.instructions & 1)\n         ? ((boundary.instructions |= 1),\n           destination.push(\n@@ -6015,14 +6062,14 @@ function flushCompletedQueues(request, destination) {\n         if (5 === completedRootSegment.status) return;\n         var completedPreambleSegments = request.completedPreambleSegments;\n         if (null === completedPreambleSegments) return;\n-        var renderState = request.renderState;\n+        var resumableState = request.resumableState,\n+          renderState = request.renderState;\n         if (\n           (0 !== request.allPendingTasks ||\n             null !== request.trackedPostpones) &&\n           renderState.externalRuntimeScript\n         ) {\n           var _renderState$external = renderState.externalRuntimeScript,\n-            resumableState = request.resumableState,\n             src = _renderState$external.src,\n             chunks = _renderState$external.chunks;\n           resumableState.scriptResources.hasOwnProperty(src) ||\n@@ -6071,32 +6118,30 @@ function flushCompletedQueues(request, destination) {\n         renderState.scripts.clear();\n         renderState.bulkPreloads.forEach(flushResource, destination);\n         renderState.bulkPreloads.clear();\n+        if (htmlChunks || headChunks) {\n+          var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+          destination.push('<link rel=\"expect\" href=\"#');\n+          var chunk$jscomp$0 = escapeTextForBrowser(shellId);\n+          destination.push(chunk$jscomp$0);\n+          destination.push('\" blocking=\"render\"/>');\n+        }\n         var hoistableChunks = renderState.hoistableChunks;\n         for (i$jscomp$0 = 0; i$jscomp$0 < hoistableChunks.length; i$jscomp$0++)\n           destination.push(hoistableChunks[i$jscomp$0]);\n         for (\n-          renderState = hoistableChunks.length = 0;\n-          renderState < completedPreambleSegments.length;\n-          renderState++\n+          resumableState = hoistableChunks.length = 0;\n+          resumableState < completedPreambleSegments.length;\n+          resumableState++\n         ) {\n-          var segments = completedPreambleSegments[renderState];\n-          for (\n-            _renderState$external = 0;\n-            _renderState$external < segments.length;\n-            _renderState$external++\n-          )\n-            flushSegment(\n-              request,\n-              destination,\n-              segments[_renderState$external],\n-              null\n-            );\n+          var segments = completedPreambleSegments[resumableState];\n+          for (renderState = 0; renderState < segments.length; renderState++)\n+            flushSegment(request, destination, segments[renderState], null);\n         }\n         var preamble$jscomp$0 = request.renderState.preamble,\n           headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n         if (preamble$jscomp$0.htmlChunks || headChunks$jscomp$0) {\n-          var chunk$jscomp$0 = endChunkForTag(\"head\");\n-          destination.push(chunk$jscomp$0);\n+          var chunk$jscomp$1 = endChunkForTag(\"head\");\n+          destination.push(chunk$jscomp$1);\n         }\n         var bodyChunks = preamble$jscomp$0.bodyChunks;\n         if (bodyChunks)\n@@ -6108,33 +6153,48 @@ function flushCompletedQueues(request, destination) {\n             destination.push(bodyChunks[completedPreambleSegments]);\n         flushSegment(request, destination, completedRootSegment, null);\n         request.completedRootSegment = null;\n-        writeBootstrap(destination, request.renderState);\n+        var resumableState$jscomp$0 = request.resumableState,\n+          renderState$jscomp$0 = request.renderState,\n+          preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+        if (\n+          (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+          0 === (resumableState$jscomp$0.instructions & 32)\n+        ) {\n+          var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+          bootstrapChunks.push(startChunkForTag(\"template\"));\n+          pushCompletedShellIdAttribute(\n+            bootstrapChunks,\n+            resumableState$jscomp$0\n+          );\n+          bootstrapChunks.push(\">\", endChunkForTag(\"template\"));\n+        }\n+        writeBootstrap(destination, renderState$jscomp$0);\n       }\n-      var renderState$jscomp$0 = request.renderState;\n+      var renderState$jscomp$1 = request.renderState;\n       completedRootSegment = 0;\n-      var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+      var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < viewportChunks$jscomp$0.length;\n         completedRootSegment++\n       )\n         destination.push(viewportChunks$jscomp$0[completedRootSegment]);\n       viewportChunks$jscomp$0.length = 0;\n-      renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-      renderState$jscomp$0.preconnects.clear();\n-      renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.fontPreloads.clear();\n-      renderState$jscomp$0.highImagePreloads.forEach(\n+      renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+      renderState$jscomp$1.preconnects.clear();\n+      renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.fontPreloads.clear();\n+      renderState$jscomp$1.highImagePreloads.forEach(\n         flushResource,\n         destination\n       );\n-      renderState$jscomp$0.highImagePreloads.clear();\n-      renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-      renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-      renderState$jscomp$0.scripts.clear();\n-      renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.bulkPreloads.clear();\n-      var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+      renderState$jscomp$1.highImagePreloads.clear();\n+      renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+      renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+      renderState$jscomp$1.scripts.clear();\n+      renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.bulkPreloads.clear();\n+      var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -6145,40 +6205,41 @@ function flushCompletedQueues(request, destination) {\n       var clientRenderedBoundaries = request.clientRenderedBoundaries;\n       for (i = 0; i < clientRenderedBoundaries.length; i++) {\n         var boundary = clientRenderedBoundaries[i];\n-        renderState$jscomp$0 = destination;\n-        var resumableState$jscomp$0 = request.resumableState,\n-          renderState$jscomp$1 = request.renderState,\n+        renderState$jscomp$1 = destination;\n+        var resumableState$jscomp$1 = request.resumableState,\n+          renderState$jscomp$2 = request.renderState,\n           id = boundary.rootSegmentID,\n           errorDigest = boundary.errorDigest,\n-          scriptFormat = 0 === resumableState$jscomp$0.streamingFormat;\n+          scriptFormat = 0 === resumableState$jscomp$1.streamingFormat;\n         scriptFormat\n-          ? (renderState$jscomp$0.push(renderState$jscomp$1.startInlineScript),\n-            0 === (resumableState$jscomp$0.instructions & 4)\n-              ? ((resumableState$jscomp$0.instructions |= 4),\n-                renderState$jscomp$0.push(\n+          ? (renderState$jscomp$1.push(renderState$jscomp$2.startInlineScript),\n+            renderState$jscomp$1.push(\">\"),\n+            0 === (resumableState$jscomp$1.instructions & 4)\n+              ? ((resumableState$jscomp$1.instructions |= 4),\n+                renderState$jscomp$1.push(\n                   '$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data=\"$!\",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX(\"'\n                 ))\n-              : renderState$jscomp$0.push('$RX(\"'))\n-          : renderState$jscomp$0.push('<template data-rxi=\"\" data-bid=\"');\n-        renderState$jscomp$0.push(renderState$jscomp$1.boundaryPrefix);\n-        var chunk$jscomp$1 = id.toString(16);\n-        renderState$jscomp$0.push(chunk$jscomp$1);\n-        scriptFormat && renderState$jscomp$0.push('\"');\n+              : renderState$jscomp$1.push('$RX(\"'))\n+          : renderState$jscomp$1.push('<template data-rxi=\"\" data-bid=\"');\n+        renderState$jscomp$1.push(renderState$jscomp$2.boundaryPrefix);\n+        var chunk$jscomp$2 = id.toString(16);\n+        renderState$jscomp$1.push(chunk$jscomp$2);\n+        scriptFormat && renderState$jscomp$1.push('\"');\n         if (errorDigest)\n           if (scriptFormat) {\n-            renderState$jscomp$0.push(\",\");\n-            var chunk$jscomp$2 = escapeJSStringsForInstructionScripts(\n+            renderState$jscomp$1.push(\",\");\n+            var chunk$jscomp$3 = escapeJSStringsForInstructionScripts(\n               errorDigest || \"\"\n             );\n-            renderState$jscomp$0.push(chunk$jscomp$2);\n+            renderState$jscomp$1.push(chunk$jscomp$3);\n           } else {\n-            renderState$jscomp$0.push('\" data-dgst=\"');\n-            var chunk$jscomp$3 = escapeTextForBrowser(errorDigest || \"\");\n-            renderState$jscomp$0.push(chunk$jscomp$3);\n+            renderState$jscomp$1.push('\" data-dgst=\"');\n+            var chunk$jscomp$4 = escapeTextForBrowser(errorDigest || \"\");\n+            renderState$jscomp$1.push(chunk$jscomp$4);\n           }\n         var JSCompiler_inline_result = scriptFormat\n-          ? renderState$jscomp$0.push(\")\\x3c/script>\")\n-          : renderState$jscomp$0.push('\"></template>');\n+          ? renderState$jscomp$1.push(\")\\x3c/script>\")\n+          : renderState$jscomp$1.push('\"></template>');\n         if (!JSCompiler_inline_result) {\n           request.destination = null;\n           i++;\n@@ -6393,4 +6454,4 @@ exports.renderToString = function (children, options) {\n     'The server used \"renderToString\" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to \"renderToReadableStream\" which supports Suspense on the server'\n   );\n };\n-exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";"
        },
        {
            "sha": "2bf30ec62dc9124ed5250ef8b12a428ecb4c5fe7",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server-legacy.node.development.js",
            "status": "modified",
            "additions": 169,
            "deletions": 104,
            "changes": 273,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.node.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.node.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.node.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -1398,14 +1398,29 @@\n       return content;\n     }\n     function injectFormReplayingRuntime(resumableState, renderState) {\n-      (resumableState.instructions & 16) !== NothingSent ||\n-        renderState.externalRuntimeScript ||\n-        ((resumableState.instructions |= 16),\n-        renderState.bootstrapChunks.unshift(\n-          renderState.startInlineScript,\n-          formReplayingRuntimeScript,\n-          \"\\x3c/script>\"\n-        ));\n+      if (\n+        (resumableState.instructions & 16) === NothingSent &&\n+        !renderState.externalRuntimeScript\n+      ) {\n+        resumableState.instructions |= 16;\n+        var preamble = renderState.preamble,\n+          bootstrapChunks = renderState.bootstrapChunks;\n+        (preamble.htmlChunks || preamble.headChunks) &&\n+        0 === bootstrapChunks.length\n+          ? (bootstrapChunks.push(renderState.startInlineScript),\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+            bootstrapChunks.push(\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              \"\\x3c/script>\"\n+            ))\n+          : bootstrapChunks.unshift(\n+              renderState.startInlineScript,\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              \"\\x3c/script>\"\n+            );\n+      }\n     }\n     function pushLinkImpl(target, props) {\n       target.push(startChunkForTag(\"link\"));\n@@ -3133,6 +3148,15 @@\n       styleQueue.sheets.forEach(preloadLateStyle, this);\n       styleQueue.sheets.clear();\n     }\n+    function pushCompletedShellIdAttribute(target, resumableState) {\n+      (resumableState.instructions & SentCompletedShellId) === NothingSent &&\n+        ((resumableState.instructions |= SentCompletedShellId),\n+        target.push(\n+          completedShellIdAttributeStart,\n+          escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\"),\n+          attributeEnd\n+        ));\n+    }\n     function writeStyleResourceDependenciesInJS(destination, hoistableState) {\n       destination.push(arrayFirstOpenBracket);\n       var nextArrayOpenBrackChunk = arrayFirstOpenBracket;\n@@ -3452,16 +3476,18 @@\n         bootstrapScripts = resumableState.bootstrapScripts,\n         bootstrapModules = resumableState.bootstrapModules;\n       void 0 !== bootstrapScriptContent &&\n+        (bootstrapChunks.push(\"<script\"),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n         bootstrapChunks.push(\n-          \"<script>\",\n+          endOfStartTag,\n           escapeEntireInlineScriptContent(bootstrapScriptContent),\n           \"\\x3c/script>\"\n-        );\n+        ));\n       idPrefix = {\n         placeholderPrefix: idPrefix + \"P:\",\n         segmentPrefix: idPrefix + \"S:\",\n         boundaryPrefix: idPrefix + \"B:\",\n-        startInlineScript: \"<script>\",\n+        startInlineScript: \"<script\",\n         preamble: createPreambleState(),\n         externalRuntimeScript: null,\n         bootstrapChunks: bootstrapChunks,\n@@ -3526,18 +3552,25 @@\n                     ? \"use-credentials\"\n                     : \"\"));\n           preloadBootstrapScriptOrModule(resumableState, idPrefix, src, props);\n-          bootstrapChunks.push('<script src=\"', escapeTextForBrowser(src));\n+          bootstrapChunks.push(\n+            '<script src=\"',\n+            escapeTextForBrowser(src),\n+            attributeEnd\n+          );\n           \"string\" === typeof integrity &&\n             bootstrapChunks.push(\n-              '\" integrity=\"',\n-              escapeTextForBrowser(integrity)\n+              ' integrity=\"',\n+              escapeTextForBrowser(integrity),\n+              attributeEnd\n             );\n           \"string\" === typeof crossOrigin &&\n             bootstrapChunks.push(\n-              '\" crossorigin=\"',\n-              escapeTextForBrowser(crossOrigin)\n+              ' crossorigin=\"',\n+              escapeTextForBrowser(crossOrigin),\n+              attributeEnd\n             );\n-          bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+          pushCompletedShellIdAttribute(bootstrapChunks, resumableState);\n+          bootstrapChunks.push(' async=\"\">\\x3c/script>');\n         }\n       if (void 0 !== bootstrapModules)\n         for (\n@@ -3574,19 +3607,23 @@\n             ),\n             bootstrapChunks.push(\n               '<script type=\"module\" src=\"',\n-              escapeTextForBrowser(scriptConfig)\n+              escapeTextForBrowser(scriptConfig),\n+              attributeEnd\n             ),\n             \"string\" === typeof crossOrigin &&\n               bootstrapChunks.push(\n-                '\" integrity=\"',\n-                escapeTextForBrowser(crossOrigin)\n+                ' integrity=\"',\n+                escapeTextForBrowser(crossOrigin),\n+                attributeEnd\n               ),\n             \"string\" === typeof src &&\n               bootstrapChunks.push(\n-                '\" crossorigin=\"',\n-                escapeTextForBrowser(src)\n+                ' crossorigin=\"',\n+                escapeTextForBrowser(src),\n+                attributeEnd\n               ),\n-            bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+            bootstrapChunks.push(' async=\"\">\\x3c/script>');\n       return {\n         placeholderPrefix: idPrefix.placeholderPrefix,\n         segmentPrefix: idPrefix.segmentPrefix,\n@@ -4461,6 +4498,7 @@\n       this.fatalError = null;\n       this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n       this.completedPreambleSegments = this.completedRootSegment = null;\n+      this.byteSize = 0;\n       this.abortableTasks = abortSet;\n       this.pingedTasks = [];\n       this.clientRenderedBoundaries = [];\n@@ -5665,9 +5703,10 @@\n                     (contentRootSegment.status = COMPLETED),\n                     queueCompletedSegment(newBoundary, contentRootSegment),\n                     0 === newBoundary.pendingTasks &&\n-                      newBoundary.status === PENDING)\n+                      newBoundary.status === PENDING &&\n+                      ((newBoundary.status = COMPLETED),\n+                      !(newBoundary.byteSize > request.progressiveChunkSize)))\n                   ) {\n-                    newBoundary.status = COMPLETED;\n                     0 === request.pendingRootTasks &&\n                       task.blockedPreamble &&\n                       preparePreamble(request);\n@@ -7066,11 +7105,12 @@\n                 boundary.parentFlushed &&\n                   request.completedBoundaries.push(boundary),\n                 boundary.status === COMPLETED &&\n-                  (boundary.fallbackAbortableTasks.forEach(\n-                    abortTaskSoft,\n-                    request\n-                  ),\n-                  boundary.fallbackAbortableTasks.clear(),\n+                  (boundary.byteSize > request.progressiveChunkSize ||\n+                    (boundary.fallbackAbortableTasks.forEach(\n+                      abortTaskSoft,\n+                      request\n+                    ),\n+                    boundary.fallbackAbortableTasks.clear()),\n                   0 === request.pendingRootTasks &&\n                     null === request.trackedPostpones &&\n                     null !== boundary.contentPreamble &&\n@@ -7628,6 +7668,7 @@\n         completedSegments.streamingFormat === ScriptStreamingFormat;\n       scriptFormat\n         ? (destination.push(request.startInlineScript),\n+          destination.push(endOfStartTag),\n           requiresStyleInsertion\n             ? (completedSegments.instructions &\n                 SentCompleteBoundaryFunction) ===\n@@ -7709,6 +7750,7 @@\n       request = request.renderState;\n       (segment = boundary.streamingFormat === ScriptStreamingFormat)\n         ? (destination.push(request.startInlineScript),\n+          destination.push(endOfStartTag),\n           (boundary.instructions & SentCompleteSegmentFunction) === NothingSent\n             ? ((boundary.instructions |= SentCompleteSegmentFunction),\n               destination.push(completeSegmentScript1Full))\n@@ -7736,14 +7778,14 @@\n             if (completedRootSegment.status === POSTPONED) return;\n             var completedPreambleSegments = request.completedPreambleSegments;\n             if (null === completedPreambleSegments) return;\n-            var renderState = request.renderState;\n+            var resumableState = request.resumableState,\n+              renderState = request.renderState;\n             if (\n               (0 !== request.allPendingTasks ||\n                 null !== request.trackedPostpones) &&\n               renderState.externalRuntimeScript\n             ) {\n               var _renderState$external = renderState.externalRuntimeScript,\n-                resumableState = request.resumableState,\n                 src = _renderState$external.src,\n                 chunks = _renderState$external.chunks;\n               resumableState.scriptResources.hasOwnProperty(src) ||\n@@ -7808,6 +7850,13 @@\n             renderState.scripts.clear();\n             renderState.bulkPreloads.forEach(flushResource, destination);\n             renderState.bulkPreloads.clear();\n+            if (htmlChunks || headChunks) {\n+              var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+              destination.push(blockingRenderChunkStart);\n+              var chunk$jscomp$0 = escapeTextForBrowser(shellId);\n+              destination.push(chunk$jscomp$0);\n+              destination.push(blockingRenderChunkEnd);\n+            }\n             var hoistableChunks = renderState.hoistableChunks;\n             for (\n               i$jscomp$0 = 0;\n@@ -7816,28 +7865,23 @@\n             )\n               destination.push(hoistableChunks[i$jscomp$0]);\n             for (\n-              renderState = hoistableChunks.length = 0;\n-              renderState < completedPreambleSegments.length;\n-              renderState++\n+              resumableState = hoistableChunks.length = 0;\n+              resumableState < completedPreambleSegments.length;\n+              resumableState++\n             ) {\n-              var segments = completedPreambleSegments[renderState];\n+              var segments = completedPreambleSegments[resumableState];\n               for (\n-                _renderState$external = 0;\n-                _renderState$external < segments.length;\n-                _renderState$external++\n+                renderState = 0;\n+                renderState < segments.length;\n+                renderState++\n               )\n-                flushSegment(\n-                  request,\n-                  destination,\n-                  segments[_renderState$external],\n-                  null\n-                );\n+                flushSegment(request, destination, segments[renderState], null);\n             }\n             var preamble$jscomp$0 = request.renderState.preamble,\n               headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n             if (preamble$jscomp$0.htmlChunks || headChunks$jscomp$0) {\n-              var chunk$jscomp$0 = endChunkForTag(\"head\");\n-              destination.push(chunk$jscomp$0);\n+              var chunk$jscomp$1 = endChunkForTag(\"head\");\n+              destination.push(chunk$jscomp$1);\n             }\n             var bodyChunks = preamble$jscomp$0.bodyChunks;\n             if (bodyChunks)\n@@ -7849,33 +7893,49 @@\n                 destination.push(bodyChunks[completedPreambleSegments]);\n             flushSegment(request, destination, completedRootSegment, null);\n             request.completedRootSegment = null;\n-            writeBootstrap(destination, request.renderState);\n+            var resumableState$jscomp$0 = request.resumableState,\n+              renderState$jscomp$0 = request.renderState,\n+              preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+            if (\n+              (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+              (resumableState$jscomp$0.instructions & SentCompletedShellId) ===\n+                NothingSent\n+            ) {\n+              var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+              bootstrapChunks.push(startChunkForTag(\"template\"));\n+              pushCompletedShellIdAttribute(\n+                bootstrapChunks,\n+                resumableState$jscomp$0\n+              );\n+              bootstrapChunks.push(endOfStartTag, endChunkForTag(\"template\"));\n+            }\n+            writeBootstrap(destination, renderState$jscomp$0);\n           }\n-          var renderState$jscomp$0 = request.renderState;\n+          var renderState$jscomp$1 = request.renderState;\n           completedRootSegment = 0;\n-          var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+          var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < viewportChunks$jscomp$0.length;\n             completedRootSegment++\n           )\n             destination.push(viewportChunks$jscomp$0[completedRootSegment]);\n           viewportChunks$jscomp$0.length = 0;\n-          renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-          renderState$jscomp$0.preconnects.clear();\n-          renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.fontPreloads.clear();\n-          renderState$jscomp$0.highImagePreloads.forEach(\n+          renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+          renderState$jscomp$1.preconnects.clear();\n+          renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.fontPreloads.clear();\n+          renderState$jscomp$1.highImagePreloads.forEach(\n             flushResource,\n             destination\n           );\n-          renderState$jscomp$0.highImagePreloads.clear();\n-          renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-          renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-          renderState$jscomp$0.scripts.clear();\n-          renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.bulkPreloads.clear();\n-          var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+          renderState$jscomp$1.highImagePreloads.clear();\n+          renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+          renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+          renderState$jscomp$1.scripts.clear();\n+          renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.bulkPreloads.clear();\n+          var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -7886,96 +7946,97 @@\n           var clientRenderedBoundaries = request.clientRenderedBoundaries;\n           for (i = 0; i < clientRenderedBoundaries.length; i++) {\n             var boundary = clientRenderedBoundaries[i];\n-            renderState$jscomp$0 = destination;\n-            var resumableState$jscomp$0 = request.resumableState,\n-              renderState$jscomp$1 = request.renderState,\n+            renderState$jscomp$1 = destination;\n+            var resumableState$jscomp$1 = request.resumableState,\n+              renderState$jscomp$2 = request.renderState,\n               id = boundary.rootSegmentID,\n               errorDigest = boundary.errorDigest,\n               errorMessage = boundary.errorMessage,\n               errorStack = boundary.errorStack,\n               errorComponentStack = boundary.errorComponentStack,\n               scriptFormat =\n-                resumableState$jscomp$0.streamingFormat ===\n+                resumableState$jscomp$1.streamingFormat ===\n                 ScriptStreamingFormat;\n             scriptFormat\n-              ? (renderState$jscomp$0.push(\n-                  renderState$jscomp$1.startInlineScript\n+              ? (renderState$jscomp$1.push(\n+                  renderState$jscomp$2.startInlineScript\n                 ),\n-                (resumableState$jscomp$0.instructions &\n+                renderState$jscomp$1.push(endOfStartTag),\n+                (resumableState$jscomp$1.instructions &\n                   SentClientRenderFunction) ===\n                 NothingSent\n-                  ? ((resumableState$jscomp$0.instructions |=\n+                  ? ((resumableState$jscomp$1.instructions |=\n                       SentClientRenderFunction),\n-                    renderState$jscomp$0.push(clientRenderScript1Full))\n-                  : renderState$jscomp$0.push(clientRenderScript1Partial))\n-              : renderState$jscomp$0.push(clientRenderData1);\n-            renderState$jscomp$0.push(renderState$jscomp$1.boundaryPrefix);\n-            var chunk$jscomp$1 = id.toString(16);\n-            renderState$jscomp$0.push(chunk$jscomp$1);\n-            scriptFormat && renderState$jscomp$0.push(clientRenderScript1A);\n+                    renderState$jscomp$1.push(clientRenderScript1Full))\n+                  : renderState$jscomp$1.push(clientRenderScript1Partial))\n+              : renderState$jscomp$1.push(clientRenderData1);\n+            renderState$jscomp$1.push(renderState$jscomp$2.boundaryPrefix);\n+            var chunk$jscomp$2 = id.toString(16);\n+            renderState$jscomp$1.push(chunk$jscomp$2);\n+            scriptFormat && renderState$jscomp$1.push(clientRenderScript1A);\n             if (\n               errorDigest ||\n               errorMessage ||\n               errorStack ||\n               errorComponentStack\n             )\n               if (scriptFormat) {\n-                renderState$jscomp$0.push(\n+                renderState$jscomp$1.push(\n                   clientRenderErrorScriptArgInterstitial\n                 );\n-                var chunk$jscomp$2 = escapeJSStringsForInstructionScripts(\n+                var chunk$jscomp$3 = escapeJSStringsForInstructionScripts(\n                   errorDigest || \"\"\n                 );\n-                renderState$jscomp$0.push(chunk$jscomp$2);\n+                renderState$jscomp$1.push(chunk$jscomp$3);\n               } else {\n-                renderState$jscomp$0.push(clientRenderData2);\n-                var chunk$jscomp$3 = escapeTextForBrowser(errorDigest || \"\");\n-                renderState$jscomp$0.push(chunk$jscomp$3);\n+                renderState$jscomp$1.push(clientRenderData2);\n+                var chunk$jscomp$4 = escapeTextForBrowser(errorDigest || \"\");\n+                renderState$jscomp$1.push(chunk$jscomp$4);\n               }\n             if (errorMessage || errorStack || errorComponentStack)\n               if (scriptFormat) {\n-                renderState$jscomp$0.push(\n+                renderState$jscomp$1.push(\n                   clientRenderErrorScriptArgInterstitial\n                 );\n-                var chunk$jscomp$4 = escapeJSStringsForInstructionScripts(\n+                var chunk$jscomp$5 = escapeJSStringsForInstructionScripts(\n                   errorMessage || \"\"\n                 );\n-                renderState$jscomp$0.push(chunk$jscomp$4);\n+                renderState$jscomp$1.push(chunk$jscomp$5);\n               } else {\n-                renderState$jscomp$0.push(clientRenderData3);\n-                var chunk$jscomp$5 = escapeTextForBrowser(errorMessage || \"\");\n-                renderState$jscomp$0.push(chunk$jscomp$5);\n+                renderState$jscomp$1.push(clientRenderData3);\n+                var chunk$jscomp$6 = escapeTextForBrowser(errorMessage || \"\");\n+                renderState$jscomp$1.push(chunk$jscomp$6);\n               }\n             if (errorStack || errorComponentStack)\n               if (scriptFormat) {\n-                renderState$jscomp$0.push(\n+                renderState$jscomp$1.push(\n                   clientRenderErrorScriptArgInterstitial\n                 );\n-                var chunk$jscomp$6 = escapeJSStringsForInstructionScripts(\n+                var chunk$jscomp$7 = escapeJSStringsForInstructionScripts(\n                   errorStack || \"\"\n                 );\n-                renderState$jscomp$0.push(chunk$jscomp$6);\n+                renderState$jscomp$1.push(chunk$jscomp$7);\n               } else {\n-                renderState$jscomp$0.push(clientRenderData4);\n-                var chunk$jscomp$7 = escapeTextForBrowser(errorStack || \"\");\n-                renderState$jscomp$0.push(chunk$jscomp$7);\n+                renderState$jscomp$1.push(clientRenderData4);\n+                var chunk$jscomp$8 = escapeTextForBrowser(errorStack || \"\");\n+                renderState$jscomp$1.push(chunk$jscomp$8);\n               }\n             if (errorComponentStack)\n               if (scriptFormat) {\n-                renderState$jscomp$0.push(\n+                renderState$jscomp$1.push(\n                   clientRenderErrorScriptArgInterstitial\n                 );\n-                var chunk$jscomp$8 =\n+                var chunk$jscomp$9 =\n                   escapeJSStringsForInstructionScripts(errorComponentStack);\n-                renderState$jscomp$0.push(chunk$jscomp$8);\n+                renderState$jscomp$1.push(chunk$jscomp$9);\n               } else {\n-                renderState$jscomp$0.push(clientRenderData5);\n-                var chunk$jscomp$9 = escapeTextForBrowser(errorComponentStack);\n-                renderState$jscomp$0.push(chunk$jscomp$9);\n+                renderState$jscomp$1.push(clientRenderData5);\n+                var chunk$jscomp$10 = escapeTextForBrowser(errorComponentStack);\n+                renderState$jscomp$1.push(chunk$jscomp$10);\n               }\n             var JSCompiler_inline_result = scriptFormat\n-              ? renderState$jscomp$0.push(clientRenderScriptEnd)\n-              : renderState$jscomp$0.push(clientRenderDataEnd);\n+              ? renderState$jscomp$1.push(clientRenderScriptEnd)\n+              : renderState$jscomp$1.push(clientRenderDataEnd);\n             if (!JSCompiler_inline_result) {\n               request.destination = null;\n               i++;\n@@ -9265,6 +9326,7 @@\n       SentCompleteBoundaryFunction = 2,\n       SentClientRenderFunction = 4,\n       SentStyleInsertionFunction = 8,\n+      SentCompletedShellId = 32,\n       EXISTS = null,\n       PRELOAD_NO_CREDS = [];\n     Object.freeze(PRELOAD_NO_CREDS);\n@@ -9398,6 +9460,9 @@\n       spaceSeparator = \" \",\n       styleTagResourceOpen3 = '\">',\n       styleTagResourceClose = \"</style>\",\n+      blockingRenderChunkStart = '<link rel=\"expect\" href=\"#',\n+      blockingRenderChunkEnd = '\" blocking=\"render\"/>',\n+      completedShellIdAttributeStart = ' id=\"',\n       arrayFirstOpenBracket = \"[\",\n       arraySubsequentOpenBracket = \",[\",\n       arrayInterstitial = \",\",\n@@ -9672,5 +9737,5 @@\n         'The server used \"renderToString\" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to \"renderToPipeableStream\" which supports Suspense on the server'\n       );\n     };\n-    exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+    exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";\n   })();"
        },
        {
            "sha": "312b09341515173cc105f45f632989b0044b6f38",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server-legacy.node.production.js",
            "status": "modified",
            "additions": 165,
            "deletions": 104,
            "changes": 269,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.node.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.node.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server-legacy.node.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -722,14 +722,28 @@ function flattenOptionChildren(children) {\n   return content;\n }\n function injectFormReplayingRuntime(resumableState, renderState) {\n-  0 !== (resumableState.instructions & 16) ||\n-    renderState.externalRuntimeScript ||\n-    ((resumableState.instructions |= 16),\n-    renderState.bootstrapChunks.unshift(\n-      renderState.startInlineScript,\n-      'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n-      \"\\x3c/script>\"\n-    ));\n+  if (\n+    0 === (resumableState.instructions & 16) &&\n+    !renderState.externalRuntimeScript\n+  ) {\n+    resumableState.instructions |= 16;\n+    var preamble = renderState.preamble,\n+      bootstrapChunks = renderState.bootstrapChunks;\n+    (preamble.htmlChunks || preamble.headChunks) && 0 === bootstrapChunks.length\n+      ? (bootstrapChunks.push(renderState.startInlineScript),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(\n+          \">\",\n+          'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n+          \"\\x3c/script>\"\n+        ))\n+      : bootstrapChunks.unshift(\n+          renderState.startInlineScript,\n+          \">\",\n+          'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n+          \"\\x3c/script>\"\n+        );\n+  }\n }\n function pushLinkImpl(target, props) {\n   target.push(startChunkForTag(\"link\"));\n@@ -2185,6 +2199,15 @@ function preloadLateStyles(styleQueue) {\n   styleQueue.sheets.forEach(preloadLateStyle, this);\n   styleQueue.sheets.clear();\n }\n+function pushCompletedShellIdAttribute(target, resumableState) {\n+  0 === (resumableState.instructions & 32) &&\n+    ((resumableState.instructions |= 32),\n+    target.push(\n+      ' id=\"',\n+      escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\"),\n+      '\"'\n+    ));\n+}\n function writeStyleResourceDependenciesInJS(destination, hoistableState) {\n   destination.push(\"[\");\n   var nextArrayOpenBrackChunk = \"[\";\n@@ -2796,23 +2819,25 @@ function createRenderState(resumableState, generateStaticMarkup) {\n     bootstrapScripts = resumableState.bootstrapScripts,\n     bootstrapModules = resumableState.bootstrapModules;\n   void 0 !== bootstrapScriptContent &&\n+    (bootstrapChunks.push(\"<script\"),\n+    pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n     bootstrapChunks.push(\n-      \"<script>\",\n+      \">\",\n       (\"\" + bootstrapScriptContent).replace(scriptRegex, scriptReplacer),\n       \"\\x3c/script>\"\n-    );\n+    ));\n   bootstrapScriptContent = idPrefix + \"P:\";\n-  var JSCompiler_object_inline_segmentPrefix_1708 = idPrefix + \"S:\";\n+  var JSCompiler_object_inline_segmentPrefix_1751 = idPrefix + \"S:\";\n   idPrefix += \"B:\";\n-  var JSCompiler_object_inline_preamble_1711 = createPreambleState(),\n-    JSCompiler_object_inline_preconnects_1721 = new Set(),\n-    JSCompiler_object_inline_fontPreloads_1722 = new Set(),\n-    JSCompiler_object_inline_highImagePreloads_1723 = new Set(),\n-    JSCompiler_object_inline_styles_1724 = new Map(),\n-    JSCompiler_object_inline_bootstrapScripts_1725 = new Set(),\n-    JSCompiler_object_inline_scripts_1726 = new Set(),\n-    JSCompiler_object_inline_bulkPreloads_1727 = new Set(),\n-    JSCompiler_object_inline_preloads_1728 = {\n+  var JSCompiler_object_inline_preamble_1754 = createPreambleState(),\n+    JSCompiler_object_inline_preconnects_1764 = new Set(),\n+    JSCompiler_object_inline_fontPreloads_1765 = new Set(),\n+    JSCompiler_object_inline_highImagePreloads_1766 = new Set(),\n+    JSCompiler_object_inline_styles_1767 = new Map(),\n+    JSCompiler_object_inline_bootstrapScripts_1768 = new Set(),\n+    JSCompiler_object_inline_scripts_1769 = new Set(),\n+    JSCompiler_object_inline_bulkPreloads_1770 = new Set(),\n+    JSCompiler_object_inline_preloads_1771 = {\n       images: new Map(),\n       stylesheets: new Map(),\n       scripts: new Map(),\n@@ -2849,16 +2874,22 @@ function createRenderState(resumableState, generateStaticMarkup) {\n       scriptConfig.moduleScriptResources[href] = null;\n       scriptConfig = [];\n       pushLinkImpl(scriptConfig, props);\n-      JSCompiler_object_inline_bootstrapScripts_1725.add(scriptConfig);\n-      bootstrapChunks.push('<script src=\"', escapeTextForBrowser(src));\n+      JSCompiler_object_inline_bootstrapScripts_1768.add(scriptConfig);\n+      bootstrapChunks.push('<script src=\"', escapeTextForBrowser(src), '\"');\n       \"string\" === typeof integrity &&\n-        bootstrapChunks.push('\" integrity=\"', escapeTextForBrowser(integrity));\n+        bootstrapChunks.push(\n+          ' integrity=\"',\n+          escapeTextForBrowser(integrity),\n+          '\"'\n+        );\n       \"string\" === typeof crossOrigin &&\n         bootstrapChunks.push(\n-          '\" crossorigin=\"',\n-          escapeTextForBrowser(crossOrigin)\n+          ' crossorigin=\"',\n+          escapeTextForBrowser(crossOrigin),\n+          '\"'\n         );\n-      bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+      pushCompletedShellIdAttribute(bootstrapChunks, resumableState);\n+      bootstrapChunks.push(' async=\"\">\\x3c/script>');\n     }\n   if (void 0 !== bootstrapModules)\n     for (\n@@ -2890,25 +2921,32 @@ function createRenderState(resumableState, generateStaticMarkup) {\n         (props.moduleScriptResources[scriptConfig] = null),\n         (props = []),\n         pushLinkImpl(props, integrity),\n-        JSCompiler_object_inline_bootstrapScripts_1725.add(props),\n+        JSCompiler_object_inline_bootstrapScripts_1768.add(props),\n         bootstrapChunks.push(\n           '<script type=\"module\" src=\"',\n-          escapeTextForBrowser(i)\n+          escapeTextForBrowser(i),\n+          '\"'\n         ),\n         \"string\" === typeof crossOrigin &&\n           bootstrapChunks.push(\n-            '\" integrity=\"',\n-            escapeTextForBrowser(crossOrigin)\n+            ' integrity=\"',\n+            escapeTextForBrowser(crossOrigin),\n+            '\"'\n           ),\n         \"string\" === typeof src &&\n-          bootstrapChunks.push('\" crossorigin=\"', escapeTextForBrowser(src)),\n-        bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+          bootstrapChunks.push(\n+            ' crossorigin=\"',\n+            escapeTextForBrowser(src),\n+            '\"'\n+          ),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(' async=\"\">\\x3c/script>');\n   return {\n     placeholderPrefix: bootstrapScriptContent,\n-    segmentPrefix: JSCompiler_object_inline_segmentPrefix_1708,\n+    segmentPrefix: JSCompiler_object_inline_segmentPrefix_1751,\n     boundaryPrefix: idPrefix,\n-    startInlineScript: \"<script>\",\n-    preamble: JSCompiler_object_inline_preamble_1711,\n+    startInlineScript: \"<script\",\n+    preamble: JSCompiler_object_inline_preamble_1754,\n     externalRuntimeScript: null,\n     bootstrapChunks: bootstrapChunks,\n     importMapChunks: [],\n@@ -2924,14 +2962,14 @@ function createRenderState(resumableState, generateStaticMarkup) {\n     charsetChunks: [],\n     viewportChunks: [],\n     hoistableChunks: [],\n-    preconnects: JSCompiler_object_inline_preconnects_1721,\n-    fontPreloads: JSCompiler_object_inline_fontPreloads_1722,\n-    highImagePreloads: JSCompiler_object_inline_highImagePreloads_1723,\n-    styles: JSCompiler_object_inline_styles_1724,\n-    bootstrapScripts: JSCompiler_object_inline_bootstrapScripts_1725,\n-    scripts: JSCompiler_object_inline_scripts_1726,\n-    bulkPreloads: JSCompiler_object_inline_bulkPreloads_1727,\n-    preloads: JSCompiler_object_inline_preloads_1728,\n+    preconnects: JSCompiler_object_inline_preconnects_1764,\n+    fontPreloads: JSCompiler_object_inline_fontPreloads_1765,\n+    highImagePreloads: JSCompiler_object_inline_highImagePreloads_1766,\n+    styles: JSCompiler_object_inline_styles_1767,\n+    bootstrapScripts: JSCompiler_object_inline_bootstrapScripts_1768,\n+    scripts: JSCompiler_object_inline_scripts_1769,\n+    bulkPreloads: JSCompiler_object_inline_bulkPreloads_1770,\n+    preloads: JSCompiler_object_inline_preloads_1771,\n     stylesToHoist: !1,\n     generateStaticMarkup: generateStaticMarkup\n   };\n@@ -3755,6 +3793,7 @@ function RequestInstance(\n   this.fatalError = null;\n   this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n   this.completedPreambleSegments = this.completedRootSegment = null;\n+  this.byteSize = 0;\n   this.abortableTasks = abortSet;\n   this.pingedTasks = [];\n   this.clientRenderedBoundaries = [];\n@@ -4447,9 +4486,11 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                 ),\n                 (contentRootSegment.status = 1),\n                 queueCompletedSegment(newBoundary, contentRootSegment),\n-                0 === newBoundary.pendingTasks && 0 === newBoundary.status)\n+                0 === newBoundary.pendingTasks &&\n+                  0 === newBoundary.status &&\n+                  ((newBoundary.status = 1),\n+                  !(newBoundary.byteSize > request.progressiveChunkSize)))\n               ) {\n-                newBoundary.status = 1;\n                 0 === request.pendingRootTasks &&\n                   task.blockedPreamble &&\n                   preparePreamble(request);\n@@ -5560,8 +5601,12 @@ function finishedTask(request, boundary, segment) {\n             boundary.parentFlushed &&\n               request.completedBoundaries.push(boundary),\n             1 === boundary.status &&\n-              (boundary.fallbackAbortableTasks.forEach(abortTaskSoft, request),\n-              boundary.fallbackAbortableTasks.clear(),\n+              (boundary.byteSize > request.progressiveChunkSize ||\n+                (boundary.fallbackAbortableTasks.forEach(\n+                  abortTaskSoft,\n+                  request\n+                ),\n+                boundary.fallbackAbortableTasks.clear()),\n               0 === request.pendingRootTasks &&\n                 null === request.trackedPostpones &&\n                 null !== boundary.contentPreamble &&\n@@ -6017,6 +6062,7 @@ function flushCompletedBoundary(request, destination, boundary) {\n   var scriptFormat = 0 === completedSegments.streamingFormat;\n   scriptFormat\n     ? (destination.push(request.startInlineScript),\n+      destination.push(\">\"),\n       requiresStyleInsertion\n         ? 0 === (completedSegments.instructions & 2)\n           ? ((completedSegments.instructions |= 10),\n@@ -6079,6 +6125,7 @@ function flushPartiallyCompletedSegment(\n   request = request.renderState;\n   (segment = 0 === boundary.streamingFormat)\n     ? (destination.push(request.startInlineScript),\n+      destination.push(\">\"),\n       0 === (boundary.instructions & 1)\n         ? ((boundary.instructions |= 1),\n           destination.push(\n@@ -6106,14 +6153,14 @@ function flushCompletedQueues(request, destination) {\n         if (5 === completedRootSegment.status) return;\n         var completedPreambleSegments = request.completedPreambleSegments;\n         if (null === completedPreambleSegments) return;\n-        var renderState = request.renderState;\n+        var resumableState = request.resumableState,\n+          renderState = request.renderState;\n         if (\n           (0 !== request.allPendingTasks ||\n             null !== request.trackedPostpones) &&\n           renderState.externalRuntimeScript\n         ) {\n           var _renderState$external = renderState.externalRuntimeScript,\n-            resumableState = request.resumableState,\n             src = _renderState$external.src,\n             chunks = _renderState$external.chunks;\n           resumableState.scriptResources.hasOwnProperty(src) ||\n@@ -6162,32 +6209,30 @@ function flushCompletedQueues(request, destination) {\n         renderState.scripts.clear();\n         renderState.bulkPreloads.forEach(flushResource, destination);\n         renderState.bulkPreloads.clear();\n+        if (htmlChunks || headChunks) {\n+          var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+          destination.push('<link rel=\"expect\" href=\"#');\n+          var chunk$jscomp$0 = escapeTextForBrowser(shellId);\n+          destination.push(chunk$jscomp$0);\n+          destination.push('\" blocking=\"render\"/>');\n+        }\n         var hoistableChunks = renderState.hoistableChunks;\n         for (i$jscomp$0 = 0; i$jscomp$0 < hoistableChunks.length; i$jscomp$0++)\n           destination.push(hoistableChunks[i$jscomp$0]);\n         for (\n-          renderState = hoistableChunks.length = 0;\n-          renderState < completedPreambleSegments.length;\n-          renderState++\n+          resumableState = hoistableChunks.length = 0;\n+          resumableState < completedPreambleSegments.length;\n+          resumableState++\n         ) {\n-          var segments = completedPreambleSegments[renderState];\n-          for (\n-            _renderState$external = 0;\n-            _renderState$external < segments.length;\n-            _renderState$external++\n-          )\n-            flushSegment(\n-              request,\n-              destination,\n-              segments[_renderState$external],\n-              null\n-            );\n+          var segments = completedPreambleSegments[resumableState];\n+          for (renderState = 0; renderState < segments.length; renderState++)\n+            flushSegment(request, destination, segments[renderState], null);\n         }\n         var preamble$jscomp$0 = request.renderState.preamble,\n           headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n         if (preamble$jscomp$0.htmlChunks || headChunks$jscomp$0) {\n-          var chunk$jscomp$0 = endChunkForTag(\"head\");\n-          destination.push(chunk$jscomp$0);\n+          var chunk$jscomp$1 = endChunkForTag(\"head\");\n+          destination.push(chunk$jscomp$1);\n         }\n         var bodyChunks = preamble$jscomp$0.bodyChunks;\n         if (bodyChunks)\n@@ -6199,33 +6244,48 @@ function flushCompletedQueues(request, destination) {\n             destination.push(bodyChunks[completedPreambleSegments]);\n         flushSegment(request, destination, completedRootSegment, null);\n         request.completedRootSegment = null;\n-        writeBootstrap(destination, request.renderState);\n+        var resumableState$jscomp$0 = request.resumableState,\n+          renderState$jscomp$0 = request.renderState,\n+          preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+        if (\n+          (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+          0 === (resumableState$jscomp$0.instructions & 32)\n+        ) {\n+          var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+          bootstrapChunks.push(startChunkForTag(\"template\"));\n+          pushCompletedShellIdAttribute(\n+            bootstrapChunks,\n+            resumableState$jscomp$0\n+          );\n+          bootstrapChunks.push(\">\", endChunkForTag(\"template\"));\n+        }\n+        writeBootstrap(destination, renderState$jscomp$0);\n       }\n-      var renderState$jscomp$0 = request.renderState;\n+      var renderState$jscomp$1 = request.renderState;\n       completedRootSegment = 0;\n-      var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+      var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < viewportChunks$jscomp$0.length;\n         completedRootSegment++\n       )\n         destination.push(viewportChunks$jscomp$0[completedRootSegment]);\n       viewportChunks$jscomp$0.length = 0;\n-      renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-      renderState$jscomp$0.preconnects.clear();\n-      renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.fontPreloads.clear();\n-      renderState$jscomp$0.highImagePreloads.forEach(\n+      renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+      renderState$jscomp$1.preconnects.clear();\n+      renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.fontPreloads.clear();\n+      renderState$jscomp$1.highImagePreloads.forEach(\n         flushResource,\n         destination\n       );\n-      renderState$jscomp$0.highImagePreloads.clear();\n-      renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-      renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-      renderState$jscomp$0.scripts.clear();\n-      renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.bulkPreloads.clear();\n-      var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+      renderState$jscomp$1.highImagePreloads.clear();\n+      renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+      renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+      renderState$jscomp$1.scripts.clear();\n+      renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.bulkPreloads.clear();\n+      var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -6236,40 +6296,41 @@ function flushCompletedQueues(request, destination) {\n       var clientRenderedBoundaries = request.clientRenderedBoundaries;\n       for (i = 0; i < clientRenderedBoundaries.length; i++) {\n         var boundary = clientRenderedBoundaries[i];\n-        renderState$jscomp$0 = destination;\n-        var resumableState$jscomp$0 = request.resumableState,\n-          renderState$jscomp$1 = request.renderState,\n+        renderState$jscomp$1 = destination;\n+        var resumableState$jscomp$1 = request.resumableState,\n+          renderState$jscomp$2 = request.renderState,\n           id = boundary.rootSegmentID,\n           errorDigest = boundary.errorDigest,\n-          scriptFormat = 0 === resumableState$jscomp$0.streamingFormat;\n+          scriptFormat = 0 === resumableState$jscomp$1.streamingFormat;\n         scriptFormat\n-          ? (renderState$jscomp$0.push(renderState$jscomp$1.startInlineScript),\n-            0 === (resumableState$jscomp$0.instructions & 4)\n-              ? ((resumableState$jscomp$0.instructions |= 4),\n-                renderState$jscomp$0.push(\n+          ? (renderState$jscomp$1.push(renderState$jscomp$2.startInlineScript),\n+            renderState$jscomp$1.push(\">\"),\n+            0 === (resumableState$jscomp$1.instructions & 4)\n+              ? ((resumableState$jscomp$1.instructions |= 4),\n+                renderState$jscomp$1.push(\n                   '$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data=\"$!\",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX(\"'\n                 ))\n-              : renderState$jscomp$0.push('$RX(\"'))\n-          : renderState$jscomp$0.push('<template data-rxi=\"\" data-bid=\"');\n-        renderState$jscomp$0.push(renderState$jscomp$1.boundaryPrefix);\n-        var chunk$jscomp$1 = id.toString(16);\n-        renderState$jscomp$0.push(chunk$jscomp$1);\n-        scriptFormat && renderState$jscomp$0.push('\"');\n+              : renderState$jscomp$1.push('$RX(\"'))\n+          : renderState$jscomp$1.push('<template data-rxi=\"\" data-bid=\"');\n+        renderState$jscomp$1.push(renderState$jscomp$2.boundaryPrefix);\n+        var chunk$jscomp$2 = id.toString(16);\n+        renderState$jscomp$1.push(chunk$jscomp$2);\n+        scriptFormat && renderState$jscomp$1.push('\"');\n         if (errorDigest)\n           if (scriptFormat) {\n-            renderState$jscomp$0.push(\",\");\n-            var chunk$jscomp$2 = escapeJSStringsForInstructionScripts(\n+            renderState$jscomp$1.push(\",\");\n+            var chunk$jscomp$3 = escapeJSStringsForInstructionScripts(\n               errorDigest || \"\"\n             );\n-            renderState$jscomp$0.push(chunk$jscomp$2);\n+            renderState$jscomp$1.push(chunk$jscomp$3);\n           } else {\n-            renderState$jscomp$0.push('\" data-dgst=\"');\n-            var chunk$jscomp$3 = escapeTextForBrowser(errorDigest || \"\");\n-            renderState$jscomp$0.push(chunk$jscomp$3);\n+            renderState$jscomp$1.push('\" data-dgst=\"');\n+            var chunk$jscomp$4 = escapeTextForBrowser(errorDigest || \"\");\n+            renderState$jscomp$1.push(chunk$jscomp$4);\n           }\n         var JSCompiler_inline_result = scriptFormat\n-          ? renderState$jscomp$0.push(\")\\x3c/script>\")\n-          : renderState$jscomp$0.push('\"></template>');\n+          ? renderState$jscomp$1.push(\")\\x3c/script>\")\n+          : renderState$jscomp$1.push('\"></template>');\n         if (!JSCompiler_inline_result) {\n           request.destination = null;\n           i++;\n@@ -6487,4 +6548,4 @@ exports.renderToString = function (children, options) {\n     'The server used \"renderToString\" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to \"renderToPipeableStream\" which supports Suspense on the server'\n   );\n };\n-exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";"
        },
        {
            "sha": "b91cfe6fd09d6aa1b9d714c245b7e1c489bab8f4",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server.browser.development.js",
            "status": "modified",
            "additions": 192,
            "deletions": 98,
            "changes": 290,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.browser.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -322,6 +322,9 @@\n         );\n       return content;\n     }\n+    function byteLengthOfChunk(chunk) {\n+      return chunk.byteLength;\n+    }\n     function closeWithError(destination, error) {\n       \"function\" === typeof destination.error\n         ? destination.error(error)\n@@ -820,7 +823,7 @@\n           void 0 === nonce\n             ? startInlineScript\n             : stringToPrecomputedChunk(\n-                '<script nonce=\"' + escapeTextForBrowser(nonce) + '\">'\n+                '<script nonce=\"' + escapeTextForBrowser(nonce) + '\"'\n               ),\n         idPrefix = resumableState.idPrefix,\n         bootstrapChunks = [],\n@@ -829,13 +832,15 @@\n         bootstrapScripts = resumableState.bootstrapScripts,\n         bootstrapModules = resumableState.bootstrapModules;\n       void 0 !== bootstrapScriptContent &&\n+        (bootstrapChunks.push(inlineScriptWithNonce),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n         bootstrapChunks.push(\n-          inlineScriptWithNonce,\n+          endOfStartTag,\n           stringToChunk(\n             escapeEntireInlineScriptContent(bootstrapScriptContent)\n           ),\n           endInlineScript\n-        );\n+        ));\n       void 0 !== externalRuntimeConfig &&\n         (\"string\" === typeof externalRuntimeConfig\n           ? ((externalRuntimeScript = {\n@@ -958,23 +963,28 @@\n             ),\n             bootstrapChunks.push(\n               startScriptSrc,\n-              stringToChunk(escapeTextForBrowser(externalRuntimeScript))\n+              stringToChunk(escapeTextForBrowser(externalRuntimeScript)),\n+              attributeEnd\n             ),\n             nonce &&\n               bootstrapChunks.push(\n                 scriptNonce,\n-                stringToChunk(escapeTextForBrowser(nonce))\n+                stringToChunk(escapeTextForBrowser(nonce)),\n+                attributeEnd\n               ),\n             \"string\" === typeof maxHeadersLength &&\n               bootstrapChunks.push(\n                 scriptIntegirty,\n-                stringToChunk(escapeTextForBrowser(maxHeadersLength))\n+                stringToChunk(escapeTextForBrowser(maxHeadersLength)),\n+                attributeEnd\n               ),\n             \"string\" === typeof importMap &&\n               bootstrapChunks.push(\n                 scriptCrossOrigin,\n-                stringToChunk(escapeTextForBrowser(importMap))\n+                stringToChunk(escapeTextForBrowser(importMap)),\n+                attributeEnd\n               ),\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n             bootstrapChunks.push(endAsyncScript);\n       if (void 0 !== bootstrapModules)\n         for (\n@@ -1011,23 +1021,28 @@\n             ),\n             bootstrapChunks.push(\n               startModuleSrc,\n-              stringToChunk(escapeTextForBrowser(idPrefix))\n+              stringToChunk(escapeTextForBrowser(idPrefix)),\n+              attributeEnd\n             ),\n             nonce &&\n               bootstrapChunks.push(\n                 scriptNonce,\n-                stringToChunk(escapeTextForBrowser(nonce))\n+                stringToChunk(escapeTextForBrowser(nonce)),\n+                attributeEnd\n               ),\n             \"string\" === typeof importMap &&\n               bootstrapChunks.push(\n                 scriptIntegirty,\n-                stringToChunk(escapeTextForBrowser(importMap))\n+                stringToChunk(escapeTextForBrowser(importMap)),\n+                attributeEnd\n               ),\n             \"string\" === typeof externalRuntimeScript &&\n               bootstrapChunks.push(\n                 scriptCrossOrigin,\n-                stringToChunk(escapeTextForBrowser(externalRuntimeScript))\n+                stringToChunk(escapeTextForBrowser(externalRuntimeScript)),\n+                attributeEnd\n               ),\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n             bootstrapChunks.push(endAsyncScript);\n       return onHeaders;\n     }\n@@ -1715,14 +1730,29 @@\n       return content;\n     }\n     function injectFormReplayingRuntime(resumableState, renderState) {\n-      (resumableState.instructions & 16) !== NothingSent ||\n-        renderState.externalRuntimeScript ||\n-        ((resumableState.instructions |= 16),\n-        renderState.bootstrapChunks.unshift(\n-          renderState.startInlineScript,\n-          formReplayingRuntimeScript,\n-          endInlineScript\n-        ));\n+      if (\n+        (resumableState.instructions & 16) === NothingSent &&\n+        !renderState.externalRuntimeScript\n+      ) {\n+        resumableState.instructions |= 16;\n+        var preamble = renderState.preamble,\n+          bootstrapChunks = renderState.bootstrapChunks;\n+        (preamble.htmlChunks || preamble.headChunks) &&\n+        0 === bootstrapChunks.length\n+          ? (bootstrapChunks.push(renderState.startInlineScript),\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+            bootstrapChunks.push(\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              endInlineScript\n+            ))\n+          : bootstrapChunks.unshift(\n+              renderState.startInlineScript,\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              endInlineScript\n+            );\n+      }\n     }\n     function pushLinkImpl(target, props) {\n       target.push(startChunkForTag(\"link\"));\n@@ -3472,6 +3502,17 @@\n       styleQueue.sheets.forEach(preloadLateStyle, this);\n       styleQueue.sheets.clear();\n     }\n+    function pushCompletedShellIdAttribute(target, resumableState) {\n+      (resumableState.instructions & SentCompletedShellId) === NothingSent &&\n+        ((resumableState.instructions |= SentCompletedShellId),\n+        target.push(\n+          completedShellIdAttributeStart,\n+          stringToChunk(\n+            escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\")\n+          ),\n+          attributeEnd\n+        ));\n+    }\n     function writeStyleResourceDependenciesInJS(destination, hoistableState) {\n       writeChunk(destination, arrayFirstOpenBracket);\n       var nextArrayOpenBrackChunk = arrayFirstOpenBracket;\n@@ -4651,6 +4692,7 @@\n       this.fatalError = null;\n       this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n       this.completedPreambleSegments = this.completedRootSegment = null;\n+      this.byteSize = 0;\n       this.abortableTasks = abortSet;\n       this.pingedTasks = [];\n       this.clientRenderedBoundaries = [];\n@@ -5954,7 +5996,8 @@\n                     boundarySegment.lastPushedText &&\n                       boundarySegment.textEmbedded &&\n                       boundarySegment.chunks.push(textSeparator),\n-                    (boundarySegment.status = COMPLETED);\n+                    (boundarySegment.status = COMPLETED),\n+                    finishedSegment(request, parentBoundary, boundarySegment);\n                 } catch (thrownValue) {\n                   throw (\n                     ((boundarySegment.status = 12 === request.status ? 3 : 4),\n@@ -6000,11 +6043,13 @@\n                       contentRootSegment.textEmbedded &&\n                       contentRootSegment.chunks.push(textSeparator),\n                     (contentRootSegment.status = COMPLETED),\n+                    finishedSegment(request, newBoundary, contentRootSegment),\n                     queueCompletedSegment(newBoundary, contentRootSegment),\n                     0 === newBoundary.pendingTasks &&\n-                      newBoundary.status === PENDING)\n+                      newBoundary.status === PENDING &&\n+                      ((newBoundary.status = COMPLETED),\n+                      !(newBoundary.byteSize > request.progressiveChunkSize)))\n                   ) {\n-                    newBoundary.status = COMPLETED;\n                     0 === request.pendingRootTasks &&\n                       task.blockedPreamble &&\n                       preparePreamble(request);\n@@ -6212,6 +6257,7 @@\n           (task.blockedSegment = resumedSegment),\n           renderNode(request, task, node, childIndex),\n           (resumedSegment.status = COMPLETED),\n+          finishedSegment(request, blockedBoundary, resumedSegment),\n           null === blockedBoundary\n             ? (request.completedRootSegment = resumedSegment)\n             : (queueCompletedSegment(blockedBoundary, resumedSegment),\n@@ -7380,6 +7426,16 @@\n           queueCompletedSegment(boundary, childSegment);\n       } else boundary.completedSegments.push(segment);\n     }\n+    function finishedSegment(request, boundary, segment) {\n+      if (null !== byteLengthOfChunk) {\n+        segment = segment.chunks;\n+        for (var segmentByteSize = 0, i = 0; i < segment.length; i++)\n+          segmentByteSize += segment[i].byteLength;\n+        null === boundary\n+          ? (request.byteSize += segmentByteSize)\n+          : (boundary.byteSize += segmentByteSize);\n+      }\n+    }\n     function finishedTask(request, boundary, segment) {\n       if (null === boundary) {\n         if (null !== segment && segment.parentFlushed) {\n@@ -7403,11 +7459,12 @@\n                 boundary.parentFlushed &&\n                   request.completedBoundaries.push(boundary),\n                 boundary.status === COMPLETED &&\n-                  (boundary.fallbackAbortableTasks.forEach(\n-                    abortTaskSoft,\n-                    request\n-                  ),\n-                  boundary.fallbackAbortableTasks.clear(),\n+                  (boundary.byteSize > request.progressiveChunkSize ||\n+                    (boundary.fallbackAbortableTasks.forEach(\n+                      abortTaskSoft,\n+                      request\n+                    ),\n+                    boundary.fallbackAbortableTasks.clear()),\n                   0 === request.pendingRootTasks &&\n                     null === request.trackedPostpones &&\n                     null !== boundary.contentPreamble &&\n@@ -7532,6 +7589,11 @@\n                         segment$jscomp$0.chunks.push(textSeparator),\n                       task$jscomp$0.abortSet.delete(task$jscomp$0),\n                       (segment$jscomp$0.status = COMPLETED),\n+                      finishedSegment(\n+                        request,\n+                        task$jscomp$0.blockedBoundary,\n+                        segment$jscomp$0\n+                      ),\n                       finishedTask(\n                         request,\n                         task$jscomp$0.blockedBoundary,\n@@ -7960,6 +8022,7 @@\n         completedSegments.streamingFormat === ScriptStreamingFormat;\n       scriptFormat\n         ? (writeChunk(destination, request.startInlineScript),\n+          writeChunk(destination, endOfStartTag),\n           requiresStyleInsertion\n             ? (completedSegments.instructions &\n                 SentCompleteBoundaryFunction) ===\n@@ -8048,6 +8111,7 @@\n       request = request.renderState;\n       (segment = boundary.streamingFormat === ScriptStreamingFormat)\n         ? (writeChunk(destination, request.startInlineScript),\n+          writeChunk(destination, endOfStartTag),\n           (boundary.instructions & SentCompleteSegmentFunction) === NothingSent\n             ? ((boundary.instructions |= SentCompleteSegmentFunction),\n               writeChunk(destination, completeSegmentScript1Full))\n@@ -8077,14 +8141,14 @@\n             if (completedRootSegment.status === POSTPONED) return;\n             var completedPreambleSegments = request.completedPreambleSegments;\n             if (null === completedPreambleSegments) return;\n-            var renderState = request.renderState;\n+            var resumableState = request.resumableState,\n+              renderState = request.renderState;\n             if (\n               (0 !== request.allPendingTasks ||\n                 null !== request.trackedPostpones) &&\n               renderState.externalRuntimeScript\n             ) {\n               var _renderState$external = renderState.externalRuntimeScript,\n-                resumableState = request.resumableState,\n                 src = _renderState$external.src,\n                 chunks = _renderState$external.chunks;\n               resumableState.scriptResources.hasOwnProperty(src) ||\n@@ -8147,6 +8211,15 @@\n             renderState.scripts.clear();\n             renderState.bulkPreloads.forEach(flushResource, destination);\n             renderState.bulkPreloads.clear();\n+            if (htmlChunks || headChunks) {\n+              var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+              writeChunk(destination, blockingRenderChunkStart);\n+              writeChunk(\n+                destination,\n+                stringToChunk(escapeTextForBrowser(shellId))\n+              );\n+              writeChunk(destination, blockingRenderChunkEnd);\n+            }\n             var hoistableChunks = renderState.hoistableChunks;\n             for (\n               i$jscomp$0 = 0;\n@@ -8155,22 +8228,17 @@\n             )\n               writeChunk(destination, hoistableChunks[i$jscomp$0]);\n             for (\n-              renderState = hoistableChunks.length = 0;\n-              renderState < completedPreambleSegments.length;\n-              renderState++\n+              resumableState = hoistableChunks.length = 0;\n+              resumableState < completedPreambleSegments.length;\n+              resumableState++\n             ) {\n-              var segments = completedPreambleSegments[renderState];\n+              var segments = completedPreambleSegments[resumableState];\n               for (\n-                _renderState$external = 0;\n-                _renderState$external < segments.length;\n-                _renderState$external++\n+                renderState = 0;\n+                renderState < segments.length;\n+                renderState++\n               )\n-                flushSegment(\n-                  request,\n-                  destination,\n-                  segments[_renderState$external],\n-                  null\n-                );\n+                flushSegment(request, destination, segments[renderState], null);\n             }\n             var preamble$jscomp$0 = request.renderState.preamble,\n               headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n@@ -8186,11 +8254,27 @@\n                 writeChunk(destination, bodyChunks[completedPreambleSegments]);\n             flushSegment(request, destination, completedRootSegment, null);\n             request.completedRootSegment = null;\n-            writeBootstrap(destination, request.renderState);\n+            var resumableState$jscomp$0 = request.resumableState,\n+              renderState$jscomp$0 = request.renderState,\n+              preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+            if (\n+              (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+              (resumableState$jscomp$0.instructions & SentCompletedShellId) ===\n+                NothingSent\n+            ) {\n+              var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+              bootstrapChunks.push(startChunkForTag(\"template\"));\n+              pushCompletedShellIdAttribute(\n+                bootstrapChunks,\n+                resumableState$jscomp$0\n+              );\n+              bootstrapChunks.push(endOfStartTag, endChunkForTag(\"template\"));\n+            }\n+            writeBootstrap(destination, renderState$jscomp$0);\n           }\n-          var renderState$jscomp$0 = request.renderState;\n+          var renderState$jscomp$1 = request.renderState;\n           completedRootSegment = 0;\n-          var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+          var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < viewportChunks$jscomp$0.length;\n@@ -8201,21 +8285,21 @@\n               viewportChunks$jscomp$0[completedRootSegment]\n             );\n           viewportChunks$jscomp$0.length = 0;\n-          renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-          renderState$jscomp$0.preconnects.clear();\n-          renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.fontPreloads.clear();\n-          renderState$jscomp$0.highImagePreloads.forEach(\n+          renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+          renderState$jscomp$1.preconnects.clear();\n+          renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.fontPreloads.clear();\n+          renderState$jscomp$1.highImagePreloads.forEach(\n             flushResource,\n             destination\n           );\n-          renderState$jscomp$0.highImagePreloads.clear();\n-          renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-          renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-          renderState$jscomp$0.scripts.clear();\n-          renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.bulkPreloads.clear();\n-          var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+          renderState$jscomp$1.highImagePreloads.clear();\n+          renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+          renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+          renderState$jscomp$1.scripts.clear();\n+          renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.bulkPreloads.clear();\n+          var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -8229,40 +8313,41 @@\n           var clientRenderedBoundaries = request.clientRenderedBoundaries;\n           for (i = 0; i < clientRenderedBoundaries.length; i++) {\n             var boundary = clientRenderedBoundaries[i];\n-            renderState$jscomp$0 = destination;\n-            var resumableState$jscomp$0 = request.resumableState,\n-              renderState$jscomp$1 = request.renderState,\n+            renderState$jscomp$1 = destination;\n+            var resumableState$jscomp$1 = request.resumableState,\n+              renderState$jscomp$2 = request.renderState,\n               id = boundary.rootSegmentID,\n               errorDigest = boundary.errorDigest,\n               errorMessage = boundary.errorMessage,\n               errorStack = boundary.errorStack,\n               errorComponentStack = boundary.errorComponentStack,\n               scriptFormat =\n-                resumableState$jscomp$0.streamingFormat ===\n+                resumableState$jscomp$1.streamingFormat ===\n                 ScriptStreamingFormat;\n             scriptFormat\n               ? (writeChunk(\n-                  renderState$jscomp$0,\n-                  renderState$jscomp$1.startInlineScript\n+                  renderState$jscomp$1,\n+                  renderState$jscomp$2.startInlineScript\n                 ),\n-                (resumableState$jscomp$0.instructions &\n+                writeChunk(renderState$jscomp$1, endOfStartTag),\n+                (resumableState$jscomp$1.instructions &\n                   SentClientRenderFunction) ===\n                 NothingSent\n-                  ? ((resumableState$jscomp$0.instructions |=\n+                  ? ((resumableState$jscomp$1.instructions |=\n                       SentClientRenderFunction),\n-                    writeChunk(renderState$jscomp$0, clientRenderScript1Full))\n+                    writeChunk(renderState$jscomp$1, clientRenderScript1Full))\n                   : writeChunk(\n-                      renderState$jscomp$0,\n+                      renderState$jscomp$1,\n                       clientRenderScript1Partial\n                     ))\n-              : writeChunk(renderState$jscomp$0, clientRenderData1);\n+              : writeChunk(renderState$jscomp$1, clientRenderData1);\n             writeChunk(\n-              renderState$jscomp$0,\n-              renderState$jscomp$1.boundaryPrefix\n+              renderState$jscomp$1,\n+              renderState$jscomp$2.boundaryPrefix\n             );\n-            writeChunk(renderState$jscomp$0, stringToChunk(id.toString(16)));\n+            writeChunk(renderState$jscomp$1, stringToChunk(id.toString(16)));\n             scriptFormat &&\n-              writeChunk(renderState$jscomp$0, clientRenderScript1A);\n+              writeChunk(renderState$jscomp$1, clientRenderScript1A);\n             if (\n               errorDigest ||\n               errorMessage ||\n@@ -8271,74 +8356,74 @@\n             )\n               scriptFormat\n                 ? (writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     clientRenderErrorScriptArgInterstitial\n                   ),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     stringToChunk(\n                       escapeJSStringsForInstructionScripts(errorDigest || \"\")\n                     )\n                   ))\n-                : (writeChunk(renderState$jscomp$0, clientRenderData2),\n+                : (writeChunk(renderState$jscomp$1, clientRenderData2),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     stringToChunk(escapeTextForBrowser(errorDigest || \"\"))\n                   ));\n             if (errorMessage || errorStack || errorComponentStack)\n               scriptFormat\n                 ? (writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     clientRenderErrorScriptArgInterstitial\n                   ),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     stringToChunk(\n                       escapeJSStringsForInstructionScripts(errorMessage || \"\")\n                     )\n                   ))\n-                : (writeChunk(renderState$jscomp$0, clientRenderData3),\n+                : (writeChunk(renderState$jscomp$1, clientRenderData3),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     stringToChunk(escapeTextForBrowser(errorMessage || \"\"))\n                   ));\n             if (errorStack || errorComponentStack)\n               scriptFormat\n                 ? (writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     clientRenderErrorScriptArgInterstitial\n                   ),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     stringToChunk(\n                       escapeJSStringsForInstructionScripts(errorStack || \"\")\n                     )\n                   ))\n-                : (writeChunk(renderState$jscomp$0, clientRenderData4),\n+                : (writeChunk(renderState$jscomp$1, clientRenderData4),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     stringToChunk(escapeTextForBrowser(errorStack || \"\"))\n                   ));\n             errorComponentStack &&\n               (scriptFormat\n                 ? (writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     clientRenderErrorScriptArgInterstitial\n                   ),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     stringToChunk(\n                       escapeJSStringsForInstructionScripts(errorComponentStack)\n                     )\n                   ))\n-                : (writeChunk(renderState$jscomp$0, clientRenderData5),\n+                : (writeChunk(renderState$jscomp$1, clientRenderData5),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     stringToChunk(escapeTextForBrowser(errorComponentStack))\n                   )));\n             var JSCompiler_inline_result = scriptFormat\n-              ? writeChunkAndReturn(renderState$jscomp$0, clientRenderScriptEnd)\n-              : writeChunkAndReturn(renderState$jscomp$0, clientRenderDataEnd);\n+              ? writeChunkAndReturn(renderState$jscomp$1, clientRenderScriptEnd)\n+              : writeChunkAndReturn(renderState$jscomp$1, clientRenderDataEnd);\n             if (!JSCompiler_inline_result) {\n               request.destination = null;\n               i++;\n@@ -8548,6 +8633,7 @@\n         resumableState.scriptResources = {};\n         resumableState.moduleUnknownResources = {};\n         resumableState.moduleScriptResources = {};\n+        resumableState.instructions = NothingSent;\n       }\n       return {\n         nextSegmentId: request.nextSegmentId,\n@@ -8560,11 +8646,11 @@\n     }\n     function ensureCorrectIsomorphicReactVersion() {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-experimental-197d6a04-20250424\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-experimental-5dc00d6b-20250428\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-experimental-197d6a04-20250424\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-experimental-5dc00d6b-20250428\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     }\n     var React = require(\"next/dist/compiled/react-experimental\"),\n@@ -9656,18 +9742,19 @@\n       SentCompleteBoundaryFunction = 2,\n       SentClientRenderFunction = 4,\n       SentStyleInsertionFunction = 8,\n+      SentCompletedShellId = 32,\n       EXISTS = null,\n       PRELOAD_NO_CREDS = [];\n     Object.freeze(PRELOAD_NO_CREDS);\n     var dataElementQuotedEnd = stringToPrecomputedChunk('\"></template>'),\n-      startInlineScript = stringToPrecomputedChunk(\"<script>\"),\n+      startInlineScript = stringToPrecomputedChunk(\"<script\"),\n       endInlineScript = stringToPrecomputedChunk(\"\\x3c/script>\"),\n       startScriptSrc = stringToPrecomputedChunk('<script src=\"'),\n       startModuleSrc = stringToPrecomputedChunk('<script type=\"module\" src=\"'),\n-      scriptNonce = stringToPrecomputedChunk('\" nonce=\"'),\n-      scriptIntegirty = stringToPrecomputedChunk('\" integrity=\"'),\n-      scriptCrossOrigin = stringToPrecomputedChunk('\" crossorigin=\"'),\n-      endAsyncScript = stringToPrecomputedChunk('\" async=\"\">\\x3c/script>'),\n+      scriptNonce = stringToPrecomputedChunk(' nonce=\"'),\n+      scriptIntegirty = stringToPrecomputedChunk(' integrity=\"'),\n+      scriptCrossOrigin = stringToPrecomputedChunk(' crossorigin=\"'),\n+      endAsyncScript = stringToPrecomputedChunk(' async=\"\">\\x3c/script>'),\n       scriptRegex = /(<\\/|<)(s)(cript)/gi,\n       importMapScriptStart = stringToPrecomputedChunk(\n         '<script type=\"importmap\">'\n@@ -9856,6 +9943,13 @@\n       spaceSeparator = stringToPrecomputedChunk(\" \"),\n       styleTagResourceOpen3 = stringToPrecomputedChunk('\">'),\n       styleTagResourceClose = stringToPrecomputedChunk(\"</style>\"),\n+      blockingRenderChunkStart = stringToPrecomputedChunk(\n+        '<link rel=\"expect\" href=\"#'\n+      ),\n+      blockingRenderChunkEnd = stringToPrecomputedChunk(\n+        '\" blocking=\"render\"/>'\n+      ),\n+      completedShellIdAttributeStart = stringToPrecomputedChunk(' id=\"'),\n       arrayFirstOpenBracket = stringToPrecomputedChunk(\"[\"),\n       arraySubsequentOpenBracket = stringToPrecomputedChunk(\",[\"),\n       arrayInterstitial = stringToPrecomputedChunk(\",\"),\n@@ -10367,5 +10461,5 @@\n         startWork(request);\n       });\n     };\n-    exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+    exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";\n   })();"
        },
        {
            "sha": "2dab9566fdb363ed4bc262598699f6fc38892faf",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server.browser.production.js",
            "status": "modified",
            "additions": 187,
            "deletions": 102,
            "changes": 289,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.browser.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.browser.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.browser.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -193,6 +193,9 @@ function stringToChunk(content) {\n function stringToPrecomputedChunk(content) {\n   return textEncoder.encode(content);\n }\n+function byteLengthOfChunk(chunk) {\n+  return chunk.byteLength;\n+}\n function closeWithError(destination, error) {\n   \"function\" === typeof destination.error\n     ? destination.error(error)\n@@ -384,14 +387,14 @@ ReactDOMSharedInternals.d = {\n };\n var PRELOAD_NO_CREDS = [],\n   dataElementQuotedEnd = stringToPrecomputedChunk('\"></template>'),\n-  startInlineScript = stringToPrecomputedChunk(\"<script>\"),\n+  startInlineScript = stringToPrecomputedChunk(\"<script\"),\n   endInlineScript = stringToPrecomputedChunk(\"\\x3c/script>\"),\n   startScriptSrc = stringToPrecomputedChunk('<script src=\"'),\n   startModuleSrc = stringToPrecomputedChunk('<script type=\"module\" src=\"'),\n-  scriptNonce = stringToPrecomputedChunk('\" nonce=\"'),\n-  scriptIntegirty = stringToPrecomputedChunk('\" integrity=\"'),\n-  scriptCrossOrigin = stringToPrecomputedChunk('\" crossorigin=\"'),\n-  endAsyncScript = stringToPrecomputedChunk('\" async=\"\">\\x3c/script>'),\n+  scriptNonce = stringToPrecomputedChunk(' nonce=\"'),\n+  scriptIntegirty = stringToPrecomputedChunk(' integrity=\"'),\n+  scriptCrossOrigin = stringToPrecomputedChunk(' crossorigin=\"'),\n+  endAsyncScript = stringToPrecomputedChunk(' async=\"\">\\x3c/script>'),\n   scriptRegex = /(<\\/|<)(s)(cript)/gi;\n function scriptReplacer(match, prefix, s, suffix) {\n   return \"\" + prefix + (\"s\" === s ? \"\\\\u0073\" : \"\\\\u0053\") + suffix;\n@@ -412,7 +415,7 @@ function createRenderState(\n       void 0 === nonce\n         ? startInlineScript\n         : stringToPrecomputedChunk(\n-            '<script nonce=\"' + escapeTextForBrowser(nonce) + '\">'\n+            '<script nonce=\"' + escapeTextForBrowser(nonce) + '\"'\n           ),\n     idPrefix = resumableState.idPrefix,\n     bootstrapChunks = [],\n@@ -421,13 +424,15 @@ function createRenderState(\n     bootstrapScripts = resumableState.bootstrapScripts,\n     bootstrapModules = resumableState.bootstrapModules;\n   void 0 !== bootstrapScriptContent &&\n+    (bootstrapChunks.push(inlineScriptWithNonce),\n+    pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n     bootstrapChunks.push(\n-      inlineScriptWithNonce,\n+      endOfStartTag,\n       stringToChunk(\n         (\"\" + bootstrapScriptContent).replace(scriptRegex, scriptReplacer)\n       ),\n       endInlineScript\n-    );\n+    ));\n   void 0 !== externalRuntimeConfig &&\n     (\"string\" === typeof externalRuntimeConfig\n       ? ((externalRuntimeScript = { src: externalRuntimeConfig, chunks: [] }),\n@@ -541,23 +546,28 @@ function createRenderState(\n         onHeaders.bootstrapScripts.add(externalRuntimeConfig),\n         bootstrapChunks.push(\n           startScriptSrc,\n-          stringToChunk(escapeTextForBrowser(idPrefix))\n+          stringToChunk(escapeTextForBrowser(idPrefix)),\n+          attributeEnd\n         ),\n         nonce &&\n           bootstrapChunks.push(\n             scriptNonce,\n-            stringToChunk(escapeTextForBrowser(nonce))\n+            stringToChunk(escapeTextForBrowser(nonce)),\n+            attributeEnd\n           ),\n         \"string\" === typeof importMap &&\n           bootstrapChunks.push(\n             scriptIntegirty,\n-            stringToChunk(escapeTextForBrowser(importMap))\n+            stringToChunk(escapeTextForBrowser(importMap)),\n+            attributeEnd\n           ),\n         \"string\" === typeof externalRuntimeScript &&\n           bootstrapChunks.push(\n             scriptCrossOrigin,\n-            stringToChunk(escapeTextForBrowser(externalRuntimeScript))\n+            stringToChunk(escapeTextForBrowser(externalRuntimeScript)),\n+            attributeEnd\n           ),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n         bootstrapChunks.push(endAsyncScript);\n   if (void 0 !== bootstrapModules)\n     for (\n@@ -595,23 +605,28 @@ function createRenderState(\n         onHeaders.bootstrapScripts.add(maxHeadersLength),\n         bootstrapChunks.push(\n           startModuleSrc,\n-          stringToChunk(escapeTextForBrowser(inlineScriptWithNonce))\n+          stringToChunk(escapeTextForBrowser(inlineScriptWithNonce)),\n+          attributeEnd\n         ),\n         nonce &&\n           bootstrapChunks.push(\n             scriptNonce,\n-            stringToChunk(escapeTextForBrowser(nonce))\n+            stringToChunk(escapeTextForBrowser(nonce)),\n+            attributeEnd\n           ),\n         \"string\" === typeof externalRuntimeScript &&\n           bootstrapChunks.push(\n             scriptIntegirty,\n-            stringToChunk(escapeTextForBrowser(externalRuntimeScript))\n+            stringToChunk(escapeTextForBrowser(externalRuntimeScript)),\n+            attributeEnd\n           ),\n         \"string\" === typeof idPrefix &&\n           bootstrapChunks.push(\n             scriptCrossOrigin,\n-            stringToChunk(escapeTextForBrowser(idPrefix))\n+            stringToChunk(escapeTextForBrowser(idPrefix)),\n+            attributeEnd\n           ),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n         bootstrapChunks.push(endAsyncScript);\n   return onHeaders;\n }\n@@ -1139,14 +1154,28 @@ var selectedMarkerAttribute = stringToPrecomputedChunk(' selected=\"\"'),\n     'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});'\n   );\n function injectFormReplayingRuntime(resumableState, renderState) {\n-  0 !== (resumableState.instructions & 16) ||\n-    renderState.externalRuntimeScript ||\n-    ((resumableState.instructions |= 16),\n-    renderState.bootstrapChunks.unshift(\n-      renderState.startInlineScript,\n-      formReplayingRuntimeScript,\n-      endInlineScript\n-    ));\n+  if (\n+    0 === (resumableState.instructions & 16) &&\n+    !renderState.externalRuntimeScript\n+  ) {\n+    resumableState.instructions |= 16;\n+    var preamble = renderState.preamble,\n+      bootstrapChunks = renderState.bootstrapChunks;\n+    (preamble.htmlChunks || preamble.headChunks) && 0 === bootstrapChunks.length\n+      ? (bootstrapChunks.push(renderState.startInlineScript),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(\n+          endOfStartTag,\n+          formReplayingRuntimeScript,\n+          endInlineScript\n+        ))\n+      : bootstrapChunks.unshift(\n+          renderState.startInlineScript,\n+          endOfStartTag,\n+          formReplayingRuntimeScript,\n+          endInlineScript\n+        );\n+  }\n }\n var formStateMarkerIsMatching = stringToPrecomputedChunk(\"\\x3c!--F!--\\x3e\"),\n   formStateMarkerIsNotMatching = stringToPrecomputedChunk(\"\\x3c!--F--\\x3e\");\n@@ -2716,6 +2745,22 @@ function preloadLateStyles(styleQueue) {\n   styleQueue.sheets.forEach(preloadLateStyle, this);\n   styleQueue.sheets.clear();\n }\n+var blockingRenderChunkStart = stringToPrecomputedChunk(\n+    '<link rel=\"expect\" href=\"#'\n+  ),\n+  blockingRenderChunkEnd = stringToPrecomputedChunk('\" blocking=\"render\"/>'),\n+  completedShellIdAttributeStart = stringToPrecomputedChunk(' id=\"');\n+function pushCompletedShellIdAttribute(target, resumableState) {\n+  0 === (resumableState.instructions & 32) &&\n+    ((resumableState.instructions |= 32),\n+    target.push(\n+      completedShellIdAttributeStart,\n+      stringToChunk(\n+        escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\")\n+      ),\n+      attributeEnd\n+    ));\n+}\n var arrayFirstOpenBracket = stringToPrecomputedChunk(\"[\"),\n   arraySubsequentOpenBracket = stringToPrecomputedChunk(\",[\"),\n   arrayInterstitial = stringToPrecomputedChunk(\",\"),\n@@ -4123,6 +4168,7 @@ function RequestInstance(\n   this.fatalError = null;\n   this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n   this.completedPreambleSegments = this.completedRootSegment = null;\n+  this.byteSize = 0;\n   this.abortableTasks = abortSet;\n   this.pingedTasks = [];\n   this.clientRenderedBoundaries = [];\n@@ -4863,11 +4909,11 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           }\n         } else {\n           type = task.keyPath;\n-          var parentBoundary = task.blockedBoundary;\n-          ref = task.blockedPreamble;\n+          ref = task.blockedBoundary;\n+          propName$34 = task.blockedPreamble;\n           var parentHoistableState = task.hoistableState;\n-          propName$34 = task.blockedSegment;\n-          propName = props.fallback;\n+          propName = task.blockedSegment;\n+          var fallback = props.fallback;\n           props = props.children;\n           var fallbackAbortSet = new Set();\n           var newBoundary =\n@@ -4883,14 +4929,14 @@ function renderElement(request, task, keyPath, type, props, ref) {\n             (newBoundary.trackedContentKeyPath = keyPath);\n           var boundarySegment = createPendingSegment(\n             request,\n-            propName$34.chunks.length,\n+            propName.chunks.length,\n             newBoundary,\n             task.formatContext,\n             !1,\n             !1\n           );\n-          propName$34.children.push(boundarySegment);\n-          propName$34.lastPushedText = !1;\n+          propName.children.push(boundarySegment);\n+          propName.lastPushedText = !1;\n           var contentRootSegment = createPendingSegment(\n             request,\n             0,\n@@ -4910,19 +4956,20 @@ function renderElement(request, task, keyPath, type, props, ref) {\n             task.keyPath = newProps;\n             boundarySegment.status = 6;\n             try {\n-              renderNode(request, task, propName, -1),\n+              renderNode(request, task, fallback, -1),\n                 boundarySegment.lastPushedText &&\n                   boundarySegment.textEmbedded &&\n                   boundarySegment.chunks.push(textSeparator),\n-                (boundarySegment.status = 1);\n+                (boundarySegment.status = 1),\n+                finishedSegment(request, ref, boundarySegment);\n             } catch (thrownValue) {\n               throw (\n                 ((boundarySegment.status = 12 === request.status ? 3 : 4),\n                 thrownValue)\n               );\n             } finally {\n-              (task.blockedSegment = propName$34),\n-                (task.blockedPreamble = ref),\n+              (task.blockedSegment = propName),\n+                (task.blockedPreamble = propName$34),\n                 (task.keyPath = type);\n             }\n             task = createRenderTask(\n@@ -4958,10 +5005,13 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                   contentRootSegment.textEmbedded &&\n                   contentRootSegment.chunks.push(textSeparator),\n                 (contentRootSegment.status = 1),\n+                finishedSegment(request, newBoundary, contentRootSegment),\n                 queueCompletedSegment(newBoundary, contentRootSegment),\n-                0 === newBoundary.pendingTasks && 0 === newBoundary.status)\n+                0 === newBoundary.pendingTasks &&\n+                  0 === newBoundary.status &&\n+                  ((newBoundary.status = 1),\n+                  !(newBoundary.byteSize > request.progressiveChunkSize)))\n               ) {\n-                newBoundary.status = 1;\n                 0 === request.pendingRootTasks &&\n                   task.blockedPreamble &&\n                   preparePreamble(request);\n@@ -4988,18 +5038,18 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                 (newBoundary.errorDigest = initialState),\n                 untrackBoundary(request, newBoundary);\n             } finally {\n-              (task.blockedBoundary = parentBoundary),\n-                (task.blockedPreamble = ref),\n+              (task.blockedBoundary = ref),\n+                (task.blockedPreamble = propName$34),\n                 (task.hoistableState = parentHoistableState),\n-                (task.blockedSegment = propName$34),\n+                (task.blockedSegment = propName),\n                 (task.keyPath = type);\n             }\n             task = createRenderTask(\n               request,\n               null,\n-              propName,\n+              fallback,\n               -1,\n-              parentBoundary,\n+              ref,\n               boundarySegment,\n               newBoundary.fallbackPreamble,\n               newBoundary.fallbackState,\n@@ -5021,9 +5071,8 @@ function renderElement(request, task, keyPath, type, props, ref) {\n       switch (type.$$typeof) {\n         case REACT_FORWARD_REF_TYPE:\n           if (\"ref\" in props)\n-            for (newBoundary in ((newProps = {}), props))\n-              \"ref\" !== newBoundary &&\n-                (newProps[newBoundary] = props[newBoundary]);\n+            for (fallback in ((newProps = {}), props))\n+              \"ref\" !== fallback && (newProps[fallback] = props[fallback]);\n           else newProps = props;\n           type = renderWithHooks(\n             request,\n@@ -5109,6 +5158,7 @@ function resumeNode(request, task, segmentId, node, childIndex) {\n       (task.blockedSegment = resumedSegment),\n       renderNode(request, task, node, childIndex),\n       (resumedSegment.status = 1),\n+      finishedSegment(request, blockedBoundary, resumedSegment),\n       null === blockedBoundary\n         ? (request.completedRootSegment = resumedSegment)\n         : (queueCompletedSegment(blockedBoundary, resumedSegment),\n@@ -6023,6 +6073,16 @@ function queueCompletedSegment(boundary, segment) {\n     1 === childSegment.status && queueCompletedSegment(boundary, childSegment);\n   } else boundary.completedSegments.push(segment);\n }\n+function finishedSegment(request, boundary, segment) {\n+  if (null !== byteLengthOfChunk) {\n+    segment = segment.chunks;\n+    for (var segmentByteSize = 0, i = 0; i < segment.length; i++)\n+      segmentByteSize += segment[i].byteLength;\n+    null === boundary\n+      ? (request.byteSize += segmentByteSize)\n+      : (boundary.byteSize += segmentByteSize);\n+  }\n+}\n function finishedTask(request, boundary, segment) {\n   if (null === boundary) {\n     if (null !== segment && segment.parentFlushed) {\n@@ -6044,8 +6104,12 @@ function finishedTask(request, boundary, segment) {\n             boundary.parentFlushed &&\n               request.completedBoundaries.push(boundary),\n             1 === boundary.status &&\n-              (boundary.fallbackAbortableTasks.forEach(abortTaskSoft, request),\n-              boundary.fallbackAbortableTasks.clear(),\n+              (boundary.byteSize > request.progressiveChunkSize ||\n+                (boundary.fallbackAbortableTasks.forEach(\n+                  abortTaskSoft,\n+                  request\n+                ),\n+                boundary.fallbackAbortableTasks.clear()),\n               0 === request.pendingRootTasks &&\n                 null === request.trackedPostpones &&\n                 null !== boundary.contentPreamble &&\n@@ -6154,6 +6218,11 @@ function performWork(request$jscomp$1) {\n                     segment$jscomp$0.chunks.push(textSeparator),\n                   task.abortSet.delete(task),\n                   (segment$jscomp$0.status = 1),\n+                  finishedSegment(\n+                    request,\n+                    task.blockedBoundary,\n+                    segment$jscomp$0\n+                  ),\n                   finishedTask(request, task.blockedBoundary, segment$jscomp$0);\n               } catch (thrownValue) {\n                 resetHooksState();\n@@ -6475,6 +6544,7 @@ function flushCompletedBoundary(request, destination, boundary) {\n   var scriptFormat = 0 === completedSegments.streamingFormat;\n   scriptFormat\n     ? (writeChunk(destination, request.startInlineScript),\n+      writeChunk(destination, endOfStartTag),\n       requiresStyleInsertion\n         ? 0 === (completedSegments.instructions & 2)\n           ? ((completedSegments.instructions |= 10),\n@@ -6534,6 +6604,7 @@ function flushPartiallyCompletedSegment(\n   request = request.renderState;\n   (segment = 0 === boundary.streamingFormat)\n     ? (writeChunk(destination, request.startInlineScript),\n+      writeChunk(destination, endOfStartTag),\n       0 === (boundary.instructions & 1)\n         ? ((boundary.instructions |= 1),\n           writeChunk(destination, completeSegmentScript1Full))\n@@ -6563,14 +6634,14 @@ function flushCompletedQueues(request, destination) {\n         if (5 === completedRootSegment.status) return;\n         var completedPreambleSegments = request.completedPreambleSegments;\n         if (null === completedPreambleSegments) return;\n-        var renderState = request.renderState;\n+        var resumableState = request.resumableState,\n+          renderState = request.renderState;\n         if (\n           (0 !== request.allPendingTasks ||\n             null !== request.trackedPostpones) &&\n           renderState.externalRuntimeScript\n         ) {\n           var _renderState$external = renderState.externalRuntimeScript,\n-            resumableState = request.resumableState,\n             src = _renderState$external.src,\n             chunks = _renderState$external.chunks;\n           resumableState.scriptResources.hasOwnProperty(src) ||\n@@ -6617,26 +6688,23 @@ function flushCompletedQueues(request, destination) {\n         renderState.scripts.clear();\n         renderState.bulkPreloads.forEach(flushResource, destination);\n         renderState.bulkPreloads.clear();\n+        if (htmlChunks || headChunks) {\n+          var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+          writeChunk(destination, blockingRenderChunkStart);\n+          writeChunk(destination, stringToChunk(escapeTextForBrowser(shellId)));\n+          writeChunk(destination, blockingRenderChunkEnd);\n+        }\n         var hoistableChunks = renderState.hoistableChunks;\n         for (i$jscomp$0 = 0; i$jscomp$0 < hoistableChunks.length; i$jscomp$0++)\n           writeChunk(destination, hoistableChunks[i$jscomp$0]);\n         for (\n-          renderState = hoistableChunks.length = 0;\n-          renderState < completedPreambleSegments.length;\n-          renderState++\n+          resumableState = hoistableChunks.length = 0;\n+          resumableState < completedPreambleSegments.length;\n+          resumableState++\n         ) {\n-          var segments = completedPreambleSegments[renderState];\n-          for (\n-            _renderState$external = 0;\n-            _renderState$external < segments.length;\n-            _renderState$external++\n-          )\n-            flushSegment(\n-              request,\n-              destination,\n-              segments[_renderState$external],\n-              null\n-            );\n+          var segments = completedPreambleSegments[resumableState];\n+          for (renderState = 0; renderState < segments.length; renderState++)\n+            flushSegment(request, destination, segments[renderState], null);\n         }\n         var preamble$jscomp$0 = request.renderState.preamble,\n           headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n@@ -6652,33 +6720,48 @@ function flushCompletedQueues(request, destination) {\n             writeChunk(destination, bodyChunks[completedPreambleSegments]);\n         flushSegment(request, destination, completedRootSegment, null);\n         request.completedRootSegment = null;\n-        writeBootstrap(destination, request.renderState);\n+        var resumableState$jscomp$0 = request.resumableState,\n+          renderState$jscomp$0 = request.renderState,\n+          preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+        if (\n+          (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+          0 === (resumableState$jscomp$0.instructions & 32)\n+        ) {\n+          var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+          bootstrapChunks.push(startChunkForTag(\"template\"));\n+          pushCompletedShellIdAttribute(\n+            bootstrapChunks,\n+            resumableState$jscomp$0\n+          );\n+          bootstrapChunks.push(endOfStartTag, endChunkForTag(\"template\"));\n+        }\n+        writeBootstrap(destination, renderState$jscomp$0);\n       }\n-      var renderState$jscomp$0 = request.renderState;\n+      var renderState$jscomp$1 = request.renderState;\n       completedRootSegment = 0;\n-      var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+      var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < viewportChunks$jscomp$0.length;\n         completedRootSegment++\n       )\n         writeChunk(destination, viewportChunks$jscomp$0[completedRootSegment]);\n       viewportChunks$jscomp$0.length = 0;\n-      renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-      renderState$jscomp$0.preconnects.clear();\n-      renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.fontPreloads.clear();\n-      renderState$jscomp$0.highImagePreloads.forEach(\n+      renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+      renderState$jscomp$1.preconnects.clear();\n+      renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.fontPreloads.clear();\n+      renderState$jscomp$1.highImagePreloads.forEach(\n         flushResource,\n         destination\n       );\n-      renderState$jscomp$0.highImagePreloads.clear();\n-      renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-      renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-      renderState$jscomp$0.scripts.clear();\n-      renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.bulkPreloads.clear();\n-      var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+      renderState$jscomp$1.highImagePreloads.clear();\n+      renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+      renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+      renderState$jscomp$1.scripts.clear();\n+      renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.bulkPreloads.clear();\n+      var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -6689,45 +6772,46 @@ function flushCompletedQueues(request, destination) {\n       var clientRenderedBoundaries = request.clientRenderedBoundaries;\n       for (i = 0; i < clientRenderedBoundaries.length; i++) {\n         var boundary = clientRenderedBoundaries[i];\n-        renderState$jscomp$0 = destination;\n-        var resumableState$jscomp$0 = request.resumableState,\n-          renderState$jscomp$1 = request.renderState,\n+        renderState$jscomp$1 = destination;\n+        var resumableState$jscomp$1 = request.resumableState,\n+          renderState$jscomp$2 = request.renderState,\n           id = boundary.rootSegmentID,\n           errorDigest = boundary.errorDigest,\n-          scriptFormat = 0 === resumableState$jscomp$0.streamingFormat;\n+          scriptFormat = 0 === resumableState$jscomp$1.streamingFormat;\n         scriptFormat\n           ? (writeChunk(\n-              renderState$jscomp$0,\n-              renderState$jscomp$1.startInlineScript\n+              renderState$jscomp$1,\n+              renderState$jscomp$2.startInlineScript\n             ),\n-            0 === (resumableState$jscomp$0.instructions & 4)\n-              ? ((resumableState$jscomp$0.instructions |= 4),\n-                writeChunk(renderState$jscomp$0, clientRenderScript1Full))\n-              : writeChunk(renderState$jscomp$0, clientRenderScript1Partial))\n-          : writeChunk(renderState$jscomp$0, clientRenderData1);\n-        writeChunk(renderState$jscomp$0, renderState$jscomp$1.boundaryPrefix);\n-        writeChunk(renderState$jscomp$0, stringToChunk(id.toString(16)));\n-        scriptFormat && writeChunk(renderState$jscomp$0, clientRenderScript1A);\n+            writeChunk(renderState$jscomp$1, endOfStartTag),\n+            0 === (resumableState$jscomp$1.instructions & 4)\n+              ? ((resumableState$jscomp$1.instructions |= 4),\n+                writeChunk(renderState$jscomp$1, clientRenderScript1Full))\n+              : writeChunk(renderState$jscomp$1, clientRenderScript1Partial))\n+          : writeChunk(renderState$jscomp$1, clientRenderData1);\n+        writeChunk(renderState$jscomp$1, renderState$jscomp$2.boundaryPrefix);\n+        writeChunk(renderState$jscomp$1, stringToChunk(id.toString(16)));\n+        scriptFormat && writeChunk(renderState$jscomp$1, clientRenderScript1A);\n         errorDigest &&\n           (scriptFormat\n             ? (writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 clientRenderErrorScriptArgInterstitial\n               ),\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 stringToChunk(\n                   escapeJSStringsForInstructionScripts(errorDigest || \"\")\n                 )\n               ))\n-            : (writeChunk(renderState$jscomp$0, clientRenderData2),\n+            : (writeChunk(renderState$jscomp$1, clientRenderData2),\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 stringToChunk(escapeTextForBrowser(errorDigest || \"\"))\n               )));\n         var JSCompiler_inline_result = scriptFormat\n-          ? writeChunkAndReturn(renderState$jscomp$0, clientRenderScriptEnd)\n-          : writeChunkAndReturn(renderState$jscomp$0, dataElementQuotedEnd);\n+          ? writeChunkAndReturn(renderState$jscomp$1, clientRenderScriptEnd)\n+          : writeChunkAndReturn(renderState$jscomp$1, dataElementQuotedEnd);\n         if (!JSCompiler_inline_result) {\n           request.destination = null;\n           i++;\n@@ -6922,6 +7006,7 @@ function getPostponedState(request) {\n     resumableState.scriptResources = {};\n     resumableState.moduleUnknownResources = {};\n     resumableState.moduleScriptResources = {};\n+    resumableState.instructions = 0;\n   }\n   return {\n     nextSegmentId: request.nextSegmentId,\n@@ -6934,12 +7019,12 @@ function getPostponedState(request) {\n }\n function ensureCorrectIsomorphicReactVersion() {\n   var isomorphicReactPackageVersion = React.version;\n-  if (\"19.2.0-experimental-197d6a04-20250424\" !== isomorphicReactPackageVersion)\n+  if (\"19.2.0-experimental-5dc00d6b-20250428\" !== isomorphicReactPackageVersion)\n     throw Error(\n       formatProdErrorMessage(\n         527,\n         isomorphicReactPackageVersion,\n-        \"19.2.0-experimental-197d6a04-20250424\"\n+        \"19.2.0-experimental-5dc00d6b-20250428\"\n       )\n     );\n }\n@@ -7194,4 +7279,4 @@ exports.resumeAndPrerender = function (children, postponedState, options) {\n     startWork(request);\n   });\n };\n-exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";"
        },
        {
            "sha": "7596eaee80f9f032e98ccf6866d88ab55dbdd348",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server.bun.production.js",
            "status": "modified",
            "additions": 187,
            "deletions": 107,
            "changes": 294,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.bun.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.bun.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.bun.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -40,6 +40,9 @@ function flushBuffered(destination) {\n function writeChunk(destination, chunk) {\n   0 !== chunk.length && destination.write(chunk);\n }\n+function byteLengthOfChunk(chunk) {\n+  return Buffer.byteLength(chunk, \"utf8\");\n+}\n function closeWithError(destination, error) {\n   \"function\" === typeof destination.error\n     ? destination.error(error)\n@@ -245,20 +248,22 @@ function createRenderState(\n ) {\n   var inlineScriptWithNonce =\n       void 0 === nonce\n-        ? \"<script>\"\n-        : '<script nonce=\"' + escapeTextForBrowser(nonce) + '\">',\n+        ? \"<script\"\n+        : '<script nonce=\"' + escapeTextForBrowser(nonce) + '\"',\n     idPrefix = resumableState.idPrefix,\n     bootstrapChunks = [],\n     externalRuntimeScript = null,\n     bootstrapScriptContent = resumableState.bootstrapScriptContent,\n     bootstrapScripts = resumableState.bootstrapScripts,\n     bootstrapModules = resumableState.bootstrapModules;\n   void 0 !== bootstrapScriptContent &&\n+    (bootstrapChunks.push(inlineScriptWithNonce),\n+    pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n     bootstrapChunks.push(\n-      inlineScriptWithNonce,\n+      \">\",\n       (\"\" + bootstrapScriptContent).replace(scriptRegex, scriptReplacer),\n       \"\\x3c/script>\"\n-    );\n+    ));\n   void 0 !== externalRuntimeConfig &&\n     (\"string\" === typeof externalRuntimeConfig\n       ? ((externalRuntimeScript = { src: externalRuntimeConfig, chunks: [] }),\n@@ -368,19 +373,27 @@ function createRenderState(\n         (externalRuntimeConfig = []),\n         pushLinkImpl(externalRuntimeConfig, maxHeadersLength),\n         onHeaders.bootstrapScripts.add(externalRuntimeConfig),\n-        bootstrapChunks.push('<script src=\"', escapeTextForBrowser(idPrefix)),\n-        nonce && bootstrapChunks.push('\" nonce=\"', escapeTextForBrowser(nonce)),\n+        bootstrapChunks.push(\n+          '<script src=\"',\n+          escapeTextForBrowser(idPrefix),\n+          '\"'\n+        ),\n+        nonce &&\n+          bootstrapChunks.push(' nonce=\"', escapeTextForBrowser(nonce), '\"'),\n         \"string\" === typeof importMap &&\n           bootstrapChunks.push(\n-            '\" integrity=\"',\n-            escapeTextForBrowser(importMap)\n+            ' integrity=\"',\n+            escapeTextForBrowser(importMap),\n+            '\"'\n           ),\n         \"string\" === typeof externalRuntimeScript &&\n           bootstrapChunks.push(\n-            '\" crossorigin=\"',\n-            escapeTextForBrowser(externalRuntimeScript)\n+            ' crossorigin=\"',\n+            escapeTextForBrowser(externalRuntimeScript),\n+            '\"'\n           ),\n-        bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(' async=\"\">\\x3c/script>');\n   if (void 0 !== bootstrapModules)\n     for (\n       bootstrapScripts = 0;\n@@ -417,20 +430,25 @@ function createRenderState(\n         onHeaders.bootstrapScripts.add(maxHeadersLength),\n         bootstrapChunks.push(\n           '<script type=\"module\" src=\"',\n-          escapeTextForBrowser(inlineScriptWithNonce)\n+          escapeTextForBrowser(inlineScriptWithNonce),\n+          '\"'\n         ),\n-        nonce && bootstrapChunks.push('\" nonce=\"', escapeTextForBrowser(nonce)),\n+        nonce &&\n+          bootstrapChunks.push(' nonce=\"', escapeTextForBrowser(nonce), '\"'),\n         \"string\" === typeof externalRuntimeScript &&\n           bootstrapChunks.push(\n-            '\" integrity=\"',\n-            escapeTextForBrowser(externalRuntimeScript)\n+            ' integrity=\"',\n+            escapeTextForBrowser(externalRuntimeScript),\n+            '\"'\n           ),\n         \"string\" === typeof idPrefix &&\n           bootstrapChunks.push(\n-            '\" crossorigin=\"',\n-            escapeTextForBrowser(idPrefix)\n+            ' crossorigin=\"',\n+            escapeTextForBrowser(idPrefix),\n+            '\"'\n           ),\n-        bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(' async=\"\">\\x3c/script>');\n   return onHeaders;\n }\n function createResumableState(\n@@ -869,14 +887,28 @@ function flattenOptionChildren(children) {\n   return content;\n }\n function injectFormReplayingRuntime(resumableState, renderState) {\n-  0 !== (resumableState.instructions & 16) ||\n-    renderState.externalRuntimeScript ||\n-    ((resumableState.instructions |= 16),\n-    renderState.bootstrapChunks.unshift(\n-      renderState.startInlineScript,\n-      'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n-      \"\\x3c/script>\"\n-    ));\n+  if (\n+    0 === (resumableState.instructions & 16) &&\n+    !renderState.externalRuntimeScript\n+  ) {\n+    resumableState.instructions |= 16;\n+    var preamble = renderState.preamble,\n+      bootstrapChunks = renderState.bootstrapChunks;\n+    (preamble.htmlChunks || preamble.headChunks) && 0 === bootstrapChunks.length\n+      ? (bootstrapChunks.push(renderState.startInlineScript),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(\n+          \">\",\n+          'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n+          \"\\x3c/script>\"\n+        ))\n+      : bootstrapChunks.unshift(\n+          renderState.startInlineScript,\n+          \">\",\n+          'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n+          \"\\x3c/script>\"\n+        );\n+  }\n }\n function pushLinkImpl(target, props) {\n   target.push(startChunkForTag(\"link\"));\n@@ -2330,6 +2362,15 @@ function preloadLateStyles(styleQueue) {\n   styleQueue.sheets.forEach(preloadLateStyle, this);\n   styleQueue.sheets.clear();\n }\n+function pushCompletedShellIdAttribute(target, resumableState) {\n+  0 === (resumableState.instructions & 32) &&\n+    ((resumableState.instructions |= 32),\n+    target.push(\n+      ' id=\"',\n+      escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\"),\n+      '\"'\n+    ));\n+}\n function writeStyleResourceDependenciesInJS(destination, hoistableState) {\n   writeChunk(destination, \"[\");\n   var nextArrayOpenBrackChunk = \"[\";\n@@ -3749,6 +3790,7 @@ function RequestInstance(\n   this.fatalError = null;\n   this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n   this.completedPreambleSegments = this.completedRootSegment = null;\n+  this.byteSize = 0;\n   this.abortableTasks = abortSet;\n   this.pingedTasks = [];\n   this.clientRenderedBoundaries = [];\n@@ -4343,11 +4385,11 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           }\n         } else {\n           type = task.keyPath;\n-          var parentBoundary = task.blockedBoundary;\n-          ref = task.blockedPreamble;\n+          ref = task.blockedBoundary;\n+          propName$33 = task.blockedPreamble;\n           var parentHoistableState = task.hoistableState;\n-          propName$33 = task.blockedSegment;\n-          propName = props.fallback;\n+          propName = task.blockedSegment;\n+          var fallback = props.fallback;\n           props = props.children;\n           var fallbackAbortSet = new Set();\n           var newBoundary =\n@@ -4363,14 +4405,14 @@ function renderElement(request, task, keyPath, type, props, ref) {\n             (newBoundary.trackedContentKeyPath = keyPath);\n           var boundarySegment = createPendingSegment(\n             request,\n-            propName$33.chunks.length,\n+            propName.chunks.length,\n             newBoundary,\n             task.formatContext,\n             !1,\n             !1\n           );\n-          propName$33.children.push(boundarySegment);\n-          propName$33.lastPushedText = !1;\n+          propName.children.push(boundarySegment);\n+          propName.lastPushedText = !1;\n           var contentRootSegment = createPendingSegment(\n             request,\n             0,\n@@ -4390,19 +4432,20 @@ function renderElement(request, task, keyPath, type, props, ref) {\n             task.keyPath = newProps;\n             boundarySegment.status = 6;\n             try {\n-              renderNode(request, task, propName, -1),\n+              renderNode(request, task, fallback, -1),\n                 boundarySegment.lastPushedText &&\n                   boundarySegment.textEmbedded &&\n                   boundarySegment.chunks.push(\"\\x3c!-- --\\x3e\"),\n-                (boundarySegment.status = 1);\n+                (boundarySegment.status = 1),\n+                finishedSegment(request, ref, boundarySegment);\n             } catch (thrownValue) {\n               throw (\n                 ((boundarySegment.status = 12 === request.status ? 3 : 4),\n                 thrownValue)\n               );\n             } finally {\n-              (task.blockedSegment = propName$33),\n-                (task.blockedPreamble = ref),\n+              (task.blockedSegment = propName),\n+                (task.blockedPreamble = propName$33),\n                 (task.keyPath = type);\n             }\n             task = createRenderTask(\n@@ -4438,10 +4481,13 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                   contentRootSegment.textEmbedded &&\n                   contentRootSegment.chunks.push(\"\\x3c!-- --\\x3e\"),\n                 (contentRootSegment.status = 1),\n+                finishedSegment(request, newBoundary, contentRootSegment),\n                 queueCompletedSegment(newBoundary, contentRootSegment),\n-                0 === newBoundary.pendingTasks && 0 === newBoundary.status)\n+                0 === newBoundary.pendingTasks &&\n+                  0 === newBoundary.status &&\n+                  ((newBoundary.status = 1),\n+                  !(newBoundary.byteSize > request.progressiveChunkSize)))\n               ) {\n-                newBoundary.status = 1;\n                 0 === request.pendingRootTasks &&\n                   task.blockedPreamble &&\n                   preparePreamble(request);\n@@ -4468,18 +4514,18 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                 (newBoundary.errorDigest = initialState),\n                 untrackBoundary(request, newBoundary);\n             } finally {\n-              (task.blockedBoundary = parentBoundary),\n-                (task.blockedPreamble = ref),\n+              (task.blockedBoundary = ref),\n+                (task.blockedPreamble = propName$33),\n                 (task.hoistableState = parentHoistableState),\n-                (task.blockedSegment = propName$33),\n+                (task.blockedSegment = propName),\n                 (task.keyPath = type);\n             }\n             task = createRenderTask(\n               request,\n               null,\n-              propName,\n+              fallback,\n               -1,\n-              parentBoundary,\n+              ref,\n               boundarySegment,\n               newBoundary.fallbackPreamble,\n               newBoundary.fallbackState,\n@@ -4501,9 +4547,8 @@ function renderElement(request, task, keyPath, type, props, ref) {\n       switch (type.$$typeof) {\n         case REACT_FORWARD_REF_TYPE:\n           if (\"ref\" in props)\n-            for (newBoundary in ((newProps = {}), props))\n-              \"ref\" !== newBoundary &&\n-                (newProps[newBoundary] = props[newBoundary]);\n+            for (fallback in ((newProps = {}), props))\n+              \"ref\" !== fallback && (newProps[fallback] = props[fallback]);\n           else newProps = props;\n           type = renderWithHooks(\n             request,\n@@ -4593,6 +4638,7 @@ function resumeNode(request, task, segmentId, node, childIndex) {\n       (task.blockedSegment = resumedSegment),\n       renderNode(request, task, node, childIndex),\n       (resumedSegment.status = 1),\n+      finishedSegment(request, blockedBoundary, resumedSegment),\n       null === blockedBoundary\n         ? (request.completedRootSegment = resumedSegment)\n         : (queueCompletedSegment(blockedBoundary, resumedSegment),\n@@ -5529,6 +5575,16 @@ function queueCompletedSegment(boundary, segment) {\n     1 === childSegment.status && queueCompletedSegment(boundary, childSegment);\n   } else boundary.completedSegments.push(segment);\n }\n+function finishedSegment(request, boundary, segment) {\n+  if (null !== byteLengthOfChunk) {\n+    segment = segment.chunks;\n+    for (var segmentByteSize = 0, i = 0; i < segment.length; i++)\n+      segmentByteSize += byteLengthOfChunk(segment[i]);\n+    null === boundary\n+      ? (request.byteSize += segmentByteSize)\n+      : (boundary.byteSize += segmentByteSize);\n+  }\n+}\n function finishedTask(request, boundary, segment) {\n   if (null === boundary) {\n     if (null !== segment && segment.parentFlushed) {\n@@ -5552,8 +5608,12 @@ function finishedTask(request, boundary, segment) {\n             boundary.parentFlushed &&\n               request.completedBoundaries.push(boundary),\n             1 === boundary.status &&\n-              (boundary.fallbackAbortableTasks.forEach(abortTaskSoft, request),\n-              boundary.fallbackAbortableTasks.clear(),\n+              (boundary.byteSize > request.progressiveChunkSize ||\n+                (boundary.fallbackAbortableTasks.forEach(\n+                  abortTaskSoft,\n+                  request\n+                ),\n+                boundary.fallbackAbortableTasks.clear()),\n               0 === request.pendingRootTasks &&\n                 null === request.trackedPostpones &&\n                 null !== boundary.contentPreamble &&\n@@ -5664,6 +5724,11 @@ function performWork(request$jscomp$1) {\n                     segment$jscomp$0.chunks.push(\"\\x3c!-- --\\x3e\"),\n                   task.abortSet.delete(task),\n                   (segment$jscomp$0.status = 1),\n+                  finishedSegment(\n+                    request,\n+                    task.blockedBoundary,\n+                    segment$jscomp$0\n+                  ),\n                   finishedTask(request, task.blockedBoundary, segment$jscomp$0);\n               } catch (thrownValue) {\n                 resetHooksState();\n@@ -5989,6 +6054,7 @@ function flushCompletedBoundary(request, destination, boundary) {\n   var scriptFormat = 0 === completedSegments.streamingFormat;\n   scriptFormat\n     ? (writeChunk(destination, request.startInlineScript),\n+      writeChunk(destination, \">\"),\n       requiresStyleInsertion\n         ? 0 === (completedSegments.instructions & 2)\n           ? ((completedSegments.instructions |= 10),\n@@ -6056,6 +6122,7 @@ function flushPartiallyCompletedSegment(\n   request = request.renderState;\n   (segment = 0 === boundary.streamingFormat)\n     ? (writeChunk(destination, request.startInlineScript),\n+      writeChunk(destination, \">\"),\n       0 === (boundary.instructions & 1)\n         ? ((boundary.instructions |= 1),\n           writeChunk(\n@@ -6086,14 +6153,14 @@ function flushCompletedQueues(request, destination) {\n         if (5 === completedRootSegment.status) return;\n         var completedPreambleSegments = request.completedPreambleSegments;\n         if (null === completedPreambleSegments) return;\n-        var renderState = request.renderState;\n+        var resumableState = request.resumableState,\n+          renderState = request.renderState;\n         if (\n           (0 !== request.allPendingTasks ||\n             null !== request.trackedPostpones) &&\n           renderState.externalRuntimeScript\n         ) {\n           var _renderState$external = renderState.externalRuntimeScript,\n-            resumableState = request.resumableState,\n             src = _renderState$external.src,\n             chunks = _renderState$external.chunks;\n           resumableState.scriptResources.hasOwnProperty(src) ||\n@@ -6140,26 +6207,23 @@ function flushCompletedQueues(request, destination) {\n         renderState.scripts.clear();\n         renderState.bulkPreloads.forEach(flushResource, destination);\n         renderState.bulkPreloads.clear();\n+        if (htmlChunks || headChunks) {\n+          var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+          writeChunk(destination, '<link rel=\"expect\" href=\"#');\n+          writeChunk(destination, escapeTextForBrowser(shellId));\n+          writeChunk(destination, '\" blocking=\"render\"/>');\n+        }\n         var hoistableChunks = renderState.hoistableChunks;\n         for (i$jscomp$0 = 0; i$jscomp$0 < hoistableChunks.length; i$jscomp$0++)\n           writeChunk(destination, hoistableChunks[i$jscomp$0]);\n         for (\n-          renderState = hoistableChunks.length = 0;\n-          renderState < completedPreambleSegments.length;\n-          renderState++\n+          resumableState = hoistableChunks.length = 0;\n+          resumableState < completedPreambleSegments.length;\n+          resumableState++\n         ) {\n-          var segments = completedPreambleSegments[renderState];\n-          for (\n-            _renderState$external = 0;\n-            _renderState$external < segments.length;\n-            _renderState$external++\n-          )\n-            flushSegment(\n-              request,\n-              destination,\n-              segments[_renderState$external],\n-              null\n-            );\n+          var segments = completedPreambleSegments[resumableState];\n+          for (renderState = 0; renderState < segments.length; renderState++)\n+            flushSegment(request, destination, segments[renderState], null);\n         }\n         var preamble$jscomp$0 = request.renderState.preamble,\n           headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n@@ -6175,33 +6239,48 @@ function flushCompletedQueues(request, destination) {\n             writeChunk(destination, bodyChunks[completedPreambleSegments]);\n         flushSegment(request, destination, completedRootSegment, null);\n         request.completedRootSegment = null;\n-        writeBootstrap(destination, request.renderState);\n+        var resumableState$jscomp$0 = request.resumableState,\n+          renderState$jscomp$0 = request.renderState,\n+          preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+        if (\n+          (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+          0 === (resumableState$jscomp$0.instructions & 32)\n+        ) {\n+          var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+          bootstrapChunks.push(startChunkForTag(\"template\"));\n+          pushCompletedShellIdAttribute(\n+            bootstrapChunks,\n+            resumableState$jscomp$0\n+          );\n+          bootstrapChunks.push(\">\", endChunkForTag(\"template\"));\n+        }\n+        writeBootstrap(destination, renderState$jscomp$0);\n       }\n-      var renderState$jscomp$0 = request.renderState;\n+      var renderState$jscomp$1 = request.renderState;\n       completedRootSegment = 0;\n-      var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+      var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < viewportChunks$jscomp$0.length;\n         completedRootSegment++\n       )\n         writeChunk(destination, viewportChunks$jscomp$0[completedRootSegment]);\n       viewportChunks$jscomp$0.length = 0;\n-      renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-      renderState$jscomp$0.preconnects.clear();\n-      renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.fontPreloads.clear();\n-      renderState$jscomp$0.highImagePreloads.forEach(\n+      renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+      renderState$jscomp$1.preconnects.clear();\n+      renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.fontPreloads.clear();\n+      renderState$jscomp$1.highImagePreloads.forEach(\n         flushResource,\n         destination\n       );\n-      renderState$jscomp$0.highImagePreloads.clear();\n-      renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-      renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-      renderState$jscomp$0.scripts.clear();\n-      renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.bulkPreloads.clear();\n-      var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+      renderState$jscomp$1.highImagePreloads.clear();\n+      renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+      renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+      renderState$jscomp$1.scripts.clear();\n+      renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.bulkPreloads.clear();\n+      var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -6212,46 +6291,47 @@ function flushCompletedQueues(request, destination) {\n       var clientRenderedBoundaries = request.clientRenderedBoundaries;\n       for (i = 0; i < clientRenderedBoundaries.length; i++) {\n         var boundary = clientRenderedBoundaries[i];\n-        renderState$jscomp$0 = destination;\n-        var resumableState$jscomp$0 = request.resumableState,\n-          renderState$jscomp$1 = request.renderState,\n+        renderState$jscomp$1 = destination;\n+        var resumableState$jscomp$1 = request.resumableState,\n+          renderState$jscomp$2 = request.renderState,\n           id = boundary.rootSegmentID,\n           errorDigest = boundary.errorDigest,\n-          scriptFormat = 0 === resumableState$jscomp$0.streamingFormat;\n+          scriptFormat = 0 === resumableState$jscomp$1.streamingFormat;\n         scriptFormat\n           ? (writeChunk(\n-              renderState$jscomp$0,\n-              renderState$jscomp$1.startInlineScript\n+              renderState$jscomp$1,\n+              renderState$jscomp$2.startInlineScript\n             ),\n-            0 === (resumableState$jscomp$0.instructions & 4)\n-              ? ((resumableState$jscomp$0.instructions |= 4),\n+            writeChunk(renderState$jscomp$1, \">\"),\n+            0 === (resumableState$jscomp$1.instructions & 4)\n+              ? ((resumableState$jscomp$1.instructions |= 4),\n                 writeChunk(\n-                  renderState$jscomp$0,\n+                  renderState$jscomp$1,\n                   '$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data=\"$!\",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX(\"'\n                 ))\n-              : writeChunk(renderState$jscomp$0, '$RX(\"'))\n+              : writeChunk(renderState$jscomp$1, '$RX(\"'))\n           : writeChunk(\n-              renderState$jscomp$0,\n+              renderState$jscomp$1,\n               '<template data-rxi=\"\" data-bid=\"'\n             );\n-        writeChunk(renderState$jscomp$0, renderState$jscomp$1.boundaryPrefix);\n-        writeChunk(renderState$jscomp$0, id.toString(16));\n-        scriptFormat && writeChunk(renderState$jscomp$0, '\"');\n+        writeChunk(renderState$jscomp$1, renderState$jscomp$2.boundaryPrefix);\n+        writeChunk(renderState$jscomp$1, id.toString(16));\n+        scriptFormat && writeChunk(renderState$jscomp$1, '\"');\n         errorDigest &&\n           (scriptFormat\n-            ? (writeChunk(renderState$jscomp$0, \",\"),\n+            ? (writeChunk(renderState$jscomp$1, \",\"),\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 escapeJSStringsForInstructionScripts(errorDigest || \"\")\n               ))\n-            : (writeChunk(renderState$jscomp$0, '\" data-dgst=\"'),\n+            : (writeChunk(renderState$jscomp$1, '\" data-dgst=\"'),\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 escapeTextForBrowser(errorDigest || \"\")\n               )));\n         var JSCompiler_inline_result = scriptFormat\n-          ? !!renderState$jscomp$0.write(\")\\x3c/script>\")\n-          : !!renderState$jscomp$0.write('\"></template>');\n+          ? !!renderState$jscomp$1.write(\")\\x3c/script>\")\n+          : !!renderState$jscomp$1.write('\"></template>');\n         if (!JSCompiler_inline_result) {\n           request.destination = null;\n           i++;\n@@ -6398,15 +6478,15 @@ function addToReplayParent(node, parentKeyPath, trackedPostpones) {\n     parentNode[2].push(node);\n   }\n }\n-var isomorphicReactPackageVersion$jscomp$inline_819 = React.version;\n+var isomorphicReactPackageVersion$jscomp$inline_825 = React.version;\n if (\n-  \"19.2.0-experimental-197d6a04-20250424\" !==\n-  isomorphicReactPackageVersion$jscomp$inline_819\n+  \"19.2.0-experimental-5dc00d6b-20250428\" !==\n+  isomorphicReactPackageVersion$jscomp$inline_825\n )\n   throw Error(\n     'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n-      (isomorphicReactPackageVersion$jscomp$inline_819 +\n-        \"\\n  - react-dom:  19.2.0-experimental-197d6a04-20250424\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+      (isomorphicReactPackageVersion$jscomp$inline_825 +\n+        \"\\n  - react-dom:  19.2.0-experimental-5dc00d6b-20250428\\nLearn more: https://react.dev/warnings/version-mismatch\")\n   );\n exports.renderToReadableStream = function (children, options) {\n   return new Promise(function (resolve, reject) {\n@@ -6497,4 +6577,4 @@ exports.renderToReadableStream = function (children, options) {\n     startWork(request);\n   });\n };\n-exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";"
        },
        {
            "sha": "44f52b64393df03e5d979c78d9f7f60d703e178b",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server.edge.development.js",
            "status": "modified",
            "additions": 192,
            "deletions": 98,
            "changes": 290,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.edge.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.edge.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.edge.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -318,6 +318,9 @@\n         );\n       return content;\n     }\n+    function byteLengthOfChunk(chunk) {\n+      return chunk.byteLength;\n+    }\n     function closeWithError(destination, error) {\n       \"function\" === typeof destination.error\n         ? destination.error(error)\n@@ -822,7 +825,7 @@\n           void 0 === nonce\n             ? startInlineScript\n             : stringToPrecomputedChunk(\n-                '<script nonce=\"' + escapeTextForBrowser(nonce) + '\">'\n+                '<script nonce=\"' + escapeTextForBrowser(nonce) + '\"'\n               ),\n         idPrefix = resumableState.idPrefix,\n         bootstrapChunks = [],\n@@ -831,13 +834,15 @@\n         bootstrapScripts = resumableState.bootstrapScripts,\n         bootstrapModules = resumableState.bootstrapModules;\n       void 0 !== bootstrapScriptContent &&\n+        (bootstrapChunks.push(inlineScriptWithNonce),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n         bootstrapChunks.push(\n-          inlineScriptWithNonce,\n+          endOfStartTag,\n           stringToChunk(\n             escapeEntireInlineScriptContent(bootstrapScriptContent)\n           ),\n           endInlineScript\n-        );\n+        ));\n       void 0 !== externalRuntimeConfig &&\n         (\"string\" === typeof externalRuntimeConfig\n           ? ((externalRuntimeScript = {\n@@ -960,23 +965,28 @@\n             ),\n             bootstrapChunks.push(\n               startScriptSrc,\n-              stringToChunk(escapeTextForBrowser(externalRuntimeScript))\n+              stringToChunk(escapeTextForBrowser(externalRuntimeScript)),\n+              attributeEnd\n             ),\n             nonce &&\n               bootstrapChunks.push(\n                 scriptNonce,\n-                stringToChunk(escapeTextForBrowser(nonce))\n+                stringToChunk(escapeTextForBrowser(nonce)),\n+                attributeEnd\n               ),\n             \"string\" === typeof maxHeadersLength &&\n               bootstrapChunks.push(\n                 scriptIntegirty,\n-                stringToChunk(escapeTextForBrowser(maxHeadersLength))\n+                stringToChunk(escapeTextForBrowser(maxHeadersLength)),\n+                attributeEnd\n               ),\n             \"string\" === typeof importMap &&\n               bootstrapChunks.push(\n                 scriptCrossOrigin,\n-                stringToChunk(escapeTextForBrowser(importMap))\n+                stringToChunk(escapeTextForBrowser(importMap)),\n+                attributeEnd\n               ),\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n             bootstrapChunks.push(endAsyncScript);\n       if (void 0 !== bootstrapModules)\n         for (\n@@ -1013,23 +1023,28 @@\n             ),\n             bootstrapChunks.push(\n               startModuleSrc,\n-              stringToChunk(escapeTextForBrowser(idPrefix))\n+              stringToChunk(escapeTextForBrowser(idPrefix)),\n+              attributeEnd\n             ),\n             nonce &&\n               bootstrapChunks.push(\n                 scriptNonce,\n-                stringToChunk(escapeTextForBrowser(nonce))\n+                stringToChunk(escapeTextForBrowser(nonce)),\n+                attributeEnd\n               ),\n             \"string\" === typeof importMap &&\n               bootstrapChunks.push(\n                 scriptIntegirty,\n-                stringToChunk(escapeTextForBrowser(importMap))\n+                stringToChunk(escapeTextForBrowser(importMap)),\n+                attributeEnd\n               ),\n             \"string\" === typeof externalRuntimeScript &&\n               bootstrapChunks.push(\n                 scriptCrossOrigin,\n-                stringToChunk(escapeTextForBrowser(externalRuntimeScript))\n+                stringToChunk(escapeTextForBrowser(externalRuntimeScript)),\n+                attributeEnd\n               ),\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n             bootstrapChunks.push(endAsyncScript);\n       return onHeaders;\n     }\n@@ -1717,14 +1732,29 @@\n       return content;\n     }\n     function injectFormReplayingRuntime(resumableState, renderState) {\n-      (resumableState.instructions & 16) !== NothingSent ||\n-        renderState.externalRuntimeScript ||\n-        ((resumableState.instructions |= 16),\n-        renderState.bootstrapChunks.unshift(\n-          renderState.startInlineScript,\n-          formReplayingRuntimeScript,\n-          endInlineScript\n-        ));\n+      if (\n+        (resumableState.instructions & 16) === NothingSent &&\n+        !renderState.externalRuntimeScript\n+      ) {\n+        resumableState.instructions |= 16;\n+        var preamble = renderState.preamble,\n+          bootstrapChunks = renderState.bootstrapChunks;\n+        (preamble.htmlChunks || preamble.headChunks) &&\n+        0 === bootstrapChunks.length\n+          ? (bootstrapChunks.push(renderState.startInlineScript),\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+            bootstrapChunks.push(\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              endInlineScript\n+            ))\n+          : bootstrapChunks.unshift(\n+              renderState.startInlineScript,\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              endInlineScript\n+            );\n+      }\n     }\n     function pushLinkImpl(target, props) {\n       target.push(startChunkForTag(\"link\"));\n@@ -3474,6 +3504,17 @@\n       styleQueue.sheets.forEach(preloadLateStyle, this);\n       styleQueue.sheets.clear();\n     }\n+    function pushCompletedShellIdAttribute(target, resumableState) {\n+      (resumableState.instructions & SentCompletedShellId) === NothingSent &&\n+        ((resumableState.instructions |= SentCompletedShellId),\n+        target.push(\n+          completedShellIdAttributeStart,\n+          stringToChunk(\n+            escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\")\n+          ),\n+          attributeEnd\n+        ));\n+    }\n     function writeStyleResourceDependenciesInJS(destination, hoistableState) {\n       writeChunk(destination, arrayFirstOpenBracket);\n       var nextArrayOpenBrackChunk = arrayFirstOpenBracket;\n@@ -4659,6 +4700,7 @@\n       this.fatalError = null;\n       this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n       this.completedPreambleSegments = this.completedRootSegment = null;\n+      this.byteSize = 0;\n       this.abortableTasks = abortSet;\n       this.pingedTasks = [];\n       this.clientRenderedBoundaries = [];\n@@ -5970,7 +6012,8 @@\n                     boundarySegment.lastPushedText &&\n                       boundarySegment.textEmbedded &&\n                       boundarySegment.chunks.push(textSeparator),\n-                    (boundarySegment.status = COMPLETED);\n+                    (boundarySegment.status = COMPLETED),\n+                    finishedSegment(request, parentBoundary, boundarySegment);\n                 } catch (thrownValue) {\n                   throw (\n                     ((boundarySegment.status = 12 === request.status ? 3 : 4),\n@@ -6016,11 +6059,13 @@\n                       contentRootSegment.textEmbedded &&\n                       contentRootSegment.chunks.push(textSeparator),\n                     (contentRootSegment.status = COMPLETED),\n+                    finishedSegment(request, newBoundary, contentRootSegment),\n                     queueCompletedSegment(newBoundary, contentRootSegment),\n                     0 === newBoundary.pendingTasks &&\n-                      newBoundary.status === PENDING)\n+                      newBoundary.status === PENDING &&\n+                      ((newBoundary.status = COMPLETED),\n+                      !(newBoundary.byteSize > request.progressiveChunkSize)))\n                   ) {\n-                    newBoundary.status = COMPLETED;\n                     0 === request.pendingRootTasks &&\n                       task.blockedPreamble &&\n                       preparePreamble(request);\n@@ -6228,6 +6273,7 @@\n           (task.blockedSegment = resumedSegment),\n           renderNode(request, task, node, childIndex),\n           (resumedSegment.status = COMPLETED),\n+          finishedSegment(request, blockedBoundary, resumedSegment),\n           null === blockedBoundary\n             ? (request.completedRootSegment = resumedSegment)\n             : (queueCompletedSegment(blockedBoundary, resumedSegment),\n@@ -7396,6 +7442,16 @@\n           queueCompletedSegment(boundary, childSegment);\n       } else boundary.completedSegments.push(segment);\n     }\n+    function finishedSegment(request, boundary, segment) {\n+      if (null !== byteLengthOfChunk) {\n+        segment = segment.chunks;\n+        for (var segmentByteSize = 0, i = 0; i < segment.length; i++)\n+          segmentByteSize += segment[i].byteLength;\n+        null === boundary\n+          ? (request.byteSize += segmentByteSize)\n+          : (boundary.byteSize += segmentByteSize);\n+      }\n+    }\n     function finishedTask(request, boundary, segment) {\n       if (null === boundary) {\n         if (null !== segment && segment.parentFlushed) {\n@@ -7419,11 +7475,12 @@\n                 boundary.parentFlushed &&\n                   request.completedBoundaries.push(boundary),\n                 boundary.status === COMPLETED &&\n-                  (boundary.fallbackAbortableTasks.forEach(\n-                    abortTaskSoft,\n-                    request\n-                  ),\n-                  boundary.fallbackAbortableTasks.clear(),\n+                  (boundary.byteSize > request.progressiveChunkSize ||\n+                    (boundary.fallbackAbortableTasks.forEach(\n+                      abortTaskSoft,\n+                      request\n+                    ),\n+                    boundary.fallbackAbortableTasks.clear()),\n                   0 === request.pendingRootTasks &&\n                     null === request.trackedPostpones &&\n                     null !== boundary.contentPreamble &&\n@@ -7548,6 +7605,11 @@\n                         segment$jscomp$0.chunks.push(textSeparator),\n                       task$jscomp$0.abortSet.delete(task$jscomp$0),\n                       (segment$jscomp$0.status = COMPLETED),\n+                      finishedSegment(\n+                        request,\n+                        task$jscomp$0.blockedBoundary,\n+                        segment$jscomp$0\n+                      ),\n                       finishedTask(\n                         request,\n                         task$jscomp$0.blockedBoundary,\n@@ -7976,6 +8038,7 @@\n         completedSegments.streamingFormat === ScriptStreamingFormat;\n       scriptFormat\n         ? (writeChunk(destination, request.startInlineScript),\n+          writeChunk(destination, endOfStartTag),\n           requiresStyleInsertion\n             ? (completedSegments.instructions &\n                 SentCompleteBoundaryFunction) ===\n@@ -8064,6 +8127,7 @@\n       request = request.renderState;\n       (segment = boundary.streamingFormat === ScriptStreamingFormat)\n         ? (writeChunk(destination, request.startInlineScript),\n+          writeChunk(destination, endOfStartTag),\n           (boundary.instructions & SentCompleteSegmentFunction) === NothingSent\n             ? ((boundary.instructions |= SentCompleteSegmentFunction),\n               writeChunk(destination, completeSegmentScript1Full))\n@@ -8093,14 +8157,14 @@\n             if (completedRootSegment.status === POSTPONED) return;\n             var completedPreambleSegments = request.completedPreambleSegments;\n             if (null === completedPreambleSegments) return;\n-            var renderState = request.renderState;\n+            var resumableState = request.resumableState,\n+              renderState = request.renderState;\n             if (\n               (0 !== request.allPendingTasks ||\n                 null !== request.trackedPostpones) &&\n               renderState.externalRuntimeScript\n             ) {\n               var _renderState$external = renderState.externalRuntimeScript,\n-                resumableState = request.resumableState,\n                 src = _renderState$external.src,\n                 chunks = _renderState$external.chunks;\n               resumableState.scriptResources.hasOwnProperty(src) ||\n@@ -8163,6 +8227,15 @@\n             renderState.scripts.clear();\n             renderState.bulkPreloads.forEach(flushResource, destination);\n             renderState.bulkPreloads.clear();\n+            if (htmlChunks || headChunks) {\n+              var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+              writeChunk(destination, blockingRenderChunkStart);\n+              writeChunk(\n+                destination,\n+                stringToChunk(escapeTextForBrowser(shellId))\n+              );\n+              writeChunk(destination, blockingRenderChunkEnd);\n+            }\n             var hoistableChunks = renderState.hoistableChunks;\n             for (\n               i$jscomp$0 = 0;\n@@ -8171,22 +8244,17 @@\n             )\n               writeChunk(destination, hoistableChunks[i$jscomp$0]);\n             for (\n-              renderState = hoistableChunks.length = 0;\n-              renderState < completedPreambleSegments.length;\n-              renderState++\n+              resumableState = hoistableChunks.length = 0;\n+              resumableState < completedPreambleSegments.length;\n+              resumableState++\n             ) {\n-              var segments = completedPreambleSegments[renderState];\n+              var segments = completedPreambleSegments[resumableState];\n               for (\n-                _renderState$external = 0;\n-                _renderState$external < segments.length;\n-                _renderState$external++\n+                renderState = 0;\n+                renderState < segments.length;\n+                renderState++\n               )\n-                flushSegment(\n-                  request,\n-                  destination,\n-                  segments[_renderState$external],\n-                  null\n-                );\n+                flushSegment(request, destination, segments[renderState], null);\n             }\n             var preamble$jscomp$0 = request.renderState.preamble,\n               headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n@@ -8202,11 +8270,27 @@\n                 writeChunk(destination, bodyChunks[completedPreambleSegments]);\n             flushSegment(request, destination, completedRootSegment, null);\n             request.completedRootSegment = null;\n-            writeBootstrap(destination, request.renderState);\n+            var resumableState$jscomp$0 = request.resumableState,\n+              renderState$jscomp$0 = request.renderState,\n+              preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+            if (\n+              (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+              (resumableState$jscomp$0.instructions & SentCompletedShellId) ===\n+                NothingSent\n+            ) {\n+              var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+              bootstrapChunks.push(startChunkForTag(\"template\"));\n+              pushCompletedShellIdAttribute(\n+                bootstrapChunks,\n+                resumableState$jscomp$0\n+              );\n+              bootstrapChunks.push(endOfStartTag, endChunkForTag(\"template\"));\n+            }\n+            writeBootstrap(destination, renderState$jscomp$0);\n           }\n-          var renderState$jscomp$0 = request.renderState;\n+          var renderState$jscomp$1 = request.renderState;\n           completedRootSegment = 0;\n-          var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+          var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < viewportChunks$jscomp$0.length;\n@@ -8217,21 +8301,21 @@\n               viewportChunks$jscomp$0[completedRootSegment]\n             );\n           viewportChunks$jscomp$0.length = 0;\n-          renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-          renderState$jscomp$0.preconnects.clear();\n-          renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.fontPreloads.clear();\n-          renderState$jscomp$0.highImagePreloads.forEach(\n+          renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+          renderState$jscomp$1.preconnects.clear();\n+          renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.fontPreloads.clear();\n+          renderState$jscomp$1.highImagePreloads.forEach(\n             flushResource,\n             destination\n           );\n-          renderState$jscomp$0.highImagePreloads.clear();\n-          renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-          renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-          renderState$jscomp$0.scripts.clear();\n-          renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.bulkPreloads.clear();\n-          var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+          renderState$jscomp$1.highImagePreloads.clear();\n+          renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+          renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+          renderState$jscomp$1.scripts.clear();\n+          renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.bulkPreloads.clear();\n+          var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -8245,40 +8329,41 @@\n           var clientRenderedBoundaries = request.clientRenderedBoundaries;\n           for (i = 0; i < clientRenderedBoundaries.length; i++) {\n             var boundary = clientRenderedBoundaries[i];\n-            renderState$jscomp$0 = destination;\n-            var resumableState$jscomp$0 = request.resumableState,\n-              renderState$jscomp$1 = request.renderState,\n+            renderState$jscomp$1 = destination;\n+            var resumableState$jscomp$1 = request.resumableState,\n+              renderState$jscomp$2 = request.renderState,\n               id = boundary.rootSegmentID,\n               errorDigest = boundary.errorDigest,\n               errorMessage = boundary.errorMessage,\n               errorStack = boundary.errorStack,\n               errorComponentStack = boundary.errorComponentStack,\n               scriptFormat =\n-                resumableState$jscomp$0.streamingFormat ===\n+                resumableState$jscomp$1.streamingFormat ===\n                 ScriptStreamingFormat;\n             scriptFormat\n               ? (writeChunk(\n-                  renderState$jscomp$0,\n-                  renderState$jscomp$1.startInlineScript\n+                  renderState$jscomp$1,\n+                  renderState$jscomp$2.startInlineScript\n                 ),\n-                (resumableState$jscomp$0.instructions &\n+                writeChunk(renderState$jscomp$1, endOfStartTag),\n+                (resumableState$jscomp$1.instructions &\n                   SentClientRenderFunction) ===\n                 NothingSent\n-                  ? ((resumableState$jscomp$0.instructions |=\n+                  ? ((resumableState$jscomp$1.instructions |=\n                       SentClientRenderFunction),\n-                    writeChunk(renderState$jscomp$0, clientRenderScript1Full))\n+                    writeChunk(renderState$jscomp$1, clientRenderScript1Full))\n                   : writeChunk(\n-                      renderState$jscomp$0,\n+                      renderState$jscomp$1,\n                       clientRenderScript1Partial\n                     ))\n-              : writeChunk(renderState$jscomp$0, clientRenderData1);\n+              : writeChunk(renderState$jscomp$1, clientRenderData1);\n             writeChunk(\n-              renderState$jscomp$0,\n-              renderState$jscomp$1.boundaryPrefix\n+              renderState$jscomp$1,\n+              renderState$jscomp$2.boundaryPrefix\n             );\n-            writeChunk(renderState$jscomp$0, stringToChunk(id.toString(16)));\n+            writeChunk(renderState$jscomp$1, stringToChunk(id.toString(16)));\n             scriptFormat &&\n-              writeChunk(renderState$jscomp$0, clientRenderScript1A);\n+              writeChunk(renderState$jscomp$1, clientRenderScript1A);\n             if (\n               errorDigest ||\n               errorMessage ||\n@@ -8287,74 +8372,74 @@\n             )\n               scriptFormat\n                 ? (writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     clientRenderErrorScriptArgInterstitial\n                   ),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     stringToChunk(\n                       escapeJSStringsForInstructionScripts(errorDigest || \"\")\n                     )\n                   ))\n-                : (writeChunk(renderState$jscomp$0, clientRenderData2),\n+                : (writeChunk(renderState$jscomp$1, clientRenderData2),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     stringToChunk(escapeTextForBrowser(errorDigest || \"\"))\n                   ));\n             if (errorMessage || errorStack || errorComponentStack)\n               scriptFormat\n                 ? (writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     clientRenderErrorScriptArgInterstitial\n                   ),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     stringToChunk(\n                       escapeJSStringsForInstructionScripts(errorMessage || \"\")\n                     )\n                   ))\n-                : (writeChunk(renderState$jscomp$0, clientRenderData3),\n+                : (writeChunk(renderState$jscomp$1, clientRenderData3),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     stringToChunk(escapeTextForBrowser(errorMessage || \"\"))\n                   ));\n             if (errorStack || errorComponentStack)\n               scriptFormat\n                 ? (writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     clientRenderErrorScriptArgInterstitial\n                   ),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     stringToChunk(\n                       escapeJSStringsForInstructionScripts(errorStack || \"\")\n                     )\n                   ))\n-                : (writeChunk(renderState$jscomp$0, clientRenderData4),\n+                : (writeChunk(renderState$jscomp$1, clientRenderData4),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     stringToChunk(escapeTextForBrowser(errorStack || \"\"))\n                   ));\n             errorComponentStack &&\n               (scriptFormat\n                 ? (writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     clientRenderErrorScriptArgInterstitial\n                   ),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     stringToChunk(\n                       escapeJSStringsForInstructionScripts(errorComponentStack)\n                     )\n                   ))\n-                : (writeChunk(renderState$jscomp$0, clientRenderData5),\n+                : (writeChunk(renderState$jscomp$1, clientRenderData5),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     stringToChunk(escapeTextForBrowser(errorComponentStack))\n                   )));\n             var JSCompiler_inline_result = scriptFormat\n-              ? writeChunkAndReturn(renderState$jscomp$0, clientRenderScriptEnd)\n-              : writeChunkAndReturn(renderState$jscomp$0, clientRenderDataEnd);\n+              ? writeChunkAndReturn(renderState$jscomp$1, clientRenderScriptEnd)\n+              : writeChunkAndReturn(renderState$jscomp$1, clientRenderDataEnd);\n             if (!JSCompiler_inline_result) {\n               request.destination = null;\n               i++;\n@@ -8577,6 +8662,7 @@\n         resumableState.scriptResources = {};\n         resumableState.moduleUnknownResources = {};\n         resumableState.moduleScriptResources = {};\n+        resumableState.instructions = NothingSent;\n       }\n       return {\n         nextSegmentId: request.nextSegmentId,\n@@ -8589,11 +8675,11 @@\n     }\n     function ensureCorrectIsomorphicReactVersion() {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-experimental-197d6a04-20250424\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-experimental-5dc00d6b-20250428\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-experimental-197d6a04-20250424\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-experimental-5dc00d6b-20250428\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     }\n     var React = require(\"next/dist/compiled/react-experimental\"),\n@@ -9679,18 +9765,19 @@\n       SentCompleteBoundaryFunction = 2,\n       SentClientRenderFunction = 4,\n       SentStyleInsertionFunction = 8,\n+      SentCompletedShellId = 32,\n       EXISTS = null,\n       PRELOAD_NO_CREDS = [];\n     Object.freeze(PRELOAD_NO_CREDS);\n     var dataElementQuotedEnd = stringToPrecomputedChunk('\"></template>'),\n-      startInlineScript = stringToPrecomputedChunk(\"<script>\"),\n+      startInlineScript = stringToPrecomputedChunk(\"<script\"),\n       endInlineScript = stringToPrecomputedChunk(\"\\x3c/script>\"),\n       startScriptSrc = stringToPrecomputedChunk('<script src=\"'),\n       startModuleSrc = stringToPrecomputedChunk('<script type=\"module\" src=\"'),\n-      scriptNonce = stringToPrecomputedChunk('\" nonce=\"'),\n-      scriptIntegirty = stringToPrecomputedChunk('\" integrity=\"'),\n-      scriptCrossOrigin = stringToPrecomputedChunk('\" crossorigin=\"'),\n-      endAsyncScript = stringToPrecomputedChunk('\" async=\"\">\\x3c/script>'),\n+      scriptNonce = stringToPrecomputedChunk(' nonce=\"'),\n+      scriptIntegirty = stringToPrecomputedChunk(' integrity=\"'),\n+      scriptCrossOrigin = stringToPrecomputedChunk(' crossorigin=\"'),\n+      endAsyncScript = stringToPrecomputedChunk(' async=\"\">\\x3c/script>'),\n       scriptRegex = /(<\\/|<)(s)(cript)/gi,\n       importMapScriptStart = stringToPrecomputedChunk(\n         '<script type=\"importmap\">'\n@@ -9879,6 +9966,13 @@\n       spaceSeparator = stringToPrecomputedChunk(\" \"),\n       styleTagResourceOpen3 = stringToPrecomputedChunk('\">'),\n       styleTagResourceClose = stringToPrecomputedChunk(\"</style>\"),\n+      blockingRenderChunkStart = stringToPrecomputedChunk(\n+        '<link rel=\"expect\" href=\"#'\n+      ),\n+      blockingRenderChunkEnd = stringToPrecomputedChunk(\n+        '\" blocking=\"render\"/>'\n+      ),\n+      completedShellIdAttributeStart = stringToPrecomputedChunk(' id=\"'),\n       arrayFirstOpenBracket = stringToPrecomputedChunk(\"[\"),\n       arraySubsequentOpenBracket = stringToPrecomputedChunk(\",[\"),\n       arrayInterstitial = stringToPrecomputedChunk(\",\"),\n@@ -10403,5 +10497,5 @@ const setTimeoutOrImmediate =\n     ? globalThis['set' + 'Immediate']\n     : setTimeout;\n \n-    exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+    exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";\n   })();"
        },
        {
            "sha": "9768224e9b3c47bb88e79ab67855aaf62bd10031",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server.edge.production.js",
            "status": "modified",
            "additions": 187,
            "deletions": 102,
            "changes": 289,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.edge.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.edge.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.edge.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -168,6 +168,9 @@ function stringToChunk(content) {\n function stringToPrecomputedChunk(content) {\n   return textEncoder.encode(content);\n }\n+function byteLengthOfChunk(chunk) {\n+  return chunk.byteLength;\n+}\n function closeWithError(destination, error) {\n   \"function\" === typeof destination.error\n     ? destination.error(error)\n@@ -363,14 +366,14 @@ ReactDOMSharedInternals.d = {\n };\n var PRELOAD_NO_CREDS = [],\n   dataElementQuotedEnd = stringToPrecomputedChunk('\"></template>'),\n-  startInlineScript = stringToPrecomputedChunk(\"<script>\"),\n+  startInlineScript = stringToPrecomputedChunk(\"<script\"),\n   endInlineScript = stringToPrecomputedChunk(\"\\x3c/script>\"),\n   startScriptSrc = stringToPrecomputedChunk('<script src=\"'),\n   startModuleSrc = stringToPrecomputedChunk('<script type=\"module\" src=\"'),\n-  scriptNonce = stringToPrecomputedChunk('\" nonce=\"'),\n-  scriptIntegirty = stringToPrecomputedChunk('\" integrity=\"'),\n-  scriptCrossOrigin = stringToPrecomputedChunk('\" crossorigin=\"'),\n-  endAsyncScript = stringToPrecomputedChunk('\" async=\"\">\\x3c/script>'),\n+  scriptNonce = stringToPrecomputedChunk(' nonce=\"'),\n+  scriptIntegirty = stringToPrecomputedChunk(' integrity=\"'),\n+  scriptCrossOrigin = stringToPrecomputedChunk(' crossorigin=\"'),\n+  endAsyncScript = stringToPrecomputedChunk(' async=\"\">\\x3c/script>'),\n   scriptRegex = /(<\\/|<)(s)(cript)/gi;\n function scriptReplacer(match, prefix, s, suffix) {\n   return \"\" + prefix + (\"s\" === s ? \"\\\\u0073\" : \"\\\\u0053\") + suffix;\n@@ -391,7 +394,7 @@ function createRenderState(\n       void 0 === nonce\n         ? startInlineScript\n         : stringToPrecomputedChunk(\n-            '<script nonce=\"' + escapeTextForBrowser(nonce) + '\">'\n+            '<script nonce=\"' + escapeTextForBrowser(nonce) + '\"'\n           ),\n     idPrefix = resumableState.idPrefix,\n     bootstrapChunks = [],\n@@ -400,13 +403,15 @@ function createRenderState(\n     bootstrapScripts = resumableState.bootstrapScripts,\n     bootstrapModules = resumableState.bootstrapModules;\n   void 0 !== bootstrapScriptContent &&\n+    (bootstrapChunks.push(inlineScriptWithNonce),\n+    pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n     bootstrapChunks.push(\n-      inlineScriptWithNonce,\n+      endOfStartTag,\n       stringToChunk(\n         (\"\" + bootstrapScriptContent).replace(scriptRegex, scriptReplacer)\n       ),\n       endInlineScript\n-    );\n+    ));\n   void 0 !== externalRuntimeConfig &&\n     (\"string\" === typeof externalRuntimeConfig\n       ? ((externalRuntimeScript = { src: externalRuntimeConfig, chunks: [] }),\n@@ -520,23 +525,28 @@ function createRenderState(\n         onHeaders.bootstrapScripts.add(externalRuntimeConfig),\n         bootstrapChunks.push(\n           startScriptSrc,\n-          stringToChunk(escapeTextForBrowser(idPrefix))\n+          stringToChunk(escapeTextForBrowser(idPrefix)),\n+          attributeEnd\n         ),\n         nonce &&\n           bootstrapChunks.push(\n             scriptNonce,\n-            stringToChunk(escapeTextForBrowser(nonce))\n+            stringToChunk(escapeTextForBrowser(nonce)),\n+            attributeEnd\n           ),\n         \"string\" === typeof importMap &&\n           bootstrapChunks.push(\n             scriptIntegirty,\n-            stringToChunk(escapeTextForBrowser(importMap))\n+            stringToChunk(escapeTextForBrowser(importMap)),\n+            attributeEnd\n           ),\n         \"string\" === typeof externalRuntimeScript &&\n           bootstrapChunks.push(\n             scriptCrossOrigin,\n-            stringToChunk(escapeTextForBrowser(externalRuntimeScript))\n+            stringToChunk(escapeTextForBrowser(externalRuntimeScript)),\n+            attributeEnd\n           ),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n         bootstrapChunks.push(endAsyncScript);\n   if (void 0 !== bootstrapModules)\n     for (\n@@ -574,23 +584,28 @@ function createRenderState(\n         onHeaders.bootstrapScripts.add(maxHeadersLength),\n         bootstrapChunks.push(\n           startModuleSrc,\n-          stringToChunk(escapeTextForBrowser(inlineScriptWithNonce))\n+          stringToChunk(escapeTextForBrowser(inlineScriptWithNonce)),\n+          attributeEnd\n         ),\n         nonce &&\n           bootstrapChunks.push(\n             scriptNonce,\n-            stringToChunk(escapeTextForBrowser(nonce))\n+            stringToChunk(escapeTextForBrowser(nonce)),\n+            attributeEnd\n           ),\n         \"string\" === typeof externalRuntimeScript &&\n           bootstrapChunks.push(\n             scriptIntegirty,\n-            stringToChunk(escapeTextForBrowser(externalRuntimeScript))\n+            stringToChunk(escapeTextForBrowser(externalRuntimeScript)),\n+            attributeEnd\n           ),\n         \"string\" === typeof idPrefix &&\n           bootstrapChunks.push(\n             scriptCrossOrigin,\n-            stringToChunk(escapeTextForBrowser(idPrefix))\n+            stringToChunk(escapeTextForBrowser(idPrefix)),\n+            attributeEnd\n           ),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n         bootstrapChunks.push(endAsyncScript);\n   return onHeaders;\n }\n@@ -1129,14 +1144,28 @@ var selectedMarkerAttribute = stringToPrecomputedChunk(' selected=\"\"'),\n     'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});'\n   );\n function injectFormReplayingRuntime(resumableState, renderState) {\n-  0 !== (resumableState.instructions & 16) ||\n-    renderState.externalRuntimeScript ||\n-    ((resumableState.instructions |= 16),\n-    renderState.bootstrapChunks.unshift(\n-      renderState.startInlineScript,\n-      formReplayingRuntimeScript,\n-      endInlineScript\n-    ));\n+  if (\n+    0 === (resumableState.instructions & 16) &&\n+    !renderState.externalRuntimeScript\n+  ) {\n+    resumableState.instructions |= 16;\n+    var preamble = renderState.preamble,\n+      bootstrapChunks = renderState.bootstrapChunks;\n+    (preamble.htmlChunks || preamble.headChunks) && 0 === bootstrapChunks.length\n+      ? (bootstrapChunks.push(renderState.startInlineScript),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(\n+          endOfStartTag,\n+          formReplayingRuntimeScript,\n+          endInlineScript\n+        ))\n+      : bootstrapChunks.unshift(\n+          renderState.startInlineScript,\n+          endOfStartTag,\n+          formReplayingRuntimeScript,\n+          endInlineScript\n+        );\n+  }\n }\n var formStateMarkerIsMatching = stringToPrecomputedChunk(\"\\x3c!--F!--\\x3e\"),\n   formStateMarkerIsNotMatching = stringToPrecomputedChunk(\"\\x3c!--F--\\x3e\");\n@@ -2727,6 +2756,22 @@ function preloadLateStyles(styleQueue) {\n   styleQueue.sheets.forEach(preloadLateStyle, this);\n   styleQueue.sheets.clear();\n }\n+var blockingRenderChunkStart = stringToPrecomputedChunk(\n+    '<link rel=\"expect\" href=\"#'\n+  ),\n+  blockingRenderChunkEnd = stringToPrecomputedChunk('\" blocking=\"render\"/>'),\n+  completedShellIdAttributeStart = stringToPrecomputedChunk(' id=\"');\n+function pushCompletedShellIdAttribute(target, resumableState) {\n+  0 === (resumableState.instructions & 32) &&\n+    ((resumableState.instructions |= 32),\n+    target.push(\n+      completedShellIdAttributeStart,\n+      stringToChunk(\n+        escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\")\n+      ),\n+      attributeEnd\n+    ));\n+}\n var arrayFirstOpenBracket = stringToPrecomputedChunk(\"[\"),\n   arraySubsequentOpenBracket = stringToPrecomputedChunk(\",[\"),\n   arrayInterstitial = stringToPrecomputedChunk(\",\"),\n@@ -4175,6 +4220,7 @@ function RequestInstance(\n   this.fatalError = null;\n   this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n   this.completedPreambleSegments = this.completedRootSegment = null;\n+  this.byteSize = 0;\n   this.abortableTasks = abortSet;\n   this.pingedTasks = [];\n   this.clientRenderedBoundaries = [];\n@@ -4923,11 +4969,11 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           }\n         } else {\n           type = task.keyPath;\n-          var parentBoundary = task.blockedBoundary;\n-          ref = task.blockedPreamble;\n+          ref = task.blockedBoundary;\n+          propName$34 = task.blockedPreamble;\n           var parentHoistableState = task.hoistableState;\n-          propName$34 = task.blockedSegment;\n-          propName = props.fallback;\n+          propName = task.blockedSegment;\n+          var fallback = props.fallback;\n           props = props.children;\n           var fallbackAbortSet = new Set();\n           var newBoundary =\n@@ -4943,14 +4989,14 @@ function renderElement(request, task, keyPath, type, props, ref) {\n             (newBoundary.trackedContentKeyPath = keyPath);\n           var boundarySegment = createPendingSegment(\n             request,\n-            propName$34.chunks.length,\n+            propName.chunks.length,\n             newBoundary,\n             task.formatContext,\n             !1,\n             !1\n           );\n-          propName$34.children.push(boundarySegment);\n-          propName$34.lastPushedText = !1;\n+          propName.children.push(boundarySegment);\n+          propName.lastPushedText = !1;\n           var contentRootSegment = createPendingSegment(\n             request,\n             0,\n@@ -4970,19 +5016,20 @@ function renderElement(request, task, keyPath, type, props, ref) {\n             task.keyPath = newProps;\n             boundarySegment.status = 6;\n             try {\n-              renderNode(request, task, propName, -1),\n+              renderNode(request, task, fallback, -1),\n                 boundarySegment.lastPushedText &&\n                   boundarySegment.textEmbedded &&\n                   boundarySegment.chunks.push(textSeparator),\n-                (boundarySegment.status = 1);\n+                (boundarySegment.status = 1),\n+                finishedSegment(request, ref, boundarySegment);\n             } catch (thrownValue) {\n               throw (\n                 ((boundarySegment.status = 12 === request.status ? 3 : 4),\n                 thrownValue)\n               );\n             } finally {\n-              (task.blockedSegment = propName$34),\n-                (task.blockedPreamble = ref),\n+              (task.blockedSegment = propName),\n+                (task.blockedPreamble = propName$34),\n                 (task.keyPath = type);\n             }\n             task = createRenderTask(\n@@ -5018,10 +5065,13 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                   contentRootSegment.textEmbedded &&\n                   contentRootSegment.chunks.push(textSeparator),\n                 (contentRootSegment.status = 1),\n+                finishedSegment(request, newBoundary, contentRootSegment),\n                 queueCompletedSegment(newBoundary, contentRootSegment),\n-                0 === newBoundary.pendingTasks && 0 === newBoundary.status)\n+                0 === newBoundary.pendingTasks &&\n+                  0 === newBoundary.status &&\n+                  ((newBoundary.status = 1),\n+                  !(newBoundary.byteSize > request.progressiveChunkSize)))\n               ) {\n-                newBoundary.status = 1;\n                 0 === request.pendingRootTasks &&\n                   task.blockedPreamble &&\n                   preparePreamble(request);\n@@ -5048,18 +5098,18 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                 (newBoundary.errorDigest = initialState),\n                 untrackBoundary(request, newBoundary);\n             } finally {\n-              (task.blockedBoundary = parentBoundary),\n-                (task.blockedPreamble = ref),\n+              (task.blockedBoundary = ref),\n+                (task.blockedPreamble = propName$34),\n                 (task.hoistableState = parentHoistableState),\n-                (task.blockedSegment = propName$34),\n+                (task.blockedSegment = propName),\n                 (task.keyPath = type);\n             }\n             task = createRenderTask(\n               request,\n               null,\n-              propName,\n+              fallback,\n               -1,\n-              parentBoundary,\n+              ref,\n               boundarySegment,\n               newBoundary.fallbackPreamble,\n               newBoundary.fallbackState,\n@@ -5081,9 +5131,8 @@ function renderElement(request, task, keyPath, type, props, ref) {\n       switch (type.$$typeof) {\n         case REACT_FORWARD_REF_TYPE:\n           if (\"ref\" in props)\n-            for (newBoundary in ((newProps = {}), props))\n-              \"ref\" !== newBoundary &&\n-                (newProps[newBoundary] = props[newBoundary]);\n+            for (fallback in ((newProps = {}), props))\n+              \"ref\" !== fallback && (newProps[fallback] = props[fallback]);\n           else newProps = props;\n           type = renderWithHooks(\n             request,\n@@ -5173,6 +5222,7 @@ function resumeNode(request, task, segmentId, node, childIndex) {\n       (task.blockedSegment = resumedSegment),\n       renderNode(request, task, node, childIndex),\n       (resumedSegment.status = 1),\n+      finishedSegment(request, blockedBoundary, resumedSegment),\n       null === blockedBoundary\n         ? (request.completedRootSegment = resumedSegment)\n         : (queueCompletedSegment(blockedBoundary, resumedSegment),\n@@ -6109,6 +6159,16 @@ function queueCompletedSegment(boundary, segment) {\n     1 === childSegment.status && queueCompletedSegment(boundary, childSegment);\n   } else boundary.completedSegments.push(segment);\n }\n+function finishedSegment(request, boundary, segment) {\n+  if (null !== byteLengthOfChunk) {\n+    segment = segment.chunks;\n+    for (var segmentByteSize = 0, i = 0; i < segment.length; i++)\n+      segmentByteSize += segment[i].byteLength;\n+    null === boundary\n+      ? (request.byteSize += segmentByteSize)\n+      : (boundary.byteSize += segmentByteSize);\n+  }\n+}\n function finishedTask(request, boundary, segment) {\n   if (null === boundary) {\n     if (null !== segment && segment.parentFlushed) {\n@@ -6132,8 +6192,12 @@ function finishedTask(request, boundary, segment) {\n             boundary.parentFlushed &&\n               request.completedBoundaries.push(boundary),\n             1 === boundary.status &&\n-              (boundary.fallbackAbortableTasks.forEach(abortTaskSoft, request),\n-              boundary.fallbackAbortableTasks.clear(),\n+              (boundary.byteSize > request.progressiveChunkSize ||\n+                (boundary.fallbackAbortableTasks.forEach(\n+                  abortTaskSoft,\n+                  request\n+                ),\n+                boundary.fallbackAbortableTasks.clear()),\n               0 === request.pendingRootTasks &&\n                 null === request.trackedPostpones &&\n                 null !== boundary.contentPreamble &&\n@@ -6244,6 +6308,11 @@ function performWork(request$jscomp$1) {\n                     segment$jscomp$0.chunks.push(textSeparator),\n                   task.abortSet.delete(task),\n                   (segment$jscomp$0.status = 1),\n+                  finishedSegment(\n+                    request,\n+                    task.blockedBoundary,\n+                    segment$jscomp$0\n+                  ),\n                   finishedTask(request, task.blockedBoundary, segment$jscomp$0);\n               } catch (thrownValue) {\n                 resetHooksState();\n@@ -6573,6 +6642,7 @@ function flushCompletedBoundary(request, destination, boundary) {\n   var scriptFormat = 0 === completedSegments.streamingFormat;\n   scriptFormat\n     ? (writeChunk(destination, request.startInlineScript),\n+      writeChunk(destination, endOfStartTag),\n       requiresStyleInsertion\n         ? 0 === (completedSegments.instructions & 2)\n           ? ((completedSegments.instructions |= 10),\n@@ -6634,6 +6704,7 @@ function flushPartiallyCompletedSegment(\n   request = request.renderState;\n   (segment = 0 === boundary.streamingFormat)\n     ? (writeChunk(destination, request.startInlineScript),\n+      writeChunk(destination, endOfStartTag),\n       0 === (boundary.instructions & 1)\n         ? ((boundary.instructions |= 1),\n           writeChunk(destination, completeSegmentScript1Full))\n@@ -6663,14 +6734,14 @@ function flushCompletedQueues(request, destination) {\n         if (5 === completedRootSegment.status) return;\n         var completedPreambleSegments = request.completedPreambleSegments;\n         if (null === completedPreambleSegments) return;\n-        var renderState = request.renderState;\n+        var resumableState = request.resumableState,\n+          renderState = request.renderState;\n         if (\n           (0 !== request.allPendingTasks ||\n             null !== request.trackedPostpones) &&\n           renderState.externalRuntimeScript\n         ) {\n           var _renderState$external = renderState.externalRuntimeScript,\n-            resumableState = request.resumableState,\n             src = _renderState$external.src,\n             chunks = _renderState$external.chunks;\n           resumableState.scriptResources.hasOwnProperty(src) ||\n@@ -6717,26 +6788,23 @@ function flushCompletedQueues(request, destination) {\n         renderState.scripts.clear();\n         renderState.bulkPreloads.forEach(flushResource, destination);\n         renderState.bulkPreloads.clear();\n+        if (htmlChunks || headChunks) {\n+          var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+          writeChunk(destination, blockingRenderChunkStart);\n+          writeChunk(destination, stringToChunk(escapeTextForBrowser(shellId)));\n+          writeChunk(destination, blockingRenderChunkEnd);\n+        }\n         var hoistableChunks = renderState.hoistableChunks;\n         for (i$jscomp$0 = 0; i$jscomp$0 < hoistableChunks.length; i$jscomp$0++)\n           writeChunk(destination, hoistableChunks[i$jscomp$0]);\n         for (\n-          renderState = hoistableChunks.length = 0;\n-          renderState < completedPreambleSegments.length;\n-          renderState++\n+          resumableState = hoistableChunks.length = 0;\n+          resumableState < completedPreambleSegments.length;\n+          resumableState++\n         ) {\n-          var segments = completedPreambleSegments[renderState];\n-          for (\n-            _renderState$external = 0;\n-            _renderState$external < segments.length;\n-            _renderState$external++\n-          )\n-            flushSegment(\n-              request,\n-              destination,\n-              segments[_renderState$external],\n-              null\n-            );\n+          var segments = completedPreambleSegments[resumableState];\n+          for (renderState = 0; renderState < segments.length; renderState++)\n+            flushSegment(request, destination, segments[renderState], null);\n         }\n         var preamble$jscomp$0 = request.renderState.preamble,\n           headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n@@ -6752,33 +6820,48 @@ function flushCompletedQueues(request, destination) {\n             writeChunk(destination, bodyChunks[completedPreambleSegments]);\n         flushSegment(request, destination, completedRootSegment, null);\n         request.completedRootSegment = null;\n-        writeBootstrap(destination, request.renderState);\n+        var resumableState$jscomp$0 = request.resumableState,\n+          renderState$jscomp$0 = request.renderState,\n+          preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+        if (\n+          (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+          0 === (resumableState$jscomp$0.instructions & 32)\n+        ) {\n+          var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+          bootstrapChunks.push(startChunkForTag(\"template\"));\n+          pushCompletedShellIdAttribute(\n+            bootstrapChunks,\n+            resumableState$jscomp$0\n+          );\n+          bootstrapChunks.push(endOfStartTag, endChunkForTag(\"template\"));\n+        }\n+        writeBootstrap(destination, renderState$jscomp$0);\n       }\n-      var renderState$jscomp$0 = request.renderState;\n+      var renderState$jscomp$1 = request.renderState;\n       completedRootSegment = 0;\n-      var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+      var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < viewportChunks$jscomp$0.length;\n         completedRootSegment++\n       )\n         writeChunk(destination, viewportChunks$jscomp$0[completedRootSegment]);\n       viewportChunks$jscomp$0.length = 0;\n-      renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-      renderState$jscomp$0.preconnects.clear();\n-      renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.fontPreloads.clear();\n-      renderState$jscomp$0.highImagePreloads.forEach(\n+      renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+      renderState$jscomp$1.preconnects.clear();\n+      renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.fontPreloads.clear();\n+      renderState$jscomp$1.highImagePreloads.forEach(\n         flushResource,\n         destination\n       );\n-      renderState$jscomp$0.highImagePreloads.clear();\n-      renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-      renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-      renderState$jscomp$0.scripts.clear();\n-      renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.bulkPreloads.clear();\n-      var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+      renderState$jscomp$1.highImagePreloads.clear();\n+      renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+      renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+      renderState$jscomp$1.scripts.clear();\n+      renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.bulkPreloads.clear();\n+      var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -6789,45 +6872,46 @@ function flushCompletedQueues(request, destination) {\n       var clientRenderedBoundaries = request.clientRenderedBoundaries;\n       for (i = 0; i < clientRenderedBoundaries.length; i++) {\n         var boundary = clientRenderedBoundaries[i];\n-        renderState$jscomp$0 = destination;\n-        var resumableState$jscomp$0 = request.resumableState,\n-          renderState$jscomp$1 = request.renderState,\n+        renderState$jscomp$1 = destination;\n+        var resumableState$jscomp$1 = request.resumableState,\n+          renderState$jscomp$2 = request.renderState,\n           id = boundary.rootSegmentID,\n           errorDigest = boundary.errorDigest,\n-          scriptFormat = 0 === resumableState$jscomp$0.streamingFormat;\n+          scriptFormat = 0 === resumableState$jscomp$1.streamingFormat;\n         scriptFormat\n           ? (writeChunk(\n-              renderState$jscomp$0,\n-              renderState$jscomp$1.startInlineScript\n+              renderState$jscomp$1,\n+              renderState$jscomp$2.startInlineScript\n             ),\n-            0 === (resumableState$jscomp$0.instructions & 4)\n-              ? ((resumableState$jscomp$0.instructions |= 4),\n-                writeChunk(renderState$jscomp$0, clientRenderScript1Full))\n-              : writeChunk(renderState$jscomp$0, clientRenderScript1Partial))\n-          : writeChunk(renderState$jscomp$0, clientRenderData1);\n-        writeChunk(renderState$jscomp$0, renderState$jscomp$1.boundaryPrefix);\n-        writeChunk(renderState$jscomp$0, stringToChunk(id.toString(16)));\n-        scriptFormat && writeChunk(renderState$jscomp$0, clientRenderScript1A);\n+            writeChunk(renderState$jscomp$1, endOfStartTag),\n+            0 === (resumableState$jscomp$1.instructions & 4)\n+              ? ((resumableState$jscomp$1.instructions |= 4),\n+                writeChunk(renderState$jscomp$1, clientRenderScript1Full))\n+              : writeChunk(renderState$jscomp$1, clientRenderScript1Partial))\n+          : writeChunk(renderState$jscomp$1, clientRenderData1);\n+        writeChunk(renderState$jscomp$1, renderState$jscomp$2.boundaryPrefix);\n+        writeChunk(renderState$jscomp$1, stringToChunk(id.toString(16)));\n+        scriptFormat && writeChunk(renderState$jscomp$1, clientRenderScript1A);\n         errorDigest &&\n           (scriptFormat\n             ? (writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 clientRenderErrorScriptArgInterstitial\n               ),\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 stringToChunk(\n                   escapeJSStringsForInstructionScripts(errorDigest || \"\")\n                 )\n               ))\n-            : (writeChunk(renderState$jscomp$0, clientRenderData2),\n+            : (writeChunk(renderState$jscomp$1, clientRenderData2),\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 stringToChunk(escapeTextForBrowser(errorDigest || \"\"))\n               )));\n         var JSCompiler_inline_result = scriptFormat\n-          ? writeChunkAndReturn(renderState$jscomp$0, clientRenderScriptEnd)\n-          : writeChunkAndReturn(renderState$jscomp$0, dataElementQuotedEnd);\n+          ? writeChunkAndReturn(renderState$jscomp$1, clientRenderScriptEnd)\n+          : writeChunkAndReturn(renderState$jscomp$1, dataElementQuotedEnd);\n         if (!JSCompiler_inline_result) {\n           request.destination = null;\n           i++;\n@@ -7035,6 +7119,7 @@ function getPostponedState(request) {\n     resumableState.scriptResources = {};\n     resumableState.moduleUnknownResources = {};\n     resumableState.moduleScriptResources = {};\n+    resumableState.instructions = 0;\n   }\n   return {\n     nextSegmentId: request.nextSegmentId,\n@@ -7047,11 +7132,11 @@ function getPostponedState(request) {\n }\n function ensureCorrectIsomorphicReactVersion() {\n   var isomorphicReactPackageVersion = React.version;\n-  if (\"19.2.0-experimental-197d6a04-20250424\" !== isomorphicReactPackageVersion)\n+  if (\"19.2.0-experimental-5dc00d6b-20250428\" !== isomorphicReactPackageVersion)\n     throw Error(\n       'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n         (isomorphicReactPackageVersion +\n-          \"\\n  - react-dom:  19.2.0-experimental-197d6a04-20250424\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+          \"\\n  - react-dom:  19.2.0-experimental-5dc00d6b-20250428\\nLearn more: https://react.dev/warnings/version-mismatch\")\n     );\n }\n ensureCorrectIsomorphicReactVersion();\n@@ -7316,4 +7401,4 @@ const setTimeoutOrImmediate =\n     ? globalThis['set' + 'Immediate']\n     : setTimeout;\n \n-exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";"
        },
        {
            "sha": "596b3b1da6a0dc78bf485c14e36191ee9b52408c",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server.node.development.js",
            "status": "modified",
            "additions": 195,
            "deletions": 98,
            "changes": 293,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.node.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.node.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.node.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -269,6 +269,11 @@\n         );\n       return content;\n     }\n+    function byteLengthOfChunk(chunk) {\n+      return \"string\" === typeof chunk\n+        ? Buffer.byteLength(chunk, \"utf8\")\n+        : chunk.byteLength;\n+    }\n     function readAsDataURL(blob) {\n       return blob.arrayBuffer().then(function (arrayBuffer) {\n         arrayBuffer = Buffer.from(arrayBuffer).toString(\"base64\");\n@@ -763,7 +768,7 @@\n           void 0 === nonce\n             ? startInlineScript\n             : stringToPrecomputedChunk(\n-                '<script nonce=\"' + escapeTextForBrowser(nonce) + '\">'\n+                '<script nonce=\"' + escapeTextForBrowser(nonce) + '\"'\n               ),\n         idPrefix = resumableState.idPrefix,\n         bootstrapChunks = [],\n@@ -772,11 +777,13 @@\n         bootstrapScripts = resumableState.bootstrapScripts,\n         bootstrapModules = resumableState.bootstrapModules;\n       void 0 !== bootstrapScriptContent &&\n+        (bootstrapChunks.push(inlineScriptWithNonce),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n         bootstrapChunks.push(\n-          inlineScriptWithNonce,\n+          endOfStartTag,\n           escapeEntireInlineScriptContent(bootstrapScriptContent),\n           endInlineScript\n-        );\n+        ));\n       void 0 !== externalRuntimeConfig &&\n         (\"string\" === typeof externalRuntimeConfig\n           ? ((externalRuntimeScript = {\n@@ -897,20 +904,28 @@\n             ),\n             bootstrapChunks.push(\n               startScriptSrc,\n-              escapeTextForBrowser(externalRuntimeScript)\n+              escapeTextForBrowser(externalRuntimeScript),\n+              attributeEnd\n             ),\n             nonce &&\n-              bootstrapChunks.push(scriptNonce, escapeTextForBrowser(nonce)),\n+              bootstrapChunks.push(\n+                scriptNonce,\n+                escapeTextForBrowser(nonce),\n+                attributeEnd\n+              ),\n             \"string\" === typeof maxHeadersLength &&\n               bootstrapChunks.push(\n                 scriptIntegirty,\n-                escapeTextForBrowser(maxHeadersLength)\n+                escapeTextForBrowser(maxHeadersLength),\n+                attributeEnd\n               ),\n             \"string\" === typeof importMap &&\n               bootstrapChunks.push(\n                 scriptCrossOrigin,\n-                escapeTextForBrowser(importMap)\n+                escapeTextForBrowser(importMap),\n+                attributeEnd\n               ),\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n             bootstrapChunks.push(endAsyncScript);\n       if (void 0 !== bootstrapModules)\n         for (\n@@ -947,20 +962,28 @@\n             ),\n             bootstrapChunks.push(\n               startModuleSrc,\n-              escapeTextForBrowser(idPrefix)\n+              escapeTextForBrowser(idPrefix),\n+              attributeEnd\n             ),\n             nonce &&\n-              bootstrapChunks.push(scriptNonce, escapeTextForBrowser(nonce)),\n+              bootstrapChunks.push(\n+                scriptNonce,\n+                escapeTextForBrowser(nonce),\n+                attributeEnd\n+              ),\n             \"string\" === typeof importMap &&\n               bootstrapChunks.push(\n                 scriptIntegirty,\n-                escapeTextForBrowser(importMap)\n+                escapeTextForBrowser(importMap),\n+                attributeEnd\n               ),\n             \"string\" === typeof externalRuntimeScript &&\n               bootstrapChunks.push(\n                 scriptCrossOrigin,\n-                escapeTextForBrowser(externalRuntimeScript)\n+                escapeTextForBrowser(externalRuntimeScript),\n+                attributeEnd\n               ),\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n             bootstrapChunks.push(endAsyncScript);\n       return onHeaders;\n     }\n@@ -1632,14 +1655,29 @@\n       return content;\n     }\n     function injectFormReplayingRuntime(resumableState, renderState) {\n-      (resumableState.instructions & 16) !== NothingSent ||\n-        renderState.externalRuntimeScript ||\n-        ((resumableState.instructions |= 16),\n-        renderState.bootstrapChunks.unshift(\n-          renderState.startInlineScript,\n-          formReplayingRuntimeScript,\n-          endInlineScript\n-        ));\n+      if (\n+        (resumableState.instructions & 16) === NothingSent &&\n+        !renderState.externalRuntimeScript\n+      ) {\n+        resumableState.instructions |= 16;\n+        var preamble = renderState.preamble,\n+          bootstrapChunks = renderState.bootstrapChunks;\n+        (preamble.htmlChunks || preamble.headChunks) &&\n+        0 === bootstrapChunks.length\n+          ? (bootstrapChunks.push(renderState.startInlineScript),\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+            bootstrapChunks.push(\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              endInlineScript\n+            ))\n+          : bootstrapChunks.unshift(\n+              renderState.startInlineScript,\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              endInlineScript\n+            );\n+      }\n     }\n     function pushLinkImpl(target, props) {\n       target.push(startChunkForTag(\"link\"));\n@@ -3373,6 +3411,15 @@\n       styleQueue.sheets.forEach(preloadLateStyle, this);\n       styleQueue.sheets.clear();\n     }\n+    function pushCompletedShellIdAttribute(target, resumableState) {\n+      (resumableState.instructions & SentCompletedShellId) === NothingSent &&\n+        ((resumableState.instructions |= SentCompletedShellId),\n+        target.push(\n+          completedShellIdAttributeStart,\n+          escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\"),\n+          attributeEnd\n+        ));\n+    }\n     function writeStyleResourceDependenciesInJS(destination, hoistableState) {\n       writeChunk(destination, arrayFirstOpenBracket);\n       var nextArrayOpenBrackChunk = arrayFirstOpenBracket;\n@@ -4545,6 +4592,7 @@\n       this.fatalError = null;\n       this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n       this.completedPreambleSegments = this.completedRootSegment = null;\n+      this.byteSize = 0;\n       this.abortableTasks = abortSet;\n       this.pingedTasks = [];\n       this.clientRenderedBoundaries = [];\n@@ -5852,7 +5900,8 @@\n                     boundarySegment.lastPushedText &&\n                       boundarySegment.textEmbedded &&\n                       boundarySegment.chunks.push(textSeparator),\n-                    (boundarySegment.status = COMPLETED);\n+                    (boundarySegment.status = COMPLETED),\n+                    finishedSegment(request, parentBoundary, boundarySegment);\n                 } catch (thrownValue) {\n                   throw (\n                     ((boundarySegment.status = 12 === request.status ? 3 : 4),\n@@ -5898,11 +5947,13 @@\n                       contentRootSegment.textEmbedded &&\n                       contentRootSegment.chunks.push(textSeparator),\n                     (contentRootSegment.status = COMPLETED),\n+                    finishedSegment(request, newBoundary, contentRootSegment),\n                     queueCompletedSegment(newBoundary, contentRootSegment),\n                     0 === newBoundary.pendingTasks &&\n-                      newBoundary.status === PENDING)\n+                      newBoundary.status === PENDING &&\n+                      ((newBoundary.status = COMPLETED),\n+                      !(newBoundary.byteSize > request.progressiveChunkSize)))\n                   ) {\n-                    newBoundary.status = COMPLETED;\n                     0 === request.pendingRootTasks &&\n                       task.blockedPreamble &&\n                       preparePreamble(request);\n@@ -6110,6 +6161,7 @@\n           (task.blockedSegment = resumedSegment),\n           renderNode(request, task, node, childIndex),\n           (resumedSegment.status = COMPLETED),\n+          finishedSegment(request, blockedBoundary, resumedSegment),\n           null === blockedBoundary\n             ? (request.completedRootSegment = resumedSegment)\n             : (queueCompletedSegment(blockedBoundary, resumedSegment),\n@@ -7278,6 +7330,16 @@\n           queueCompletedSegment(boundary, childSegment);\n       } else boundary.completedSegments.push(segment);\n     }\n+    function finishedSegment(request, boundary, segment) {\n+      if (null !== byteLengthOfChunk) {\n+        segment = segment.chunks;\n+        for (var segmentByteSize = 0, i = 0; i < segment.length; i++)\n+          segmentByteSize += byteLengthOfChunk(segment[i]);\n+        null === boundary\n+          ? (request.byteSize += segmentByteSize)\n+          : (boundary.byteSize += segmentByteSize);\n+      }\n+    }\n     function finishedTask(request, boundary, segment) {\n       if (null === boundary) {\n         if (null !== segment && segment.parentFlushed) {\n@@ -7301,11 +7363,12 @@\n                 boundary.parentFlushed &&\n                   request.completedBoundaries.push(boundary),\n                 boundary.status === COMPLETED &&\n-                  (boundary.fallbackAbortableTasks.forEach(\n-                    abortTaskSoft,\n-                    request\n-                  ),\n-                  boundary.fallbackAbortableTasks.clear(),\n+                  (boundary.byteSize > request.progressiveChunkSize ||\n+                    (boundary.fallbackAbortableTasks.forEach(\n+                      abortTaskSoft,\n+                      request\n+                    ),\n+                    boundary.fallbackAbortableTasks.clear()),\n                   0 === request.pendingRootTasks &&\n                     null === request.trackedPostpones &&\n                     null !== boundary.contentPreamble &&\n@@ -7430,6 +7493,11 @@\n                         segment$jscomp$0.chunks.push(textSeparator),\n                       task$jscomp$0.abortSet.delete(task$jscomp$0),\n                       (segment$jscomp$0.status = COMPLETED),\n+                      finishedSegment(\n+                        request,\n+                        task$jscomp$0.blockedBoundary,\n+                        segment$jscomp$0\n+                      ),\n                       finishedTask(\n                         request,\n                         task$jscomp$0.blockedBoundary,\n@@ -7846,6 +7914,7 @@\n         completedSegments.streamingFormat === ScriptStreamingFormat;\n       scriptFormat\n         ? (writeChunk(destination, request.startInlineScript),\n+          writeChunk(destination, endOfStartTag),\n           requiresStyleInsertion\n             ? (completedSegments.instructions &\n                 SentCompleteBoundaryFunction) ===\n@@ -7934,6 +8003,7 @@\n       request = request.renderState;\n       (segment = boundary.streamingFormat === ScriptStreamingFormat)\n         ? (writeChunk(destination, request.startInlineScript),\n+          writeChunk(destination, endOfStartTag),\n           (boundary.instructions & SentCompleteSegmentFunction) === NothingSent\n             ? ((boundary.instructions |= SentCompleteSegmentFunction),\n               writeChunk(destination, completeSegmentScript1Full))\n@@ -7964,14 +8034,14 @@\n             if (completedRootSegment.status === POSTPONED) return;\n             var completedPreambleSegments = request.completedPreambleSegments;\n             if (null === completedPreambleSegments) return;\n-            var renderState = request.renderState;\n+            var resumableState = request.resumableState,\n+              renderState = request.renderState;\n             if (\n               (0 !== request.allPendingTasks ||\n                 null !== request.trackedPostpones) &&\n               renderState.externalRuntimeScript\n             ) {\n               var _renderState$external = renderState.externalRuntimeScript,\n-                resumableState = request.resumableState,\n                 src = _renderState$external.src,\n                 chunks = _renderState$external.chunks;\n               resumableState.scriptResources.hasOwnProperty(src) ||\n@@ -8034,6 +8104,12 @@\n             renderState.scripts.clear();\n             renderState.bulkPreloads.forEach(flushResource, destination);\n             renderState.bulkPreloads.clear();\n+            if (htmlChunks || headChunks) {\n+              var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+              writeChunk(destination, blockingRenderChunkStart);\n+              writeChunk(destination, escapeTextForBrowser(shellId));\n+              writeChunk(destination, blockingRenderChunkEnd);\n+            }\n             var hoistableChunks = renderState.hoistableChunks;\n             for (\n               i$jscomp$0 = 0;\n@@ -8042,22 +8118,17 @@\n             )\n               writeChunk(destination, hoistableChunks[i$jscomp$0]);\n             for (\n-              renderState = hoistableChunks.length = 0;\n-              renderState < completedPreambleSegments.length;\n-              renderState++\n+              resumableState = hoistableChunks.length = 0;\n+              resumableState < completedPreambleSegments.length;\n+              resumableState++\n             ) {\n-              var segments = completedPreambleSegments[renderState];\n+              var segments = completedPreambleSegments[resumableState];\n               for (\n-                _renderState$external = 0;\n-                _renderState$external < segments.length;\n-                _renderState$external++\n+                renderState = 0;\n+                renderState < segments.length;\n+                renderState++\n               )\n-                flushSegment(\n-                  request,\n-                  destination,\n-                  segments[_renderState$external],\n-                  null\n-                );\n+                flushSegment(request, destination, segments[renderState], null);\n             }\n             var preamble$jscomp$0 = request.renderState.preamble,\n               headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n@@ -8073,11 +8144,27 @@\n                 writeChunk(destination, bodyChunks[completedPreambleSegments]);\n             flushSegment(request, destination, completedRootSegment, null);\n             request.completedRootSegment = null;\n-            writeBootstrap(destination, request.renderState);\n+            var resumableState$jscomp$0 = request.resumableState,\n+              renderState$jscomp$0 = request.renderState,\n+              preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+            if (\n+              (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+              (resumableState$jscomp$0.instructions & SentCompletedShellId) ===\n+                NothingSent\n+            ) {\n+              var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+              bootstrapChunks.push(startChunkForTag(\"template\"));\n+              pushCompletedShellIdAttribute(\n+                bootstrapChunks,\n+                resumableState$jscomp$0\n+              );\n+              bootstrapChunks.push(endOfStartTag, endChunkForTag(\"template\"));\n+            }\n+            writeBootstrap(destination, renderState$jscomp$0);\n           }\n-          var renderState$jscomp$0 = request.renderState;\n+          var renderState$jscomp$1 = request.renderState;\n           completedRootSegment = 0;\n-          var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+          var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < viewportChunks$jscomp$0.length;\n@@ -8088,21 +8175,21 @@\n               viewportChunks$jscomp$0[completedRootSegment]\n             );\n           viewportChunks$jscomp$0.length = 0;\n-          renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-          renderState$jscomp$0.preconnects.clear();\n-          renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.fontPreloads.clear();\n-          renderState$jscomp$0.highImagePreloads.forEach(\n+          renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+          renderState$jscomp$1.preconnects.clear();\n+          renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.fontPreloads.clear();\n+          renderState$jscomp$1.highImagePreloads.forEach(\n             flushResource,\n             destination\n           );\n-          renderState$jscomp$0.highImagePreloads.clear();\n-          renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-          renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-          renderState$jscomp$0.scripts.clear();\n-          renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.bulkPreloads.clear();\n-          var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+          renderState$jscomp$1.highImagePreloads.clear();\n+          renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+          renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+          renderState$jscomp$1.scripts.clear();\n+          renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.bulkPreloads.clear();\n+          var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -8116,40 +8203,41 @@\n           var clientRenderedBoundaries = request.clientRenderedBoundaries;\n           for (i = 0; i < clientRenderedBoundaries.length; i++) {\n             var boundary = clientRenderedBoundaries[i];\n-            renderState$jscomp$0 = destination;\n-            var resumableState$jscomp$0 = request.resumableState,\n-              renderState$jscomp$1 = request.renderState,\n+            renderState$jscomp$1 = destination;\n+            var resumableState$jscomp$1 = request.resumableState,\n+              renderState$jscomp$2 = request.renderState,\n               id = boundary.rootSegmentID,\n               errorDigest = boundary.errorDigest,\n               errorMessage = boundary.errorMessage,\n               errorStack = boundary.errorStack,\n               errorComponentStack = boundary.errorComponentStack,\n               scriptFormat =\n-                resumableState$jscomp$0.streamingFormat ===\n+                resumableState$jscomp$1.streamingFormat ===\n                 ScriptStreamingFormat;\n             scriptFormat\n               ? (writeChunk(\n-                  renderState$jscomp$0,\n-                  renderState$jscomp$1.startInlineScript\n+                  renderState$jscomp$1,\n+                  renderState$jscomp$2.startInlineScript\n                 ),\n-                (resumableState$jscomp$0.instructions &\n+                writeChunk(renderState$jscomp$1, endOfStartTag),\n+                (resumableState$jscomp$1.instructions &\n                   SentClientRenderFunction) ===\n                 NothingSent\n-                  ? ((resumableState$jscomp$0.instructions |=\n+                  ? ((resumableState$jscomp$1.instructions |=\n                       SentClientRenderFunction),\n-                    writeChunk(renderState$jscomp$0, clientRenderScript1Full))\n+                    writeChunk(renderState$jscomp$1, clientRenderScript1Full))\n                   : writeChunk(\n-                      renderState$jscomp$0,\n+                      renderState$jscomp$1,\n                       clientRenderScript1Partial\n                     ))\n-              : writeChunk(renderState$jscomp$0, clientRenderData1);\n+              : writeChunk(renderState$jscomp$1, clientRenderData1);\n             writeChunk(\n-              renderState$jscomp$0,\n-              renderState$jscomp$1.boundaryPrefix\n+              renderState$jscomp$1,\n+              renderState$jscomp$2.boundaryPrefix\n             );\n-            writeChunk(renderState$jscomp$0, id.toString(16));\n+            writeChunk(renderState$jscomp$1, id.toString(16));\n             scriptFormat &&\n-              writeChunk(renderState$jscomp$0, clientRenderScript1A);\n+              writeChunk(renderState$jscomp$1, clientRenderScript1A);\n             if (\n               errorDigest ||\n               errorMessage ||\n@@ -8158,66 +8246,66 @@\n             )\n               scriptFormat\n                 ? (writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     clientRenderErrorScriptArgInterstitial\n                   ),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     escapeJSStringsForInstructionScripts(errorDigest || \"\")\n                   ))\n-                : (writeChunk(renderState$jscomp$0, clientRenderData2),\n+                : (writeChunk(renderState$jscomp$1, clientRenderData2),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     escapeTextForBrowser(errorDigest || \"\")\n                   ));\n             if (errorMessage || errorStack || errorComponentStack)\n               scriptFormat\n                 ? (writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     clientRenderErrorScriptArgInterstitial\n                   ),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     escapeJSStringsForInstructionScripts(errorMessage || \"\")\n                   ))\n-                : (writeChunk(renderState$jscomp$0, clientRenderData3),\n+                : (writeChunk(renderState$jscomp$1, clientRenderData3),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     escapeTextForBrowser(errorMessage || \"\")\n                   ));\n             if (errorStack || errorComponentStack)\n               scriptFormat\n                 ? (writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     clientRenderErrorScriptArgInterstitial\n                   ),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     escapeJSStringsForInstructionScripts(errorStack || \"\")\n                   ))\n-                : (writeChunk(renderState$jscomp$0, clientRenderData4),\n+                : (writeChunk(renderState$jscomp$1, clientRenderData4),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     escapeTextForBrowser(errorStack || \"\")\n                   ));\n             errorComponentStack &&\n               (scriptFormat\n                 ? (writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     clientRenderErrorScriptArgInterstitial\n                   ),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     escapeJSStringsForInstructionScripts(errorComponentStack)\n                   ))\n-                : (writeChunk(renderState$jscomp$0, clientRenderData5),\n+                : (writeChunk(renderState$jscomp$1, clientRenderData5),\n                   writeChunk(\n-                    renderState$jscomp$0,\n+                    renderState$jscomp$1,\n                     escapeTextForBrowser(errorComponentStack)\n                   )));\n             var JSCompiler_inline_result = scriptFormat\n-              ? writeChunkAndReturn(renderState$jscomp$0, clientRenderScriptEnd)\n-              : writeChunkAndReturn(renderState$jscomp$0, clientRenderDataEnd);\n+              ? writeChunkAndReturn(renderState$jscomp$1, clientRenderScriptEnd)\n+              : writeChunkAndReturn(renderState$jscomp$1, clientRenderDataEnd);\n             if (!JSCompiler_inline_result) {\n               request.destination = null;\n               i++;\n@@ -8435,6 +8523,7 @@\n         resumableState.scriptResources = {};\n         resumableState.moduleUnknownResources = {};\n         resumableState.moduleScriptResources = {};\n+        resumableState.instructions = NothingSent;\n       }\n       return {\n         nextSegmentId: request.nextSegmentId,\n@@ -8447,11 +8536,11 @@\n     }\n     function ensureCorrectIsomorphicReactVersion() {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-experimental-197d6a04-20250424\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-experimental-5dc00d6b-20250428\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-experimental-197d6a04-20250424\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-experimental-5dc00d6b-20250428\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     }\n     function createDrainHandler(destination, request) {\n@@ -9608,18 +9697,19 @@\n       SentCompleteBoundaryFunction = 2,\n       SentClientRenderFunction = 4,\n       SentStyleInsertionFunction = 8,\n+      SentCompletedShellId = 32,\n       EXISTS = null,\n       PRELOAD_NO_CREDS = [];\n     Object.freeze(PRELOAD_NO_CREDS);\n     var dataElementQuotedEnd = stringToPrecomputedChunk('\"></template>'),\n-      startInlineScript = stringToPrecomputedChunk(\"<script>\"),\n+      startInlineScript = stringToPrecomputedChunk(\"<script\"),\n       endInlineScript = stringToPrecomputedChunk(\"\\x3c/script>\"),\n       startScriptSrc = stringToPrecomputedChunk('<script src=\"'),\n       startModuleSrc = stringToPrecomputedChunk('<script type=\"module\" src=\"'),\n-      scriptNonce = stringToPrecomputedChunk('\" nonce=\"'),\n-      scriptIntegirty = stringToPrecomputedChunk('\" integrity=\"'),\n-      scriptCrossOrigin = stringToPrecomputedChunk('\" crossorigin=\"'),\n-      endAsyncScript = stringToPrecomputedChunk('\" async=\"\">\\x3c/script>'),\n+      scriptNonce = stringToPrecomputedChunk(' nonce=\"'),\n+      scriptIntegirty = stringToPrecomputedChunk(' integrity=\"'),\n+      scriptCrossOrigin = stringToPrecomputedChunk(' crossorigin=\"'),\n+      endAsyncScript = stringToPrecomputedChunk(' async=\"\">\\x3c/script>'),\n       scriptRegex = /(<\\/|<)(s)(cript)/gi,\n       importMapScriptStart = stringToPrecomputedChunk(\n         '<script type=\"importmap\">'\n@@ -9808,6 +9898,13 @@\n       spaceSeparator = stringToPrecomputedChunk(\" \"),\n       styleTagResourceOpen3 = stringToPrecomputedChunk('\">'),\n       styleTagResourceClose = stringToPrecomputedChunk(\"</style>\"),\n+      blockingRenderChunkStart = stringToPrecomputedChunk(\n+        '<link rel=\"expect\" href=\"#'\n+      ),\n+      blockingRenderChunkEnd = stringToPrecomputedChunk(\n+        '\" blocking=\"render\"/>'\n+      ),\n+      completedShellIdAttributeStart = stringToPrecomputedChunk(' id=\"'),\n       arrayFirstOpenBracket = stringToPrecomputedChunk(\"[\"),\n       arraySubsequentOpenBracket = stringToPrecomputedChunk(\",[\"),\n       arrayInterstitial = stringToPrecomputedChunk(\",\"),\n@@ -10247,5 +10344,5 @@\n         }\n       };\n     };\n-    exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+    exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";\n   })();"
        },
        {
            "sha": "d082d5cc0ac92706dfe10a1e8aa1dde96aa05c8d",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-server.node.production.js",
            "status": "modified",
            "additions": 198,
            "deletions": 102,
            "changes": 300,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.node.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.node.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-server.node.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -125,6 +125,11 @@ var textEncoder = new util.TextEncoder();\n function stringToPrecomputedChunk(content) {\n   return textEncoder.encode(content);\n }\n+function byteLengthOfChunk(chunk) {\n+  return \"string\" === typeof chunk\n+    ? Buffer.byteLength(chunk, \"utf8\")\n+    : chunk.byteLength;\n+}\n function readAsDataURL(blob) {\n   return blob.arrayBuffer().then(function (arrayBuffer) {\n     arrayBuffer = Buffer.from(arrayBuffer).toString(\"base64\");\n@@ -312,14 +317,14 @@ ReactDOMSharedInternals.d = {\n };\n var PRELOAD_NO_CREDS = [],\n   dataElementQuotedEnd = stringToPrecomputedChunk('\"></template>'),\n-  startInlineScript = stringToPrecomputedChunk(\"<script>\"),\n+  startInlineScript = stringToPrecomputedChunk(\"<script\"),\n   endInlineScript = stringToPrecomputedChunk(\"\\x3c/script>\"),\n   startScriptSrc = stringToPrecomputedChunk('<script src=\"'),\n   startModuleSrc = stringToPrecomputedChunk('<script type=\"module\" src=\"'),\n-  scriptNonce = stringToPrecomputedChunk('\" nonce=\"'),\n-  scriptIntegirty = stringToPrecomputedChunk('\" integrity=\"'),\n-  scriptCrossOrigin = stringToPrecomputedChunk('\" crossorigin=\"'),\n-  endAsyncScript = stringToPrecomputedChunk('\" async=\"\">\\x3c/script>'),\n+  scriptNonce = stringToPrecomputedChunk(' nonce=\"'),\n+  scriptIntegirty = stringToPrecomputedChunk(' integrity=\"'),\n+  scriptCrossOrigin = stringToPrecomputedChunk(' crossorigin=\"'),\n+  endAsyncScript = stringToPrecomputedChunk(' async=\"\">\\x3c/script>'),\n   scriptRegex = /(<\\/|<)(s)(cript)/gi;\n function scriptReplacer(match, prefix, s, suffix) {\n   return \"\" + prefix + (\"s\" === s ? \"\\\\u0073\" : \"\\\\u0053\") + suffix;\n@@ -340,7 +345,7 @@ function createRenderState(\n       void 0 === nonce\n         ? startInlineScript\n         : stringToPrecomputedChunk(\n-            '<script nonce=\"' + escapeTextForBrowser(nonce) + '\">'\n+            '<script nonce=\"' + escapeTextForBrowser(nonce) + '\"'\n           ),\n     idPrefix = resumableState.idPrefix,\n     bootstrapChunks = [],\n@@ -349,11 +354,13 @@ function createRenderState(\n     bootstrapScripts = resumableState.bootstrapScripts,\n     bootstrapModules = resumableState.bootstrapModules;\n   void 0 !== bootstrapScriptContent &&\n+    (bootstrapChunks.push(inlineScriptWithNonce),\n+    pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n     bootstrapChunks.push(\n-      inlineScriptWithNonce,\n+      endOfStartTag,\n       (\"\" + bootstrapScriptContent).replace(scriptRegex, scriptReplacer),\n       endInlineScript\n-    );\n+    ));\n   void 0 !== externalRuntimeConfig &&\n     (\"string\" === typeof externalRuntimeConfig\n       ? ((externalRuntimeScript = { src: externalRuntimeConfig, chunks: [] }),\n@@ -463,18 +470,30 @@ function createRenderState(\n         (externalRuntimeConfig = []),\n         pushLinkImpl(externalRuntimeConfig, maxHeadersLength),\n         onHeaders.bootstrapScripts.add(externalRuntimeConfig),\n-        bootstrapChunks.push(startScriptSrc, escapeTextForBrowser(idPrefix)),\n-        nonce && bootstrapChunks.push(scriptNonce, escapeTextForBrowser(nonce)),\n+        bootstrapChunks.push(\n+          startScriptSrc,\n+          escapeTextForBrowser(idPrefix),\n+          attributeEnd\n+        ),\n+        nonce &&\n+          bootstrapChunks.push(\n+            scriptNonce,\n+            escapeTextForBrowser(nonce),\n+            attributeEnd\n+          ),\n         \"string\" === typeof importMap &&\n           bootstrapChunks.push(\n             scriptIntegirty,\n-            escapeTextForBrowser(importMap)\n+            escapeTextForBrowser(importMap),\n+            attributeEnd\n           ),\n         \"string\" === typeof externalRuntimeScript &&\n           bootstrapChunks.push(\n             scriptCrossOrigin,\n-            escapeTextForBrowser(externalRuntimeScript)\n+            escapeTextForBrowser(externalRuntimeScript),\n+            attributeEnd\n           ),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n         bootstrapChunks.push(endAsyncScript);\n   if (void 0 !== bootstrapModules)\n     for (\n@@ -512,19 +531,28 @@ function createRenderState(\n         onHeaders.bootstrapScripts.add(maxHeadersLength),\n         bootstrapChunks.push(\n           startModuleSrc,\n-          escapeTextForBrowser(inlineScriptWithNonce)\n+          escapeTextForBrowser(inlineScriptWithNonce),\n+          attributeEnd\n         ),\n-        nonce && bootstrapChunks.push(scriptNonce, escapeTextForBrowser(nonce)),\n+        nonce &&\n+          bootstrapChunks.push(\n+            scriptNonce,\n+            escapeTextForBrowser(nonce),\n+            attributeEnd\n+          ),\n         \"string\" === typeof externalRuntimeScript &&\n           bootstrapChunks.push(\n             scriptIntegirty,\n-            escapeTextForBrowser(externalRuntimeScript)\n+            escapeTextForBrowser(externalRuntimeScript),\n+            attributeEnd\n           ),\n         \"string\" === typeof idPrefix &&\n           bootstrapChunks.push(\n             scriptCrossOrigin,\n-            escapeTextForBrowser(idPrefix)\n+            escapeTextForBrowser(idPrefix),\n+            attributeEnd\n           ),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n         bootstrapChunks.push(endAsyncScript);\n   return onHeaders;\n }\n@@ -1048,14 +1076,28 @@ var selectedMarkerAttribute = stringToPrecomputedChunk(' selected=\"\"'),\n     'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});'\n   );\n function injectFormReplayingRuntime(resumableState, renderState) {\n-  0 !== (resumableState.instructions & 16) ||\n-    renderState.externalRuntimeScript ||\n-    ((resumableState.instructions |= 16),\n-    renderState.bootstrapChunks.unshift(\n-      renderState.startInlineScript,\n-      formReplayingRuntimeScript,\n-      endInlineScript\n-    ));\n+  if (\n+    0 === (resumableState.instructions & 16) &&\n+    !renderState.externalRuntimeScript\n+  ) {\n+    resumableState.instructions |= 16;\n+    var preamble = renderState.preamble,\n+      bootstrapChunks = renderState.bootstrapChunks;\n+    (preamble.htmlChunks || preamble.headChunks) && 0 === bootstrapChunks.length\n+      ? (bootstrapChunks.push(renderState.startInlineScript),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(\n+          endOfStartTag,\n+          formReplayingRuntimeScript,\n+          endInlineScript\n+        ))\n+      : bootstrapChunks.unshift(\n+          renderState.startInlineScript,\n+          endOfStartTag,\n+          formReplayingRuntimeScript,\n+          endInlineScript\n+        );\n+  }\n }\n var formStateMarkerIsMatching = stringToPrecomputedChunk(\"\\x3c!--F!--\\x3e\"),\n   formStateMarkerIsNotMatching = stringToPrecomputedChunk(\"\\x3c!--F--\\x3e\");\n@@ -2630,6 +2672,20 @@ function preloadLateStyles(styleQueue) {\n   styleQueue.sheets.forEach(preloadLateStyle, this);\n   styleQueue.sheets.clear();\n }\n+var blockingRenderChunkStart = stringToPrecomputedChunk(\n+    '<link rel=\"expect\" href=\"#'\n+  ),\n+  blockingRenderChunkEnd = stringToPrecomputedChunk('\" blocking=\"render\"/>'),\n+  completedShellIdAttributeStart = stringToPrecomputedChunk(' id=\"');\n+function pushCompletedShellIdAttribute(target, resumableState) {\n+  0 === (resumableState.instructions & 32) &&\n+    ((resumableState.instructions |= 32),\n+    target.push(\n+      completedShellIdAttributeStart,\n+      escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\"),\n+      attributeEnd\n+    ));\n+}\n var arrayFirstOpenBracket = stringToPrecomputedChunk(\"[\"),\n   arraySubsequentOpenBracket = stringToPrecomputedChunk(\",[\"),\n   arrayInterstitial = stringToPrecomputedChunk(\",\"),\n@@ -4058,6 +4114,7 @@ function RequestInstance(\n   this.fatalError = null;\n   this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n   this.completedPreambleSegments = this.completedRootSegment = null;\n+  this.byteSize = 0;\n   this.abortableTasks = abortSet;\n   this.pingedTasks = [];\n   this.clientRenderedBoundaries = [];\n@@ -4803,11 +4860,11 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           }\n         } else {\n           type = task.keyPath;\n-          var parentBoundary = task.blockedBoundary;\n-          ref = task.blockedPreamble;\n+          ref = task.blockedBoundary;\n+          propName$34 = task.blockedPreamble;\n           var parentHoistableState = task.hoistableState;\n-          propName$34 = task.blockedSegment;\n-          propName = props.fallback;\n+          propName = task.blockedSegment;\n+          var fallback = props.fallback;\n           props = props.children;\n           var fallbackAbortSet = new Set();\n           var newBoundary =\n@@ -4823,14 +4880,14 @@ function renderElement(request, task, keyPath, type, props, ref) {\n             (newBoundary.trackedContentKeyPath = keyPath);\n           var boundarySegment = createPendingSegment(\n             request,\n-            propName$34.chunks.length,\n+            propName.chunks.length,\n             newBoundary,\n             task.formatContext,\n             !1,\n             !1\n           );\n-          propName$34.children.push(boundarySegment);\n-          propName$34.lastPushedText = !1;\n+          propName.children.push(boundarySegment);\n+          propName.lastPushedText = !1;\n           var contentRootSegment = createPendingSegment(\n             request,\n             0,\n@@ -4850,19 +4907,20 @@ function renderElement(request, task, keyPath, type, props, ref) {\n             task.keyPath = newProps;\n             boundarySegment.status = 6;\n             try {\n-              renderNode(request, task, propName, -1),\n+              renderNode(request, task, fallback, -1),\n                 boundarySegment.lastPushedText &&\n                   boundarySegment.textEmbedded &&\n                   boundarySegment.chunks.push(textSeparator),\n-                (boundarySegment.status = 1);\n+                (boundarySegment.status = 1),\n+                finishedSegment(request, ref, boundarySegment);\n             } catch (thrownValue) {\n               throw (\n                 ((boundarySegment.status = 12 === request.status ? 3 : 4),\n                 thrownValue)\n               );\n             } finally {\n-              (task.blockedSegment = propName$34),\n-                (task.blockedPreamble = ref),\n+              (task.blockedSegment = propName),\n+                (task.blockedPreamble = propName$34),\n                 (task.keyPath = type);\n             }\n             task = createRenderTask(\n@@ -4898,10 +4956,13 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                   contentRootSegment.textEmbedded &&\n                   contentRootSegment.chunks.push(textSeparator),\n                 (contentRootSegment.status = 1),\n+                finishedSegment(request, newBoundary, contentRootSegment),\n                 queueCompletedSegment(newBoundary, contentRootSegment),\n-                0 === newBoundary.pendingTasks && 0 === newBoundary.status)\n+                0 === newBoundary.pendingTasks &&\n+                  0 === newBoundary.status &&\n+                  ((newBoundary.status = 1),\n+                  !(newBoundary.byteSize > request.progressiveChunkSize)))\n               ) {\n-                newBoundary.status = 1;\n                 0 === request.pendingRootTasks &&\n                   task.blockedPreamble &&\n                   preparePreamble(request);\n@@ -4928,18 +4989,18 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                 (newBoundary.errorDigest = initialState),\n                 untrackBoundary(request, newBoundary);\n             } finally {\n-              (task.blockedBoundary = parentBoundary),\n-                (task.blockedPreamble = ref),\n+              (task.blockedBoundary = ref),\n+                (task.blockedPreamble = propName$34),\n                 (task.hoistableState = parentHoistableState),\n-                (task.blockedSegment = propName$34),\n+                (task.blockedSegment = propName),\n                 (task.keyPath = type);\n             }\n             task = createRenderTask(\n               request,\n               null,\n-              propName,\n+              fallback,\n               -1,\n-              parentBoundary,\n+              ref,\n               boundarySegment,\n               newBoundary.fallbackPreamble,\n               newBoundary.fallbackState,\n@@ -4961,9 +5022,8 @@ function renderElement(request, task, keyPath, type, props, ref) {\n       switch (type.$$typeof) {\n         case REACT_FORWARD_REF_TYPE:\n           if (\"ref\" in props)\n-            for (newBoundary in ((newProps = {}), props))\n-              \"ref\" !== newBoundary &&\n-                (newProps[newBoundary] = props[newBoundary]);\n+            for (fallback in ((newProps = {}), props))\n+              \"ref\" !== fallback && (newProps[fallback] = props[fallback]);\n           else newProps = props;\n           type = renderWithHooks(\n             request,\n@@ -5053,6 +5113,7 @@ function resumeNode(request, task, segmentId, node, childIndex) {\n       (task.blockedSegment = resumedSegment),\n       renderNode(request, task, node, childIndex),\n       (resumedSegment.status = 1),\n+      finishedSegment(request, blockedBoundary, resumedSegment),\n       null === blockedBoundary\n         ? (request.completedRootSegment = resumedSegment)\n         : (queueCompletedSegment(blockedBoundary, resumedSegment),\n@@ -5989,6 +6050,16 @@ function queueCompletedSegment(boundary, segment) {\n     1 === childSegment.status && queueCompletedSegment(boundary, childSegment);\n   } else boundary.completedSegments.push(segment);\n }\n+function finishedSegment(request, boundary, segment) {\n+  if (null !== byteLengthOfChunk) {\n+    segment = segment.chunks;\n+    for (var segmentByteSize = 0, i = 0; i < segment.length; i++)\n+      segmentByteSize += byteLengthOfChunk(segment[i]);\n+    null === boundary\n+      ? (request.byteSize += segmentByteSize)\n+      : (boundary.byteSize += segmentByteSize);\n+  }\n+}\n function finishedTask(request, boundary, segment) {\n   if (null === boundary) {\n     if (null !== segment && segment.parentFlushed) {\n@@ -6012,8 +6083,12 @@ function finishedTask(request, boundary, segment) {\n             boundary.parentFlushed &&\n               request.completedBoundaries.push(boundary),\n             1 === boundary.status &&\n-              (boundary.fallbackAbortableTasks.forEach(abortTaskSoft, request),\n-              boundary.fallbackAbortableTasks.clear(),\n+              (boundary.byteSize > request.progressiveChunkSize ||\n+                (boundary.fallbackAbortableTasks.forEach(\n+                  abortTaskSoft,\n+                  request\n+                ),\n+                boundary.fallbackAbortableTasks.clear()),\n               0 === request.pendingRootTasks &&\n                 null === request.trackedPostpones &&\n                 null !== boundary.contentPreamble &&\n@@ -6124,6 +6199,11 @@ function performWork(request$jscomp$1) {\n                     segment$jscomp$0.chunks.push(textSeparator),\n                   task.abortSet.delete(task),\n                   (segment$jscomp$0.status = 1),\n+                  finishedSegment(\n+                    request,\n+                    task.blockedBoundary,\n+                    segment$jscomp$0\n+                  ),\n                   finishedTask(request, task.blockedBoundary, segment$jscomp$0);\n               } catch (thrownValue) {\n                 resetHooksState();\n@@ -6453,6 +6533,7 @@ function flushCompletedBoundary(request, destination, boundary) {\n   var scriptFormat = 0 === completedSegments.streamingFormat;\n   scriptFormat\n     ? (writeChunk(destination, request.startInlineScript),\n+      writeChunk(destination, endOfStartTag),\n       requiresStyleInsertion\n         ? 0 === (completedSegments.instructions & 2)\n           ? ((completedSegments.instructions |= 10),\n@@ -6514,6 +6595,7 @@ function flushPartiallyCompletedSegment(\n   request = request.renderState;\n   (segment = 0 === boundary.streamingFormat)\n     ? (writeChunk(destination, request.startInlineScript),\n+      writeChunk(destination, endOfStartTag),\n       0 === (boundary.instructions & 1)\n         ? ((boundary.instructions |= 1),\n           writeChunk(destination, completeSegmentScript1Full))\n@@ -6544,14 +6626,14 @@ function flushCompletedQueues(request, destination) {\n         if (5 === completedRootSegment.status) return;\n         var completedPreambleSegments = request.completedPreambleSegments;\n         if (null === completedPreambleSegments) return;\n-        var renderState = request.renderState;\n+        var resumableState = request.resumableState,\n+          renderState = request.renderState;\n         if (\n           (0 !== request.allPendingTasks ||\n             null !== request.trackedPostpones) &&\n           renderState.externalRuntimeScript\n         ) {\n           var _renderState$external = renderState.externalRuntimeScript,\n-            resumableState = request.resumableState,\n             src = _renderState$external.src,\n             chunks = _renderState$external.chunks;\n           resumableState.scriptResources.hasOwnProperty(src) ||\n@@ -6598,26 +6680,23 @@ function flushCompletedQueues(request, destination) {\n         renderState.scripts.clear();\n         renderState.bulkPreloads.forEach(flushResource, destination);\n         renderState.bulkPreloads.clear();\n+        if (htmlChunks || headChunks) {\n+          var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+          writeChunk(destination, blockingRenderChunkStart);\n+          writeChunk(destination, escapeTextForBrowser(shellId));\n+          writeChunk(destination, blockingRenderChunkEnd);\n+        }\n         var hoistableChunks = renderState.hoistableChunks;\n         for (i$jscomp$0 = 0; i$jscomp$0 < hoistableChunks.length; i$jscomp$0++)\n           writeChunk(destination, hoistableChunks[i$jscomp$0]);\n         for (\n-          renderState = hoistableChunks.length = 0;\n-          renderState < completedPreambleSegments.length;\n-          renderState++\n+          resumableState = hoistableChunks.length = 0;\n+          resumableState < completedPreambleSegments.length;\n+          resumableState++\n         ) {\n-          var segments = completedPreambleSegments[renderState];\n-          for (\n-            _renderState$external = 0;\n-            _renderState$external < segments.length;\n-            _renderState$external++\n-          )\n-            flushSegment(\n-              request,\n-              destination,\n-              segments[_renderState$external],\n-              null\n-            );\n+          var segments = completedPreambleSegments[resumableState];\n+          for (renderState = 0; renderState < segments.length; renderState++)\n+            flushSegment(request, destination, segments[renderState], null);\n         }\n         var preamble$jscomp$0 = request.renderState.preamble,\n           headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n@@ -6633,33 +6712,48 @@ function flushCompletedQueues(request, destination) {\n             writeChunk(destination, bodyChunks[completedPreambleSegments]);\n         flushSegment(request, destination, completedRootSegment, null);\n         request.completedRootSegment = null;\n-        writeBootstrap(destination, request.renderState);\n+        var resumableState$jscomp$0 = request.resumableState,\n+          renderState$jscomp$0 = request.renderState,\n+          preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+        if (\n+          (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+          0 === (resumableState$jscomp$0.instructions & 32)\n+        ) {\n+          var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+          bootstrapChunks.push(startChunkForTag(\"template\"));\n+          pushCompletedShellIdAttribute(\n+            bootstrapChunks,\n+            resumableState$jscomp$0\n+          );\n+          bootstrapChunks.push(endOfStartTag, endChunkForTag(\"template\"));\n+        }\n+        writeBootstrap(destination, renderState$jscomp$0);\n       }\n-      var renderState$jscomp$0 = request.renderState;\n+      var renderState$jscomp$1 = request.renderState;\n       completedRootSegment = 0;\n-      var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+      var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < viewportChunks$jscomp$0.length;\n         completedRootSegment++\n       )\n         writeChunk(destination, viewportChunks$jscomp$0[completedRootSegment]);\n       viewportChunks$jscomp$0.length = 0;\n-      renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-      renderState$jscomp$0.preconnects.clear();\n-      renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.fontPreloads.clear();\n-      renderState$jscomp$0.highImagePreloads.forEach(\n+      renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+      renderState$jscomp$1.preconnects.clear();\n+      renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.fontPreloads.clear();\n+      renderState$jscomp$1.highImagePreloads.forEach(\n         flushResource,\n         destination\n       );\n-      renderState$jscomp$0.highImagePreloads.clear();\n-      renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-      renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-      renderState$jscomp$0.scripts.clear();\n-      renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.bulkPreloads.clear();\n-      var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+      renderState$jscomp$1.highImagePreloads.clear();\n+      renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+      renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+      renderState$jscomp$1.scripts.clear();\n+      renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.bulkPreloads.clear();\n+      var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -6670,43 +6764,44 @@ function flushCompletedQueues(request, destination) {\n       var clientRenderedBoundaries = request.clientRenderedBoundaries;\n       for (i = 0; i < clientRenderedBoundaries.length; i++) {\n         var boundary = clientRenderedBoundaries[i];\n-        renderState$jscomp$0 = destination;\n-        var resumableState$jscomp$0 = request.resumableState,\n-          renderState$jscomp$1 = request.renderState,\n+        renderState$jscomp$1 = destination;\n+        var resumableState$jscomp$1 = request.resumableState,\n+          renderState$jscomp$2 = request.renderState,\n           id = boundary.rootSegmentID,\n           errorDigest = boundary.errorDigest,\n-          scriptFormat = 0 === resumableState$jscomp$0.streamingFormat;\n+          scriptFormat = 0 === resumableState$jscomp$1.streamingFormat;\n         scriptFormat\n           ? (writeChunk(\n-              renderState$jscomp$0,\n-              renderState$jscomp$1.startInlineScript\n+              renderState$jscomp$1,\n+              renderState$jscomp$2.startInlineScript\n             ),\n-            0 === (resumableState$jscomp$0.instructions & 4)\n-              ? ((resumableState$jscomp$0.instructions |= 4),\n-                writeChunk(renderState$jscomp$0, clientRenderScript1Full))\n-              : writeChunk(renderState$jscomp$0, clientRenderScript1Partial))\n-          : writeChunk(renderState$jscomp$0, clientRenderData1);\n-        writeChunk(renderState$jscomp$0, renderState$jscomp$1.boundaryPrefix);\n-        writeChunk(renderState$jscomp$0, id.toString(16));\n-        scriptFormat && writeChunk(renderState$jscomp$0, clientRenderScript1A);\n+            writeChunk(renderState$jscomp$1, endOfStartTag),\n+            0 === (resumableState$jscomp$1.instructions & 4)\n+              ? ((resumableState$jscomp$1.instructions |= 4),\n+                writeChunk(renderState$jscomp$1, clientRenderScript1Full))\n+              : writeChunk(renderState$jscomp$1, clientRenderScript1Partial))\n+          : writeChunk(renderState$jscomp$1, clientRenderData1);\n+        writeChunk(renderState$jscomp$1, renderState$jscomp$2.boundaryPrefix);\n+        writeChunk(renderState$jscomp$1, id.toString(16));\n+        scriptFormat && writeChunk(renderState$jscomp$1, clientRenderScript1A);\n         errorDigest &&\n           (scriptFormat\n             ? (writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 clientRenderErrorScriptArgInterstitial\n               ),\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 escapeJSStringsForInstructionScripts(errorDigest || \"\")\n               ))\n-            : (writeChunk(renderState$jscomp$0, clientRenderData2),\n+            : (writeChunk(renderState$jscomp$1, clientRenderData2),\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 escapeTextForBrowser(errorDigest || \"\")\n               )));\n         var JSCompiler_inline_result = scriptFormat\n-          ? writeChunkAndReturn(renderState$jscomp$0, clientRenderScriptEnd)\n-          : writeChunkAndReturn(renderState$jscomp$0, dataElementQuotedEnd);\n+          ? writeChunkAndReturn(renderState$jscomp$1, clientRenderScriptEnd)\n+          : writeChunkAndReturn(renderState$jscomp$1, dataElementQuotedEnd);\n         if (!JSCompiler_inline_result) {\n           request.destination = null;\n           i++;\n@@ -6910,6 +7005,7 @@ function getPostponedState(request) {\n     resumableState.scriptResources = {};\n     resumableState.moduleUnknownResources = {};\n     resumableState.moduleScriptResources = {};\n+    resumableState.instructions = 0;\n   }\n   return {\n     nextSegmentId: request.nextSegmentId,\n@@ -6922,11 +7018,11 @@ function getPostponedState(request) {\n }\n function ensureCorrectIsomorphicReactVersion() {\n   var isomorphicReactPackageVersion = React.version;\n-  if (\"19.2.0-experimental-197d6a04-20250424\" !== isomorphicReactPackageVersion)\n+  if (\"19.2.0-experimental-5dc00d6b-20250428\" !== isomorphicReactPackageVersion)\n     throw Error(\n       'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n         (isomorphicReactPackageVersion +\n-          \"\\n  - react-dom:  19.2.0-experimental-197d6a04-20250424\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+          \"\\n  - react-dom:  19.2.0-experimental-5dc00d6b-20250428\\nLearn more: https://react.dev/warnings/version-mismatch\")\n     );\n }\n ensureCorrectIsomorphicReactVersion();\n@@ -7177,4 +7273,4 @@ exports.resumeToPipeableStream = function (children, postponedState, options) {\n     }\n   };\n };\n-exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";"
        },
        {
            "sha": "19e06ff30d5e8e666b5e87013e59d7ef9bbd8a00",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-unstable_testing.development.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-unstable_testing.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-unstable_testing.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-unstable_testing.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -30192,11 +30192,11 @@\n     };\n     (function () {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-experimental-197d6a04-20250424\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-experimental-5dc00d6b-20250428\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-experimental-197d6a04-20250424\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-experimental-5dc00d6b-20250428\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     })();\n     (\"function\" === typeof Map &&\n@@ -30233,10 +30233,10 @@\n       !(function () {\n         var internals = {\n           bundleType: 1,\n-          version: \"19.2.0-experimental-197d6a04-20250424\",\n+          version: \"19.2.0-experimental-5dc00d6b-20250428\",\n           rendererPackageName: \"react-dom\",\n           currentDispatcherRef: ReactSharedInternals,\n-          reconcilerVersion: \"19.2.0-experimental-197d6a04-20250424\"\n+          reconcilerVersion: \"19.2.0-experimental-5dc00d6b-20250428\"\n         };\n         internals.overrideHookState = overrideHookState;\n         internals.overrideHookStateDeletePath = overrideHookStateDeletePath;\n@@ -30544,5 +30544,5 @@\n         }\n       };\n     };\n-    exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+    exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";\n   })();"
        },
        {
            "sha": "8f68e3155412835867b0f214fbdf816403d53b95",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom-unstable_testing.production.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-unstable_testing.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-unstable_testing.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom-unstable_testing.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -18967,14 +18967,14 @@ ReactDOMHydrationRoot.prototype.unstable_scheduleHydration = function (target) {\n };\n var isomorphicReactPackageVersion$jscomp$inline_2074 = React.version;\n if (\n-  \"19.2.0-experimental-197d6a04-20250424\" !==\n+  \"19.2.0-experimental-5dc00d6b-20250428\" !==\n   isomorphicReactPackageVersion$jscomp$inline_2074\n )\n   throw Error(\n     formatProdErrorMessage(\n       527,\n       isomorphicReactPackageVersion$jscomp$inline_2074,\n-      \"19.2.0-experimental-197d6a04-20250424\"\n+      \"19.2.0-experimental-5dc00d6b-20250428\"\n     )\n   );\n ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n@@ -18996,10 +18996,10 @@ ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n };\n var internals$jscomp$inline_2715 = {\n   bundleType: 0,\n-  version: \"19.2.0-experimental-197d6a04-20250424\",\n+  version: \"19.2.0-experimental-5dc00d6b-20250428\",\n   rendererPackageName: \"react-dom\",\n   currentDispatcherRef: ReactSharedInternals,\n-  reconcilerVersion: \"19.2.0-experimental-197d6a04-20250424\"\n+  reconcilerVersion: \"19.2.0-experimental-5dc00d6b-20250428\"\n };\n if (\"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {\n   var hook$jscomp$inline_2716 = __REACT_DEVTOOLS_GLOBAL_HOOK__;\n@@ -19254,4 +19254,4 @@ exports.observeVisibleRects = function (\n     }\n   };\n };\n-exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";"
        },
        {
            "sha": "5a5a8811b449b1c4233e100f6182b0e64eb5bbee",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom.development.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -416,7 +416,7 @@\n     exports.useFormStatus = function () {\n       return resolveDispatcher().useHostTransitionStatus();\n     };\n-    exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+    exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";\n     \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n       \"function\" ===\n         typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "65112d77b6c60920bc29887a8cabd5d6b9feeb22",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom.production.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -207,4 +207,4 @@ exports.useFormState = function (action, initialState, permalink) {\n exports.useFormStatus = function () {\n   return ReactSharedInternals.H.useHostTransitionStatus();\n };\n-exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";"
        },
        {
            "sha": "5fc60119135c4023213a9a00d7a19b5f33541e04",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom.react-server.development.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.react-server.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.react-server.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.react-server.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -336,5 +336,5 @@\n             }))\n           : Internals.d.m(href));\n     };\n-    exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+    exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";\n   })();"
        },
        {
            "sha": "ae2f6e6d8950457fb56998d3aad983ccc2474d1c",
            "filename": "packages/next/src/compiled/react-dom-experimental/cjs/react-dom.react-server.production.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.react-server.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.react-server.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fcjs%2Freact-dom.react-server.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -149,4 +149,4 @@ exports.preloadModule = function (href, options) {\n       });\n     } else Internals.d.m(href);\n };\n-exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";"
        },
        {
            "sha": "e8444263b7e75b4468548d2a63c58426a64394bf",
            "filename": "packages/next/src/compiled/react-dom-experimental/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom-experimental%2Fpackage.json?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -72,10 +72,10 @@\n     \"./package.json\": \"./package.json\"\n   },\n   \"dependencies\": {\n-    \"scheduler\": \"0.0.0-experimental-197d6a04-20250424\"\n+    \"scheduler\": \"0.0.0-experimental-5dc00d6b-20250428\"\n   },\n   \"peerDependencies\": {\n-    \"react\": \"0.0.0-experimental-197d6a04-20250424\"\n+    \"react\": \"0.0.0-experimental-5dc00d6b-20250428\"\n   },\n   \"browser\": {\n     \"./server.js\": \"./server.browser.js\","
        },
        {
            "sha": "67451c62d9b08f74ca5465556875b1e444908dc1",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-client.development.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-client.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-client.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-client.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -25325,11 +25325,11 @@\n     };\n     (function () {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-canary-197d6a04-20250424\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-canary-5dc00d6b-20250428\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-canary-197d6a04-20250424\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-canary-5dc00d6b-20250428\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     })();\n     (\"function\" === typeof Map &&\n@@ -25366,10 +25366,10 @@\n       !(function () {\n         var internals = {\n           bundleType: 1,\n-          version: \"19.2.0-canary-197d6a04-20250424\",\n+          version: \"19.2.0-canary-5dc00d6b-20250428\",\n           rendererPackageName: \"react-dom\",\n           currentDispatcherRef: ReactSharedInternals,\n-          reconcilerVersion: \"19.2.0-canary-197d6a04-20250424\"\n+          reconcilerVersion: \"19.2.0-canary-5dc00d6b-20250428\"\n         };\n         internals.overrideHookState = overrideHookState;\n         internals.overrideHookStateDeletePath = overrideHookStateDeletePath;\n@@ -25513,7 +25513,7 @@\n       listenToAllSupportedEvents(container);\n       return new ReactDOMHydrationRoot(initialChildren);\n     };\n-    exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+    exports.version = \"19.2.0-canary-5dc00d6b-20250428\";\n     \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n       \"function\" ===\n         typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "325ac2e130563dc0704862aaac670e28e53ce52f",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-client.production.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-client.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-client.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-client.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -15606,14 +15606,14 @@ ReactDOMHydrationRoot.prototype.unstable_scheduleHydration = function (target) {\n };\n var isomorphicReactPackageVersion$jscomp$inline_1829 = React.version;\n if (\n-  \"19.2.0-canary-197d6a04-20250424\" !==\n+  \"19.2.0-canary-5dc00d6b-20250428\" !==\n   isomorphicReactPackageVersion$jscomp$inline_1829\n )\n   throw Error(\n     formatProdErrorMessage(\n       527,\n       isomorphicReactPackageVersion$jscomp$inline_1829,\n-      \"19.2.0-canary-197d6a04-20250424\"\n+      \"19.2.0-canary-5dc00d6b-20250428\"\n     )\n   );\n ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n@@ -15635,10 +15635,10 @@ ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n };\n var internals$jscomp$inline_2318 = {\n   bundleType: 0,\n-  version: \"19.2.0-canary-197d6a04-20250424\",\n+  version: \"19.2.0-canary-5dc00d6b-20250428\",\n   rendererPackageName: \"react-dom\",\n   currentDispatcherRef: ReactSharedInternals,\n-  reconcilerVersion: \"19.2.0-canary-197d6a04-20250424\"\n+  reconcilerVersion: \"19.2.0-canary-5dc00d6b-20250428\"\n };\n if (\"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {\n   var hook$jscomp$inline_2319 = __REACT_DEVTOOLS_GLOBAL_HOOK__;\n@@ -15742,4 +15742,4 @@ exports.hydrateRoot = function (container, initialChildren, options) {\n   listenToAllSupportedEvents(container);\n   return new ReactDOMHydrationRoot(initialChildren);\n };\n-exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+exports.version = \"19.2.0-canary-5dc00d6b-20250428\";"
        },
        {
            "sha": "fd9f8afaca8b45850117b3e8ae1359504f449560",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-profiling.development.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-profiling.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-profiling.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-profiling.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -25382,11 +25382,11 @@\n     };\n     (function () {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-canary-197d6a04-20250424\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-canary-5dc00d6b-20250428\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-canary-197d6a04-20250424\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-canary-5dc00d6b-20250428\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     })();\n     (\"function\" === typeof Map &&\n@@ -25423,10 +25423,10 @@\n       !(function () {\n         var internals = {\n           bundleType: 1,\n-          version: \"19.2.0-canary-197d6a04-20250424\",\n+          version: \"19.2.0-canary-5dc00d6b-20250428\",\n           rendererPackageName: \"react-dom\",\n           currentDispatcherRef: ReactSharedInternals,\n-          reconcilerVersion: \"19.2.0-canary-197d6a04-20250424\"\n+          reconcilerVersion: \"19.2.0-canary-5dc00d6b-20250428\"\n         };\n         internals.overrideHookState = overrideHookState;\n         internals.overrideHookStateDeletePath = overrideHookStateDeletePath;\n@@ -25900,7 +25900,7 @@\n     exports.useFormStatus = function () {\n       return resolveDispatcher().useHostTransitionStatus();\n     };\n-    exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+    exports.version = \"19.2.0-canary-5dc00d6b-20250428\";\n     \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n       \"function\" ===\n         typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "6971793275924fed1382314c56461c1b8f1a55e1",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-profiling.profiling.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-profiling.profiling.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-profiling.profiling.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-profiling.profiling.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -16307,14 +16307,14 @@ ReactDOMHydrationRoot.prototype.unstable_scheduleHydration = function (target) {\n };\n var isomorphicReactPackageVersion$jscomp$inline_1933 = React.version;\n if (\n-  \"19.2.0-canary-197d6a04-20250424\" !==\n+  \"19.2.0-canary-5dc00d6b-20250428\" !==\n   isomorphicReactPackageVersion$jscomp$inline_1933\n )\n   throw Error(\n     formatProdErrorMessage(\n       527,\n       isomorphicReactPackageVersion$jscomp$inline_1933,\n-      \"19.2.0-canary-197d6a04-20250424\"\n+      \"19.2.0-canary-5dc00d6b-20250428\"\n     )\n   );\n ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n@@ -16336,10 +16336,10 @@ ReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n };\n var internals$jscomp$inline_1940 = {\n   bundleType: 0,\n-  version: \"19.2.0-canary-197d6a04-20250424\",\n+  version: \"19.2.0-canary-5dc00d6b-20250428\",\n   rendererPackageName: \"react-dom\",\n   currentDispatcherRef: ReactSharedInternals,\n-  reconcilerVersion: \"19.2.0-canary-197d6a04-20250424\",\n+  reconcilerVersion: \"19.2.0-canary-5dc00d6b-20250428\",\n   getLaneLabelMap: function () {\n     for (\n       var map = new Map(), lane = 1, index$293 = 0;\n@@ -16619,7 +16619,7 @@ exports.useFormState = function (action, initialState, permalink) {\n exports.useFormStatus = function () {\n   return ReactSharedInternals.H.useHostTransitionStatus();\n };\n-exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+exports.version = \"19.2.0-canary-5dc00d6b-20250428\";\n \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n   \"function\" ===\n     typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "487efc3a89cefd1291fa5d9f561ec31979da008b",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server-legacy.browser.development.js",
            "status": "modified",
            "additions": 154,
            "deletions": 79,
            "changes": 233,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.browser.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -1342,13 +1342,26 @@\n       return content;\n     }\n     function injectFormReplayingRuntime(resumableState, renderState) {\n-      (resumableState.instructions & 16) === NothingSent &&\n-        ((resumableState.instructions |= 16),\n-        renderState.bootstrapChunks.unshift(\n-          renderState.startInlineScript,\n-          formReplayingRuntimeScript,\n-          \"\\x3c/script>\"\n-        ));\n+      if ((resumableState.instructions & 16) === NothingSent) {\n+        resumableState.instructions |= 16;\n+        var preamble = renderState.preamble,\n+          bootstrapChunks = renderState.bootstrapChunks;\n+        (preamble.htmlChunks || preamble.headChunks) &&\n+        0 === bootstrapChunks.length\n+          ? (bootstrapChunks.push(renderState.startInlineScript),\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+            bootstrapChunks.push(\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              \"\\x3c/script>\"\n+            ))\n+          : bootstrapChunks.unshift(\n+              renderState.startInlineScript,\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              \"\\x3c/script>\"\n+            );\n+      }\n     }\n     function pushLinkImpl(target, props) {\n       target.push(startChunkForTag(\"link\"));\n@@ -3076,6 +3089,15 @@\n       styleQueue.sheets.forEach(preloadLateStyle, this);\n       styleQueue.sheets.clear();\n     }\n+    function pushCompletedShellIdAttribute(target, resumableState) {\n+      (resumableState.instructions & SentCompletedShellId) === NothingSent &&\n+        ((resumableState.instructions |= SentCompletedShellId),\n+        target.push(\n+          completedShellIdAttributeStart,\n+          escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\"),\n+          attributeEnd\n+        ));\n+    }\n     function writeStyleResourceDependenciesInJS(destination, hoistableState) {\n       destination.push(arrayFirstOpenBracket);\n       var nextArrayOpenBrackChunk = arrayFirstOpenBracket;\n@@ -3292,16 +3314,18 @@\n         bootstrapScripts = resumableState.bootstrapScripts,\n         bootstrapModules = resumableState.bootstrapModules;\n       void 0 !== bootstrapScriptContent &&\n+        (bootstrapChunks.push(\"<script\"),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n         bootstrapChunks.push(\n-          \"<script>\",\n+          endOfStartTag,\n           escapeEntireInlineScriptContent(bootstrapScriptContent),\n           \"\\x3c/script>\"\n-        );\n+        ));\n       idPrefix = {\n         placeholderPrefix: idPrefix + \"P:\",\n         segmentPrefix: idPrefix + \"S:\",\n         boundaryPrefix: idPrefix + \"B:\",\n-        startInlineScript: \"<script>\",\n+        startInlineScript: \"<script\",\n         preamble: createPreambleState(),\n         externalRuntimeScript: null,\n         bootstrapChunks: bootstrapChunks,\n@@ -3366,18 +3390,25 @@\n                     ? \"use-credentials\"\n                     : \"\"));\n           preloadBootstrapScriptOrModule(resumableState, idPrefix, src, props);\n-          bootstrapChunks.push('<script src=\"', escapeTextForBrowser(src));\n+          bootstrapChunks.push(\n+            '<script src=\"',\n+            escapeTextForBrowser(src),\n+            attributeEnd\n+          );\n           \"string\" === typeof integrity &&\n             bootstrapChunks.push(\n-              '\" integrity=\"',\n-              escapeTextForBrowser(integrity)\n+              ' integrity=\"',\n+              escapeTextForBrowser(integrity),\n+              attributeEnd\n             );\n           \"string\" === typeof crossOrigin &&\n             bootstrapChunks.push(\n-              '\" crossorigin=\"',\n-              escapeTextForBrowser(crossOrigin)\n+              ' crossorigin=\"',\n+              escapeTextForBrowser(crossOrigin),\n+              attributeEnd\n             );\n-          bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+          pushCompletedShellIdAttribute(bootstrapChunks, resumableState);\n+          bootstrapChunks.push(' async=\"\">\\x3c/script>');\n         }\n       if (void 0 !== bootstrapModules)\n         for (\n@@ -3414,19 +3445,23 @@\n             ),\n             bootstrapChunks.push(\n               '<script type=\"module\" src=\"',\n-              escapeTextForBrowser(scriptConfig)\n+              escapeTextForBrowser(scriptConfig),\n+              attributeEnd\n             ),\n             \"string\" === typeof crossOrigin &&\n               bootstrapChunks.push(\n-                '\" integrity=\"',\n-                escapeTextForBrowser(crossOrigin)\n+                ' integrity=\"',\n+                escapeTextForBrowser(crossOrigin),\n+                attributeEnd\n               ),\n             \"string\" === typeof src &&\n               bootstrapChunks.push(\n-                '\" crossorigin=\"',\n-                escapeTextForBrowser(src)\n+                ' crossorigin=\"',\n+                escapeTextForBrowser(src),\n+                attributeEnd\n               ),\n-            bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+            bootstrapChunks.push(' async=\"\">\\x3c/script>');\n       return {\n         placeholderPrefix: idPrefix.placeholderPrefix,\n         segmentPrefix: idPrefix.segmentPrefix,\n@@ -4282,6 +4317,7 @@\n       this.fatalError = null;\n       this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n       this.completedPreambleSegments = this.completedRootSegment = null;\n+      this.byteSize = 0;\n       this.abortableTasks = abortSet;\n       this.pingedTasks = [];\n       this.clientRenderedBoundaries = [];\n@@ -5468,9 +5504,10 @@\n                     (contentRootSegment.status = COMPLETED),\n                     queueCompletedSegment(newBoundary, contentRootSegment),\n                     0 === newBoundary.pendingTasks &&\n-                      newBoundary.status === PENDING)\n+                      newBoundary.status === PENDING &&\n+                      ((newBoundary.status = COMPLETED),\n+                      !(newBoundary.byteSize > request.progressiveChunkSize)))\n                   ) {\n-                    newBoundary.status = COMPLETED;\n                     0 === request.pendingRootTasks &&\n                       task.blockedPreamble &&\n                       preparePreamble(request);\n@@ -6604,11 +6641,12 @@\n                 boundary.parentFlushed &&\n                   request.completedBoundaries.push(boundary),\n                 boundary.status === COMPLETED &&\n-                  (boundary.fallbackAbortableTasks.forEach(\n-                    abortTaskSoft,\n-                    request\n-                  ),\n-                  boundary.fallbackAbortableTasks.clear(),\n+                  (boundary.byteSize > request.progressiveChunkSize ||\n+                    (boundary.fallbackAbortableTasks.forEach(\n+                      abortTaskSoft,\n+                      request\n+                    ),\n+                    boundary.fallbackAbortableTasks.clear()),\n                   0 === request.pendingRootTasks &&\n                     null === request.trackedPostpones &&\n                     null !== boundary.contentPreamble &&\n@@ -7102,6 +7140,7 @@\n       var requiresStyleInsertion = request.stylesToHoist;\n       request.stylesToHoist = !1;\n       destination.push(request.startInlineScript);\n+      destination.push(endOfStartTag);\n       requiresStyleInsertion\n         ? (completedSegments.instructions & SentCompleteBoundaryFunction) ===\n           NothingSent\n@@ -7165,6 +7204,7 @@\n       boundary = request.resumableState;\n       request = request.renderState;\n       destination.push(request.startInlineScript);\n+      destination.push(endOfStartTag);\n       (boundary.instructions & SentCompleteSegmentFunction) === NothingSent\n         ? ((boundary.instructions |= SentCompleteSegmentFunction),\n           destination.push(completeSegmentScript1Full))\n@@ -7187,7 +7227,8 @@\n             if (completedRootSegment.status === POSTPONED) return;\n             var completedPreambleSegments = request.completedPreambleSegments;\n             if (null === completedPreambleSegments) return;\n-            var renderState = request.renderState,\n+            var resumableState = request.resumableState,\n+              renderState = request.renderState,\n               preamble = renderState.preamble,\n               htmlChunks = preamble.htmlChunks,\n               headChunks = preamble.headChunks,\n@@ -7246,6 +7287,13 @@\n             renderState.scripts.clear();\n             renderState.bulkPreloads.forEach(flushResource, destination);\n             renderState.bulkPreloads.clear();\n+            if (htmlChunks || headChunks) {\n+              var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+              destination.push(blockingRenderChunkStart);\n+              var chunk$jscomp$0 = escapeTextForBrowser(shellId);\n+              destination.push(chunk$jscomp$0);\n+              destination.push(blockingRenderChunkEnd);\n+            }\n             var hoistableChunks = renderState.hoistableChunks;\n             for (\n               i$jscomp$0 = 0;\n@@ -7254,19 +7302,23 @@\n             )\n               destination.push(hoistableChunks[i$jscomp$0]);\n             for (\n-              renderState = hoistableChunks.length = 0;\n-              renderState < completedPreambleSegments.length;\n-              renderState++\n+              resumableState = hoistableChunks.length = 0;\n+              resumableState < completedPreambleSegments.length;\n+              resumableState++\n             ) {\n-              var segments = completedPreambleSegments[renderState];\n-              for (preamble = 0; preamble < segments.length; preamble++)\n-                flushSegment(request, destination, segments[preamble], null);\n+              var segments = completedPreambleSegments[resumableState];\n+              for (\n+                renderState = 0;\n+                renderState < segments.length;\n+                renderState++\n+              )\n+                flushSegment(request, destination, segments[renderState], null);\n             }\n             var preamble$jscomp$0 = request.renderState.preamble,\n               headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n             if (preamble$jscomp$0.htmlChunks || headChunks$jscomp$0) {\n-              var chunk$jscomp$0 = endChunkForTag(\"head\");\n-              destination.push(chunk$jscomp$0);\n+              var chunk$jscomp$1 = endChunkForTag(\"head\");\n+              destination.push(chunk$jscomp$1);\n             }\n             var bodyChunks = preamble$jscomp$0.bodyChunks;\n             if (bodyChunks)\n@@ -7278,33 +7330,49 @@\n                 destination.push(bodyChunks[completedPreambleSegments]);\n             flushSegment(request, destination, completedRootSegment, null);\n             request.completedRootSegment = null;\n-            writeBootstrap(destination, request.renderState);\n+            var resumableState$jscomp$0 = request.resumableState,\n+              renderState$jscomp$0 = request.renderState,\n+              preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+            if (\n+              (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+              (resumableState$jscomp$0.instructions & SentCompletedShellId) ===\n+                NothingSent\n+            ) {\n+              var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+              bootstrapChunks.push(startChunkForTag(\"template\"));\n+              pushCompletedShellIdAttribute(\n+                bootstrapChunks,\n+                resumableState$jscomp$0\n+              );\n+              bootstrapChunks.push(endOfStartTag, endChunkForTag(\"template\"));\n+            }\n+            writeBootstrap(destination, renderState$jscomp$0);\n           }\n-          var renderState$jscomp$0 = request.renderState;\n+          var renderState$jscomp$1 = request.renderState;\n           completedRootSegment = 0;\n-          var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+          var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < viewportChunks$jscomp$0.length;\n             completedRootSegment++\n           )\n             destination.push(viewportChunks$jscomp$0[completedRootSegment]);\n           viewportChunks$jscomp$0.length = 0;\n-          renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-          renderState$jscomp$0.preconnects.clear();\n-          renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.fontPreloads.clear();\n-          renderState$jscomp$0.highImagePreloads.forEach(\n+          renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+          renderState$jscomp$1.preconnects.clear();\n+          renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.fontPreloads.clear();\n+          renderState$jscomp$1.highImagePreloads.forEach(\n             flushResource,\n             destination\n           );\n-          renderState$jscomp$0.highImagePreloads.clear();\n-          renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-          renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-          renderState$jscomp$0.scripts.clear();\n-          renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.bulkPreloads.clear();\n-          var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+          renderState$jscomp$1.highImagePreloads.clear();\n+          renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+          renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+          renderState$jscomp$1.scripts.clear();\n+          renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.bulkPreloads.clear();\n+          var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -7315,57 +7383,60 @@\n           var clientRenderedBoundaries = request.clientRenderedBoundaries;\n           for (i = 0; i < clientRenderedBoundaries.length; i++) {\n             var boundary = clientRenderedBoundaries[i];\n-            renderState$jscomp$0 = destination;\n-            var resumableState = request.resumableState,\n-              renderState$jscomp$1 = request.renderState,\n+            renderState$jscomp$1 = destination;\n+            var resumableState$jscomp$1 = request.resumableState,\n+              renderState$jscomp$2 = request.renderState,\n               id = boundary.rootSegmentID,\n               errorDigest = boundary.errorDigest,\n               errorMessage = boundary.errorMessage,\n               errorStack = boundary.errorStack,\n               errorComponentStack = boundary.errorComponentStack;\n-            renderState$jscomp$0.push(renderState$jscomp$1.startInlineScript);\n-            (resumableState.instructions & SentClientRenderFunction) ===\n+            renderState$jscomp$1.push(renderState$jscomp$2.startInlineScript);\n+            renderState$jscomp$1.push(endOfStartTag);\n+            (resumableState$jscomp$1.instructions &\n+              SentClientRenderFunction) ===\n             NothingSent\n-              ? ((resumableState.instructions |= SentClientRenderFunction),\n-                renderState$jscomp$0.push(clientRenderScript1Full))\n-              : renderState$jscomp$0.push(clientRenderScript1Partial);\n-            renderState$jscomp$0.push(renderState$jscomp$1.boundaryPrefix);\n-            var chunk$jscomp$1 = id.toString(16);\n-            renderState$jscomp$0.push(chunk$jscomp$1);\n-            renderState$jscomp$0.push(clientRenderScript1A);\n+              ? ((resumableState$jscomp$1.instructions |=\n+                  SentClientRenderFunction),\n+                renderState$jscomp$1.push(clientRenderScript1Full))\n+              : renderState$jscomp$1.push(clientRenderScript1Partial);\n+            renderState$jscomp$1.push(renderState$jscomp$2.boundaryPrefix);\n+            var chunk$jscomp$2 = id.toString(16);\n+            renderState$jscomp$1.push(chunk$jscomp$2);\n+            renderState$jscomp$1.push(clientRenderScript1A);\n             if (\n               errorDigest ||\n               errorMessage ||\n               errorStack ||\n               errorComponentStack\n             ) {\n-              renderState$jscomp$0.push(clientRenderErrorScriptArgInterstitial);\n-              var chunk$jscomp$2 = escapeJSStringsForInstructionScripts(\n+              renderState$jscomp$1.push(clientRenderErrorScriptArgInterstitial);\n+              var chunk$jscomp$3 = escapeJSStringsForInstructionScripts(\n                 errorDigest || \"\"\n               );\n-              renderState$jscomp$0.push(chunk$jscomp$2);\n+              renderState$jscomp$1.push(chunk$jscomp$3);\n             }\n             if (errorMessage || errorStack || errorComponentStack) {\n-              renderState$jscomp$0.push(clientRenderErrorScriptArgInterstitial);\n-              var chunk$jscomp$3 = escapeJSStringsForInstructionScripts(\n+              renderState$jscomp$1.push(clientRenderErrorScriptArgInterstitial);\n+              var chunk$jscomp$4 = escapeJSStringsForInstructionScripts(\n                 errorMessage || \"\"\n               );\n-              renderState$jscomp$0.push(chunk$jscomp$3);\n+              renderState$jscomp$1.push(chunk$jscomp$4);\n             }\n             if (errorStack || errorComponentStack) {\n-              renderState$jscomp$0.push(clientRenderErrorScriptArgInterstitial);\n-              var chunk$jscomp$4 = escapeJSStringsForInstructionScripts(\n+              renderState$jscomp$1.push(clientRenderErrorScriptArgInterstitial);\n+              var chunk$jscomp$5 = escapeJSStringsForInstructionScripts(\n                 errorStack || \"\"\n               );\n-              renderState$jscomp$0.push(chunk$jscomp$4);\n+              renderState$jscomp$1.push(chunk$jscomp$5);\n             }\n             if (errorComponentStack) {\n-              renderState$jscomp$0.push(clientRenderErrorScriptArgInterstitial);\n-              var chunk$jscomp$5 =\n+              renderState$jscomp$1.push(clientRenderErrorScriptArgInterstitial);\n+              var chunk$jscomp$6 =\n                 escapeJSStringsForInstructionScripts(errorComponentStack);\n-              renderState$jscomp$0.push(chunk$jscomp$5);\n+              renderState$jscomp$1.push(chunk$jscomp$6);\n             }\n-            var JSCompiler_inline_result = renderState$jscomp$0.push(\n+            var JSCompiler_inline_result = renderState$jscomp$1.push(\n               clientRenderScriptEnd\n             );\n             if (!JSCompiler_inline_result) {\n@@ -8640,6 +8711,7 @@\n       SentCompleteBoundaryFunction = 2,\n       SentClientRenderFunction = 4,\n       SentStyleInsertionFunction = 8,\n+      SentCompletedShellId = 32,\n       EXISTS = null,\n       PRELOAD_NO_CREDS = [];\n     Object.freeze(PRELOAD_NO_CREDS);\n@@ -8758,6 +8830,9 @@\n       spaceSeparator = \" \",\n       styleTagResourceOpen3 = '\">',\n       styleTagResourceClose = \"</style>\",\n+      blockingRenderChunkStart = '<link rel=\"expect\" href=\"#',\n+      blockingRenderChunkEnd = '\" blocking=\"render\"/>',\n+      completedShellIdAttributeStart = ' id=\"',\n       arrayFirstOpenBracket = \"[\",\n       arraySubsequentOpenBracket = \",[\",\n       arrayInterstitial = \",\",\n@@ -9029,5 +9104,5 @@\n         'The server used \"renderToString\" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to \"renderToReadableStream\" which supports Suspense on the server'\n       );\n     };\n-    exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+    exports.version = \"19.2.0-canary-5dc00d6b-20250428\";\n   })();"
        },
        {
            "sha": "35114476e1fca743d19915cdd5248a6b9455abbd",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server-legacy.browser.production.js",
            "status": "modified",
            "additions": 156,
            "deletions": 87,
            "changes": 243,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.browser.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.browser.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.browser.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -677,13 +677,25 @@ function flattenOptionChildren(children) {\n   return content;\n }\n function injectFormReplayingRuntime(resumableState, renderState) {\n-  0 === (resumableState.instructions & 16) &&\n-    ((resumableState.instructions |= 16),\n-    renderState.bootstrapChunks.unshift(\n-      renderState.startInlineScript,\n-      'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n-      \"\\x3c/script>\"\n-    ));\n+  if (0 === (resumableState.instructions & 16)) {\n+    resumableState.instructions |= 16;\n+    var preamble = renderState.preamble,\n+      bootstrapChunks = renderState.bootstrapChunks;\n+    (preamble.htmlChunks || preamble.headChunks) && 0 === bootstrapChunks.length\n+      ? (bootstrapChunks.push(renderState.startInlineScript),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(\n+          \">\",\n+          'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n+          \"\\x3c/script>\"\n+        ))\n+      : bootstrapChunks.unshift(\n+          renderState.startInlineScript,\n+          \">\",\n+          'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n+          \"\\x3c/script>\"\n+        );\n+  }\n }\n function pushLinkImpl(target, props) {\n   target.push(startChunkForTag(\"link\"));\n@@ -2118,6 +2130,15 @@ function preloadLateStyles(styleQueue) {\n   styleQueue.sheets.forEach(preloadLateStyle, this);\n   styleQueue.sheets.clear();\n }\n+function pushCompletedShellIdAttribute(target, resumableState) {\n+  0 === (resumableState.instructions & 32) &&\n+    ((resumableState.instructions |= 32),\n+    target.push(\n+      ' id=\"',\n+      escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\"),\n+      '\"'\n+    ));\n+}\n function writeStyleResourceDependenciesInJS(destination, hoistableState) {\n   destination.push(\"[\");\n   var nextArrayOpenBrackChunk = \"[\";\n@@ -2628,23 +2649,25 @@ function createRenderState(resumableState, generateStaticMarkup) {\n     bootstrapScripts = resumableState.bootstrapScripts,\n     bootstrapModules = resumableState.bootstrapModules;\n   void 0 !== bootstrapScriptContent &&\n+    (bootstrapChunks.push(\"<script\"),\n+    pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n     bootstrapChunks.push(\n-      \"<script>\",\n+      \">\",\n       (\"\" + bootstrapScriptContent).replace(scriptRegex, scriptReplacer),\n       \"\\x3c/script>\"\n-    );\n+    ));\n   bootstrapScriptContent = idPrefix + \"P:\";\n-  var JSCompiler_object_inline_segmentPrefix_1538 = idPrefix + \"S:\";\n+  var JSCompiler_object_inline_segmentPrefix_1582 = idPrefix + \"S:\";\n   idPrefix += \"B:\";\n-  var JSCompiler_object_inline_preamble_1541 = createPreambleState(),\n-    JSCompiler_object_inline_preconnects_1551 = new Set(),\n-    JSCompiler_object_inline_fontPreloads_1552 = new Set(),\n-    JSCompiler_object_inline_highImagePreloads_1553 = new Set(),\n-    JSCompiler_object_inline_styles_1554 = new Map(),\n-    JSCompiler_object_inline_bootstrapScripts_1555 = new Set(),\n-    JSCompiler_object_inline_scripts_1556 = new Set(),\n-    JSCompiler_object_inline_bulkPreloads_1557 = new Set(),\n-    JSCompiler_object_inline_preloads_1558 = {\n+  var JSCompiler_object_inline_preamble_1585 = createPreambleState(),\n+    JSCompiler_object_inline_preconnects_1595 = new Set(),\n+    JSCompiler_object_inline_fontPreloads_1596 = new Set(),\n+    JSCompiler_object_inline_highImagePreloads_1597 = new Set(),\n+    JSCompiler_object_inline_styles_1598 = new Map(),\n+    JSCompiler_object_inline_bootstrapScripts_1599 = new Set(),\n+    JSCompiler_object_inline_scripts_1600 = new Set(),\n+    JSCompiler_object_inline_bulkPreloads_1601 = new Set(),\n+    JSCompiler_object_inline_preloads_1602 = {\n       images: new Map(),\n       stylesheets: new Map(),\n       scripts: new Map(),\n@@ -2681,16 +2704,22 @@ function createRenderState(resumableState, generateStaticMarkup) {\n       scriptConfig.moduleScriptResources[href] = null;\n       scriptConfig = [];\n       pushLinkImpl(scriptConfig, props);\n-      JSCompiler_object_inline_bootstrapScripts_1555.add(scriptConfig);\n-      bootstrapChunks.push('<script src=\"', escapeTextForBrowser(src));\n+      JSCompiler_object_inline_bootstrapScripts_1599.add(scriptConfig);\n+      bootstrapChunks.push('<script src=\"', escapeTextForBrowser(src), '\"');\n       \"string\" === typeof integrity &&\n-        bootstrapChunks.push('\" integrity=\"', escapeTextForBrowser(integrity));\n+        bootstrapChunks.push(\n+          ' integrity=\"',\n+          escapeTextForBrowser(integrity),\n+          '\"'\n+        );\n       \"string\" === typeof crossOrigin &&\n         bootstrapChunks.push(\n-          '\" crossorigin=\"',\n-          escapeTextForBrowser(crossOrigin)\n+          ' crossorigin=\"',\n+          escapeTextForBrowser(crossOrigin),\n+          '\"'\n         );\n-      bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+      pushCompletedShellIdAttribute(bootstrapChunks, resumableState);\n+      bootstrapChunks.push(' async=\"\">\\x3c/script>');\n     }\n   if (void 0 !== bootstrapModules)\n     for (\n@@ -2722,25 +2751,32 @@ function createRenderState(resumableState, generateStaticMarkup) {\n         (props.moduleScriptResources[scriptConfig] = null),\n         (props = []),\n         pushLinkImpl(props, integrity),\n-        JSCompiler_object_inline_bootstrapScripts_1555.add(props),\n+        JSCompiler_object_inline_bootstrapScripts_1599.add(props),\n         bootstrapChunks.push(\n           '<script type=\"module\" src=\"',\n-          escapeTextForBrowser(i)\n+          escapeTextForBrowser(i),\n+          '\"'\n         ),\n         \"string\" === typeof crossOrigin &&\n           bootstrapChunks.push(\n-            '\" integrity=\"',\n-            escapeTextForBrowser(crossOrigin)\n+            ' integrity=\"',\n+            escapeTextForBrowser(crossOrigin),\n+            '\"'\n           ),\n         \"string\" === typeof src &&\n-          bootstrapChunks.push('\" crossorigin=\"', escapeTextForBrowser(src)),\n-        bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+          bootstrapChunks.push(\n+            ' crossorigin=\"',\n+            escapeTextForBrowser(src),\n+            '\"'\n+          ),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(' async=\"\">\\x3c/script>');\n   return {\n     placeholderPrefix: bootstrapScriptContent,\n-    segmentPrefix: JSCompiler_object_inline_segmentPrefix_1538,\n+    segmentPrefix: JSCompiler_object_inline_segmentPrefix_1582,\n     boundaryPrefix: idPrefix,\n-    startInlineScript: \"<script>\",\n-    preamble: JSCompiler_object_inline_preamble_1541,\n+    startInlineScript: \"<script\",\n+    preamble: JSCompiler_object_inline_preamble_1585,\n     externalRuntimeScript: null,\n     bootstrapChunks: bootstrapChunks,\n     importMapChunks: [],\n@@ -2756,14 +2792,14 @@ function createRenderState(resumableState, generateStaticMarkup) {\n     charsetChunks: [],\n     viewportChunks: [],\n     hoistableChunks: [],\n-    preconnects: JSCompiler_object_inline_preconnects_1551,\n-    fontPreloads: JSCompiler_object_inline_fontPreloads_1552,\n-    highImagePreloads: JSCompiler_object_inline_highImagePreloads_1553,\n-    styles: JSCompiler_object_inline_styles_1554,\n-    bootstrapScripts: JSCompiler_object_inline_bootstrapScripts_1555,\n-    scripts: JSCompiler_object_inline_scripts_1556,\n-    bulkPreloads: JSCompiler_object_inline_bulkPreloads_1557,\n-    preloads: JSCompiler_object_inline_preloads_1558,\n+    preconnects: JSCompiler_object_inline_preconnects_1595,\n+    fontPreloads: JSCompiler_object_inline_fontPreloads_1596,\n+    highImagePreloads: JSCompiler_object_inline_highImagePreloads_1597,\n+    styles: JSCompiler_object_inline_styles_1598,\n+    bootstrapScripts: JSCompiler_object_inline_bootstrapScripts_1599,\n+    scripts: JSCompiler_object_inline_scripts_1600,\n+    bulkPreloads: JSCompiler_object_inline_bulkPreloads_1601,\n+    preloads: JSCompiler_object_inline_preloads_1602,\n     stylesToHoist: !1,\n     generateStaticMarkup: generateStaticMarkup\n   };\n@@ -3537,6 +3573,7 @@ function RequestInstance(\n   this.fatalError = null;\n   this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n   this.completedPreambleSegments = this.completedRootSegment = null;\n+  this.byteSize = 0;\n   this.abortableTasks = abortSet;\n   this.pingedTasks = [];\n   this.clientRenderedBoundaries = [];\n@@ -4215,9 +4252,11 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                 ),\n                 (contentRootSegment.status = 1),\n                 queueCompletedSegment(newBoundary, contentRootSegment),\n-                0 === newBoundary.pendingTasks && 0 === newBoundary.status)\n+                0 === newBoundary.pendingTasks &&\n+                  0 === newBoundary.status &&\n+                  ((newBoundary.status = 1),\n+                  !(newBoundary.byteSize > request.progressiveChunkSize)))\n               ) {\n-                newBoundary.status = 1;\n                 0 === request.pendingRootTasks &&\n                   task.blockedPreamble &&\n                   preparePreamble(request);\n@@ -5073,8 +5112,12 @@ function finishedTask(request, boundary, segment) {\n             boundary.parentFlushed &&\n               request.completedBoundaries.push(boundary),\n             1 === boundary.status &&\n-              (boundary.fallbackAbortableTasks.forEach(abortTaskSoft, request),\n-              boundary.fallbackAbortableTasks.clear(),\n+              (boundary.byteSize > request.progressiveChunkSize ||\n+                (boundary.fallbackAbortableTasks.forEach(\n+                  abortTaskSoft,\n+                  request\n+                ),\n+                boundary.fallbackAbortableTasks.clear()),\n               0 === request.pendingRootTasks &&\n                 null === request.trackedPostpones &&\n                 null !== boundary.contentPreamble &&\n@@ -5480,6 +5523,7 @@ function flushCompletedBoundary(request, destination, boundary) {\n   var requiresStyleInsertion = request.stylesToHoist;\n   request.stylesToHoist = !1;\n   destination.push(request.startInlineScript);\n+  destination.push(\">\");\n   requiresStyleInsertion\n     ? 0 === (completedSegments.instructions & 2)\n       ? ((completedSegments.instructions |= 10),\n@@ -5531,6 +5575,7 @@ function flushPartiallyCompletedSegment(\n   boundary = request.resumableState;\n   request = request.renderState;\n   destination.push(request.startInlineScript);\n+  destination.push(\">\");\n   0 === (boundary.instructions & 1)\n     ? ((boundary.instructions |= 1),\n       destination.push(\n@@ -5555,7 +5600,8 @@ function flushCompletedQueues(request, destination) {\n         if (5 === completedRootSegment.status) return;\n         var completedPreambleSegments = request.completedPreambleSegments;\n         if (null === completedPreambleSegments) return;\n-        var renderState = request.renderState,\n+        var resumableState = request.resumableState,\n+          renderState = request.renderState,\n           preamble = renderState.preamble,\n           htmlChunks = preamble.htmlChunks,\n           headChunks = preamble.headChunks,\n@@ -5598,23 +5644,30 @@ function flushCompletedQueues(request, destination) {\n         renderState.scripts.clear();\n         renderState.bulkPreloads.forEach(flushResource, destination);\n         renderState.bulkPreloads.clear();\n+        if (htmlChunks || headChunks) {\n+          var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+          destination.push('<link rel=\"expect\" href=\"#');\n+          var chunk$jscomp$0 = escapeTextForBrowser(shellId);\n+          destination.push(chunk$jscomp$0);\n+          destination.push('\" blocking=\"render\"/>');\n+        }\n         var hoistableChunks = renderState.hoistableChunks;\n         for (i$jscomp$0 = 0; i$jscomp$0 < hoistableChunks.length; i$jscomp$0++)\n           destination.push(hoistableChunks[i$jscomp$0]);\n         for (\n-          renderState = hoistableChunks.length = 0;\n-          renderState < completedPreambleSegments.length;\n-          renderState++\n+          resumableState = hoistableChunks.length = 0;\n+          resumableState < completedPreambleSegments.length;\n+          resumableState++\n         ) {\n-          var segments = completedPreambleSegments[renderState];\n-          for (preamble = 0; preamble < segments.length; preamble++)\n-            flushSegment(request, destination, segments[preamble], null);\n+          var segments = completedPreambleSegments[resumableState];\n+          for (renderState = 0; renderState < segments.length; renderState++)\n+            flushSegment(request, destination, segments[renderState], null);\n         }\n         var preamble$jscomp$0 = request.renderState.preamble,\n           headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n         if (preamble$jscomp$0.htmlChunks || headChunks$jscomp$0) {\n-          var chunk$jscomp$0 = endChunkForTag(\"head\");\n-          destination.push(chunk$jscomp$0);\n+          var chunk$jscomp$1 = endChunkForTag(\"head\");\n+          destination.push(chunk$jscomp$1);\n         }\n         var bodyChunks = preamble$jscomp$0.bodyChunks;\n         if (bodyChunks)\n@@ -5626,33 +5679,48 @@ function flushCompletedQueues(request, destination) {\n             destination.push(bodyChunks[completedPreambleSegments]);\n         flushSegment(request, destination, completedRootSegment, null);\n         request.completedRootSegment = null;\n-        writeBootstrap(destination, request.renderState);\n+        var resumableState$jscomp$0 = request.resumableState,\n+          renderState$jscomp$0 = request.renderState,\n+          preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+        if (\n+          (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+          0 === (resumableState$jscomp$0.instructions & 32)\n+        ) {\n+          var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+          bootstrapChunks.push(startChunkForTag(\"template\"));\n+          pushCompletedShellIdAttribute(\n+            bootstrapChunks,\n+            resumableState$jscomp$0\n+          );\n+          bootstrapChunks.push(\">\", endChunkForTag(\"template\"));\n+        }\n+        writeBootstrap(destination, renderState$jscomp$0);\n       }\n-      var renderState$jscomp$0 = request.renderState;\n+      var renderState$jscomp$1 = request.renderState;\n       completedRootSegment = 0;\n-      var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+      var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < viewportChunks$jscomp$0.length;\n         completedRootSegment++\n       )\n         destination.push(viewportChunks$jscomp$0[completedRootSegment]);\n       viewportChunks$jscomp$0.length = 0;\n-      renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-      renderState$jscomp$0.preconnects.clear();\n-      renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.fontPreloads.clear();\n-      renderState$jscomp$0.highImagePreloads.forEach(\n+      renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+      renderState$jscomp$1.preconnects.clear();\n+      renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.fontPreloads.clear();\n+      renderState$jscomp$1.highImagePreloads.forEach(\n         flushResource,\n         destination\n       );\n-      renderState$jscomp$0.highImagePreloads.clear();\n-      renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-      renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-      renderState$jscomp$0.scripts.clear();\n-      renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.bulkPreloads.clear();\n-      var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+      renderState$jscomp$1.highImagePreloads.clear();\n+      renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+      renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+      renderState$jscomp$1.scripts.clear();\n+      renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.bulkPreloads.clear();\n+      var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -5663,31 +5731,32 @@ function flushCompletedQueues(request, destination) {\n       var clientRenderedBoundaries = request.clientRenderedBoundaries;\n       for (i = 0; i < clientRenderedBoundaries.length; i++) {\n         var boundary = clientRenderedBoundaries[i];\n-        renderState$jscomp$0 = destination;\n-        var resumableState = request.resumableState,\n-          renderState$jscomp$1 = request.renderState,\n+        renderState$jscomp$1 = destination;\n+        var resumableState$jscomp$1 = request.resumableState,\n+          renderState$jscomp$2 = request.renderState,\n           id = boundary.rootSegmentID,\n           errorDigest = boundary.errorDigest;\n-        renderState$jscomp$0.push(renderState$jscomp$1.startInlineScript);\n-        0 === (resumableState.instructions & 4)\n-          ? ((resumableState.instructions |= 4),\n-            renderState$jscomp$0.push(\n+        renderState$jscomp$1.push(renderState$jscomp$2.startInlineScript);\n+        renderState$jscomp$1.push(\">\");\n+        0 === (resumableState$jscomp$1.instructions & 4)\n+          ? ((resumableState$jscomp$1.instructions |= 4),\n+            renderState$jscomp$1.push(\n               '$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data=\"$!\",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX(\"'\n             ))\n-          : renderState$jscomp$0.push('$RX(\"');\n-        renderState$jscomp$0.push(renderState$jscomp$1.boundaryPrefix);\n-        var chunk$jscomp$1 = id.toString(16);\n-        renderState$jscomp$0.push(chunk$jscomp$1);\n-        renderState$jscomp$0.push('\"');\n+          : renderState$jscomp$1.push('$RX(\"');\n+        renderState$jscomp$1.push(renderState$jscomp$2.boundaryPrefix);\n+        var chunk$jscomp$2 = id.toString(16);\n+        renderState$jscomp$1.push(chunk$jscomp$2);\n+        renderState$jscomp$1.push('\"');\n         if (errorDigest) {\n-          renderState$jscomp$0.push(\",\");\n-          var chunk$jscomp$2 = escapeJSStringsForInstructionScripts(\n+          renderState$jscomp$1.push(\",\");\n+          var chunk$jscomp$3 = escapeJSStringsForInstructionScripts(\n             errorDigest || \"\"\n           );\n-          renderState$jscomp$0.push(chunk$jscomp$2);\n+          renderState$jscomp$1.push(chunk$jscomp$3);\n         }\n         var JSCompiler_inline_result =\n-          renderState$jscomp$0.push(\")\\x3c/script>\");\n+          renderState$jscomp$1.push(\")\\x3c/script>\");\n         if (!JSCompiler_inline_result) {\n           request.destination = null;\n           i++;\n@@ -5886,4 +5955,4 @@ exports.renderToString = function (children, options) {\n     'The server used \"renderToString\" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to \"renderToReadableStream\" which supports Suspense on the server'\n   );\n };\n-exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+exports.version = \"19.2.0-canary-5dc00d6b-20250428\";"
        },
        {
            "sha": "aaedd068f2c3f42515240fdf11e7170f20fccf2a",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server-legacy.node.development.js",
            "status": "modified",
            "additions": 154,
            "deletions": 79,
            "changes": 233,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.node.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.node.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.node.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -1342,13 +1342,26 @@\n       return content;\n     }\n     function injectFormReplayingRuntime(resumableState, renderState) {\n-      (resumableState.instructions & 16) === NothingSent &&\n-        ((resumableState.instructions |= 16),\n-        renderState.bootstrapChunks.unshift(\n-          renderState.startInlineScript,\n-          formReplayingRuntimeScript,\n-          \"\\x3c/script>\"\n-        ));\n+      if ((resumableState.instructions & 16) === NothingSent) {\n+        resumableState.instructions |= 16;\n+        var preamble = renderState.preamble,\n+          bootstrapChunks = renderState.bootstrapChunks;\n+        (preamble.htmlChunks || preamble.headChunks) &&\n+        0 === bootstrapChunks.length\n+          ? (bootstrapChunks.push(renderState.startInlineScript),\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+            bootstrapChunks.push(\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              \"\\x3c/script>\"\n+            ))\n+          : bootstrapChunks.unshift(\n+              renderState.startInlineScript,\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              \"\\x3c/script>\"\n+            );\n+      }\n     }\n     function pushLinkImpl(target, props) {\n       target.push(startChunkForTag(\"link\"));\n@@ -3076,6 +3089,15 @@\n       styleQueue.sheets.forEach(preloadLateStyle, this);\n       styleQueue.sheets.clear();\n     }\n+    function pushCompletedShellIdAttribute(target, resumableState) {\n+      (resumableState.instructions & SentCompletedShellId) === NothingSent &&\n+        ((resumableState.instructions |= SentCompletedShellId),\n+        target.push(\n+          completedShellIdAttributeStart,\n+          escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\"),\n+          attributeEnd\n+        ));\n+    }\n     function writeStyleResourceDependenciesInJS(destination, hoistableState) {\n       destination.push(arrayFirstOpenBracket);\n       var nextArrayOpenBrackChunk = arrayFirstOpenBracket;\n@@ -3292,16 +3314,18 @@\n         bootstrapScripts = resumableState.bootstrapScripts,\n         bootstrapModules = resumableState.bootstrapModules;\n       void 0 !== bootstrapScriptContent &&\n+        (bootstrapChunks.push(\"<script\"),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n         bootstrapChunks.push(\n-          \"<script>\",\n+          endOfStartTag,\n           escapeEntireInlineScriptContent(bootstrapScriptContent),\n           \"\\x3c/script>\"\n-        );\n+        ));\n       idPrefix = {\n         placeholderPrefix: idPrefix + \"P:\",\n         segmentPrefix: idPrefix + \"S:\",\n         boundaryPrefix: idPrefix + \"B:\",\n-        startInlineScript: \"<script>\",\n+        startInlineScript: \"<script\",\n         preamble: createPreambleState(),\n         externalRuntimeScript: null,\n         bootstrapChunks: bootstrapChunks,\n@@ -3366,18 +3390,25 @@\n                     ? \"use-credentials\"\n                     : \"\"));\n           preloadBootstrapScriptOrModule(resumableState, idPrefix, src, props);\n-          bootstrapChunks.push('<script src=\"', escapeTextForBrowser(src));\n+          bootstrapChunks.push(\n+            '<script src=\"',\n+            escapeTextForBrowser(src),\n+            attributeEnd\n+          );\n           \"string\" === typeof integrity &&\n             bootstrapChunks.push(\n-              '\" integrity=\"',\n-              escapeTextForBrowser(integrity)\n+              ' integrity=\"',\n+              escapeTextForBrowser(integrity),\n+              attributeEnd\n             );\n           \"string\" === typeof crossOrigin &&\n             bootstrapChunks.push(\n-              '\" crossorigin=\"',\n-              escapeTextForBrowser(crossOrigin)\n+              ' crossorigin=\"',\n+              escapeTextForBrowser(crossOrigin),\n+              attributeEnd\n             );\n-          bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+          pushCompletedShellIdAttribute(bootstrapChunks, resumableState);\n+          bootstrapChunks.push(' async=\"\">\\x3c/script>');\n         }\n       if (void 0 !== bootstrapModules)\n         for (\n@@ -3414,19 +3445,23 @@\n             ),\n             bootstrapChunks.push(\n               '<script type=\"module\" src=\"',\n-              escapeTextForBrowser(scriptConfig)\n+              escapeTextForBrowser(scriptConfig),\n+              attributeEnd\n             ),\n             \"string\" === typeof crossOrigin &&\n               bootstrapChunks.push(\n-                '\" integrity=\"',\n-                escapeTextForBrowser(crossOrigin)\n+                ' integrity=\"',\n+                escapeTextForBrowser(crossOrigin),\n+                attributeEnd\n               ),\n             \"string\" === typeof src &&\n               bootstrapChunks.push(\n-                '\" crossorigin=\"',\n-                escapeTextForBrowser(src)\n+                ' crossorigin=\"',\n+                escapeTextForBrowser(src),\n+                attributeEnd\n               ),\n-            bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+            bootstrapChunks.push(' async=\"\">\\x3c/script>');\n       return {\n         placeholderPrefix: idPrefix.placeholderPrefix,\n         segmentPrefix: idPrefix.segmentPrefix,\n@@ -4282,6 +4317,7 @@\n       this.fatalError = null;\n       this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n       this.completedPreambleSegments = this.completedRootSegment = null;\n+      this.byteSize = 0;\n       this.abortableTasks = abortSet;\n       this.pingedTasks = [];\n       this.clientRenderedBoundaries = [];\n@@ -5468,9 +5504,10 @@\n                     (contentRootSegment.status = COMPLETED),\n                     queueCompletedSegment(newBoundary, contentRootSegment),\n                     0 === newBoundary.pendingTasks &&\n-                      newBoundary.status === PENDING)\n+                      newBoundary.status === PENDING &&\n+                      ((newBoundary.status = COMPLETED),\n+                      !(newBoundary.byteSize > request.progressiveChunkSize)))\n                   ) {\n-                    newBoundary.status = COMPLETED;\n                     0 === request.pendingRootTasks &&\n                       task.blockedPreamble &&\n                       preparePreamble(request);\n@@ -6604,11 +6641,12 @@\n                 boundary.parentFlushed &&\n                   request.completedBoundaries.push(boundary),\n                 boundary.status === COMPLETED &&\n-                  (boundary.fallbackAbortableTasks.forEach(\n-                    abortTaskSoft,\n-                    request\n-                  ),\n-                  boundary.fallbackAbortableTasks.clear(),\n+                  (boundary.byteSize > request.progressiveChunkSize ||\n+                    (boundary.fallbackAbortableTasks.forEach(\n+                      abortTaskSoft,\n+                      request\n+                    ),\n+                    boundary.fallbackAbortableTasks.clear()),\n                   0 === request.pendingRootTasks &&\n                     null === request.trackedPostpones &&\n                     null !== boundary.contentPreamble &&\n@@ -7102,6 +7140,7 @@\n       var requiresStyleInsertion = request.stylesToHoist;\n       request.stylesToHoist = !1;\n       destination.push(request.startInlineScript);\n+      destination.push(endOfStartTag);\n       requiresStyleInsertion\n         ? (completedSegments.instructions & SentCompleteBoundaryFunction) ===\n           NothingSent\n@@ -7165,6 +7204,7 @@\n       boundary = request.resumableState;\n       request = request.renderState;\n       destination.push(request.startInlineScript);\n+      destination.push(endOfStartTag);\n       (boundary.instructions & SentCompleteSegmentFunction) === NothingSent\n         ? ((boundary.instructions |= SentCompleteSegmentFunction),\n           destination.push(completeSegmentScript1Full))\n@@ -7187,7 +7227,8 @@\n             if (completedRootSegment.status === POSTPONED) return;\n             var completedPreambleSegments = request.completedPreambleSegments;\n             if (null === completedPreambleSegments) return;\n-            var renderState = request.renderState,\n+            var resumableState = request.resumableState,\n+              renderState = request.renderState,\n               preamble = renderState.preamble,\n               htmlChunks = preamble.htmlChunks,\n               headChunks = preamble.headChunks,\n@@ -7246,6 +7287,13 @@\n             renderState.scripts.clear();\n             renderState.bulkPreloads.forEach(flushResource, destination);\n             renderState.bulkPreloads.clear();\n+            if (htmlChunks || headChunks) {\n+              var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+              destination.push(blockingRenderChunkStart);\n+              var chunk$jscomp$0 = escapeTextForBrowser(shellId);\n+              destination.push(chunk$jscomp$0);\n+              destination.push(blockingRenderChunkEnd);\n+            }\n             var hoistableChunks = renderState.hoistableChunks;\n             for (\n               i$jscomp$0 = 0;\n@@ -7254,19 +7302,23 @@\n             )\n               destination.push(hoistableChunks[i$jscomp$0]);\n             for (\n-              renderState = hoistableChunks.length = 0;\n-              renderState < completedPreambleSegments.length;\n-              renderState++\n+              resumableState = hoistableChunks.length = 0;\n+              resumableState < completedPreambleSegments.length;\n+              resumableState++\n             ) {\n-              var segments = completedPreambleSegments[renderState];\n-              for (preamble = 0; preamble < segments.length; preamble++)\n-                flushSegment(request, destination, segments[preamble], null);\n+              var segments = completedPreambleSegments[resumableState];\n+              for (\n+                renderState = 0;\n+                renderState < segments.length;\n+                renderState++\n+              )\n+                flushSegment(request, destination, segments[renderState], null);\n             }\n             var preamble$jscomp$0 = request.renderState.preamble,\n               headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n             if (preamble$jscomp$0.htmlChunks || headChunks$jscomp$0) {\n-              var chunk$jscomp$0 = endChunkForTag(\"head\");\n-              destination.push(chunk$jscomp$0);\n+              var chunk$jscomp$1 = endChunkForTag(\"head\");\n+              destination.push(chunk$jscomp$1);\n             }\n             var bodyChunks = preamble$jscomp$0.bodyChunks;\n             if (bodyChunks)\n@@ -7278,33 +7330,49 @@\n                 destination.push(bodyChunks[completedPreambleSegments]);\n             flushSegment(request, destination, completedRootSegment, null);\n             request.completedRootSegment = null;\n-            writeBootstrap(destination, request.renderState);\n+            var resumableState$jscomp$0 = request.resumableState,\n+              renderState$jscomp$0 = request.renderState,\n+              preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+            if (\n+              (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+              (resumableState$jscomp$0.instructions & SentCompletedShellId) ===\n+                NothingSent\n+            ) {\n+              var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+              bootstrapChunks.push(startChunkForTag(\"template\"));\n+              pushCompletedShellIdAttribute(\n+                bootstrapChunks,\n+                resumableState$jscomp$0\n+              );\n+              bootstrapChunks.push(endOfStartTag, endChunkForTag(\"template\"));\n+            }\n+            writeBootstrap(destination, renderState$jscomp$0);\n           }\n-          var renderState$jscomp$0 = request.renderState;\n+          var renderState$jscomp$1 = request.renderState;\n           completedRootSegment = 0;\n-          var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+          var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < viewportChunks$jscomp$0.length;\n             completedRootSegment++\n           )\n             destination.push(viewportChunks$jscomp$0[completedRootSegment]);\n           viewportChunks$jscomp$0.length = 0;\n-          renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-          renderState$jscomp$0.preconnects.clear();\n-          renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.fontPreloads.clear();\n-          renderState$jscomp$0.highImagePreloads.forEach(\n+          renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+          renderState$jscomp$1.preconnects.clear();\n+          renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.fontPreloads.clear();\n+          renderState$jscomp$1.highImagePreloads.forEach(\n             flushResource,\n             destination\n           );\n-          renderState$jscomp$0.highImagePreloads.clear();\n-          renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-          renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-          renderState$jscomp$0.scripts.clear();\n-          renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.bulkPreloads.clear();\n-          var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+          renderState$jscomp$1.highImagePreloads.clear();\n+          renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+          renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+          renderState$jscomp$1.scripts.clear();\n+          renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.bulkPreloads.clear();\n+          var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -7315,57 +7383,60 @@\n           var clientRenderedBoundaries = request.clientRenderedBoundaries;\n           for (i = 0; i < clientRenderedBoundaries.length; i++) {\n             var boundary = clientRenderedBoundaries[i];\n-            renderState$jscomp$0 = destination;\n-            var resumableState = request.resumableState,\n-              renderState$jscomp$1 = request.renderState,\n+            renderState$jscomp$1 = destination;\n+            var resumableState$jscomp$1 = request.resumableState,\n+              renderState$jscomp$2 = request.renderState,\n               id = boundary.rootSegmentID,\n               errorDigest = boundary.errorDigest,\n               errorMessage = boundary.errorMessage,\n               errorStack = boundary.errorStack,\n               errorComponentStack = boundary.errorComponentStack;\n-            renderState$jscomp$0.push(renderState$jscomp$1.startInlineScript);\n-            (resumableState.instructions & SentClientRenderFunction) ===\n+            renderState$jscomp$1.push(renderState$jscomp$2.startInlineScript);\n+            renderState$jscomp$1.push(endOfStartTag);\n+            (resumableState$jscomp$1.instructions &\n+              SentClientRenderFunction) ===\n             NothingSent\n-              ? ((resumableState.instructions |= SentClientRenderFunction),\n-                renderState$jscomp$0.push(clientRenderScript1Full))\n-              : renderState$jscomp$0.push(clientRenderScript1Partial);\n-            renderState$jscomp$0.push(renderState$jscomp$1.boundaryPrefix);\n-            var chunk$jscomp$1 = id.toString(16);\n-            renderState$jscomp$0.push(chunk$jscomp$1);\n-            renderState$jscomp$0.push(clientRenderScript1A);\n+              ? ((resumableState$jscomp$1.instructions |=\n+                  SentClientRenderFunction),\n+                renderState$jscomp$1.push(clientRenderScript1Full))\n+              : renderState$jscomp$1.push(clientRenderScript1Partial);\n+            renderState$jscomp$1.push(renderState$jscomp$2.boundaryPrefix);\n+            var chunk$jscomp$2 = id.toString(16);\n+            renderState$jscomp$1.push(chunk$jscomp$2);\n+            renderState$jscomp$1.push(clientRenderScript1A);\n             if (\n               errorDigest ||\n               errorMessage ||\n               errorStack ||\n               errorComponentStack\n             ) {\n-              renderState$jscomp$0.push(clientRenderErrorScriptArgInterstitial);\n-              var chunk$jscomp$2 = escapeJSStringsForInstructionScripts(\n+              renderState$jscomp$1.push(clientRenderErrorScriptArgInterstitial);\n+              var chunk$jscomp$3 = escapeJSStringsForInstructionScripts(\n                 errorDigest || \"\"\n               );\n-              renderState$jscomp$0.push(chunk$jscomp$2);\n+              renderState$jscomp$1.push(chunk$jscomp$3);\n             }\n             if (errorMessage || errorStack || errorComponentStack) {\n-              renderState$jscomp$0.push(clientRenderErrorScriptArgInterstitial);\n-              var chunk$jscomp$3 = escapeJSStringsForInstructionScripts(\n+              renderState$jscomp$1.push(clientRenderErrorScriptArgInterstitial);\n+              var chunk$jscomp$4 = escapeJSStringsForInstructionScripts(\n                 errorMessage || \"\"\n               );\n-              renderState$jscomp$0.push(chunk$jscomp$3);\n+              renderState$jscomp$1.push(chunk$jscomp$4);\n             }\n             if (errorStack || errorComponentStack) {\n-              renderState$jscomp$0.push(clientRenderErrorScriptArgInterstitial);\n-              var chunk$jscomp$4 = escapeJSStringsForInstructionScripts(\n+              renderState$jscomp$1.push(clientRenderErrorScriptArgInterstitial);\n+              var chunk$jscomp$5 = escapeJSStringsForInstructionScripts(\n                 errorStack || \"\"\n               );\n-              renderState$jscomp$0.push(chunk$jscomp$4);\n+              renderState$jscomp$1.push(chunk$jscomp$5);\n             }\n             if (errorComponentStack) {\n-              renderState$jscomp$0.push(clientRenderErrorScriptArgInterstitial);\n-              var chunk$jscomp$5 =\n+              renderState$jscomp$1.push(clientRenderErrorScriptArgInterstitial);\n+              var chunk$jscomp$6 =\n                 escapeJSStringsForInstructionScripts(errorComponentStack);\n-              renderState$jscomp$0.push(chunk$jscomp$5);\n+              renderState$jscomp$1.push(chunk$jscomp$6);\n             }\n-            var JSCompiler_inline_result = renderState$jscomp$0.push(\n+            var JSCompiler_inline_result = renderState$jscomp$1.push(\n               clientRenderScriptEnd\n             );\n             if (!JSCompiler_inline_result) {\n@@ -8640,6 +8711,7 @@\n       SentCompleteBoundaryFunction = 2,\n       SentClientRenderFunction = 4,\n       SentStyleInsertionFunction = 8,\n+      SentCompletedShellId = 32,\n       EXISTS = null,\n       PRELOAD_NO_CREDS = [];\n     Object.freeze(PRELOAD_NO_CREDS);\n@@ -8758,6 +8830,9 @@\n       spaceSeparator = \" \",\n       styleTagResourceOpen3 = '\">',\n       styleTagResourceClose = \"</style>\",\n+      blockingRenderChunkStart = '<link rel=\"expect\" href=\"#',\n+      blockingRenderChunkEnd = '\" blocking=\"render\"/>',\n+      completedShellIdAttributeStart = ' id=\"',\n       arrayFirstOpenBracket = \"[\",\n       arraySubsequentOpenBracket = \",[\",\n       arrayInterstitial = \",\",\n@@ -9029,5 +9104,5 @@\n         'The server used \"renderToString\" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to \"renderToPipeableStream\" which supports Suspense on the server'\n       );\n     };\n-    exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+    exports.version = \"19.2.0-canary-5dc00d6b-20250428\";\n   })();"
        },
        {
            "sha": "de1b279b83dfae18bf59ac00c529c2fa65086fa7",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server-legacy.node.production.js",
            "status": "modified",
            "additions": 156,
            "deletions": 87,
            "changes": 243,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.node.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.node.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server-legacy.node.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -673,13 +673,25 @@ function flattenOptionChildren(children) {\n   return content;\n }\n function injectFormReplayingRuntime(resumableState, renderState) {\n-  0 === (resumableState.instructions & 16) &&\n-    ((resumableState.instructions |= 16),\n-    renderState.bootstrapChunks.unshift(\n-      renderState.startInlineScript,\n-      'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n-      \"\\x3c/script>\"\n-    ));\n+  if (0 === (resumableState.instructions & 16)) {\n+    resumableState.instructions |= 16;\n+    var preamble = renderState.preamble,\n+      bootstrapChunks = renderState.bootstrapChunks;\n+    (preamble.htmlChunks || preamble.headChunks) && 0 === bootstrapChunks.length\n+      ? (bootstrapChunks.push(renderState.startInlineScript),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(\n+          \">\",\n+          'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n+          \"\\x3c/script>\"\n+        ))\n+      : bootstrapChunks.unshift(\n+          renderState.startInlineScript,\n+          \">\",\n+          'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n+          \"\\x3c/script>\"\n+        );\n+  }\n }\n function pushLinkImpl(target, props) {\n   target.push(startChunkForTag(\"link\"));\n@@ -2135,6 +2147,15 @@ function preloadLateStyles(styleQueue) {\n   styleQueue.sheets.forEach(preloadLateStyle, this);\n   styleQueue.sheets.clear();\n }\n+function pushCompletedShellIdAttribute(target, resumableState) {\n+  0 === (resumableState.instructions & 32) &&\n+    ((resumableState.instructions |= 32),\n+    target.push(\n+      ' id=\"',\n+      escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\"),\n+      '\"'\n+    ));\n+}\n function writeStyleResourceDependenciesInJS(destination, hoistableState) {\n   destination.push(\"[\");\n   var nextArrayOpenBrackChunk = \"[\";\n@@ -2647,23 +2668,25 @@ function createRenderState(resumableState, generateStaticMarkup) {\n     bootstrapScripts = resumableState.bootstrapScripts,\n     bootstrapModules = resumableState.bootstrapModules;\n   void 0 !== bootstrapScriptContent &&\n+    (bootstrapChunks.push(\"<script\"),\n+    pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n     bootstrapChunks.push(\n-      \"<script>\",\n+      \">\",\n       (\"\" + bootstrapScriptContent).replace(scriptRegex, scriptReplacer),\n       \"\\x3c/script>\"\n-    );\n+    ));\n   bootstrapScriptContent = idPrefix + \"P:\";\n-  var JSCompiler_object_inline_segmentPrefix_1538 = idPrefix + \"S:\";\n+  var JSCompiler_object_inline_segmentPrefix_1582 = idPrefix + \"S:\";\n   idPrefix += \"B:\";\n-  var JSCompiler_object_inline_preamble_1541 = createPreambleState(),\n-    JSCompiler_object_inline_preconnects_1551 = new Set(),\n-    JSCompiler_object_inline_fontPreloads_1552 = new Set(),\n-    JSCompiler_object_inline_highImagePreloads_1553 = new Set(),\n-    JSCompiler_object_inline_styles_1554 = new Map(),\n-    JSCompiler_object_inline_bootstrapScripts_1555 = new Set(),\n-    JSCompiler_object_inline_scripts_1556 = new Set(),\n-    JSCompiler_object_inline_bulkPreloads_1557 = new Set(),\n-    JSCompiler_object_inline_preloads_1558 = {\n+  var JSCompiler_object_inline_preamble_1585 = createPreambleState(),\n+    JSCompiler_object_inline_preconnects_1595 = new Set(),\n+    JSCompiler_object_inline_fontPreloads_1596 = new Set(),\n+    JSCompiler_object_inline_highImagePreloads_1597 = new Set(),\n+    JSCompiler_object_inline_styles_1598 = new Map(),\n+    JSCompiler_object_inline_bootstrapScripts_1599 = new Set(),\n+    JSCompiler_object_inline_scripts_1600 = new Set(),\n+    JSCompiler_object_inline_bulkPreloads_1601 = new Set(),\n+    JSCompiler_object_inline_preloads_1602 = {\n       images: new Map(),\n       stylesheets: new Map(),\n       scripts: new Map(),\n@@ -2700,16 +2723,22 @@ function createRenderState(resumableState, generateStaticMarkup) {\n       scriptConfig.moduleScriptResources[href] = null;\n       scriptConfig = [];\n       pushLinkImpl(scriptConfig, props);\n-      JSCompiler_object_inline_bootstrapScripts_1555.add(scriptConfig);\n-      bootstrapChunks.push('<script src=\"', escapeTextForBrowser(src));\n+      JSCompiler_object_inline_bootstrapScripts_1599.add(scriptConfig);\n+      bootstrapChunks.push('<script src=\"', escapeTextForBrowser(src), '\"');\n       \"string\" === typeof integrity &&\n-        bootstrapChunks.push('\" integrity=\"', escapeTextForBrowser(integrity));\n+        bootstrapChunks.push(\n+          ' integrity=\"',\n+          escapeTextForBrowser(integrity),\n+          '\"'\n+        );\n       \"string\" === typeof crossOrigin &&\n         bootstrapChunks.push(\n-          '\" crossorigin=\"',\n-          escapeTextForBrowser(crossOrigin)\n+          ' crossorigin=\"',\n+          escapeTextForBrowser(crossOrigin),\n+          '\"'\n         );\n-      bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+      pushCompletedShellIdAttribute(bootstrapChunks, resumableState);\n+      bootstrapChunks.push(' async=\"\">\\x3c/script>');\n     }\n   if (void 0 !== bootstrapModules)\n     for (\n@@ -2741,25 +2770,32 @@ function createRenderState(resumableState, generateStaticMarkup) {\n         (props.moduleScriptResources[scriptConfig] = null),\n         (props = []),\n         pushLinkImpl(props, integrity),\n-        JSCompiler_object_inline_bootstrapScripts_1555.add(props),\n+        JSCompiler_object_inline_bootstrapScripts_1599.add(props),\n         bootstrapChunks.push(\n           '<script type=\"module\" src=\"',\n-          escapeTextForBrowser(i)\n+          escapeTextForBrowser(i),\n+          '\"'\n         ),\n         \"string\" === typeof crossOrigin &&\n           bootstrapChunks.push(\n-            '\" integrity=\"',\n-            escapeTextForBrowser(crossOrigin)\n+            ' integrity=\"',\n+            escapeTextForBrowser(crossOrigin),\n+            '\"'\n           ),\n         \"string\" === typeof src &&\n-          bootstrapChunks.push('\" crossorigin=\"', escapeTextForBrowser(src)),\n-        bootstrapChunks.push('\" async=\"\">\\x3c/script>');\n+          bootstrapChunks.push(\n+            ' crossorigin=\"',\n+            escapeTextForBrowser(src),\n+            '\"'\n+          ),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(' async=\"\">\\x3c/script>');\n   return {\n     placeholderPrefix: bootstrapScriptContent,\n-    segmentPrefix: JSCompiler_object_inline_segmentPrefix_1538,\n+    segmentPrefix: JSCompiler_object_inline_segmentPrefix_1582,\n     boundaryPrefix: idPrefix,\n-    startInlineScript: \"<script>\",\n-    preamble: JSCompiler_object_inline_preamble_1541,\n+    startInlineScript: \"<script\",\n+    preamble: JSCompiler_object_inline_preamble_1585,\n     externalRuntimeScript: null,\n     bootstrapChunks: bootstrapChunks,\n     importMapChunks: [],\n@@ -2775,14 +2811,14 @@ function createRenderState(resumableState, generateStaticMarkup) {\n     charsetChunks: [],\n     viewportChunks: [],\n     hoistableChunks: [],\n-    preconnects: JSCompiler_object_inline_preconnects_1551,\n-    fontPreloads: JSCompiler_object_inline_fontPreloads_1552,\n-    highImagePreloads: JSCompiler_object_inline_highImagePreloads_1553,\n-    styles: JSCompiler_object_inline_styles_1554,\n-    bootstrapScripts: JSCompiler_object_inline_bootstrapScripts_1555,\n-    scripts: JSCompiler_object_inline_scripts_1556,\n-    bulkPreloads: JSCompiler_object_inline_bulkPreloads_1557,\n-    preloads: JSCompiler_object_inline_preloads_1558,\n+    preconnects: JSCompiler_object_inline_preconnects_1595,\n+    fontPreloads: JSCompiler_object_inline_fontPreloads_1596,\n+    highImagePreloads: JSCompiler_object_inline_highImagePreloads_1597,\n+    styles: JSCompiler_object_inline_styles_1598,\n+    bootstrapScripts: JSCompiler_object_inline_bootstrapScripts_1599,\n+    scripts: JSCompiler_object_inline_scripts_1600,\n+    bulkPreloads: JSCompiler_object_inline_bulkPreloads_1601,\n+    preloads: JSCompiler_object_inline_preloads_1602,\n     stylesToHoist: !1,\n     generateStaticMarkup: generateStaticMarkup\n   };\n@@ -3584,6 +3620,7 @@ function RequestInstance(\n   this.fatalError = null;\n   this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n   this.completedPreambleSegments = this.completedRootSegment = null;\n+  this.byteSize = 0;\n   this.abortableTasks = abortSet;\n   this.pingedTasks = [];\n   this.clientRenderedBoundaries = [];\n@@ -4262,9 +4299,11 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                 ),\n                 (contentRootSegment.status = 1),\n                 queueCompletedSegment(newBoundary, contentRootSegment),\n-                0 === newBoundary.pendingTasks && 0 === newBoundary.status)\n+                0 === newBoundary.pendingTasks &&\n+                  0 === newBoundary.status &&\n+                  ((newBoundary.status = 1),\n+                  !(newBoundary.byteSize > request.progressiveChunkSize)))\n               ) {\n-                newBoundary.status = 1;\n                 0 === request.pendingRootTasks &&\n                   task.blockedPreamble &&\n                   preparePreamble(request);\n@@ -5138,8 +5177,12 @@ function finishedTask(request, boundary, segment) {\n             boundary.parentFlushed &&\n               request.completedBoundaries.push(boundary),\n             1 === boundary.status &&\n-              (boundary.fallbackAbortableTasks.forEach(abortTaskSoft, request),\n-              boundary.fallbackAbortableTasks.clear(),\n+              (boundary.byteSize > request.progressiveChunkSize ||\n+                (boundary.fallbackAbortableTasks.forEach(\n+                  abortTaskSoft,\n+                  request\n+                ),\n+                boundary.fallbackAbortableTasks.clear()),\n               0 === request.pendingRootTasks &&\n                 null === request.trackedPostpones &&\n                 null !== boundary.contentPreamble &&\n@@ -5555,6 +5598,7 @@ function flushCompletedBoundary(request, destination, boundary) {\n   var requiresStyleInsertion = request.stylesToHoist;\n   request.stylesToHoist = !1;\n   destination.push(request.startInlineScript);\n+  destination.push(\">\");\n   requiresStyleInsertion\n     ? 0 === (completedSegments.instructions & 2)\n       ? ((completedSegments.instructions |= 10),\n@@ -5608,6 +5652,7 @@ function flushPartiallyCompletedSegment(\n   boundary = request.resumableState;\n   request = request.renderState;\n   destination.push(request.startInlineScript);\n+  destination.push(\">\");\n   0 === (boundary.instructions & 1)\n     ? ((boundary.instructions |= 1),\n       destination.push(\n@@ -5632,7 +5677,8 @@ function flushCompletedQueues(request, destination) {\n         if (5 === completedRootSegment.status) return;\n         var completedPreambleSegments = request.completedPreambleSegments;\n         if (null === completedPreambleSegments) return;\n-        var renderState = request.renderState,\n+        var resumableState = request.resumableState,\n+          renderState = request.renderState,\n           preamble = renderState.preamble,\n           htmlChunks = preamble.htmlChunks,\n           headChunks = preamble.headChunks,\n@@ -5675,23 +5721,30 @@ function flushCompletedQueues(request, destination) {\n         renderState.scripts.clear();\n         renderState.bulkPreloads.forEach(flushResource, destination);\n         renderState.bulkPreloads.clear();\n+        if (htmlChunks || headChunks) {\n+          var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+          destination.push('<link rel=\"expect\" href=\"#');\n+          var chunk$jscomp$0 = escapeTextForBrowser(shellId);\n+          destination.push(chunk$jscomp$0);\n+          destination.push('\" blocking=\"render\"/>');\n+        }\n         var hoistableChunks = renderState.hoistableChunks;\n         for (i$jscomp$0 = 0; i$jscomp$0 < hoistableChunks.length; i$jscomp$0++)\n           destination.push(hoistableChunks[i$jscomp$0]);\n         for (\n-          renderState = hoistableChunks.length = 0;\n-          renderState < completedPreambleSegments.length;\n-          renderState++\n+          resumableState = hoistableChunks.length = 0;\n+          resumableState < completedPreambleSegments.length;\n+          resumableState++\n         ) {\n-          var segments = completedPreambleSegments[renderState];\n-          for (preamble = 0; preamble < segments.length; preamble++)\n-            flushSegment(request, destination, segments[preamble], null);\n+          var segments = completedPreambleSegments[resumableState];\n+          for (renderState = 0; renderState < segments.length; renderState++)\n+            flushSegment(request, destination, segments[renderState], null);\n         }\n         var preamble$jscomp$0 = request.renderState.preamble,\n           headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n         if (preamble$jscomp$0.htmlChunks || headChunks$jscomp$0) {\n-          var chunk$jscomp$0 = endChunkForTag(\"head\");\n-          destination.push(chunk$jscomp$0);\n+          var chunk$jscomp$1 = endChunkForTag(\"head\");\n+          destination.push(chunk$jscomp$1);\n         }\n         var bodyChunks = preamble$jscomp$0.bodyChunks;\n         if (bodyChunks)\n@@ -5703,33 +5756,48 @@ function flushCompletedQueues(request, destination) {\n             destination.push(bodyChunks[completedPreambleSegments]);\n         flushSegment(request, destination, completedRootSegment, null);\n         request.completedRootSegment = null;\n-        writeBootstrap(destination, request.renderState);\n+        var resumableState$jscomp$0 = request.resumableState,\n+          renderState$jscomp$0 = request.renderState,\n+          preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+        if (\n+          (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+          0 === (resumableState$jscomp$0.instructions & 32)\n+        ) {\n+          var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+          bootstrapChunks.push(startChunkForTag(\"template\"));\n+          pushCompletedShellIdAttribute(\n+            bootstrapChunks,\n+            resumableState$jscomp$0\n+          );\n+          bootstrapChunks.push(\">\", endChunkForTag(\"template\"));\n+        }\n+        writeBootstrap(destination, renderState$jscomp$0);\n       }\n-      var renderState$jscomp$0 = request.renderState;\n+      var renderState$jscomp$1 = request.renderState;\n       completedRootSegment = 0;\n-      var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+      var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < viewportChunks$jscomp$0.length;\n         completedRootSegment++\n       )\n         destination.push(viewportChunks$jscomp$0[completedRootSegment]);\n       viewportChunks$jscomp$0.length = 0;\n-      renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-      renderState$jscomp$0.preconnects.clear();\n-      renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.fontPreloads.clear();\n-      renderState$jscomp$0.highImagePreloads.forEach(\n+      renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+      renderState$jscomp$1.preconnects.clear();\n+      renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.fontPreloads.clear();\n+      renderState$jscomp$1.highImagePreloads.forEach(\n         flushResource,\n         destination\n       );\n-      renderState$jscomp$0.highImagePreloads.clear();\n-      renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-      renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-      renderState$jscomp$0.scripts.clear();\n-      renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.bulkPreloads.clear();\n-      var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+      renderState$jscomp$1.highImagePreloads.clear();\n+      renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+      renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+      renderState$jscomp$1.scripts.clear();\n+      renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.bulkPreloads.clear();\n+      var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -5740,31 +5808,32 @@ function flushCompletedQueues(request, destination) {\n       var clientRenderedBoundaries = request.clientRenderedBoundaries;\n       for (i = 0; i < clientRenderedBoundaries.length; i++) {\n         var boundary = clientRenderedBoundaries[i];\n-        renderState$jscomp$0 = destination;\n-        var resumableState = request.resumableState,\n-          renderState$jscomp$1 = request.renderState,\n+        renderState$jscomp$1 = destination;\n+        var resumableState$jscomp$1 = request.resumableState,\n+          renderState$jscomp$2 = request.renderState,\n           id = boundary.rootSegmentID,\n           errorDigest = boundary.errorDigest;\n-        renderState$jscomp$0.push(renderState$jscomp$1.startInlineScript);\n-        0 === (resumableState.instructions & 4)\n-          ? ((resumableState.instructions |= 4),\n-            renderState$jscomp$0.push(\n+        renderState$jscomp$1.push(renderState$jscomp$2.startInlineScript);\n+        renderState$jscomp$1.push(\">\");\n+        0 === (resumableState$jscomp$1.instructions & 4)\n+          ? ((resumableState$jscomp$1.instructions |= 4),\n+            renderState$jscomp$1.push(\n               '$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data=\"$!\",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX(\"'\n             ))\n-          : renderState$jscomp$0.push('$RX(\"');\n-        renderState$jscomp$0.push(renderState$jscomp$1.boundaryPrefix);\n-        var chunk$jscomp$1 = id.toString(16);\n-        renderState$jscomp$0.push(chunk$jscomp$1);\n-        renderState$jscomp$0.push('\"');\n+          : renderState$jscomp$1.push('$RX(\"');\n+        renderState$jscomp$1.push(renderState$jscomp$2.boundaryPrefix);\n+        var chunk$jscomp$2 = id.toString(16);\n+        renderState$jscomp$1.push(chunk$jscomp$2);\n+        renderState$jscomp$1.push('\"');\n         if (errorDigest) {\n-          renderState$jscomp$0.push(\",\");\n-          var chunk$jscomp$2 = escapeJSStringsForInstructionScripts(\n+          renderState$jscomp$1.push(\",\");\n+          var chunk$jscomp$3 = escapeJSStringsForInstructionScripts(\n             errorDigest || \"\"\n           );\n-          renderState$jscomp$0.push(chunk$jscomp$2);\n+          renderState$jscomp$1.push(chunk$jscomp$3);\n         }\n         var JSCompiler_inline_result =\n-          renderState$jscomp$0.push(\")\\x3c/script>\");\n+          renderState$jscomp$1.push(\")\\x3c/script>\");\n         if (!JSCompiler_inline_result) {\n           request.destination = null;\n           i++;\n@@ -5966,4 +6035,4 @@ exports.renderToString = function (children, options) {\n     'The server used \"renderToString\" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to \"renderToPipeableStream\" which supports Suspense on the server'\n   );\n };\n-exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+exports.version = \"19.2.0-canary-5dc00d6b-20250428\";"
        },
        {
            "sha": "0ee8a202e4780ac7ac61b541f1d610b1d3231358",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server.browser.development.js",
            "status": "modified",
            "additions": 184,
            "deletions": 78,
            "changes": 262,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.browser.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -320,6 +320,9 @@\n         );\n       return content;\n     }\n+    function byteLengthOfChunk(chunk) {\n+      return chunk.byteLength;\n+    }\n     function closeWithError(destination, error) {\n       \"function\" === typeof destination.error\n         ? destination.error(error)\n@@ -808,21 +811,23 @@\n           void 0 === nonce\n             ? startInlineScript\n             : stringToPrecomputedChunk(\n-                '<script nonce=\"' + escapeTextForBrowser(nonce) + '\">'\n+                '<script nonce=\"' + escapeTextForBrowser(nonce) + '\"'\n               ),\n         idPrefix = resumableState.idPrefix;\n       externalRuntimeConfig = [];\n       var bootstrapScriptContent = resumableState.bootstrapScriptContent,\n         bootstrapScripts = resumableState.bootstrapScripts,\n         bootstrapModules = resumableState.bootstrapModules;\n       void 0 !== bootstrapScriptContent &&\n+        (externalRuntimeConfig.push(inlineScriptWithNonce),\n+        pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState),\n         externalRuntimeConfig.push(\n-          inlineScriptWithNonce,\n+          endOfStartTag,\n           stringToChunk(\n             escapeEntireInlineScriptContent(bootstrapScriptContent)\n           ),\n           endInlineScript\n-        );\n+        ));\n       bootstrapScriptContent = [];\n       void 0 !== importMap &&\n         (bootstrapScriptContent.push(importMapScriptStart),\n@@ -919,23 +924,28 @@\n           );\n           externalRuntimeConfig.push(\n             startScriptSrc,\n-            stringToChunk(escapeTextForBrowser(inlineScriptWithNonce))\n+            stringToChunk(escapeTextForBrowser(inlineScriptWithNonce)),\n+            attributeEnd\n           );\n           nonce &&\n             externalRuntimeConfig.push(\n               scriptNonce,\n-              stringToChunk(escapeTextForBrowser(nonce))\n+              stringToChunk(escapeTextForBrowser(nonce)),\n+              attributeEnd\n             );\n           \"string\" === typeof bootstrapScriptContent &&\n             externalRuntimeConfig.push(\n               scriptIntegirty,\n-              stringToChunk(escapeTextForBrowser(bootstrapScriptContent))\n+              stringToChunk(escapeTextForBrowser(bootstrapScriptContent)),\n+              attributeEnd\n             );\n           \"string\" === typeof idPrefix &&\n             externalRuntimeConfig.push(\n               scriptCrossOrigin,\n-              stringToChunk(escapeTextForBrowser(idPrefix))\n+              stringToChunk(escapeTextForBrowser(idPrefix)),\n+              attributeEnd\n             );\n+          pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState);\n           externalRuntimeConfig.push(endAsyncScript);\n         }\n       if (void 0 !== bootstrapModules)\n@@ -973,23 +983,31 @@\n             ),\n             externalRuntimeConfig.push(\n               startModuleSrc,\n-              stringToChunk(escapeTextForBrowser(maxHeadersLength))\n+              stringToChunk(escapeTextForBrowser(maxHeadersLength)),\n+              attributeEnd\n             ),\n             nonce &&\n               externalRuntimeConfig.push(\n                 scriptNonce,\n-                stringToChunk(escapeTextForBrowser(nonce))\n+                stringToChunk(escapeTextForBrowser(nonce)),\n+                attributeEnd\n               ),\n             \"string\" === typeof idPrefix &&\n               externalRuntimeConfig.push(\n                 scriptIntegirty,\n-                stringToChunk(escapeTextForBrowser(idPrefix))\n+                stringToChunk(escapeTextForBrowser(idPrefix)),\n+                attributeEnd\n               ),\n             \"string\" === typeof inlineScriptWithNonce &&\n               externalRuntimeConfig.push(\n                 scriptCrossOrigin,\n-                stringToChunk(escapeTextForBrowser(inlineScriptWithNonce))\n+                stringToChunk(escapeTextForBrowser(inlineScriptWithNonce)),\n+                attributeEnd\n               ),\n+            pushCompletedShellIdAttribute(\n+              externalRuntimeConfig,\n+              resumableState\n+            ),\n             externalRuntimeConfig.push(endAsyncScript);\n       return onHeaders;\n     }\n@@ -1638,13 +1656,26 @@\n       return content;\n     }\n     function injectFormReplayingRuntime(resumableState, renderState) {\n-      (resumableState.instructions & 16) === NothingSent &&\n-        ((resumableState.instructions |= 16),\n-        renderState.bootstrapChunks.unshift(\n-          renderState.startInlineScript,\n-          formReplayingRuntimeScript,\n-          endInlineScript\n-        ));\n+      if ((resumableState.instructions & 16) === NothingSent) {\n+        resumableState.instructions |= 16;\n+        var preamble = renderState.preamble,\n+          bootstrapChunks = renderState.bootstrapChunks;\n+        (preamble.htmlChunks || preamble.headChunks) &&\n+        0 === bootstrapChunks.length\n+          ? (bootstrapChunks.push(renderState.startInlineScript),\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+            bootstrapChunks.push(\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              endInlineScript\n+            ))\n+          : bootstrapChunks.unshift(\n+              renderState.startInlineScript,\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              endInlineScript\n+            );\n+      }\n     }\n     function pushLinkImpl(target, props) {\n       target.push(startChunkForTag(\"link\"));\n@@ -3394,6 +3425,17 @@\n       styleQueue.sheets.forEach(preloadLateStyle, this);\n       styleQueue.sheets.clear();\n     }\n+    function pushCompletedShellIdAttribute(target, resumableState) {\n+      (resumableState.instructions & SentCompletedShellId) === NothingSent &&\n+        ((resumableState.instructions |= SentCompletedShellId),\n+        target.push(\n+          completedShellIdAttributeStart,\n+          stringToChunk(\n+            escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\")\n+          ),\n+          attributeEnd\n+        ));\n+    }\n     function writeStyleResourceDependenciesInJS(destination, hoistableState) {\n       writeChunk(destination, arrayFirstOpenBracket);\n       var nextArrayOpenBrackChunk = arrayFirstOpenBracket;\n@@ -4433,6 +4475,7 @@\n       this.fatalError = null;\n       this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n       this.completedPreambleSegments = this.completedRootSegment = null;\n+      this.byteSize = 0;\n       this.abortableTasks = abortSet;\n       this.pingedTasks = [];\n       this.clientRenderedBoundaries = [];\n@@ -5604,7 +5647,8 @@\n                     boundarySegment.lastPushedText &&\n                       boundarySegment.textEmbedded &&\n                       boundarySegment.chunks.push(textSeparator),\n-                    (boundarySegment.status = COMPLETED);\n+                    (boundarySegment.status = COMPLETED),\n+                    finishedSegment(request, parentBoundary, boundarySegment);\n                 } catch (thrownValue) {\n                   throw (\n                     ((boundarySegment.status = 12 === request.status ? 3 : 4),\n@@ -5650,11 +5694,13 @@\n                       contentRootSegment.textEmbedded &&\n                       contentRootSegment.chunks.push(textSeparator),\n                     (contentRootSegment.status = COMPLETED),\n+                    finishedSegment(request, newBoundary, contentRootSegment),\n                     queueCompletedSegment(newBoundary, contentRootSegment),\n                     0 === newBoundary.pendingTasks &&\n-                      newBoundary.status === PENDING)\n+                      newBoundary.status === PENDING &&\n+                      ((newBoundary.status = COMPLETED),\n+                      !(newBoundary.byteSize > request.progressiveChunkSize)))\n                   ) {\n-                    newBoundary.status = COMPLETED;\n                     0 === request.pendingRootTasks &&\n                       task.blockedPreamble &&\n                       preparePreamble(request);\n@@ -5849,6 +5895,7 @@\n           (task.blockedSegment = resumedSegment),\n           renderNode(request, task, node, childIndex),\n           (resumedSegment.status = COMPLETED),\n+          finishedSegment(request, blockedBoundary, resumedSegment),\n           null === blockedBoundary\n             ? (request.completedRootSegment = resumedSegment)\n             : (queueCompletedSegment(blockedBoundary, resumedSegment),\n@@ -6765,6 +6812,16 @@\n           queueCompletedSegment(boundary, childSegment);\n       } else boundary.completedSegments.push(segment);\n     }\n+    function finishedSegment(request, boundary, segment) {\n+      if (null !== byteLengthOfChunk) {\n+        segment = segment.chunks;\n+        for (var segmentByteSize = 0, i = 0; i < segment.length; i++)\n+          segmentByteSize += segment[i].byteLength;\n+        null === boundary\n+          ? (request.byteSize += segmentByteSize)\n+          : (boundary.byteSize += segmentByteSize);\n+      }\n+    }\n     function finishedTask(request, boundary, segment) {\n       if (null === boundary) {\n         if (null !== segment && segment.parentFlushed) {\n@@ -6788,11 +6845,12 @@\n                 boundary.parentFlushed &&\n                   request.completedBoundaries.push(boundary),\n                 boundary.status === COMPLETED &&\n-                  (boundary.fallbackAbortableTasks.forEach(\n-                    abortTaskSoft,\n-                    request\n-                  ),\n-                  boundary.fallbackAbortableTasks.clear(),\n+                  (boundary.byteSize > request.progressiveChunkSize ||\n+                    (boundary.fallbackAbortableTasks.forEach(\n+                      abortTaskSoft,\n+                      request\n+                    ),\n+                    boundary.fallbackAbortableTasks.clear()),\n                   0 === request.pendingRootTasks &&\n                     null === request.trackedPostpones &&\n                     null !== boundary.contentPreamble &&\n@@ -6932,6 +6990,11 @@\n                     request$jscomp$1.chunks.push(textSeparator),\n                   errorDigest.abortSet.delete(errorDigest),\n                   (request$jscomp$1.status = COMPLETED),\n+                  finishedSegment(\n+                    request,\n+                    errorDigest.blockedBoundary,\n+                    request$jscomp$1\n+                  ),\n                   finishedTask(\n                     request,\n                     errorDigest.blockedBoundary,\n@@ -7281,6 +7344,7 @@\n       var requiresStyleInsertion = request.stylesToHoist;\n       request.stylesToHoist = !1;\n       writeChunk(destination, request.startInlineScript);\n+      writeChunk(destination, endOfStartTag);\n       requiresStyleInsertion\n         ? (completedSegments.instructions & SentCompleteBoundaryFunction) ===\n           NothingSent\n@@ -7347,6 +7411,7 @@\n       boundary = request.resumableState;\n       request = request.renderState;\n       writeChunk(destination, request.startInlineScript);\n+      writeChunk(destination, endOfStartTag);\n       (boundary.instructions & SentCompleteSegmentFunction) === NothingSent\n         ? ((boundary.instructions |= SentCompleteSegmentFunction),\n           writeChunk(destination, completeSegmentScript1Full))\n@@ -7371,7 +7436,8 @@\n             if (completedRootSegment.status === POSTPONED) return;\n             var completedPreambleSegments = request.completedPreambleSegments;\n             if (null === completedPreambleSegments) return;\n-            var renderState = request.renderState,\n+            var resumableState = request.resumableState,\n+              renderState = request.renderState,\n               preamble = renderState.preamble,\n               htmlChunks = preamble.htmlChunks,\n               headChunks = preamble.headChunks,\n@@ -7428,6 +7494,15 @@\n             renderState.scripts.clear();\n             renderState.bulkPreloads.forEach(flushResource, destination);\n             renderState.bulkPreloads.clear();\n+            if (htmlChunks || headChunks) {\n+              var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+              writeChunk(destination, blockingRenderChunkStart);\n+              writeChunk(\n+                destination,\n+                stringToChunk(escapeTextForBrowser(shellId))\n+              );\n+              writeChunk(destination, blockingRenderChunkEnd);\n+            }\n             var hoistableChunks = renderState.hoistableChunks;\n             for (\n               i$jscomp$0 = 0;\n@@ -7436,13 +7511,17 @@\n             )\n               writeChunk(destination, hoistableChunks[i$jscomp$0]);\n             for (\n-              renderState = hoistableChunks.length = 0;\n-              renderState < completedPreambleSegments.length;\n-              renderState++\n+              resumableState = hoistableChunks.length = 0;\n+              resumableState < completedPreambleSegments.length;\n+              resumableState++\n             ) {\n-              var segments = completedPreambleSegments[renderState];\n-              for (preamble = 0; preamble < segments.length; preamble++)\n-                flushSegment(request, destination, segments[preamble], null);\n+              var segments = completedPreambleSegments[resumableState];\n+              for (\n+                renderState = 0;\n+                renderState < segments.length;\n+                renderState++\n+              )\n+                flushSegment(request, destination, segments[renderState], null);\n             }\n             var preamble$jscomp$0 = request.renderState.preamble,\n               headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n@@ -7458,11 +7537,27 @@\n                 writeChunk(destination, bodyChunks[completedPreambleSegments]);\n             flushSegment(request, destination, completedRootSegment, null);\n             request.completedRootSegment = null;\n-            writeBootstrap(destination, request.renderState);\n+            var resumableState$jscomp$0 = request.resumableState,\n+              renderState$jscomp$0 = request.renderState,\n+              preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+            if (\n+              (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+              (resumableState$jscomp$0.instructions & SentCompletedShellId) ===\n+                NothingSent\n+            ) {\n+              var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+              bootstrapChunks.push(startChunkForTag(\"template\"));\n+              pushCompletedShellIdAttribute(\n+                bootstrapChunks,\n+                resumableState$jscomp$0\n+              );\n+              bootstrapChunks.push(endOfStartTag, endChunkForTag(\"template\"));\n+            }\n+            writeBootstrap(destination, renderState$jscomp$0);\n           }\n-          var renderState$jscomp$0 = request.renderState;\n+          var renderState$jscomp$1 = request.renderState;\n           completedRootSegment = 0;\n-          var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+          var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < viewportChunks$jscomp$0.length;\n@@ -7473,21 +7568,21 @@\n               viewportChunks$jscomp$0[completedRootSegment]\n             );\n           viewportChunks$jscomp$0.length = 0;\n-          renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-          renderState$jscomp$0.preconnects.clear();\n-          renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.fontPreloads.clear();\n-          renderState$jscomp$0.highImagePreloads.forEach(\n+          renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+          renderState$jscomp$1.preconnects.clear();\n+          renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.fontPreloads.clear();\n+          renderState$jscomp$1.highImagePreloads.forEach(\n             flushResource,\n             destination\n           );\n-          renderState$jscomp$0.highImagePreloads.clear();\n-          renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-          renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-          renderState$jscomp$0.scripts.clear();\n-          renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.bulkPreloads.clear();\n-          var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+          renderState$jscomp$1.highImagePreloads.clear();\n+          renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+          renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+          renderState$jscomp$1.scripts.clear();\n+          renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.bulkPreloads.clear();\n+          var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -7501,80 +7596,83 @@\n           var clientRenderedBoundaries = request.clientRenderedBoundaries;\n           for (i = 0; i < clientRenderedBoundaries.length; i++) {\n             var boundary = clientRenderedBoundaries[i];\n-            renderState$jscomp$0 = destination;\n-            var resumableState = request.resumableState,\n-              renderState$jscomp$1 = request.renderState,\n+            renderState$jscomp$1 = destination;\n+            var resumableState$jscomp$1 = request.resumableState,\n+              renderState$jscomp$2 = request.renderState,\n               id = boundary.rootSegmentID,\n               errorDigest = boundary.errorDigest,\n               errorMessage = boundary.errorMessage,\n               errorStack = boundary.errorStack,\n               errorComponentStack = boundary.errorComponentStack;\n             writeChunk(\n-              renderState$jscomp$0,\n-              renderState$jscomp$1.startInlineScript\n+              renderState$jscomp$1,\n+              renderState$jscomp$2.startInlineScript\n             );\n-            (resumableState.instructions & SentClientRenderFunction) ===\n+            writeChunk(renderState$jscomp$1, endOfStartTag);\n+            (resumableState$jscomp$1.instructions &\n+              SentClientRenderFunction) ===\n             NothingSent\n-              ? ((resumableState.instructions |= SentClientRenderFunction),\n-                writeChunk(renderState$jscomp$0, clientRenderScript1Full))\n-              : writeChunk(renderState$jscomp$0, clientRenderScript1Partial);\n+              ? ((resumableState$jscomp$1.instructions |=\n+                  SentClientRenderFunction),\n+                writeChunk(renderState$jscomp$1, clientRenderScript1Full))\n+              : writeChunk(renderState$jscomp$1, clientRenderScript1Partial);\n             writeChunk(\n-              renderState$jscomp$0,\n-              renderState$jscomp$1.boundaryPrefix\n+              renderState$jscomp$1,\n+              renderState$jscomp$2.boundaryPrefix\n             );\n-            writeChunk(renderState$jscomp$0, stringToChunk(id.toString(16)));\n-            writeChunk(renderState$jscomp$0, clientRenderScript1A);\n+            writeChunk(renderState$jscomp$1, stringToChunk(id.toString(16)));\n+            writeChunk(renderState$jscomp$1, clientRenderScript1A);\n             if (\n               errorDigest ||\n               errorMessage ||\n               errorStack ||\n               errorComponentStack\n             )\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 clientRenderErrorScriptArgInterstitial\n               ),\n                 writeChunk(\n-                  renderState$jscomp$0,\n+                  renderState$jscomp$1,\n                   stringToChunk(\n                     escapeJSStringsForInstructionScripts(errorDigest || \"\")\n                   )\n                 );\n             if (errorMessage || errorStack || errorComponentStack)\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 clientRenderErrorScriptArgInterstitial\n               ),\n                 writeChunk(\n-                  renderState$jscomp$0,\n+                  renderState$jscomp$1,\n                   stringToChunk(\n                     escapeJSStringsForInstructionScripts(errorMessage || \"\")\n                   )\n                 );\n             if (errorStack || errorComponentStack)\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 clientRenderErrorScriptArgInterstitial\n               ),\n                 writeChunk(\n-                  renderState$jscomp$0,\n+                  renderState$jscomp$1,\n                   stringToChunk(\n                     escapeJSStringsForInstructionScripts(errorStack || \"\")\n                   )\n                 );\n             errorComponentStack &&\n               (writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 clientRenderErrorScriptArgInterstitial\n               ),\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 stringToChunk(\n                   escapeJSStringsForInstructionScripts(errorComponentStack)\n                 )\n               ));\n             var JSCompiler_inline_result = writeChunkAndReturn(\n-              renderState$jscomp$0,\n+              renderState$jscomp$1,\n               clientRenderScriptEnd\n             );\n             if (!JSCompiler_inline_result) {\n@@ -7742,11 +7840,11 @@\n     }\n     function ensureCorrectIsomorphicReactVersion() {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-canary-197d6a04-20250424\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-canary-5dc00d6b-20250428\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-canary-197d6a04-20250424\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-canary-5dc00d6b-20250428\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     }\n     var React = require(\"next/dist/compiled/react\"),\n@@ -8835,18 +8933,19 @@\n       SentCompleteBoundaryFunction = 2,\n       SentClientRenderFunction = 4,\n       SentStyleInsertionFunction = 8,\n+      SentCompletedShellId = 32,\n       EXISTS = null,\n       PRELOAD_NO_CREDS = [];\n     Object.freeze(PRELOAD_NO_CREDS);\n     stringToPrecomputedChunk('\"></template>');\n-    var startInlineScript = stringToPrecomputedChunk(\"<script>\"),\n+    var startInlineScript = stringToPrecomputedChunk(\"<script\"),\n       endInlineScript = stringToPrecomputedChunk(\"\\x3c/script>\"),\n       startScriptSrc = stringToPrecomputedChunk('<script src=\"'),\n       startModuleSrc = stringToPrecomputedChunk('<script type=\"module\" src=\"'),\n-      scriptNonce = stringToPrecomputedChunk('\" nonce=\"'),\n-      scriptIntegirty = stringToPrecomputedChunk('\" integrity=\"'),\n-      scriptCrossOrigin = stringToPrecomputedChunk('\" crossorigin=\"'),\n-      endAsyncScript = stringToPrecomputedChunk('\" async=\"\">\\x3c/script>'),\n+      scriptNonce = stringToPrecomputedChunk(' nonce=\"'),\n+      scriptIntegirty = stringToPrecomputedChunk(' integrity=\"'),\n+      scriptCrossOrigin = stringToPrecomputedChunk(' crossorigin=\"'),\n+      endAsyncScript = stringToPrecomputedChunk(' async=\"\">\\x3c/script>'),\n       scriptRegex = /(<\\/|<)(s)(cript)/gi,\n       importMapScriptStart = stringToPrecomputedChunk(\n         '<script type=\"importmap\">'\n@@ -9023,6 +9122,13 @@\n       spaceSeparator = stringToPrecomputedChunk(\" \"),\n       styleTagResourceOpen3 = stringToPrecomputedChunk('\">'),\n       styleTagResourceClose = stringToPrecomputedChunk(\"</style>\"),\n+      blockingRenderChunkStart = stringToPrecomputedChunk(\n+        '<link rel=\"expect\" href=\"#'\n+      ),\n+      blockingRenderChunkEnd = stringToPrecomputedChunk(\n+        '\" blocking=\"render\"/>'\n+      ),\n+      completedShellIdAttributeStart = stringToPrecomputedChunk(' id=\"'),\n       arrayFirstOpenBracket = stringToPrecomputedChunk(\"[\"),\n       arraySubsequentOpenBracket = stringToPrecomputedChunk(\",[\"),\n       arrayInterstitial = stringToPrecomputedChunk(\",\"),\n@@ -9420,5 +9526,5 @@\n         startWork(request);\n       });\n     };\n-    exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+    exports.version = \"19.2.0-canary-5dc00d6b-20250428\";\n   })();"
        },
        {
            "sha": "dbf01c217e6e546b5ad231f40d20677b3249d488",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server.browser.production.js",
            "status": "modified",
            "additions": 174,
            "deletions": 86,
            "changes": 260,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.browser.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.browser.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.browser.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -191,6 +191,9 @@ function stringToChunk(content) {\n function stringToPrecomputedChunk(content) {\n   return textEncoder.encode(content);\n }\n+function byteLengthOfChunk(chunk) {\n+  return chunk.byteLength;\n+}\n function closeWithError(destination, error) {\n   \"function\" === typeof destination.error\n     ? destination.error(error)\n@@ -372,14 +375,14 @@ ReactDOMSharedInternals.d = {\n };\n var PRELOAD_NO_CREDS = [];\n stringToPrecomputedChunk('\"></template>');\n-var startInlineScript = stringToPrecomputedChunk(\"<script>\"),\n+var startInlineScript = stringToPrecomputedChunk(\"<script\"),\n   endInlineScript = stringToPrecomputedChunk(\"\\x3c/script>\"),\n   startScriptSrc = stringToPrecomputedChunk('<script src=\"'),\n   startModuleSrc = stringToPrecomputedChunk('<script type=\"module\" src=\"'),\n-  scriptNonce = stringToPrecomputedChunk('\" nonce=\"'),\n-  scriptIntegirty = stringToPrecomputedChunk('\" integrity=\"'),\n-  scriptCrossOrigin = stringToPrecomputedChunk('\" crossorigin=\"'),\n-  endAsyncScript = stringToPrecomputedChunk('\" async=\"\">\\x3c/script>'),\n+  scriptNonce = stringToPrecomputedChunk(' nonce=\"'),\n+  scriptIntegirty = stringToPrecomputedChunk(' integrity=\"'),\n+  scriptCrossOrigin = stringToPrecomputedChunk(' crossorigin=\"'),\n+  endAsyncScript = stringToPrecomputedChunk(' async=\"\">\\x3c/script>'),\n   scriptRegex = /(<\\/|<)(s)(cript)/gi;\n function scriptReplacer(match, prefix, s, suffix) {\n   return \"\" + prefix + (\"s\" === s ? \"\\\\u0073\" : \"\\\\u0053\") + suffix;\n@@ -400,21 +403,23 @@ function createRenderState(\n       void 0 === nonce\n         ? startInlineScript\n         : stringToPrecomputedChunk(\n-            '<script nonce=\"' + escapeTextForBrowser(nonce) + '\">'\n+            '<script nonce=\"' + escapeTextForBrowser(nonce) + '\"'\n           ),\n     idPrefix = resumableState.idPrefix;\n   externalRuntimeConfig = [];\n   var bootstrapScriptContent = resumableState.bootstrapScriptContent,\n     bootstrapScripts = resumableState.bootstrapScripts,\n     bootstrapModules = resumableState.bootstrapModules;\n   void 0 !== bootstrapScriptContent &&\n+    (externalRuntimeConfig.push(inlineScriptWithNonce),\n+    pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState),\n     externalRuntimeConfig.push(\n-      inlineScriptWithNonce,\n+      endOfStartTag,\n       stringToChunk(\n         (\"\" + bootstrapScriptContent).replace(scriptRegex, scriptReplacer)\n       ),\n       endInlineScript\n-    );\n+    ));\n   bootstrapScriptContent = [];\n   void 0 !== importMap &&\n     (bootstrapScriptContent.push(importMapScriptStart),\n@@ -503,23 +508,28 @@ function createRenderState(\n       onHeaders.bootstrapScripts.add(scriptConfig);\n       externalRuntimeConfig.push(\n         startScriptSrc,\n-        stringToChunk(escapeTextForBrowser(maxHeadersLength))\n+        stringToChunk(escapeTextForBrowser(maxHeadersLength)),\n+        attributeEnd\n       );\n       nonce &&\n         externalRuntimeConfig.push(\n           scriptNonce,\n-          stringToChunk(escapeTextForBrowser(nonce))\n+          stringToChunk(escapeTextForBrowser(nonce)),\n+          attributeEnd\n         );\n       \"string\" === typeof idPrefix &&\n         externalRuntimeConfig.push(\n           scriptIntegirty,\n-          stringToChunk(escapeTextForBrowser(idPrefix))\n+          stringToChunk(escapeTextForBrowser(idPrefix)),\n+          attributeEnd\n         );\n       \"string\" === typeof inlineScriptWithNonce &&\n         externalRuntimeConfig.push(\n           scriptCrossOrigin,\n-          stringToChunk(escapeTextForBrowser(inlineScriptWithNonce))\n+          stringToChunk(escapeTextForBrowser(inlineScriptWithNonce)),\n+          attributeEnd\n         );\n+      pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState);\n       externalRuntimeConfig.push(endAsyncScript);\n     }\n   if (void 0 !== bootstrapModules)\n@@ -558,23 +568,28 @@ function createRenderState(\n         onHeaders.bootstrapScripts.add(bootstrapScriptContent),\n         externalRuntimeConfig.push(\n           startModuleSrc,\n-          stringToChunk(escapeTextForBrowser(importMap))\n+          stringToChunk(escapeTextForBrowser(importMap)),\n+          attributeEnd\n         ),\n         nonce &&\n           externalRuntimeConfig.push(\n             scriptNonce,\n-            stringToChunk(escapeTextForBrowser(nonce))\n+            stringToChunk(escapeTextForBrowser(nonce)),\n+            attributeEnd\n           ),\n         \"string\" === typeof inlineScriptWithNonce &&\n           externalRuntimeConfig.push(\n             scriptIntegirty,\n-            stringToChunk(escapeTextForBrowser(inlineScriptWithNonce))\n+            stringToChunk(escapeTextForBrowser(inlineScriptWithNonce)),\n+            attributeEnd\n           ),\n         \"string\" === typeof maxHeadersLength &&\n           externalRuntimeConfig.push(\n             scriptCrossOrigin,\n-            stringToChunk(escapeTextForBrowser(maxHeadersLength))\n+            stringToChunk(escapeTextForBrowser(maxHeadersLength)),\n+            attributeEnd\n           ),\n+        pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState),\n         externalRuntimeConfig.push(endAsyncScript);\n   return onHeaders;\n }\n@@ -1062,13 +1077,25 @@ var selectedMarkerAttribute = stringToPrecomputedChunk(' selected=\"\"'),\n     'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});'\n   );\n function injectFormReplayingRuntime(resumableState, renderState) {\n-  0 === (resumableState.instructions & 16) &&\n-    ((resumableState.instructions |= 16),\n-    renderState.bootstrapChunks.unshift(\n-      renderState.startInlineScript,\n-      formReplayingRuntimeScript,\n-      endInlineScript\n-    ));\n+  if (0 === (resumableState.instructions & 16)) {\n+    resumableState.instructions |= 16;\n+    var preamble = renderState.preamble,\n+      bootstrapChunks = renderState.bootstrapChunks;\n+    (preamble.htmlChunks || preamble.headChunks) && 0 === bootstrapChunks.length\n+      ? (bootstrapChunks.push(renderState.startInlineScript),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(\n+          endOfStartTag,\n+          formReplayingRuntimeScript,\n+          endInlineScript\n+        ))\n+      : bootstrapChunks.unshift(\n+          renderState.startInlineScript,\n+          endOfStartTag,\n+          formReplayingRuntimeScript,\n+          endInlineScript\n+        );\n+  }\n }\n var formStateMarkerIsMatching = stringToPrecomputedChunk(\"\\x3c!--F!--\\x3e\"),\n   formStateMarkerIsNotMatching = stringToPrecomputedChunk(\"\\x3c!--F--\\x3e\");\n@@ -2630,6 +2657,22 @@ function preloadLateStyles(styleQueue) {\n   styleQueue.sheets.forEach(preloadLateStyle, this);\n   styleQueue.sheets.clear();\n }\n+var blockingRenderChunkStart = stringToPrecomputedChunk(\n+    '<link rel=\"expect\" href=\"#'\n+  ),\n+  blockingRenderChunkEnd = stringToPrecomputedChunk('\" blocking=\"render\"/>'),\n+  completedShellIdAttributeStart = stringToPrecomputedChunk(' id=\"');\n+function pushCompletedShellIdAttribute(target, resumableState) {\n+  0 === (resumableState.instructions & 32) &&\n+    ((resumableState.instructions |= 32),\n+    target.push(\n+      completedShellIdAttributeStart,\n+      stringToChunk(\n+        escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\")\n+      ),\n+      attributeEnd\n+    ));\n+}\n var arrayFirstOpenBracket = stringToPrecomputedChunk(\"[\"),\n   arraySubsequentOpenBracket = stringToPrecomputedChunk(\",[\"),\n   arrayInterstitial = stringToPrecomputedChunk(\",\"),\n@@ -3910,6 +3953,7 @@ function RequestInstance(\n   this.fatalError = null;\n   this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n   this.completedPreambleSegments = this.completedRootSegment = null;\n+  this.byteSize = 0;\n   this.abortableTasks = abortSet;\n   this.pingedTasks = [];\n   this.clientRenderedBoundaries = [];\n@@ -4524,11 +4568,11 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           }\n         } else {\n           type = task.keyPath;\n-          var parentBoundary = task.blockedBoundary;\n-          ref = task.blockedPreamble;\n+          ref = task.blockedBoundary;\n+          propName$33 = task.blockedPreamble;\n           var parentHoistableState = task.hoistableState;\n-          propName$33 = task.blockedSegment;\n-          propName = props.fallback;\n+          propName = task.blockedSegment;\n+          var fallback = props.fallback;\n           props = props.children;\n           var fallbackAbortSet = new Set();\n           var newBoundary =\n@@ -4544,14 +4588,14 @@ function renderElement(request, task, keyPath, type, props, ref) {\n             (newBoundary.trackedContentKeyPath = keyPath);\n           var boundarySegment = createPendingSegment(\n             request,\n-            propName$33.chunks.length,\n+            propName.chunks.length,\n             newBoundary,\n             task.formatContext,\n             !1,\n             !1\n           );\n-          propName$33.children.push(boundarySegment);\n-          propName$33.lastPushedText = !1;\n+          propName.children.push(boundarySegment);\n+          propName.lastPushedText = !1;\n           var contentRootSegment = createPendingSegment(\n             request,\n             0,\n@@ -4571,19 +4615,20 @@ function renderElement(request, task, keyPath, type, props, ref) {\n             task.keyPath = newProps;\n             boundarySegment.status = 6;\n             try {\n-              renderNode(request, task, propName, -1),\n+              renderNode(request, task, fallback, -1),\n                 boundarySegment.lastPushedText &&\n                   boundarySegment.textEmbedded &&\n                   boundarySegment.chunks.push(textSeparator),\n-                (boundarySegment.status = 1);\n+                (boundarySegment.status = 1),\n+                finishedSegment(request, ref, boundarySegment);\n             } catch (thrownValue) {\n               throw (\n                 ((boundarySegment.status = 12 === request.status ? 3 : 4),\n                 thrownValue)\n               );\n             } finally {\n-              (task.blockedSegment = propName$33),\n-                (task.blockedPreamble = ref),\n+              (task.blockedSegment = propName),\n+                (task.blockedPreamble = propName$33),\n                 (task.keyPath = type);\n             }\n             task = createRenderTask(\n@@ -4619,10 +4664,13 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                   contentRootSegment.textEmbedded &&\n                   contentRootSegment.chunks.push(textSeparator),\n                 (contentRootSegment.status = 1),\n+                finishedSegment(request, newBoundary, contentRootSegment),\n                 queueCompletedSegment(newBoundary, contentRootSegment),\n-                0 === newBoundary.pendingTasks && 0 === newBoundary.status)\n+                0 === newBoundary.pendingTasks &&\n+                  0 === newBoundary.status &&\n+                  ((newBoundary.status = 1),\n+                  !(newBoundary.byteSize > request.progressiveChunkSize)))\n               ) {\n-                newBoundary.status = 1;\n                 0 === request.pendingRootTasks &&\n                   task.blockedPreamble &&\n                   preparePreamble(request);\n@@ -4644,18 +4692,18 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                 (newBoundary.errorDigest = initialState),\n                 untrackBoundary(request, newBoundary);\n             } finally {\n-              (task.blockedBoundary = parentBoundary),\n-                (task.blockedPreamble = ref),\n+              (task.blockedBoundary = ref),\n+                (task.blockedPreamble = propName$33),\n                 (task.hoistableState = parentHoistableState),\n-                (task.blockedSegment = propName$33),\n+                (task.blockedSegment = propName),\n                 (task.keyPath = type);\n             }\n             task = createRenderTask(\n               request,\n               null,\n-              propName,\n+              fallback,\n               -1,\n-              parentBoundary,\n+              ref,\n               boundarySegment,\n               newBoundary.fallbackPreamble,\n               newBoundary.fallbackState,\n@@ -4677,9 +4725,8 @@ function renderElement(request, task, keyPath, type, props, ref) {\n       switch (type.$$typeof) {\n         case REACT_FORWARD_REF_TYPE:\n           if (\"ref\" in props)\n-            for (newBoundary in ((newProps = {}), props))\n-              \"ref\" !== newBoundary &&\n-                (newProps[newBoundary] = props[newBoundary]);\n+            for (fallback in ((newProps = {}), props))\n+              \"ref\" !== fallback && (newProps[fallback] = props[fallback]);\n           else newProps = props;\n           type = renderWithHooks(\n             request,\n@@ -4765,6 +4812,7 @@ function resumeNode(request, task, segmentId, node, childIndex) {\n       (task.blockedSegment = resumedSegment),\n       renderNode(request, task, node, childIndex),\n       (resumedSegment.status = 1),\n+      finishedSegment(request, blockedBoundary, resumedSegment),\n       null === blockedBoundary\n         ? (request.completedRootSegment = resumedSegment)\n         : (queueCompletedSegment(blockedBoundary, resumedSegment),\n@@ -5457,6 +5505,16 @@ function queueCompletedSegment(boundary, segment) {\n     1 === childSegment.status && queueCompletedSegment(boundary, childSegment);\n   } else boundary.completedSegments.push(segment);\n }\n+function finishedSegment(request, boundary, segment) {\n+  if (null !== byteLengthOfChunk) {\n+    segment = segment.chunks;\n+    for (var segmentByteSize = 0, i = 0; i < segment.length; i++)\n+      segmentByteSize += segment[i].byteLength;\n+    null === boundary\n+      ? (request.byteSize += segmentByteSize)\n+      : (boundary.byteSize += segmentByteSize);\n+  }\n+}\n function finishedTask(request, boundary, segment) {\n   if (null === boundary) {\n     if (null !== segment && segment.parentFlushed) {\n@@ -5478,8 +5536,12 @@ function finishedTask(request, boundary, segment) {\n             boundary.parentFlushed &&\n               request.completedBoundaries.push(boundary),\n             1 === boundary.status &&\n-              (boundary.fallbackAbortableTasks.forEach(abortTaskSoft, request),\n-              boundary.fallbackAbortableTasks.clear(),\n+              (boundary.byteSize > request.progressiveChunkSize ||\n+                (boundary.fallbackAbortableTasks.forEach(\n+                  abortTaskSoft,\n+                  request\n+                ),\n+                boundary.fallbackAbortableTasks.clear()),\n               0 === request.pendingRootTasks &&\n                 null === request.trackedPostpones &&\n                 null !== boundary.contentPreamble &&\n@@ -5600,6 +5662,7 @@ function performWork(request$jscomp$2) {\n                 request$jscomp$1.chunks.push(textSeparator),\n               task.abortSet.delete(task),\n               (request$jscomp$1.status = 1),\n+              finishedSegment(request, task.blockedBoundary, request$jscomp$1),\n               finishedTask(request, task.blockedBoundary, request$jscomp$1);\n           } catch (thrownValue) {\n             resetHooksState();\n@@ -5869,6 +5932,7 @@ function flushCompletedBoundary(request, destination, boundary) {\n   var requiresStyleInsertion = request.stylesToHoist;\n   request.stylesToHoist = !1;\n   writeChunk(destination, request.startInlineScript);\n+  writeChunk(destination, endOfStartTag);\n   requiresStyleInsertion\n     ? 0 === (completedSegments.instructions & 2)\n       ? ((completedSegments.instructions |= 10),\n@@ -5914,6 +5978,7 @@ function flushPartiallyCompletedSegment(\n   boundary = request.resumableState;\n   request = request.renderState;\n   writeChunk(destination, request.startInlineScript);\n+  writeChunk(destination, endOfStartTag);\n   0 === (boundary.instructions & 1)\n     ? ((boundary.instructions |= 1),\n       writeChunk(destination, completeSegmentScript1Full))\n@@ -5938,7 +6003,8 @@ function flushCompletedQueues(request, destination) {\n         if (5 === completedRootSegment.status) return;\n         var completedPreambleSegments = request.completedPreambleSegments;\n         if (null === completedPreambleSegments) return;\n-        var renderState = request.renderState,\n+        var resumableState = request.resumableState,\n+          renderState = request.renderState,\n           preamble = renderState.preamble,\n           htmlChunks = preamble.htmlChunks,\n           headChunks = preamble.headChunks,\n@@ -5979,17 +6045,23 @@ function flushCompletedQueues(request, destination) {\n         renderState.scripts.clear();\n         renderState.bulkPreloads.forEach(flushResource, destination);\n         renderState.bulkPreloads.clear();\n+        if (htmlChunks || headChunks) {\n+          var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+          writeChunk(destination, blockingRenderChunkStart);\n+          writeChunk(destination, stringToChunk(escapeTextForBrowser(shellId)));\n+          writeChunk(destination, blockingRenderChunkEnd);\n+        }\n         var hoistableChunks = renderState.hoistableChunks;\n         for (i$jscomp$0 = 0; i$jscomp$0 < hoistableChunks.length; i$jscomp$0++)\n           writeChunk(destination, hoistableChunks[i$jscomp$0]);\n         for (\n-          renderState = hoistableChunks.length = 0;\n-          renderState < completedPreambleSegments.length;\n-          renderState++\n+          resumableState = hoistableChunks.length = 0;\n+          resumableState < completedPreambleSegments.length;\n+          resumableState++\n         ) {\n-          var segments = completedPreambleSegments[renderState];\n-          for (preamble = 0; preamble < segments.length; preamble++)\n-            flushSegment(request, destination, segments[preamble], null);\n+          var segments = completedPreambleSegments[resumableState];\n+          for (renderState = 0; renderState < segments.length; renderState++)\n+            flushSegment(request, destination, segments[renderState], null);\n         }\n         var preamble$jscomp$0 = request.renderState.preamble,\n           headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n@@ -6005,33 +6077,48 @@ function flushCompletedQueues(request, destination) {\n             writeChunk(destination, bodyChunks[completedPreambleSegments]);\n         flushSegment(request, destination, completedRootSegment, null);\n         request.completedRootSegment = null;\n-        writeBootstrap(destination, request.renderState);\n+        var resumableState$jscomp$0 = request.resumableState,\n+          renderState$jscomp$0 = request.renderState,\n+          preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+        if (\n+          (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+          0 === (resumableState$jscomp$0.instructions & 32)\n+        ) {\n+          var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+          bootstrapChunks.push(startChunkForTag(\"template\"));\n+          pushCompletedShellIdAttribute(\n+            bootstrapChunks,\n+            resumableState$jscomp$0\n+          );\n+          bootstrapChunks.push(endOfStartTag, endChunkForTag(\"template\"));\n+        }\n+        writeBootstrap(destination, renderState$jscomp$0);\n       }\n-      var renderState$jscomp$0 = request.renderState;\n+      var renderState$jscomp$1 = request.renderState;\n       completedRootSegment = 0;\n-      var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+      var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < viewportChunks$jscomp$0.length;\n         completedRootSegment++\n       )\n         writeChunk(destination, viewportChunks$jscomp$0[completedRootSegment]);\n       viewportChunks$jscomp$0.length = 0;\n-      renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-      renderState$jscomp$0.preconnects.clear();\n-      renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.fontPreloads.clear();\n-      renderState$jscomp$0.highImagePreloads.forEach(\n+      renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+      renderState$jscomp$1.preconnects.clear();\n+      renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.fontPreloads.clear();\n+      renderState$jscomp$1.highImagePreloads.forEach(\n         flushResource,\n         destination\n       );\n-      renderState$jscomp$0.highImagePreloads.clear();\n-      renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-      renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-      renderState$jscomp$0.scripts.clear();\n-      renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.bulkPreloads.clear();\n-      var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+      renderState$jscomp$1.highImagePreloads.clear();\n+      renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+      renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+      renderState$jscomp$1.scripts.clear();\n+      renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.bulkPreloads.clear();\n+      var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -6042,35 +6129,36 @@ function flushCompletedQueues(request, destination) {\n       var clientRenderedBoundaries = request.clientRenderedBoundaries;\n       for (i = 0; i < clientRenderedBoundaries.length; i++) {\n         var boundary = clientRenderedBoundaries[i];\n-        renderState$jscomp$0 = destination;\n-        var resumableState = request.resumableState,\n-          renderState$jscomp$1 = request.renderState,\n+        renderState$jscomp$1 = destination;\n+        var resumableState$jscomp$1 = request.resumableState,\n+          renderState$jscomp$2 = request.renderState,\n           id = boundary.rootSegmentID,\n           errorDigest = boundary.errorDigest;\n         writeChunk(\n-          renderState$jscomp$0,\n-          renderState$jscomp$1.startInlineScript\n+          renderState$jscomp$1,\n+          renderState$jscomp$2.startInlineScript\n         );\n-        0 === (resumableState.instructions & 4)\n-          ? ((resumableState.instructions |= 4),\n-            writeChunk(renderState$jscomp$0, clientRenderScript1Full))\n-          : writeChunk(renderState$jscomp$0, clientRenderScript1Partial);\n-        writeChunk(renderState$jscomp$0, renderState$jscomp$1.boundaryPrefix);\n-        writeChunk(renderState$jscomp$0, stringToChunk(id.toString(16)));\n-        writeChunk(renderState$jscomp$0, clientRenderScript1A);\n+        writeChunk(renderState$jscomp$1, endOfStartTag);\n+        0 === (resumableState$jscomp$1.instructions & 4)\n+          ? ((resumableState$jscomp$1.instructions |= 4),\n+            writeChunk(renderState$jscomp$1, clientRenderScript1Full))\n+          : writeChunk(renderState$jscomp$1, clientRenderScript1Partial);\n+        writeChunk(renderState$jscomp$1, renderState$jscomp$2.boundaryPrefix);\n+        writeChunk(renderState$jscomp$1, stringToChunk(id.toString(16)));\n+        writeChunk(renderState$jscomp$1, clientRenderScript1A);\n         errorDigest &&\n           (writeChunk(\n-            renderState$jscomp$0,\n+            renderState$jscomp$1,\n             clientRenderErrorScriptArgInterstitial\n           ),\n           writeChunk(\n-            renderState$jscomp$0,\n+            renderState$jscomp$1,\n             stringToChunk(\n               escapeJSStringsForInstructionScripts(errorDigest || \"\")\n             )\n           ));\n         var JSCompiler_inline_result = writeChunkAndReturn(\n-          renderState$jscomp$0,\n+          renderState$jscomp$1,\n           clientRenderScriptEnd\n         );\n         if (!JSCompiler_inline_result) {\n@@ -6223,12 +6311,12 @@ function abort(request, reason) {\n }\n function ensureCorrectIsomorphicReactVersion() {\n   var isomorphicReactPackageVersion = React.version;\n-  if (\"19.2.0-canary-197d6a04-20250424\" !== isomorphicReactPackageVersion)\n+  if (\"19.2.0-canary-5dc00d6b-20250428\" !== isomorphicReactPackageVersion)\n     throw Error(\n       formatProdErrorMessage(\n         527,\n         isomorphicReactPackageVersion,\n-        \"19.2.0-canary-197d6a04-20250424\"\n+        \"19.2.0-canary-5dc00d6b-20250428\"\n       )\n     );\n }\n@@ -6375,4 +6463,4 @@ exports.renderToReadableStream = function (children, options) {\n     startWork(request);\n   });\n };\n-exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+exports.version = \"19.2.0-canary-5dc00d6b-20250428\";"
        },
        {
            "sha": "404903f302465d08cff94f2ab907cb284d35e620",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server.bun.production.js",
            "status": "modified",
            "additions": 178,
            "deletions": 91,
            "changes": 269,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.bun.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.bun.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.bun.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -38,6 +38,9 @@ function flushBuffered(destination) {\n function writeChunk(destination, chunk) {\n   0 !== chunk.length && destination.write(chunk);\n }\n+function byteLengthOfChunk(chunk) {\n+  return Buffer.byteLength(chunk, \"utf8\");\n+}\n function closeWithError(destination, error) {\n   \"function\" === typeof destination.error\n     ? destination.error(error)\n@@ -232,19 +235,21 @@ function createRenderState(\n ) {\n   var inlineScriptWithNonce =\n       void 0 === nonce\n-        ? \"<script>\"\n-        : '<script nonce=\"' + escapeTextForBrowser(nonce) + '\">',\n+        ? \"<script\"\n+        : '<script nonce=\"' + escapeTextForBrowser(nonce) + '\"',\n     idPrefix = resumableState.idPrefix;\n   externalRuntimeConfig = [];\n   var bootstrapScriptContent = resumableState.bootstrapScriptContent,\n     bootstrapScripts = resumableState.bootstrapScripts,\n     bootstrapModules = resumableState.bootstrapModules;\n   void 0 !== bootstrapScriptContent &&\n+    (externalRuntimeConfig.push(inlineScriptWithNonce),\n+    pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState),\n     externalRuntimeConfig.push(\n-      inlineScriptWithNonce,\n+      \">\",\n       (\"\" + bootstrapScriptContent).replace(scriptRegex, scriptReplacer),\n       \"\\x3c/script>\"\n-    );\n+    ));\n   bootstrapScriptContent = [];\n   void 0 !== importMap &&\n     (bootstrapScriptContent.push('<script type=\"importmap\">'),\n@@ -331,21 +336,29 @@ function createRenderState(\n       onHeaders.bootstrapScripts.add(scriptConfig);\n       externalRuntimeConfig.push(\n         '<script src=\"',\n-        escapeTextForBrowser(maxHeadersLength)\n+        escapeTextForBrowser(maxHeadersLength),\n+        '\"'\n       );\n       nonce &&\n-        externalRuntimeConfig.push('\" nonce=\"', escapeTextForBrowser(nonce));\n+        externalRuntimeConfig.push(\n+          ' nonce=\"',\n+          escapeTextForBrowser(nonce),\n+          '\"'\n+        );\n       \"string\" === typeof idPrefix &&\n         externalRuntimeConfig.push(\n-          '\" integrity=\"',\n-          escapeTextForBrowser(idPrefix)\n+          ' integrity=\"',\n+          escapeTextForBrowser(idPrefix),\n+          '\"'\n         );\n       \"string\" === typeof inlineScriptWithNonce &&\n         externalRuntimeConfig.push(\n-          '\" crossorigin=\"',\n-          escapeTextForBrowser(inlineScriptWithNonce)\n+          ' crossorigin=\"',\n+          escapeTextForBrowser(inlineScriptWithNonce),\n+          '\"'\n         );\n-      externalRuntimeConfig.push('\" async=\"\">\\x3c/script>');\n+      pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState);\n+      externalRuntimeConfig.push(' async=\"\">\\x3c/script>');\n     }\n   if (void 0 !== bootstrapModules)\n     for (\n@@ -383,21 +396,29 @@ function createRenderState(\n         onHeaders.bootstrapScripts.add(bootstrapScriptContent),\n         externalRuntimeConfig.push(\n           '<script type=\"module\" src=\"',\n-          escapeTextForBrowser(importMap)\n+          escapeTextForBrowser(importMap),\n+          '\"'\n         ),\n         nonce &&\n-          externalRuntimeConfig.push('\" nonce=\"', escapeTextForBrowser(nonce)),\n+          externalRuntimeConfig.push(\n+            ' nonce=\"',\n+            escapeTextForBrowser(nonce),\n+            '\"'\n+          ),\n         \"string\" === typeof inlineScriptWithNonce &&\n           externalRuntimeConfig.push(\n-            '\" integrity=\"',\n-            escapeTextForBrowser(inlineScriptWithNonce)\n+            ' integrity=\"',\n+            escapeTextForBrowser(inlineScriptWithNonce),\n+            '\"'\n           ),\n         \"string\" === typeof maxHeadersLength &&\n           externalRuntimeConfig.push(\n-            '\" crossorigin=\"',\n-            escapeTextForBrowser(maxHeadersLength)\n+            ' crossorigin=\"',\n+            escapeTextForBrowser(maxHeadersLength),\n+            '\"'\n           ),\n-        externalRuntimeConfig.push('\" async=\"\">\\x3c/script>');\n+        pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState),\n+        externalRuntimeConfig.push(' async=\"\">\\x3c/script>');\n   return onHeaders;\n }\n function createResumableState(\n@@ -803,13 +824,25 @@ function flattenOptionChildren(children) {\n   return content;\n }\n function injectFormReplayingRuntime(resumableState, renderState) {\n-  0 === (resumableState.instructions & 16) &&\n-    ((resumableState.instructions |= 16),\n-    renderState.bootstrapChunks.unshift(\n-      renderState.startInlineScript,\n-      'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n-      \"\\x3c/script>\"\n-    ));\n+  if (0 === (resumableState.instructions & 16)) {\n+    resumableState.instructions |= 16;\n+    var preamble = renderState.preamble,\n+      bootstrapChunks = renderState.bootstrapChunks;\n+    (preamble.htmlChunks || preamble.headChunks) && 0 === bootstrapChunks.length\n+      ? (bootstrapChunks.push(renderState.startInlineScript),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(\n+          \">\",\n+          'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n+          \"\\x3c/script>\"\n+        ))\n+      : bootstrapChunks.unshift(\n+          renderState.startInlineScript,\n+          \">\",\n+          'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',\n+          \"\\x3c/script>\"\n+        );\n+  }\n }\n function pushLinkImpl(target, props) {\n   target.push(startChunkForTag(\"link\"));\n@@ -2263,6 +2296,15 @@ function preloadLateStyles(styleQueue) {\n   styleQueue.sheets.forEach(preloadLateStyle, this);\n   styleQueue.sheets.clear();\n }\n+function pushCompletedShellIdAttribute(target, resumableState) {\n+  0 === (resumableState.instructions & 32) &&\n+    ((resumableState.instructions |= 32),\n+    target.push(\n+      ' id=\"',\n+      escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\"),\n+      '\"'\n+    ));\n+}\n function writeStyleResourceDependenciesInJS(destination, hoistableState) {\n   writeChunk(destination, \"[\");\n   var nextArrayOpenBrackChunk = \"[\";\n@@ -3559,6 +3601,7 @@ function RequestInstance(\n   this.fatalError = null;\n   this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n   this.completedPreambleSegments = this.completedRootSegment = null;\n+  this.byteSize = 0;\n   this.abortableTasks = abortSet;\n   this.pingedTasks = [];\n   this.clientRenderedBoundaries = [];\n@@ -4139,11 +4182,11 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           }\n         } else {\n           type = task.keyPath;\n-          var parentBoundary = task.blockedBoundary;\n-          ref = task.blockedPreamble;\n+          ref = task.blockedBoundary;\n+          propName$33 = task.blockedPreamble;\n           var parentHoistableState = task.hoistableState;\n-          propName$33 = task.blockedSegment;\n-          propName = props.fallback;\n+          propName = task.blockedSegment;\n+          var fallback = props.fallback;\n           props = props.children;\n           var fallbackAbortSet = new Set();\n           var newBoundary =\n@@ -4159,14 +4202,14 @@ function renderElement(request, task, keyPath, type, props, ref) {\n             (newBoundary.trackedContentKeyPath = keyPath);\n           var boundarySegment = createPendingSegment(\n             request,\n-            propName$33.chunks.length,\n+            propName.chunks.length,\n             newBoundary,\n             task.formatContext,\n             !1,\n             !1\n           );\n-          propName$33.children.push(boundarySegment);\n-          propName$33.lastPushedText = !1;\n+          propName.children.push(boundarySegment);\n+          propName.lastPushedText = !1;\n           var contentRootSegment = createPendingSegment(\n             request,\n             0,\n@@ -4186,19 +4229,20 @@ function renderElement(request, task, keyPath, type, props, ref) {\n             task.keyPath = newProps;\n             boundarySegment.status = 6;\n             try {\n-              renderNode(request, task, propName, -1),\n+              renderNode(request, task, fallback, -1),\n                 boundarySegment.lastPushedText &&\n                   boundarySegment.textEmbedded &&\n                   boundarySegment.chunks.push(\"\\x3c!-- --\\x3e\"),\n-                (boundarySegment.status = 1);\n+                (boundarySegment.status = 1),\n+                finishedSegment(request, ref, boundarySegment);\n             } catch (thrownValue) {\n               throw (\n                 ((boundarySegment.status = 12 === request.status ? 3 : 4),\n                 thrownValue)\n               );\n             } finally {\n-              (task.blockedSegment = propName$33),\n-                (task.blockedPreamble = ref),\n+              (task.blockedSegment = propName),\n+                (task.blockedPreamble = propName$33),\n                 (task.keyPath = type);\n             }\n             task = createRenderTask(\n@@ -4234,10 +4278,13 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                   contentRootSegment.textEmbedded &&\n                   contentRootSegment.chunks.push(\"\\x3c!-- --\\x3e\"),\n                 (contentRootSegment.status = 1),\n+                finishedSegment(request, newBoundary, contentRootSegment),\n                 queueCompletedSegment(newBoundary, contentRootSegment),\n-                0 === newBoundary.pendingTasks && 0 === newBoundary.status)\n+                0 === newBoundary.pendingTasks &&\n+                  0 === newBoundary.status &&\n+                  ((newBoundary.status = 1),\n+                  !(newBoundary.byteSize > request.progressiveChunkSize)))\n               ) {\n-                newBoundary.status = 1;\n                 0 === request.pendingRootTasks &&\n                   task.blockedPreamble &&\n                   preparePreamble(request);\n@@ -4259,18 +4306,18 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                 (newBoundary.errorDigest = initialState),\n                 untrackBoundary(request, newBoundary);\n             } finally {\n-              (task.blockedBoundary = parentBoundary),\n-                (task.blockedPreamble = ref),\n+              (task.blockedBoundary = ref),\n+                (task.blockedPreamble = propName$33),\n                 (task.hoistableState = parentHoistableState),\n-                (task.blockedSegment = propName$33),\n+                (task.blockedSegment = propName),\n                 (task.keyPath = type);\n             }\n             task = createRenderTask(\n               request,\n               null,\n-              propName,\n+              fallback,\n               -1,\n-              parentBoundary,\n+              ref,\n               boundarySegment,\n               newBoundary.fallbackPreamble,\n               newBoundary.fallbackState,\n@@ -4292,9 +4339,8 @@ function renderElement(request, task, keyPath, type, props, ref) {\n       switch (type.$$typeof) {\n         case REACT_FORWARD_REF_TYPE:\n           if (\"ref\" in props)\n-            for (newBoundary in ((newProps = {}), props))\n-              \"ref\" !== newBoundary &&\n-                (newProps[newBoundary] = props[newBoundary]);\n+            for (fallback in ((newProps = {}), props))\n+              \"ref\" !== fallback && (newProps[fallback] = props[fallback]);\n           else newProps = props;\n           type = renderWithHooks(\n             request,\n@@ -4384,6 +4430,7 @@ function resumeNode(request, task, segmentId, node, childIndex) {\n       (task.blockedSegment = resumedSegment),\n       renderNode(request, task, node, childIndex),\n       (resumedSegment.status = 1),\n+      finishedSegment(request, blockedBoundary, resumedSegment),\n       null === blockedBoundary\n         ? (request.completedRootSegment = resumedSegment)\n         : (queueCompletedSegment(blockedBoundary, resumedSegment),\n@@ -5088,6 +5135,16 @@ function queueCompletedSegment(boundary, segment) {\n     1 === childSegment.status && queueCompletedSegment(boundary, childSegment);\n   } else boundary.completedSegments.push(segment);\n }\n+function finishedSegment(request, boundary, segment) {\n+  if (null !== byteLengthOfChunk) {\n+    segment = segment.chunks;\n+    for (var segmentByteSize = 0, i = 0; i < segment.length; i++)\n+      segmentByteSize += byteLengthOfChunk(segment[i]);\n+    null === boundary\n+      ? (request.byteSize += segmentByteSize)\n+      : (boundary.byteSize += segmentByteSize);\n+  }\n+}\n function finishedTask(request, boundary, segment) {\n   if (null === boundary) {\n     if (null !== segment && segment.parentFlushed) {\n@@ -5111,8 +5168,12 @@ function finishedTask(request, boundary, segment) {\n             boundary.parentFlushed &&\n               request.completedBoundaries.push(boundary),\n             1 === boundary.status &&\n-              (boundary.fallbackAbortableTasks.forEach(abortTaskSoft, request),\n-              boundary.fallbackAbortableTasks.clear(),\n+              (boundary.byteSize > request.progressiveChunkSize ||\n+                (boundary.fallbackAbortableTasks.forEach(\n+                  abortTaskSoft,\n+                  request\n+                ),\n+                boundary.fallbackAbortableTasks.clear()),\n               0 === request.pendingRootTasks &&\n                 null === request.trackedPostpones &&\n                 null !== boundary.contentPreamble &&\n@@ -5235,6 +5296,7 @@ function performWork(request$jscomp$2) {\n                 request$jscomp$1.chunks.push(\"\\x3c!-- --\\x3e\"),\n               task.abortSet.delete(task),\n               (request$jscomp$1.status = 1),\n+              finishedSegment(request, task.blockedBoundary, request$jscomp$1),\n               finishedTask(request, task.blockedBoundary, request$jscomp$1);\n           } catch (thrownValue) {\n             resetHooksState();\n@@ -5508,6 +5570,7 @@ function flushCompletedBoundary(request, destination, boundary) {\n   var requiresStyleInsertion = request.stylesToHoist;\n   request.stylesToHoist = !1;\n   writeChunk(destination, request.startInlineScript);\n+  writeChunk(destination, \">\");\n   requiresStyleInsertion\n     ? 0 === (completedSegments.instructions & 2)\n       ? ((completedSegments.instructions |= 10),\n@@ -5564,6 +5627,7 @@ function flushPartiallyCompletedSegment(\n   boundary = request.resumableState;\n   request = request.renderState;\n   writeChunk(destination, request.startInlineScript);\n+  writeChunk(destination, \">\");\n   0 === (boundary.instructions & 1)\n     ? ((boundary.instructions |= 1),\n       writeChunk(\n@@ -5589,7 +5653,8 @@ function flushCompletedQueues(request, destination) {\n         if (5 === completedRootSegment.status) return;\n         var completedPreambleSegments = request.completedPreambleSegments;\n         if (null === completedPreambleSegments) return;\n-        var renderState = request.renderState,\n+        var resumableState = request.resumableState,\n+          renderState = request.renderState,\n           preamble = renderState.preamble,\n           htmlChunks = preamble.htmlChunks,\n           headChunks = preamble.headChunks,\n@@ -5630,17 +5695,23 @@ function flushCompletedQueues(request, destination) {\n         renderState.scripts.clear();\n         renderState.bulkPreloads.forEach(flushResource, destination);\n         renderState.bulkPreloads.clear();\n+        if (htmlChunks || headChunks) {\n+          var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+          writeChunk(destination, '<link rel=\"expect\" href=\"#');\n+          writeChunk(destination, escapeTextForBrowser(shellId));\n+          writeChunk(destination, '\" blocking=\"render\"/>');\n+        }\n         var hoistableChunks = renderState.hoistableChunks;\n         for (i$jscomp$0 = 0; i$jscomp$0 < hoistableChunks.length; i$jscomp$0++)\n           writeChunk(destination, hoistableChunks[i$jscomp$0]);\n         for (\n-          renderState = hoistableChunks.length = 0;\n-          renderState < completedPreambleSegments.length;\n-          renderState++\n+          resumableState = hoistableChunks.length = 0;\n+          resumableState < completedPreambleSegments.length;\n+          resumableState++\n         ) {\n-          var segments = completedPreambleSegments[renderState];\n-          for (preamble = 0; preamble < segments.length; preamble++)\n-            flushSegment(request, destination, segments[preamble], null);\n+          var segments = completedPreambleSegments[resumableState];\n+          for (renderState = 0; renderState < segments.length; renderState++)\n+            flushSegment(request, destination, segments[renderState], null);\n         }\n         var preamble$jscomp$0 = request.renderState.preamble,\n           headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n@@ -5656,33 +5727,48 @@ function flushCompletedQueues(request, destination) {\n             writeChunk(destination, bodyChunks[completedPreambleSegments]);\n         flushSegment(request, destination, completedRootSegment, null);\n         request.completedRootSegment = null;\n-        writeBootstrap(destination, request.renderState);\n+        var resumableState$jscomp$0 = request.resumableState,\n+          renderState$jscomp$0 = request.renderState,\n+          preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+        if (\n+          (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+          0 === (resumableState$jscomp$0.instructions & 32)\n+        ) {\n+          var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+          bootstrapChunks.push(startChunkForTag(\"template\"));\n+          pushCompletedShellIdAttribute(\n+            bootstrapChunks,\n+            resumableState$jscomp$0\n+          );\n+          bootstrapChunks.push(\">\", endChunkForTag(\"template\"));\n+        }\n+        writeBootstrap(destination, renderState$jscomp$0);\n       }\n-      var renderState$jscomp$0 = request.renderState;\n+      var renderState$jscomp$1 = request.renderState;\n       completedRootSegment = 0;\n-      var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+      var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < viewportChunks$jscomp$0.length;\n         completedRootSegment++\n       )\n         writeChunk(destination, viewportChunks$jscomp$0[completedRootSegment]);\n       viewportChunks$jscomp$0.length = 0;\n-      renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-      renderState$jscomp$0.preconnects.clear();\n-      renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.fontPreloads.clear();\n-      renderState$jscomp$0.highImagePreloads.forEach(\n+      renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+      renderState$jscomp$1.preconnects.clear();\n+      renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.fontPreloads.clear();\n+      renderState$jscomp$1.highImagePreloads.forEach(\n         flushResource,\n         destination\n       );\n-      renderState$jscomp$0.highImagePreloads.clear();\n-      renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-      renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-      renderState$jscomp$0.scripts.clear();\n-      renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.bulkPreloads.clear();\n-      var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+      renderState$jscomp$1.highImagePreloads.clear();\n+      renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+      renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+      renderState$jscomp$1.scripts.clear();\n+      renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.bulkPreloads.clear();\n+      var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -5693,33 +5779,34 @@ function flushCompletedQueues(request, destination) {\n       var clientRenderedBoundaries = request.clientRenderedBoundaries;\n       for (i = 0; i < clientRenderedBoundaries.length; i++) {\n         var boundary = clientRenderedBoundaries[i];\n-        renderState$jscomp$0 = destination;\n-        var resumableState = request.resumableState,\n-          renderState$jscomp$1 = request.renderState,\n+        renderState$jscomp$1 = destination;\n+        var resumableState$jscomp$1 = request.resumableState,\n+          renderState$jscomp$2 = request.renderState,\n           id = boundary.rootSegmentID,\n           errorDigest = boundary.errorDigest;\n         writeChunk(\n-          renderState$jscomp$0,\n-          renderState$jscomp$1.startInlineScript\n+          renderState$jscomp$1,\n+          renderState$jscomp$2.startInlineScript\n         );\n-        0 === (resumableState.instructions & 4)\n-          ? ((resumableState.instructions |= 4),\n+        writeChunk(renderState$jscomp$1, \">\");\n+        0 === (resumableState$jscomp$1.instructions & 4)\n+          ? ((resumableState$jscomp$1.instructions |= 4),\n             writeChunk(\n-              renderState$jscomp$0,\n+              renderState$jscomp$1,\n               '$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data=\"$!\",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX(\"'\n             ))\n-          : writeChunk(renderState$jscomp$0, '$RX(\"');\n-        writeChunk(renderState$jscomp$0, renderState$jscomp$1.boundaryPrefix);\n-        writeChunk(renderState$jscomp$0, id.toString(16));\n-        writeChunk(renderState$jscomp$0, '\"');\n+          : writeChunk(renderState$jscomp$1, '$RX(\"');\n+        writeChunk(renderState$jscomp$1, renderState$jscomp$2.boundaryPrefix);\n+        writeChunk(renderState$jscomp$1, id.toString(16));\n+        writeChunk(renderState$jscomp$1, '\"');\n         errorDigest &&\n-          (writeChunk(renderState$jscomp$0, \",\"),\n+          (writeChunk(renderState$jscomp$1, \",\"),\n           writeChunk(\n-            renderState$jscomp$0,\n+            renderState$jscomp$1,\n             escapeJSStringsForInstructionScripts(errorDigest || \"\")\n           ));\n         var JSCompiler_inline_result =\n-          !!renderState$jscomp$0.write(\")\\x3c/script>\");\n+          !!renderState$jscomp$1.write(\")\\x3c/script>\");\n         if (!JSCompiler_inline_result) {\n           request.destination = null;\n           i++;\n@@ -5853,15 +5940,15 @@ function abort(request, reason) {\n     logRecoverableError(request, error$55, {}), fatalError(request, error$55);\n   }\n }\n-var isomorphicReactPackageVersion$jscomp$inline_762 = React.version;\n+var isomorphicReactPackageVersion$jscomp$inline_768 = React.version;\n if (\n-  \"19.2.0-canary-197d6a04-20250424\" !==\n-  isomorphicReactPackageVersion$jscomp$inline_762\n+  \"19.2.0-canary-5dc00d6b-20250428\" !==\n+  isomorphicReactPackageVersion$jscomp$inline_768\n )\n   throw Error(\n     'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n-      (isomorphicReactPackageVersion$jscomp$inline_762 +\n-        \"\\n  - react-dom:  19.2.0-canary-197d6a04-20250424\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+      (isomorphicReactPackageVersion$jscomp$inline_768 +\n+        \"\\n  - react-dom:  19.2.0-canary-5dc00d6b-20250428\\nLearn more: https://react.dev/warnings/version-mismatch\")\n   );\n exports.renderToReadableStream = function (children, options) {\n   return new Promise(function (resolve, reject) {\n@@ -5952,4 +6039,4 @@ exports.renderToReadableStream = function (children, options) {\n     startWork(request);\n   });\n };\n-exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+exports.version = \"19.2.0-canary-5dc00d6b-20250428\";"
        },
        {
            "sha": "04e23e0c0c5f4e46bea894436626afed14106934",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server.edge.development.js",
            "status": "modified",
            "additions": 184,
            "deletions": 78,
            "changes": 262,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.edge.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.edge.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.edge.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -316,6 +316,9 @@\n         );\n       return content;\n     }\n+    function byteLengthOfChunk(chunk) {\n+      return chunk.byteLength;\n+    }\n     function closeWithError(destination, error) {\n       \"function\" === typeof destination.error\n         ? destination.error(error)\n@@ -804,21 +807,23 @@\n           void 0 === nonce\n             ? startInlineScript\n             : stringToPrecomputedChunk(\n-                '<script nonce=\"' + escapeTextForBrowser(nonce) + '\">'\n+                '<script nonce=\"' + escapeTextForBrowser(nonce) + '\"'\n               ),\n         idPrefix = resumableState.idPrefix;\n       externalRuntimeConfig = [];\n       var bootstrapScriptContent = resumableState.bootstrapScriptContent,\n         bootstrapScripts = resumableState.bootstrapScripts,\n         bootstrapModules = resumableState.bootstrapModules;\n       void 0 !== bootstrapScriptContent &&\n+        (externalRuntimeConfig.push(inlineScriptWithNonce),\n+        pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState),\n         externalRuntimeConfig.push(\n-          inlineScriptWithNonce,\n+          endOfStartTag,\n           stringToChunk(\n             escapeEntireInlineScriptContent(bootstrapScriptContent)\n           ),\n           endInlineScript\n-        );\n+        ));\n       bootstrapScriptContent = [];\n       void 0 !== importMap &&\n         (bootstrapScriptContent.push(importMapScriptStart),\n@@ -915,23 +920,28 @@\n           );\n           externalRuntimeConfig.push(\n             startScriptSrc,\n-            stringToChunk(escapeTextForBrowser(inlineScriptWithNonce))\n+            stringToChunk(escapeTextForBrowser(inlineScriptWithNonce)),\n+            attributeEnd\n           );\n           nonce &&\n             externalRuntimeConfig.push(\n               scriptNonce,\n-              stringToChunk(escapeTextForBrowser(nonce))\n+              stringToChunk(escapeTextForBrowser(nonce)),\n+              attributeEnd\n             );\n           \"string\" === typeof bootstrapScriptContent &&\n             externalRuntimeConfig.push(\n               scriptIntegirty,\n-              stringToChunk(escapeTextForBrowser(bootstrapScriptContent))\n+              stringToChunk(escapeTextForBrowser(bootstrapScriptContent)),\n+              attributeEnd\n             );\n           \"string\" === typeof idPrefix &&\n             externalRuntimeConfig.push(\n               scriptCrossOrigin,\n-              stringToChunk(escapeTextForBrowser(idPrefix))\n+              stringToChunk(escapeTextForBrowser(idPrefix)),\n+              attributeEnd\n             );\n+          pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState);\n           externalRuntimeConfig.push(endAsyncScript);\n         }\n       if (void 0 !== bootstrapModules)\n@@ -969,23 +979,31 @@\n             ),\n             externalRuntimeConfig.push(\n               startModuleSrc,\n-              stringToChunk(escapeTextForBrowser(maxHeadersLength))\n+              stringToChunk(escapeTextForBrowser(maxHeadersLength)),\n+              attributeEnd\n             ),\n             nonce &&\n               externalRuntimeConfig.push(\n                 scriptNonce,\n-                stringToChunk(escapeTextForBrowser(nonce))\n+                stringToChunk(escapeTextForBrowser(nonce)),\n+                attributeEnd\n               ),\n             \"string\" === typeof idPrefix &&\n               externalRuntimeConfig.push(\n                 scriptIntegirty,\n-                stringToChunk(escapeTextForBrowser(idPrefix))\n+                stringToChunk(escapeTextForBrowser(idPrefix)),\n+                attributeEnd\n               ),\n             \"string\" === typeof inlineScriptWithNonce &&\n               externalRuntimeConfig.push(\n                 scriptCrossOrigin,\n-                stringToChunk(escapeTextForBrowser(inlineScriptWithNonce))\n+                stringToChunk(escapeTextForBrowser(inlineScriptWithNonce)),\n+                attributeEnd\n               ),\n+            pushCompletedShellIdAttribute(\n+              externalRuntimeConfig,\n+              resumableState\n+            ),\n             externalRuntimeConfig.push(endAsyncScript);\n       return onHeaders;\n     }\n@@ -1634,13 +1652,26 @@\n       return content;\n     }\n     function injectFormReplayingRuntime(resumableState, renderState) {\n-      (resumableState.instructions & 16) === NothingSent &&\n-        ((resumableState.instructions |= 16),\n-        renderState.bootstrapChunks.unshift(\n-          renderState.startInlineScript,\n-          formReplayingRuntimeScript,\n-          endInlineScript\n-        ));\n+      if ((resumableState.instructions & 16) === NothingSent) {\n+        resumableState.instructions |= 16;\n+        var preamble = renderState.preamble,\n+          bootstrapChunks = renderState.bootstrapChunks;\n+        (preamble.htmlChunks || preamble.headChunks) &&\n+        0 === bootstrapChunks.length\n+          ? (bootstrapChunks.push(renderState.startInlineScript),\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+            bootstrapChunks.push(\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              endInlineScript\n+            ))\n+          : bootstrapChunks.unshift(\n+              renderState.startInlineScript,\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              endInlineScript\n+            );\n+      }\n     }\n     function pushLinkImpl(target, props) {\n       target.push(startChunkForTag(\"link\"));\n@@ -3390,6 +3421,17 @@\n       styleQueue.sheets.forEach(preloadLateStyle, this);\n       styleQueue.sheets.clear();\n     }\n+    function pushCompletedShellIdAttribute(target, resumableState) {\n+      (resumableState.instructions & SentCompletedShellId) === NothingSent &&\n+        ((resumableState.instructions |= SentCompletedShellId),\n+        target.push(\n+          completedShellIdAttributeStart,\n+          stringToChunk(\n+            escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\")\n+          ),\n+          attributeEnd\n+        ));\n+    }\n     function writeStyleResourceDependenciesInJS(destination, hoistableState) {\n       writeChunk(destination, arrayFirstOpenBracket);\n       var nextArrayOpenBrackChunk = arrayFirstOpenBracket;\n@@ -4435,6 +4477,7 @@\n       this.fatalError = null;\n       this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n       this.completedPreambleSegments = this.completedRootSegment = null;\n+      this.byteSize = 0;\n       this.abortableTasks = abortSet;\n       this.pingedTasks = [];\n       this.clientRenderedBoundaries = [];\n@@ -5614,7 +5657,8 @@\n                     boundarySegment.lastPushedText &&\n                       boundarySegment.textEmbedded &&\n                       boundarySegment.chunks.push(textSeparator),\n-                    (boundarySegment.status = COMPLETED);\n+                    (boundarySegment.status = COMPLETED),\n+                    finishedSegment(request, parentBoundary, boundarySegment);\n                 } catch (thrownValue) {\n                   throw (\n                     ((boundarySegment.status = 12 === request.status ? 3 : 4),\n@@ -5660,11 +5704,13 @@\n                       contentRootSegment.textEmbedded &&\n                       contentRootSegment.chunks.push(textSeparator),\n                     (contentRootSegment.status = COMPLETED),\n+                    finishedSegment(request, newBoundary, contentRootSegment),\n                     queueCompletedSegment(newBoundary, contentRootSegment),\n                     0 === newBoundary.pendingTasks &&\n-                      newBoundary.status === PENDING)\n+                      newBoundary.status === PENDING &&\n+                      ((newBoundary.status = COMPLETED),\n+                      !(newBoundary.byteSize > request.progressiveChunkSize)))\n                   ) {\n-                    newBoundary.status = COMPLETED;\n                     0 === request.pendingRootTasks &&\n                       task.blockedPreamble &&\n                       preparePreamble(request);\n@@ -5859,6 +5905,7 @@\n           (task.blockedSegment = resumedSegment),\n           renderNode(request, task, node, childIndex),\n           (resumedSegment.status = COMPLETED),\n+          finishedSegment(request, blockedBoundary, resumedSegment),\n           null === blockedBoundary\n             ? (request.completedRootSegment = resumedSegment)\n             : (queueCompletedSegment(blockedBoundary, resumedSegment),\n@@ -6775,6 +6822,16 @@\n           queueCompletedSegment(boundary, childSegment);\n       } else boundary.completedSegments.push(segment);\n     }\n+    function finishedSegment(request, boundary, segment) {\n+      if (null !== byteLengthOfChunk) {\n+        segment = segment.chunks;\n+        for (var segmentByteSize = 0, i = 0; i < segment.length; i++)\n+          segmentByteSize += segment[i].byteLength;\n+        null === boundary\n+          ? (request.byteSize += segmentByteSize)\n+          : (boundary.byteSize += segmentByteSize);\n+      }\n+    }\n     function finishedTask(request, boundary, segment) {\n       if (null === boundary) {\n         if (null !== segment && segment.parentFlushed) {\n@@ -6798,11 +6855,12 @@\n                 boundary.parentFlushed &&\n                   request.completedBoundaries.push(boundary),\n                 boundary.status === COMPLETED &&\n-                  (boundary.fallbackAbortableTasks.forEach(\n-                    abortTaskSoft,\n-                    request\n-                  ),\n-                  boundary.fallbackAbortableTasks.clear(),\n+                  (boundary.byteSize > request.progressiveChunkSize ||\n+                    (boundary.fallbackAbortableTasks.forEach(\n+                      abortTaskSoft,\n+                      request\n+                    ),\n+                    boundary.fallbackAbortableTasks.clear()),\n                   0 === request.pendingRootTasks &&\n                     null === request.trackedPostpones &&\n                     null !== boundary.contentPreamble &&\n@@ -6942,6 +7000,11 @@\n                     request$jscomp$1.chunks.push(textSeparator),\n                   errorDigest.abortSet.delete(errorDigest),\n                   (request$jscomp$1.status = COMPLETED),\n+                  finishedSegment(\n+                    request,\n+                    errorDigest.blockedBoundary,\n+                    request$jscomp$1\n+                  ),\n                   finishedTask(\n                     request,\n                     errorDigest.blockedBoundary,\n@@ -7291,6 +7354,7 @@\n       var requiresStyleInsertion = request.stylesToHoist;\n       request.stylesToHoist = !1;\n       writeChunk(destination, request.startInlineScript);\n+      writeChunk(destination, endOfStartTag);\n       requiresStyleInsertion\n         ? (completedSegments.instructions & SentCompleteBoundaryFunction) ===\n           NothingSent\n@@ -7357,6 +7421,7 @@\n       boundary = request.resumableState;\n       request = request.renderState;\n       writeChunk(destination, request.startInlineScript);\n+      writeChunk(destination, endOfStartTag);\n       (boundary.instructions & SentCompleteSegmentFunction) === NothingSent\n         ? ((boundary.instructions |= SentCompleteSegmentFunction),\n           writeChunk(destination, completeSegmentScript1Full))\n@@ -7381,7 +7446,8 @@\n             if (completedRootSegment.status === POSTPONED) return;\n             var completedPreambleSegments = request.completedPreambleSegments;\n             if (null === completedPreambleSegments) return;\n-            var renderState = request.renderState,\n+            var resumableState = request.resumableState,\n+              renderState = request.renderState,\n               preamble = renderState.preamble,\n               htmlChunks = preamble.htmlChunks,\n               headChunks = preamble.headChunks,\n@@ -7438,6 +7504,15 @@\n             renderState.scripts.clear();\n             renderState.bulkPreloads.forEach(flushResource, destination);\n             renderState.bulkPreloads.clear();\n+            if (htmlChunks || headChunks) {\n+              var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+              writeChunk(destination, blockingRenderChunkStart);\n+              writeChunk(\n+                destination,\n+                stringToChunk(escapeTextForBrowser(shellId))\n+              );\n+              writeChunk(destination, blockingRenderChunkEnd);\n+            }\n             var hoistableChunks = renderState.hoistableChunks;\n             for (\n               i$jscomp$0 = 0;\n@@ -7446,13 +7521,17 @@\n             )\n               writeChunk(destination, hoistableChunks[i$jscomp$0]);\n             for (\n-              renderState = hoistableChunks.length = 0;\n-              renderState < completedPreambleSegments.length;\n-              renderState++\n+              resumableState = hoistableChunks.length = 0;\n+              resumableState < completedPreambleSegments.length;\n+              resumableState++\n             ) {\n-              var segments = completedPreambleSegments[renderState];\n-              for (preamble = 0; preamble < segments.length; preamble++)\n-                flushSegment(request, destination, segments[preamble], null);\n+              var segments = completedPreambleSegments[resumableState];\n+              for (\n+                renderState = 0;\n+                renderState < segments.length;\n+                renderState++\n+              )\n+                flushSegment(request, destination, segments[renderState], null);\n             }\n             var preamble$jscomp$0 = request.renderState.preamble,\n               headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n@@ -7468,11 +7547,27 @@\n                 writeChunk(destination, bodyChunks[completedPreambleSegments]);\n             flushSegment(request, destination, completedRootSegment, null);\n             request.completedRootSegment = null;\n-            writeBootstrap(destination, request.renderState);\n+            var resumableState$jscomp$0 = request.resumableState,\n+              renderState$jscomp$0 = request.renderState,\n+              preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+            if (\n+              (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+              (resumableState$jscomp$0.instructions & SentCompletedShellId) ===\n+                NothingSent\n+            ) {\n+              var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+              bootstrapChunks.push(startChunkForTag(\"template\"));\n+              pushCompletedShellIdAttribute(\n+                bootstrapChunks,\n+                resumableState$jscomp$0\n+              );\n+              bootstrapChunks.push(endOfStartTag, endChunkForTag(\"template\"));\n+            }\n+            writeBootstrap(destination, renderState$jscomp$0);\n           }\n-          var renderState$jscomp$0 = request.renderState;\n+          var renderState$jscomp$1 = request.renderState;\n           completedRootSegment = 0;\n-          var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+          var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < viewportChunks$jscomp$0.length;\n@@ -7483,21 +7578,21 @@\n               viewportChunks$jscomp$0[completedRootSegment]\n             );\n           viewportChunks$jscomp$0.length = 0;\n-          renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-          renderState$jscomp$0.preconnects.clear();\n-          renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.fontPreloads.clear();\n-          renderState$jscomp$0.highImagePreloads.forEach(\n+          renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+          renderState$jscomp$1.preconnects.clear();\n+          renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.fontPreloads.clear();\n+          renderState$jscomp$1.highImagePreloads.forEach(\n             flushResource,\n             destination\n           );\n-          renderState$jscomp$0.highImagePreloads.clear();\n-          renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-          renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-          renderState$jscomp$0.scripts.clear();\n-          renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.bulkPreloads.clear();\n-          var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+          renderState$jscomp$1.highImagePreloads.clear();\n+          renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+          renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+          renderState$jscomp$1.scripts.clear();\n+          renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.bulkPreloads.clear();\n+          var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -7511,80 +7606,83 @@\n           var clientRenderedBoundaries = request.clientRenderedBoundaries;\n           for (i = 0; i < clientRenderedBoundaries.length; i++) {\n             var boundary = clientRenderedBoundaries[i];\n-            renderState$jscomp$0 = destination;\n-            var resumableState = request.resumableState,\n-              renderState$jscomp$1 = request.renderState,\n+            renderState$jscomp$1 = destination;\n+            var resumableState$jscomp$1 = request.resumableState,\n+              renderState$jscomp$2 = request.renderState,\n               id = boundary.rootSegmentID,\n               errorDigest = boundary.errorDigest,\n               errorMessage = boundary.errorMessage,\n               errorStack = boundary.errorStack,\n               errorComponentStack = boundary.errorComponentStack;\n             writeChunk(\n-              renderState$jscomp$0,\n-              renderState$jscomp$1.startInlineScript\n+              renderState$jscomp$1,\n+              renderState$jscomp$2.startInlineScript\n             );\n-            (resumableState.instructions & SentClientRenderFunction) ===\n+            writeChunk(renderState$jscomp$1, endOfStartTag);\n+            (resumableState$jscomp$1.instructions &\n+              SentClientRenderFunction) ===\n             NothingSent\n-              ? ((resumableState.instructions |= SentClientRenderFunction),\n-                writeChunk(renderState$jscomp$0, clientRenderScript1Full))\n-              : writeChunk(renderState$jscomp$0, clientRenderScript1Partial);\n+              ? ((resumableState$jscomp$1.instructions |=\n+                  SentClientRenderFunction),\n+                writeChunk(renderState$jscomp$1, clientRenderScript1Full))\n+              : writeChunk(renderState$jscomp$1, clientRenderScript1Partial);\n             writeChunk(\n-              renderState$jscomp$0,\n-              renderState$jscomp$1.boundaryPrefix\n+              renderState$jscomp$1,\n+              renderState$jscomp$2.boundaryPrefix\n             );\n-            writeChunk(renderState$jscomp$0, stringToChunk(id.toString(16)));\n-            writeChunk(renderState$jscomp$0, clientRenderScript1A);\n+            writeChunk(renderState$jscomp$1, stringToChunk(id.toString(16)));\n+            writeChunk(renderState$jscomp$1, clientRenderScript1A);\n             if (\n               errorDigest ||\n               errorMessage ||\n               errorStack ||\n               errorComponentStack\n             )\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 clientRenderErrorScriptArgInterstitial\n               ),\n                 writeChunk(\n-                  renderState$jscomp$0,\n+                  renderState$jscomp$1,\n                   stringToChunk(\n                     escapeJSStringsForInstructionScripts(errorDigest || \"\")\n                   )\n                 );\n             if (errorMessage || errorStack || errorComponentStack)\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 clientRenderErrorScriptArgInterstitial\n               ),\n                 writeChunk(\n-                  renderState$jscomp$0,\n+                  renderState$jscomp$1,\n                   stringToChunk(\n                     escapeJSStringsForInstructionScripts(errorMessage || \"\")\n                   )\n                 );\n             if (errorStack || errorComponentStack)\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 clientRenderErrorScriptArgInterstitial\n               ),\n                 writeChunk(\n-                  renderState$jscomp$0,\n+                  renderState$jscomp$1,\n                   stringToChunk(\n                     escapeJSStringsForInstructionScripts(errorStack || \"\")\n                   )\n                 );\n             errorComponentStack &&\n               (writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 clientRenderErrorScriptArgInterstitial\n               ),\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 stringToChunk(\n                   escapeJSStringsForInstructionScripts(errorComponentStack)\n                 )\n               ));\n             var JSCompiler_inline_result = writeChunkAndReturn(\n-              renderState$jscomp$0,\n+              renderState$jscomp$1,\n               clientRenderScriptEnd\n             );\n             if (!JSCompiler_inline_result) {\n@@ -7765,11 +7863,11 @@\n     }\n     function ensureCorrectIsomorphicReactVersion() {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-canary-197d6a04-20250424\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-canary-5dc00d6b-20250428\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-canary-197d6a04-20250424\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-canary-5dc00d6b-20250428\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     }\n     var React = require(\"next/dist/compiled/react\"),\n@@ -8852,18 +8950,19 @@\n       SentCompleteBoundaryFunction = 2,\n       SentClientRenderFunction = 4,\n       SentStyleInsertionFunction = 8,\n+      SentCompletedShellId = 32,\n       EXISTS = null,\n       PRELOAD_NO_CREDS = [];\n     Object.freeze(PRELOAD_NO_CREDS);\n     stringToPrecomputedChunk('\"></template>');\n-    var startInlineScript = stringToPrecomputedChunk(\"<script>\"),\n+    var startInlineScript = stringToPrecomputedChunk(\"<script\"),\n       endInlineScript = stringToPrecomputedChunk(\"\\x3c/script>\"),\n       startScriptSrc = stringToPrecomputedChunk('<script src=\"'),\n       startModuleSrc = stringToPrecomputedChunk('<script type=\"module\" src=\"'),\n-      scriptNonce = stringToPrecomputedChunk('\" nonce=\"'),\n-      scriptIntegirty = stringToPrecomputedChunk('\" integrity=\"'),\n-      scriptCrossOrigin = stringToPrecomputedChunk('\" crossorigin=\"'),\n-      endAsyncScript = stringToPrecomputedChunk('\" async=\"\">\\x3c/script>'),\n+      scriptNonce = stringToPrecomputedChunk(' nonce=\"'),\n+      scriptIntegirty = stringToPrecomputedChunk(' integrity=\"'),\n+      scriptCrossOrigin = stringToPrecomputedChunk(' crossorigin=\"'),\n+      endAsyncScript = stringToPrecomputedChunk(' async=\"\">\\x3c/script>'),\n       scriptRegex = /(<\\/|<)(s)(cript)/gi,\n       importMapScriptStart = stringToPrecomputedChunk(\n         '<script type=\"importmap\">'\n@@ -9040,6 +9139,13 @@\n       spaceSeparator = stringToPrecomputedChunk(\" \"),\n       styleTagResourceOpen3 = stringToPrecomputedChunk('\">'),\n       styleTagResourceClose = stringToPrecomputedChunk(\"</style>\"),\n+      blockingRenderChunkStart = stringToPrecomputedChunk(\n+        '<link rel=\"expect\" href=\"#'\n+      ),\n+      blockingRenderChunkEnd = stringToPrecomputedChunk(\n+        '\" blocking=\"render\"/>'\n+      ),\n+      completedShellIdAttributeStart = stringToPrecomputedChunk(' id=\"'),\n       arrayFirstOpenBracket = stringToPrecomputedChunk(\"[\"),\n       arraySubsequentOpenBracket = stringToPrecomputedChunk(\",[\"),\n       arrayInterstitial = stringToPrecomputedChunk(\",\"),\n@@ -9450,5 +9556,5 @@ const setTimeoutOrImmediate =\n     ? globalThis['set' + 'Immediate']\n     : setTimeout;\n \n-    exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+    exports.version = \"19.2.0-canary-5dc00d6b-20250428\";\n   })();"
        },
        {
            "sha": "528e581001bbe5b0a65ff4bf8f49bdb3f8f1985a",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server.edge.production.js",
            "status": "modified",
            "additions": 174,
            "deletions": 86,
            "changes": 260,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.edge.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.edge.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.edge.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -166,6 +166,9 @@ function stringToChunk(content) {\n function stringToPrecomputedChunk(content) {\n   return textEncoder.encode(content);\n }\n+function byteLengthOfChunk(chunk) {\n+  return chunk.byteLength;\n+}\n function closeWithError(destination, error) {\n   \"function\" === typeof destination.error\n     ? destination.error(error)\n@@ -347,14 +350,14 @@ ReactDOMSharedInternals.d = {\n };\n var PRELOAD_NO_CREDS = [];\n stringToPrecomputedChunk('\"></template>');\n-var startInlineScript = stringToPrecomputedChunk(\"<script>\"),\n+var startInlineScript = stringToPrecomputedChunk(\"<script\"),\n   endInlineScript = stringToPrecomputedChunk(\"\\x3c/script>\"),\n   startScriptSrc = stringToPrecomputedChunk('<script src=\"'),\n   startModuleSrc = stringToPrecomputedChunk('<script type=\"module\" src=\"'),\n-  scriptNonce = stringToPrecomputedChunk('\" nonce=\"'),\n-  scriptIntegirty = stringToPrecomputedChunk('\" integrity=\"'),\n-  scriptCrossOrigin = stringToPrecomputedChunk('\" crossorigin=\"'),\n-  endAsyncScript = stringToPrecomputedChunk('\" async=\"\">\\x3c/script>'),\n+  scriptNonce = stringToPrecomputedChunk(' nonce=\"'),\n+  scriptIntegirty = stringToPrecomputedChunk(' integrity=\"'),\n+  scriptCrossOrigin = stringToPrecomputedChunk(' crossorigin=\"'),\n+  endAsyncScript = stringToPrecomputedChunk(' async=\"\">\\x3c/script>'),\n   scriptRegex = /(<\\/|<)(s)(cript)/gi;\n function scriptReplacer(match, prefix, s, suffix) {\n   return \"\" + prefix + (\"s\" === s ? \"\\\\u0073\" : \"\\\\u0053\") + suffix;\n@@ -375,21 +378,23 @@ function createRenderState(\n       void 0 === nonce\n         ? startInlineScript\n         : stringToPrecomputedChunk(\n-            '<script nonce=\"' + escapeTextForBrowser(nonce) + '\">'\n+            '<script nonce=\"' + escapeTextForBrowser(nonce) + '\"'\n           ),\n     idPrefix = resumableState.idPrefix;\n   externalRuntimeConfig = [];\n   var bootstrapScriptContent = resumableState.bootstrapScriptContent,\n     bootstrapScripts = resumableState.bootstrapScripts,\n     bootstrapModules = resumableState.bootstrapModules;\n   void 0 !== bootstrapScriptContent &&\n+    (externalRuntimeConfig.push(inlineScriptWithNonce),\n+    pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState),\n     externalRuntimeConfig.push(\n-      inlineScriptWithNonce,\n+      endOfStartTag,\n       stringToChunk(\n         (\"\" + bootstrapScriptContent).replace(scriptRegex, scriptReplacer)\n       ),\n       endInlineScript\n-    );\n+    ));\n   bootstrapScriptContent = [];\n   void 0 !== importMap &&\n     (bootstrapScriptContent.push(importMapScriptStart),\n@@ -478,23 +483,28 @@ function createRenderState(\n       onHeaders.bootstrapScripts.add(scriptConfig);\n       externalRuntimeConfig.push(\n         startScriptSrc,\n-        stringToChunk(escapeTextForBrowser(maxHeadersLength))\n+        stringToChunk(escapeTextForBrowser(maxHeadersLength)),\n+        attributeEnd\n       );\n       nonce &&\n         externalRuntimeConfig.push(\n           scriptNonce,\n-          stringToChunk(escapeTextForBrowser(nonce))\n+          stringToChunk(escapeTextForBrowser(nonce)),\n+          attributeEnd\n         );\n       \"string\" === typeof idPrefix &&\n         externalRuntimeConfig.push(\n           scriptIntegirty,\n-          stringToChunk(escapeTextForBrowser(idPrefix))\n+          stringToChunk(escapeTextForBrowser(idPrefix)),\n+          attributeEnd\n         );\n       \"string\" === typeof inlineScriptWithNonce &&\n         externalRuntimeConfig.push(\n           scriptCrossOrigin,\n-          stringToChunk(escapeTextForBrowser(inlineScriptWithNonce))\n+          stringToChunk(escapeTextForBrowser(inlineScriptWithNonce)),\n+          attributeEnd\n         );\n+      pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState);\n       externalRuntimeConfig.push(endAsyncScript);\n     }\n   if (void 0 !== bootstrapModules)\n@@ -533,23 +543,28 @@ function createRenderState(\n         onHeaders.bootstrapScripts.add(bootstrapScriptContent),\n         externalRuntimeConfig.push(\n           startModuleSrc,\n-          stringToChunk(escapeTextForBrowser(importMap))\n+          stringToChunk(escapeTextForBrowser(importMap)),\n+          attributeEnd\n         ),\n         nonce &&\n           externalRuntimeConfig.push(\n             scriptNonce,\n-            stringToChunk(escapeTextForBrowser(nonce))\n+            stringToChunk(escapeTextForBrowser(nonce)),\n+            attributeEnd\n           ),\n         \"string\" === typeof inlineScriptWithNonce &&\n           externalRuntimeConfig.push(\n             scriptIntegirty,\n-            stringToChunk(escapeTextForBrowser(inlineScriptWithNonce))\n+            stringToChunk(escapeTextForBrowser(inlineScriptWithNonce)),\n+            attributeEnd\n           ),\n         \"string\" === typeof maxHeadersLength &&\n           externalRuntimeConfig.push(\n             scriptCrossOrigin,\n-            stringToChunk(escapeTextForBrowser(maxHeadersLength))\n+            stringToChunk(escapeTextForBrowser(maxHeadersLength)),\n+            attributeEnd\n           ),\n+        pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState),\n         externalRuntimeConfig.push(endAsyncScript);\n   return onHeaders;\n }\n@@ -1048,13 +1063,25 @@ var selectedMarkerAttribute = stringToPrecomputedChunk(' selected=\"\"'),\n     'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});'\n   );\n function injectFormReplayingRuntime(resumableState, renderState) {\n-  0 === (resumableState.instructions & 16) &&\n-    ((resumableState.instructions |= 16),\n-    renderState.bootstrapChunks.unshift(\n-      renderState.startInlineScript,\n-      formReplayingRuntimeScript,\n-      endInlineScript\n-    ));\n+  if (0 === (resumableState.instructions & 16)) {\n+    resumableState.instructions |= 16;\n+    var preamble = renderState.preamble,\n+      bootstrapChunks = renderState.bootstrapChunks;\n+    (preamble.htmlChunks || preamble.headChunks) && 0 === bootstrapChunks.length\n+      ? (bootstrapChunks.push(renderState.startInlineScript),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(\n+          endOfStartTag,\n+          formReplayingRuntimeScript,\n+          endInlineScript\n+        ))\n+      : bootstrapChunks.unshift(\n+          renderState.startInlineScript,\n+          endOfStartTag,\n+          formReplayingRuntimeScript,\n+          endInlineScript\n+        );\n+  }\n }\n var formStateMarkerIsMatching = stringToPrecomputedChunk(\"\\x3c!--F!--\\x3e\"),\n   formStateMarkerIsNotMatching = stringToPrecomputedChunk(\"\\x3c!--F--\\x3e\");\n@@ -2637,6 +2664,22 @@ function preloadLateStyles(styleQueue) {\n   styleQueue.sheets.forEach(preloadLateStyle, this);\n   styleQueue.sheets.clear();\n }\n+var blockingRenderChunkStart = stringToPrecomputedChunk(\n+    '<link rel=\"expect\" href=\"#'\n+  ),\n+  blockingRenderChunkEnd = stringToPrecomputedChunk('\" blocking=\"render\"/>'),\n+  completedShellIdAttributeStart = stringToPrecomputedChunk(' id=\"');\n+function pushCompletedShellIdAttribute(target, resumableState) {\n+  0 === (resumableState.instructions & 32) &&\n+    ((resumableState.instructions |= 32),\n+    target.push(\n+      completedShellIdAttributeStart,\n+      stringToChunk(\n+        escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\")\n+      ),\n+      attributeEnd\n+    ));\n+}\n var arrayFirstOpenBracket = stringToPrecomputedChunk(\"[\"),\n   arraySubsequentOpenBracket = stringToPrecomputedChunk(\",[\"),\n   arrayInterstitial = stringToPrecomputedChunk(\",\"),\n@@ -3954,6 +3997,7 @@ function RequestInstance(\n   this.fatalError = null;\n   this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n   this.completedPreambleSegments = this.completedRootSegment = null;\n+  this.byteSize = 0;\n   this.abortableTasks = abortSet;\n   this.pingedTasks = [];\n   this.clientRenderedBoundaries = [];\n@@ -4576,11 +4620,11 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           }\n         } else {\n           type = task.keyPath;\n-          var parentBoundary = task.blockedBoundary;\n-          ref = task.blockedPreamble;\n+          ref = task.blockedBoundary;\n+          propName$33 = task.blockedPreamble;\n           var parentHoistableState = task.hoistableState;\n-          propName$33 = task.blockedSegment;\n-          propName = props.fallback;\n+          propName = task.blockedSegment;\n+          var fallback = props.fallback;\n           props = props.children;\n           var fallbackAbortSet = new Set();\n           var newBoundary =\n@@ -4596,14 +4640,14 @@ function renderElement(request, task, keyPath, type, props, ref) {\n             (newBoundary.trackedContentKeyPath = keyPath);\n           var boundarySegment = createPendingSegment(\n             request,\n-            propName$33.chunks.length,\n+            propName.chunks.length,\n             newBoundary,\n             task.formatContext,\n             !1,\n             !1\n           );\n-          propName$33.children.push(boundarySegment);\n-          propName$33.lastPushedText = !1;\n+          propName.children.push(boundarySegment);\n+          propName.lastPushedText = !1;\n           var contentRootSegment = createPendingSegment(\n             request,\n             0,\n@@ -4623,19 +4667,20 @@ function renderElement(request, task, keyPath, type, props, ref) {\n             task.keyPath = newProps;\n             boundarySegment.status = 6;\n             try {\n-              renderNode(request, task, propName, -1),\n+              renderNode(request, task, fallback, -1),\n                 boundarySegment.lastPushedText &&\n                   boundarySegment.textEmbedded &&\n                   boundarySegment.chunks.push(textSeparator),\n-                (boundarySegment.status = 1);\n+                (boundarySegment.status = 1),\n+                finishedSegment(request, ref, boundarySegment);\n             } catch (thrownValue) {\n               throw (\n                 ((boundarySegment.status = 12 === request.status ? 3 : 4),\n                 thrownValue)\n               );\n             } finally {\n-              (task.blockedSegment = propName$33),\n-                (task.blockedPreamble = ref),\n+              (task.blockedSegment = propName),\n+                (task.blockedPreamble = propName$33),\n                 (task.keyPath = type);\n             }\n             task = createRenderTask(\n@@ -4671,10 +4716,13 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                   contentRootSegment.textEmbedded &&\n                   contentRootSegment.chunks.push(textSeparator),\n                 (contentRootSegment.status = 1),\n+                finishedSegment(request, newBoundary, contentRootSegment),\n                 queueCompletedSegment(newBoundary, contentRootSegment),\n-                0 === newBoundary.pendingTasks && 0 === newBoundary.status)\n+                0 === newBoundary.pendingTasks &&\n+                  0 === newBoundary.status &&\n+                  ((newBoundary.status = 1),\n+                  !(newBoundary.byteSize > request.progressiveChunkSize)))\n               ) {\n-                newBoundary.status = 1;\n                 0 === request.pendingRootTasks &&\n                   task.blockedPreamble &&\n                   preparePreamble(request);\n@@ -4696,18 +4744,18 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                 (newBoundary.errorDigest = initialState),\n                 untrackBoundary(request, newBoundary);\n             } finally {\n-              (task.blockedBoundary = parentBoundary),\n-                (task.blockedPreamble = ref),\n+              (task.blockedBoundary = ref),\n+                (task.blockedPreamble = propName$33),\n                 (task.hoistableState = parentHoistableState),\n-                (task.blockedSegment = propName$33),\n+                (task.blockedSegment = propName),\n                 (task.keyPath = type);\n             }\n             task = createRenderTask(\n               request,\n               null,\n-              propName,\n+              fallback,\n               -1,\n-              parentBoundary,\n+              ref,\n               boundarySegment,\n               newBoundary.fallbackPreamble,\n               newBoundary.fallbackState,\n@@ -4729,9 +4777,8 @@ function renderElement(request, task, keyPath, type, props, ref) {\n       switch (type.$$typeof) {\n         case REACT_FORWARD_REF_TYPE:\n           if (\"ref\" in props)\n-            for (newBoundary in ((newProps = {}), props))\n-              \"ref\" !== newBoundary &&\n-                (newProps[newBoundary] = props[newBoundary]);\n+            for (fallback in ((newProps = {}), props))\n+              \"ref\" !== fallback && (newProps[fallback] = props[fallback]);\n           else newProps = props;\n           type = renderWithHooks(\n             request,\n@@ -4821,6 +4868,7 @@ function resumeNode(request, task, segmentId, node, childIndex) {\n       (task.blockedSegment = resumedSegment),\n       renderNode(request, task, node, childIndex),\n       (resumedSegment.status = 1),\n+      finishedSegment(request, blockedBoundary, resumedSegment),\n       null === blockedBoundary\n         ? (request.completedRootSegment = resumedSegment)\n         : (queueCompletedSegment(blockedBoundary, resumedSegment),\n@@ -5525,6 +5573,16 @@ function queueCompletedSegment(boundary, segment) {\n     1 === childSegment.status && queueCompletedSegment(boundary, childSegment);\n   } else boundary.completedSegments.push(segment);\n }\n+function finishedSegment(request, boundary, segment) {\n+  if (null !== byteLengthOfChunk) {\n+    segment = segment.chunks;\n+    for (var segmentByteSize = 0, i = 0; i < segment.length; i++)\n+      segmentByteSize += segment[i].byteLength;\n+    null === boundary\n+      ? (request.byteSize += segmentByteSize)\n+      : (boundary.byteSize += segmentByteSize);\n+  }\n+}\n function finishedTask(request, boundary, segment) {\n   if (null === boundary) {\n     if (null !== segment && segment.parentFlushed) {\n@@ -5548,8 +5606,12 @@ function finishedTask(request, boundary, segment) {\n             boundary.parentFlushed &&\n               request.completedBoundaries.push(boundary),\n             1 === boundary.status &&\n-              (boundary.fallbackAbortableTasks.forEach(abortTaskSoft, request),\n-              boundary.fallbackAbortableTasks.clear(),\n+              (boundary.byteSize > request.progressiveChunkSize ||\n+                (boundary.fallbackAbortableTasks.forEach(\n+                  abortTaskSoft,\n+                  request\n+                ),\n+                boundary.fallbackAbortableTasks.clear()),\n               0 === request.pendingRootTasks &&\n                 null === request.trackedPostpones &&\n                 null !== boundary.contentPreamble &&\n@@ -5672,6 +5734,7 @@ function performWork(request$jscomp$2) {\n                 request$jscomp$1.chunks.push(textSeparator),\n               task.abortSet.delete(task),\n               (request$jscomp$1.status = 1),\n+              finishedSegment(request, task.blockedBoundary, request$jscomp$1),\n               finishedTask(request, task.blockedBoundary, request$jscomp$1);\n           } catch (thrownValue) {\n             resetHooksState();\n@@ -5949,6 +6012,7 @@ function flushCompletedBoundary(request, destination, boundary) {\n   var requiresStyleInsertion = request.stylesToHoist;\n   request.stylesToHoist = !1;\n   writeChunk(destination, request.startInlineScript);\n+  writeChunk(destination, endOfStartTag);\n   requiresStyleInsertion\n     ? 0 === (completedSegments.instructions & 2)\n       ? ((completedSegments.instructions |= 10),\n@@ -5996,6 +6060,7 @@ function flushPartiallyCompletedSegment(\n   boundary = request.resumableState;\n   request = request.renderState;\n   writeChunk(destination, request.startInlineScript);\n+  writeChunk(destination, endOfStartTag);\n   0 === (boundary.instructions & 1)\n     ? ((boundary.instructions |= 1),\n       writeChunk(destination, completeSegmentScript1Full))\n@@ -6020,7 +6085,8 @@ function flushCompletedQueues(request, destination) {\n         if (5 === completedRootSegment.status) return;\n         var completedPreambleSegments = request.completedPreambleSegments;\n         if (null === completedPreambleSegments) return;\n-        var renderState = request.renderState,\n+        var resumableState = request.resumableState,\n+          renderState = request.renderState,\n           preamble = renderState.preamble,\n           htmlChunks = preamble.htmlChunks,\n           headChunks = preamble.headChunks,\n@@ -6061,17 +6127,23 @@ function flushCompletedQueues(request, destination) {\n         renderState.scripts.clear();\n         renderState.bulkPreloads.forEach(flushResource, destination);\n         renderState.bulkPreloads.clear();\n+        if (htmlChunks || headChunks) {\n+          var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+          writeChunk(destination, blockingRenderChunkStart);\n+          writeChunk(destination, stringToChunk(escapeTextForBrowser(shellId)));\n+          writeChunk(destination, blockingRenderChunkEnd);\n+        }\n         var hoistableChunks = renderState.hoistableChunks;\n         for (i$jscomp$0 = 0; i$jscomp$0 < hoistableChunks.length; i$jscomp$0++)\n           writeChunk(destination, hoistableChunks[i$jscomp$0]);\n         for (\n-          renderState = hoistableChunks.length = 0;\n-          renderState < completedPreambleSegments.length;\n-          renderState++\n+          resumableState = hoistableChunks.length = 0;\n+          resumableState < completedPreambleSegments.length;\n+          resumableState++\n         ) {\n-          var segments = completedPreambleSegments[renderState];\n-          for (preamble = 0; preamble < segments.length; preamble++)\n-            flushSegment(request, destination, segments[preamble], null);\n+          var segments = completedPreambleSegments[resumableState];\n+          for (renderState = 0; renderState < segments.length; renderState++)\n+            flushSegment(request, destination, segments[renderState], null);\n         }\n         var preamble$jscomp$0 = request.renderState.preamble,\n           headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n@@ -6087,33 +6159,48 @@ function flushCompletedQueues(request, destination) {\n             writeChunk(destination, bodyChunks[completedPreambleSegments]);\n         flushSegment(request, destination, completedRootSegment, null);\n         request.completedRootSegment = null;\n-        writeBootstrap(destination, request.renderState);\n+        var resumableState$jscomp$0 = request.resumableState,\n+          renderState$jscomp$0 = request.renderState,\n+          preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+        if (\n+          (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+          0 === (resumableState$jscomp$0.instructions & 32)\n+        ) {\n+          var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+          bootstrapChunks.push(startChunkForTag(\"template\"));\n+          pushCompletedShellIdAttribute(\n+            bootstrapChunks,\n+            resumableState$jscomp$0\n+          );\n+          bootstrapChunks.push(endOfStartTag, endChunkForTag(\"template\"));\n+        }\n+        writeBootstrap(destination, renderState$jscomp$0);\n       }\n-      var renderState$jscomp$0 = request.renderState;\n+      var renderState$jscomp$1 = request.renderState;\n       completedRootSegment = 0;\n-      var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+      var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < viewportChunks$jscomp$0.length;\n         completedRootSegment++\n       )\n         writeChunk(destination, viewportChunks$jscomp$0[completedRootSegment]);\n       viewportChunks$jscomp$0.length = 0;\n-      renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-      renderState$jscomp$0.preconnects.clear();\n-      renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.fontPreloads.clear();\n-      renderState$jscomp$0.highImagePreloads.forEach(\n+      renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+      renderState$jscomp$1.preconnects.clear();\n+      renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.fontPreloads.clear();\n+      renderState$jscomp$1.highImagePreloads.forEach(\n         flushResource,\n         destination\n       );\n-      renderState$jscomp$0.highImagePreloads.clear();\n-      renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-      renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-      renderState$jscomp$0.scripts.clear();\n-      renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.bulkPreloads.clear();\n-      var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+      renderState$jscomp$1.highImagePreloads.clear();\n+      renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+      renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+      renderState$jscomp$1.scripts.clear();\n+      renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.bulkPreloads.clear();\n+      var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -6124,35 +6211,36 @@ function flushCompletedQueues(request, destination) {\n       var clientRenderedBoundaries = request.clientRenderedBoundaries;\n       for (i = 0; i < clientRenderedBoundaries.length; i++) {\n         var boundary = clientRenderedBoundaries[i];\n-        renderState$jscomp$0 = destination;\n-        var resumableState = request.resumableState,\n-          renderState$jscomp$1 = request.renderState,\n+        renderState$jscomp$1 = destination;\n+        var resumableState$jscomp$1 = request.resumableState,\n+          renderState$jscomp$2 = request.renderState,\n           id = boundary.rootSegmentID,\n           errorDigest = boundary.errorDigest;\n         writeChunk(\n-          renderState$jscomp$0,\n-          renderState$jscomp$1.startInlineScript\n+          renderState$jscomp$1,\n+          renderState$jscomp$2.startInlineScript\n         );\n-        0 === (resumableState.instructions & 4)\n-          ? ((resumableState.instructions |= 4),\n-            writeChunk(renderState$jscomp$0, clientRenderScript1Full))\n-          : writeChunk(renderState$jscomp$0, clientRenderScript1Partial);\n-        writeChunk(renderState$jscomp$0, renderState$jscomp$1.boundaryPrefix);\n-        writeChunk(renderState$jscomp$0, stringToChunk(id.toString(16)));\n-        writeChunk(renderState$jscomp$0, clientRenderScript1A);\n+        writeChunk(renderState$jscomp$1, endOfStartTag);\n+        0 === (resumableState$jscomp$1.instructions & 4)\n+          ? ((resumableState$jscomp$1.instructions |= 4),\n+            writeChunk(renderState$jscomp$1, clientRenderScript1Full))\n+          : writeChunk(renderState$jscomp$1, clientRenderScript1Partial);\n+        writeChunk(renderState$jscomp$1, renderState$jscomp$2.boundaryPrefix);\n+        writeChunk(renderState$jscomp$1, stringToChunk(id.toString(16)));\n+        writeChunk(renderState$jscomp$1, clientRenderScript1A);\n         errorDigest &&\n           (writeChunk(\n-            renderState$jscomp$0,\n+            renderState$jscomp$1,\n             clientRenderErrorScriptArgInterstitial\n           ),\n           writeChunk(\n-            renderState$jscomp$0,\n+            renderState$jscomp$1,\n             stringToChunk(\n               escapeJSStringsForInstructionScripts(errorDigest || \"\")\n             )\n           ));\n         var JSCompiler_inline_result = writeChunkAndReturn(\n-          renderState$jscomp$0,\n+          renderState$jscomp$1,\n           clientRenderScriptEnd\n         );\n         if (!JSCompiler_inline_result) {\n@@ -6318,11 +6406,11 @@ function abort(request, reason) {\n }\n function ensureCorrectIsomorphicReactVersion() {\n   var isomorphicReactPackageVersion = React.version;\n-  if (\"19.2.0-canary-197d6a04-20250424\" !== isomorphicReactPackageVersion)\n+  if (\"19.2.0-canary-5dc00d6b-20250428\" !== isomorphicReactPackageVersion)\n     throw Error(\n       'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n         (isomorphicReactPackageVersion +\n-          \"\\n  - react-dom:  19.2.0-canary-197d6a04-20250424\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+          \"\\n  - react-dom:  19.2.0-canary-5dc00d6b-20250428\\nLearn more: https://react.dev/warnings/version-mismatch\")\n     );\n }\n ensureCorrectIsomorphicReactVersion();\n@@ -6479,4 +6567,4 @@ const setTimeoutOrImmediate =\n     ? globalThis['set' + 'Immediate']\n     : setTimeout;\n \n-exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+exports.version = \"19.2.0-canary-5dc00d6b-20250428\";"
        },
        {
            "sha": "c8c89e1c0c60b90dfdcf9edec15c691413db2346",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server.node.development.js",
            "status": "modified",
            "additions": 181,
            "deletions": 78,
            "changes": 259,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.node.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.node.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.node.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -267,6 +267,11 @@\n         );\n       return content;\n     }\n+    function byteLengthOfChunk(chunk) {\n+      return \"string\" === typeof chunk\n+        ? Buffer.byteLength(chunk, \"utf8\")\n+        : chunk.byteLength;\n+    }\n     function typeName(value) {\n       return (\n         (\"function\" === typeof Symbol &&\n@@ -750,19 +755,21 @@\n           void 0 === nonce\n             ? startInlineScript\n             : stringToPrecomputedChunk(\n-                '<script nonce=\"' + escapeTextForBrowser(nonce) + '\">'\n+                '<script nonce=\"' + escapeTextForBrowser(nonce) + '\"'\n               ),\n         idPrefix = resumableState.idPrefix;\n       externalRuntimeConfig = [];\n       var bootstrapScriptContent = resumableState.bootstrapScriptContent,\n         bootstrapScripts = resumableState.bootstrapScripts,\n         bootstrapModules = resumableState.bootstrapModules;\n       void 0 !== bootstrapScriptContent &&\n+        (externalRuntimeConfig.push(inlineScriptWithNonce),\n+        pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState),\n         externalRuntimeConfig.push(\n-          inlineScriptWithNonce,\n+          endOfStartTag,\n           escapeEntireInlineScriptContent(bootstrapScriptContent),\n           endInlineScript\n-        );\n+        ));\n       bootstrapScriptContent = [];\n       void 0 !== importMap &&\n         (bootstrapScriptContent.push(importMapScriptStart),\n@@ -857,23 +864,28 @@\n           );\n           externalRuntimeConfig.push(\n             startScriptSrc,\n-            escapeTextForBrowser(inlineScriptWithNonce)\n+            escapeTextForBrowser(inlineScriptWithNonce),\n+            attributeEnd\n           );\n           nonce &&\n             externalRuntimeConfig.push(\n               scriptNonce,\n-              escapeTextForBrowser(nonce)\n+              escapeTextForBrowser(nonce),\n+              attributeEnd\n             );\n           \"string\" === typeof bootstrapScriptContent &&\n             externalRuntimeConfig.push(\n               scriptIntegirty,\n-              escapeTextForBrowser(bootstrapScriptContent)\n+              escapeTextForBrowser(bootstrapScriptContent),\n+              attributeEnd\n             );\n           \"string\" === typeof idPrefix &&\n             externalRuntimeConfig.push(\n               scriptCrossOrigin,\n-              escapeTextForBrowser(idPrefix)\n+              escapeTextForBrowser(idPrefix),\n+              attributeEnd\n             );\n+          pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState);\n           externalRuntimeConfig.push(endAsyncScript);\n         }\n       if (void 0 !== bootstrapModules)\n@@ -911,23 +923,31 @@\n             ),\n             externalRuntimeConfig.push(\n               startModuleSrc,\n-              escapeTextForBrowser(maxHeadersLength)\n+              escapeTextForBrowser(maxHeadersLength),\n+              attributeEnd\n             ),\n             nonce &&\n               externalRuntimeConfig.push(\n                 scriptNonce,\n-                escapeTextForBrowser(nonce)\n+                escapeTextForBrowser(nonce),\n+                attributeEnd\n               ),\n             \"string\" === typeof idPrefix &&\n               externalRuntimeConfig.push(\n                 scriptIntegirty,\n-                escapeTextForBrowser(idPrefix)\n+                escapeTextForBrowser(idPrefix),\n+                attributeEnd\n               ),\n             \"string\" === typeof inlineScriptWithNonce &&\n               externalRuntimeConfig.push(\n                 scriptCrossOrigin,\n-                escapeTextForBrowser(inlineScriptWithNonce)\n+                escapeTextForBrowser(inlineScriptWithNonce),\n+                attributeEnd\n               ),\n+            pushCompletedShellIdAttribute(\n+              externalRuntimeConfig,\n+              resumableState\n+            ),\n             externalRuntimeConfig.push(endAsyncScript);\n       return onHeaders;\n     }\n@@ -1561,13 +1581,26 @@\n       return content;\n     }\n     function injectFormReplayingRuntime(resumableState, renderState) {\n-      (resumableState.instructions & 16) === NothingSent &&\n-        ((resumableState.instructions |= 16),\n-        renderState.bootstrapChunks.unshift(\n-          renderState.startInlineScript,\n-          formReplayingRuntimeScript,\n-          endInlineScript\n-        ));\n+      if ((resumableState.instructions & 16) === NothingSent) {\n+        resumableState.instructions |= 16;\n+        var preamble = renderState.preamble,\n+          bootstrapChunks = renderState.bootstrapChunks;\n+        (preamble.htmlChunks || preamble.headChunks) &&\n+        0 === bootstrapChunks.length\n+          ? (bootstrapChunks.push(renderState.startInlineScript),\n+            pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+            bootstrapChunks.push(\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              endInlineScript\n+            ))\n+          : bootstrapChunks.unshift(\n+              renderState.startInlineScript,\n+              endOfStartTag,\n+              formReplayingRuntimeScript,\n+              endInlineScript\n+            );\n+      }\n     }\n     function pushLinkImpl(target, props) {\n       target.push(startChunkForTag(\"link\"));\n@@ -3301,6 +3334,15 @@\n       styleQueue.sheets.forEach(preloadLateStyle, this);\n       styleQueue.sheets.clear();\n     }\n+    function pushCompletedShellIdAttribute(target, resumableState) {\n+      (resumableState.instructions & SentCompletedShellId) === NothingSent &&\n+        ((resumableState.instructions |= SentCompletedShellId),\n+        target.push(\n+          completedShellIdAttributeStart,\n+          escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\"),\n+          attributeEnd\n+        ));\n+    }\n     function writeStyleResourceDependenciesInJS(destination, hoistableState) {\n       writeChunk(destination, arrayFirstOpenBracket);\n       var nextArrayOpenBrackChunk = arrayFirstOpenBracket;\n@@ -4338,6 +4380,7 @@\n       this.fatalError = null;\n       this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n       this.completedPreambleSegments = this.completedRootSegment = null;\n+      this.byteSize = 0;\n       this.abortableTasks = abortSet;\n       this.pingedTasks = [];\n       this.clientRenderedBoundaries = [];\n@@ -5513,7 +5556,8 @@\n                     boundarySegment.lastPushedText &&\n                       boundarySegment.textEmbedded &&\n                       boundarySegment.chunks.push(textSeparator),\n-                    (boundarySegment.status = COMPLETED);\n+                    (boundarySegment.status = COMPLETED),\n+                    finishedSegment(request, parentBoundary, boundarySegment);\n                 } catch (thrownValue) {\n                   throw (\n                     ((boundarySegment.status = 12 === request.status ? 3 : 4),\n@@ -5559,11 +5603,13 @@\n                       contentRootSegment.textEmbedded &&\n                       contentRootSegment.chunks.push(textSeparator),\n                     (contentRootSegment.status = COMPLETED),\n+                    finishedSegment(request, newBoundary, contentRootSegment),\n                     queueCompletedSegment(newBoundary, contentRootSegment),\n                     0 === newBoundary.pendingTasks &&\n-                      newBoundary.status === PENDING)\n+                      newBoundary.status === PENDING &&\n+                      ((newBoundary.status = COMPLETED),\n+                      !(newBoundary.byteSize > request.progressiveChunkSize)))\n                   ) {\n-                    newBoundary.status = COMPLETED;\n                     0 === request.pendingRootTasks &&\n                       task.blockedPreamble &&\n                       preparePreamble(request);\n@@ -5758,6 +5804,7 @@\n           (task.blockedSegment = resumedSegment),\n           renderNode(request, task, node, childIndex),\n           (resumedSegment.status = COMPLETED),\n+          finishedSegment(request, blockedBoundary, resumedSegment),\n           null === blockedBoundary\n             ? (request.completedRootSegment = resumedSegment)\n             : (queueCompletedSegment(blockedBoundary, resumedSegment),\n@@ -6674,6 +6721,16 @@\n           queueCompletedSegment(boundary, childSegment);\n       } else boundary.completedSegments.push(segment);\n     }\n+    function finishedSegment(request, boundary, segment) {\n+      if (null !== byteLengthOfChunk) {\n+        segment = segment.chunks;\n+        for (var segmentByteSize = 0, i = 0; i < segment.length; i++)\n+          segmentByteSize += byteLengthOfChunk(segment[i]);\n+        null === boundary\n+          ? (request.byteSize += segmentByteSize)\n+          : (boundary.byteSize += segmentByteSize);\n+      }\n+    }\n     function finishedTask(request, boundary, segment) {\n       if (null === boundary) {\n         if (null !== segment && segment.parentFlushed) {\n@@ -6697,11 +6754,12 @@\n                 boundary.parentFlushed &&\n                   request.completedBoundaries.push(boundary),\n                 boundary.status === COMPLETED &&\n-                  (boundary.fallbackAbortableTasks.forEach(\n-                    abortTaskSoft,\n-                    request\n-                  ),\n-                  boundary.fallbackAbortableTasks.clear(),\n+                  (boundary.byteSize > request.progressiveChunkSize ||\n+                    (boundary.fallbackAbortableTasks.forEach(\n+                      abortTaskSoft,\n+                      request\n+                    ),\n+                    boundary.fallbackAbortableTasks.clear()),\n                   0 === request.pendingRootTasks &&\n                     null === request.trackedPostpones &&\n                     null !== boundary.contentPreamble &&\n@@ -6841,6 +6899,11 @@\n                     request$jscomp$1.chunks.push(textSeparator),\n                   errorDigest.abortSet.delete(errorDigest),\n                   (request$jscomp$1.status = COMPLETED),\n+                  finishedSegment(\n+                    request,\n+                    errorDigest.blockedBoundary,\n+                    request$jscomp$1\n+                  ),\n                   finishedTask(\n                     request,\n                     errorDigest.blockedBoundary,\n@@ -7178,6 +7241,7 @@\n       var requiresStyleInsertion = request.stylesToHoist;\n       request.stylesToHoist = !1;\n       writeChunk(destination, request.startInlineScript);\n+      writeChunk(destination, endOfStartTag);\n       requiresStyleInsertion\n         ? (completedSegments.instructions & SentCompleteBoundaryFunction) ===\n           NothingSent\n@@ -7244,6 +7308,7 @@\n       boundary = request.resumableState;\n       request = request.renderState;\n       writeChunk(destination, request.startInlineScript);\n+      writeChunk(destination, endOfStartTag);\n       (boundary.instructions & SentCompleteSegmentFunction) === NothingSent\n         ? ((boundary.instructions |= SentCompleteSegmentFunction),\n           writeChunk(destination, completeSegmentScript1Full))\n@@ -7269,7 +7334,8 @@\n             if (completedRootSegment.status === POSTPONED) return;\n             var completedPreambleSegments = request.completedPreambleSegments;\n             if (null === completedPreambleSegments) return;\n-            var renderState = request.renderState,\n+            var resumableState = request.resumableState,\n+              renderState = request.renderState,\n               preamble = renderState.preamble,\n               htmlChunks = preamble.htmlChunks,\n               headChunks = preamble.headChunks,\n@@ -7326,6 +7392,12 @@\n             renderState.scripts.clear();\n             renderState.bulkPreloads.forEach(flushResource, destination);\n             renderState.bulkPreloads.clear();\n+            if (htmlChunks || headChunks) {\n+              var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+              writeChunk(destination, blockingRenderChunkStart);\n+              writeChunk(destination, escapeTextForBrowser(shellId));\n+              writeChunk(destination, blockingRenderChunkEnd);\n+            }\n             var hoistableChunks = renderState.hoistableChunks;\n             for (\n               i$jscomp$0 = 0;\n@@ -7334,13 +7406,17 @@\n             )\n               writeChunk(destination, hoistableChunks[i$jscomp$0]);\n             for (\n-              renderState = hoistableChunks.length = 0;\n-              renderState < completedPreambleSegments.length;\n-              renderState++\n+              resumableState = hoistableChunks.length = 0;\n+              resumableState < completedPreambleSegments.length;\n+              resumableState++\n             ) {\n-              var segments = completedPreambleSegments[renderState];\n-              for (preamble = 0; preamble < segments.length; preamble++)\n-                flushSegment(request, destination, segments[preamble], null);\n+              var segments = completedPreambleSegments[resumableState];\n+              for (\n+                renderState = 0;\n+                renderState < segments.length;\n+                renderState++\n+              )\n+                flushSegment(request, destination, segments[renderState], null);\n             }\n             var preamble$jscomp$0 = request.renderState.preamble,\n               headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n@@ -7356,11 +7432,27 @@\n                 writeChunk(destination, bodyChunks[completedPreambleSegments]);\n             flushSegment(request, destination, completedRootSegment, null);\n             request.completedRootSegment = null;\n-            writeBootstrap(destination, request.renderState);\n+            var resumableState$jscomp$0 = request.resumableState,\n+              renderState$jscomp$0 = request.renderState,\n+              preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+            if (\n+              (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+              (resumableState$jscomp$0.instructions & SentCompletedShellId) ===\n+                NothingSent\n+            ) {\n+              var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+              bootstrapChunks.push(startChunkForTag(\"template\"));\n+              pushCompletedShellIdAttribute(\n+                bootstrapChunks,\n+                resumableState$jscomp$0\n+              );\n+              bootstrapChunks.push(endOfStartTag, endChunkForTag(\"template\"));\n+            }\n+            writeBootstrap(destination, renderState$jscomp$0);\n           }\n-          var renderState$jscomp$0 = request.renderState;\n+          var renderState$jscomp$1 = request.renderState;\n           completedRootSegment = 0;\n-          var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+          var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < viewportChunks$jscomp$0.length;\n@@ -7371,21 +7463,21 @@\n               viewportChunks$jscomp$0[completedRootSegment]\n             );\n           viewportChunks$jscomp$0.length = 0;\n-          renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-          renderState$jscomp$0.preconnects.clear();\n-          renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.fontPreloads.clear();\n-          renderState$jscomp$0.highImagePreloads.forEach(\n+          renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+          renderState$jscomp$1.preconnects.clear();\n+          renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.fontPreloads.clear();\n+          renderState$jscomp$1.highImagePreloads.forEach(\n             flushResource,\n             destination\n           );\n-          renderState$jscomp$0.highImagePreloads.clear();\n-          renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-          renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-          renderState$jscomp$0.scripts.clear();\n-          renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-          renderState$jscomp$0.bulkPreloads.clear();\n-          var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+          renderState$jscomp$1.highImagePreloads.clear();\n+          renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+          renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+          renderState$jscomp$1.scripts.clear();\n+          renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+          renderState$jscomp$1.bulkPreloads.clear();\n+          var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n           for (\n             completedRootSegment = 0;\n             completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -7399,72 +7491,75 @@\n           var clientRenderedBoundaries = request.clientRenderedBoundaries;\n           for (i = 0; i < clientRenderedBoundaries.length; i++) {\n             var boundary = clientRenderedBoundaries[i];\n-            renderState$jscomp$0 = destination;\n-            var resumableState = request.resumableState,\n-              renderState$jscomp$1 = request.renderState,\n+            renderState$jscomp$1 = destination;\n+            var resumableState$jscomp$1 = request.resumableState,\n+              renderState$jscomp$2 = request.renderState,\n               id = boundary.rootSegmentID,\n               errorDigest = boundary.errorDigest,\n               errorMessage = boundary.errorMessage,\n               errorStack = boundary.errorStack,\n               errorComponentStack = boundary.errorComponentStack;\n             writeChunk(\n-              renderState$jscomp$0,\n-              renderState$jscomp$1.startInlineScript\n+              renderState$jscomp$1,\n+              renderState$jscomp$2.startInlineScript\n             );\n-            (resumableState.instructions & SentClientRenderFunction) ===\n+            writeChunk(renderState$jscomp$1, endOfStartTag);\n+            (resumableState$jscomp$1.instructions &\n+              SentClientRenderFunction) ===\n             NothingSent\n-              ? ((resumableState.instructions |= SentClientRenderFunction),\n-                writeChunk(renderState$jscomp$0, clientRenderScript1Full))\n-              : writeChunk(renderState$jscomp$0, clientRenderScript1Partial);\n+              ? ((resumableState$jscomp$1.instructions |=\n+                  SentClientRenderFunction),\n+                writeChunk(renderState$jscomp$1, clientRenderScript1Full))\n+              : writeChunk(renderState$jscomp$1, clientRenderScript1Partial);\n             writeChunk(\n-              renderState$jscomp$0,\n-              renderState$jscomp$1.boundaryPrefix\n+              renderState$jscomp$1,\n+              renderState$jscomp$2.boundaryPrefix\n             );\n-            writeChunk(renderState$jscomp$0, id.toString(16));\n-            writeChunk(renderState$jscomp$0, clientRenderScript1A);\n+            writeChunk(renderState$jscomp$1, id.toString(16));\n+            writeChunk(renderState$jscomp$1, clientRenderScript1A);\n             if (\n               errorDigest ||\n               errorMessage ||\n               errorStack ||\n               errorComponentStack\n             )\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 clientRenderErrorScriptArgInterstitial\n               ),\n                 writeChunk(\n-                  renderState$jscomp$0,\n+                  renderState$jscomp$1,\n                   escapeJSStringsForInstructionScripts(errorDigest || \"\")\n                 );\n             if (errorMessage || errorStack || errorComponentStack)\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 clientRenderErrorScriptArgInterstitial\n               ),\n                 writeChunk(\n-                  renderState$jscomp$0,\n+                  renderState$jscomp$1,\n                   escapeJSStringsForInstructionScripts(errorMessage || \"\")\n                 );\n             if (errorStack || errorComponentStack)\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 clientRenderErrorScriptArgInterstitial\n               ),\n                 writeChunk(\n-                  renderState$jscomp$0,\n+                  renderState$jscomp$1,\n                   escapeJSStringsForInstructionScripts(errorStack || \"\")\n                 );\n             errorComponentStack &&\n               (writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 clientRenderErrorScriptArgInterstitial\n               ),\n               writeChunk(\n-                renderState$jscomp$0,\n+                renderState$jscomp$1,\n                 escapeJSStringsForInstructionScripts(errorComponentStack)\n               ));\n             var JSCompiler_inline_result = writeChunkAndReturn(\n-              renderState$jscomp$0,\n+              renderState$jscomp$1,\n               clientRenderScriptEnd\n             );\n             if (!JSCompiler_inline_result) {\n@@ -7640,11 +7735,11 @@\n     }\n     function ensureCorrectIsomorphicReactVersion() {\n       var isomorphicReactPackageVersion = React.version;\n-      if (\"19.2.0-canary-197d6a04-20250424\" !== isomorphicReactPackageVersion)\n+      if (\"19.2.0-canary-5dc00d6b-20250428\" !== isomorphicReactPackageVersion)\n         throw Error(\n           'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n             (isomorphicReactPackageVersion +\n-              \"\\n  - react-dom:  19.2.0-canary-197d6a04-20250424\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+              \"\\n  - react-dom:  19.2.0-canary-5dc00d6b-20250428\\nLearn more: https://react.dev/warnings/version-mismatch\")\n         );\n     }\n     function createDrainHandler(destination, request) {\n@@ -8778,18 +8873,19 @@\n       SentCompleteBoundaryFunction = 2,\n       SentClientRenderFunction = 4,\n       SentStyleInsertionFunction = 8,\n+      SentCompletedShellId = 32,\n       EXISTS = null,\n       PRELOAD_NO_CREDS = [];\n     Object.freeze(PRELOAD_NO_CREDS);\n     stringToPrecomputedChunk('\"></template>');\n-    var startInlineScript = stringToPrecomputedChunk(\"<script>\"),\n+    var startInlineScript = stringToPrecomputedChunk(\"<script\"),\n       endInlineScript = stringToPrecomputedChunk(\"\\x3c/script>\"),\n       startScriptSrc = stringToPrecomputedChunk('<script src=\"'),\n       startModuleSrc = stringToPrecomputedChunk('<script type=\"module\" src=\"'),\n-      scriptNonce = stringToPrecomputedChunk('\" nonce=\"'),\n-      scriptIntegirty = stringToPrecomputedChunk('\" integrity=\"'),\n-      scriptCrossOrigin = stringToPrecomputedChunk('\" crossorigin=\"'),\n-      endAsyncScript = stringToPrecomputedChunk('\" async=\"\">\\x3c/script>'),\n+      scriptNonce = stringToPrecomputedChunk(' nonce=\"'),\n+      scriptIntegirty = stringToPrecomputedChunk(' integrity=\"'),\n+      scriptCrossOrigin = stringToPrecomputedChunk(' crossorigin=\"'),\n+      endAsyncScript = stringToPrecomputedChunk(' async=\"\">\\x3c/script>'),\n       scriptRegex = /(<\\/|<)(s)(cript)/gi,\n       importMapScriptStart = stringToPrecomputedChunk(\n         '<script type=\"importmap\">'\n@@ -8966,6 +9062,13 @@\n       spaceSeparator = stringToPrecomputedChunk(\" \"),\n       styleTagResourceOpen3 = stringToPrecomputedChunk('\">'),\n       styleTagResourceClose = stringToPrecomputedChunk(\"</style>\"),\n+      blockingRenderChunkStart = stringToPrecomputedChunk(\n+        '<link rel=\"expect\" href=\"#'\n+      ),\n+      blockingRenderChunkEnd = stringToPrecomputedChunk(\n+        '\" blocking=\"render\"/>'\n+      ),\n+      completedShellIdAttributeStart = stringToPrecomputedChunk(' id=\"'),\n       arrayFirstOpenBracket = stringToPrecomputedChunk(\"[\"),\n       arraySubsequentOpenBracket = stringToPrecomputedChunk(\",[\"),\n       arrayInterstitial = stringToPrecomputedChunk(\",\"),\n@@ -9313,5 +9416,5 @@\n         }\n       };\n     };\n-    exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+    exports.version = \"19.2.0-canary-5dc00d6b-20250428\";\n   })();"
        },
        {
            "sha": "ce1ac484da9ca9389a7812955073163da4f2607b",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom-server.node.production.js",
            "status": "modified",
            "additions": 180,
            "deletions": 86,
            "changes": 266,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.node.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.node.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom-server.node.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -123,6 +123,11 @@ var textEncoder = new util.TextEncoder();\n function stringToPrecomputedChunk(content) {\n   return textEncoder.encode(content);\n }\n+function byteLengthOfChunk(chunk) {\n+  return \"string\" === typeof chunk\n+    ? Buffer.byteLength(chunk, \"utf8\")\n+    : chunk.byteLength;\n+}\n var assign = Object.assign,\n   hasOwnProperty = Object.prototype.hasOwnProperty,\n   VALID_ATTRIBUTE_NAME_REGEX = RegExp(\n@@ -299,14 +304,14 @@ ReactDOMSharedInternals.d = {\n };\n var PRELOAD_NO_CREDS = [];\n stringToPrecomputedChunk('\"></template>');\n-var startInlineScript = stringToPrecomputedChunk(\"<script>\"),\n+var startInlineScript = stringToPrecomputedChunk(\"<script\"),\n   endInlineScript = stringToPrecomputedChunk(\"\\x3c/script>\"),\n   startScriptSrc = stringToPrecomputedChunk('<script src=\"'),\n   startModuleSrc = stringToPrecomputedChunk('<script type=\"module\" src=\"'),\n-  scriptNonce = stringToPrecomputedChunk('\" nonce=\"'),\n-  scriptIntegirty = stringToPrecomputedChunk('\" integrity=\"'),\n-  scriptCrossOrigin = stringToPrecomputedChunk('\" crossorigin=\"'),\n-  endAsyncScript = stringToPrecomputedChunk('\" async=\"\">\\x3c/script>'),\n+  scriptNonce = stringToPrecomputedChunk(' nonce=\"'),\n+  scriptIntegirty = stringToPrecomputedChunk(' integrity=\"'),\n+  scriptCrossOrigin = stringToPrecomputedChunk(' crossorigin=\"'),\n+  endAsyncScript = stringToPrecomputedChunk(' async=\"\">\\x3c/script>'),\n   scriptRegex = /(<\\/|<)(s)(cript)/gi;\n function scriptReplacer(match, prefix, s, suffix) {\n   return \"\" + prefix + (\"s\" === s ? \"\\\\u0073\" : \"\\\\u0053\") + suffix;\n@@ -327,19 +332,21 @@ function createRenderState(\n       void 0 === nonce\n         ? startInlineScript\n         : stringToPrecomputedChunk(\n-            '<script nonce=\"' + escapeTextForBrowser(nonce) + '\">'\n+            '<script nonce=\"' + escapeTextForBrowser(nonce) + '\"'\n           ),\n     idPrefix = resumableState.idPrefix;\n   externalRuntimeConfig = [];\n   var bootstrapScriptContent = resumableState.bootstrapScriptContent,\n     bootstrapScripts = resumableState.bootstrapScripts,\n     bootstrapModules = resumableState.bootstrapModules;\n   void 0 !== bootstrapScriptContent &&\n+    (externalRuntimeConfig.push(inlineScriptWithNonce),\n+    pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState),\n     externalRuntimeConfig.push(\n-      inlineScriptWithNonce,\n+      endOfStartTag,\n       (\"\" + bootstrapScriptContent).replace(scriptRegex, scriptReplacer),\n       endInlineScript\n-    );\n+    ));\n   bootstrapScriptContent = [];\n   void 0 !== importMap &&\n     (bootstrapScriptContent.push(importMapScriptStart),\n@@ -426,20 +433,28 @@ function createRenderState(\n       onHeaders.bootstrapScripts.add(scriptConfig);\n       externalRuntimeConfig.push(\n         startScriptSrc,\n-        escapeTextForBrowser(maxHeadersLength)\n+        escapeTextForBrowser(maxHeadersLength),\n+        attributeEnd\n       );\n       nonce &&\n-        externalRuntimeConfig.push(scriptNonce, escapeTextForBrowser(nonce));\n+        externalRuntimeConfig.push(\n+          scriptNonce,\n+          escapeTextForBrowser(nonce),\n+          attributeEnd\n+        );\n       \"string\" === typeof idPrefix &&\n         externalRuntimeConfig.push(\n           scriptIntegirty,\n-          escapeTextForBrowser(idPrefix)\n+          escapeTextForBrowser(idPrefix),\n+          attributeEnd\n         );\n       \"string\" === typeof inlineScriptWithNonce &&\n         externalRuntimeConfig.push(\n           scriptCrossOrigin,\n-          escapeTextForBrowser(inlineScriptWithNonce)\n+          escapeTextForBrowser(inlineScriptWithNonce),\n+          attributeEnd\n         );\n+      pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState);\n       externalRuntimeConfig.push(endAsyncScript);\n     }\n   if (void 0 !== bootstrapModules)\n@@ -478,20 +493,28 @@ function createRenderState(\n         onHeaders.bootstrapScripts.add(bootstrapScriptContent),\n         externalRuntimeConfig.push(\n           startModuleSrc,\n-          escapeTextForBrowser(importMap)\n+          escapeTextForBrowser(importMap),\n+          attributeEnd\n         ),\n         nonce &&\n-          externalRuntimeConfig.push(scriptNonce, escapeTextForBrowser(nonce)),\n+          externalRuntimeConfig.push(\n+            scriptNonce,\n+            escapeTextForBrowser(nonce),\n+            attributeEnd\n+          ),\n         \"string\" === typeof inlineScriptWithNonce &&\n           externalRuntimeConfig.push(\n             scriptIntegirty,\n-            escapeTextForBrowser(inlineScriptWithNonce)\n+            escapeTextForBrowser(inlineScriptWithNonce),\n+            attributeEnd\n           ),\n         \"string\" === typeof maxHeadersLength &&\n           externalRuntimeConfig.push(\n             scriptCrossOrigin,\n-            escapeTextForBrowser(maxHeadersLength)\n+            escapeTextForBrowser(maxHeadersLength),\n+            attributeEnd\n           ),\n+        pushCompletedShellIdAttribute(externalRuntimeConfig, resumableState),\n         externalRuntimeConfig.push(endAsyncScript);\n   return onHeaders;\n }\n@@ -976,13 +999,25 @@ var selectedMarkerAttribute = stringToPrecomputedChunk(' selected=\"\"'),\n     'addEventListener(\"submit\",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute(\"formAction\");null!=f&&(e=f,b=null)}\"javascript:throw new Error(\\'React form unexpectedly submitted.\\')\"===e&&(a.preventDefault(),b?(a=document.createElement(\"input\"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});'\n   );\n function injectFormReplayingRuntime(resumableState, renderState) {\n-  0 === (resumableState.instructions & 16) &&\n-    ((resumableState.instructions |= 16),\n-    renderState.bootstrapChunks.unshift(\n-      renderState.startInlineScript,\n-      formReplayingRuntimeScript,\n-      endInlineScript\n-    ));\n+  if (0 === (resumableState.instructions & 16)) {\n+    resumableState.instructions |= 16;\n+    var preamble = renderState.preamble,\n+      bootstrapChunks = renderState.bootstrapChunks;\n+    (preamble.htmlChunks || preamble.headChunks) && 0 === bootstrapChunks.length\n+      ? (bootstrapChunks.push(renderState.startInlineScript),\n+        pushCompletedShellIdAttribute(bootstrapChunks, resumableState),\n+        bootstrapChunks.push(\n+          endOfStartTag,\n+          formReplayingRuntimeScript,\n+          endInlineScript\n+        ))\n+      : bootstrapChunks.unshift(\n+          renderState.startInlineScript,\n+          endOfStartTag,\n+          formReplayingRuntimeScript,\n+          endInlineScript\n+        );\n+  }\n }\n var formStateMarkerIsMatching = stringToPrecomputedChunk(\"\\x3c!--F!--\\x3e\"),\n   formStateMarkerIsNotMatching = stringToPrecomputedChunk(\"\\x3c!--F--\\x3e\");\n@@ -2549,6 +2584,20 @@ function preloadLateStyles(styleQueue) {\n   styleQueue.sheets.forEach(preloadLateStyle, this);\n   styleQueue.sheets.clear();\n }\n+var blockingRenderChunkStart = stringToPrecomputedChunk(\n+    '<link rel=\"expect\" href=\"#'\n+  ),\n+  blockingRenderChunkEnd = stringToPrecomputedChunk('\" blocking=\"render\"/>'),\n+  completedShellIdAttributeStart = stringToPrecomputedChunk(' id=\"');\n+function pushCompletedShellIdAttribute(target, resumableState) {\n+  0 === (resumableState.instructions & 32) &&\n+    ((resumableState.instructions |= 32),\n+    target.push(\n+      completedShellIdAttributeStart,\n+      escapeTextForBrowser(\"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\"),\n+      attributeEnd\n+    ));\n+}\n var arrayFirstOpenBracket = stringToPrecomputedChunk(\"[\"),\n   arraySubsequentOpenBracket = stringToPrecomputedChunk(\",[\"),\n   arrayInterstitial = stringToPrecomputedChunk(\",\"),\n@@ -3854,6 +3903,7 @@ function RequestInstance(\n   this.fatalError = null;\n   this.pendingRootTasks = this.allPendingTasks = this.nextSegmentId = 0;\n   this.completedPreambleSegments = this.completedRootSegment = null;\n+  this.byteSize = 0;\n   this.abortableTasks = abortSet;\n   this.pingedTasks = [];\n   this.clientRenderedBoundaries = [];\n@@ -4473,11 +4523,11 @@ function renderElement(request, task, keyPath, type, props, ref) {\n           }\n         } else {\n           type = task.keyPath;\n-          var parentBoundary = task.blockedBoundary;\n-          ref = task.blockedPreamble;\n+          ref = task.blockedBoundary;\n+          propName$33 = task.blockedPreamble;\n           var parentHoistableState = task.hoistableState;\n-          propName$33 = task.blockedSegment;\n-          propName = props.fallback;\n+          propName = task.blockedSegment;\n+          var fallback = props.fallback;\n           props = props.children;\n           var fallbackAbortSet = new Set();\n           var newBoundary =\n@@ -4493,14 +4543,14 @@ function renderElement(request, task, keyPath, type, props, ref) {\n             (newBoundary.trackedContentKeyPath = keyPath);\n           var boundarySegment = createPendingSegment(\n             request,\n-            propName$33.chunks.length,\n+            propName.chunks.length,\n             newBoundary,\n             task.formatContext,\n             !1,\n             !1\n           );\n-          propName$33.children.push(boundarySegment);\n-          propName$33.lastPushedText = !1;\n+          propName.children.push(boundarySegment);\n+          propName.lastPushedText = !1;\n           var contentRootSegment = createPendingSegment(\n             request,\n             0,\n@@ -4520,19 +4570,20 @@ function renderElement(request, task, keyPath, type, props, ref) {\n             task.keyPath = newProps;\n             boundarySegment.status = 6;\n             try {\n-              renderNode(request, task, propName, -1),\n+              renderNode(request, task, fallback, -1),\n                 boundarySegment.lastPushedText &&\n                   boundarySegment.textEmbedded &&\n                   boundarySegment.chunks.push(textSeparator),\n-                (boundarySegment.status = 1);\n+                (boundarySegment.status = 1),\n+                finishedSegment(request, ref, boundarySegment);\n             } catch (thrownValue) {\n               throw (\n                 ((boundarySegment.status = 12 === request.status ? 3 : 4),\n                 thrownValue)\n               );\n             } finally {\n-              (task.blockedSegment = propName$33),\n-                (task.blockedPreamble = ref),\n+              (task.blockedSegment = propName),\n+                (task.blockedPreamble = propName$33),\n                 (task.keyPath = type);\n             }\n             task = createRenderTask(\n@@ -4568,10 +4619,13 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                   contentRootSegment.textEmbedded &&\n                   contentRootSegment.chunks.push(textSeparator),\n                 (contentRootSegment.status = 1),\n+                finishedSegment(request, newBoundary, contentRootSegment),\n                 queueCompletedSegment(newBoundary, contentRootSegment),\n-                0 === newBoundary.pendingTasks && 0 === newBoundary.status)\n+                0 === newBoundary.pendingTasks &&\n+                  0 === newBoundary.status &&\n+                  ((newBoundary.status = 1),\n+                  !(newBoundary.byteSize > request.progressiveChunkSize)))\n               ) {\n-                newBoundary.status = 1;\n                 0 === request.pendingRootTasks &&\n                   task.blockedPreamble &&\n                   preparePreamble(request);\n@@ -4593,18 +4647,18 @@ function renderElement(request, task, keyPath, type, props, ref) {\n                 (newBoundary.errorDigest = initialState),\n                 untrackBoundary(request, newBoundary);\n             } finally {\n-              (task.blockedBoundary = parentBoundary),\n-                (task.blockedPreamble = ref),\n+              (task.blockedBoundary = ref),\n+                (task.blockedPreamble = propName$33),\n                 (task.hoistableState = parentHoistableState),\n-                (task.blockedSegment = propName$33),\n+                (task.blockedSegment = propName),\n                 (task.keyPath = type);\n             }\n             task = createRenderTask(\n               request,\n               null,\n-              propName,\n+              fallback,\n               -1,\n-              parentBoundary,\n+              ref,\n               boundarySegment,\n               newBoundary.fallbackPreamble,\n               newBoundary.fallbackState,\n@@ -4626,9 +4680,8 @@ function renderElement(request, task, keyPath, type, props, ref) {\n       switch (type.$$typeof) {\n         case REACT_FORWARD_REF_TYPE:\n           if (\"ref\" in props)\n-            for (newBoundary in ((newProps = {}), props))\n-              \"ref\" !== newBoundary &&\n-                (newProps[newBoundary] = props[newBoundary]);\n+            for (fallback in ((newProps = {}), props))\n+              \"ref\" !== fallback && (newProps[fallback] = props[fallback]);\n           else newProps = props;\n           type = renderWithHooks(\n             request,\n@@ -4718,6 +4771,7 @@ function resumeNode(request, task, segmentId, node, childIndex) {\n       (task.blockedSegment = resumedSegment),\n       renderNode(request, task, node, childIndex),\n       (resumedSegment.status = 1),\n+      finishedSegment(request, blockedBoundary, resumedSegment),\n       null === blockedBoundary\n         ? (request.completedRootSegment = resumedSegment)\n         : (queueCompletedSegment(blockedBoundary, resumedSegment),\n@@ -5422,6 +5476,16 @@ function queueCompletedSegment(boundary, segment) {\n     1 === childSegment.status && queueCompletedSegment(boundary, childSegment);\n   } else boundary.completedSegments.push(segment);\n }\n+function finishedSegment(request, boundary, segment) {\n+  if (null !== byteLengthOfChunk) {\n+    segment = segment.chunks;\n+    for (var segmentByteSize = 0, i = 0; i < segment.length; i++)\n+      segmentByteSize += byteLengthOfChunk(segment[i]);\n+    null === boundary\n+      ? (request.byteSize += segmentByteSize)\n+      : (boundary.byteSize += segmentByteSize);\n+  }\n+}\n function finishedTask(request, boundary, segment) {\n   if (null === boundary) {\n     if (null !== segment && segment.parentFlushed) {\n@@ -5445,8 +5509,12 @@ function finishedTask(request, boundary, segment) {\n             boundary.parentFlushed &&\n               request.completedBoundaries.push(boundary),\n             1 === boundary.status &&\n-              (boundary.fallbackAbortableTasks.forEach(abortTaskSoft, request),\n-              boundary.fallbackAbortableTasks.clear(),\n+              (boundary.byteSize > request.progressiveChunkSize ||\n+                (boundary.fallbackAbortableTasks.forEach(\n+                  abortTaskSoft,\n+                  request\n+                ),\n+                boundary.fallbackAbortableTasks.clear()),\n               0 === request.pendingRootTasks &&\n                 null === request.trackedPostpones &&\n                 null !== boundary.contentPreamble &&\n@@ -5569,6 +5637,7 @@ function performWork(request$jscomp$2) {\n                 request$jscomp$1.chunks.push(textSeparator),\n               task.abortSet.delete(task),\n               (request$jscomp$1.status = 1),\n+              finishedSegment(request, task.blockedBoundary, request$jscomp$1),\n               finishedTask(request, task.blockedBoundary, request$jscomp$1);\n           } catch (thrownValue) {\n             resetHooksState();\n@@ -5846,6 +5915,7 @@ function flushCompletedBoundary(request, destination, boundary) {\n   var requiresStyleInsertion = request.stylesToHoist;\n   request.stylesToHoist = !1;\n   writeChunk(destination, request.startInlineScript);\n+  writeChunk(destination, endOfStartTag);\n   requiresStyleInsertion\n     ? 0 === (completedSegments.instructions & 2)\n       ? ((completedSegments.instructions |= 10),\n@@ -5893,6 +5963,7 @@ function flushPartiallyCompletedSegment(\n   boundary = request.resumableState;\n   request = request.renderState;\n   writeChunk(destination, request.startInlineScript);\n+  writeChunk(destination, endOfStartTag);\n   0 === (boundary.instructions & 1)\n     ? ((boundary.instructions |= 1),\n       writeChunk(destination, completeSegmentScript1Full))\n@@ -5918,7 +5989,8 @@ function flushCompletedQueues(request, destination) {\n         if (5 === completedRootSegment.status) return;\n         var completedPreambleSegments = request.completedPreambleSegments;\n         if (null === completedPreambleSegments) return;\n-        var renderState = request.renderState,\n+        var resumableState = request.resumableState,\n+          renderState = request.renderState,\n           preamble = renderState.preamble,\n           htmlChunks = preamble.htmlChunks,\n           headChunks = preamble.headChunks,\n@@ -5959,17 +6031,23 @@ function flushCompletedQueues(request, destination) {\n         renderState.scripts.clear();\n         renderState.bulkPreloads.forEach(flushResource, destination);\n         renderState.bulkPreloads.clear();\n+        if (htmlChunks || headChunks) {\n+          var shellId = \"\\u00ab\" + resumableState.idPrefix + \"R\\u00bb\";\n+          writeChunk(destination, blockingRenderChunkStart);\n+          writeChunk(destination, escapeTextForBrowser(shellId));\n+          writeChunk(destination, blockingRenderChunkEnd);\n+        }\n         var hoistableChunks = renderState.hoistableChunks;\n         for (i$jscomp$0 = 0; i$jscomp$0 < hoistableChunks.length; i$jscomp$0++)\n           writeChunk(destination, hoistableChunks[i$jscomp$0]);\n         for (\n-          renderState = hoistableChunks.length = 0;\n-          renderState < completedPreambleSegments.length;\n-          renderState++\n+          resumableState = hoistableChunks.length = 0;\n+          resumableState < completedPreambleSegments.length;\n+          resumableState++\n         ) {\n-          var segments = completedPreambleSegments[renderState];\n-          for (preamble = 0; preamble < segments.length; preamble++)\n-            flushSegment(request, destination, segments[preamble], null);\n+          var segments = completedPreambleSegments[resumableState];\n+          for (renderState = 0; renderState < segments.length; renderState++)\n+            flushSegment(request, destination, segments[renderState], null);\n         }\n         var preamble$jscomp$0 = request.renderState.preamble,\n           headChunks$jscomp$0 = preamble$jscomp$0.headChunks;\n@@ -5985,33 +6063,48 @@ function flushCompletedQueues(request, destination) {\n             writeChunk(destination, bodyChunks[completedPreambleSegments]);\n         flushSegment(request, destination, completedRootSegment, null);\n         request.completedRootSegment = null;\n-        writeBootstrap(destination, request.renderState);\n+        var resumableState$jscomp$0 = request.resumableState,\n+          renderState$jscomp$0 = request.renderState,\n+          preamble$jscomp$1 = renderState$jscomp$0.preamble;\n+        if (\n+          (preamble$jscomp$1.htmlChunks || preamble$jscomp$1.headChunks) &&\n+          0 === (resumableState$jscomp$0.instructions & 32)\n+        ) {\n+          var bootstrapChunks = renderState$jscomp$0.bootstrapChunks;\n+          bootstrapChunks.push(startChunkForTag(\"template\"));\n+          pushCompletedShellIdAttribute(\n+            bootstrapChunks,\n+            resumableState$jscomp$0\n+          );\n+          bootstrapChunks.push(endOfStartTag, endChunkForTag(\"template\"));\n+        }\n+        writeBootstrap(destination, renderState$jscomp$0);\n       }\n-      var renderState$jscomp$0 = request.renderState;\n+      var renderState$jscomp$1 = request.renderState;\n       completedRootSegment = 0;\n-      var viewportChunks$jscomp$0 = renderState$jscomp$0.viewportChunks;\n+      var viewportChunks$jscomp$0 = renderState$jscomp$1.viewportChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < viewportChunks$jscomp$0.length;\n         completedRootSegment++\n       )\n         writeChunk(destination, viewportChunks$jscomp$0[completedRootSegment]);\n       viewportChunks$jscomp$0.length = 0;\n-      renderState$jscomp$0.preconnects.forEach(flushResource, destination);\n-      renderState$jscomp$0.preconnects.clear();\n-      renderState$jscomp$0.fontPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.fontPreloads.clear();\n-      renderState$jscomp$0.highImagePreloads.forEach(\n+      renderState$jscomp$1.preconnects.forEach(flushResource, destination);\n+      renderState$jscomp$1.preconnects.clear();\n+      renderState$jscomp$1.fontPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.fontPreloads.clear();\n+      renderState$jscomp$1.highImagePreloads.forEach(\n         flushResource,\n         destination\n       );\n-      renderState$jscomp$0.highImagePreloads.clear();\n-      renderState$jscomp$0.styles.forEach(preloadLateStyles, destination);\n-      renderState$jscomp$0.scripts.forEach(flushResource, destination);\n-      renderState$jscomp$0.scripts.clear();\n-      renderState$jscomp$0.bulkPreloads.forEach(flushResource, destination);\n-      renderState$jscomp$0.bulkPreloads.clear();\n-      var hoistableChunks$jscomp$0 = renderState$jscomp$0.hoistableChunks;\n+      renderState$jscomp$1.highImagePreloads.clear();\n+      renderState$jscomp$1.styles.forEach(preloadLateStyles, destination);\n+      renderState$jscomp$1.scripts.forEach(flushResource, destination);\n+      renderState$jscomp$1.scripts.clear();\n+      renderState$jscomp$1.bulkPreloads.forEach(flushResource, destination);\n+      renderState$jscomp$1.bulkPreloads.clear();\n+      var hoistableChunks$jscomp$0 = renderState$jscomp$1.hoistableChunks;\n       for (\n         completedRootSegment = 0;\n         completedRootSegment < hoistableChunks$jscomp$0.length;\n@@ -6022,33 +6115,34 @@ function flushCompletedQueues(request, destination) {\n       var clientRenderedBoundaries = request.clientRenderedBoundaries;\n       for (i = 0; i < clientRenderedBoundaries.length; i++) {\n         var boundary = clientRenderedBoundaries[i];\n-        renderState$jscomp$0 = destination;\n-        var resumableState = request.resumableState,\n-          renderState$jscomp$1 = request.renderState,\n+        renderState$jscomp$1 = destination;\n+        var resumableState$jscomp$1 = request.resumableState,\n+          renderState$jscomp$2 = request.renderState,\n           id = boundary.rootSegmentID,\n           errorDigest = boundary.errorDigest;\n         writeChunk(\n-          renderState$jscomp$0,\n-          renderState$jscomp$1.startInlineScript\n+          renderState$jscomp$1,\n+          renderState$jscomp$2.startInlineScript\n         );\n-        0 === (resumableState.instructions & 4)\n-          ? ((resumableState.instructions |= 4),\n-            writeChunk(renderState$jscomp$0, clientRenderScript1Full))\n-          : writeChunk(renderState$jscomp$0, clientRenderScript1Partial);\n-        writeChunk(renderState$jscomp$0, renderState$jscomp$1.boundaryPrefix);\n-        writeChunk(renderState$jscomp$0, id.toString(16));\n-        writeChunk(renderState$jscomp$0, clientRenderScript1A);\n+        writeChunk(renderState$jscomp$1, endOfStartTag);\n+        0 === (resumableState$jscomp$1.instructions & 4)\n+          ? ((resumableState$jscomp$1.instructions |= 4),\n+            writeChunk(renderState$jscomp$1, clientRenderScript1Full))\n+          : writeChunk(renderState$jscomp$1, clientRenderScript1Partial);\n+        writeChunk(renderState$jscomp$1, renderState$jscomp$2.boundaryPrefix);\n+        writeChunk(renderState$jscomp$1, id.toString(16));\n+        writeChunk(renderState$jscomp$1, clientRenderScript1A);\n         errorDigest &&\n           (writeChunk(\n-            renderState$jscomp$0,\n+            renderState$jscomp$1,\n             clientRenderErrorScriptArgInterstitial\n           ),\n           writeChunk(\n-            renderState$jscomp$0,\n+            renderState$jscomp$1,\n             escapeJSStringsForInstructionScripts(errorDigest || \"\")\n           ));\n         var JSCompiler_inline_result = writeChunkAndReturn(\n-          renderState$jscomp$0,\n+          renderState$jscomp$1,\n           clientRenderScriptEnd\n         );\n         if (!JSCompiler_inline_result) {\n@@ -6210,11 +6304,11 @@ function abort(request, reason) {\n }\n function ensureCorrectIsomorphicReactVersion() {\n   var isomorphicReactPackageVersion = React.version;\n-  if (\"19.2.0-canary-197d6a04-20250424\" !== isomorphicReactPackageVersion)\n+  if (\"19.2.0-canary-5dc00d6b-20250428\" !== isomorphicReactPackageVersion)\n     throw Error(\n       'Incompatible React versions: The \"react\" and \"react-dom\" packages must have the exact same version. Instead got:\\n  - react:      ' +\n         (isomorphicReactPackageVersion +\n-          \"\\n  - react-dom:  19.2.0-canary-197d6a04-20250424\\nLearn more: https://react.dev/warnings/version-mismatch\")\n+          \"\\n  - react-dom:  19.2.0-canary-5dc00d6b-20250428\\nLearn more: https://react.dev/warnings/version-mismatch\")\n     );\n }\n ensureCorrectIsomorphicReactVersion();\n@@ -6363,4 +6457,4 @@ exports.renderToPipeableStream = function (children, options) {\n     }\n   };\n };\n-exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+exports.version = \"19.2.0-canary-5dc00d6b-20250428\";"
        },
        {
            "sha": "e3793123871d16d81dd9b1431cce4a3ae85144c2",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom.development.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -416,7 +416,7 @@\n     exports.useFormStatus = function () {\n       return resolveDispatcher().useHostTransitionStatus();\n     };\n-    exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+    exports.version = \"19.2.0-canary-5dc00d6b-20250428\";\n     \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n       \"function\" ===\n         typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "e97d5b2a39a8055d14332f1c5acdfee6ef3b31ed",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom.production.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -207,4 +207,4 @@ exports.useFormState = function (action, initialState, permalink) {\n exports.useFormStatus = function () {\n   return ReactSharedInternals.H.useHostTransitionStatus();\n };\n-exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+exports.version = \"19.2.0-canary-5dc00d6b-20250428\";"
        },
        {
            "sha": "688c6a2e17e0e1bbc6031c0e93ac00d569c32ca5",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom.react-server.development.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.react-server.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.react-server.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.react-server.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -336,5 +336,5 @@\n             }))\n           : Internals.d.m(href));\n     };\n-    exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+    exports.version = \"19.2.0-canary-5dc00d6b-20250428\";\n   })();"
        },
        {
            "sha": "bbba810a4cd28921e4208ff0e220f3c581ebef12",
            "filename": "packages/next/src/compiled/react-dom/cjs/react-dom.react-server.production.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.react-server.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.react-server.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fcjs%2Freact-dom.react-server.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -149,4 +149,4 @@ exports.preloadModule = function (href, options) {\n       });\n     } else Internals.d.m(href);\n };\n-exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+exports.version = \"19.2.0-canary-5dc00d6b-20250428\";"
        },
        {
            "sha": "1f8494f5c63dc76d79e37aa20b81d3d736d1ed6f",
            "filename": "packages/next/src/compiled/react-dom/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-dom%2Fpackage.json?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -67,10 +67,10 @@\n     \"./package.json\": \"./package.json\"\n   },\n   \"dependencies\": {\n-    \"scheduler\": \"0.27.0-canary-197d6a04-20250424\"\n+    \"scheduler\": \"0.27.0-canary-5dc00d6b-20250428\"\n   },\n   \"peerDependencies\": {\n-    \"react\": \"19.2.0-canary-197d6a04-20250424\"\n+    \"react\": \"19.2.0-canary-5dc00d6b-20250428\"\n   },\n   \"browser\": {\n     \"./server.js\": \"./server.browser.js\","
        },
        {
            "sha": "b7c0f310c3ecd98be04fc3184c7784b1d8ffff03",
            "filename": "packages/next/src/compiled/react-experimental/cjs/react.development.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -1326,7 +1326,7 @@\n     exports.useTransition = function () {\n       return resolveDispatcher().useTransition();\n     };\n-    exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+    exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";\n     \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n       \"function\" ===\n         typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "bd96db61c574940133772c64eb3059dff0cd947b",
            "filename": "packages/next/src/compiled/react-experimental/cjs/react.production.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -603,4 +603,4 @@ exports.useSyncExternalStore = function (\n exports.useTransition = function () {\n   return ReactSharedInternals.H.useTransition();\n };\n-exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";"
        },
        {
            "sha": "aecdc8b20745b86137a28a03f6e7b088251c508e",
            "filename": "packages/next/src/compiled/react-experimental/cjs/react.react-server.development.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.react-server.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.react-server.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.react-server.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -992,5 +992,5 @@\n     exports.useMemo = function (create, deps) {\n       return resolveDispatcher().useMemo(create, deps);\n     };\n-    exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+    exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";\n   })();"
        },
        {
            "sha": "4aae1f9bade691fe49f756a2f465d9e900b348b2",
            "filename": "packages/next/src/compiled/react-experimental/cjs/react.react-server.production.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.react-server.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.react-server.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-experimental%2Fcjs%2Freact.react-server.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -569,4 +569,4 @@ exports.useId = function () {\n exports.useMemo = function (create, deps) {\n   return ReactSharedInternals.H.useMemo(create, deps);\n };\n-exports.version = \"19.2.0-experimental-197d6a04-20250424\";\n+exports.version = \"19.2.0-experimental-5dc00d6b-20250428\";"
        },
        {
            "sha": "74b3dd0db1eb453cf52645f027f6d42a44c8fe6a",
            "filename": "packages/next/src/compiled/react-is/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-is%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-is%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-is%2Fpackage.json?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -1,6 +1,6 @@\n {\n   \"name\": \"react-is\",\n-  \"version\": \"19.2.0-canary-197d6a04-20250424\",\n+  \"version\": \"19.2.0-canary-5dc00d6b-20250428\",\n   \"description\": \"Brand checking of React Elements.\",\n   \"main\": \"index.js\",\n   \"sideEffects\": false,"
        },
        {
            "sha": "ccb8a3eb0daef41b3f4a67013f3233a2bbe2d2a6",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack-experimental/cjs/react-server-dom-turbopack-client.browser.development.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fcjs%2Freact-server-dom-turbopack-client.browser.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -2927,10 +2927,10 @@\n       return hook.checkDCE ? !0 : !1;\n     })({\n       bundleType: 1,\n-      version: \"19.2.0-experimental-197d6a04-20250424\",\n+      version: \"19.2.0-experimental-5dc00d6b-20250428\",\n       rendererPackageName: \"react-server-dom-turbopack\",\n       currentDispatcherRef: ReactSharedInternals,\n-      reconcilerVersion: \"19.2.0-experimental-197d6a04-20250424\",\n+      reconcilerVersion: \"19.2.0-experimental-5dc00d6b-20250428\",\n       getCurrentComponentInfo: function () {\n         return currentOwnerInDEV;\n       }"
        },
        {
            "sha": "b1504ca8fd3d182f305dd0ba71147d6706afee74",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack-experimental/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack-experimental%2Fpackage.json?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -48,7 +48,7 @@\n     \"neo-async\": \"^2.6.1\"\n   },\n   \"peerDependencies\": {\n-    \"react\": \"0.0.0-experimental-197d6a04-20250424\",\n-    \"react-dom\": \"0.0.0-experimental-197d6a04-20250424\"\n+    \"react\": \"0.0.0-experimental-5dc00d6b-20250428\",\n+    \"react-dom\": \"0.0.0-experimental-5dc00d6b-20250428\"\n   }\n }\n\\ No newline at end of file"
        },
        {
            "sha": "c4bb63a38556841e6936c8a963de7bf4ec784bb2",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack/cjs/react-server-dom-turbopack-client.browser.development.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fcjs%2Freact-server-dom-turbopack-client.browser.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -2678,10 +2678,10 @@\n       return hook.checkDCE ? !0 : !1;\n     })({\n       bundleType: 1,\n-      version: \"19.2.0-canary-197d6a04-20250424\",\n+      version: \"19.2.0-canary-5dc00d6b-20250428\",\n       rendererPackageName: \"react-server-dom-turbopack\",\n       currentDispatcherRef: ReactSharedInternals,\n-      reconcilerVersion: \"19.2.0-canary-197d6a04-20250424\",\n+      reconcilerVersion: \"19.2.0-canary-5dc00d6b-20250428\",\n       getCurrentComponentInfo: function () {\n         return currentOwnerInDEV;\n       }"
        },
        {
            "sha": "27664e81f9b5696d563921a7480e3a5031db79c3",
            "filename": "packages/next/src/compiled/react-server-dom-turbopack/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-turbopack%2Fpackage.json?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -48,7 +48,7 @@\n     \"neo-async\": \"^2.6.1\"\n   },\n   \"peerDependencies\": {\n-    \"react\": \"19.2.0-canary-197d6a04-20250424\",\n-    \"react-dom\": \"19.2.0-canary-197d6a04-20250424\"\n+    \"react\": \"19.2.0-canary-5dc00d6b-20250428\",\n+    \"react-dom\": \"19.2.0-canary-5dc00d6b-20250428\"\n   }\n }\n\\ No newline at end of file"
        },
        {
            "sha": "a2784b745cf237e2bf235dc2351945ae248b7a8b",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/cjs/react-server-dom-webpack-client.browser.development.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fcjs%2Freact-server-dom-webpack-client.browser.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -2942,10 +2942,10 @@\n       return hook.checkDCE ? !0 : !1;\n     })({\n       bundleType: 1,\n-      version: \"19.2.0-experimental-197d6a04-20250424\",\n+      version: \"19.2.0-experimental-5dc00d6b-20250428\",\n       rendererPackageName: \"react-server-dom-webpack\",\n       currentDispatcherRef: ReactSharedInternals,\n-      reconcilerVersion: \"19.2.0-experimental-197d6a04-20250424\",\n+      reconcilerVersion: \"19.2.0-experimental-5dc00d6b-20250428\",\n       getCurrentComponentInfo: function () {\n         return currentOwnerInDEV;\n       }"
        },
        {
            "sha": "c21f1a65f0f9a2803b9944bd5b167944322f6d5a",
            "filename": "packages/next/src/compiled/react-server-dom-webpack-experimental/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack-experimental%2Fpackage.json?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -64,8 +64,8 @@\n     \"webpack-sources\": \"^3.2.0\"\n   },\n   \"peerDependencies\": {\n-    \"react\": \"0.0.0-experimental-197d6a04-20250424\",\n-    \"react-dom\": \"0.0.0-experimental-197d6a04-20250424\",\n+    \"react\": \"0.0.0-experimental-5dc00d6b-20250428\",\n+    \"react-dom\": \"0.0.0-experimental-5dc00d6b-20250428\",\n     \"webpack\": \"^5.59.0\"\n   }\n }\n\\ No newline at end of file"
        },
        {
            "sha": "bd54d0c20f63466667598264cf0cbaed55dc0f68",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-client.browser.development.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.browser.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.browser.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fcjs%2Freact-server-dom-webpack-client.browser.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -2693,10 +2693,10 @@\n       return hook.checkDCE ? !0 : !1;\n     })({\n       bundleType: 1,\n-      version: \"19.2.0-canary-197d6a04-20250424\",\n+      version: \"19.2.0-canary-5dc00d6b-20250428\",\n       rendererPackageName: \"react-server-dom-webpack\",\n       currentDispatcherRef: ReactSharedInternals,\n-      reconcilerVersion: \"19.2.0-canary-197d6a04-20250424\",\n+      reconcilerVersion: \"19.2.0-canary-5dc00d6b-20250428\",\n       getCurrentComponentInfo: function () {\n         return currentOwnerInDEV;\n       }"
        },
        {
            "sha": "4b2e56dbe4b0618a182b88d50a720f88137fcd02",
            "filename": "packages/next/src/compiled/react-server-dom-webpack/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fpackage.json",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact-server-dom-webpack%2Fpackage.json?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -64,8 +64,8 @@\n     \"webpack-sources\": \"^3.2.0\"\n   },\n   \"peerDependencies\": {\n-    \"react\": \"19.2.0-canary-197d6a04-20250424\",\n-    \"react-dom\": \"19.2.0-canary-197d6a04-20250424\",\n+    \"react\": \"19.2.0-canary-5dc00d6b-20250428\",\n+    \"react-dom\": \"19.2.0-canary-5dc00d6b-20250428\",\n     \"webpack\": \"^5.59.0\"\n   }\n }\n\\ No newline at end of file"
        },
        {
            "sha": "28038fc4ae52d6fc28248afff88512eb89ca2f6d",
            "filename": "packages/next/src/compiled/react/cjs/react.development.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -1242,7 +1242,7 @@\n     exports.useTransition = function () {\n       return resolveDispatcher().useTransition();\n     };\n-    exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+    exports.version = \"19.2.0-canary-5dc00d6b-20250428\";\n     \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n       \"function\" ===\n         typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&"
        },
        {
            "sha": "f20ffe74179126a2dc6a0c51fab8286c57bce6ce",
            "filename": "packages/next/src/compiled/react/cjs/react.production.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -541,4 +541,4 @@ exports.useSyncExternalStore = function (\n exports.useTransition = function () {\n   return ReactSharedInternals.H.useTransition();\n };\n-exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+exports.version = \"19.2.0-canary-5dc00d6b-20250428\";"
        },
        {
            "sha": "ad6ff6124fae689d7e734bd811b25bb8d93fa778",
            "filename": "packages/next/src/compiled/react/cjs/react.react-server.development.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.react-server.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.react-server.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.react-server.development.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -811,5 +811,5 @@\n     exports.useMemo = function (create, deps) {\n       return resolveDispatcher().useMemo(create, deps);\n     };\n-    exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+    exports.version = \"19.2.0-canary-5dc00d6b-20250428\";\n   })();"
        },
        {
            "sha": "3437597bcfbc5d9fdf7eb22e77aa99519b3b02a2",
            "filename": "packages/next/src/compiled/react/cjs/react.react-server.production.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.react-server.production.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.react-server.production.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Freact%2Fcjs%2Freact.react-server.production.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -426,4 +426,4 @@ exports.useId = function () {\n exports.useMemo = function (create, deps) {\n   return ReactSharedInternals.H.useMemo(create, deps);\n };\n-exports.version = \"19.2.0-canary-197d6a04-20250424\";\n+exports.version = \"19.2.0-canary-5dc00d6b-20250428\";"
        },
        {
            "sha": "f7f6683ee32deaf931600011fdf974b8c06b5a78",
            "filename": "packages/next/src/compiled/unistore/unistore.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Funistore%2Funistore.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fcompiled%2Funistore%2Funistore.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fcompiled%2Funistore%2Funistore.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -1 +1 @@\n-(()=>{var t={124:t=>{function n(t,i){for(var _ in i)t[_]=i[_];return t}t.exports=function(t){var i=[];function u(t){for(var _=[],a=0;a<i.length;a++)i[a]===t?t=null:_.push(i[a]);i=_}function e(_,a,f){t=a?_:n(n({},t),_);for(var o=i,c=0;c<o.length;c++)o[c](t,f)}return t=t||{},{action:function(i){function r(t){e(t,!1,i)}return function(){for(var _=arguments,a=[t],f=0;f<arguments.length;f++)a.push(_[f]);var o=i.apply(this,a);if(null!=o)return o.then?o.then(r):r(o)}},setState:e,subscribe:function(t){return i.push(t),function(){u(t)}},unsubscribe:u,getState:function(){return t}}}}};var i={};function __nccwpck_require__(_){var a=i[_];if(a!==undefined){return a.exports}var f=i[_]={exports:{}};var o=true;try{t[_](f,f.exports,__nccwpck_require__);o=false}finally{if(o)delete i[_]}return f.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var _=__nccwpck_require__(124);module.exports=_})();\n\\ No newline at end of file\n+(()=>{var t={713:t=>{function n(t,i){for(var _ in i)t[_]=i[_];return t}t.exports=function(t){var i=[];function u(t){for(var _=[],a=0;a<i.length;a++)i[a]===t?t=null:_.push(i[a]);i=_}function e(_,a,f){t=a?_:n(n({},t),_);for(var o=i,c=0;c<o.length;c++)o[c](t,f)}return t=t||{},{action:function(i){function r(t){e(t,!1,i)}return function(){for(var _=arguments,a=[t],f=0;f<arguments.length;f++)a.push(_[f]);var o=i.apply(this,a);if(null!=o)return o.then?o.then(r):r(o)}},setState:e,subscribe:function(t){return i.push(t),function(){u(t)}},unsubscribe:u,getState:function(){return t}}}}};var i={};function __nccwpck_require__(_){var a=i[_];if(a!==undefined){return a.exports}var f=i[_]={exports:{}};var o=true;try{t[_](f,f.exports,__nccwpck_require__);o=false}finally{if(o)delete i[_]}return f.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var _=__nccwpck_require__(713);module.exports=_})();\n\\ No newline at end of file"
        },
        {
            "sha": "298912aee5f115eccab8861cfe41e6b390c3bfeb",
            "filename": "packages/next/src/export/routes/pages.ts",
            "status": "modified",
            "additions": 36,
            "deletions": 1,
            "changes": 37,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fexport%2Froutes%2Fpages.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fexport%2Froutes%2Fpages.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fexport%2Froutes%2Fpages.ts?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -138,7 +138,42 @@ export async function exportPagesPage(\n   ) => {\n     const validator = await getAmpValidatorInstance(validatorPath)\n     const result = validator.validateString(rawAmpHtml)\n-    const errors = result.errors.filter((e) => e.severity === 'ERROR')\n+    const errors = result.errors.filter((error) => {\n+      if (error.severity === 'ERROR') {\n+        // Unclear yet if these actually prevent the page from being indexed by the AMP cache.\n+        // These are coming from React so all we can do is ignore them for now.\n+\n+        // <link rel=\"expect\" blocking=\"render\" />\n+        // https://github.com/ampproject/amphtml/issues/40279\n+        if (\n+          error.code === 'DISALLOWED_ATTR' &&\n+          error.params[0] === 'blocking' &&\n+          error.params[1] === 'link'\n+        ) {\n+          return false\n+        }\n+        // <template> without type\n+        // https://github.com/ampproject/amphtml/issues/40280\n+        if (\n+          error.code === 'MANDATORY_ATTR_MISSING' &&\n+          error.params[0] === 'type' &&\n+          error.params[1] === 'template'\n+        ) {\n+          return false\n+        }\n+        // <template> without type\n+        // https://github.com/ampproject/amphtml/issues/40280\n+        if (\n+          error.code === 'MISSING_REQUIRED_EXTENSION' &&\n+          error.params[0] === 'template' &&\n+          error.params[1] === 'amp-mustache'\n+        ) {\n+          return false\n+        }\n+        return true\n+      }\n+      return false\n+    })\n     const warnings = result.errors.filter((e) => e.severity !== 'ERROR')\n \n     if (warnings.length || errors.length) {"
        },
        {
            "sha": "88e38b83114101399943697c9a19ea980a121501",
            "filename": "packages/next/src/server/dev/next-dev-server.ts",
            "status": "modified",
            "additions": 36,
            "deletions": 1,
            "changes": 37,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fnext-dev-server.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fnext-dev-server.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fnext-dev-server.ts?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -188,7 +188,42 @@ export default class DevServer extends Server {\n       ampValidation(\n         pathname,\n         result.errors\n-          .filter((e) => e.severity === 'ERROR')\n+          .filter((error) => {\n+            if (error.severity === 'ERROR') {\n+              // Unclear yet if these actually prevent the page from being indexed by the AMP cache.\n+              // These are coming from React so all we can do is ignore them for now.\n+\n+              // <link rel=\"expect\" blocking=\"render\" />\n+              // https://github.com/ampproject/amphtml/issues/40279\n+              if (\n+                error.code === 'DISALLOWED_ATTR' &&\n+                error.params[0] === 'blocking' &&\n+                error.params[1] === 'link'\n+              ) {\n+                return false\n+              }\n+              // <template> without type\n+              // https://github.com/ampproject/amphtml/issues/40280\n+              if (\n+                error.code === 'MANDATORY_ATTR_MISSING' &&\n+                error.params[0] === 'type' &&\n+                error.params[1] === 'template'\n+              ) {\n+                return false\n+              }\n+              // <template> without type\n+              // https://github.com/ampproject/amphtml/issues/40280\n+              if (\n+                error.code === 'MISSING_REQUIRED_EXTENSION' &&\n+                error.params[0] === 'template' &&\n+                error.params[1] === 'amp-mustache'\n+              ) {\n+                return false\n+              }\n+              return true\n+            }\n+            return false\n+          })\n           .filter((e) => this._filterAmpDevelopmentScript(html, e)),\n         result.errors.filter((e) => e.severity !== 'ERROR')\n       )"
        },
        {
            "sha": "5dc7429572b21189f6bf8150bc4221ee08fb7ae0",
            "filename": "patches/@ampproject__toolbox-optimizer@2.8.3.patch",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/patches%2F%40ampproject__toolbox-optimizer%402.8.3.patch",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/patches%2F%40ampproject__toolbox-optimizer%402.8.3.patch",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/patches%2F%40ampproject__toolbox-optimizer%402.8.3.patch?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -0,0 +1,17 @@\n+diff --git a/lib/transformers/OptimizeAmpBind.js b/lib/transformers/OptimizeAmpBind.js\n+index 2d17ce26676853230ec933d8e489bb3633116af4..38a4ac6746d385cdb9292773e575829e708c8c0e 100644\n+--- a/lib/transformers/OptimizeAmpBind.js\n++++ b/lib/transformers/OptimizeAmpBind.js\n+@@ -48,7 +48,11 @@ class OptimizeAmpBind {\n+     for (let node = html; node !== null; node = nextNode(node)) {\n+       if (isTemplate(node)) {\n+         node = skipNodeAndChildren(node);\n+-        continue;\n++        if (node === null) {\n++          break;\n++        } else {\n++          continue;\n++        }\n+       }\n+ \n+       const {attribs} = node;"
        },
        {
            "sha": "c7543d9679fab20561c221d518aa84d3e838e8dc",
            "filename": "pnpm-lock.yaml",
            "status": "modified",
            "additions": 228,
            "deletions": 225,
            "changes": 453,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/pnpm-lock.yaml",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/pnpm-lock.yaml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/pnpm-lock.yaml?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -16,12 +16,15 @@ overrides:\n   '@types/react': ^19.1.1\n   '@types/react-dom': 19.1.2\n   jest-snapshot: 30.0.0-alpha.6\n-  react: 19.2.0-canary-197d6a04-20250424\n-  react-dom: 19.2.0-canary-197d6a04-20250424\n-  react-is: 19.2.0-canary-197d6a04-20250424\n-  scheduler: 0.27.0-canary-197d6a04-20250424\n+  react: 19.2.0-canary-5dc00d6b-20250428\n+  react-dom: 19.2.0-canary-5dc00d6b-20250428\n+  react-is: 19.2.0-canary-5dc00d6b-20250428\n+  scheduler: 0.27.0-canary-5dc00d6b-20250428\n \n patchedDependencies:\n+  '@ampproject/toolbox-optimizer@2.8.3':\n+    hash: baeiwbdq3sqmjnnh2lznmpb5bu\n+    path: patches/@ampproject__toolbox-optimizer@2.8.3.patch\n   stacktrace-parser@0.1.10:\n     hash: misknddihoqkqinipod62zbcj4\n     path: patches/stacktrace-parser@0.1.10.patch\n@@ -71,7 +74,7 @@ importers:\n         version: 11.11.0\n       '@emotion/react':\n         specifier: 11.11.1\n-        version: 11.11.1(@types/react@19.1.1)(react@19.2.0-canary-197d6a04-20250424)\n+        version: 11.11.1(@types/react@19.1.1)(react@19.2.0-canary-5dc00d6b-20250428)\n       '@fullhuman/postcss-purgecss':\n         specifier: 1.3.0\n         version: 1.3.0\n@@ -83,7 +86,7 @@ importers:\n         version: 2.2.1(webpack@5.98.0(@swc/core@1.9.3(@swc/helpers@0.5.15)))\n       '@mdx-js/react':\n         specifier: 2.2.1\n-        version: 2.2.1(react@19.2.0-canary-197d6a04-20250424)\n+        version: 2.2.1(react@19.2.0-canary-5dc00d6b-20250428)\n       '@next/bundle-analyzer':\n         specifier: workspace:*\n         version: link:packages/next-bundle-analyzer\n@@ -149,7 +152,7 @@ importers:\n         version: 6.1.2(@jest/globals@29.7.0)(@types/jest@29.5.5)(jest@29.7.0(@types/node@20.17.6)(babel-plugin-macros@3.1.0))(vitest@3.0.4(@types/node@20.17.6)(sass@1.54.0)(tsx@4.19.2))\n       '@testing-library/react':\n         specifier: ^15.0.5\n-        version: 15.0.7(@types/react@19.1.1)(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)\n+        version: 15.0.7(@types/react@19.1.1)(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)\n       '@types/busboy':\n         specifier: 1.5.3\n         version: 1.5.3\n@@ -469,44 +472,44 @@ importers:\n         specifier: 0.3.0\n         version: 0.3.0\n       react:\n-        specifier: 19.2.0-canary-197d6a04-20250424\n-        version: 19.2.0-canary-197d6a04-20250424\n+        specifier: 19.2.0-canary-5dc00d6b-20250428\n+        version: 19.2.0-canary-5dc00d6b-20250428\n       react-builtin:\n-        specifier: npm:react@19.2.0-canary-197d6a04-20250424\n-        version: react@19.2.0-canary-197d6a04-20250424\n+        specifier: npm:react@19.2.0-canary-5dc00d6b-20250428\n+        version: react@19.2.0-canary-5dc00d6b-20250428\n       react-dom:\n-        specifier: 19.2.0-canary-197d6a04-20250424\n-        version: 19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424)\n+        specifier: 19.2.0-canary-5dc00d6b-20250428\n+        version: 19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428)\n       react-dom-builtin:\n-        specifier: npm:react-dom@19.2.0-canary-197d6a04-20250424\n-        version: react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424)\n+        specifier: npm:react-dom@19.2.0-canary-5dc00d6b-20250428\n+        version: react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428)\n       react-dom-experimental-builtin:\n-        specifier: npm:react-dom@0.0.0-experimental-197d6a04-20250424\n-        version: react-dom@0.0.0-experimental-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424)\n+        specifier: npm:react-dom@0.0.0-experimental-5dc00d6b-20250428\n+        version: react-dom@0.0.0-experimental-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428)\n       react-experimental-builtin:\n-        specifier: npm:react@0.0.0-experimental-197d6a04-20250424\n-        version: react@0.0.0-experimental-197d6a04-20250424\n+        specifier: npm:react@0.0.0-experimental-5dc00d6b-20250428\n+        version: react@0.0.0-experimental-5dc00d6b-20250428\n       react-is-builtin:\n-        specifier: npm:react-is@19.2.0-canary-197d6a04-20250424\n-        version: react-is@19.2.0-canary-197d6a04-20250424\n+        specifier: npm:react-is@19.2.0-canary-5dc00d6b-20250428\n+        version: react-is@19.2.0-canary-5dc00d6b-20250428\n       react-server-dom-turbopack:\n-        specifier: 19.2.0-canary-197d6a04-20250424\n-        version: 19.2.0-canary-197d6a04-20250424(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)\n+        specifier: 19.2.0-canary-5dc00d6b-20250428\n+        version: 19.2.0-canary-5dc00d6b-20250428(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)\n       react-server-dom-turbopack-experimental:\n-        specifier: npm:react-server-dom-turbopack@0.0.0-experimental-197d6a04-20250424\n-        version: react-server-dom-turbopack@0.0.0-experimental-197d6a04-20250424(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)\n+        specifier: npm:react-server-dom-turbopack@0.0.0-experimental-5dc00d6b-20250428\n+        version: react-server-dom-turbopack@0.0.0-experimental-5dc00d6b-20250428(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)\n       react-server-dom-webpack:\n-        specifier: 19.2.0-canary-197d6a04-20250424\n-        version: 19.2.0-canary-197d6a04-20250424(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(webpack@5.98.0(@swc/core@1.9.3(@swc/helpers@0.5.15)))\n+        specifier: 19.2.0-canary-5dc00d6b-20250428\n+        version: 19.2.0-canary-5dc00d6b-20250428(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(webpack@5.98.0(@swc/core@1.9.3(@swc/helpers@0.5.15)))\n       react-server-dom-webpack-experimental:\n-        specifier: npm:react-server-dom-webpack@0.0.0-experimental-197d6a04-20250424\n-        version: react-server-dom-webpack@0.0.0-experimental-197d6a04-20250424(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(webpack@5.98.0(@swc/core@1.9.3(@swc/helpers@0.5.15)))\n+        specifier: npm:react-server-dom-webpack@0.0.0-experimental-5dc00d6b-20250428\n+        version: react-server-dom-webpack@0.0.0-experimental-5dc00d6b-20250428(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(webpack@5.98.0(@swc/core@1.9.3(@swc/helpers@0.5.15)))\n       react-ssr-prepass:\n         specifier: 1.0.8\n-        version: 1.0.8(react-is@19.2.0-canary-c44e4a25-20250409)(react@19.2.0-canary-197d6a04-20250424)\n+        version: 1.0.8(react-is@19.2.0-canary-c44e4a25-20250409)(react@19.2.0-canary-5dc00d6b-20250428)\n       react-virtualized:\n         specifier: 9.22.3\n-        version: 9.22.3(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)\n+        version: 9.22.3(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)\n       relay-compiler:\n         specifier: 13.0.2\n         version: 13.0.2\n@@ -529,11 +532,11 @@ importers:\n         specifier: 0.12.2\n         version: 0.12.2\n       scheduler-builtin:\n-        specifier: npm:scheduler@0.27.0-canary-197d6a04-20250424\n-        version: scheduler@0.27.0-canary-197d6a04-20250424\n+        specifier: npm:scheduler@0.27.0-canary-5dc00d6b-20250428\n+        version: scheduler@0.27.0-canary-5dc00d6b-20250428\n       scheduler-experimental-builtin:\n-        specifier: npm:scheduler@0.0.0-experimental-197d6a04-20250424\n-        version: scheduler@0.0.0-experimental-197d6a04-20250424\n+        specifier: npm:scheduler@0.0.0-experimental-5dc00d6b-20250428\n+        version: scheduler@0.0.0-experimental-5dc00d6b-20250428\n       seedrandom:\n         specifier: 3.0.5\n         version: 3.0.5\n@@ -548,13 +551,13 @@ importers:\n         version: 6.0.0\n       styled-jsx:\n         specifier: 5.1.6\n-        version: 5.1.6(@babel/core@7.22.5)(babel-plugin-macros@3.1.0)(react@19.2.0-canary-197d6a04-20250424)\n+        version: 5.1.6(@babel/core@7.22.5)(babel-plugin-macros@3.1.0)(react@19.2.0-canary-5dc00d6b-20250428)\n       styled-jsx-plugin-postcss:\n         specifier: 3.0.2\n         version: 3.0.2\n       swr:\n         specifier: ^2.2.4\n-        version: 2.2.4(react@19.2.0-canary-197d6a04-20250424)\n+        version: 2.2.4(react@19.2.0-canary-5dc00d6b-20250428)\n       tailwindcss:\n         specifier: 3.2.7\n         version: 3.2.7(postcss@8.4.31)\n@@ -899,25 +902,25 @@ importers:\n         specifier: 8.4.31\n         version: 8.4.31\n       react:\n-        specifier: 19.2.0-canary-197d6a04-20250424\n-        version: 19.2.0-canary-197d6a04-20250424\n+        specifier: 19.2.0-canary-5dc00d6b-20250428\n+        version: 19.2.0-canary-5dc00d6b-20250428\n       react-dom:\n-        specifier: 19.2.0-canary-197d6a04-20250424\n-        version: 19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424)\n+        specifier: 19.2.0-canary-5dc00d6b-20250428\n+        version: 19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428)\n       sass:\n         specifier: ^1.3.0\n         version: 1.77.8\n       styled-jsx:\n         specifier: 5.1.6\n-        version: 5.1.6(@babel/core@7.22.5)(babel-plugin-macros@3.1.0)(react@19.2.0-canary-197d6a04-20250424)\n+        version: 5.1.6(@babel/core@7.22.5)(babel-plugin-macros@3.1.0)(react@19.2.0-canary-5dc00d6b-20250428)\n     optionalDependencies:\n       sharp:\n         specifier: ^0.34.1\n         version: 0.34.1\n     devDependencies:\n       '@ampproject/toolbox-optimizer':\n         specifier: 2.8.3\n-        version: 2.8.3\n+        version: 2.8.3(patch_hash=baeiwbdq3sqmjnnh2lznmpb5bu)\n       '@babel/code-frame':\n         specifier: 7.22.5\n         version: 7.22.5\n@@ -1040,13 +1043,13 @@ importers:\n         version: 1.0.5(@swc/helpers@0.5.15)(webpack@5.98.0(@swc/core@1.9.3(@swc/helpers@0.5.15))(esbuild@0.24.2))\n       '@storybook/blocks':\n         specifier: 8.6.0\n-        version: 8.6.0(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(storybook@8.6.0(prettier@3.3.3))\n+        version: 8.6.0(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(storybook@8.6.0(prettier@3.3.3))\n       '@storybook/react':\n         specifier: 8.6.0\n-        version: 8.6.0(@storybook/test@8.6.0(storybook@8.6.0(prettier@3.3.3)))(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)\n+        version: 8.6.0(@storybook/test@8.6.0(storybook@8.6.0(prettier@3.3.3)))(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)\n       '@storybook/react-webpack5':\n         specifier: 8.6.0\n-        version: 8.6.0(@rspack/core@1.3.4(@swc/helpers@0.5.15))(@storybook/test@8.6.0(storybook@8.6.0(prettier@3.3.3)))(@swc/core@1.9.3(@swc/helpers@0.5.15))(esbuild@0.24.2)(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)\n+        version: 8.6.0(@rspack/core@1.3.4(@swc/helpers@0.5.15))(@storybook/test@8.6.0(storybook@8.6.0(prettier@3.3.3)))(@swc/core@1.9.3(@swc/helpers@0.5.15))(esbuild@0.24.2)(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)\n       '@storybook/test':\n         specifier: 8.6.0\n         version: 8.6.0(storybook@8.6.0(prettier@3.3.3))\n@@ -1523,7 +1526,7 @@ importers:\n         version: 1.0.35\n       unistore:\n         specifier: 3.4.1\n-        version: 3.4.1(react@19.2.0-canary-197d6a04-20250424)\n+        version: 3.4.1(react@19.2.0-canary-5dc00d6b-20250428)\n       util:\n         specifier: 0.12.4\n         version: 0.12.4\n@@ -1696,8 +1699,8 @@ importers:\n   packages/third-parties:\n     dependencies:\n       react:\n-        specifier: 19.2.0-canary-197d6a04-20250424\n-        version: 19.2.0-canary-197d6a04-20250424\n+        specifier: 19.2.0-canary-5dc00d6b-20250428\n+        version: 19.2.0-canary-5dc00d6b-20250428\n       third-party-capital:\n         specifier: 1.0.20\n         version: 1.0.20\n@@ -1760,14 +1763,14 @@ importers:\n         specifier: 29.5.0\n         version: 29.5.0\n       react:\n-        specifier: 19.2.0-canary-197d6a04-20250424\n-        version: 19.2.0-canary-197d6a04-20250424\n+        specifier: 19.2.0-canary-5dc00d6b-20250428\n+        version: 19.2.0-canary-5dc00d6b-20250428\n       react-test-renderer:\n         specifier: 18.2.0\n-        version: 18.2.0(react@19.2.0-canary-197d6a04-20250424)\n+        version: 18.2.0(react@19.2.0-canary-5dc00d6b-20250428)\n       styled-jsx:\n         specifier: ^5.1.2\n-        version: 5.1.6(@babel/core@7.22.5)(babel-plugin-macros@3.1.0)(react@19.2.0-canary-197d6a04-20250424)\n+        version: 5.1.6(@babel/core@7.22.5)(babel-plugin-macros@3.1.0)(react@19.2.0-canary-5dc00d6b-20250428)\n \n   turbopack/packages/devlow-bench:\n     dependencies:\n@@ -3497,7 +3500,7 @@ packages:\n     resolution: {integrity: sha512-5mlW1DquU5HaxjLkfkGN1GA/fvVGdyHURRiX/0FHl2cfIfRxSOfmxEH5YS43edp0OldZrZ+dkBKbngxcNCdZvA==}\n     peerDependencies:\n       '@types/react': '*'\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n     peerDependenciesMeta:\n       '@types/react':\n         optional: true\n@@ -3514,7 +3517,7 @@ packages:\n   '@emotion/use-insertion-effect-with-fallbacks@1.0.1':\n     resolution: {integrity: sha512-jT/qyKZ9rzLErtrjGgdkMBn2OP8wl0G3sQlBb3YPryvKHsjvINUhVaPFfP+fpBcOkmrVOVEEHQFJ7nbj2TH2gw==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n   '@emotion/utils@1.2.1':\n     resolution: {integrity: sha512-Y2tGf3I+XVnajdItskUCn6LX+VUDmP6lTL4fcqsXAv43dnlbZiuW4MWQW38rW/BVWSE7Q/7+XQocmpnRYILUmg==}\n@@ -4169,14 +4172,14 @@ packages:\n   '@floating-ui/react-dom@2.1.0':\n     resolution: {integrity: sha512-lNzj5EQmEKn5FFKc04+zasr09h/uX8RtJRNj5gUXsSQIXHVWTVh+hVAg1vOMCexkX8EgvemMvIFpQfkosnVNyA==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428\n \n   '@floating-ui/react@0.26.16':\n     resolution: {integrity: sha512-HEf43zxZNAI/E781QIVpYSF3K2VH4TTYZpqecjdsFkjsaU1EbaWcM++kw0HXFffj7gDUcBFevX8s0rQGQpxkow==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428\n \n   '@floating-ui/utils@0.2.2':\n     resolution: {integrity: sha512-J4yDIIthosAsRZ5CPYP/jQvUAQtlZTTD/4suA08/FEnlxqW3sKS9iAhgsa9VYLZ6vDHn/ixJgIqRQPotoBjxIw==}\n@@ -4869,13 +4872,13 @@ packages:\n     resolution: {integrity: sha512-l9ypojKN3PjwO1CSLIsqxi7mA25+7w+xc71Q+JuCCREI0tuGwkZsKbIOpuTATIJOjPh8ycLiW7QxX1LYsRTq6w==}\n     peerDependencies:\n       '@mantine/hooks': 7.10.1\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428\n \n   '@mantine/hooks@7.11.2':\n     resolution: {integrity: sha512-jhyVe/sbDEG2U8rr2lMecUPgQxcfr5hh9HazqGfkS7ZRIMDO7uJ947yAcTMGGkp5Lxtt5TBFt1Cb6tiB2/1agg==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n   '@mapbox/node-pre-gyp@1.0.5':\n     resolution: {integrity: sha512-4srsKPXWlIxp5Vbqz5uLfBN+du2fJChBoYn/f2h991WLdk7jUvcSk/McVLSv/X+xQIPI8eGD5GjrnygdyHnhPA==}\n@@ -4892,13 +4895,13 @@ packages:\n   '@mdx-js/react@2.2.1':\n     resolution: {integrity: sha512-YdXcMcEnqZhzql98RNrqYo9cEhTTesBiCclEtoiQUbJwx87q9453GTapYU6kJ8ZZ2ek1Vp25SiAXEFy5O/eAPw==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n   '@mdx-js/react@3.1.0':\n     resolution: {integrity: sha512-QjHtSaoameoalGnKDT3FoIl4+9RwyTmo9ZJGBdLOks/YOiWHoRDI3PUwEzOE7kEmGcV3AFcp9K6dYu9rEuKLAQ==}\n     peerDependencies:\n       '@types/react': ^19.1.1\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n   '@module-federation/error-codes@0.11.2':\n     resolution: {integrity: sha512-ik1Qnn0I+WyEdprTck9WGlH41vGsVdUg8cfO+ZM02qOb2cZm5Vu3SlxGAobj6g7uAj0g8yINnd7h7Dci40BxQA==}\n@@ -5583,8 +5586,8 @@ packages:\n   '@storybook/blocks@8.6.0':\n     resolution: {integrity: sha512-3PNxlB5Ooj8CIhttbDxeV6kW7ui+2GEdTngtqhnsUHVjzeTKpilsk2lviOeUzqlyq5FDK+rhpZ3L3DJ9pDvioA==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428\n       storybook: ^8.6.0\n     peerDependenciesMeta:\n       react:\n@@ -5634,8 +5637,8 @@ packages:\n     resolution: {integrity: sha512-Nz/UzeYQdUZUhacrPyfkiiysSjydyjgg/p0P9HxB4p/WaJUUjMAcaoaLgy3EXx61zZJ3iD36WPuDkZs5QYrA0A==}\n     engines: {node: '>=14.0.0'}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428\n \n   '@storybook/instrumenter@8.6.0':\n     resolution: {integrity: sha512-eEY/Hfa3Vj5Nv4vHRHlSqjoyW6oAKNK3rKIXfL/eawQwb7rKhzijDLG5YBH44Hh7dEPIqUp0LEdgpyIY7GXezg==}\n@@ -5651,8 +5654,8 @@ packages:\n     resolution: {integrity: sha512-04T86VG0UJtiozgZkTR5sY1qM3E0Rgwqwllvyy7kFFdkV+Sv/VsPjW9sC38s9C8FtCYRL8pJZz81ey3oylpIMA==}\n     engines: {node: '>=18.0.0'}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428\n       storybook: ^8.6.0\n       typescript: '*'\n     peerDependenciesMeta:\n@@ -5673,16 +5676,16 @@ packages:\n   '@storybook/react-dom-shim@8.6.0':\n     resolution: {integrity: sha512-5Y+vMHhcx0xnaNsLQMbkmjc3zkDn/fGBNsiLH2e4POvW3ZQvOxjoyxAsEQaKwLtFgsdCFSd2tR89F6ItYrA2JQ==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428\n       storybook: ^8.6.0\n \n   '@storybook/react-webpack5@8.6.0':\n     resolution: {integrity: sha512-2L9CYDPn1OL0B8K5EU/Wpo9Slg8f0vkYPaPioQnmcK3Q4SJR4JAuDVWHUtNdxhaPOkHIy887Tfrf6BEC/blMaQ==}\n     engines: {node: '>=18.0.0'}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428\n       storybook: ^8.6.0\n       typescript: '>= 4.2.x'\n     peerDependenciesMeta:\n@@ -5694,8 +5697,8 @@ packages:\n     engines: {node: '>=18.0.0'}\n     peerDependencies:\n       '@storybook/test': 8.6.0\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428\n       storybook: ^8.6.0\n       typescript: '>= 4.2.x'\n     peerDependenciesMeta:\n@@ -5931,8 +5934,8 @@ packages:\n     engines: {node: '>=18'}\n     peerDependencies:\n       '@types/react': ^19.1.1\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428\n     peerDependenciesMeta:\n       '@types/react':\n         optional: true\n@@ -12040,7 +12043,7 @@ packages:\n   lucide-react@0.383.0:\n     resolution: {integrity: sha512-13xlG0CQCJtzjSQYwwJ3WRqMHtRj3EXmLlorrARt7y+IHnxUCp3XyFNL1DfaGySWxHObDvnu1u1dV+0VMKHUSg==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n   lz-string@1.5.0:\n     resolution: {integrity: sha512-h5bgJWpxJNswbU7qCrV0tIKQCaS3blPDrqKWx+QxzuzL1zGUzij9XCWLrSLsJPu5t+eWA/ycetzYAO5IOMcWAQ==}\n@@ -14532,23 +14535,23 @@ packages:\n     resolution: {integrity: sha512-APPU8HB2uZnpl6Vt/+0AFoVYgSRtfiP6FLrZgPPTDmqSb2R4qZRbgd0A3VzIFxDt5e+Fozjx79WjLWnF69DK8g==}\n     engines: {node: '>=16.14.0'}\n \n-  react-dom@0.0.0-experimental-197d6a04-20250424:\n-    resolution: {integrity: sha512-k8W9K9/sQlkydX+gVPgmFVNVqhU5YwtWAtCshWZYpLbmMWp6Za3T0FaFYeGRBjsgpqh+4fRPtQG1MNU+gvrN8w==}\n+  react-dom@0.0.0-experimental-5dc00d6b-20250428:\n+    resolution: {integrity: sha512-/Sxgt0iuXFXdQbMsn6dmN4HOOmLVfyn7HA61ZognWZV20Y7rxSWHZVQpnWsxC0YMzDuEO3qJ0k2qDzCtV7tRtg==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n-  react-dom@19.2.0-canary-197d6a04-20250424:\n-    resolution: {integrity: sha512-BYaLsQ48FuIHpk1O9iKHUfM0RFZqjdl+F/zPts8TV5qse2XuC7G+4wmrchp65onfyTVSN5VVT2kt/e4E7WeFfg==}\n+  react-dom@19.2.0-canary-5dc00d6b-20250428:\n+    resolution: {integrity: sha512-SOtOvU43YvSdhXUz0nGT6hC+i3UFWcP6VwOlUFtzn/qWSz8ALbePVOROaB+yOEBdRGMRkAi4e7Rzed0TztqgdA==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n   react-dom@19.2.0-canary-c44e4a25-20250409:\n     resolution: {integrity: sha512-H3k6JpW39XBogZz6ptprQ4MRwG83bRONkb+6DzHQChVLY+TWiGNBKJxnJN6VzRoqsBNZFwSu8WdhK5vLtj4h3A==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n-  react-is@19.2.0-canary-197d6a04-20250424:\n-    resolution: {integrity: sha512-x+54yxx7JdF3JAd1MdwWRxZxW1XmAmLtdAnP0ZvF4vnsbDGSxYVkG8Bp3RlaD/oEuvPq9xBUMdDub2ybxCDPyA==}\n+  react-is@19.2.0-canary-5dc00d6b-20250428:\n+    resolution: {integrity: sha512-emTtElnIPwGUu6rigtjdBbZ3P7r3T5gZzYWjn9AyCnb4olzzJ8AMcl41RSKxhDxR9fu6amyJGgXW3nxetZI7bg==}\n \n   react-is@19.2.0-canary-c44e4a25-20250409:\n     resolution: {integrity: sha512-vF0L6mbn4Gx4TU7srrazt/6aBhLIRWttvNlh6GGI9nsqgvl1RrPKfDuybxjDP/8IZfuMj7/D5CkwwyZUa3i1AQ==}\n@@ -14559,8 +14562,8 @@ packages:\n   react-number-format@5.4.0:\n     resolution: {integrity: sha512-NWdICrqLhI7rAS8yUeLVd6Wr4cN7UjJ9IBTS0f/a9i7UB4x4Ti70kGnksBtZ7o4Z7YRbvCMMR/jQmkoOBa/4fg==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428\n \n   react-refresh@0.12.0:\n     resolution: {integrity: sha512-suLIhrU2IHKL5JEKR/fAwJv7bbeq4kJ+pJopf77jHwuR+HmJS/HbrPIGsTBUVfw7tXPOmYv7UJ7PCaN49e8x4A==}\n@@ -14571,7 +14574,7 @@ packages:\n     engines: {node: '>=10'}\n     peerDependencies:\n       '@types/react': ^19.1.1\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n     peerDependenciesMeta:\n       '@types/react':\n         optional: true\n@@ -14581,85 +14584,85 @@ packages:\n     engines: {node: '>=10'}\n     peerDependencies:\n       '@types/react': ^19.1.1\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n     peerDependenciesMeta:\n       '@types/react':\n         optional: true\n \n-  react-server-dom-turbopack@0.0.0-experimental-197d6a04-20250424:\n-    resolution: {integrity: sha512-xZ9QjkCh091QL3v45Z6H7e6FBxI42IF7RARtqPBi5mCgGQnBnuluDht9xKz9oZ16yuFZ5ZDRs1so7yCFycRT+g==}\n+  react-server-dom-turbopack@0.0.0-experimental-5dc00d6b-20250428:\n+    resolution: {integrity: sha512-yvIShYPPg9oq2o6Dl0dhfLXl2ATHyTN9UvSWQmKsB/6kRyr1EqDjpJJ4EAksekebzvrSq7TPV0Zx+2cgyDOfeA==}\n     engines: {node: '>=0.10.0'}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428\n \n-  react-server-dom-turbopack@19.2.0-canary-197d6a04-20250424:\n-    resolution: {integrity: sha512-4cIr5QCc68nbx1CbQ211rt9X/jXV9CoAqxb3Ci1n2pI6cSvZ1eKPYMG15yG1XYGeeDHGgQ3Y+DQD7L9nKh7iiQ==}\n+  react-server-dom-turbopack@19.2.0-canary-5dc00d6b-20250428:\n+    resolution: {integrity: sha512-KdFXTylLTj/dDo9JtWM7vsewqB8RBCW9jG2Mo2BesaD8403z9/nVXTujur4cCmcTsEP08avMNt3ISBb3eiQj/w==}\n     engines: {node: '>=0.10.0'}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428\n \n-  react-server-dom-webpack@0.0.0-experimental-197d6a04-20250424:\n-    resolution: {integrity: sha512-tV5Ahgrvekpenx5B81LfOrgykqSm7W3tGcUQTsykR9K6KBPprCMOAvMlVwDDkCHBcLz1Sx3oUS4PLc9DPgdqAw==}\n+  react-server-dom-webpack@0.0.0-experimental-5dc00d6b-20250428:\n+    resolution: {integrity: sha512-CzNcs6DI5u/17egm3nTJzYnrvCkNn69IhkCbJwtBk84LA2lKwDGXOBvoFVy2uowtSZ32VrNTXeCqivM6K2tVJQ==}\n     engines: {node: '>=0.10.0'}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428\n       webpack: 5.98.0\n \n-  react-server-dom-webpack@19.2.0-canary-197d6a04-20250424:\n-    resolution: {integrity: sha512-VQ2dzHpN/A+x8AfgvMKFqZDG1nXff+Rjhu8n+CMHtj5bgYW5BGmECcEs4nFK3gLxYFjBOiIqFTJ+6dp6TIstSg==}\n+  react-server-dom-webpack@19.2.0-canary-5dc00d6b-20250428:\n+    resolution: {integrity: sha512-jPIQSsfIaUfQ+mpUkefussucKEIf2cNtjED5O0g2/nnDF5IEUBdiqouTg0qizQ8rPE3Ou2Jz7veItw7am46yMQ==}\n     engines: {node: '>=0.10.0'}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428\n       webpack: 5.98.0\n \n   react-shallow-renderer@16.15.0:\n     resolution: {integrity: sha512-oScf2FqQ9LFVQgA73vr86xl2NaOIX73rh+YFqcOp68CWj56tSfgtGKrEbyhCj0rSijyG9M1CYprTh39fBi5hzA==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n   react-ssr-prepass@1.0.8:\n     resolution: {integrity: sha512-O0gfRA1SaK+9ITKxqfnXsej2jF+OHGP/+GxD4unROQaM/0/UczGF9fuF+wTboxaQoKdIf4FvS3h/OigWh704VA==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-is: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-is: 19.2.0-canary-5dc00d6b-20250428\n \n   react-style-singleton@2.2.1:\n     resolution: {integrity: sha512-ZWj0fHEMyWkHzKYUr2Bs/4zU6XLmq9HsgBURm7g5pAVfyn49DgUiNgY2d4lXRlYSiCif9YBGpQleewkcqddc7g==}\n     engines: {node: '>=10'}\n     peerDependencies:\n       '@types/react': ^19.1.1\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n     peerDependenciesMeta:\n       '@types/react':\n         optional: true\n \n   react-test-renderer@18.2.0:\n     resolution: {integrity: sha512-JWD+aQ0lh2gvh4NM3bBM42Kx+XybOxCpgYK7F8ugAlpaTSnWsX+39Z4XkOykGZAHrjwwTZT3x3KxswVWxHPUqA==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n   react-textarea-autosize@8.5.3:\n     resolution: {integrity: sha512-XT1024o2pqCuZSuBt9FwHlaDeNtVrtCXu0Rnz88t1jUGheCLa3PhjE1GH8Ctm2axEtvdCl5SUHYschyQ0L5QHQ==}\n     engines: {node: '>=10'}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n   react-virtualized@9.22.3:\n     resolution: {integrity: sha512-MKovKMxWTcwPSxE1kK1HcheQTWfuCxAuBoSTf2gwyMM21NdX/PXUhnoP8Uc5dRKd+nKm8v41R36OellhdCpkrw==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428\n \n-  react@0.0.0-experimental-197d6a04-20250424:\n-    resolution: {integrity: sha512-2BWhl33tYx2nVLahXumIvAmyMKQOuXKRj/DjV1gnBTRT31PV7ttMeOUDtR1Pwt648rI4ooCKyMV4wqxZotyOAA==}\n+  react@0.0.0-experimental-5dc00d6b-20250428:\n+    resolution: {integrity: sha512-c3DFDgKOPNYy7jBts+atZP3KTSAMbMeumNF/xdQVnAF95nR2ZUyOH/2IKQWWPJsz3DS6bQ7fNngTkk8CW6h8uQ==}\n     engines: {node: '>=0.10.0'}\n \n-  react@19.2.0-canary-197d6a04-20250424:\n-    resolution: {integrity: sha512-jsgJ0AeYmPCWLy98JevhVVE9CuzVBid7nGbpMvHqSwcokQ7/4uohShBOfhSz0tuzNyzrVuzgLycElnJemwy5cA==}\n+  react@19.2.0-canary-5dc00d6b-20250428:\n+    resolution: {integrity: sha512-LQXqlpHM/RPurTOvD5lTuztC150/s8+W67mp06HZ/Rc2suebLZCCEq19kwZirCm/5FJptOpDCpJOWvbteSBl6A==}\n     engines: {node: '>=0.10.0'}\n \n   react@19.2.0-canary-c44e4a25-20250409:\n@@ -15213,11 +15216,11 @@ packages:\n     resolution: {integrity: sha512-xAg7SOnEhrm5zI3puOOKyy1OMcMlIJZYNJY7xLBwSze0UjhPLnWfj2GF2EpT0jmzaJKIWKHLsaSSajf35bcYnA==}\n     engines: {node: '>=v12.22.7'}\n \n-  scheduler@0.0.0-experimental-197d6a04-20250424:\n-    resolution: {integrity: sha512-kfVmZoI1SPFz8g24coy9aJTc/tdPjLHhs34QT5HW0+jJl2Kg5pjL1tlzM9aztfxLORQ3vS4Okg5FejbB3EVBYg==}\n+  scheduler@0.0.0-experimental-5dc00d6b-20250428:\n+    resolution: {integrity: sha512-7t01jhBrd0An+QJS0BdmweYm1z/BjCTG8BsVetUG/YYc3RNalZXdGLiwyz9k+0fpHZ8W1/oMprELuEymB+e4lg==}\n \n-  scheduler@0.27.0-canary-197d6a04-20250424:\n-    resolution: {integrity: sha512-WuI6u663Zk98rv3u5SwAw8WOorwhe/mnmbUUu/i3cVZygvJK89p4X7AXJtj8N0G99OPHM+8+bRBHwF9hsu7HUg==}\n+  scheduler@0.27.0-canary-5dc00d6b-20250428:\n+    resolution: {integrity: sha512-qmB+n8VUpWyhWb/funAvemdJNTDLO9ftxk64oiPmP5mXCLEjfE9tbunpe/AAAiOqx+p0UzwhcFSt0bd6HxSDZg==}\n \n   schema-utils@2.7.1:\n     resolution: {integrity: sha512-SHiNtMOUGWBQJwzISiVYKu82GiV4QYGePp3odlY1tuKO7gPtphAT5R/py0fA6xtbgLL/RvtJZnU9b8s0F1q0Xg==}\n@@ -15860,7 +15863,7 @@ packages:\n     peerDependencies:\n       '@babel/core': '*'\n       babel-plugin-macros: '*'\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n     peerDependenciesMeta:\n       '@babel/core':\n         optional: true\n@@ -15944,7 +15947,7 @@ packages:\n   swr@2.2.4:\n     resolution: {integrity: sha512-njiZ/4RiIhoOlAaLYDqwz5qH/KZXVilRLvomrx83HjzCWTfa+InyfAjv05PSFxnmLzZkNO9ZfvgoqzAaEI4sGQ==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n   symbol-observable@1.0.1:\n     resolution: {integrity: sha512-Kb3PrPYz4HanVF1LVGuAdW6LoVgIwjUYJGzFe7NDrBLCN4lsV/5J0MFurV+ygS4bRVwrCEt2c7MQ1R2a72oJDw==}\n@@ -16744,21 +16747,21 @@ packages:\n     engines: {node: '>=10'}\n     peerDependencies:\n       '@types/react': ^19.1.1\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n     peerDependenciesMeta:\n       '@types/react':\n         optional: true\n \n   use-composed-ref@1.3.0:\n     resolution: {integrity: sha512-GLMG0Jc/jiKov/3Ulid1wbv3r54K9HlMW29IWcDFPEqFkSO2nS0MuefWgMJpeHQ9YJeXDL3ZUF+P3jdXlZX/cQ==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n   use-isomorphic-layout-effect@1.1.2:\n     resolution: {integrity: sha512-49L8yCO3iGT/ZF9QttjwLF/ZD9Iwto5LnH5LmEdk/6cFmXddqi2ulF0edxTwjj+7mqvpVVGQWvbXZdn32wRSHA==}\n     peerDependencies:\n       '@types/react': '*'\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n     peerDependenciesMeta:\n       '@types/react':\n         optional: true\n@@ -16767,7 +16770,7 @@ packages:\n     resolution: {integrity: sha512-xA+AVm/Wlg3e2P/JiItTziwS7FK92LWrDB0p+hgXloIMuVCeJJ8v6f0eeHyPZaJrM+usM1FkFfbNCrJGs8A/zw==}\n     peerDependencies:\n       '@types/react': '*'\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n     peerDependenciesMeta:\n       '@types/react':\n         optional: true\n@@ -16777,15 +16780,15 @@ packages:\n     engines: {node: '>=10'}\n     peerDependencies:\n       '@types/react': ^19.1.1\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n     peerDependenciesMeta:\n       '@types/react':\n         optional: true\n \n   use-sync-external-store@1.2.0:\n     resolution: {integrity: sha512-eEgnFxGQ1Ife9bzYs6VLi8/4X6CObHMw9Qr9tPY43iKwsPw8xE8+EFsf/2cFZ5S3esXgpWgtSCtLNS41F+sKPA==}\n     peerDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n   util-deprecate@1.0.2:\n     resolution: {integrity: sha512-EPD5q1uXyFxJpCrLnCc1nHnq3gOa6DZBocAIiI2TaSCA7VCJ1UJDMagCzIkXNsUYfD1daK//LTEQ8xiIbrHtcw==}\n@@ -17451,7 +17454,7 @@ snapshots:\n       cross-fetch: 3.1.2\n       lru-cache: 6.0.0\n \n-  '@ampproject/toolbox-optimizer@2.8.3':\n+  '@ampproject/toolbox-optimizer@2.8.3(patch_hash=baeiwbdq3sqmjnnh2lznmpb5bu)':\n     dependencies:\n       '@ampproject/toolbox-core': 2.8.0\n       '@ampproject/toolbox-runtime-version': 2.8.0\n@@ -19574,17 +19577,17 @@ snapshots:\n \n   '@emotion/memoize@0.8.1': {}\n \n-  '@emotion/react@11.11.1(@types/react@19.1.1)(react@19.2.0-canary-197d6a04-20250424)':\n+  '@emotion/react@11.11.1(@types/react@19.1.1)(react@19.2.0-canary-5dc00d6b-20250428)':\n     dependencies:\n       '@babel/runtime': 7.22.5\n       '@emotion/babel-plugin': 11.11.0\n       '@emotion/cache': 11.11.0\n       '@emotion/serialize': 1.1.2\n-      '@emotion/use-insertion-effect-with-fallbacks': 1.0.1(react@19.2.0-canary-197d6a04-20250424)\n+      '@emotion/use-insertion-effect-with-fallbacks': 1.0.1(react@19.2.0-canary-5dc00d6b-20250428)\n       '@emotion/utils': 1.2.1\n       '@emotion/weak-memoize': 0.3.1\n       hoist-non-react-statics: 3.3.2\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n     optionalDependencies:\n       '@types/react': 19.1.1\n     transitivePeerDependencies:\n@@ -19602,9 +19605,9 @@ snapshots:\n \n   '@emotion/unitless@0.8.1': {}\n \n-  '@emotion/use-insertion-effect-with-fallbacks@1.0.1(react@19.2.0-canary-197d6a04-20250424)':\n+  '@emotion/use-insertion-effect-with-fallbacks@1.0.1(react@19.2.0-canary-5dc00d6b-20250428)':\n     dependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n   '@emotion/utils@1.2.1': {}\n \n@@ -21232,23 +21235,23 @@ snapshots:\n     transitivePeerDependencies:\n       - supports-color\n \n-  '@mdx-js/react@2.2.1(react@19.2.0-canary-197d6a04-20250424)':\n+  '@mdx-js/react@2.2.1(react@19.2.0-canary-5dc00d6b-20250428)':\n     dependencies:\n       '@types/mdx': 2.0.3\n       '@types/react': 19.1.1\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n   '@mdx-js/react@2.2.1(react@19.2.0-canary-c44e4a25-20250409)':\n     dependencies:\n       '@types/mdx': 2.0.3\n       '@types/react': 19.1.1\n       react: 19.2.0-canary-c44e4a25-20250409\n \n-  '@mdx-js/react@3.1.0(@types/react@19.1.1)(react@19.2.0-canary-197d6a04-20250424)':\n+  '@mdx-js/react@3.1.0(@types/react@19.1.1)(react@19.2.0-canary-5dc00d6b-20250428)':\n     dependencies:\n       '@types/mdx': 2.0.3\n       '@types/react': 19.1.1\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n   '@module-federation/error-codes@0.11.2': {}\n \n@@ -21973,12 +21976,12 @@ snapshots:\n \n   '@storybook/addon-docs@8.6.0(@types/react@19.1.1)(storybook@8.6.0(prettier@3.3.3))':\n     dependencies:\n-      '@mdx-js/react': 3.1.0(@types/react@19.1.1)(react@19.2.0-canary-197d6a04-20250424)\n-      '@storybook/blocks': 8.6.0(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(storybook@8.6.0(prettier@3.3.3))\n+      '@mdx-js/react': 3.1.0(@types/react@19.1.1)(react@19.2.0-canary-5dc00d6b-20250428)\n+      '@storybook/blocks': 8.6.0(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(storybook@8.6.0(prettier@3.3.3))\n       '@storybook/csf-plugin': 8.6.0(storybook@8.6.0(prettier@3.3.3))\n-      '@storybook/react-dom-shim': 8.6.0(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(storybook@8.6.0(prettier@3.3.3))\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424)\n+      '@storybook/react-dom-shim': 8.6.0(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(storybook@8.6.0(prettier@3.3.3))\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428)\n       storybook: 8.6.0(prettier@3.3.3)\n       ts-dedent: 2.2.0\n     transitivePeerDependencies:\n@@ -22043,14 +22046,14 @@ snapshots:\n       - '@swc/helpers'\n       - webpack\n \n-  '@storybook/blocks@8.6.0(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(storybook@8.6.0(prettier@3.3.3))':\n+  '@storybook/blocks@8.6.0(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(storybook@8.6.0(prettier@3.3.3))':\n     dependencies:\n-      '@storybook/icons': 1.3.0(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)\n+      '@storybook/icons': 1.3.0(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)\n       storybook: 8.6.0(prettier@3.3.3)\n       ts-dedent: 2.2.0\n     optionalDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424)\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428)\n \n   '@storybook/builder-webpack5@8.6.0(@rspack/core@1.3.4(@swc/helpers@0.5.15))(@swc/core@1.9.3(@swc/helpers@0.5.15))(esbuild@0.24.2)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)':\n     dependencies:\n@@ -22129,10 +22132,10 @@ snapshots:\n \n   '@storybook/global@5.0.0': {}\n \n-  '@storybook/icons@1.3.0(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)':\n+  '@storybook/icons@1.3.0(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)':\n     dependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424)\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428)\n \n   '@storybook/instrumenter@8.6.0(storybook@8.6.0(prettier@3.3.3))':\n     dependencies:\n@@ -22144,17 +22147,17 @@ snapshots:\n     dependencies:\n       storybook: 8.6.0(prettier@3.3.3)\n \n-  '@storybook/preset-react-webpack@8.6.0(@storybook/test@8.6.0(storybook@8.6.0(prettier@3.3.3)))(@swc/core@1.9.3(@swc/helpers@0.5.15))(esbuild@0.24.2)(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)':\n+  '@storybook/preset-react-webpack@8.6.0(@storybook/test@8.6.0(storybook@8.6.0(prettier@3.3.3)))(@swc/core@1.9.3(@swc/helpers@0.5.15))(esbuild@0.24.2)(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)':\n     dependencies:\n       '@storybook/core-webpack': 8.6.0(storybook@8.6.0(prettier@3.3.3))\n-      '@storybook/react': 8.6.0(@storybook/test@8.6.0(storybook@8.6.0(prettier@3.3.3)))(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)\n+      '@storybook/react': 8.6.0(@storybook/test@8.6.0(storybook@8.6.0(prettier@3.3.3)))(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)\n       '@storybook/react-docgen-typescript-plugin': 1.0.6--canary.9.0c3f3b7.0(typescript@5.8.2)(webpack@5.98.0(@swc/core@1.9.3(@swc/helpers@0.5.15))(esbuild@0.24.2))\n       '@types/semver': 7.5.6\n       find-up: 5.0.0\n       magic-string: 0.30.17\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n       react-docgen: 7.1.0\n-      react-dom: 19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424)\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428)\n       resolve: 1.22.8\n       semver: 7.6.3\n       storybook: 8.6.0(prettier@3.3.3)\n@@ -22188,19 +22191,19 @@ snapshots:\n     transitivePeerDependencies:\n       - supports-color\n \n-  '@storybook/react-dom-shim@8.6.0(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(storybook@8.6.0(prettier@3.3.3))':\n+  '@storybook/react-dom-shim@8.6.0(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(storybook@8.6.0(prettier@3.3.3))':\n     dependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424)\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428)\n       storybook: 8.6.0(prettier@3.3.3)\n \n-  '@storybook/react-webpack5@8.6.0(@rspack/core@1.3.4(@swc/helpers@0.5.15))(@storybook/test@8.6.0(storybook@8.6.0(prettier@3.3.3)))(@swc/core@1.9.3(@swc/helpers@0.5.15))(esbuild@0.24.2)(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)':\n+  '@storybook/react-webpack5@8.6.0(@rspack/core@1.3.4(@swc/helpers@0.5.15))(@storybook/test@8.6.0(storybook@8.6.0(prettier@3.3.3)))(@swc/core@1.9.3(@swc/helpers@0.5.15))(esbuild@0.24.2)(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)':\n     dependencies:\n       '@storybook/builder-webpack5': 8.6.0(@rspack/core@1.3.4(@swc/helpers@0.5.15))(@swc/core@1.9.3(@swc/helpers@0.5.15))(esbuild@0.24.2)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)\n-      '@storybook/preset-react-webpack': 8.6.0(@storybook/test@8.6.0(storybook@8.6.0(prettier@3.3.3)))(@swc/core@1.9.3(@swc/helpers@0.5.15))(esbuild@0.24.2)(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)\n-      '@storybook/react': 8.6.0(@storybook/test@8.6.0(storybook@8.6.0(prettier@3.3.3)))(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424)\n+      '@storybook/preset-react-webpack': 8.6.0(@storybook/test@8.6.0(storybook@8.6.0(prettier@3.3.3)))(@swc/core@1.9.3(@swc/helpers@0.5.15))(esbuild@0.24.2)(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)\n+      '@storybook/react': 8.6.0(@storybook/test@8.6.0(storybook@8.6.0(prettier@3.3.3)))(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428)\n       storybook: 8.6.0(prettier@3.3.3)\n     optionalDependencies:\n       typescript: 5.8.2\n@@ -22213,16 +22216,16 @@ snapshots:\n       - uglify-js\n       - webpack-cli\n \n-  '@storybook/react@8.6.0(@storybook/test@8.6.0(storybook@8.6.0(prettier@3.3.3)))(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)':\n+  '@storybook/react@8.6.0(@storybook/test@8.6.0(storybook@8.6.0(prettier@3.3.3)))(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(storybook@8.6.0(prettier@3.3.3))(typescript@5.8.2)':\n     dependencies:\n       '@storybook/components': 8.6.0(storybook@8.6.0(prettier@3.3.3))\n       '@storybook/global': 5.0.0\n       '@storybook/manager-api': 8.6.0(storybook@8.6.0(prettier@3.3.3))\n       '@storybook/preview-api': 8.6.0(storybook@8.6.0(prettier@3.3.3))\n-      '@storybook/react-dom-shim': 8.6.0(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(storybook@8.6.0(prettier@3.3.3))\n+      '@storybook/react-dom-shim': 8.6.0(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(storybook@8.6.0(prettier@3.3.3))\n       '@storybook/theming': 8.6.0(storybook@8.6.0(prettier@3.3.3))\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424)\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428)\n       storybook: 8.6.0(prettier@3.3.3)\n     optionalDependencies:\n       '@storybook/test': 8.6.0(storybook@8.6.0(prettier@3.3.3))\n@@ -22496,13 +22499,13 @@ snapshots:\n       lodash: 4.17.21\n       redent: 3.0.0\n \n-  '@testing-library/react@15.0.7(@types/react@19.1.1)(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)':\n+  '@testing-library/react@15.0.7(@types/react@19.1.1)(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)':\n     dependencies:\n       '@babel/runtime': 7.22.5\n       '@testing-library/dom': 10.1.0\n       '@types/react-dom': 19.1.2(@types/react@19.1.1)\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424)\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428)\n     optionalDependencies:\n       '@types/react': 19.1.1\n \n@@ -28242,7 +28245,7 @@ snapshots:\n \n   hoist-non-react-statics@3.3.2:\n     dependencies:\n-      react-is: 19.2.0-canary-197d6a04-20250424\n+      react-is: 19.2.0-canary-5dc00d6b-20250428\n \n   homedir-polyfill@1.0.3:\n     dependencies:\n@@ -33147,25 +33150,25 @@ snapshots:\n     dependencies:\n       ansi-regex: 5.0.1\n       ansi-styles: 5.2.0\n-      react-is: 19.2.0-canary-197d6a04-20250424\n+      react-is: 19.2.0-canary-5dc00d6b-20250428\n \n   pretty-format@29.5.0:\n     dependencies:\n       '@jest/schemas': 29.4.3\n       ansi-styles: 5.2.0\n-      react-is: 19.2.0-canary-197d6a04-20250424\n+      react-is: 19.2.0-canary-5dc00d6b-20250428\n \n   pretty-format@29.7.0:\n     dependencies:\n       '@jest/schemas': 29.6.3\n       ansi-styles: 5.2.0\n-      react-is: 19.2.0-canary-197d6a04-20250424\n+      react-is: 19.2.0-canary-5dc00d6b-20250428\n \n   pretty-format@30.0.0-alpha.6:\n     dependencies:\n       '@jest/schemas': 30.0.0-alpha.6\n       ansi-styles: 5.2.0\n-      react-is: 19.2.0-canary-197d6a04-20250424\n+      react-is: 19.2.0-canary-5dc00d6b-20250428\n \n   pretty-ms@7.0.0:\n     dependencies:\n@@ -33228,7 +33231,7 @@ snapshots:\n     dependencies:\n       loose-envify: 1.4.0\n       object-assign: 4.1.1\n-      react-is: 19.2.0-canary-197d6a04-20250424\n+      react-is: 19.2.0-canary-5dc00d6b-20250428\n \n   property-information@5.6.0:\n     dependencies:\n@@ -33435,22 +33438,22 @@ snapshots:\n     transitivePeerDependencies:\n       - supports-color\n \n-  react-dom@0.0.0-experimental-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424):\n+  react-dom@0.0.0-experimental-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428):\n     dependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      scheduler: 0.27.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      scheduler: 0.27.0-canary-5dc00d6b-20250428\n \n-  react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424):\n+  react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428):\n     dependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      scheduler: 0.27.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      scheduler: 0.27.0-canary-5dc00d6b-20250428\n \n   react-dom@19.2.0-canary-c44e4a25-20250409(react@19.2.0-canary-c44e4a25-20250409):\n     dependencies:\n       react: 19.2.0-canary-c44e4a25-20250409\n-      scheduler: 0.27.0-canary-197d6a04-20250424\n+      scheduler: 0.27.0-canary-5dc00d6b-20250428\n \n-  react-is@19.2.0-canary-197d6a04-20250424: {}\n+  react-is@19.2.0-canary-5dc00d6b-20250428: {}\n \n   react-is@19.2.0-canary-c44e4a25-20250409: {}\n \n@@ -33483,48 +33486,48 @@ snapshots:\n     optionalDependencies:\n       '@types/react': 19.1.1\n \n-  react-server-dom-turbopack@0.0.0-experimental-197d6a04-20250424(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424):\n+  react-server-dom-turbopack@0.0.0-experimental-5dc00d6b-20250428(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428):\n     dependencies:\n       acorn-loose: 8.3.0\n       neo-async: 2.6.1\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424)\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428)\n \n-  react-server-dom-turbopack@19.2.0-canary-197d6a04-20250424(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424):\n+  react-server-dom-turbopack@19.2.0-canary-5dc00d6b-20250428(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428):\n     dependencies:\n       acorn-loose: 8.3.0\n       neo-async: 2.6.1\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424)\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428)\n \n-  react-server-dom-webpack@0.0.0-experimental-197d6a04-20250424(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(webpack@5.98.0(@swc/core@1.9.3(@swc/helpers@0.5.15))):\n+  react-server-dom-webpack@0.0.0-experimental-5dc00d6b-20250428(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(webpack@5.98.0(@swc/core@1.9.3(@swc/helpers@0.5.15))):\n     dependencies:\n       acorn-loose: 8.3.0\n       neo-async: 2.6.1\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424)\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428)\n       webpack: 5.98.0(@swc/core@1.9.3(@swc/helpers@0.5.15))\n       webpack-sources: 3.2.3(patch_hash=jbynf5dc46ambamq3wuyho6hkq)\n \n-  react-server-dom-webpack@19.2.0-canary-197d6a04-20250424(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424)(webpack@5.98.0(@swc/core@1.9.3(@swc/helpers@0.5.15))):\n+  react-server-dom-webpack@19.2.0-canary-5dc00d6b-20250428(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428)(webpack@5.98.0(@swc/core@1.9.3(@swc/helpers@0.5.15))):\n     dependencies:\n       acorn-loose: 8.3.0\n       neo-async: 2.6.1\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424)\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428)\n       webpack: 5.98.0(@swc/core@1.9.3(@swc/helpers@0.5.15))\n       webpack-sources: 3.2.3(patch_hash=jbynf5dc46ambamq3wuyho6hkq)\n \n-  react-shallow-renderer@16.15.0(react@19.2.0-canary-197d6a04-20250424):\n+  react-shallow-renderer@16.15.0(react@19.2.0-canary-5dc00d6b-20250428):\n     dependencies:\n       object-assign: 4.1.1\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-is: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-is: 19.2.0-canary-5dc00d6b-20250428\n \n-  react-ssr-prepass@1.0.8(react-is@19.2.0-canary-c44e4a25-20250409)(react@19.2.0-canary-197d6a04-20250424):\n+  react-ssr-prepass@1.0.8(react-is@19.2.0-canary-c44e4a25-20250409)(react@19.2.0-canary-5dc00d6b-20250428):\n     dependencies:\n       object-is: 1.0.2\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n       react-is: 19.2.0-canary-c44e4a25-20250409\n \n   react-style-singleton@2.2.1(@types/react@19.1.1)(react@19.2.0-canary-c44e4a25-20250409):\n@@ -33536,12 +33539,12 @@ snapshots:\n     optionalDependencies:\n       '@types/react': 19.1.1\n \n-  react-test-renderer@18.2.0(react@19.2.0-canary-197d6a04-20250424):\n+  react-test-renderer@18.2.0(react@19.2.0-canary-5dc00d6b-20250428):\n     dependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-is: 19.2.0-canary-197d6a04-20250424\n-      react-shallow-renderer: 16.15.0(react@19.2.0-canary-197d6a04-20250424)\n-      scheduler: 0.27.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-is: 19.2.0-canary-5dc00d6b-20250428\n+      react-shallow-renderer: 16.15.0(react@19.2.0-canary-5dc00d6b-20250428)\n+      scheduler: 0.27.0-canary-5dc00d6b-20250428\n \n   react-textarea-autosize@8.5.3(@types/react@19.1.1)(react@19.2.0-canary-c44e4a25-20250409):\n     dependencies:\n@@ -33552,20 +33555,20 @@ snapshots:\n     transitivePeerDependencies:\n       - '@types/react'\n \n-  react-virtualized@9.22.3(react-dom@19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424))(react@19.2.0-canary-197d6a04-20250424):\n+  react-virtualized@9.22.3(react-dom@19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428))(react@19.2.0-canary-5dc00d6b-20250428):\n     dependencies:\n       '@babel/runtime': 7.22.5\n       clsx: 1.1.1\n       dom-helpers: 5.2.1\n       loose-envify: 1.4.0\n       prop-types: 15.8.1\n-      react: 19.2.0-canary-197d6a04-20250424\n-      react-dom: 19.2.0-canary-197d6a04-20250424(react@19.2.0-canary-197d6a04-20250424)\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      react-dom: 19.2.0-canary-5dc00d6b-20250428(react@19.2.0-canary-5dc00d6b-20250428)\n       react-lifecycles-compat: 3.0.4\n \n-  react@0.0.0-experimental-197d6a04-20250424: {}\n+  react@0.0.0-experimental-5dc00d6b-20250428: {}\n \n-  react@19.2.0-canary-197d6a04-20250424: {}\n+  react@19.2.0-canary-5dc00d6b-20250428: {}\n \n   react@19.2.0-canary-c44e4a25-20250409: {}\n \n@@ -34333,9 +34336,9 @@ snapshots:\n     dependencies:\n       xmlchars: 2.2.0\n \n-  scheduler@0.0.0-experimental-197d6a04-20250424: {}\n+  scheduler@0.0.0-experimental-5dc00d6b-20250428: {}\n \n-  scheduler@0.27.0-canary-197d6a04-20250424: {}\n+  scheduler@0.27.0-canary-5dc00d6b-20250428: {}\n \n   schema-utils@2.7.1:\n     dependencies:\n@@ -35097,10 +35100,10 @@ snapshots:\n       postcss: 7.0.32\n       postcss-load-plugins: 2.3.0\n \n-  styled-jsx@5.1.6(@babel/core@7.22.5)(babel-plugin-macros@3.1.0)(react@19.2.0-canary-197d6a04-20250424):\n+  styled-jsx@5.1.6(@babel/core@7.22.5)(babel-plugin-macros@3.1.0)(react@19.2.0-canary-5dc00d6b-20250428):\n     dependencies:\n       client-only: 0.0.1\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n     optionalDependencies:\n       '@babel/core': 7.22.5\n       babel-plugin-macros: 3.1.0\n@@ -35196,11 +35199,11 @@ snapshots:\n       '@swc/counter': 0.1.3\n       webpack: 5.98.0(@swc/core@1.9.3(@swc/helpers@0.5.15))(esbuild@0.24.2)\n \n-  swr@2.2.4(react@19.2.0-canary-197d6a04-20250424):\n+  swr@2.2.4(react@19.2.0-canary-5dc00d6b-20250428):\n     dependencies:\n       client-only: 0.0.1\n-      react: 19.2.0-canary-197d6a04-20250424\n-      use-sync-external-store: 1.2.0(react@19.2.0-canary-197d6a04-20250424)\n+      react: 19.2.0-canary-5dc00d6b-20250428\n+      use-sync-external-store: 1.2.0(react@19.2.0-canary-5dc00d6b-20250428)\n \n   symbol-observable@1.0.1: {}\n \n@@ -36002,9 +36005,9 @@ snapshots:\n       unist-util-is: 6.0.0\n       unist-util-visit-parents: 6.0.1\n \n-  unistore@3.4.1(react@19.2.0-canary-197d6a04-20250424):\n+  unistore@3.4.1(react@19.2.0-canary-5dc00d6b-20250428):\n     optionalDependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n   universal-github-app-jwt@1.1.1:\n     dependencies:\n@@ -36130,9 +36133,9 @@ snapshots:\n     optionalDependencies:\n       '@types/react': 19.1.1\n \n-  use-sync-external-store@1.2.0(react@19.2.0-canary-197d6a04-20250424):\n+  use-sync-external-store@1.2.0(react@19.2.0-canary-5dc00d6b-20250428):\n     dependencies:\n-      react: 19.2.0-canary-197d6a04-20250424\n+      react: 19.2.0-canary-5dc00d6b-20250428\n \n   util-deprecate@1.0.2: {}\n "
        },
        {
            "sha": "a6442592f5a41deabbaab1f57fb4b97a44416bfe",
            "filename": "test/integration/css-minify/test/index.test.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/test%2Fintegration%2Fcss-minify%2Ftest%2Findex.test.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/test%2Fintegration%2Fcss-minify%2Ftest%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fintegration%2Fcss-minify%2Ftest%2Findex.test.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -18,7 +18,7 @@ function runTests() {\n   it('should minify correctly by removing whitespace', async () => {\n     const html = await renderViaHTTP(appPort, '/')\n     const $ = cheerio.load(html)\n-    const href = $('link').attr('href')\n+    const href = $('link[rel=\"preload\"]').attr('href')\n     const css = await renderViaHTTP(appPort, href)\n     if (process.env.IS_TURBOPACK_TEST) {\n       expect(css).toContain("
        },
        {
            "sha": "4e90fb682cfe32893587b49a6a372d222b3f44db",
            "filename": "test/lib/amp-test-utils.js",
            "status": "modified",
            "additions": 42,
            "deletions": 10,
            "changes": 52,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/test%2Flib%2Famp-test-utils.js",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/test%2Flib%2Famp-test-utils.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Flib%2Famp-test-utils.js?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -5,18 +5,50 @@ export async function validateAMP(/** @type {string} */ html) {\n   const validatorPath = getBundledAmpValidatorFilepath()\n   const validator = await getAmpValidatorInstance(validatorPath)\n   const result = validator.validateString(html)\n-  if (result.status !== 'PASS') {\n-    for (let ii = 0; ii < result.errors.length; ii++) {\n-      const error = result.errors[ii]\n-      let msg =\n-        'line ' + error.line + ', col ' + error.col + ': ' + error.message\n-      if (error.specUrl !== null) {\n-        msg += ' (see ' + error.specUrl + ')'\n+  const errors = result.errors.filter((error) => {\n+    if (error.severity === 'ERROR') {\n+      // Unclear yet if these actually prevent the page from being indexed by the AMP cache.\n+      // These are coming from React so all we can do is ignore them for now.\n+\n+      // <link rel=\"expect\" blocking=\"render\" />\n+      // https://github.com/ampproject/amphtml/issues/40279\n+      if (\n+        error.code === 'DISALLOWED_ATTR' &&\n+        error.params[0] === 'blocking' &&\n+        error.params[1] === 'link'\n+      ) {\n+        return false\n+      }\n+      // <template> without type\n+      // https://github.com/ampproject/amphtml/issues/40280\n+      if (\n+        error.code === 'MANDATORY_ATTR_MISSING' &&\n+        error.params[0] === 'type' &&\n+        error.params[1] === 'template'\n+      ) {\n+        return false\n+      }\n+      // <template> without type\n+      // https://github.com/ampproject/amphtml/issues/40280\n+      if (\n+        error.code === 'MISSING_REQUIRED_EXTENSION' &&\n+        error.params[0] === 'template' &&\n+        error.params[1] === 'amp-mustache'\n+      ) {\n+        return false\n       }\n-      ;(error.severity === 'ERROR' ? console.error : console.warn)(msg)\n+      return true\n     }\n-  }\n-  expect(result.status).toBe('PASS')\n+    return false\n+  })\n+  const warnings = result.errors.filter((error) => {\n+    return error.severity !== 'ERROR'\n+  })\n+\n+  expect({ errors, warnings }).toEqual({\n+    errors: [],\n+    warnings: [],\n+  })\n }\n \n /** @typedef {import('next/dist/compiled/amphtml-validator').Validator} Validator */"
        },
        {
            "sha": "43213e45b10133bbf3bf779638640039d21f9815",
            "filename": "test/production/deployment-id-handling/deployment-id-handling.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/e3adfeb8160041f697840c94671cb141a0a40039/test%2Fproduction%2Fdeployment-id-handling%2Fdeployment-id-handling.test.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/e3adfeb8160041f697840c94671cb141a0a40039/test%2Fproduction%2Fdeployment-id-handling%2Fdeployment-id-handling.test.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/test%2Fproduction%2Fdeployment-id-handling%2Fdeployment-id-handling.test.ts?ref=e3adfeb8160041f697840c94671cb141a0a40039",
            "patch": "@@ -38,7 +38,7 @@ describe.each(['NEXT_DEPLOYMENT_ID', 'CUSTOM_DEPLOYMENT_ID'])(\n         expect(links.length).toBeGreaterThan(0)\n \n         for (const link of links) {\n-          if (link.attribs.href) {\n+          if (link.attribs.href && link.attribs.rel !== 'expect') {\n             if (link.attribs.as === 'font') {\n               expect(link.attribs.href).not.toContain('dpl=' + deploymentId)\n             } else {"
        }
    ],
    "stats": {
        "total": 6730,
        "additions": 4348,
        "deletions": 2382
    }
}