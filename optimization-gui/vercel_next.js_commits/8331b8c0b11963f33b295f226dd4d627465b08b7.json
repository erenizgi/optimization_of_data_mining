{
    "author": "raunofreiberg",
    "message": "[dev-overlay] Customize `<select>` styling for consistency (#76973)\n\nThis PR applies `all: unset` to the `<select>` we use in Preferences for\nthe Dev Overlay and adds a custom icon because we lose the chevron as\nsoon as we apply this.\n\nWhy?\n\nSo the styling for the control would look more consistent, for example\nthis is what it looks like in Safari now:\n\n![CleanShot 2025-03-11 at 12 36\n12@2x](https://github.com/user-attachments/assets/a6da93ce-2b89-4420-8165-c58d4ec8ba29)\n\nAnd after the changes:\n\n![CleanShot 2025-03-11 at 12 36\n24@2x](https://github.com/user-attachments/assets/4f0f4c31-cc0f-436b-9575-e4434c783b4e)\n\n---\nCloses NDX-928",
    "sha": "8331b8c0b11963f33b295f226dd4d627465b08b7",
    "files": [
        {
            "sha": "e2064bf4be251fce7fadefe16485ee4267ef7105",
            "filename": "packages/next/src/client/components/react-dev-overlay/ui/components/errors/dev-tools-indicator/dev-tools-info/user-preferences.tsx",
            "status": "modified",
            "additions": 56,
            "deletions": 61,
            "changes": 117,
            "blob_url": "https://github.com/vercel/next.js/blob/8331b8c0b11963f33b295f226dd4d627465b08b7/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fuser-preferences.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/8331b8c0b11963f33b295f226dd4d627465b08b7/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fuser-preferences.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fcomponents%2Freact-dev-overlay%2Fui%2Fcomponents%2Ferrors%2Fdev-tools-indicator%2Fdev-tools-info%2Fuser-preferences.tsx?ref=8331b8c0b11963f33b295f226dd4d627465b08b7",
            "patch": "@@ -71,22 +71,17 @@ export function UserPreferences({\n               Select your theme preference.\n             </p>\n           </div>\n-          <div className=\"preference-control-select\">\n-            <div className=\"preference-icon\">\n-              <ThemeIcon theme={theme as 'dark' | 'light' | 'system'} />\n-            </div>\n-            <select\n-              id=\"theme\"\n-              name=\"theme\"\n-              className=\"select-button\"\n-              value={theme}\n-              onChange={handleThemeChange}\n-            >\n-              <option value=\"system\">System</option>\n-              <option value=\"light\">Light</option>\n-              <option value=\"dark\">Dark</option>\n-            </select>\n-          </div>\n+          <Select\n+            id=\"theme\"\n+            name=\"theme\"\n+            prefix={<ThemeIcon theme={theme as 'dark' | 'light' | 'system'} />}\n+            value={theme}\n+            onChange={handleThemeChange}\n+          >\n+            <option value=\"system\">System</option>\n+            <option value=\"light\">Light</option>\n+            <option value=\"dark\">Dark</option>\n+          </Select>\n         </div>\n \n         <div className=\"preference-section\">\n@@ -96,20 +91,17 @@ export function UserPreferences({\n               Adjust the placement of your dev tools.\n             </p>\n           </div>\n-          <div className=\"preference-control-select\">\n-            <select\n-              id=\"position\"\n-              name=\"position\"\n-              className=\"select-button\"\n-              value={position}\n-              onChange={handlePositionChange}\n-            >\n-              <option value=\"bottom-left\">Bottom Left</option>\n-              <option value=\"bottom-right\">Bottom Right</option>\n-              <option value=\"top-left\">Top Left</option>\n-              <option value=\"top-right\">Top Right</option>\n-            </select>\n-          </div>\n+          <Select\n+            id=\"position\"\n+            name=\"position\"\n+            value={position}\n+            onChange={handlePositionChange}\n+          >\n+            <option value=\"bottom-left\">Bottom Left</option>\n+            <option value=\"bottom-right\">Bottom Right</option>\n+            <option value=\"top-left\">Top Left</option>\n+            <option value=\"top-right\">Top Right</option>\n+          </Select>\n         </div>\n \n         <div className=\"preference-section\">\n@@ -129,9 +121,7 @@ export function UserPreferences({\n               className=\"action-button\"\n               onClick={hide}\n             >\n-              <div className=\"preference-icon\">\n-                <EyeIcon />\n-              </div>\n+              <EyeIcon />\n               <span>Hide</span>\n             </button>\n           </div>\n@@ -153,6 +143,22 @@ export function UserPreferences({\n   )\n }\n \n+function Select({\n+  children,\n+  prefix,\n+  ...props\n+}: {\n+  prefix?: React.ReactNode\n+} & Omit<React.HTMLProps<HTMLSelectElement>, 'prefix'>) {\n+  return (\n+    <div className=\"select-button\">\n+      {prefix}\n+      <select {...props}>{children}</select>\n+      <ChevronDownIcon />\n+    </div>\n+  )\n+}\n+\n function ThemeIcon({ theme }: { theme: 'dark' | 'light' | 'system' }) {\n   switch (theme) {\n     case 'system':\n@@ -213,13 +219,6 @@ export const DEV_TOOLS_INFO_USER_PREFERENCES_STYLES = css`\n     margin: 0;\n   }\n \n-  .preference-icon {\n-    display: flex;\n-    align-items: center;\n-    width: 16px;\n-    height: 16px;\n-  }\n-\n   .select-button,\n   .action-button {\n     display: flex;\n@@ -238,31 +237,14 @@ export const DEV_TOOLS_INFO_USER_PREFERENCES_STYLES = css`\n     }\n   }\n \n-  .preference-control-select {\n-    padding: 6px 8px;\n-    display: flex;\n-    align-items: center;\n-    gap: 8px;\n-    border-radius: var(--rounded-lg);\n-    border: 1px solid var(--color-gray-400);\n-\n-    &:hover {\n-      background: var(--color-gray-100);\n-    }\n-\n+  .select-button {\n     &:focus-within {\n       outline: var(--focus-ring);\n     }\n-  }\n \n-  .preference-control-select select {\n-    font-size: var(--size-14);\n-    font-weight: 400;\n-    border: none;\n-    padding: 0 6px 0 0;\n-    border-radius: 0;\n-    outline: none;\n-    background: none;\n+    select {\n+      all: unset;\n+    }\n   }\n \n   :global(.icon) {\n@@ -271,3 +253,16 @@ export const DEV_TOOLS_INFO_USER_PREFERENCES_STYLES = css`\n     color: #666;\n   }\n `\n+\n+function ChevronDownIcon() {\n+  return (\n+    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" aria-hidden>\n+      <path\n+        fillRule=\"evenodd\"\n+        clipRule=\"evenodd\"\n+        d=\"M14.0607 5.49999L13.5303 6.03032L8.7071 10.8535C8.31658 11.2441 7.68341 11.2441 7.29289 10.8535L2.46966 6.03032L1.93933 5.49999L2.99999 4.43933L3.53032 4.96966L7.99999 9.43933L12.4697 4.96966L13 4.43933L14.0607 5.49999Z\"\n+        fill=\"currentColor\"\n+      />\n+    </svg>\n+  )\n+}"
        }
    ],
    "stats": {
        "total": 117,
        "additions": 56,
        "deletions": 61
    }
}