{
    "author": "devjiwonchoi",
    "message": "[release] use `backport` NPM dist tag for backports (#79538)\n\n### Why?\n\nWhen backport releases are published, they are marked as `latest` dist\ntag, which makes `next@latest` not the \"latest.\"\n\nx-ref: [slack\nthread](https://vercel.slack.com/archives/C04LGE5SYEB/p1747984846615469)\n\n### How?\n\nUse `stable` dist tag for backports.",
    "sha": "3175a22feb40cf0d424324493b61cb83c5199451",
    "files": [
        {
            "sha": "40e6d50f0c645445ec0aca470b78cdbe520ba77b",
            "filename": "scripts/release/publish-npm.ts",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/vercel/next.js/blob/3175a22feb40cf0d424324493b61cb83c5199451/scripts%2Frelease%2Fpublish-npm.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/3175a22feb40cf0d424324493b61cb83c5199451/scripts%2Frelease%2Fpublish-npm.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/scripts%2Frelease%2Fpublish-npm.ts?ref=3175a22feb40cf0d424324493b61cb83c5199451",
            "patch": "@@ -15,9 +15,11 @@ async function fetchTagsFromRegistry(packageName: string) {\n async function getTag({\n   name,\n   version,\n+  latest,\n }: {\n   name: string\n   version: string\n+  latest: string\n }): Promise<string> {\n   const preConfigPath = join(process.cwd(), '.changeset', 'pre.json')\n \n@@ -40,6 +42,17 @@ async function getTag({\n     )\n   }\n \n+  // If the current version is less than the latest,\n+  // it means this is a backport release. Since NPM\n+  // sets the 'latest' tag by default during publishing,\n+  // when users install `next@latest`, they might get the\n+  // backported version instead of the actual \"latest\"\n+  // version. Hence, we explicitly set the tag as\n+  // 'stable' for backports.\n+  if (semver.lt(version, latest)) {\n+    return 'stable'\n+  }\n+\n   return 'latest'\n }\n \n@@ -82,6 +95,7 @@ async function publishNpm() {\n     const tag = await getTag({\n       name: pkgJson.name,\n       version: pkgJson.version,\n+      latest: tags.latest,\n     })\n \n     const packagePath = join(packagesDir, packageDir.name)"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 14,
        "deletions": 0
    }
}