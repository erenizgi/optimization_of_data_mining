{
    "author": "mischnic",
    "message": "Turbopack: vendor analysis benchmarks (#83178)\n\nThese files might change or move",
    "sha": "80930d68f5f5f650c03fe33305cb44ac95526471",
    "files": [
        {
            "sha": "acaa057c1c90ba2d4019763cabd3b0181021a97c",
            "filename": ".ignore",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/80930d68f5f5f650c03fe33305cb44ac95526471/.ignore",
            "raw_url": "https://github.com/vercel/next.js/raw/80930d68f5f5f650c03fe33305cb44ac95526471/.ignore",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.ignore?ref=80930d68f5f5f650c03fe33305cb44ac95526471",
            "patch": "@@ -1,6 +1,8 @@\n # Ignore these files in tools like grep, rg, ast-grep, etc. These files should\n # *not* be ignored by git.\n \n+packages/next/src/compiled\n+turbopack/crates/turbopack-ecmascript/tests/benches/*\n+\n # Not valid text\n turbopack/crates/turbopack-tests/tests/execution/turbopack/basic/error/input/broken.js\n-packages/next/src/compiled"
        },
        {
            "sha": "b5d05fc4cd73d0b2c5b7f16dbef4e1bd8f6c1b0a",
            "filename": ".prettierignore",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/80930d68f5f5f650c03fe33305cb44ac95526471/.prettierignore",
            "raw_url": "https://github.com/vercel/next.js/raw/80930d68f5f5f650c03fe33305cb44ac95526471/.prettierignore",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/.prettierignore?ref=80930d68f5f5f650c03fe33305cb44ac95526471",
            "patch": "@@ -60,6 +60,7 @@ test/e2e/async-modules/amp-validator-wasm.js\n /turbopack/crates/*/js/src/compiled\n /turbopack/crates/turbopack/bench.json\n /turbopack/crates/turbopack-ecmascript/tests/analyzer/graph\n+/turbopack/crates/turbopack-ecmascript/tests/benches\n /turbopack/crates/turbopack-ecmascript/tests/tree-shaker\n /turbopack/crates/next-transform-strip-page-exports/tests\n /turbopack/crates/next-transform-dynamic/tests\n@@ -86,4 +87,4 @@ test/production/app-dir/symbolic-file-links/src/app/page.tsx\n turbopack/crates/turbopack/tests/node-file-trace/integration/pnpm/node_modules/foo\n turbopack/crates/turbopack/tests/node-file-trace/integration/pnpm/node_modules/.pnpm/foo@2.1.0/node_modules/lodash-pnpm-test\n turbopack/crates/turbopack/tests/node-file-trace/integration/symlink-to-file/linked.js\n-turbopack/crates/turbopack-tests/tests/snapshot/swc_transforms/mono_transforms/input/node_modules/component\n\\ No newline at end of file\n+turbopack/crates/turbopack-tests/tests/snapshot/swc_transforms/mono_transforms/input/node_modules/component"
        },
        {
            "sha": "5f1d0be45be94d58ec9596b470aac8e35d72d8d6",
            "filename": "turbopack/crates/turbopack-ecmascript/benches/references.rs",
            "status": "modified",
            "additions": 15,
            "deletions": 7,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/80930d68f5f5f650c03fe33305cb44ac95526471/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fbenches%2Freferences.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/80930d68f5f5f650c03fe33305cb44ac95526471/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fbenches%2Freferences.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fbenches%2Freferences.rs?ref=80930d68f5f5f650c03fe33305cb44ac95526471",
            "patch": "@@ -38,7 +38,7 @@ pub fn benchmark(c: &mut Criterion) {\n \n     let cases = rt\n         .block_on(tt.run_once(async {\n-            let root_dir = PathBuf::from(env!(\"CARGO_MANIFEST_DIR\")).join(\"../../../\");\n+            let root_dir = PathBuf::from(env!(\"CARGO_MANIFEST_DIR\")).join(\"tests/benches/\");\n             let fs = DiskFileSystem::new(rcstr!(\"project\"), root_dir.to_str().unwrap().into());\n \n             let environment = Environment::new(ExecutionEnvironment::NodeJsLambda(\n@@ -54,10 +54,12 @@ pub fn benchmark(c: &mut Criterion) {\n \n             let mut cases = vec![];\n             for (file, is_tracing) in [\n-                (r#\"packages/next/dist/compiled/babel-packages/packages-bundle.js\"#, false),\n-                (r#\"packages/next/dist/compiled/babel-packages/packages-bundle.js\"#, true),\n-                (r#\"node_modules/.pnpm/react-dom@19.2.0-canary-03fda05d-20250820_react@19.2.0-canary-03fda05d-20250820/node_modules/react-dom/cjs/react-dom-client.development.js\"#, false),\n-                (r#\"node_modules/.pnpm/react-dom@19.2.0-canary-03fda05d-20250820_react@19.2.0-canary-03fda05d-20250820/node_modules/react-dom/cjs/react-dom-client.development.js\"#, true),\n+                (r#\"packages-bundle.js\"#, false),\n+                (r#\"packages-bundle.js\"#, true),\n+                (r#\"app-page-turbo.runtime.prod.js\"#, false),\n+                (r#\"app-page-turbo.runtime.prod.js\"#, true),\n+                (r#\"react-dom-client.development.js\"#, false),\n+                (r#\"react-dom-client.development.js\"#, true),\n             ] {\n                 let module = EcmascriptModuleAsset::builder(\n                     ResolvedVc::upcast(\n@@ -79,7 +81,11 @@ pub fn benchmark(c: &mut Criterion) {\n                 .to_resolved()\n                 .await?;\n \n-                cases.push((file.rsplit(\"/\").next().unwrap(), if is_tracing { \"tracing\" } else { \"full\" }, module));\n+                cases.push((\n+                    file.rsplit(\"/\").next().unwrap(),\n+                    if is_tracing { \"tracing\" } else { \"full\" },\n+                    module,\n+                ));\n             }\n             anyhow::Ok(cases)\n         }))\n@@ -117,9 +123,11 @@ where\n         .build()\n         .unwrap();\n \n-    b.to_async(rt).iter(|| {\n+    b.to_async(rt).iter(async || {\n         input\n             .storage\n             .run_once(analyse_ecmascript_module_internal(input.module, None))\n+            .await\n+            .unwrap()\n     });\n }"
        },
        {
            "sha": "4402e6bc95092d98f7af0762a10dc50d8a3a7862",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/benches/app-page-turbo.runtime.prod.js",
            "status": "added",
            "additions": 30072,
            "deletions": 0,
            "changes": 30072,
            "blob_url": "https://github.com/vercel/next.js/blob/80930d68f5f5f650c03fe33305cb44ac95526471/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fbenches%2Fapp-page-turbo.runtime.prod.js",
            "raw_url": "https://github.com/vercel/next.js/raw/80930d68f5f5f650c03fe33305cb44ac95526471/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fbenches%2Fapp-page-turbo.runtime.prod.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fbenches%2Fapp-page-turbo.runtime.prod.js?ref=80930d68f5f5f650c03fe33305cb44ac95526471"
        },
        {
            "sha": "fa1212252760ad5636b4565b17abe3fc747c15fe",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/benches/packages-bundle.js",
            "status": "added",
            "additions": 46666,
            "deletions": 0,
            "changes": 46666,
            "blob_url": "https://github.com/vercel/next.js/blob/80930d68f5f5f650c03fe33305cb44ac95526471/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fbenches%2Fpackages-bundle.js",
            "raw_url": "https://github.com/vercel/next.js/raw/80930d68f5f5f650c03fe33305cb44ac95526471/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fbenches%2Fpackages-bundle.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fbenches%2Fpackages-bundle.js?ref=80930d68f5f5f650c03fe33305cb44ac95526471"
        },
        {
            "sha": "938d6ee1aaf1e636fee0dd9fb5becda2c1e72649",
            "filename": "turbopack/crates/turbopack-ecmascript/tests/benches/react-dom-client.development.js",
            "status": "added",
            "additions": 25668,
            "deletions": 0,
            "changes": 25668,
            "blob_url": "https://github.com/vercel/next.js/blob/80930d68f5f5f650c03fe33305cb44ac95526471/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fbenches%2Freact-dom-client.development.js",
            "raw_url": "https://github.com/vercel/next.js/raw/80930d68f5f5f650c03fe33305cb44ac95526471/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fbenches%2Freact-dom-client.development.js",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Ftests%2Fbenches%2Freact-dom-client.development.js?ref=80930d68f5f5f650c03fe33305cb44ac95526471"
        }
    ],
    "stats": {
        "total": 102435,
        "additions": 102426,
        "deletions": 9
    }
}