{
    "author": "bgw",
    "message": "Turbopack: Clean up some of the logic in visit_assign_expr (#81636)\n\nIt should be equivalent, but it's clearer that the LHS is always visited",
    "sha": "a1339ec6b05ecbebd3cfd0fe5115f63e069ba7b4",
    "files": [
        {
            "sha": "d826eefa22046d42bcb86a78b6d70ba556b6ae88",
            "filename": "turbopack/crates/turbopack-ecmascript/src/analyzer/graph.rs",
            "status": "modified",
            "additions": 10,
            "deletions": 16,
            "changes": 26,
            "blob_url": "https://github.com/vercel/next.js/blob/a1339ec6b05ecbebd3cfd0fe5115f63e069ba7b4/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fgraph.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/a1339ec6b05ecbebd3cfd0fe5115f63e069ba7b4/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fgraph.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-ecmascript%2Fsrc%2Fanalyzer%2Fgraph.rs?ref=a1339ec6b05ecbebd3cfd0fe5115f63e069ba7b4",
            "patch": "@@ -1332,32 +1332,26 @@ impl VisitAstPath for Analyzer<'_> {\n                     if let Some(key) = n.left.as_ident() {\n                         let value = match n.op {\n                             AssignOp::AndAssign | AssignOp::OrAssign | AssignOp::NullishAssign => {\n-                                let right = self.eval_context.eval(&n.right);\n                                 // We can handle the right value as alternative to the existing\n                                 // value\n-                                Some(right)\n+                                self.eval_context.eval(&n.right)\n                             }\n                             AssignOp::AddAssign => {\n                                 let left = self.eval_context.eval(&Expr::Ident(key.clone().into()));\n \n                                 let right = self.eval_context.eval(&n.right);\n \n-                                Some(JsValue::add(vec![left, right]))\n+                                JsValue::add(vec![left, right])\n                             }\n-                            _ => Some(JsValue::unknown_empty(true, \"unsupported assign operation\")),\n+                            _ => JsValue::unknown_empty(true, \"unsupported assign operation\"),\n                         };\n-                        if let Some(value) = value {\n-                            // We should visit this to handle `+=` like\n-                            //\n-                            // clientComponentLoadTimes += performance.now() - startTime\n-\n-                            self.current_value = Some(value);\n-                            n.left.visit_children_with_ast_path(self, &mut ast_path);\n-                            self.current_value = None;\n-                        }\n-                    }\n-\n-                    if n.left.as_ident().is_none() {\n+                        // We should visit this to handle `+=` like\n+                        //\n+                        // clientComponentLoadTimes += performance.now() - startTime\n+                        self.current_value = Some(value);\n+                        n.left.visit_children_with_ast_path(self, &mut ast_path);\n+                        self.current_value = None;\n+                    } else {\n                         n.left.visit_children_with_ast_path(self, &mut ast_path);\n                     }\n                 }"
        }
    ],
    "stats": {
        "total": 26,
        "additions": 10,
        "deletions": 16
    }
}