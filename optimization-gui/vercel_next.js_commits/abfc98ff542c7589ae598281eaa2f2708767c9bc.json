{
    "author": "unstubbable",
    "message": "Streamline HMR message handling (#83336)\n\nFor unknown reasons, 3 of the 17 different HMR messages used an `event` property instead of `action`, leading to an unnecessarily convoluted handling of the HMR messages, where the `in` operator had to be used.\r\n\r\n> [!TIP]\r\n> Best reviewed with hidden whitespace changes.",
    "sha": "abfc98ff542c7589ae598281eaa2f2708767c9bc",
    "files": [
        {
            "sha": "ba39775323efdced43a964d056fcdf8a2ddd49a9",
            "filename": "packages/next/src/client/dev/amp-dev.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/abfc98ff542c7589ae598281eaa2f2708767c9bc/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Famp-dev.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/abfc98ff542c7589ae598281eaa2f2708767c9bc/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Famp-dev.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Famp-dev.ts?ref=abfc98ff542c7589ae598281eaa2f2708767c9bc",
            "patch": "@@ -77,10 +77,6 @@ async function tryApplyUpdates() {\n }\n \n addMessageListener((message) => {\n-  if (!('action' in message)) {\n-    return\n-  }\n-\n   try {\n     // actions which are not related to amp-dev\n     if ("
        },
        {
            "sha": "a4d7adc21e62f8564df99f4fcca1128f51211224",
            "filename": "packages/next/src/client/dev/hot-reloader/app/hot-reloader-app.tsx",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/vercel/next.js/blob/abfc98ff542c7589ae598281eaa2f2708767c9bc/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fapp%2Fhot-reloader-app.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/abfc98ff542c7589ae598281eaa2f2708767c9bc/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fapp%2Fhot-reloader-app.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fapp%2Fhot-reloader-app.tsx?ref=abfc98ff542c7589ae598281eaa2f2708767c9bc",
            "patch": "@@ -202,10 +202,6 @@ export function processMessage(\n   processTurbopackMessage: (msg: TurbopackMsgToBrowser) => void,\n   staticIndicatorState: StaticIndicatorState\n ) {\n-  if (!('action' in obj)) {\n-    return\n-  }\n-\n   function handleErrors(errors: ReadonlyArray<unknown>) {\n     // \"Massage\" webpack messages.\n     const formatted = formatWebpackMessages({\n@@ -452,6 +448,11 @@ export function processMessage(\n       dispatcher.onDevToolsConfig(obj.data)\n       return\n     }\n+    case HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES:\n+    case HMR_ACTIONS_SENT_TO_BROWSER.CLIENT_CHANGES:\n+    case HMR_ACTIONS_SENT_TO_BROWSER.SERVER_ONLY_CHANGES:\n+      // These action types are handled in src/client/page-bootstrap.ts\n+      break\n     default: {\n       obj satisfies never\n     }"
        },
        {
            "sha": "b16d7dd71807077a9b814baad56c5b40823b657d",
            "filename": "packages/next/src/client/dev/hot-reloader/pages/hot-reloader-pages.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 8,
            "changes": 13,
            "blob_url": "https://github.com/vercel/next.js/blob/abfc98ff542c7589ae598281eaa2f2708767c9bc/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fpages%2Fhot-reloader-pages.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/abfc98ff542c7589ae598281eaa2f2708767c9bc/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fpages%2Fhot-reloader-pages.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fpages%2Fhot-reloader-pages.ts?ref=abfc98ff542c7589ae598281eaa2f2708767c9bc",
            "patch": "@@ -74,10 +74,6 @@ export default function connect() {\n   register()\n \n   addMessageListener((payload) => {\n-    if (!('action' in payload)) {\n-      return\n-    }\n-\n     try {\n       processMessage(payload)\n     } catch (err: unknown) {\n@@ -253,10 +249,6 @@ export function handleStaticIndicator() {\n \n /** Handles messages from the server for the Pages Router. */\n function processMessage(obj: HMR_ACTION_TYPES) {\n-  if (!('action' in obj)) {\n-    return\n-  }\n-\n   switch (obj.action) {\n     case HMR_ACTIONS_SENT_TO_BROWSER.ISR_MANIFEST: {\n       isrManifest = obj.data\n@@ -374,6 +366,11 @@ function processMessage(obj: HMR_ACTION_TYPES) {\n     case HMR_ACTIONS_SENT_TO_BROWSER.DEVTOOLS_CONFIG:\n       dispatcher.onDevToolsConfig(obj.data)\n       break\n+    case HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES:\n+    case HMR_ACTIONS_SENT_TO_BROWSER.CLIENT_CHANGES:\n+    case HMR_ACTIONS_SENT_TO_BROWSER.SERVER_ONLY_CHANGES:\n+      // These action types are handled in src/client/page-bootstrap.ts\n+      break\n     default:\n       obj satisfies never\n   }"
        },
        {
            "sha": "099480152ba052f0decd7d5ef307c60841fa3016",
            "filename": "packages/next/src/client/dev/hot-reloader/pages/websocket.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/vercel/next.js/blob/abfc98ff542c7589ae598281eaa2f2708767c9bc/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fpages%2Fwebsocket.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/abfc98ff542c7589ae598281eaa2f2708767c9bc/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fpages%2Fwebsocket.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fdev%2Fhot-reloader%2Fpages%2Fwebsocket.ts?ref=abfc98ff542c7589ae598281eaa2f2708767c9bc",
            "patch": "@@ -49,10 +49,7 @@ export function connectHMR(options: { path: string; assetPrefix: string }) {\n       // Coerce into HMR_ACTION_TYPES as that is the format.\n       const msg: HMR_ACTION_TYPES = JSON.parse(event.data)\n \n-      if (\n-        'action' in msg &&\n-        msg.action === HMR_ACTIONS_SENT_TO_BROWSER.TURBOPACK_CONNECTED\n-      ) {\n+      if (msg.action === HMR_ACTIONS_SENT_TO_BROWSER.TURBOPACK_CONNECTED) {\n         if (\n           serverSessionId !== null &&\n           serverSessionId !== msg.data.sessionId"
        },
        {
            "sha": "5c5900f003805e4d9f88ca407dcea7e15877914c",
            "filename": "packages/next/src/client/page-bootstrap.ts",
            "status": "modified",
            "additions": 90,
            "deletions": 95,
            "changes": 185,
            "blob_url": "https://github.com/vercel/next.js/blob/abfc98ff542c7589ae598281eaa2f2708767c9bc/packages%2Fnext%2Fsrc%2Fclient%2Fpage-bootstrap.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/abfc98ff542c7589ae598281eaa2f2708767c9bc/packages%2Fnext%2Fsrc%2Fclient%2Fpage-bootstrap.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fclient%2Fpage-bootstrap.ts?ref=abfc98ff542c7589ae598281eaa2f2708767c9bc",
            "patch": "@@ -26,111 +26,106 @@ export function pageBootstrap(assetPrefix: string) {\n \n     addMessageListener((payload) => {\n       if (reloading) return\n-      if ('action' in payload) {\n-        switch (payload.action) {\n-          case HMR_ACTIONS_SENT_TO_BROWSER.SERVER_ERROR: {\n-            const { stack, message } = JSON.parse(payload.errorJSON)\n-            const error = new Error(message)\n-            error.stack = stack\n-            throw error\n-          }\n-          case HMR_ACTIONS_SENT_TO_BROWSER.RELOAD_PAGE: {\n-            reloading = true\n-            window.location.reload()\n-            break\n-          }\n-          case HMR_ACTIONS_SENT_TO_BROWSER.DEV_PAGES_MANIFEST_UPDATE: {\n-            fetch(\n-              `${assetPrefix}/_next/static/development/_devPagesManifest.json`\n-            )\n-              .then((res) => res.json())\n-              .then((manifest) => {\n-                window.__DEV_PAGES_MANIFEST = manifest\n-              })\n-              .catch((err) => {\n-                console.log(`Failed to fetch devPagesManifest`, err)\n-              })\n-            break\n-          }\n-          case HMR_ACTIONS_SENT_TO_BROWSER.ADDED_PAGE:\n-          case HMR_ACTIONS_SENT_TO_BROWSER.REMOVED_PAGE:\n-          case HMR_ACTIONS_SENT_TO_BROWSER.SERVER_COMPONENT_CHANGES:\n-          case HMR_ACTIONS_SENT_TO_BROWSER.SYNC:\n-          case HMR_ACTIONS_SENT_TO_BROWSER.BUILT:\n-          case HMR_ACTIONS_SENT_TO_BROWSER.BUILDING:\n-          case HMR_ACTIONS_SENT_TO_BROWSER.TURBOPACK_MESSAGE:\n-          case HMR_ACTIONS_SENT_TO_BROWSER.TURBOPACK_CONNECTED:\n-          case HMR_ACTIONS_SENT_TO_BROWSER.ISR_MANIFEST:\n-          case HMR_ACTIONS_SENT_TO_BROWSER.DEVTOOLS_CONFIG:\n-            // Most of these action types are handled in\n-            // src/client/dev/hot-reloader/pages/hot-reloader-pages.ts\n-            break\n-          default:\n-            payload satisfies never\n+\n+      switch (payload.action) {\n+        case HMR_ACTIONS_SENT_TO_BROWSER.SERVER_ERROR: {\n+          const { stack, message } = JSON.parse(payload.errorJSON)\n+          const error = new Error(message)\n+          error.stack = stack\n+          throw error\n         }\n-      } else if ('event' in payload) {\n-        switch (payload.event) {\n-          case HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES: {\n-            return window.location.reload()\n-          }\n-          case HMR_ACTIONS_SENT_TO_BROWSER.CLIENT_CHANGES: {\n-            // This is used in `../server/dev/turbopack-utils.ts`.\n-            const isOnErrorPage = window.next.router.pathname === '/_error'\n-            // On the error page we want to reload the page when a page was changed\n-            if (isOnErrorPage) {\n-              if (RuntimeErrorHandler.hadRuntimeError) {\n-                console.warn(REACT_REFRESH_FULL_RELOAD_FROM_ERROR)\n-              }\n-              reloading = true\n-              performFullReload(null)\n-            }\n-            break\n-          }\n-          case HMR_ACTIONS_SENT_TO_BROWSER.SERVER_ONLY_CHANGES: {\n+        case HMR_ACTIONS_SENT_TO_BROWSER.RELOAD_PAGE: {\n+          reloading = true\n+          window.location.reload()\n+          break\n+        }\n+        case HMR_ACTIONS_SENT_TO_BROWSER.DEV_PAGES_MANIFEST_UPDATE: {\n+          fetch(\n+            `${assetPrefix}/_next/static/development/_devPagesManifest.json`\n+          )\n+            .then((res) => res.json())\n+            .then((manifest) => {\n+              window.__DEV_PAGES_MANIFEST = manifest\n+            })\n+            .catch((err) => {\n+              console.log(`Failed to fetch devPagesManifest`, err)\n+            })\n+          break\n+        }\n+        case HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES: {\n+          return window.location.reload()\n+        }\n+        case HMR_ACTIONS_SENT_TO_BROWSER.CLIENT_CHANGES: {\n+          // This is used in `../server/dev/turbopack-utils.ts`.\n+          const isOnErrorPage = window.next.router.pathname === '/_error'\n+          // On the error page we want to reload the page when a page was changed\n+          if (isOnErrorPage) {\n             if (RuntimeErrorHandler.hadRuntimeError) {\n               console.warn(REACT_REFRESH_FULL_RELOAD_FROM_ERROR)\n-              performFullReload(null)\n             }\n+            reloading = true\n+            performFullReload(null)\n+          }\n+          break\n+        }\n+        case HMR_ACTIONS_SENT_TO_BROWSER.SERVER_ONLY_CHANGES: {\n+          if (RuntimeErrorHandler.hadRuntimeError) {\n+            console.warn(REACT_REFRESH_FULL_RELOAD_FROM_ERROR)\n+            performFullReload(null)\n+          }\n \n-            const { pages } = payload\n+          const { pages } = payload\n \n-            // Make sure to reload when the dev-overlay is showing for an\n-            // API route\n-            // TODO: Fix `__NEXT_PAGE` type\n-            if (pages.includes(router.query.__NEXT_PAGE as string)) {\n-              return window.location.reload()\n-            }\n+          // Make sure to reload when the dev-overlay is showing for an\n+          // API route\n+          // TODO: Fix `__NEXT_PAGE` type\n+          if (pages.includes(router.query.__NEXT_PAGE as string)) {\n+            return window.location.reload()\n+          }\n \n-            if (!router.clc && pages.includes(router.pathname)) {\n-              console.log('Refreshing page data due to server-side change')\n-              dispatcher.buildingIndicatorShow()\n-              const clearIndicator = dispatcher.buildingIndicatorHide\n+          if (!router.clc && pages.includes(router.pathname)) {\n+            console.log('Refreshing page data due to server-side change')\n+            dispatcher.buildingIndicatorShow()\n+            const clearIndicator = dispatcher.buildingIndicatorHide\n \n-              router\n-                .replace(\n-                  router.pathname +\n-                    '?' +\n-                    String(\n-                      assign(\n-                        urlQueryToSearchParams(router.query),\n-                        new URLSearchParams(location.search)\n-                      )\n-                    ),\n-                  router.asPath,\n-                  { scroll: false }\n-                )\n-                .catch(() => {\n-                  // trigger hard reload when failing to refresh data\n-                  // to show error overlay properly\n-                  location.reload()\n-                })\n-                .finally(clearIndicator)\n-            }\n-            break\n+            router\n+              .replace(\n+                router.pathname +\n+                  '?' +\n+                  String(\n+                    assign(\n+                      urlQueryToSearchParams(router.query),\n+                      new URLSearchParams(location.search)\n+                    )\n+                  ),\n+                router.asPath,\n+                { scroll: false }\n+              )\n+              .catch(() => {\n+                // trigger hard reload when failing to refresh data\n+                // to show error overlay properly\n+                location.reload()\n+              })\n+              .finally(clearIndicator)\n           }\n-          default:\n-            payload satisfies never\n+          break\n         }\n+        case HMR_ACTIONS_SENT_TO_BROWSER.ADDED_PAGE:\n+        case HMR_ACTIONS_SENT_TO_BROWSER.REMOVED_PAGE:\n+        case HMR_ACTIONS_SENT_TO_BROWSER.SERVER_COMPONENT_CHANGES:\n+        case HMR_ACTIONS_SENT_TO_BROWSER.SYNC:\n+        case HMR_ACTIONS_SENT_TO_BROWSER.BUILT:\n+        case HMR_ACTIONS_SENT_TO_BROWSER.BUILDING:\n+        case HMR_ACTIONS_SENT_TO_BROWSER.TURBOPACK_MESSAGE:\n+        case HMR_ACTIONS_SENT_TO_BROWSER.TURBOPACK_CONNECTED:\n+        case HMR_ACTIONS_SENT_TO_BROWSER.ISR_MANIFEST:\n+        case HMR_ACTIONS_SENT_TO_BROWSER.DEVTOOLS_CONFIG:\n+          // Most of these action types are handled in\n+          // src/client/dev/hot-reloader/pages/hot-reloader-pages.ts and\n+          // src/client/dev/hot-reloader/app/hot-reloader-app.tsx\n+          break\n+        default:\n+          payload satisfies never\n       }\n     })\n   })"
        },
        {
            "sha": "7a44caa56510fff9f11b9957e2ae65c62e1095bf",
            "filename": "packages/next/src/server/dev/hot-reloader-types.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/abfc98ff542c7589ae598281eaa2f2708767c9bc/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-types.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/abfc98ff542c7589ae598281eaa2f2708767c9bc/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-types.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-types.ts?ref=abfc98ff542c7589ae598281eaa2f2708767c9bc",
            "patch": "@@ -91,15 +91,15 @@ interface ServerComponentChangesAction {\n }\n \n interface MiddlewareChangesAction {\n-  event: HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES\n+  action: HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES\n }\n \n interface ClientChangesAction {\n-  event: HMR_ACTIONS_SENT_TO_BROWSER.CLIENT_CHANGES\n+  action: HMR_ACTIONS_SENT_TO_BROWSER.CLIENT_CHANGES\n }\n \n interface ServerOnlyChangesAction {\n-  event: HMR_ACTIONS_SENT_TO_BROWSER.SERVER_ONLY_CHANGES\n+  action: HMR_ACTIONS_SENT_TO_BROWSER.SERVER_ONLY_CHANGES\n   pages: ReadonlyArray<string>\n }\n "
        },
        {
            "sha": "5f729a7ed9c4be296b9d2e7c3e0289ed05ddf085",
            "filename": "packages/next/src/server/dev/hot-reloader-webpack.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/abfc98ff542c7589ae598281eaa2f2708767c9bc/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-webpack.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/abfc98ff542c7589ae598281eaa2f2708767c9bc/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-webpack.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fhot-reloader-webpack.ts?ref=abfc98ff542c7589ae598281eaa2f2708767c9bc",
            "patch": "@@ -1466,13 +1466,13 @@ export default class HotReloaderWebpack implements NextJsHotReloaderInterface {\n \n       if (middlewareChanges.length > 0) {\n         this.send({\n-          event: HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES,\n+          action: HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES,\n         })\n       }\n \n       if (pageChanges.length > 0) {\n         this.send({\n-          event: HMR_ACTIONS_SENT_TO_BROWSER.SERVER_ONLY_CHANGES,\n+          action: HMR_ACTIONS_SENT_TO_BROWSER.SERVER_ONLY_CHANGES,\n           pages: serverOnlyChanges.map((pg) =>\n             denormalizePagePath(pg.slice('pages'.length))\n           ),"
        },
        {
            "sha": "303d75515cd50824eb0565f2e6e854252435f688",
            "filename": "packages/next/src/server/dev/turbopack-utils.ts",
            "status": "modified",
            "additions": 14,
            "deletions": 8,
            "changes": 22,
            "blob_url": "https://github.com/vercel/next.js/blob/abfc98ff542c7589ae598281eaa2f2708767c9bc/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fturbopack-utils.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/abfc98ff542c7589ae598281eaa2f2708767c9bc/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fturbopack-utils.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fserver%2Fdev%2Fturbopack-utils.ts?ref=abfc98ff542c7589ae598281eaa2f2708767c9bc",
            "patch": "@@ -266,7 +266,7 @@ export async function handleRouteType({\n               // Report the next compilation again\n               readyIds?.delete(pathname)\n               return {\n-                event: HMR_ACTIONS_SENT_TO_BROWSER.SERVER_ONLY_CHANGES,\n+                action: HMR_ACTIONS_SENT_TO_BROWSER.SERVER_ONLY_CHANGES,\n                 pages: [page],\n               }\n             },\n@@ -283,7 +283,7 @@ export async function handleRouteType({\n             route.htmlEndpoint,\n             () => {\n               return {\n-                event: HMR_ACTIONS_SENT_TO_BROWSER.CLIENT_CHANGES,\n+                action: HMR_ACTIONS_SENT_TO_BROWSER.CLIENT_CHANGES,\n               }\n             },\n             (e) => {\n@@ -650,12 +650,12 @@ export async function handleEntrypoints({\n     await dev?.hooks.unsubscribeFromChanges(key)\n     currentEntryIssues.delete(key)\n     dev.hooks.sendHmr('middleware', {\n-      event: HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES,\n+      action: HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES,\n     })\n   } else if (!currentEntrypoints.global.middleware && middleware) {\n     // Went from no middleware to middleware\n     dev.hooks.sendHmr('middleware', {\n-      event: HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES,\n+      action: HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES,\n     })\n   }\n \n@@ -763,11 +763,13 @@ export async function handleEntrypoints({\n           })\n \n           finishBuilding?.()\n-          return { event: HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES }\n+          return {\n+            action: HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES,\n+          }\n         },\n         () => {\n           return {\n-            event: HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES,\n+            action: HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES,\n           }\n         }\n       )\n@@ -879,7 +881,9 @@ export async function handlePagesErrorRoute({\n       () => {\n         // There's a special case for this in `../client/page-bootstrap.ts`.\n         // https://github.com/vercel/next.js/blob/08d7a7e5189a835f5dcb82af026174e587575c0e/packages/next/src/client/page-bootstrap.ts#L69-L71\n-        return { event: HMR_ACTIONS_SENT_TO_BROWSER.CLIENT_CHANGES }\n+        return {\n+          action: HMR_ACTIONS_SENT_TO_BROWSER.CLIENT_CHANGES,\n+        }\n       },\n       () => {\n         return {\n@@ -932,7 +936,9 @@ export async function handlePagesErrorRoute({\n       () => {\n         // There's a special case for this in `../client/page-bootstrap.ts`.\n         // https://github.com/vercel/next.js/blob/08d7a7e5189a835f5dcb82af026174e587575c0e/packages/next/src/client/page-bootstrap.ts#L69-L71\n-        return { event: HMR_ACTIONS_SENT_TO_BROWSER.CLIENT_CHANGES }\n+        return {\n+          action: HMR_ACTIONS_SENT_TO_BROWSER.CLIENT_CHANGES,\n+        }\n       },\n       (e) => {\n         return {"
        }
    ],
    "stats": {
        "total": 248,
        "additions": 120,
        "deletions": 128
    }
}