{
    "author": "wbinnssmith",
    "message": "Turbopack: Update toolchain to 2025-04-14 (Reapply #78062) (#78167)\n\nThis reverts commit dedf6d3ad96ecefb8681bd53dcf67ea7d7a3a694.\n\nTest Plan:\n\nConfirmed that 2025-04-10 crashed and created rustc-ice dumps whenever\nrust-analyzer was used, even lightly.\n\nConfirmed that 2025-04-14 no longer produces these files after multiple\nrestarts and light changes to some turbopack crates.",
    "sha": "79b266c3b76bc9bea85cde2a557a694b875f2c09",
    "files": [
        {
            "sha": "792d9443766db1a7de5a9543730eaacc9cd8a5f7",
            "filename": "rust-toolchain.toml",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/79b266c3b76bc9bea85cde2a557a694b875f2c09/rust-toolchain.toml",
            "raw_url": "https://github.com/vercel/next.js/raw/79b266c3b76bc9bea85cde2a557a694b875f2c09/rust-toolchain.toml",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/rust-toolchain.toml?ref=79b266c3b76bc9bea85cde2a557a694b875f2c09",
            "patch": "@@ -1,4 +1,4 @@\n [toolchain]\n-channel = \"nightly-2025-02-12\"\n+channel = \"nightly-2025-04-14\"\n components = [\"rustfmt\", \"clippy\", \"rust-analyzer\"]\n profile = \"minimal\""
        },
        {
            "sha": "498f80be8056a8795b6bd95fcbbb3f5f99270248",
            "filename": "turbopack/crates/turbo-static/src/main.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/79b266c3b76bc9bea85cde2a557a694b875f2c09/turbopack%2Fcrates%2Fturbo-static%2Fsrc%2Fmain.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/79b266c3b76bc9bea85cde2a557a694b875f2c09/turbopack%2Fcrates%2Fturbo-static%2Fsrc%2Fmain.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-static%2Fsrc%2Fmain.rs?ref=79b266c3b76bc9bea85cde2a557a694b875f2c09",
            "patch": "@@ -194,6 +194,7 @@ fn resolve_concurrency(\n \n     for (ident, references) in dep_tree {\n         for reference in references {\n+            #[allow(clippy::map_entry)] // This doesn't insert into dep_tree, so entry isn't useful\n             if !dep_tree.contains_key(&reference.identifier) {\n                 // this is a task that is not in the task list\n                 // so we can't resolve it"
        },
        {
            "sha": "42526ed9e2b259e8ff5663b27b8ba7ae8942494d",
            "filename": "turbopack/crates/turbo-tasks-auto-hash-map/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/79b266c3b76bc9bea85cde2a557a694b875f2c09/turbopack%2Fcrates%2Fturbo-tasks-auto-hash-map%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/79b266c3b76bc9bea85cde2a557a694b875f2c09/turbopack%2Fcrates%2Fturbo-tasks-auto-hash-map%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-auto-hash-map%2Fsrc%2Flib.rs?ref=79b266c3b76bc9bea85cde2a557a694b875f2c09",
            "patch": "@@ -1,5 +1,3 @@\n-#![feature(hash_extract_if)]\n-\n pub mod map;\n pub mod set;\n "
        },
        {
            "sha": "20f8395e8b2f092b57c8ffe35ba6c13299ef8c2c",
            "filename": "turbopack/crates/turbo-tasks-fs/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/79b266c3b76bc9bea85cde2a557a694b875f2c09/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/79b266c3b76bc9bea85cde2a557a694b875f2c09/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-fs%2Fsrc%2Flib.rs?ref=79b266c3b76bc9bea85cde2a557a694b875f2c09",
            "patch": "@@ -1,6 +1,5 @@\n #![allow(clippy::needless_return)] // tokio macro-generated code doesn't respect this\n #![feature(trivial_bounds)]\n-#![feature(hash_extract_if)]\n #![feature(min_specialization)]\n #![feature(iter_advance_by)]\n #![feature(io_error_more)]"
        },
        {
            "sha": "0a167e2e1632d2019ee6b7b365fc360e1487ee12",
            "filename": "turbopack/crates/turbo-tasks-macros-tests/tests/function/fail_operation_method_self_type.stderr",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/79b266c3b76bc9bea85cde2a557a694b875f2c09/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type.stderr",
            "raw_url": "https://github.com/vercel/next.js/raw/79b266c3b76bc9bea85cde2a557a694b875f2c09/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type.stderr",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-macros-tests%2Ftests%2Ffunction%2Ffail_operation_method_self_type.stderr?ref=79b266c3b76bc9bea85cde2a557a694b875f2c09",
            "patch": "@@ -4,6 +4,15 @@ error: methods taking `self` are not supported with `operation`\n 13 |     fn arbitrary_self_type(self: OperationVc<Self>) -> Vc<()> {\n    |                            ^^^^^^^^^^^^^^^^^^^^^^^\n \n+error[E0307]: invalid `self` parameter type: `OperationVc<Foobar>`\n+  --> tests/function/fail_operation_method_self_type.rs:13:34\n+   |\n+13 |     fn arbitrary_self_type(self: OperationVc<Self>) -> Vc<()> {\n+   |                                  ^^^^^^^^^^^^^^^^^\n+   |\n+   = note: type of `self` must be `Self` or some type implementing `Receiver`\n+   = help: consider changing to `self`, `&self`, `&mut self`, or a type implementing `Receiver` such as `self: Box<Self>`, `self: Rc<Self>`, or `self: Arc<Self>`\n+\n error[E0277]: the trait bound `fn(...) -> ... {...::arbitrary_self_type_turbo_tasks_function_inline}: IntoTaskFnWithThis<_, _, _>` is not satisfied\n   --> tests/function/fail_operation_method_self_type.rs:10:1\n    |\n@@ -22,12 +31,3 @@ note: required by a bound in `NativeFunction::new_method`\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `NativeFunction::new_method`\n    = note: consider using `--verbose` to print the full type name to the console\n    = note: this error originates in the attribute macro `turbo_tasks::value_impl` (in Nightly builds, run with -Z macro-backtrace for more info)\n-\n-error[E0307]: invalid `self` parameter type: `OperationVc<Foobar>`\n-  --> tests/function/fail_operation_method_self_type.rs:13:34\n-   |\n-13 |     fn arbitrary_self_type(self: OperationVc<Self>) -> Vc<()> {\n-   |                                  ^^^^^^^^^^^^^^^^^\n-   |\n-   = note: type of `self` must be `Self` or some type implementing `Receiver`\n-   = help: consider changing to `self`, `&self`, `&mut self`, or a type implementing `Receiver` such as `self: Box<Self>`, `self: Rc<Self>`, or `self: Arc<Self>`"
        },
        {
            "sha": "bd2a5476b5b402ff1c8290feab73fa29f948b3f5",
            "filename": "turbopack/crates/turbo-tasks-memory/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/79b266c3b76bc9bea85cde2a557a694b875f2c09/turbopack%2Fcrates%2Fturbo-tasks-memory%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/79b266c3b76bc9bea85cde2a557a694b875f2c09/turbopack%2Fcrates%2Fturbo-tasks-memory%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks-memory%2Fsrc%2Flib.rs?ref=79b266c3b76bc9bea85cde2a557a694b875f2c09",
            "patch": "@@ -1,4 +1,3 @@\n-#![feature(hash_extract_if)]\n #![feature(type_alias_impl_trait)]\n #![feature(box_patterns)]\n #![feature(int_roundings)]"
        },
        {
            "sha": "c76166d663222dc21e610739496917ac1346ab54",
            "filename": "turbopack/crates/turbo-tasks/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/79b266c3b76bc9bea85cde2a557a694b875f2c09/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/79b266c3b76bc9bea85cde2a557a694b875f2c09/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Flib.rs?ref=79b266c3b76bc9bea85cde2a557a694b875f2c09",
            "patch": "@@ -29,7 +29,6 @@\n #![feature(trivial_bounds)]\n #![feature(min_specialization)]\n #![feature(try_trait_v2)]\n-#![feature(hash_extract_if)]\n #![deny(unsafe_op_in_unsafe_fn)]\n #![feature(result_flattening)]\n #![feature(error_generic_member_access)]"
        },
        {
            "sha": "1ca595ce6779b92d6503cdf69049001d157b6863",
            "filename": "turbopack/crates/turbopack-css/src/process.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/79b266c3b76bc9bea85cde2a557a694b875f2c09/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fprocess.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/79b266c3b76bc9bea85cde2a557a694b875f2c09/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fprocess.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-css%2Fsrc%2Fprocess.rs?ref=79b266c3b76bc9bea85cde2a557a694b875f2c09",
            "patch": "@@ -112,6 +112,7 @@ impl StyleSheetLike<'_, '_> {\n pub struct UnresolvedUrlReferences(pub Vec<(String, ResolvedVc<UrlAssetReference>)>);\n \n #[turbo_tasks::value(shared, serialization = \"none\", eq = \"manual\", cell = \"new\")]\n+#[allow(clippy::large_enum_variant)] // This is a turbo-tasks value\n pub enum ParseCssResult {\n     Ok {\n         code: ResolvedVc<FileContent>,"
        },
        {
            "sha": "606c9022e2b4eed2e3ed37c3024a5b76e44736d3",
            "filename": "turbopack/crates/turbopack-node/src/lib.rs",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/79b266c3b76bc9bea85cde2a557a694b875f2c09/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Flib.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/79b266c3b76bc9bea85cde2a557a694b875f2c09/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Flib.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-node%2Fsrc%2Flib.rs?ref=79b266c3b76bc9bea85cde2a557a694b875f2c09",
            "patch": "@@ -1,7 +1,6 @@\n #![feature(min_specialization)]\n #![feature(arbitrary_self_types)]\n #![feature(arbitrary_self_types_pointers)]\n-#![feature(extract_if)]\n \n use std::{iter::once, thread::available_parallelism};\n "
        }
    ],
    "stats": {
        "total": 28,
        "additions": 12,
        "deletions": 16
    }
}