{
    "author": "bgw",
    "message": "fix(turbo-tasks): Make vc types use repr(transparent) (#78327)\n\nI thought this was already here, but @lukesandberg pointed out it wasn't. I'm pretty sure we're doing transmutes in a few places that assume this, so we should have it.\n\nThere's likely no change in behavior: The only sane memory layout for these types is the transparent one, but the annotation guarantees it for our unsafe code.",
    "sha": "8ff308e8ba6a08a08aed66b1a2d2552503a76c46",
    "files": [
        {
            "sha": "739c999d33f10ef9d949e6b2364294ba82b514e9",
            "filename": "turbopack/crates/turbo-tasks/src/vc/mod.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/8ff308e8ba6a08a08aed66b1a2d2552503a76c46/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8ff308e8ba6a08a08aed66b1a2d2552503a76c46/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fmod.rs?ref=8ff308e8ba6a08a08aed66b1a2d2552503a76c46",
            "patch": "@@ -163,6 +163,7 @@ type VcReadTarget<T> = <<T as VcValueType>::Read as VcRead<T>>::Target;\n #[must_use]\n #[derive(Serialize, Deserialize)]\n #[serde(transparent, bound = \"\")]\n+#[repr(transparent)]\n pub struct Vc<T>\n where\n     T: ?Sized,"
        },
        {
            "sha": "8d957833092d73b1e6842c8c38fd089d88f762e9",
            "filename": "turbopack/crates/turbo-tasks/src/vc/operation.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/8ff308e8ba6a08a08aed66b1a2d2552503a76c46/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Foperation.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8ff308e8ba6a08a08aed66b1a2d2552503a76c46/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Foperation.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Foperation.rs?ref=8ff308e8ba6a08a08aed66b1a2d2552503a76c46",
            "patch": "@@ -48,6 +48,7 @@ use crate::{\n /// [`State`]: crate::State\n /// [`ReadRef`]: crate::ReadRef\n #[must_use]\n+#[repr(transparent)]\n pub struct OperationVc<T>\n where\n     T: ?Sized,"
        },
        {
            "sha": "87f88661be66a1c44cb68d860d3679a5e8d755cf",
            "filename": "turbopack/crates/turbo-tasks/src/vc/resolved.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/8ff308e8ba6a08a08aed66b1a2d2552503a76c46/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fresolved.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/8ff308e8ba6a08a08aed66b1a2d2552503a76c46/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fresolved.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbo-tasks%2Fsrc%2Fvc%2Fresolved.rs?ref=8ff308e8ba6a08a08aed66b1a2d2552503a76c46",
            "patch": "@@ -66,6 +66,7 @@ use crate::{\n /// [`ReadRef`]: crate::ReadRef\n #[derive(Serialize, Deserialize)]\n #[serde(transparent, bound = \"\")]\n+#[repr(transparent)]\n pub struct ResolvedVc<T>\n where\n     T: ?Sized,"
        }
    ],
    "stats": {
        "total": 3,
        "additions": 3,
        "deletions": 0
    }
}