{
    "author": "ztanner",
    "message": "[devtools]: default to issues tab when error overlay is programmatically toggled (#81091)\n\nWhen there's a build error and we toggle the error overlay on page load,\nwe should ensure that the issues tab is used rather than the one stored\nin session storage, to avoid the case where we bring up the modal\nintending to show the user an error but instead show the settings page.\n\nDrive-by refactor: lifted storage variable to the other places where\nthey're defined\nCloses NEXT-4596",
    "sha": "6f0225a09b27679310eddc0858172355fd875def",
    "files": [
        {
            "sha": "8f3d9e928ba4d3c3697b4ab547761e91bee8d9cf",
            "filename": "packages/next/src/next-devtools/dev-overlay/components/devtools-panel/devtools-panel.tsx",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/vercel/next.js/blob/6f0225a09b27679310eddc0858172355fd875def/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx",
            "raw_url": "https://github.com/vercel/next.js/raw/6f0225a09b27679310eddc0858172355fd875def/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fcomponents%2Fdevtools-panel%2Fdevtools-panel.tsx?ref=6f0225a09b27679310eddc0858172355fd875def",
            "patch": "@@ -15,6 +15,7 @@ import {\n   STORAGE_KEY_SCALE,\n   STORAGE_KEY_POSITION,\n   ACTION_ERROR_OVERLAY_CLOSE,\n+  STORAGE_KEY_ACTIVE_TAB,\n } from '../../shared'\n import { css } from '../../utils/css'\n import { OverlayBackdrop } from '../overlay'\n@@ -26,8 +27,6 @@ import { MinimizeIcon } from '../../icons/minimize'\n \n export type DevToolsPanelTabType = 'issues' | 'route' | 'settings'\n \n-const STORAGE_KEY_ACTIVE_TAB = 'nextjs-devtools-active-tab'\n-\n function useSessionState<T extends string>(\n   key: string,\n   initialValue: T\n@@ -78,6 +77,9 @@ export function DevToolsPanel({\n   if (state.isErrorOverlayOpen !== prevIsErrorOverlayOpen) {\n     if (state.isErrorOverlayOpen) {\n       setIsFullscreen(true)\n+      // We should always show the issues tab initially if we're\n+      // programmatically opening the panel to highlight errors.\n+      setActiveTab('issues')\n     }\n     setPrevIsErrorOverlayOpen(state.isErrorOverlayOpen)\n   }"
        },
        {
            "sha": "06771d1f3ec453747c6f2b10f6fb87d9604538e2",
            "filename": "packages/next/src/next-devtools/dev-overlay/shared.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/6f0225a09b27679310eddc0858172355fd875def/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fshared.ts",
            "raw_url": "https://github.com/vercel/next.js/raw/6f0225a09b27679310eddc0858172355fd875def/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fshared.ts",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/packages%2Fnext%2Fsrc%2Fnext-devtools%2Fdev-overlay%2Fshared.ts?ref=6f0225a09b27679310eddc0858172355fd875def",
            "patch": "@@ -85,6 +85,7 @@ export const ACTION_RESTART_SERVER_BUTTON = 'restart-server-button'\n export const STORAGE_KEY_THEME = '__nextjs-dev-tools-theme'\n export const STORAGE_KEY_POSITION = '__nextjs-dev-tools-position'\n export const STORAGE_KEY_SCALE = '__nextjs-dev-tools-scale'\n+export const STORAGE_KEY_ACTIVE_TAB = '__nextjs-devtools-active-tab'\n \n export const ACTION_DEVTOOL_UPDATE_ROUTE_STATE =\n   'segment-explorer-update-route-state'"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 5,
        "deletions": 2
    }
}