{
    "author": "delbaoliveira",
    "message": "Docs IA 2.0: Metadata (#78905)\n\nCloses: https://linear.app/vercel/issue/DOC-4642/metadata\nRedirects: https://github.com/vercel/front/pull/45244\n\n- Expands `generateMetadata` API reference to describe behavior\n- Adds new examples to the `ImageResponse` API reference\n- Create JSON-LD guide\n\n---------\n\nCo-authored-by: Rich Haines <hello@richardhaines.dev>",
    "sha": "d05288de2e6b0d6832c6a97f96db9b534b33aefe",
    "files": [
        {
            "sha": "c1462f2314b9ca3252138a45c65b349ac156a435",
            "filename": "docs/01-app/01-getting-started/10-metadata-and-og-images.mdx",
            "status": "modified",
            "additions": 16,
            "deletions": 2,
            "changes": 18,
            "blob_url": "https://github.com/vercel/next.js/blob/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F01-getting-started%2F10-metadata-and-og-images.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F01-getting-started%2F10-metadata-and-og-images.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F01-getting-started%2F10-metadata-and-og-images.mdx?ref=d05288de2e6b0d6832c6a97f96db9b534b33aefe",
            "patch": "@@ -7,10 +7,13 @@ related:\n   description: Learn more about the Metadata APIs mentioned in this page.\n   links:\n     - app/api-reference/functions/generate-metadata\n+    - app/api-reference/functions/generate-viewport\n+    - app/api-reference/functions/image-response\n     - app/api-reference/file-conventions/metadata\n     - app/api-reference/file-conventions/metadata/app-icons\n     - app/api-reference/file-conventions/metadata/opengraph-image\n-    - app/api-reference/functions/image-response\n+    - app/api-reference/file-conventions/metadata/robots\n+    - app/api-reference/file-conventions/metadata/sitemap\n ---\n \n The Metadata APIs can be used to define your application metadata for improved SEO and web shareability and include:\n@@ -59,7 +62,7 @@ export const metadata = {\n export default function Page() {}\n ```\n \n-You can view a full list of available options, in the [generate metadata documentation](/docs/app/api-reference/functions/generate-metadata#metadata-fields).\n+You can view a full list of available options, in the [`generateMetadata` documentation](/docs/app/api-reference/functions/generate-metadata#metadata-fields).\n \n ## Generated metadata\n \n@@ -177,6 +180,17 @@ export default async function Page({ params }) {\n }\n ```\n \n+## File-based metadata\n+\n+The following special files are available for metadata:\n+\n+- [favicon.ico, apple-icon.jpg, and icon.jpg](/docs/app/api-reference/file-conventions/metadata/app-icons)\n+- [opengraph-image.jpg and twitter-image.jpg](/docs/app/api-reference/file-conventions/metadata/opengraph-image)\n+- [robots.txt](/docs/app/api-reference/file-conventions/metadata/robots)\n+- [sitemap.xml](/docs/app/api-reference/file-conventions/metadata/sitemap)\n+\n+You can use these for static metadata, or you can programmatically generate these files with code.\n+\n ## Favicons\n \n Favicons are small icons that represent your site in bookmarks and search results. To add a favicon to your application, create a `favicon.ico` and add to the root of the app folder."
        },
        {
            "sha": "64ed24e65476d1eb1148f38b9230d9ae6fb7806a",
            "filename": "docs/01-app/02-guides/json-ld.mdx",
            "status": "added",
            "additions": 77,
            "deletions": 0,
            "changes": 77,
            "blob_url": "https://github.com/vercel/next.js/blob/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F02-guides%2Fjson-ld.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F02-guides%2Fjson-ld.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fjson-ld.mdx?ref=d05288de2e6b0d6832c6a97f96db9b534b33aefe",
            "patch": "@@ -0,0 +1,77 @@\n+---\n+title: How to implement JSON-LD in your Next.js application\n+nav_title: JSON-LD\n+description: Learn how to add JSON-LD to your Next.js application to describe your content to search engines and AI.\n+---\n+\n+[JSON-LD](https://json-ld.org/) is a format for structured data that can be used by search engines and AI to to help them understand the structure of the page beyond pure content. For example, you can use it to describe a person, an event, an organization, a movie, a book, a recipe, and many other types of entities.\n+\n+Our current recommendation for JSON-LD is to render structured data as a `<script>` tag in your `layout.js` or `page.js` components. For example:\n+\n+```tsx filename=\"app/products/[id]/page.tsx\" switcher\n+export default async function Page({ params }) {\n+  const { id } = await params\n+  const product = await getProduct(id)\n+\n+  const jsonLd = {\n+    '@context': 'https://schema.org',\n+    '@type': 'Product',\n+    name: product.name,\n+    image: product.image,\n+    description: product.description,\n+  }\n+\n+  return (\n+    <section>\n+      {/* Add JSON-LD to your page */}\n+      <script\n+        type=\"application/ld+json\"\n+        dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}\n+      />\n+      {/* ... */}\n+    </section>\n+  )\n+}\n+```\n+\n+```jsx filename=\"app/products/[id]/page.js\" switcher\n+export default async function Page({ params }) {\n+  const { id } = await params\n+  const product = await getProduct(id)\n+\n+  const jsonLd = {\n+    '@context': 'https://schema.org',\n+    '@type': 'Product',\n+    name: product.name,\n+    image: product.image,\n+    description: product.description,\n+  }\n+\n+  return (\n+    <section>\n+      {/* Add JSON-LD to your page */}\n+      <script\n+        type=\"application/ld+json\"\n+        dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}\n+      />\n+      {/* ... */}\n+    </section>\n+  )\n+}\n+```\n+\n+You can validate and test your structured data with the [Rich Results Test](https://search.google.com/test/rich-results) for Google or the generic [Schema Markup Validator](https://validator.schema.org/).\n+\n+You can type your JSON-LD with TypeScript using community packages like [`schema-dts`](https://www.npmjs.com/package/schema-dts):\n+\n+```tsx\n+import { Product, WithContext } from 'schema-dts'\n+\n+const jsonLd: WithContext<Product> = {\n+  '@context': 'https://schema.org',\n+  '@type': 'Product',\n+  name: 'Next.js Sticker',\n+  image: 'https://nextjs.org/imgs/sticker.png',\n+  description: 'Dynamic at the speed of static.',\n+}\n+```"
        },
        {
            "sha": "de4a90348daa637fcc38dd01ea0505bc82818b6d",
            "filename": "docs/01-app/02-guides/mdx.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F02-guides%2Fmdx.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F02-guides%2Fmdx.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fmdx.mdx?ref=d05288de2e6b0d6832c6a97f96db9b534b33aefe",
            "patch": "@@ -110,7 +110,7 @@ When using file based routing, you can use MDX pages like any other page.\n \n <AppOnly>\n \n-In App Router apps, that includes being able to use [metadata](/docs/app/building-your-application/optimizing/metadata).\n+In App Router apps, that includes being able to use [metadata](/docs/app/getting-started/metadata-and-og-images).\n \n Create a new MDX page within the `/app` directory:\n "
        },
        {
            "sha": "a8264485721459e7845fd084580ade4607be864a",
            "filename": "docs/01-app/02-guides/migrating/app-router-migration.mdx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/vercel/next.js/blob/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F02-guides%2Fmigrating%2Fapp-router-migration.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F02-guides%2Fmigrating%2Fapp-router-migration.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fmigrating%2Fapp-router-migration.mdx?ref=d05288de2e6b0d6832c6a97f96db9b534b33aefe",
            "patch": "@@ -166,7 +166,7 @@ export default function RootLayout({\n - The root layout replaces the `pages/_app.tsx` and `pages/_document.tsx` files.\n - `.js`, `.jsx`, or `.tsx` extensions can be used for layout files.\n \n-To manage `<head>` HTML elements, you can use the [built-in SEO support](/docs/app/building-your-application/optimizing/metadata):\n+To manage `<head>` HTML elements, you can use the [built-in SEO support](/docs/app/getting-started/metadata-and-og-images):\n \n ```tsx filename=\"app/layout.tsx\" switcher\n import type { Metadata } from 'next'\n@@ -265,7 +265,7 @@ Page.getLayout = function getLayout(page) {\n \n ### Step 3: Migrating `next/head`\n \n-In the `pages` directory, the `next/head` React component is used to manage `<head>` HTML elements such as `title` and `meta` . In the `app` directory, `next/head` is replaced with the new [built-in SEO support](/docs/app/building-your-application/optimizing/metadata).\n+In the `pages` directory, the `next/head` React component is used to manage `<head>` HTML elements such as `title` and `meta` . In the `app` directory, `next/head` is replaced with the new [built-in SEO support](/docs/app/getting-started/metadata-and-og-images).\n \n **Before:**\n "
        },
        {
            "sha": "ba8d89568aff1f666aa54a5c1df4d837534fcb0c",
            "filename": "docs/01-app/02-guides/migrating/from-create-react-app.mdx",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F02-guides%2Fmigrating%2Ffrom-create-react-app.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F02-guides%2Fmigrating%2Ffrom-create-react-app.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fmigrating%2Ffrom-create-react-app.mdx?ref=d05288de2e6b0d6832c6a97f96db9b534b33aefe",
            "patch": "@@ -145,7 +145,7 @@ export default function RootLayout({ children }) {\n }\n ```\n \n-> **Good to know**: Next.js ignores CRA’s `public/manifest.json`, additional iconography, and [testing configuration](/docs/app/guides/testing) by default. If you need these, Next.js has support with its [Metadata API](/docs/app/building-your-application/optimizing/metadata) and [Testing](/docs/app/guides/testing) setup.\n+> **Good to know**: Next.js ignores CRA’s `public/manifest.json`, additional iconography, and [testing configuration](/docs/app/guides/testing) by default. If you need these, Next.js has support with its [Metadata API](/docs/app/getting-started/metadata-and-og-images) and [Testing](/docs/app/guides/testing) setup.\n \n ### Step 4: Metadata\n \n@@ -189,7 +189,7 @@ export default function RootLayout({ children }) {\n }\n ```\n \n-Any [metadata files](/docs/app/building-your-application/optimizing/metadata#file-based-metadata) such as `favicon.ico`, `icon.png`, `robots.txt` are automatically added to the application `<head>` tag as long as you have them placed into the top level of the `app` directory. After moving [all supported files](/docs/app/building-your-application/optimizing/metadata#file-based-metadata) into the `app` directory you can safely delete their `<link>` tags:\n+Any [metadata files](/docs/app/getting-started/metadata-and-og-images#file-based-metadata) such as `favicon.ico`, `icon.png`, `robots.txt` are automatically added to the application `<head>` tag as long as you have them placed into the top level of the `app` directory. After moving [all supported files](/docs/app/getting-started/metadata-and-og-images#file-based-metadata) into the `app` directory you can safely delete their `<link>` tags:\n \n ```tsx filename=\"app/layout.tsx\" switcher\n export default function RootLayout({\n@@ -227,7 +227,7 @@ export default function RootLayout({ children }) {\n }\n ```\n \n-Finally, Next.js can manage your last `<head>` tags with the [Metadata API](/docs/app/building-your-application/optimizing/metadata). Move your final metadata info into an exported [`metadata` object](/docs/app/api-reference/functions/generate-metadata#metadata-object):\n+Finally, Next.js can manage your last `<head>` tags with the [Metadata API](/docs/app/getting-started/metadata-and-og-images). Move your final metadata info into an exported [`metadata` object](/docs/app/api-reference/functions/generate-metadata#metadata-object):\n \n ```tsx filename=\"app/layout.tsx\" switcher\n import type { Metadata } from 'next'\n@@ -269,7 +269,7 @@ export default function RootLayout({ children }) {\n }\n ```\n \n-With the above changes, you shifted from declaring everything in your `index.html` to using Next.js' convention-based approach built into the framework ([Metadata API](/docs/app/building-your-application/optimizing/metadata)). This approach enables you to more easily improve your SEO and web shareability of your pages.\n+With the above changes, you shifted from declaring everything in your `index.html` to using Next.js' convention-based approach built into the framework ([Metadata API](/docs/app/getting-started/metadata-and-og-images)). This approach enables you to more easily improve your SEO and web shareability of your pages.\n \n ### Step 5: Styles\n "
        },
        {
            "sha": "de4b9efaed990a026131a09e48a598dab4098823",
            "filename": "docs/01-app/02-guides/migrating/from-vite.mdx",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/vercel/next.js/blob/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F02-guides%2Fmigrating%2Ffrom-vite.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F02-guides%2Fmigrating%2Ffrom-vite.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fmigrating%2Ffrom-vite.mdx?ref=d05288de2e6b0d6832c6a97f96db9b534b33aefe",
            "patch": "@@ -249,11 +249,11 @@ export default function RootLayout({ children }) {\n }\n ```\n \n-5. Any [metadata files](/docs/app/building-your-application/optimizing/metadata#file-based-metadata)\n+5. Any [metadata files](/docs/app/getting-started/metadata-and-og-images#file-based-metadata)\n    such as `favicon.ico`, `icon.png`, `robots.txt` are automatically added to the application\n    `<head>` tag as long as you have them placed into the top level of the `app` directory. After\n    moving\n-   [all supported files](/docs/app/building-your-application/optimizing/metadata#file-based-metadata)\n+   [all supported files](/docs/app/getting-started/metadata-and-og-images#file-based-metadata)\n    into the `app` directory you can safely delete their `<link>` tags:\n \n ```tsx filename=\"app/layout.tsx\" switcher\n@@ -293,7 +293,7 @@ export default function RootLayout({ children }) {\n ```\n \n 6. Finally, Next.js can manage your last `<head>` tags with the\n-   [Metadata API](/docs/app/building-your-application/optimizing/metadata). Move your final metadata\n+   [Metadata API](/docs/app/getting-started/metadata-and-og-images). Move your final metadata\n    info into an exported\n    [`metadata` object](/docs/app/api-reference/functions/generate-metadata#metadata-object):\n \n@@ -339,7 +339,7 @@ export default function RootLayout({ children }) {\n \n With the above changes, you shifted from declaring everything in your `index.html` to using Next.js'\n convention-based approach built into the framework\n-([Metadata API](/docs/app/building-your-application/optimizing/metadata)). This approach enables you\n+([Metadata API](/docs/app/getting-started/metadata-and-og-images)). This approach enables you\n to more easily improve your SEO and web shareability of your pages.\n \n ### Step 5: Create the Entrypoint Page"
        },
        {
            "sha": "5029905f221c16962ae80b2526609477665b956f",
            "filename": "docs/01-app/02-guides/production-checklist.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F02-guides%2Fproduction-checklist.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F02-guides%2Fproduction-checklist.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fproduction-checklist.mdx?ref=d05288de2e6b0d6832c6a97f96db9b534b33aefe",
            "patch": "@@ -108,7 +108,7 @@ While building your application, we recommend using the following features to en\n \n <AppOnly>\n \n-- **[Metadata API](/docs/app/building-your-application/optimizing/metadata):** Use the Metadata API to improve your application's Search Engine Optimization (SEO) by adding page titles, descriptions, and more.\n+- **[Metadata API](/docs/app/getting-started/metadata-and-og-images):** Use the Metadata API to improve your application's Search Engine Optimization (SEO) by adding page titles, descriptions, and more.\n - **[Open Graph (OG) images](/docs/app/api-reference/file-conventions/metadata/opengraph-image):** Create OG images to prepare your application for social sharing.\n - **[Sitemaps](/docs/app/api-reference/functions/generate-sitemaps) and [Robots](/docs/app/api-reference/file-conventions/metadata/robots):** Help Search Engines crawl and index your pages by generating sitemaps and robots files.\n "
        },
        {
            "sha": "6b2d0aa72907cc6a2e5942aa3ed5a540606a8ba2",
            "filename": "docs/01-app/02-guides/upgrading/codemods.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F02-guides%2Fupgrading%2Fcodemods.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F02-guides%2Fupgrading%2Fcodemods.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F02-guides%2Fupgrading%2Fcodemods.mdx?ref=d05288de2e6b0d6832c6a97f96db9b534b33aefe",
            "patch": "@@ -208,7 +208,7 @@ export function GET(req: NextRequest) {\n npx @next/codemod@latest next-og-import .\n ```\n \n-This codemod moves transforms imports from `next/server` to `next/og` for usage of [Dynamic OG Image Generation](/docs/app/building-your-application/optimizing/metadata#dynamic-image-generation).\n+This codemod moves transforms imports from `next/server` to `next/og` for usage of [Dynamic OG Image Generation](/docs/app/getting-started/metadata-and-og-images#generated-open-graph-images).\n \n For example:\n "
        },
        {
            "sha": "c384ff5657536e1a69755359d5e0bd40c0176ce0",
            "filename": "docs/01-app/03-building-your-application/01-routing/03-layouts-and-templates.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F03-building-your-application%2F01-routing%2F03-layouts-and-templates.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F03-building-your-application%2F01-routing%2F03-layouts-and-templates.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-building-your-application%2F01-routing%2F03-layouts-and-templates.mdx?ref=d05288de2e6b0d6832c6a97f96db9b534b33aefe",
            "patch": "@@ -187,7 +187,7 @@ In terms of nesting, `template.js` is rendered between a layout and its children\n \n ### Metadata\n \n-You can modify the `<head>` HTML elements such as `title` and `meta` using the [Metadata APIs](/docs/app/building-your-application/optimizing/metadata).\n+You can modify the `<head>` HTML elements such as `title` and `meta` using the [Metadata APIs](/docs/app/getting-started/metadata-and-og-images).\n \n Metadata can be defined by exporting a [`metadata` object](/docs/app/api-reference/functions/generate-metadata#the-metadata-object) or [`generateMetadata` function](/docs/app/api-reference/functions/generate-metadata#generatemetadata-function) in a [`layout.js`](/docs/app/api-reference/file-conventions/layout) or [`page.js`](/docs/app/api-reference/file-conventions/page) file.\n "
        },
        {
            "sha": "8705b459e7d6afe0d9a01e82870ee6835be7d3dd",
            "filename": "docs/01-app/03-building-your-application/06-optimizing/04-metadata.mdx",
            "status": "removed",
            "additions": 0,
            "deletions": 365,
            "changes": 365,
            "blob_url": "https://github.com/vercel/next.js/blob/6e3af1b0febafc03de9f1aa426466c1ecaa658a5/docs%2F01-app%2F03-building-your-application%2F06-optimizing%2F04-metadata.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/6e3af1b0febafc03de9f1aa426466c1ecaa658a5/docs%2F01-app%2F03-building-your-application%2F06-optimizing%2F04-metadata.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F03-building-your-application%2F06-optimizing%2F04-metadata.mdx?ref=6e3af1b0febafc03de9f1aa426466c1ecaa658a5",
            "patch": "@@ -1,365 +0,0 @@\n----\n-title: Metadata\n-description: Use the Metadata API to define metadata in any layout or page.\n-related:\n-  description: View all the Metadata API options.\n-  links:\n-    - app/api-reference/functions/generate-metadata\n-    - app/api-reference/file-conventions/metadata\n-    - app/api-reference/functions/generate-viewport\n----\n-\n-Next.js has a Metadata API that can be used to define your application metadata (e.g. `meta` and `link` tags inside your HTML `head` element) for improved SEO and web shareability.\n-\n-There are two ways you can add metadata to your application:\n-\n-- **Config-based Metadata**: Export a [static `metadata` object](/docs/app/api-reference/functions/generate-metadata#metadata-object) or a dynamic [`generateMetadata` function](/docs/app/api-reference/functions/generate-metadata#generatemetadata-function) in a `layout.js` or `page.js` file.\n-- **File-based Metadata**: Add static or dynamically generated special files to route segments.\n-\n-With both these options, Next.js will automatically generate the relevant `<head>` elements for your pages. You can also create dynamic OG images using the [`ImageResponse`](/docs/app/api-reference/functions/image-response) constructor.\n-\n-## Static Metadata\n-\n-To define static metadata, export a [`Metadata` object](/docs/app/api-reference/functions/generate-metadata#metadata-object) from a `layout.js` or static `page.js` file.\n-\n-```tsx filename=\"layout.tsx | page.tsx\" switcher\n-import type { Metadata } from 'next'\n-\n-export const metadata: Metadata = {\n-  title: '...',\n-  description: '...',\n-}\n-\n-export default function Page() {}\n-```\n-\n-```jsx filename=\"layout.js | page.js\" switcher\n-export const metadata = {\n-  title: '...',\n-  description: '...',\n-}\n-\n-export default function Page() {}\n-```\n-\n-For all the available options, see the [API Reference](/docs/app/api-reference/functions/generate-metadata).\n-\n-## Dynamic Metadata\n-\n-You can use `generateMetadata` function to `fetch` metadata that requires dynamic values.\n-\n-```tsx filename=\"app/products/[id]/page.tsx\" switcher\n-import type { Metadata, ResolvingMetadata } from 'next'\n-\n-type Props = {\n-  params: Promise<{ id: string }>\n-  searchParams: Promise<{ [key: string]: string | string[] | undefined }>\n-}\n-\n-export async function generateMetadata(\n-  { params, searchParams }: Props,\n-  parent: ResolvingMetadata\n-): Promise<Metadata> {\n-  // read route params\n-  const { id } = await params\n-\n-  // fetch data\n-  const product = await fetch(`https://.../${id}`).then((res) => res.json())\n-\n-  // optionally access and extend (rather than replace) parent metadata\n-  const previousImages = (await parent).openGraph?.images || []\n-\n-  return {\n-    title: product.title,\n-    openGraph: {\n-      images: ['/some-specific-page-image.jpg', ...previousImages],\n-    },\n-  }\n-}\n-\n-export default function Page({ params, searchParams }: Props) {}\n-```\n-\n-```jsx filename=\"app/products/[id]/page.js\" switcher\n-export async function generateMetadata({ params, searchParams }, parent) {\n-  // read route params\n-  const { id } = await params\n-\n-  // fetch data\n-  const product = await fetch(`https://.../${id}`).then((res) => res.json())\n-\n-  // optionally access and extend (rather than replace) parent metadata\n-  const previousImages = (await parent).openGraph?.images || []\n-\n-  return {\n-    title: product.title,\n-    openGraph: {\n-      images: ['/some-specific-page-image.jpg', ...previousImages],\n-    },\n-  }\n-}\n-\n-export default function Page({ params, searchParams }) {}\n-```\n-\n-For all the available params, see the [API Reference](/docs/app/api-reference/functions/generate-metadata).\n-\n-> **Good to know**:\n->\n-> - Both static and dynamic metadata through `generateMetadata` are **only supported in Server Components**.\n-> - `fetch` requests are automatically [memoized](/docs/app/deep-dive/caching#request-memoization) for the same data across `generateMetadata`, `generateStaticParams`, Layouts, Pages, and Server Components. React [`cache` can be used](/docs/app/deep-dive/caching#react-cache-function) if `fetch` is unavailable.\n-> - Next.js will wait for data fetching inside `generateMetadata` to complete before streaming UI to the client. This guarantees the first part of a [streamed response](/docs/app/building-your-application/routing/loading-ui-and-streaming) includes `<head>` tags.\n-\n-## File-based metadata\n-\n-These special files are available for metadata:\n-\n-- [favicon.ico, apple-icon.jpg, and icon.jpg](/docs/app/api-reference/file-conventions/metadata/app-icons)\n-- [opengraph-image.jpg and twitter-image.jpg](/docs/app/api-reference/file-conventions/metadata/opengraph-image)\n-- [robots.txt](/docs/app/api-reference/file-conventions/metadata/robots)\n-- [sitemap.xml](/docs/app/api-reference/file-conventions/metadata/sitemap)\n-\n-You can use these for static metadata, or you can programmatically generate these files with code.\n-\n-For implementation and examples, see the [Metadata Files](/docs/app/api-reference/file-conventions/metadata) API Reference and [Dynamic Image Generation](#dynamic-image-generation).\n-\n-## Behavior\n-\n-File-based metadata has the higher priority and will override any config-based metadata.\n-\n-### Default Fields\n-\n-There are two default `meta` tags that are always added even if a route doesn't define metadata:\n-\n-- The [meta charset tag](https://developer.mozilla.org/docs/Web/HTML/Element/meta#attr-charset) sets the character encoding for the website.\n-- The [meta viewport tag](https://developer.mozilla.org/docs/Web/HTML/Viewport_meta_tag) sets the viewport width and scale for the website to adjust for different devices.\n-\n-```html\n-<meta charset=\"utf-8\" />\n-<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n-```\n-\n-> **Good to know**: You can overwrite the default [`viewport`](/docs/app/api-reference/functions/generate-metadata#viewport) meta tag.\n-\n-### Ordering\n-\n-Metadata is evaluated in order, starting from the root segment down to the segment closest to the final `page.js` segment. For example:\n-\n-1. `app/layout.tsx` (Root Layout)\n-2. `app/blog/layout.tsx` (Nested Blog Layout)\n-3. `app/blog/[slug]/page.tsx` (Blog Page)\n-\n-### Merging\n-\n-Following the [evaluation order](#ordering), Metadata objects exported from multiple segments in the same route are **shallowly** merged together to form the final metadata output of a route. Duplicate keys are **replaced** based on their ordering.\n-\n-This means metadata with nested fields such as [`openGraph`](/docs/app/api-reference/functions/generate-metadata#opengraph) and [`robots`](/docs/app/api-reference/functions/generate-metadata#robots) that are defined in an earlier segment are **overwritten** by the last segment to define them.\n-\n-#### Overwriting fields\n-\n-```jsx filename=\"app/layout.js\"\n-export const metadata = {\n-  title: 'Acme',\n-  openGraph: {\n-    title: 'Acme',\n-    description: 'Acme is a...',\n-  },\n-}\n-```\n-\n-```jsx filename=\"app/blog/page.js\"\n-export const metadata = {\n-  title: 'Blog',\n-  openGraph: {\n-    title: 'Blog',\n-  },\n-}\n-\n-// Output:\n-// <title>Blog</title>\n-// <meta property=\"og:title\" content=\"Blog\" />\n-```\n-\n-In the example above:\n-\n-- `title` from `app/layout.js` is **replaced** by `title` in `app/blog/page.js`.\n-- All `openGraph` fields from `app/layout.js` are **replaced** in `app/blog/page.js` because `app/blog/page.js` sets `openGraph` metadata. Note the absence of `openGraph.description`.\n-\n-If you'd like to share some nested fields between segments while overwriting others, you can pull them out into a separate variable:\n-\n-```jsx filename=\"app/shared-metadata.js\"\n-export const openGraphImage = { images: ['http://...'] }\n-```\n-\n-```jsx filename=\"app/page.js\"\n-import { openGraphImage } from './shared-metadata'\n-\n-export const metadata = {\n-  openGraph: {\n-    ...openGraphImage,\n-    title: 'Home',\n-  },\n-}\n-```\n-\n-```jsx filename=\"app/about/page.js\"\n-import { openGraphImage } from '../shared-metadata'\n-\n-export const metadata = {\n-  openGraph: {\n-    ...openGraphImage,\n-    title: 'About',\n-  },\n-}\n-```\n-\n-In the example above, the OG image is shared between `app/layout.js` and `app/about/page.js` while the titles are different.\n-\n-#### Inheriting fields\n-\n-```jsx filename=\"app/layout.js\"\n-export const metadata = {\n-  title: 'Acme',\n-  openGraph: {\n-    title: 'Acme',\n-    description: 'Acme is a...',\n-  },\n-}\n-```\n-\n-```jsx filename=\"app/about/page.js\"\n-export const metadata = {\n-  title: 'About',\n-}\n-\n-// Output:\n-// <title>About</title>\n-// <meta property=\"og:title\" content=\"Acme\" />\n-// <meta property=\"og:description\" content=\"Acme is a...\" />\n-```\n-\n-**Notes**\n-\n-- `title` from `app/layout.js` is **replaced** by `title` in `app/about/page.js`.\n-- All `openGraph` fields from `app/layout.js` are **inherited** in `app/about/page.js` because `app/about/page.js` doesn't set `openGraph` metadata.\n-\n-## Dynamic Image Generation\n-\n-The `ImageResponse` constructor allows you to generate dynamic images using JSX and CSS. This is useful for creating social media images such as Open Graph images, Twitter cards, and more.\n-\n-To use it, you can import `ImageResponse` from `next/og`:\n-\n-```jsx filename=\"app/about/opengraph-image.js\"\n-import { ImageResponse } from 'next/og'\n-\n-export default function OG() {\n-  return new ImageResponse(\n-    (\n-      <div\n-        style={{\n-          fontSize: 128,\n-          background: 'white',\n-          width: '100%',\n-          height: '100%',\n-          display: 'flex',\n-          textAlign: 'center',\n-          alignItems: 'center',\n-          justifyContent: 'center',\n-        }}\n-      >\n-        Hello world!\n-      </div>\n-    ),\n-    {\n-      width: 1200,\n-      height: 600,\n-    }\n-  )\n-}\n-```\n-\n-`ImageResponse` integrates well with other Next.js APIs, including [Route Handlers](/docs/app/building-your-application/routing/route-handlers) and file-based Metadata. For example, you can use `ImageResponse` in a `opengraph-image.tsx` file to generate Open Graph images at build time or dynamically at request time.\n-\n-`ImageResponse` supports common CSS properties including flexbox and absolute positioning, custom fonts, text wrapping, centering, and nested images. [See the full list of supported CSS properties](/docs/app/api-reference/functions/image-response).\n-\n-> **Good to know**:\n->\n-> - Examples are available in the [Vercel OG Playground](https://og-playground.vercel.app/).\n-> - `ImageResponse` uses [@vercel/og](https://vercel.com/docs/concepts/functions/edge-functions/og-image-generation), [Satori](https://github.com/vercel/satori), and Resvg to convert HTML and CSS into PNG.\n-> - Only flexbox and a subset of CSS properties are supported. Advanced layouts (e.g. `display: grid`) will not work.\n-> - Maximum bundle size of `500KB`. The bundle size includes your JSX, CSS, fonts, images, and any other assets. If you exceed the limit, consider reducing the size of any assets or fetching at runtime.\n-> - Only `ttf`, `otf`, and `woff` font formats are supported. To maximize the font parsing speed, `ttf` or `otf` are preferred over `woff`.\n-\n-## JSON-LD\n-\n-[JSON-LD](https://json-ld.org/) is a format for structured data that can be used by search engines to understand your content. For example, you can use it to describe a person, an event, an organization, a movie, a book, a recipe, and many other types of entities.\n-\n-Our current recommendation for JSON-LD is to render structured data as a `<script>` tag in your `layout.js` or `page.js` components. For example:\n-\n-```tsx filename=\"app/products/[id]/page.tsx\" switcher\n-export default async function Page({ params }) {\n-  const { id } = await params\n-  const product = await getProduct(id)\n-\n-  const jsonLd = {\n-    '@context': 'https://schema.org',\n-    '@type': 'Product',\n-    name: product.name,\n-    image: product.image,\n-    description: product.description,\n-  }\n-\n-  return (\n-    <section>\n-      {/* Add JSON-LD to your page */}\n-      <script\n-        type=\"application/ld+json\"\n-        dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}\n-      />\n-      {/* ... */}\n-    </section>\n-  )\n-}\n-```\n-\n-```jsx filename=\"app/products/[id]/page.js\" switcher\n-export default async function Page({ params }) {\n-  const { id } = await params\n-  const product = await getProduct(id)\n-\n-  const jsonLd = {\n-    '@context': 'https://schema.org',\n-    '@type': 'Product',\n-    name: product.name,\n-    image: product.image,\n-    description: product.description,\n-  }\n-\n-  return (\n-    <section>\n-      {/* Add JSON-LD to your page */}\n-      <script\n-        type=\"application/ld+json\"\n-        dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}\n-      />\n-      {/* ... */}\n-    </section>\n-  )\n-}\n-```\n-\n-You can validate and test your structured data with the [Rich Results Test](https://search.google.com/test/rich-results) for Google or the generic [Schema Markup Validator](https://validator.schema.org/).\n-\n-You can type your JSON-LD with TypeScript using community packages like [`schema-dts`](https://www.npmjs.com/package/schema-dts):\n-\n-```tsx\n-import { Product, WithContext } from 'schema-dts'\n-\n-const jsonLd: WithContext<Product> = {\n-  '@context': 'https://schema.org',\n-  '@type': 'Product',\n-  name: 'Next.js Sticker',\n-  image: 'https://nextjs.org/imgs/sticker.png',\n-  description: 'Dynamic at the speed of static.',\n-}\n-```"
        },
        {
            "sha": "8ccac7ce4ea33596fb3d2340b86c6d26fed3672f",
            "filename": "docs/01-app/05-api-reference/03-file-conventions/layout.mdx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/vercel/next.js/blob/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F05-api-reference%2F03-file-conventions%2Flayout.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F05-api-reference%2F03-file-conventions%2Flayout.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F03-file-conventions%2Flayout.mdx?ref=d05288de2e6b0d6832c6a97f96db9b534b33aefe",
            "patch": "@@ -113,7 +113,7 @@ export default function RootLayout({ children }) {\n ```\n \n - The root layout **must** define `<html>` and `<body>` tags.\n-  - You should **not** manually add `<head>` tags such as `<title>` and `<meta>` to root layouts. Instead, you should use the [Metadata API](/docs/app/building-your-application/optimizing/metadata) which automatically handles advanced requirements such as streaming and de-duplicating `<head>` elements.\n+  - You should **not** manually add `<head>` tags such as `<title>` and `<meta>` to root layouts. Instead, you should use the [Metadata API](/docs/app/getting-started/metadata-and-og-images) which automatically handles advanced requirements such as streaming and de-duplicating `<head>` elements.\n - You can use [route groups](/docs/app/building-your-application/routing/route-groups) to create multiple root layouts.\n   - Navigating **across multiple root layouts** will cause a **full page load** (as opposed to a client-side navigation). For example, navigating from `/cart` that uses `app/(shop)/layout.js` to `/blog` that uses `app/(marketing)/layout.js` will cause a full page load. This **only** applies to multiple root layouts.\n "
        },
        {
            "sha": "857f949a2ae4bd3da583df18799386a4ed335235",
            "filename": "docs/01-app/05-api-reference/04-functions/generate-image-metadata.mdx",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F05-api-reference%2F04-functions%2Fgenerate-image-metadata.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F05-api-reference%2F04-functions%2Fgenerate-image-metadata.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F04-functions%2Fgenerate-image-metadata.mdx?ref=d05288de2e6b0d6832c6a97f96db9b534b33aefe",
            "patch": "@@ -6,7 +6,6 @@ related:\n   description: View all the Metadata API options.\n   links:\n     - app/api-reference/file-conventions/metadata\n-    - app/building-your-application/optimizing/metadata\n ---\n \n You can use `generateImageMetadata` to generate different versions of one image or return multiple images for one route segment. This is useful for when you want to avoid hard-coding metadata values, such as for icons."
        },
        {
            "sha": "1aafee5110a2b82f4365056b0b6751244c3a4a09",
            "filename": "docs/01-app/05-api-reference/04-functions/generate-metadata.mdx",
            "status": "modified",
            "additions": 215,
            "deletions": 144,
            "changes": 359,
            "blob_url": "https://github.com/vercel/next.js/blob/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F05-api-reference%2F04-functions%2Fgenerate-metadata.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F05-api-reference%2F04-functions%2Fgenerate-metadata.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F04-functions%2Fgenerate-metadata.mdx?ref=d05288de2e6b0d6832c6a97f96db9b534b33aefe",
            "patch": "@@ -7,45 +7,9 @@ related:\n   links:\n     - app/api-reference/file-conventions/metadata\n     - app/api-reference/functions/generate-viewport\n-    - app/building-your-application/optimizing/metadata\n ---\n \n-This page covers all **Config-based Metadata** options with `generateMetadata` and the static metadata object.\n-\n-```tsx filename=\"layout.tsx | page.tsx\" switcher\n-import type { Metadata } from 'next'\n-\n-// either Static metadata\n-export const metadata: Metadata = {\n-  title: '...',\n-}\n-\n-// or Dynamic metadata\n-export async function generateMetadata({ params }) {\n-  return {\n-    title: '...',\n-  }\n-}\n-```\n-\n-```jsx filename=\"layout.js | page.js\" switcher\n-// either Static metadata\n-export const metadata = {\n-  title: '...',\n-}\n-\n-// or Dynamic metadata\n-export async function generateMetadata({ params }) {\n-  return {\n-    title: '...',\n-  }\n-}\n-```\n-\n-> **Good to know**:\n->\n-> - The `metadata` object and `generateMetadata` function exports are **only supported in Server Components**.\n-> - You cannot export both the `metadata` object and `generateMetadata` function from the same route segment.\n+You can use the `metadata` object or the `generateMetadata` function to define metadata.\n \n ## The `metadata` object\n \n@@ -71,7 +35,7 @@ export const metadata = {\n export default function Page() {}\n ```\n \n-See the [Metadata Fields](#metadata-fields) for a complete list of supported options.\n+> See the [Metadata Fields](#metadata-fields) for a complete list of supported options.\n \n ## `generateMetadata` function\n \n@@ -131,6 +95,17 @@ export async function generateMetadata({ params, searchParams }, parent) {\n export default function Page({ params, searchParams }) {}\n ```\n \n+> **Good to know**:\n+>\n+> - Metadata can be added to `layout.js` and `page.js` files.\n+> - Next.js will automatically resolve the metadata, and create the relevant `<head>` tags for the page.\n+> - The `metadata` object and `generateMetadata` function exports are **only supported in Server Components**.\n+> - You cannot export both the `metadata` object and `generateMetadata` function from the same route segment.\n+> - `fetch` requests inside `generateMetadata` are automatically [memoized](/docs/app/deep-dive/caching#request-memoization) for the same data across `generateMetadata`, `generateStaticParams`, Layouts, Pages, and Server Components.\n+> - React [`cache` can be used](/docs/app/deep-dive/caching#react-cache-function) if `fetch` is unavailable. -[ File-based metadat](/docs/app/api-reference/file-conventions/metadata) has the higher priority and will override the `metadata` object and `generateMetadata` function.\n+\n+## Reference\n+\n ### Parameters\n \n `generateMetadata` function accepts the following parameters:\n@@ -166,13 +141,15 @@ export default function Page({ params, searchParams }) {}\n > - `searchParams` are only available in `page.js` segments.\n > - The [`redirect()`](/docs/app/api-reference/functions/redirect) and [`notFound()`](/docs/app/api-reference/functions/not-found) Next.js methods can also be used inside `generateMetadata`.\n \n-## Metadata Fields\n+### Metadata Fields\n+\n+The following fields are supported:\n \n-### `title`\n+#### `title`\n \n-The `title` attribute is used to set the title of the document. It can be defined as a simple [string](#string) or an optional [template object](#template-object).\n+The `title` attribute is used to set the title of the document. It can be defined as a simple [string](#string) or an optional [template object](#template).\n \n-#### String\n+##### String\n \n ```jsx filename=\"layout.js | page.js\"\n export const metadata = {\n@@ -184,31 +161,7 @@ export const metadata = {\n <title>Next.js</title>\n ```\n \n-#### Template object\n-\n-```tsx filename=\"app/layout.tsx\" switcher\n-import type { Metadata } from 'next'\n-\n-export const metadata: Metadata = {\n-  title: {\n-    template: '...',\n-    default: '...',\n-    absolute: '...',\n-  },\n-}\n-```\n-\n-```jsx filename=\"app/layout.js\" switcher\n-export const metadata = {\n-  title: {\n-    default: '...',\n-    template: '...',\n-    absolute: '...',\n-  },\n-}\n-```\n-\n-##### Default\n+##### `default`\n \n `title.default` can be used to provide a **fallback title** to child route segments that don't define a `title`.\n \n@@ -230,7 +183,7 @@ export const metadata: Metadata = {}\n // Output: <title>Acme</title>\n ```\n \n-##### Template\n+##### `template`\n \n `title.template` can be used to add a prefix or a suffix to `titles` defined in **child** route segments.\n \n@@ -282,7 +235,7 @@ export const metadata = {\n >\n > - `title.template` has **no effect** if a route has not defined a `title` or `title.default`.\n \n-##### Absolute\n+##### `absolute`\n \n `title.absolute` can be used to provide a title that **ignores** `title.template` set in parent segments.\n \n@@ -352,7 +305,7 @@ export const metadata = {\n <meta name=\"description\" content=\"The React Framework for the Web\" />\n ```\n \n-### Basic Fields\n+### Other fields\n \n ```jsx filename=\"layout.js | page.js\"\n export const metadata = {\n@@ -385,7 +338,7 @@ export const metadata = {\n <meta name=\"format-detection\" content=\"telephone=no, address=no, email=no\" />\n ```\n \n-### `metadataBase`\n+#### `metadataBase`\n \n `metadataBase` is a convenience option to set a base URL prefix for `metadata` fields that require a fully qualified URL.\n \n@@ -1023,10 +976,95 @@ export const metadata = {\n <meta name=\"custom\" content=\"meta1\" /> <meta name=\"custom\" content=\"meta2\" />\n ```\n \n-## Unsupported Metadata\n+### Unsupported Metadata\n \n The following metadata types do not currently have built-in support. However, they can still be rendered in the layout or page itself.\n \n+### Types\n+\n+You can add type safety to your metadata by using the `Metadata` type. If you are using the [built-in TypeScript plugin](/docs/app/api-reference/config/typescript) in your IDE, you do not need to manually add the type, but you can still explicitly add it if you want.\n+\n+#### `metadata` object\n+\n+```tsx filename=\"layout.tsx | page.tsx\"\n+import type { Metadata } from 'next'\n+\n+export const metadata: Metadata = {\n+  title: 'Next.js',\n+}\n+```\n+\n+#### `generateMetadata` function\n+\n+##### Regular function\n+\n+```tsx filename=\"layout.tsx | page.tsx\"\n+import type { Metadata } from 'next'\n+\n+export function generateMetadata(): Metadata {\n+  return {\n+    title: 'Next.js',\n+  }\n+}\n+```\n+\n+##### Async function\n+\n+```tsx filename=\"layout.tsx | page.tsx\"\n+import type { Metadata } from 'next'\n+\n+export async function generateMetadata(): Promise<Metadata> {\n+  return {\n+    title: 'Next.js',\n+  }\n+}\n+```\n+\n+##### With segment props\n+\n+```tsx filename=\"layout.tsx | page.tsx\"\n+import type { Metadata } from 'next'\n+\n+type Props = {\n+  params: Promise<{ id: string }>\n+  searchParams: Promise<{ [key: string]: string | string[] | undefined }>\n+}\n+\n+export function generateMetadata({ params, searchParams }: Props): Metadata {\n+  return {\n+    title: 'Next.js',\n+  }\n+}\n+\n+export default function Page({ params, searchParams }: Props) {}\n+```\n+\n+##### With parent metadata\n+\n+```tsx filename=\"layout.tsx | page.tsx\"\n+import type { Metadata, ResolvingMetadata } from 'next'\n+\n+export async function generateMetadata(\n+  { params, searchParams }: Props,\n+  parent: ResolvingMetadata\n+): Promise<Metadata> {\n+  return {\n+    title: 'Next.js',\n+  }\n+}\n+```\n+\n+##### JavaScript Projects\n+\n+For JavaScript projects, you can use JSDoc to add type safety.\n+\n+```js filename=\"layout.js | page.js\"\n+/** @type {import(\"next\").Metadata} */\n+export const metadata = {\n+  title: 'Next.js',\n+}\n+```\n+\n | Metadata                      | Recommendation                                                                                                                                                                                                                                            |\n | ----------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n | `<meta http-equiv=\"...\">`     | Use appropriate HTTP Headers via [`redirect()`](/docs/app/api-reference/functions/redirect), [Middleware](/docs/app/building-your-application/routing/middleware#nextresponse), [Security Headers](/docs/app/api-reference/config/next-config-js/headers) |\n@@ -1073,7 +1111,7 @@ export function PreloadResources() {\n }\n ```\n \n-##### `<link rel=\"preload\">`\n+#### `<link rel=\"preload\">`\n \n Start loading a resource early in the page rendering (browser) lifecycle. [MDN Docs](https://developer.mozilla.org/docs/Web/HTML/Attributes/rel/preload).\n \n@@ -1097,7 +1135,7 @@ ReactDOM.preconnect(href: string, options?: { crossOrigin?: string })\n <link rel=\"preconnect\" href=\"...\" crossorigin />\n ```\n \n-##### `<link rel=\"dns-prefetch\">`\n+#### `<link rel=\"dns-prefetch\">`\n \n Attempt to resolve a domain name before resources get requested. [MDN Docs](https://developer.mozilla.org/docs/Web/HTML/Attributes/rel/dns-prefetch).\n \n@@ -1114,118 +1152,151 @@ ReactDOM.prefetchDNS(href: string)\n > - These methods are currently only supported in Client Components, which are still Server Side Rendered on initial page load.\n > - Next.js in-built features such as `next/font`, `next/image` and `next/script` automatically handle relevant resource hints.\n \n-## Types\n+## Behavior\n \n-You can add type safety to your metadata by using the `Metadata` type. If you are using the [built-in TypeScript plugin](/docs/app/api-reference/config/typescript) in your IDE, you do not need to manually add the type, but you can still explicitly add it if you want.\n+### Default Fields\n \n-### `metadata` object\n+There are two default `meta` tags that are always added even if a route doesn't define metadata:\n \n-```tsx filename=\"layout.tsx | page.tsx\"\n-import type { Metadata } from 'next'\n+- The [meta charset tag](https://developer.mozilla.org/docs/Web/HTML/Element/meta#attr-charset) sets the character encoding for the website.\n+- The [meta viewport tag](https://developer.mozilla.org/docs/Web/HTML/Viewport_meta_tag) sets the viewport width and scale for the website to adjust for different devices.\n \n-export const metadata: Metadata = {\n-  title: 'Next.js',\n-}\n+```html\n+<meta charset=\"utf-8\" />\n+<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n ```\n \n-### `generateMetadata` function\n+> **Good to know**: You can overwrite the default [`viewport`](/docs/app/api-reference/functions/generate-metadata#viewport) meta tag.\n \n-#### Regular function\n+### Streaming metadata\n \n-```tsx filename=\"layout.tsx | page.tsx\"\n-import type { Metadata } from 'next'\n+Metadata returned by `generateMetadata` is streamed to the client. This allows Next.js to inject metadata into the HTML as soon as it's resolved.\n \n-export function generateMetadata(): Metadata {\n-  return {\n-    title: 'Next.js',\n-  }\n-}\n-```\n+Since page metadata primarily targets bots and crawlers, Next.js will stream metadata for bots that can execute JavaScript and inspect the full page DOM (e.g. `Googlebot`). However, metadata will continue blocking the render of the page for **HTML-limited** bots (e.g. `Twitterbot`) as these cannot execute JavaScript while crawling.\n \n-#### Async function\n+Next.js automatically detects the user agent of incoming requests to determine whether to serve streaming metadata or fallback to blocking metadata.\n \n-```tsx filename=\"layout.tsx | page.tsx\"\n-import type { Metadata } from 'next'\n+If you need to customize this list, you can define them manually using the `htmlLimitedBots` option in `next.config.js`. Next.js will ensure user agents matching this regex receive blocking metadata when requesting your web page.\n \n-export async function generateMetadata(): Promise<Metadata> {\n-  return {\n-    title: 'Next.js',\n-  }\n+```ts filename=\"next.config.ts\" switcher\n+import type { NextConfig } from 'next'\n+\n+const config: NextConfig = {\n+  htmlLimitedBots: 'MySpecialBot|MyAnotherSpecialBot|SimpleCrawler',\n }\n+\n+export default config\n ```\n \n-#### With segment props\n+```js filename=\"next.config.js\" switcher\n+module.exports = {\n+  htmlLimitedBots: 'MySpecialBot|MyAnotherSpecialBot|SimpleCrawler',\n+}\n+```\n \n-```tsx filename=\"layout.tsx | page.tsx\"\n-import type { Metadata } from 'next'\n+Specifying a `htmlLimitedBots` config will override the Next.js' default list, allowing you full control over what user agents should opt into this behavior. This is advanced behavior, and the default should be sufficient for most cases.\n \n-type Props = {\n-  params: Promise<{ id: string }>\n-  searchParams: Promise<{ [key: string]: string | string[] | undefined }>\n-}\n+### Ordering\n \n-export function generateMetadata({ params, searchParams }: Props): Metadata {\n-  return {\n-    title: 'Next.js',\n-  }\n-}\n+Metadata is evaluated in order, starting from the root segment down to the segment closest to the final `page.js` segment. For example:\n \n-export default function Page({ params, searchParams }: Props) {}\n-```\n+1. `app/layout.tsx` (Root Layout)\n+2. `app/blog/layout.tsx` (Nested Blog Layout)\n+3. `app/blog/[slug]/page.tsx` (Blog Page)\n \n-#### With parent metadata\n+### Merging\n \n-```tsx filename=\"layout.tsx | page.tsx\"\n-import type { Metadata, ResolvingMetadata } from 'next'\n+Following the [evaluation order](#ordering), Metadata objects exported from multiple segments in the same route are **shallowly** merged together to form the final metadata output of a route. Duplicate keys are **replaced** based on their ordering.\n \n-export async function generateMetadata(\n-  { params, searchParams }: Props,\n-  parent: ResolvingMetadata\n-): Promise<Metadata> {\n-  return {\n-    title: 'Next.js',\n-  }\n-}\n-```\n+This means metadata with nested fields such as [`openGraph`](/docs/app/api-reference/functions/generate-metadata#opengraph) and [`robots`](/docs/app/api-reference/functions/generate-metadata#robots) that are defined in an earlier segment are **overwritten** by the last segment to define them.\n \n-#### JavaScript Projects\n+#### Overwriting fields\n \n-For JavaScript projects, you can use JSDoc to add type safety.\n+```jsx filename=\"app/layout.js\"\n+export const metadata = {\n+  title: 'Acme',\n+  openGraph: {\n+    title: 'Acme',\n+    description: 'Acme is a...',\n+  },\n+}\n+```\n \n-```js filename=\"layout.js | page.js\"\n-/** @type {import(\"next\").Metadata} */\n+```jsx filename=\"app/blog/page.js\"\n export const metadata = {\n-  title: 'Next.js',\n+  title: 'Blog',\n+  openGraph: {\n+    title: 'Blog',\n+  },\n }\n+\n+// Output:\n+// <title>Blog</title>\n+// <meta property=\"og:title\" content=\"Blog\" />\n ```\n \n-## Streaming metadata\n+In the example above:\n \n-Metadata returned by `generateMetadata` is streamed to the client. This allows Next.js to inject metadata into the HTML as soon as it's resolved.\n+- `title` from `app/layout.js` is **replaced** by `title` in `app/blog/page.js`.\n+- All `openGraph` fields from `app/layout.js` are **replaced** in `app/blog/page.js` because `app/blog/page.js` sets `openGraph` metadata. Note the absence of `openGraph.description`.\n \n-Since page metadata primarily targets bots and crawlers, Next.js will stream metadata for bots that can execute JavaScript and inspect the full page DOM (e.g. `Googlebot`). However, metadata will continue blocking the render of the page for **HTML-limited** bots (e.g. `Twitterbot`) as these cannot execute JavaScript while crawling.\n+If you'd like to share some nested fields between segments while overwriting others, you can pull them out into a separate variable:\n \n-Next.js automatically detects the user agent of incoming requests to determine whether to serve streaming metadata or fallback to blocking metadata.\n+```jsx filename=\"app/shared-metadata.js\"\n+export const openGraphImage = { images: ['http://...'] }\n+```\n \n-If you need to customize this list, you can define them manually using the `htmlLimitedBots` option in `next.config.js`. Next.js will ensure user agents matching this regex receive blocking metadata when requesting your web page.\n+```jsx filename=\"app/page.js\"\n+import { openGraphImage } from './shared-metadata'\n \n-```ts filename=\"next.config.ts\" switcher\n-import type { NextConfig } from 'next'\n+export const metadata = {\n+  openGraph: {\n+    ...openGraphImage,\n+    title: 'Home',\n+  },\n+}\n+```\n \n-const config: NextConfig = {\n-  htmlLimitedBots: 'MySpecialBot|MyAnotherSpecialBot|SimpleCrawler',\n+```jsx filename=\"app/about/page.js\"\n+import { openGraphImage } from '../shared-metadata'\n+\n+export const metadata = {\n+  openGraph: {\n+    ...openGraphImage,\n+    title: 'About',\n+  },\n }\n+```\n \n-export default config\n+In the example above, the OG image is shared between `app/layout.js` and `app/about/page.js` while the titles are different.\n+\n+#### Inheriting fields\n+\n+```jsx filename=\"app/layout.js\"\n+export const metadata = {\n+  title: 'Acme',\n+  openGraph: {\n+    title: 'Acme',\n+    description: 'Acme is a...',\n+  },\n+}\n ```\n \n-```js filename=\"next.config.js\" switcher\n-module.exports = {\n-  htmlLimitedBots: 'MySpecialBot|MyAnotherSpecialBot|SimpleCrawler',\n+```jsx filename=\"app/about/page.js\"\n+export const metadata = {\n+  title: 'About',\n }\n+\n+// Output:\n+// <title>About</title>\n+// <meta property=\"og:title\" content=\"Acme\" />\n+// <meta property=\"og:description\" content=\"Acme is a...\" />\n ```\n \n-Specifying a `htmlLimitedBots` config will override the Next.js' default list, allowing you full control over what user agents should opt into this behavior. This is advanced behavior, and the default should be sufficient for most cases.\n+**Notes**\n+\n+- `title` from `app/layout.js` is **replaced** by `title` in `app/about/page.js`.\n+- All `openGraph` fields from `app/layout.js` are **inherited** in `app/about/page.js` because `app/about/page.js` doesn't set `openGraph` metadata.\n \n ## Version History\n "
        },
        {
            "sha": "d79352f4a3f5bdba09b2673417015ef4d31604e5",
            "filename": "docs/01-app/05-api-reference/04-functions/generate-viewport.mdx",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/vercel/next.js/blob/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F05-api-reference%2F04-functions%2Fgenerate-viewport.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F05-api-reference%2F04-functions%2Fgenerate-viewport.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F04-functions%2Fgenerate-viewport.mdx?ref=d05288de2e6b0d6832c6a97f96db9b534b33aefe",
            "patch": "@@ -6,7 +6,6 @@ related:\n   description: View all the Metadata API options.\n   links:\n     - app/api-reference/file-conventions/metadata\n-    - app/building-your-application/optimizing/metadata\n ---\n \n You can customize the initial viewport of the page with the static `viewport` object or the dynamic `generateViewport` function."
        },
        {
            "sha": "791b325cb635575efd0bb0900979dd735d8dd9d0",
            "filename": "docs/01-app/05-api-reference/04-functions/image-response.mdx",
            "status": "modified",
            "additions": 169,
            "deletions": 2,
            "changes": 171,
            "blob_url": "https://github.com/vercel/next.js/blob/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F05-api-reference%2F04-functions%2Fimage-response.mdx",
            "raw_url": "https://github.com/vercel/next.js/raw/d05288de2e6b0d6832c6a97f96db9b534b33aefe/docs%2F01-app%2F05-api-reference%2F04-functions%2Fimage-response.mdx",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/docs%2F01-app%2F05-api-reference%2F04-functions%2Fimage-response.mdx?ref=d05288de2e6b0d6832c6a97f96db9b534b33aefe",
            "patch": "@@ -5,7 +5,11 @@ description: API Reference for the ImageResponse constructor.\n \n The `ImageResponse` constructor allows you to generate dynamic images using JSX and CSS. This is useful for generating social media images such as Open Graph images, Twitter cards, and more.\n \n-The following options are available for `ImageResponse`:\n+## Reference\n+\n+### Parameters\n+\n+The following parameters are available for `ImageResponse`:\n \n ```jsx\n import { ImageResponse } from 'next/og'\n@@ -32,10 +36,173 @@ new ImageResponse(\n )\n ```\n \n-## Supported CSS Properties\n+> Examples are available in the [Vercel OG Playground](https://og-playground.vercel.app/).\n+\n+### Supported HTML and CSS features\n+\n+`ImageResponse` supports common CSS properties including flexbox and absolute positioning, custom fonts, text wrapping, centering, and nested images.\n \n Please refer to [Satori’s documentation](https://github.com/vercel/satori#css) for a list of supported HTML and CSS features.\n \n+## Behavior\n+\n+- `ImageResponse` uses [@vercel/og](https://vercel.com/docs/concepts/functions/edge-functions/og-image-generation), [Satori](https://github.com/vercel/satori), and Resvg to convert HTML and CSS into PNG.\n+- Only flexbox and a subset of CSS properties are supported. Advanced layouts (e.g. `display: grid`) will not work.\n+- Maximum bundle size of `500KB`. The bundle size includes your JSX, CSS, fonts, images, and any other assets. If you exceed the limit, consider reducing the size of any assets or fetching at runtime.\n+- Only `ttf`, `otf`, and `woff` font formats are supported. To maximize the font parsing speed, `ttf` or `otf` are preferred over `woff`.\n+\n+## Examples\n+\n+### Route Handlers\n+\n+`ImageResponse` can be used in Route Handlers to generate images dynamically at request time.\n+\n+```js filename=\"app/api/route.js\"\n+import { ImageResponse } from 'next/og'\n+\n+export async function GET() {\n+  try {\n+    return new ImageResponse(\n+      (\n+        <div\n+          style={{\n+            height: '100%',\n+            width: '100%',\n+            display: 'flex',\n+            flexDirection: 'column',\n+            alignItems: 'center',\n+            justifyContent: 'center',\n+            backgroundColor: 'white',\n+            padding: '40px',\n+          }}\n+        >\n+          <div\n+            style={{\n+              fontSize: 60,\n+              fontWeight: 'bold',\n+              color: 'black',\n+              textAlign: 'center',\n+            }}\n+          >\n+            Welcome to My Site\n+          </div>\n+          <div\n+            style={{\n+              fontSize: 30,\n+              color: '#666',\n+              marginTop: '20px',\n+            }}\n+          >\n+            Generated with Next.js ImageResponse\n+          </div>\n+        </div>\n+      ),\n+      {\n+        width: 1200,\n+        height: 630,\n+      }\n+    )\n+  } catch (e) {\n+    console.log(`${e.message}`)\n+    return new Response(`Failed to generate the image`, {\n+      status: 500,\n+    })\n+  }\n+}\n+```\n+\n+### File-based Metadata\n+\n+You can use `ImageResponse` in a [`opengraph-image.tsx`](/docs/app/api-reference/file-conventions/metadata/opengraph-image) file to generate Open Graph images at build time or dynamically at request time.\n+\n+```tsx filename=\"app/opengraph-image.tsx\"\n+import { ImageResponse } from 'next/og'\n+\n+// Image metadata\n+export const alt = 'My site'\n+export const size = {\n+  width: 1200,\n+  height: 630,\n+}\n+\n+export const contentType = 'image/png'\n+\n+// Image generation\n+export default async function Image() {\n+  return new ImageResponse(\n+    (\n+      // ImageResponse JSX element\n+      <div\n+        style={{\n+          fontSize: 128,\n+          background: 'white',\n+          width: '100%',\n+          height: '100%',\n+          display: 'flex',\n+          alignItems: 'center',\n+          justifyContent: 'center',\n+        }}\n+      >\n+        My site\n+      </div>\n+    ),\n+    // ImageResponse options\n+    {\n+      // For convenience, we can re-use the exported opengraph-image\n+      // size config to also set the ImageResponse's width and height.\n+      ...size,\n+    }\n+  )\n+}\n+```\n+\n+### Custom fonts\n+\n+You can use custom fonts in your `ImageResponse` by providing a `fonts` array in the options.\n+\n+```tsx filename=\"app/opengraph-image.tsx\"\n+import { ImageResponse } from 'next/og'\n+import { readFile } from 'node:fs/promises'\n+import { join } from 'node:path'\n+\n+// Image metadata\n+export const alt = 'My site'\n+export const size = {\n+  width: 1200,\n+  height: 630,\n+}\n+\n+export const contentType = 'image/png'\n+\n+// Image generation\n+export default async function Image() {\n+  // Font loading, process.cwd() is Next.js project directory\n+  const interSemiBold = await readFile(\n+    join(process.cwd(), 'assets/Inter-SemiBold.ttf')\n+  )\n+\n+  return new ImageResponse(\n+    (\n+      // ...\n+    ),\n+    // ImageResponse options\n+    {\n+      // For convenience, we can re-use the exported opengraph-image\n+      // size config to also set the ImageResponse's width and height.\n+      ...size,\n+      fonts: [\n+        {\n+          name: 'Inter',\n+          data: interSemiBold,\n+          style: 'normal',\n+          weight: 400,\n+        },\n+      ],\n+    }\n+  )\n+}\n+```\n+\n ## Version History\n \n | Version   | Changes                                               |"
        }
    ],
    "stats": {
        "total": 1022,
        "additions": 492,
        "deletions": 530
    }
}