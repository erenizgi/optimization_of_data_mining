{
    "author": "sokra",
    "message": "[Turbopack] make `make_chunks` a non-turbo-tasks-function (#76042)\n\n### What?\n\nThis function is only called chunk_group and cells a big list of chunk items",
    "sha": "51fc5f679fb56d088ebff4c1ed61a639f26379da",
    "files": [
        {
            "sha": "f2287176a7dfb3e84bde9357a2904543926ddd8a",
            "filename": "turbopack/crates/turbopack-core/src/chunk/chunk_group.rs",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/vercel/next.js/blob/51fc5f679fb56d088ebff4c1ed61a639f26379da/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunk_group.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/51fc5f679fb56d088ebff4c1ed61a639f26379da/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunk_group.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunk_group.rs?ref=51fc5f679fb56d088ebff4c1ed61a639f26379da",
            "patch": "@@ -229,11 +229,10 @@ pub async fn make_chunk_group(\n     let chunks = make_chunks(\n         module_graph,\n         *chunking_context,\n-        Vc::cell(chunk_items),\n+        chunk_items,\n         \"\".into(),\n         Vc::cell(referenced_output_assets),\n     )\n-    .owned()\n     .await?;\n \n     Ok(MakeChunkGroupResult {"
        },
        {
            "sha": "0ca2c4f54814d52f8071f83efeba8f77ca97d17c",
            "filename": "turbopack/crates/turbopack-core/src/chunk/chunking/mod.rs",
            "status": "modified",
            "additions": 5,
            "deletions": 7,
            "changes": 12,
            "blob_url": "https://github.com/vercel/next.js/blob/51fc5f679fb56d088ebff4c1ed61a639f26379da/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunking%2Fmod.rs",
            "raw_url": "https://github.com/vercel/next.js/raw/51fc5f679fb56d088ebff4c1ed61a639f26379da/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunking%2Fmod.rs",
            "contents_url": "https://api.github.com/repos/vercel/next.js/contents/turbopack%2Fcrates%2Fturbopack-core%2Fsrc%2Fchunk%2Fchunking%2Fmod.rs?ref=51fc5f679fb56d088ebff4c1ed61a639f26379da",
            "patch": "@@ -9,8 +9,8 @@ use turbo_rcstr::RcStr;\n use turbo_tasks::{FxIndexMap, ReadRef, ResolvedVc, TryJoinIterExt, ValueToString, Vc};\n \n use super::{\n-    AsyncModuleInfo, Chunk, ChunkItem, ChunkItemTy, ChunkItemWithAsyncModuleInfo,\n-    ChunkItemsWithAsyncModuleInfo, ChunkType, ChunkingContext, Chunks,\n+    AsyncModuleInfo, Chunk, ChunkItem, ChunkItemTy, ChunkItemWithAsyncModuleInfo, ChunkType,\n+    ChunkingContext,\n };\n use crate::{\n     chunk::{\n@@ -47,17 +47,15 @@ async fn chunk_item_info(\n \n /// Creates chunks based on heuristics for the passed `chunk_items`. Also\n /// attaches `referenced_output_assets` to the first chunk.\n-#[turbo_tasks::function]\n pub async fn make_chunks(\n     module_graph: Vc<ModuleGraph>,\n     chunking_context: Vc<Box<dyn ChunkingContext>>,\n-    chunk_items: Vc<ChunkItemsWithAsyncModuleInfo>,\n+    chunk_items: Vec<ChunkItemWithAsyncModuleInfo>,\n     key_prefix: RcStr,\n     mut referenced_output_assets: Vc<OutputAssets>,\n-) -> Result<Vc<Chunks>> {\n+) -> Result<Vec<ResolvedVc<Box<dyn Chunk>>>> {\n     let chunking_configs = &*chunking_context.chunking_configs().await?;\n \n-    let chunk_items = chunk_items.await?;\n     let chunk_items = chunk_items\n         .iter()\n         .map(|c| async move {\n@@ -154,7 +152,7 @@ pub async fn make_chunks(\n         .try_join()\n         .await?;\n \n-    Ok(Vc::cell(resolved_chunks))\n+    Ok(resolved_chunks)\n }\n \n struct ChunkItemWithInfo {"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 6,
        "deletions": 9
    }
}