{
    "author": "ManuelFay",
    "message": "Fix pixel attention mask padding in smolvlm (#37497)\n\n* fix bad init\n\n* also modif smolvlm\n\n---------\n\nCo-authored-by: Raushan Turganbay <raushan@huggingface.co>",
    "sha": "c94c59fc47b87f4a82f89826d04513c3f3cf804f",
    "files": [
        {
            "sha": "b0677c4708d59016cd6690253f453451cb186b7a",
            "filename": "src/transformers/models/idefics3/image_processing_idefics3.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/c94c59fc47b87f4a82f89826d04513c3f3cf804f/src%2Ftransformers%2Fmodels%2Fidefics3%2Fimage_processing_idefics3.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/c94c59fc47b87f4a82f89826d04513c3f3cf804f/src%2Ftransformers%2Fmodels%2Fidefics3%2Fimage_processing_idefics3.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fidefics3%2Fimage_processing_idefics3.py?ref=c94c59fc47b87f4a82f89826d04513c3f3cf804f",
            "patch": "@@ -581,7 +581,7 @@ def empty_image(size, input_data_format):\n         padded_images_list = [\n             [empty_image(pad_size, data_format) for _ in range(max_num_images)] for _ in range(batch_size)\n         ]\n-        padded_masks = [[np.zeros(pad_size) for _ in range(max_num_images)] for _ in range(batch_size)]\n+        padded_masks = [[np.zeros(pad_size, dtype=np.int64) for _ in range(max_num_images)] for _ in range(batch_size)]\n \n         for batch_idx in range(batch_size):\n             for sample_idx, image in enumerate(images[batch_idx]):"
        },
        {
            "sha": "abf9353fd4ea8c919f337c46dadbc305039c96f5",
            "filename": "src/transformers/models/smolvlm/image_processing_smolvlm.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/c94c59fc47b87f4a82f89826d04513c3f3cf804f/src%2Ftransformers%2Fmodels%2Fsmolvlm%2Fimage_processing_smolvlm.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/c94c59fc47b87f4a82f89826d04513c3f3cf804f/src%2Ftransformers%2Fmodels%2Fsmolvlm%2Fimage_processing_smolvlm.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fsmolvlm%2Fimage_processing_smolvlm.py?ref=c94c59fc47b87f4a82f89826d04513c3f3cf804f",
            "patch": "@@ -578,7 +578,7 @@ def empty_image(size, input_data_format):\n         padded_images_list = [\n             [empty_image(pad_size, data_format) for _ in range(max_num_images)] for _ in range(batch_size)\n         ]\n-        padded_masks = [[np.zeros(pad_size) for _ in range(max_num_images)] for _ in range(batch_size)]\n+        padded_masks = [[np.zeros(pad_size, dtype=np.int64) for _ in range(max_num_images)] for _ in range(batch_size)]\n \n         for batch_idx in range(batch_size):\n             for sample_idx, image in enumerate(images[batch_idx]):"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}