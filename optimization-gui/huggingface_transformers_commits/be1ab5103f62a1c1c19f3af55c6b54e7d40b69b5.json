{
    "author": "Sai-Suraj-27",
    "message": "Update Dockerfiles to install packages inside a virtual environment (#39098)\n\n* Removed un-necessary virtual environment creation in Dockerfiles.\n\n* Updated Dockerfiles to install packages in a virtual environment.\n\n* use venv's python\n\n* update\n\n* build and trigger\n\n* trigger\n\n* build and trigger\n\n* build and trigger\n\n* build and trigger\n\n* build and trigger\n\n* build and trigger\n\n* build and trigger\n\n* update\n\n* update\n\n* update\n\n* update\n\n---------\n\nCo-authored-by: ydshieh <ydshieh@users.noreply.github.com>",
    "sha": "be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5",
    "files": [
        {
            "sha": "e900b894758e67471ce779076970a62b70563ebb",
            "filename": ".circleci/create_circleci_config.py",
            "status": "modified",
            "additions": 6,
            "deletions": 7,
            "changes": 13,
            "blob_url": "https://github.com/huggingface/transformers/blob/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/.circleci%2Fcreate_circleci_config.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/.circleci%2Fcreate_circleci_config.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.circleci%2Fcreate_circleci_config.py?ref=be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5",
            "patch": "@@ -109,7 +109,7 @@ def __post_init__(self):\n                 self.docker_image[0][\"image\"] = f\"{self.docker_image[0]['image']}:dev\"\n             print(f\"Using {self.docker_image} docker image\")\n         if self.install_steps is None:\n-            self.install_steps = [\"uv venv && uv pip install .\"]\n+            self.install_steps = [\"uv pip install .\"]\n         if self.pytest_options is None:\n             self.pytest_options = {}\n         if isinstance(self.tests_to_run, str):\n@@ -213,7 +213,7 @@ def job_name(self):\n     docker_image=[{\"image\": \"huggingface/transformers-torch-light\"}],\n     # networkx==3.3 (after #36957) cause some issues\n     # TODO: remove this once it works directly\n-    install_steps=[\"uv venv && uv pip install .\"],\n+    install_steps=[\"uv pip install .\"],\n     marker=\"generate\",\n     parallelism=6,\n )\n@@ -250,7 +250,7 @@ def job_name(self):\n     additional_env={\"OMP_NUM_THREADS\": 8},\n     docker_image=[{\"image\":\"huggingface/transformers-examples-torch\"}],\n     # TODO @ArthurZucker remove this once docker is easier to build\n-    install_steps=[\"uv venv && uv pip install . && uv pip install -r examples/pytorch/_tests_requirements.txt\"],\n+    install_steps=[\"uv pip install . && uv pip install -r examples/pytorch/_tests_requirements.txt\"],\n     pytest_num_workers=4,\n )\n \n@@ -259,7 +259,7 @@ def job_name(self):\n     additional_env={\"HUGGINGFACE_CO_STAGING\": True},\n     docker_image=[{\"image\":\"huggingface/transformers-torch-light\"}],\n     install_steps=[\n-        'uv venv && uv pip install .',\n+        'uv pip install .',\n         'git config --global user.email \"ci@dummy.com\"',\n         'git config --global user.name \"ci\"',\n     ],\n@@ -273,7 +273,6 @@ def job_name(self):\n     \"onnx\",\n     docker_image=[{\"image\":\"huggingface/transformers-torch-tf-light\"}],\n     install_steps=[\n-        \"uv venv\",\n         \"uv pip install .[testing,sentencepiece,onnxruntime,vision,rjieba]\",\n     ],\n     pytest_options={\"k onnx\": None},\n@@ -303,7 +302,7 @@ def job_name(self):\n     docker_image=[{\"image\": \"huggingface/transformers-torch-light\"}],\n     # networkx==3.3 (after #36957) cause some issues\n     # TODO: remove this once it works directly\n-    install_steps=[\"uv venv && uv pip install .[serving]\"],\n+    install_steps=[\"uv pip install .[serving]\"],\n     marker=\"not generate\",\n     parallelism=6,\n )\n@@ -321,7 +320,7 @@ def job_name(self):\n     additional_env={\"TRANSFORMERS_VERBOSITY\": \"error\", \"DATASETS_VERBOSITY\": \"error\", \"SKIP_CUDA_DOCTEST\": \"1\"},\n     install_steps=[\n         # Add an empty file to keep the test step running correctly even no file is selected to be tested.\n-        \"uv venv && pip install .\",\n+        \"uv pip install .\",\n         \"touch dummy.py\",\n         command,\n         \"cat pr_documentation_tests_temp.txt\","
        },
        {
            "sha": "e569307f92dc2748f4258a700a9873be0497817a",
            "filename": "docker/consistency.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fconsistency.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fconsistency.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fconsistency.dockerfile?ref=be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5",
            "patch": "@@ -4,7 +4,7 @@ USER root\n ARG REF=main\n RUN apt-get update && apt-get install -y time git g++ pkg-config make git-lfs\n ENV UV_PYTHON=/usr/local/bin/python\n-RUN pip install uv && uv venv && uv pip install --no-cache-dir -U pip setuptools GitPython\n+RUN pip install uv && uv pip install --no-cache-dir -U pip setuptools GitPython\n RUN uv pip install --no-cache-dir --upgrade 'torch' 'torchaudio' 'torchvision' --index-url https://download.pytorch.org/whl/cpu\n # tensorflow pin matching setup.py\n RUN uv pip install --no-cache-dir pypi-kenlm"
        },
        {
            "sha": "926f4668c1597c338fe126afe180dd671c7db128",
            "filename": "docker/custom-tokenizers.dockerfile",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fcustom-tokenizers.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fcustom-tokenizers.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fcustom-tokenizers.dockerfile?ref=be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5",
            "patch": "@@ -4,7 +4,7 @@ ARG REF=main\n USER root\n RUN apt-get update && apt-get install -y libsndfile1-dev espeak-ng time git cmake wget xz-utils build-essential g++5 libprotobuf-dev protobuf-compiler\n ENV UV_PYTHON=/usr/local/bin/python\n-RUN pip --no-cache-dir install uv && uv venv && uv pip install --no-cache-dir -U pip setuptools\n+RUN pip --no-cache-dir install uv && uv pip install --no-cache-dir -U pip setuptools\n \n RUN wget https://github.com/ku-nlp/jumanpp/releases/download/v2.0.0-rc3/jumanpp-2.0.0-rc3.tar.xz\n RUN tar xvf jumanpp-2.0.0-rc3.tar.xz\n@@ -20,7 +20,7 @@ RUN uv pip install --no-cache --upgrade 'torch' --index-url https://download.pyt\n RUN uv pip install --no-cache-dir  --no-deps accelerate --extra-index-url https://download.pytorch.org/whl/cpu\n RUN uv pip install  --no-cache-dir \"git+https://github.com/huggingface/transformers.git@${REF}#egg=transformers[ja,testing,sentencepiece,jieba,spacy,ftfy,rjieba]\" unidic unidic-lite\n # spacy is not used so not tested. Causes to failures. TODO fix later\n-RUN python3 -m unidic download\n+RUN uv run python -m unidic download\n RUN uv pip uninstall transformers\n \n RUN apt-get clean && rm -rf /var/lib/apt/lists/*"
        },
        {
            "sha": "b357821d045c0416a4b0b721fe9b4c6e34f002e8",
            "filename": "docker/examples-tf.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fexamples-tf.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fexamples-tf.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fexamples-tf.dockerfile?ref=be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5",
            "patch": "@@ -5,7 +5,7 @@ USER root\n RUN apt-get update && apt-get install -y libsndfile1-dev espeak-ng time git\n RUN apt-get install -y g++ cmake\n ENV UV_PYTHON=/usr/local/bin/python\n-RUN pip --no-cache-dir install uv && uv venv\n+RUN pip --no-cache-dir install uv\n RUN uv pip install --no-cache-dir -U pip setuptools albumentations seqeval\n RUN uv pip install  --upgrade --no-cache-dir \"git+https://github.com/huggingface/transformers.git@${REF}#egg=transformers[tf-cpu,sklearn,testing,sentencepiece,tf-speech,vision]\"\n RUN uv pip install --no-cache-dir  \"protobuf==3.20.3\""
        },
        {
            "sha": "7d11d385c1e1de9d86763a11dd76cd73bd15f0cf",
            "filename": "docker/examples-torch.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fexamples-torch.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fexamples-torch.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fexamples-torch.dockerfile?ref=be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5",
            "patch": "@@ -4,7 +4,7 @@ ARG REF=main\n USER root\n RUN apt-get update &&  apt-get install -y --no-install-recommends libsndfile1-dev espeak-ng time git g++ cmake pkg-config openssh-client git ffmpeg\n ENV UV_PYTHON=/usr/local/bin/python\n-RUN pip --no-cache-dir install uv && uv venv && uv pip install --no-cache-dir -U pip setuptools\n+RUN pip --no-cache-dir install uv && uv pip install --no-cache-dir -U pip setuptools\n RUN uv pip install --no-cache-dir 'torch' 'torchaudio' 'torchvision' 'torchcodec' --index-url https://download.pytorch.org/whl/cpu\n RUN uv pip install --no-deps timm accelerate --extra-index-url https://download.pytorch.org/whl/cpu\n RUN uv pip install --no-cache-dir librosa \"git+https://github.com/huggingface/transformers.git@${REF}#egg=transformers[sklearn,sentencepiece,vision,testing]\" seqeval albumentations jiwer"
        },
        {
            "sha": "21faf6e916d4a2102150b6068ed627b4ea99ef37",
            "filename": "docker/exotic-models.dockerfile",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fexotic-models.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fexotic-models.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fexotic-models.dockerfile?ref=be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5",
            "patch": "@@ -4,10 +4,10 @@ ARG REF=main\n USER root\n RUN apt-get update && apt-get install -y libsndfile1-dev espeak-ng time git libgl1-mesa-glx libgl1 g++ tesseract-ocr\n ENV UV_PYTHON=/usr/local/bin/python\n-RUN pip --no-cache-dir install uv &&  uv venv && uv pip install --no-cache-dir -U pip setuptools\n+RUN pip --no-cache-dir install uv && uv pip install --no-cache-dir -U pip setuptools\n RUN uv pip install --no-cache-dir 'torch' 'torchaudio' 'torchvision' --index-url https://download.pytorch.org/whl/cpu\n RUN uv pip install --no-cache-dir  --no-deps timm accelerate\n-RUN pip install -U --upgrade-strategy eager --no-cache-dir pytesseract python-Levenshtein opencv-python nltk\n+RUN uv pip install -U --upgrade-strategy eager --no-cache-dir pytesseract python-Levenshtein opencv-python nltk\n # RUN uv pip install --no-cache-dir natten==0.15.1+torch210cpu -f https://shi-labs.com/natten/wheels\n RUN uv pip install  --no-cache-dir \"git+https://github.com/huggingface/transformers.git@${REF}#egg=transformers[testing, vision]\" 'scikit-learn' 'torch-stft' 'nose'  'dataset'\n # RUN git clone https://github.com/facebookresearch/detectron2.git"
        },
        {
            "sha": "eff17cd8bf10b9023d6a5624cbf437ef461e0b84",
            "filename": "docker/jax-light.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fjax-light.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fjax-light.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fjax-light.dockerfile?ref=be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5",
            "patch": "@@ -4,7 +4,7 @@ ARG REF=main\n USER root\n RUN apt-get update && apt-get install -y libsndfile1-dev espeak-ng time git g++ cmake\n ENV UV_PYTHON=/usr/local/bin/python\n-RUN pip --no-cache-dir install uv &&  uv venv && uv pip install --no-cache-dir -U pip setuptools\n+RUN pip --no-cache-dir install uv && uv pip install --no-cache-dir -U pip setuptools\n RUN uv pip install --no-cache-dir \"scipy<1.13\" \"git+https://github.com/huggingface/transformers.git@${REF}#egg=transformers[flax,testing,sentencepiece,flax-speech,vision]\"\n RUN uv pip uninstall transformers\n RUN apt-get clean && rm -rf /var/lib/apt/lists/* && apt-get autoremove && apt-get autoclean"
        },
        {
            "sha": "9e22c2a80f14955bf7ce345e5fdbf1c1ab07fa28",
            "filename": "docker/pipeline-tf.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fpipeline-tf.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fpipeline-tf.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fpipeline-tf.dockerfile?ref=be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5",
            "patch": "@@ -4,7 +4,7 @@ ARG REF=main\n USER root\n RUN apt-get update && apt-get install -y libsndfile1-dev espeak-ng time git cmake g++\n ENV UV_PYTHON=/usr/local/bin/python\n-RUN pip --no-cache-dir install uv && uv venv && uv pip install --no-cache-dir -U pip setuptools\n+RUN pip --no-cache-dir install uv && uv pip install --no-cache-dir -U pip setuptools\n RUN uv pip install --no-cache-dir \"git+https://github.com/huggingface/transformers.git@${REF}#egg=transformers[sklearn,tf-cpu,testing,sentencepiece,tf-speech,vision]\"\n RUN uv pip install --no-cache-dir  \"protobuf==3.20.3\" tensorflow_probability\n RUN apt-get clean && rm -rf /var/lib/apt/lists/*"
        },
        {
            "sha": "b968372b5f69ba10f3ad39ae3ed618b36b372ffe",
            "filename": "docker/pipeline-torch.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fpipeline-torch.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fpipeline-torch.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fpipeline-torch.dockerfile?ref=be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5",
            "patch": "@@ -4,7 +4,7 @@ ARG REF=main\n USER root\n RUN apt-get update &&  apt-get install -y --no-install-recommends libsndfile1-dev espeak-ng time git pkg-config openssh-client git ffmpeg\n ENV UV_PYTHON=/usr/local/bin/python\n-RUN pip --no-cache-dir install uv && uv venv && uv pip install --no-cache-dir -U pip setuptools\n+RUN pip --no-cache-dir install uv && uv pip install --no-cache-dir -U pip setuptools\n RUN uv pip install --no-cache-dir 'torch' 'torchaudio' 'torchvision' 'torchcodec' --index-url https://download.pytorch.org/whl/cpu\n RUN uv pip install --no-deps timm accelerate --extra-index-url https://download.pytorch.org/whl/cpu\n RUN uv pip install --no-cache-dir librosa \"git+https://github.com/huggingface/transformers.git@${REF}#egg=transformers[sklearn,sentencepiece,vision,testing]\""
        },
        {
            "sha": "7a619e3156899fbe03b520f3f1edc47621b3aa9a",
            "filename": "docker/quality.dockerfile",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fquality.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Fquality.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fquality.dockerfile?ref=be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5",
            "patch": "@@ -2,8 +2,8 @@ FROM python:3.9-slim\n ENV PYTHONDONTWRITEBYTECODE=1\n ARG REF=main\n USER root\n-RUN apt-get update && apt-get install -y time git \n+RUN apt-get update && apt-get install -y time git\n ENV UV_PYTHON=/usr/local/bin/python\n-RUN pip install uv &&  uv venv\n+RUN pip install uv\n RUN uv pip install --no-cache-dir -U pip setuptools GitPython \"git+https://github.com/huggingface/transformers.git@${REF}#egg=transformers[ruff]\" urllib3\n RUN apt-get install -y jq curl && apt-get clean && rm -rf /var/lib/apt/lists/*"
        },
        {
            "sha": "9c4bb5a96daa1bf3591e0815319dcc9ac47fdbcc",
            "filename": "docker/tf-light.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Ftf-light.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Ftf-light.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftf-light.dockerfile?ref=be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5",
            "patch": "@@ -5,7 +5,7 @@ USER root\n RUN apt-get update &&  apt-get install -y --no-install-recommends libsndfile1-dev espeak-ng time git g++ pkg-config openssh-client git\n RUN apt-get install -y  cmake\n ENV UV_PYTHON=/usr/local/bin/python\n-RUN pip --no-cache-dir install uv && uv venv && uv pip install --no-cache-dir -U pip setuptools\n+RUN pip --no-cache-dir install uv && uv pip install --no-cache-dir -U pip setuptools\n RUN uv pip install  --upgrade --no-cache-dir \"git+https://github.com/huggingface/transformers.git@${REF}#egg=transformers[tf-cpu,sklearn,testing,sentencepiece,tf-speech,vision]\"\n RUN uv pip install --no-cache-dir  \"protobuf==3.20.3\"\n RUN uv pip uninstall transformers"
        },
        {
            "sha": "9c7835eca133146de4e336632613e8cdaeb714d9",
            "filename": "docker/torch-jax-light.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Ftorch-jax-light.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Ftorch-jax-light.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftorch-jax-light.dockerfile?ref=be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5",
            "patch": "@@ -4,7 +4,7 @@ ARG REF=main\n USER root\n RUN apt-get update &&  apt-get install -y libsndfile1-dev espeak-ng time git g++ cmake pkg-config openssh-client git\n ENV UV_PYTHON=/usr/local/bin/python\n-RUN pip --no-cache-dir install uv && uv venv && uv pip install --no-cache-dir -U pip setuptools\n+RUN pip --no-cache-dir install uv && uv pip install --no-cache-dir -U pip setuptools\n RUN uv pip install --no-deps accelerate\n RUN uv pip install --no-cache-dir 'torch' 'torchvision' 'torchaudio' --index-url https://download.pytorch.org/whl/cpu\n RUN uv pip install --no-cache-dir \"scipy<1.13\" \"git+https://github.com/huggingface/transformers.git@${REF}#egg=transformers[flax,audio,sklearn,sentencepiece,vision,testing]\""
        },
        {
            "sha": "5bb2ad93edbd7a20a39a164ce0fd99d4fec71c23",
            "filename": "docker/torch-light.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Ftorch-light.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Ftorch-light.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftorch-light.dockerfile?ref=be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5",
            "patch": "@@ -4,7 +4,7 @@ ARG REF=main\n USER root\n RUN apt-get update &&  apt-get install -y --no-install-recommends libsndfile1-dev espeak-ng time git g++ cmake pkg-config openssh-client git git-lfs ffmpeg\n ENV UV_PYTHON=/usr/local/bin/python\n-RUN pip --no-cache-dir install uv && uv venv && uv pip install --no-cache-dir -U pip setuptools\n+RUN pip --no-cache-dir install uv && uv pip install --no-cache-dir -U pip setuptools\n RUN uv pip install --no-cache-dir 'torch' 'torchaudio' 'torchvision' 'torchcodec' --index-url https://download.pytorch.org/whl/cpu\n RUN uv pip install --no-deps timm accelerate --extra-index-url https://download.pytorch.org/whl/cpu\n RUN uv pip install --no-cache-dir librosa \"git+https://github.com/huggingface/transformers.git@${REF}#egg=transformers[sklearn,sentencepiece,vision,testing,tiktoken,num2words,video]\""
        },
        {
            "sha": "e1ad5535156dd21efbe34386b8cd85977a466e91",
            "filename": "docker/torch-tf-light.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Ftorch-tf-light.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5/docker%2Ftorch-tf-light.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftorch-tf-light.dockerfile?ref=be1ab5103f62a1c1c19f3af55c6b54e7d40b69b5",
            "patch": "@@ -5,7 +5,7 @@ RUN echo ${REF}\n USER root\n RUN apt-get update &&  apt-get install -y --no-install-recommends libsndfile1-dev espeak-ng time git g++ cmake pkg-config openssh-client git git-lfs\n ENV UV_PYTHON=/usr/local/bin/python\n-RUN pip --no-cache-dir install uv && uv venv && uv pip install --no-cache-dir -U pip setuptools\n+RUN pip --no-cache-dir install uv && uv pip install --no-cache-dir -U pip setuptools\n RUN uv pip install --no-cache-dir  --no-deps accelerate --extra-index-url https://download.pytorch.org/whl/cpu \n RUN uv pip install --no-cache-dir 'torch' 'torchaudio' 'torchvision' --index-url https://download.pytorch.org/whl/cpu\n RUN git lfs install"
        }
    ],
    "stats": {
        "total": 45,
        "additions": 22,
        "deletions": 23
    }
}