{
    "author": "SohamPrabhu",
    "message": "Updated moonshine modelcard (#38711)\n\n* Moved the sources to the right\n\n* small Changes\n\n* Some Changes to moonshine\n\n* Added the install to pipline\n\n* updated the monshine model card\n\n* Update docs/source/en/model_doc/moonshine.md\n\nCo-authored-by: Steven Liu <59462357+stevhliu@users.noreply.github.com>\n\n* Update docs/source/en/model_doc/moonshine.md\n\nCo-authored-by: Steven Liu <59462357+stevhliu@users.noreply.github.com>\n\n* Update docs/source/en/model_doc/moonshine.md\n\nCo-authored-by: Steven Liu <59462357+stevhliu@users.noreply.github.com>\n\n* Update docs/source/en/model_doc/moonshine.md\n\nCo-authored-by: Steven Liu <59462357+stevhliu@users.noreply.github.com>\n\n* Update docs/source/en/model_doc/moonshine.md\n\nCo-authored-by: Steven Liu <59462357+stevhliu@users.noreply.github.com>\n\n* Updated Documentation According to changes\n\n* Fixed the model with the commits\n\n* Update moonshine.md\n\n* Update moshi.md\n\n---------\n\nCo-authored-by: Your Name <sohamprabhu@Mac.fios-router.home>\nCo-authored-by: Your Name <sohamprabhu@Sohams-MacBook-Air.local>\nCo-authored-by: Steven Liu <59462357+stevhliu@users.noreply.github.com>",
    "sha": "85f060e9b061d2302b4a6a1f97928463bc6436bd",
    "files": [
        {
            "sha": "4cd2eec774d4aa59b7e4a1283e7f4b83aeb0e237",
            "filename": "docs/source/en/model_doc/moonshine.md",
            "status": "modified",
            "additions": 67,
            "deletions": 26,
            "changes": 93,
            "blob_url": "https://github.com/huggingface/transformers/blob/85f060e9b061d2302b4a6a1f97928463bc6436bd/docs%2Fsource%2Fen%2Fmodel_doc%2Fmoonshine.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/85f060e9b061d2302b4a6a1f97928463bc6436bd/docs%2Fsource%2Fen%2Fmodel_doc%2Fmoonshine.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fmodel_doc%2Fmoonshine.md?ref=85f060e9b061d2302b4a6a1f97928463bc6436bd",
            "patch": "@@ -14,35 +14,76 @@ rendered properly in your Markdown viewer.\n \n -->\n \n-# Moonshine\n-\n-<div class=\"flex flex-wrap space-x-1\">\n-<img alt=\"PyTorch\" src=\"https://img.shields.io/badge/PyTorch-DE3412?style=flat&logo=pytorch&logoColor=white\">\n-<img alt=\"FlashAttention\" src=\"https://img.shields.io/badge/%E2%9A%A1%EF%B8%8E%20FlashAttention-eae0c8?style=flat\">\n-<img alt=\"SDPA\" src=\"https://img.shields.io/badge/SDPA-DE3412?style=flat&logo=pytorch&logoColor=white\">\n+<div style=\"float: right;\">\n+    <div class=\"flex flex-wrap space-x-1\">\n+          <img alt=\"PyTorch\" src=\"https://img.shields.io/badge/PyTorch-DE3412?style=flat&logo=pytorch&logoColor=white\">\n+          <img alt=\"FlashAttention\" src=\"https://img.shields.io/badge/%E2%9A%A1%EF%B8%8E%20FlashAttention-eae0c8?style=flat\">\n+          <img alt=\"SDPA\" src=\"https://img.shields.io/badge/SDPA-DE3412?style=flat&logo=pytorch&logoColor=white\">\n+    </div>\n </div>\n \n-## Overview\n-\n-The Moonshine model was proposed in [Moonshine: Speech Recognition for Live Transcription and Voice Commands\n-](https://arxiv.org/abs/2410.15608) by Nat Jeffries, Evan King, Manjunath Kudlur, Guy Nicholson, James Wang, Pete Warden.\n-\n-The abstract from the paper is the following:\n-\n-*This paper introduces Moonshine, a family of speech recognition models optimized for live transcription and voice command processing. Moonshine is based on an encoder-decoder transformer architecture and employs Rotary Position Embedding (RoPE) instead of traditional absolute position embeddings. The model is trained on speech segments of various lengths, but without using zero-padding, leading to greater efficiency for the encoder during inference time. When benchmarked against OpenAI's Whisper tiny-en, Moonshine Tiny demonstrates a 5x reduction in compute requirements for transcribing a 10-second speech segment while incurring no increase in word error rates across standard evaluation datasets. These results highlight Moonshine's potential for real-time and resource-constrained applications.*\n-\n-Tips:\n-\n-- Moonshine improves upon Whisper's architecture:\n-  1. It uses SwiGLU activation instead of GELU in the decoder layers\n-  2. Most importantly, it replaces absolute position embeddings with Rotary Position Embeddings (RoPE). This allows Moonshine to handle audio inputs of any length, unlike Whisper which is restricted to fixed 30-second windows.\n-\n-This model was contributed by [Eustache Le Bihan (eustlb)](https://huggingface.co/eustlb).\n-The original code can be found [here](https://github.com/usefulsensors/moonshine).\n-\n-## Resources\n+# Moonshine\n \n-- [Automatic speech recognition task guide](../tasks/asr)\n+[Moonshine](https://huggingface.co/papers/2410.15608) is an encoder-decoder speech recognition model optimized for real-time transcription and recognizing voice command. Instead of using traditional absolute position embeddings, Moonshine uses Rotary Position Embedding (RoPE) to handle speech with varying lengths without using padding. This improves efficiency during inference, making it ideal for resource-constrained devices.\n+\n+You can find all the original Moonshine checkpoints under the [Useful Sensors](https://huggingface.co/UsefulSensors) organization.\n+\n+> [!TIP]\n+> Click on the Moonshine models in the right sidebar for more examples of how to apply Moonshine to different speech recognition tasks.\n+\n+The example below demonstrates how to transcribe speech into text with [`Pipeline`] or the [`AutoModel`] class.\n+\n+<hfoptions id=\"usage\">\n+<hfoption id=\"Pipeline\">\n+\n+```py\n+import torch\n+from transformers import pipeline\n+\n+pipeline = pipeline(\n+    task=\"automatic-speech-recognition\",\n+    model=\"UsefulSensors/moonshine-base\",\n+    torch_dtype=torch.float16,\n+    device=0\n+)\n+pipeline(\"https://huggingface.co/datasets/Narsil/asr_dummy/resolve/main/mlk.flac\")\n+```\n+\n+</hfoption>\n+<hfoption id=\"AutoModel\">\n+\n+```py\n+# pip install datasets\n+import torch\n+from datasets import load_dataset\n+from transformers import AutoProcessor, MoonshineForConditionalGeneration\n+\n+processor = AutoProcessor.from_pretrained(\n+    \"UsefulSensors/moonshine-base\",\n+)\n+model = MoonshineForConditionalGeneration.from_pretrained(\n+    \"UsefulSensors/moonshine-base\",\n+    torch_dtype=torch.float16,\n+    device_map=\"auto\",\n+    attn_implementation=\"sdpa\"\n+).to(\"cuda\")\n+\n+ds = load_dataset(\"hf-internal-testing/librispeech_asr_dummy\", split=\"validation\")\n+audio_sample = ds[0][\"audio\"]\n+\n+input_features = processor(\n+    audio_sample[\"array\"],\n+    sampling_rate=audio_sample[\"sampling_rate\"],\n+    return_tensors=\"pt\"\n+)\n+input_features = input_features.to(\"cuda\", dtype=torch.float16)\n+\n+predicted_ids = model.generate(**input_features, cache_implementation=\"static\")\n+transcription = processor.batch_decode(predicted_ids, skip_special_tokens=True)\n+transcription[0]\n+```\n+</hfoption>\n+</hfoptions>\n \n ## MoonshineConfig\n "
        }
    ],
    "stats": {
        "total": 93,
        "additions": 67,
        "deletions": 26
    }
}