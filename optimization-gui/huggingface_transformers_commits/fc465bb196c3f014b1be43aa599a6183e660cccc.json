{
    "author": "ydshieh",
    "message": "pin `tensorflow_probability<0.22` in docker files (#34381)\n\n0.21\r\n\r\nCo-authored-by: ydshieh <ydshieh@users.noreply.github.com>",
    "sha": "fc465bb196c3f014b1be43aa599a6183e660cccc",
    "files": [
        {
            "sha": "7ad4e96d62cde743d9008ce43e425c89a3db88f9",
            "filename": "docker/transformers-all-latest-gpu/Dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/fc465bb196c3f014b1be43aa599a6183e660cccc/docker%2Ftransformers-all-latest-gpu%2FDockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/fc465bb196c3f014b1be43aa599a6183e660cccc/docker%2Ftransformers-all-latest-gpu%2FDockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftransformers-all-latest-gpu%2FDockerfile?ref=fc465bb196c3f014b1be43aa599a6183e660cccc",
            "patch": "@@ -26,7 +26,7 @@ RUN git clone https://github.com/huggingface/transformers && cd transformers &&\n # 1. Put several commands in a single `RUN` to avoid image/layer exporting issue. Could be revised in the future.\n # 2. Regarding `torch` part, We might need to specify proper versions for `torchvision` and `torchaudio`.\n #    Currently, let's not bother to specify their versions explicitly (so installed with their latest release versions).\n-RUN python3 -m pip install --no-cache-dir -U tensorflow==2.13 protobuf==3.20.3 tensorflow_text tensorflow_probability && python3 -m pip install --no-cache-dir -e ./transformers[dev,onnxruntime] && [ ${#PYTORCH} -gt 0 -a \"$PYTORCH\" != \"pre\" ] && VERSION='torch=='$PYTORCH'.*' ||  VERSION='torch'; echo \"export VERSION='$VERSION'\" >> ~/.profile && echo torch=$VERSION && [ \"$PYTORCH\" != \"pre\" ] && python3 -m pip install --no-cache-dir -U $VERSION torchvision torchaudio --extra-index-url https://download.pytorch.org/whl/$CUDA || python3 -m pip install --no-cache-dir -U --pre torch torchvision torchaudio --extra-index-url https://download.pytorch.org/whl/nightly/$CUDA\n+RUN python3 -m pip install --no-cache-dir -U tensorflow==2.13 protobuf==3.20.3 \"tensorflow_text<2.16\" \"tensorflow_probability<0.22\" && python3 -m pip install --no-cache-dir -e ./transformers[dev,onnxruntime] && [ ${#PYTORCH} -gt 0 -a \"$PYTORCH\" != \"pre\" ] && VERSION='torch=='$PYTORCH'.*' ||  VERSION='torch'; echo \"export VERSION='$VERSION'\" >> ~/.profile && echo torch=$VERSION && [ \"$PYTORCH\" != \"pre\" ] && python3 -m pip install --no-cache-dir -U $VERSION torchvision torchaudio --extra-index-url https://download.pytorch.org/whl/$CUDA || python3 -m pip install --no-cache-dir -U --pre torch torchvision torchaudio --extra-index-url https://download.pytorch.org/whl/nightly/$CUDA\n \n RUN python3 -m pip uninstall -y flax jax\n "
        },
        {
            "sha": "378491a6c600079b79d5d63b06e2d6f873d4b7f3",
            "filename": "docker/transformers-tensorflow-gpu/Dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/fc465bb196c3f014b1be43aa599a6183e660cccc/docker%2Ftransformers-tensorflow-gpu%2FDockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/fc465bb196c3f014b1be43aa599a6183e660cccc/docker%2Ftransformers-tensorflow-gpu%2FDockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftransformers-tensorflow-gpu%2FDockerfile?ref=fc465bb196c3f014b1be43aa599a6183e660cccc",
            "patch": "@@ -18,7 +18,7 @@ RUN [ ${#TENSORFLOW} -gt 0 ] && VERSION='tensorflow=='$TENSORFLOW'.*' ||  VERSIO\n RUN python3 -m pip uninstall -y torch flax\n RUN python3 -m pip install -U \"itsdangerous<2.1.0\"\n \n-RUN python3 -m pip install --no-cache-dir -U tensorflow_probability\n+RUN python3 -m pip install --no-cache-dir -U \"tensorflow_probability<0.22\"\n \n # When installing in editable mode, `transformers` is not recognized as a package.\n # this line must be added in order for python to be aware of transformers."
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}