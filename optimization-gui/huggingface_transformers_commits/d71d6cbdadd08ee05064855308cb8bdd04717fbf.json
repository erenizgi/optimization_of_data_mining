{
    "author": "ankane",
    "message": "Fix default revision for pipelines (#33395)\n\n* Fix default revision for pipelines\r\n\r\n* dummy change to trigger CI\r\n\r\n* revert dummy change\r\n\r\n* dummy change to trigger CI\r\n\r\n* revery dummy change\r\n\r\n---------\r\n\r\nCo-authored-by: Matt <rocketknight1@gmail.com>",
    "sha": "d71d6cbdadd08ee05064855308cb8bdd04717fbf",
    "files": [
        {
            "sha": "cdd24681cba80db562f94d6f62a1251ac9ed5533",
            "filename": "src/transformers/pipelines/__init__.py",
            "status": "modified",
            "additions": 41,
            "deletions": 40,
            "changes": 81,
            "blob_url": "https://github.com/huggingface/transformers/blob/d71d6cbdadd08ee05064855308cb8bdd04717fbf/src%2Ftransformers%2Fpipelines%2F__init__.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/d71d6cbdadd08ee05064855308cb8bdd04717fbf/src%2Ftransformers%2Fpipelines%2F__init__.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fpipelines%2F__init__.py?ref=d71d6cbdadd08ee05064855308cb8bdd04717fbf",
            "patch": "@@ -165,14 +165,14 @@\n         \"impl\": AutomaticSpeechRecognitionPipeline,\n         \"tf\": (),\n         \"pt\": (AutoModelForCTC, AutoModelForSpeechSeq2Seq) if is_torch_available() else (),\n-        \"default\": {\"model\": {\"pt\": (\"facebook/wav2vec2-base-960h\", \"55bb623\")}},\n+        \"default\": {\"model\": {\"pt\": (\"facebook/wav2vec2-base-960h\", \"22aad52\")}},\n         \"type\": \"multimodal\",\n     },\n     \"text-to-audio\": {\n         \"impl\": TextToAudioPipeline,\n         \"tf\": (),\n         \"pt\": (AutoModelForTextToWaveform, AutoModelForTextToSpectrogram) if is_torch_available() else (),\n-        \"default\": {\"model\": {\"pt\": (\"suno/bark-small\", \"645cfba\")}},\n+        \"default\": {\"model\": {\"pt\": (\"suno/bark-small\", \"1dbd7a1\")}},\n         \"type\": \"text\",\n     },\n     \"feature-extraction\": {\n@@ -181,8 +181,8 @@\n         \"pt\": (AutoModel,) if is_torch_available() else (),\n         \"default\": {\n             \"model\": {\n-                \"pt\": (\"distilbert/distilbert-base-cased\", \"935ac13\"),\n-                \"tf\": (\"distilbert/distilbert-base-cased\", \"935ac13\"),\n+                \"pt\": (\"distilbert/distilbert-base-cased\", \"6ea8117\"),\n+                \"tf\": (\"distilbert/distilbert-base-cased\", \"6ea8117\"),\n             }\n         },\n         \"type\": \"multimodal\",\n@@ -193,8 +193,8 @@\n         \"pt\": (AutoModelForSequenceClassification,) if is_torch_available() else (),\n         \"default\": {\n             \"model\": {\n-                \"pt\": (\"distilbert/distilbert-base-uncased-finetuned-sst-2-english\", \"af0f99b\"),\n-                \"tf\": (\"distilbert/distilbert-base-uncased-finetuned-sst-2-english\", \"af0f99b\"),\n+                \"pt\": (\"distilbert/distilbert-base-uncased-finetuned-sst-2-english\", \"714eb0f\"),\n+                \"tf\": (\"distilbert/distilbert-base-uncased-finetuned-sst-2-english\", \"714eb0f\"),\n             },\n         },\n         \"type\": \"text\",\n@@ -205,8 +205,8 @@\n         \"pt\": (AutoModelForTokenClassification,) if is_torch_available() else (),\n         \"default\": {\n             \"model\": {\n-                \"pt\": (\"dbmdz/bert-large-cased-finetuned-conll03-english\", \"f2482bf\"),\n-                \"tf\": (\"dbmdz/bert-large-cased-finetuned-conll03-english\", \"f2482bf\"),\n+                \"pt\": (\"dbmdz/bert-large-cased-finetuned-conll03-english\", \"4c53496\"),\n+                \"tf\": (\"dbmdz/bert-large-cased-finetuned-conll03-english\", \"4c53496\"),\n             },\n         },\n         \"type\": \"text\",\n@@ -217,8 +217,8 @@\n         \"pt\": (AutoModelForQuestionAnswering,) if is_torch_available() else (),\n         \"default\": {\n             \"model\": {\n-                \"pt\": (\"distilbert/distilbert-base-cased-distilled-squad\", \"626af31\"),\n-                \"tf\": (\"distilbert/distilbert-base-cased-distilled-squad\", \"626af31\"),\n+                \"pt\": (\"distilbert/distilbert-base-cased-distilled-squad\", \"564e9b5\"),\n+                \"tf\": (\"distilbert/distilbert-base-cased-distilled-squad\", \"564e9b5\"),\n             },\n         },\n         \"type\": \"text\",\n@@ -229,8 +229,8 @@\n         \"tf\": (TFAutoModelForTableQuestionAnswering,) if is_tf_available() else (),\n         \"default\": {\n             \"model\": {\n-                \"pt\": (\"google/tapas-base-finetuned-wtq\", \"69ceee2\"),\n-                \"tf\": (\"google/tapas-base-finetuned-wtq\", \"69ceee2\"),\n+                \"pt\": (\"google/tapas-base-finetuned-wtq\", \"e3dde19\"),\n+                \"tf\": (\"google/tapas-base-finetuned-wtq\", \"e3dde19\"),\n             },\n         },\n         \"type\": \"text\",\n@@ -240,7 +240,7 @@\n         \"pt\": (AutoModelForVisualQuestionAnswering,) if is_torch_available() else (),\n         \"tf\": (),\n         \"default\": {\n-            \"model\": {\"pt\": (\"dandelin/vilt-b32-finetuned-vqa\", \"4355f59\")},\n+            \"model\": {\"pt\": (\"dandelin/vilt-b32-finetuned-vqa\", \"d0a1f6a\")},\n         },\n         \"type\": \"multimodal\",\n     },\n@@ -249,7 +249,7 @@\n         \"pt\": (AutoModelForDocumentQuestionAnswering,) if is_torch_available() else (),\n         \"tf\": (),\n         \"default\": {\n-            \"model\": {\"pt\": (\"impira/layoutlm-document-qa\", \"52e01b3\")},\n+            \"model\": {\"pt\": (\"impira/layoutlm-document-qa\", \"beed3c4\")},\n         },\n         \"type\": \"multimodal\",\n     },\n@@ -259,8 +259,8 @@\n         \"pt\": (AutoModelForMaskedLM,) if is_torch_available() else (),\n         \"default\": {\n             \"model\": {\n-                \"pt\": (\"distilbert/distilroberta-base\", \"ec58a5b\"),\n-                \"tf\": (\"distilbert/distilroberta-base\", \"ec58a5b\"),\n+                \"pt\": (\"distilbert/distilroberta-base\", \"fb53ab8\"),\n+                \"tf\": (\"distilbert/distilroberta-base\", \"fb53ab8\"),\n             }\n         },\n         \"type\": \"text\",\n@@ -270,7 +270,7 @@\n         \"tf\": (TFAutoModelForSeq2SeqLM,) if is_tf_available() else (),\n         \"pt\": (AutoModelForSeq2SeqLM,) if is_torch_available() else (),\n         \"default\": {\n-            \"model\": {\"pt\": (\"sshleifer/distilbart-cnn-12-6\", \"a4f8f3e\"), \"tf\": (\"google-t5/t5-small\", \"d769bba\")}\n+            \"model\": {\"pt\": (\"sshleifer/distilbart-cnn-12-6\", \"a4f8f3e\"), \"tf\": (\"google-t5/t5-small\", \"df1b051\")}\n         },\n         \"type\": \"text\",\n     },\n@@ -280,24 +280,24 @@\n         \"tf\": (TFAutoModelForSeq2SeqLM,) if is_tf_available() else (),\n         \"pt\": (AutoModelForSeq2SeqLM,) if is_torch_available() else (),\n         \"default\": {\n-            (\"en\", \"fr\"): {\"model\": {\"pt\": (\"google-t5/t5-base\", \"686f1db\"), \"tf\": (\"google-t5/t5-base\", \"686f1db\")}},\n-            (\"en\", \"de\"): {\"model\": {\"pt\": (\"google-t5/t5-base\", \"686f1db\"), \"tf\": (\"google-t5/t5-base\", \"686f1db\")}},\n-            (\"en\", \"ro\"): {\"model\": {\"pt\": (\"google-t5/t5-base\", \"686f1db\"), \"tf\": (\"google-t5/t5-base\", \"686f1db\")}},\n+            (\"en\", \"fr\"): {\"model\": {\"pt\": (\"google-t5/t5-base\", \"a9723ea\"), \"tf\": (\"google-t5/t5-base\", \"a9723ea\")}},\n+            (\"en\", \"de\"): {\"model\": {\"pt\": (\"google-t5/t5-base\", \"a9723ea\"), \"tf\": (\"google-t5/t5-base\", \"a9723ea\")}},\n+            (\"en\", \"ro\"): {\"model\": {\"pt\": (\"google-t5/t5-base\", \"a9723ea\"), \"tf\": (\"google-t5/t5-base\", \"a9723ea\")}},\n         },\n         \"type\": \"text\",\n     },\n     \"text2text-generation\": {\n         \"impl\": Text2TextGenerationPipeline,\n         \"tf\": (TFAutoModelForSeq2SeqLM,) if is_tf_available() else (),\n         \"pt\": (AutoModelForSeq2SeqLM,) if is_torch_available() else (),\n-        \"default\": {\"model\": {\"pt\": (\"google-t5/t5-base\", \"686f1db\"), \"tf\": (\"google-t5/t5-base\", \"686f1db\")}},\n+        \"default\": {\"model\": {\"pt\": (\"google-t5/t5-base\", \"a9723ea\"), \"tf\": (\"google-t5/t5-base\", \"a9723ea\")}},\n         \"type\": \"text\",\n     },\n     \"text-generation\": {\n         \"impl\": TextGenerationPipeline,\n         \"tf\": (TFAutoModelForCausalLM,) if is_tf_available() else (),\n         \"pt\": (AutoModelForCausalLM,) if is_torch_available() else (),\n-        \"default\": {\"model\": {\"pt\": (\"openai-community/gpt2\", \"6c0e608\"), \"tf\": (\"openai-community/gpt2\", \"6c0e608\")}},\n+        \"default\": {\"model\": {\"pt\": (\"openai-community/gpt2\", \"607a30d\"), \"tf\": (\"openai-community/gpt2\", \"607a30d\")}},\n         \"type\": \"text\",\n     },\n     \"zero-shot-classification\": {\n@@ -306,12 +306,12 @@\n         \"pt\": (AutoModelForSequenceClassification,) if is_torch_available() else (),\n         \"default\": {\n             \"model\": {\n-                \"pt\": (\"facebook/bart-large-mnli\", \"c626438\"),\n-                \"tf\": (\"FacebookAI/roberta-large-mnli\", \"130fb28\"),\n+                \"pt\": (\"facebook/bart-large-mnli\", \"d7645e1\"),\n+                \"tf\": (\"FacebookAI/roberta-large-mnli\", \"2a8f12d\"),\n             },\n             \"config\": {\n-                \"pt\": (\"facebook/bart-large-mnli\", \"c626438\"),\n-                \"tf\": (\"FacebookAI/roberta-large-mnli\", \"130fb28\"),\n+                \"pt\": (\"facebook/bart-large-mnli\", \"d7645e1\"),\n+                \"tf\": (\"FacebookAI/roberta-large-mnli\", \"2a8f12d\"),\n             },\n         },\n         \"type\": \"text\",\n@@ -322,8 +322,8 @@\n         \"pt\": (AutoModelForZeroShotImageClassification,) if is_torch_available() else (),\n         \"default\": {\n             \"model\": {\n-                \"pt\": (\"openai/clip-vit-base-patch32\", \"f4881ba\"),\n-                \"tf\": (\"openai/clip-vit-base-patch32\", \"f4881ba\"),\n+                \"pt\": (\"openai/clip-vit-base-patch32\", \"3d74acf\"),\n+                \"tf\": (\"openai/clip-vit-base-patch32\", \"3d74acf\"),\n             }\n         },\n         \"type\": \"multimodal\",\n@@ -334,7 +334,7 @@\n         \"pt\": (AutoModel,) if is_torch_available() else (),\n         \"default\": {\n             \"model\": {\n-                \"pt\": (\"laion/clap-htsat-fused\", \"973b6e5\"),\n+                \"pt\": (\"laion/clap-htsat-fused\", \"cca9e28\"),\n             }\n         },\n         \"type\": \"multimodal\",\n@@ -345,8 +345,8 @@\n         \"pt\": (AutoModelForImageClassification,) if is_torch_available() else (),\n         \"default\": {\n             \"model\": {\n-                \"pt\": (\"google/vit-base-patch16-224\", \"5dca96d\"),\n-                \"tf\": (\"google/vit-base-patch16-224\", \"5dca96d\"),\n+                \"pt\": (\"google/vit-base-patch16-224\", \"3f49326\"),\n+                \"tf\": (\"google/vit-base-patch16-224\", \"3f49326\"),\n             }\n         },\n         \"type\": \"image\",\n@@ -367,7 +367,7 @@\n         \"impl\": ImageSegmentationPipeline,\n         \"tf\": (),\n         \"pt\": (AutoModelForImageSegmentation, AutoModelForSemanticSegmentation) if is_torch_available() else (),\n-        \"default\": {\"model\": {\"pt\": (\"facebook/detr-resnet-50-panoptic\", \"fc15262\")}},\n+        \"default\": {\"model\": {\"pt\": (\"facebook/detr-resnet-50-panoptic\", \"d53b52a\")}},\n         \"type\": \"multimodal\",\n     },\n     \"image-to-text\": {\n@@ -376,8 +376,8 @@\n         \"pt\": (AutoModelForVision2Seq,) if is_torch_available() else (),\n         \"default\": {\n             \"model\": {\n-                \"pt\": (\"ydshieh/vit-gpt2-coco-en\", \"65636df\"),\n-                \"tf\": (\"ydshieh/vit-gpt2-coco-en\", \"65636df\"),\n+                \"pt\": (\"ydshieh/vit-gpt2-coco-en\", \"5bebf1e\"),\n+                \"tf\": (\"ydshieh/vit-gpt2-coco-en\", \"5bebf1e\"),\n             }\n         },\n         \"type\": \"multimodal\",\n@@ -386,42 +386,42 @@\n         \"impl\": ObjectDetectionPipeline,\n         \"tf\": (),\n         \"pt\": (AutoModelForObjectDetection,) if is_torch_available() else (),\n-        \"default\": {\"model\": {\"pt\": (\"facebook/detr-resnet-50\", \"2729413\")}},\n+        \"default\": {\"model\": {\"pt\": (\"facebook/detr-resnet-50\", \"1d5f47b\")}},\n         \"type\": \"multimodal\",\n     },\n     \"zero-shot-object-detection\": {\n         \"impl\": ZeroShotObjectDetectionPipeline,\n         \"tf\": (),\n         \"pt\": (AutoModelForZeroShotObjectDetection,) if is_torch_available() else (),\n-        \"default\": {\"model\": {\"pt\": (\"google/owlvit-base-patch32\", \"17740e1\")}},\n+        \"default\": {\"model\": {\"pt\": (\"google/owlvit-base-patch32\", \"cbc355f\")}},\n         \"type\": \"multimodal\",\n     },\n     \"depth-estimation\": {\n         \"impl\": DepthEstimationPipeline,\n         \"tf\": (),\n         \"pt\": (AutoModelForDepthEstimation,) if is_torch_available() else (),\n-        \"default\": {\"model\": {\"pt\": (\"Intel/dpt-large\", \"e93beec\")}},\n+        \"default\": {\"model\": {\"pt\": (\"Intel/dpt-large\", \"bc15f29\")}},\n         \"type\": \"image\",\n     },\n     \"video-classification\": {\n         \"impl\": VideoClassificationPipeline,\n         \"tf\": (),\n         \"pt\": (AutoModelForVideoClassification,) if is_torch_available() else (),\n-        \"default\": {\"model\": {\"pt\": (\"MCG-NJU/videomae-base-finetuned-kinetics\", \"4800870\")}},\n+        \"default\": {\"model\": {\"pt\": (\"MCG-NJU/videomae-base-finetuned-kinetics\", \"488eb9a\")}},\n         \"type\": \"video\",\n     },\n     \"mask-generation\": {\n         \"impl\": MaskGenerationPipeline,\n         \"tf\": (),\n         \"pt\": (AutoModelForMaskGeneration,) if is_torch_available() else (),\n-        \"default\": {\"model\": {\"pt\": (\"facebook/sam-vit-huge\", \"997b15\")}},\n+        \"default\": {\"model\": {\"pt\": (\"facebook/sam-vit-huge\", \"87aecf0\")}},\n         \"type\": \"multimodal\",\n     },\n     \"image-to-image\": {\n         \"impl\": ImageToImagePipeline,\n         \"tf\": (),\n         \"pt\": (AutoModelForImageToImage,) if is_torch_available() else (),\n-        \"default\": {\"model\": {\"pt\": (\"caidas/swin2SR-classical-sr-x2-64\", \"4aaedcb\")}},\n+        \"default\": {\"model\": {\"pt\": (\"caidas/swin2SR-classical-sr-x2-64\", \"cee1c92\")}},\n         \"type\": \"image\",\n     },\n }\n@@ -860,6 +860,7 @@ def pipeline(\n             f\" {revision} ({HUGGINGFACE_CO_RESOLVE_ENDPOINT}/{model}).\\n\"\n             \"Using a pipeline without specifying a model name and revision in production is not recommended.\"\n         )\n+        hub_kwargs[\"revision\"] = revision\n         if config is None and isinstance(model, str):\n             config = AutoConfig.from_pretrained(model, _from_pipeline=task, **hub_kwargs, **model_kwargs)\n             hub_kwargs[\"_commit_hash\"] = config._commit_hash"
        }
    ],
    "stats": {
        "total": 81,
        "additions": 41,
        "deletions": 40
    }
}