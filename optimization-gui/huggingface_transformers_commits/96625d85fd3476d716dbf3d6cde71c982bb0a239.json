{
    "author": "ivarflakstad",
    "message": "Use rocm6.2 for AMD images (#35930)\n\n* Use rocm6.2 as rocm6.3 only has nightly pytorch wheels atm\r\n\r\n* Use stable wheel index for torch libs",
    "sha": "96625d85fd3476d716dbf3d6cde71c982bb0a239",
    "files": [
        {
            "sha": "df03cb041a1355b774d389b6fc147b6fbba7818c",
            "filename": "docker/transformers-pytorch-amd-gpu/Dockerfile",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/huggingface/transformers/blob/96625d85fd3476d716dbf3d6cde71c982bb0a239/docker%2Ftransformers-pytorch-amd-gpu%2FDockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/96625d85fd3476d716dbf3d6cde71c982bb0a239/docker%2Ftransformers-pytorch-amd-gpu%2FDockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftransformers-pytorch-amd-gpu%2FDockerfile?ref=96625d85fd3476d716dbf3d6cde71c982bb0a239",
            "patch": "@@ -1,4 +1,4 @@\n-FROM rocm/dev-ubuntu-22.04:6.3\n+FROM rocm/dev-ubuntu-22.04:6.2.4\n LABEL maintainer=\"Hugging Face\"\n \n ARG DEBIAN_FRONTEND=noninteractive\n@@ -8,11 +8,9 @@ RUN apt update && \\\n     apt clean && \\\n     rm -rf /var/lib/apt/lists/*\n \n-RUN export PATH=\"${PATH:+${PATH}:}~/opt/rocm/bin\"\n-\n RUN python3 -m pip install --no-cache-dir --upgrade pip numpy\n \n-RUN python3 -m pip install --pre torch torchvision torchaudio --index-url https://download.pytorch.org/whl/nightly/rocm6.3/\n+RUN python3 -m pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/rocm6.2\n \n RUN python3 -m pip install --no-cache-dir --upgrade importlib-metadata setuptools ninja git+https://github.com/facebookresearch/detectron2.git pytesseract \"itsdangerous<2.1.0\"\n "
        },
        {
            "sha": "a8edb8ff03ebe563f9a4f81b434aaf89ae84b1ff",
            "filename": "docker/transformers-pytorch-deepspeed-amd-gpu/Dockerfile",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/huggingface/transformers/blob/96625d85fd3476d716dbf3d6cde71c982bb0a239/docker%2Ftransformers-pytorch-deepspeed-amd-gpu%2FDockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/96625d85fd3476d716dbf3d6cde71c982bb0a239/docker%2Ftransformers-pytorch-deepspeed-amd-gpu%2FDockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftransformers-pytorch-deepspeed-amd-gpu%2FDockerfile?ref=96625d85fd3476d716dbf3d6cde71c982bb0a239",
            "patch": "@@ -1,11 +1,11 @@\n-FROM rocm/dev-ubuntu-22.04:6.3\n+FROM rocm/dev-ubuntu-22.04:6.2.4\n LABEL maintainer=\"Hugging Face\"\n \n ARG DEBIAN_FRONTEND=noninteractive\n ARG PYTORCH='2.5.1'\n ARG TORCH_VISION='0.20.0'\n ARG TORCH_AUDIO='2.5.0'\n-ARG ROCM='6.3'\n+ARG ROCM='6.2'\n \n RUN apt update && \\\n     apt install -y --no-install-recommends \\\n@@ -45,4 +45,4 @@ RUN cd transformers && python3 setup.py develop\n RUN python3 -c \"from deepspeed.launcher.runner import main\"\n \n # Remove nvml as it is not compatible with ROCm\n-RUN python3 -m pip uninstall py3nvml pynvml -y\n+RUN python3 -m pip uninstall py3nvml pynvml nvidia-ml-py apex -y"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 5,
        "deletions": 7
    }
}