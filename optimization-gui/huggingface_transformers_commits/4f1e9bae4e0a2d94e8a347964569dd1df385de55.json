{
    "author": "ZIYU-DEEP",
    "message": "fix the wandb logging issue (#33464)\n\n* fix the wandb logging issue\r\n\r\n* handle ConfigError in WandbCallback; move import to local scope\r\n\r\n* update integration_utils.py; move import of ConfigError\r\n\r\n* Update integration_utils.py: remove trailing whitespace",
    "sha": "4f1e9bae4e0a2d94e8a347964569dd1df385de55",
    "files": [
        {
            "sha": "40298f9c6fc77bdba7760555e14af1a219c49c61",
            "filename": "src/transformers/integrations/integration_utils.py",
            "status": "modified",
            "additions": 11,
            "deletions": 1,
            "changes": 12,
            "blob_url": "https://github.com/huggingface/transformers/blob/4f1e9bae4e0a2d94e8a347964569dd1df385de55/src%2Ftransformers%2Fintegrations%2Fintegration_utils.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/4f1e9bae4e0a2d94e8a347964569dd1df385de55/src%2Ftransformers%2Fintegrations%2Fintegration_utils.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fintegrations%2Fintegration_utils.py?ref=4f1e9bae4e0a2d94e8a347964569dd1df385de55",
            "patch": "@@ -803,6 +803,10 @@ def setup(self, args, state, model, **kwargs):\n         if self._wandb is None:\n             return\n         self._initialized = True\n+\n+        # prepare to handle potential configuration issues during setup\n+        from wandb.sdk.lib.config_util import ConfigError as WandbConfigError\n+\n         if state.is_world_process_zero:\n             logger.info(\n                 'Automatic Weights & Biases logging enabled, to disable set os.environ[\"WANDB_DISABLED\"] = \"true\"'\n@@ -852,7 +856,13 @@ def setup(self, args, state, model, **kwargs):\n             try:\n                 self._wandb.config[\"model/num_parameters\"] = model.num_parameters()\n             except AttributeError:\n-                logger.info(\"Could not log the number of model parameters in Weights & Biases.\")\n+                logger.info(\n+                    \"Could not log the number of model parameters in Weights & Biases due to an AttributeError.\"\n+                )\n+            except WandbConfigError:\n+                logger.warning(\n+                    \"A ConfigError was raised whilst setting the number of model parameters in Weights & Biases config.\"\n+                )\n \n             # log the initial model architecture to an artifact\n             if self._log_model.is_enabled:"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 11,
        "deletions": 1
    }
}