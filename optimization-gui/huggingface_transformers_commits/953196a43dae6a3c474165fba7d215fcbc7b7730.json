{
    "author": "EricWiener",
    "message": "Fix typing issues with SigLip2 (#37356)\n\n* Fix issues\n\n* Fix comment\n\n---------\n\nCo-authored-by: Pavel Iakubovskii <qubvel@gmail.com>",
    "sha": "953196a43dae6a3c474165fba7d215fcbc7b7730",
    "files": [
        {
            "sha": "644bb763347a8daaa857ef9bdb456bbb96e30874",
            "filename": "src/transformers/image_processing_utils_fast.py",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/huggingface/transformers/blob/953196a43dae6a3c474165fba7d215fcbc7b7730/src%2Ftransformers%2Fimage_processing_utils_fast.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/953196a43dae6a3c474165fba7d215fcbc7b7730/src%2Ftransformers%2Fimage_processing_utils_fast.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fimage_processing_utils_fast.py?ref=953196a43dae6a3c474165fba7d215fcbc7b7730",
            "patch": "@@ -691,8 +691,12 @@ def preprocess(self, images: ImageInput, **kwargs: Unpack[DefaultFastImageProces\n \n         # torch resize uses interpolation instead of resample\n         resample = kwargs.pop(\"resample\")\n+\n+        # Check if resample is an int before checking if it's an instance of PILImageResampling\n+        # because if pillow < 9.1.0, resample is an int and PILImageResampling is a module.\n+        # Checking PILImageResampling will fail with error `TypeError: isinstance() arg 2 must be a type or tuple of types`.\n         kwargs[\"interpolation\"] = (\n-            pil_torch_interpolation_mapping[resample] if isinstance(resample, (PILImageResampling, int)) else resample\n+            pil_torch_interpolation_mapping[resample] if isinstance(resample, (int, PILImageResampling)) else resample\n         )\n \n         # Pop kwargs that are not needed in _preprocess"
        },
        {
            "sha": "53d53797f2c060739aaf55d7aa4e084e1e2ae704",
            "filename": "src/transformers/models/siglip2/image_processing_siglip2.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/953196a43dae6a3c474165fba7d215fcbc7b7730/src%2Ftransformers%2Fmodels%2Fsiglip2%2Fimage_processing_siglip2.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/953196a43dae6a3c474165fba7d215fcbc7b7730/src%2Ftransformers%2Fmodels%2Fsiglip2%2Fimage_processing_siglip2.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fsiglip2%2Fimage_processing_siglip2.py?ref=953196a43dae6a3c474165fba7d215fcbc7b7730",
            "patch": "@@ -163,7 +163,7 @@ class Siglip2ImageProcessor(BaseImageProcessor):\n     def __init__(\n         self,\n         do_resize: bool = True,\n-        resample: PILImageResampling = PILImageResampling.BILINEAR,\n+        resample: \"PILImageResampling\" = PILImageResampling.BILINEAR,\n         do_rescale: bool = True,\n         rescale_factor: float = 1 / 255,\n         do_normalize: bool = True,\n@@ -195,7 +195,7 @@ def preprocess(\n         self,\n         images: ImageInput,\n         do_resize: Optional[bool] = None,\n-        resample: Optional[PILImageResampling] = None,\n+        resample: Optional[\"PILImageResampling\"] = None,\n         do_rescale: Optional[bool] = None,\n         rescale_factor: Optional[float] = None,\n         do_normalize: Optional[bool] = None,"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 7,
        "deletions": 3
    }
}