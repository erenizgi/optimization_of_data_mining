{
    "author": "hgt312",
    "message": "[Qwen3] Qwen3 MoE add tp plan for expert mlps (#38135)\n\nfix tp plan",
    "sha": "e5a48785d9757278eaf201b492a8eaba9724a84a",
    "files": [
        {
            "sha": "082b8ffb8cb75fdef65acd22a1c3ed4080eaa90a",
            "filename": "src/transformers/models/qwen3_moe/configuration_qwen3_moe.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/e5a48785d9757278eaf201b492a8eaba9724a84a/src%2Ftransformers%2Fmodels%2Fqwen3_moe%2Fconfiguration_qwen3_moe.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/e5a48785d9757278eaf201b492a8eaba9724a84a/src%2Ftransformers%2Fmodels%2Fqwen3_moe%2Fconfiguration_qwen3_moe.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fqwen3_moe%2Fconfiguration_qwen3_moe.py?ref=e5a48785d9757278eaf201b492a8eaba9724a84a",
            "patch": "@@ -155,6 +155,9 @@ class Qwen3MoeConfig(PretrainedConfig):\n         \"layers.*.self_attn.k_proj\": \"colwise\",\n         \"layers.*.self_attn.v_proj\": \"colwise\",\n         \"layers.*.self_attn.o_proj\": \"rowwise\",\n+        \"layers.*.mlp.experts.*.gate_proj\": \"colwise\",\n+        \"layers.*.mlp.experts.*.up_proj\": \"colwise\",\n+        \"layers.*.mlp.experts.*.down_proj\": \"rowwise\",\n         \"layers.*.mlp.gate_proj\": \"colwise\",\n         \"layers.*.mlp.up_proj\": \"colwise\",\n         \"layers.*.mlp.down_proj\": \"rowwise\","
        }
    ],
    "stats": {
        "total": 3,
        "additions": 3,
        "deletions": 0
    }
}