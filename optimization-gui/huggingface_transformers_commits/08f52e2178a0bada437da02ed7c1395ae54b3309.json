{
    "author": "paulinebm",
    "message": "permissions worflows fix (#42080)\n\n- add new workflow to scan permissions github_token really need and advise pernmissions\n- add actions-permissions/monitor on almost all worklows\n=> the goal is to define properly all permissions blocks by jobs\n\n# Conflicts:\n#\t.github/workflows/check-workflow-permissions.yml\n\nCo-authored-by: Pauline <pauline@Paulines-MacBook-Pro-2.local>",
    "sha": "08f52e2178a0bada437da02ed7c1395ae54b3309",
    "files": [
        {
            "sha": "4569f81ca1361afbeeff5aa9a914a1802ea19653",
            "filename": ".github/workflows/check-workflow-permissions.yml",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fcheck-workflow-permissions.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fcheck-workflow-permissions.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fcheck-workflow-permissions.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -20,4 +20,4 @@ jobs:\n       contents: read\n     with:\n       workflow_name: ${{ inputs.workflow_name }}\n-      run_count: ${{ fromJSON(inputs.run_count) }}\n\\ No newline at end of file\n+      run_count: ${{ fromJSON(inputs.run_count) }}"
        },
        {
            "sha": "46d6725b6ff27160ccac0841bd937c79e07aa13f",
            "filename": ".github/workflows/get-pr-info.yml",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fget-pr-info.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fget-pr-info.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fget-pr-info.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -87,6 +87,9 @@ jobs:\n       PR_FILES: ${{ steps.pr_info.outputs.files }}\n     if: ${{ inputs.pr_number != '' }}\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n       - name: Extract PR details\n         id: pr_info\n         uses: actions/github-script@v6"
        },
        {
            "sha": "f8ebe42bdd42ec2f4ce52f080db95d45c97ffcdd",
            "filename": ".github/workflows/get-pr-number.yml",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fget-pr-number.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fget-pr-number.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fget-pr-number.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -13,6 +13,9 @@ jobs:\n     outputs:\n       PR_NUMBER: ${{ steps.set_pr_number.outputs.PR_NUMBER }}\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n       - name: Get PR number\n         shell: bash\n         env:"
        },
        {
            "sha": "da6ed2c396eb2b524af5199fc1a876371ca0eb87",
            "filename": ".github/workflows/new_model_pr_merged_notification.yml",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fnew_model_pr_merged_notification.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fnew_model_pr_merged_notification.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fnew_model_pr_merged_notification.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -13,6 +13,9 @@ jobs:\n     name: Notify new model\n     runs-on: ubuntu-22.04\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n       - uses: actions/checkout@v4\n         with:\n           fetch-depth: 0"
        },
        {
            "sha": "9a356e6c53d5056b52455da007c28bb6b05b0e7f",
            "filename": ".github/workflows/pr_build_doc_with_comment.yml",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fpr_build_doc_with_comment.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fpr_build_doc_with_comment.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fpr_build_doc_with_comment.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -35,6 +35,9 @@ jobs:\n       PR_MERGE_COMMIT_DATE: ${{ needs.get-pr-info.outputs.PR_MERGE_COMMIT_DATE }}\n       PR_MERGE_COMMIT_TIMESTAMP: ${{ needs.get-pr-info.outputs.PR_MERGE_COMMIT_TIMESTAMP }}\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n       - run: |\n           COMMENT_TIMESTAMP=$(date -d \"${COMMENT_DATE}\" +\"%s\")\n           echo \"COMMENT_DATE: $COMMENT_DATE\"\n@@ -54,6 +57,9 @@ jobs:\n       statuses: write\n     runs-on: ubuntu-22.04\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n       - name: Create Run\n         id: create_run\n         env:\n@@ -77,6 +83,9 @@ jobs:\n       pull-requests: write\n     runs-on: ubuntu-22.04\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n       - name: Reply to the comment\n         env:\n           GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n@@ -112,6 +121,9 @@ jobs:\n       GITHUB_RUN_URL: https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}\n       STATUS_OK: ${{ contains(fromJSON('[\"skipped\", \"success\"]'), needs.create_run.result) }}\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n       - name: Get `build-doc` job status\n         run: |\n           echo \"${{ needs.build-doc.result }}\""
        },
        {
            "sha": "0de2b7409b747bf2ab7e454f396c2dab2305f3c8",
            "filename": ".github/workflows/pr_slow_ci_suggestion.yml",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fpr_slow_ci_suggestion.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fpr_slow_ci_suggestion.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fpr_slow_ci_suggestion.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -23,6 +23,10 @@ jobs:\n     outputs:\n       jobs: ${{ steps.get_jobs.outputs.jobs_to_run }}\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+      \n       # This checkout to the main branch\n       - uses: actions/checkout@v4\n         with:\n@@ -89,6 +93,10 @@ jobs:\n       pull-requests: write\n     runs-on: ubuntu-22.04\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Check and update comment if needed\n         uses: actions/github-script@v7\n         env:"
        },
        {
            "sha": "4ac9ae1745f20aa599a376469a002c72d49dd09e",
            "filename": ".github/workflows/push-important-models.yml",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fpush-important-models.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fpush-important-models.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fpush-important-models.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -11,6 +11,10 @@ jobs:\n     outputs:\n       matrix: ${{ steps.set-matrix.outputs.matrix }}\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Check out code\n         uses: actions/checkout@v4\n "
        },
        {
            "sha": "cba873c112e6cbcba070f8c20655f490944d01f9",
            "filename": ".github/workflows/release-conda.yml",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Frelease-conda.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Frelease-conda.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Frelease-conda.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -18,6 +18,10 @@ jobs:\n         shell: bash -l {0}\n \n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Checkout repository\n         uses: actions/checkout@v4\n "
        },
        {
            "sha": "99785c16fc7190e99bff1eaad4842b83447d067d",
            "filename": ".github/workflows/self-comment-ci.yml",
            "status": "modified",
            "additions": 24,
            "deletions": 0,
            "changes": 24,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fself-comment-ci.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fself-comment-ci.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fself-comment-ci.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -46,6 +46,10 @@ jobs:\n       PR_HEAD_SHA: ${{ needs.get-pr-info.outputs.PR_HEAD_SHA }}\n       PR_MERGE_SHA: ${{ needs.get-pr-info.outputs.PR_MERGE_COMMIT_SHA }}\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Verify `merge_commit` timestamp is older than the issue comment timestamp\n         env:\n           COMMENT_DATE: ${{ github.event.comment.created_at }}\n@@ -67,6 +71,10 @@ jobs:\n       models: ${{ steps.models_to_run.outputs.models }}\n       quantizations: ${{ steps.models_to_run.outputs.quantizations }}\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - uses: actions/checkout@v4\n         with:\n           fetch-depth: \"0\"\n@@ -109,6 +117,10 @@ jobs:\n       pull-requests: write\n     runs-on: ubuntu-22.04\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Reply to the comment\n         env:\n           GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n@@ -131,6 +143,10 @@ jobs:\n       pull-requests: write\n     runs-on: ubuntu-22.04\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Reply to the comment\n         env:\n           GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n@@ -152,6 +168,10 @@ jobs:\n       statuses: write\n     runs-on: ubuntu-22.04\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Create Run\n         id: create_run\n         env:\n@@ -210,6 +230,10 @@ jobs:\n     if: ${{ always() && needs.create_run.result == 'success' }}\n     runs-on: ubuntu-22.04\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Show reports from jobs\n         env:\n           MODEL_REPORT: ${{ needs.model-ci.outputs.report }}"
        },
        {
            "sha": "0ac81b782fc0728e7dc9cdebfafecbe47ef00dde",
            "filename": ".github/workflows/self-nightly-caller.yml",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fself-nightly-caller.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fself-nightly-caller.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fself-nightly-caller.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -30,6 +30,10 @@ jobs:\n     name: Setup\n     runs-on: ubuntu-22.04\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Setup\n         run: |\n           mkdir \"setup_values\""
        },
        {
            "sha": "5b2664cdfd698233aa2a4a3e0dd0565625172bbf",
            "filename": ".github/workflows/self-nightly-past-ci-caller.yml",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fself-nightly-past-ci-caller.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fself-nightly-past-ci-caller.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fself-nightly-past-ci-caller.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -14,6 +14,9 @@ jobs:\n     outputs:\r\n       run_number: ${{ steps.get_number.outputs.run_number }}\r\n     steps:\r\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\r\n+        with:\r\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\r\n       - name: Get number\r\n         id: get_number\r\n         run: |\r"
        },
        {
            "sha": "271fb7d6bd7b00d409357474f66e4e75f4215e2f",
            "filename": ".github/workflows/self-scheduled-amd-caller.yml",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fself-scheduled-amd-caller.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fself-scheduled-amd-caller.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fself-scheduled-amd-caller.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -10,5 +10,9 @@ jobs:\n     runs-on: ubuntu-22.04\n     if: ${{ always() }}\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Trigger scheduled AMD CI via workflow_run\n         run: echo \"Trigger scheduled AMD CI via workflow_run\""
        },
        {
            "sha": "3a17c60a504bc35ea45c704d8c2a44caf5bdf8a5",
            "filename": ".github/workflows/self-scheduled-caller.yml",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fself-scheduled-caller.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fself-scheduled-caller.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fself-scheduled-caller.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -32,6 +32,9 @@ jobs:\n     name: Setup\n     runs-on: ubuntu-22.04\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n       - name: Setup\n         env:\n           prev_workflow_run_id: ${{ inputs.prev_workflow_run_id || env.prev_workflow_run_id }}"
        },
        {
            "sha": "35e83de860609eab87710949fa9c58e10a502eec",
            "filename": ".github/workflows/self-scheduled-flash-attn-caller.yml",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fself-scheduled-flash-attn-caller.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fself-scheduled-flash-attn-caller.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fself-scheduled-flash-attn-caller.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -32,6 +32,10 @@ jobs:\n     name: Setup\n     runs-on: ubuntu-22.04\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Setup\n         run: |\n           mkdir \"setup_values\""
        },
        {
            "sha": "668f5a8cd3910605ad918a9fcc06f1d2ebae297a",
            "filename": ".github/workflows/self-scheduled-intel-gaudi.yml",
            "status": "modified",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fself-scheduled-intel-gaudi.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fself-scheduled-intel-gaudi.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fself-scheduled-intel-gaudi.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -38,6 +38,10 @@ jobs:\n       folder_slices: ${{ steps.set-matrix.outputs.folder_slices }}\n       quantization_matrix: ${{ steps.set-matrix.outputs.quantization_matrix }}\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Checkout\n         uses: actions/checkout@v4\n         with:\n@@ -122,6 +126,10 @@ jobs:\n         --cap-add=sys_nice\n         --shm-size=64G\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Checkout\n         uses: actions/checkout@v4\n         with:\n@@ -191,6 +199,10 @@ jobs:\n         --cap-add=sys_nice\n         --shm-size=64G\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Checkout\n         uses: actions/checkout@v4\n         with:\n@@ -263,6 +275,10 @@ jobs:\n         --cap-add=sys_nice\n         --shm-size=64G\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Checkout\n         uses: actions/checkout@v4\n         with:"
        },
        {
            "sha": "219e570469f1ef185ee41aed0e4803d42217c341",
            "filename": ".github/workflows/self-scheduled.yml",
            "status": "modified",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fself-scheduled.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fself-scheduled.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fself-scheduled.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -78,6 +78,9 @@ jobs:\n       slice_ids: ${{ steps.set-matrix.outputs.slice_ids }}\n       quantization_matrix: ${{ steps.set-matrix-quantization.outputs.quantization_matrix }}\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n       - name: Update clone\n         working-directory: /transformers\n         env:\n@@ -184,6 +187,9 @@ jobs:\n       image: huggingface/transformers-all-latest-gpu\n       options: --gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n       - name: Update clone\n         working-directory: /transformers\n         env:\n@@ -256,6 +262,9 @@ jobs:\n       image: huggingface/transformers-all-latest-gpu\n       options: --gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n       - name: Update clone\n         working-directory: /transformers\n         env:\n@@ -329,6 +338,9 @@ jobs:\n       image: ${{ inputs.docker }}\n       options: --gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n       - name: Update clone\n         working-directory: ${{ inputs.working-directory-prefix }}/transformers\n         env:\n@@ -434,6 +446,9 @@ jobs:\n       image: huggingface/transformers-quantization-latest-gpu\n       options: --gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n       - name: Echo folder ${{ matrix.folders }}\n         shell: bash\n         env:\n@@ -518,6 +533,9 @@ jobs:\n       image: ${{ inputs.docker }}\n       options: --gpus all --shm-size \"16gb\" --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n       - name: Update clone\n         working-directory: /transformers\n         env:\n@@ -588,6 +606,9 @@ jobs:\n     steps:\n       # Checkout in order to run `utils/extract_warnings.py`. Avoid **explicit** checkout (i.e. don't specify `ref`) for\n       # security reason.\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n       - name: Checkout transformers\n         uses: actions/checkout@v4\n "
        },
        {
            "sha": "51c745fe07c9777f6a027c8288c454c53f842e29",
            "filename": ".github/workflows/slack-report.yml",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fslack-report.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fslack-report.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fslack-report.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -38,6 +38,10 @@ jobs:\n     runs-on: ubuntu-22.04\n     if: always() && !cancelled()\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Preliminary job status\n         shell: bash\n         # For the meaning of these environment variables, see the job `Setup`"
        },
        {
            "sha": "fe4251d4d709b448935e611439894ed23e5bd7d7",
            "filename": ".github/workflows/ssh-runner.yml",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fssh-runner.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fssh-runner.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fssh-runner.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -30,6 +30,10 @@ jobs:\n     outputs:\n       RUNNER: ${{ steps.set_runner.outputs.RUNNER }}\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Get runner to use\n         shell: bash\n         env:\n@@ -58,6 +62,10 @@ jobs:\n     container:\n       image: ${{ github.event.inputs.docker_image }}\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Update clone\n         working-directory: /transformers\n         env:"
        },
        {
            "sha": "8af31c60c977be7bf01cf87e70c178b2a9f23cb5",
            "filename": ".github/workflows/stale.yml",
            "status": "modified",
            "additions": 16,
            "deletions": 11,
            "changes": 27,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fstale.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fstale.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fstale.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -14,16 +14,21 @@ jobs:\n     env:\n       GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n     steps:\n-    - uses: actions/checkout@v4\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n \n-    - name: Setup Python\n-      uses: actions/setup-python@v5\n-      with:\n-        python-version: 3.8\n+      - name: Checkout\n+        uses: actions/checkout@v4\n \n-    - name: Install requirements\n-      run: |\n-        pip install PyGithub\n-    - name: Close stale issues\n-      run: |\n-        python scripts/stale.py\n+      - name: Setup Python\n+        uses: actions/setup-python@v5\n+        with:\n+          python-version: 3.8\n+\n+      - name: Install requirements\n+        run: |\n+          pip install PyGithub\n+      - name: Close stale issues\n+        run: |\n+          python scripts/stale.py"
        },
        {
            "sha": "c8fc6da03bc0cab518b1607fc777637a1e8512f6",
            "filename": ".github/workflows/trufflehog.yml",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Ftrufflehog.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Ftrufflehog.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Ftrufflehog.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -10,6 +10,10 @@ jobs:\n   trufflehog:\n     runs-on: ubuntu-latest\n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - name: Checkout code\n         uses: actions/checkout@v4\n         with:"
        },
        {
            "sha": "ca31b49acd6a46eb6f251f1c10b675d22c5dfca0",
            "filename": ".github/workflows/update_metdata.yml",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fupdate_metdata.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/08f52e2178a0bada437da02ed7c1395ae54b3309/.github%2Fworkflows%2Fupdate_metdata.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fupdate_metdata.yml?ref=08f52e2178a0bada437da02ed7c1395ae54b3309",
            "patch": "@@ -14,6 +14,10 @@ jobs:\n         shell: bash -l {0}\n \n     steps:\n+      - uses: GitHubSecurityLab/actions-permissions/monitor@v1\n+        with:\n+          config: ${{ vars.PERMISSIONS_CONFIG }}\n+\n       - uses: actions/checkout@v4\n \n       - name: Setup environment"
        }
    ],
    "stats": {
        "total": 165,
        "additions": 153,
        "deletions": 12
    }
}