{
    "author": "sandeepyadav1478",
    "message": "Sandeepyadav1478/2025 06 19 deberta v2 model card update (#38895)\n\n* [docs]: update deberta-v2.md model card\n\n* chore: req updates\n\n* chore: address code review feedback and update docs\n\n* chore: review feedback and updates\n\n* chore: model selection updates\n\n* chores: quantizations review updates",
    "sha": "18143c76bfa86792d293d646bb795935c2266967",
    "files": [
        {
            "sha": "004a4afda6c2b17c01566c6e320c0b669caec721",
            "filename": "docs/source/en/model_doc/deberta-v2.md",
            "status": "modified",
            "additions": 102,
            "deletions": 57,
            "changes": 159,
            "blob_url": "https://github.com/huggingface/transformers/blob/18143c76bfa86792d293d646bb795935c2266967/docs%2Fsource%2Fen%2Fmodel_doc%2Fdeberta-v2.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/18143c76bfa86792d293d646bb795935c2266967/docs%2Fsource%2Fen%2Fmodel_doc%2Fdeberta-v2.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fmodel_doc%2Fdeberta-v2.md?ref=18143c76bfa86792d293d646bb795935c2266967",
            "patch": "@@ -14,66 +14,111 @@ rendered properly in your Markdown viewer.\n \n -->\n \n+<div style=\"float: right;\">\n+    <div class=\"flex flex-wrap space-x-1\">\n+           <img alt=\"PyTorch\" src=\"https://img.shields.io/badge/PyTorch-DE3412?style=flat&logo=pytorch&logoColor=white\" >\n+           <img alt=\"TensorFlow\" src=\"https://img.shields.io/badge/TensorFlow-FF6F00?style=flat&logo=tensorflow&logoColor=white\">\n+    </div>\n+</div>\n+\n+\n # DeBERTa-v2\n \n-<div class=\"flex flex-wrap space-x-1\">\n-<img alt=\"PyTorch\" src=\"https://img.shields.io/badge/PyTorch-DE3412?style=flat&logo=pytorch&logoColor=white\">\n-<img alt=\"TensorFlow\" src=\"https://img.shields.io/badge/TensorFlow-FF6F00?style=flat&logo=tensorflow&logoColor=white\">\n-</div>\n+[DeBERTa-v2](https://huggingface.co/papers/2006.03654) improves on the original [DeBERTa](./deberta) architecture by using a SentencePiece-based tokenizer and a new vocabulary size of 128K. It also adds an additional convolutional layer within the first transformer layer to better learn local dependencies of input tokens. Finally, the position projection and content projection matrices are shared in the attention layer to reduce the number of parameters.\n+\n+You can find all the original [DeBERTa-v2] checkpoints under the [Microsoft](https://huggingface.co/microsoft?search_models=deberta-v2) organization.\n+\n+\n+> [!TIP]\n+> This model was contributed by [Pengcheng He](https://huggingface.co/DeBERTa).\n+>\n+> Click on the DeBERTa-v2 models in the right sidebar for more examples of how to apply DeBERTa-v2 to different language tasks.\n+\n+The example below demonstrates how to classify text with [`Pipeline`] or the [`AutoModel`] class.\n+\n+<hfoptions id=\"usage\">\n+<hfoption id=\"Pipeline\">\n+\n+```py\n+import torch\n+from transformers import pipeline\n+\n+pipeline = pipeline(\n+    task=\"text-classification\",\n+    model=\"microsoft/deberta-v2-xlarge-mnli\",\n+    device=0,\n+    torch_dtype=torch.float16\n+)\n+result = pipeline(\"DeBERTa-v2 is great at understanding context!\")\n+print(result)\n+```\n+\n+</hfoption>\n+<hfoption id=\"AutoModel\">\n+\n+```py\n+import torch\n+from transformers import AutoTokenizer, AutoModelForSequenceClassification\n+\n+tokenizer = AutoTokenizer.from_pretrained(\n+    \"microsoft/deberta-v2-xlarge-mnli\"\n+)\n+model = AutoModelForSequenceClassification.from_pretrained(\n+    \"microsoft/deberta-v2-xlarge-mnli\",\n+    torch_dtype=torch.float16,\n+    device_map=\"auto\"\n+)\n+\n+inputs = tokenizer(\"DeBERTa-v2 is great at understanding context!\", return_tensors=\"pt\").to(\"cuda\")\n+outputs = model(**inputs)\n+\n+logits = outputs.logits\n+predicted_class_id = logits.argmax().item()\n+predicted_label = model.config.id2label[predicted_class_id]\n+print(f\"Predicted label: {predicted_label}\")\n+\n+```\n+\n+</hfoption>\n+\n+<hfoption id=\"transformers CLI\">\n+\n+```bash\n+echo -e \"DeBERTa-v2 is great at understanding context!\" | transformers-cli run --task fill-mask --model microsoft/deberta-v2-xlarge-mnli --device 0\n+```\n+</hfoption>\n+</hfoptions>\n+\n+Quantization reduces the memory burden of large models by representing the weights in a lower precision. Refer to the [Quantization](../quantization/overview) overview for more available quantization backends.\n+\n+The example below uses [bitsandbytes quantization](../quantization/bitsandbytes) to only quantize the weights to 4-bit.\n+\n+```py\n+from transformers import AutoModelForSequenceClassification, AutoTokenizer, BitsAndBytesConfig\n+\n+model_id = \"microsoft/deberta-v2-xlarge-mnli\"\n+quantization_config = BitsAndBytesConfig(\n+    load_in_4bit=True,\n+    bnb_4bit_quant_type=\"nf4\",\n+    bnb_4bit_compute_dtype=\"float16\",\n+    bnb_4bit_use_double_quant=True,\n+)\n+tokenizer = AutoTokenizer.from_pretrained(model_id)\n+model = AutoModelForSequenceClassification.from_pretrained(\n+    model_id,\n+    quantization_config=quantization_config,\n+    torch_dtype=\"float16\"\n+)\n+\n+inputs = tokenizer(\"DeBERTa-v2 is great at understanding context!\", return_tensors=\"pt\").to(\"cuda\")\n+outputs = model(**inputs)\n+logits = outputs.logits\n+predicted_class_id = logits.argmax().item()\n+predicted_label = model.config.id2label[predicted_class_id]\n+print(f\"Predicted label: {predicted_label}\")\n+\n+```\n \n-## Overview\n-\n-The DeBERTa model was proposed in [DeBERTa: Decoding-enhanced BERT with Disentangled Attention](https://huggingface.co/papers/2006.03654) by Pengcheng He, Xiaodong Liu, Jianfeng Gao, Weizhu Chen It is based on Google's\n-BERT model released in 2018 and Facebook's RoBERTa model released in 2019.\n-\n-It builds on RoBERTa with disentangled attention and enhanced mask decoder training with half of the data used in\n-RoBERTa.\n-\n-The abstract from the paper is the following:\n-\n-*Recent progress in pre-trained neural language models has significantly improved the performance of many natural\n-language processing (NLP) tasks. In this paper we propose a new model architecture DeBERTa (Decoding-enhanced BERT with\n-disentangled attention) that improves the BERT and RoBERTa models using two novel techniques. The first is the\n-disentangled attention mechanism, where each word is represented using two vectors that encode its content and\n-position, respectively, and the attention weights among words are computed using disentangled matrices on their\n-contents and relative positions. Second, an enhanced mask decoder is used to replace the output softmax layer to\n-predict the masked tokens for model pretraining. We show that these two techniques significantly improve the efficiency\n-of model pretraining and performance of downstream tasks. Compared to RoBERTa-Large, a DeBERTa model trained on half of\n-the training data performs consistently better on a wide range of NLP tasks, achieving improvements on MNLI by +0.9%\n-(90.2% vs. 91.1%), on SQuAD v2.0 by +2.3% (88.4% vs. 90.7%) and RACE by +3.6% (83.2% vs. 86.8%). The DeBERTa code and\n-pre-trained models will be made publicly available at https://github.com/microsoft/DeBERTa.*\n-\n-\n-The following information is visible directly on the [original implementation\n-repository](https://github.com/microsoft/DeBERTa). DeBERTa v2 is the second version of the DeBERTa model. It includes\n-the 1.5B model used for the SuperGLUE single-model submission and achieving 89.9, versus human baseline 89.8. You can\n-find more details about this submission in the authors'\n-[blog](https://www.microsoft.com/en-us/research/blog/microsoft-deberta-surpasses-human-performance-on-the-superglue-benchmark/)\n-\n-New in v2:\n-\n-- **Vocabulary** In v2 the tokenizer is changed to use a new vocabulary of size 128K built from the training data.\n-  Instead of a GPT2-based tokenizer, the tokenizer is now\n-  [sentencepiece-based](https://github.com/google/sentencepiece) tokenizer.\n-- **nGiE(nGram Induced Input Encoding)** The DeBERTa-v2 model uses an additional convolution layer aside with the first\n-  transformer layer to better learn the local dependency of input tokens.\n-- **Sharing position projection matrix with content projection matrix in attention layer** Based on previous\n-  experiments, this can save parameters without affecting the performance.\n-- **Apply bucket to encode relative positions** The DeBERTa-v2 model uses log bucket to encode relative positions\n-  similar to T5.\n-- **900M model & 1.5B model** Two additional model sizes are available: 900M and 1.5B, which significantly improves the\n-  performance of downstream tasks.\n-\n-This model was contributed by [DeBERTa](https://huggingface.co/DeBERTa). This model TF 2.0 implementation was\n-contributed by [kamalkraj](https://huggingface.co/kamalkraj). The original code can be found [here](https://github.com/microsoft/DeBERTa).\n-\n-## Resources\n-\n-- [Text classification task guide](../tasks/sequence_classification)\n-- [Token classification task guide](../tasks/token_classification)\n-- [Question answering task guide](../tasks/question_answering)\n-- [Masked language modeling task guide](../tasks/masked_language_modeling)\n-- [Multiple choice task guide](../tasks/multiple_choice)\n \n ## DebertaV2Config\n "
        }
    ],
    "stats": {
        "total": 159,
        "additions": 102,
        "deletions": 57
    }
}