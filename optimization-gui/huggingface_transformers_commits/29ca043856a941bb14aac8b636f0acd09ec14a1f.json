{
    "author": "AshAnand34",
    "message": "Created model card for XLM model (#38595)\n\n* Created model card for XLM model\n\n* Revised model card structure and content of XLM model\n\n* Update XLM model documentation with improved examples and code snippets for predicting <mask> tokens using Pipeline and AutoModel.",
    "sha": "29ca043856a941bb14aac8b636f0acd09ec14a1f",
    "files": [
        {
            "sha": "f0c376625d14d450303d4e96a5af0307880daebf",
            "filename": "docs/source/en/model_doc/xlm.md",
            "status": "modified",
            "additions": 54,
            "deletions": 36,
            "changes": 90,
            "blob_url": "https://github.com/huggingface/transformers/blob/29ca043856a941bb14aac8b636f0acd09ec14a1f/docs%2Fsource%2Fen%2Fmodel_doc%2Fxlm.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/29ca043856a941bb14aac8b636f0acd09ec14a1f/docs%2Fsource%2Fen%2Fmodel_doc%2Fxlm.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fmodel_doc%2Fxlm.md?ref=29ca043856a941bb14aac8b636f0acd09ec14a1f",
            "patch": "@@ -14,55 +14,73 @@ rendered properly in your Markdown viewer.\n \n -->\n \n+<div style=\"float: right;\">\n+    <div class=\"flex flex-wrap space-x-1\">\n+        <img alt=\"PyTorch\" src=\"https://img.shields.io/badge/PyTorch-DE3412?style=flat&logo=pytorch&logoColor=white\">\n+        <img alt=\"TensorFlow\" src=\"https://img.shields.io/badge/TensorFlow-FF6F00?style=flat&logo=tensorflow&logoColor=white\">\n+    </div>\n+</div>\n+\n # XLM\n \n-<div class=\"flex flex-wrap space-x-1\">\n-<img alt=\"PyTorch\" src=\"https://img.shields.io/badge/PyTorch-DE3412?style=flat&logo=pytorch&logoColor=white\">\n-<img alt=\"TensorFlow\" src=\"https://img.shields.io/badge/TensorFlow-FF6F00?style=flat&logo=tensorflow&logoColor=white\">\n-</div>\n+[XLM](https://huggingface.co/papers/1901.07291) demonstrates cross-lingual pretraining with two approaches, unsupervised training on a single language and supervised training on more than one language with a cross-lingual language model objective. The XLM model supports the causal language modeling objective, masked language modeling, and translation language modeling (an extension of the [BERT](./bert)) masked language modeling objective to multiple language inputs).\n+\n+You can find all the original XLM checkpoints under the [Facebook AI community](https://huggingface.co/FacebookAI?search_models=xlm-mlm) organization.\n+\n+> [!TIP]\n+> Click on the XLM models in the right sidebar for more examples of how to apply XLM to different cross-lingual tasks like classification, translation, and question answering.\n \n-## Overview\n+The example below demonstrates how to predict the `<mask>` token with [`Pipeline`], [`AutoModel`] and from the command line.\n \n-The XLM model was proposed in [Cross-lingual Language Model Pretraining](https://arxiv.org/abs/1901.07291) by\n-Guillaume Lample, Alexis Conneau. It's a transformer pretrained using one of the following objectives:\n+<hfoptions id=\"usage\">\n+<hfoption id=\"Pipeline\">\n \n-- a causal language modeling (CLM) objective (next token prediction),\n-- a masked language modeling (MLM) objective (BERT-like), or\n-- a Translation Language Modeling (TLM) object (extension of BERT's MLM to multiple language inputs)\n+```python\n+import torch  \n+from transformers import pipeline  \n \n-The abstract from the paper is the following:\n+pipeline = pipeline(  \n+    task=\"fill-mask\",  \n+    model=\"facebook/xlm-roberta-xl\",  \n+    torch_dtype=torch.float16,  \n+    device=0  \n+)  \n+pipeline(\"Bonjour, je suis un mod√®le <mask>.\")\n+```\n \n-*Recent studies have demonstrated the efficiency of generative pretraining for English natural language understanding.\n-In this work, we extend this approach to multiple languages and show the effectiveness of cross-lingual pretraining. We\n-propose two methods to learn cross-lingual language models (XLMs): one unsupervised that only relies on monolingual\n-data, and one supervised that leverages parallel data with a new cross-lingual language model objective. We obtain\n-state-of-the-art results on cross-lingual classification, unsupervised and supervised machine translation. On XNLI, our\n-approach pushes the state of the art by an absolute gain of 4.9% accuracy. On unsupervised machine translation, we\n-obtain 34.3 BLEU on WMT'16 German-English, improving the previous state of the art by more than 9 BLEU. On supervised\n-machine translation, we obtain a new state of the art of 38.5 BLEU on WMT'16 Romanian-English, outperforming the\n-previous best approach by more than 4 BLEU. Our code and pretrained models will be made publicly available.*\n+</hfoption>\n+<hfoption id=\"AutoModel\">\n \n-This model was contributed by [thomwolf](https://huggingface.co/thomwolf). The original code can be found [here](https://github.com/facebookresearch/XLM/).\n+```python\n+import torch  \n+from transformers import AutoModelForMaskedLM, AutoTokenizer  \n \n-## Usage tips\n+tokenizer = AutoTokenizer.from_pretrained(  \n+    \"FacebookAI/xlm-mlm-en-2048\",  \n+)  \n+model = AutoModelForMaskedLM.from_pretrained(  \n+    \"FacebookAI/xlm-mlm-en-2048\",  \n+    torch_dtype=torch.float16,  \n+    device_map=\"auto\",  \n+)  \n+inputs = tokenizer(\"Hello, I'm a <mask> model.\", return_tensors=\"pt\").to(\"cuda\")\n \n-- XLM has many different checkpoints, which were trained using different objectives: CLM, MLM or TLM. Make sure to\n-  select the correct objective for your task (e.g. MLM checkpoints are not suitable for generation).\n-- XLM has multilingual checkpoints which leverage a specific `lang` parameter. Check out the [multi-lingual](../multilingual) page for more information.\n-- A transformer model trained on several languages. There are three different type of training for this model and the library provides checkpoints for all of them:\n+with torch.no_grad():\n+    outputs = model(**inputs)\n+    predictions = outputs.logits.argmax(dim=-1)\n \n-    * Causal language modeling (CLM) which is the traditional autoregressive training (so this model could be in the previous section as well). One of the languages is selected for each training sample, and the model input is a sentence of 256 tokens, that may span over several documents in one of those languages.\n-    * Masked language modeling (MLM) which is like RoBERTa. One of the languages is selected for each training sample, and the model input is a sentence of 256 tokens, that may span over several documents in one of those languages, with dynamic masking of the tokens.\n-    * A combination of MLM and translation language modeling (TLM). This consists of concatenating a sentence in two different languages, with random masking. To predict one of the masked tokens, the model can use both, the surrounding context in language 1 and the context given by language 2.\n+predicted_token = tokenizer.decode(predictions[0][inputs[\"input_ids\"][0] == tokenizer.mask_token_id])\n+print(f\"Predicted token: {predicted_token}\")\n+```\n \n-## Resources\n+</hfoption>\n+<hfoption id=\"transformers CLI\">\n \n-- [Text classification task guide](../tasks/sequence_classification)\n-- [Token classification task guide](../tasks/token_classification)\n-- [Question answering task guide](../tasks/question_answering)\n-- [Causal language modeling task guide](../tasks/language_modeling)\n-- [Masked language modeling task guide](../tasks/masked_language_modeling)\n-- [Multiple choice task guide](../tasks/multiple_choice)\n+```bash\n+echo -e \"Plants create <mask> through a process known as photosynthesis.\" | transformers-cli run --task fill-mask --model FacebookAI/xlm-mlm-en-2048 --device 0\n+```\n+</hfoption>\n+</hfoptions>\n \n ## XLMConfig\n "
        }
    ],
    "stats": {
        "total": 90,
        "additions": 54,
        "deletions": 36
    }
}