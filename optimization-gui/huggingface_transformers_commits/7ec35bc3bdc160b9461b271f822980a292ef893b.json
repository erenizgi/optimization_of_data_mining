{
    "author": "ivarflakstad",
    "message": "Add missing atol to torch.testing.assert_close where rtol is specified (#36234)",
    "sha": "7ec35bc3bdc160b9461b271f822980a292ef893b",
    "files": [
        {
            "sha": "4551abd2146e89c99cb98bb9e6cf61cb0f3bfe16",
            "filename": "tests/models/informer/test_modeling_informer.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/7ec35bc3bdc160b9461b271f822980a292ef893b/tests%2Fmodels%2Finformer%2Ftest_modeling_informer.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/7ec35bc3bdc160b9461b271f822980a292ef893b/tests%2Fmodels%2Finformer%2Ftest_modeling_informer.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Finformer%2Ftest_modeling_informer.py?ref=7ec35bc3bdc160b9461b271f822980a292ef893b",
            "patch": "@@ -546,4 +546,4 @@ def test_seq_to_seq_generation(self):\n \n         expected_slice = torch.tensor([3400.8005, 4289.2637, 7101.9209], device=torch_device)\n         mean_prediction = outputs.sequences.mean(dim=1)\n-        torch.testing.assert_close(mean_prediction[0, -3:], expected_slice, rtol=1e-1)\n+        torch.testing.assert_close(mean_prediction[0, -3:], expected_slice, rtol=1e-1, atol=1e-1)"
        },
        {
            "sha": "0956386f0d3fd805f6cf1bcb882f8c3ef96ac7de",
            "filename": "tests/models/patchtst/test_modeling_patchtst.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/7ec35bc3bdc160b9461b271f822980a292ef893b/tests%2Fmodels%2Fpatchtst%2Ftest_modeling_patchtst.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/7ec35bc3bdc160b9461b271f822980a292ef893b/tests%2Fmodels%2Fpatchtst%2Ftest_modeling_patchtst.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Fpatchtst%2Ftest_modeling_patchtst.py?ref=7ec35bc3bdc160b9461b271f822980a292ef893b",
            "patch": "@@ -385,4 +385,4 @@ def test_regression_generation(self):\n             device=torch_device,\n         )\n         mean_prediction = outputs.sequences.mean(dim=1)\n-        torch.testing.assert_close(mean_prediction[-5:], expected_slice, rtol=TOLERANCE)\n+        torch.testing.assert_close(mean_prediction[-5:], expected_slice, rtol=TOLERANCE, atol=TOLERANCE)"
        },
        {
            "sha": "8dcdfd8ae7d9b1616830dc32920a64fa76bd89ba",
            "filename": "tests/models/time_series_transformer/test_modeling_time_series_transformer.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/7ec35bc3bdc160b9461b271f822980a292ef893b/tests%2Fmodels%2Ftime_series_transformer%2Ftest_modeling_time_series_transformer.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/7ec35bc3bdc160b9461b271f822980a292ef893b/tests%2Fmodels%2Ftime_series_transformer%2Ftest_modeling_time_series_transformer.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Ftime_series_transformer%2Ftest_modeling_time_series_transformer.py?ref=7ec35bc3bdc160b9461b271f822980a292ef893b",
            "patch": "@@ -554,4 +554,4 @@ def test_seq_to_seq_generation(self):\n \n         expected_slice = torch.tensor([2825.2749, 3584.9207, 6763.9951], device=torch_device)\n         mean_prediction = outputs.sequences.mean(dim=1)\n-        torch.testing.assert_close(mean_prediction[0, -3:], expected_slice, rtol=1e-1)\n+        torch.testing.assert_close(mean_prediction[0, -3:], expected_slice, rtol=1e-1, atol=1e-1)"
        },
        {
            "sha": "cf20726ff3e421e92ed036a3d03879f0fd94c615",
            "filename": "tests/models/wavlm/test_modeling_wavlm.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/7ec35bc3bdc160b9461b271f822980a292ef893b/tests%2Fmodels%2Fwavlm%2Ftest_modeling_wavlm.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/7ec35bc3bdc160b9461b271f822980a292ef893b/tests%2Fmodels%2Fwavlm%2Ftest_modeling_wavlm.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Fwavlm%2Ftest_modeling_wavlm.py?ref=7ec35bc3bdc160b9461b271f822980a292ef893b",
            "patch": "@@ -549,7 +549,7 @@ def test_inference_large(self):\n             [[[0.2122, 0.0500], [0.2118, 0.0563]], [[0.1353, 0.1818], [0.2453, 0.0595]]]\n         )\n \n-        torch.testing.assert_close(hidden_states_slice, EXPECTED_HIDDEN_STATES_SLICE, rtol=5e-2)\n+        torch.testing.assert_close(hidden_states_slice, EXPECTED_HIDDEN_STATES_SLICE, rtol=5e-2, atol=5e-2)\n \n     def test_inference_diarization(self):\n         model = WavLMForAudioFrameClassification.from_pretrained(\"microsoft/wavlm-base-plus-sd\").to(torch_device)"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 4,
        "deletions": 4
    }
}