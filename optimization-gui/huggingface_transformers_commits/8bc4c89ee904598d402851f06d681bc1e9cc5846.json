{
    "author": "gante",
    "message": "[bart] minor test fixes (#35965)\n\nfix tests",
    "sha": "8bc4c89ee904598d402851f06d681bc1e9cc5846",
    "files": [
        {
            "sha": "6c9db62daec2746a84d3a12e77ce7b7f9348fb0b",
            "filename": "tests/models/bart/test_modeling_bart.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/8bc4c89ee904598d402851f06d681bc1e9cc5846/tests%2Fmodels%2Fbart%2Ftest_modeling_bart.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/8bc4c89ee904598d402851f06d681bc1e9cc5846/tests%2Fmodels%2Fbart%2Ftest_modeling_bart.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Fbart%2Ftest_modeling_bart.py?ref=8bc4c89ee904598d402851f06d681bc1e9cc5846",
            "patch": "@@ -885,7 +885,7 @@ def test_inference_no_head(self):\n         expected_shape = torch.Size((1, 11, 1024))\n         self.assertEqual(output.shape, expected_shape)\n         expected_slice = torch.tensor(\n-            [[0.7144, 0.8143, -1.2813], [0.7144, 0.8143, -1.2813], [-0.0467, 2.5911, -2.1845]], device=torch_device\n+            [[[0.7144, 0.8143, -1.2813], [0.7144, 0.8143, -1.2813], [-0.0467, 2.5911, -2.1845]]], device=torch_device\n         )\n         torch.testing.assert_close(output[:, :3, :3], expected_slice, rtol=1e-3, atol=1e-3)\n "
        },
        {
            "sha": "3f00b4e15d4bbabfed41811291c786a6dffbdd99",
            "filename": "tests/test_modeling_common.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/8bc4c89ee904598d402851f06d681bc1e9cc5846/tests%2Ftest_modeling_common.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/8bc4c89ee904598d402851f06d681bc1e9cc5846/tests%2Ftest_modeling_common.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Ftest_modeling_common.py?ref=8bc4c89ee904598d402851f06d681bc1e9cc5846",
            "patch": "@@ -4532,6 +4532,8 @@ def test_flash_attention_2_padding_matches_padding_free_with_position_ids(self):\n                 config.max_position_embeddings = max_new_tokens + dummy_input.shape[1] + 1\n \n             model = model_class(config)\n+            if \"position_ids\" not in inspect.signature(model.forward).parameters:\n+                self.skipTest(\"Model does not support position_ids\")\n \n             with tempfile.TemporaryDirectory() as tmpdirname:\n                 model.save_pretrained(tmpdirname)"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 3,
        "deletions": 1
    }
}