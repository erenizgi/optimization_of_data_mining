{
    "author": "cyyever",
    "message": "Remove old Python code (#41226)\n\nSigned-off-by: Yuanyuan Chen <cyyever@outlook.com>",
    "sha": "cf0887f62c10643b9e042e1ad90a875b0fd18205",
    "files": [
        {
            "sha": "503130ea651afa35e36cc5d30a5ad19fe28f5770",
            "filename": "src/transformers/hf_argparser.py",
            "status": "modified",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/huggingface/transformers/blob/cf0887f62c10643b9e042e1ad90a875b0fd18205/src%2Ftransformers%2Fhf_argparser.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/cf0887f62c10643b9e042e1ad90a875b0fd18205/src%2Ftransformers%2Fhf_argparser.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fhf_argparser.py?ref=cf0887f62c10643b9e042e1ad90a875b0fd18205",
            "patch": "@@ -262,19 +262,6 @@ def _add_dataclass_arguments(self, dtype: DataClassType):\n                 \"removing line of `from __future__ import annotations` which opts in Postponed \"\n                 \"Evaluation of Annotations (PEP 563)\"\n             )\n-        except TypeError as ex:\n-            # Remove this block when we drop Python 3.9 support\n-            if sys.version_info[:2] < (3, 10) and \"unsupported operand type(s) for |\" in str(ex):\n-                python_version = \".\".join(map(str, sys.version_info[:3]))\n-                raise RuntimeError(\n-                    f\"Type resolution failed for {dtype} on Python {python_version}. Try removing \"\n-                    \"line of `from __future__ import annotations` which opts in union types as \"\n-                    \"`X | Y` (PEP 604) via Postponed Evaluation of Annotations (PEP 563). To \"\n-                    \"support Python versions that lower than 3.10, you need to use \"\n-                    \"`typing.Union[X, Y]` instead of `X | Y` and `typing.Optional[X]` instead of \"\n-                    \"`X | None`.\"\n-                ) from ex\n-            raise\n \n         for field in dataclasses.fields(dtype):\n             if not field.init:"
        },
        {
            "sha": "00ee8df6d414c72761aa71003f1bec1d30350b1e",
            "filename": "src/transformers/models/idefics3/processing_idefics3.py",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/cf0887f62c10643b9e042e1ad90a875b0fd18205/src%2Ftransformers%2Fmodels%2Fidefics3%2Fprocessing_idefics3.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/cf0887f62c10643b9e042e1ad90a875b0fd18205/src%2Ftransformers%2Fmodels%2Fidefics3%2Fprocessing_idefics3.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fidefics3%2Fprocessing_idefics3.py?ref=cf0887f62c10643b9e042e1ad90a875b0fd18205",
            "patch": "@@ -108,9 +108,6 @@ class Idefics3ProcessorKwargs(ProcessingKwargs, total=False):\n     }\n \n \n-Idefics3ProcessorKwargs.__annotations__[\"images_kwargs\"] = Idefics3ImagesKwargs  # python 3.8 compatibility\n-\n-\n class Idefics3Processor(ProcessorMixin):\n     r\"\"\"\n     Constructs a Idefics3 processor which wraps a LLama tokenizer and Idefics3 image processor into a single processor."
        },
        {
            "sha": "616763aa92e7333987d8696778cd0b629626059e",
            "filename": "tests/peft_integration/test_peft_integration.py",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/cf0887f62c10643b9e042e1ad90a875b0fd18205/tests%2Fpeft_integration%2Ftest_peft_integration.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/cf0887f62c10643b9e042e1ad90a875b0fd18205/tests%2Fpeft_integration%2Ftest_peft_integration.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fpeft_integration%2Ftest_peft_integration.py?ref=cf0887f62c10643b9e042e1ad90a875b0fd18205",
            "patch": "@@ -715,9 +715,8 @@ def test_peft_from_pretrained_missing_keys_warning(self):\n \n                 # Here we need to adjust the key name a bit to account for PEFT-specific naming.\n                 # 1. Remove PEFT-specific prefix\n-                # If merged after dropping Python 3.8, we can use: key = key.removeprefix(peft_prefix)\n                 peft_prefix = \"base_model.model.\"\n-                key = key[len(peft_prefix) :]\n+                key = key.removeprefix(peft_prefix)\n                 # 2. Insert adapter name\n                 prefix, _, suffix = key.rpartition(\".\")\n                 key = f\"{prefix}.other.{suffix}\""
        }
    ],
    "stats": {
        "total": 19,
        "additions": 1,
        "deletions": 18
    }
}