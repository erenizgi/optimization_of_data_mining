{
    "author": "ydshieh",
    "message": "more info in `model_results.json` (#39783)\n\nmore info\n\nCo-authored-by: ydshieh <ydshieh@users.noreply.github.com>",
    "sha": "54cbea5615784b21f483a7e1885f6530f82ec2d1",
    "files": [
        {
            "sha": "7838338ba2f014edcf7060c691e10aeafb3e2442",
            "filename": "utils/notification_service.py",
            "status": "modified",
            "additions": 17,
            "deletions": 3,
            "changes": 20,
            "blob_url": "https://github.com/huggingface/transformers/blob/54cbea5615784b21f483a7e1885f6530f82ec2d1/utils%2Fnotification_service.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/54cbea5615784b21f483a7e1885f6530f82ec2d1/utils%2Fnotification_service.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/utils%2Fnotification_service.py?ref=54cbea5615784b21f483a7e1885f6530f82ec2d1",
            "patch": "@@ -75,6 +75,8 @@ def handle_test_results(test_results):\n \n     failed = 0\n     success = 0\n+    errors = 0\n+    skipped = 0\n \n     # When the output is short enough, the output is surrounded by = signs: \"== OUTPUT ==\"\n     # When it is too long, those signs are not present.\n@@ -83,10 +85,14 @@ def handle_test_results(test_results):\n     for i, expression in enumerate(expressions):\n         if \"failed\" in expression:\n             failed += int(expressions[i - 1])\n+        if \"errors\" in expression:\n+            errors += int(expressions[i - 1])\n         if \"passed\" in expression:\n             success += int(expressions[i - 1])\n+        if \"skipped\" in expression:\n+            skipped += int(expressions[i - 1])\n \n-    return failed, success, time_spent\n+    return failed, errors, success, skipped, time_spent\n \n \n def handle_stacktraces(test_results):\n@@ -1188,7 +1194,9 @@ def pop_default(l: list[Any], i: int, default: Any) -> Any:\n     matrix_job_results = {\n         matrix_name: {\n             \"failed\": {m: {\"unclassified\": 0, \"single\": 0, \"multi\": 0} for m in test_categories},\n+            \"errors\": 0,\n             \"success\": 0,\n+            \"skipped\": 0,\n             \"time_spent\": \"\",\n             \"failures\": {},\n             \"job_link\": {},\n@@ -1213,8 +1221,10 @@ def pop_default(l: list[Any], i: int, default: Any) -> Any:\n                 # Link to the GitHub Action job\n                 job = artifact_name_to_job_map[path]\n                 matrix_job_results[matrix_name][\"job_link\"][artifact_gpu] = job[\"html_url\"]\n-                failed, success, time_spent = handle_test_results(artifact[\"stats\"])\n+                failed, errors, success, skipped, time_spent = handle_test_results(artifact[\"stats\"])\n                 matrix_job_results[matrix_name][\"success\"] += success\n+                matrix_job_results[matrix_name][\"errors\"] += errors\n+                matrix_job_results[matrix_name][\"skipped\"] += skipped\n                 matrix_job_results[matrix_name][\"time_spent\"] += time_spent[1:-1] + \", \"\n \n                 stacktraces = handle_stacktraces(artifact[\"failures_line\"])\n@@ -1317,7 +1327,9 @@ def pop_default(l: list[Any], i: int, default: Any) -> Any:\n     additional_results = {\n         key: {\n             \"failed\": {\"unclassified\": 0, \"single\": 0, \"multi\": 0},\n+            \"errors\": 0,\n             \"success\": 0,\n+            \"skipped\": 0,\n             \"time_spent\": \"\",\n             \"error\": False,\n             \"failures\": {},\n@@ -1343,9 +1355,11 @@ def pop_default(l: list[Any], i: int, default: Any) -> Any:\n             artifact = retrieve_artifact(path, artifact_gpu)\n             stacktraces = handle_stacktraces(artifact[\"failures_line\"])\n \n-            failed, success, time_spent = handle_test_results(artifact[\"stats\"])\n+            failed, errors, success, skipped, time_spent = handle_test_results(artifact[\"stats\"])\n             additional_results[key][\"failed\"][artifact_gpu or \"unclassified\"] += failed\n             additional_results[key][\"success\"] += success\n+            additional_results[key][\"errors\"] += errors\n+            additional_results[key][\"skipped\"] += skipped\n             additional_results[key][\"time_spent\"] += time_spent[1:-1] + \", \"\n \n             if len(artifact[\"errors\"]):"
        }
    ],
    "stats": {
        "total": 20,
        "additions": 17,
        "deletions": 3
    }
}