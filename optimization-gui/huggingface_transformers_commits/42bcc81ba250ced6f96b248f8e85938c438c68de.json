{
    "author": "ydshieh",
    "message": "Minor security fix for `ssh-runner.yml` (#41317)\n\nsecurity issue\n\nCo-authored-by: ydshieh <ydshieh@users.noreply.github.com>",
    "sha": "42bcc81ba250ced6f96b248f8e85938c438c68de",
    "files": [
        {
            "sha": "5dae68b40f7e9f9663bdfd450d4e876ca0b863be",
            "filename": ".github/workflows/ssh-runner.yml",
            "status": "modified",
            "additions": 11,
            "deletions": 6,
            "changes": 17,
            "blob_url": "https://github.com/huggingface/transformers/blob/42bcc81ba250ced6f96b248f8e85938c438c68de/.github%2Fworkflows%2Fssh-runner.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/42bcc81ba250ced6f96b248f8e85938c438c68de/.github%2Fworkflows%2Fssh-runner.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fssh-runner.yml?ref=42bcc81ba250ced6f96b248f8e85938c438c68de",
            "patch": "@@ -33,14 +33,17 @@ jobs:\n     steps:\n       - name: Get runner to use\n         shell: bash\n+        env:\n+          NUM_GPUS: ${{ github.event.inputs.num_gpus }}\n+          RUNNER_TYPE: ${{ github.event.inputs.runner_type }}\n         run: |\n-          if [[ \"${{ github.event.inputs.num_gpus }}\" == \"single\" && \"${{ github.event.inputs.runner_type }}\" == \"t4\" ]]; then\n+          if [[ \"$NUM_GPUS\" == \"single\" && \"$RUNNER_TYPE\" == \"t4\" ]]; then\n             echo \"RUNNER=aws-g4dn-4xlarge-cache\" >> $GITHUB_ENV\n-          elif [[ \"${{ github.event.inputs.num_gpus }}\" == \"multi\" && \"${{ github.event.inputs.runner_type }}\" == \"t4\" ]]; then\n+          elif [[ \"$NUM_GPUS\" == \"multi\" && \"$RUNNER_TYPE\" == \"t4\" ]]; then\n             echo \"RUNNER=aws-g4dn-12xlarge-cache\" >> $GITHUB_ENV\n-          elif [[ \"${{ github.event.inputs.num_gpus }}\" == \"single\" && \"${{ github.event.inputs.runner_type }}\" == \"a10\" ]]; then\n+          elif [[ \"$NUM_GPUS\" == \"single\" && \"$RUNNER_TYPE\" == \"a10\" ]]; then\n             echo \"RUNNER=aws-g5-4xlarge-cache\" >> $GITHUB_ENV\n-          elif [[ \"${{ github.event.inputs.num_gpus }}\" == \"multi\" && \"${{ github.event.inputs.runner_type }}\" == \"a10\" ]]; then\n+          elif [[ \"$NUM_GPUS\" == \"multi\" && \"$RUNNER_TYPE\" == \"a10\" ]]; then\n             echo \"RUNNER=aws-g5-12xlarge-cache\" >> $GITHUB_ENV\n           else\n             echo \"RUNNER=\" >> $GITHUB_ENV\n@@ -85,9 +88,11 @@ jobs:\n       - name: Store Slack infos\n         #because the SSH can be enabled dynamically if the workflow failed, so we need to store slack infos to be able to retrieve them during the waitforssh step\n         shell: bash\n+        env:\n+          GITHUB_ACTOR: ${{ github.actor }}\n         run: |\n-          echo \"${{ github.actor }}\"\n-          github_actor=${{ github.actor }}\n+          echo \"$GITHUB_ACTOR\"\n+          github_actor=$GITHUB_ACTOR\n           github_actor=${github_actor/'-'/'_'}\n           echo \"$github_actor\"\n           echo \"github_actor=$github_actor\" >> $GITHUB_ENV"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 11,
        "deletions": 6
    }
}