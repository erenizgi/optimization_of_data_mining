{
    "author": "ydshieh",
    "message": "Allow CI could be run on private forked repositories (e.g. new model additions) (#33594)\n\nfix\r\n\r\nCo-authored-by: ydshieh <ydshieh@users.noreply.github.com>",
    "sha": "31650a53a1d7f80470d2ba8010966c2cab97eec8",
    "files": [
        {
            "sha": "9932156aa969db5121ed00c90f522c42a51ba3bb",
            "filename": ".circleci/config.yml",
            "status": "modified",
            "additions": 7,
            "deletions": 4,
            "changes": 11,
            "blob_url": "https://github.com/huggingface/transformers/blob/31650a53a1d7f80470d2ba8010966c2cab97eec8/.circleci%2Fconfig.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/31650a53a1d7f80470d2ba8010966c2cab97eec8/.circleci%2Fconfig.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.circleci%2Fconfig.yml?ref=31650a53a1d7f80470d2ba8010966c2cab97eec8",
            "patch": "@@ -47,13 +47,13 @@ jobs:\n \n             - run:\n                 name: \"Retrieve Artifact Paths\"\n-                env:\n-                    CIRCLE_TOKEN: ${{ secrets.CI_ARTIFACT_TOKEN }}\n+                # [reference] https://circleci.com/docs/api/v2/index.html#operation/getJobArtifacts\n+                # `CIRCLE_TOKEN` is defined as an environment variables set within a context, see `https://circleci.com/docs/contexts/`\n                 command: |\n                     project_slug=\"gh/${CIRCLE_PROJECT_USERNAME}/${CIRCLE_PROJECT_REPONAME}\"\n                     job_number=${CIRCLE_BUILD_NUM}\n                     url=\"https://circleci.com/api/v2/project/${project_slug}/${job_number}/artifacts\"\n-                    curl -o  test_preparation/artifacts.json ${url}\n+                    curl -o test_preparation/artifacts.json ${url} --header \"Circle-Token: $CIRCLE_TOKEN\"\n             - run:\n                 name: \"Prepare pipeline parameters\"\n                 command: |\n@@ -190,7 +190,10 @@ workflows:\n             - check_circleci_user\n             - check_code_quality\n             - check_repository_consistency\n-            - fetch_tests\n+            - fetch_tests:\n+                # [reference] https://circleci.com/docs/contexts/\n+                context:\n+                    - TRANSFORMERS_CONTEXT\n \n     nightly:\n         when: <<pipeline.parameters.nightly>>"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 7,
        "deletions": 4
    }
}