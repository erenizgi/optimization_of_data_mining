{
    "author": "eustlb",
    "message": "[CSM] tiny fix on generation (#38001)\n\nnit",
    "sha": "3fa8d9c20e5d4ee0c407f4a3d9999e5aa904c0b8",
    "files": [
        {
            "sha": "2fec3ea8919fa0c0e0782b54dcafe79e317ec9f3",
            "filename": "src/transformers/models/csm/generation_csm.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/3fa8d9c20e5d4ee0c407f4a3d9999e5aa904c0b8/src%2Ftransformers%2Fmodels%2Fcsm%2Fgeneration_csm.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/3fa8d9c20e5d4ee0c407f4a3d9999e5aa904c0b8/src%2Ftransformers%2Fmodels%2Fcsm%2Fgeneration_csm.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fcsm%2Fgeneration_csm.py?ref=3fa8d9c20e5d4ee0c407f4a3d9999e5aa904c0b8",
            "patch": "@@ -476,7 +476,7 @@ def generate(\n                     if eos_idxs.numel() != 0:\n                         cutoff_idx = eos_idxs.min()\n                     else:\n-                        cutoff_idx = audio_codes_batch.shape[1]\n+                        cutoff_idx = audio_codes_batch.shape[0]\n \n                     audio_codes_batch = audio_codes_batch[:cutoff_idx]\n                     codec_decode_output = self.codec_model.decode(audio_codes_batch.transpose(0, 1).unsqueeze(0))"
        }
    ],
    "stats": {
        "total": 2,
        "additions": 1,
        "deletions": 1
    }
}