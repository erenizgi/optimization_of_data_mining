{
    "author": "cyyever",
    "message": "Replace video_fps with fps in tests (#39898)\n\nSigned-off-by: cyy <cyyever@outlook.com>",
    "sha": "98a3c49135276ff44ecfc7e72a832fd19a391150",
    "files": [
        {
            "sha": "5f073e3d39a9e4a1958d189fa3708262df7c0d15",
            "filename": "tests/models/internvl/test_processing_internvl.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/98a3c49135276ff44ecfc7e72a832fd19a391150/tests%2Fmodels%2Finternvl%2Ftest_processing_internvl.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/98a3c49135276ff44ecfc7e72a832fd19a391150/tests%2Fmodels%2Finternvl%2Ftest_processing_internvl.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Finternvl%2Ftest_processing_internvl.py?ref=98a3c49135276ff44ecfc7e72a832fd19a391150",
            "patch": "@@ -234,7 +234,7 @@ def test_apply_chat_template_video_frame_sampling(self):\n         self.assertTrue(self.videos_input_name in out_dict_with_video)\n         self.assertEqual(len(out_dict_with_video[self.videos_input_name]), num_frames)\n \n-        # Load with `video_fps` arg is not possible with InternVL (skip)\n+        # Load with `fps` arg is not possible with InternVL (skip)\n \n         # Load without any arg should use the default loading method\n         out_dict_with_video = processor.apply_chat_template("
        },
        {
            "sha": "49684431cfd526b9c2be29eac55a7e90e3fc468c",
            "filename": "tests/models/qwen2_5_omni/test_processing_qwen2_5_omni.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/huggingface/transformers/blob/98a3c49135276ff44ecfc7e72a832fd19a391150/tests%2Fmodels%2Fqwen2_5_omni%2Ftest_processing_qwen2_5_omni.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/98a3c49135276ff44ecfc7e72a832fd19a391150/tests%2Fmodels%2Fqwen2_5_omni%2Ftest_processing_qwen2_5_omni.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Fqwen2_5_omni%2Ftest_processing_qwen2_5_omni.py?ref=98a3c49135276ff44ecfc7e72a832fd19a391150",
            "patch": "@@ -488,26 +488,26 @@ def test_apply_chat_template_video_frame_sampling(self):\n         self.assertTrue(self.videos_input_name in out_dict_with_video)\n         self.assertEqual(len(out_dict_with_video[self.videos_input_name]), 5760)\n \n-        # Load with `video_fps` arg\n-        video_fps = 1\n+        # Load with `fps` arg\n+        fps = 1\n         out_dict_with_video = processor.apply_chat_template(\n             messages,\n             add_generation_prompt=True,\n             tokenize=True,\n             return_dict=True,\n-            video_fps=video_fps,\n+            fps=fps,\n         )\n         self.assertTrue(self.videos_input_name in out_dict_with_video)\n         self.assertEqual(len(out_dict_with_video[self.videos_input_name]), 14400)\n \n-        # Load with `video_fps` and `num_frames` args, should raise an error\n+        # Load with `fps` and `num_frames` args, should raise an error\n         with self.assertRaises(ValueError):\n             out_dict_with_video = processor.apply_chat_template(\n                 messages,\n                 add_generation_prompt=True,\n                 tokenize=True,\n                 return_dict=True,\n-                video_fps=video_fps,\n+                fps=fps,\n                 num_frames=num_frames,\n             )\n "
        },
        {
            "sha": "4f2e1769bc3f17a59451ee391cb1eab620115e6a",
            "filename": "tests/models/qwen2_5_vl/test_processing_qwen2_5_vl.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/huggingface/transformers/blob/98a3c49135276ff44ecfc7e72a832fd19a391150/tests%2Fmodels%2Fqwen2_5_vl%2Ftest_processing_qwen2_5_vl.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/98a3c49135276ff44ecfc7e72a832fd19a391150/tests%2Fmodels%2Fqwen2_5_vl%2Ftest_processing_qwen2_5_vl.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Fqwen2_5_vl%2Ftest_processing_qwen2_5_vl.py?ref=98a3c49135276ff44ecfc7e72a832fd19a391150",
            "patch": "@@ -304,26 +304,26 @@ def test_apply_chat_template_video_frame_sampling(self):\n         self.assertTrue(self.videos_input_name in out_dict_with_video)\n         self.assertEqual(len(out_dict_with_video[self.videos_input_name]), 360)\n \n-        # Load with `video_fps` arg\n-        video_fps = 1\n+        # Load with `fps` arg\n+        fps = 1\n         out_dict_with_video = processor.apply_chat_template(\n             messages,\n             add_generation_prompt=True,\n             tokenize=True,\n             return_dict=True,\n-            video_fps=video_fps,\n+            fps=fps,\n         )\n         self.assertTrue(self.videos_input_name in out_dict_with_video)\n         self.assertEqual(len(out_dict_with_video[self.videos_input_name]), 900)\n \n-        # Load with `video_fps` and `num_frames` args, should raise an error\n+        # Load with `fps` and `num_frames` args, should raise an error\n         with self.assertRaises(ValueError):\n             out_dict_with_video = processor.apply_chat_template(\n                 messages,\n                 add_generation_prompt=True,\n                 tokenize=True,\n                 return_dict=True,\n-                video_fps=video_fps,\n+                fps=fps,\n                 num_frames=num_frames,\n             )\n "
        },
        {
            "sha": "b044981f9d911ec887aec8cb58cc697c187301b2",
            "filename": "tests/models/qwen2_vl/test_processing_qwen2_vl.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/huggingface/transformers/blob/98a3c49135276ff44ecfc7e72a832fd19a391150/tests%2Fmodels%2Fqwen2_vl%2Ftest_processing_qwen2_vl.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/98a3c49135276ff44ecfc7e72a832fd19a391150/tests%2Fmodels%2Fqwen2_vl%2Ftest_processing_qwen2_vl.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Fqwen2_vl%2Ftest_processing_qwen2_vl.py?ref=98a3c49135276ff44ecfc7e72a832fd19a391150",
            "patch": "@@ -304,26 +304,26 @@ def test_apply_chat_template_video_frame_sampling(self):\n         self.assertTrue(self.videos_input_name in out_dict_with_video)\n         self.assertEqual(len(out_dict_with_video[self.videos_input_name]), 360)\n \n-        # Load with `video_fps` arg\n-        video_fps = 1\n+        # Load with `fps` arg\n+        fps = 1\n         out_dict_with_video = processor.apply_chat_template(\n             messages,\n             add_generation_prompt=True,\n             tokenize=True,\n             return_dict=True,\n-            video_fps=video_fps,\n+            fps=fps,\n         )\n         self.assertTrue(self.videos_input_name in out_dict_with_video)\n         self.assertEqual(len(out_dict_with_video[self.videos_input_name]), 900)\n \n-        # Load with `video_fps` and `num_frames` args, should raise an error\n+        # Load with `fps` and `num_frames` args, should raise an error\n         with self.assertRaises(ValueError):\n             out_dict_with_video = processor.apply_chat_template(\n                 messages,\n                 add_generation_prompt=True,\n                 tokenize=True,\n                 return_dict=True,\n-                video_fps=video_fps,\n+                fps=fps,\n                 num_frames=num_frames,\n             )\n "
        },
        {
            "sha": "45a7a945206fca7bd16fa835efe973f32f7b0389",
            "filename": "tests/models/smolvlm/test_processing_smolvlm.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/huggingface/transformers/blob/98a3c49135276ff44ecfc7e72a832fd19a391150/tests%2Fmodels%2Fsmolvlm%2Ftest_processing_smolvlm.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/98a3c49135276ff44ecfc7e72a832fd19a391150/tests%2Fmodels%2Fsmolvlm%2Ftest_processing_smolvlm.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Fsmolvlm%2Ftest_processing_smolvlm.py?ref=98a3c49135276ff44ecfc7e72a832fd19a391150",
            "patch": "@@ -417,20 +417,20 @@ def test_apply_chat_template_video_frame_sampling(self):\n         # SmolVLM doesn't sample `num_frames` exactly, by uses other sampling method\n         self.assertEqual(len(out_dict_with_video[self.videos_input_name][0]), 3)\n \n-        # Load with `video_fps` arg\n-        video_fps = 1\n+        # Load with `fps` arg\n+        fps = 1\n         out_dict_with_video = processor.apply_chat_template(\n             messages,\n             add_generation_prompt=True,\n             tokenize=True,\n             return_dict=True,\n-            video_fps=video_fps,\n+            fps=fps,\n             return_tensors=\"pt\",\n         )\n         self.assertTrue(self.videos_input_name in out_dict_with_video)\n         self.assertEqual(len(out_dict_with_video[self.videos_input_name]), 1)\n         # SmolVLM doesn't sample 1 frame per second exactly, by uses other sampling method\n-        self.assertEqual(len(out_dict_with_video[self.videos_input_name][0]), video_fps * 10)\n+        self.assertEqual(len(out_dict_with_video[self.videos_input_name][0]), fps * 10)\n \n         # NOTE: the last assert checks are removed\n         # Loading video as a list of frames (i.e. images) is not supported in SmolVLM"
        },
        {
            "sha": "6be8843531c4578b3e1cfe3ac3da3a99ddd6345d",
            "filename": "tests/test_processing_common.py",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/huggingface/transformers/blob/98a3c49135276ff44ecfc7e72a832fd19a391150/tests%2Ftest_processing_common.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/98a3c49135276ff44ecfc7e72a832fd19a391150/tests%2Ftest_processing_common.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Ftest_processing_common.py?ref=98a3c49135276ff44ecfc7e72a832fd19a391150",
            "patch": "@@ -991,43 +991,43 @@ def test_apply_chat_template_video_frame_sampling(self):\n         self.assertEqual(len(out_dict_with_video[self.videos_input_name]), 1)\n         self.assertEqual(len(out_dict_with_video[self.videos_input_name][0]), num_frames)\n \n-        # Load with `video_fps` arg\n-        video_fps = 1\n+        # Load with `fps` arg\n+        fps = 1\n         out_dict_with_video = processor.apply_chat_template(\n             messages,\n             add_generation_prompt=True,\n             tokenize=True,\n             return_dict=True,\n-            video_fps=video_fps,\n+            fps=fps,\n             return_tensors=\"pt\",\n         )\n         self.assertTrue(self.videos_input_name in out_dict_with_video)\n         self.assertEqual(len(out_dict_with_video[self.videos_input_name]), 1)\n-        self.assertEqual(len(out_dict_with_video[self.videos_input_name][0]), video_fps * 10)\n+        self.assertEqual(len(out_dict_with_video[self.videos_input_name][0]), fps * 10)\n \n         # Whan `do_sample_frames=False` no sampling is done and whole video is loaded, even if number of frames is passed\n-        video_fps = 1\n+        fps = 1\n         out_dict_with_video = processor.apply_chat_template(\n             messages,\n             add_generation_prompt=True,\n             tokenize=True,\n             return_dict=True,\n             do_sample_frames=False,\n-            video_fps=video_fps,\n+            fps=fps,\n             return_tensors=\"pt\",\n         )\n         self.assertTrue(self.videos_input_name in out_dict_with_video)\n         self.assertEqual(len(out_dict_with_video[self.videos_input_name]), 1)\n         self.assertEqual(len(out_dict_with_video[self.videos_input_name][0]), 300)\n \n-        # Load with `video_fps` and `num_frames` args, should raise an error\n+        # Load with `fps` and `num_frames` args, should raise an error\n         with self.assertRaises(ValueError):\n             out_dict_with_video = processor.apply_chat_template(\n                 messages,\n                 add_generation_prompt=True,\n                 tokenize=True,\n                 return_dict=True,\n-                video_fps=video_fps,\n+                fps=fps,\n                 num_frames=num_frames,\n             )\n "
        }
    ],
    "stats": {
        "total": 56,
        "additions": 28,
        "deletions": 28
    }
}