{
    "author": "jiqing-feng",
    "message": "update emu3 test (#38543)\n\nSigned-off-by: jiqing-feng <jiqing.feng@intel.com>",
    "sha": "814432423c6a967679df198f6beeae841a6cfae3",
    "files": [
        {
            "sha": "9c9435fbe431930bb1147db8d736ea67fdfe6baa",
            "filename": "tests/models/emu3/test_modeling_emu3.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/814432423c6a967679df198f6beeae841a6cfae3/tests%2Fmodels%2Femu3%2Ftest_modeling_emu3.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/814432423c6a967679df198f6beeae841a6cfae3/tests%2Fmodels%2Femu3%2Ftest_modeling_emu3.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Femu3%2Ftest_modeling_emu3.py?ref=814432423c6a967679df198f6beeae841a6cfae3",
            "patch": "@@ -537,7 +537,7 @@ def prefix_allowed_tokens_fn(batch_id, input_ids):\n         )\n         self.assertTrue(out.shape[1] == 54)\n \n-        image = model.decode_image_tokens(out[:, inputs.input_ids.shape[1] :], height=HEIGHT, width=WIDTH)\n+        image = model.decode_image_tokens(image_tokens=out[:, inputs.input_ids.shape[1] :], height=HEIGHT, width=WIDTH)\n         images = processor.postprocess(list(image.float()), return_tensors=\"np\")\n         self.assertTrue(images[\"pixel_values\"].shape == (3, 40, 40))\n         self.assertTrue(isinstance(images[\"pixel_values\"], np.ndarray))\n@@ -548,4 +548,4 @@ def prefix_allowed_tokens_fn(batch_id, input_ids):\n             repo_type=\"dataset\",\n         )\n         original_pixels = np.load(filepath)\n-        self.assertTrue(np.allclose(original_pixels, images[\"pixel_values\"]))\n+        self.assertTrue(np.allclose(original_pixels, images[\"pixel_values\"], atol=1))"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}