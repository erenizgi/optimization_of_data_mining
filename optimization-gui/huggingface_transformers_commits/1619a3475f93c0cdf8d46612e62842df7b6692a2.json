{
    "author": "glegendre01",
    "message": "fix (CI): Refactor SSH runners (#41991)\n\n* Change ssh runner type\n\n* Add wait step to SSH runner workflow\n\n* Rename wait step to wait2 in ssh-runner.yml\n\n* Remove wait step from ssh-runner.yml\n\nRemoved the wait step from the SSH runner workflow.\n\n* Update runner type for single GPU A10 instance\n\n* Update SSH runner version to 1.90.3\n\n* Add sha256sum to ssh-runner workflow\n\n* Update runner type and remove unused steps",
    "sha": "1619a3475f93c0cdf8d46612e62842df7b6692a2",
    "files": [
        {
            "sha": "6300cd4105bc222cc10ba251e5d38f76b746b893",
            "filename": ".github/workflows/ssh-runner.yml",
            "status": "modified",
            "additions": 5,
            "deletions": 11,
            "changes": 16,
            "blob_url": "https://github.com/huggingface/transformers/blob/1619a3475f93c0cdf8d46612e62842df7b6692a2/.github%2Fworkflows%2Fssh-runner.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/1619a3475f93c0cdf8d46612e62842df7b6692a2/.github%2Fworkflows%2Fssh-runner.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fssh-runner.yml?ref=1619a3475f93c0cdf8d46612e62842df7b6692a2",
            "patch": "@@ -4,7 +4,7 @@ on:\n   workflow_dispatch:\n     inputs:\n       runner_type:\n-        description: 'Type of runner to test (a10 or t4)'\n+        description: 'Type of runner to test (a10)'\n         required: true\n       docker_image:\n         description: 'Name of the Docker image'\n@@ -36,14 +36,10 @@ jobs:\n           NUM_GPUS: ${{ github.event.inputs.num_gpus }}\n           RUNNER_TYPE: ${{ github.event.inputs.runner_type }}\n         run: |\n-          if [[ \"$NUM_GPUS\" == \"single\" && \"$RUNNER_TYPE\" == \"t4\" ]]; then\n-            echo \"RUNNER=aws-g4dn-4xlarge-cache\" >> $GITHUB_ENV\n-          elif [[ \"$NUM_GPUS\" == \"multi\" && \"$RUNNER_TYPE\" == \"t4\" ]]; then\n-            echo \"RUNNER=aws-g4dn-12xlarge-cache\" >> $GITHUB_ENV\n-          elif [[ \"$NUM_GPUS\" == \"single\" && \"$RUNNER_TYPE\" == \"a10\" ]]; then\n-            echo \"RUNNER=aws-g5-4xlarge-cache\" >> $GITHUB_ENV\n+          if [[ \"$NUM_GPUS\" == \"single\" && \"$RUNNER_TYPE\" == \"a10\" ]]; then\n+            echo \"RUNNER=aws-g5-4xlarge-cache-ssh\" >> $GITHUB_ENV\n           elif [[ \"$NUM_GPUS\" == \"multi\" && \"$RUNNER_TYPE\" == \"a10\" ]]; then\n-            echo \"RUNNER=aws-g5-12xlarge-cache\" >> $GITHUB_ENV\n+            echo \"RUNNER=aws-g5-12xlarge-cache-ssh\" >> $GITHUB_ENV\n           else\n             echo \"RUNNER=\" >> $GITHUB_ENV\n           fi\n@@ -61,8 +57,6 @@ jobs:\n       group: ${{ needs.get_runner.outputs.RUNNER }}\n     container:\n       image: ${{ github.event.inputs.docker_image }}\n-      options: --gpus all --privileged --ipc host -v /mnt/cache/.cache/huggingface:/mnt/cache/\n-\n     steps:\n       - name: Update clone\n         working-directory: /transformers\n@@ -106,7 +100,7 @@ jobs:\n           else\n             echo \"SLACKCHANNEL=${{ secrets.SLACK_CIFEEDBACK_CHANNEL }}\" >> $GITHUB_ENV\n           fi\n-\n+        \n       - name: Tailscale # In order to be able to SSH when a test fails\n         uses: huggingface/tailscale-action@main\n         with:"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 5,
        "deletions": 11
    }
}