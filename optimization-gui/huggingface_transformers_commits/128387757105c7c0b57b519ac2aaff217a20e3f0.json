{
    "author": "sbucaille",
    "message": "[superglue] fix wrong concatenation which made batching results wrong (#38850)",
    "sha": "128387757105c7c0b57b519ac2aaff217a20e3f0",
    "files": [
        {
            "sha": "33e50de7aa8defef42bcbcbc6608764d6d09629a",
            "filename": "src/transformers/models/superglue/modeling_superglue.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/128387757105c7c0b57b519ac2aaff217a20e3f0/src%2Ftransformers%2Fmodels%2Fsuperglue%2Fmodeling_superglue.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/128387757105c7c0b57b519ac2aaff217a20e3f0/src%2Ftransformers%2Fmodels%2Fsuperglue%2Fmodeling_superglue.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fsuperglue%2Fmodeling_superglue.py?ref=128387757105c7c0b57b519ac2aaff217a20e3f0",
            "patch": "@@ -725,8 +725,8 @@ def _match_image_pair(\n         matches0 = torch.where(valid0, indices0, indices0.new_tensor(-1))\n         matches1 = torch.where(valid1, indices1, indices1.new_tensor(-1))\n \n-        matches = torch.cat([matches0, matches1]).reshape(batch_size, 2, -1)\n-        matching_scores = torch.cat([matching_scores0, matching_scores1]).reshape(batch_size, 2, -1)\n+        matches = torch.cat([matches0, matches1], dim=1).reshape(batch_size, 2, -1)\n+        matching_scores = torch.cat([matching_scores0, matching_scores1], dim=1).reshape(batch_size, 2, -1)\n \n         if output_hidden_states:\n             all_hidden_states = all_hidden_states + encoded_keypoints[1]"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}