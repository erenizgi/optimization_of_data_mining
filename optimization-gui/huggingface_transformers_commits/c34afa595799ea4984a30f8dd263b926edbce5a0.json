{
    "author": "pcuenca",
    "message": "Processor chat template: pass custom kwargs (#37852)",
    "sha": "c34afa595799ea4984a30f8dd263b926edbce5a0",
    "files": [
        {
            "sha": "eac5b0a178e7491d044f8ab91cb6eb3fe8751f33",
            "filename": "src/transformers/processing_utils.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/c34afa595799ea4984a30f8dd263b926edbce5a0/src%2Ftransformers%2Fprocessing_utils.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/c34afa595799ea4984a30f8dd263b926edbce5a0/src%2Ftransformers%2Fprocessing_utils.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fprocessing_utils.py?ref=c34afa595799ea4984a30f8dd263b926edbce5a0",
            "patch": "@@ -1440,6 +1440,9 @@ def apply_chat_template(\n                 if value is not None and not isinstance(value, dict):\n                     processed_kwargs[kwarg_type][key] = value\n \n+        # Pass unprocessed custom kwargs\n+        processed_kwargs[\"template_kwargs\"].update(kwargs)\n+\n         if isinstance(conversation, (list, tuple)) and (\n             isinstance(conversation[0], (list, tuple)) or hasattr(conversation[0], \"content\")\n         ):"
        }
    ],
    "stats": {
        "total": 3,
        "additions": 3,
        "deletions": 0
    }
}