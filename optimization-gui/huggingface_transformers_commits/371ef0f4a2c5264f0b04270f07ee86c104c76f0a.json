{
    "author": "Rocketknight1",
    "message": "[v5] Deprecate Text2Text and related pipelines (#41996)\n\n* Deprecate Text2Text and related pipelines\n\n* Try a restructure\n\n* make fixup\n\n* logging -> logger",
    "sha": "371ef0f4a2c5264f0b04270f07ee86c104c76f0a",
    "files": [
        {
            "sha": "5b8e3f6b221c4d2115224e32341d1e644174e55a",
            "filename": "src/transformers/pipelines/__init__.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/371ef0f4a2c5264f0b04270f07ee86c104c76f0a/src%2Ftransformers%2Fpipelines%2F__init__.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/371ef0f4a2c5264f0b04270f07ee86c104c76f0a/src%2Ftransformers%2Fpipelines%2F__init__.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fpipelines%2F__init__.py?ref=371ef0f4a2c5264f0b04270f07ee86c104c76f0a",
            "patch": "@@ -59,6 +59,7 @@\n     get_default_model_and_revision,\n     load_model,\n )\n+from .deprecated import SummarizationPipeline, Text2TextGenerationPipeline, TranslationPipeline\n from .depth_estimation import DepthEstimationPipeline\n from .document_question_answering import DocumentQuestionAnsweringPipeline\n from .feature_extraction import FeatureExtractionPipeline\n@@ -74,7 +75,6 @@\n from .object_detection import ObjectDetectionPipeline\n from .question_answering import QuestionAnsweringArgumentHandler, QuestionAnsweringPipeline\n from .table_question_answering import TableQuestionAnsweringArgumentHandler, TableQuestionAnsweringPipeline\n-from .text2text_generation import SummarizationPipeline, Text2TextGenerationPipeline, TranslationPipeline\n from .text_classification import TextClassificationPipeline\n from .text_generation import TextGenerationPipeline\n from .text_to_audio import TextToAudioPipeline"
        },
        {
            "sha": "c0e31392f272fdca29fedef7426d3c088260db53",
            "filename": "src/transformers/pipelines/deprecated/__init__.py",
            "status": "added",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/huggingface/transformers/blob/371ef0f4a2c5264f0b04270f07ee86c104c76f0a/src%2Ftransformers%2Fpipelines%2Fdeprecated%2F__init__.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/371ef0f4a2c5264f0b04270f07ee86c104c76f0a/src%2Ftransformers%2Fpipelines%2Fdeprecated%2F__init__.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fpipelines%2Fdeprecated%2F__init__.py?ref=371ef0f4a2c5264f0b04270f07ee86c104c76f0a",
            "patch": "@@ -0,0 +1,16 @@\n+# coding=utf-8\n+# Copyright 2025 The HuggingFace Inc. team.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+from .text2text_generation import SummarizationPipeline, Text2TextGenerationPipeline, TranslationPipeline"
        },
        {
            "sha": "54e1b2873041d926108b10d0bfe7559ca8147b82",
            "filename": "src/transformers/pipelines/deprecated/text2text_generation.py",
            "status": "renamed",
            "additions": 27,
            "deletions": 5,
            "changes": 32,
            "blob_url": "https://github.com/huggingface/transformers/blob/371ef0f4a2c5264f0b04270f07ee86c104c76f0a/src%2Ftransformers%2Fpipelines%2Fdeprecated%2Ftext2text_generation.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/371ef0f4a2c5264f0b04270f07ee86c104c76f0a/src%2Ftransformers%2Fpipelines%2Fdeprecated%2Ftext2text_generation.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fpipelines%2Fdeprecated%2Ftext2text_generation.py?ref=371ef0f4a2c5264f0b04270f07ee86c104c76f0a",
            "patch": "@@ -2,14 +2,14 @@\n import warnings\n from typing import Any\n \n-from ..generation import GenerationConfig\n-from ..tokenization_utils import TruncationStrategy\n-from ..utils import add_end_docstrings, is_torch_available, logging\n-from .base import Pipeline, build_pipeline_init_args\n+from ...generation import GenerationConfig\n+from ...tokenization_utils import TruncationStrategy\n+from ...utils import add_end_docstrings, is_torch_available, logging\n+from ..base import Pipeline, build_pipeline_init_args\n \n \n if is_torch_available():\n-    from ..models.auto.modeling_auto import MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES\n+    from ...models.auto.modeling_auto import MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES\n \n logger = logging.get_logger(__name__)\n \n@@ -77,6 +77,12 @@ class Text2TextGenerationPipeline(Pipeline):\n     return_name = \"generated\"\n \n     def __init__(self, *args, **kwargs):\n+        if self.return_name == \"generated\":  # Check this isn't summarization/translation instead\n+            logger.warning_once(\n+                \"The `Text2TextGenerationPipeline` is deprecated and no longer maintained. For most \"\n+                \"purposes, we recommend using newer models with causal pipelines like \"\n+                \"`TextGenerationPipeline` or `ImageTextToTextPipeline`.\"\n+            )\n         super().__init__(*args, **kwargs)\n \n         self.check_model_type(MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES)\n@@ -254,6 +260,14 @@ class SummarizationPipeline(Text2TextGenerationPipeline):\n     # Used in the return key of the pipeline.\n     return_name = \"summary\"\n \n+    def __init__(self, *args, **kwargs):\n+        logger.warning_once(\n+            \"The `SummarizationPipeline` is deprecated and no longer maintained. For most \"\n+            \"summarization tasks, we recommend appropriately prompting modern general-purpose LLMs \"\n+            \"via pipelines like `TextGenerationPipeline` or `ImageTextToTextPipeline`.\"\n+        )\n+        super().__init__(*args, **kwargs)\n+\n     def __call__(self, *args, **kwargs):\n         r\"\"\"\n         Summarize the text(s) given as inputs.\n@@ -323,6 +337,14 @@ class TranslationPipeline(Text2TextGenerationPipeline):\n     # Used in the return key of the pipeline.\n     return_name = \"translation\"\n \n+    def __init__(self, *args, **kwargs):\n+        logger.warning_once(\n+            \"The `TranslationPipeline` is deprecated and no longer maintained. For most \"\n+            \"translation tasks, we recommend appropriately prompting modern general-purpose LLMs \"\n+            \"via pipelines like `TextGenerationPipeline` or `ImageTextToTextPipeline`.\"\n+        )\n+        super().__init__(*args, **kwargs)\n+\n     def check_inputs(self, input_length: int, min_length: int, max_new_tokens: int):\n         \"\"\"\n         Removed input length check - unnecessary with max_new_tokens (previously relevant for max_length)",
            "previous_filename": "src/transformers/pipelines/text2text_generation.py"
        }
    ],
    "stats": {
        "total": 50,
        "additions": 44,
        "deletions": 6
    }
}