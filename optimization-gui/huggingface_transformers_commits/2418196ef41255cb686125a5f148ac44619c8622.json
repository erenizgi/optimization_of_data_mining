{
    "author": "zucchini-nlp",
    "message": "Fix the order of methods in processor loading (#42031)\n\n* fix the order\n\n* add a test",
    "sha": "2418196ef41255cb686125a5f148ac44619c8622",
    "files": [
        {
            "sha": "b03bc3e1273e8f8ddaa3efe9a74616b3bbd0957e",
            "filename": "src/transformers/processing_utils.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/2418196ef41255cb686125a5f148ac44619c8622/src%2Ftransformers%2Fprocessing_utils.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/2418196ef41255cb686125a5f148ac44619c8622/src%2Ftransformers%2Fprocessing_utils.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fprocessing_utils.py?ref=2418196ef41255cb686125a5f148ac44619c8622",
            "patch": "@@ -1370,8 +1370,8 @@ def from_pretrained(\n         if token is not None:\n             kwargs[\"token\"] = token\n \n-        processor_dict, kwargs = cls.get_processor_dict(pretrained_model_name_or_path, **kwargs)\n         args = cls._get_arguments_from_pretrained(pretrained_model_name_or_path, **kwargs)\n+        processor_dict, kwargs = cls.get_processor_dict(pretrained_model_name_or_path, **kwargs)\n         return cls.from_args_and_dict(args, processor_dict, **kwargs)\n \n     @classmethod"
        },
        {
            "sha": "5ce4e9a3867b3e4ba20ceb1051350665a325fc65",
            "filename": "tests/models/auto/test_processor_auto.py",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/huggingface/transformers/blob/2418196ef41255cb686125a5f148ac44619c8622/tests%2Fmodels%2Fauto%2Ftest_processor_auto.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/2418196ef41255cb686125a5f148ac44619c8622/tests%2Fmodels%2Fauto%2Ftest_processor_auto.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Fauto%2Ftest_processor_auto.py?ref=2418196ef41255cb686125a5f148ac44619c8622",
            "patch": "@@ -88,6 +88,15 @@ def test_processor_from_local_directory_from_repo(self):\n \n         self.assertIsInstance(processor, Wav2Vec2Processor)\n \n+    def test_processor_from_local_subfolder_from_repo(self):\n+        with tempfile.TemporaryDirectory() as tmpdirname:\n+            processor = AutoProcessor.from_pretrained(\"facebook/wav2vec2-base-960h\")\n+            processor.save_pretrained(f\"{tmpdirname}/processor_subfolder\")\n+\n+            processor = Wav2Vec2Processor.from_pretrained(tmpdirname, subfolder=\"processor_subfolder\")\n+\n+        self.assertIsInstance(processor, Wav2Vec2Processor)\n+\n     def test_processor_from_local_directory_from_extractor_config(self):\n         with tempfile.TemporaryDirectory() as tmpdirname:\n             # copy relevant files"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 10,
        "deletions": 1
    }
}