{
    "author": "ArthurZucker",
    "message": "Revert \"Update deprecated Jax calls (#35919)\" (#36880)\n\n* Revert \"Update deprecated Jax calls (#35919)\"\n\nThis reverts commit f0d5b2ff04e1354d32beac70984adcc8100352a0.\n\n* Revert \"Update deprecated Jax calls (#35919)\"\n\nThis reverts commit f0d5b2ff04e1354d32beac70984adcc8100352a0.\n\n* udpate",
    "sha": "f19d018bfff1613ba05dcbf7e82c461d49aee73e",
    "files": [
        {
            "sha": "4162f21e954403bace9f66580f056b47ead8e92d",
            "filename": "src/transformers/commands/env.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/f19d018bfff1613ba05dcbf7e82c461d49aee73e/src%2Ftransformers%2Fcommands%2Fenv.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/f19d018bfff1613ba05dcbf7e82c461d49aee73e/src%2Ftransformers%2Fcommands%2Fenv.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fcommands%2Fenv.py?ref=f19d018bfff1613ba05dcbf7e82c461d49aee73e",
            "patch": "@@ -129,7 +129,7 @@ def run(self):\n             flax_version = flax.__version__\n             jax_version = jax.__version__\n             jaxlib_version = jaxlib.__version__\n-            jax_backend = jax.default_backend()\n+            jax_backend = jax.lib.xla_bridge.get_backend().platform\n \n         info = {\n             \"`transformers` version\": version,"
        },
        {
            "sha": "7c5fdf9c17ccfb14a8cdfa4b354661470ec2a1c5",
            "filename": "src/transformers/models/longt5/modeling_flax_longt5.py",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/huggingface/transformers/blob/f19d018bfff1613ba05dcbf7e82c461d49aee73e/src%2Ftransformers%2Fmodels%2Flongt5%2Fmodeling_flax_longt5.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/f19d018bfff1613ba05dcbf7e82c461d49aee73e/src%2Ftransformers%2Fmodels%2Flongt5%2Fmodeling_flax_longt5.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Flongt5%2Fmodeling_flax_longt5.py?ref=f19d018bfff1613ba05dcbf7e82c461d49aee73e",
            "patch": "@@ -387,7 +387,7 @@ def _relative_position_bucket(relative_position, bidirectional=True, num_buckets\n             relative_buckets += (relative_position > 0) * num_buckets\n             relative_position = jnp.abs(relative_position)\n         else:\n-            relative_position = -jnp.clip(relative_position, max=0)\n+            relative_position = -jnp.clip(relative_position, a_max=0)\n         # now relative_position is in the range [0, inf)\n \n         # half of the buckets are for exact increments in positions\n@@ -398,7 +398,7 @@ def _relative_position_bucket(relative_position, bidirectional=True, num_buckets\n         relative_position_if_large = max_exact + (\n             jnp.log(relative_position / max_exact) / jnp.log(max_distance / max_exact) * (num_buckets - max_exact)\n         )\n-        relative_position_if_large = jnp.clip(relative_position_if_large, max=num_buckets - 1)\n+        relative_position_if_large = jnp.clip(relative_position_if_large, a_max=num_buckets - 1)\n \n         relative_buckets += jnp.where(is_small, relative_position, relative_position_if_large)\n \n@@ -672,7 +672,7 @@ def _relative_position_bucket(relative_position, bidirectional=True, num_buckets\n             relative_buckets += (relative_position > 0) * num_buckets\n             relative_position = jnp.abs(relative_position)\n         else:\n-            relative_position = -jnp.clip(relative_position, max=0)\n+            relative_position = -jnp.clip(relative_position, a_max=0)\n         # now relative_position is in the range [0, inf)\n \n         # half of the buckets are for exact increments in positions\n@@ -683,7 +683,7 @@ def _relative_position_bucket(relative_position, bidirectional=True, num_buckets\n         relative_position_if_large = max_exact + (\n             jnp.log(relative_position / max_exact) / jnp.log(max_distance / max_exact) * (num_buckets - max_exact)\n         )\n-        relative_position_if_large = jnp.clip(relative_position_if_large, max=num_buckets - 1)\n+        relative_position_if_large = jnp.clip(relative_position_if_large, a_max=num_buckets - 1)\n \n         relative_buckets += jnp.where(is_small, relative_position, relative_position_if_large)\n \n@@ -895,7 +895,7 @@ def _relative_position_bucket(relative_position, bidirectional=True, num_buckets\n             relative_buckets += (relative_position > 0) * num_buckets\n             relative_position = jnp.abs(relative_position)\n         else:\n-            relative_position = -jnp.clip(relative_position, max=0)\n+            relative_position = -jnp.clip(relative_position, a_max=0)\n         # now relative_position is in the range [0, inf)\n \n         # half of the buckets are for exact increments in positions\n@@ -906,7 +906,7 @@ def _relative_position_bucket(relative_position, bidirectional=True, num_buckets\n         relative_position_if_large = max_exact + (\n             jnp.log(relative_position / max_exact) / jnp.log(max_distance / max_exact) * (num_buckets - max_exact)\n         )\n-        relative_position_if_large = jnp.clip(relative_position_if_large, max=num_buckets - 1)\n+        relative_position_if_large = jnp.clip(relative_position_if_large, a_max=num_buckets - 1)\n \n         relative_buckets += jnp.where(is_small, relative_position, relative_position_if_large)\n "
        },
        {
            "sha": "be76fe1b7724c0901f1f43661cd37e31a59a345a",
            "filename": "src/transformers/models/t5/modeling_flax_t5.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/f19d018bfff1613ba05dcbf7e82c461d49aee73e/src%2Ftransformers%2Fmodels%2Ft5%2Fmodeling_flax_t5.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/f19d018bfff1613ba05dcbf7e82c461d49aee73e/src%2Ftransformers%2Fmodels%2Ft5%2Fmodeling_flax_t5.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Ft5%2Fmodeling_flax_t5.py?ref=f19d018bfff1613ba05dcbf7e82c461d49aee73e",
            "patch": "@@ -247,7 +247,7 @@ def _relative_position_bucket(relative_position, bidirectional=True, num_buckets\n             relative_buckets += (relative_position > 0) * num_buckets\n             relative_position = jnp.abs(relative_position)\n         else:\n-            relative_position = -jnp.clip(relative_position, max=0)\n+            relative_position = -jnp.clip(relative_position, a_max=0)\n         # now relative_position is in the range [0, inf)\n \n         # half of the buckets are for exact increments in positions\n@@ -258,7 +258,7 @@ def _relative_position_bucket(relative_position, bidirectional=True, num_buckets\n         relative_position_if_large = max_exact + (\n             jnp.log(relative_position / max_exact) / jnp.log(max_distance / max_exact) * (num_buckets - max_exact)\n         )\n-        relative_position_if_large = jnp.clip(relative_position_if_large, max=num_buckets - 1)\n+        relative_position_if_large = jnp.clip(relative_position_if_large, a_max=num_buckets - 1)\n \n         relative_buckets += jnp.where(is_small, relative_position, relative_position_if_large)\n "
        }
    ],
    "stats": {
        "total": 18,
        "additions": 9,
        "deletions": 9
    }
}