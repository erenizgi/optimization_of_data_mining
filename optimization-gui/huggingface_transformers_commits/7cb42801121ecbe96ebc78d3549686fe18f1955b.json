{
    "author": "MilkClouds",
    "message": "Fix Auto classes to support dynamically registered processors (#41865)",
    "sha": "7cb42801121ecbe96ebc78d3549686fe18f1955b",
    "files": [
        {
            "sha": "ccc864c0db6a32016b7bcc5eff867d858a6a3ee0",
            "filename": "src/transformers/models/auto/image_processing_auto.py",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/huggingface/transformers/blob/7cb42801121ecbe96ebc78d3549686fe18f1955b/src%2Ftransformers%2Fmodels%2Fauto%2Fimage_processing_auto.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/7cb42801121ecbe96ebc78d3549686fe18f1955b/src%2Ftransformers%2Fmodels%2Fauto%2Fimage_processing_auto.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fauto%2Fimage_processing_auto.py?ref=7cb42801121ecbe96ebc78d3549686fe18f1955b",
            "patch": "@@ -524,10 +524,9 @@ def from_pretrained(cls, pretrained_model_name_or_path, *inputs, **kwargs):\n                 )\n                 use_fast = False\n             if use_fast:\n-                for image_processors in IMAGE_PROCESSOR_MAPPING_NAMES.values():\n-                    if image_processor_type in image_processors:\n-                        break\n-                else:\n+                # Check if the fast image processor class exists\n+                image_processor_class_fast = get_image_processor_class_from_name(image_processor_type)\n+                if image_processor_class_fast is None:\n                     image_processor_type = image_processor_type[:-4]\n                     use_fast = False\n                     logger.warning_once("
        },
        {
            "sha": "50b823e7909532a294c3c0e28b7385c93103c3a4",
            "filename": "src/transformers/models/auto/video_processing_auto.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/7cb42801121ecbe96ebc78d3549686fe18f1955b/src%2Ftransformers%2Fmodels%2Fauto%2Fvideo_processing_auto.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/7cb42801121ecbe96ebc78d3549686fe18f1955b/src%2Ftransformers%2Fmodels%2Fauto%2Fvideo_processing_auto.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fauto%2Fvideo_processing_auto.py?ref=7cb42801121ecbe96ebc78d3549686fe18f1955b",
            "patch": "@@ -291,7 +291,7 @@ def from_pretrained(cls, pretrained_model_name_or_path, *inputs, **kwargs):\n \n                 # Some models have different image processors, e.g. InternVL uses GotOCRImageProcessor\n                 # We cannot use GotOCRVideoProcessor when falling back for BC and should try to infer from config later on\n-                if video_processor_class_inferred in VIDEO_PROCESSOR_MAPPING_NAMES.values():\n+                if video_processor_class_from_name(video_processor_class_inferred) is not None:\n                     video_processor_class = video_processor_class_inferred\n             if \"AutoImageProcessor\" in config_dict.get(\"auto_map\", {}):\n                 image_processor_auto_map = config_dict[\"auto_map\"][\"AutoImageProcessor\"]"
        }
    ],
    "stats": {
        "total": 9,
        "additions": 4,
        "deletions": 5
    }
}