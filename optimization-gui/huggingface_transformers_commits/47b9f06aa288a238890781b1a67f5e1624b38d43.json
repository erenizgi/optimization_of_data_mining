{
    "author": "yao-matrix",
    "message": "make test_snowman_image_captioning pass on XPU, by sharing same atol w/ ROCM (#37480)\n\nSigned-off-by: YAO Matrix <matrix.yao@intel.com>\nCo-authored-by: Yih-Dar <2521628+ydshieh@users.noreply.github.com>",
    "sha": "47b9f06aa288a238890781b1a67f5e1624b38d43",
    "files": [
        {
            "sha": "102db8b57ed1eab12cb496bd2135907044e6cea8",
            "filename": "tests/models/kosmos2/test_modeling_kosmos2.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/47b9f06aa288a238890781b1a67f5e1624b38d43/tests%2Fmodels%2Fkosmos2%2Ftest_modeling_kosmos2.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/47b9f06aa288a238890781b1a67f5e1624b38d43/tests%2Fmodels%2Fkosmos2%2Ftest_modeling_kosmos2.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Fkosmos2%2Ftest_modeling_kosmos2.py?ref=47b9f06aa288a238890781b1a67f5e1624b38d43",
            "patch": "@@ -28,6 +28,7 @@\n from transformers.models.kosmos2.configuration_kosmos2 import Kosmos2TextConfig, Kosmos2VisionConfig\n from transformers.testing_utils import (\n     IS_ROCM_SYSTEM,\n+    IS_XPU_SYSTEM,\n     require_torch,\n     require_vision,\n     slow,\n@@ -655,7 +656,7 @@ def test_snowman_image_captioning(self):\n         processed_text = processed_text[0]\n         final_text, entities = final_text_with_entities[0]\n \n-        atol = 1e-4 if IS_ROCM_SYSTEM else 1e-5\n+        atol = 1e-4 if (IS_ROCM_SYSTEM or IS_XPU_SYSTEM) else 1e-5\n \n         np.testing.assert_allclose(\n             torch.concat(scores[1:4])[:3, :3].to(\"cpu\").numpy(),"
        }
    ],
    "stats": {
        "total": 3,
        "additions": 2,
        "deletions": 1
    }
}