{
    "author": "McPatate",
    "message": "refactor: remove `set_tracer_provider` and `set_meter_provider` calls (#39422)",
    "sha": "53c9dcd6fd31cb9e8a10248693a905d0223b8316",
    "files": [
        {
            "sha": "114abd8400e0e24f90a8a216bb2450a170887eb1",
            "filename": "src/transformers/utils/metrics.py",
            "status": "modified",
            "additions": 1,
            "deletions": 19,
            "changes": 20,
            "blob_url": "https://github.com/huggingface/transformers/blob/53c9dcd6fd31cb9e8a10248693a905d0223b8316/src%2Ftransformers%2Futils%2Fmetrics.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/53c9dcd6fd31cb9e8a10248693a905d0223b8316/src%2Ftransformers%2Futils%2Fmetrics.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Futils%2Fmetrics.py?ref=53c9dcd6fd31cb9e8a10248693a905d0223b8316",
            "patch": "@@ -20,27 +20,9 @@ class RequestStatus(Enum):\n \n \n try:\n-    from opentelemetry import metrics, trace\n-    from opentelemetry.exporter.otlp.proto.http.metric_exporter import OTLPMetricExporter\n-    from opentelemetry.exporter.otlp.proto.http.trace_exporter import OTLPSpanExporter\n-    from opentelemetry.sdk.metrics import MeterProvider\n-    from opentelemetry.sdk.metrics.export import PeriodicExportingMetricReader\n-    from opentelemetry.sdk.resources import Resource\n-    from opentelemetry.sdk.trace import TracerProvider\n-    from opentelemetry.sdk.trace.export import BatchSpanProcessor\n+    from opentelemetry import metrics\n     from opentelemetry.trace import Status, StatusCode, get_tracer\n \n-    resource = Resource.create({\"service.name\": \"transformers\"})\n-\n-    metrics_exporter = PeriodicExportingMetricReader(OTLPMetricExporter(), export_interval_millis=1000)\n-    meter_provider = MeterProvider(resource=resource, metric_readers=[metrics_exporter])\n-    metrics.set_meter_provider(meter_provider)\n-\n-    trace_exporter = OTLPSpanExporter()\n-    tracer_provider = TracerProvider(resource=resource)\n-    tracer_provider.add_span_processor(BatchSpanProcessor(trace_exporter))\n-    trace.set_tracer_provider(tracer_provider)\n-\n     _has_opentelemetry = True\n except ImportError:\n     _has_opentelemetry = False"
        }
    ],
    "stats": {
        "total": 20,
        "additions": 1,
        "deletions": 19
    }
}