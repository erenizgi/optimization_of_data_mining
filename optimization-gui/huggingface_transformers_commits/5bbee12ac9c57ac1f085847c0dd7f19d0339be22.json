{
    "author": "gante",
    "message": "[Moshi] disable automatic compilation if the model can't compile (#35992)\n\nmoshi cant compile",
    "sha": "5bbee12ac9c57ac1f085847c0dd7f19d0339be22",
    "files": [
        {
            "sha": "45558bd22a4e7282dbffc7082955a4c2a39d8e06",
            "filename": "src/transformers/generation/utils.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/5bbee12ac9c57ac1f085847c0dd7f19d0339be22/src%2Ftransformers%2Fgeneration%2Futils.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/5bbee12ac9c57ac1f085847c0dd7f19d0339be22/src%2Ftransformers%2Fgeneration%2Futils.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fgeneration%2Futils.py?ref=5bbee12ac9c57ac1f085847c0dd7f19d0339be22",
            "patch": "@@ -3183,7 +3183,7 @@ def _sample(\n \n         model_forward = self.__call__\n         if isinstance(model_kwargs.get(\"past_key_values\"), Cache):\n-            is_compileable = model_kwargs[\"past_key_values\"].is_compileable\n+            is_compileable = model_kwargs[\"past_key_values\"].is_compileable and self._supports_static_cache\n             if is_compileable and (\n                 self.device.type == \"cuda\" or generation_config.compile_config._compile_all_devices\n             ):"
        }
    ],
    "stats": {
        "total": 2,
        "additions": 1,
        "deletions": 1
    }
}