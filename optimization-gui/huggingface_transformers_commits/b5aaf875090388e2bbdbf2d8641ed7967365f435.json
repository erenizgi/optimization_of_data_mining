{
    "author": "unknown",
    "message": "Fix `test_pipelines_video_classification` that was always failing (#35842)\n\n* Fix test_pipelines_video_classification that was always failing\r\n\r\n* Update video pipeline docstring to reflect actual return type\r\n\r\n---------\r\n\r\nCo-authored-by: Louis Groux <louis.cal.groux@gmail.com>",
    "sha": "b5aaf875090388e2bbdbf2d8641ed7967365f435",
    "files": [
        {
            "sha": "616eb8def780420d5446d55a28f645b551dbacce",
            "filename": "src/transformers/pipelines/video_classification.py",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/huggingface/transformers/blob/b5aaf875090388e2bbdbf2d8641ed7967365f435/src%2Ftransformers%2Fpipelines%2Fvideo_classification.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/b5aaf875090388e2bbdbf2d8641ed7967365f435/src%2Ftransformers%2Fpipelines%2Fvideo_classification.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fpipelines%2Fvideo_classification.py?ref=b5aaf875090388e2bbdbf2d8641ed7967365f435",
            "patch": "@@ -106,9 +106,9 @@ def __call__(self, inputs: Union[str, List[str]] = None, **kwargs):\n                 post-processing.\n \n         Return:\n-            A dictionary or a list of dictionaries containing result. If the input is a single video, will return a\n-            dictionary, if the input is a list of several videos, will return a list of dictionaries corresponding to\n-            the videos.\n+            A list of dictionaries or a list of list of dictionaries containing result. If the input is a single video,\n+            will return a list of `top_k` dictionaries, if the input is a list of several videos, will return a list of list of\n+            `top_k` dictionaries corresponding to the videos.\n \n             The dictionaries contain the following keys:\n "
        },
        {
            "sha": "078e825ef6bc0710314893bb9c975ba7dec91af0",
            "filename": "tests/pipelines/test_pipelines_video_classification.py",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/huggingface/transformers/blob/b5aaf875090388e2bbdbf2d8641ed7967365f435/tests%2Fpipelines%2Ftest_pipelines_video_classification.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/b5aaf875090388e2bbdbf2d8641ed7967365f435/tests%2Fpipelines%2Ftest_pipelines_video_classification.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fpipelines%2Ftest_pipelines_video_classification.py?ref=b5aaf875090388e2bbdbf2d8641ed7967365f435",
            "patch": "@@ -91,14 +91,13 @@ def test_small_model_pt(self):\n         )\n \n         video_file_path = hf_hub_download(repo_id=\"nateraw/video-demo\", filename=\"archery.mp4\", repo_type=\"dataset\")\n-        outputs = video_classifier(video_file_path, top_k=2)\n+        output = video_classifier(video_file_path, top_k=2)\n         self.assertEqual(\n-            nested_simplify(outputs, decimals=4),\n+            nested_simplify(output, decimals=4),\n             [{\"score\": 0.5199, \"label\": \"LABEL_0\"}, {\"score\": 0.4801, \"label\": \"LABEL_1\"}],\n         )\n-        for output in outputs:\n-            for element in output:\n-                compare_pipeline_output_to_hub_spec(element, VideoClassificationOutputElement)\n+        for element in output:\n+            compare_pipeline_output_to_hub_spec(element, VideoClassificationOutputElement)\n \n         outputs = video_classifier(\n             ["
        }
    ],
    "stats": {
        "total": 15,
        "additions": 7,
        "deletions": 8
    }
}