{
    "author": "dszeto",
    "message": "Fix convert_tokens_to_string when decoder is None (#34569)\n\n* Fix convert_tokens_to_string when decoder is None\r\n\r\n* revert unrelated changs\r\n\r\n---------\r\n\r\nCo-authored-by: Arthur Zucker <arthur.zucker@gmail.com>",
    "sha": "74db22f9051dc320e7cbfdd9668a950828fddb66",
    "files": [
        {
            "sha": "d1353adfd22589cb9d72f7be64b68fb082d9dde2",
            "filename": "src/transformers/tokenization_utils_fast.py",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/huggingface/transformers/blob/74db22f9051dc320e7cbfdd9668a950828fddb66/src%2Ftransformers%2Ftokenization_utils_fast.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/74db22f9051dc320e7cbfdd9668a950828fddb66/src%2Ftransformers%2Ftokenization_utils_fast.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Ftokenization_utils_fast.py?ref=74db22f9051dc320e7cbfdd9668a950828fddb66",
            "patch": "@@ -624,7 +624,7 @@ def _encode_plus(\n         if return_tensors is None and not return_overflowing_tokens:\n             batched_output = BatchEncoding(\n                 {\n-                    key: value[0] if len(value) > 0 and isinstance(value[0], list) else value\n+                    key: (value[0] if len(value) > 0 and isinstance(value[0], list) else value)\n                     for key, value in batched_output.items()\n                 },\n                 batched_output.encodings,\n@@ -635,7 +635,11 @@ def _encode_plus(\n         return batched_output\n \n     def convert_tokens_to_string(self, tokens: List[str]) -> str:\n-        return self.backend_tokenizer.decoder.decode(tokens)\n+        return (\n+            self.backend_tokenizer.decoder.decode(tokens)\n+            if self.backend_tokenizer.decoder is not None\n+            else \" \".join(tokens)\n+        )\n \n     def _decode(\n         self,"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 6,
        "deletions": 2
    }
}