{
    "author": "tugsbayasgalan",
    "message": "Make canine model exportable by removing unncessary complicated logic (#37124)",
    "sha": "c0bd8048a51b9d8173f214ddbc9f3c584a85c8af",
    "files": [
        {
            "sha": "5d781cb11604d44e21d3aece4780501d00a27750",
            "filename": "src/transformers/models/canine/modeling_canine.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/c0bd8048a51b9d8173f214ddbc9f3c584a85c8af/src%2Ftransformers%2Fmodels%2Fcanine%2Fmodeling_canine.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/c0bd8048a51b9d8173f214ddbc9f3c584a85c8af/src%2Ftransformers%2Fmodels%2Fcanine%2Fmodeling_canine.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fcanine%2Fmodeling_canine.py?ref=c0bd8048a51b9d8173f214ddbc9f3c584a85c8af",
            "patch": "@@ -1056,7 +1056,7 @@ def _downsample_attention_mask(self, char_attention_mask: torch.Tensor, downsamp\n \n         return molecule_attention_mask\n \n-    def _repeat_molecules(self, molecules: torch.Tensor, char_seq_length: torch.Tensor) -> torch.Tensor:\n+    def _repeat_molecules(self, molecules: torch.Tensor, char_seq_length: int) -> torch.Tensor:\n         \"\"\"Repeats molecules to make them the same length as the char sequence.\"\"\"\n \n         rate = self.config.downsampling_rate\n@@ -1070,7 +1070,7 @@ def _repeat_molecules(self, molecules: torch.Tensor, char_seq_length: torch.Tens\n         # n elements (n < `downsampling_rate`), i.e. the remainder of floor\n         # division. We do this by repeating the last molecule a few extra times.\n         last_molecule = molecules[:, -1:, :]\n-        remainder_length = torch.fmod(torch.tensor(char_seq_length), torch.tensor(rate)).item()\n+        remainder_length = char_seq_length % rate\n         remainder_repeated = torch.repeat_interleave(\n             last_molecule,\n             # +1 molecule to compensate for truncation."
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}