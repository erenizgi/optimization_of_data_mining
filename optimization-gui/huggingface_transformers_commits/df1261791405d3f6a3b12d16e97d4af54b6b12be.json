{
    "author": "gante",
    "message": "ðŸš¨ [v5] remove generate output retrocompatibility aliases (#40998)\n\nremove old type aliases",
    "sha": "df1261791405d3f6a3b12d16e97d4af54b6b12be",
    "files": [
        {
            "sha": "1d005993724cad4b19d4d783c5bc712b040eab35",
            "filename": "src/transformers/generation/__init__.py",
            "status": "modified",
            "additions": 0,
            "deletions": 20,
            "changes": 20,
            "blob_url": "https://github.com/huggingface/transformers/blob/df1261791405d3f6a3b12d16e97d4af54b6b12be/src%2Ftransformers%2Fgeneration%2F__init__.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/df1261791405d3f6a3b12d16e97d4af54b6b12be/src%2Ftransformers%2Fgeneration%2F__init__.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fgeneration%2F__init__.py?ref=df1261791405d3f6a3b12d16e97d4af54b6b12be",
            "patch": "@@ -100,16 +100,6 @@\n     ]\n     _import_structure[\"utils\"] = [\n         \"GenerationMixin\",\n-        \"GreedySearchEncoderDecoderOutput\",\n-        \"GreedySearchDecoderOnlyOutput\",\n-        \"SampleEncoderDecoderOutput\",\n-        \"SampleDecoderOnlyOutput\",\n-        \"BeamSearchEncoderDecoderOutput\",\n-        \"BeamSearchDecoderOnlyOutput\",\n-        \"BeamSampleEncoderDecoderOutput\",\n-        \"BeamSampleDecoderOnlyOutput\",\n-        \"ContrastiveSearchEncoderDecoderOutput\",\n-        \"ContrastiveSearchDecoderOnlyOutput\",\n         \"GenerateBeamDecoderOnlyOutput\",\n         \"GenerateBeamEncoderDecoderOutput\",\n         \"GenerateDecoderOnlyOutput\",\n@@ -194,21 +184,11 @@\n             validate_stopping_criteria,\n         )\n         from .utils import (\n-            BeamSampleDecoderOnlyOutput,\n-            BeamSampleEncoderDecoderOutput,\n-            BeamSearchDecoderOnlyOutput,\n-            BeamSearchEncoderDecoderOutput,\n-            ContrastiveSearchDecoderOnlyOutput,\n-            ContrastiveSearchEncoderDecoderOutput,\n             GenerateBeamDecoderOnlyOutput,\n             GenerateBeamEncoderDecoderOutput,\n             GenerateDecoderOnlyOutput,\n             GenerateEncoderDecoderOutput,\n             GenerationMixin,\n-            GreedySearchDecoderOnlyOutput,\n-            GreedySearchEncoderDecoderOutput,\n-            SampleDecoderOnlyOutput,\n-            SampleEncoderDecoderOutput,\n         )\n         from .watermarking import (\n             BayesianDetectorConfig,"
        },
        {
            "sha": "60b943a7e66e837772b59d722550e2bc4fb01a63",
            "filename": "src/transformers/generation/utils.py",
            "status": "modified",
            "additions": 0,
            "deletions": 22,
            "changes": 22,
            "blob_url": "https://github.com/huggingface/transformers/blob/df1261791405d3f6a3b12d16e97d4af54b6b12be/src%2Ftransformers%2Fgeneration%2Futils.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/df1261791405d3f6a3b12d16e97d4af54b6b12be/src%2Ftransformers%2Fgeneration%2Futils.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fgeneration%2Futils.py?ref=df1261791405d3f6a3b12d16e97d4af54b6b12be",
            "patch": "@@ -329,28 +329,6 @@ class GenerateBeamEncoderDecoderOutput(ModelOutput):\n     past_key_values: Optional[Cache] = None\n \n \n-# TODO (joao): remove the equivalent classes and typing shortcuts below in v5\n-# Equivalent classes (kept for retrocompatibility purposes)\n-GreedySearchDecoderOnlyOutput = GenerateDecoderOnlyOutput\n-ContrastiveSearchDecoderOnlyOutput = GenerateDecoderOnlyOutput\n-SampleDecoderOnlyOutput = GenerateDecoderOnlyOutput\n-\n-ContrastiveSearchEncoderDecoderOutput = GenerateEncoderDecoderOutput\n-GreedySearchEncoderDecoderOutput = GenerateEncoderDecoderOutput\n-SampleEncoderDecoderOutput = GenerateEncoderDecoderOutput\n-\n-BeamSearchDecoderOnlyOutput = GenerateBeamDecoderOnlyOutput\n-BeamSampleDecoderOnlyOutput = GenerateBeamDecoderOnlyOutput\n-\n-BeamSearchEncoderDecoderOutput = GenerateBeamEncoderDecoderOutput\n-BeamSampleEncoderDecoderOutput = GenerateBeamEncoderDecoderOutput\n-\n-GreedySearchOutput = Union[GreedySearchEncoderDecoderOutput, GreedySearchDecoderOnlyOutput]\n-SampleOutput = Union[SampleEncoderDecoderOutput, SampleDecoderOnlyOutput]\n-BeamSearchOutput = Union[BeamSearchEncoderDecoderOutput, BeamSearchDecoderOnlyOutput]\n-BeamSampleOutput = Union[BeamSampleEncoderDecoderOutput, BeamSampleDecoderOnlyOutput]\n-ContrastiveSearchOutput = Union[ContrastiveSearchEncoderDecoderOutput, ContrastiveSearchDecoderOnlyOutput]\n-\n # Typing shortcuts\n GenerateNonBeamOutput = Union[GenerateDecoderOnlyOutput, GenerateEncoderDecoderOutput]\n GenerateBeamOutput = Union[GenerateBeamDecoderOnlyOutput, GenerateBeamEncoderDecoderOutput]"
        },
        {
            "sha": "c86dedd04d10573c8d6a6bf6a999456bbc54fce8",
            "filename": "tests/generation/test_utils.py",
            "status": "modified",
            "additions": 0,
            "deletions": 24,
            "changes": 24,
            "blob_url": "https://github.com/huggingface/transformers/blob/df1261791405d3f6a3b12d16e97d4af54b6b12be/tests%2Fgeneration%2Ftest_utils.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/df1261791405d3f6a3b12d16e97d4af54b6b12be/tests%2Fgeneration%2Ftest_utils.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fgeneration%2Ftest_utils.py?ref=df1261791405d3f6a3b12d16e97d4af54b6b12be",
            "patch": "@@ -84,25 +84,17 @@\n         StaticCache,\n     )\n     from transformers.generation import (\n-        BeamSampleDecoderOnlyOutput,\n-        BeamSampleEncoderDecoderOutput,\n-        BeamSearchDecoderOnlyOutput,\n-        BeamSearchEncoderDecoderOutput,\n         CompileConfig,\n         GenerateBeamDecoderOnlyOutput,\n         GenerateBeamEncoderDecoderOutput,\n         GenerateDecoderOnlyOutput,\n         GenerateEncoderDecoderOutput,\n         GenerationConfig,\n         GenerationMixin,\n-        GreedySearchDecoderOnlyOutput,\n-        GreedySearchEncoderDecoderOutput,\n         LogitsProcessorList,\n         MaxLengthCriteria,\n         MinLengthLogitsProcessor,\n         PromptLookupCandidateGenerator,\n-        SampleDecoderOnlyOutput,\n-        SampleEncoderDecoderOutput,\n         StoppingCriteria,\n         StoppingCriteriaList,\n         SynthIDTextWatermarkingConfig,\n@@ -364,15 +356,11 @@ def test_greedy_generate_dict_outputs(self):\n             if model.config.is_encoder_decoder:\n                 self.assertTrue(output_generate.sequences.shape[1] == self.max_new_tokens + 1)\n                 self.assertIsInstance(output_generate, GenerateEncoderDecoderOutput)\n-                # Retrocompatibility check\n-                self.assertIsInstance(output_generate, GreedySearchEncoderDecoderOutput)\n             else:\n                 self.assertTrue(\n                     output_generate.sequences.shape[1] == self.max_new_tokens + inputs_dict[\"input_ids\"].shape[1]\n                 )\n                 self.assertIsInstance(output_generate, GenerateDecoderOnlyOutput)\n-                # Retrocompatibility check\n-                self.assertIsInstance(output_generate, GreedySearchDecoderOnlyOutput)\n \n             self._check_generate_outputs(output_generate, model.config)\n \n@@ -446,15 +434,11 @@ def test_sample_generate_dict_output(self):\n             if model.config.is_encoder_decoder:\n                 self.assertTrue(output_generate.sequences.shape[1] == self.max_new_tokens + 1)\n                 self.assertIsInstance(output_generate, GenerateEncoderDecoderOutput)\n-                # Retrocompatibility check\n-                self.assertIsInstance(output_generate, SampleEncoderDecoderOutput)\n             else:\n                 self.assertTrue(\n                     output_generate.sequences.shape[1] == self.max_new_tokens + inputs_dict[\"input_ids\"].shape[1]\n                 )\n                 self.assertIsInstance(output_generate, GenerateDecoderOnlyOutput)\n-                # Retrocompatibility check\n-                self.assertIsInstance(output_generate, SampleDecoderOnlyOutput)\n \n             self._check_generate_outputs(output_generate, model.config, num_return_sequences=2)\n \n@@ -496,15 +480,11 @@ def test_beam_search_generate_dict_output(self):\n             if model.config.is_encoder_decoder:\n                 self.assertTrue(output_generate.sequences.shape[1] == self.max_new_tokens + 1)\n                 self.assertIsInstance(output_generate, GenerateBeamEncoderDecoderOutput)\n-                # Retrocompatibility check\n-                self.assertIsInstance(output_generate, BeamSearchEncoderDecoderOutput)\n             else:\n                 self.assertTrue(\n                     output_generate.sequences.shape[1] == self.max_new_tokens + inputs_dict[\"input_ids\"].shape[1]\n                 )\n                 self.assertIsInstance(output_generate, GenerateBeamDecoderOnlyOutput)\n-                # Retrocompatibility check\n-                self.assertIsInstance(output_generate, BeamSearchDecoderOnlyOutput)\n \n             self._check_generate_outputs(\n                 output_generate,\n@@ -625,15 +605,11 @@ def test_beam_sample_generate_dict_output(self):\n             if model.config.is_encoder_decoder:\n                 self.assertTrue(output_generate.sequences.shape[1] == self.max_new_tokens + 1)\n                 self.assertIsInstance(output_generate, GenerateBeamEncoderDecoderOutput)\n-                # Retrocompatibility check\n-                self.assertIsInstance(output_generate, BeamSampleEncoderDecoderOutput)\n             else:\n                 self.assertTrue(\n                     output_generate.sequences.shape[1] == self.max_new_tokens + inputs_dict[\"input_ids\"].shape[1]\n                 )\n                 self.assertIsInstance(output_generate, GenerateBeamDecoderOnlyOutput)\n-                # Retrocompatibility check\n-                self.assertIsInstance(output_generate, BeamSampleDecoderOnlyOutput)\n \n             self._check_generate_outputs(\n                 output_generate,"
        }
    ],
    "stats": {
        "total": 66,
        "additions": 0,
        "deletions": 66
    }
}