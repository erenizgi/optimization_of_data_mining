{
    "author": "ivarflakstad",
    "message": "Update AMD docker image (rocm 6.1) (#35259)\n\n* Use rocm 6.3 as base amd image and add nvidia-ml-py to exclude list\r\n\r\n* Align rocm base image with torch wheels @6.1. Seems like the most stable combo",
    "sha": "bc6ae0d55e11e46eaed4da71b6bc5087d38cec70",
    "files": [
        {
            "sha": "83f8565c8f467ef8b39bfdc7f2e75fe3b34c15c4",
            "filename": "docker/transformers-pytorch-amd-gpu/Dockerfile",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/huggingface/transformers/blob/bc6ae0d55e11e46eaed4da71b6bc5087d38cec70/docker%2Ftransformers-pytorch-amd-gpu%2FDockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/bc6ae0d55e11e46eaed4da71b6bc5087d38cec70/docker%2Ftransformers-pytorch-amd-gpu%2FDockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftransformers-pytorch-amd-gpu%2FDockerfile?ref=bc6ae0d55e11e46eaed4da71b6bc5087d38cec70",
            "patch": "@@ -1,4 +1,4 @@\n-FROM rocm/dev-ubuntu-22.04:6.0.2\n+FROM rocm/dev-ubuntu-22.04:6.1\n # rocm/pytorch has no version with 2.1.0\n LABEL maintainer=\"Hugging Face\"\n \n@@ -11,7 +11,7 @@ RUN apt update && \\\n \n RUN python3 -m pip install --no-cache-dir --upgrade pip numpy\n \n-RUN python3 -m pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/rocm6.0\n+RUN python3 -m pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/rocm6.1\n \n RUN python3 -m pip install --no-cache-dir --upgrade importlib-metadata setuptools ninja git+https://github.com/facebookresearch/detectron2.git pytesseract \"itsdangerous<2.1.0\"\n \n@@ -30,5 +30,5 @@ RUN python3 -m pip uninstall -y tensorflow flax\n # this line must be added in order for python to be aware of transformers.\n RUN cd transformers && python3 setup.py develop\n \n-# Remove nvml as it is not compatible with ROCm. apex is not tested on NVIDIA either.\n-RUN python3 -m pip uninstall py3nvml pynvml apex -y\n+# Remove nvml and nvidia-ml-py as it is not compatible with ROCm. apex is not tested on NVIDIA either.\n+RUN python3 -m pip uninstall py3nvml pynvml nvidia-ml-py apex -y"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 4,
        "deletions": 4
    }
}