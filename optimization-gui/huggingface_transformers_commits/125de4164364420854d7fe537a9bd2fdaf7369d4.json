{
    "author": "sywangyi",
    "message": "fix speecht5 failure issue in test_peft_gradient_checkpointing_enableâ€¦ (#34454)\n\n* fix speecht5 failure issue in test_peft_gradient_checkpointing_enable_disable\r\n\r\nSigned-off-by: Wang, Yi <yi.a.wang@intel.com>\r\n\r\n* [run-slow] speecht5\r\n\r\n---------\r\n\r\nSigned-off-by: Wang, Yi <yi.a.wang@intel.com>\r\nCo-authored-by: Matt <rocketknight1@gmail.com>",
    "sha": "125de4164364420854d7fe537a9bd2fdaf7369d4",
    "files": [
        {
            "sha": "72cbe6b14a93be301d54ac4e0f28461ee3447f75",
            "filename": "src/transformers/models/speecht5/modeling_speecht5.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/125de4164364420854d7fe537a9bd2fdaf7369d4/src%2Ftransformers%2Fmodels%2Fspeecht5%2Fmodeling_speecht5.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/125de4164364420854d7fe537a9bd2fdaf7369d4/src%2Ftransformers%2Fmodels%2Fspeecht5%2Fmodeling_speecht5.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fspeecht5%2Fmodeling_speecht5.py?ref=125de4164364420854d7fe537a9bd2fdaf7369d4",
            "patch": "@@ -2114,7 +2114,7 @@ def get_input_embeddings(self):\n             return self.encoder.get_input_embeddings()\n         if isinstance(self.decoder, SpeechT5DecoderWithTextPrenet):\n             return self.decoder.get_input_embeddings()\n-        return None\n+        raise NotImplementedError\n \n     def set_input_embeddings(self, value):\n         if isinstance(self.encoder, SpeechT5EncoderWithTextPrenet):"
        },
        {
            "sha": "38f75ac5c01dc1f8889f70a043231752bb36e19e",
            "filename": "tests/models/speecht5/test_modeling_speecht5.py",
            "status": "modified",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/huggingface/transformers/blob/125de4164364420854d7fe537a9bd2fdaf7369d4/tests%2Fmodels%2Fspeecht5%2Ftest_modeling_speecht5.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/125de4164364420854d7fe537a9bd2fdaf7369d4/tests%2Fmodels%2Fspeecht5%2Ftest_modeling_speecht5.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Fspeecht5%2Ftest_modeling_speecht5.py?ref=125de4164364420854d7fe537a9bd2fdaf7369d4",
            "patch": "@@ -237,12 +237,6 @@ def test_torchscript_output_hidden_state(self):\n     def test_torchscript_simple(self):\n         pass\n \n-    @unittest.skip(\n-        reason=\"Model returns None for input_embeds, check: https://github.com/huggingface/transformers/issues/33527\"\n-    )\n-    def test_peft_gradient_checkpointing_enable_disable(self):\n-        pass\n-\n \n @require_torch\n class SpeechT5ForSpeechToTextTester:\n@@ -1741,12 +1735,6 @@ def test_training_gradient_checkpointing_use_reentrant(self):\n     def test_training_gradient_checkpointing_use_reentrant_false(self):\n         pass\n \n-    @unittest.skip(\n-        reason=\"Model returns None for input_embeds, check: https://github.com/huggingface/transformers/issues/33527\"\n-    )\n-    def test_peft_gradient_checkpointing_enable_disable(self):\n-        pass\n-\n     # overwrite from test_modeling_common\n     def _mock_init_weights(self, module):\n         if hasattr(module, \"weight\") and module.weight is not None:"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 1,
        "deletions": 13
    }
}