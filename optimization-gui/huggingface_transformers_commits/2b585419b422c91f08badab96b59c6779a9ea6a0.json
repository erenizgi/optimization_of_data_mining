{
    "author": "yaswanth19",
    "message": "[Tests] Cleanup Janus Testcase (#38311)\n\n* Cleanup janus testcase\n\n* shift code to setup",
    "sha": "2b585419b422c91f08badab96b59c6779a9ea6a0",
    "files": [
        {
            "sha": "bd0d2cbe018fc951e553a76ad7ba07be5572f574",
            "filename": "tests/models/janus/test_processor_janus.py",
            "status": "modified",
            "additions": 5,
            "deletions": 6,
            "changes": 11,
            "blob_url": "https://github.com/huggingface/transformers/blob/2b585419b422c91f08badab96b59c6779a9ea6a0/tests%2Fmodels%2Fjanus%2Ftest_processor_janus.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/2b585419b422c91f08badab96b59c6779a9ea6a0/tests%2Fmodels%2Fjanus%2Ftest_processor_janus.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Fjanus%2Ftest_processor_janus.py?ref=2b585419b422c91f08badab96b59c6779a9ea6a0",
            "patch": "@@ -20,7 +20,6 @@\n import numpy as np\n \n from transformers import AutoProcessor, AutoTokenizer, JanusProcessor\n-from transformers.models.janus.convert_janus_weights_to_hf import CHAT_TEMPLATE\n from transformers.utils import is_vision_available\n \n from ...test_processing_common import ProcessorTesterMixin\n@@ -45,6 +44,9 @@ def setUp(self):\n             \"deepseek-community/Janus-Pro-1B\",\n             extra_special_tokens=special_image_tokens,\n         )\n+        # Set the processor to use the default system prompt to False as it's used based on input modality.\n+        # Hence set to False to avoid any issues in the test irrespective of inputs.\n+        processor.use_default_system_prompt = False\n         processor.save_pretrained(self.tmpdirname)\n \n     def get_tokenizer(self, **kwargs):\n@@ -53,11 +55,8 @@ def get_tokenizer(self, **kwargs):\n     def get_image_processor(self, **kwargs):\n         return AutoProcessor.from_pretrained(self.tmpdirname, **kwargs).image_processor\n \n-    def prepare_processor_dict(self):\n-        # similar to Emu3 and Qwen2VLProcessorTest, but keep the template in the convert script to avoid duplicated code\n-        return {\n-            \"chat_template\": CHAT_TEMPLATE,\n-        }\n+    def get_processor(self):\n+        return AutoProcessor.from_pretrained(self.tmpdirname)\n \n     def test_chat_template_single(self):\n         \"\"\""
        }
    ],
    "stats": {
        "total": 11,
        "additions": 5,
        "deletions": 6
    }
}