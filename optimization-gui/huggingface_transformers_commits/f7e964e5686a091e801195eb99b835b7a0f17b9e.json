{
    "author": "JiangJQ2000",
    "message": "Fix ChineseCLIPModel.get_text_features (#42351)",
    "sha": "f7e964e5686a091e801195eb99b835b7a0f17b9e",
    "files": [
        {
            "sha": "d1d00eda88adebc489087c65bc63376213f527de",
            "filename": "src/transformers/models/chinese_clip/modeling_chinese_clip.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/f7e964e5686a091e801195eb99b835b7a0f17b9e/src%2Ftransformers%2Fmodels%2Fchinese_clip%2Fmodeling_chinese_clip.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/f7e964e5686a091e801195eb99b835b7a0f17b9e/src%2Ftransformers%2Fmodels%2Fchinese_clip%2Fmodeling_chinese_clip.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fchinese_clip%2Fmodeling_chinese_clip.py?ref=f7e964e5686a091e801195eb99b835b7a0f17b9e",
            "patch": "@@ -1024,14 +1024,14 @@ def get_text_features(\n         ...     text_features = model.get_text_features(**inputs)\n         >>> text_features = text_features / text_features.norm(p=2, dim=-1, keepdim=True)\n         ```\"\"\"\n-        text_outputs: BaseModelOutputWithPooling = self.text_model(\n+        text_outputs = self.text_model(\n             input_ids=input_ids,\n             attention_mask=attention_mask,\n             token_type_ids=token_type_ids,\n             position_ids=position_ids,\n         )\n \n-        pooled_output = text_outputs.pooler_output\n+        pooled_output = text_outputs[0][:, 0, :]\n         text_features = self.text_projection(pooled_output)\n \n         return text_features"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}