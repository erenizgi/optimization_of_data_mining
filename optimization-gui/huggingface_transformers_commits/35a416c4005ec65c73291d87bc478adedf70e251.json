{
    "author": "Krish0909",
    "message": "Fix indentation bug in SmolVLM image processor causing KeyError (#39452)\n\nFix indentation bug in Idefics3 image processor\n\n- Fix KeyError when do_image_splitting=False\n- Move split_images_grouped assignment inside loop\n- Ensures all image shapes are stored, not just the last one\n- This fixes the bug in both Idefics3 and generated SmolVLM processors\n\ncc @yonigozlan\n\nCo-authored-by: Krishnan Vignesh <krishnanvignesh@Krishnans-MacBook-Air.local>",
    "sha": "35a416c4005ec65c73291d87bc478adedf70e251",
    "files": [
        {
            "sha": "630318ba7df82286b052628744d9a5d7b3a59fc1",
            "filename": "src/transformers/models/idefics3/image_processing_idefics3_fast.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/35a416c4005ec65c73291d87bc478adedf70e251/src%2Ftransformers%2Fmodels%2Fidefics3%2Fimage_processing_idefics3_fast.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/35a416c4005ec65c73291d87bc478adedf70e251/src%2Ftransformers%2Fmodels%2Fidefics3%2Fimage_processing_idefics3_fast.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fidefics3%2Fimage_processing_idefics3_fast.py?ref=35a416c4005ec65c73291d87bc478adedf70e251",
            "patch": "@@ -441,7 +441,7 @@ def _preprocess(\n                     size=SizeDict(height=max_image_size[\"longest_edge\"], width=max_image_size[\"longest_edge\"]),\n                     interpolation=interpolation,\n                 )\n-            split_images_grouped[shape] = stacked_images\n+                split_images_grouped[shape] = stacked_images\n             processed_images = reorder_images(split_images_grouped, grouped_images_index, is_nested=True)\n             rows = [[0] * len(images) for images in processed_images]\n             cols = [[0] * len(images) for images in processed_images]"
        },
        {
            "sha": "dbd8d6b4116bd1c05ee0884e3e7e15abae802629",
            "filename": "src/transformers/models/smolvlm/image_processing_smolvlm_fast.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/35a416c4005ec65c73291d87bc478adedf70e251/src%2Ftransformers%2Fmodels%2Fsmolvlm%2Fimage_processing_smolvlm_fast.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/35a416c4005ec65c73291d87bc478adedf70e251/src%2Ftransformers%2Fmodels%2Fsmolvlm%2Fimage_processing_smolvlm_fast.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fsmolvlm%2Fimage_processing_smolvlm_fast.py?ref=35a416c4005ec65c73291d87bc478adedf70e251",
            "patch": "@@ -431,7 +431,7 @@ def _preprocess(\n                     size=SizeDict(height=max_image_size[\"longest_edge\"], width=max_image_size[\"longest_edge\"]),\n                     interpolation=interpolation,\n                 )\n-            split_images_grouped[shape] = stacked_images\n+                split_images_grouped[shape] = stacked_images\n             processed_images = reorder_images(split_images_grouped, grouped_images_index, is_nested=True)\n             rows = [[0] * len(images) for images in processed_images]\n             cols = [[0] * len(images) for images in processed_images]"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}