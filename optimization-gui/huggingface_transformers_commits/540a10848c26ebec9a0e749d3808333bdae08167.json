{
    "author": "ydshieh",
    "message": "fix `Gemma3nProcessorTest` (#39068)\n\n* fix\n\n* fix\n\n* oups forgot style\n\n---------\n\nCo-authored-by: ydshieh <ydshieh@users.noreply.github.com>\nCo-authored-by: Cyril Vallez <cyril.vallez@gmail.com>",
    "sha": "540a10848c26ebec9a0e749d3808333bdae08167",
    "files": [
        {
            "sha": "ffedb2b98aaca87a2090523fea9b53b33435160e",
            "filename": "tests/models/gemma3n/test_processing_gemma3n.py",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/huggingface/transformers/blob/540a10848c26ebec9a0e749d3808333bdae08167/tests%2Fmodels%2Fgemma3n%2Ftest_processing_gemma3n.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/540a10848c26ebec9a0e749d3808333bdae08167/tests%2Fmodels%2Fgemma3n%2Ftest_processing_gemma3n.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Fgemma3n%2Ftest_processing_gemma3n.py?ref=540a10848c26ebec9a0e749d3808333bdae08167",
            "patch": "@@ -36,7 +36,7 @@\n class Gemma3nProcessorTest(unittest.TestCase):\n     def setUp(self):\n         # TODO: update to google?\n-        self.model_id = \"Google/gemma-3n-E4B-it\"\n+        self.model_id = \"hf-internal-testing/namespace-google-repo_name-gemma-3n-E4B-it\"\n         self.tmpdirname = tempfile.mkdtemp(suffix=\"gemma3n\")\n         self.maxDiff = None\n \n@@ -71,6 +71,9 @@ def test_save_load_pretrained_default(self):\n         self.assertIsInstance(processor.tokenizer, GemmaTokenizerFast)\n         self.assertEqual(processor.tokenizer.get_vocab(), tokenizer.get_vocab())\n \n+        # `disable_grouping` is a new attribute that got added on main while gemma3n was being released - so was\n+        # not part of the saved processor\n+        del processor.feature_extractor.disable_grouping\n         self.assertIsInstance(processor.feature_extractor, Gemma3nAudioFeatureExtractor)\n         self.assertEqual(processor.feature_extractor.to_json_string(), feature_extractor.to_json_string())\n \n@@ -94,6 +97,9 @@ def test_save_load_pretrained_additional_features(self):\n         self.assertEqual(processor.tokenizer.get_vocab(), tokenizer_add_kwargs.get_vocab())\n         self.assertIsInstance(processor.tokenizer, GemmaTokenizerFast)\n \n+        # `disable_grouping` is a new attribute that got added on main while gemma3n was being released - so was\n+        # not part of the saved processor\n+        del processor.feature_extractor.disable_grouping\n         self.assertEqual(processor.feature_extractor.to_json_string(), feature_extractor_add_kwargs.to_json_string())\n         self.assertIsInstance(processor.feature_extractor, Gemma3nAudioFeatureExtractor)\n "
        }
    ],
    "stats": {
        "total": 8,
        "additions": 7,
        "deletions": 1
    }
}