{
    "author": "hiyouga",
    "message": "fix cached file error when repo type is dataset (#36909)\n\n* fix cached file\n\n* Update hub.py",
    "sha": "e68ebb695f9d1d990462397e284e79d8729aafea",
    "files": [
        {
            "sha": "b4c4c276b36d68b4e4d7bad4eb071378efd853c3",
            "filename": "src/transformers/utils/hub.py",
            "status": "modified",
            "additions": 10,
            "deletions": 3,
            "changes": 13,
            "blob_url": "https://github.com/huggingface/transformers/blob/e68ebb695f9d1d990462397e284e79d8729aafea/src%2Ftransformers%2Futils%2Fhub.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/e68ebb695f9d1d990462397e284e79d8729aafea/src%2Ftransformers%2Futils%2Fhub.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Futils%2Fhub.py?ref=e68ebb695f9d1d990462397e284e79d8729aafea",
            "patch": "@@ -134,10 +134,16 @@ def is_offline_mode():\n \n \n def _get_cache_file_to_return(\n-    path_or_repo_id: str, full_filename: str, cache_dir: Union[str, Path, None] = None, revision: Optional[str] = None\n+    path_or_repo_id: str,\n+    full_filename: str,\n+    cache_dir: Union[str, Path, None] = None,\n+    revision: Optional[str] = None,\n+    repo_type: Optional[str] = None,\n ):\n     # We try to see if we have a cached version (not up to date):\n-    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)\n+    resolved_file = try_to_load_from_cache(\n+        path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision, repo_type=repo_type\n+    )\n     if resolved_file is not None and resolved_file != _CACHED_NO_EXIST:\n         return resolved_file\n     return None\n@@ -520,7 +526,8 @@ def cached_files(\n \n         # Now we try to recover if we can find all files correctly in the cache\n         resolved_files = [\n-            _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames\n+            _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision, repo_type)\n+            for filename in full_filenames\n         ]\n         if all(file is not None for file in resolved_files):\n             return resolved_files"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 10,
        "deletions": 3
    }
}