{
    "author": "remi-or",
    "message": "Pin torchcodec to 0.5 in AMD docker (#40598)",
    "sha": "b3655507bb76370137fd4e84591ed9a6f41becc2",
    "files": [
        {
            "sha": "37542ffb8943a81a86bb1a9c3ded39b53f6ff687",
            "filename": "docker/transformers-pytorch-amd-gpu/Dockerfile",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/huggingface/transformers/blob/b3655507bb76370137fd4e84591ed9a6f41becc2/docker%2Ftransformers-pytorch-amd-gpu%2FDockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/b3655507bb76370137fd4e84591ed9a6f41becc2/docker%2Ftransformers-pytorch-amd-gpu%2FDockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftransformers-pytorch-amd-gpu%2FDockerfile?ref=b3655507bb76370137fd4e84591ed9a6f41becc2",
            "patch": "@@ -20,8 +20,6 @@ WORKDIR /\n ADD https://api.github.com/repos/huggingface/transformers/git/refs/heads/main version.json\n RUN git clone https://github.com/huggingface/transformers && cd transformers && git checkout $REF\n \n-# On ROCm, torchcodec is required to decode audio files\n-# RUN python3 -m pip install --no-cache-dir torchcodec\n # Install transformers\n RUN python3 -m pip install --no-cache-dir -e ./transformers[dev-torch,testing,video,audio]\n \n@@ -37,3 +35,6 @@ RUN python3 -m pip uninstall py3nvml pynvml nvidia-ml-py apex -y\n \n # `kernels` may causes many failing tests\n RUN python3 -m pip uninstall -y kernels\n+\n+# On ROCm, torchcodec is required to decode audio files and 0.4 or 0.6 fails\n+RUN python3 -m pip install --no-cache-dir \"torchcodec==0.5\""
        }
    ],
    "stats": {
        "total": 5,
        "additions": 3,
        "deletions": 2
    }
}