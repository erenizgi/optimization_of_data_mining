{
    "author": "MekkCyber",
    "message": "[kernels] Add version to function mapping (#41685)\n\nadd version",
    "sha": "2fe4a30340a8f006ade26ee36840550d55aa6dbc",
    "files": [
        {
            "sha": "95ca49a749155cffa66044dc408ea58aa4a13451",
            "filename": "src/transformers/integrations/hub_kernels.py",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/huggingface/transformers/blob/2fe4a30340a8f006ade26ee36840550d55aa6dbc/src%2Ftransformers%2Fintegrations%2Fhub_kernels.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/2fe4a30340a8f006ade26ee36840550d55aa6dbc/src%2Ftransformers%2Fintegrations%2Fhub_kernels.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fintegrations%2Fhub_kernels.py?ref=2fe4a30340a8f006ade26ee36840550d55aa6dbc",
            "patch": "@@ -162,8 +162,8 @@ def register_kernel_mapping(*args, **kwargs):\n         raise RuntimeError(\"register_kernel_mapping requires `kernels` to be installed. Run `pip install kernels`.\")\n \n \n-_HUB_KERNEL_MAPPING: dict[str, str] = {\n-    \"causal-conv1d\": \"kernels-community/causal-conv1d\",\n+_HUB_KERNEL_MAPPING: dict[str, dict[str, str]] = {\n+    \"causal-conv1d\": {\"repo_id\": \"kernels-community/causal-conv1d\"},\n }\n \n _KERNEL_MODULE_MAPPING: dict[str, Optional[ModuleType]] = {}\n@@ -242,7 +242,9 @@ def lazy_load_kernel(kernel_name: str, mapping: dict[str, Optional[ModuleType]]\n         from kernels import get_kernel\n \n         try:\n-            kernel = get_kernel(_HUB_KERNEL_MAPPING[kernel_name])\n+            repo_id = _HUB_KERNEL_MAPPING[kernel_name][\"repo_id\"]\n+            version = _HUB_KERNEL_MAPPING[kernel_name].get(\"version\", None)\n+            kernel = get_kernel(repo_id, version=version)\n             mapping[kernel_name] = kernel\n         except FileNotFoundError:\n             mapping[kernel_name] = None"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 5,
        "deletions": 3
    }
}