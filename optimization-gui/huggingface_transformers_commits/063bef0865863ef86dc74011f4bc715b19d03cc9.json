{
    "author": "Rocketknight1",
    "message": "Prepare for TF+Jax deprecation (#38760)\n\n* Prepare for TF+Jax deprecation\n\n* Remove .circleci jobs",
    "sha": "063bef0865863ef86dc74011f4bc715b19d03cc9",
    "files": [
        {
            "sha": "7d820f3dbe64429a029c6141d02941bd0862e8c0",
            "filename": ".circleci/create_circleci_config.py",
            "status": "modified",
            "additions": 1,
            "deletions": 36,
            "changes": 37,
            "blob_url": "https://github.com/huggingface/transformers/blob/063bef0865863ef86dc74011f4bc715b19d03cc9/.circleci%2Fcreate_circleci_config.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/063bef0865863ef86dc74011f4bc715b19d03cc9/.circleci%2Fcreate_circleci_config.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.circleci%2Fcreate_circleci_config.py?ref=063bef0865863ef86dc74011f4bc715b19d03cc9",
            "patch": "@@ -230,22 +230,6 @@ def job_name(self):\n     parallelism=8,\n )\n \n-tf_job = CircleCIJob(\n-    \"tf\",\n-    docker_image=[{\"image\":\"huggingface/transformers-tf-light\"}],\n-    parallelism=6,\n-)\n-\n-\n-flax_job = CircleCIJob(\n-    \"flax\",\n-    docker_image=[{\"image\":\"huggingface/transformers-jax-light\"}],\n-    parallelism=6,\n-    pytest_num_workers=16,\n-    resource_class=\"2xlarge\",\n-)\n-\n-\n pipelines_torch_job = CircleCIJob(\n     \"pipelines_torch\",\n     additional_env={\"RUN_PIPELINE_TESTS\": True},\n@@ -254,16 +238,6 @@ def job_name(self):\n     parallelism=4,\n )\n \n-\n-pipelines_tf_job = CircleCIJob(\n-    \"pipelines_tf\",\n-    additional_env={\"RUN_PIPELINE_TESTS\": True},\n-    docker_image=[{\"image\":\"huggingface/transformers-tf-light\"}],\n-    marker=\"is_pipeline_test\",\n-    parallelism=4,\n-)\n-\n-\n custom_tokenizers_job = CircleCIJob(\n     \"custom_tokenizers\",\n     additional_env={\"RUN_CUSTOM_TOKENIZERS\": True},\n@@ -280,15 +254,6 @@ def job_name(self):\n     pytest_num_workers=4,\n )\n \n-\n-examples_tensorflow_job = CircleCIJob(\n-    \"examples_tensorflow\",\n-    additional_env={\"OMP_NUM_THREADS\": 8},\n-    docker_image=[{\"image\":\"huggingface/transformers-examples-tf\"}],\n-    pytest_num_workers=2,\n-)\n-\n-\n hub_job = CircleCIJob(\n     \"hub\",\n     additional_env={\"HUGGINGFACE_CO_STAGING\": True},\n@@ -368,7 +333,7 @@ def job_name(self):\n     pytest_num_workers=1,\n )\n \n-REGULAR_TESTS = [torch_job, flax_job, hub_job, onnx_job, tokenization_job, processor_job, generate_job, non_model_job] # fmt: skip\n+REGULAR_TESTS = [torch_job, hub_job, onnx_job, tokenization_job, processor_job, generate_job, non_model_job] # fmt: skip\n EXAMPLES_TESTS = [examples_torch_job]\n PIPELINE_TESTS = [pipelines_torch_job]\n REPO_UTIL_TESTS = [repo_utils_job]"
        },
        {
            "sha": "a1c5320a5dda9f29924eb9e6fdead7befa9db331",
            "filename": "utils/check_repo.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/063bef0865863ef86dc74011f4bc715b19d03cc9/utils%2Fcheck_repo.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/063bef0865863ef86dc74011f4bc715b19d03cc9/utils%2Fcheck_repo.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/utils%2Fcheck_repo.py?ref=063bef0865863ef86dc74011f4bc715b19d03cc9",
            "patch": "@@ -682,7 +682,9 @@ def check_all_models_are_tested():\n         # Matches a module to its test file.\n         test_file = [file for file in test_files if f\"test_{module.__name__.split('.')[-1]}.py\" in file]\n         if len(test_file) == 0:\n-            failures.append(f\"{module.__name__} does not have its corresponding test file {test_file}.\")\n+            # We do not test TF or Flax models anymore because they're deprecated.\n+            if not (module.__name__.startswith(\"modeling_tf\") or module.__name__.startswith(\"modeling_flax\")):\n+                failures.append(f\"{module.__name__} does not have its corresponding test file {test_file}.\")\n         elif len(test_file) > 1:\n             failures.append(f\"{module.__name__} has several test files: {test_file}.\")\n         else:"
        }
    ],
    "stats": {
        "total": 41,
        "additions": 4,
        "deletions": 37
    }
}