{
    "author": "Cyrilvallez",
    "message": "Fix detectron2 import (#41510)\n\n* fix\n\n* fix\n\n* typo",
    "sha": "60f6ec438a4e77dea878b753affa9da75bc8db3e",
    "files": [
        {
            "sha": "a956efc97fdb1f44117ab4197979c3d67d27e650",
            "filename": "src/transformers/utils/import_utils.py",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/huggingface/transformers/blob/60f6ec438a4e77dea878b753affa9da75bc8db3e/src%2Ftransformers%2Futils%2Fimport_utils.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/60f6ec438a4e77dea878b753affa9da75bc8db3e/src%2Ftransformers%2Futils%2Fimport_utils.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Futils%2Fimport_utils.py?ref=60f6ec438a4e77dea878b753affa9da75bc8db3e",
            "patch": "@@ -724,7 +724,15 @@ def is_datasets_available() -> bool:\n \n @lru_cache\n def is_detectron2_available() -> bool:\n-    return _is_package_available(\"detectron2\")\n+    # We need this try/except block because otherwise after uninstalling the library, it stays available for some reason\n+    # i.e. `import detectron2` and `import detectron2.modeling` still work, even though the library is uninstalled\n+    # (the package exists but the objects are not reachable) - so here we explicitly try to import an object from it\n+    try:\n+        from detectron2.modeling import META_ARCH_REGISTRY  # noqa\n+\n+        return True\n+    except Exception:\n+        return False\n \n \n @lru_cache"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 9,
        "deletions": 1
    }
}