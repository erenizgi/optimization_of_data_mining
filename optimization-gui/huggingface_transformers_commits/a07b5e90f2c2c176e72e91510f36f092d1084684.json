{
    "author": "MilkClouds",
    "message": "feat: add `is_fast` to ImageProcessor (#39603)\n\n* feat: add `is_fast` to ImageProcessor\n\n* test_image_processing_common.py 업데이트\n\nCo-authored-by: Yoni Gozlan <74535834+yonigozlan@users.noreply.github.com>\n\n* feat: add missing BaseImageProcessorFast import\n\n* fix: `issubclass` for discriminating subclass of BaseImageProcessorFast\n\n---------\n\nCo-authored-by: Yoni Gozlan <74535834+yonigozlan@users.noreply.github.com>\nCo-authored-by: Cyril Vallez <cyril.vallez@huggingface.co>",
    "sha": "a07b5e90f2c2c176e72e91510f36f092d1084684",
    "files": [
        {
            "sha": "52b798c09f84cf014b7568dd0634d739d32e0508",
            "filename": "src/transformers/image_processing_utils.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/huggingface/transformers/blob/a07b5e90f2c2c176e72e91510f36f092d1084684/src%2Ftransformers%2Fimage_processing_utils.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/a07b5e90f2c2c176e72e91510f36f092d1084684/src%2Ftransformers%2Fimage_processing_utils.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fimage_processing_utils.py?ref=a07b5e90f2c2c176e72e91510f36f092d1084684",
            "patch": "@@ -39,6 +39,13 @@ class BaseImageProcessor(ImageProcessingMixin):\n     def __init__(self, **kwargs):\n         super().__init__(**kwargs)\n \n+    @property\n+    def is_fast(self) -> bool:\n+        \"\"\"\n+        `bool`: Whether or not this image processor is a fast processor (backed by PyTorch and TorchVision).\n+        \"\"\"\n+        return False\n+\n     def __call__(self, images, **kwargs) -> BatchFeature:\n         \"\"\"Preprocess an image or a batch of images.\"\"\"\n         return self.preprocess(images, **kwargs)"
        },
        {
            "sha": "4fe9a48cb36f652ace975d4263f62c38885da972",
            "filename": "src/transformers/image_processing_utils_fast.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/huggingface/transformers/blob/a07b5e90f2c2c176e72e91510f36f092d1084684/src%2Ftransformers%2Fimage_processing_utils_fast.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/a07b5e90f2c2c176e72e91510f36f092d1084684/src%2Ftransformers%2Fimage_processing_utils_fast.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fimage_processing_utils_fast.py?ref=a07b5e90f2c2c176e72e91510f36f092d1084684",
            "patch": "@@ -235,6 +235,13 @@ def __init__(\n         # get valid kwargs names\n         self._valid_kwargs_names = list(self.valid_kwargs.__annotations__.keys())\n \n+    @property\n+    def is_fast(self) -> bool:\n+        \"\"\"\n+        `bool`: Whether or not this image processor is a fast processor (backed by PyTorch and TorchVision).\n+        \"\"\"\n+        return True\n+\n     def resize(\n         self,\n         image: \"torch.Tensor\","
        },
        {
            "sha": "c8b75c73d9843367fdd4a89949eef8ffd61a43e9",
            "filename": "tests/test_image_processing_common.py",
            "status": "modified",
            "additions": 15,
            "deletions": 1,
            "changes": 16,
            "blob_url": "https://github.com/huggingface/transformers/blob/a07b5e90f2c2c176e72e91510f36f092d1084684/tests%2Ftest_image_processing_common.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/a07b5e90f2c2c176e72e91510f36f092d1084684/tests%2Ftest_image_processing_common.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Ftest_image_processing_common.py?ref=a07b5e90f2c2c176e72e91510f36f092d1084684",
            "patch": "@@ -36,7 +36,11 @@\n     slow,\n     torch_device,\n )\n-from transformers.utils import is_torch_available, is_vision_available\n+from transformers.utils import is_torch_available, is_torchvision_available, is_vision_available\n+\n+\n+if is_torchvision_available():\n+    from transformers.image_processing_utils_fast import BaseImageProcessorFast\n \n \n if is_torch_available():\n@@ -241,6 +245,16 @@ def measure_time(image_processor, image):\n \n         self.assertLessEqual(fast_time, slow_time)\n \n+    def test_is_fast(self):\n+        for image_processing_class in self.image_processor_list:\n+            image_processor = image_processing_class(**self.image_processor_dict)\n+\n+            # Check is_fast is set correctly\n+            if is_torchvision_available() and issubclass(image_processing_class, BaseImageProcessorFast):\n+                self.assertTrue(image_processor.is_fast)\n+            else:\n+                self.assertFalse(image_processor.is_fast)\n+\n     def test_image_processor_to_json_string(self):\n         for image_processing_class in self.image_processor_list:\n             image_processor = image_processing_class(**self.image_processor_dict)"
        }
    ],
    "stats": {
        "total": 30,
        "additions": 29,
        "deletions": 1
    }
}