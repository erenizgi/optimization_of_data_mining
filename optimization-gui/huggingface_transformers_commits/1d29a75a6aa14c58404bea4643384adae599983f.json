{
    "author": "ydshieh",
    "message": "Add Slow CI reminder bot (#33506)\n\n* add workflow\r\n\r\n* update\r\n\r\n* fix\r\n\r\n* Update .github/workflows/slow_ci_remainder.yml\r\n\r\nCo-authored-by: Arthur <48595927+ArthurZucker@users.noreply.github.com>\r\n\r\n* fix\r\n\r\n* fix\r\n\r\n---------\r\n\r\nCo-authored-by: ydshieh <ydshieh@users.noreply.github.com>\r\nCo-authored-by: Arthur <48595927+ArthurZucker@users.noreply.github.com>",
    "sha": "1d29a75a6aa14c58404bea4643384adae599983f",
    "files": [
        {
            "sha": "b2d1a49f658f24c4edf1c4af6ae198b52a066775",
            "filename": ".github/workflows/slow_ci_remainder.yml",
            "status": "added",
            "additions": 63,
            "deletions": 0,
            "changes": 63,
            "blob_url": "https://github.com/huggingface/transformers/blob/1d29a75a6aa14c58404bea4643384adae599983f/.github%2Fworkflows%2Fslow_ci_remainder.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/1d29a75a6aa14c58404bea4643384adae599983f/.github%2Fworkflows%2Fslow_ci_remainder.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fslow_ci_remainder.yml?ref=1d29a75a6aa14c58404bea4643384adae599983f",
            "patch": "@@ -0,0 +1,63 @@\n+name: Slow CI Reminder\n+\n+# For security reason, don't use `pull_request` but `pull_request_target`!\n+on:\n+  pull_request_target:\n+    paths:\n+      - \"src/transformers/models/*/*.py\"\n+      - \"src/transformers/generation/*.py\"\n+      - \"src/transformers/pipelines/*.py\"\n+      - \"tests/models/*/*.py\"\n+      - \"tests/generation/*/*.py\"\n+      - \"tests/pipelines/*/*.py\"\n+\n+concurrency:\n+  group: ${{ github.workflow }}-${{ github.head_ref || github.run_id }}\n+  cancel-in-progress: true\n+\n+jobs:\n+  remind:\n+    name: remind\n+    runs-on: ubuntu-22.04\n+    env:\n+      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n+    steps:\n+    - name: Find comment\n+      uses: peter-evans/find-comment@v2\n+      id: find_comment\n+      with:\n+        issue-number: ${{ github.event.number }}\n+        body-includes: Before merging this pull request, slow tests CI should be triggered. To enable this\n+\n+    - run: |\n+        echo ${{ steps.find_comment.outputs.comment-id }}\n+\n+    - name: Delete previous comment (if found)\n+      if: steps.find_comment.outputs.comment-id != ''\n+      uses: actions/github-script@v6\n+      with:\n+        result-encoding: string\n+        github-token: ${{ secrets.comment_bot_token }}\n+        script: |\n+          github.rest.issues.deleteComment({\n+            owner: context.repo.owner,\n+            repo: context.repo.repo,\n+            comment_id: ${{ steps.find_comment.outputs.comment-id }},\n+          })\n+\n+    - name: Add comment\n+      uses: thollander/actions-comment-pull-request@v2\n+      with:\n+        message: |\n+          Hey! ðŸ¤— Thanks for your contribution to the `transformers` library!\n+\n+          Before merging this pull request, slow tests CI should be triggered. To enable this:\n+          - Add the `run-slow` label to the PR\n+          - When your PR is ready for merge and all reviewers' comments have been addressed, push an empty commit with the command `[run-slow]` followed by a comma separated list of all the models to be tested, i.e. `[run_slow] model_to_test_1, model_to_test_2`\n+            - If the pull request affects a lot of models, put at most 10 models in the commit message\n+          - A `transformers` maintainer will then approve the workflow to start the tests\n+          \n+          (For maintainers) The documentation for slow tests CI on PRs is [here](https://www.notion.so/huggingface2/CI-for-pull-requests-8335bd9217d24d1e8ed1d3a016f39804).\n+\n+        pr_number: ${{ github.event.number }}\n+        GITHUB_TOKEN: ${{ secrets.comment_bot_token }}"
        }
    ],
    "stats": {
        "total": 63,
        "additions": 63,
        "deletions": 0
    }
}