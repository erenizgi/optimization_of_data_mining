{
    "author": "aryanchauhan31",
    "message": "[Dinov2] Enable device_map=\"auto\" support (#38487)\n\n* Fix: resolve import order and duplicate import (ruff I001, F811)\n\n* Format: clean up Dinov2 test file with ruff formatter\n\n* Add _no_split_modules = ['Dinov2Layer'] to enable device_map='auto'\n\n* Revert dinov2_with_registers _no_split_modules to original state\n\n* Remove redundant device_map test as suggested\n\n* Remove unused import after deleting test\n\n* removed import  torch and the redundant test function\n\n* Update tests/models/dinov2/test_modeling_dinov2.py\n\n---------\n\nCo-authored-by: Marc Sun <57196510+SunMarc@users.noreply.github.com>",
    "sha": "b9c17c5dc021ed17484adfdf2ae5614984adfc6e",
    "files": [
        {
            "sha": "69911e40bc37a9bd6662005624c0a5adf24a3a8b",
            "filename": "src/transformers/models/dinov2/modeling_dinov2.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/b9c17c5dc021ed17484adfdf2ae5614984adfc6e/src%2Ftransformers%2Fmodels%2Fdinov2%2Fmodeling_dinov2.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/b9c17c5dc021ed17484adfdf2ae5614984adfc6e/src%2Ftransformers%2Fmodels%2Fdinov2%2Fmodeling_dinov2.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fdinov2%2Fmodeling_dinov2.py?ref=b9c17c5dc021ed17484adfdf2ae5614984adfc6e",
            "patch": "@@ -491,7 +491,7 @@ class Dinov2PreTrainedModel(PreTrainedModel):\n     base_model_prefix = \"dinov2\"\n     main_input_name = \"pixel_values\"\n     supports_gradient_checkpointing = True\n-    _no_split_modules = [\"Dinov2SwiGLUFFN\"]\n+    _no_split_modules = [\"Dinov2Layer\"]\n     _supports_sdpa = True\n     _supports_flash_attn_2 = True\n     _supports_flex_attn = True"
        },
        {
            "sha": "db2d2b01d13ff7032050fde2fdce106aa67a75fe",
            "filename": "src/transformers/models/dinov2_with_registers/modeling_dinov2_with_registers.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/b9c17c5dc021ed17484adfdf2ae5614984adfc6e/src%2Ftransformers%2Fmodels%2Fdinov2_with_registers%2Fmodeling_dinov2_with_registers.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/b9c17c5dc021ed17484adfdf2ae5614984adfc6e/src%2Ftransformers%2Fmodels%2Fdinov2_with_registers%2Fmodeling_dinov2_with_registers.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fdinov2_with_registers%2Fmodeling_dinov2_with_registers.py?ref=b9c17c5dc021ed17484adfdf2ae5614984adfc6e",
            "patch": "@@ -509,7 +509,7 @@ class Dinov2WithRegistersPreTrainedModel(PreTrainedModel):\n     base_model_prefix = \"dinov2_with_registers\"\n     main_input_name = \"pixel_values\"\n     supports_gradient_checkpointing = True\n-    _no_split_modules = [\"Dinov2WithRegistersSwiGLUFFN\"]\n+    _no_split_modules = [\"Dinov2WithRegistersLayer\"]\n     _supports_sdpa = True\n     _supports_flash_attn_2 = True\n     _supports_flex_attn = True"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}