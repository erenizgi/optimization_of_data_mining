{
    "author": "paulinebm",
    "message": "Fix security issue 5 (#42072)\n\nfix\n\nCo-authored-by: Pauline <pauline@Paulines-MacBook-Pro-2.local>",
    "sha": "7b325cd573e40bbb12951b8446176c96e8b1afaa",
    "files": [
        {
            "sha": "5e2fb916312ed30b52f94bda9e83af452c42cb60",
            "filename": ".github/workflows/check-workflow-permissions.yml",
            "status": "modified",
            "additions": 11,
            "deletions": 23,
            "changes": 34,
            "blob_url": "https://github.com/huggingface/transformers/blob/7b325cd573e40bbb12951b8446176c96e8b1afaa/.github%2Fworkflows%2Fcheck-workflow-permissions.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/7b325cd573e40bbb12951b8446176c96e8b1afaa/.github%2Fworkflows%2Fcheck-workflow-permissions.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fcheck-workflow-permissions.yml?ref=7b325cd573e40bbb12951b8446176c96e8b1afaa",
            "patch": "@@ -2,34 +2,22 @@\n name: Check Permissions Advisor\n \n on:\n-  workflow_call:\n+  workflow_dispatch:\n     inputs:\n       workflow_name:\n-        description: 'Workflow file to analyze'\n-        required: false\n+        description: 'Workflow file name'\n         type: string\n-        default: ''\n       run_count:\n         description: 'Number of runs to analyze'\n-        required: false\n-        type: number\n-        default: 10\n-\n-permissions:\n-  actions: read\n-  contents: read\n+        type: string\n+        default: \"10\"\n \n jobs:\n   advisor:\n-    name: Analyze Permissions\n-    runs-on: ubuntu-latest\n-    \n-    steps:\n-      - name: Checkout\n-        uses: actions/checkout@v4\n-      \n-      - name: Run Advisor\n-        uses: GitHubSecurityLab/actions-permissions/advisor@v1\n-        with:\n-          name: ${{ inputs.workflow_name }}\n-          count: ${{ inputs.run_count }}\n\\ No newline at end of file\n+    uses: huggingface/security-workflows/.github/workflows/permissions-advisor-reusable.yml@main\n+    permissions:\n+      actions: read\n+      contents: read\n+    with:\n+      workflow_name: ${{ inputs.workflow_name }}\n+      run_count: ${{ fromJSON(inputs.run_count) }}\n\\ No newline at end of file"
        }
    ],
    "stats": {
        "total": 34,
        "additions": 11,
        "deletions": 23
    }
}