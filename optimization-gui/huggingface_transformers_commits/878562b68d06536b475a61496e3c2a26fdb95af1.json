{
    "author": "yao-matrix",
    "message": "fix test device spec relative path importing issue (#37190)\n\nSigned-off-by: YAO Matrix <matrix.yao@intel.com>\nCo-authored-by: Yih-Dar <2521628+ydshieh@users.noreply.github.com>",
    "sha": "878562b68d06536b475a61496e3c2a26fdb95af1",
    "files": [
        {
            "sha": "3ee55e893a332314c574b2c7684ff563f8a51b50",
            "filename": "src/transformers/testing_utils.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/878562b68d06536b475a61496e3c2a26fdb95af1/src%2Ftransformers%2Ftesting_utils.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/878562b68d06536b475a61496e3c2a26fdb95af1/src%2Ftransformers%2Ftesting_utils.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Ftesting_utils.py?ref=878562b68d06536b475a61496e3c2a26fdb95af1",
            "patch": "@@ -3005,6 +3005,8 @@ def backend_device_count(device: str):\n \n         # Try to strip extension for later import â€“ also verifies we are importing a\n         # python file.\n+        device_spec_dir, _ = os.path.split(os.path.realpath(device_spec_path))\n+        sys.path.append(device_spec_dir)\n         try:\n             import_name = device_spec_path[: device_spec_path.index(\".py\")]\n         except ValueError as e:"
        }
    ],
    "stats": {
        "total": 2,
        "additions": 2,
        "deletions": 0
    }
}