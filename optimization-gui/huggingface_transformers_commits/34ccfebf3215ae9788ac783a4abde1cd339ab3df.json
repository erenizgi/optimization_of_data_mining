{
    "author": "Rocketknight1",
    "message": "Fix AST parsing when looking for remote code imports (#37245)\n\n* Not all Call.func nodes have id because they can be methods\n\n* Trigger tests\n\n* Trigger tests",
    "sha": "34ccfebf3215ae9788ac783a4abde1cd339ab3df",
    "files": [
        {
            "sha": "9a72ab52e8fc7cad38ecaf6c719a325b3625093b",
            "filename": "src/transformers/dynamic_module_utils.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/34ccfebf3215ae9788ac783a4abde1cd339ab3df/src%2Ftransformers%2Fdynamic_module_utils.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/34ccfebf3215ae9788ac783a4abde1cd339ab3df/src%2Ftransformers%2Fdynamic_module_utils.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fdynamic_module_utils.py?ref=34ccfebf3215ae9788ac783a4abde1cd339ab3df",
            "patch": "@@ -157,7 +157,9 @@ def recursive_look_for_imports(node):\n         elif isinstance(node, ast.If):\n             test = node.test\n             for condition_node in ast.walk(test):\n-                if isinstance(condition_node, ast.Call) and condition_node.func.id.startswith(\"is_flash_attn\"):\n+                if isinstance(condition_node, ast.Call) and getattr(condition_node.func, \"id\", \"\").startswith(\n+                    \"is_flash_attn\"\n+                ):\n                     # Don't recurse into \"if flash_attn_available()\" blocks and ignore imports in them\n                     return\n         elif isinstance(node, ast.Import):"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 3,
        "deletions": 1
    }
}