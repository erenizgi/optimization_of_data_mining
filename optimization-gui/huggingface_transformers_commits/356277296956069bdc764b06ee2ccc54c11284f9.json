{
    "author": "Sai-Suraj-27",
    "message": "fix: Fixed `pydantic` required version in dockerfiles to make it compatible with DeepSpeed (#33105)\n\nFixed pydantic required version in dockerfiles.",
    "sha": "356277296956069bdc764b06ee2ccc54c11284f9",
    "files": [
        {
            "sha": "d31e1cae5534071e3c87f820ed76ca96af21c3f6",
            "filename": "docker/transformers-pytorch-deepspeed-amd-gpu/Dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/356277296956069bdc764b06ee2ccc54c11284f9/docker%2Ftransformers-pytorch-deepspeed-amd-gpu%2FDockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/356277296956069bdc764b06ee2ccc54c11284f9/docker%2Ftransformers-pytorch-deepspeed-amd-gpu%2FDockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftransformers-pytorch-deepspeed-amd-gpu%2FDockerfile?ref=356277296956069bdc764b06ee2ccc54c11284f9",
            "patch": "@@ -22,7 +22,7 @@ RUN apt update && \\\n     apt clean && \\\n     rm -rf /var/lib/apt/lists/*\n \n-RUN python3 -m pip install --no-cache-dir --upgrade pip ninja \"pydantic<2\"\n+RUN python3 -m pip install --no-cache-dir --upgrade pip ninja \"pydantic>=2.0.0\"\n RUN python3 -m pip uninstall -y apex torch torchvision torchaudio\n RUN python3 -m pip install torch==$PYTORCH torchvision==$TORCH_VISION torchaudio==$TORCH_AUDIO --index-url https://download.pytorch.org/whl/rocm$ROCM --no-cache-dir\n "
        },
        {
            "sha": "eeaf728cab712aa11b2e802b2f27366e5e843afa",
            "filename": "docker/transformers-pytorch-deepspeed-latest-gpu/Dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/356277296956069bdc764b06ee2ccc54c11284f9/docker%2Ftransformers-pytorch-deepspeed-latest-gpu%2FDockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/356277296956069bdc764b06ee2ccc54c11284f9/docker%2Ftransformers-pytorch-deepspeed-latest-gpu%2FDockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftransformers-pytorch-deepspeed-latest-gpu%2FDockerfile?ref=356277296956069bdc764b06ee2ccc54c11284f9",
            "patch": "@@ -49,5 +49,5 @@ RUN DS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 python3 -m pip install deepspeed -\n RUN cd transformers && python3 setup.py develop\n \n # The base image ships with `pydantic==1.8.2` which is not working - i.e. the next command fails\n-RUN python3 -m pip install -U --no-cache-dir \"pydantic<2\"\n+RUN python3 -m pip install -U --no-cache-dir \"pydantic>=2.0.0\"\n RUN python3 -c \"from deepspeed.launcher.runner import main\""
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}