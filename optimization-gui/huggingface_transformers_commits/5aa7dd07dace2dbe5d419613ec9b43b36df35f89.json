{
    "author": "ydshieh",
    "message": "Revert back to use GitHub context  (#42066)\n\n* check\n\n* fix\n\n---------\n\nCo-authored-by: ydshieh <ydshieh@users.noreply.github.com>",
    "sha": "5aa7dd07dace2dbe5d419613ec9b43b36df35f89",
    "files": [
        {
            "sha": "765a242550b2656cd78cdabefd6a58901cbdc36b",
            "filename": ".github/workflows/pr_slow_ci_suggestion.yml",
            "status": "modified",
            "additions": 8,
            "deletions": 6,
            "changes": 14,
            "blob_url": "https://github.com/huggingface/transformers/blob/5aa7dd07dace2dbe5d419613ec9b43b36df35f89/.github%2Fworkflows%2Fpr_slow_ci_suggestion.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/5aa7dd07dace2dbe5d419613ec9b43b36df35f89/.github%2Fworkflows%2Fpr_slow_ci_suggestion.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fpr_slow_ci_suggestion.yml?ref=5aa7dd07dace2dbe5d419613ec9b43b36df35f89",
            "patch": "@@ -28,13 +28,15 @@ jobs:\n         with:\n           fetch-depth: \"0\"\n \n+      # We need to use `${{ ... }}` here to avoid `Argument list too long` error when a PR changes a lot of files.\n+      # (We could also try to use artifact approach, but it's more involved).\n+      # `CodeQL` doesn't identify any security issue here. Also `PR_FILES` is from `get-pr-info.yml` by using an api\n+      # `github.rest.pulls.listFiles`, which is fine.\n       - name: Write pr_files file\n-        uses: actions/github-script@v7\n-        with:\n-          script: |\n-            const fs = require('node:fs');\n-            const prFilesJson = `${{ needs.get-pr-info.outputs.PR_FILES }}`;\n-            fs.writeFileSync('pr_files.txt', prFilesJson);\n+        run: |\n+          cat > pr_files.txt << 'EOF'\n+          ${{ needs.get-pr-info.outputs.PR_FILES }}\n+          EOF\n \n       - name: Get repository content\n         id: repo_content"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 8,
        "deletions": 6
    }
}