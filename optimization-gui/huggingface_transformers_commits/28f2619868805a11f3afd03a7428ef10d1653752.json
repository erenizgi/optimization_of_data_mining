{
    "author": "ydshieh",
    "message": "skip `Glm4MoeModelTest::test_torch_compile_for_training` (#39670)\n\n* fix\n\n* fix\n\n* fix\n\n---------\n\nCo-authored-by: ydshieh <ydshieh@users.noreply.github.com>",
    "sha": "28f2619868805a11f3afd03a7428ef10d1653752",
    "files": [
        {
            "sha": "176a7c4382efca010dfd2c4c7a984f0a56ed1252",
            "filename": "tests/models/glm4_moe/test_modeling_glm4_moe.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/28f2619868805a11f3afd03a7428ef10d1653752/tests%2Fmodels%2Fglm4_moe%2Ftest_modeling_glm4_moe.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/28f2619868805a11f3afd03a7428ef10d1653752/tests%2Fmodels%2Fglm4_moe%2Ftest_modeling_glm4_moe.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Fglm4_moe%2Ftest_modeling_glm4_moe.py?ref=28f2619868805a11f3afd03a7428ef10d1653752",
            "patch": "@@ -79,8 +79,8 @@ class Glm4MoeModelTest(CausalLMModelTest, unittest.TestCase):\n     test_pruning = False\n     fx_compatible = False\n     model_tester_class = Glm4MoeModelTester\n-    # used in `test_torch_compile_for_training`\n-    _torch_compile_train_cls = Glm4MoeForCausalLM if is_torch_available() else None\n+    # used in `test_torch_compile_for_training`. Skip as \"Dynamic control flow in MoE\"\n+    _torch_compile_train_cls = None\n \n \n @require_torch_accelerator"
        },
        {
            "sha": "4559fde9c3d6d0cff2693fbde6a00faf037f66dd",
            "filename": "tests/test_modeling_common.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/28f2619868805a11f3afd03a7428ef10d1653752/tests%2Ftest_modeling_common.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/28f2619868805a11f3afd03a7428ef10d1653752/tests%2Ftest_modeling_common.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Ftest_modeling_common.py?ref=28f2619868805a11f3afd03a7428ef10d1653752",
            "patch": "@@ -4476,7 +4476,7 @@ def test_torch_compile_for_training(self):\n         if version.parse(torch.__version__) < version.parse(\"2.3\"):\n             self.skipTest(reason=\"This test requires torch >= 2.3 to run.\")\n \n-        if not hasattr(self, \"_torch_compile_train_cls\"):\n+        if getattr(self, \"_torch_compile_train_cls\", None) is None:\n             self.skipTest(f\"{self.__class__.__name__} doesn't have the attribute `_torch_compile_train_cls`.\")\n \n         config, _ = self.model_tester.prepare_config_and_inputs_for_common()"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 3,
        "deletions": 3
    }
}