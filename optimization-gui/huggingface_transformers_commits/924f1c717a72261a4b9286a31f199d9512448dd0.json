{
    "author": "yonigozlan",
    "message": "Remove Multi-threaded image conversion for fast image processors (#36105)\n\nremove multithreaded image conversion\r\n\r\nCo-authored-by: Marc Sun <57196510+SunMarc@users.noreply.github.com>",
    "sha": "924f1c717a72261a4b9286a31f199d9512448dd0",
    "files": [
        {
            "sha": "f990ce100d9db6501c9babbe7c96c513af0be8c1",
            "filename": "src/transformers/image_processing_utils_fast.py",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/huggingface/transformers/blob/924f1c717a72261a4b9286a31f199d9512448dd0/src%2Ftransformers%2Fimage_processing_utils_fast.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/924f1c717a72261a4b9286a31f199d9512448dd0/src%2Ftransformers%2Fimage_processing_utils_fast.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fimage_processing_utils_fast.py?ref=924f1c717a72261a4b9286a31f199d9512448dd0",
            "patch": "@@ -13,7 +13,6 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n \n-from concurrent.futures import ThreadPoolExecutor\n from functools import lru_cache, partial\n from typing import Any, Dict, Iterable, List, Optional, Tuple, TypedDict, Union\n \n@@ -497,8 +496,10 @@ def _prepare_input_images(\n             input_data_format=input_data_format,\n             device=device,\n         )\n-        with ThreadPoolExecutor() as executor:\n-            processed_images = list(executor.map(process_image_fn, images))\n+        # todo: yoni - check if we can parallelize this efficiently\n+        processed_images = []\n+        for image in images:\n+            processed_images.append(process_image_fn(image))\n \n         return processed_images\n "
        }
    ],
    "stats": {
        "total": 7,
        "additions": 4,
        "deletions": 3
    }
}