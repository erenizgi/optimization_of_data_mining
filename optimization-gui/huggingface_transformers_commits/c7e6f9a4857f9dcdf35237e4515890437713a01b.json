{
    "author": "eladsegal",
    "message": "Fix an infinite loop bug in recursive search of relative imports (#40326)\n\nFix bug in recursive search of relative imports",
    "sha": "c7e6f9a4857f9dcdf35237e4515890437713a01b",
    "files": [
        {
            "sha": "31bba4fc83aed13a914f3748933b4fa2c4afb98c",
            "filename": "src/transformers/dynamic_module_utils.py",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/huggingface/transformers/blob/c7e6f9a4857f9dcdf35237e4515890437713a01b/src%2Ftransformers%2Fdynamic_module_utils.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/c7e6f9a4857f9dcdf35237e4515890437713a01b/src%2Ftransformers%2Fdynamic_module_utils.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fdynamic_module_utils.py?ref=c7e6f9a4857f9dcdf35237e4515890437713a01b",
            "patch": "@@ -130,11 +130,10 @@ def get_relative_import_files(module_file: Union[str, os.PathLike]) -> list[str]\n             new_imports.extend(get_relative_imports(f))\n \n         module_path = Path(module_file).parent\n-        new_import_files = [str(module_path / m) for m in new_imports]\n-        new_import_files = [f for f in new_import_files if f not in all_relative_imports]\n-        files_to_check = [f\"{f}.py\" for f in new_import_files]\n+        new_import_files = [f\"{str(module_path / m)}.py\" for m in new_imports]\n+        files_to_check = [f for f in new_import_files if f not in all_relative_imports]\n \n-        no_change = len(new_import_files) == 0\n+        no_change = len(files_to_check) == 0\n         all_relative_imports.extend(files_to_check)\n \n     return all_relative_imports"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 3,
        "deletions": 4
    }
}