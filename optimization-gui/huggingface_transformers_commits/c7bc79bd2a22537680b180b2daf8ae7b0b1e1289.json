{
    "author": "qubvel",
    "message": "Fixup for distill_any_depth conversion script (#37043)\n\n* Fixup\n\n* trigger",
    "sha": "c7bc79bd2a22537680b180b2daf8ae7b0b1e1289",
    "files": [
        {
            "sha": "47cec7afac1a7222fbb2779ff51f840fa8c54e1d",
            "filename": "src/transformers/models/depth_anything/convert_distill_any_depth_to_hf.py",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/huggingface/transformers/blob/c7bc79bd2a22537680b180b2daf8ae7b0b1e1289/src%2Ftransformers%2Fmodels%2Fdepth_anything%2Fconvert_distill_any_depth_to_hf.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/c7bc79bd2a22537680b180b2daf8ae7b0b1e1289/src%2Ftransformers%2Fmodels%2Fdepth_anything%2Fconvert_distill_any_depth_to_hf.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fdepth_anything%2Fconvert_distill_any_depth_to_hf.py?ref=c7bc79bd2a22537680b180b2daf8ae7b0b1e1289",
            "patch": "@@ -45,12 +45,12 @@\n     r\"(backbone|pretrained)(\\.blocks(\\.\\d+)?)?\\.(\\d+)\\.norm(1|2)\\.(weight|bias)\": r\"backbone.encoder.layer.\\4.norm\\5.\\6\",\n     r\"depth_head\\.projects\\.(\\d+)\\.(weight|bias)\": r\"neck.reassemble_stage.layers.\\1.projection.\\2\",\n     r\"depth_head\\.resize_layers\\.(?!2)(\\d+)\\.(weight|bias)\": r\"neck.reassemble_stage.layers.\\1.resize.\\2\",\n-    r\"depth_head\\.scratch\\.layer(\\d+)_rn\\.weight\": lambda m: f\"neck.convs.{int(m[1])-1}.weight\",\n+    r\"depth_head\\.scratch\\.layer(\\d+)_rn\\.weight\": lambda m: f\"neck.convs.{int(m[1]) - 1}.weight\",\n     r\"depth_head\\.scratch\\.output_conv(\\d+)(?:\\.(\\d+))?\\.(weight|bias)\": lambda m: (\n-        f\"head.conv{int(m[1]) + (int(m[2])//2 if m[2] else 0)}.{m[3]}\" if m[1] == \"2\" else f\"head.conv{m[1]}.{m[3]}\"\n+        f\"head.conv{int(m[1]) + (int(m[2]) // 2 if m[2] else 0)}.{m[3]}\" if m[1] == \"2\" else f\"head.conv{m[1]}.{m[3]}\"\n     ),\n-    r\"depth_head\\.scratch\\.refinenet(\\d+)\\.out_conv\\.(weight|bias)\": lambda m: f\"neck.fusion_stage.layers.{3 - (int(m[1])-1)}.projection.{m[2]}\",\n-    r\"depth_head\\.scratch\\.refinenet(\\d+)\\.resConfUnit(\\d+)\\.conv(\\d+)\\.(weight|bias)\": lambda m: f\"neck.fusion_stage.layers.{3 - (int(m[1])-1)}.residual_layer{m[2]}.convolution{m[3]}.{m[4]}\",\n+    r\"depth_head\\.scratch\\.refinenet(\\d+)\\.out_conv\\.(weight|bias)\": lambda m: f\"neck.fusion_stage.layers.{3 - (int(m[1]) - 1)}.projection.{m[2]}\",\n+    r\"depth_head\\.scratch\\.refinenet(\\d+)\\.resConfUnit(\\d+)\\.conv(\\d+)\\.(weight|bias)\": lambda m: f\"neck.fusion_stage.layers.{3 - (int(m[1]) - 1)}.residual_layer{m[2]}.convolution{m[3]}.{m[4]}\",\n }\n \n "
        }
    ],
    "stats": {
        "total": 8,
        "additions": 4,
        "deletions": 4
    }
}