{
    "author": "gante",
    "message": "Test fetcher: missing return on filtered tests; don't write empty files (#33224)\n\n* missing return\r\n\r\n* skip files without contents\r\n\r\n* test 2\r\n\r\n* dbg\r\n\r\n* dbg\r\n\r\n* how about this?",
    "sha": "746104ba6f0514159d58dc2fb09c887d0e9d4863",
    "files": [
        {
            "sha": "8ccd738c1df6b44f2ada7c256775d3e4fdf2b620",
            "filename": "utils/tests_fetcher.py",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/huggingface/transformers/blob/746104ba6f0514159d58dc2fb09c887d0e9d4863/utils%2Ftests_fetcher.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/746104ba6f0514159d58dc2fb09c887d0e9d4863/utils%2Ftests_fetcher.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/utils%2Ftests_fetcher.py?ref=746104ba6f0514159d58dc2fb09c887d0e9d4863",
            "patch": "@@ -979,6 +979,7 @@ def filter_tests(tests, module=\"\"):\n                 or \"/\".join(Path(t).parts[1:3]) in module\n             ):\n                 filtered_tests += [t]\n+        return filtered_tests\n \n     return {\n         module: (filter_tests(tests, module=module) if has_many_models(tests) else tests)\n@@ -1159,8 +1160,9 @@ def create_test_list_from_filter(full_test_list, out_path):\n         else:\n             files_to_test = list(re.findall(_filter, all_test_files))\n         print(job_name, file_name)\n-        with open(file_name, \"w\") as f:\n-            f.write(\"\\n\".join(files_to_test))\n+        if len(files_to_test) > 0:  # No tests -> no file with test list\n+            with open(file_name, \"w\") as f:\n+                f.write(\"\\n\".join(files_to_test))\n \n \n if __name__ == \"__main__\":"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 4,
        "deletions": 2
    }
}