{
    "author": "Cyrilvallez",
    "message": "[modular] Allow method with the same name in case of @property decorator (#39308)\n\n* fix\n\n* add example\n\n* fix\n\n* Update modular_model_converter.py",
    "sha": "1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86",
    "files": [
        {
            "sha": "ffe4079d4d4bf580765346f12543b17453aea54d",
            "filename": "examples/modular-transformers/configuration_duplicated_method.py",
            "status": "added",
            "additions": 216,
            "deletions": 0,
            "changes": 216,
            "blob_url": "https://github.com/huggingface/transformers/blob/1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86/examples%2Fmodular-transformers%2Fconfiguration_duplicated_method.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86/examples%2Fmodular-transformers%2Fconfiguration_duplicated_method.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/examples%2Fmodular-transformers%2Fconfiguration_duplicated_method.py?ref=1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86",
            "patch": "@@ -0,0 +1,216 @@\n+#                ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨\n+#           This file was automatically generated from examples/modular-transformers/modular_duplicated_method.py.\n+#               Do NOT edit this file manually as any edits will be overwritten by the generation of\n+#             the file from the modular. If any change should be done, please apply the change to the\n+#                          modular_duplicated_method.py file directly. One of our CI enforces this.\n+#                ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨ðŸš¨\n+\n+from ...configuration_utils import PretrainedConfig\n+from ...modeling_rope_utils import rope_config_validation\n+\n+\n+class DuplicatedMethodConfig(PretrainedConfig):\n+    r\"\"\"\n+    This is the configuration class to store the configuration of a [`DuplicatedMethodModel`]. It is used to instantiate an DuplicatedMethod\n+    model according to the specified arguments, defining the model architecture. Instantiating a configuration with the\n+    defaults will yield a similar configuration to that of the DuplicatedMethod-7B.\n+    e.g. [meta-duplicated_method/DuplicatedMethod-2-7b-hf](https://huggingface.co/meta-duplicated_method/DuplicatedMethod-2-7b-hf)\n+\n+    Configuration objects inherit from [`PretrainedConfig`] and can be used to control the model outputs. Read the\n+    documentation from [`PretrainedConfig`] for more information.\n+\n+\n+    Args:\n+        vocab_size (`int`, *optional*, defaults to 32000):\n+            Vocabulary size of the DuplicatedMethod model. Defines the number of different tokens that can be represented by the\n+            `inputs_ids` passed when calling [`DuplicatedMethodModel`]\n+        hidden_size (`int`, *optional*, defaults to 4096):\n+            Dimension of the hidden representations.\n+        intermediate_size (`int`, *optional*, defaults to 11008):\n+            Dimension of the MLP representations.\n+        num_hidden_layers (`int`, *optional*, defaults to 32):\n+            Number of hidden layers in the Transformer decoder.\n+        num_attention_heads (`int`, *optional*, defaults to 32):\n+            Number of attention heads for each attention layer in the Transformer decoder.\n+        num_key_value_heads (`int`, *optional*):\n+            This is the number of key_value heads that should be used to implement Grouped Query Attention. If\n+            `num_key_value_heads=num_attention_heads`, the model will use Multi Head Attention (MHA), if\n+            `num_key_value_heads=1` the model will use Multi Query Attention (MQA) otherwise GQA is used. When\n+            converting a multi-head checkpoint to a GQA checkpoint, each group key and value head should be constructed\n+            by meanpooling all the original heads within that group. For more details, check out [this\n+            paper](https://huggingface.co/papers/2305.13245). If it is not specified, will default to\n+            `num_attention_heads`.\n+        hidden_act (`str` or `function`, *optional*, defaults to `\"silu\"`):\n+            The non-linear activation function (function or string) in the decoder.\n+        max_position_embeddings (`int`, *optional*, defaults to 2048):\n+            The maximum sequence length that this model might ever be used with. DuplicatedMethod 1 supports up to 2048 tokens,\n+            DuplicatedMethod 2 up to 4096, CodeLlama up to 16384.\n+        initializer_range (`float`, *optional*, defaults to 0.02):\n+            The standard deviation of the truncated_normal_initializer for initializing all weight matrices.\n+        rms_norm_eps (`float`, *optional*, defaults to 1e-06):\n+            The epsilon used by the rms normalization layers.\n+        use_cache (`bool`, *optional*, defaults to `True`):\n+            Whether or not the model should return the last key/values attentions (not used by all models). Only\n+            relevant if `config.is_decoder=True`.\n+        pad_token_id (`int`, *optional*):\n+            Padding token id.\n+        bos_token_id (`int`, *optional*, defaults to 1):\n+            Beginning of stream token id.\n+        eos_token_id (`int`, *optional*, defaults to 2):\n+            End of stream token id.\n+        pretraining_tp (`int`, *optional*, defaults to 1):\n+            Experimental feature. Tensor parallelism rank used during pretraining. Please refer to [this\n+            document](https://huggingface.co/docs/transformers/main/perf_train_gpu_many#tensor-parallelism) to\n+            understand more about it. This value is necessary to ensure exact reproducibility of the pretraining\n+            results. Please refer to [this issue](https://github.com/pytorch/pytorch/issues/76232).\n+        tie_word_embeddings (`bool`, *optional*, defaults to `False`):\n+            Whether to tie weight embeddings\n+        rope_theta (`float`, *optional*, defaults to 10000.0):\n+            The base period of the RoPE embeddings.\n+        rope_scaling (`Dict`, *optional*):\n+            Dictionary containing the scaling configuration for the RoPE embeddings. NOTE: if you apply new rope type\n+            and you expect the model to work on longer `max_position_embeddings`, we recommend you to update this value\n+            accordingly.\n+            Expected contents:\n+                `rope_type` (`str`):\n+                    The sub-variant of RoPE to use. Can be one of ['default', 'linear', 'dynamic', 'yarn', 'longrope',\n+                    'duplicated_method3'], with 'default' being the original RoPE implementation.\n+                `factor` (`float`, *optional*):\n+                    Used with all rope types except 'default'. The scaling factor to apply to the RoPE embeddings. In\n+                    most scaling types, a `factor` of x will enable the model to handle sequences of length x *\n+                    original maximum pre-trained length.\n+                `original_max_position_embeddings` (`int`, *optional*):\n+                    Used with 'dynamic', 'longrope' and 'duplicated_method3'. The original max position embeddings used during\n+                    pretraining.\n+                `attention_factor` (`float`, *optional*):\n+                    Used with 'yarn' and 'longrope'. The scaling factor to be applied on the attention\n+                    computation. If unspecified, it defaults to value recommended by the implementation, using the\n+                    `factor` field to infer the suggested value.\n+                `beta_fast` (`float`, *optional*):\n+                    Only used with 'yarn'. Parameter to set the boundary for extrapolation (only) in the linear\n+                    ramp function. If unspecified, it defaults to 32.\n+                `beta_slow` (`float`, *optional*):\n+                    Only used with 'yarn'. Parameter to set the boundary for interpolation (only) in the linear\n+                    ramp function. If unspecified, it defaults to 1.\n+                `short_factor` (`list[float]`, *optional*):\n+                    Only used with 'longrope'. The scaling factor to be applied to short contexts (<\n+                    `original_max_position_embeddings`). Must be a list of numbers with the same length as the hidden\n+                    size divided by the number of attention heads divided by 2\n+                `long_factor` (`list[float]`, *optional*):\n+                    Only used with 'longrope'. The scaling factor to be applied to long contexts (<\n+                    `original_max_position_embeddings`). Must be a list of numbers with the same length as the hidden\n+                    size divided by the number of attention heads divided by 2\n+                `low_freq_factor` (`float`, *optional*):\n+                    Only used with 'duplicated_method3'. Scaling factor applied to low frequency components of the RoPE\n+                `high_freq_factor` (`float`, *optional*):\n+                    Only used with 'duplicated_method3'. Scaling factor applied to high frequency components of the RoPE\n+        attention_bias (`bool`, *optional*, defaults to `False`):\n+            Whether to use a bias in the query, key, value and output projection layers during self-attention.\n+        attention_dropout (`float`, *optional*, defaults to 0.0):\n+            The dropout ratio for the attention probabilities.\n+        mlp_bias (`bool`, *optional*, defaults to `False`):\n+            Whether to use a bias in up_proj, down_proj and gate_proj layers in the MLP layers.\n+        head_dim (`int`, *optional*):\n+            The attention head dimension. If None, it will default to hidden_size // num_attention_heads\n+\n+    ```python\n+    >>> from transformers import DuplicatedMethodModel, DuplicatedMethodConfig\n+\n+    >>> # Initializing a DuplicatedMethod duplicated_method-7b style configuration\n+    >>> configuration = DuplicatedMethodConfig()\n+\n+    >>> # Initializing a model from the duplicated_method-7b style configuration\n+    >>> model = DuplicatedMethodModel(configuration)\n+\n+    >>> # Accessing the model configuration\n+    >>> configuration = model.config\n+    ```\"\"\"\n+\n+    model_type = \"duplicated_method\"\n+    keys_to_ignore_at_inference = [\"past_key_values\"]\n+    # Default tensor parallel plan for base model `DuplicatedMethodModel`\n+    base_model_tp_plan = {\n+        \"layers.*.self_attn.q_proj\": \"colwise\",\n+        \"layers.*.self_attn.k_proj\": \"colwise\",\n+        \"layers.*.self_attn.v_proj\": \"colwise\",\n+        \"layers.*.self_attn.o_proj\": \"rowwise\",\n+        \"layers.*.mlp.gate_proj\": \"colwise\",\n+        \"layers.*.mlp.up_proj\": \"colwise\",\n+        \"layers.*.mlp.down_proj\": \"rowwise\",\n+    }\n+    base_model_pp_plan = {\n+        \"embed_tokens\": ([\"input_ids\"], [\"inputs_embeds\"]),\n+        \"layers\": ([\"hidden_states\", \"attention_mask\"], [\"hidden_states\"]),\n+        \"norm\": ([\"hidden_states\"], [\"hidden_states\"]),\n+    }\n+\n+    def __init__(\n+        self,\n+        vocab_size=32000,\n+        hidden_size=4096,\n+        intermediate_size=11008,\n+        num_hidden_layers=32,\n+        num_attention_heads=32,\n+        num_key_value_heads=None,\n+        hidden_act=\"silu\",\n+        max_position_embeddings=2048,\n+        initializer_range=0.02,\n+        rms_norm_eps=1e-6,\n+        use_cache=True,\n+        pad_token_id=None,\n+        bos_token_id=1,\n+        eos_token_id=2,\n+        pretraining_tp=1,\n+        tie_word_embeddings=False,\n+        rope_theta=10000.0,\n+        rope_scaling=None,\n+        attention_bias=False,\n+        attention_dropout=0.0,\n+        mlp_bias=False,\n+        head_dim=None,\n+        **kwargs,\n+    ):\n+        self.vocab_size = vocab_size\n+        self.max_position_embeddings = max_position_embeddings\n+        self.hidden_size = hidden_size\n+        self.intermediate_size = intermediate_size\n+        self.num_hidden_layers = num_hidden_layers\n+        self.num_attention_heads = num_attention_heads\n+\n+        # for backward compatibility\n+        if num_key_value_heads is None:\n+            num_key_value_heads = num_attention_heads\n+\n+        self.num_key_value_heads = num_key_value_heads\n+        self.hidden_act = hidden_act\n+        self.initializer_range = initializer_range\n+        self.rms_norm_eps = rms_norm_eps\n+        self.pretraining_tp = pretraining_tp\n+        self.use_cache = use_cache\n+        self.rope_theta = rope_theta\n+        self.rope_scaling = rope_scaling\n+        self.attention_bias = attention_bias\n+        self.attention_dropout = attention_dropout\n+        self.mlp_bias = mlp_bias\n+        self.head_dim = head_dim if head_dim is not None else self.hidden_size // self.num_attention_heads\n+        # Validate the correctness of rotary position embeddings parameters\n+        # BC: if there is a 'type' field, copy it it to 'rope_type'.\n+        if self.rope_scaling is not None and \"type\" in self.rope_scaling:\n+            self.rope_scaling[\"rope_type\"] = self.rope_scaling[\"type\"]\n+        rope_config_validation(self)\n+\n+        super().__init__(\n+            pad_token_id=pad_token_id,\n+            bos_token_id=bos_token_id,\n+            eos_token_id=eos_token_id,\n+            tie_word_embeddings=tie_word_embeddings,\n+            **kwargs,\n+        )\n+\n+    @property\n+    def vocab_size(self):\n+        return 45\n+\n+    @vocab_size.setter\n+    def vocab_size(self, value):\n+        self.vocab_size = value"
        },
        {
            "sha": "d7592047fcbe61d3e03c517732db751d018e2125",
            "filename": "examples/modular-transformers/modeling_multimodal2.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/huggingface/transformers/blob/1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86/examples%2Fmodular-transformers%2Fmodeling_multimodal2.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86/examples%2Fmodular-transformers%2Fmodeling_multimodal2.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/examples%2Fmodular-transformers%2Fmodeling_multimodal2.py?ref=1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86",
            "patch": "@@ -498,6 +498,7 @@ class Multimodal2VisionPreTrainedModel(PreTrainedModel):\n     supports_gradient_checkpointing = True\n     _supports_sdpa = True\n     _supports_flash_attn_2 = True\n+    _supports_flash_attn_3 = True\n     _supports_flex_attn = True\n     _supports_attention_backend = True\n "
        },
        {
            "sha": "b87977cf4cd0daf52dbcd8d943c492b1385b96cd",
            "filename": "examples/modular-transformers/modeling_my_new_model2.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86/examples%2Fmodular-transformers%2Fmodeling_my_new_model2.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86/examples%2Fmodular-transformers%2Fmodeling_my_new_model2.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/examples%2Fmodular-transformers%2Fmodeling_my_new_model2.py?ref=1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86",
            "patch": "@@ -65,7 +65,7 @@ class MyNewModel2RotaryEmbedding(nn.Module):\n     def __init__(self, config: MyNewModel2Config, device=None):\n         super().__init__()\n         # BC: \"rope_type\" was originally \"type\"\n-        if hasattr(config, \"rope_scaling\") and config.rope_scaling is not None:\n+        if hasattr(config, \"rope_scaling\") and isinstance(config.rope_scaling, dict):\n             self.rope_type = config.rope_scaling.get(\"rope_type\", config.rope_scaling.get(\"type\"))\n         else:\n             self.rope_type = \"default\"\n@@ -290,6 +290,7 @@ class MyNewModel2PreTrainedModel(PreTrainedModel):\n     _no_split_modules = [\"MyNewModel2DecoderLayer\"]\n     _skip_keys_device_placement = [\"past_key_values\"]\n     _supports_flash_attn_2 = True\n+    _supports_flash_attn_3 = True\n     _supports_sdpa = True\n     _supports_flex_attn = True\n     _supports_cache_class = True"
        },
        {
            "sha": "5bcb2f4fb513e60442d83516d8b428b756dfa58c",
            "filename": "examples/modular-transformers/modeling_new_task_model.py",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/huggingface/transformers/blob/1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86/examples%2Fmodular-transformers%2Fmodeling_new_task_model.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86/examples%2Fmodular-transformers%2Fmodeling_new_task_model.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/examples%2Fmodular-transformers%2Fmodeling_new_task_model.py?ref=1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86",
            "patch": "@@ -96,6 +96,7 @@ class NewTaskModelPreTrainedModel(PreTrainedModel):\n     _supports_quantized_cache = True\n     _supports_static_cache = True\n     _supports_flash_attn_2 = True\n+    _supports_flash_attn_3 = True\n     _supports_sdpa = True\n     _supports_flex_attn = True\n     _supports_attention_backend = True"
        },
        {
            "sha": "6f78eb972c2a80e10c237076f9394daf8cd0b562",
            "filename": "examples/modular-transformers/modeling_super.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86/examples%2Fmodular-transformers%2Fmodeling_super.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86/examples%2Fmodular-transformers%2Fmodeling_super.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/examples%2Fmodular-transformers%2Fmodeling_super.py?ref=1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86",
            "patch": "@@ -48,7 +48,7 @@ class SuperRotaryEmbedding(nn.Module):\n     def __init__(self, config: SuperConfig, device=None):\n         super().__init__()\n         # BC: \"rope_type\" was originally \"type\"\n-        if hasattr(config, \"rope_scaling\") and config.rope_scaling is not None:\n+        if hasattr(config, \"rope_scaling\") and isinstance(config.rope_scaling, dict):\n             self.rope_type = config.rope_scaling.get(\"rope_type\", config.rope_scaling.get(\"type\"))\n         else:\n             self.rope_type = \"default\"\n@@ -289,6 +289,7 @@ class SuperPreTrainedModel(PreTrainedModel):\n     _no_split_modules = [\"SuperDecoderLayer\"]\n     _skip_keys_device_placement = [\"past_key_values\"]\n     _supports_flash_attn_2 = True\n+    _supports_flash_attn_3 = True\n     _supports_sdpa = True\n     _supports_flex_attn = True\n     _supports_cache_class = True"
        },
        {
            "sha": "06d5e03437eff93bd3a27ea60ddd7a40ca68eeb0",
            "filename": "examples/modular-transformers/modular_duplicated_method.py",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/huggingface/transformers/blob/1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86/examples%2Fmodular-transformers%2Fmodular_duplicated_method.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86/examples%2Fmodular-transformers%2Fmodular_duplicated_method.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/examples%2Fmodular-transformers%2Fmodular_duplicated_method.py?ref=1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86",
            "patch": "@@ -0,0 +1,11 @@\n+from transformers.models.llama.configuration_llama import LlamaConfig\n+\n+\n+class DuplicatedMethodConfig(LlamaConfig):\n+    @property\n+    def vocab_size(self):\n+        return 45\n+\n+    @vocab_size.setter\n+    def vocab_size(self, value):\n+        self.vocab_size = value"
        },
        {
            "sha": "e138277b03e9f747512dbb84d0c9ddf88e5ffac2",
            "filename": "utils/modular_model_converter.py",
            "status": "modified",
            "additions": 31,
            "deletions": 6,
            "changes": 37,
            "blob_url": "https://github.com/huggingface/transformers/blob/1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86/utils%2Fmodular_model_converter.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86/utils%2Fmodular_model_converter.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/utils%2Fmodular_model_converter.py?ref=1cefb5d788f5e1a5b59fd57394ed93cbe71f0d86",
            "patch": "@@ -972,12 +972,37 @@ def replace_class_node(\n     # Use all original modeling attributes, and potentially override some with values in the modular\n     new_class_attributes = list({**original_modeling_class_attributes, **modular_class_attributes}.values())\n \n-    original_modeling_methods = {\n-        node.name.value: node for node in original_modeling_node.body.body if m.matches(node, m.FunctionDef())\n-    }\n-    modular_methods = {\n-        node.name.value: node for node in modular_class_node.body.body if m.matches(node, m.FunctionDef())\n-    }\n+    # Check class methods defined in the modular and associated modeling\n+    original_modeling_methods = {}\n+    for node in original_modeling_node.body.body:\n+        if m.matches(node, m.FunctionDef()):\n+            # Due to the @property and @name.setter decorators, methods can sometimes have the same name, so we need a way\n+            # to separate them\n+            if node.name.value in original_modeling_methods:\n+                # If it's already present, and the decorator is @property, it means the node already added was the setter\n+                if node.decorators[0].decorator.value == \"property\":\n+                    original_modeling_methods[f\"{node.name.value}_setter\"] = original_modeling_methods[node.name.value]\n+                    original_modeling_methods[node.name.value] = node\n+                # In this case current node is the setter\n+                else:\n+                    original_modeling_methods[f\"{node.name.value}_setter\"] = node\n+            else:\n+                original_modeling_methods[node.name.value] = node\n+    modular_methods = {}\n+    for node in modular_class_node.body.body:\n+        if m.matches(node, m.FunctionDef()):\n+            # Due to the @property and @name.setter decorators, methods can sometimes have the same name, so we need a way\n+            # to separate them\n+            if node.name.value in modular_methods:\n+                # If it's already present, and the decorator is @property, it means the node already added was the setter\n+                if node.decorators[0].decorator.value == \"property\":\n+                    modular_methods[f\"{node.name.value}_setter\"] = modular_methods[node.name.value]\n+                    modular_methods[node.name.value] = node\n+                # In this case current node is the setter\n+                else:\n+                    modular_methods[f\"{node.name.value}_setter\"] = node\n+            else:\n+                modular_methods[node.name.value] = node\n \n     new_class_methods = []\n     # Iterate over the methods of the original modeling code, and add them to the list of methods to add"
        }
    ],
    "stats": {
        "total": 272,
        "additions": 264,
        "deletions": 8
    }
}