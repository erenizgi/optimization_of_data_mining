{
    "author": "gante",
    "message": "[serve] add cors warnings (#40112)\n\n* add cors warnings\n\n* Update src/transformers/commands/serving.py\n\nCo-authored-by: Quentin Gallouédec <45557362+qgallouedec@users.noreply.github.com>\n\n* Update src/transformers/commands/serving.py\n\nCo-authored-by: Arthur <48595927+ArthurZucker@users.noreply.github.com>\n\n* Apply suggestions from code review\n\n* make fixup\n\n---------\n\nCo-authored-by: Quentin Gallouédec <45557362+qgallouedec@users.noreply.github.com>\nCo-authored-by: Arthur <48595927+ArthurZucker@users.noreply.github.com>",
    "sha": "2121d0923912bea3f97273f6b082adac5116b785",
    "files": [
        {
            "sha": "23eb81d30b8afa33a0fdd3780b39ec354e25491a",
            "filename": "src/transformers/commands/serving.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/huggingface/transformers/blob/2121d0923912bea3f97273f6b082adac5116b785/src%2Ftransformers%2Fcommands%2Fserving.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/2121d0923912bea3f97273f6b082adac5116b785/src%2Ftransformers%2Fcommands%2Fserving.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fcommands%2Fserving.py?ref=2121d0923912bea3f97273f6b082adac5116b785",
            "patch": "@@ -634,6 +634,13 @@ def run(self):\n                 allow_methods=[\"*\"],\n                 allow_headers=[\"*\"],\n             )\n+            logger.warning_once(\n+                \"CORS allow origin is set to `*`. This is not recommended for production environments.\"\n+            )\n+        else:\n+            logger.warning_once(\n+                \"Some apps may require CORS. Consider launching the server with `--enable-cors` if you see errors.\"\n+            )\n \n         @app.post(\"/v1/chat/completions\")\n         def chat_completion(request: dict):"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 7,
        "deletions": 0
    }
}