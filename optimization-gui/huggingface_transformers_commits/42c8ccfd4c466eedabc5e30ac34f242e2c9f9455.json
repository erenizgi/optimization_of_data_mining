{
    "author": "keyboardAnt",
    "message": "fix `test_generated_length_assisted_generation` (#34935)\n\nfix test_generated_length_assisted_generation",
    "sha": "42c8ccfd4c466eedabc5e30ac34f242e2c9f9455",
    "files": [
        {
            "sha": "26f3b3e3242a77b43282ad24eab73601f7efabe8",
            "filename": "tests/generation/test_utils.py",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/huggingface/transformers/blob/42c8ccfd4c466eedabc5e30ac34f242e2c9f9455/tests%2Fgeneration%2Ftest_utils.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/42c8ccfd4c466eedabc5e30ac34f242e2c9f9455/tests%2Fgeneration%2Ftest_utils.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fgeneration%2Ftest_utils.py?ref=42c8ccfd4c466eedabc5e30ac34f242e2c9f9455",
            "patch": "@@ -3405,7 +3405,14 @@ def test_generated_length_assisted_generation(self):\n             assistant_model=assistant,\n             min_new_tokens=10,\n         )\n-        self.assertTrue((input_length + 10) <= out.shape[-1] <= 20)\n+        self.assertTrue((input_length + 10) <= out.shape[-1])\n+\n+        out = model.generate(\n+            input_ids,\n+            assistant_model=assistant,\n+            max_new_tokens=7,\n+        )\n+        self.assertTrue(out.shape[-1] <= (input_length + 7))\n \n     def test_model_kwarg_assisted_decoding_decoder_only(self):\n         # PT-only test: TF doesn't support assisted decoding yet."
        }
    ],
    "stats": {
        "total": 9,
        "additions": 8,
        "deletions": 1
    }
}