{
    "author": "simonreise",
    "message": "Fix reduce-labels in BEIT Fast Image Processor (#38042)\n\n* Fixed reduce-labels\n\n* Little doc fix\n\n* Change docstring",
    "sha": "7f1a97bae36e2d106175995931a506b3f735854d",
    "files": [
        {
            "sha": "7d29780260d97620d544bf986f7404a0211a724e",
            "filename": "docs/source/en/model_doc/beit.md",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/huggingface/transformers/blob/7f1a97bae36e2d106175995931a506b3f735854d/docs%2Fsource%2Fen%2Fmodel_doc%2Fbeit.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/7f1a97bae36e2d106175995931a506b3f735854d/docs%2Fsource%2Fen%2Fmodel_doc%2Fbeit.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fmodel_doc%2Fbeit.md?ref=7f1a97bae36e2d106175995931a506b3f735854d",
            "patch": "@@ -150,6 +150,7 @@ If you're interested in submitting a resource to be included here, please feel f\n [[autodoc]] BeitImageProcessor\n     - preprocess\n     - post_process_semantic_segmentation\n+\n ## BeitImageProcessorFast\n \n [[autodoc]] BeitImageProcessorFast"
        },
        {
            "sha": "948c3bad70a69e7500287dc162eb4cd3a7464a5e",
            "filename": "docs/source/ja/model_doc/beit.md",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/huggingface/transformers/blob/7f1a97bae36e2d106175995931a506b3f735854d/docs%2Fsource%2Fja%2Fmodel_doc%2Fbeit.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/7f1a97bae36e2d106175995931a506b3f735854d/docs%2Fsource%2Fja%2Fmodel_doc%2Fbeit.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fja%2Fmodel_doc%2Fbeit.md?ref=7f1a97bae36e2d106175995931a506b3f735854d",
            "patch": "@@ -105,6 +105,7 @@ BEiT の使用を開始するのに役立つ公式 Hugging Face およびコミ\n \n [[autodoc]] BeitImageProcessor\n     - preprocess\n+    - post_process_semantic_segmentation\n \n ## BeitImageProcessorFast\n "
        },
        {
            "sha": "ce3a9707b859a888ab946140dfa749316d842ad4",
            "filename": "src/transformers/models/beit/image_processing_beit_fast.py",
            "status": "modified",
            "additions": 12,
            "deletions": 2,
            "changes": 14,
            "blob_url": "https://github.com/huggingface/transformers/blob/7f1a97bae36e2d106175995931a506b3f735854d/src%2Ftransformers%2Fmodels%2Fbeit%2Fimage_processing_beit_fast.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/7f1a97bae36e2d106175995931a506b3f735854d/src%2Ftransformers%2Fmodels%2Fbeit%2Fimage_processing_beit_fast.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fbeit%2Fimage_processing_beit_fast.py?ref=7f1a97bae36e2d106175995931a506b3f735854d",
            "patch": "@@ -137,12 +137,22 @@ def _preprocess(\n         processed_images = torch.stack(processed_images, dim=0) if return_tensors else processed_images\n         return processed_images\n \n+    def _preprocess_images(\n+        self,\n+        images,\n+        **kwargs,\n+    ):\n+        \"\"\"Preprocesses images.\"\"\"\n+        kwargs[\"do_reduce_labels\"] = False\n+        processed_images = self._preprocess(images=images, **kwargs)\n+        return processed_images\n+\n     def _preprocess_segmentation_maps(\n         self,\n         segmentation_maps,\n         **kwargs,\n     ):\n-        \"\"\"Preprocesses a single segmentation map.\"\"\"\n+        \"\"\"Preprocesses segmentation maps.\"\"\"\n         processed_segmentation_maps = []\n         for segmentation_map in segmentation_maps:\n             segmentation_map = self._process_image(\n@@ -215,7 +225,7 @@ def preprocess(\n         kwargs.pop(\"default_to_square\")\n         kwargs.pop(\"data_format\")\n \n-        images = self._preprocess(\n+        images = self._preprocess_images(\n             images=images,\n             **kwargs,\n         )"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 14,
        "deletions": 2
    }
}