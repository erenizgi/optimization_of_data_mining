{
    "author": "ydshieh",
    "message": "Fix SSH workflow (#33451)\n\n* fix\r\n\r\n* update\r\n\r\n---------\r\n\r\nCo-authored-by: ydshieh <ydshieh@users.noreply.github.com>",
    "sha": "5ce0a113b5bc9dd8dbb92dd866772d79847d9a92",
    "files": [
        {
            "sha": "db649876f60492fa5734a71d082cb9f05f4f5386",
            "filename": ".github/workflows/ssh-runner.yml",
            "status": "modified",
            "additions": 13,
            "deletions": 2,
            "changes": 15,
            "blob_url": "https://github.com/huggingface/transformers/blob/5ce0a113b5bc9dd8dbb92dd866772d79847d9a92/.github%2Fworkflows%2Fssh-runner.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/5ce0a113b5bc9dd8dbb92dd866772d79847d9a92/.github%2Fworkflows%2Fssh-runner.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fssh-runner.yml?ref=5ce0a113b5bc9dd8dbb92dd866772d79847d9a92",
            "patch": "@@ -58,8 +58,19 @@ jobs:\n         #because the SSH can be enabled dynamically if the workflow failed, so we need to store slack infos to be able to retrieve them during the waitforssh step\n         shell: bash\n         run: |\n-          if [ \"${{ secrets[format('{0}_{1}', github.actor, 'SLACK_ID')] }}\" != \"\" ]; then\n-            echo \"SLACKCHANNEL=${{ secrets[format('{0}_{1}', github.actor, 'SLACK_ID')] }}\" >> $GITHUB_ENV\n+          echo \"${{ github.actor }}\"\n+          github_actor=${{ github.actor }}\n+          github_actor=${github_actor/'-'/'_'}\n+          echo \"$github_actor\"\n+          echo \"github_actor=$github_actor\" >> $GITHUB_ENV\n+\n+      - name: Store Slack infos\n+        #because the SSH can be enabled dynamically if the workflow failed, so we need to store slack infos to be able to retrieve them during the waitforssh step\n+        shell: bash\n+        run: |\n+          echo \"${{ env.github_actor }}\"\n+          if [ \"${{ secrets[format('{0}_{1}', env.github_actor, 'SLACK_ID')] }}\" != \"\" ]; then\n+            echo \"SLACKCHANNEL=${{ secrets[format('{0}_{1}', env.github_actor, 'SLACK_ID')] }}\" >> $GITHUB_ENV\n           else\n             echo \"SLACKCHANNEL=${{ secrets.SLACK_CIFEEDBACK_CHANNEL }}\" >> $GITHUB_ENV\n           fi"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 13,
        "deletions": 2
    }
}