{
    "author": "gante",
    "message": "[dependencies] Update `datasets` pin (#39500)\n\n* pyarrow pin\n\n* make fixup\n\n* test?\n\n* like this?\n\n* like this?\n\n* like this?\n\n* datasets pin\n\n* comment",
    "sha": "328ca9cf1d15c0737f31c718071802584186aae8",
    "files": [
        {
            "sha": "5315d4ef6d45d3056b3d03a50e5d45d8f7643ef5",
            "filename": ".github/workflows/build_documentation.yml",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/328ca9cf1d15c0737f31c718071802584186aae8/.github%2Fworkflows%2Fbuild_documentation.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/328ca9cf1d15c0737f31c718071802584186aae8/.github%2Fworkflows%2Fbuild_documentation.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fbuild_documentation.yml?ref=328ca9cf1d15c0737f31c718071802584186aae8",
            "patch": "@@ -18,6 +18,10 @@ jobs:\n       notebook_folder: transformers_doc\n       languages: ar de en es fr hi it ko pt tr zh ja te\n       custom_container: huggingface/transformers-doc-builder\n+      # Temporary pin to work around datasets exception in the docbuilder.Remove after docker images and main have\n+      # the right dependencies (which **should** be the case by 2025-07-20). See\n+      # https://github.com/huggingface/transformers/actions/runs/16365952006/job/46243081358?pr=38545\n+      pre_command: uv pip install datasets>=2.15.0\n     secrets:\n       token: ${{ secrets.HUGGINGFACE_PUSH }}\n       hf_token: ${{ secrets.HF_DOC_BUILD_PUSH }}"
        },
        {
            "sha": "91bdac233e80bac624c1c22de34a9b1e5db1770b",
            "filename": ".github/workflows/build_pr_documentation.yml",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/huggingface/transformers/blob/328ca9cf1d15c0737f31c718071802584186aae8/.github%2Fworkflows%2Fbuild_pr_documentation.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/328ca9cf1d15c0737f31c718071802584186aae8/.github%2Fworkflows%2Fbuild_pr_documentation.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fbuild_pr_documentation.yml?ref=328ca9cf1d15c0737f31c718071802584186aae8",
            "patch": "@@ -15,6 +15,7 @@ jobs:\n       pr_number: ${{ github.event.number }}\n       package: transformers\n       languages: en\n-      # temporary pin to work around datasets exception in the docbuilder. See\n+      # Temporary pin to work around datasets exception in the docbuilder. Remove after docker images and main have\n+      # the right dependencies (which **should** be the case by 2025-07-20). See\n       # https://github.com/huggingface/transformers/actions/runs/16365952006/job/46243081358?pr=38545\n-      pre_command: uv pip install pyarrow==20.0.0\n+      pre_command: uv pip install datasets>=2.15.0"
        },
        {
            "sha": "f91730d068762f2d9d7ce3abd8a3a24d61d73894",
            "filename": "setup.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/328ca9cf1d15c0737f31c718071802584186aae8/setup.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/328ca9cf1d15c0737f31c718071802584186aae8/setup.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/setup.py?ref=328ca9cf1d15c0737f31c718071802584186aae8",
            "patch": "@@ -103,7 +103,7 @@\n     \"codecarbon>=2.8.1\",\n     \"cookiecutter==1.7.3\",\n     \"dataclasses\",\n-    \"datasets!=2.5.0\",\n+    \"datasets>=2.15.0\",  # We need either this pin or pyarrow<21.0.0\n     \"deepspeed>=0.9.3\",\n     \"diffusers\",\n     \"dill<0.3.5\","
        },
        {
            "sha": "30df574e111bbe09852d96d36e21af0ff95595d6",
            "filename": "src/transformers/dependency_versions_table.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/328ca9cf1d15c0737f31c718071802584186aae8/src%2Ftransformers%2Fdependency_versions_table.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/328ca9cf1d15c0737f31c718071802584186aae8/src%2Ftransformers%2Fdependency_versions_table.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fdependency_versions_table.py?ref=328ca9cf1d15c0737f31c718071802584186aae8",
            "patch": "@@ -10,7 +10,7 @@\n     \"codecarbon\": \"codecarbon>=2.8.1\",\n     \"cookiecutter\": \"cookiecutter==1.7.3\",\n     \"dataclasses\": \"dataclasses\",\n-    \"datasets\": \"datasets!=2.5.0\",\n+    \"datasets\": \"datasets>=2.15.0\",\n     \"deepspeed\": \"deepspeed>=0.9.3\",\n     \"diffusers\": \"diffusers\",\n     \"dill\": \"dill<0.3.5\","
        }
    ],
    "stats": {
        "total": 13,
        "additions": 9,
        "deletions": 4
    }
}