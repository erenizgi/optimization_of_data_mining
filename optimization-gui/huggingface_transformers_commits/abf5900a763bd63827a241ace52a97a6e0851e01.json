{
    "author": "vasqu",
    "message": "[`Tests`] Fixup duplicated mrope logic (#40592)\n\ncleanup duplicated logic",
    "sha": "abf5900a763bd63827a241ace52a97a6e0851e01",
    "files": [
        {
            "sha": "7b6ec1048a800774654b8b2b723e05eb7deddc6b",
            "filename": "tests/test_modeling_common.py",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/huggingface/transformers/blob/abf5900a763bd63827a241ace52a97a6e0851e01/tests%2Ftest_modeling_common.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/abf5900a763bd63827a241ace52a97a6e0851e01/tests%2Ftest_modeling_common.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Ftest_modeling_common.py?ref=abf5900a763bd63827a241ace52a97a6e0851e01",
            "patch": "@@ -4792,15 +4792,6 @@ def update_config_headdim(config, requested_dim):\n                 head_dim = head_dim if head_dim is not None else config.hidden_size // config.num_attention_heads\n                 config.hidden_size *= max(requested_dim // head_dim, 1)\n \n-                # Some models use 3D RoPE where the sum of RoPE sections has to be equal to head dim\n-                if (\n-                    getattr(config, \"rope_scaling\", None) is not None\n-                    and config.rope_scaling.get(\"mrope_section\") is not None\n-                ):\n-                    mrope_section = config.rope_scaling[\"mrope_section\"]\n-                    mutiplier = max(requested_dim // head_dim, 1)\n-                    config.rope_scaling = {\"type\": \"default\", \"mrope_section\": [i * mutiplier for i in mrope_section]}\n-\n             if (\n                 getattr(config, \"decoder_hidden_size\", None) is not None\n                 and getattr(config, \"decoder_num_attention_heads\", None) is not None"
        }
    ],
    "stats": {
        "total": 9,
        "additions": 0,
        "deletions": 9
    }
}