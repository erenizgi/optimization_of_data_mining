{
    "author": "stevhliu",
    "message": "[doctest] Fixes (#35863)\n\ndoctest fixes",
    "sha": "f11f57c92579aa311dbde5267bc0d8d6f2545f7b",
    "files": [
        {
            "sha": "eb5149d2faa314ceeae8a675c8c6b51ae7b1afaf",
            "filename": "docs/source/en/agents_advanced.md",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fagents_advanced.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fagents_advanced.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fagents_advanced.md?ref=f11f57c92579aa311dbde5267bc0d8d6f2545f7b",
            "patch": "@@ -162,7 +162,7 @@ agent.run(\n improved_prompt could be \"A bright blue space suit wearing rabbit, on the surface of the moon, under a bright orange sunset, with the Earth visible in the background\"\n \n Now that I have improved the prompt, I can use the image generator tool to generate an image based on this prompt.\n->>> Agent is executing the code below:\n+=== Agent is executing the code below:\n image = image_generator(prompt=\"A bright blue space suit wearing rabbit, on the surface of the moon, under a bright orange sunset, with the Earth visible in the background\")\n final_answer(image)\n ```"
        },
        {
            "sha": "3581487e130fb2eb2d65e4d48c45305ad8066676",
            "filename": "docs/source/en/chat_templating.md",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fchat_templating.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fchat_templating.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fchat_templating.md?ref=f11f57c92579aa311dbde5267bc0d8d6f2545f7b",
            "patch": "@@ -39,7 +39,7 @@ Let's make this concrete with a quick example using the `mistralai/Mistral-7B-In\n ... ]\n \n >>> tokenizer.apply_chat_template(chat, tokenize=False)\n-\"<s>[INST] Hello, how are you? [/INST]I'm doing great. How can I help you today?</s> [INST] I'd like to show off how chat templating works! [/INST]\"\n+\"<s> [INST] Hello, how are you? [/INST] I'm doing great. How can I help you today?</s> [INST] I'd like to show off how chat templating works! [/INST]\"\n ```\n \n Notice how the tokenizer has added the control tokens [INST] and [/INST] to indicate the start and end of"
        },
        {
            "sha": "99049cceef34201fa965d6ef0046dde133aa0ae9",
            "filename": "docs/source/en/generation_strategies.md",
            "status": "modified",
            "additions": 10,
            "deletions": 11,
            "changes": 21,
            "blob_url": "https://github.com/huggingface/transformers/blob/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fgeneration_strategies.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fgeneration_strategies.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fgeneration_strategies.md?ref=f11f57c92579aa311dbde5267bc0d8d6f2545f7b",
            "patch": "@@ -231,7 +231,7 @@ to check if the text is machine-generated (outputs `True` for machine-generated\n >>> detector = WatermarkDetector(model_config=model.config, device=\"cpu\", watermarking_config=watermarking_config)\n >>> detection_out = detector(out, return_dict=True)\n >>> detection_out.prediction\n-array([True, True])\n+array([ True,  True])\n ```\n \n \n@@ -269,7 +269,7 @@ dimension you can act upon, in addition to selecting a decoding strategy. Popula\n >>> model = AutoModelForCausalLM.from_pretrained(checkpoint)\n >>> outputs = model.generate(**inputs)\n >>> tokenizer.batch_decode(outputs, skip_special_tokens=True)\n-['I look forward to seeing you all again!\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n']\n+['I look forward to seeing you all again!\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n']\n ```\n \n ### Contrastive search\n@@ -445,7 +445,7 @@ To enable assisted decoding, set the `assistant_model` argument with a model.\n >>> assistant_model = AutoModelForCausalLM.from_pretrained(assistant_checkpoint)\n >>> outputs = model.generate(**inputs, assistant_model=assistant_model)\n >>> tokenizer.batch_decode(outputs, skip_special_tokens=True)\n-['Alice and Bob are sitting in a bar. Alice is drinking a beer and Bob is drinking a']\n+['Alice and Bob are sitting in a bar. Alice is drinking a beer and Bob is drinking a glass of wine.']\n ```\n \n <Tip>\n@@ -461,7 +461,7 @@ If you're using a `pipeline` object, all you need to do is to pass the assistant\n ...     model=\"meta-llama/Llama-3.1-8B\",\n ...     assistant_model=\"meta-llama/Llama-3.2-1B\",  # This extra line is all that's needed, also works with UAD\n ...     torch_dtype=torch.bfloat16\n->>> )\n+... )\n >>> pipe_output = pipe(\"Once upon a time, \", max_new_tokens=50, do_sample=False)\n >>> pipe_output[0][\"generated_text\"]\n 'Once upon a time, 3D printing was a niche technology that was only'\n@@ -488,7 +488,7 @@ just like in multinomial sampling. However, in assisted decoding, reducing the t\n >>> assistant_model = AutoModelForCausalLM.from_pretrained(assistant_checkpoint)\n >>> outputs = model.generate(**inputs, assistant_model=assistant_model, do_sample=True, temperature=0.5)\n >>> tokenizer.batch_decode(outputs, skip_special_tokens=True)\n-['Alice and Bob, a couple of friends of mine, who are both in the same office as']\n+['Alice and Bob are two people who are very different, but they are both very good at what they do. Alice']\n ```\n \n We recommend to install `scikit-learn` library to enhance the candidate generation strategy and achieve additional speedup.\n@@ -518,7 +518,7 @@ to ensure the new tokens include the correct prompt suffix.\n >>> assistant_model = AutoModelForCausalLM.from_pretrained(assistant_checkpoint)\n >>> outputs = model.generate(**inputs, assistant_model=assistant_model, tokenizer=tokenizer, assistant_tokenizer=assistant_tokenizer)\n >>> tokenizer.batch_decode(outputs, skip_special_tokens=True)\n-['Alice and Bob are sitting in a bar. Alice is drinking a beer and Bob is drinking a']\n+['Alice and Bob are playing a game. Alice has a set of $n$ integers $a_1, a']\n ```\n \n #### Prompt Lookup\n@@ -547,7 +547,7 @@ If the model you're using was trained to do early exit, you can pass\n >>> model = AutoModelForCausalLM.from_pretrained(checkpoint)\n >>> outputs = model.generate(**inputs, assistant_early_exit=4, do_sample=False, max_new_tokens=20)\n >>> tokenizer.batch_decode(outputs, skip_special_tokens=True)\n-['Alice and Bob are sitting in a bar. Alice is drinking a beer and Bob is drinking a']\n+['Alice and Bob are playing a game. Alice has a set of $n$ integers $a_1, a']\n ```\n \n ### DoLa Decoding\n@@ -571,10 +571,9 @@ See the following examples for DoLa decoding with the 32-layer LLaMA-7B model.\n >>> import torch\n >>> from accelerate.test_utils.testing import get_backend\n \n->>> tokenizer = AutoTokenizer.from_pretrained(\"huggyllama/llama-7b\")\n->>> model = AutoModelForCausalLM.from_pretrained(\"huggyllama/llama-7b\", torch_dtype=torch.float16)\n >>> device, _, _ = get_backend() # automatically detects the underlying device type (CUDA, CPU, XPU, MPS, etc.)\n->>> model.to(device)\n+>>> tokenizer = AutoTokenizer.from_pretrained(\"huggyllama/llama-7b\")\n+>>> model = AutoModelForCausalLM.from_pretrained(\"huggyllama/llama-7b\", torch_dtype=torch.float16).to(device)\n >>> set_seed(42)\n \n >>> text = \"On what date was the Declaration of Independence officially signed?\"\n@@ -593,7 +592,7 @@ See the following examples for DoLa decoding with the 32-layer LLaMA-7B model.\n # DoLa decoding with contrasting specific layers (layers 28 and 30)\n >>> dola_custom_output = model.generate(**inputs, do_sample=False, max_new_tokens=50, dola_layers=[28,30], repetition_penalty=1.2)\n >>> tokenizer.batch_decode(dola_custom_output[:, inputs.input_ids.shape[-1]:], skip_special_tokens=True)\n-['\\nIt was officially signed on 2 August 1776, when 56 members of the Second Continental Congress, representing the original 13 American colonies, voted unanimously for the resolution for independence. The 2']\n+['\\nIn 1891, when he was 54 years old, John Jacob Astor founded his empire. He opened a one-man business and spent the next 27 years working 10-hour days. When']\n ```\n \n #### Understanding the `dola_layers` argument"
        },
        {
            "sha": "ed6fb9035e0c343f684d0664bc2362e5a1f8d321",
            "filename": "docs/source/en/kv_cache.md",
            "status": "modified",
            "additions": 35,
            "deletions": 33,
            "changes": 68,
            "blob_url": "https://github.com/huggingface/transformers/blob/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fkv_cache.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fkv_cache.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fkv_cache.md?ref=f11f57c92579aa311dbde5267bc0d8d6f2545f7b",
            "patch": "@@ -56,7 +56,7 @@ More concretely, key-value cache acts as a memory bank for these generative mode\n   >>> import torch\n   >>> from transformers import AutoTokenizer, AutoModelForCausalLM, DynamicCache\n \n-  >>> model_id = \"meta-llama/Llama-2-7b-chat-hf\"\n+  >>> model_id = \"TinyLlama/TinyLlama-1.1B-Chat-v1.0\"\n   >>> model = AutoModelForCausalLM.from_pretrained(model_id, torch_dtype=torch.bfloat16, device_map=\"cuda:0\")\n   >>> tokenizer = AutoTokenizer.from_pretrained(model_id)\n \n@@ -82,7 +82,13 @@ More concretely, key-value cache acts as a memory bank for these generative mode\n   ...     cache_position = cache_position[-1:] + 1 # add one more position for the next token\n \n   >>> print(tokenizer.batch_decode(generated_ids, skip_special_tokens=True)[0])\n-  \"[INST] Hello, what's your name. [/INST]  Hello! My name is LLaMA,\"\n+  ```\n+  ```txt\n+  <|user|>\n+  Hello, what's your name. \n+  <|assistant|>\n+  My name is Sarah. \n+  <|\n   ```\n \n </details>\n@@ -132,17 +138,13 @@ Cache quantization can be detrimental in terms of latency if the context length\n >>> import torch\n >>> from transformers import AutoTokenizer, AutoModelForCausalLM\n \n->>> tokenizer = AutoTokenizer.from_pretrained(\"meta-llama/Llama-2-7b-chat-hf\")\n->>> model = AutoModelForCausalLM.from_pretrained(\"meta-llama/Llama-2-7b-chat-hf\", torch_dtype=torch.float16).to(\"cuda:0\")\n+>>> tokenizer = AutoTokenizer.from_pretrained(\"TinyLlama/TinyLlama-1.1B-Chat-v1.0\")\n+>>> model = AutoModelForCausalLM.from_pretrained(\"TinyLlama/TinyLlama-1.1B-Chat-v1.0\", torch_dtype=torch.float16).to(\"cuda:0\")\n >>> inputs = tokenizer(\"I like rock music because\", return_tensors=\"pt\").to(model.device)\n \n >>> out = model.generate(**inputs, do_sample=False, max_new_tokens=20, cache_implementation=\"quantized\", cache_config={\"nbits\": 4, \"backend\": \"quanto\"})\n >>> print(tokenizer.batch_decode(out, skip_special_tokens=True)[0])\n-I like rock music because it's loud and energetic. It's a great way to express myself and rel\n-\n->>> out = model.generate(**inputs, do_sample=False, max_new_tokens=20)\n->>> print(tokenizer.batch_decode(out, skip_special_tokens=True)[0])\n-I like rock music because it's loud and energetic. I like to listen to it when I'm feeling\n+I like rock music because it's a great way to express myself. I like the way it makes me feel, the\n ```\n \n ### Offloaded Cache\n@@ -231,14 +233,14 @@ For more examples with Static Cache and JIT compilation, take a look at [StaticC\n >>> import torch\n >>> from transformers import AutoTokenizer, AutoModelForCausalLM\n \n->>> tokenizer = AutoTokenizer.from_pretrained(\"meta-llama/Llama-2-7b-chat-hf\")\n->>> model = AutoModelForCausalLM.from_pretrained(\"meta-llama/Llama-2-7b-chat-hf\", torch_dtype=torch.float16, device_map=\"auto\")\n+>>> tokenizer = AutoTokenizer.from_pretrained(\"TinyLlama/TinyLlama-1.1B-Chat-v1.0\")\n+>>> model = AutoModelForCausalLM.from_pretrained(\"TinyLlama/TinyLlama-1.1B-Chat-v1.0\", torch_dtype=torch.float16, device_map=\"auto\")\n >>> inputs = tokenizer(\"Hello, my name is\", return_tensors=\"pt\").to(model.device)\n \n >>> # simply pass the cache implementation=\"static\"\n >>> out = model.generate(**inputs, do_sample=False, max_new_tokens=20, cache_implementation=\"static\")\n >>> tokenizer.batch_decode(out, skip_special_tokens=True)[0]\n-\"Hello, my name is [Your Name], and I am a [Your Profession] with [Number of Years] of\"\n+\"Hello, my name is [Your Name] and I am a [Your Position] at [Your Company]. I am writing\"\n ```\n \n \n@@ -256,7 +258,7 @@ This will use the [`~OffloadedStaticCache`] implementation instead.\n >>> model = AutoModelForCausalLM.from_pretrained(\"meta-llama/Llama-2-7b-chat-hf\", torch_dtype=torch.float16, device_map=\"auto\")\n >>> inputs = tokenizer(\"Hello, my name is\", return_tensors=\"pt\").to(model.device)\n \n->>> # simply pass the cache implementation=\"static\"\n+>>> # simply pass the cache implementation=\"offloaded_static\"\n >>> out = model.generate(**inputs, do_sample=False, max_new_tokens=20, cache_implementation=\"offloaded_static\")\n >>> tokenizer.batch_decode(out, skip_special_tokens=True)[0]\n \"Hello, my name is [Your Name], and I am a [Your Profession] with [Number of Years] of\"\n@@ -275,14 +277,14 @@ Note that you can use this cache only for models that support sliding window, e.\n >>> import torch\n >>> from transformers import AutoTokenizer, AutoModelForCausalLM, SinkCache\n \n->>> tokenizer = AutoTokenizer.from_pretrained(\"mistralai/Mistral-7B-v0.1\")\n->>> model = AutoModelForCausalLM.from_pretrained(\"mistralai/Mistral-7B-v0.1\", torch_dtype=torch.float16).to(\"cuda:0\")\n+>>> tokenizer = AutoTokenizer.from_pretrained(\"teknium/OpenHermes-2.5-Mistral-7B\")\n+>>> model = AutoModelForCausalLM.from_pretrained(\"teknium/OpenHermes-2.5-Mistral-7B\", torch_dtype=torch.float16).to(\"cuda:0\")\n >>> inputs = tokenizer(\"Yesterday I was on a rock concert and.\", return_tensors=\"pt\").to(model.device)\n \n >>> # can be used by passing in cache implementation\n >>> out = model.generate(**inputs, do_sample=False, max_new_tokens=30, cache_implementation=\"sliding_window\")\n >>> tokenizer.batch_decode(out, skip_special_tokens=True)[0]\n-\"Yesterday I was on a rock concert and. I was so excited to see my favorite band. I was so excited that I was jumping up and down and screaming. I was so excited that I\"\n+\"Yesterday I was on a rock concert and. I was so excited to see my favorite band perform live. I was so happy that I could hardly contain myself. I was jumping up and down and\"\n ```\n \n ### Sink Cache\n@@ -295,16 +297,16 @@ Unlike other cache classes, this one can't be used directly by indicating a `cac\n >>> import torch\n >>> from transformers import AutoTokenizer, AutoModelForCausalLM, SinkCache\n \n->>> tokenizer = AutoTokenizer.from_pretrained(\"meta-llama/Llama-2-7b-chat-hf\")\n->>> model = AutoModelForCausalLM.from_pretrained(\"meta-llama/Llama-2-7b-chat-hf\", torch_dtype=torch.float16).to(\"cuda:0\")\n+>>> tokenizer = AutoTokenizer.from_pretrained(\"TinyLlama/TinyLlama-1.1B-Chat-v1.0\")\n+>>> model = AutoModelForCausalLM.from_pretrained(\"TinyLlama/TinyLlama-1.1B-Chat-v1.0\", torch_dtype=torch.float16).to(\"cuda:0\")\n >>> inputs = tokenizer(\"This is a long story about unicorns, fairies and magic.\", return_tensors=\"pt\").to(model.device)\n \n >>> # get our cache, specify number of sink tokens and window size\n >>> # Note that window size already includes sink tokens, so has to be larger\n >>> past_key_values = SinkCache(window_length=256, num_sink_tokens=4)\n >>> out = model.generate(**inputs, do_sample=False, max_new_tokens=30, past_key_values=past_key_values)\n >>> tokenizer.batch_decode(out, skip_special_tokens=True)[0]\n-\"This is a long story about unicorns, fairies and magic. It is a fantasy world where unicorns and fairies live together in harmony. The story follows a young girl named Lily\"\n+\"This is a long story about unicorns, fairies and magic. It is a story about a young girl named Lily who discovers that she has the power to control the elements. She learns that she can\"\n ```\n \n ### Encoder-Decoder Cache\n@@ -332,15 +334,15 @@ In case you are using Sink Cache, you have to crop your inputs to that maximum l\n >>> import torch\n >>> from transformers import AutoTokenizer,AutoModelForCausalLM\n >>> from transformers.cache_utils import (\n->>>     DynamicCache,\n->>>     SinkCache,\n->>>     StaticCache,\n->>>     SlidingWindowCache,\n->>>     QuantoQuantizedCache,\n->>>     QuantizedCacheConfig,\n->>> )\n-\n->>> model_id = \"meta-llama/Llama-2-7b-chat-hf\"\n+...    DynamicCache,\n+...    SinkCache,\n+...    StaticCache,\n+...    SlidingWindowCache,\n+...    QuantoQuantizedCache,\n+...    QuantizedCacheConfig,\n+... )\n+\n+>>> model_id = \"TinyLlama/TinyLlama-1.1B-Chat-v1.0\"\n >>> model = AutoModelForCausalLM.from_pretrained(model_id, torch_dtype=torch.bfloat16, device_map='auto')\n >>> tokenizer = AutoTokenizer.from_pretrained(model_id)\n \n@@ -363,7 +365,7 @@ In case you are using Sink Cache, you have to crop your inputs to that maximum l\n ...     messages.append({\"role\": \"assistant\", \"content\": completion})\n \n print(messages)\n-[{'role': 'user', 'content': \"Hello, what's your name?\"}, {'role': 'assistant', 'content': \" Hello! My name is LLaMA, I'm a large language model trained by a team of researcher at Meta AI. ðŸ˜Š\"}, {'role': 'user', 'content': 'Btw, yesterday I was on a rock concert.'}, {'role': 'assistant', 'content': ' Oh, cool! That sounds like a lot of fun! ðŸŽ‰ Did you enjoy the concert? What was the band like? ðŸ¤”'}]\n+[{'role': 'user', 'content': \"Hello, what's your name?\"}, {'role': 'assistant', 'content': \"Hello, I'm AI.\"}, {'role': 'user', 'content': 'Btw, yesterday I was on a rock concert.'}, {'role': 'assistant', 'content': \"I'm sorry to hear that you were on a rock concert yesterday. It sounds like a fun experience, but I'm not capable of experiencing music or concerts. However, I can provide you with some information about rock music and its history. Rock music emerged in the 1950s and 1960s in the United States and Britain, and it quickly gained popularity around the world. Some of the most famous rock bands of all time include The Beatles, The Rolling Stones, Led Zeppelin, and Pink Floyd. Rock music has a distinct sound and style, with elements of blues, country, and folk music. It often features guitar solos, heavy bass lines, and drums. Rock music has had a significant impact on popular culture, influencing genres such as punk rock, heavy metal, and alternative rock.\"}]\n ```\n \n \n@@ -376,7 +378,7 @@ Sometimes you would want to first fill-in cache object with key/values for certa\n >>> import torch\n >>> from transformers import AutoModelForCausalLM, AutoTokenizer, DynamicCache, StaticCache\n \n->>> model_id = \"meta-llama/Llama-2-7b-chat-hf\"\n+>>> model_id = \"TinyLlama/TinyLlama-1.1B-Chat-v1.0\"\n >>> model = AutoModelForCausalLM.from_pretrained(model_id, torch_dtype=torch.bfloat16, device_map=\"cuda\")\n >>> tokenizer = AutoTokenizer.from_pretrained(model_id)\n \n@@ -400,7 +402,7 @@ Sometimes you would want to first fill-in cache object with key/values for certa\n ...     responses.append(response)\n \n >>> print(responses)\n-['<s> You are a helpful assistant. Help me to write a blogpost about travelling.\\n\\nTitle: The Ultimate Guide to Travelling: Tips, Tricks, and', '<s> You are a helpful assistant. What is the capital of France?\\n\\nYes, the capital of France is Paris.</s>']\n+['<s> You are a helpful assistant. Help me to write a blogpost about travelling.  I am excited to share my experiences with you.  I have been traveling for the past', '<s> You are a helpful assistant. What is the capital of France? \\n\\nAnswer: Paris is the capital of France.</s>']\n ```\n \n \n@@ -414,8 +416,8 @@ this legacy format, you can seamlessly convert it to a `DynamicCache` and back.\n >>> import torch\n >>> from transformers import AutoTokenizer, AutoModelForCausalLM, DynamicCache\n \n->>> tokenizer = AutoTokenizer.from_pretrained(\"meta-llama/Llama-2-7b-chat-hf\")\n->>> model = AutoModelForCausalLM.from_pretrained(\"meta-llama/Llama-2-7b-chat-hf\", torch_dtype=torch.float16, device_map=\"auto\")\n+>>> tokenizer = AutoTokenizer.from_pretrained(\"TinyLlama/TinyLlama-1.1B-Chat-v1.0\")\n+>>> model = AutoModelForCausalLM.from_pretrained(\"TinyLlama/TinyLlama-1.1B-Chat-v1.0\", torch_dtype=torch.float16, device_map=\"auto\")\n >>> inputs = tokenizer(\"Hello, my name is\", return_tensors=\"pt\").to(model.device)\n \n >>> # `return_dict_in_generate=True` is required to return the cache. `return_legacy_cache` forces the returned cache"
        },
        {
            "sha": "1268b2e7cf9c71c55ffcf7795ebb7a214a51ce37",
            "filename": "docs/source/en/model_doc/glm.md",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fglm.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fglm.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fmodel_doc%2Fglm.md?ref=f11f57c92579aa311dbde5267bc0d8d6f2545f7b",
            "patch": "@@ -56,7 +56,7 @@ In the following, we demonstrate how to use `glm-4-9b-chat` for the inference. N\n >>> from transformers import AutoModelForCausalLM, AutoTokenizer\n >>> device = \"cuda\" # the device to load the model onto\n \n->>> model = AutoModelForCausalLM.from_pretrained(\"THUDM/glm-4-9b-chat\", device_map=\"auto\")\n+>>> model = AutoModelForCausalLM.from_pretrained(\"THUDM/glm-4-9b-chat\", device_map=\"auto\", trust_remote_code=True)\n >>> tokenizer = AutoTokenizer.from_pretrained(\"THUDM/glm-4-9b-chat\")\n \n >>> prompt = \"Give me a short introduction to large language model.\""
        },
        {
            "sha": "1b9104eb963e12c635afec39cf2208be81ebff1f",
            "filename": "docs/source/en/model_doc/grounding-dino.md",
            "status": "modified",
            "additions": 9,
            "deletions": 8,
            "changes": 17,
            "blob_url": "https://github.com/huggingface/transformers/blob/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fgrounding-dino.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fgrounding-dino.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fmodel_doc%2Fgrounding-dino.md?ref=f11f57c92579aa311dbde5267bc0d8d6f2545f7b",
            "patch": "@@ -64,18 +64,19 @@ Here's how to use the model for zero-shot object detection:\n \n >>> results = processor.post_process_grounded_object_detection(\n ...     outputs,\n-...     threshold=0.4,\n+...     inputs.input_ids,\n+...     box_threshold=0.4,\n ...     text_threshold=0.3,\n-...     target_sizes=[(image.height, image.width)]\n+...     target_sizes=[image.size[::-1]]\n ... )\n->>> # Retrieve the first image result\n+\n+# Retrieve the first image result\n >>> result = results[0]\n->>> for box, score, text_label in zip(result[\"boxes\"], result[\"scores\"], result[\"text_labels\"]):\n+>>> for box, score, labels in zip(result[\"boxes\"], result[\"scores\"], result[\"labels\"]):\n ...     box = [round(x, 2) for x in box.tolist()]\n-...     print(f\"Detected {text_label} with confidence {round(score.item(), 3)} at location {box}\")\n-Detected a cat with confidence 0.479 at location [344.7, 23.11, 637.18, 374.28]\n-Detected a cat with confidence 0.438 at location [12.27, 51.91, 316.86, 472.44]\n-Detected a remote control with confidence 0.478 at location [38.57, 70.0, 176.78, 118.18]\n+...     print(f\"Detected {labels} with confidence {round(score.item(), 3)} at location {box}\")\n+Detected a cat with confidence 0.468 at location [344.78, 22.9, 637.3, 373.62]\n+Detected a cat with confidence 0.426 at location [11.74, 51.55, 316.51, 473.22]\n ```\n \n ## Grounded SAM"
        },
        {
            "sha": "41a23e3da81b340fe98ba4f22fa602931fcfae98",
            "filename": "docs/source/en/model_doc/llava_onevision.md",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fllava_onevision.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fllava_onevision.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fmodel_doc%2Fllava_onevision.md?ref=f11f57c92579aa311dbde5267bc0d8d6f2545f7b",
            "patch": "@@ -81,7 +81,7 @@ text_prompt = processor.apply_chat_template(conversation, add_generation_prompt=\n \n # Note that the template simply formats your prompt, you still have to tokenize it and obtain pixel values for your images\n print(text_prompt)\n->>> \"<|im_start|>user\\n<image>What is shown in this image?<|im_end|>\\n<|im_start|>assistant\\nPage showing the list of options.<|im_end|>\"\n+'<|im_start|>user\\n<image>What is shown in this image?<|im_end|>\\n<|im_start|>assistant\\nPage showing the list of options.<|im_end|>'\n ```\n \n This model was contributed by [RaushanTurganbay](https://huggingface.co/RaushanTurganbay)."
        },
        {
            "sha": "2e2c5655de45160c87a3d08adb1a7c7dd48e3ce2",
            "filename": "docs/source/en/model_doc/moshi.md",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/huggingface/transformers/blob/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fmoshi.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fmoshi.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fmodel_doc%2Fmoshi.md?ref=f11f57c92579aa311dbde5267bc0d8d6f2545f7b",
            "patch": "@@ -110,9 +110,14 @@ To follow the example of the following image, `\"Hello, I'm Moshi\"` could be tran\n >>> from datasets import load_dataset, Audio\n >>> import torch, math\n >>> from transformers import MoshiForConditionalGeneration, AutoFeatureExtractor, AutoTokenizer\n->>> librispeech_dummy = load_dataset(\"hf-internal-testing/librispeech_asr_dummy\", \"clean\", split=\"validation\")\n \n \n+>>> librispeech_dummy = load_dataset(\"hf-internal-testing/librispeech_asr_dummy\", \"clean\", split=\"validation\")\n+>>> feature_extractor = AutoFeatureExtractor.from_pretrained(\"kyutai/moshiko-pytorch-bf16\")\n+>>> tokenizer = AutoTokenizer.from_pretrained(\"kyutai/moshiko-pytorch-bf16\")\n+>>> device = \"cuda\"\n+>>> dtype = torch.bfloat16\n+\n >>> # prepare user input audio \n >>> librispeech_dummy = librispeech_dummy.cast_column(\"audio\", Audio(sampling_rate=feature_extractor.sampling_rate))\n >>> audio_sample = librispeech_dummy[-1][\"audio\"][\"array\"]"
        },
        {
            "sha": "fe68a6ae76b2cca3c555853b865349c4679bd429",
            "filename": "docs/source/en/model_doc/phi3.md",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/huggingface/transformers/blob/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fphi3.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fphi3.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fmodel_doc%2Fphi3.md?ref=f11f57c92579aa311dbde5267bc0d8d6f2545f7b",
            "patch": "@@ -57,10 +57,7 @@ Phi-3 has been integrated in the development version (4.40.0.dev) of `transforme\n >>> outputs = model.generate(inputs, max_new_tokens=32)\n >>> text = tokenizer.batch_decode(outputs)[0]\n >>> print(text)\n-<s><|user|> \n-Can you provide ways to eat combinations of bananas and dragonfruits?<|end|> \n-<|assistant|> \n-Certainly! Bananas and dragonfruits can be combined in various delicious ways. Here are some ideas for eating combinations of bananas and\n+<|user|> Can you provide ways to eat combinations of bananas and dragonfruits?<|end|><|assistant|> Certainly! Bananas and dragonfruits can be combined in various delicious ways. Here are some creative ideas for incorporating both fruits\n ```\n \n ## Phi3Config"
        },
        {
            "sha": "486e58691f6d7c60a8c37cabd88b33eddba71664",
            "filename": "docs/source/en/model_doc/seamless_m4t.md",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fseamless_m4t.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fseamless_m4t.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fmodel_doc%2Fseamless_m4t.md?ref=f11f57c92579aa311dbde5267bc0d8d6f2545f7b",
            "patch": "@@ -52,7 +52,7 @@ Here is how to use the processor to process text and audio:\n ```python\n >>> # let's load an audio sample from an Arabic speech corpus\n >>> from datasets import load_dataset\n->>> dataset = load_dataset(\"arabic_speech_corpus\", split=\"test\", streaming=True)\n+>>> dataset = load_dataset(\"arabic_speech_corpus\", split=\"test\", streaming=True, trust_remote_code=True)\n >>> audio_sample = next(iter(dataset))[\"audio\"]\n \n >>> # now, process it"
        },
        {
            "sha": "c6a2ec4b51c26288ed516e8c185ed653ede7941f",
            "filename": "docs/source/en/model_doc/seamless_m4t_v2.md",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fseamless_m4t_v2.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fseamless_m4t_v2.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fmodel_doc%2Fseamless_m4t_v2.md?ref=f11f57c92579aa311dbde5267bc0d8d6f2545f7b",
            "patch": "@@ -52,7 +52,7 @@ Here is how to use the processor to process text and audio:\n ```python\n >>> # let's load an audio sample from an Arabic speech corpus\n >>> from datasets import load_dataset\n->>> dataset = load_dataset(\"arabic_speech_corpus\", split=\"test\", streaming=True)\n+>>> dataset = load_dataset(\"arabic_speech_corpus\", split=\"test\", streaming=True, trust_remote_code=True)\n >>> audio_sample = next(iter(dataset))[\"audio\"]\n \n >>> # now, process it"
        },
        {
            "sha": "56e168ab4734434873c3e373ca4026b67a5ef4c0",
            "filename": "docs/source/en/model_doc/siglip.md",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/huggingface/transformers/blob/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fsiglip.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fsiglip.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fmodel_doc%2Fsiglip.md?ref=f11f57c92579aa311dbde5267bc0d8d6f2545f7b",
            "patch": "@@ -86,7 +86,7 @@ If you want to do the pre- and postprocessing yourself, here's how to do that:\n >>> candidate_labels = [\"2 cats\", \"2 dogs\"]\n # follows the pipeline prompt template to get same results\n >>> texts = [f'This is a photo of {label}.' for label in candidate_labels]\n->>> # important: we pass `padding=max_length` since the model was trained with this\n+# important: we pass `padding=max_length` since the model was trained with this\n >>> inputs = processor(text=texts, images=image, padding=\"max_length\", return_tensors=\"pt\")\n \n >>> with torch.no_grad():\n@@ -95,7 +95,7 @@ If you want to do the pre- and postprocessing yourself, here's how to do that:\n >>> logits_per_image = outputs.logits_per_image\n >>> probs = torch.sigmoid(logits_per_image) # these are the probabilities\n >>> print(f\"{probs[0][0]:.1%} that image 0 is '{candidate_labels[0]}'\")\n-31.9% that image 0 is 'a photo of 2 cats'\n+19.8% that image 0 is '2 cats'\n ```\n \n ## Resources\n@@ -142,8 +142,7 @@ To load and run a model using Flash Attention 2, refer to the snippet below:\n # follows the pipeline prompt template to get same results\n >>> texts = [f'This is a photo of {label}.' for label in candidate_labels]\n # important: we pass `padding=max_length` since the model was trained with this\n->>> inputs = processor(text=texts, images=image, padding=\"max_length\", return_tensors=\"pt\")\n->>> inputs.to(device)\n+>>> inputs = processor(text=texts, images=image, padding=\"max_length\", return_tensors=\"pt\").to(device)\n \n >>> with torch.no_grad():\n ...     with torch.autocast(device):\n@@ -152,7 +151,7 @@ To load and run a model using Flash Attention 2, refer to the snippet below:\n >>> logits_per_image = outputs.logits_per_image\n >>> probs = torch.sigmoid(logits_per_image) # these are the probabilities\n >>> print(f\"{probs[0][0]:.1%} that image 0 is '{candidate_labels[0]}'\")\n-51.3% that image 0 is 'This is a photo of 2 cats.'\n+19.8% that image 0 is '2 cats'\n ```\n \n "
        },
        {
            "sha": "ecd068511e960d5ba368204b4edd2f60bd6c6fca",
            "filename": "docs/source/en/model_doc/zoedepth.md",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fzoedepth.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Fmodel_doc%2Fzoedepth.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fmodel_doc%2Fzoedepth.md?ref=f11f57c92579aa311dbde5267bc0d8d6f2545f7b",
            "patch": "@@ -70,7 +70,7 @@ Alternatively, one can also perform inference using the classes:\n >>> inputs = image_processor(images=image, return_tensors=\"pt\")\n \n >>> with torch.no_grad():   \n-...     outputs = model(pixel_values)\n+...     outputs = model(inputs)\n \n >>> # interpolate to original size and visualize the prediction\n >>> ## ZoeDepth dynamically pads the input image. Thus we pass the original image size as argument"
        },
        {
            "sha": "e06081a93d049d5620eb9102b99364b928e83892",
            "filename": "docs/source/en/task_summary.md",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/huggingface/transformers/blob/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Ftask_summary.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Ftask_summary.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Ftask_summary.md?ref=f11f57c92579aa311dbde5267bc0d8d6f2545f7b",
            "patch": "@@ -305,10 +305,7 @@ There are two types of language modeling:\n     ...     for pred in preds\n     ... ]\n     >>> preds\n-    [{'score': 0.2236,\n-      'token': 1761,\n-      'token_str': ' platform',\n-      'sequence': 'Hugging Face is a community-based open-source platform for machine learning.'}]\n+    [{'score': 0.224, 'token': 3944, 'token_str': ' tool', 'sequence': 'Hugging Face is a community-based open-source tool for machine learning.'}]\n     ```\n \n ## Multimodal"
        },
        {
            "sha": "146ec328df0c3fdacc9589c15c5d46b472ae8607",
            "filename": "docs/source/en/tasks/prompting.md",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/huggingface/transformers/blob/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Ftasks%2Fprompting.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/f11f57c92579aa311dbde5267bc0d8d6f2545f7b/docs%2Fsource%2Fen%2Ftasks%2Fprompting.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Ftasks%2Fprompting.md?ref=f11f57c92579aa311dbde5267bc0d8d6f2545f7b",
            "patch": "@@ -80,7 +80,7 @@ Run inference with decoder-only models with the `text-generation` pipeline:\n >>> prompt = \"Hello, I'm a language model\"\n \n >>> generator(prompt, max_length = 30)\n-[{'generated_text': \"Hello, I'm a language model programmer so you can use some of my stuff. But you also need some sort of a C program to run.\"}]\n+[{'generated_text': \"Hello, I'm a language model. Not a programming language at all: it's pretty simple.\\n\\nWhen I write a function, I mean\"}]\n ```\n \n To run inference with an encoder-decoder, use the `text2text-generation` pipeline:\n@@ -258,7 +258,7 @@ also be a suitable location for instructions. Typically, it's better to place th\n \n >>> for seq in sequences:\n ...     print(f\"{seq['generated_text']}\")\n-Permaculture is an ecological design mimicking natural ecosystems to meet basic needs and prepare for climate change. It is based on traditional knowledge and scientific understanding.\n+\"Permaculture is an ecological design method that mimics natural ecosystems' diversity, functionality, and resilience using modern technology and indigenous knowledge. It aims to help\"\n ```\n \n #### Question answering\n@@ -284,7 +284,7 @@ the leading word or phrase (`\"Answer:\"`) to nudge the model to start generating\n \n >>> for seq in sequences:\n ...     print(f\"Result: {seq['generated_text']}\")\n-Result: Modern tools often used to make gazpacho include\n+\"Result: Modern tools are used, such as immersion blenders\"\n ```\n \n #### Reasoning\n@@ -309,7 +309,7 @@ Let's try if we can make a model reason about a simple arithmetics task with a b\n >>> for seq in sequences:\n ...     print(f\"Result: {seq['generated_text']}\")\n Result: \n-There are a total of 5 groups, so there are 5 x 4=20 students in the class.\n+There are a total of 50 students in the class (5 groups x 4 students per group = 20 groups, and \n ```\n \n Correct! Let's increase the complexity a little and see if we can still get away with a basic prompt:"
        }
    ],
    "stats": {
        "total": 154,
        "additions": 77,
        "deletions": 77
    }
}