{
    "author": "zucchini-nlp",
    "message": "Paligemma: revert #36084 (#36113)\n\n* revert\r\n\r\n* type check",
    "sha": "c399921965d490845e1d171336343f2575e95397",
    "files": [
        {
            "sha": "9419275da6c5761f97cb612fe4b88e6f1ea1c6fb",
            "filename": "src/transformers/models/paligemma/processing_paligemma.py",
            "status": "modified",
            "additions": 12,
            "deletions": 2,
            "changes": 14,
            "blob_url": "https://github.com/huggingface/transformers/blob/c399921965d490845e1d171336343f2575e95397/src%2Ftransformers%2Fmodels%2Fpaligemma%2Fprocessing_paligemma.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/c399921965d490845e1d171336343f2575e95397/src%2Ftransformers%2Fmodels%2Fpaligemma%2Fprocessing_paligemma.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fpaligemma%2Fprocessing_paligemma.py?ref=c399921965d490845e1d171336343f2575e95397",
            "patch": "@@ -19,7 +19,7 @@\n from typing import List, Optional, Union\n \n from ...feature_extraction_utils import BatchFeature\n-from ...image_utils import ImageInput, is_valid_image, make_flat_list_of_images, make_nested_list_of_images\n+from ...image_utils import ImageInput, is_valid_image, make_flat_list_of_images\n from ...processing_utils import (\n     ImagesKwargs,\n     ProcessingKwargs,\n@@ -256,7 +256,17 @@ def __call__(\n                         )\n \n                 # make a nested list of lists to be able to iterate over the images and text below\n-                images = make_nested_list_of_images(images)\n+                if is_valid_image(images):\n+                    images = [[images]]\n+                elif isinstance(images, (list, tuple)) and is_valid_image(images[0]):\n+                    images = [[image] for image in images]\n+                elif not (\n+                    isinstance(images, (list, tuple))\n+                    and isinstance(images[0], (list, tuple))\n+                    and is_valid_image(images[0][0])\n+                ):\n+                    raise ValueError(\"images must be an image, list of images or list of list of images\")\n+\n                 input_strings = [\n                     build_string_from_input(\n                         prompt=prompt,"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 12,
        "deletions": 2
    }
}