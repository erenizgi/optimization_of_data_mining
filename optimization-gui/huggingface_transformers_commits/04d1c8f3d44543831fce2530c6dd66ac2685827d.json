{
    "author": "Cyrilvallez",
    "message": "Fix deta loading & dataclass (#40878)\n\n* fix\n\n* fix 2",
    "sha": "04d1c8f3d44543831fce2530c6dd66ac2685827d",
    "files": [
        {
            "sha": "c4f6f5c65dedc4e7a4d6e5151cff61226ea4a7ed",
            "filename": "src/transformers/models/deprecated/deta/modeling_deta.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/04d1c8f3d44543831fce2530c6dd66ac2685827d/src%2Ftransformers%2Fmodels%2Fdeprecated%2Fdeta%2Fmodeling_deta.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/04d1c8f3d44543831fce2530c6dd66ac2685827d/src%2Ftransformers%2Fmodels%2Fdeprecated%2Fdeta%2Fmodeling_deta.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fdeprecated%2Fdeta%2Fmodeling_deta.py?ref=04d1c8f3d44543831fce2530c6dd66ac2685827d",
            "patch": "@@ -326,7 +326,7 @@ class DetaObjectDetectionOutput(ModelOutput):\n     encoder_last_hidden_state: Optional[torch.FloatTensor] = None\n     encoder_hidden_states: Optional[tuple[torch.FloatTensor]] = None\n     encoder_attentions: Optional[tuple[torch.FloatTensor]] = None\n-    enc_outputs_class = None\n+    enc_outputs_class: Optional[torch.FloatTensor] = None\n     enc_outputs_coord_logits: Optional[torch.FloatTensor] = None\n     output_proposals: Optional[torch.FloatTensor] = None\n \n@@ -1857,7 +1857,7 @@ def __init__(self, config: DetaConfig):\n \n         prior_prob = 0.01\n         bias_value = -math.log((1 - prior_prob) / prior_prob)\n-        self.class_embed.bias.data = torch.ones(config.num_labels) * bias_value\n+        self.class_embed.bias.data.fill_(bias_value)\n         nn.init.constant_(self.bbox_embed.layers[-1].weight.data, 0)\n         nn.init.constant_(self.bbox_embed.layers[-1].bias.data, 0)\n "
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}