{
    "author": "yonigozlan",
    "message": "Fix import structure for Fast Image processors (#34859)\n\n* Fix import structure image_processor_fast\r\n\r\n* update to new inits",
    "sha": "bdb29ff9f3b8030772bd4be037d061f253c0e928",
    "files": [
        {
            "sha": "fa54ced6a134863fc08df8c65cec1a9726553400",
            "filename": "src/transformers/__init__.py",
            "status": "modified",
            "additions": 12,
            "deletions": 10,
            "changes": 22,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2F__init__.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2F__init__.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2F__init__.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -1186,14 +1186,14 @@\n     )\n     _import_structure[\"models.convnext\"].extend([\"ConvNextFeatureExtractor\", \"ConvNextImageProcessor\"])\n     _import_structure[\"models.deformable_detr\"].extend(\n-        [\"DeformableDetrFeatureExtractor\", \"DeformableDetrImageProcessor\", \"DeformableDetrImageProcessorFast\"]\n+        [\"DeformableDetrFeatureExtractor\", \"DeformableDetrImageProcessor\"]\n     )\n     _import_structure[\"models.deit\"].extend([\"DeiTFeatureExtractor\", \"DeiTImageProcessor\"])\n     _import_structure[\"models.deprecated.deta\"].append(\"DetaImageProcessor\")\n     _import_structure[\"models.deprecated.efficientformer\"].append(\"EfficientFormerImageProcessor\")\n     _import_structure[\"models.deprecated.tvlt\"].append(\"TvltImageProcessor\")\n     _import_structure[\"models.deprecated.vit_hybrid\"].extend([\"ViTHybridImageProcessor\"])\n-    _import_structure[\"models.detr\"].extend([\"DetrFeatureExtractor\", \"DetrImageProcessor\", \"DetrImageProcessorFast\"])\n+    _import_structure[\"models.detr\"].extend([\"DetrFeatureExtractor\", \"DetrImageProcessor\"])\n     _import_structure[\"models.donut\"].extend([\"DonutFeatureExtractor\", \"DonutImageProcessor\"])\n     _import_structure[\"models.dpt\"].extend([\"DPTFeatureExtractor\", \"DPTImageProcessor\"])\n     _import_structure[\"models.efficientnet\"].append(\"EfficientNetImageProcessor\")\n@@ -1230,7 +1230,7 @@\n     _import_structure[\"models.poolformer\"].extend([\"PoolFormerFeatureExtractor\", \"PoolFormerImageProcessor\"])\n     _import_structure[\"models.pvt\"].extend([\"PvtImageProcessor\"])\n     _import_structure[\"models.qwen2_vl\"].extend([\"Qwen2VLImageProcessor\"])\n-    _import_structure[\"models.rt_detr\"].extend([\"RTDetrImageProcessor\", \"RTDetrImageProcessorFast\"])\n+    _import_structure[\"models.rt_detr\"].extend([\"RTDetrImageProcessor\"])\n     _import_structure[\"models.sam\"].extend([\"SamImageProcessor\"])\n     _import_structure[\"models.segformer\"].extend([\"SegformerFeatureExtractor\", \"SegformerImageProcessor\"])\n     _import_structure[\"models.seggpt\"].extend([\"SegGptImageProcessor\"])\n@@ -1258,6 +1258,9 @@\n     ]\n else:\n     _import_structure[\"image_processing_utils_fast\"] = [\"BaseImageProcessorFast\"]\n+    _import_structure[\"models.deformable_detr\"].append(\"DeformableDetrImageProcessorFast\")\n+    _import_structure[\"models.detr\"].append(\"DetrImageProcessorFast\")\n+    _import_structure[\"models.rt_detr\"].append(\"RTDetrImageProcessorFast\")\n     _import_structure[\"models.vit\"].append(\"ViTImageProcessorFast\")\n \n # PyTorch-backed objects\n@@ -6097,17 +6100,13 @@\n             ConditionalDetrImageProcessor,\n         )\n         from .models.convnext import ConvNextFeatureExtractor, ConvNextImageProcessor\n-        from .models.deformable_detr import (\n-            DeformableDetrFeatureExtractor,\n-            DeformableDetrImageProcessor,\n-            DeformableDetrImageProcessorFast,\n-        )\n+        from .models.deformable_detr import DeformableDetrFeatureExtractor, DeformableDetrImageProcessor\n         from .models.deit import DeiTFeatureExtractor, DeiTImageProcessor\n         from .models.deprecated.deta import DetaImageProcessor\n         from .models.deprecated.efficientformer import EfficientFormerImageProcessor\n         from .models.deprecated.tvlt import TvltImageProcessor\n         from .models.deprecated.vit_hybrid import ViTHybridImageProcessor\n-        from .models.detr import DetrFeatureExtractor, DetrImageProcessor, DetrImageProcessorFast\n+        from .models.detr import DetrFeatureExtractor, DetrImageProcessor\n         from .models.donut import DonutFeatureExtractor, DonutImageProcessor\n         from .models.dpt import DPTFeatureExtractor, DPTImageProcessor\n         from .models.efficientnet import EfficientNetImageProcessor\n@@ -6164,7 +6163,7 @@\n         )\n         from .models.pvt import PvtImageProcessor\n         from .models.qwen2_vl import Qwen2VLImageProcessor\n-        from .models.rt_detr import RTDetrImageProcessor, RTDetrImageProcessorFast\n+        from .models.rt_detr import RTDetrImageProcessor\n         from .models.sam import SamImageProcessor\n         from .models.segformer import SegformerFeatureExtractor, SegformerImageProcessor\n         from .models.seggpt import SegGptImageProcessor\n@@ -6188,6 +6187,9 @@\n         from .utils.dummy_torchvision_objects import *\n     else:\n         from .image_processing_utils_fast import BaseImageProcessorFast\n+        from .models.deformable_detr import DeformableDetrImageProcessorFast\n+        from .models.detr import DetrImageProcessorFast\n+        from .models.rt_detr import RTDetrImageProcessorFast\n         from .models.vit import ViTImageProcessorFast\n \n     # Modeling"
        },
        {
            "sha": "16a1959c30ff5474ed82a6b0a2e22896514d6a44",
            "filename": "src/transformers/models/deformable_detr/__init__.py",
            "status": "modified",
            "additions": 10,
            "deletions": 53,
            "changes": 63,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2F__init__.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2F__init__.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2F__init__.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -12,64 +12,21 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n \n-from typing import TYPE_CHECKING\n-\n-from ...utils import OptionalDependencyNotAvailable, _LazyModule, is_torch_available, is_vision_available\n-\n \n-_import_structure = {\n-    \"configuration_deformable_detr\": [\"DeformableDetrConfig\"],\n-}\n-\n-try:\n-    if not is_vision_available():\n-        raise OptionalDependencyNotAvailable()\n-except OptionalDependencyNotAvailable:\n-    pass\n-else:\n-    _import_structure[\"feature_extraction_deformable_detr\"] = [\"DeformableDetrFeatureExtractor\"]\n-    _import_structure[\"image_processing_deformable_detr\"] = [\"DeformableDetrImageProcessor\"]\n-    _import_structure[\"image_processing_deformable_detr_fast\"] = [\"DeformableDetrImageProcessorFast\"]\n+from typing import TYPE_CHECKING\n \n-try:\n-    if not is_torch_available():\n-        raise OptionalDependencyNotAvailable()\n-except OptionalDependencyNotAvailable:\n-    pass\n-else:\n-    _import_structure[\"modeling_deformable_detr\"] = [\n-        \"DeformableDetrForObjectDetection\",\n-        \"DeformableDetrModel\",\n-        \"DeformableDetrPreTrainedModel\",\n-    ]\n+from ...utils import _LazyModule\n+from ...utils.import_utils import define_import_structure\n \n \n if TYPE_CHECKING:\n-    from .configuration_deformable_detr import DeformableDetrConfig\n-\n-    try:\n-        if not is_vision_available():\n-            raise OptionalDependencyNotAvailable()\n-    except OptionalDependencyNotAvailable:\n-        pass\n-    else:\n-        from .feature_extraction_deformable_detr import DeformableDetrFeatureExtractor\n-        from .image_processing_deformable_detr import DeformableDetrImageProcessor\n-        from .image_processing_deformable_detr_fast import DeformableDetrImageProcessorFast\n-\n-    try:\n-        if not is_torch_available():\n-            raise OptionalDependencyNotAvailable()\n-    except OptionalDependencyNotAvailable:\n-        pass\n-    else:\n-        from .modeling_deformable_detr import (\n-            DeformableDetrForObjectDetection,\n-            DeformableDetrModel,\n-            DeformableDetrPreTrainedModel,\n-        )\n-\n+    from .configuration_deformable_detr import *\n+    from .feature_extraction_deformable_detr import *\n+    from .image_processing_deformable_detr import *\n+    from .image_processing_deformable_detr_fast import *\n+    from .modeling_deformable_detr import *\n else:\n     import sys\n \n-    sys.modules[__name__] = _LazyModule(__name__, globals()[\"__file__\"], _import_structure, module_spec=__spec__)\n+    _file = globals()[\"__file__\"]\n+    sys.modules[__name__] = _LazyModule(__name__, _file, define_import_structure(_file), module_spec=__spec__)"
        },
        {
            "sha": "05bd0f906a110820c36f12fb75b73c1fd0927006",
            "filename": "src/transformers/models/deformable_detr/configuration_deformable_detr.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2Fconfiguration_deformable_detr.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2Fconfiguration_deformable_detr.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2Fconfiguration_deformable_detr.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -277,3 +277,6 @@ def num_attention_heads(self) -> int:\n     @property\n     def hidden_size(self) -> int:\n         return self.d_model\n+\n+\n+__all__ = [\"DeformableDetrConfig\"]"
        },
        {
            "sha": "de1676740647f65dddee160ea88b2026bb6551a9",
            "filename": "src/transformers/models/deformable_detr/feature_extraction_deformable_detr.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2Ffeature_extraction_deformable_detr.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2Ffeature_extraction_deformable_detr.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2Ffeature_extraction_deformable_detr.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -41,3 +41,6 @@ def __init__(self, *args, **kwargs) -> None:\n             FutureWarning,\n         )\n         super().__init__(*args, **kwargs)\n+\n+\n+__all__ = [\"DeformableDetrFeatureExtractor\"]"
        },
        {
            "sha": "0b6a58eb8f1351f5c620af16fb42c81c859ca0dd",
            "filename": "src/transformers/models/deformable_detr/image_processing_deformable_detr.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2Fimage_processing_deformable_detr.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2Fimage_processing_deformable_detr.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2Fimage_processing_deformable_detr.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -1627,3 +1627,6 @@ def post_process_object_detection(\n             results.append({\"scores\": score, \"labels\": label, \"boxes\": box})\n \n         return results\n+\n+\n+__all__ = [\"DeformableDetrImageProcessor\"]"
        },
        {
            "sha": "0a2fbc14ee94f8e8b2e372df03c32ca8331f4c40",
            "filename": "src/transformers/models/deformable_detr/image_processing_deformable_detr_fast.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2Fimage_processing_deformable_detr_fast.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2Fimage_processing_deformable_detr_fast.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2Fimage_processing_deformable_detr_fast.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -1055,3 +1055,6 @@ def post_process_object_detection(\n             results.append({\"scores\": score, \"labels\": label, \"boxes\": box})\n \n         return results\n+\n+\n+__all__ = [\"DeformableDetrImageProcessorFast\"]"
        },
        {
            "sha": "3fd6914a6c62ddc85b4dd9db862b5ed77fbaa50c",
            "filename": "src/transformers/models/deformable_detr/modeling_deformable_detr.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2Fmodeling_deformable_detr.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2Fmodeling_deformable_detr.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fdeformable_detr%2Fmodeling_deformable_detr.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -2064,3 +2064,10 @@ def forward(\n         )\n \n         return dict_outputs\n+\n+\n+__all__ = [\n+    \"DeformableDetrForObjectDetection\",\n+    \"DeformableDetrModel\",\n+    \"DeformableDetrPreTrainedModel\",\n+]"
        },
        {
            "sha": "4b8aae5e70381b21772bdec395693c007a9c02b7",
            "filename": "src/transformers/models/detr/__init__.py",
            "status": "modified",
            "additions": 9,
            "deletions": 53,
            "changes": 62,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdetr%2F__init__.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdetr%2F__init__.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fdetr%2F__init__.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -14,62 +14,18 @@\n \n from typing import TYPE_CHECKING\n \n-from ...utils import OptionalDependencyNotAvailable, _LazyModule, is_torch_available, is_vision_available\n-\n-\n-_import_structure = {\"configuration_detr\": [\"DetrConfig\", \"DetrOnnxConfig\"]}\n-\n-try:\n-    if not is_vision_available():\n-        raise OptionalDependencyNotAvailable()\n-except OptionalDependencyNotAvailable:\n-    pass\n-else:\n-    _import_structure[\"feature_extraction_detr\"] = [\"DetrFeatureExtractor\"]\n-    _import_structure[\"image_processing_detr\"] = [\"DetrImageProcessor\"]\n-    _import_structure[\"image_processing_detr_fast\"] = [\"DetrImageProcessorFast\"]\n-\n-try:\n-    if not is_torch_available():\n-        raise OptionalDependencyNotAvailable()\n-except OptionalDependencyNotAvailable:\n-    pass\n-else:\n-    _import_structure[\"modeling_detr\"] = [\n-        \"DetrForObjectDetection\",\n-        \"DetrForSegmentation\",\n-        \"DetrModel\",\n-        \"DetrPreTrainedModel\",\n-    ]\n+from ...utils import _LazyModule\n+from ...utils.import_utils import define_import_structure\n \n \n if TYPE_CHECKING:\n-    from .configuration_detr import DetrConfig, DetrOnnxConfig\n-\n-    try:\n-        if not is_vision_available():\n-            raise OptionalDependencyNotAvailable()\n-    except OptionalDependencyNotAvailable:\n-        pass\n-    else:\n-        from .feature_extraction_detr import DetrFeatureExtractor\n-        from .image_processing_detr import DetrImageProcessor\n-        from .image_processing_detr_fast import DetrImageProcessorFast\n-\n-    try:\n-        if not is_torch_available():\n-            raise OptionalDependencyNotAvailable()\n-    except OptionalDependencyNotAvailable:\n-        pass\n-    else:\n-        from .modeling_detr import (\n-            DetrForObjectDetection,\n-            DetrForSegmentation,\n-            DetrModel,\n-            DetrPreTrainedModel,\n-        )\n-\n+    from .configuration_detr import *\n+    from .feature_extraction_detr import *\n+    from .image_processing_detr import *\n+    from .image_processing_detr_fast import *\n+    from .modeling_detr import *\n else:\n     import sys\n \n-    sys.modules[__name__] = _LazyModule(__name__, globals()[\"__file__\"], _import_structure, module_spec=__spec__)\n+    _file = globals()[\"__file__\"]\n+    sys.modules[__name__] = _LazyModule(__name__, _file, define_import_structure(_file), module_spec=__spec__)"
        },
        {
            "sha": "90cd3b1345e357681a0d30901ee256bf610e5e23",
            "filename": "src/transformers/models/detr/configuration_detr.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdetr%2Fconfiguration_detr.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdetr%2Fconfiguration_detr.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fdetr%2Fconfiguration_detr.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -284,3 +284,6 @@ def atol_for_validation(self) -> float:\n     @property\n     def default_onnx_opset(self) -> int:\n         return 12\n+\n+\n+__all__ = [\"DetrConfig\", \"DetrOnnxConfig\"]"
        },
        {
            "sha": "c2b29211099783be6b0c56e69e52157fe2607228",
            "filename": "src/transformers/models/detr/feature_extraction_detr.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdetr%2Ffeature_extraction_detr.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdetr%2Ffeature_extraction_detr.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fdetr%2Ffeature_extraction_detr.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -41,3 +41,6 @@ def __init__(self, *args, **kwargs) -> None:\n             FutureWarning,\n         )\n         super().__init__(*args, **kwargs)\n+\n+\n+__all__ = [\"DetrFeatureExtractor\"]"
        },
        {
            "sha": "85fbe698d10a12467c06a4a84415671f9911eac6",
            "filename": "src/transformers/models/detr/image_processing_detr.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdetr%2Fimage_processing_detr.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdetr%2Fimage_processing_detr.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fdetr%2Fimage_processing_detr.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -2042,3 +2042,6 @@ def post_process_panoptic_segmentation(\n \n             results.append({\"segmentation\": segmentation, \"segments_info\": segments})\n         return results\n+\n+\n+__all__ = [\"DetrImageProcessor\"]"
        },
        {
            "sha": "f010ffe272294f13db493113cde114baadfae70d",
            "filename": "src/transformers/models/detr/image_processing_detr_fast.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdetr%2Fimage_processing_detr_fast.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdetr%2Fimage_processing_detr_fast.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fdetr%2Fimage_processing_detr_fast.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -1495,3 +1495,6 @@ def post_process_panoptic_segmentation(\n \n             results.append({\"segmentation\": segmentation, \"segments_info\": segments})\n         return results\n+\n+\n+__all__ = [\"DetrImageProcessorFast\"]"
        },
        {
            "sha": "ac9a78671f8feaa2ba56daf94bbcaa910f7e39f4",
            "filename": "src/transformers/models/detr/modeling_detr.py",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdetr%2Fmodeling_detr.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Fdetr%2Fmodeling_detr.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fdetr%2Fmodeling_detr.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -1805,3 +1805,11 @@ def forward(self, q, k, mask: Optional[Tensor] = None):\n         weights = nn.functional.softmax(weights.flatten(2), dim=-1).view(weights.size())\n         weights = self.dropout(weights)\n         return weights\n+\n+\n+__all__ = [\n+    \"DetrForObjectDetection\",\n+    \"DetrForSegmentation\",\n+    \"DetrModel\",\n+    \"DetrPreTrainedModel\",\n+]"
        },
        {
            "sha": "cd1fac5b679dc5ca527dcc0a6a45b9a873daa3dc",
            "filename": "src/transformers/models/rt_detr/__init__.py",
            "status": "modified",
            "additions": 11,
            "deletions": 58,
            "changes": 69,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Frt_detr%2F__init__.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Frt_detr%2F__init__.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Frt_detr%2F__init__.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -12,69 +12,22 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n \n-from typing import TYPE_CHECKING\n-\n-from ...utils import OptionalDependencyNotAvailable, _LazyModule, is_torch_available, is_vision_available\n-\n \n-_import_structure = {\"configuration_rt_detr\": [\"RTDetrConfig\"], \"configuration_rt_detr_resnet\": [\"RTDetrResNetConfig\"]}\n-\n-try:\n-    if not is_vision_available():\n-        raise OptionalDependencyNotAvailable()\n-except OptionalDependencyNotAvailable:\n-    pass\n-else:\n-    _import_structure[\"image_processing_rt_detr\"] = [\"RTDetrImageProcessor\"]\n-    _import_structure[\"image_processing_rt_detr_fast\"] = [\"RTDetrImageProcessorFast\"]\n+from typing import TYPE_CHECKING\n \n-try:\n-    if not is_torch_available():\n-        raise OptionalDependencyNotAvailable()\n-except OptionalDependencyNotAvailable:\n-    pass\n-else:\n-    _import_structure[\"modeling_rt_detr\"] = [\n-        \"RTDetrForObjectDetection\",\n-        \"RTDetrModel\",\n-        \"RTDetrPreTrainedModel\",\n-    ]\n-    _import_structure[\"modeling_rt_detr_resnet\"] = [\n-        \"RTDetrResNetBackbone\",\n-        \"RTDetrResNetPreTrainedModel\",\n-    ]\n+from ...utils import _LazyModule\n+from ...utils.import_utils import define_import_structure\n \n \n if TYPE_CHECKING:\n-    from .configuration_rt_detr import RTDetrConfig\n-    from .configuration_rt_detr_resnet import RTDetrResNetConfig\n-\n-    try:\n-        if not is_vision_available():\n-            raise OptionalDependencyNotAvailable()\n-    except OptionalDependencyNotAvailable:\n-        pass\n-    else:\n-        from .image_processing_rt_detr import RTDetrImageProcessor\n-        from .image_processing_rt_detr_fast import RTDetrImageProcessorFast\n-\n-    try:\n-        if not is_torch_available():\n-            raise OptionalDependencyNotAvailable()\n-    except OptionalDependencyNotAvailable:\n-        pass\n-    else:\n-        from .modeling_rt_detr import (\n-            RTDetrForObjectDetection,\n-            RTDetrModel,\n-            RTDetrPreTrainedModel,\n-        )\n-        from .modeling_rt_detr_resnet import (\n-            RTDetrResNetBackbone,\n-            RTDetrResNetPreTrainedModel,\n-        )\n-\n+    from .configuration_rt_detr import *\n+    from .configuration_rt_detr_resnet import *\n+    from .image_processing_rt_detr import *\n+    from .image_processing_rt_detr_fast import *\n+    from .modeling_rt_detr import *\n+    from .modeling_rt_detr_resnet import *\n else:\n     import sys\n \n-    sys.modules[__name__] = _LazyModule(__name__, globals()[\"__file__\"], _import_structure, module_spec=__spec__)\n+    _file = globals()[\"__file__\"]\n+    sys.modules[__name__] = _LazyModule(__name__, _file, define_import_structure(_file), module_spec=__spec__)"
        },
        {
            "sha": "3dc8ea550ad9e40d70da5049071d2f5dbcac2ab0",
            "filename": "src/transformers/models/rt_detr/configuration_rt_detr.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Frt_detr%2Fconfiguration_rt_detr.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Frt_detr%2Fconfiguration_rt_detr.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Frt_detr%2Fconfiguration_rt_detr.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -359,3 +359,6 @@ def from_backbone_configs(cls, backbone_config: PretrainedConfig, **kwargs):\n             backbone_config=backbone_config,\n             **kwargs,\n         )\n+\n+\n+__all__ = [\"RTDetrConfig\"]"
        },
        {
            "sha": "35e74cd2f1819cf470f50b2c151e4e8406b7839c",
            "filename": "src/transformers/models/rt_detr/configuration_rt_detr_resnet.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Frt_detr%2Fconfiguration_rt_detr_resnet.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Frt_detr%2Fconfiguration_rt_detr_resnet.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Frt_detr%2Fconfiguration_rt_detr_resnet.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -109,3 +109,6 @@ def __init__(\n         self._out_features, self._out_indices = get_aligned_output_features_output_indices(\n             out_features=out_features, out_indices=out_indices, stage_names=self.stage_names\n         )\n+\n+\n+__all__ = [\"RTDetrResNetConfig\"]"
        },
        {
            "sha": "d031f40848fb8c3bd830b3a5aa0931cbd63cb45c",
            "filename": "src/transformers/models/rt_detr/image_processing_rt_detr.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Frt_detr%2Fimage_processing_rt_detr.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Frt_detr%2Fimage_processing_rt_detr.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Frt_detr%2Fimage_processing_rt_detr.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -1097,3 +1097,6 @@ def post_process_object_detection(\n             )\n \n         return results\n+\n+\n+__all__ = [\"RTDetrImageProcessor\"]"
        },
        {
            "sha": "5d8d0f58328a0b439298dfb2d268ae63e8ff62f7",
            "filename": "src/transformers/models/rt_detr/image_processing_rt_detr_fast.py",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Frt_detr%2Fimage_processing_rt_detr_fast.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Frt_detr%2Fimage_processing_rt_detr_fast.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Frt_detr%2Fimage_processing_rt_detr_fast.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -798,3 +798,6 @@ def post_process_object_detection(\n             )\n \n         return results\n+\n+\n+__all__ = [\"RTDetrImageProcessorFast\"]"
        },
        {
            "sha": "da395743f60d0026e9df50b3219ae10ec19ad4f5",
            "filename": "src/transformers/models/rt_detr/modeling_rt_detr.py",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Frt_detr%2Fmodeling_rt_detr.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Frt_detr%2Fmodeling_rt_detr.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Frt_detr%2Fmodeling_rt_detr.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -2162,3 +2162,10 @@ def forward(\n             enc_outputs_coord_logits=outputs.enc_outputs_coord_logits,\n             denoising_meta_values=outputs.denoising_meta_values,\n         )\n+\n+\n+__all__ = [\n+    \"RTDetrForObjectDetection\",\n+    \"RTDetrModel\",\n+    \"RTDetrPreTrainedModel\",\n+]"
        },
        {
            "sha": "72ef9a0ac4db8b83fc695c61ea4a5612d94d057c",
            "filename": "src/transformers/models/rt_detr/modeling_rt_detr_resnet.py",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Frt_detr%2Fmodeling_rt_detr_resnet.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Fmodels%2Frt_detr%2Fmodeling_rt_detr_resnet.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Frt_detr%2Fmodeling_rt_detr_resnet.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -432,3 +432,9 @@ def forward(\n             hidden_states=outputs.hidden_states if output_hidden_states else None,\n             attentions=None,\n         )\n+\n+\n+__all__ = [\n+    \"RTDetrResNetBackbone\",\n+    \"RTDetrResNetPreTrainedModel\",\n+]"
        },
        {
            "sha": "343eda60135630afcfa03ef2dbdd73eeca1069e2",
            "filename": "src/transformers/utils/dummy_torchvision_objects.py",
            "status": "modified",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Futils%2Fdummy_torchvision_objects.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Futils%2Fdummy_torchvision_objects.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Futils%2Fdummy_torchvision_objects.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -9,6 +9,27 @@ def __init__(self, *args, **kwargs):\n         requires_backends(self, [\"torchvision\"])\n \n \n+class DeformableDetrImageProcessorFast(metaclass=DummyObject):\n+    _backends = [\"torchvision\"]\n+\n+    def __init__(self, *args, **kwargs):\n+        requires_backends(self, [\"torchvision\"])\n+\n+\n+class DetrImageProcessorFast(metaclass=DummyObject):\n+    _backends = [\"torchvision\"]\n+\n+    def __init__(self, *args, **kwargs):\n+        requires_backends(self, [\"torchvision\"])\n+\n+\n+class RTDetrImageProcessorFast(metaclass=DummyObject):\n+    _backends = [\"torchvision\"]\n+\n+    def __init__(self, *args, **kwargs):\n+        requires_backends(self, [\"torchvision\"])\n+\n+\n class ViTImageProcessorFast(metaclass=DummyObject):\n     _backends = [\"torchvision\"]\n "
        },
        {
            "sha": "d2ccaeaaed23a8571a6ad6f4f01e613ccd55063e",
            "filename": "src/transformers/utils/dummy_vision_objects.py",
            "status": "modified",
            "additions": 0,
            "deletions": 21,
            "changes": 21,
            "blob_url": "https://github.com/huggingface/transformers/blob/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Futils%2Fdummy_vision_objects.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/bdb29ff9f3b8030772bd4be037d061f253c0e928/src%2Ftransformers%2Futils%2Fdummy_vision_objects.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Futils%2Fdummy_vision_objects.py?ref=bdb29ff9f3b8030772bd4be037d061f253c0e928",
            "patch": "@@ -135,13 +135,6 @@ def __init__(self, *args, **kwargs):\n         requires_backends(self, [\"vision\"])\n \n \n-class DeformableDetrImageProcessorFast(metaclass=DummyObject):\n-    _backends = [\"vision\"]\n-\n-    def __init__(self, *args, **kwargs):\n-        requires_backends(self, [\"vision\"])\n-\n-\n class DeiTFeatureExtractor(metaclass=DummyObject):\n     _backends = [\"vision\"]\n \n@@ -198,13 +191,6 @@ def __init__(self, *args, **kwargs):\n         requires_backends(self, [\"vision\"])\n \n \n-class DetrImageProcessorFast(metaclass=DummyObject):\n-    _backends = [\"vision\"]\n-\n-    def __init__(self, *args, **kwargs):\n-        requires_backends(self, [\"vision\"])\n-\n-\n class DonutFeatureExtractor(metaclass=DummyObject):\n     _backends = [\"vision\"]\n \n@@ -576,13 +562,6 @@ def __init__(self, *args, **kwargs):\n         requires_backends(self, [\"vision\"])\n \n \n-class RTDetrImageProcessorFast(metaclass=DummyObject):\n-    _backends = [\"vision\"]\n-\n-    def __init__(self, *args, **kwargs):\n-        requires_backends(self, [\"vision\"])\n-\n-\n class SamImageProcessor(metaclass=DummyObject):\n     _backends = [\"vision\"]\n "
        }
    ],
    "stats": {
        "total": 322,
        "additions": 127,
        "deletions": 195
    }
}