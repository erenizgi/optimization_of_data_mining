{
    "author": "cyyever",
    "message": "RUFF fix on CI scripts (#40805)\n\nSigned-off-by: Yuanyuan Chen <cyyever@outlook.com>",
    "sha": "96a3e898cd1a0e1864e79b48c3f6c804c7a56780",
    "files": [
        {
            "sha": "1e39aa4751a57ae91ee35309f71a38b3b4a0351c",
            "filename": ".circleci/create_circleci_config.py",
            "status": "modified",
            "additions": 11,
            "deletions": 12,
            "changes": 23,
            "blob_url": "https://github.com/huggingface/transformers/blob/96a3e898cd1a0e1864e79b48c3f6c804c7a56780/.circleci%2Fcreate_circleci_config.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/96a3e898cd1a0e1864e79b48c3f6c804c7a56780/.circleci%2Fcreate_circleci_config.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.circleci%2Fcreate_circleci_config.py?ref=96a3e898cd1a0e1864e79b48c3f6c804c7a56780",
            "patch": "@@ -16,10 +16,9 @@\n import argparse\n import copy\n import os\n-import random\n from dataclasses import dataclass\n-from typing import Any, Dict, List, Optional\n-import glob\n+from typing import Any, Optional\n+\n import yaml\n \n \n@@ -82,15 +81,15 @@ def to_dict(self):\n @dataclass\n class CircleCIJob:\n     name: str\n-    additional_env: Dict[str, Any] = None\n-    docker_image: List[Dict[str, str]] = None\n-    install_steps: List[str] = None\n+    additional_env: dict[str, Any] = None\n+    docker_image: list[dict[str, str]] = None\n+    install_steps: list[str] = None\n     marker: Optional[str] = None\n     parallelism: Optional[int] = 0\n     pytest_num_workers: int = 8\n-    pytest_options: Dict[str, Any] = None\n+    pytest_options: dict[str, Any] = None\n     resource_class: Optional[str] = \"xlarge\"\n-    tests_to_run: Optional[List[str]] = None\n+    tests_to_run: Optional[list[str]] = None\n     num_test_files_per_worker: Optional[int] = 10\n     # This should be only used for doctest job!\n     command_timeout: Optional[int] = None\n@@ -149,7 +148,7 @@ def to_dict(self):\n                 # Examples special case: we need to download NLTK files in advance to avoid cuncurrency issues\n         timeout_cmd = f\"timeout {self.command_timeout} \" if self.command_timeout else \"\"\n         marker_cmd = f\"-m '{self.marker}'\" if self.marker is not None else \"\"\n-        junit_flags = f\" -p no:warning -o junit_family=xunit1 --junitxml=test-results/junit.xml\"\n+        junit_flags = \" -p no:warning -o junit_family=xunit1 --junitxml=test-results/junit.xml\"\n         joined_flaky_patterns = \"|\".join(FLAKY_TEST_FAILURE_PATTERNS)\n         repeat_on_failure_flags = f\"--reruns 5 --reruns-delay 2 --only-rerun '({joined_flaky_patterns})'\"\n         parallel = f' << pipeline.parameters.{self.job_name}_parallelism >> '\n@@ -200,9 +199,9 @@ def to_dict(self):\n                         fi\"\"\"\n                 },\n             },\n-            {\"run\": {\"name\": \"Expand to show skipped tests\", \"when\": \"always\", \"command\": f\"python3 .circleci/parse_test_outputs.py --file tests_output.txt --skip\"}},\n-            {\"run\": {\"name\": \"Failed tests: show reasons\",   \"when\": \"always\", \"command\": f\"python3 .circleci/parse_test_outputs.py --file tests_output.txt --fail\"}},\n-            {\"run\": {\"name\": \"Errors\",                       \"when\": \"always\", \"command\": f\"python3 .circleci/parse_test_outputs.py --file tests_output.txt --errors\"}},\n+            {\"run\": {\"name\": \"Expand to show skipped tests\", \"when\": \"always\", \"command\": \"python3 .circleci/parse_test_outputs.py --file tests_output.txt --skip\"}},\n+            {\"run\": {\"name\": \"Failed tests: show reasons\",   \"when\": \"always\", \"command\": \"python3 .circleci/parse_test_outputs.py --file tests_output.txt --fail\"}},\n+            {\"run\": {\"name\": \"Errors\",                       \"when\": \"always\", \"command\": \"python3 .circleci/parse_test_outputs.py --file tests_output.txt --errors\"}},\n             {\"store_test_results\": {\"path\": \"test-results\"}},\n             {\"store_artifacts\": {\"path\": \"test-results/junit.xml\"}},\n             {\"store_artifacts\": {\"path\": \"reports\"}},"
        },
        {
            "sha": "c584471558594d12b5aaebb2d32ef2678b4f211e",
            "filename": ".circleci/parse_test_outputs.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/96a3e898cd1a0e1864e79b48c3f6c804c7a56780/.circleci%2Fparse_test_outputs.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/96a3e898cd1a0e1864e79b48c3f6c804c7a56780/.circleci%2Fparse_test_outputs.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.circleci%2Fparse_test_outputs.py?ref=96a3e898cd1a0e1864e79b48c3f6c804c7a56780",
            "patch": "@@ -1,5 +1,6 @@\n-import re\n import argparse\n+import re\n+\n \n def parse_pytest_output(file_path):\n     skipped_tests = {}"
        },
        {
            "sha": "18567203596f9b2cdc6c9218a2756eed3b8b8096",
            "filename": ".github/scripts/assign_reviewers.py",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/huggingface/transformers/blob/96a3e898cd1a0e1864e79b48c3f6c804c7a56780/.github%2Fscripts%2Fassign_reviewers.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/96a3e898cd1a0e1864e79b48c3f6c804c7a56780/.github%2Fscripts%2Fassign_reviewers.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fscripts%2Fassign_reviewers.py?ref=96a3e898cd1a0e1864e79b48c3f6c804c7a56780",
            "patch": "@@ -13,14 +13,16 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n \n-import os\n-import github\n import json\n-from github import Github\n+import os\n import re\n from collections import Counter\n from pathlib import Path\n \n+import github\n+from github import Github\n+\n+\n def pattern_to_regex(pattern):\n     if pattern.startswith(\"/\"):\n         start_anchor = True"
        }
    ],
    "stats": {
        "total": 34,
        "additions": 18,
        "deletions": 16
    }
}