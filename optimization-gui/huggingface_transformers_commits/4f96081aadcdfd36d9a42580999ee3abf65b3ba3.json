{
    "author": "zucchini-nlp",
    "message": "[chat template] fix security vulnerability (#37523)\n\n* fix security issues\n\n* nit",
    "sha": "4f96081aadcdfd36d9a42580999ee3abf65b3ba3",
    "files": [
        {
            "sha": "8a0fe0e33ed5c5d7977e1b7157016907830a3270",
            "filename": "src/transformers/image_utils.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/4f96081aadcdfd36d9a42580999ee3abf65b3ba3/src%2Ftransformers%2Fimage_utils.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/4f96081aadcdfd36d9a42580999ee3abf65b3ba3/src%2Ftransformers%2Fimage_utils.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fimage_utils.py?ref=4f96081aadcdfd36d9a42580999ee3abf65b3ba3",
            "patch": "@@ -19,6 +19,7 @@\n from dataclasses import dataclass\n from io import BytesIO\n from typing import TYPE_CHECKING, Callable, Optional, Union\n+from urllib.parse import urlparse\n \n import numpy as np\n import requests\n@@ -833,7 +834,7 @@ def sample_indices_fn_func(metadata, **fn_kwargs):\n \n         sample_indices_fn = sample_indices_fn_func\n \n-    if video.startswith(\"https://www.youtube.com\") or video.startswith(\"http://www.youtube.com\"):\n+    if urlparse(video).netloc in [\"www.youtube.com\", \"youtube.com\"]:\n         if not is_yt_dlp_available():\n             raise ImportError(\"To load a video from YouTube url you have  to install `yt_dlp` first.\")\n         # Lazy import from yt_dlp"
        }
    ],
    "stats": {
        "total": 3,
        "additions": 2,
        "deletions": 1
    }
}