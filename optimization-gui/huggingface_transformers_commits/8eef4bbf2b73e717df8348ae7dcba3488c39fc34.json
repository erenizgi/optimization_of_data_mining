{
    "author": "qgallouedec",
    "message": "Remove Neptune integration references and deprecate `NeptuneCallback` (#42666)\n\nRemove Neptune integration references and deprecate NeptuneCallback",
    "sha": "8eef4bbf2b73e717df8348ae7dcba3488c39fc34",
    "files": [
        {
            "sha": "f25f4487a5f7c198c88d58f8ca7672711894742b",
            "filename": "docs/source/en/main_classes/callback.md",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/8eef4bbf2b73e717df8348ae7dcba3488c39fc34/docs%2Fsource%2Fen%2Fmain_classes%2Fcallback.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/8eef4bbf2b73e717df8348ae7dcba3488c39fc34/docs%2Fsource%2Fen%2Fmain_classes%2Fcallback.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fmain_classes%2Fcallback.md?ref=8eef4bbf2b73e717df8348ae7dcba3488c39fc34",
            "patch": "@@ -36,7 +36,6 @@ By default, `TrainingArguments.report_to` is set to `\"all\"`, so a [`Trainer`] wi\n - [`~integrations.WandbCallback`] if [wandb](https://www.wandb.com/) is installed.\n - [`~integrations.CometCallback`] if [comet_ml](https://www.comet.com/site/) is installed.\n - [`~integrations.MLflowCallback`] if [mlflow](https://www.mlflow.org/) is installed.\n-- [`~integrations.NeptuneCallback`] if [neptune](https://neptune.ai/) is installed.\n - [`~integrations.AzureMLCallback`] if [azureml-sdk](https://pypi.org/project/azureml-sdk/) is\n   installed.\n - [`~integrations.CodeCarbonCallback`] if [codecarbon](https://pypi.org/project/codecarbon/) is\n@@ -84,8 +83,6 @@ Here is the list of the available [`TrainerCallback`] in the library:\n \n [[autodoc]] integrations.CodeCarbonCallback\n \n-[[autodoc]] integrations.NeptuneCallback\n-\n [[autodoc]] integrations.ClearMLCallback\n \n [[autodoc]] integrations.DagsHubCallback"
        },
        {
            "sha": "388bd7ff0f690be78a6d003cab6b65244fce5fa2",
            "filename": "docs/source/ja/main_classes/callback.md",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/8eef4bbf2b73e717df8348ae7dcba3488c39fc34/docs%2Fsource%2Fja%2Fmain_classes%2Fcallback.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/8eef4bbf2b73e717df8348ae7dcba3488c39fc34/docs%2Fsource%2Fja%2Fmain_classes%2Fcallback.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fja%2Fmain_classes%2Fcallback.md?ref=8eef4bbf2b73e717df8348ae7dcba3488c39fc34",
            "patch": "@@ -37,7 +37,6 @@ rendered properly in your Markdown viewer.\n - [`~integrations.WandbCallback`] [wandb](https://www.wandb.com/) がインストールされている場合。\n - [`~integrations.CometCallback`] [comet_ml](https://www.comet.com/site/) がインストールされている場合。\n - [mlflow](https://www.mlflow.org/) がインストールされている場合は [`~integrations.MLflowCallback`]。\n-- [`~integrations.NeptuneCallback`] [neptune](https://neptune.ai/) がインストールされている場合。\n - [`~integrations.AzureMLCallback`] [azureml-sdk](https://pypi.org/project/azureml-sdk/) の場合\n   インストールされています。\n - [`~integrations.CodeCarbonCallback`] [codecarbon](https://pypi.org/project/codecarbon/) の場合\n@@ -82,8 +81,6 @@ rendered properly in your Markdown viewer.\n \n [[autodoc]] integrations.CodeCarbonCallback\n \n-[[autodoc]] integrations.NeptuneCallback\n-\n [[autodoc]] integrations.ClearMLCallback\n \n [[autodoc]] integrations.DagsHubCallback"
        },
        {
            "sha": "de3dd54ef7f7874b1e2d23188d5aa32766d25591",
            "filename": "docs/source/ko/main_classes/callback.md",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/8eef4bbf2b73e717df8348ae7dcba3488c39fc34/docs%2Fsource%2Fko%2Fmain_classes%2Fcallback.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/8eef4bbf2b73e717df8348ae7dcba3488c39fc34/docs%2Fsource%2Fko%2Fmain_classes%2Fcallback.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fko%2Fmain_classes%2Fcallback.md?ref=8eef4bbf2b73e717df8348ae7dcba3488c39fc34",
            "patch": "@@ -36,7 +36,6 @@ rendered properly in your Markdown viewer.\n  사용됩니다.\n - [`~integrations.CometCallback`]는 [comet_ml](https://www.comet.com/site/)이 설치되어 있으면 사용됩니다.\n - [`~integrations.MLflowCallback`]는 [mlflow](https://www.mlflow.org/)가 설치되어 있으면 사용됩니다.\n-- [`~integrations.NeptuneCallback`]는 [neptune](https://neptune.ai/)이 설치되어 있으면 사용됩니다.\n - [`~integrations.AzureMLCallback`]는 [azureml-sdk](https://pypi.org/project/azureml-sdk/)가 설치되어\n  있으면 사용됩니다.\n - [`~integrations.CodeCarbonCallback`]는 [codecarbon](https://pypi.org/project/codecarbon/)이 설치되어\n@@ -82,8 +81,6 @@ rendered properly in your Markdown viewer.\n \n [[autodoc]] integrations.CodeCarbonCallback\n \n-[[autodoc]] integrations.NeptuneCallback\n-\n [[autodoc]] integrations.ClearMLCallback\n \n [[autodoc]] integrations.DagsHubCallback"
        },
        {
            "sha": "b80d0da386f60b9fccf40bb15c3c66d22bba9534",
            "filename": "docs/source/zh/main_classes/callback.md",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/8eef4bbf2b73e717df8348ae7dcba3488c39fc34/docs%2Fsource%2Fzh%2Fmain_classes%2Fcallback.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/8eef4bbf2b73e717df8348ae7dcba3488c39fc34/docs%2Fsource%2Fzh%2Fmain_classes%2Fcallback.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fzh%2Fmain_classes%2Fcallback.md?ref=8eef4bbf2b73e717df8348ae7dcba3488c39fc34",
            "patch": "@@ -30,7 +30,6 @@ Callbacks是“只读”的代码片段，除了它们返回的[TrainerControl]\n - [`~integrations.WandbCallback`]，如果安装了[wandb](https://www.wandb.com/)。\n - [`~integrations.CometCallback`]，如果安装了[comet_ml](https://www.comet.com/site/)。\n - [`~integrations.MLflowCallback`]，如果安装了[mlflow](https://www.mlflow.org/)。\n-- [`~integrations.NeptuneCallback`]，如果安装了[neptune](https://neptune.ai/)。\n - [`~integrations.AzureMLCallback`]，如果安装了[azureml-sdk](https://pypi.org/project/azureml-sdk/)。\n - [`~integrations.CodeCarbonCallback`]，如果安装了[codecarbon](https://pypi.org/project/codecarbon/)。\n - [`~integrations.ClearMLCallback`]，如果安装了[clearml](https://github.com/allegroai/clearml)。\n@@ -71,8 +70,6 @@ Callbacks是“只读”的代码片段，除了它们返回的[TrainerControl]\n \n [[autodoc]] integrations.CodeCarbonCallback\n \n-[[autodoc]] integrations.NeptuneCallback\n-\n [[autodoc]] integrations.ClearMLCallback\n \n [[autodoc]] integrations.DagsHubCallback"
        },
        {
            "sha": "77066900315b10111891cbdab854c0be80d505b6",
            "filename": "examples/pytorch/README.md",
            "status": "modified",
            "additions": 0,
            "deletions": 86,
            "changes": 86,
            "blob_url": "https://github.com/huggingface/transformers/blob/8eef4bbf2b73e717df8348ae7dcba3488c39fc34/examples%2Fpytorch%2FREADME.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/8eef4bbf2b73e717df8348ae7dcba3488c39fc34/examples%2Fpytorch%2FREADME.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/examples%2Fpytorch%2FREADME.md?ref=8eef4bbf2b73e717df8348ae7dcba3488c39fc34",
            "patch": "@@ -199,7 +199,6 @@ You can easily log and monitor your runs code. The following are currently suppo\n * [TensorBoard](https://www.tensorflow.org/tensorboard)\n * [Weights & Biases](https://docs.wandb.ai/integrations/huggingface)\n * [Comet ML](https://www.comet.com/docs/v2/integrations/ml-frameworks/transformers/)\n-* [Neptune](https://docs.neptune.ai/integrations-and-supported-tools/model-training/hugging-face)\n * [ClearML](https://clear.ml/docs/latest/docs/getting_started/ds/ds_first_steps)\n * [DVCLive](https://dvc.org/doc/dvclive/ml-frameworks/huggingface)\n \n@@ -256,91 +255,6 @@ or if in a Conda environment:\n conda install -c comet_ml -c anaconda -c conda-forge comet_ml\n ```\n \n-### Neptune\n-\n-First, install the Neptune client library. You can do it with either `pip` or `conda`:\n-\n-`pip`:\n-\n-```bash\n-pip install neptune\n-```\n-\n-`conda`:\n-\n-```bash\n-conda install -c conda-forge neptune\n-```\n-\n-Next, in your model training script, import `NeptuneCallback`:\n-\n-```python\n-from transformers.integrations import NeptuneCallback\n-```\n-\n-To enable Neptune logging, in your `TrainingArguments`, set the `report_to` argument to `\"neptune\"`:\n-\n-```python\n-training_args = TrainingArguments(\n-    \"quick-training-distilbert-mrpc\",\n-    eval_strategy=\"steps\",\n-    eval_steps=20,\n-    report_to=\"neptune\",\n-)\n-\n-trainer = Trainer(\n-    model,\n-    training_args,\n-    ...\n-)\n-```\n-\n-**Note:** This method requires saving your Neptune credentials as environment variables (see the bottom of the section).\n-\n-Alternatively, for more logging options, create a Neptune callback:\n-\n-```python\n-neptune_callback = NeptuneCallback()\n-```\n-\n-To add more detail to the tracked run, you can supply optional arguments to `NeptuneCallback`.\n-\n-Some examples:\n-\n-```python\n-neptune_callback = NeptuneCallback(\n-    name = \"DistilBERT\",\n-    description = \"DistilBERT fine-tuned on GLUE/MRPC\",\n-    tags = [\"args-callback\", \"fine-tune\", \"MRPC\"],  # tags help you manage runs in Neptune\n-    base_namespace=\"callback\",  # the default is \"finetuning\"\n-    log_checkpoints = \"best\",  # other options are \"last\", \"same\", and None\n-    capture_hardware_metrics = False,  # additional keyword arguments for a Neptune run\n-)\n-```\n-\n-Pass the callback to the Trainer:\n-\n-```python\n-training_args = TrainingArguments(..., report_to=None)\n-trainer = Trainer(\n-    model,\n-    training_args,\n-    ...\n-    callbacks=[neptune_callback],\n-)\n-```\n-\n-Now, when you start the training with `trainer.train()`, your metadata will be logged in Neptune.\n-\n-**Note:** Although you can pass your **Neptune API token** and **project name** as arguments when creating the callback, the recommended way is to save them as environment variables:\n-\n-| Environment variable | Value                                                |\n-| :------------------- | :--------------------------------------------------- |\n-| `NEPTUNE_API_TOKEN`  | Your Neptune API token. To find and copy it, click your Neptune avatar and select **Get your API token**. |\n-| `NEPTUNE_PROJECT` | The full name of your Neptune project (`workspace-name/project-name`). To find and copy it, head to **project settings** &rarr; **Properties**. |\n-\n-For detailed instructions and examples, see the [Neptune docs](https://docs.neptune.ai/integrations/transformers/).\n-\n ### ClearML\n \n To use ClearML, install the clearml package with:"
        },
        {
            "sha": "b89e6062ba7b4030947de0412f3588c50a3bd1c3",
            "filename": "src/transformers/integrations/integration_utils.py",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/huggingface/transformers/blob/8eef4bbf2b73e717df8348ae7dcba3488c39fc34/src%2Ftransformers%2Fintegrations%2Fintegration_utils.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/8eef4bbf2b73e717df8348ae7dcba3488c39fc34/src%2Ftransformers%2Fintegrations%2Fintegration_utils.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fintegrations%2Fintegration_utils.py?ref=8eef4bbf2b73e717df8348ae7dcba3488c39fc34",
            "patch": "@@ -26,6 +26,7 @@\n import shutil\n import sys\n import tempfile\n+import warnings\n from dataclasses import fields\n from enum import Enum\n from pathlib import Path\n@@ -1455,6 +1456,10 @@ def __init__(self):\n class NeptuneCallback(TrainerCallback):\n     \"\"\"TrainerCallback that sends the logs to [Neptune](https://app.neptune.ai).\n \n+    > [!WARNING]\n+    > Neptune integration is deprecated and will be removed in a future version of Transformers. We recommend using\n+    > other supported experiment tracking integrations.\n+\n     Args:\n         api_token (`str`, *optional*): Neptune API token obtained upon registration.\n             You can leave this argument out if you have saved your token to the `NEPTUNE_API_TOKEN` environment\n@@ -1500,6 +1505,11 @@ def __init__(\n         log_checkpoints: str | None = None,\n         **neptune_run_kwargs,\n     ):\n+        warnings.warn(\n+            \"The NeptuneCallback is deprecated and will be removed in a future version of Transformers. We recommend \"\n+            \"using other supported experiment tracking integrations.\",\n+            FutureWarning,\n+        )\n         if not is_neptune_available():\n             raise ValueError(\n                 \"NeptuneCallback requires the Neptune client library to be installed. \""
        },
        {
            "sha": "09cb48cd7f74a35951742357d62fe862e6500165",
            "filename": "src/transformers/training_args.py",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/huggingface/transformers/blob/8eef4bbf2b73e717df8348ae7dcba3488c39fc34/src%2Ftransformers%2Ftraining_args.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/8eef4bbf2b73e717df8348ae7dcba3488c39fc34/src%2Ftransformers%2Ftraining_args.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Ftraining_args.py?ref=8eef4bbf2b73e717df8348ae7dcba3488c39fc34",
            "patch": "@@ -596,9 +596,9 @@ class TrainingArguments:\n             instance of `Dataset`.\n         report_to (`str` or `list[str]`, *optional*, defaults to `\"none\"`):\n             The list of integrations to report the results and logs to. Supported platforms are `\"azure_ml\"`,\n-            `\"clearml\"`, `\"codecarbon\"`, `\"comet_ml\"`, `\"dagshub\"`, `\"dvclive\"`, `\"flyte\"`, `\"mlflow\"`, `\"neptune\"`,\n-            `\"swanlab\"`, `\"tensorboard\"`, `\"trackio\"` and `\"wandb\"`. Use `\"all\"` to report to all integrations\n-            installed, `\"none\"` for no integrations.\n+            `\"clearml\"`, `\"codecarbon\"`, `\"comet_ml\"`, `\"dagshub\"`, `\"dvclive\"`, `\"flyte\"`, `\"mlflow\"`, `\"swanlab\"`,\n+            `\"tensorboard\"`, `\"trackio\"` and `\"wandb\"`. Use `\"all\"` to report to all integrations installed, `\"none\"`\n+            for no integrations.\n         project (`str`, *optional*, defaults to `\"huggingface\"`):\n             The name of the project to use for logging. Currently, only used by Trackio.\n         trackio_space_id (`str` or `None`, *optional*, defaults to `\"trackio\"`):\n@@ -2386,8 +2386,8 @@ def set_logging(\n             report_to (`str` or `list[str]`, *optional*, defaults to `\"none\"`):\n                 The list of integrations to report the results and logs to. Supported platforms are `\"azure_ml\"`,\n                 `\"clearml\"`, `\"codecarbon\"`, `\"comet_ml\"`, `\"dagshub\"`, `\"dvclive\"`, `\"flyte\"`, `\"mlflow\"`,\n-                `\"neptune\"`, `\"swanlab\"`, `\"tensorboard\"`, `\"trackio\"` and `\"wandb\"`. Use `\"all\"` to report to all\n-                integrations installed, `\"none\"` for no integrations.\n+                `\"swanlab\"`, `\"tensorboard\"`, `\"trackio\"` and `\"wandb\"`. Use `\"all\"` to report to all integrations\n+                installed, `\"none\"` for no integrations.\n             first_step (`bool`, *optional*, defaults to `False`):\n                 Whether to log and evaluate the first `global_step` or not.\n             nan_inf_filter (`bool`, *optional*, defaults to `True`):"
        }
    ],
    "stats": {
        "total": 118,
        "additions": 15,
        "deletions": 103
    }
}