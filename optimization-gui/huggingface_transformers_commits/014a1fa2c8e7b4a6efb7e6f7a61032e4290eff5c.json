{
    "author": "ydshieh",
    "message": "CircleCI with python 3.9 (#36027)\n\nupdate docker files\r\n\r\nCo-authored-by: ydshieh <ydshieh@users.noreply.github.com>",
    "sha": "014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c",
    "files": [
        {
            "sha": "a564d76c9bb03b04e7c2a201f269db490e29b433",
            "filename": "docker/consistency.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fconsistency.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fconsistency.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fconsistency.dockerfile?ref=014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c",
            "patch": "@@ -1,4 +1,4 @@\n-FROM python:3.10-slim\n+FROM python:3.9-slim\n ENV PYTHONDONTWRITEBYTECODE=1\n USER root\n ARG REF=main"
        },
        {
            "sha": "87601bcf3f416871b15830c04b36de14c141c021",
            "filename": "docker/custom-tokenizers.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fcustom-tokenizers.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fcustom-tokenizers.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fcustom-tokenizers.dockerfile?ref=014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c",
            "patch": "@@ -1,4 +1,4 @@\n-FROM python:3.10-slim\n+FROM python:3.9-slim\n ENV PYTHONDONTWRITEBYTECODE=1\n USER root\n RUN apt-get update && apt-get install -y libsndfile1-dev espeak-ng time git cmake wget xz-utils build-essential g++5 libprotobuf-dev protobuf-compiler"
        },
        {
            "sha": "ffbaafd8b86b2dbd2d9a142965f8a6ab6aadcb84",
            "filename": "docker/examples-tf.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fexamples-tf.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fexamples-tf.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fexamples-tf.dockerfile?ref=014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c",
            "patch": "@@ -1,4 +1,4 @@\n-FROM python:3.10-slim\n+FROM python:3.9-slim\n ENV PYTHONDONTWRITEBYTECODE=1\n USER root\n RUN apt-get update && apt-get install -y libsndfile1-dev espeak-ng time git"
        },
        {
            "sha": "f9c7257b9cca51c63266159c6ffa26cc6e59957a",
            "filename": "docker/examples-torch.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fexamples-torch.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fexamples-torch.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fexamples-torch.dockerfile?ref=014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c",
            "patch": "@@ -1,4 +1,4 @@\n-FROM python:3.10-slim\n+FROM python:3.9-slim\n ENV PYTHONDONTWRITEBYTECODE=1\n USER root\n RUN apt-get update &&  apt-get install -y --no-install-recommends libsndfile1-dev espeak-ng time git g++ cmake pkg-config openssh-client git"
        },
        {
            "sha": "dd40476064a3b2702bf26479a8fa2124c22def8b",
            "filename": "docker/exotic-models.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fexotic-models.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fexotic-models.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fexotic-models.dockerfile?ref=014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c",
            "patch": "@@ -1,4 +1,4 @@\n-FROM python:3.10-slim\n+FROM python:3.9-slim\n ENV PYTHONDONTWRITEBYTECODE=1\n ARG REF=main\n USER root"
        },
        {
            "sha": "df1e1144c0e10568182b56a3f7476677fb5a5d82",
            "filename": "docker/jax-light.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fjax-light.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fjax-light.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fjax-light.dockerfile?ref=014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c",
            "patch": "@@ -1,4 +1,4 @@\n-FROM python:3.10-slim\n+FROM python:3.9-slim\n ENV PYTHONDONTWRITEBYTECODE=1\n ARG REF=main\n USER root"
        },
        {
            "sha": "dd38b52acbb3af88f48b662cc03af8f64f44daaf",
            "filename": "docker/pipeline-tf.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fpipeline-tf.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fpipeline-tf.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fpipeline-tf.dockerfile?ref=014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c",
            "patch": "@@ -1,4 +1,4 @@\n-FROM python:3.10-slim\n+FROM python:3.9-slim\n ENV PYTHONDONTWRITEBYTECODE=1\n ARG REF=main\n USER root"
        },
        {
            "sha": "2b4014b4fff1f5fa74af44cd6bcc5f93f08fe66d",
            "filename": "docker/pipeline-torch.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fpipeline-torch.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fpipeline-torch.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fpipeline-torch.dockerfile?ref=014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c",
            "patch": "@@ -1,4 +1,4 @@\n-FROM python:3.10-slim\n+FROM python:3.9-slim\n ENV PYTHONDONTWRITEBYTECODE=1\n ARG REF=main\n USER root"
        },
        {
            "sha": "7e6999e40f2057f15b4d363db68b77665ed9633c",
            "filename": "docker/quality.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fquality.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Fquality.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Fquality.dockerfile?ref=014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c",
            "patch": "@@ -1,4 +1,4 @@\n-FROM python:3.10-slim\n+FROM python:3.9-slim\n ENV PYTHONDONTWRITEBYTECODE=1\n ARG REF=main\n USER root"
        },
        {
            "sha": "67dc928c22fa8ba35923ef874298266539008b40",
            "filename": "docker/tf-light.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Ftf-light.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Ftf-light.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftf-light.dockerfile?ref=014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c",
            "patch": "@@ -1,4 +1,4 @@\n-FROM python:3.10-slim\n+FROM python:3.9-slim\n ENV PYTHONDONTWRITEBYTECODE=1\n ARG REF=main\n USER root"
        },
        {
            "sha": "b779fcbfac9af6679fca38b01b7e471785101614",
            "filename": "docker/torch-jax-light.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Ftorch-jax-light.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Ftorch-jax-light.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftorch-jax-light.dockerfile?ref=014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c",
            "patch": "@@ -1,4 +1,4 @@\n-FROM python:3.10-slim\n+FROM python:3.9-slim\n ENV PYTHONDONTWRITEBYTECODE=1\n ARG REF=main\n USER root"
        },
        {
            "sha": "c1a8f8ac0f51e191ad2a8a24772ba56237b92aae",
            "filename": "docker/torch-light.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Ftorch-light.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Ftorch-light.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftorch-light.dockerfile?ref=014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c",
            "patch": "@@ -1,4 +1,4 @@\n-FROM python:3.10-slim\n+FROM python:3.9-slim\n ENV PYTHONDONTWRITEBYTECODE=1\n ARG REF=main\n USER root"
        },
        {
            "sha": "0556b79ffdb3c3670f14589fc90e13346a0e2c3b",
            "filename": "docker/torch-tf-light.dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Ftorch-tf-light.dockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/docker%2Ftorch-tf-light.dockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftorch-tf-light.dockerfile?ref=014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c",
            "patch": "@@ -1,4 +1,4 @@\n-FROM python:3.10-slim\n+FROM python:3.9-slim\n ENV PYTHONDONTWRITEBYTECODE=1\n ARG REF=main\n RUN echo ${REF}"
        },
        {
            "sha": "482f9c32a6a9f780f6d451ad2957a05f330896fb",
            "filename": "utils/modular_model_converter.py",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/huggingface/transformers/blob/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/utils%2Fmodular_model_converter.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c/utils%2Fmodular_model_converter.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/utils%2Fmodular_model_converter.py?ref=014a1fa2c8e7b4a6efb7e6f7a61032e4290eff5c",
            "patch": "@@ -19,7 +19,7 @@\n import re\n from abc import ABC, abstractmethod\n from collections import Counter, defaultdict, deque\n-from typing import Dict, Set\n+from typing import Dict, Optional, Set, Union\n \n import libcst as cst\n from check_copies import run_ruff\n@@ -169,7 +169,7 @@ def is_call_to_super(node, func_name):\n     )\n \n \n-def get_full_attribute_name(node: cst.Attribute | cst.Name) -> str | None:\n+def get_full_attribute_name(node: Union[cst.Attribute, cst.Name]) -> Optional[str]:\n     \"\"\"Get the full name of an Attribute or Name node (e.g. `\"nn.Module\"` for an Attribute representing it). If the\n     successive value of an Attribute are not Name nodes, return `None`.\"\"\"\n     if m.matches(node, m.Name()):\n@@ -430,11 +430,11 @@ def leave_Return(self, original_node: cst.Return, updated_node: cst.Return) -> c\n \n def find_all_dependencies(\n     dependency_mapping: Dict[str, set],\n-    start_entity: str | None = None,\n-    initial_dependencies: set | None = None,\n-    initial_checked_dependencies: set | None = None,\n+    start_entity: Optional[str] = None,\n+    initial_dependencies: Optional[set] = None,\n+    initial_checked_dependencies: Optional[set] = None,\n     return_parent: bool = False,\n-) -> list | set:\n+) -> Union[list, set]:\n     \"\"\"Return all the dependencies of the given `start_entity` or `initial_dependencies`. This is basically some kind of\n     BFS traversal algorithm. It can either start from `start_entity`, or `initial_dependencies`.\n \n@@ -525,7 +525,7 @@ class ClassDependencyMapper(CSTVisitor):\n     \"\"\"\n \n     def __init__(\n-        self, class_name: str, global_names: set[str], objects_imported_from_modeling: set[str] | None = None\n+        self, class_name: str, global_names: set[str], objects_imported_from_modeling: Optional[set[str]] = None\n     ):\n         super().__init__()\n         self.class_name = class_name\n@@ -553,7 +553,7 @@ def dependencies_for_class_node(node: cst.ClassDef, global_names: set[str]) -> s\n \n \n def augmented_dependencies_for_class_node(\n-    node: cst.ClassDef, mapper: \"ModuleMapper\", objects_imported_from_modeling: set[str] | None = None\n+    node: cst.ClassDef, mapper: \"ModuleMapper\", objects_imported_from_modeling: Optional[set[str]] = None\n ) -> set:\n     \"\"\"Create augmented dependencies for a class node based on a `mapper`.\n     Augmented dependencies means immediate dependencies + recursive function and assignments dependencies."
        }
    ],
    "stats": {
        "total": 42,
        "additions": 21,
        "deletions": 21
    }
}