{
    "author": "rwightman",
    "message": "ðŸš¨ðŸš¨ðŸš¨ image-classification pipeline single-label and multi-label prob type squashing fns (sigmoid vs softmax) are backwards (#35848)\n\nsingle-label and multi-label prob type squashing fns (sigmoid vs softmax) were backwards for image-classification pipeline",
    "sha": "5c576f5a66cc4c1f48b8b63c71aad70a2eae9875",
    "files": [
        {
            "sha": "a9b318df5527e4e641e7e66e4ef36d4a9182809d",
            "filename": "src/transformers/pipelines/image_classification.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/5c576f5a66cc4c1f48b8b63c71aad70a2eae9875/src%2Ftransformers%2Fpipelines%2Fimage_classification.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/5c576f5a66cc4c1f48b8b63c71aad70a2eae9875/src%2Ftransformers%2Fpipelines%2Fimage_classification.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fpipelines%2Fimage_classification.py?ref=5c576f5a66cc4c1f48b8b63c71aad70a2eae9875",
            "patch": "@@ -189,9 +189,9 @@ def _forward(self, model_inputs):\n \n     def postprocess(self, model_outputs, function_to_apply=None, top_k=5):\n         if function_to_apply is None:\n-            if self.model.config.problem_type == \"single_label_classification\" or self.model.config.num_labels == 1:\n+            if self.model.config.problem_type == \"multi_label_classification\" or self.model.config.num_labels == 1:\n                 function_to_apply = ClassificationFunction.SIGMOID\n-            elif self.model.config.problem_type == \"multi_label_classification\" or self.model.config.num_labels > 1:\n+            elif self.model.config.problem_type == \"single_label_classification\" or self.model.config.num_labels > 1:\n                 function_to_apply = ClassificationFunction.SOFTMAX\n             elif hasattr(self.model.config, \"function_to_apply\") and function_to_apply is None:\n                 function_to_apply = self.model.config.function_to_apply"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}