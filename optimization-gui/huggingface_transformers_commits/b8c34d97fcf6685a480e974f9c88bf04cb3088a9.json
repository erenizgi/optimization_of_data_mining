{
    "author": "jiqing-feng",
    "message": "Fix whisper compile (#35413)\n\nFix compile error\n\nSigned-off-by: jiqing-feng <jiqing.feng@intel.com>",
    "sha": "b8c34d97fcf6685a480e974f9c88bf04cb3088a9",
    "files": [
        {
            "sha": "1b4ecb831bf98f71f1ba08af18af3edb25687368",
            "filename": "src/transformers/models/whisper/generation_whisper.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/b8c34d97fcf6685a480e974f9c88bf04cb3088a9/src%2Ftransformers%2Fmodels%2Fwhisper%2Fgeneration_whisper.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/b8c34d97fcf6685a480e974f9c88bf04cb3088a9/src%2Ftransformers%2Fmodels%2Fwhisper%2Fgeneration_whisper.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fwhisper%2Fgeneration_whisper.py?ref=b8c34d97fcf6685a480e974f9c88bf04cb3088a9",
            "patch": "@@ -1571,7 +1571,7 @@ def detect_language(\n         )\n \n         with torch.no_grad():\n-            logits = self(**inputs, decoder_input_ids=decoder_input_ids).logits[:, -1]\n+            logits = self(**inputs, decoder_input_ids=decoder_input_ids, use_cache=False).logits[:, -1]\n \n         non_lang_mask = torch.ones_like(logits[0], dtype=torch.bool)\n         non_lang_mask[list(generation_config.lang_to_id.values())] = False"
        }
    ],
    "stats": {
        "total": 2,
        "additions": 1,
        "deletions": 1
    }
}