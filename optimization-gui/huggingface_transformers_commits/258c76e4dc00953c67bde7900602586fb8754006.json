{
    "author": "ydshieh",
    "message": "Fix `run slow v2`: empty report when there is only one model (#42002)\n\nfix\n\nCo-authored-by: ydshieh <ydshieh@users.noreply.github.com>",
    "sha": "258c76e4dc00953c67bde7900602586fb8754006",
    "files": [
        {
            "sha": "83c4763545bf8b0eafd9406a5213dad4ed8795d5",
            "filename": ".github/workflows/self-scheduled.yml",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/huggingface/transformers/blob/258c76e4dc00953c67bde7900602586fb8754006/.github%2Fworkflows%2Fself-scheduled.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/258c76e4dc00953c67bde7900602586fb8754006/.github%2Fworkflows%2Fself-scheduled.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fself-scheduled.yml?ref=258c76e4dc00953c67bde7900602586fb8754006",
            "patch": "@@ -102,8 +102,10 @@ jobs:\n         working-directory: /transformers/tests\n         run: |\n           if [ \"${{ inputs.job }}\" = \"run_models_gpu\" ]; then\n-            echo \"folder_slices=$(python3 ../utils/split_model_tests.py --subdirs '${{ inputs.subdirs }}' --num_splits ${{ env.NUM_SLICES }})\" >> $GITHUB_OUTPUT\n-            echo \"slice_ids=$(python3 -c 'd = list(range(${{ env.NUM_SLICES }})); print(d)')\" >> $GITHUB_OUTPUT\n+            python3 ../utils/split_model_tests.py --subdirs '${{ inputs.subdirs }}' --num_splits ${{ env.NUM_SLICES }} > folder_slices.txt\n+            echo \"folder_slices=$(cat folder_slices.txt)\" >> $GITHUB_OUTPUT\n+            python3 -c \"import ast; folder_slices = ast.literal_eval(open('folder_slices.txt').read()); open('slice_ids.txt', 'w').write(str(list(range(len(folder_slices)))))\"\n+            echo \"slice_ids=$(cat slice_ids.txt)\" >> $GITHUB_OUTPUT\n           elif [ \"${{ inputs.job }}\" = \"run_trainer_and_fsdp_gpu\" ]; then\n             echo \"folder_slices=[['trainer'], ['fsdp']]\" >> $GITHUB_OUTPUT\n             echo \"slice_ids=[0, 1]\" >> $GITHUB_OUTPUT"
        },
        {
            "sha": "40a37ab94b13dc8ff6b0af8f8ba7615bf3dd9998",
            "filename": "utils/split_model_tests.py",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/258c76e4dc00953c67bde7900602586fb8754006/utils%2Fsplit_model_tests.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/258c76e4dc00953c67bde7900602586fb8754006/utils%2Fsplit_model_tests.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/utils%2Fsplit_model_tests.py?ref=258c76e4dc00953c67bde7900602586fb8754006",
            "patch": "@@ -81,6 +81,8 @@\n     for idx in range(args.num_splits):\n         start = end\n         end = start + num_jobs_per_splits + (1 if idx < num_jobs % args.num_splits else 0)\n-        model_splits.append(d[start:end])\n+        # Only add the slice if it is not an empty list\n+        if len(d[start:end]) > 0:\n+            model_splits.append(d[start:end])\n \n     print(model_splits)"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 7,
        "deletions": 3
    }
}