{
    "author": "HMJ0628",
    "message": "Translating agents_advanced.md to Chinese (#35231)\n\nadd \"translate agents_advanced\"",
    "sha": "6009642459248c0d24f201730c32464fe0e13cf5",
    "files": [
        {
            "sha": "a973fb9b4a7869aad25f4b4e3e21384479244d60",
            "filename": "docs/source/zh/_toctree.yml",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/6009642459248c0d24f201730c32464fe0e13cf5/docs%2Fsource%2Fzh%2F_toctree.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/6009642459248c0d24f201730c32464fe0e13cf5/docs%2Fsource%2Fzh%2F_toctree.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fzh%2F_toctree.yml?ref=6009642459248c0d24f201730c32464fe0e13cf5",
            "patch": "@@ -25,6 +25,8 @@\n     title: åˆ†äº«æ‚¨çš„æ¨¡å‹\n   - local: agents\n     title: æ™ºèƒ½ä½“å’Œå·¥å…·\n+  - local: agents_advanced\n+    title: æ™ºèƒ½ä½“ï¼Œè¶…å¼ºç‰ˆ - å¤šæ™ºèƒ½ä½“ã€å¤–éƒ¨å·¥å…·ç­‰\n   - local: llm_tutorial\n     title: ä½¿ç”¨LLMsè¿›è¡Œç”Ÿæˆ\n   title: æ•™ç¨‹"
        },
        {
            "sha": "9eb4dcf5124c820e485f52eb662990a34f412fc3",
            "filename": "docs/source/zh/agents_advanced.md",
            "status": "added",
            "additions": 250,
            "deletions": 0,
            "changes": 250,
            "blob_url": "https://github.com/huggingface/transformers/blob/6009642459248c0d24f201730c32464fe0e13cf5/docs%2Fsource%2Fzh%2Fagents_advanced.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/6009642459248c0d24f201730c32464fe0e13cf5/docs%2Fsource%2Fzh%2Fagents_advanced.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fzh%2Fagents_advanced.md?ref=6009642459248c0d24f201730c32464fe0e13cf5",
            "patch": "@@ -0,0 +1,250 @@\n+<!--Copyright 2024 The HuggingFace Team. All rights reserved.\n+Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with\n+the License. You may obtain a copy of the License at\n+http://www.apache.org/licenses/LICENSE-2.0\n+Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\n+an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\n+specific language governing permissions and limitations under the License.\n+âš ï¸ Note that this file is in Markdown but contain specific syntax for our doc-builder (similar to MDX) that may not be\n+rendered properly in your Markdown viewer.\n+-->\n+# æ™ºèƒ½ä½“ï¼Œè¶…å¼ºç‰ˆ - å¤šæ™ºèƒ½ä½“ã€å¤–éƒ¨å·¥å…·ç­‰\n+\n+[[open-in-colab]]\n+\n+### ä»€ä¹ˆæ˜¯æ™ºèƒ½ä½“ï¼Ÿ\n+\n+> [!TIP]\n+> å¦‚æœä½ æ˜¯ `transformers.agents` çš„æ–°æ‰‹ï¼Œè¯·å…ˆé˜…è¯»ä¸»æ–‡æ¡£ [æ™ºèƒ½ä½“æ–‡æ¡£ ](./agents).\n+åœ¨æœ¬é¡µé¢ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹ä»‹ç» `transformers.agents` çš„å‡ ç§é«˜çº§ç”¨æ³•ã€‚\n+\n+## å¤šæ™ºèƒ½ä½“\n+\n+å¤šæ™ºèƒ½ä½“åŠŸèƒ½æ˜¯å¾®è½¯æ¡†æ¶ [Autogen](https://huggingface.co/papers/2308.08155) ä¸­å¼•å…¥çš„ã€‚\n+å®ƒçš„æ„æ€æ˜¯è®©å¤šä¸ªæ™ºèƒ½ä½“ä¸€èµ·å·¥ä½œæ¥è§£å†³ä»»åŠ¡ï¼Œè€Œä¸æ˜¯åªæœ‰ä¸€ä¸ªæ™ºèƒ½ä½“ã€‚\n+ç»éªŒè¡¨æ˜ï¼Œåœ¨å¤§å¤šæ•°åŸºå‡†æµ‹è¯•ä¸­ï¼Œè¿™ç§æ–¹æ³•èƒ½å¸¦æ¥æ›´å¥½çš„æ€§èƒ½ã€‚ä¹‹æ‰€ä»¥æœ‰æ›´å¥½çš„æ€§èƒ½ï¼ŒåŸå› å¾ˆç®€å•ï¼šå¯¹äºè®¸å¤šä»»åŠ¡ï¼Œé€šå¸¸æˆ‘ä»¬æ›´æ„¿æ„è®©å¤šä¸ªå•ç‹¬çš„å•å…ƒä¸“æ³¨äºå­ä»»åŠ¡ï¼Œè€Œä¸æ˜¯è®©ä¸€ä¸ªç³»ç»Ÿåšæ‰€æœ‰äº‹æƒ…ã€‚è¿™é‡Œï¼Œæ‹¥æœ‰ä¸åŒå·¥å…·é›†å’Œè®°å¿†çš„å¤šä¸ªæ™ºèƒ½ä½“å¯ä»¥å®ç°é«˜æ•ˆçš„ä¸“ä¸šåŒ–ã€‚\n+\n+ä½ å¯ä»¥è½»æ¾åœ°ç”¨ `transformers.agents` æ„å»ºå±‚æ¬¡åŒ–çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿã€‚\n+\n+ä¸ºæ­¤ï¼Œéœ€è¦å°†æ™ºèƒ½ä½“å°è£…åœ¨ [`ManagedAgent`] å¯¹è±¡ä¸­ã€‚è¿™ä¸ªå¯¹è±¡éœ€è¦ `agent`ã€`name` å’Œ `description` è¿™å‡ ä¸ªå‚æ•°ï¼Œè¿™äº›ä¿¡æ¯ä¼šåµŒå…¥åˆ°ç®¡ç†æ™ºèƒ½ä½“çš„ç³»ç»Ÿæç¤ºä¸­ï¼Œå¸®åŠ©å®ƒçŸ¥é“å¦‚ä½•è°ƒç”¨è¿™ä¸ªç®¡ç†çš„æ™ºèƒ½ä½“ï¼Œå°±åƒæˆ‘ä»¬å¯¹å·¥å…·æ‰€åšçš„é‚£æ ·ã€‚\n+\n+ä¸‹é¢æ˜¯ä¸€ä¸ªé€šè¿‡ä½¿ç”¨æˆ‘ä»¬çš„ [`DuckDuckGoSearchTool`] åˆ›å»ºä¸€ä¸ªç®¡ç†ç‰¹å®šç½‘ç»œæœç´¢æ™ºèƒ½ä½“çš„ç¤ºä¾‹ï¼š\n+\n+\n+```py\n+from transformers.agents import ReactCodeAgent, HfApiEngine, DuckDuckGoSearchTool, ManagedAgent\n+\n+llm_engine = HfApiEngine()\n+\n+web_agent = ReactCodeAgent(tools=[DuckDuckGoSearchTool()], llm_engine=llm_engine)\n+\n+managed_web_agent = ManagedAgent(\n+    agent=web_agent,\n+    name=\"web_search\",\n+    description=\"Runs web searches for you. Give it your query as an argument.\"\n+)\n+\n+manager_agent = ReactCodeAgent(\n+    tools=[], llm_engine=llm_engine, managed_agents=[managed_web_agent]\n+)\n+\n+manager_agent.run(\"Who is the CEO of Hugging Face?\")\n+```\n+\n+> [!TIP]\n+> å¦‚æœä½ æƒ³æ·±å…¥äº†è§£å¦‚ä½•é«˜æ•ˆåœ°å®ç°å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œè¯·æŸ¥çœ‹ [how we pushed our multi-agent system to the top of the GAIA leaderboard](https://huggingface.co/blog/beating-gaia).\n+\n+## é«˜çº§å·¥å…·ä½¿ç”¨\n+\n+### é€šè¿‡å­ç±»åŒ– Tool æ¥ç›´æ¥å®šä¹‰å·¥å…·ï¼Œå¹¶å°†å…¶å…±äº«åˆ° Hub\n+\n+è®©æˆ‘ä»¬å†æ¬¡ä½¿ç”¨ä¸»æ–‡æ¡£ä¸­çš„å·¥å…·ç¤ºä¾‹ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†ä¸€ä¸ª `tool` è£…é¥°å™¨ã€‚\n+\n+å¦‚æœä½ éœ€è¦æ·»åŠ ä¸€äº›å˜åŒ–ï¼Œæ¯”å¦‚ä¸ºå·¥å…·è‡ªå®šä¹‰å±æ€§ï¼Œå¯ä»¥æŒ‰ç…§æ›´ç»†ç²’åº¦çš„æ–¹æ³•æ„å»ºå·¥å…·ï¼šæ„å»ºä¸€ä¸ªç»§æ‰¿è‡ª [`Tool`] è¶…ç±»çš„ç±»ã€‚\n+\n+è‡ªå®šä¹‰å·¥å…·éœ€è¦ï¼š\n+- `name` å±æ€§ï¼šè¡¨ç¤ºå·¥å…·æœ¬èº«çš„åç§°ï¼Œé€šå¸¸æè¿°å·¥å…·çš„ä½œç”¨ã€‚ç”±äºä»£ç è¿”å›äº†é’ˆå¯¹ä»»åŠ¡ä¸‹è½½é‡æœ€å¤šçš„æ¨¡å‹ï¼Œæˆ‘ä»¬å°†å…¶å‘½åä¸º model_download_counterã€‚\n+- `description` å±æ€§ï¼šç”¨äºå¡«å……æ™ºèƒ½ä½“çš„ç³»ç»Ÿæç¤ºã€‚\n+- `inputs` å±æ€§ï¼šè¿™æ˜¯ä¸€ä¸ªåŒ…å« \"type\" å’Œ \"description\" é”®çš„å­—å…¸ã€‚å®ƒåŒ…å«äº†æœ‰åŠ©äº Python è§£é‡Šå™¨åšå‡ºé€‰æ‹©çš„è¾“å…¥ä¿¡æ¯ã€‚\n+- `output_type` å±æ€§ï¼šæŒ‡å®šè¾“å‡ºç±»å‹ã€‚\n+- `forward` æ–¹æ³•ï¼šå…¶ä¸­åŒ…å«æ‰§è¡Œæ¨ç†ä»£ç ã€‚\n+\n+`inputs` å’Œ `output_type` çš„ç±»å‹åº”å½“æ˜¯ [Pydantic æ ¼å¼](https://docs.pydantic.dev/latest/concepts/json_schema/#generating-json-schema)ã€‚\n+\n+```python\n+from transformers import Tool\n+from huggingface_hub import list_models\n+\n+class HFModelDownloadsTool(Tool):\n+    name = \"model_download_counter\"\n+    description = \"\"\"\n+    This is a tool that returns the most downloaded model of a given task on the Hugging Face Hub.\n+    It returns the name of the checkpoint.\"\"\"\n+\n+    inputs = {\n+        \"task\": {\n+            \"type\": \"string\",\n+            \"description\": \"the task category (such as text-classification, depth-estimation, etc)\",\n+        }\n+    }\n+    output_type = \"string\"\n+\n+    def forward(self, task: str):\n+        model = next(iter(list_models(filter=task, sort=\"downloads\", direction=-1)))\n+        return model.id\n+```\n+\n+ç°åœ¨ï¼Œè‡ªå®šä¹‰çš„ `HfModelDownloadsTool` ç±»å·²ç»å‡†å¤‡å¥½ï¼Œå¯ä»¥å°†å…¶ä¿å­˜åˆ°åä¸º `model_downloads.py` çš„æ–‡ä»¶ä¸­ï¼Œå¹¶å¯¼å…¥ä½¿ç”¨ã€‚\n+\n+\n+```python\n+from model_downloads import HFModelDownloadsTool\n+\n+tool = HFModelDownloadsTool()\n+```\n+\n+ä½ è¿˜å¯ä»¥é€šè¿‡è°ƒç”¨ [`~Tool.push_to_hub`] å°†è‡ªå®šä¹‰å·¥å…·æ¨é€åˆ° Hubã€‚ç¡®ä¿ä½ å·²ç»ä¸ºè¯¥å·¥å…·åˆ›å»ºäº†ä¸€ä¸ªä»“åº“ï¼Œå¹¶ä½¿ç”¨å…·æœ‰è¯»å–è®¿é—®æƒé™çš„è®¸å¯ã€‚\n+\n+```python\n+tool.push_to_hub(\"{your_username}/hf-model-downloads\")\n+```\n+\n+é€šè¿‡ [`~Tool.load_tool`] å‡½æ•°åŠ è½½å·¥å…·ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™æ™ºèƒ½ä½“çš„ tools å‚æ•°ã€‚\n+\n+```python\n+from transformers import load_tool, CodeAgent\n+\n+model_download_tool = load_tool(\"m-ric/hf-model-downloads\")\n+```\n+\n+### å°† Space å¯¼å…¥ä¸ºå·¥å…· ğŸš€\n+\n+ä½ å¯ä»¥ç›´æ¥é€šè¿‡ [`Tool.from_space`] æ–¹æ³•å°† Hub ä¸Šçš„ Space å¯¼å…¥ä¸ºå·¥å…·ï¼\n+\n+åªéœ€è¦æä¾› Space åœ¨ Hub ä¸Šçš„ IDã€åç§°å’Œæè¿°ï¼Œå¸®åŠ©æ™ºèƒ½ä½“ç†è§£å·¥å…·çš„ä½œç”¨ã€‚åœ¨å¹•åï¼Œè¿™å°†ä½¿ç”¨ [`gradio-client`](https://pypi.org/project/gradio-client/) åº“æ¥è°ƒç”¨ Spaceã€‚\n+\n+ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä» Hub å¯¼å…¥ `FLUX.1-dev` Space å¹¶ç”¨å…¶ç”Ÿæˆå›¾åƒçš„ç¤ºä¾‹ï¼š\n+\n+```\n+from transformers import Tool\n+image_generation_tool = Tool.from_space(\n+    \"black-forest-labs/FLUX.1-dev\",\n+    name=\"image_generator\",\n+    description=\"Generate an image from a prompt\")\n+image_generation_tool(\"A sunny beach\")\n+```\n+çœ‹ï¼è¿™å°±æ˜¯ä½ ç”Ÿæˆçš„å›¾åƒï¼ğŸ–ï¸\n+\n+<img src=\"https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/transformers/sunny_beach.webp\">\n+\n+ç„¶åï¼Œä½ å¯ä»¥åƒä½¿ç”¨å…¶ä»–å·¥å…·ä¸€æ ·ä½¿ç”¨è¿™ä¸ªå·¥å…·ã€‚ä¾‹å¦‚ï¼Œæ”¹è¿›æç¤º `ç©¿å®‡èˆªæœçš„å…”å­` å¹¶ç”Ÿæˆå…¶å›¾åƒï¼š\n+\n+```python\n+from transformers import ReactCodeAgent\n+\n+agent = ReactCodeAgent(tools=[image_generation_tool])\n+\n+agent.run(\n+    \"Improve this prompt, then generate an image of it.\", prompt='A rabbit wearing a space suit'\n+)\n+```\n+\n+```text\n+=== Agent thoughts:\n+improved_prompt could be \"A bright blue space suit wearing rabbit, on the surface of the moon, under a bright orange sunset, with the Earth visible in the background\"\n+Now that I have improved the prompt, I can use the image generator tool to generate an image based on this prompt.\n+>>> Agent is executing the code below:\n+image = image_generator(prompt=\"A bright blue space suit wearing rabbit, on the surface of the moon, under a bright orange sunset, with the Earth visible in the background\")\n+final_answer(image)\n+```\n+\n+<img src=\"https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/transformers/rabbit_spacesuit_flux.webp\">\n+\n+è¿™çœŸé…·å§ï¼ŸğŸ¤©\n+\n+### ä½¿ç”¨ gradio-tools\n+\n+[gradio-tools](https://github.com/freddyaboulton/gradio-tools) æ˜¯ä¸€ä¸ªå¼ºå¤§çš„åº“ï¼Œå…è®¸ä½¿ç”¨ Hugging Face Spaces ä½œä¸ºå·¥å…·ã€‚å®ƒæ”¯æŒè®¸å¤šç°æœ‰çš„ Spacesï¼Œä¹Ÿæ”¯æŒè‡ªå®šä¹‰ Spacesã€‚\n+\n+transformers æ”¯æŒé€šè¿‡ [`Tool.from_gradio`] æ–¹æ³•ä½¿ç”¨ `gradio_tools`ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯å¦‚ä½•ä½¿ç”¨æ¥è‡ª `gradio-tools` å·¥å…·åŒ…çš„ [`StableDiffusionPromptGeneratorTool`](https://github.com/freddyaboulton/gradio-tools/blob/main/gradio_tools/tools/prompt_generator.py) æ¥æ”¹è¿›æç¤ºï¼Œä»¥ç”Ÿæˆæ›´å¥½çš„å›¾åƒï¼š\n+\n+å¯¼å…¥å’Œå®ä¾‹åŒ–å·¥å…·ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ `Tool.from_gradio` æ–¹æ³•:\n+\n+```python\n+from gradio_tools import StableDiffusionPromptGeneratorTool\n+from transformers import Tool, load_tool, CodeAgent\n+\n+gradio_prompt_generator_tool = StableDiffusionPromptGeneratorTool()\n+prompt_generator_tool = Tool.from_gradio(gradio_prompt_generator_tool)\n+```\n+\n+> [!WARNING]\n+> gradio-tools éœ€è¦ **æ–‡æœ¬** è¾“å…¥å’Œè¾“å‡ºï¼Œå³ä½¿åœ¨å¤„ç†åƒå›¾åƒå’ŒéŸ³é¢‘è¿™æ ·çš„ä¸åŒæ¨¡æ€æ—¶ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ç›®å‰ï¼Œå›¾åƒå’ŒéŸ³é¢‘çš„è¾“å…¥è¾“å‡ºä¸æ­¤ä¸å…¼å®¹ã€‚\n+### ä½¿ç”¨ LangChain å·¥å…·\n+\n+æˆ‘ä»¬å¾ˆå–œæ¬¢ LangChainï¼Œå¹¶è®¤ä¸ºå®ƒæœ‰ä¸€å¥—éå¸¸æœ‰å¸å¼•åŠ›çš„å·¥å…·ã€‚\n+è¦ä» LangChain å¯¼å…¥å·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨ `from_langchain()` æ–¹æ³•ã€‚\n+\n+ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯å¦‚ä½•ä½¿ç”¨å®ƒæ¥é‡æ–°åˆ›å»ºä¸Šé¢ä»‹ç»çš„æœç´¢ç»“æœï¼Œä½¿ç”¨ä¸€ä¸ª LangChain ç½‘ç»œæœç´¢å·¥å…·ã€‚è¯¥å·¥å…·éœ€è¦ `pip install google-search-results` æ¥æ­£å¸¸å·¥ä½œã€‚\n+\n+```python\n+from langchain.agents import load_tools\n+from transformers import Tool, ReactCodeAgent\n+\n+search_tool = Tool.from_langchain(load_tools([\"serpapi\"])[0])\n+\n+agent = ReactCodeAgent(tools=[search_tool])\n+\n+agent.run(\"How many more blocks (also denoted as layers) are in BERT base encoder compared to the encoder from the architecture proposed in Attention is All You Need?\")\n+```\n+\n+## åœ¨é…·ç‚«çš„ Gradio ç•Œé¢ä¸­å±•ç¤ºæ™ºèƒ½ä½“è¿è¡Œ\n+\n+ä½ å¯ä»¥åˆ©ç”¨ `gradio.Chatbot` æ¥å±•ç¤ºæ™ºèƒ½ä½“çš„æ€è€ƒè¿‡ç¨‹ï¼Œé€šè¿‡ `stream_to_gradio`ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š\n+\n+```py\n+import gradio as gr\n+from transformers import (\n+    load_tool,\n+    ReactCodeAgent,\n+    HfApiEngine,\n+    stream_to_gradio,\n+)\n+\n+# Import tool from Hub\n+image_generation_tool = load_tool(\"m-ric/text-to-image\")\n+\n+llm_engine = HfApiEngine(\"meta-llama/Meta-Llama-3-70B-Instruct\")\n+\n+# Initialize the agent with the image generation tool\n+agent = ReactCodeAgent(tools=[image_generation_tool], llm_engine=llm_engine)\n+\n+\n+def interact_with_agent(task):\n+    messages = []\n+    messages.append(gr.ChatMessage(role=\"user\", content=task))\n+    yield messages\n+    for msg in stream_to_gradio(agent, task):\n+        messages.append(msg)\n+        yield messages + [\n+            gr.ChatMessage(role=\"assistant\", content=\"â³ Task not finished yet!\")\n+        ]\n+    yield messages\n+\n+\n+with gr.Blocks() as demo:\n+    text_input = gr.Textbox(lines=1, label=\"Chat Message\", value=\"Make me a picture of the Statue of Liberty.\")\n+    submit = gr.Button(\"Run illustrator agent!\")\n+    chatbot = gr.Chatbot(\n+        label=\"Agent\",\n+        type=\"messages\",\n+        avatar_images=(\n+            None,\n+            \"https://em-content.zobj.net/source/twitter/53/robot-face_1f916.png\",\n+        ),\n+    )\n+    submit.click(interact_with_agent, [text_input], [chatbot])\n+\n+if __name__ == \"__main__\":\n+    demo.launch()\n+```\n\\ No newline at end of file"
        }
    ],
    "stats": {
        "total": 252,
        "additions": 252,
        "deletions": 0
    }
}