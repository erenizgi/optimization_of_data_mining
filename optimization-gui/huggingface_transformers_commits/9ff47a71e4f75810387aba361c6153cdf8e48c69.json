{
    "author": "yannicks1",
    "message": "Fix condition for emitting warning when generation exceeds max model length (#40775)\n\ncorrect warning when generation exceeds max model length\n\nSigned-off-by: Yannick Schnider <yannick.schnider1@ibm.com>",
    "sha": "9ff47a71e4f75810387aba361c6153cdf8e48c69",
    "files": [
        {
            "sha": "afb1ab02c4048b9ed727746c3e10fd7a54a70118",
            "filename": "src/transformers/generation/stopping_criteria.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/9ff47a71e4f75810387aba361c6153cdf8e48c69/src%2Ftransformers%2Fgeneration%2Fstopping_criteria.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/9ff47a71e4f75810387aba361c6153cdf8e48c69/src%2Ftransformers%2Fgeneration%2Fstopping_criteria.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fgeneration%2Fstopping_criteria.py?ref=9ff47a71e4f75810387aba361c6153cdf8e48c69",
            "patch": "@@ -76,9 +76,9 @@ def __init__(self, max_length: int, max_position_embeddings: Optional[int] = Non\n     def __call__(self, input_ids: torch.LongTensor, scores: torch.FloatTensor, **kwargs) -> torch.BoolTensor:\n         cur_len = input_ids.shape[1]\n         is_done = cur_len >= self.max_length\n-        if self.max_position_embeddings is not None and not is_done and cur_len >= self.max_position_embeddings:\n+        if self.max_position_embeddings is not None and not is_done and cur_len > self.max_position_embeddings:\n             logger.warning_once(\n-                \"This is a friendly reminder - the current text generation call will exceed the model's predefined \"\n+                \"This is a friendly reminder - the current text generation call has exceeded the model's predefined \"\n                 f\"maximum length ({self.max_position_embeddings}). Depending on the model, you may observe \"\n                 \"exceptions, performance degradation, or nothing at all.\"\n             )"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}