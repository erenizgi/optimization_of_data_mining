{
    "author": "philkuz",
    "message": "fix(DPT,Depth-Anything) Address expected_slice errors inside inference tests (#34518)\n\n* fix(DPT,Depth-Anything) Address expected_slice errors inside inference tests\r\n\r\nSigned-off-by: Phillip Kuznetsov <philkuz@gimletlabs.ai>\r\n\r\n* [run_slow] dpt, depth_anything\r\n\r\n---------\r\n\r\nSigned-off-by: Phillip Kuznetsov <philkuz@gimletlabs.ai>",
    "sha": "b5919e12f74190a5f50a47f07cb708ceb029244d",
    "files": [
        {
            "sha": "344d949fa4fe6cf2a9a1cf47fbc7ad24307218c7",
            "filename": "tests/models/depth_anything/test_modeling_depth_anything.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/b5919e12f74190a5f50a47f07cb708ceb029244d/tests%2Fmodels%2Fdepth_anything%2Ftest_modeling_depth_anything.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/b5919e12f74190a5f50a47f07cb708ceb029244d/tests%2Fmodels%2Fdepth_anything%2Ftest_modeling_depth_anything.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Fdepth_anything%2Ftest_modeling_depth_anything.py?ref=b5919e12f74190a5f50a47f07cb708ceb029244d",
            "patch": "@@ -263,7 +263,7 @@ def test_inference(self):\n         self.assertEqual(predicted_depth.shape, expected_shape)\n \n         expected_slice = torch.tensor(\n-            [[8.8204, 8.6468, 8.6195], [8.3313, 8.6027, 8.7526], [8.6526, 8.6866, 8.7453]],\n+            [[8.8223, 8.6483, 8.6216], [8.3332, 8.6047, 8.7545], [8.6547, 8.6885, 8.7472]],\n         ).to(torch_device)\n \n         self.assertTrue(torch.allclose(predicted_depth[0, :3, :3], expected_slice, atol=1e-6))\n@@ -286,7 +286,7 @@ def test_inference(self):\n         self.assertEqual(predicted_depth.shape, expected_shape)\n \n         expected_slice = torch.tensor(\n-            [[1.3349, 1.2946, 1.2801], [1.2793, 1.2337, 1.2899], [1.2629, 1.2218, 1.2476]],\n+            [[1.3349, 1.2947, 1.2802], [1.2794, 1.2338, 1.2901], [1.2630, 1.2219, 1.2478]],\n         ).to(torch_device)\n \n         self.assertTrue(torch.allclose(predicted_depth[0, :3, :3], expected_slice, atol=1e-4))"
        },
        {
            "sha": "ff6dd04528dbaa6a8010b61bd73d75d14aa4ecd9",
            "filename": "tests/models/dpt/test_modeling_dpt_auto_backbone.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/b5919e12f74190a5f50a47f07cb708ceb029244d/tests%2Fmodels%2Fdpt%2Ftest_modeling_dpt_auto_backbone.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/b5919e12f74190a5f50a47f07cb708ceb029244d/tests%2Fmodels%2Fdpt%2Ftest_modeling_dpt_auto_backbone.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fmodels%2Fdpt%2Ftest_modeling_dpt_auto_backbone.py?ref=b5919e12f74190a5f50a47f07cb708ceb029244d",
            "patch": "@@ -274,7 +274,7 @@ def test_inference_depth_estimation_dinov2(self):\n         self.assertEqual(predicted_depth.shape, expected_shape)\n \n         expected_slice = torch.tensor(\n-            [[6.0433, 7.1636, 7.4268], [6.9047, 7.2471, 7.2355], [7.9261, 8.0631, 8.0244]]\n+            [[6.0336, 7.1502, 7.4130], [6.8977, 7.2383, 7.2268], [7.9180, 8.0525, 8.0134]]\n         ).to(torch_device)\n \n         self.assertTrue(torch.allclose(outputs.predicted_depth[0, :3, :3], expected_slice, atol=1e-4))"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 3,
        "deletions": 3
    }
}