{
    "author": "Wauplin",
    "message": "Remove deprecated `get_cached_models` (#35809)\n\n* Remove deprecated get_cached_models\r\n\r\n* imports",
    "sha": "7051c5fcc8c13e67063b20cda4ee7b8462f168bd",
    "files": [
        {
            "sha": "4fae91f43fdbf314bfb76fe80de9f0c41c2132fd",
            "filename": "src/transformers/file_utils.py",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/huggingface/transformers/blob/7051c5fcc8c13e67063b20cda4ee7b8462f168bd/src%2Ftransformers%2Ffile_utils.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/7051c5fcc8c13e67063b20cda4ee7b8462f168bd/src%2Ftransformers%2Ffile_utils.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Ffile_utils.py?ref=7051c5fcc8c13e67063b20cda4ee7b8462f168bd",
            "patch": "@@ -71,7 +71,6 @@\n     copy_func,\n     default_cache_path,\n     define_sagemaker_information,\n-    get_cached_models,\n     get_file_from_repo,\n     get_torch_version,\n     has_file,"
        },
        {
            "sha": "e5aedf5916fafebdfe1b6db8f2839e849406c4c0",
            "filename": "src/transformers/utils/__init__.py",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/huggingface/transformers/blob/7051c5fcc8c13e67063b20cda4ee7b8462f168bd/src%2Ftransformers%2Futils%2F__init__.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/7051c5fcc8c13e67063b20cda4ee7b8462f168bd/src%2Ftransformers%2Futils%2F__init__.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Futils%2F__init__.py?ref=7051c5fcc8c13e67063b20cda4ee7b8462f168bd",
            "patch": "@@ -91,7 +91,6 @@\n     define_sagemaker_information,\n     download_url,\n     extract_commit_hash,\n-    get_cached_models,\n     get_file_from_repo,\n     has_file,\n     http_user_agent,"
        },
        {
            "sha": "843b9ce667c2948d3ea7b28f9ec9d2a27e00d288",
            "filename": "src/transformers/utils/hub.py",
            "status": "modified",
            "additions": 1,
            "deletions": 41,
            "changes": 42,
            "blob_url": "https://github.com/huggingface/transformers/blob/7051c5fcc8c13e67063b20cda4ee7b8462f168bd/src%2Ftransformers%2Futils%2Fhub.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/7051c5fcc8c13e67063b20cda4ee7b8462f168bd/src%2Ftransformers%2Futils%2Fhub.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Futils%2Fhub.py?ref=7051c5fcc8c13e67063b20cda4ee7b8462f168bd",
            "patch": "@@ -25,7 +25,7 @@\n import warnings\n from concurrent import futures\n from pathlib import Path\n-from typing import Dict, List, Optional, Tuple, Union\n+from typing import Dict, List, Optional, Union\n from urllib.parse import urlparse\n from uuid import uuid4\n \n@@ -60,7 +60,6 @@\n     hf_raise_for_status,\n     send_telemetry,\n )\n-from huggingface_hub.utils._deprecation import _deprecate_method\n from requests.exceptions import HTTPError\n \n from . import __version__, logging\n@@ -165,45 +164,6 @@ def is_remote_url(url_or_filename):\n     return parsed.scheme in (\"http\", \"https\")\n \n \n-# TODO: remove this once fully deprecated\n-# TODO? remove from './examples/research_projects/lxmert/utils.py' as well\n-# TODO? remove from './examples/research_projects/visual_bert/utils.py' as well\n-@_deprecate_method(version=\"4.39.0\", message=\"This method is outdated and does not support the new cache system.\")\n-def get_cached_models(cache_dir: Union[str, Path] = None) -> List[Tuple]:\n-    \"\"\"\n-    Returns a list of tuples representing model binaries that are cached locally. Each tuple has shape `(model_url,\n-    etag, size_MB)`. Filenames in `cache_dir` are use to get the metadata for each model, only urls ending with *.bin*\n-    are added.\n-\n-    Args:\n-        cache_dir (`Union[str, Path]`, *optional*):\n-            The cache directory to search for models within. Will default to the transformers cache if unset.\n-\n-    Returns:\n-        List[Tuple]: List of tuples each with shape `(model_url, etag, size_MB)`\n-    \"\"\"\n-    if cache_dir is None:\n-        cache_dir = TRANSFORMERS_CACHE\n-    elif isinstance(cache_dir, Path):\n-        cache_dir = str(cache_dir)\n-    if not os.path.isdir(cache_dir):\n-        return []\n-\n-    cached_models = []\n-    for file in os.listdir(cache_dir):\n-        if file.endswith(\".json\"):\n-            meta_path = os.path.join(cache_dir, file)\n-            with open(meta_path, encoding=\"utf-8\") as meta_file:\n-                metadata = json.load(meta_file)\n-                url = metadata[\"url\"]\n-                etag = metadata[\"etag\"]\n-                if url.endswith(\".bin\"):\n-                    size_MB = os.path.getsize(meta_path.strip(\".json\")) / 1e6\n-                    cached_models.append((url, etag, size_MB))\n-\n-    return cached_models\n-\n-\n def define_sagemaker_information():\n     try:\n         instance_data = requests.get(os.environ[\"ECS_CONTAINER_METADATA_URI\"]).json()"
        }
    ],
    "stats": {
        "total": 44,
        "additions": 1,
        "deletions": 43
    }
}