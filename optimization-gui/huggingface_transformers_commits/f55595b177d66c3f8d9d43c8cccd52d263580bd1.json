{
    "author": "AlekseyLobanov",
    "message": "Fix performance in get_imports regexp (#34298)\n\n* fix: Fix performance in get_imports regexp\r\n\r\n* Minimize get_imports content regexp",
    "sha": "f55595b177d66c3f8d9d43c8cccd52d263580bd1",
    "files": [
        {
            "sha": "bf44d4b427cf7b7bf76e1c550fa08b3dbc56b673",
            "filename": "src/transformers/dynamic_module_utils.py",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/f55595b177d66c3f8d9d43c8cccd52d263580bd1/src%2Ftransformers%2Fdynamic_module_utils.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/f55595b177d66c3f8d9d43c8cccd52d263580bd1/src%2Ftransformers%2Fdynamic_module_utils.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fdynamic_module_utils.py?ref=f55595b177d66c3f8d9d43c8cccd52d263580bd1",
            "patch": "@@ -152,7 +152,8 @@ def get_imports(filename: Union[str, os.PathLike]) -> List[str]:\n         content = f.read()\n \n     # filter out try/except block so in custom code we can have try/except imports\n-    content = re.sub(r\"\\s*try\\s*:\\s*.*?\\s*except\\s*.*?:\", \"\", content, flags=re.MULTILINE | re.DOTALL)\n+    content = re.sub(r\"\\s*try\\s*:.*?except.*?:\", \"\", content, flags=re.DOTALL)\n+\n     # filter out imports under is_flash_attn_2_available block for avoid import issues in cpu only environment\n     content = re.sub(\n         r\"if is_flash_attn[a-zA-Z0-9_]+available\\(\\):\\s*(from flash_attn\\s*.*\\s*)+\", \"\", content, flags=re.MULTILINE"
        }
    ],
    "stats": {
        "total": 3,
        "additions": 2,
        "deletions": 1
    }
}