{
    "author": "ydshieh",
    "message": "Fix `detectron2` installation in docker files (#41975)\n\n* detectron2 - part 1\n\n* detectron2 - part 2\n\n---------\n\nCo-authored-by: ydshieh <ydshieh@users.noreply.github.com>",
    "sha": "0ed6d51ae8ed3f4fafca67a983b8d75bc76cd51b",
    "files": [
        {
            "sha": "1ff4b07e29766a9f6234b535e2fa8d53579be332",
            "filename": "docker/transformers-all-latest-gpu/Dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/0ed6d51ae8ed3f4fafca67a983b8d75bc76cd51b/docker%2Ftransformers-all-latest-gpu%2FDockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/0ed6d51ae8ed3f4fafca67a983b8d75bc76cd51b/docker%2Ftransformers-all-latest-gpu%2FDockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftransformers-all-latest-gpu%2FDockerfile?ref=0ed6d51ae8ed3f4fafca67a983b8d75bc76cd51b",
            "patch": "@@ -67,7 +67,7 @@ RUN set -e; \\\n \n RUN python3 -m pip install --no-cache-dir -U timm\n \n-RUN [ \"$PYTORCH\" != \"pre\" ] && python3 -m pip install --no-cache-dir git+https://github.com/facebookresearch/detectron2.git || echo \"Don't install detectron2 with nightly torch\"\n+RUN [ \"$PYTORCH\" != \"pre\" ] && python3 -m pip install --no-cache-dir --no-build-isolation git+https://github.com/facebookresearch/detectron2.git || echo \"Don't install detectron2 with nightly torch\"\n \n RUN python3 -m pip install --no-cache-dir pytesseract\n "
        },
        {
            "sha": "4a2e0987e1392f1e52e2b8018b9ceafb8438021c",
            "filename": "docker/transformers-doc-builder/Dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/0ed6d51ae8ed3f4fafca67a983b8d75bc76cd51b/docker%2Ftransformers-doc-builder%2FDockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/0ed6d51ae8ed3f4fafca67a983b8d75bc76cd51b/docker%2Ftransformers-doc-builder%2FDockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftransformers-doc-builder%2FDockerfile?ref=0ed6d51ae8ed3f4fafca67a983b8d75bc76cd51b",
            "patch": "@@ -10,7 +10,7 @@ RUN apt-get -y update && apt-get install -y libsndfile1-dev && apt install -y te\n # Torch needs to be installed before deepspeed\n RUN python3 -m pip install --no-cache-dir ./transformers[deepspeed]\n \n-RUN python3 -m pip install --no-cache-dir torchvision git+https://github.com/facebookresearch/detectron2.git pytesseract\n+RUN python3 -m pip install --no-cache-dir --no-build-isolation torchvision git+https://github.com/facebookresearch/detectron2.git pytesseract\n RUN python3 -m pip install -U \"itsdangerous<2.1.0\"\n \n # Test if the image could successfully build the doc. before publishing the image"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}