{
    "author": "aymeric-roucher",
    "message": "Add duckduckgo search tool (#32882)\n\n* Add duckduckgo search tool",
    "sha": "1ca9ff5c91203b836a8a1f97dae1fd041550b27f",
    "files": [
        {
            "sha": "8495e1a8548a523a0052783ec96e4243a0d3facb",
            "filename": "docs/source/en/agents.md",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/huggingface/transformers/blob/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/docs%2Fsource%2Fen%2Fagents.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/docs%2Fsource%2Fen%2Fagents.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fagents.md?ref=1ca9ff5c91203b836a8a1f97dae1fd041550b27f",
            "patch": "@@ -283,7 +283,8 @@ Transformers comes with a default toolbox for empowering agents, that you can ad\n - **Speech to text**: given an audio recording of a person talking, transcribe the speech into text ([Whisper](./model_doc/whisper))\n - **Text to speech**: convert text to speech ([SpeechT5](./model_doc/speecht5))\n - **Translation**: translates a given sentence from source language to target language.\n-- **Python code interpreter**: runs your the LLM generated Python code in a secure environment. This tool will only be added to [`ReactJsonAgent`] if you use `add_base_tools=True`, since code-based tools can already execute Python code\n+- **DuckDuckGo search***: performs a web search using DuckDuckGo browser.\n+- **Python code interpreter**: runs your the LLM generated Python code in a secure environment. This tool will only be added to [`ReactJsonAgent`] if you initialize it with `add_base_tools=True`, since code-based agent can already natively execute Python code\n \n \n You can manually use a tool by calling the [`load_tool`] function and a task to perform."
        },
        {
            "sha": "4235d4c0d70d6cf9c322f1c7208b0ef040f6e8f7",
            "filename": "src/transformers/agents/__init__.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/src%2Ftransformers%2Fagents%2F__init__.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/src%2Ftransformers%2Fagents%2F__init__.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fagents%2F__init__.py?ref=1ca9ff5c91203b836a8a1f97dae1fd041550b27f",
            "patch": "@@ -39,6 +39,7 @@\n     _import_structure[\"default_tools\"] = [\"FinalAnswerTool\", \"PythonInterpreterTool\"]\n     _import_structure[\"document_question_answering\"] = [\"DocumentQuestionAnsweringTool\"]\n     _import_structure[\"image_question_answering\"] = [\"ImageQuestionAnsweringTool\"]\n+    _import_structure[\"search\"] = [\"DuckDuckGoSearchTool\"]\n     _import_structure[\"speech_to_text\"] = [\"SpeechToTextTool\"]\n     _import_structure[\"text_to_speech\"] = [\"TextToSpeechTool\"]\n     _import_structure[\"translation\"] = [\"TranslationTool\"]\n@@ -58,6 +59,7 @@\n         from .default_tools import FinalAnswerTool, PythonInterpreterTool\n         from .document_question_answering import DocumentQuestionAnsweringTool\n         from .image_question_answering import ImageQuestionAnsweringTool\n+        from .search import DuckDuckGoSearchTool\n         from .speech_to_text import SpeechToTextTool\n         from .text_to_speech import TextToSpeechTool\n         from .translation import TranslationTool"
        },
        {
            "sha": "84bbf3a973866713d7c3c3ab1fbe840d87a9b8a7",
            "filename": "src/transformers/agents/default_tools.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/src%2Ftransformers%2Fagents%2Fdefault_tools.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/src%2Ftransformers%2Fagents%2Fdefault_tools.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fagents%2Fdefault_tools.py?ref=1ca9ff5c91203b836a8a1f97dae1fd041550b27f",
            "patch": "@@ -25,7 +25,7 @@\n \n from ..utils import is_offline_mode\n from .python_interpreter import LIST_SAFE_MODULES, evaluate_python_code\n-from .tools import TASK_MAPPING, TOOL_CONFIG_FILE, Tool\n+from .tools import TOOL_CONFIG_FILE, TOOL_MAPPING, Tool\n \n \n def custom_print(*args):\n@@ -133,7 +133,7 @@ def setup_default_tools(logger):\n     main_module = importlib.import_module(\"transformers\")\n     tools_module = main_module.agents\n \n-    for task_name, tool_class_name in TASK_MAPPING.items():\n+    for task_name, tool_class_name in TOOL_MAPPING.items():\n         tool_class = getattr(tools_module, tool_class_name)\n         tool_instance = tool_class()\n         default_tools[tool_class.name] = PreTool("
        },
        {
            "sha": "702363a21e483b0b8978215aaee897a03ac9c1e8",
            "filename": "src/transformers/agents/python_interpreter.py",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/src%2Ftransformers%2Fagents%2Fpython_interpreter.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/src%2Ftransformers%2Fagents%2Fpython_interpreter.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fagents%2Fpython_interpreter.py?ref=1ca9ff5c91203b836a8a1f97dae1fd041550b27f",
            "patch": "@@ -444,6 +444,8 @@ def evaluate_subscript(subscript, state, static_tools, custom_tools):\n     index = evaluate_ast(subscript.slice, state, static_tools, custom_tools)\n     value = evaluate_ast(subscript.value, state, static_tools, custom_tools)\n \n+    if isinstance(value, str) and isinstance(index, str):\n+        raise InterpreterError(\"You're trying to subscript a string with a string index, which is impossible\")\n     if isinstance(value, pd.core.indexing._LocIndexer):\n         parent_object = value.obj\n         return parent_object.loc[index]"
        },
        {
            "sha": "0b33c92733a9122b6f90d4605bbcdde8c15b0e82",
            "filename": "src/transformers/agents/search.py",
            "status": "added",
            "additions": 35,
            "deletions": 0,
            "changes": 35,
            "blob_url": "https://github.com/huggingface/transformers/blob/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/src%2Ftransformers%2Fagents%2Fsearch.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/src%2Ftransformers%2Fagents%2Fsearch.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fagents%2Fsearch.py?ref=1ca9ff5c91203b836a8a1f97dae1fd041550b27f",
            "patch": "@@ -0,0 +1,35 @@\n+#!/usr/bin/env python\n+# coding=utf-8\n+\n+# Copyright 2023 The HuggingFace Inc. team. All rights reserved.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+from .tools import Tool\n+\n+\n+class DuckDuckGoSearchTool(Tool):\n+    name = \"web_search\"\n+    description = \"\"\"Perform a web search based on your query (think a Google search) then returns the top search results as a list of dict elements.\n+    Each result has keys 'title', 'href' and 'body'.\"\"\"\n+    inputs = {\"query\": {\"type\": \"text\", \"description\": \"The search query to perform.\"}}\n+    output_type = \"any\"\n+\n+    def forward(self, query: str) -> str:\n+        try:\n+            from duckduckgo_search import DDGS\n+        except ImportError:\n+            raise ImportError(\n+                \"You must install package `duckduckgo_search`: for instance run `pip install duckduckgo-search`.\"\n+            )\n+        results = DDGS().text(query, max_results=7)\n+        return results"
        },
        {
            "sha": "f97ccc2e10ced0c5984802d8729573d1f16ab31d",
            "filename": "src/transformers/agents/tools.py",
            "status": "modified",
            "additions": 12,
            "deletions": 11,
            "changes": 23,
            "blob_url": "https://github.com/huggingface/transformers/blob/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/src%2Ftransformers%2Fagents%2Ftools.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/src%2Ftransformers%2Fagents%2Ftools.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fagents%2Ftools.py?ref=1ca9ff5c91203b836a8a1f97dae1fd041550b27f",
            "patch": "@@ -643,13 +643,14 @@ def fn(*args, **kwargs):\n     ).launch()\n \n \n-TASK_MAPPING = {\n-    \"document-question-answering\": \"DocumentQuestionAnsweringTool\",\n-    \"image-question-answering\": \"ImageQuestionAnsweringTool\",\n-    \"speech-to-text\": \"SpeechToTextTool\",\n-    \"text-to-speech\": \"TextToSpeechTool\",\n+TOOL_MAPPING = {\n+    \"document_question_answering\": \"DocumentQuestionAnsweringTool\",\n+    \"image_question_answering\": \"ImageQuestionAnsweringTool\",\n+    \"speech_to_text\": \"SpeechToTextTool\",\n+    \"text_to_speech\": \"TextToSpeechTool\",\n     \"translation\": \"TranslationTool\",\n     \"python_interpreter\": \"PythonInterpreterTool\",\n+    \"web_search\": \"DuckDuckGoSearchTool\",\n }\n \n \n@@ -670,10 +671,10 @@ def load_tool(task_or_repo_id, model_repo_id=None, token=None, **kwargs):\n             The task for which to load the tool or a repo ID of a tool on the Hub. Tasks implemented in Transformers\n             are:\n \n-            - `\"document-question-answering\"`\n-            - `\"image-question-answering\"`\n-            - `\"speech-to-text\"`\n-            - `\"text-to-speech\"`\n+            - `\"document_question_answering\"`\n+            - `\"image_question_answering\"`\n+            - `\"speech_to_text\"`\n+            - `\"text_to_speech\"`\n             - `\"translation\"`\n \n         model_repo_id (`str`, *optional*):\n@@ -686,8 +687,8 @@ def load_tool(task_or_repo_id, model_repo_id=None, token=None, **kwargs):\n             `cache_dir`, `revision`, `subfolder`) will be used when downloading the files for your tool, and the others\n             will be passed along to its init.\n     \"\"\"\n-    if task_or_repo_id in TASK_MAPPING:\n-        tool_class_name = TASK_MAPPING[task_or_repo_id]\n+    if task_or_repo_id in TOOL_MAPPING:\n+        tool_class_name = TOOL_MAPPING[task_or_repo_id]\n         main_module = importlib.import_module(\"transformers\")\n         tools_module = main_module.agents\n         tool_class = getattr(tools_module, tool_class_name)"
        },
        {
            "sha": "d135551084bc97f1ee2b5f4c9b79c41470d31d04",
            "filename": "tests/agents/test_document_question_answering.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/tests%2Fagents%2Ftest_document_question_answering.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/tests%2Fagents%2Ftest_document_question_answering.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fagents%2Ftest_document_question_answering.py?ref=1ca9ff5c91203b836a8a1f97dae1fd041550b27f",
            "patch": "@@ -24,7 +24,7 @@\n \n class DocumentQuestionAnsweringToolTester(unittest.TestCase, ToolTesterMixin):\n     def setUp(self):\n-        self.tool = load_tool(\"document-question-answering\")\n+        self.tool = load_tool(\"document_question_answering\")\n         self.tool.setup()\n \n     def test_exact_match_arg(self):"
        },
        {
            "sha": "405933e78a1156ebbf1834886c32f82e034ae723",
            "filename": "tests/agents/test_image_question_answering.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/tests%2Fagents%2Ftest_image_question_answering.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/tests%2Fagents%2Ftest_image_question_answering.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fagents%2Ftest_image_question_answering.py?ref=1ca9ff5c91203b836a8a1f97dae1fd041550b27f",
            "patch": "@@ -28,7 +28,7 @@\n \n class ImageQuestionAnsweringToolTester(unittest.TestCase, ToolTesterMixin):\n     def setUp(self):\n-        self.tool = load_tool(\"image-question-answering\")\n+        self.tool = load_tool(\"image_question_answering\")\n         self.tool.setup()\n \n     def test_exact_match_arg(self):"
        },
        {
            "sha": "84710cfec68526061041a57f4501866e8f4ed58d",
            "filename": "tests/agents/test_python_interpreter.py",
            "status": "modified",
            "additions": 17,
            "deletions": 7,
            "changes": 24,
            "blob_url": "https://github.com/huggingface/transformers/blob/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/tests%2Fagents%2Ftest_python_interpreter.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/tests%2Fagents%2Ftest_python_interpreter.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fagents%2Ftest_python_interpreter.py?ref=1ca9ff5c91203b836a8a1f97dae1fd041550b27f",
            "patch": "@@ -176,6 +176,23 @@ def test_evaluate_subscript(self):\n         assert result == 5\n         self.assertDictEqual(state, {\"x\": 3, \"test_dict\": {\"x\": 3, \"y\": 5}, \"print_outputs\": \"\"})\n \n+        code = \"vendor = {'revenue': 31000, 'rent': 50312}; vendor['ratio'] = round(vendor['revenue'] / vendor['rent'], 2)\"\n+        state = {}\n+        evaluate_python_code(code, {\"min\": min, \"print\": print, \"round\": round}, state=state)\n+        assert state[\"vendor\"] == {\"revenue\": 31000, \"rent\": 50312, \"ratio\": 0.62}\n+\n+    def test_subscript_string_with_string_index_raises_appropriate_error(self):\n+        code = \"\"\"\n+search_results = \"[{'title': 'Paris, Ville de Paris, France Weather Forecast | AccuWeather', 'href': 'https://www.accuweather.com/en/fr/paris/623/weather-forecast/623', 'body': 'Get the latest weather forecast for Paris, Ville de Paris, France , including hourly, daily, and 10-day outlooks. AccuWeather provides you with reliable and accurate information on temperature ...'}]\"\n+for result in search_results:\n+    if 'current' in result['title'].lower() or 'temperature' in result['title'].lower():\n+        current_weather_url = result['href']\n+        print(current_weather_url)\n+        break\"\"\"\n+        with pytest.raises(InterpreterError) as e:\n+            evaluate_python_code(code, BASE_PYTHON_TOOLS, state={})\n+            assert \"You're trying to subscript a string with a string index\" in e\n+\n     def test_evaluate_for(self):\n         code = \"x = 0\\nfor i in range(3):\\n    x = i\"\n         state = {}\n@@ -573,13 +590,6 @@ def method_that_raises(self):\n         evaluate_python_code(code, {\"print\": print, \"len\": len, \"super\": super, \"str\": str, \"sum\": sum}, state=state)\n         assert state[\"exception_message\"] == \"An error occurred\"\n \n-    def test_subscript(self):\n-        code = \"vendor = {'revenue': 31000, 'rent': 50312}; vendor['ratio'] = round(vendor['revenue'] / vendor['rent'], 2)\"\n-\n-        state = {}\n-        evaluate_python_code(code, {\"min\": min, \"print\": print, \"round\": round}, state=state)\n-        assert state[\"vendor\"] == {\"revenue\": 31000, \"rent\": 50312, \"ratio\": 0.62}\n-\n     def test_print(self):\n         code = \"print(min([1, 2, 3]))\"\n         state = {}"
        },
        {
            "sha": "7e40e3ca2957bbc46a9ed7bec6df9cb28432cc53",
            "filename": "tests/agents/test_search.py",
            "status": "added",
            "additions": 30,
            "deletions": 0,
            "changes": 30,
            "blob_url": "https://github.com/huggingface/transformers/blob/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/tests%2Fagents%2Ftest_search.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/tests%2Fagents%2Ftest_search.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fagents%2Ftest_search.py?ref=1ca9ff5c91203b836a8a1f97dae1fd041550b27f",
            "patch": "@@ -0,0 +1,30 @@\n+# coding=utf-8\n+# Copyright 2024 HuggingFace Inc.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+import unittest\n+\n+from transformers import load_tool\n+\n+from .test_tools_common import ToolTesterMixin\n+\n+\n+class DuckDuckGoSearchToolTester(unittest.TestCase, ToolTesterMixin):\n+    def setUp(self):\n+        self.tool = load_tool(\"web_search\")\n+        self.tool.setup()\n+\n+    def test_exact_match_arg(self):\n+        result = self.tool(\"Agents\")\n+        assert isinstance(result, list) and isinstance(result[0], dict)"
        },
        {
            "sha": "3d6e9a392950d0fd11c4ade30920f83f17f890c3",
            "filename": "tests/agents/test_speech_to_text.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/tests%2Fagents%2Ftest_speech_to_text.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/tests%2Fagents%2Ftest_speech_to_text.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fagents%2Ftest_speech_to_text.py?ref=1ca9ff5c91203b836a8a1f97dae1fd041550b27f",
            "patch": "@@ -24,7 +24,7 @@\n \n class SpeechToTextToolTester(unittest.TestCase, ToolTesterMixin):\n     def setUp(self):\n-        self.tool = load_tool(\"speech-to-text\")\n+        self.tool = load_tool(\"speech_to_text\")\n         self.tool.setup()\n \n     def test_exact_match_arg(self):"
        },
        {
            "sha": "d8ed9afcbf8f1f3806b22f2797666b9341df88a8",
            "filename": "tests/agents/test_text_to_speech.py",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/tests%2Fagents%2Ftest_text_to_speech.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/tests%2Fagents%2Ftest_text_to_speech.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fagents%2Ftest_text_to_speech.py?ref=1ca9ff5c91203b836a8a1f97dae1fd041550b27f",
            "patch": "@@ -30,7 +30,7 @@\n @require_torch\n class TextToSpeechToolTester(unittest.TestCase, ToolTesterMixin):\n     def setUp(self):\n-        self.tool = load_tool(\"text-to-speech\")\n+        self.tool = load_tool(\"text_to_speech\")\n         self.tool.setup()\n \n     def test_exact_match_arg(self):"
        },
        {
            "sha": "679473d0f24b4dffed2d44ee991c90a7a18b79b2",
            "filename": "tests/agents/test_tools_common.py",
            "status": "modified",
            "additions": 3,
            "deletions": 8,
            "changes": 11,
            "blob_url": "https://github.com/huggingface/transformers/blob/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/tests%2Fagents%2Ftest_tools_common.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/tests%2Fagents%2Ftest_tools_common.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fagents%2Ftest_tools_common.py?ref=1ca9ff5c91203b836a8a1f97dae1fd041550b27f",
            "patch": "@@ -90,18 +90,13 @@ def test_common_attributes(self):\n     def test_agent_type_output(self):\n         inputs = create_inputs(self.tool.inputs)\n         output = self.tool(**inputs)\n-        agent_type = AGENT_TYPE_MAPPING[self.tool.output_type]\n-        self.assertTrue(isinstance(output, agent_type))\n+        if self.tool.output_type != \"any\":\n+            agent_type = AGENT_TYPE_MAPPING[self.tool.output_type]\n+            self.assertTrue(isinstance(output, agent_type))\n \n     def test_agent_types_inputs(self):\n         inputs = create_inputs(self.tool.inputs)\n         _inputs = []\n         for _input, expected_input in zip(inputs, self.tool.inputs.values()):\n             input_type = expected_input[\"type\"]\n             _inputs.append(AGENT_TYPE_MAPPING[input_type](_input))\n-\n-        output_type = AGENT_TYPE_MAPPING[self.tool.output_type]\n-\n-        # Should not raise an error\n-        output = self.tool(**inputs)\n-        self.assertTrue(isinstance(output, output_type))"
        },
        {
            "sha": "9027dd1731382bab4ca62ec71e58e2552113cdde",
            "filename": "tests/agents/test_translation.py",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/huggingface/transformers/blob/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/tests%2Fagents%2Ftest_translation.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/1ca9ff5c91203b836a8a1f97dae1fd041550b27f/tests%2Fagents%2Ftest_translation.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Fagents%2Ftest_translation.py?ref=1ca9ff5c91203b836a8a1f97dae1fd041550b27f",
            "patch": "@@ -44,7 +44,6 @@ def test_call(self):\n     def test_agent_type_output(self):\n         inputs = [\"Hey, what's up?\", \"English\", \"Spanish\"]\n         output = self.tool(*inputs)\n-\n         output_type = AGENT_TYPE_MAPPING[self.tool.output_type]\n         self.assertTrue(isinstance(output, output_type))\n "
        }
    ],
    "stats": {
        "total": 143,
        "additions": 109,
        "deletions": 34
    }
}