{
    "author": "jzhang533",
    "message": "update ernie model card (#39657)\n\n* update ernie model doc\n\nSigned-off-by: Zhang Jun <jzhang533@gmail.com>\n\n* address ruff format error reported by ci\n\nSigned-off-by: Zhang Jun <jzhang533@gmail.com>\n\n* address check_repository_consistency error reported by ci\n\nSigned-off-by: Zhang Jun <jzhang533@gmail.com>\n\n---------\n\nSigned-off-by: Zhang Jun <jzhang533@gmail.com>\nCo-authored-by: Arthur <48595927+ArthurZucker@users.noreply.github.com>",
    "sha": "02ea23cbdea63c46a2f3cb1a58d5b6f8d96f6872",
    "files": [
        {
            "sha": "8b2290ded6851305b5de0c7332e0783556af55ec",
            "filename": "docs/source/en/model_doc/ernie.md",
            "status": "modified",
            "additions": 73,
            "deletions": 26,
            "changes": 99,
            "blob_url": "https://github.com/huggingface/transformers/blob/02ea23cbdea63c46a2f3cb1a58d5b6f8d96f6872/docs%2Fsource%2Fen%2Fmodel_doc%2Fernie.md",
            "raw_url": "https://github.com/huggingface/transformers/raw/02ea23cbdea63c46a2f3cb1a58d5b6f8d96f6872/docs%2Fsource%2Fen%2Fmodel_doc%2Fernie.md",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docs%2Fsource%2Fen%2Fmodel_doc%2Fernie.md?ref=02ea23cbdea63c46a2f3cb1a58d5b6f8d96f6872",
            "patch": "@@ -14,29 +14,83 @@ rendered properly in your Markdown viewer.\n \n -->\n \n+<div style=\"float: right;\">\n+    <div class=\"flex flex-wrap space-x-1\">\n+        <img alt=\"PyTorch\" src=\"https://img.shields.io/badge/PyTorch-DE3412?style=flat&logo=pytorch&logoColor=white\" >\n+    </div>\n+</div>\n+\n # ERNIE\n \n-<div class=\"flex flex-wrap space-x-1\">\n-<img alt=\"PyTorch\" src=\"https://img.shields.io/badge/PyTorch-DE3412?style=flat&logo=pytorch&logoColor=white\">\n-</div>\n+[ERNIE1.0](https://arxiv.org/abs/1904.09223), [ERNIE2.0](https://ojs.aaai.org/index.php/AAAI/article/view/6428),\n+[ERNIE3.0](https://arxiv.org/abs/2107.02137), [ERNIE-Gram](https://arxiv.org/abs/2010.12148), [ERNIE-health](https://arxiv.org/abs/2110.07244) are a series of powerful models proposed by baidu, especially in Chinese tasks.\n+\n+ERNIE (Enhanced Representation through kNowledge IntEgration) is designed to learn language representation enhanced by knowledge masking strategies, which includes entity-level masking and phrase-level masking.\n+\n+Other ERNIE models released by baidu can be found at [Ernie 4.5](./ernie4_5.md), and [Ernie 4.5 MoE](./ernie4_5_moe.md).\n+\n+> [!TIP]\n+> This model was contributed by [nghuyong](https://huggingface.co/nghuyong), and the official code can be found in [PaddleNLP](https://github.com/PaddlePaddle/PaddleNLP) (in PaddlePaddle).\n+>\n+> Click on the ERNIE models in the right sidebar for more examples of how to apply ERNIE to different language tasks.\n+\n+The example below demonstrates how to predict the `[MASK]` token with [`Pipeline`], [`AutoModel`], and from the command line.\n \n-## Overview\n-ERNIE is a series of powerful models proposed by baidu, especially in Chinese tasks,\n-including [ERNIE1.0](https://huggingface.co/papers/1904.09223), [ERNIE2.0](https://ojs.aaai.org/index.php/AAAI/article/view/6428),\n-[ERNIE3.0](https://huggingface.co/papers/2107.02137), [ERNIE-Gram](https://huggingface.co/papers/2010.12148), [ERNIE-health](https://huggingface.co/papers/2110.07244), etc.\n+<hfoptions id=\"usage\">\n+<hfoption id=\"Pipeline\">\n \n-These models are contributed by [nghuyong](https://huggingface.co/nghuyong) and the official code can be found in [PaddleNLP](https://github.com/PaddlePaddle/PaddleNLP) (in PaddlePaddle).\n+```py\n+from transformers import pipeline\n \n-### Usage example\n-Take `ernie-1.0-base-zh` as an example:\n+pipeline = pipeline(\n+    task=\"fill-mask\",\n+    model=\"nghuyong/ernie-3.0-xbase-zh\"\n+)\n \n-```Python\n-from transformers import AutoTokenizer, AutoModel\n-tokenizer = AutoTokenizer.from_pretrained(\"nghuyong/ernie-1.0-base-zh\")\n-model = AutoModel.from_pretrained(\"nghuyong/ernie-1.0-base-zh\")\n+pipeline(\"巴黎是[MASK]国的首都。\")\n ```\n \n-### Model checkpoints\n+</hfoption>\n+<hfoption id=\"AutoModel\">\n+\n+```py\n+import torch\n+from transformers import AutoModelForMaskedLM, AutoTokenizer\n+\n+tokenizer = AutoTokenizer.from_pretrained(\n+    \"nghuyong/ernie-3.0-xbase-zh\",\n+)\n+model = AutoModelForMaskedLM.from_pretrained(\n+    \"nghuyong/ernie-3.0-xbase-zh\",\n+    torch_dtype=torch.float16,\n+    device_map=\"auto\"\n+)\n+inputs = tokenizer(\"巴黎是[MASK]国的首都。\", return_tensors=\"pt\").to(\"cuda\")\n+\n+with torch.no_grad():\n+    outputs = model(**inputs)\n+    predictions = outputs.logits\n+\n+masked_index = torch.where(inputs['input_ids'] == tokenizer.mask_token_id)[1]\n+predicted_token_id = predictions[0, masked_index].argmax(dim=-1)\n+predicted_token = tokenizer.decode(predicted_token_id)\n+\n+print(f\"The predicted token is: {predicted_token}\")\n+```\n+\n+</hfoption>\n+<hfoption id=\"transformers CLI\">\n+\n+```bash\n+echo -e \"巴黎是[MASK]国的首都。\" | transformers run --task fill-mask --model nghuyong/ernie-3.0-xbase-zh --device 0\n+```\n+\n+</hfoption>\n+</hfoptions>\n+\n+## Notes\n+\n+Model variants are available in different sizes and languages.\n \n |     Model Name      | Language |           Description           |\n |:-------------------:|:--------:|:-------------------------------:|\n@@ -51,18 +105,11 @@ model = AutoModel.from_pretrained(\"nghuyong/ernie-1.0-base-zh\")\n |   ernie-health-zh   | Chinese  | Layer:12, Heads:12, Hidden:768  |\n |    ernie-gram-zh    | Chinese  | Layer:12, Heads:12, Hidden:768  |\n \n-You can find all the supported models from huggingface's model hub: [huggingface.co/nghuyong](https://huggingface.co/nghuyong), and model details from paddle's official\n-repo: [PaddleNLP](https://paddlenlp.readthedocs.io/zh/latest/model_zoo/transformers/ERNIE/contents.html)\n-and [ERNIE](https://github.com/PaddlePaddle/ERNIE/blob/repro).\n-\n ## Resources\n \n-- [Text classification task guide](../tasks/sequence_classification)\n-- [Token classification task guide](../tasks/token_classification)\n-- [Question answering task guide](../tasks/question_answering)\n-- [Causal language modeling task guide](../tasks/language_modeling)\n-- [Masked language modeling task guide](../tasks/masked_language_modeling)\n-- [Multiple choice task guide](../tasks/multiple_choice)\n+You can find all the supported models from huggingface's model hub: [huggingface.co/nghuyong](https://huggingface.co/nghuyong), and model details from paddle's official\n+repo: [PaddleNLP](https://paddlenlp.readthedocs.io/zh/latest/model_zoo/transformers/ERNIE/contents.html)\n+and [ERNIE's legacy branch](https://github.com/PaddlePaddle/ERNIE/tree/legacy/develop).\n \n ## ErnieConfig\n \n@@ -116,4 +163,4 @@ and [ERNIE](https://github.com/PaddlePaddle/ERNIE/blob/repro).\n ## ErnieForQuestionAnswering\n \n [[autodoc]] ErnieForQuestionAnswering\n-    - forward\n\\ No newline at end of file\n+    - forward"
        }
    ],
    "stats": {
        "total": 99,
        "additions": 73,
        "deletions": 26
    }
}