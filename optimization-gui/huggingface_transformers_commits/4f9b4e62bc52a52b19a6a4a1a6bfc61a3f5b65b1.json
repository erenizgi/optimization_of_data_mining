{
    "author": "ydshieh",
    "message": "Run FA2 tests in CI (#40397)\n\nup\n\nCo-authored-by: ydshieh <ydshieh@users.noreply.github.com>",
    "sha": "4f9b4e62bc52a52b19a6a4a1a6bfc61a3f5b65b1",
    "files": [
        {
            "sha": "1f1cabe356b4eea8827a07d4da8610d32fb2663d",
            "filename": "docker/transformers-all-latest-gpu/Dockerfile",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/4f9b4e62bc52a52b19a6a4a1a6bfc61a3f5b65b1/docker%2Ftransformers-all-latest-gpu%2FDockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/4f9b4e62bc52a52b19a6a4a1a6bfc61a3f5b65b1/docker%2Ftransformers-all-latest-gpu%2FDockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftransformers-all-latest-gpu%2FDockerfile?ref=4f9b4e62bc52a52b19a6a4a1a6bfc61a3f5b65b1",
            "patch": "@@ -51,6 +51,10 @@ RUN python3 -m pip install --no-cache-dir bitsandbytes\n # Some tests require quanto\n RUN python3 -m pip install --no-cache-dir quanto\n \n+# After using A10 as CI runner, let's run FA2 tests\n+RUN python3 -m pip uninstall -y ninja && python3 -m pip install --no-cache-dir ninja && python3 -m pip install flash-attn --no-cache-dir --no-build-isolation\n+\n+# TODO (ydshieh): check this again\n # `quanto` will install `ninja` which leads to many `CUDA error: an illegal memory access ...` in some model tests\n # (`deformable_detr`, `rwkv`, `mra`)\n RUN python3 -m pip uninstall -y ninja"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 4,
        "deletions": 0
    }
}