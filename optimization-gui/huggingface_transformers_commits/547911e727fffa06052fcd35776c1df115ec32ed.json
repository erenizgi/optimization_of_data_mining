{
    "author": "CalOmnie",
    "message": "Uses Collection in transformers.image_transforms.normalize (#36301)\n\n* Uses Collection instead of Sequence in transformers.image_transforms.normalize\n\n* Uses collections.abc.Collection in lieu of deprecated typing one",
    "sha": "547911e727fffa06052fcd35776c1df115ec32ed",
    "files": [
        {
            "sha": "aaadcb44586a15002a42159ecf8839c2a18fd0e3",
            "filename": "src/transformers/image_transforms.py",
            "status": "modified",
            "additions": 8,
            "deletions": 7,
            "changes": 15,
            "blob_url": "https://github.com/huggingface/transformers/blob/547911e727fffa06052fcd35776c1df115ec32ed/src%2Ftransformers%2Fimage_transforms.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/547911e727fffa06052fcd35776c1df115ec32ed/src%2Ftransformers%2Fimage_transforms.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fimage_transforms.py?ref=547911e727fffa06052fcd35776c1df115ec32ed",
            "patch": "@@ -14,8 +14,9 @@\n # limitations under the License.\n \n import warnings\n+from collections.abc import Collection\n from math import ceil\n-from typing import Dict, Iterable, List, Optional, Sequence, Tuple, Union\n+from typing import Dict, Iterable, List, Optional, Tuple, Union\n \n import numpy as np\n \n@@ -389,8 +390,8 @@ def resize(\n \n def normalize(\n     image: np.ndarray,\n-    mean: Union[float, Sequence[float]],\n-    std: Union[float, Sequence[float]],\n+    mean: Union[float, Collection[float]],\n+    std: Union[float, Collection[float]],\n     data_format: Optional[ChannelDimension] = None,\n     input_data_format: Optional[Union[str, ChannelDimension]] = None,\n ) -> np.ndarray:\n@@ -402,9 +403,9 @@ def normalize(\n     Args:\n         image (`np.ndarray`):\n             The image to normalize.\n-        mean (`float` or `Sequence[float]`):\n+        mean (`float` or `Collection[float]`):\n             The mean to use for normalization.\n-        std (`float` or `Sequence[float]`):\n+        std (`float` or `Collection[float]`):\n             The standard deviation to use for normalization.\n         data_format (`ChannelDimension`, *optional*):\n             The channel dimension format of the output image. If unset, will use the inferred format from the input.\n@@ -425,14 +426,14 @@ def normalize(\n     if not np.issubdtype(image.dtype, np.floating):\n         image = image.astype(np.float32)\n \n-    if isinstance(mean, Sequence):\n+    if isinstance(mean, Collection):\n         if len(mean) != num_channels:\n             raise ValueError(f\"mean must have {num_channels} elements if it is an iterable, got {len(mean)}\")\n     else:\n         mean = [mean] * num_channels\n     mean = np.array(mean, dtype=image.dtype)\n \n-    if isinstance(std, Sequence):\n+    if isinstance(std, Collection):\n         if len(std) != num_channels:\n             raise ValueError(f\"std must have {num_channels} elements if it is an iterable, got {len(std)}\")\n     else:"
        },
        {
            "sha": "560ea6a36b40ffca9de51abb5dbd5854321727dc",
            "filename": "tests/test_image_transforms.py",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/547911e727fffa06052fcd35776c1df115ec32ed/tests%2Ftest_image_transforms.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/547911e727fffa06052fcd35776c1df115ec32ed/tests%2Ftest_image_transforms.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/tests%2Ftest_image_transforms.py?ref=547911e727fffa06052fcd35776c1df115ec32ed",
            "patch": "@@ -326,8 +326,8 @@ def test_normalize(self):\n \n         # Test float16 image input keeps float16 dtype\n         image = np.random.randint(0, 256, (224, 224, 3)).astype(np.float16) / 255\n-        mean = (0.5, 0.6, 0.7)\n-        std = (0.1, 0.2, 0.3)\n+        mean = np.array((0.5, 0.6, 0.7))\n+        std = np.array((0.1, 0.2, 0.3))\n \n         # The mean and std are cast to match the dtype of the input image\n         cast_mean = np.array(mean, dtype=np.float16)"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 10,
        "deletions": 9
    }
}