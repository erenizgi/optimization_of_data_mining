{
    "author": "cyyever",
    "message": "remove dummy EncodingFast (#40864)\n\nSigned-off-by: Yuanyuan Chen <cyyever@outlook.com>",
    "sha": "96bc19bcdf738b90aabaf65e3a80d6e109671cf3",
    "files": [
        {
            "sha": "e4df51c7f8678e64e05129535a16e763e2e4994c",
            "filename": "src/transformers/tokenization_utils_base.py",
            "status": "modified",
            "additions": 5,
            "deletions": 8,
            "changes": 13,
            "blob_url": "https://github.com/huggingface/transformers/blob/96bc19bcdf738b90aabaf65e3a80d6e109671cf3/src%2Ftransformers%2Ftokenization_utils_base.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/96bc19bcdf738b90aabaf65e3a80d6e109671cf3/src%2Ftransformers%2Ftokenization_utils_base.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Ftokenization_utils_base.py?ref=96bc19bcdf738b90aabaf65e3a80d6e109671cf3",
            "patch": "@@ -98,9 +98,11 @@ def flatten(arr: list):\n     return res\n \n \n+if is_tokenizers_available() or TYPE_CHECKING:\n+    from tokenizers import Encoding as EncodingFast\n+\n if is_tokenizers_available():\n     from tokenizers import AddedToken\n-    from tokenizers import Encoding as EncodingFast\n else:\n \n     @dataclass(frozen=False, eq=True)\n@@ -129,12 +131,6 @@ def __getstate__(self):\n         def __str__(self):\n             return self.content\n \n-    @dataclass\n-    class EncodingFast:\n-        \"\"\"This is dummy class because without the `tokenizers` library we don't have these objects anyway\"\"\"\n-\n-        pass\n-\n \n logger = logging.get_logger(__name__)\n \n@@ -238,7 +234,8 @@ def __init__(\n     ):\n         super().__init__(data)\n \n-        if isinstance(encoding, EncodingFast):\n+        # If encoding is not None, the fast tokenization is used\n+        if encoding is not None and isinstance(encoding, EncodingFast):\n             encoding = [encoding]\n \n         self._encodings = encoding"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 5,
        "deletions": 8
    }
}