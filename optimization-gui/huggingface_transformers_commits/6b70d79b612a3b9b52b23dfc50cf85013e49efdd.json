{
    "author": "zucchini-nlp",
    "message": "Fix repo consistency (#40077)\n\nfix",
    "sha": "6b70d79b612a3b9b52b23dfc50cf85013e49efdd",
    "files": [
        {
            "sha": "2ce152d8b7996c00a8048e82c43e042b4ce39336",
            "filename": "src/transformers/models/glm4v_moe/modeling_glm4v_moe.py",
            "status": "modified",
            "additions": 3,
            "deletions": 8,
            "changes": 11,
            "blob_url": "https://github.com/huggingface/transformers/blob/6b70d79b612a3b9b52b23dfc50cf85013e49efdd/src%2Ftransformers%2Fmodels%2Fglm4v_moe%2Fmodeling_glm4v_moe.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/6b70d79b612a3b9b52b23dfc50cf85013e49efdd/src%2Ftransformers%2Fmodels%2Fglm4v_moe%2Fmodeling_glm4v_moe.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fglm4v_moe%2Fmodeling_glm4v_moe.py?ref=6b70d79b612a3b9b52b23dfc50cf85013e49efdd",
            "patch": "@@ -1730,14 +1730,9 @@ def _repeat_interleave_samples(x, lengths, repeat_times):\n                         dict_to_expand[key], lengths=lengths, repeat_times=expand_size\n                     )\n                 elif key == \"second_per_grid_ts\":\n-                    if not isinstance(dict_to_expand[key], list):\n-                        raise TypeError(\n-                            f\"Expected value for key '{key}' to be a list, but got {type(dict_to_expand[key])} instead.\"\n-                        )\n-                    tensor = torch.tensor(dict_to_expand[key])\n-                    lengths = list(video_nums)\n-                    tensor = _repeat_interleave_samples(tensor, lengths=lengths, repeat_times=expand_size)\n-                    dict_to_expand[key] = tensor.tolist()\n+                    dict_to_expand[key] = _repeat_interleave_samples(\n+                        dict_to_expand[key], lengths=list(video_nums), repeat_times=expand_size\n+                    )\n             return dict_to_expand\n \n         def _expand_dict_for_generation(dict_to_expand):"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 3,
        "deletions": 8
    }
}