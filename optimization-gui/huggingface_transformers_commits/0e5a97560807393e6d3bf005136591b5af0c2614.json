{
    "author": "aug6th",
    "message": "Fix Qwen3-Omni audio_token_id serialization issue (#41192)\n\nFix Qwen3-Omni audio_token_id serialization by overriding parent's attribute_map\n\n- Override attribute_map in Qwen3OmniMoeThinkerConfig to prevent inheritance of incorrect mapping\n- Parent class maps audio_token_id -> audio_token_index, but implementation uses audio_token_id directly\n- Fixes issue where custom audio_token_id values were not preserved during save_pretrained/from_pretrained cycles\n\nFixes #41191",
    "sha": "0e5a97560807393e6d3bf005136591b5af0c2614",
    "files": [
        {
            "sha": "b530630813da2f5fedb11fe6dfecd0b37363c821",
            "filename": "src/transformers/models/qwen3_omni_moe/configuration_qwen3_omni_moe.py",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/huggingface/transformers/blob/0e5a97560807393e6d3bf005136591b5af0c2614/src%2Ftransformers%2Fmodels%2Fqwen3_omni_moe%2Fconfiguration_qwen3_omni_moe.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/0e5a97560807393e6d3bf005136591b5af0c2614/src%2Ftransformers%2Fmodels%2Fqwen3_omni_moe%2Fconfiguration_qwen3_omni_moe.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fqwen3_omni_moe%2Fconfiguration_qwen3_omni_moe.py?ref=0e5a97560807393e6d3bf005136591b5af0c2614",
            "patch": "@@ -431,11 +431,8 @@ class Qwen3OmniMoeThinkerConfig(PretrainedConfig):\n     ```\"\"\"\n \n     model_type = \"qwen3_omni_moe_thinker\"\n-    attribute_map = {\n-        \"image_token_id\": \"image_token_index\",\n-        \"video_token_id\": \"video_token_index\",\n-        \"audio_token_id\": \"audio_token_index\",\n-    }\n+    # Override parent's attribute_map as we use audio_token_id directly, not audio_token_index\n+    attribute_map = {}\n     sub_configs = {\n         \"audio_config\": Qwen3OmniMoeAudioEncoderConfig,\n         \"vision_config\": Qwen3OmniMoeVisionEncoderConfig,"
        },
        {
            "sha": "540d45662716f0911e6a933bbfdbbbe925992443",
            "filename": "src/transformers/models/qwen3_omni_moe/modular_qwen3_omni_moe.py",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/huggingface/transformers/blob/0e5a97560807393e6d3bf005136591b5af0c2614/src%2Ftransformers%2Fmodels%2Fqwen3_omni_moe%2Fmodular_qwen3_omni_moe.py",
            "raw_url": "https://github.com/huggingface/transformers/raw/0e5a97560807393e6d3bf005136591b5af0c2614/src%2Ftransformers%2Fmodels%2Fqwen3_omni_moe%2Fmodular_qwen3_omni_moe.py",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/src%2Ftransformers%2Fmodels%2Fqwen3_omni_moe%2Fmodular_qwen3_omni_moe.py?ref=0e5a97560807393e6d3bf005136591b5af0c2614",
            "patch": "@@ -264,6 +264,10 @@ class Qwen3OmniMoeThinkerConfig(Qwen2_5OmniThinkerConfig):\n     >>> configuration = model.config\n     ```\"\"\"\n \n+    model_type = \"qwen3_omni_moe_thinker\"\n+    # Override parent's attribute_map as we use audio_token_id directly, not audio_token_index\n+    attribute_map = {}\n+\n     def __init__(\n         self,\n         audio_config=None,"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 6,
        "deletions": 5
    }
}