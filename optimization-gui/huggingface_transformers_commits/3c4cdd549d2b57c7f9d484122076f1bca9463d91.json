{
    "author": "ydshieh",
    "message": "fix `deeepspeed` in AMD docker file (#42025)\n\nfix deeepspeed in AMD docker\n\nCo-authored-by: ydshieh <ydshieh@users.noreply.github.com>",
    "sha": "3c4cdd549d2b57c7f9d484122076f1bca9463d91",
    "files": [
        {
            "sha": "2c087c47ea5ac9fad34a491ea766cd7514b946d5",
            "filename": "docker/transformers-pytorch-deepspeed-amd-gpu/Dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/huggingface/transformers/blob/3c4cdd549d2b57c7f9d484122076f1bca9463d91/docker%2Ftransformers-pytorch-deepspeed-amd-gpu%2FDockerfile",
            "raw_url": "https://github.com/huggingface/transformers/raw/3c4cdd549d2b57c7f9d484122076f1bca9463d91/docker%2Ftransformers-pytorch-deepspeed-amd-gpu%2FDockerfile",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/docker%2Ftransformers-pytorch-deepspeed-amd-gpu%2FDockerfile?ref=3c4cdd549d2b57c7f9d484122076f1bca9463d91",
            "patch": "@@ -29,7 +29,7 @@ RUN python3 -m pip uninstall -y apex torch torchvision torchaudio\n RUN python3 -m pip install torch==$PYTORCH torchvision==$TORCH_VISION torchaudio==$TORCH_AUDIO --index-url https://download.pytorch.org/whl/rocm$ROCM --no-cache-dir\n \n # Pre-build DeepSpeed, so it's be ready for testing (to avoid timeout)\n-RUN DS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 python3 -m pip install deepspeed --global-option=\"build_ext\" --global-option=\"-j8\" --no-cache-dir -v --disable-pip-version-check 2>&1\n+RUN DS_BUILD_CPU_ADAM=1 DS_BUILD_FUSED_ADAM=1 python3 -m pip install deepspeed --no-build-isolation --config-settings=\"--build-option=build_ext\" --config-settings=\"--build-option=-j8\" --no-cache-dir -v --disable-pip-version-check 2>&1\n \n ARG REF=main\n WORKDIR /"
        }
    ],
    "stats": {
        "total": 2,
        "additions": 1,
        "deletions": 1
    }
}