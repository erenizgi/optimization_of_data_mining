{
    "author": "ydshieh",
    "message": "hotfix for circleci summary workflow (#42708)\n\nhotfix\n\nCo-authored-by: ydshieh <ydshieh@users.noreply.github.com>",
    "sha": "2db992d858e0f99294a9420bebd9e456a7443457",
    "files": [
        {
            "sha": "a916ee15555049ccbcecba14781bc98a96347dbf",
            "filename": ".github/workflows/circleci-failure-summary-comment.yml",
            "status": "modified",
            "additions": 12,
            "deletions": 7,
            "changes": 19,
            "blob_url": "https://github.com/huggingface/transformers/blob/2db992d858e0f99294a9420bebd9e456a7443457/.github%2Fworkflows%2Fcircleci-failure-summary-comment.yml",
            "raw_url": "https://github.com/huggingface/transformers/raw/2db992d858e0f99294a9420bebd9e456a7443457/.github%2Fworkflows%2Fcircleci-failure-summary-comment.yml",
            "contents_url": "https://api.github.com/repos/huggingface/transformers/contents/.github%2Fworkflows%2Fcircleci-failure-summary-comment.yml?ref=2db992d858e0f99294a9420bebd9e456a7443457",
            "patch": "@@ -111,8 +111,9 @@ jobs:\n           failure_summary_url=$(echo \"$artifacts\" | jq -r '.items[] | select(.path == \"outputs/failure_summary.json\") | .url')\n           \n           if [ -z \"$failure_summary_url\" ]; then\n-            echo \"failure_summary.json not found in artifacts\"\n-            exit 1\n+            echo \"failure_summary.json not found in artifacts - PR may not have latest main merged. Skipping.\"\n+            echo \"artifact_found=false\" >> $GITHUB_OUTPUT\n+            exit 0\n           fi\n           \n           echo \"Downloading failure_summary.json from: ${failure_summary_url}\"\n@@ -123,18 +124,21 @@ jobs:\n           echo \"Downloaded failure_summary.json successfully\"\n           \n           # Verify the file was downloaded\n-          if [ -f outputs/failure_summary.json ]; then\n-            echo \"File size: $(wc -c < outputs/failure_summary.json) bytes\"\n-          else\n-            echo \"Failed to download failure_summary.json\"\n-            exit 1\n+          if [ ! -f outputs/failure_summary.json ]; then\n+            echo \"Failed to download failure_summary.json - skipping.\"\n+            echo \"artifact_found=false\" >> $GITHUB_OUTPUT\n+            exit 0\n           fi\n           \n+          echo \"File size: $(wc -c < outputs/failure_summary.json) bytes\"\n+          \n           # Export variables for next steps\n+          echo \"artifact_found=true\" >> $GITHUB_OUTPUT\n           echo \"workflow_id=${workflow_id}\" >> $GITHUB_OUTPUT\n           echo \"collection_job_number=${collection_job_number}\" >> $GITHUB_OUTPUT\n \n       - name: Upload summaries to Hub\n+        if: steps.circleci.outputs.artifact_found == 'true'\n         env:\n           HF_TOKEN: ${{ secrets.HF_CI_WRITE_TOKEN }}\n           CIRCLECI_RESULTS_DATASET_ID: \"transformers-community/circleci-test-results\"\n@@ -170,6 +174,7 @@ jobs:\n           EOF\n \n       - name: Post comment with helper link\n+        if: steps.circleci.outputs.artifact_found == 'true'\n         env:\n           GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n           GITHUB_REPOSITORY: ${{ github.repository }}"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 12,
        "deletions": 7
    }
}