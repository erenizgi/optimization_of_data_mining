{
    "author": "scissorsneedfoodtoo",
    "message": "feat: dynamically generate search placeholder (#56276)\n\nCo-authored-by: Naomi Carrigan <commits@nhcarrigan.com>",
    "sha": "a378208d4d8842d62d5474a6daac3806438b1dc8",
    "files": [
        {
            "sha": "a830f045cb2a5a72f60e265210c9ca305256f7f4",
            "filename": ".prettierignore",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a378208d4d8842d62d5474a6daac3806438b1dc8/.prettierignore",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a378208d4d8842d62d5474a6daac3806438b1dc8/.prettierignore",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/.prettierignore?ref=a378208d4d8842d62d5474a6daac3806438b1dc8",
            "patch": "@@ -2,6 +2,7 @@\n **/*fixtures*\n api-server/lib\n client/**/trending.json\n+client/**/search-bar.json\n client/config/*.json\n client/config/browser-scripts/*.json\n client/static"
        },
        {
            "sha": "b1a21ca72a76b57624c8d54da78ad0e5eb337f51",
            "filename": "client/.gitignore",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a378208d4d8842d62d5474a6daac3806438b1dc8/client%2F.gitignore",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a378208d4d8842d62d5474a6daac3806438b1dc8/client%2F.gitignore",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2F.gitignore?ref=a378208d4d8842d62d5474a6daac3806438b1dc8",
            "patch": "@@ -14,6 +14,7 @@ static/curriculum-data\n # Generated config\n config/browser-scripts/*.json\n i18n/locales/**/trending.json\n+i18n/locales/**/search-bar.json\n \n # Config\n "
        },
        {
            "sha": "7b26253d69c8db7032f053a16532c9e18819d35d",
            "filename": "client/i18n/config.js",
            "status": "modified",
            "additions": 10,
            "deletions": 2,
            "changes": 12,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a378208d4d8842d62d5474a6daac3806438b1dc8/client%2Fi18n%2Fconfig.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a378208d4d8842d62d5474a6daac3806438b1dc8/client%2Fi18n%2Fconfig.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fi18n%2Fconfig.js?ref=a378208d4d8842d62d5474a6daac3806438b1dc8",
            "patch": "@@ -53,17 +53,25 @@ i18n.use(initReactI18next).init({\n       if (clientLocale !== 'english') {\n         module.exports = require('./locales/' + clientLocale + '/links.json');\n       }\n+    `,\n+      'search-bar': preval`\n+      const envData = require('../config/env.json');\n+      const { clientLocale } = envData;\n+      if (clientLocale !== 'english') {\n+        module.exports = require('./locales/' + clientLocale + '/search-bar.json');\n+      }\n     `\n     },\n     en: {\n       translations: preval`module.exports = require('./locales/english/translations.json')`,\n       trending: preval`module.exports = require('./locales/english/trending.json')`,\n       intro: preval`module.exports = require('./locales/english/intro.json')`,\n       metaTags: preval`module.exports = require('./locales/english/meta-tags.json')`,\n-      links: preval`module.exports = require('./locales/english/links.json')`\n+      links: preval`module.exports = require('./locales/english/links.json')`,\n+      'search-bar': preval`module.exports = require('./locales/english/search-bar.json')`\n     }\n   },\n-  ns: ['translations', 'trending', 'intro', 'metaTags', 'links'],\n+  ns: ['translations', 'trending', 'intro', 'metaTags', 'links', 'search-bar'],\n   defaultNS: 'translations',\n   returnObjects: true,\n   // Uncomment the next line for debug logging"
        },
        {
            "sha": "fcedea63ba77e99d91cef428e428a06e15b52197",
            "filename": "client/i18n/locales/english/translations.json",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a378208d4d8842d62d5474a6daac3806438b1dc8/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a378208d4d8842d62d5474a6daac3806438b1dc8/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json?ref=a378208d4d8842d62d5474a6daac3806438b1dc8",
            "patch": "@@ -692,7 +692,10 @@\n   },\n   \"search\": {\n     \"label\": \"Search\",\n-    \"placeholder\": \"Search 10,700+ tutorials\",\n+    \"placeholder\": {\n+      \"default\": \"Search our tutorials\",\n+      \"numbered\": \"Search {{ roundedTotalRecords }}+ tutorials\"\n+    },\n     \"see-results\": \"See all results for {{searchQuery}}\",\n     \"no-tutorials\": \"No tutorials found\",\n     \"try\": \"Looking for something? Try the search bar on this page.\","
        },
        {
            "sha": "1dc7b98d3f03f4a2c0a35020dc505f62f0d003c7",
            "filename": "client/package.json",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a378208d4d8842d62d5474a6daac3806438b1dc8/client%2Fpackage.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a378208d4d8842d62d5474a6daac3806438b1dc8/client%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fpackage.json?ref=a378208d4d8842d62d5474a6daac3806438b1dc8",
            "patch": "@@ -23,9 +23,10 @@\n     \"build\": \"NODE_OPTIONS=\\\"--max-old-space-size=7168\\\" gatsby build --prefix-paths\",\n     \"build:scripts\": \"pnpm run -F=browser-scripts build\",\n     \"clean\": \"gatsby clean\",\n-    \"common-setup\": \"pnpm -w run create:shared && pnpm run create:env && pnpm run create:trending\",\n+    \"common-setup\": \"pnpm -w run create:shared && pnpm run create:env && pnpm run create:trending && pnpm run create:search-placeholder\",\n     \"create:env\": \"DEBUG=fcc:* ts-node ./tools/create-env.ts\",\n     \"create:trending\": \"ts-node ./tools/download-trending.ts\",\n+    \"create:search-placeholder\": \"ts-node ./tools/generate-search-placeholder\",\n     \"predevelop\": \"pnpm run common-setup && pnpm run build:scripts --env development\",\n     \"develop\": \"NODE_OPTIONS=\\\"--max-old-space-size=7168\\\" gatsby develop --inspect=9230\",\n     \"lint\": \"ts-node ./i18n/schema-validation.ts\",\n@@ -159,6 +160,7 @@\n     \"core-js\": \"2.6.12\",\n     \"dotenv\": \"16.4.5\",\n     \"gatsby-plugin-webpack-bundle-analyser-v2\": \"1.1.32\",\n+    \"i18next-fs-backend\": \"2.3.2\",\n     \"jest-json-schema-extended\": \"1.0.1\",\n     \"joi\": \"17.12.2\",\n     \"js-yaml\": \"4.1.0\","
        },
        {
            "sha": "5b2db0f5de9edad6975768b30baad974330bd865",
            "filename": "client/src/components/search/searchBar/search-bar-optimized.tsx",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a378208d4d8842d62d5474a6daac3806438b1dc8/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-bar-optimized.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a378208d4d8842d62d5474a6daac3806438b1dc8/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-bar-optimized.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-bar-optimized.tsx?ref=a378208d4d8842d62d5474a6daac3806438b1dc8",
            "patch": "@@ -9,7 +9,12 @@ const SearchBarOptimized = ({\n   innerRef\n }: Pick<SearchBarProps, 'innerRef'>): JSX.Element => {\n   const { t } = useTranslation();\n-  const placeholder = t('search.placeholder');\n+  // TODO: Refactor this fallback when all translation files are synced\n+  const searchPlaceholder = t('search-bar:placeholder').startsWith(\n+    'search.placeholder.'\n+  )\n+    ? t('search.placeholder')\n+    : t('search-bar:placeholder');\n   const searchUrl = searchPageUrl;\n   const [value, setValue] = useState('');\n   const inputElementRef = useRef<HTMLInputElement>(null);\n@@ -50,7 +55,7 @@ const SearchBarOptimized = ({\n               className='ais-SearchBox-input'\n               maxLength={512}\n               onChange={onChange}\n-              placeholder={placeholder}\n+              placeholder={searchPlaceholder}\n               spellCheck='false'\n               type='search'\n               value={value}"
        },
        {
            "sha": "5e94c6dc1fcb9b3ee6b10491c733b974b5bc025b",
            "filename": "client/src/components/search/searchBar/search-bar.tsx",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a378208d4d8842d62d5474a6daac3806438b1dc8/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-bar.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a378208d4d8842d62d5474a6daac3806438b1dc8/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-bar.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-bar.tsx?ref=a378208d4d8842d62d5474a6daac3806438b1dc8",
            "patch": "@@ -201,6 +201,12 @@ export class SearchBar extends Component<SearchBarProps, SearchBarState> {\n   render(): JSX.Element {\n     const { isDropdownEnabled, isSearchFocused, innerRef, t } = this.props;\n     const { index } = this.state;\n+    // TODO: Refactor this fallback when all translation files are synced\n+    const searchPlaceholder = t('search-bar:placeholder').startsWith(\n+      'search.placeholder.'\n+    )\n+      ? t('search.placeholder')\n+      : t('search-bar:placeholder');\n \n     return (\n       <WithInstantSearch>\n@@ -223,7 +229,7 @@ export class SearchBar extends Component<SearchBarProps, SearchBarState> {\n                   translations={{\n                     submitTitle: t('icons.magnifier'),\n                     resetTitle: t('icons.input-reset'),\n-                    placeholder: t('search.placeholder')\n+                    placeholder: searchPlaceholder\n                   }}\n                   onFocus={this.handleFocus}\n                 />"
        },
        {
            "sha": "527bd879a143e6ace9c99ac3d887bf8457de9b2c",
            "filename": "client/tools/generate-search-placeholder.test.ts",
            "status": "added",
            "additions": 175,
            "deletions": 0,
            "changes": 175,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a378208d4d8842d62d5474a6daac3806438b1dc8/client%2Ftools%2Fgenerate-search-placeholder.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a378208d4d8842d62d5474a6daac3806438b1dc8/client%2Ftools%2Fgenerate-search-placeholder.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Ftools%2Fgenerate-search-placeholder.test.ts?ref=a378208d4d8842d62d5474a6daac3806438b1dc8",
            "patch": "@@ -0,0 +1,175 @@\n+import { clientLocale } from '../config/env.json';\n+import {\n+  convertToLocalizedString,\n+  generateSearchPlaceholder,\n+  roundDownToNearestHundred\n+} from './generate-search-placeholder';\n+\n+describe('Search bar placeholder tests:', () => {\n+  describe('Number rounding', () => {\n+    test('Numbers less than 100 return 0', () => {\n+      const testArr = [0, 1, 50, 99];\n+\n+      testArr.forEach(num => {\n+        expect(roundDownToNearestHundred(num)).toEqual(0);\n+      });\n+    });\n+\n+    test('Numbers greater than 100 return a number rounded down to the nearest 100', () => {\n+      const testArr = [\n+        {\n+          num: 100,\n+          expected: 100\n+        },\n+        {\n+          num: 101,\n+          expected: 100\n+        },\n+        {\n+          num: 199,\n+          expected: 100\n+        },\n+        {\n+          num: 999,\n+          expected: 900\n+        },\n+        {\n+          num: 1000,\n+          expected: 1000\n+        },\n+        {\n+          num: 1001,\n+          expected: 1000\n+        },\n+        {\n+          num: 1999,\n+          expected: 1900\n+        },\n+        {\n+          num: 10000,\n+          expected: 10000\n+        },\n+        {\n+          num: 10001,\n+          expected: 10000\n+        },\n+        {\n+          num: 19999,\n+          expected: 19900\n+        }\n+      ];\n+\n+      testArr.forEach(obj => {\n+        expect(roundDownToNearestHundred(obj.num)).toEqual(obj.expected);\n+      });\n+    });\n+  });\n+\n+  describe('Number formatting', () => {\n+    test('Numbers are converted to the correct decimal or comma format for each locale', () => {\n+      const testArr = [\n+        {\n+          num: 100,\n+          locale: 'en',\n+          expected: '100'\n+        },\n+        {\n+          num: 100,\n+          locale: 'zh',\n+          expected: '100'\n+        },\n+        {\n+          num: 100,\n+          locale: 'de',\n+          expected: '100'\n+        },\n+        {\n+          num: 1000,\n+          locale: 'en',\n+          expected: '1,000'\n+        },\n+        {\n+          num: 1000,\n+          locale: 'zh',\n+          expected: '1,000'\n+        },\n+        {\n+          num: 1000,\n+          locale: 'de',\n+          expected: '1.000'\n+        },\n+        {\n+          num: 10000,\n+          locale: 'en',\n+          expected: '10,000'\n+        },\n+        {\n+          num: 10000,\n+          locale: 'zh',\n+          expected: '10,000'\n+        },\n+        {\n+          num: 10000,\n+          locale: 'de',\n+          expected: '10.000'\n+        },\n+        {\n+          num: 100000,\n+          locale: 'en',\n+          expected: '100,000'\n+        },\n+        {\n+          num: 100000,\n+          locale: 'zh',\n+          expected: '100,000'\n+        },\n+        {\n+          num: 100000,\n+          locale: 'de',\n+          expected: '100.000'\n+        }\n+      ];\n+\n+      testArr.forEach(obj => {\n+        const { num, locale, expected } = obj;\n+        expect(convertToLocalizedString(num, locale)).toEqual(expected);\n+      });\n+    });\n+  });\n+\n+  // Note: Only test the English locale to prevent duplicate tests,\n+  // and just to ensure the logic is working as expected.\n+  if (clientLocale === 'english') {\n+    describe('Placeholder strings', () => {\n+      test('When the total number of hits is less than 100 the expected placeholder is generated', async () => {\n+        const expected = 'Search our tutorials';\n+        const placeholderText = await generateSearchPlaceholder({\n+          mockRecordsNum: 99,\n+          locale: 'english'\n+        });\n+\n+        expect(placeholderText).toEqual(expected);\n+      });\n+\n+      test('When the total number of hits is equal to 100 the expected placeholder is generated', async () => {\n+        const placeholderText = await generateSearchPlaceholder({\n+          mockRecordsNum: 100,\n+          locale: 'english'\n+        });\n+        const expected = 'Search 100+ tutorials';\n+\n+        expect(placeholderText).toEqual(expected);\n+      });\n+\n+      test('When the total number of hits is greater than 100 the expected placeholder is generated', async () => {\n+        const placeholderText = await generateSearchPlaceholder({\n+          mockRecordsNum: 11000,\n+          locale: 'english'\n+        });\n+        const expected = 'Search 11,000+ tutorials';\n+\n+        expect(placeholderText).toEqual(expected);\n+      });\n+    });\n+  }\n+});"
        },
        {
            "sha": "36cd69266bd26b836643e80db9a0aef8f7151dcf",
            "filename": "client/tools/generate-search-placeholder.ts",
            "status": "added",
            "additions": 115,
            "deletions": 0,
            "changes": 115,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a378208d4d8842d62d5474a6daac3806438b1dc8/client%2Ftools%2Fgenerate-search-placeholder.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a378208d4d8842d62d5474a6daac3806438b1dc8/client%2Ftools%2Fgenerate-search-placeholder.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Ftools%2Fgenerate-search-placeholder.ts?ref=a378208d4d8842d62d5474a6daac3806438b1dc8",
            "patch": "@@ -0,0 +1,115 @@\n+import { writeFileSync, readdirSync, lstatSync } from 'fs';\n+import { join, resolve } from 'path';\n+import algoliasearch from 'algoliasearch';\n+import i18n from 'i18next';\n+import backend from 'i18next-fs-backend';\n+\n+import {\n+  algoliaAppId,\n+  algoliaAPIKey,\n+  clientLocale,\n+  environment\n+} from '../config/env.json';\n+import { newsIndex } from '../src/utils/algolia-locale-setup';\n+import { i18nextCodes } from '../../shared/config/i18n';\n+\n+const i18nextCode = i18nextCodes[clientLocale as keyof typeof i18nextCodes];\n+\n+i18n\n+  .use(backend)\n+  .init({\n+    defaultNS: 'translations',\n+    fallbackLng: 'en',\n+    interpolation: {\n+      escapeValue: false\n+    },\n+    initImmediate: false,\n+    preload: readdirSync(join(__dirname, '../i18n/locales')).filter(\n+      fileName => {\n+        const joinedPath = join(join(__dirname, '../i18n/locales'), fileName);\n+        const isDirectory = lstatSync(joinedPath).isDirectory();\n+        return isDirectory;\n+      }\n+    ),\n+    lng: i18nextCode,\n+    ns: ['translations'],\n+    backend: {\n+      loadPath: resolve(\n+        __dirname,\n+        `../i18n/locales/${clientLocale}/translations.json`\n+      )\n+    }\n+  })\n+  .catch((error: Error) => {\n+    throw Error(error.message);\n+  });\n+\n+const t = i18n.t.bind(i18n);\n+\n+export const roundDownToNearestHundred = (num: number) =>\n+  Math.floor(num / 100) * 100;\n+\n+export const convertToLocalizedString = (num: number, ISOCode: string) =>\n+  num.toLocaleString(ISOCode);\n+\n+interface GenerateSearchPlaceholderOptions {\n+  locale?: string;\n+  mockRecordsNum?: number;\n+}\n+\n+export const generateSearchPlaceholder = async (\n+  options: GenerateSearchPlaceholderOptions = {}\n+) => {\n+  const { locale, mockRecordsNum } = options;\n+  let placeholderText = t('search.placeholder.default');\n+\n+  try {\n+    let totalRecords = mockRecordsNum || 0;\n+    if (!mockRecordsNum) {\n+      const algoliaClient = algoliasearch(algoliaAppId, algoliaAPIKey);\n+      const index = algoliaClient.initIndex(newsIndex);\n+      const res = await index.search('');\n+      totalRecords = res.nbHits;\n+    }\n+    const roundedTotalRecords = roundDownToNearestHundred(totalRecords);\n+\n+    if (roundedTotalRecords >= 100) {\n+      placeholderText = i18n.t('search.placeholder.numbered', {\n+        roundedTotalRecords: convertToLocalizedString(\n+          roundedTotalRecords,\n+          i18nextCode\n+        )\n+      });\n+    }\n+  } catch (err) {\n+    if (environment === 'production') {\n+      console.warn(`\n+  ----------------------------------------------------------\n+  Warning: Could not get the total number of Algolia records\n+  ----------------------------------------------------------\n+  Make sure that Algolia keys and index are set up correctly.\n+\n+  Falling back to the default search placeholder text.\n+  ----------------------------------------------------------\n+`);\n+    }\n+  }\n+\n+  writeFileSync(\n+    resolve(\n+      __dirname,\n+      `../i18n/locales/${locale ? locale : clientLocale}/search-bar.json`\n+    ),\n+    JSON.stringify({\n+      placeholder: placeholderText\n+    })\n+  );\n+\n+  return placeholderText; // for testing\n+};\n+\n+void generateSearchPlaceholder();\n+// TODO: remove the need to fallback to english once we're confident it's\n+// unnecessary (client/i18n/config.js will need all references to 'en' removing)\n+if (clientLocale !== 'english')\n+  void generateSearchPlaceholder({ locale: 'english' });"
        },
        {
            "sha": "b83909cb660c5afa0d7c8128a533393458286e68",
            "filename": "e2e/search-bar-optimized.spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a378208d4d8842d62d5474a6daac3806438b1dc8/e2e%2Fsearch-bar-optimized.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a378208d4d8842d62d5474a6daac3806438b1dc8/e2e%2Fsearch-bar-optimized.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fsearch-bar-optimized.spec.ts?ref=a378208d4d8842d62d5474a6daac3806438b1dc8",
            "patch": "@@ -28,9 +28,11 @@ test.describe('Search bar optimized', () => {\n     const searchInput = await getSearchInput({ page, isMobile });\n \n     await expect(searchInput).toBeVisible();\n+    // Because we're mocking Algolia requests, the placeholder\n+    // should be the default one.\n     await expect(searchInput).toHaveAttribute(\n       'placeholder',\n-      translations.search.placeholder\n+      translations.search.placeholder.default\n     );\n   });\n "
        },
        {
            "sha": "7efab8417fce1f58f4793ad2639b7952fcddf327",
            "filename": "e2e/search-bar.spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a378208d4d8842d62d5474a6daac3806438b1dc8/e2e%2Fsearch-bar.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a378208d4d8842d62d5474a6daac3806438b1dc8/e2e%2Fsearch-bar.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fsearch-bar.spec.ts?ref=a378208d4d8842d62d5474a6daac3806438b1dc8",
            "patch": "@@ -73,9 +73,11 @@ test.describe('Search bar', () => {\n     const searchInput = await getSearchInput({ page, isMobile });\n \n     await expect(searchInput).toBeVisible();\n+    // Because we're mocking Algolia requests, the placeholder\n+    // should be the default one.\n     await expect(searchInput).toHaveAttribute(\n       'placeholder',\n-      translations.search.placeholder\n+      translations.search.placeholder.default\n     );\n     await expect(\n       page.getByRole('button', { name: 'Submit search terms' })"
        },
        {
            "sha": "70fb5ef609025f2781eca7ac915a1fd294ec90b0",
            "filename": "pnpm-lock.yaml",
            "status": "modified",
            "additions": 24,
            "deletions": 16,
            "changes": 40,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a378208d4d8842d62d5474a6daac3806438b1dc8/pnpm-lock.yaml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a378208d4d8842d62d5474a6daac3806438b1dc8/pnpm-lock.yaml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/pnpm-lock.yaml?ref=a378208d4d8842d62d5474a6daac3806438b1dc8",
            "patch": "@@ -795,6 +795,9 @@ importers:\n       gatsby-plugin-webpack-bundle-analyser-v2:\n         specifier: 1.1.32\n         version: 1.1.32(gatsby@3.15.0(@types/node@20.12.8)(babel-eslint@10.1.0(eslint@7.32.0))(eslint-import-resolver-typescript@3.5.5(@typescript-eslint/parser@7.1.1(eslint@8.57.0)(typescript@5.4.5))(eslint-plugin-import@2.29.1)(eslint@8.57.0))(eslint-plugin-testing-library@3.9.0(eslint@7.32.0)(typescript@5.2.2))(react-dom@16.14.0(react@16.14.0))(react@16.14.0)(typescript@5.2.2))\n+      i18next-fs-backend:\n+        specifier: 2.3.2\n+        version: 2.3.2\n       jest-json-schema-extended:\n         specifier: 1.0.1\n         version: 1.0.1\n@@ -1125,13 +1128,13 @@ importers:\n         version: 4.17.12\n       babel-loader:\n         specifier: 8.3.0\n-        version: 8.3.0(@babel/core@7.23.7)(webpack@5.90.3(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3)))\n+        version: 8.3.0(@babel/core@7.23.7)(webpack@5.90.3(webpack-cli@4.10.0))\n       chai:\n         specifier: 4.4.1\n         version: 4.4.1\n       copy-webpack-plugin:\n         specifier: 9.1.0\n-        version: 9.1.0(webpack@5.90.3(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3)))\n+        version: 9.1.0(webpack@5.90.3(webpack-cli@4.10.0))\n       enzyme:\n         specifier: 3.11.0\n         version: 3.11.0\n@@ -1158,7 +1161,7 @@ importers:\n         version: 0.12.5\n       webpack:\n         specifier: 5.90.3\n-        version: 5.90.3(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3))\n+        version: 5.90.3(webpack-cli@4.10.0)\n       webpack-cli:\n         specifier: 4.10.0\n         version: 4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3)\n@@ -8122,6 +8125,9 @@ packages:\n   hyphenate-style-name@1.0.4:\n     resolution: {integrity: sha512-ygGZLjmXfPHj+ZWh6LwbC37l43MhfztxetbFCoYTM2VjkIUpeHgSNn7QIyVFj7YQ1Wl9Cbw5sholVJPzWvC2MQ==}\n \n+  i18next-fs-backend@2.3.2:\n+    resolution: {integrity: sha512-LIwUlkqDZnUI8lnUxBnEj8K/FrHQTT/Sc+1rvDm9E8YvvY5YxzoEAASNx+W5M9DfD5s77lI5vSAFWeTp26B/3Q==}\n+\n   i18next@22.5.1:\n     resolution: {integrity: sha512-8TGPgM3pAD+VRsMtUMNknRz3kzqwp/gPALrWMsDnmC1mKqJwpWyooQRLMcbTwq8z8YwSmuj+ZYvc+xCuEpkssA==}\n \n@@ -18258,7 +18264,7 @@ snapshots:\n     dependencies:\n       '@types/node': 20.8.0\n       tapable: 2.2.1\n-      webpack: 5.90.3(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3))\n+      webpack: 5.90.3(webpack-cli@4.10.0)\n     transitivePeerDependencies:\n       - '@swc/core'\n       - esbuild\n@@ -19000,9 +19006,9 @@ snapshots:\n       '@webassemblyjs/ast': 1.11.6\n       '@xtuc/long': 4.2.2\n \n-  '@webpack-cli/configtest@1.2.0(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3))(webpack@5.90.3(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3)))':\n+  '@webpack-cli/configtest@1.2.0(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3))(webpack@5.90.3(webpack-cli@4.10.0))':\n     dependencies:\n-      webpack: 5.90.3(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3))\n+      webpack: 5.90.3(webpack-cli@4.10.0)\n       webpack-cli: 4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3)\n \n   '@webpack-cli/info@1.5.0(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3))':\n@@ -19501,14 +19507,14 @@ snapshots:\n       schema-utils: 2.7.1\n       webpack: 5.90.3\n \n-  babel-loader@8.3.0(@babel/core@7.23.7)(webpack@5.90.3(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3))):\n+  babel-loader@8.3.0(@babel/core@7.23.7)(webpack@5.90.3(webpack-cli@4.10.0)):\n     dependencies:\n       '@babel/core': 7.23.7\n       find-cache-dir: 3.3.2\n       loader-utils: 2.0.4\n       make-dir: 3.1.0\n       schema-utils: 2.7.1\n-      webpack: 5.90.3(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3))\n+      webpack: 5.90.3(webpack-cli@4.10.0)\n \n   babel-plugin-add-module-exports@1.0.4: {}\n \n@@ -20626,15 +20632,15 @@ snapshots:\n \n   copy-descriptor@0.1.1: {}\n \n-  copy-webpack-plugin@9.1.0(webpack@5.90.3(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3))):\n+  copy-webpack-plugin@9.1.0(webpack@5.90.3(webpack-cli@4.10.0)):\n     dependencies:\n       fast-glob: 3.3.1\n       glob-parent: 6.0.2\n       globby: 11.1.0\n       normalize-path: 3.0.0\n       schema-utils: 3.3.0\n       serialize-javascript: 6.0.1\n-      webpack: 5.90.3(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3))\n+      webpack: 5.90.3(webpack-cli@4.10.0)\n \n   core-js-compat@3.33.0:\n     dependencies:\n@@ -23908,6 +23914,8 @@ snapshots:\n \n   hyphenate-style-name@1.0.4: {}\n \n+  i18next-fs-backend@2.3.2: {}\n+\n   i18next@22.5.1:\n     dependencies:\n       '@babel/runtime': 7.23.9\n@@ -29426,14 +29434,14 @@ snapshots:\n \n   term-size@2.2.1: {}\n \n-  terser-webpack-plugin@5.3.10(webpack@5.90.3(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3))):\n+  terser-webpack-plugin@5.3.10(webpack@5.90.3(webpack-cli@4.10.0)):\n     dependencies:\n       '@jridgewell/trace-mapping': 0.3.25\n       jest-worker: 27.5.1\n       schema-utils: 3.3.0\n       serialize-javascript: 6.0.1\n       terser: 5.28.1\n-      webpack: 5.90.3(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3))\n+      webpack: 5.90.3(webpack-cli@4.10.0)\n \n   terser-webpack-plugin@5.3.10(webpack@5.90.3):\n     dependencies:\n@@ -30308,7 +30316,7 @@ snapshots:\n   webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3):\n     dependencies:\n       '@discoveryjs/json-ext': 0.5.7\n-      '@webpack-cli/configtest': 1.2.0(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3))(webpack@5.90.3(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3)))\n+      '@webpack-cli/configtest': 1.2.0(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3))(webpack@5.90.3(webpack-cli@4.10.0))\n       '@webpack-cli/info': 1.5.0(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3))\n       '@webpack-cli/serve': 1.7.0(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3))\n       colorette: 2.0.20\n@@ -30318,7 +30326,7 @@ snapshots:\n       import-local: 3.1.0\n       interpret: 2.2.0\n       rechoir: 0.7.1\n-      webpack: 5.90.3(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3))\n+      webpack: 5.90.3(webpack-cli@4.10.0)\n       webpack-merge: 5.9.0\n     optionalDependencies:\n       webpack-bundle-analyzer: 4.10.1\n@@ -30384,7 +30392,7 @@ snapshots:\n       - esbuild\n       - uglify-js\n \n-  webpack@5.90.3(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3)):\n+  webpack@5.90.3(webpack-cli@4.10.0):\n     dependencies:\n       '@types/eslint-scope': 3.7.5\n       '@types/estree': 1.0.5\n@@ -30407,7 +30415,7 @@ snapshots:\n       neo-async: 2.6.2\n       schema-utils: 3.3.0\n       tapable: 2.2.1\n-      terser-webpack-plugin: 5.3.10(webpack@5.90.3(webpack-cli@4.10.0(webpack-bundle-analyzer@4.10.1)(webpack@5.90.3)))\n+      terser-webpack-plugin: 5.3.10(webpack@5.90.3(webpack-cli@4.10.0))\n       watchpack: 2.4.0\n       webpack-sources: 3.2.3\n     optionalDependencies:"
        }
    ],
    "stats": {
        "total": 378,
        "additions": 353,
        "deletions": 25
    }
}