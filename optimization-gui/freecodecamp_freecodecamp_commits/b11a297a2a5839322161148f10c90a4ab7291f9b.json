{
    "author": "ojeytonwilliams",
    "message": "test: use ts compiler in cli tests (#62783)",
    "sha": "b11a297a2a5839322161148f10c90a4ab7291f9b",
    "files": [
        {
            "sha": "10b24cdb6a96ad7cbcab52e6723c64cbb1e72451",
            "filename": "curriculum/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/b11a297a2a5839322161148f10c90a4ab7291f9b/curriculum%2Fpackage.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/b11a297a2a5839322161148f10c90a4ab7291f9b/curriculum%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fpackage.json?ref=b11a297a2a5839322161148f10c90a4ab7291f9b",
            "patch": "@@ -49,6 +49,7 @@\n     \"@types/js-yaml\": \"4.0.5\",\n     \"@types/polka\": \"^0.5.7\",\n     \"@types/string-similarity\": \"^4.0.2\",\n+    \"@typescript/vfs-1.6.1\": \"npm:@typescript/vfs@1.6.1\",\n     \"@vitest/ui\": \"^3.2.4\",\n     \"eslint\": \"^9.39.1\",\n     \"glob\": \"8.1.0\",\n@@ -64,6 +65,7 @@\n     \"puppeteer\": \"22.12.1\",\n     \"sirv\": \"^3.0.2\",\n     \"string-similarity\": \"4.0.4\",\n+    \"typescript-5.9.2\": \"npm:typescript@5.9.2\",\n     \"vitest\": \"^3.2.4\"\n   }\n }"
        },
        {
            "sha": "1ef99d777f1316c94381c14e1618cfee28ba9590",
            "filename": "curriculum/src/test/test-challenges.js",
            "status": "modified",
            "additions": 41,
            "deletions": 8,
            "changes": 49,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/b11a297a2a5839322161148f10c90a4ab7291f9b/curriculum%2Fsrc%2Ftest%2Ftest-challenges.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/b11a297a2a5839322161148f10c90a4ab7291f9b/curriculum%2Fsrc%2Ftest%2Ftest-challenges.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fsrc%2Ftest%2Ftest-challenges.js?ref=b11a297a2a5839322161148f10c90a4ab7291f9b",
            "patch": "@@ -1,11 +1,8 @@\n-import { describe, it, beforeAll, expect } from 'vitest';\n+import { describe, it, beforeAll, expect, vi } from 'vitest';\n+\n import jsdom from 'jsdom';\n import lodash from 'lodash';\n \n-import {\n-  buildChallenge,\n-  runnerTypes\n-} from '../../../client/src/templates/Challenges/utils/build';\n import {\n   challengeTypes,\n   hasNoSolution\n@@ -28,6 +25,32 @@ import { sortChallenges } from './utils/sort-challenges.js';\n \n const { flatten, isEmpty, cloneDeep } = lodash;\n \n+vi.mock(\n+  '../../../client/src/templates/Challenges/utils/typescript-worker-handler',\n+  async importOriginal => {\n+    const actual = await importOriginal();\n+\n+    // ts and tsvfs must match the versions used in the typescript-worker.\n+    const tsvfs = await import('@typescript/vfs-1.6.1');\n+    const ts = await import('typescript-5.9.2');\n+    // use the same TS compiler as the client\n+    const tsCompiler = await import(\n+      '../../../tools/client-plugins/browser-scripts/modules/typescript-compiler'\n+    );\n+    const compiler = new tsCompiler.Compiler(ts, tsvfs);\n+    await compiler.setup({ useNodeModules: true });\n+    return {\n+      ...actual,\n+      checkTSServiceIsReady: () => Promise.resolve(true),\n+      compileTypeScriptCode: code => {\n+        const { result, error } = compiler.compile(code, 'index.tsx');\n+        if (error) throw error;\n+        return result;\n+      }\n+    };\n+  }\n+);\n+\n const dom = new jsdom.JSDOM('');\n global.document = dom.window.document;\n global.DOMParser = dom.window.DOMParser;\n@@ -86,13 +109,13 @@ export async function defineTestsForBlock(testFilter) {\n \n   const challengeData = { meta, challenges, lang };\n \n-  describe('Check challenges', () => {\n+  describe('Check challenges', async () => {\n     beforeAll(async () => {\n       page = await newPageContext();\n       global.Worker = createPseudoWorker(page);\n     });\n \n-    populateTestsForLang(challengeData, () => page);\n+    await populateTestsForLang(challengeData, () => page);\n   });\n }\n \n@@ -123,7 +146,13 @@ export async function getChallenges(lang, filters) {\n   return sortChallenges(challenges);\n }\n \n-function populateTestsForLang({ lang, challenges, meta }) {\n+async function populateTestsForLang({ lang, challenges, meta }) {\n+  // We have to dynamically import this because otherwise it will not be mocked.\n+  // Presumably this is because we import from_this file in the generated block\n+  // test files and that happens before the mock is applied.\n+  const { buildChallenge } = await import(\n+    '../../../client/src/templates/Challenges/utils/build'\n+  );\n   const validateChallenge = challengeSchemaValidator();\n \n   describe(`Language: ${lang}`, function () {\n@@ -341,6 +370,10 @@ async function createTestRunner(\n   buildChallenge,\n   solutionFromNext\n ) {\n+  const { runnerTypes } = await import(\n+    '../../../client/src/templates/Challenges/utils/build'\n+  );\n+\n   const challengeFiles = replaceChallengeFilesContentsWithSolutions(\n     challenge.challengeFiles,\n     solutionFiles"
        },
        {
            "sha": "cf673e5672938b5bca8d1fa55ae5cbd6f6481314",
            "filename": "pnpm-lock.yaml",
            "status": "modified",
            "additions": 83,
            "deletions": 44,
            "changes": 127,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/b11a297a2a5839322161148f10c90a4ab7291f9b/pnpm-lock.yaml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/b11a297a2a5839322161148f10c90a4ab7291f9b/pnpm-lock.yaml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/pnpm-lock.yaml?ref=b11a297a2a5839322161148f10c90a4ab7291f9b",
            "patch": "@@ -121,7 +121,7 @@ importers:\n         version: 1.3.1\n       '@prisma/client':\n         specifier: 6.16.2\n-        version: 6.16.2(prisma@6.16.2(typescript@5.8.2))(typescript@5.8.2)\n+        version: 6.16.2(prisma@6.16.2(typescript@5.9.3))(typescript@5.9.3)\n       '@sentry/node':\n         specifier: 9.1.0\n         version: 9.1.0\n@@ -230,10 +230,10 @@ importers:\n         version: 26.1.0\n       msw:\n         specifier: ^2.7.0\n-        version: 2.8.7(@types/node@20.12.8)(typescript@5.8.2)\n+        version: 2.8.7(@types/node@20.12.8)(typescript@5.9.3)\n       prisma:\n         specifier: 6.16.2\n-        version: 6.16.2(typescript@5.8.2)\n+        version: 6.16.2(typescript@5.9.3)\n       supertest:\n         specifier: 6.3.3\n         version: 6.3.3\n@@ -242,7 +242,7 @@ importers:\n         version: 4.19.1\n       vitest:\n         specifier: ^3.2.4\n-        version: 3.2.4(@types/debug@4.1.12)(@types/node@20.12.8)(@vitest/ui@3.2.4)(jiti@2.6.1)(jsdom@26.1.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.8.2))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1)\n+        version: 3.2.4(@types/debug@4.1.12)(@types/node@20.12.8)(@vitest/ui@3.2.4)(jiti@2.6.1)(jsdom@26.1.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.9.3))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1)\n \n   client:\n     dependencies:\n@@ -703,6 +703,9 @@ importers:\n       '@types/string-similarity':\n         specifier: ^4.0.2\n         version: 4.0.2\n+      '@typescript/vfs-1.6.1':\n+        specifier: npm:@typescript/vfs@1.6.1\n+        version: '@typescript/vfs@1.6.1(typescript@5.9.3)'\n       '@vitest/ui':\n         specifier: ^3.2.4\n         version: 3.2.4(vitest@3.2.4)\n@@ -741,16 +744,19 @@ importers:\n         version: 0.5.2\n       puppeteer:\n         specifier: 22.12.1\n-        version: 22.12.1(typescript@5.8.2)\n+        version: 22.12.1(typescript@5.9.3)\n       sirv:\n         specifier: ^3.0.2\n         version: 3.0.2\n       string-similarity:\n         specifier: 4.0.4\n         version: 4.0.4\n+      typescript-5.9.2:\n+        specifier: npm:typescript@5.9.2\n+        version: typescript@5.9.2\n       vitest:\n         specifier: ^3.2.4\n-        version: 3.2.4(@types/debug@4.1.12)(@types/node@20.12.8)(@vitest/ui@3.2.4)(jiti@2.6.1)(jsdom@16.7.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.8.2))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1)\n+        version: 3.2.4(@types/debug@4.1.12)(@types/node@20.12.8)(@vitest/ui@3.2.4)(jiti@2.6.1)(jsdom@16.7.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.9.3))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1)\n \n   e2e:\n     devDependencies:\n@@ -834,7 +840,7 @@ importers:\n         version: 9.39.1(jiti@2.6.1)\n       vitest:\n         specifier: ^3.2.4\n-        version: 3.2.4(@types/debug@4.1.12)(@types/node@20.12.8)(@vitest/ui@3.2.4)(jiti@2.6.1)(jsdom@26.1.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.8.2))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1)\n+        version: 3.2.4(@types/debug@4.1.12)(@types/node@20.12.8)(@vitest/ui@3.2.4)(jiti@2.6.1)(jsdom@26.1.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.9.3))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1)\n \n   tools/challenge-editor/api:\n     dependencies:\n@@ -1062,13 +1068,13 @@ importers:\n         version: 3.0.4\n       vitest:\n         specifier: ^3.2.4\n-        version: 3.2.4(@types/debug@4.1.12)(@types/node@20.12.8)(@vitest/ui@3.2.4)(jiti@2.6.1)(jsdom@26.1.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.8.2))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1)\n+        version: 3.2.4(@types/debug@4.1.12)(@types/node@20.12.8)(@vitest/ui@3.2.4)(jiti@2.6.1)(jsdom@26.1.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.9.3))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1)\n \n   tools/client-plugins/browser-scripts:\n     dependencies:\n       '@freecodecamp/curriculum-helpers':\n         specifier: ^7.1.0\n-        version: 7.1.0(debug@4.3.4)(typescript@5.7.3)\n+        version: 7.1.0(debug@4.3.4)(typescript@5.9.2)\n       xterm:\n         specifier: ^5.2.1\n         version: 5.3.0\n@@ -1092,8 +1098,8 @@ importers:\n         specifier: ^8.0.1\n         version: 8.0.1(webpack-cli@4.10.0)\n       '@typescript/vfs':\n-        specifier: ^1.6.0\n-        version: 1.6.1(typescript@5.7.3)\n+        specifier: 1.6.1\n+        version: 1.6.1(typescript@5.9.2)\n       babel-loader:\n         specifier: 8.3.0\n         version: 8.3.0(@babel/core@7.28.5)(webpack@5.90.3)\n@@ -1112,6 +1118,9 @@ importers:\n       sass.js:\n         specifier: 0.11.1\n         version: 0.11.1\n+      typescript:\n+        specifier: 5.9.2\n+        version: 5.9.2\n       util:\n         specifier: 0.12.5\n         version: 0.12.5\n@@ -1177,7 +1186,7 @@ importers:\n         version: 9.39.1(jiti@2.6.1)\n       vitest:\n         specifier: ^3.2.4\n-        version: 3.2.4(@types/debug@4.1.12)(@types/node@20.12.8)(@vitest/ui@3.2.4)(jiti@2.6.1)(jsdom@26.1.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.8.2))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1)\n+        version: 3.2.4(@types/debug@4.1.12)(@types/node@20.12.8)(@vitest/ui@3.2.4)(jiti@2.6.1)(jsdom@26.1.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.9.3))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1)\n \n   tools/scripts/seed:\n     devDependencies:\n@@ -13091,6 +13100,16 @@ packages:\n     engines: {node: '>=14.17'}\n     hasBin: true\n \n+  typescript@5.9.2:\n+    resolution: {integrity: sha512-CWBzXQrc/qOkhidw1OzBTQuYRbfyxDXJMVJ1XNwUHGROVmuaeiEm3OslpZ1RV96d7SKKjZKrSJu3+t/xlw3R9A==}\n+    engines: {node: '>=14.17'}\n+    hasBin: true\n+\n+  typescript@5.9.3:\n+    resolution: {integrity: sha512-jl1vZzPDinLr9eUt3J/t7V6FgNEw9QjvBPdysz9KfQDD41fQrC2Y4vKQdiaUpFT4bXlb1RHhLpp8wtm6M5TgSw==}\n+    engines: {node: '>=14.17'}\n+    hasBin: true\n+\n   uc.micro@2.0.0:\n     resolution: {integrity: sha512-DffL94LsNOccVn4hyfRe5rdKa273swqeA5DJpMOeFmEn1wCDc7nAbbB0gXlgBCL7TNzeTv6G7XVWzan7iJtfig==}\n \n@@ -17098,7 +17117,7 @@ snapshots:\n       prop-types: 15.8.1\n       react: 17.0.2\n \n-  '@freecodecamp/curriculum-helpers@7.1.0(debug@4.3.4)(typescript@5.7.3)':\n+  '@freecodecamp/curriculum-helpers@7.1.0(debug@4.3.4)(typescript@5.9.2)':\n     dependencies:\n       '@sinonjs/fake-timers': 14.0.0\n       '@types/jquery': 3.5.32\n@@ -17111,10 +17130,10 @@ snapshots:\n       http-server: 14.1.1(debug@4.3.4)\n       jquery: 3.7.1\n       process: 0.11.10\n-      puppeteer: 24.10.0(typescript@5.7.3)\n+      puppeteer: 24.10.0(typescript@5.9.2)\n       pyodide: 0.23.3\n       util: 0.12.5\n-      vitest-environment-puppeteer: 11.0.3(debug@4.3.4)(typescript@5.7.3)\n+      vitest-environment-puppeteer: 11.0.3(debug@4.3.4)(typescript@5.9.2)\n     transitivePeerDependencies:\n       - bare-buffer\n       - bufferutil\n@@ -17902,10 +17921,10 @@ snapshots:\n \n   '@polka/url@1.0.0-next.29': {}\n \n-  '@prisma/client@6.16.2(prisma@6.16.2(typescript@5.8.2))(typescript@5.8.2)':\n+  '@prisma/client@6.16.2(prisma@6.16.2(typescript@5.9.3))(typescript@5.9.3)':\n     optionalDependencies:\n-      prisma: 6.16.2(typescript@5.8.2)\n-      typescript: 5.8.2\n+      prisma: 6.16.2(typescript@5.9.3)\n+      typescript: 5.9.3\n \n   '@prisma/config@6.16.2':\n     dependencies:\n@@ -19609,10 +19628,17 @@ snapshots:\n       '@typescript-eslint/types': 8.47.0\n       eslint-visitor-keys: 4.2.1\n \n-  '@typescript/vfs@1.6.1(typescript@5.7.3)':\n+  '@typescript/vfs@1.6.1(typescript@5.9.2)':\n     dependencies:\n       debug: 4.3.4(supports-color@8.1.1)\n-      typescript: 5.7.3\n+      typescript: 5.9.2\n+    transitivePeerDependencies:\n+      - supports-color\n+\n+  '@typescript/vfs@1.6.1(typescript@5.9.3)':\n+    dependencies:\n+      debug: 4.3.4(supports-color@8.1.1)\n+      typescript: 5.9.3\n     transitivePeerDependencies:\n       - supports-color\n \n@@ -19728,13 +19754,13 @@ snapshots:\n       msw: 2.8.7(@types/node@20.12.8)(typescript@5.7.3)\n       vite: 7.1.3(@types/node@20.12.8)(jiti@2.6.1)(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1)\n \n-  '@vitest/mocker@3.2.4(msw@2.8.7(@types/node@20.12.8)(typescript@5.8.2))(vite@7.1.3(@types/node@20.12.8)(jiti@2.6.1)(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1))':\n+  '@vitest/mocker@3.2.4(msw@2.8.7(@types/node@20.12.8)(typescript@5.9.3))(vite@7.1.3(@types/node@20.12.8)(jiti@2.6.1)(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1))':\n     dependencies:\n       '@vitest/spy': 3.2.4\n       estree-walker: 3.0.3\n       magic-string: 0.30.17\n     optionalDependencies:\n-      msw: 2.8.7(@types/node@20.12.8)(typescript@5.8.2)\n+      msw: 2.8.7(@types/node@20.12.8)(typescript@5.9.3)\n       vite: 7.1.3(@types/node@20.12.8)(jiti@2.6.1)(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1)\n \n   '@vitest/pretty-format@3.2.4':\n@@ -19766,7 +19792,7 @@ snapshots:\n       sirv: 3.0.2\n       tinyglobby: 0.2.14\n       tinyrainbow: 2.0.0\n-      vitest: 3.2.4(@types/debug@4.1.12)(@types/node@20.12.8)(@vitest/ui@3.2.4)(jiti@2.6.1)(jsdom@26.1.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.7.3))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1)\n+      vitest: 3.2.4(@types/debug@4.1.12)(@types/node@20.12.8)(@vitest/ui@3.2.4)(jiti@2.6.1)(jsdom@26.1.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.9.3))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1)\n \n   '@vitest/utils@3.2.4':\n     dependencies:\n@@ -21380,14 +21406,23 @@ snapshots:\n     optionalDependencies:\n       typescript: 5.7.3\n \n-  cosmiconfig@9.0.0(typescript@5.8.2):\n+  cosmiconfig@9.0.0(typescript@5.9.2):\n     dependencies:\n       env-paths: 2.2.1\n       import-fresh: 3.3.0\n       js-yaml: 4.1.0\n       parse-json: 5.2.0\n     optionalDependencies:\n-      typescript: 5.8.2\n+      typescript: 5.9.2\n+\n+  cosmiconfig@9.0.0(typescript@5.9.3):\n+    dependencies:\n+      env-paths: 2.2.1\n+      import-fresh: 3.3.0\n+      js-yaml: 4.1.0\n+      parse-json: 5.2.0\n+    optionalDependencies:\n+      typescript: 5.9.3\n \n   create-ecdh@4.0.4:\n     dependencies:\n@@ -22365,7 +22400,7 @@ snapshots:\n       confusing-browser-globals: 1.0.11\n       eslint: 7.32.0\n       eslint-plugin-flowtype: 5.10.0(eslint@7.32.0)\n-      eslint-plugin-import: 2.31.0(@typescript-eslint/parser@4.33.0(eslint@7.32.0)(typescript@5.2.2))(eslint@9.39.1(jiti@2.6.1))\n+      eslint-plugin-import: 2.31.0(@typescript-eslint/parser@4.33.0(eslint@9.39.1(jiti@2.6.1))(typescript@5.2.2))(eslint@9.39.1(jiti@2.6.1))\n       eslint-plugin-jsx-a11y: 6.10.2(eslint@9.39.1(jiti@2.6.1))\n       eslint-plugin-react: 7.37.4(eslint@9.39.1(jiti@2.6.1))\n       eslint-plugin-react-hooks: 4.6.0(eslint@9.39.1(jiti@2.6.1))\n@@ -22395,7 +22430,7 @@ snapshots:\n     transitivePeerDependencies:\n       - supports-color\n \n-  eslint-module-utils@2.12.0(@typescript-eslint/parser@4.33.0(eslint@7.32.0)(typescript@5.2.2))(eslint-import-resolver-node@0.3.9)(eslint@9.39.1(jiti@2.6.1)):\n+  eslint-module-utils@2.12.0(@typescript-eslint/parser@4.33.0(eslint@9.39.1(jiti@2.6.1))(typescript@5.2.2))(eslint-import-resolver-node@0.3.9)(eslint@9.39.1(jiti@2.6.1)):\n     dependencies:\n       debug: 3.2.7\n     optionalDependencies:\n@@ -22449,7 +22484,7 @@ snapshots:\n       - typescript\n       - utf-8-validate\n \n-  eslint-plugin-import@2.31.0(@typescript-eslint/parser@4.33.0(eslint@7.32.0)(typescript@5.2.2))(eslint@9.39.1(jiti@2.6.1)):\n+  eslint-plugin-import@2.31.0(@typescript-eslint/parser@4.33.0(eslint@9.39.1(jiti@2.6.1))(typescript@5.2.2))(eslint@9.39.1(jiti@2.6.1)):\n     dependencies:\n       '@rtsao/scc': 1.1.0\n       array-includes: 3.1.8\n@@ -22460,7 +22495,7 @@ snapshots:\n       doctrine: 2.1.0\n       eslint: 9.39.1(jiti@2.6.1)\n       eslint-import-resolver-node: 0.3.9\n-      eslint-module-utils: 2.12.0(@typescript-eslint/parser@4.33.0(eslint@7.32.0)(typescript@5.2.2))(eslint-import-resolver-node@0.3.9)(eslint@9.39.1(jiti@2.6.1))\n+      eslint-module-utils: 2.12.0(@typescript-eslint/parser@4.33.0(eslint@9.39.1(jiti@2.6.1))(typescript@5.2.2))(eslint-import-resolver-node@0.3.9)(eslint@9.39.1(jiti@2.6.1))\n       hasown: 2.0.2\n       is-core-module: 2.16.1\n       is-glob: 4.0.3\n@@ -23683,7 +23718,7 @@ snapshots:\n       eslint-config-react-app: 6.0.0(@typescript-eslint/eslint-plugin@4.33.0(@typescript-eslint/parser@4.33.0(eslint@7.32.0)(typescript@5.2.2))(eslint@7.32.0)(typescript@5.2.2))(@typescript-eslint/parser@4.33.0(eslint@7.32.0)(typescript@5.2.2))(babel-eslint@10.1.0(eslint@9.39.1(jiti@2.6.1)))(eslint-plugin-flowtype@5.10.0(eslint@7.32.0))(eslint-plugin-import@2.31.0(@typescript-eslint/parser@4.33.0(eslint@7.32.0)(typescript@5.2.2))(eslint@7.32.0))(eslint-plugin-jsx-a11y@6.10.2(eslint@7.32.0))(eslint-plugin-react-hooks@4.6.0(eslint@7.32.0))(eslint-plugin-react@7.37.4(eslint@7.32.0))(eslint@7.32.0)(typescript@5.2.2)\n       eslint-plugin-flowtype: 5.10.0(eslint@7.32.0)\n       eslint-plugin-graphql: 4.0.0(@types/node@20.12.8)(graphql@15.8.0)(typescript@5.2.2)\n-      eslint-plugin-import: 2.31.0(@typescript-eslint/parser@4.33.0(eslint@7.32.0)(typescript@5.2.2))(eslint@9.39.1(jiti@2.6.1))\n+      eslint-plugin-import: 2.31.0(@typescript-eslint/parser@4.33.0(eslint@9.39.1(jiti@2.6.1))(typescript@5.2.2))(eslint@9.39.1(jiti@2.6.1))\n       eslint-plugin-jsx-a11y: 6.10.2(eslint@9.39.1(jiti@2.6.1))\n       eslint-plugin-react: 7.37.4(eslint@9.39.1(jiti@2.6.1))\n       eslint-plugin-react-hooks: 4.6.0(eslint@9.39.1(jiti@2.6.1))\n@@ -26479,7 +26514,7 @@ snapshots:\n       - '@types/node'\n     optional: true\n \n-  msw@2.8.7(@types/node@20.12.8)(typescript@5.8.2):\n+  msw@2.8.7(@types/node@20.12.8)(typescript@5.9.3):\n     dependencies:\n       '@bundled-es-modules/cookie': 2.0.1\n       '@bundled-es-modules/statuses': 1.0.1\n@@ -26500,7 +26535,7 @@ snapshots:\n       type-fest: 4.37.0\n       yargs: 17.7.2\n     optionalDependencies:\n-      typescript: 5.8.2\n+      typescript: 5.9.3\n     transitivePeerDependencies:\n       - '@types/node'\n \n@@ -27449,12 +27484,12 @@ snapshots:\n       ansi-styles: 5.2.0\n       react-is: 18.2.0\n \n-  prisma@6.16.2(typescript@5.8.2):\n+  prisma@6.16.2(typescript@5.9.3):\n     dependencies:\n       '@prisma/config': 6.16.2\n       '@prisma/engines': 6.16.2\n     optionalDependencies:\n-      typescript: 5.8.2\n+      typescript: 5.9.3\n     transitivePeerDependencies:\n       - magicast\n \n@@ -27592,10 +27627,10 @@ snapshots:\n       - supports-color\n       - utf-8-validate\n \n-  puppeteer@22.12.1(typescript@5.8.2):\n+  puppeteer@22.12.1(typescript@5.9.3):\n     dependencies:\n       '@puppeteer/browsers': 2.2.3\n-      cosmiconfig: 9.0.0(typescript@5.8.2)\n+      cosmiconfig: 9.0.0(typescript@5.9.3)\n       devtools-protocol: 0.0.1299070\n       puppeteer-core: 22.12.1\n     transitivePeerDependencies:\n@@ -27605,11 +27640,11 @@ snapshots:\n       - typescript\n       - utf-8-validate\n \n-  puppeteer@24.10.0(typescript@5.7.3):\n+  puppeteer@24.10.0(typescript@5.9.2):\n     dependencies:\n       '@puppeteer/browsers': 2.10.5\n       chromium-bidi: 5.1.0(devtools-protocol@0.0.1452169)\n-      cosmiconfig: 9.0.0(typescript@5.7.3)\n+      cosmiconfig: 9.0.0(typescript@5.9.2)\n       devtools-protocol: 0.0.1452169\n       puppeteer-core: 24.10.0\n       typed-query-selector: 2.12.0\n@@ -29806,6 +29841,10 @@ snapshots:\n \n   typescript@5.8.2: {}\n \n+  typescript@5.9.2: {}\n+\n+  typescript@5.9.3: {}\n+\n   uc.micro@2.0.0: {}\n \n   umd@3.0.3: {}\n@@ -30283,21 +30322,21 @@ snapshots:\n     transitivePeerDependencies:\n       - debug\n \n-  vitest-environment-puppeteer@11.0.3(debug@4.3.4)(typescript@5.7.3):\n+  vitest-environment-puppeteer@11.0.3(debug@4.3.4)(typescript@5.9.2):\n     dependencies:\n       chalk: 4.1.2\n-      cosmiconfig: 9.0.0(typescript@5.7.3)\n+      cosmiconfig: 9.0.0(typescript@5.9.2)\n       deepmerge: 4.3.1\n       vitest-dev-server: 11.0.3(debug@4.3.4)\n     transitivePeerDependencies:\n       - debug\n       - typescript\n \n-  vitest@3.2.4(@types/debug@4.1.12)(@types/node@20.12.8)(@vitest/ui@3.2.4)(jiti@2.6.1)(jsdom@16.7.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.8.2))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1):\n+  vitest@3.2.4(@types/debug@4.1.12)(@types/node@20.12.8)(@vitest/ui@3.2.4)(jiti@2.6.1)(jsdom@16.7.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.9.3))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1):\n     dependencies:\n       '@types/chai': 5.2.2\n       '@vitest/expect': 3.2.4\n-      '@vitest/mocker': 3.2.4(msw@2.8.7(@types/node@20.12.8)(typescript@5.8.2))(vite@7.1.3(@types/node@20.12.8)(jiti@2.6.1)(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1))\n+      '@vitest/mocker': 3.2.4(msw@2.8.7(@types/node@20.12.8)(typescript@5.9.3))(vite@7.1.3(@types/node@20.12.8)(jiti@2.6.1)(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1))\n       '@vitest/pretty-format': 3.2.4\n       '@vitest/runner': 3.2.4\n       '@vitest/snapshot': 3.2.4\n@@ -30425,11 +30464,11 @@ snapshots:\n       - tsx\n       - yaml\n \n-  vitest@3.2.4(@types/debug@4.1.12)(@types/node@20.12.8)(@vitest/ui@3.2.4)(jiti@2.6.1)(jsdom@26.1.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.8.2))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1):\n+  vitest@3.2.4(@types/debug@4.1.12)(@types/node@20.12.8)(@vitest/ui@3.2.4)(jiti@2.6.1)(jsdom@26.1.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.9.3))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1):\n     dependencies:\n       '@types/chai': 5.2.2\n       '@vitest/expect': 3.2.4\n-      '@vitest/mocker': 3.2.4(msw@2.8.7(@types/node@20.12.8)(typescript@5.8.2))(vite@7.1.3(@types/node@20.12.8)(jiti@2.6.1)(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1))\n+      '@vitest/mocker': 3.2.4(msw@2.8.7(@types/node@20.12.8)(typescript@5.9.3))(vite@7.1.3(@types/node@20.12.8)(jiti@2.6.1)(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.1))\n       '@vitest/pretty-format': 3.2.4\n       '@vitest/runner': 3.2.4\n       '@vitest/snapshot': 3.2.4"
        },
        {
            "sha": "801da2b003e7847da9a60bb93b144911d6a48dc9",
            "filename": "tools/client-plugins/browser-scripts/modules/typescript-compiler.ts",
            "status": "modified",
            "additions": 17,
            "deletions": 12,
            "changes": 29,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/b11a297a2a5839322161148f10c90a4ab7291f9b/tools%2Fclient-plugins%2Fbrowser-scripts%2Fmodules%2Ftypescript-compiler.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/b11a297a2a5839322161148f10c90a4ab7291f9b/tools%2Fclient-plugins%2Fbrowser-scripts%2Fmodules%2Ftypescript-compiler.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fclient-plugins%2Fbrowser-scripts%2Fmodules%2Ftypescript-compiler.ts?ref=b11a297a2a5839322161148f10c90a4ab7291f9b",
            "patch": "@@ -11,15 +11,12 @@ export class Compiler {\n   tsvfs: TSVFS;\n   tsEnv?: VirtualTypeScriptEnvironment;\n   compilerHost?: CompilerHost;\n-  constructor(\n-    ts: typeof import('typescript'),\n-    tsvfs: typeof import('@typescript/vfs')\n-  ) {\n+  constructor(ts: TS, tsvfs: TSVFS) {\n     this.ts = ts;\n     this.tsvfs = tsvfs;\n   }\n \n-  async setup() {\n+  async setup(opts?: { useNodeModules: boolean }) {\n     const ts = this.ts;\n     const tsvfs = this.tsvfs;\n \n@@ -33,17 +30,21 @@ export class Compiler {\n       jsx: ts.JsxEmit.Preserve, // Babel will handle JSX,\n       allowUmdGlobalAccess: true // Necessary because React is loaded via a UMD script.\n     };\n-    const fsMap = await tsvfs.createDefaultMapFromCDN(\n-      compilerOptions,\n-      ts.version,\n-      false, // TODO: cache this. It needs a store that's available to workers and implements https://github.com/microsoft/TypeScript-Website/blob/ac68b8b8e4a621113c4ee45c4051002fd55ede24/packages/typescript-vfs/src/index.ts#L11\n-      ts\n-    );\n+\n+    const fsMap = opts?.useNodeModules\n+      ? tsvfs.createDefaultMapFromNodeModules(compilerOptions, ts)\n+      : await tsvfs.createDefaultMapFromCDN(\n+          compilerOptions,\n+          ts.version,\n+          false, // TODO: cache this. It needs a store that's available to workers and implements https://github.com/microsoft/TypeScript-Website/blob/ac68b8b8e4a621113c4ee45c4051002fd55ede24/packages/typescript-vfs/src/index.ts#L11\n+          ts\n+        );\n \n     // This can be any path, but doing this means import React from 'react' works, if we ever need it.\n     const reactTypesPath = `/node_modules/@types/react/index.d.ts`;\n \n     // It may be necessary to get all the types (global.d.ts etc)\n+\n     fsMap.set(reactTypesPath, reactTypes['react-18'] || '');\n \n     const system = tsvfs.createSystem(fsMap);\n@@ -65,10 +66,14 @@ export class Compiler {\n     ).compilerHost;\n   }\n \n-  compile(code: string, fileName: string) {\n+  compile(rawCode: string, fileName: string) {\n     if (!this.tsEnv || !this.compilerHost) {\n       throw Error('TypeScript environment not set up');\n     }\n+    // If we try to update or create an empty file, the environment will become\n+    // permanently unable to interact with that file. The workaround is to create\n+    // a file with a single newline character.\n+    const code = rawCode || '\\n';\n     // TODO: If creating the file fresh each time is too slow, we can try checking\n     // if the file exists and updating it if it does.\n     this.tsEnv.createFile(fileName, code);"
        },
        {
            "sha": "56172129ec2ff6c41f9fe071feda27243cb3f605",
            "filename": "tools/client-plugins/browser-scripts/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/b11a297a2a5839322161148f10c90a4ab7291f9b/tools%2Fclient-plugins%2Fbrowser-scripts%2Fpackage.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/b11a297a2a5839322161148f10c90a4ab7291f9b/tools%2Fclient-plugins%2Fbrowser-scripts%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fclient-plugins%2Fbrowser-scripts%2Fpackage.json?ref=b11a297a2a5839322161148f10c90a4ab7291f9b",
            "patch": "@@ -32,13 +32,14 @@\n     \"@babel/preset-typescript\": \"7.23.3\",\n     \"@freecodecamp/eslint-config\": \"workspace:*\",\n     \"@types/copy-webpack-plugin\": \"^8.0.1\",\n-    \"@typescript/vfs\": \"^1.6.0\",\n+    \"@typescript/vfs\": \"1.6.1\",\n     \"babel-loader\": \"8.3.0\",\n     \"copy-webpack-plugin\": \"9.1.0\",\n     \"eslint\": \"^9.39.1\",\n     \"process\": \"0.11.10\",\n     \"pyodide\": \"^0.23.3\",\n     \"sass.js\": \"0.11.1\",\n+    \"typescript\": \"5.9.2\",\n     \"util\": \"0.12.5\",\n     \"webpack\": \"5.90.3\",\n     \"webpack-cli\": \"4.10.0\""
        },
        {
            "sha": "255d116c306ba61e1e2b345a14120b8e03662780",
            "filename": "tools/client-plugins/browser-scripts/typescript-worker.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 5,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/b11a297a2a5839322161148f10c90a4ab7291f9b/tools%2Fclient-plugins%2Fbrowser-scripts%2Ftypescript-worker.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/b11a297a2a5839322161148f10c90a4ab7291f9b/tools%2Fclient-plugins%2Fbrowser-scripts%2Ftypescript-worker.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fclient-plugins%2Fbrowser-scripts%2Ftypescript-worker.ts?ref=b11a297a2a5839322161148f10c90a4ab7291f9b",
            "patch": "@@ -92,11 +92,7 @@ async function handleCheckIsReadyRequest(port: MessagePort) {\n }\n \n function handleCompileRequest(data: TSCompileEvent['data'], port: MessagePort) {\n-  // If we try to update or create an empty file, the environment will become\n-  // permanently unable to interact with that file. The workaround is to create\n-  // a file with a single newline character.\n-  const code = (data.code || '').slice() || '\\n';\n-  const { result, error } = compiler.compile(code, 'index.tsx');\n+  const { result, error } = compiler.compile(data.code, 'index.tsx');\n   const message: TSCompiledMessage = {\n     type: 'compiled',\n     value: result,"
        }
    ],
    "stats": {
        "total": 216,
        "additions": 146,
        "deletions": 70
    }
}