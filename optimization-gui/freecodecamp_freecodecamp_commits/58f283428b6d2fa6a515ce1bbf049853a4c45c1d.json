{
    "author": "ojeytonwilliams",
    "message": "fix(tools): validate DEPLOYMENT_ENV (#59417)",
    "sha": "58f283428b6d2fa6a515ce1bbf049853a4c45c1d",
    "files": [
        {
            "sha": "08c90f6e28839126ff9caf24b30dea5b855a9d32",
            "filename": "client/tools/create-env.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 5,
            "changes": 20,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/58f283428b6d2fa6a515ce1bbf049853a4c45c1d/client%2Ftools%2Fcreate-env.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/58f283428b6d2fa6a515ce1bbf049853a4c45c1d/client%2Ftools%2Fcreate-env.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Ftools%2Fcreate-env.ts?ref=58f283428b6d2fa6a515ce1bbf049853a4c45c1d",
            "patch": "@@ -36,6 +36,21 @@ function checkCurriculumLocale() {\n   }\n }\n \n+function checkDeploymentEnv() {\n+  if (!process.env.DEPLOYMENT_ENV) throw Error('DEPLOYMENT_ENV is not set');\n+  if (!['staging', 'production'].includes(process.env.DEPLOYMENT_ENV)) {\n+    throw Error(`\n+\n+${process.env.DEPLOYMENT_ENV} is not a valid value for DEPLOYMENT_ENV.\n+Only 'staging' and 'production' are valid deployment environments.\n+`);\n+  }\n+}\n+\n+checkClientLocale();\n+checkCurriculumLocale();\n+checkDeploymentEnv();\n+\n if (FREECODECAMP_NODE_ENV !== 'development') {\n   const locationKeys = [\n     'homeLocation',\n@@ -105,12 +120,7 @@ if (FREECODECAMP_NODE_ENV !== 'development') {\n   SHOW_UPCOMING_CHANGES should never be 'true' in production\n \n   `);\n-\n-  checkClientLocale();\n-  checkCurriculumLocale();\n } else {\n-  checkClientLocale();\n-  checkCurriculumLocale();\n   if (fs.existsSync(`${configPath}/env.json`)) {\n     const { showUpcomingChanges } = JSON.parse(\n       fs.readFileSync(`${configPath}/env.json`, 'utf-8')"
        }
    ],
    "stats": {
        "total": 20,
        "additions": 15,
        "deletions": 5
    }
}