{
    "author": "huyenltnguyen",
    "message": "refactor(api, curriculum): use the shared shuffleArray util (#56444)\n\nCo-authored-by: Oliver Eyton-Williams <ojeytonwilliams@gmail.com>",
    "sha": "0ba9eeff43f3f782ca5e16360e04f6f2087341be",
    "files": [
        {
            "sha": "61c92323cd4e96fc88752a9570038c0d11312c0c",
            "filename": "api-server/src/server/utils/exam.js",
            "status": "modified",
            "additions": 1,
            "deletions": 15,
            "changes": 16,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0ba9eeff43f3f782ca5e16360e04f6f2087341be/api-server%2Fsrc%2Fserver%2Futils%2Fexam.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0ba9eeff43f3f782ca5e16360e04f6f2087341be/api-server%2Fsrc%2Fserver%2Futils%2Fexam.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api-server%2Fsrc%2Fserver%2Futils%2Fexam.js?ref=0ba9eeff43f3f782ca5e16360e04f6f2087341be",
            "patch": "@@ -1,18 +1,4 @@\n-function shuffleArray(arr) {\n-  let currentIndex = arr.length,\n-    randomIndex;\n-\n-  while (currentIndex != 0) {\n-    randomIndex = Math.floor(Math.random() * currentIndex);\n-    currentIndex--;\n-    [arr[currentIndex], arr[randomIndex]] = [\n-      arr[randomIndex],\n-      arr[currentIndex]\n-    ];\n-  }\n-\n-  return arr;\n-}\n+import { shuffleArray } from '../../../../shared/utils/shuffle-array';\n \n function filterDeprecated(arr) {\n   return arr.filter(i => !i.deprecated);"
        },
        {
            "sha": "94671fc8f851725b4dbd93b7b345eba2dc4b7446",
            "filename": "api/src/utils/exam.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 17,
            "changes": 18,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0ba9eeff43f3f782ca5e16360e04f6f2087341be/api%2Fsrc%2Futils%2Fexam.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0ba9eeff43f3f782ca5e16360e04f6f2087341be/api%2Fsrc%2Futils%2Fexam.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Futils%2Fexam.ts?ref=0ba9eeff43f3f782ca5e16360e04f6f2087341be",
            "patch": "@@ -1,23 +1,7 @@\n import { Exam, Question } from '@prisma/client';\n+import { shuffleArray } from './../../../shared/utils/shuffle-array';\n import { UserExam, GeneratedExam } from './exam-types';\n \n-function shuffleArray<T>(arr: T[]): T[] {\n-  let currentIndex: number = arr.length;\n-  let randomIndex: number;\n-\n-  while (currentIndex !== 0) {\n-    randomIndex = Math.floor(Math.random() * currentIndex);\n-    currentIndex--;\n-\n-    [arr[currentIndex], arr[randomIndex]] = [\n-      arr[randomIndex] as T,\n-      arr[currentIndex] as T\n-    ];\n-  }\n-\n-  return arr;\n-}\n-\n /**\n  * Remove objects from array with deprecated: true.\n  *"
        },
        {
            "sha": "a80c0b16ca4b05ad0047e84f8b1978ad34345c1a",
            "filename": "curriculum/test/utils/sort-challenges.test.js",
            "status": "modified",
            "additions": 2,
            "deletions": 9,
            "changes": 11,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0ba9eeff43f3f782ca5e16360e04f6f2087341be/curriculum%2Ftest%2Futils%2Fsort-challenges.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0ba9eeff43f3f782ca5e16360e04f6f2087341be/curriculum%2Ftest%2Futils%2Fsort-challenges.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Ftest%2Futils%2Fsort-challenges.test.js?ref=0ba9eeff43f3f782ca5e16360e04f6f2087341be",
            "patch": "@@ -1,3 +1,4 @@\n+const { shuffleArray } = require('../../../shared/utils/shuffle-array');\n const { sortChallenges } = require('./sort-challenges');\n \n const challenges = [\n@@ -222,7 +223,7 @@ const challenges = [\n describe('sortChallenges', () => {\n   it('sorts challenges by superblock, block and challenge order', () => {\n     const copyOfChallenges = [...challenges];\n-    shuffle(copyOfChallenges);\n+    shuffleArray(copyOfChallenges);\n     const actualChallenges = sortChallenges(copyOfChallenges);\n \n     expect(actualChallenges).toEqual(challenges);\n@@ -241,11 +242,3 @@ describe('sortChallenges', () => {\n     expect(actualChallenges[0]).not.toEqual(copyOfChallenges[0]);\n   });\n });\n-\n-// Use the Fisherâ€“Yates shuffle algorithm to shuffle array\n-const shuffle = arr => {\n-  for (let i = arr.length - 1; i > 0; i--) {\n-    const j = Math.floor(Math.random() * (i + 1));\n-    [arr[i], arr[j]] = [arr[j], arr[i]];\n-  }\n-};"
        },
        {
            "sha": "66dfe4500106ea8b20c47d0ce3cd8faff2c3cb2a",
            "filename": "shared/utils/shuffle-array.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0ba9eeff43f3f782ca5e16360e04f6f2087341be/shared%2Futils%2Fshuffle-array.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0ba9eeff43f3f782ca5e16360e04f6f2087341be/shared%2Futils%2Fshuffle-array.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/shared%2Futils%2Fshuffle-array.ts?ref=0ba9eeff43f3f782ca5e16360e04f6f2087341be",
            "patch": "@@ -4,7 +4,10 @@ export const shuffleArray = <T>(arrToShuffle: Array<T>) => {\n \n   for (let i = arr.length - 1; i > 0; i--) {\n     const j = Math.floor(Math.random() * (i + 1));\n-    [arr[i], arr[j]] = [arr[j], arr[i]];\n+\n+    // We know that i and j are within the bounds of the array, TS doesn't\n+    // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n+    [arr[i], arr[j]] = [arr[j]!, arr[i]!];\n   }\n \n   return arr;"
        }
    ],
    "stats": {
        "total": 50,
        "additions": 8,
        "deletions": 42
    }
}