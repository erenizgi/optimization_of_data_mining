{
    "author": "a2937",
    "message": "fix(ui): update section names in downloaded solutions (#59934)",
    "sha": "78d3fe740e1c84ca434b2b06ce8cdf5705d47b42",
    "files": [
        {
            "sha": "7f6206f49ac39079b604fb33e684096ad59a4061",
            "filename": "client/src/templates/Challenges/components/completion-modal.test.tsx",
            "status": "modified",
            "additions": 28,
            "deletions": 2,
            "changes": 30,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/78d3fe740e1c84ca434b2b06ce8cdf5705d47b42/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fcompletion-modal.test.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/78d3fe740e1c84ca434b2b06ce8cdf5705d47b42/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fcompletion-modal.test.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fcompletion-modal.test.tsx?ref=78d3fe740e1c84ca434b2b06ce8cdf5705d47b42",
            "patch": "@@ -14,8 +14,7 @@ import {\n   isBlockNewlyCompletedSelector\n } from '../redux/selectors';\n import { buildChallenge, getTestRunner } from '../utils/build';\n-import CompletionModal from './completion-modal';\n-\n+import CompletionModal, { combineFileData } from './completion-modal';\n jest.mock('../../../analytics');\n jest.mock('../../../utils/fire-confetti');\n jest.mock('../../../components/Progress');\n@@ -148,4 +147,31 @@ describe('<CompletionModal />', () => {\n       ).toBe(100);\n     });\n   });\n+\n+  describe('File Download Content', () => {\n+    it('Should label each section appropriately', () => {\n+      const indexHtml = {\n+        name: 'index',\n+        ext: 'html',\n+        contents: 'some html elements'\n+      };\n+      const stylesCSS = {\n+        name: 'styles',\n+        ext: 'css',\n+        contents: 'some css styles'\n+      };\n+      const scriptJS = {\n+        name: 'script',\n+        ext: 'js',\n+        contents: 'some javascript'\n+      };\n+      const result = combineFileData([indexHtml, stylesCSS, scriptJS]);\n+      expect(result).toContain('** start of index.html **');\n+      expect(result).toContain('** end of index.html **');\n+      expect(result).toContain('** start of styles.css **');\n+      expect(result).toContain('** end of styles.css **');\n+      expect(result).toContain('** start of script.js **');\n+      expect(result).toContain('** end of script.js **');\n+    });\n+  });\n });"
        },
        {
            "sha": "2526d03b7792ea4cab87371bace2ade812b8339a",
            "filename": "client/src/templates/Challenges/components/completion-modal.tsx",
            "status": "modified",
            "additions": 23,
            "deletions": 13,
            "changes": 36,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/78d3fe740e1c84ca434b2b06ce8cdf5705d47b42/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fcompletion-modal.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/78d3fe740e1c84ca434b2b06ce8cdf5705d47b42/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fcompletion-modal.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fcompletion-modal.tsx?ref=78d3fe740e1c84ca434b2b06ce8cdf5705d47b42",
            "patch": "@@ -1,4 +1,3 @@\n-/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n import React, { Component } from 'react';\n import type { TFunction } from 'i18next';\n import { withTranslation } from 'react-i18next';\n@@ -71,6 +70,12 @@ interface CompletionModalState {\n   downloadURL: null | string;\n }\n \n+interface DownloadableChallengeFile {\n+  name: string;\n+  ext: string;\n+  contents: string;\n+}\n+\n class CompletionModal extends Component<\n   CompletionModalsProps,\n   CompletionModalState\n@@ -100,18 +105,8 @@ class CompletionModal extends Component<\n     }\n     let newURL = null;\n     if (challengeFiles?.length) {\n-      const filesForDownload = challengeFiles\n-        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n-        .reduce<string>((allFiles, currentFile: any) => {\n-          const beforeText = `** start of ${currentFile.path} **\\n\\n`;\n-          const afterText = `\\n\\n** end of ${currentFile.path} **\\n\\n`;\n-          allFiles +=\n-            challengeFiles.length > 1\n-              ? `${beforeText}${currentFile.contents}${afterText}`\n-              : currentFile.contents;\n-          return allFiles;\n-        }, '');\n-      const blob = new Blob([filesForDownload], {\n+      const allFileContents = combineFileData(challengeFiles);\n+      const blob = new Blob([allFileContents], {\n         type: 'text/json'\n       });\n       newURL = URL.createObjectURL(blob);\n@@ -242,3 +237,18 @@ export default connect(\n   mapStateToProps,\n   mapDispatchToProps\n )(withTranslation()(CompletionModal));\n+\n+export function combineFileData(challengeFiles: DownloadableChallengeFile[]) {\n+  return challengeFiles.reduce<string>(function (\n+    allFiles: string,\n+    currentFile: DownloadableChallengeFile\n+  ) {\n+    const beforeText = `** start of ${currentFile.name + '.' + currentFile.ext} **\\n\\n`;\n+    const afterText = `\\n\\n** end of ${currentFile.name + '.' + currentFile.ext} **\\n\\n`;\n+    allFiles +=\n+      challengeFiles.length > 0\n+        ? `${beforeText}${currentFile.contents}${afterText}`\n+        : currentFile.contents;\n+    return allFiles;\n+  }, '');\n+}"
        }
    ],
    "stats": {
        "total": 66,
        "additions": 51,
        "deletions": 15
    }
}