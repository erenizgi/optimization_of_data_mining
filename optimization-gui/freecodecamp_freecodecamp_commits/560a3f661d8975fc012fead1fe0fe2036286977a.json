{
    "author": "raisedadead",
    "message": "fix(GHA): adjust order of checks in legacy",
    "sha": "560a3f661d8975fc012fead1fe0fe2036286977a",
    "files": [
        {
            "sha": "1fe34acdfdfd981c11f87e998ef679fc539592f4",
            "filename": ".github/workflows/deploy-legacy.yml",
            "status": "modified",
            "additions": 5,
            "deletions": 7,
            "changes": 12,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/560a3f661d8975fc012fead1fe0fe2036286977a/.github%2Fworkflows%2Fdeploy-legacy.yml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/560a3f661d8975fc012fead1fe0fe2036286977a/.github%2Fworkflows%2Fdeploy-legacy.yml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/.github%2Fworkflows%2Fdeploy-legacy.yml?ref=560a3f661d8975fc012fead1fe0fe2036286977a",
            "patch": "@@ -22,20 +22,18 @@ jobs:\n       - name: Setup\n         id: setup\n         run: |\n+          if [[ \"${{ github.event_name }}\" == \"workflow_run\" && \"${{ github.event.workflow_run.conclusion }}\" != \"success\" ]]; then\n+            echo \"Node.js tests failed in the triggering workflow run. Check logs in its workflow run. Exiting.\"\n+            exit 1\n+          fi\n+\n           if [[ \"${{ github.event_name }}\" == \"workflow_run\" ]]; then\n             BRANCH=\"${{ github.event.workflow_run.head_branch }}\"\n           else\n             BRANCH=\"${{ github.ref_name }}\"\n           fi\n \n-          if [[ \"${{ github.event.workflow_run.conclusion }}\" != \"success\" ]]; then\n-            echo \"Node.js test run failed. Check logs in its workflow run. Exiting.\"\n-            exit 1\n-          fi\n-\n-          echo \"Node.js test run succeeded. Continuing...\"\n           echo \"Current branch: $BRANCH\"\n-\n           case \"$BRANCH\" in\n             \"prod-current\")\n               echo \"site_tld=org\" >> $GITHUB_OUTPUT"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 5,
        "deletions": 7
    }
}