{
    "author": "ojeytonwilliams",
    "message": "fix(tools): prevent create-new-x overwriting old projects (#62621)",
    "sha": "6fc368404985a197095db80c8c67761e493483a0",
    "files": [
        {
            "sha": "58e780a6013cc36c4fda47f5032bd3c8b02264c4",
            "filename": "tools/challenge-helper-scripts/create-language-block.ts",
            "status": "modified",
            "additions": 122,
            "deletions": 113,
            "changes": 235,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/6fc368404985a197095db80c8c67761e493483a0/tools%2Fchallenge-helper-scripts%2Fcreate-language-block.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/6fc368404985a197095db80c8c67761e493483a0/tools%2Fchallenge-helper-scripts%2Fcreate-language-block.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-language-block.ts?ref=6fc368404985a197095db80c8c67761e493483a0",
            "patch": "@@ -19,7 +19,12 @@ import {\n import { superBlockToFilename } from '../../curriculum/build-curriculum';\n import { getBaseMeta } from './helpers/get-base-meta';\n import { createIntroMD } from './helpers/create-intro';\n-import { createDialogueFile, createQuizFile, validateBlockName } from './utils';\n+import {\n+  createDialogueFile,\n+  createQuizFile,\n+  getAllBlocks,\n+  validateBlockName\n+} from './utils';\n import {\n   updateSimpleSuperblockStructure,\n   updateChapterModuleSuperblockStructure\n@@ -222,118 +227,122 @@ function withTrace<Args extends unknown[], Result>(\n   });\n }\n \n-void prompt([\n-  {\n-    name: 'superBlock',\n-    message: 'Which certification does this belong to?',\n-    default: SuperBlocks.A2English,\n-    type: 'list',\n-    choices: Object.values(languageSuperBlocks)\n-  },\n-  {\n-    name: 'block',\n-    message: 'What is the dashed name (in kebab-case) for this block?',\n-    validate: validateBlockName,\n-    filter: (block: string) => {\n-      return block.toLowerCase().trim();\n-    }\n-  },\n-  {\n-    name: 'title',\n-    default: ({ block }: { block: string }) => block\n-  },\n-  {\n-    name: 'helpCategory',\n-    message: 'Choose a help category',\n-    default: 'English',\n-    type: 'list',\n-    choices: helpCategories\n-  },\n-  {\n-    name: 'blockType',\n-    message: 'Choose a block type',\n-    default: BlockTypes.learn,\n-    type: 'list',\n-    choices: Object.values(BlockTypes),\n-    when: (answers: CreateBlockArgs) =>\n-      chapterBasedSuperBlocks.includes(answers.superBlock)\n-  },\n-  {\n-    name: 'blockLayout',\n-    message: 'Choose a block layout',\n-    default: BlockLayouts.DialogueGrid,\n-    type: 'list',\n-    choices: Object.values(BlockLayouts),\n-    when: (answers: CreateBlockArgs) =>\n-      chapterBasedSuperBlocks.includes(answers.superBlock) &&\n-      answers.blockType !== BlockTypes.quiz\n-  },\n-  {\n-    name: 'questionCount',\n-    message: 'Choose a question count',\n-    default: 20,\n-    type: 'list',\n-    choices: [10, 20],\n-    when: (answers: CreateBlockArgs) => answers.blockType === BlockTypes.quiz\n-  },\n-  {\n-    name: 'chapter',\n-    message: 'What chapter should this language block go in?',\n-    type: 'list',\n-    choices: (answers: CreateBlockArgs) => {\n-      const superblockFilename = (\n-        superBlockToFilename as Record<SuperBlocks, string>\n-      )[answers.superBlock];\n-      const structure = getSuperblockStructure(superblockFilename) as {\n-        chapters: {\n-          dashedName: string;\n-          modules: { dashedName: string; blocks: string[] }[];\n-        }[];\n-      };\n-      return structure.chapters.map(chapter => chapter.dashedName);\n-    },\n-    when: (answers: CreateBlockArgs) =>\n-      chapterBasedSuperBlocks.includes(answers.superBlock)\n-  },\n-  {\n-    name: 'module',\n-    message: 'What module should this language block go in?',\n-    type: 'list',\n-    choices: (answers: CreateBlockArgs) => {\n-      const superblockFilename = (\n-        superBlockToFilename as Record<SuperBlocks, string>\n-      )[answers.superBlock];\n-      const structure = getSuperblockStructure(superblockFilename) as {\n-        chapters: {\n-          dashedName: string;\n-          modules: { dashedName: string; blocks: string[] }[];\n-        }[];\n-      };\n-      return (\n-        structure.chapters\n-          .find(chapter => chapter.dashedName === answers.chapter)\n-          ?.modules.map(module => module.dashedName) ?? []\n-      );\n-    },\n-    when: (answers: CreateBlockArgs) =>\n-      chapterBasedSuperBlocks.includes(answers.superBlock)\n-  },\n-  {\n-    name: 'position',\n-    message: 'At which position does this appear in the module?',\n-    default: 1,\n-    validate: (position: string) => {\n-      return parseInt(position, 10) > 0\n-        ? true\n-        : 'Position must be an number greater than zero.';\n-    },\n-    when: (answers: CreateBlockArgs) =>\n-      chapterBasedSuperBlocks.includes(answers.superBlock),\n-    filter: (position: string) => {\n-      return parseInt(position, 10);\n-    }\n-  }\n-])\n+void getAllBlocks()\n+  .then(existingBlocks =>\n+    prompt([\n+      {\n+        name: 'superBlock',\n+        message: 'Which certification does this belong to?',\n+        default: SuperBlocks.A2English,\n+        type: 'list',\n+        choices: Object.values(languageSuperBlocks)\n+      },\n+      {\n+        name: 'block',\n+        message: 'What is the dashed name (in kebab-case) for this block?',\n+        validate: (block: string) => validateBlockName(block, existingBlocks),\n+        filter: (block: string) => {\n+          return block.toLowerCase().trim();\n+        }\n+      },\n+      {\n+        name: 'title',\n+        default: ({ block }: { block: string }) => block\n+      },\n+      {\n+        name: 'helpCategory',\n+        message: 'Choose a help category',\n+        default: 'English',\n+        type: 'list',\n+        choices: helpCategories\n+      },\n+      {\n+        name: 'blockType',\n+        message: 'Choose a block type',\n+        default: BlockTypes.learn,\n+        type: 'list',\n+        choices: Object.values(BlockTypes),\n+        when: (answers: CreateBlockArgs) =>\n+          chapterBasedSuperBlocks.includes(answers.superBlock)\n+      },\n+      {\n+        name: 'blockLayout',\n+        message: 'Choose a block layout',\n+        default: BlockLayouts.DialogueGrid,\n+        type: 'list',\n+        choices: Object.values(BlockLayouts),\n+        when: (answers: CreateBlockArgs) =>\n+          chapterBasedSuperBlocks.includes(answers.superBlock) &&\n+          answers.blockType !== BlockTypes.quiz\n+      },\n+      {\n+        name: 'questionCount',\n+        message: 'Choose a question count',\n+        default: 20,\n+        type: 'list',\n+        choices: [10, 20],\n+        when: (answers: CreateBlockArgs) =>\n+          answers.blockType === BlockTypes.quiz\n+      },\n+      {\n+        name: 'chapter',\n+        message: 'What chapter should this language block go in?',\n+        type: 'list',\n+        choices: (answers: CreateBlockArgs) => {\n+          const superblockFilename = (\n+            superBlockToFilename as Record<SuperBlocks, string>\n+          )[answers.superBlock];\n+          const structure = getSuperblockStructure(superblockFilename) as {\n+            chapters: {\n+              dashedName: string;\n+              modules: { dashedName: string; blocks: string[] }[];\n+            }[];\n+          };\n+          return structure.chapters.map(chapter => chapter.dashedName);\n+        },\n+        when: (answers: CreateBlockArgs) =>\n+          chapterBasedSuperBlocks.includes(answers.superBlock)\n+      },\n+      {\n+        name: 'module',\n+        message: 'What module should this language block go in?',\n+        type: 'list',\n+        choices: (answers: CreateBlockArgs) => {\n+          const superblockFilename = (\n+            superBlockToFilename as Record<SuperBlocks, string>\n+          )[answers.superBlock];\n+          const structure = getSuperblockStructure(superblockFilename) as {\n+            chapters: {\n+              dashedName: string;\n+              modules: { dashedName: string; blocks: string[] }[];\n+            }[];\n+          };\n+          return (\n+            structure.chapters\n+              .find(chapter => chapter.dashedName === answers.chapter)\n+              ?.modules.map(module => module.dashedName) ?? []\n+          );\n+        },\n+        when: (answers: CreateBlockArgs) =>\n+          chapterBasedSuperBlocks.includes(answers.superBlock)\n+      },\n+      {\n+        name: 'position',\n+        message: 'At which position does this appear in the module?',\n+        default: 1,\n+        validate: (position: string) => {\n+          return parseInt(position, 10) > 0\n+            ? true\n+            : 'Position must be an number greater than zero.';\n+        },\n+        when: (answers: CreateBlockArgs) =>\n+          chapterBasedSuperBlocks.includes(answers.superBlock),\n+        filter: (position: string) => {\n+          return parseInt(position, 10);\n+        }\n+      }\n+    ])\n+  )\n   .then(\n     async ({\n       superBlock,"
        },
        {
            "sha": "d431d8aca51b85be22a92949993b8215d680a32f",
            "filename": "tools/challenge-helper-scripts/create-project.ts",
            "status": "modified",
            "additions": 140,
            "deletions": 129,
            "changes": 269,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/6fc368404985a197095db80c8c67761e493483a0/tools%2Fchallenge-helper-scripts%2Fcreate-project.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/6fc368404985a197095db80c8c67761e493483a0/tools%2Fchallenge-helper-scripts%2Fcreate-project.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-project.ts?ref=6fc368404985a197095db80c8c67761e493483a0",
            "patch": "@@ -15,7 +15,12 @@ import {\n   writeBlockStructure\n } from '../../curriculum/file-handler';\n import { superBlockToFilename } from '../../curriculum/build-curriculum';\n-import { createQuizFile, createStepFile, validateBlockName } from './utils';\n+import {\n+  createQuizFile,\n+  createStepFile,\n+  validateBlockName,\n+  getAllBlocks\n+} from './utils';\n import { getBaseMeta } from './helpers/get-base-meta';\n import { createIntroMD } from './helpers/create-intro';\n import {\n@@ -293,145 +298,151 @@ async function getModules(superBlock: string, chapterName: string) {\n   return modifiedChapter?.modules;\n }\n \n-void prompt([\n-  {\n-    name: 'superBlock',\n-    message: 'Which certification does this belong to?',\n-    default: SuperBlocks.FullStackDeveloper,\n-    type: 'list',\n-    choices: Object.values(SuperBlocks)\n-  },\n-  {\n-    name: 'block',\n-    message: 'What is the dashed name (in kebab-case) for this project?',\n-    validate: validateBlockName,\n-    filter: (block: string) => {\n-      return block.toLowerCase().trim();\n-    }\n-  },\n-  {\n-    name: 'title',\n-    default: ({ block }: { block: string }) => block\n-  },\n-  {\n-    name: 'helpCategory',\n-    message: 'Choose a help category',\n-    default: 'HTML-CSS',\n-    type: 'list',\n-    choices: helpCategories\n-  },\n-  {\n-    name: 'blockType',\n-    message: 'Choose a block type',\n-    default: BlockTypes.lab,\n-    type: 'list',\n-    choices: Object.values(BlockTypes),\n-    when: (answers: CreateProjectArgs) =>\n-      chapterBasedSuperBlocks.includes(answers.superBlock)\n-  },\n-  {\n-    name: 'blockLayout',\n-    message: 'Choose a block layout',\n+void getAllBlocks()\n+  .then(existingBlocks =>\n+    prompt([\n+      {\n+        name: 'superBlock',\n+        message: 'Which certification does this belong to?',\n+        default: SuperBlocks.FullStackDeveloper,\n+        type: 'list',\n+        choices: Object.values(SuperBlocks)\n+      },\n+      {\n+        name: 'block',\n+        message: 'What is the dashed name (in kebab-case) for this project?',\n+        validate: (block: string) => validateBlockName(block, existingBlocks),\n+        filter: (block: string) => {\n+          return block.toLowerCase().trim();\n+        }\n+      },\n+      {\n+        name: 'title',\n+        default: ({ block }: { block: string }) => block\n+      },\n+      {\n+        name: 'helpCategory',\n+        message: 'Choose a help category',\n+        default: 'HTML-CSS',\n+        type: 'list',\n+        choices: helpCategories\n+      },\n+      {\n+        name: 'blockType',\n+        message: 'Choose a block type',\n+        default: BlockTypes.lab,\n+        type: 'list',\n+        choices: Object.values(BlockTypes),\n+        when: (answers: CreateProjectArgs) =>\n+          chapterBasedSuperBlocks.includes(answers.superBlock)\n+      },\n+      {\n+        name: 'blockLayout',\n+        message: 'Choose a block layout',\n \n-    default: (answers: { blockType: BlockTypes }) =>\n-      answers.blockType == BlockTypes.quiz\n-        ? BlockLayouts.Link\n-        : BlockLayouts.ChallengeList,\n-    type: 'list',\n-    choices: Object.values(BlockLayouts),\n-    when: (answers: CreateProjectArgs) =>\n-      chapterBasedSuperBlocks.includes(answers.superBlock)\n-  },\n-  {\n-    name: 'questionCount',\n-    message: 'Choose a question count',\n-    default: 20,\n-    type: 'list',\n-    choices: [10, 20],\n-    when: (answers: CreateProjectArgs) => answers.blockType === BlockTypes.quiz\n-  },\n-  {\n-    name: 'chapter',\n-    message: 'What chapter should this project go in?',\n-    default: 'html',\n-    type: 'list',\n-    choices: async (answers: CreateProjectArgs) => {\n-      const chapters = await getChapters(answers.superBlock);\n-      return chapters.map(x => x.dashedName);\n-    },\n-    when: (answers: CreateProjectArgs) =>\n-      chapterBasedSuperBlocks.includes(answers.superBlock)\n-  },\n-  {\n-    name: 'module',\n-    message: 'What module should this project go in?',\n-    default: 'html',\n-    type: 'list',\n-    choices: async (answers: CreateProjectArgs) => {\n-      const modules = await getModules(answers.superBlock, answers.chapter!);\n-      return modules!.map(x => x.dashedName);\n-    },\n-    when: (answers: CreateProjectArgs) =>\n-      chapterBasedSuperBlocks.includes(answers.superBlock)\n-  },\n-  {\n-    name: 'position',\n-    message: 'At which position does this appear in the module?',\n-    default: 1,\n-    validate: (position: string) => {\n-      return parseInt(position, 10) > 0\n-        ? true\n-        : 'Position must be an number greater than zero.';\n-    },\n-    when: (answers: CreateProjectArgs) =>\n-      chapterBasedSuperBlocks.includes(answers.superBlock),\n-    filter: (position: string) => {\n-      return parseInt(position, 10);\n-    }\n-  },\n-  {\n-    name: 'order',\n-    message: 'Which position does this appear in the certificate?',\n-    default: 42,\n-    validate: (order: string) => {\n-      return parseInt(order, 10) > 0\n-        ? true\n-        : 'Order must be an number greater than zero.';\n-    },\n-    when: (answers: CreateProjectArgs) =>\n-      !chapterBasedSuperBlocks.includes(answers.superBlock),\n-    filter: (order: string) => {\n-      return parseInt(order, 10);\n-    }\n-  }\n-])\n-  .then(\n-    async ({\n-      superBlock,\n-      block,\n-      title,\n-      helpCategory,\n-      blockType,\n-      blockLayout,\n-      questionCount,\n-      chapter,\n-      module,\n-      position,\n-      order\n-    }: CreateProjectArgs) =>\n-      await createProject({\n+        default: (answers: { blockType: BlockTypes }) =>\n+          answers.blockType == BlockTypes.quiz\n+            ? BlockLayouts.Link\n+            : BlockLayouts.ChallengeList,\n+        type: 'list',\n+        choices: Object.values(BlockLayouts),\n+        when: (answers: CreateProjectArgs) =>\n+          chapterBasedSuperBlocks.includes(answers.superBlock)\n+      },\n+      {\n+        name: 'questionCount',\n+        message: 'Choose a question count',\n+        default: 20,\n+        type: 'list',\n+        choices: [10, 20],\n+        when: (answers: CreateProjectArgs) =>\n+          answers.blockType === BlockTypes.quiz\n+      },\n+      {\n+        name: 'chapter',\n+        message: 'What chapter should this project go in?',\n+        default: 'html',\n+        type: 'list',\n+        choices: async (answers: CreateProjectArgs) => {\n+          const chapters = await getChapters(answers.superBlock);\n+          return chapters.map(x => x.dashedName);\n+        },\n+        when: (answers: CreateProjectArgs) =>\n+          chapterBasedSuperBlocks.includes(answers.superBlock)\n+      },\n+      {\n+        name: 'module',\n+        message: 'What module should this project go in?',\n+        default: 'html',\n+        type: 'list',\n+        choices: async (answers: CreateProjectArgs) => {\n+          const modules = await getModules(\n+            answers.superBlock,\n+            answers.chapter!\n+          );\n+          return modules!.map(x => x.dashedName);\n+        },\n+        when: (answers: CreateProjectArgs) =>\n+          chapterBasedSuperBlocks.includes(answers.superBlock)\n+      },\n+      {\n+        name: 'position',\n+        message: 'At which position does this appear in the module?',\n+        default: 1,\n+        validate: (position: string) => {\n+          return parseInt(position, 10) > 0\n+            ? true\n+            : 'Position must be an number greater than zero.';\n+        },\n+        when: (answers: CreateProjectArgs) =>\n+          chapterBasedSuperBlocks.includes(answers.superBlock),\n+        filter: (position: string) => {\n+          return parseInt(position, 10);\n+        }\n+      },\n+      {\n+        name: 'order',\n+        message: 'Which position does this appear in the certificate?',\n+        default: 42,\n+        validate: (order: string) => {\n+          return parseInt(order, 10) > 0\n+            ? true\n+            : 'Order must be an number greater than zero.';\n+        },\n+        when: (answers: CreateProjectArgs) =>\n+          !chapterBasedSuperBlocks.includes(answers.superBlock),\n+        filter: (order: string) => {\n+          return parseInt(order, 10);\n+        }\n+      }\n+    ]).then(\n+      async ({\n         superBlock,\n         block,\n+        title,\n         helpCategory,\n         blockType,\n         blockLayout,\n         questionCount,\n-        title,\n         chapter,\n         module,\n         position,\n         order\n-      })\n+      }: CreateProjectArgs) =>\n+        await createProject({\n+          superBlock,\n+          block,\n+          helpCategory,\n+          blockType,\n+          blockLayout,\n+          questionCount,\n+          title,\n+          chapter,\n+          module,\n+          position,\n+          order\n+        })\n+    )\n   )\n   .then(() =>\n     console.log("
        },
        {
            "sha": "d140b6bb34a1dd31210452bc2fc9029c15fbeb79",
            "filename": "tools/challenge-helper-scripts/create-quiz.ts",
            "status": "modified",
            "additions": 39,
            "deletions": 36,
            "changes": 75,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/6fc368404985a197095db80c8c67761e493483a0/tools%2Fchallenge-helper-scripts%2Fcreate-quiz.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/6fc368404985a197095db80c8c67761e493483a0/tools%2Fchallenge-helper-scripts%2Fcreate-quiz.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-quiz.ts?ref=6fc368404985a197095db80c8c67761e493483a0",
            "patch": "@@ -10,7 +10,7 @@ import {\n   writeBlockStructure\n } from '../../curriculum/file-handler';\n import { superBlockToFilename } from '../../curriculum/build-curriculum';\n-import { createQuizFile, validateBlockName } from './utils';\n+import { createQuizFile, getAllBlocks, validateBlockName } from './utils';\n import { getBaseMeta } from './helpers/get-base-meta';\n import { createIntroMD } from './helpers/create-intro';\n import { updateSimpleSuperblockStructure } from './helpers/create-project';\n@@ -145,41 +145,44 @@ function withTrace<Args extends unknown[], Result>(\n   });\n }\n \n-void prompt([\n-  {\n-    name: 'superBlock',\n-    message: 'Which certification does this belong to?',\n-    default: SuperBlocks.FullStackDeveloper,\n-    type: 'list',\n-    choices: Object.values(SuperBlocks)\n-  },\n-  {\n-    name: 'block',\n-    message: 'What is the dashed name (in kebab-case) for this quiz?',\n-    validate: validateBlockName,\n-    filter: (block: string) => {\n-      return block.toLowerCase().trim();\n-    }\n-  },\n-  {\n-    name: 'title',\n-    default: ({ block }: { block: string }) => block\n-  },\n-  {\n-    name: 'helpCategory',\n-    message: 'Choose a help category',\n-    default: 'HTML-CSS',\n-    type: 'list',\n-    choices: helpCategories\n-  },\n-  {\n-    name: 'questionCount',\n-    message: 'Should this quiz have either ten or twenty questions?',\n-    default: 20,\n-    type: 'list',\n-    choices: [20, 10]\n-  }\n-])\n+void getAllBlocks()\n+  .then(existingBlocks =>\n+    prompt([\n+      {\n+        name: 'superBlock',\n+        message: 'Which certification does this belong to?',\n+        default: SuperBlocks.FullStackDeveloper,\n+        type: 'list',\n+        choices: Object.values(SuperBlocks)\n+      },\n+      {\n+        name: 'block',\n+        message: 'What is the dashed name (in kebab-case) for this quiz?',\n+        validate: (block: string) => validateBlockName(block, existingBlocks),\n+        filter: (block: string) => {\n+          return block.toLowerCase().trim();\n+        }\n+      },\n+      {\n+        name: 'title',\n+        default: ({ block }: { block: string }) => block\n+      },\n+      {\n+        name: 'helpCategory',\n+        message: 'Choose a help category',\n+        default: 'HTML-CSS',\n+        type: 'list',\n+        choices: helpCategories\n+      },\n+      {\n+        name: 'questionCount',\n+        message: 'Should this quiz have either ten or twenty questions?',\n+        default: 20,\n+        type: 'list',\n+        choices: [20, 10]\n+      }\n+    ])\n+  )\n   .then(\n     async ({\n       superBlock,"
        },
        {
            "sha": "0cbceb7362060759feceb294da579d5e9932ad4c",
            "filename": "tools/challenge-helper-scripts/utils.test.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 7,
            "changes": 19,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/6fc368404985a197095db80c8c67761e493483a0/tools%2Fchallenge-helper-scripts%2Futils.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/6fc368404985a197095db80c8c67761e493483a0/tools%2Fchallenge-helper-scripts%2Futils.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Futils.test.ts?ref=6fc368404985a197095db80c8c67761e493483a0",
            "patch": "@@ -98,24 +98,29 @@ describe('Challenge utils helper scripts', () => {\n   describe('createProject util', () => {\n     it('should allow alphanumerical names with trailing whitespace', () => {\n       expect(\n-        validateBlockName('learn-callbacks-by-creating-a-bookshelf ')\n+        validateBlockName('learn-callbacks-by-creating-a-bookshelf ', [])\n       ).toBe(true);\n     });\n     it('should allow alphanumerical names with no trailing whitespace', () => {\n-      expect(validateBlockName('learn-callbacks-by-creating-a-bookshelf')).toBe(\n-        true\n-      );\n+      expect(\n+        validateBlockName('learn-callbacks-by-creating-a-bookshelf', [])\n+      ).toBe(true);\n     });\n     it('should not allow non-kebab case names', () => {\n-      expect(validateBlockName('learnCallbacksBetter')).toBe(\n+      expect(validateBlockName('learnCallbacksBetter', [])).toBe(\n         'please use alphanumerical characters and kebab case'\n       );\n     });\n     it('should not allow white space names', () => {\n-      expect(validateBlockName(' ')).toBe('please enter a dashed name');\n+      expect(validateBlockName(' ', [])).toBe('please enter a dashed name');\n     });\n     it('should not allow empty names', () => {\n-      expect(validateBlockName('')).toBe('please enter a dashed name');\n+      expect(validateBlockName('', [])).toBe('please enter a dashed name');\n+    });\n+    it('should not allow names that already exist', () => {\n+      expect(validateBlockName('name', ['name'])).toBe(\n+        'a block with this name already exists'\n+      );\n     });\n   });\n "
        },
        {
            "sha": "e5f418d2c839a391da83dee87d145a5f46b1211f",
            "filename": "tools/challenge-helper-scripts/utils.ts",
            "status": "modified",
            "additions": 23,
            "deletions": 1,
            "changes": 24,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/6fc368404985a197095db80c8c67761e493483a0/tools%2Fchallenge-helper-scripts%2Futils.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/6fc368404985a197095db80c8c67761e493483a0/tools%2Fchallenge-helper-scripts%2Futils.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Futils.ts?ref=6fc368404985a197095db80c8c67761e493483a0",
            "patch": "@@ -2,7 +2,10 @@ import fs from 'fs';\n import path from 'path';\n import ObjectID from 'bson-objectid';\n import matter from 'gray-matter';\n+import { uniq } from 'lodash';\n+\n import { challengeTypes } from '../../shared/config/challenge-types';\n+import { parseCurriculumStructure } from '../../curriculum/build-curriculum';\n import { parseMDSync } from '../challenge-parser/parser';\n import { getMetaData, updateMetaData } from './helpers/project-metadata';\n import { getProjectPath } from './helpers/get-project-info';\n@@ -28,6 +31,19 @@ interface QuizOptions {\n   questionCount: number;\n }\n \n+export async function getAllBlocks() {\n+  const { fullSuperblockList } = (await parseCurriculumStructure()) as {\n+    fullSuperblockList: {\n+      blocks: { dashedName: string }[];\n+    }[];\n+  };\n+  const existingBlocks = fullSuperblockList.flatMap(({ blocks }) =>\n+    blocks.map(({ dashedName }) => dashedName)\n+  );\n+\n+  return uniq(existingBlocks);\n+}\n+\n const createStepFile = ({\n   stepNum,\n   challengeType,\n@@ -259,7 +275,13 @@ const getChallenge = (challengeId: string): Challenge => {\n   return challenge;\n };\n \n-const validateBlockName = (block: string): boolean | string => {\n+const validateBlockName = (\n+  block: string,\n+  existingBlocks: string[]\n+): true | string => {\n+  if (existingBlocks.includes(block.trim())) {\n+    return 'a block with this name already exists';\n+  }\n   if (!block.trim().length) {\n     return 'please enter a dashed name';\n   }"
        }
    ],
    "stats": {
        "total": 622,
        "additions": 336,
        "deletions": 286
    }
}