{
    "author": "DanielRosa74",
    "message": "fix(client): fix speaking-modal showing span tags (#64759)\n\nCo-authored-by: Huyen Nguyen <25715018+huyenltnguyen@users.noreply.github.com>",
    "sha": "b53d715704503cc729f640cc499244b331567cde",
    "files": [
        {
            "sha": "1083913117d61287e943657d67ad392c228672f6",
            "filename": "client/src/templates/Challenges/components/multiple-choice-questions.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/b53d715704503cc729f640cc499244b331567cde/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fmultiple-choice-questions.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/b53d715704503cc729f640cc499244b331567cde/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fmultiple-choice-questions.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fmultiple-choice-questions.tsx?ref=b53d715704503cc729f640cc499244b331567cde",
            "patch": "@@ -11,6 +11,7 @@ import { SuperBlocks } from '../../../../../shared/config/curriculum';\n import SpeakingModal from './speaking-modal';\n import ChallengeHeading from './challenge-heading';\n import PrismFormatted from './prism-formatted';\n+import { stripHtmlTags } from './speaking-modal-helpers';\n \n type MultipleChoiceQuestionsProps = {\n   questions: Question[];\n@@ -41,16 +42,12 @@ function MultipleChoiceQuestions({\n   const [modalAnswerIndex, setModalAnswerIndex] = useState<number>(0);\n   const [modalQuestionIndex, setModalQuestionIndex] = useState<number>(0);\n \n-  function stripCodeTags(text: string): string {\n-    return text.replace(/<code>(.*?)<\\/code>/g, '$1');\n-  }\n-\n   const handleSpeakingButtonClick = (\n     answer: string,\n     answerIndex: number,\n     questionIndex: number\n   ) => {\n-    setModalText(stripCodeTags(removeParagraphTags(answer)));\n+    setModalText(stripHtmlTags(answer));\n     setModalAnswerIndex(answerIndex);\n     setModalQuestionIndex(questionIndex);\n     openSpeakingModal();"
        },
        {
            "sha": "1ba202ab6d45766156913b70df62777d0d59856d",
            "filename": "client/src/templates/Challenges/components/speaking-modal-helpers.test.ts",
            "status": "modified",
            "additions": 39,
            "deletions": 1,
            "changes": 40,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/b53d715704503cc729f640cc499244b331567cde/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal-helpers.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/b53d715704503cc729f640cc499244b331567cde/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal-helpers.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal-helpers.test.ts?ref=b53d715704503cc729f640cc499244b331567cde",
            "patch": "@@ -1,5 +1,9 @@\n import { describe, it, expect } from 'vitest';\n-import { normalizeText, compareTexts } from './speaking-modal-helpers';\n+import {\n+  normalizeText,\n+  compareTexts,\n+  stripHtmlTags\n+} from './speaking-modal-helpers';\n \n describe('speaking-modal-helpers', () => {\n   describe('normalizeText', () => {\n@@ -231,4 +235,38 @@ describe('speaking-modal-helpers', () => {\n       });\n     });\n   });\n+\n+  describe('stripHtmlTags', () => {\n+    it('should remove HTML tags and attributes', () => {\n+      expect(stripHtmlTags('<code>hello</code>')).toBe('hello');\n+      expect(stripHtmlTags('<span>world</span>')).toBe('world');\n+      expect(stripHtmlTags('<p>Text content</p>')).toBe('Text content');\n+      expect(\n+        stripHtmlTags('<span id=\"text\" class=\"highlighted-text\">Nǐ hǎo</span>')\n+      ).toBe('Nǐ hǎo');\n+    });\n+\n+    it('should handle nested tags', () => {\n+      expect(stripHtmlTags('<p>Hello <span>world</span></p>')).toBe(\n+        'Hello world'\n+      );\n+      expect(stripHtmlTags('<p><span class=\"highlight\">text</span></p>')).toBe(\n+        'text'\n+      );\n+    });\n+\n+    it('should handle text without tags', () => {\n+      expect(stripHtmlTags('plain text')).toBe('plain text');\n+    });\n+\n+    it('should handle empty string', () => {\n+      expect(stripHtmlTags('')).toBe('');\n+    });\n+\n+    it('should remove tags but preserve spacing', () => {\n+      expect(stripHtmlTags('Hello <code>world</code> today')).toBe(\n+        'Hello world today'\n+      );\n+    });\n+  });\n });"
        },
        {
            "sha": "8e314bb2354e908f5a27078a575854f602f83f00",
            "filename": "client/src/templates/Challenges/components/speaking-modal-helpers.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/b53d715704503cc729f640cc499244b331567cde/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal-helpers.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/b53d715704503cc729f640cc499244b331567cde/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal-helpers.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal-helpers.ts?ref=b53d715704503cc729f640cc499244b331567cde",
            "patch": "@@ -181,3 +181,7 @@ function alignWords(\n     }));\n   }\n }\n+\n+export const stripHtmlTags = (text: string): string => {\n+  return text.replace(/<[^>]*>/g, '');\n+};"
        }
    ],
    "stats": {
        "total": 51,
        "additions": 45,
        "deletions": 6
    }
}