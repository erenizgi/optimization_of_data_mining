{
    "author": "ShaunSHamilton",
    "message": "fix(api): handle string numbers in normalizeDate (#64188)",
    "sha": "4b6c2d7805a2d85c0702b3ee9869aaff722a276a",
    "files": [
        {
            "sha": "831eaa2dcc3b35fedf35b6b24493cacc02147f46",
            "filename": "api/src/utils/normalize.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/4b6c2d7805a2d85c0702b3ee9869aaff722a276a/api%2Fsrc%2Futils%2Fnormalize.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/4b6c2d7805a2d85c0702b3ee9869aaff722a276a/api%2Fsrc%2Futils%2Fnormalize.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Futils%2Fnormalize.test.ts?ref=4b6c2d7805a2d85c0702b3ee9869aaff722a276a",
            "patch": "@@ -193,6 +193,10 @@ describe('normalize', () => {\n         'Unexpected date value: {\"date\":\"123\"}'\n       );\n     });\n+\n+    test('should handle string numbers', () => {\n+      expect(normalizeDate('1696118400000')).toEqual(1696118400000);\n+    });\n   });\n \n   describe('normalizeChallengeType', () => {"
        },
        {
            "sha": "bfad634c34eca2e85b542b062de28fde25226695",
            "filename": "api/src/utils/normalize.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 2,
            "changes": 11,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/4b6c2d7805a2d85c0702b3ee9869aaff722a276a/api%2Fsrc%2Futils%2Fnormalize.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/4b6c2d7805a2d85c0702b3ee9869aaff722a276a/api%2Fsrc%2Futils%2Fnormalize.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Futils%2Fnormalize.ts?ref=4b6c2d7805a2d85c0702b3ee9869aaff722a276a",
            "patch": "@@ -76,9 +76,16 @@ export const normalizeDate = (date?: Prisma.JsonValue): number => {\n     typeof date.$date === 'string'\n   ) {\n     return new Date(date.$date).getTime();\n-  } else {\n-    throw Error('Unexpected date value: ' + JSON.stringify(date));\n+  } else if (typeof date === 'string') {\n+    const parsed = Number(date);\n+    if (!isNaN(parsed)) {\n+      // Number() handles invalid strings e.g. '2023-10-01T00:00:00Z'\n+      // parseInt() handles floats\n+      return parseInt(String(parsed));\n+    }\n   }\n+\n+  throw Error('Unexpected date value: ' + JSON.stringify(date));\n };\n \n /**"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 13,
        "deletions": 2
    }
}