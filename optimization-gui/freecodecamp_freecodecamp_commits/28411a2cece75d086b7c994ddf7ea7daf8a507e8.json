{
    "author": "ojeytonwilliams",
    "message": "refactor: migrate challenge parser tests to vitest (#62186)",
    "sha": "28411a2cece75d086b7c994ddf7ea7daf8a507e8",
    "files": [
        {
            "sha": "e2d111fa59efc7300c5e0be1ace28add9eaec4c8",
            "filename": "jest.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/jest.config.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/jest.config.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/jest.config.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -4,6 +4,7 @@ module.exports = {\n     'api/',\n     'e2e/',\n     'tools/challenge-helper-scripts/',\n+    'tools/challenge-parser/',\n     'tools/scripts/build/',\n     'curriculum'\n   ],"
        },
        {
            "sha": "5e07713c171cdcccee70302e16cb50adcb1d41cb",
            "filename": "package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/package.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/package.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/package.json?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -74,6 +74,7 @@\n     \"test:api\": \"cd api && pnpm test\",\n     \"test:tools:challenge-helper-scripts\": \"cd ./tools/challenge-helper-scripts && pnpm test run\",\n     \"test:tools:scripts-build\": \"cd ./tools/scripts/build && pnpm test run\",\n+    \"test:tools:challenge-parser\": \"cd ./tools/challenge-parser && pnpm test run\",\n     \"test:curriculum:content\": \"cd ./curriculum && pnpm test\",\n     \"test:curriculum:tooling\": \"cd ./curriculum && pnpm vitest run\",\n     \"test-curriculum-full-output\": \"cd ./curriculum && pnpm run test:full-output\","
        },
        {
            "sha": "a7718e8ba4117656b89a02f16cf263c4e75e453f",
            "filename": "pnpm-lock.yaml",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/pnpm-lock.yaml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/pnpm-lock.yaml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/pnpm-lock.yaml?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -959,6 +959,9 @@ importers:\n       unist-util-select:\n         specifier: 3.0.4\n         version: 3.0.4\n+      vitest:\n+        specifier: ^3.2.4\n+        version: 3.2.4(@types/node@20.12.8)(@vitest/ui@3.2.4)(jsdom@26.1.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.8.2))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.0)\n \n   tools/client-plugins/browser-scripts:\n     dependencies:\n@@ -20408,7 +20411,7 @@ snapshots:\n       sirv: 3.0.1\n       tinyglobby: 0.2.14\n       tinyrainbow: 2.0.0\n-      vitest: 3.2.4(@types/node@20.12.8)(@vitest/ui@3.2.4)(jsdom@16.7.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.8.2))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.0)\n+      vitest: 3.2.4(@types/node@20.12.8)(@vitest/ui@3.2.4)(jsdom@26.1.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.8.2))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.0)\n \n   '@vitest/utils@3.2.4':\n     dependencies:"
        },
        {
            "sha": "b82af7e47c2871c138a7e3890d213cee0c837c0e",
            "filename": "tools/challenge-parser/package.json",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fpackage.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fpackage.json?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -19,7 +19,7 @@\n   \"author\": \"freeCodeCamp <team@freecodecamp.org>\",\n   \"main\": \"index.js\",\n   \"scripts\": {\n-    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n+    \"test\": \"vitest\"\n   },\n   \"dependencies\": {\n     \"hast-util-to-html\": \"7.1.3\",\n@@ -54,6 +54,7 @@\n     \"unist-util-visit-children\": \"1.1.4\"\n   },\n   \"devDependencies\": {\n-    \"unist-util-select\": \"3.0.4\"\n+    \"unist-util-select\": \"3.0.4\",\n+    \"vitest\": \"^3.2.4\"\n   }\n }"
        },
        {
            "sha": "e026456b94921ac0d99dce9b827382c7c7141fba",
            "filename": "tools/challenge-parser/parser/__snapshots__/index.acceptance.test.js.snap",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2F__snapshots__%2Findex.acceptance.test.js.snap",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2F__snapshots__%2Findex.acceptance.test.js.snap",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2F__snapshots__%2Findex.acceptance.test.js.snap?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,6 +1,6 @@\n-// Jest Snapshot v1, https://goo.gl/fbAQLP\n+// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html\n \n-exports[`challenge parser it should not parse directives we do not use 1`] = `\n+exports[`challenge parser > it should not parse directives we do not use 1`] = `\n {\n   \"assignments\": [],\n   \"description\": \"<section id=\"description\">\n@@ -18,7 +18,7 @@ a container directive\n }\n `;\n \n-exports[`challenge parser it should parse md with a scene 1`] = `\n+exports[`challenge parser > it should parse md with a scene 1`] = `\n {\n   \"assignments\": [],\n   \"description\": \"<section id=\"description\">\n@@ -72,7 +72,7 @@ exports[`challenge parser it should parse md with a scene 1`] = `\n }\n `;\n \n-exports[`challenge parser it should parse video questions 1`] = `\n+exports[`challenge parser > it should parse video questions 1`] = `\n {\n   \"assignments\": [],\n   \"description\": \"<section id=\"description\">\n@@ -113,7 +113,7 @@ exports[`challenge parser it should parse video questions 1`] = `\n }\n `;\n \n-exports[`challenge parser should import md from other files 1`] = `\n+exports[`challenge parser > should import md from other files 1`] = `\n {\n   \"assignments\": [],\n   \"challengeFiles\": [\n@@ -178,7 +178,7 @@ for (let index = 0; index < array.length; index++) {\n }\n `;\n \n-exports[`challenge parser should not mix other YAML with the frontmatter 1`] = `\n+exports[`challenge parser > should not mix other YAML with the frontmatter 1`] = `\n {\n   \"assignments\": [],\n   \"challengeFiles\": [\n@@ -243,7 +243,7 @@ exports[`challenge parser should not mix other YAML with the frontmatter 1`] = `\n }\n `;\n \n-exports[`challenge parser should parse a more realistic md file 1`] = `\n+exports[`challenge parser > should parse a more realistic md file 1`] = `\n {\n   \"assignments\": [],\n   \"challengeFiles\": [\n@@ -433,7 +433,7 @@ assert(\n }\n `;\n \n-exports[`challenge parser should parse a simple md file 1`] = `\n+exports[`challenge parser > should parse a simple md file 1`] = `\n {\n   \"assignments\": [],\n   \"challengeFiles\": [\n@@ -534,7 +534,7 @@ if(let x of xs) {\n }\n `;\n \n-exports[`challenge parser should parse frontmatter 1`] = `\n+exports[`challenge parser > should parse frontmatter 1`] = `\n {\n   \"assignments\": [],\n   \"challengeFiles\": [\n@@ -596,7 +596,7 @@ exports[`challenge parser should parse frontmatter 1`] = `\n }\n `;\n \n-exports[`challenge parser should parse gfm strikethrough and frontmatter 1`] = `\n+exports[`challenge parser > should parse gfm strikethrough and frontmatter 1`] = `\n {\n   \"assignments\": [],\n   \"challengeFiles\": ["
        },
        {
            "sha": "4d0a5d0ad057369bc4a292ced8d89c5627920210",
            "filename": "tools/challenge-parser/parser/index.acceptance.test.js",
            "status": "modified",
            "additions": 13,
            "deletions": 15,
            "changes": 28,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Findex.acceptance.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Findex.acceptance.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Findex.acceptance.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,68 +1,66 @@\n-const path = require('path');\n+import { resolve } from 'path';\n \n-const { parseMD } = require('.');\n+import { describe, it, expect } from 'vitest';\n+\n+import { parseMD } from '.';\n \n describe('challenge parser', () => {\n   it('should parse a simple md file', async () => {\n-    const parsed = await parseMD(\n-      path.resolve(__dirname, '__fixtures__/simple.md')\n-    );\n+    const parsed = await parseMD(resolve(__dirname, '__fixtures__/simple.md'));\n     expect(parsed).toMatchSnapshot();\n   });\n \n   it('should parse a more realistic md file', async () => {\n     const parsed = await parseMD(\n-      path.resolve(__dirname, '__fixtures__/realistic.md')\n+      resolve(__dirname, '__fixtures__/realistic.md')\n     );\n     expect(parsed).toMatchSnapshot();\n   });\n \n   it('should import md from other files', async () => {\n     const parsed = await parseMD(\n-      path.resolve(__dirname, '__fixtures__/with-imports.md')\n+      resolve(__dirname, '__fixtures__/with-imports.md')\n     );\n     expect(parsed).toMatchSnapshot();\n   });\n \n   it('should parse frontmatter', async () => {\n     const parsed = await parseMD(\n-      path.resolve(__dirname, '__fixtures__/with-frontmatter.md')\n+      resolve(__dirname, '__fixtures__/with-frontmatter.md')\n     );\n     expect(parsed).toMatchSnapshot();\n   });\n \n   it('should parse gfm strikethrough and frontmatter', async () => {\n     const parsed = await parseMD(\n-      path.resolve(__dirname, '__fixtures__/with-gfm.md')\n+      resolve(__dirname, '__fixtures__/with-gfm.md')\n     );\n     expect(parsed).toMatchSnapshot();\n   });\n \n   it('should not mix other YAML with the frontmatter', async () => {\n     const parsed = await parseMD(\n-      path.resolve(__dirname, '__fixtures__/with-yaml.md')\n+      resolve(__dirname, '__fixtures__/with-yaml.md')\n     );\n     expect(parsed).toMatchSnapshot();\n   });\n \n   it('it should parse video questions', async () => {\n     const parsed = await parseMD(\n-      path.resolve(__dirname, '__fixtures__/with-video-question.md')\n+      resolve(__dirname, '__fixtures__/with-video-question.md')\n     );\n     expect(parsed).toMatchSnapshot();\n   });\n \n   it('it should not parse directives we do not use', async () => {\n     const parsed = await parseMD(\n-      path.resolve(__dirname, '__fixtures__/with-directives.md')\n+      resolve(__dirname, '__fixtures__/with-directives.md')\n     );\n     expect(parsed).toMatchSnapshot();\n   });\n \n   it('it should parse md with a scene', async () => {\n-    const parsed = await parseMD(\n-      path.resolve(__dirname, '__fixtures__/scene.md')\n-    );\n+    const parsed = await parseMD(resolve(__dirname, '__fixtures__/scene.md'));\n     expect(parsed).toMatchSnapshot();\n   });\n });"
        },
        {
            "sha": "ab1d3c18c65cc8d0cc5c06bfdb7b9d20c814a9af",
            "filename": "tools/challenge-parser/parser/plugins/__snapshots__/add-frontmatter.test.js.snap",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-frontmatter.test.js.snap",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-frontmatter.test.js.snap",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-frontmatter.test.js.snap?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,6 +1,6 @@\n-// Jest Snapshot v1, https://goo.gl/fbAQLP\n+// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html\n \n-exports[`process-frontmatter plugin should have an output to match the snapshot 1`] = `\n+exports[`process-frontmatter plugin > should have an output to match the snapshot 1`] = `\n {\n   \"challengeType\": 0,\n   \"forumTopicId\": 18276,"
        },
        {
            "sha": "99812c202c4db675d32459df3199a87da63fd6e5",
            "filename": "tools/challenge-parser/parser/plugins/__snapshots__/add-hooks.test.js.snap",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-hooks.test.js.snap",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-hooks.test.js.snap",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-hooks.test.js.snap?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,6 +1,6 @@\n-// Jest Snapshot v1, https://goo.gl/fbAQLP\n+// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html\n \n-exports[`add-before-hook plugin should have an output to match the snapshot 1`] = `\n+exports[`add-before-hook plugin > should have an output to match the snapshot 1`] = `\n {\n   \"hooks\": {\n     \"beforeAll\": \"// before all code"
        },
        {
            "sha": "d996e413ba3bcf7681e368324005c69facd1460d",
            "filename": "tools/challenge-parser/parser/plugins/__snapshots__/add-quizzes.test.js.snap",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-quizzes.test.js.snap",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-quizzes.test.js.snap",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-quizzes.test.js.snap?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,6 +1,6 @@\n-// Jest Snapshot v1, https://goo.gl/fbAQLP\n+// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html\n \n-exports[`add-quizzes plugin should match the quizzes snapshot 1`] = `\n+exports[`add-quizzes plugin > should match the quizzes snapshot 1`] = `\n {\n   \"quizzes\": [\n     {"
        },
        {
            "sha": "78738ba3f4533d005270a7c82fd94db54835fbbe",
            "filename": "tools/challenge-parser/parser/plugins/__snapshots__/add-seed.test.js.snap",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-seed.test.js.snap",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-seed.test.js.snap",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-seed.test.js.snap?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,6 +1,6 @@\n-// Jest Snapshot v1, https://goo.gl/fbAQLP\n+// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html\n \n-exports[`add-seed plugin should have an output to match the snapshot 1`] = `\n+exports[`add-seed plugin > should have an output to match the snapshot 1`] = `\n {\n   \"challengeFiles\": [\n     {"
        },
        {
            "sha": "bc7c066cf0229b181c8396d9107ac403075fff26",
            "filename": "tools/challenge-parser/parser/plugins/__snapshots__/add-solution.test.js.snap",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-solution.test.js.snap",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-solution.test.js.snap",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-solution.test.js.snap?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,6 +1,6 @@\n-// Jest Snapshot v1, https://goo.gl/fbAQLP\n+// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html\n \n-exports[`add solution plugin should have an output to match the snapshot 1`] = `\n+exports[`add solution plugin > should have an output to match the snapshot 1`] = `\n {\n   \"solutions\": [\n     ["
        },
        {
            "sha": "fd3c65ba12f3e137cb23e75a74812c483097ae70",
            "filename": "tools/challenge-parser/parser/plugins/__snapshots__/add-tests.test.js.snap",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-tests.test.js.snap",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-tests.test.js.snap",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-tests.test.js.snap?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,6 +1,6 @@\n-// Jest Snapshot v1, https://goo.gl/fbAQLP\n+// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html\n \n-exports[`add-tests plugin should have an output to match the snapshot 1`] = `\n+exports[`add-tests plugin > should have an output to match the snapshot 1`] = `\n {\n   \"tests\": [\n     {"
        },
        {
            "sha": "c75f0639587a793738ea18a63bfc025d65034f5d",
            "filename": "tools/challenge-parser/parser/plugins/__snapshots__/add-text.test.js.snap",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-text.test.js.snap",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-text.test.js.snap",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-text.test.js.snap?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,6 +1,6 @@\n-// Jest Snapshot v1, https://goo.gl/fbAQLP\n+// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html\n \n-exports[`add-text should have an output to match the snapshot 1`] = `\n+exports[`add-text > should have an output to match the snapshot 1`] = `\n {\n   \"description\": \"<section id=\"description\">\n <p>Paragraph 1</p>"
        },
        {
            "sha": "865b7d6ffd52105098d48658ab27968cd3f43519",
            "filename": "tools/challenge-parser/parser/plugins/__snapshots__/add-video-question.test.js.snap",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-video-question.test.js.snap",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-video-question.test.js.snap",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-video-question.test.js.snap?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,6 +1,6 @@\n-// Jest Snapshot v1, https://goo.gl/fbAQLP\n+// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html\n \n-exports[`add-video-question plugin should match the video snapshot 1`] = `\n+exports[`add-video-question plugin > should match the video snapshot 1`] = `\n {\n   \"questions\": [\n     {"
        },
        {
            "sha": "e699c449f317fdcd30cb9ac580174f73e6e8dc4f",
            "filename": "tools/challenge-parser/parser/plugins/__snapshots__/replace-imports.test.js.snap",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Freplace-imports.test.js.snap",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Freplace-imports.test.js.snap",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Freplace-imports.test.js.snap?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,6 +1,6 @@\n-// Jest Snapshot v1, https://goo.gl/fbAQLP\n+// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html\n \n-exports[`replace-imports should have an output to match the snapshot 1`] = `\n+exports[`replace-imports > should have an output to match the snapshot 1`] = `\n {\n   \"children\": [\n     {"
        },
        {
            "sha": "9b1cc8b921d85fa99ba404c13866c8747f44fc98",
            "filename": "tools/challenge-parser/parser/plugins/add-fill-in-the-blank.test.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-fill-in-the-blank.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-fill-in-the-blank.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-fill-in-the-blank.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,5 +1,6 @@\n-const parseFixture = require('../__fixtures__/parse-fixture');\n-const addFillInTheBlankQuestion = require('./add-fill-in-the-blank');\n+import { describe, beforeAll, beforeEach, it, expect } from 'vitest';\n+import parseFixture from '../__fixtures__/parse-fixture';\n+import addFillInTheBlankQuestion from './add-fill-in-the-blank';\n \n describe('fill-in-the-blanks plugin', () => {\n   let mockFillInTheBlankAST,"
        },
        {
            "sha": "57b9bb352f3a53d6bfa8d94f8c80664d3b8ea9b6",
            "filename": "tools/challenge-parser/parser/plugins/add-frontmatter.test.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-frontmatter.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-frontmatter.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-frontmatter.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,7 +1,8 @@\n-const { isObject } = require('lodash');\n+import { describe, beforeAll, beforeEach, it, expect } from 'vitest';\n+import { isObject } from 'lodash';\n \n-const parse = require('../__fixtures__/parse-fixture');\n-const processFrontmatter = require('./add-frontmatter');\n+import parse from '../__fixtures__/parse-fixture';\n+import processFrontmatter from './add-frontmatter';\n \n describe('process-frontmatter plugin', () => {\n   let mockAST;"
        },
        {
            "sha": "e424a1a9d8271aed79966628dc13795e54033fa6",
            "filename": "tools/challenge-parser/parser/plugins/add-hooks.test.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-hooks.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-hooks.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-hooks.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,6 +1,7 @@\n-const parseFixture = require('../__fixtures__/parse-fixture');\n+import { describe, beforeAll, beforeEach, it, expect } from 'vitest';\n+import parseFixture from '../__fixtures__/parse-fixture';\n \n-const addBeforeHook = require('./add-hooks');\n+import addBeforeHook from './add-hooks';\n \n describe('add-before-hook plugin', () => {\n   let withBeforeHookAST,"
        },
        {
            "sha": "bb065e737d33f6e26754716e73c02a16deae6ac4",
            "filename": "tools/challenge-parser/parser/plugins/add-quizzes.test.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-quizzes.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-quizzes.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-quizzes.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,5 +1,6 @@\n-const parseFixture = require('./../__fixtures__/parse-fixture');\n-const addQuizzes = require('./add-quizzes');\n+import { describe, beforeAll, beforeEach, it, expect } from 'vitest';\n+import parseFixture from './../__fixtures__/parse-fixture';\n+import addQuizzes from './add-quizzes';\n \n describe('add-quizzes plugin', () => {\n   let mockQuizzesAST;"
        },
        {
            "sha": "69fccc669ba827461526c0178134eabae1a508f8",
            "filename": "tools/challenge-parser/parser/plugins/add-seed.test.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-seed.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-seed.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-seed.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,7 +1,8 @@\n-const isArray = require('lodash/isArray');\n-const parseFixture = require('../__fixtures__/parse-fixture');\n+import { describe, beforeAll, beforeEach, it, expect } from 'vitest';\n+import isArray from 'lodash/isArray';\n+import parseFixture from '../__fixtures__/parse-fixture';\n \n-const addSeed = require('./add-seed');\n+import addSeed from './add-seed';\n \n describe('add-seed plugin', () => {\n   let adjacentKeysAST,"
        },
        {
            "sha": "0739bd2ef065cf0b75ea8aea10fb57107d7754ba",
            "filename": "tools/challenge-parser/parser/plugins/add-solution.test.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-solution.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-solution.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-solution.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,6 +1,7 @@\n-const { isObject } = require('lodash');\n-const parseFixture = require('../__fixtures__/parse-fixture');\n-const addSolution = require('./add-solution');\n+import { describe, beforeAll, beforeEach, it, expect } from 'vitest';\n+import { isObject } from 'lodash';\n+import parseFixture from '../__fixtures__/parse-fixture';\n+import addSolution from './add-solution';\n \n describe('add solution plugin', () => {\n   let mockAST, multiSolnsAST, editableSolutionAST;"
        },
        {
            "sha": "2f7c614e3b50515ed7ae7612528654ea3403d920",
            "filename": "tools/challenge-parser/parser/plugins/add-tests.test.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-tests.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-tests.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-tests.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,5 +1,6 @@\n-const parseFixture = require('../__fixtures__/parse-fixture');\n-const addTests = require('./add-tests');\n+import { describe, beforeAll, beforeEach, it, expect } from 'vitest';\n+import parseFixture from '../__fixtures__/parse-fixture';\n+import addTests from './add-tests';\n \n describe('add-tests plugin', () => {\n   let brokenHintsAST, simpleAST, missingTestStringAST;"
        },
        {
            "sha": "d7f1f5bbbf39c9302094efe6bed2af866350d909",
            "filename": "tools/challenge-parser/parser/plugins/add-text.test.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-text.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-text.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-text.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,5 +1,6 @@\n-const parseFixture = require('../__fixtures__/parse-fixture');\n-const addText = require('./add-text');\n+import { describe, beforeAll, beforeEach, it, expect } from 'vitest';\n+import parseFixture from '../__fixtures__/parse-fixture';\n+import addText from './add-text';\n \n describe('add-text', () => {\n   let realisticAST, mockAST, withSubSectionAST;"
        },
        {
            "sha": "a08fd6a9a7767f79cda2cd662333556fc0e3c927",
            "filename": "tools/challenge-parser/parser/plugins/add-video-question.test.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-video-question.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-video-question.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-video-question.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,5 +1,6 @@\n-const parseFixture = require('../__fixtures__/parse-fixture');\n-const addVideoQuestion = require('./add-video-question');\n+import { describe, beforeAll, beforeEach, it, expect } from 'vitest';\n+import parseFixture from '../__fixtures__/parse-fixture';\n+import addVideoQuestion from './add-video-question';\n \n describe('add-video-question plugin', () => {\n   let simpleAST, videoAST, multipleQuestionAST, videoOutOfOrderAST;"
        },
        {
            "sha": "55d4ec392ebcd1fa056cc32dfde06f41da2b00c7",
            "filename": "tools/challenge-parser/parser/plugins/replace-imports.test.js",
            "status": "modified",
            "additions": 131,
            "deletions": 153,
            "changes": 284,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Freplace-imports.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Freplace-imports.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Freplace-imports.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,10 +1,11 @@\n-const path = require('path');\n-const cloneDeep = require('lodash/cloneDeep');\n-const toVfile = require('to-vfile');\n-const selectAll = require('unist-util-select').selectAll;\n-const parseFixture = require('../__fixtures__/parse-fixture');\n+import { resolve } from 'path';\n+import { describe, beforeAll, beforeEach, it, expect, vi } from 'vitest';\n+import cloneDeep from 'lodash/cloneDeep';\n+import toVfile from 'to-vfile';\n+import { selectAll } from 'unist-util-select';\n+import parseFixture from '../__fixtures__/parse-fixture';\n \n-const addImports = require('./replace-imports');\n+import addImports from './replace-imports';\n \n describe('replace-imports', () => {\n   let importsAST,\n@@ -36,10 +37,10 @@ describe('replace-imports', () => {\n     simpleAST = cloneDeep(originalSimpleAST);\n     markerAST = cloneDeep(originalMarkerAST);\n     correctFile = toVfile(\n-      path.resolve(__dirname, '../__fixtures__/with-imports.md')\n+      resolve(__dirname, '../__fixtures__/with-imports.md')\n     );\n     incorrectFile = toVfile(\n-      path.resolve(__dirname, '../__fixtures__/incorrect-path/with-imports.md')\n+      resolve(__dirname, '../__fixtures__/incorrect-path/with-imports.md')\n     );\n   });\n \n@@ -50,110 +51,98 @@ describe('replace-imports', () => {\n     expect(typeof plugin).toEqual('function');\n   });\n \n-  it('should fail when the imported file is null', done => {\n+  it('should fail when the imported file is null', () => {\n     const plugin = addImports();\n-    const next = err => {\n-      if (err) {\n-        done();\n-      } else {\n-        done('An error should have been thrown by addImports');\n-      }\n-    };\n-    plugin(importsAST, null, next);\n+    const nextSpy = vi.fn();\n+\n+    plugin(importsAST, null, nextSpy);\n+    expect(nextSpy).toHaveBeenCalledWith(\n+      'replace-imports must be passed a file'\n+    );\n   });\n \n-  it('should proceed when the imported file exists', done => {\n+  it('should proceed when the imported file exists', async () => {\n     const plugin = addImports();\n-    plugin(importsAST, correctFile, done);\n+\n+    await new Promise(resolve => {\n+      plugin(importsAST, correctFile, resolve);\n+    });\n   });\n \n-  it('should fail when the imported file cannot be found', done => {\n-    expect.assertions(1);\n-    console.error = jest.fn();\n+  it('should fail when the imported file cannot be found', async () => {\n+    expect.assertions(2);\n+    console.error = vi.fn();\n     const plugin = addImports();\n \n-    // we have to rely on the next callback, because that is how you get error\n-    // messages out of transformers\n-    const next = err => {\n-      if (err) {\n-        expect(console.error).toHaveBeenCalledTimes(2);\n-        done();\n-      } else {\n-        done('An error should have been thrown by addImports');\n-      }\n-    };\n-    plugin(importsAST, incorrectFile, next);\n+    await expect(\n+      new Promise((resolve, reject) => {\n+        plugin(importsAST, incorrectFile, err => {\n+          if (err) {\n+            expect(console.error).toHaveBeenCalledTimes(2);\n+            resolve();\n+          } else {\n+            reject('An error should have been thrown by addImports');\n+          }\n+        });\n+      })\n+    ).resolves.toBeUndefined();\n   });\n \n-  it('should modify the tree when there are imports', done => {\n+  it('should modify the tree when there are imports', async () => {\n     expect.assertions(1);\n     const plugin = addImports();\n-    const next = err => {\n-      if (err) {\n-        done(err);\n-      } else {\n-        expect(importsAST).not.toEqual(originalImportsAST);\n-        done();\n-      }\n-    };\n-    plugin(importsAST, correctFile, next);\n+\n+    await new Promise(resolve => {\n+      plugin(importsAST, correctFile, resolve);\n+    });\n+\n+    expect(importsAST).not.toEqual(originalImportsAST);\n   });\n \n-  it('should NOT modify the tree when there are NO imports', done => {\n+  it('should NOT modify the tree when there are NO imports', async () => {\n     expect.assertions(1);\n     const plugin = addImports();\n-    const next = err => {\n-      if (err) {\n-        done(err);\n-      } else {\n-        expect(simpleAST).toEqual(originalSimpleAST);\n-        done();\n-      }\n-    };\n-    plugin(simpleAST, correctFile, next);\n+\n+    await new Promise(resolve => {\n+      plugin(simpleAST, correctFile, resolve);\n+    });\n+\n+    expect(simpleAST).toEqual(originalSimpleAST);\n   });\n \n-  it('should remove all import statements', done => {\n+  it('should remove all import statements', async () => {\n     expect.assertions(2);\n     const selector = 'leafDirective[name=import]';\n     const plugin = addImports();\n     const importNodes = selectAll(selector, importsAST);\n \n     expect(importNodes.length).toBe(1);\n \n-    const next = err => {\n-      if (err) {\n-        done(err);\n-      } else {\n-        const importNodes = selectAll(selector, importsAST);\n-        expect(importNodes.length).toBe(0);\n-        done();\n-      }\n-    };\n-    plugin(importsAST, correctFile, next);\n+    await new Promise(resolve => {\n+      plugin(importsAST, correctFile, resolve);\n+    });\n+\n+    const importNodesAfter = selectAll(selector, importsAST);\n+    expect(importNodesAfter.length).toBe(0);\n   });\n \n-  it('should not remove an ::import without the required attributes', done => {\n+  it('should not remove an ::import without the required attributes', async () => {\n     expect.assertions(2);\n     const selector = 'leafDirective[name=import]';\n     const plugin = addImports();\n     const importNodes = selectAll(selector, importsExtraAST);\n \n     expect(importNodes.length).toBe(3);\n \n-    const next = err => {\n-      if (err) {\n-        done(err);\n-      } else {\n-        const importNodes = selectAll(selector, importsExtraAST);\n-        expect(importNodes.length).toBe(1);\n-        done();\n-      }\n-    };\n-    plugin(importsExtraAST, correctFile, next);\n+    await new Promise(resolve => {\n+      plugin(importsExtraAST, correctFile, resolve);\n+    });\n+\n+    const importNodesAfter = selectAll(selector, importsExtraAST);\n+    expect(importNodesAfter.length).toBe(1);\n   });\n \n-  it('should remove all matching ::use statements', done => {\n+  it('should remove all matching ::use statements', async () => {\n     expect.assertions(2);\n     const selector = 'leafDirective[name=use]';\n     const plugin = addImports();\n@@ -162,108 +151,97 @@ describe('replace-imports', () => {\n     // one matching component and two other jsx nodes\n     expect(components.length).toBe(1);\n \n-    const next = err => {\n-      if (err) {\n-        done(err);\n-      } else {\n-        const components = selectAll(selector, importsAST);\n-        expect(components.length).toBe(0);\n-        done();\n-      }\n-    };\n-    plugin(importsAST, correctFile, next);\n+    await new Promise(resolve => {\n+      plugin(importsAST, correctFile, resolve);\n+    });\n+\n+    const componentsAfter = selectAll(selector, importsAST);\n+    expect(componentsAfter.length).toBe(0);\n   });\n \n-  it('should replace the ::use statement with the imported content', done => {\n+  it('should replace the ::use statement with the imported content', async () => {\n     // checks the contents of script.md are there after the import step\n     expect.assertions(2);\n     const plugin = addImports();\n \n-    const next = err => {\n-      if (err) {\n-        done(err);\n-      } else {\n-        const jsNodes = selectAll('code[lang=js]', importsAST);\n-        expect(jsNodes.length).toBe(4);\n-\n-        const codeValues = jsNodes.map(({ value }) => value);\n-        expect(codeValues).toEqual(\n-          expect.arrayContaining([\n-            `for (let index = 0; index < array.length; index++) {\n+    await new Promise(resolve => {\n+      plugin(importsAST, correctFile, resolve);\n+    });\n+\n+    const jsNodes = selectAll('code[lang=js]', importsAST);\n+    expect(jsNodes.length).toBe(4);\n+\n+    const codeValues = jsNodes.map(({ value }) => value);\n+    expect(codeValues).toEqual(\n+      expect.arrayContaining([\n+        `for (let index = 0; index < array.length; index++) {\n   const element = array[index];\n   // imported from script.md\n }`\n-          ])\n-        );\n-        done();\n-      }\n-    };\n-    plugin(importsAST, correctFile, next);\n+      ])\n+    );\n   });\n \n-  it('should handle multiple import statements', done => {\n+  it('should handle multiple import statements', async () => {\n     // checks the contents of script.md are there after the import step\n     expect.assertions(4);\n     const plugin = addImports();\n \n-    const next = err => {\n-      if (err) {\n-        done(err);\n-      } else {\n-        const jsNodes = selectAll('code[lang=js]', importsTwoAST);\n-        expect(jsNodes.length).toBe(4);\n-\n-        const codeValues = jsNodes.map(({ value }) => value);\n-        expect(codeValues).toEqual(\n-          expect.arrayContaining([\n-            `for (let index = 0; index < array.length; index++) {\n+    await new Promise(resolve => {\n+      plugin(importsTwoAST, correctFile, resolve);\n+    });\n+\n+    const jsNodes = selectAll('code[lang=js]', importsTwoAST);\n+    expect(jsNodes.length).toBe(4);\n+\n+    const codeValues = jsNodes.map(({ value }) => value);\n+    expect(codeValues).toEqual(\n+      expect.arrayContaining([\n+        `for (let index = 0; index < array.length; index++) {\n   const element = array[index];\n   // imported from script.md\n }`\n-          ])\n-        );\n-        const cssNodes = selectAll('code[lang=css]', importsTwoAST);\n-        expect(cssNodes.length).toBe(2);\n-\n-        const cssValues = cssNodes.map(({ value }) => value);\n-        expect(cssValues).toEqual(\n-          expect.arrayContaining([\n-            `div {\n+      ])\n+    );\n+    const cssNodes = selectAll('code[lang=css]', importsTwoAST);\n+    expect(cssNodes.length).toBe(2);\n+\n+    const cssValues = cssNodes.map(({ value }) => value);\n+    expect(cssValues).toEqual(\n+      expect.arrayContaining([\n+        `div {\n   background: red\n }`\n-          ])\n-        );\n-        done();\n-      }\n-    };\n-    plugin(importsTwoAST, correctFile, next);\n+      ])\n+    );\n   });\n \n-  it('should reject imported files with editable region markers', done => {\n-    expect.assertions(1);\n-    console.error = jest.fn();\n+  it('should reject imported files with editable region markers', async () => {\n+    expect.assertions(2); // One inside the callback and one for the outer expect\n+    console.error = vi.fn();\n     const plugin = addImports();\n-    const next = err => {\n-      if (err) {\n-        expect(console.error).toHaveBeenCalledTimes(2);\n-        done();\n-      } else {\n-        done('An error should have been thrown by addImports');\n-      }\n-    };\n-    plugin(markerAST, correctFile, next);\n+\n+    await expect(\n+      new Promise((resolve, reject) => {\n+        plugin(markerAST, correctFile, err => {\n+          if (err) {\n+            expect(console.error).toHaveBeenCalledTimes(2);\n+          } else {\n+            reject('An error should have been thrown by addImports');\n+          }\n+          resolve();\n+        });\n+      })\n+    ).resolves.toBeUndefined();\n   });\n \n-  it('should have an output to match the snapshot', done => {\n+  it('should have an output to match the snapshot', async () => {\n     const plugin = addImports();\n-    const next = err => {\n-      if (err) {\n-        done(err);\n-      } else {\n-        expect(importsAST).toMatchSnapshot();\n-        done();\n-      }\n-    };\n-    plugin(importsAST, correctFile, next);\n+\n+    await new Promise(resolve => {\n+      plugin(importsAST, correctFile, resolve);\n+    });\n+\n+    expect(importsAST).toMatchSnapshot();\n   });\n });"
        },
        {
            "sha": "4fc332b58d3a7cbe9bcad609d4833fc0220bae1c",
            "filename": "tools/challenge-parser/parser/plugins/restore-directives.test.js",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Frestore-directives.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Frestore-directives.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Frestore-directives.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,9 +1,10 @@\n-const cloneDeep = require('lodash/cloneDeep');\n-const find = require('unist-util-find');\n-const { selectAll } = require('unist-util-select');\n+import { describe, beforeEach, beforeAll, it, expect } from 'vitest';\n+import cloneDeep from 'lodash/cloneDeep';\n+import find from 'unist-util-find';\n+import { selectAll } from 'unist-util-select';\n \n-const parseFixture = require('../__fixtures__/parse-fixture');\n-const restoreDirectives = require('./restore-directives');\n+import parseFixture from '../__fixtures__/parse-fixture';\n+import restoreDirectives from './restore-directives';\n \n describe('restore-directives', () => {\n   let directivesAST, directivesOriginalAST;"
        },
        {
            "sha": "120ff36d9ca8861589e1555607f6feab38119a31",
            "filename": "tools/challenge-parser/parser/plugins/utils/__snapshots__/get-section.test.js.snap",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2F__snapshots__%2Fget-section.test.js.snap",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2F__snapshots__%2Fget-section.test.js.snap",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2F__snapshots__%2Fget-section.test.js.snap?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,6 +1,6 @@\n-// Jest Snapshot v1, https://goo.gl/fbAQLP\n+// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html\n \n-exports[`getSection should match the hints snapshot 1`] = `\n+exports[`getSection > should match the hints snapshot 1`] = `\n [\n   {\n     \"children\": [\n@@ -338,7 +338,7 @@ if(let x of xs) {\n ]\n `;\n \n-exports[`getSection should match the instructions snapshot 1`] = `\n+exports[`getSection > should match the instructions snapshot 1`] = `\n [\n   {\n     \"children\": ["
        },
        {
            "sha": "e9d5d5bbcc4f12e318410a13d3d6e5a6a181dce1",
            "filename": "tools/challenge-parser/parser/plugins/utils/before-heading.test.js",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fbefore-heading.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fbefore-heading.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fbefore-heading.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,7 +1,8 @@\n-const isArray = require('lodash/isArray');\n+import isArray from 'lodash/isArray';\n+import { describe, beforeAll, it, expect } from 'vitest';\n \n-const parseFixture = require('../../__fixtures__/parse-fixture');\n-const getAllBefore = require('./before-heading');\n+import parseFixture from '../../__fixtures__/parse-fixture';\n+import getAllBefore from './before-heading';\n \n describe('before-headings', () => {\n   let simpleAst;"
        },
        {
            "sha": "82a772ce3928892c2f83dc0279dd4cdbc1c3d13a",
            "filename": "tools/challenge-parser/parser/plugins/utils/find-all.test.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Ffind-all.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Ffind-all.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Ffind-all.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,4 +1,6 @@\n-const { findAll } = require('./find-all');\n+import { describe, it, expect } from 'vitest';\n+\n+import { findAll } from './find-all';\n \n const testTree = {\n   type: 'root',"
        },
        {
            "sha": "75006629ce215fa8f391c6ffd7ae744c1e4d7bd4",
            "filename": "tools/challenge-parser/parser/plugins/utils/get-file-visitor.test.js",
            "status": "removed",
            "additions": 0,
            "deletions": 33,
            "changes": 33,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2590c1c8206b28d1bb377500c27d6a6ce0a03d7f/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fget-file-visitor.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2590c1c8206b28d1bb377500c27d6a6ce0a03d7f/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fget-file-visitor.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fget-file-visitor.test.js?ref=2590c1c8206b28d1bb377500c27d6a6ce0a03d7f",
            "patch": "@@ -1,33 +0,0 @@\n-describe('get-file-visitor', () => {\n-  it('should join code with newlines', () => {\n-    /* i.e. if you've got two js code blocks it should do this\n-\n-    ```js\n-    one\n-    ```\n-\n-    ```js\n-    two\n-    ```\n-\n-    become\n-\n-    ```js\n-    one\n-    two\n-    ```\n-\n-    not\n-\n-    ```js\n-    onetwo\n-    ```\n-    or\n-    ```js\n-\n-    one\n-    two\n-    ```\n-    */\n-  });\n-});"
        },
        {
            "sha": "485b959b082cf77f2cf5b8f67d03e69a675548b7",
            "filename": "tools/challenge-parser/parser/plugins/utils/get-id.test.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fget-id.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fget-id.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fget-id.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,5 +1,7 @@\n-const parseFixture = require('../../__fixtures__/parse-fixture');\n-const getId = require('./get-id');\n+import { describe, beforeAll, it, expect } from 'vitest';\n+\n+import parseFixture from '../../__fixtures__/parse-fixture';\n+import getId from './get-id';\n \n describe('get-id', () => {\n   let idNode, imageNode, multipleChildrenNode;"
        },
        {
            "sha": "367655caa0adf873d3a1a24fbee29a50d0ddd02e",
            "filename": "tools/challenge-parser/parser/plugins/utils/get-paragraph-content.test.js",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fget-paragraph-content.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fget-paragraph-content.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fget-paragraph-content.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,5 +1,7 @@\n-const parseFixture = require('../../__fixtures__/parse-fixture');\n-const { getParagraphContent } = require('./get-paragraph-content');\n+import { describe, beforeAll, it, expect } from 'vitest';\n+\n+import parseFixture from '../../__fixtures__/parse-fixture';\n+import { getParagraphContent } from './get-paragraph-content';\n \n describe('getParagraphContent', () => {\n   let simpleAST;"
        },
        {
            "sha": "b4b2b2862542ad0fcf2cf7160283e2bea8404f38",
            "filename": "tools/challenge-parser/parser/plugins/utils/get-section.test.js",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fget-section.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fget-section.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fget-section.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,9 +1,10 @@\n-const isArray = require('lodash/isArray');\n-const { root } = require('mdast-builder');\n-const find = require('unist-util-find');\n+import { describe, beforeAll, it, expect } from 'vitest';\n+import isArray from 'lodash/isArray';\n+import { root } from 'mdast-builder';\n+import find from 'unist-util-find';\n \n-const parseFixture = require('../../__fixtures__/parse-fixture');\n-const { getSection } = require('./get-section');\n+import parseFixture from '../../__fixtures__/parse-fixture';\n+import { getSection } from './get-section';\n \n describe('getSection', () => {\n   let simpleAst, extraHeadingAst;"
        },
        {
            "sha": "4bc9a47673b9eb2fe31bc63fbe06c611c6ac03fb",
            "filename": "tools/challenge-parser/parser/plugins/utils/mdast-to-html.test.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fmdast-to-html.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fmdast-to-html.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Futils%2Fmdast-to-html.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,5 +1,6 @@\n-const parseFixture = require('../../__fixtures__/parse-fixture');\n-const mdastToHTML = require('./mdast-to-html');\n+import { describe, beforeAll, it, expect } from 'vitest';\n+import parseFixture from '../../__fixtures__/parse-fixture';\n+import mdastToHTML from './mdast-to-html';\n \n describe('mdast-to-html', () => {\n   let mdastMixedNodes, singleNode, inlineHTMLNodes;"
        },
        {
            "sha": "cf7101ff1a9e1d527baad9c56e71e74bf9280d95",
            "filename": "tools/challenge-parser/parser/plugins/validate-sections.test.js",
            "status": "modified",
            "additions": 7,
            "deletions": 5,
            "changes": 12,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fvalidate-sections.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fvalidate-sections.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fvalidate-sections.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,8 +1,10 @@\n-const unified = require('unified');\n-const remark = require('remark-parse');\n-const frontmatter = require('remark-frontmatter');\n-const addFrontmatter = require('./add-frontmatter');\n-const validateSections = require('./validate-sections');\n+import { describe, it, expect } from 'vitest';\n+import unified from 'unified';\n+import remark from 'remark-parse';\n+import frontmatter from 'remark-frontmatter';\n+\n+import addFrontmatter from './add-frontmatter';\n+import validateSections from './validate-sections';\n \n const processor = unified()\n   .use(remark)"
        },
        {
            "sha": "f27ba80a1037e9d2dbdd5c47204cf5a3df206ae8",
            "filename": "tools/challenge-parser/translation-parser/index.test.js",
            "status": "modified",
            "additions": 6,
            "deletions": 7,
            "changes": 13,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Ftranslation-parser%2Findex.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/28411a2cece75d086b7c994ddf7ea7daf8a507e8/tools%2Fchallenge-parser%2Ftranslation-parser%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Ftranslation-parser%2Findex.test.js?ref=28411a2cece75d086b7c994ddf7ea7daf8a507e8",
            "patch": "@@ -1,18 +1,17 @@\n-const {\n-  ENGLISH_CHALLENGE_NO_FILES\n-} = require('./__fixtures__/challenge-objects');\n-const { SIMPLE_TRANSLATION } = require('./__mocks__/mock-comments');\n-const {\n+import { describe, beforeEach, afterEach, it, expect, vi } from 'vitest';\n+import { ENGLISH_CHALLENGE_NO_FILES } from './__fixtures__/challenge-objects';\n+import { SIMPLE_TRANSLATION } from './__mocks__/mock-comments';\n+import {\n   translateComments,\n   translateCommentsInChallenge,\n   translateGeneric\n-} = require('.');\n+} from '.';\n \n let logSpy;\n \n describe('translation parser', () => {\n   beforeEach(() => {\n-    logSpy = jest.spyOn(console, 'warn').mockImplementation();\n+    logSpy = vi.spyOn(console, 'warn').mockImplementation();\n   });\n   afterEach(() => {\n     logSpy.mockRestore();"
        }
    ],
    "stats": {
        "total": 545,
        "additions": 257,
        "deletions": 288
    }
}