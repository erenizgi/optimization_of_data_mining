{
    "author": "gagan-bhullar-tech",
    "message": "fix: Settings page picture url fix (#55673)",
    "sha": "9090c0803f32331472ae6435b9eb2af52d150a2b",
    "files": [
        {
            "sha": "bb9b035bcc4547742cad5d90d4f17649fc845787",
            "filename": "api-server/src/server/boot/settings.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/9090c0803f32331472ae6435b9eb2af52d150a2b/api-server%2Fsrc%2Fserver%2Fboot%2Fsettings.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/9090c0803f32331472ae6435b9eb2af52d150a2b/api-server%2Fsrc%2Fserver%2Fboot%2Fsettings.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api-server%2Fsrc%2Fserver%2Fboot%2Fsettings.js?ref=9090c0803f32331472ae6435b9eb2af52d150a2b",
            "patch": "@@ -179,7 +179,7 @@ function updateMyAbout(req, res, next) {\n   // prevent dataurls from being stored\n   const update = isURL(picture, { require_protocol: true })\n     ? { name, location, about, picture }\n-    : { name, location, about };\n+    : { name, location, about, picture: '' };\n   return user.updateAttributes(\n     update,\n     createStandardHandler(req, res, next, 'flash.updated-about-me')"
        },
        {
            "sha": "065df49a18b30462bf68c6c6d5499f4c955d8323",
            "filename": "api/src/routes/settings.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/9090c0803f32331472ae6435b9eb2af52d150a2b/api%2Fsrc%2Froutes%2Fsettings.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/9090c0803f32331472ae6435b9eb2af52d150a2b/api%2Fsrc%2Froutes%2Fsettings.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fsettings.ts?ref=9090c0803f32331472ae6435b9eb2af52d150a2b",
            "patch": "@@ -494,7 +494,7 @@ ${isLinkSentWithinLimitTTL}`\n             about: req.body.about,\n             name: req.body.name,\n             location: req.body.location,\n-            ...(hasProtocol && { picture: req.body.picture })\n+            picture: hasProtocol ? req.body.picture : ''\n           }\n         });\n "
        },
        {
            "sha": "63bc2a4cd040901c00b22d0fd6236e3e7a7551c8",
            "filename": "client/src/components/settings/about.tsx",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/9090c0803f32331472ae6435b9eb2af52d150a2b/client%2Fsrc%2Fcomponents%2Fsettings%2Fabout.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/9090c0803f32331472ae6435b9eb2af52d150a2b/client%2Fsrc%2Fcomponents%2Fsettings%2Fabout.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fsettings%2Fabout.tsx?ref=9090c0803f32331472ae6435b9eb2af52d150a2b",
            "patch": "@@ -165,7 +165,11 @@ class AboutSettings extends Component<AboutProps, AboutState> {\n \n   handlePictureChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n     const value = (e.target as HTMLInputElement).value.slice(0);\n-    if (isURL(value, { require_protocol: true })) {\n+    if (!value) {\n+      this.setState({\n+        isPictureUrlValid: true\n+      });\n+    } else if (isURL(value, { require_protocol: true })) {\n       this.validationImage.src = encodeURI(value);\n     } else {\n       this.setState({"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 7,
        "deletions": 3
    }
}