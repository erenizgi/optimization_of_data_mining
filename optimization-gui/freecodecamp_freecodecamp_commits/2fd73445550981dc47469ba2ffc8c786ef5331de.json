{
    "author": "raisedadead",
    "message": "fix(api): adjust logs in email-subscription (#59944)",
    "sha": "2fd73445550981dc47469ba2ffc8c786ef5331de",
    "files": [
        {
            "sha": "f867c76df8eac459c7879975ac6d1dc33f43acd0",
            "filename": "api/src/routes/public/email-subscription.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 4,
            "changes": 13,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2fd73445550981dc47469ba2ffc8c786ef5331de/api%2Fsrc%2Froutes%2Fpublic%2Femail-subscription.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2fd73445550981dc47469ba2ffc8c786ef5331de/api%2Fsrc%2Froutes%2Fpublic%2Femail-subscription.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fpublic%2Femail-subscription.ts?ref=2fd73445550981dc47469ba2ffc8c786ef5331de",
            "patch": "@@ -36,7 +36,6 @@ export const emailSubscribtionRoutes: FastifyPluginCallbackTypebox = (\n         const { origin } = getRedirectParams(req);\n         const { unsubscribeId } = req.params;\n         const log = fastify.log.child({ req, unsubscribeId });\n-        log.debug('Processing unsubscribe request');\n \n         const unsubUsers = await fastify.prisma.user.findMany({\n           where: { unsubscribeId }\n@@ -51,6 +50,7 @@ export const emailSubscribtionRoutes: FastifyPluginCallbackTypebox = (\n           });\n         }\n \n+        log.info(`Found ${unsubUsers.length} user(s) to unsubscribe`);\n         const userUpdatePromises = unsubUsers.map(user =>\n           fastify.prisma.user.updateMany({\n             where: { email: user.email },\n@@ -61,7 +61,10 @@ export const emailSubscribtionRoutes: FastifyPluginCallbackTypebox = (\n         );\n \n         await Promise.all(userUpdatePromises);\n-        log.info('Successfully unsubscribed users from email');\n+        log.info(\n+          { emails: unsubUsers.map(u => u.email) },\n+          'Successfully unsubscribed users from email.'\n+        );\n \n         return reply.redirectWithMessage(\n           `${origin}/unsubscribed/${unsubscribeId}`,\n@@ -105,7 +108,6 @@ export const emailSubscribtionRoutes: FastifyPluginCallbackTypebox = (\n         const { origin } = getRedirectParams(req);\n         const { unsubscribeId } = req.params;\n         const log = fastify.log.child({ req, unsubscribeId });\n-        log.debug('Processing resubscribe request');\n \n         const user = await fastify.prisma.user.findFirst({\n           where: { unsubscribeId }\n@@ -120,13 +122,16 @@ export const emailSubscribtionRoutes: FastifyPluginCallbackTypebox = (\n           });\n         }\n \n+        log.info(`Found user ${user.id} to resubscribe`);\n         await fastify.prisma.user.update({\n           where: { id: user.id },\n           data: {\n             sendQuincyEmail: true\n           }\n         });\n-        log.info('Successfully resubscribed user to email');\n+        log.info(\n+          `Successfully resubscribed user ${user.id} to email: ${user.email}`\n+        );\n \n         return reply.redirectWithMessage(origin, {\n           type: 'success',"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 9,
        "deletions": 4
    }
}