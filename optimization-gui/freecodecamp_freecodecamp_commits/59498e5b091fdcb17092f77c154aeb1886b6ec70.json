{
    "author": "ShaunSHamilton",
    "message": "feat(client): allow empty source code testing (#53797)\n\nCo-authored-by: Oliver Eyton-Williams <ojeytonwilliams@gmail.com>",
    "sha": "59498e5b091fdcb17092f77c154aeb1886b6ec70",
    "files": [
        {
            "sha": "6f72bd74d7d0a937f61aa453f37b42aa45cc8d4e",
            "filename": "client/i18n/locales/english/translations.json",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/59498e5b091fdcb17092f77c154aeb1886b6ec70/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/59498e5b091fdcb17092f77c154aeb1886b6ec70/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json?ref=59498e5b091fdcb17092f77c154aeb1886b6ec70",
            "patch": "@@ -872,7 +872,8 @@\n     \"own-work-url\": \"Remember to submit your own work.\",\n     \"publicly-visible-url\": \"Remember to submit a publicly visible app URL.\",\n     \"ms-learn-link\": \"Please use a valid Microsoft Learn trophy link.\",\n-    \"path-url\": \"You probably want to submit the root path i.e. https://example.com, not https://example.com/path\"\n+    \"path-url\": \"You probably want to submit the root path i.e. https://example.com, not https://example.com/path\",\n+    \"source-code-link-required\": \"Remember to submit the link to your source code.\"\n   },\n   \"certification\": {\n     \"executive\": \"Executive Director, freeCodeCamp.org\","
        },
        {
            "sha": "559869332b7fe0394d2ee948a1d6c5f871f47fd9",
            "filename": "client/src/components/formHelpers/form-fields.tsx",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/59498e5b091fdcb17092f77c154aeb1886b6ec70/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform-fields.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/59498e5b091fdcb17092f77c154aeb1886b6ec70/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform-fields.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform-fields.tsx?ref=59498e5b091fdcb17092f77c154aeb1886b6ec70",
            "patch": "@@ -14,13 +14,15 @@ import {\n   composeValidators,\n   fCCValidator,\n   httpValidator,\n-  pathValidator\n+  pathValidator,\n+  sourceCodeLinkExistsValidator\n } from './form-validators';\n \n export type FormOptions = {\n   ignored?: string[];\n   isEditorLinkAllowed?: boolean;\n   isLocalLinkAllowed?: boolean;\n+  isSourceCodeLinkRequired?: boolean;\n   required?: string[];\n   types?: { [key: string]: string };\n   placeholders?: { [key: string]: string };\n@@ -38,7 +40,8 @@ function FormFields({ formFields, options }: FormFieldsProps): JSX.Element {\n     required = [],\n     types = {},\n     isEditorLinkAllowed = false,\n-    isLocalLinkAllowed = false\n+    isLocalLinkAllowed = false,\n+    isSourceCodeLinkRequired = false\n   } = options;\n \n   const nullOrWarning = (\n@@ -64,6 +67,9 @@ function FormFields({ formFields, options }: FormFieldsProps): JSX.Element {\n         validators.push(pathValidator);\n       }\n     }\n+    if (isSourceCodeLinkRequired && name === 'githubLink') {\n+      validators.push(sourceCodeLinkExistsValidator);\n+    }\n     if (!isLocalLinkAllowed) {\n       validators.push(localhostValidator);\n     }"
        },
        {
            "sha": "ba21986994e1e9f37068728e2c94c5e4307abd2b",
            "filename": "client/src/components/formHelpers/form-validators.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/59498e5b091fdcb17092f77c154aeb1886b6ec70/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform-validators.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/59498e5b091fdcb17092f77c154aeb1886b6ec70/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform-validators.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform-validators.tsx?ref=59498e5b091fdcb17092f77c154aeb1886b6ec70",
            "patch": "@@ -38,6 +38,9 @@ export const httpValidator: Validator = value =>\n export const pathValidator: Validator = value =>\n   isPathRoot(value) ? <Trans>validation.path-url</Trans> : null;\n \n+export const sourceCodeLinkExistsValidator: Validator = value =>\n+  value ? null : <Trans>validation.source-code-link-required</Trans>;\n+\n export function composeValidators(...validators: Validator[]) {\n   return (value: string): ReturnType<Validator> | null =>\n     validators.reduce("
        },
        {
            "sha": "badf91b473d33b7d2bbc65c6653f25bf5bf603a8",
            "filename": "client/src/components/formHelpers/form.tsx",
            "status": "modified",
            "additions": 48,
            "deletions": 31,
            "changes": 79,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/59498e5b091fdcb17092f77c154aeb1886b6ec70/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/59498e5b091fdcb17092f77c154aeb1886b6ec70/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform.tsx?ref=59498e5b091fdcb17092f77c154aeb1886b6ec70",
            "patch": "@@ -8,7 +8,8 @@ import {\n   editorValidator,\n   composeValidators,\n   fCCValidator,\n-  httpValidator\n+  httpValidator,\n+  sourceCodeLinkExistsValidator\n } from './form-validators';\n import FormFields, { FormOptions } from './form-fields';\n \n@@ -35,43 +36,59 @@ function validateFormValues(\n   formValues: FormValues,\n   options: FormOptions\n ): ValidatedValues {\n-  const { isEditorLinkAllowed, isLocalLinkAllowed, types } = options;\n+  const {\n+    isEditorLinkAllowed,\n+    isLocalLinkAllowed,\n+    isSourceCodeLinkRequired,\n+    types\n+  } = options;\n   const validatedValues: ValidatedValues = {\n     values: {},\n     errors: [],\n     invalidValues: []\n   };\n-  const urlValues = Object.entries(formValues).reduce(\n-    (result, [key, value]) => {\n-      // NOTE: pathValidator is not used here, because it is only used as a\n-      // suggestion - should not prevent form submission\n-      const validators = [fCCValidator, httpValidator];\n-      const isSolutionLink = key !== 'githubLink';\n-      if (isSolutionLink && !isEditorLinkAllowed) {\n-        validators.push(editorValidator);\n-      }\n-      if (!isLocalLinkAllowed) {\n-        validators.push(localhostValidator);\n-      }\n \n-      const nullOrWarning = composeValidators(...validators)(value);\n-      if (nullOrWarning) {\n-        validatedValues.invalidValues.push(nullOrWarning);\n-      }\n-      if (value && types && types[key] === 'url') {\n-        try {\n-          value = normalizeUrl(value, normalizeOptions);\n-        } catch (err: unknown) {\n-          validatedValues.errors.push({\n-            error: err as { message?: string },\n-            value\n-          });\n-        }\n+  const formFields = Object.entries(formValues);\n+  // We don't always get a githubLink field in formValues, so we can't simply\n+  // validate that field like the others. We have to handle it separately.\n+  if (isSourceCodeLinkRequired) {\n+    const githubLink = formValues['githubLink'];\n+    if (!githubLink) {\n+      validatedValues.invalidValues.push(sourceCodeLinkExistsValidator(''));\n+    }\n+  }\n+\n+  const urlValues = formFields.reduce((result, [key, value]) => {\n+    // NOTE: pathValidator is not used here, because it is only used as a\n+    // suggestion - should not prevent form submission\n+    const validators = [fCCValidator, httpValidator];\n+    const isSolutionLink = key !== 'githubLink';\n+    if (isSolutionLink && !isEditorLinkAllowed) {\n+      validators.push(editorValidator);\n+    }\n+    if (!isLocalLinkAllowed) {\n+      validators.push(localhostValidator);\n+    }\n+    if (isSourceCodeLinkRequired) {\n+      validators.push(sourceCodeLinkExistsValidator);\n+    }\n+\n+    const nullOrWarning = composeValidators(...validators)(value);\n+    if (nullOrWarning) {\n+      validatedValues.invalidValues.push(nullOrWarning);\n+    }\n+    if (value && types && types[key] === 'url') {\n+      try {\n+        value = normalizeUrl(value, normalizeOptions);\n+      } catch (err: unknown) {\n+        validatedValues.errors.push({\n+          error: err as { message?: string },\n+          value\n+        });\n       }\n-      return { ...result, [key]: value };\n-    },\n-    {}\n-  );\n+    }\n+    return { ...result, [key]: value };\n+  }, {});\n   validatedValues.values = urlValues;\n   return validatedValues;\n }"
        },
        {
            "sha": "805ccceb297b3969b09b36c3cf65bd1c0eac9672",
            "filename": "client/src/templates/Challenges/projects/solution-form.tsx",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/59498e5b091fdcb17092f77c154aeb1886b6ec70/client%2Fsrc%2Ftemplates%2FChallenges%2Fprojects%2Fsolution-form.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/59498e5b091fdcb17092f77c154aeb1886b6ec70/client%2Fsrc%2Ftemplates%2FChallenges%2Fprojects%2Fsolution-form.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fprojects%2Fsolution-form.tsx?ref=59498e5b091fdcb17092f77c154aeb1886b6ec70",
            "patch": "@@ -63,7 +63,8 @@ export class SolutionForm extends Component<SolutionFormProps> {\n       },\n       required: ['solution'],\n       isEditorLinkAllowed: false,\n-      isLocalLinkAllowed: false\n+      isLocalLinkAllowed: false,\n+      isSourceCodeLinkRequired: false\n     };\n \n     let formFields = solutionField;\n@@ -85,7 +86,8 @@ export class SolutionForm extends Component<SolutionFormProps> {\n \n       case challengeTypes.backEndProject:\n         formFields = backEndProjectFields;\n-        options.required.push('githubLink');\n+        // options.required.push('githubLink');\n+        options.isSourceCodeLinkRequired = true;\n         options.isLocalLinkAllowed = true;\n         solutionLink = solutionLink + 'https://3000-project-url.gitpod.io/';\n         solutionFormID = 'back-end-form';"
        }
    ],
    "stats": {
        "total": 101,
        "additions": 65,
        "deletions": 36
    }
}