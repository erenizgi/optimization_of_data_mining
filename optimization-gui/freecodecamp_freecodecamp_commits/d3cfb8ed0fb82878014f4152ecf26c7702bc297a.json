{
    "author": "ojeytonwilliams",
    "message": "fix(api): make log level + flags optional (#57978)",
    "sha": "d3cfb8ed0fb82878014f4152ecf26c7702bc297a",
    "files": [
        {
            "sha": "50c814bc7d757ddc38c416ae384e38bef0b3f48b",
            "filename": "api/src/utils/env.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 8,
            "changes": 15,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/d3cfb8ed0fb82878014f4152ecf26c7702bc297a/api%2Fsrc%2Futils%2Fenv.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/d3cfb8ed0fb82878014f4152ecf26c7702bc297a/api%2Fsrc%2Futils%2Fenv.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Futils%2Fenv.ts?ref=d3cfb8ed0fb82878014f4152ecf26c7702bc297a",
            "patch": "@@ -50,11 +50,8 @@ assert.ok(process.env.AUTH0_CLIENT_ID);\n assert.ok(process.env.AUTH0_CLIENT_SECRET);\n assert.ok(process.env.AUTH0_DOMAIN);\n assert.ok(process.env.API_LOCATION);\n-assert.ok(process.env.FCC_ENABLE_SWAGGER_UI);\n-assert.ok(process.env.FCC_ENABLE_DEV_LOGIN_MODE);\n assert.ok(process.env.JWT_SECRET);\n assert.ok(process.env.STRIPE_SECRET_KEY);\n-assert.ok(process.env.SHOW_UPCOMING_CHANGES);\n assert.ok(process.env.MONGOHQ_URL);\n assert.ok(process.env.COOKIE_SECRET);\n \n@@ -68,13 +65,15 @@ const LOG_LEVELS: LogLevel[] = [\n   'silent'\n ] as const;\n \n-function assertLogLevel(level: unknown): level is LogLevel {\n-  return typeof level === 'string' && LOG_LEVELS.includes(level);\n+function isLogLevel(level: string): level is LogLevel {\n+  return LOG_LEVELS.includes(level);\n }\n \n+const LOG_LEVEL = process.env.FCC_API_LOG_LEVEL || 'info';\n+\n assert.ok(\n-  assertLogLevel(process.env.FCC_API_LOG_LEVEL),\n-  `FCC_API_LOG_LEVEL must be one of ${LOG_LEVELS.join(',')}. Found ${process.env.FCC_API_LOG_LEVEL}`\n+  isLogLevel(LOG_LEVEL),\n+  `FCC_API_LOG_LEVEL must be one of ${LOG_LEVELS.join(', ')}. Found ${LOG_LEVEL}`\n );\n \n if (process.env.FREECODECAMP_NODE_ENV !== 'development') {\n@@ -157,7 +156,7 @@ export const FCC_ENABLE_EXAM_ENVIRONMENT =\n   process.env.FCC_ENABLE_EXAM_ENVIRONMENT === 'true';\n export const FCC_ENABLE_SENTRY_ROUTES =\n   process.env.FCC_ENABLE_SENTRY_ROUTES === 'true';\n-export const FCC_API_LOG_LEVEL = process.env.FCC_API_LOG_LEVEL;\n+export const FCC_API_LOG_LEVEL = LOG_LEVEL;\n export const SENTRY_DSN =\n   process.env.SENTRY_DSN === 'dsn_from_sentry_dashboard'\n     ? ''"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 7,
        "deletions": 8
    }
}