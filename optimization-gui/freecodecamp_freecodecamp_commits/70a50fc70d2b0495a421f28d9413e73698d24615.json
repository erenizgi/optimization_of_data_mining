{
    "author": "Sembauke",
    "message": "feat: convert academic honstey tests to Playwright (#54855)\n\nCo-authored-by: Oliver Eyton-Williams <ojeytonwilliams@gmail.com>",
    "sha": "70a50fc70d2b0495a421f28d9413e73698d24615",
    "files": [
        {
            "sha": "859d35a6697f0772e3fda7f46134cd8fef3c9ae7",
            "filename": "client/src/components/settings/certification.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/70a50fc70d2b0495a421f28d9413e73698d24615/client%2Fsrc%2Fcomponents%2Fsettings%2Fcertification.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/70a50fc70d2b0495a421f28d9413e73698d24615/client%2Fsrc%2Fcomponents%2Fsettings%2Fcertification.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fsettings%2Fcertification.tsx?ref=70a50fc70d2b0495a421f28d9413e73698d24615",
            "patch": "@@ -399,6 +399,7 @@ function CertificationSettings(props: CertificationSettingsProps) {\n               block={true}\n               variant='primary'\n               href={certLocation}\n+              data-playwright-test-label={`btn-for-${certSlug}`}\n               // This floating promise is acceptable\n               // eslint-disable-next-line @typescript-eslint/no-misused-promises\n               onClick={clickHandler}"
        },
        {
            "sha": "6380937f5f9b696a252e4b0d8d83177a9a6e842d",
            "filename": "cypress/e2e/default/settings/certifications.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 40,
            "changes": 40,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/84a41a4da80ed1ce08becdd9256aeb84a0e17203/cypress%2Fe2e%2Fdefault%2Fsettings%2Fcertifications.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/84a41a4da80ed1ce08becdd9256aeb84a0e17203/cypress%2Fe2e%2Fdefault%2Fsettings%2Fcertifications.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/cypress%2Fe2e%2Fdefault%2Fsettings%2Fcertifications.ts?ref=84a41a4da80ed1ce08becdd9256aeb84a0e17203",
            "patch": "@@ -1,40 +0,0 @@\n-import '@testing-library/cypress/add-commands';\n-\n-describe('Settings certifications area', () => {\n-  describe('initially', () => {\n-    before(() => {\n-      cy.task('seed');\n-      cy.login();\n-    });\n-\n-    it('Should render the default settings page', () => {\n-      cy.visit('/settings');\n-      cy.findAllByText('Claim Certification').should($btns => {\n-        expect($btns).to.have.length(19);\n-      });\n-      cy.findByText('Show Certification').should('not.exist');\n-      cy.contains(`I agree to freeCodeCamp's Academic Honesty Policy.`);\n-      cy.contains('Claim Certification').click();\n-      cy.contains(\n-        'To claim a certification, you must first agree to our academic honesty policy'\n-      );\n-    });\n-  });\n-\n-  describe('after isHonest', () => {\n-    before(() => {\n-      cy.task('seed');\n-      cy.login();\n-    });\n-\n-    it('Should update the user as they try to claim their certifications', () => {\n-      cy.visit('/settings');\n-      cy.contains(`I agree to freeCodeCamp's Academic Honesty Policy.`).click();\n-      cy.contains('You have agreed to our Academic Honesty Policy.');\n-      cy.contains('Claim Certification').click();\n-      cy.contains(\n-        'It looks like you have not completed the necessary steps. Please complete the required projects to claim the Responsive Web Design Certification'\n-      );\n-    });\n-  });\n-});"
        },
        {
            "sha": "88a3f23a428e1aadef3bdb5864b6f7835c953091",
            "filename": "e2e/academic-honesty.spec.ts",
            "status": "added",
            "additions": 74,
            "deletions": 0,
            "changes": 74,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/70a50fc70d2b0495a421f28d9413e73698d24615/e2e%2Facademic-honesty.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/70a50fc70d2b0495a421f28d9413e73698d24615/e2e%2Facademic-honesty.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Facademic-honesty.spec.ts?ref=70a50fc70d2b0495a421f28d9413e73698d24615",
            "patch": "@@ -0,0 +1,74 @@\n+import { execSync } from 'child_process';\n+import { test, expect } from '@playwright/test';\n+import translations from '../client/i18n/locales/english/translations.json';\n+\n+test.describe('When the user has not accepted the Academic Honesty Policy', () => {\n+  test.use({ storageState: 'playwright/.auth/development-user.json' });\n+\n+  test.beforeEach(() => {\n+    execSync('node ./tools/scripts/seed/seed-demo-user');\n+  });\n+\n+  test('they should be able to accept it', async ({ page }) => {\n+    await page.goto('/settings');\n+    await expect(\n+      page.getByRole('heading', {\n+        name: translations.settings.headings.honesty\n+      })\n+    ).toBeVisible();\n+    await expect(\n+      page.getByText(translations.settings.honesty.p1)\n+    ).toBeVisible();\n+    await expect(\n+      page.getByText(translations.settings.honesty.p2)\n+    ).toBeVisible();\n+    await expect(\n+      page.getByText(translations.settings.honesty.p3)\n+    ).toBeVisible();\n+    await expect(\n+      page.getByText(translations.settings.honesty.p4)\n+    ).toBeVisible();\n+    await expect(\n+      page.getByText(translations.settings.honesty.p5)\n+    ).toBeVisible();\n+    await expect(\n+      page.getByText(translations.settings.honesty.p6)\n+    ).toBeVisible();\n+    const agreeButton = page.getByRole('button', {\n+      name: translations.buttons['agree-honesty']\n+    });\n+    await agreeButton.click();\n+\n+    await expect(\n+      page.getByRole('button', {\n+        name: translations.buttons['accepted-honesty']\n+      })\n+    ).toBeVisible();\n+  });\n+\n+  test('Should show an error message', async ({ page }) => {\n+    await page.goto('/settings#cert-responsive-web-design');\n+    await page.getByTestId('btn-for-responsive-web-design').click();\n+\n+    await expect(page.getByTestId('flash-message')).toContainText(\n+      translations.flash['honest-first']\n+    );\n+\n+    const agreeButton = page.getByRole('button', {\n+      name: translations.buttons['agree-honesty']\n+    });\n+    await agreeButton.click();\n+\n+    await page.reload();\n+\n+    await page.getByTestId('btn-for-responsive-web-design').click();\n+\n+    await expect(page.getByTestId('flash-message')).toContainText(\n+      /It looks like you have not completed the necessary steps. Please complete the required projects to claim the Responsive Web Design Certification./\n+    );\n+  });\n+\n+  test.afterAll(() => {\n+    execSync('node ./tools/scripts/seed/seed-demo-user certified-user');\n+  });\n+});"
        },
        {
            "sha": "104dae861f778e821d7a1a63d02249d8d1cc6009",
            "filename": "e2e/settings.spec.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 42,
            "changes": 42,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/70a50fc70d2b0495a421f28d9413e73698d24615/e2e%2Fsettings.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/70a50fc70d2b0495a421f28d9413e73698d24615/e2e%2Fsettings.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fsettings.spec.ts?ref=70a50fc70d2b0495a421f28d9413e73698d24615",
            "patch": "@@ -237,48 +237,6 @@ test.describe('Settings', () => {\n     ).toBeVisible();\n   });\n \n-  test('Should validate Academy Honesty Settings', async ({ page }) => {\n-    await expect(\n-      page.getByRole('heading', {\n-        name: translations.settings.headings.honesty\n-      })\n-    ).toBeVisible();\n-    await expect(\n-      page.getByTestId(settingsTestIds.camperIdentity)\n-    ).toBeVisible();\n-    const saveButton = page.getByRole('button', {\n-      name: translations.settings.headings['personal-info']\n-    });\n-    await expect(saveButton).toBeVisible();\n-    await saveButton.press('Enter');\n-    await expect(\n-      page.getByText(translations.settings.honesty.p1)\n-    ).toBeVisible();\n-    await expect(\n-      page.getByText(translations.settings.honesty.p2)\n-    ).toBeVisible();\n-    await expect(\n-      page.getByText(translations.settings.honesty.p3)\n-    ).toBeVisible();\n-    await expect(\n-      page.getByText(translations.settings.honesty.p4)\n-    ).toBeVisible();\n-    await expect(\n-      page.getByText(translations.settings.honesty.p5)\n-    ).toBeVisible();\n-    await expect(\n-      page.getByText(translations.settings.honesty.p6)\n-    ).toBeVisible();\n-    await expect(\n-      page.getByText(\n-        translations.settings.honesty.p7.replace(\n-          settingsObject.supportEmailPlaceholder,\n-          settingsObject.supportEmail\n-        )\n-      )\n-    ).toBeVisible();\n-  });\n-\n   test('Should validate Certification Settings', async ({ page }) => {\n     await expect(\n       page.getByRole('heading', {"
        }
    ],
    "stats": {
        "total": 157,
        "additions": 75,
        "deletions": 82
    }
}