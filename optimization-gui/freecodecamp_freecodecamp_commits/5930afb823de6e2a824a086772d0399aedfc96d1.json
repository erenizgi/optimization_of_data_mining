{
    "author": "ojeytonwilliams",
    "message": "refactor: slightly simplify rendering of ToolPanel (#55601)",
    "sha": "5930afb823de6e2a824a086772d0399aedfc96d1",
    "files": [
        {
            "sha": "fb9b41b5faa9fdecd42d06b7a2276c2a961f438e",
            "filename": "client/src/templates/Challenges/classic/mobile-layout.tsx",
            "status": "modified",
            "additions": 4,
            "deletions": 13,
            "changes": 17,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/5930afb823de6e2a824a086772d0399aedfc96d1/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fmobile-layout.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/5930afb823de6e2a824a086772d0399aedfc96d1/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fmobile-layout.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fmobile-layout.tsx?ref=5930afb823de6e2a824a086772d0399aedfc96d1",
            "patch": "@@ -1,5 +1,5 @@\n import i18next from 'i18next';\n-import React, { Component } from 'react';\n+import React, { Component, type ReactNode } from 'react';\n import { faWindowRestore } from '@fortawesome/free-solid-svg-icons';\n import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n import { createSelector } from 'reselect';\n@@ -17,14 +17,12 @@ import {\n   showPreviewPaneSelector\n } from '../redux/selectors';\n import { TOOL_PANEL_HEIGHT } from '../../../../config/misc';\n-import ToolPanel from '../components/tool-panel';\n import PreviewPortal from '../components/preview-portal';\n import Notes from '../components/notes';\n import EditorTabs from './editor-tabs';\n \n interface MobileLayoutProps {\n   editor: JSX.Element | null;\n-  guideUrl: string;\n   hasEditableBoundaries: boolean;\n   hasPreview: boolean;\n   instructions: JSX.Element;\n@@ -34,13 +32,13 @@ interface MobileLayoutProps {\n   windowTitle: string;\n   showPreviewPortal: boolean;\n   showPreviewPane: boolean;\n+  toolPanel: ReactNode;\n   removePortalWindow: () => void;\n   setShowPreviewPortal: (arg: boolean) => void;\n   setShowPreviewPane: (arg: boolean) => void;\n   portalWindow: null | Window;\n   updateUsingKeyboardInTablist: (arg0: boolean) => void;\n   testOutput: JSX.Element;\n-  videoUrl: string;\n   usesMultifileEditor: boolean;\n }\n \n@@ -160,13 +158,12 @@ class MobileLayout extends Component<MobileLayoutProps, MobileLayoutState> {\n       onPreviewResize,\n       showPreviewPane,\n       showPreviewPortal,\n+      toolPanel,\n       removePortalWindow,\n       setShowPreviewPane,\n       setShowPreviewPortal,\n       portalWindow,\n       windowTitle,\n-      guideUrl,\n-      videoUrl,\n       usesMultifileEditor\n     } = this.props;\n \n@@ -309,13 +306,7 @@ class MobileLayout extends Component<MobileLayoutProps, MobileLayoutState> {\n               )}\n             </TabsContent>\n           )}\n-          {!hasEditableBoundaries && (\n-            <ToolPanel\n-              guideUrl={guideUrl}\n-              isMobile={true}\n-              videoUrl={videoUrl}\n-            />\n-          )}\n+          {!hasEditableBoundaries && toolPanel}\n           {hasPreview && this.state.currentTab !== 'preview' && (\n             <div className='portal-button-wrap'>\n               <button"
        },
        {
            "sha": "e84f004ee58a765c2566b0a2db67c902454bc695",
            "filename": "client/src/templates/Challenges/classic/show.tsx",
            "status": "modified",
            "additions": 10,
            "deletions": 9,
            "changes": 19,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/5930afb823de6e2a824a086772d0399aedfc96d1/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fshow.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/5930afb823de6e2a824a086772d0399aedfc96d1/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fshow.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fshow.tsx?ref=5930afb823de6e2a824a086772d0399aedfc96d1",
            "patch": "@@ -60,6 +60,7 @@ import { savedChallengesSelector } from '../../../redux/selectors';\n import { getGuideUrl } from '../utils';\n import { preloadPage } from '../../../../utils/gatsby/page-loading';\n import envData from '../../../../config/env.json';\n+import ToolPanel from '../components/tool-panel';\n import { XtermTerminal } from './xterm';\n import MultifileEditor from './multifile-editor';\n import DesktopLayout from './desktop-layout';\n@@ -227,6 +228,7 @@ function ShowClassic({\n   const isMobile = useMediaQuery({\n     query: `(max-width: ${MAX_MOBILE_WIDTH}px)`\n   });\n+  const guideUrl = getGuideUrl({ forumTopicId, title });\n \n   const blockNameTitle = `${t(\n     `intro:${superBlock}.blocks.${block}.title`\n@@ -369,9 +371,9 @@ function ShowClassic({\n   };\n \n   const renderInstructionsPanel = ({\n-    showToolPanel\n+    toolPanel\n   }: {\n-    showToolPanel: boolean;\n+    toolPanel: React.ReactNode;\n   }) => {\n     return (\n       <SidePanel\n@@ -392,11 +394,9 @@ function ShowClassic({\n             {title}\n           </ChallengeTitle>\n         }\n-        guideUrl={getGuideUrl({ forumTopicId, title })}\n         instructionsPanelRef={instructionsPanelRef}\n-        showToolPanel={showToolPanel}\n+        toolPanel={toolPanel}\n         superBlock={superBlock}\n-        videoUrl={videoUrl}\n       />\n     );\n   };\n@@ -445,11 +445,10 @@ function ShowClassic({\n               isMobileLayout: true,\n               isUsingKeyboardInTablist: usingKeyboardInTablist\n             })}\n-            guideUrl={getGuideUrl({ forumTopicId, title })}\n             hasEditableBoundaries={hasEditableBoundaries}\n             hasPreview={showPreview}\n             instructions={renderInstructionsPanel({\n-              showToolPanel: false\n+              toolPanel: null\n             })}\n             notes={notes}\n             onPreviewResize={onPreviewResize}\n@@ -465,9 +464,11 @@ function ShowClassic({\n             testOutput={\n               <Output defaultOutput={defaultOutput} output={output} />\n             }\n+            toolPanel={\n+              <ToolPanel guideUrl={guideUrl} isMobile videoUrl={videoUrl} />\n+            }\n             updateUsingKeyboardInTablist={updateUsingKeyboardInTablist}\n             usesMultifileEditor={usesMultifileEditor}\n-            videoUrl={videoUrl}\n           />\n         )}\n         {!isMobile && (\n@@ -481,7 +482,7 @@ function ShowClassic({\n             hasEditableBoundaries={hasEditableBoundaries}\n             hasPreview={showPreview}\n             instructions={renderInstructionsPanel({\n-              showToolPanel: true\n+              toolPanel: <ToolPanel guideUrl={guideUrl} videoUrl={videoUrl} />\n             })}\n             isFirstStep={isFirstStep}\n             layoutState={layout}"
        },
        {
            "sha": "d9b732050430d6f0be66d2423a4e33bc6cf7305f",
            "filename": "client/src/templates/Challenges/components/side-panel.tsx",
            "status": "modified",
            "additions": 5,
            "deletions": 10,
            "changes": 15,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/5930afb823de6e2a824a086772d0399aedfc96d1/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fside-panel.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/5930afb823de6e2a824a086772d0399aedfc96d1/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fside-panel.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fside-panel.tsx?ref=5930afb823de6e2a824a086772d0399aedfc96d1",
            "patch": "@@ -1,4 +1,4 @@\n-import React, { useEffect, ReactElement } from 'react';\n+import React, { useEffect, ReactElement, ReactNode } from 'react';\n import { connect } from 'react-redux';\n import { createSelector } from 'reselect';\n import { Test } from '../../../redux/prop-types';\n@@ -7,7 +7,6 @@ import { SuperBlocks } from '../../../../../shared/config/curriculum';\n import { initializeMathJax } from '../../../utils/math-jax';\n import { challengeTestsSelector } from '../redux/selectors';\n import TestSuite from './test-suite';\n-import ToolPanel from './tool-panel';\n \n import './side-panel.css';\n \n@@ -21,24 +20,20 @@ interface SidePanelProps {\n   block: string;\n   challengeDescription: ReactElement;\n   challengeTitle: ReactElement;\n-  guideUrl: string;\n   instructionsPanelRef: React.RefObject<HTMLDivElement>;\n-  showToolPanel: boolean;\n+  toolPanel: ReactNode;\n   superBlock: SuperBlocks;\n   tests: Test[];\n-  videoUrl: string;\n }\n \n export function SidePanel({\n   block,\n   challengeDescription,\n   challengeTitle,\n-  guideUrl,\n   instructionsPanelRef,\n-  showToolPanel = false,\n+  toolPanel,\n   superBlock,\n-  tests,\n-  videoUrl\n+  tests\n }: SidePanelProps): JSX.Element {\n   useEffect(() => {\n     const mathJaxChallenge =\n@@ -56,7 +51,7 @@ export function SidePanel({\n     >\n       {challengeTitle}\n       {challengeDescription}\n-      {showToolPanel && <ToolPanel guideUrl={guideUrl} videoUrl={videoUrl} />}\n+      {toolPanel}\n       <TestSuite tests={tests} />\n     </div>\n   );"
        }
    ],
    "stats": {
        "total": 51,
        "additions": 19,
        "deletions": 32
    }
}