{
    "author": "huyenltnguyen",
    "message": "feat(tools): add chapter and module names to external curricula data (#60483)",
    "sha": "331005f4c7205d3cc5668092f59b4d2ad720d63f",
    "files": [
        {
            "sha": "6c989039ae59572d918ec62ab393821ec9d388b7",
            "filename": "tools/scripts/build/build-external-curricula-data-v2.test.ts",
            "status": "modified",
            "additions": 22,
            "deletions": 3,
            "changes": 25,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/331005f4c7205d3cc5668092f59b4d2ad720d63f/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data-v2.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/331005f4c7205d3cc5668092f59b4d2ad720d63f/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data-v2.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data-v2.test.ts?ref=331005f4c7205d3cc5668092f59b4d2ad720d63f",
            "patch": "@@ -19,6 +19,7 @@ import {\n   type GeneratedCurriculumProps,\n   type GeneratedBlockBasedCurriculumProps,\n   type GeneratedChapterBasedCurriculumProps,\n+  type ChapterBasedCurriculumIntros,\n   orderedSuperBlockInfo\n } from './build-external-curricula-data-v2';\n \n@@ -176,6 +177,10 @@ ${result.error.message}`);\n         superBlock\n       ] as GeneratedChapterBasedCurriculumProps;\n \n+      const superBlockIntros = intros[\n+        superBlock\n+      ] as ChapterBasedCurriculumIntros[SuperBlocks];\n+\n       // Randomly pick a chapter.\n       const chapters = superBlockData.chapters;\n       const randomChapterIndex = Math.floor(Math.random() * chapters.length);\n@@ -190,15 +195,29 @@ ${result.error.message}`);\n       const blocks = randomModule.blocks;\n       const randomBlockIndex = Math.floor(Math.random() * blocks.length);\n \n-      expect(superBlockData.intro).toEqual(intros[superBlock].intro);\n+      // Check super block data\n+      expect(superBlockData.intro).toEqual(superBlockIntros.intro);\n+\n+      // Check chapter data\n+      expect(superBlockData.chapters[randomChapterIndex].name).toEqual(\n+        superBlockIntros.chapters[randomChapterIndex]\n+      );\n+\n+      // Check module data\n+      expect(\n+        superBlockData.chapters[randomChapterIndex].modules[randomModuleIndex]\n+          .name\n+      ).toEqual(superBlockIntros.modules[randomModuleIndex]);\n+\n+      // Check block data\n       expect(\n         superBlockData.chapters[randomChapterIndex].modules[randomModuleIndex]\n           .blocks[randomBlockIndex].intro\n-      ).toEqual(intros[superBlock].blocks[randomBlockIndex].intro);\n+      ).toEqual(superBlockIntros.blocks[randomBlockIndex].intro);\n       expect(\n         superBlockData.chapters[randomChapterIndex].modules[randomModuleIndex]\n           .blocks[randomBlockIndex].meta.name\n-      ).toEqual(intros[superBlock].blocks[randomBlockIndex].title);\n+      ).toEqual(superBlockIntros.blocks[randomBlockIndex].title);\n     });\n   });\n "
        },
        {
            "sha": "82b9b47cf83161d379328a4fcba93e4f67313bbe",
            "filename": "tools/scripts/build/build-external-curricula-data-v2.ts",
            "status": "modified",
            "additions": 24,
            "deletions": 3,
            "changes": 27,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/331005f4c7205d3cc5668092f59b4d2ad720d63f/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data-v2.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/331005f4c7205d3cc5668092f59b4d2ad720d63f/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data-v2.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data-v2.ts?ref=331005f4c7205d3cc5668092f59b4d2ad720d63f",
            "patch": "@@ -9,10 +9,24 @@ import {\n import fullStackSuperBlockStructure from '../../../curriculum/superblock-structure/full-stack.json';\n import type { Chapter } from '../../../shared/config/chapters';\n \n-export type CurriculumIntros = {\n+export type CurriculumIntros =\n+  | BlockBasedCurriculumIntros\n+  | ChapterBasedCurriculumIntros;\n+\n+type BlockBasedCurriculumIntros = {\n+  [keyValue in SuperBlocks]: {\n+    title: string;\n+    intro: string[];\n+    blocks: Record<string, { title: string; intro: string[] }>;\n+  };\n+};\n+\n+export type ChapterBasedCurriculumIntros = {\n   [keyValue in SuperBlocks]: {\n     title: string;\n     intro: string[];\n+    chapters: Record<string, string>;\n+    modules: Record<string, string>;\n     blocks: Record<string, { title: string; intro: string[] }>;\n   };\n };\n@@ -51,13 +65,15 @@ export interface GeneratedChapterBasedCurriculumProps {\n \n interface GeneratedChapter {\n   dashedName: string;\n+  name: string;\n   comingSoon?: boolean;\n   modules: GeneratedModule[];\n   chapterType?: string;\n }\n \n interface GeneratedModule {\n   dashedName: string;\n+  name: string;\n   comingSoon?: boolean;\n   blocks: GeneratedBlock[];\n   moduleType?: string;\n@@ -260,25 +276,30 @@ export function buildExtCurriculumDataV2(\n     const chapters: Chapter[] = fullStackSuperBlockStructure.chapters;\n     const blocksWithData = curriculum[superBlockKey].blocks;\n \n+    const superBlockIntros = intros[\n+      superBlockKey\n+    ] as ChapterBasedCurriculumIntros[SuperBlocks];\n+\n     // Skip upcoming chapter/module as the metadata of their blocks\n     // is not included in the `curriculum` object.\n     const allChapters = chapters.map(chapter => ({\n       dashedName: chapter.dashedName,\n+      name: superBlockIntros.chapters[chapter.dashedName],\n       comingSoon: chapter.comingSoon,\n       chapterType: chapter.chapterType,\n       modules: chapter.comingSoon\n         ? []\n         : chapter.modules.map(module => ({\n             dashedName: module.dashedName,\n+            name: superBlockIntros.modules[module.dashedName],\n             comingSoon: module.comingSoon,\n             moduleType: module.moduleType,\n             blocks: module.comingSoon\n               ? []\n               : module.blocks.map(block => {\n                   const blockData = blocksWithData[block.dashedName];\n-\n                   return {\n-                    intro: intros[superBlockKey].blocks[block.dashedName].intro,\n+                    intro: superBlockIntros.blocks[block.dashedName].intro,\n                     meta: blockData.meta\n                   };\n                 })"
        },
        {
            "sha": "0a024b08018074aa8258a409fae556e350af32a1",
            "filename": "tools/scripts/build/external-data-schema-v2.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/331005f4c7205d3cc5668092f59b4d2ad720d63f/tools%2Fscripts%2Fbuild%2Fexternal-data-schema-v2.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/331005f4c7205d3cc5668092f59b4d2ad720d63f/tools%2Fscripts%2Fbuild%2Fexternal-data-schema-v2.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fscripts%2Fbuild%2Fexternal-data-schema-v2.js?ref=331005f4c7205d3cc5668092f59b4d2ad720d63f",
            "patch": "@@ -81,12 +81,14 @@ const chapterBasedCurriculumSchema = Joi.object().pattern(\n     chapters: Joi.array().items(\n       Joi.object().keys({\n         dashedName: Joi.string().regex(slugRE).required(),\n+        name: Joi.string().required(),\n         comingSoon: Joi.boolean().optional(),\n         chapterType: Joi.valid('exam').optional(),\n         modules: Joi.array()\n           .items(\n             Joi.object().keys({\n               moduleType: Joi.valid('review', 'exam').optional(),\n+              name: Joi.string().required(),\n               comingSoon: Joi.boolean().optional(),\n               dashedName: Joi.string().regex(slugRE).required(),\n               blocks: Joi.array().items(blockSchema)"
        }
    ],
    "stats": {
        "total": 54,
        "additions": 48,
        "deletions": 6
    }
}