{
    "author": "moT01",
    "message": "chore(curriculum): remove BUILD_WITH_SUBMODULE env variable (#55654)",
    "sha": "99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff",
    "files": [
        {
            "sha": "c2af27c051335360ae823f0cde523531feca5af6",
            "filename": ".github/workflows/curriculum-i18n-submodule.yml",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/.github%2Fworkflows%2Fcurriculum-i18n-submodule.yml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/.github%2Fworkflows%2Fcurriculum-i18n-submodule.yml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/.github%2Fworkflows%2Fcurriculum-i18n-submodule.yml?ref=99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff",
            "patch": "@@ -48,8 +48,6 @@ jobs:\n       - name: Set Environment variables\n         run: |\n           cp sample.env .env\n-          echo 'BUILD_WITH_SUBMODULE=true' >> .env\n-        # TODO: Remove this ^ after migration is complete\n \n       - name: Install node_modules\n         run: pnpm install"
        },
        {
            "sha": "352b8ea953fa1efcec34cda9544241a77960843c",
            "filename": ".github/workflows/e2e-playwright.yml",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/.github%2Fworkflows%2Fe2e-playwright.yml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/.github%2Fworkflows%2Fe2e-playwright.yml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/.github%2Fworkflows%2Fe2e-playwright.yml?ref=99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff",
            "patch": "@@ -48,8 +48,6 @@ jobs:\n       - name: Set freeCodeCamp Environment Variables\n         run: |\n           cp sample.env .env\n-          echo 'BUILD_WITH_SUBMODULE=true' >> .env\n-        # TODO: Remove this ^ after migration is complete\n \n       - name: Install and Build\n         run: |\n@@ -132,8 +130,6 @@ jobs:\n       - name: Set freeCodeCamp Environment Variables\n         run: |\n           cp sample.env .env\n-          echo 'BUILD_WITH_SUBMODULE=true' >> .env\n-        # TODO: Remove this ^ after migration is complete\n \n       - name: Install and Build\n         run: |"
        },
        {
            "sha": "4b36c447f9620c37dc827001f88278679e5bbba5",
            "filename": ".github/workflows/e2e-third-party.yml",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/.github%2Fworkflows%2Fe2e-third-party.yml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/.github%2Fworkflows%2Fe2e-third-party.yml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/.github%2Fworkflows%2Fe2e-third-party.yml?ref=99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff",
            "patch": "@@ -32,6 +32,8 @@ jobs:\n     steps:\n       - name: Checkout Source Files\n         uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1\n+        with:\n+          submodules: 'recursive'\n \n       - name: Checkout client-config\n         uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1"
        },
        {
            "sha": "73bc026ea52efa90e1b71c9752812939b2908f67",
            "filename": ".github/workflows/e2e-with-new-api.yml",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/.github%2Fworkflows%2Fe2e-with-new-api.yml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/.github%2Fworkflows%2Fe2e-with-new-api.yml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/.github%2Fworkflows%2Fe2e-with-new-api.yml?ref=99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff",
            "patch": "@@ -24,6 +24,8 @@ jobs:\n     steps:\n       - name: Checkout Source Files\n         uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1\n+        with:\n+          submodules: 'recursive'\n \n       - name: Checkout client-config\n         uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1\n@@ -79,6 +81,8 @@ jobs:\n     steps:\n       - name: Checkout Source Files\n         uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1\n+        with:\n+          submodules: 'recursive'\n \n       - name: Create Image\n         run: |\n@@ -96,6 +100,8 @@ jobs:\n     steps:\n       - name: Checkout Source Files\n         uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1\n+        with:\n+          submodules: 'recursive'\n \n       - name: Create Image\n         run: |"
        },
        {
            "sha": "38e5c77d38f72a876c74f8f4efc4c547f8cd927d",
            "filename": ".github/workflows/i18n-validate-builds.yml",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/.github%2Fworkflows%2Fi18n-validate-builds.yml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/.github%2Fworkflows%2Fi18n-validate-builds.yml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/.github%2Fworkflows%2Fi18n-validate-builds.yml?ref=99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff",
            "patch": "@@ -32,8 +32,6 @@ jobs:\n       - name: Set freeCodeCamp Environment Variables\n         run: |\n           cp sample.env .env\n-          echo 'BUILD_WITH_SUBMODULE=true' >> .env\n-        # TODO: Remove this ^ after migration is complete\n \n       - name: Install Dependencies\n         run: pnpm install"
        },
        {
            "sha": "e44fc7a638b6aaecad0e7ff22dc5afd835fee1f5",
            "filename": ".github/workflows/i18n-validate-prs.yml",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/.github%2Fworkflows%2Fi18n-validate-prs.yml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/.github%2Fworkflows%2Fi18n-validate-prs.yml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/.github%2Fworkflows%2Fi18n-validate-prs.yml?ref=99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff",
            "patch": "@@ -34,8 +34,6 @@ jobs:\n       - name: Set freeCodeCamp Environment Variables\n         run: |\n           cp sample.env .env\n-          echo 'BUILD_WITH_SUBMODULE=true' >> .env\n-        # TODO: Remove this ^ after migration is complete\n \n       - name: Install Dependencies\n         run: pnpm install"
        },
        {
            "sha": "50be76e7dff9dd331882e43681c4bcc3b17dc43f",
            "filename": ".github/workflows/node.js-tests.yml",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/.github%2Fworkflows%2Fnode.js-tests.yml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/.github%2Fworkflows%2Fnode.js-tests.yml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/.github%2Fworkflows%2Fnode.js-tests.yml?ref=99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff",
            "patch": "@@ -56,7 +56,6 @@ jobs:\n         run: |\n           cp sample.env .env\n           cat .env\n-        # TODO: Remove this ^ after migration is complete\n \n       - name: Install node_modules\n         run: pnpm install\n@@ -104,8 +103,6 @@ jobs:\n       - name: Set freeCodeCamp Environment Variables\n         run: |\n           cp sample.env .env\n-          echo 'BUILD_WITH_SUBMODULE=true' >> .env\n-        # TODO: Remove this ^ after migration is complete\n \n       - name: Install and Build\n         run: |\n@@ -142,9 +139,7 @@ jobs:\n       - name: Set Environment variables\n         run: |\n           cp sample.env .env\n-          echo 'BUILD_WITH_SUBMODULE=true' >> .env\n           cat .env\n-        # TODO: Remove this ^ after migration is complete\n \n       - name: Start MongoDB\n         uses: supercharge/mongodb-github-action@b0a1493307c4e9b82ed61f3858d606c5ff190c64 # v1.10.0\n@@ -196,9 +191,7 @@ jobs:\n           cp sample.env .env\n           echo 'SHOW_UPCOMING_CHANGES=true' >> .env\n           echo 'SHOW_NEW_CURRICULUM=true' >> .env\n-          echo 'BUILD_WITH_SUBMODULE=true' >> .env\n           cat .env\n-        # TODO: Remove this ^ after migration is complete\n \n       - name: Start MongoDB\n         uses: supercharge/mongodb-github-action@b0a1493307c4e9b82ed61f3858d606c5ff190c64 # v1.10.0\n@@ -249,9 +242,7 @@ jobs:\n       - name: Set Environment variables\n         run: |\n           cp sample.env .env\n-          echo 'BUILD_WITH_SUBMODULE=true' >> .env\n           cat .env\n-        # TODO: Remove this ^ after migration is complete\n \n       - name: Start MongoDB\n         uses: supercharge/mongodb-github-action@b0a1493307c4e9b82ed61f3858d606c5ff190c64 # v1.10.0"
        },
        {
            "sha": "01cbdde82750e1405795407c6dadc939c3b05777",
            "filename": ".github/workflows/temporary-container-checks.yml",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/.github%2Fworkflows%2Ftemporary-container-checks.yml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/.github%2Fworkflows%2Ftemporary-container-checks.yml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/.github%2Fworkflows%2Ftemporary-container-checks.yml?ref=99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff",
            "patch": "@@ -27,6 +27,8 @@ jobs:\n     steps:\n       - name: Checkout Source Files\n         uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1\n+        with:\n+          submodules: 'recursive'\n \n       - name: Create Image\n         run: |\n@@ -61,6 +63,8 @@ jobs:\n     steps:\n       - name: Checkout Source Files\n         uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1\n+        with:\n+          submodules: 'recursive'\n \n       - name: Create Image\n         run: |\n@@ -78,6 +82,8 @@ jobs:\n     steps:\n       - name: Checkout Source Files\n         uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1\n+        with:\n+          submodules: 'recursive'\n \n       - name: Create Image\n         run: |"
        },
        {
            "sha": "8cbd6904f5a39228ae7a71d6efbc4b9dc576ff97",
            "filename": "client/utils/build-challenges.js",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/client%2Futils%2Fbuild-challenges.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/client%2Futils%2Fbuild-challenges.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Futils%2Fbuild-challenges.js?ref=99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff",
            "patch": "@@ -8,7 +8,7 @@ const {\n   generateChallengeCreator,\n   ENGLISH_CHALLENGES_DIR,\n   META_DIR,\n-  CHALLENGES_DIR,\n+  I18N_CHALLENGES_DIR,\n   getChallengesDirForLang\n } = require('../../curriculum/get-challenges');\n \n@@ -30,7 +30,11 @@ exports.replaceChallengeNode = () => {\n       'english',\n       filePath\n     );\n-    const i18nPath = path.resolve(CHALLENGES_DIR, curriculumLocale, filePath);\n+    const i18nPath = path.resolve(\n+      I18N_CHALLENGES_DIR,\n+      curriculumLocale,\n+      filePath\n+    );\n     // TODO: reimplement hot-reloading of certifications\n     const createChallenge = generateChallengeCreator(\n       curriculumLocale,"
        },
        {
            "sha": "22fc608a84a256633b489c3460857d8e888b7108",
            "filename": "curriculum/get-challenges.js",
            "status": "modified",
            "additions": 13,
            "deletions": 15,
            "changes": 28,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/curriculum%2Fget-challenges.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/curriculum%2Fget-challenges.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fget-challenges.js?ref=99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff",
            "patch": "@@ -25,31 +25,29 @@ const ENGLISH_CHALLENGES_DIR = path.resolve(__dirname, 'challenges');\n const ENGLISH_DICTIONARIES_DIR = path.resolve(__dirname, 'dictionaries');\n const META_DIR = path.resolve(ENGLISH_CHALLENGES_DIR, '_meta');\n \n-const CURRICULUM_DIR = path.resolve(\n+// This is to allow English to build without having to download the i18n files.\n+// It fails when trying to resolve the i18n-curriculum path if they don't exist.\n+const I18N_CURRICULUM_DIR = path.resolve(\n   __dirname,\n-  process.env.BUILD_WITH_SUBMODULE === 'true'\n-    ? 'i18n-curriculum/curriculum'\n-    : '.'\n+  process.env.CURRICULUM_LOCALE === 'english'\n+    ? '.'\n+    : 'i18n-curriculum/curriculum'\n );\n \n-const CHALLENGES_DIR = path.resolve(CURRICULUM_DIR, 'challenges');\n-const DICTIONARIES_DIR = path.resolve(CURRICULUM_DIR, 'dictionaries');\n+const I18N_CHALLENGES_DIR = path.resolve(I18N_CURRICULUM_DIR, 'challenges');\n+const I18N_DICTIONARIES_DIR = path.resolve(I18N_CURRICULUM_DIR, 'dictionaries');\n \n exports.ENGLISH_CHALLENGES_DIR = ENGLISH_CHALLENGES_DIR;\n exports.META_DIR = META_DIR;\n-exports.CHALLENGES_DIR = CHALLENGES_DIR;\n+exports.I18N_CHALLENGES_DIR = I18N_CHALLENGES_DIR;\n \n const COMMENT_TRANSLATIONS = createCommentMap(\n-  DICTIONARIES_DIR,\n+  I18N_DICTIONARIES_DIR,\n   ENGLISH_DICTIONARIES_DIR\n );\n \n function createCommentMap(dictionariesDir, englishDictionariesDir) {\n-  // get all the languages for which there are dictionaries. Note: the english\n-  // entries are created separately, so we remove it from languages.\n-  const languages = fs\n-    .readdirSync(dictionariesDir)\n-    .filter(lang => lang !== 'english'); // TODO: Remove the filter after migrating to i18n-curriculum\n+  const languages = fs.readdirSync(dictionariesDir);\n \n   // get all their dictionaries\n   const dictionaries = languages.reduce(\n@@ -130,7 +128,7 @@ function getChallengesDirForLang(lang) {\n   if (lang === 'english') {\n     return path.resolve(ENGLISH_CHALLENGES_DIR, `${lang}`);\n   } else {\n-    return path.resolve(CHALLENGES_DIR, `${lang}`);\n+    return path.resolve(I18N_CHALLENGES_DIR, `${lang}`);\n   }\n }\n \n@@ -258,7 +256,7 @@ async function buildChallenges({ path: filePath }, curriculum, lang) {\n     'english',\n     filePath\n   );\n-  const i18nPath = path.resolve(__dirname, CHALLENGES_DIR, lang, filePath);\n+  const i18nPath = path.resolve(__dirname, I18N_CHALLENGES_DIR, lang, filePath);\n   const createChallenge = generateChallengeCreator(lang, englishPath, i18nPath);\n \n   await assertHasEnglishSource(filePath, lang, englishPath);"
        },
        {
            "sha": "32e2e5b301d8e862798a37c43a9cb0169c8ab99b",
            "filename": "sample.env",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/sample.env",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff/sample.env",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/sample.env?ref=99023bfcdc52d78ef6a2bbe6de7254cc3bda3cff",
            "patch": "@@ -51,9 +51,6 @@ FREECODECAMP_NODE_ENV=development\n CLIENT_LOCALE=english\n CURRICULUM_LOCALE=english\n \n-# Build using submodule - remove this once the workflow has been entirely moved to use the submodule\n-BUILD_WITH_SUBMODULE=false\n-\n # Show or hide WIP in progress challenges\n SHOW_UPCOMING_CHANGES=false\n SHOW_NEW_CURRICULUM=false"
        }
    ],
    "stats": {
        "total": 72,
        "additions": 33,
        "deletions": 39
    }
}