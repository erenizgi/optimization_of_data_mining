{
    "author": "ShaunSHamilton",
    "message": "fix(api): only treat undefined as unset (#58120)",
    "sha": "7760309f9334e97e148fe0e36a96fe740f331c2b",
    "files": [
        {
            "sha": "5185efbf964645a13f59a18c8d73c3bf606a3e05",
            "filename": "api/src/app.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/7760309f9334e97e148fe0e36a96fe740f331c2b/api%2Fsrc%2Fapp.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/7760309f9334e97e148fe0e36a96fe740f331c2b/api%2Fsrc%2Fapp.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fapp.ts?ref=7760309f9334e97e148fe0e36a96fe740f331c2b",
            "patch": "@@ -119,7 +119,7 @@ export const build = async (\n   void fastify.register(mailer, { provider });\n \n   // Swagger plugin\n-  if (FCC_ENABLE_SWAGGER_UI || fastify.gb.isOn('swagger-ui')) {\n+  if (FCC_ENABLE_SWAGGER_UI ?? fastify.gb.isOn('swagger-ui')) {\n     void fastify.register(fastifySwagger, {\n       openapi: {\n         openapi: '3.1.0',\n@@ -147,7 +147,7 @@ export const build = async (\n     fastify.log.info(`Swagger UI available at ${API_LOCATION}/documentation`);\n   }\n \n-  if (FCC_ENABLE_SHADOW_CAPTURE || fastify.gb.isOn('shadow-capture')) {\n+  if (FCC_ENABLE_SHADOW_CAPTURE ?? fastify.gb.isOn('shadow-capture')) {\n     void fastify.register(shadowCapture);\n   }\n \n@@ -204,7 +204,7 @@ export const build = async (\n     }\n   });\n \n-  if (FCC_ENABLE_EXAM_ENVIRONMENT || fastify.gb.isOn('exam-environment')) {\n+  if (FCC_ENABLE_EXAM_ENVIRONMENT ?? fastify.gb.isOn('exam-environment')) {\n     void fastify.register(function (fastify, _opts, done) {\n       fastify.addHook('onRequest', fastify.authorizeExamEnvironmentToken);\n \n@@ -214,7 +214,7 @@ export const build = async (\n     void fastify.register(examEnvironmentOpenRoutes);\n   }\n \n-  if (FCC_ENABLE_SENTRY_ROUTES || fastify.gb.isOn('sentry-routes')) {\n+  if (FCC_ENABLE_SENTRY_ROUTES ?? fastify.gb.isOn('sentry-routes')) {\n     void fastify.register(publicRoutes.sentryRoutes);\n   }\n "
        },
        {
            "sha": "2c77a646725e887fa12652c18b1e3f4a3e8f6228",
            "filename": "api/src/utils/env.ts",
            "status": "modified",
            "additions": 20,
            "deletions": 8,
            "changes": 28,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/7760309f9334e97e148fe0e36a96fe740f331c2b/api%2Fsrc%2Futils%2Fenv.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/7760309f9334e97e148fe0e36a96fe740f331c2b/api%2Fsrc%2Futils%2Fenv.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Futils%2Fenv.ts?ref=7760309f9334e97e148fe0e36a96fe740f331c2b",
            "patch": "@@ -159,17 +159,21 @@ export const PORT = process.env.PORT || '3000';\n // container.\n export const HOST = process.env.HOST || '0.0.0.0';\n export const API_LOCATION = process.env.API_LOCATION;\n-export const FCC_ENABLE_SWAGGER_UI =\n-  process.env.FCC_ENABLE_SWAGGER_UI === 'true';\n+export const FCC_ENABLE_SWAGGER_UI = undefinedOrBool(\n+  process.env.FCC_ENABLE_SWAGGER_UI\n+);\n export const FCC_ENABLE_DEV_LOGIN_MODE =\n   process.env.FCC_ENABLE_DEV_LOGIN_MODE === 'true';\n export const FCC_API_LOG_LEVEL = _FCC_API_LOG_LEVEL;\n-export const FCC_ENABLE_SHADOW_CAPTURE =\n-  process.env.FCC_ENABLE_SHADOW_CAPTURE === 'true';\n-export const FCC_ENABLE_EXAM_ENVIRONMENT =\n-  process.env.FCC_ENABLE_EXAM_ENVIRONMENT === 'true';\n-export const FCC_ENABLE_SENTRY_ROUTES =\n-  process.env.FCC_ENABLE_SENTRY_ROUTES === 'true';\n+export const FCC_ENABLE_SHADOW_CAPTURE = undefinedOrBool(\n+  process.env.FCC_ENABLE_SHADOW_CAPTURE\n+);\n+export const FCC_ENABLE_EXAM_ENVIRONMENT = undefinedOrBool(\n+  process.env.FCC_ENABLE_EXAM_ENVIRONMENT\n+);\n+export const FCC_ENABLE_SENTRY_ROUTES = undefinedOrBool(\n+  process.env.FCC_ENABLE_SENTRY_ROUTES\n+);\n export const FREECODECAMP_NODE_ENV = _FREECODECAMP_NODE_ENV;\n export const SENTRY_DSN =\n   process.env.SENTRY_DSN === 'dsn_from_sentry_dashboard'\n@@ -192,3 +196,11 @@ export const GROWTHBOOK_FASTIFY_API_HOST =\n   process.env.GROWTHBOOK_FASTIFY_API_HOST;\n export const GROWTHBOOK_FASTIFY_CLIENT_KEY =\n   process.env.GROWTHBOOK_FASTIFY_CLIENT_KEY;\n+\n+function undefinedOrBool(val: string | undefined): undefined | boolean {\n+  if (!val) {\n+    return undefined;\n+  }\n+\n+  return val === 'true';\n+}"
        }
    ],
    "stats": {
        "total": 36,
        "additions": 24,
        "deletions": 12
    }
}