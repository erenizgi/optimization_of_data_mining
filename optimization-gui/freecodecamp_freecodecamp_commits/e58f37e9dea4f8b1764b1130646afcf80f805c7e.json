{
    "author": "huyenltnguyen",
    "message": "test(e2e): refactor search.spec.ts (#55109)",
    "sha": "e58f37e9dea4f8b1764b1130646afcf80f805c7e",
    "files": [
        {
            "sha": "24ba27d0e764584fbe0d746f4c5a82d8edf5ee00",
            "filename": "e2e/search-bar-optimized.spec.ts",
            "status": "added",
            "additions": 93,
            "deletions": 0,
            "changes": 93,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/e58f37e9dea4f8b1764b1130646afcf80f805c7e/e2e%2Fsearch-bar-optimized.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/e58f37e9dea4f8b1764b1130646afcf80f805c7e/e2e%2Fsearch-bar-optimized.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fsearch-bar-optimized.spec.ts?ref=e58f37e9dea4f8b1764b1130646afcf80f805c7e",
            "patch": "@@ -0,0 +1,93 @@\n+import { test, expect, type Page } from '@playwright/test';\n+import translations from '../client/i18n/locales/english/translations.json';\n+\n+const getSearchInput = async ({\n+  page,\n+  isMobile\n+}: {\n+  page: Page;\n+  isMobile: boolean;\n+}) => {\n+  if (isMobile) {\n+    const menuButton = page.getByRole('button', {\n+      name: translations.buttons.menu\n+    });\n+    await expect(menuButton).toBeVisible();\n+    await menuButton.click();\n+  }\n+\n+  return page.getByLabel('Search');\n+};\n+\n+test.describe('Search bar optimized', () => {\n+  test.beforeEach(async ({ page }) => {\n+    await page.goto('/');\n+  });\n+\n+  test('should display correct placeholder', async ({ page, isMobile }) => {\n+    const searchInput = await getSearchInput({ page, isMobile });\n+\n+    await expect(searchInput).toBeVisible();\n+    await expect(searchInput).toHaveAttribute(\n+      'placeholder',\n+      translations.search.placeholder\n+    );\n+  });\n+\n+  test('should return the search results when the user presses Enter', async ({\n+    context,\n+    page,\n+    isMobile\n+  }) => {\n+    const searchInput = await getSearchInput({ page, isMobile });\n+    await expect(searchInput).toBeVisible();\n+\n+    await searchInput.fill('test');\n+    await page.keyboard.press('Enter');\n+\n+    // Wait for the new page to load.\n+    const newPage = await context.waitForEvent('page');\n+    await newPage.waitForLoadState();\n+\n+    expect(newPage.url()).toBe(\n+      'https://www.freecodecamp.org/news/search/?query=test'\n+    );\n+  });\n+\n+  test('should return the search results when the user clicks the search button', async ({\n+    context,\n+    page,\n+    isMobile\n+  }) => {\n+    const searchInput = await getSearchInput({ page, isMobile });\n+    await expect(searchInput).toBeVisible();\n+\n+    await searchInput.fill('test');\n+    await page\n+      .getByRole('button', { name: translations.icons.magnifier })\n+      .click();\n+\n+    // Wait for the new page to load.\n+    const newPage = await context.waitForEvent('page');\n+    await newPage.waitForLoadState();\n+\n+    expect(newPage.url()).toBe(\n+      'https://www.freecodecamp.org/news/search/?query=test'\n+    );\n+  });\n+\n+  test('should clear the search input when the user clicks the clear button', async ({\n+    page,\n+    isMobile\n+  }) => {\n+    const searchInput = await getSearchInput({ page, isMobile });\n+    await expect(searchInput).toBeVisible();\n+\n+    await searchInput.fill('test');\n+    await page\n+      .getByRole('button', { name: translations.icons['input-reset'] })\n+      .click();\n+\n+    await expect(searchInput).toHaveValue('');\n+  });\n+});"
        },
        {
            "sha": "19b5a317fe0693c0d1a5522debd84a99c2590afd",
            "filename": "e2e/search.spec.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 152,
            "changes": 152,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/d215a48b4c699fea13a9b42871242a01d7de5618/e2e%2Fsearch.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/d215a48b4c699fea13a9b42871242a01d7de5618/e2e%2Fsearch.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fsearch.spec.ts?ref=d215a48b4c699fea13a9b42871242a01d7de5618",
            "patch": "@@ -1,152 +0,0 @@\n-import { test, expect } from '@playwright/test';\n-import translations from '../client/i18n/locales/english/translations.json';\n-\n-test.describe('Search', () => {\n-  test.beforeEach(async ({ page }) => {\n-    await page.goto('/');\n-  });\n-\n-  test('should display correct placeholder', async ({ page, isMobile }) => {\n-    if (isMobile) {\n-      const menuButton = page.getByRole('button', {\n-        name: translations.buttons.menu\n-      });\n-      await expect(menuButton).toBeVisible();\n-      await menuButton.click();\n-\n-      const searchInput = page.getByLabel(translations.search.label);\n-\n-      await expect(searchInput).toBeVisible();\n-      await expect(searchInput).toHaveAttribute(\n-        'placeholder',\n-        'Search 9,000+ tutorials'\n-      );\n-    } else {\n-      const searchInput = page.getByLabel(translations.search.label);\n-\n-      await expect(searchInput).toBeVisible();\n-      await expect(searchInput).toHaveAttribute(\n-        'placeholder',\n-        'Search 10,700+ tutorials'\n-      );\n-    }\n-  });\n-\n-  test('should return the search results when the user presses Enter', async ({\n-    context,\n-    page,\n-    isMobile\n-  }) => {\n-    if (isMobile) {\n-      const menuButton = page.getByRole('button', {\n-        name: translations.buttons.menu\n-      });\n-      await menuButton.click();\n-\n-      const searchInput = page.getByLabel(translations.search.label);\n-      await expect(searchInput).toBeVisible();\n-\n-      await searchInput.fill('test');\n-      await page.keyboard.press('Enter');\n-\n-      // Wait for the new page to load.\n-      const newPage = await context.waitForEvent('page');\n-      await newPage.waitForLoadState();\n-\n-      expect(newPage.url()).toBe(\n-        'https://www.freecodecamp.org/news/search/?query=test'\n-      );\n-    } else {\n-      const searchInput = page.getByLabel(translations.search.label);\n-      await expect(searchInput).toBeVisible();\n-\n-      await searchInput.fill('test');\n-      await page.keyboard.press('Enter');\n-\n-      // Wait for the new page to load.\n-      const newPage = await context.waitForEvent('page');\n-      await newPage.waitForLoadState();\n-\n-      expect(newPage.url()).toBe(\n-        'https://www.freecodecamp.org/news/search/?query=test'\n-      );\n-    }\n-  });\n-\n-  test('should return the search results when the user clicks the search button', async ({\n-    context,\n-    page,\n-    isMobile\n-  }) => {\n-    if (isMobile) {\n-      const menuButton = page.getByRole('button', {\n-        name: translations.buttons.menu\n-      });\n-      await menuButton.click();\n-\n-      const searchInput = page.getByLabel(translations.search.label);\n-      await expect(searchInput).toBeVisible();\n-\n-      await searchInput.fill('test');\n-      await page\n-        .getByRole('button', { name: translations.icons.magnifier })\n-        .click();\n-\n-      // Wait for the new page to load.\n-      const newPage = await context.waitForEvent('page');\n-      await newPage.waitForLoadState();\n-\n-      expect(newPage.url()).toBe(\n-        'https://www.freecodecamp.org/news/search/?query=test'\n-      );\n-    } else {\n-      const searchInput = page.getByLabel(translations.search.label);\n-      await expect(searchInput).toBeVisible();\n-\n-      await searchInput.fill('test');\n-      await page\n-        .getByRole('button', { name: translations.icons.magnifier })\n-        .click();\n-\n-      // Wait for the new page to load.\n-      const newPage = await context.waitForEvent('page');\n-      await newPage.waitForLoadState();\n-\n-      expect(newPage.url()).toBe(\n-        'https://www.freecodecamp.org/news/search/?query=test'\n-      );\n-    }\n-  });\n-\n-  test('should clear the search input when the user clicks the clear button', async ({\n-    page,\n-    isMobile\n-  }) => {\n-    if (isMobile) {\n-      const menuButton = page.getByRole('button', {\n-        name: translations.buttons.menu\n-      });\n-      await menuButton.click();\n-\n-      const searchInput = page.getByLabel(translations.search.label);\n-      await expect(searchInput).toBeVisible();\n-\n-      await searchInput.fill('test');\n-      await page\n-        .getByRole('button', { name: translations.icons['input-reset'] })\n-        .click();\n-\n-      await expect(searchInput).toHaveValue('');\n-    } else {\n-      const searchInput = page.getByLabel(translations.search.label);\n-      await expect(searchInput).toBeVisible();\n-\n-      await searchInput.fill('test');\n-      await page\n-        .getByRole('button', { name: translations.icons['input-reset'] })\n-        .click();\n-\n-      await expect(searchInput).toHaveValue('');\n-    }\n-  });\n-});"
        }
    ],
    "stats": {
        "total": 245,
        "additions": 93,
        "deletions": 152
    }
}