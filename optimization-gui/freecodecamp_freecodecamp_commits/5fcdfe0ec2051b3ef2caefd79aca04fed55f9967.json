{
    "author": "ojeytonwilliams",
    "message": "fix(api): control host with env var (#55439)",
    "sha": "5fcdfe0ec2051b3ef2caefd79aca04fed55f9967",
    "files": [
        {
            "sha": "a999115bd53bbe45ee7d497ed85a8c5fb61304b2",
            "filename": "api/src/server.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/5fcdfe0ec2051b3ef2caefd79aca04fed55f9967/api%2Fsrc%2Fserver.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/5fcdfe0ec2051b3ef2caefd79aca04fed55f9967/api%2Fsrc%2Fserver.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fserver.ts?ref=5fcdfe0ec2051b3ef2caefd79aca04fed55f9967",
            "patch": "@@ -4,7 +4,7 @@\n // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n /// <reference path=\"./reset.d.ts\" />\n import { build } from './app';\n-import { FREECODECAMP_NODE_ENV, PORT } from './utils/env';\n+import { FREECODECAMP_NODE_ENV, HOST, PORT } from './utils/env';\n \n const envToLogger = {\n   development: {\n@@ -27,7 +27,7 @@ const start = async () => {\n   try {\n     const port = Number(PORT);\n     fastify.log.info(`Starting server on port ${port}`);\n-    await fastify.listen({ port });\n+    await fastify.listen({ port, host: HOST });\n   } catch (err) {\n     fastify.log.error(err);\n     process.exit(1);"
        },
        {
            "sha": "7b218193c375874b7ca50fc48b060372c97aeeb4",
            "filename": "api/src/utils/env.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/5fcdfe0ec2051b3ef2caefd79aca04fed55f9967/api%2Fsrc%2Futils%2Fenv.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/5fcdfe0ec2051b3ef2caefd79aca04fed55f9967/api%2Fsrc%2Futils%2Fenv.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Futils%2Fenv.ts?ref=5fcdfe0ec2051b3ef2caefd79aca04fed55f9967",
            "patch": "@@ -68,6 +68,7 @@ if (process.env.FREECODECAMP_NODE_ENV !== 'development') {\n   assert.ok(process.env.COOKIE_DOMAIN);\n   assert.notEqual(process.env.COOKIE_SECRET, 'a_cookie_secret');\n   assert.ok(process.env.PORT);\n+  assert.ok(process.env.HOST);\n   assert.ok(process.env.SENTRY_DSN);\n   // The following values can exist in development, but production-like\n   // environments need to override the defaults.\n@@ -111,6 +112,7 @@ export const FREECODECAMP_NODE_ENV = process.env.FREECODECAMP_NODE_ENV;\n export const AUTH0_DOMAIN = process.env.AUTH0_DOMAIN;\n export const AUTH0_AUDIENCE = process.env.AUTH0_AUDIENCE;\n export const PORT = process.env.PORT || '3000';\n+export const HOST = process.env.HOST || 'localhost';\n export const API_LOCATION = process.env.API_LOCATION;\n export const FCC_ENABLE_SWAGGER_UI =\n   process.env.FCC_ENABLE_SWAGGER_UI === 'true';"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 4,
        "deletions": 2
    }
}