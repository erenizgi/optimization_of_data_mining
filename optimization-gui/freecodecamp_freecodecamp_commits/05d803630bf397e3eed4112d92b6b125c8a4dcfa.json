{
    "author": "ojeytonwilliams",
    "message": "fix(curriculum): include header in tests (#56598)",
    "sha": "05d803630bf397e3eed4112d92b6b125c8a4dcfa",
    "files": [
        {
            "sha": "6955fb7e2b4253179022ff39d1a99810e66ee11a",
            "filename": "client/src/templates/Challenges/utils/frame.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/05d803630bf397e3eed4112d92b6b125c8a4dcfa/client%2Fsrc%2Ftemplates%2FChallenges%2Futils%2Fframe.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/05d803630bf397e3eed4112d92b6b125c8a4dcfa/client%2Fsrc%2Ftemplates%2FChallenges%2Futils%2Fframe.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Futils%2Fframe.ts?ref=05d803630bf397e3eed4112d92b6b125c8a4dcfa",
            "patch": "@@ -70,7 +70,7 @@ export const scrollManager = new ScrollManager();\n // main iframe is responsible rendering the preview and is where we proxy the\n export const mainPreviewId = 'fcc-main-frame';\n // the test frame is responsible for running the assert tests\n-const testId = 'fcc-test-frame';\n+export const testId = 'fcc-test-frame';\n // the project preview frame demos the finished project\n export const projectPreviewId = 'fcc-project-preview-frame';\n \n@@ -86,7 +86,7 @@ const DOCUMENT_NOT_FOUND_ERROR = 'misc.document-notfound';\n // of the frame.  React dom errors already appear in the console, so onerror\n // does not need to pass them on to the default error handler.\n \n-const createHeader = (id = mainPreviewId) => `\n+export const createHeader = (id = mainPreviewId) => `\n   <base href='' />\n   <script>\n     window.__frameId = '${id}';"
        },
        {
            "sha": "5c655fba6ce0415c96b3c3feecdf63cf7d85b9dc",
            "filename": "curriculum/challenges/english/14-responsive-web-design-22/build-a-personal-portfolio-webpage-project/build-a-personal-portfolio-webpage.md",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/05d803630bf397e3eed4112d92b6b125c8a4dcfa/curriculum%2Fchallenges%2Fenglish%2F14-responsive-web-design-22%2Fbuild-a-personal-portfolio-webpage-project%2Fbuild-a-personal-portfolio-webpage.md",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/05d803630bf397e3eed4112d92b6b125c8a4dcfa/curriculum%2Fchallenges%2Fenglish%2F14-responsive-web-design-22%2Fbuild-a-personal-portfolio-webpage-project%2Fbuild-a-personal-portfolio-webpage.md",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fchallenges%2Fenglish%2F14-responsive-web-design-22%2Fbuild-a-personal-portfolio-webpage-project%2Fbuild-a-personal-portfolio-webpage.md?ref=05d803630bf397e3eed4112d92b6b125c8a4dcfa",
            "patch": "@@ -280,3 +280,12 @@ p{\n   height: 100vh;\n }\n ```\n+\n+---\n+\n+```html\n+<head><style>@media (max-width: 500px){nav{display: none;}}</style></head><body><nav id=\"navbar\"><a href=\"#projects\">text</a> | </nav><main><section id=\"welcome-section\"><h1>text</h1></section><hr><section id=\"projects\"><h1>Projects</h1><h2 class=\"project-tile\"><a id=\"profile-link\" target=\"_blank\" href=\"https://freecodecamp.org\">text</a></h2></section><hr></body></html>\n+```\n+\n+```css\n+```"
        },
        {
            "sha": "bedb892f0f1fadc15a50fda612449a01f64c1e08",
            "filename": "curriculum/test/test-challenges.js",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/05d803630bf397e3eed4112d92b6b125c8a4dcfa/curriculum%2Ftest%2Ftest-challenges.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/05d803630bf397e3eed4112d92b6b125c8a4dcfa/curriculum%2Ftest%2Ftest-challenges.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Ftest%2Ftest-challenges.js?ref=05d803630bf397e3eed4112d92b6b125c8a4dcfa",
            "patch": "@@ -46,6 +46,10 @@ const { getLines } = require('../../shared/utils/get-lines');\n const { getChallengesForLang, getMetaForBlock } = require('../get-challenges');\n const { challengeSchemaValidator } = require('../schema/challenge-schema');\n const { testedLang, getSuperOrder } = require('../utils');\n+const {\n+  createHeader,\n+  testId\n+} = require('../../client/src/templates/Challenges/utils/frame');\n const ChallengeTitles = require('./utils/challenge-titles');\n const MongoIds = require('./utils/mongo-ids');\n const createPseudoWorker = require('./utils/pseudo-worker');\n@@ -664,7 +668,7 @@ async function getWorkerEvaluator(build, sources, code, runsInPythonWorker) {\n \n async function initializeTestRunner(build, sources, code, loadEnzyme) {\n   await page.reload();\n-  await page.setContent(build);\n+  await page.setContent(createHeader(testId) + build);\n   await page.evaluate(\n     async (code, sources, loadEnzyme) => {\n       const getUserInput = fileName => sources[fileName];"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 16,
        "deletions": 3
    }
}