{
    "author": "ojeytonwilliams",
    "message": "fix: ensure daily challenge tests run (#62260)",
    "sha": "39164ca87f2cbd28564a533d77de42d4553f22a2",
    "files": [
        {
            "sha": "b763a604072f1fab48e16151920f8ad55ccff82b",
            "filename": "curriculum/test/daily-challenges.test.js",
            "status": "modified",
            "additions": 50,
            "deletions": 37,
            "changes": 87,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/39164ca87f2cbd28564a533d77de42d4553f22a2/curriculum%2Ftest%2Fdaily-challenges.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/39164ca87f2cbd28564a533d77de42d4553f22a2/curriculum%2Ftest%2Fdaily-challenges.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Ftest%2Fdaily-challenges.test.js?ref=39164ca87f2cbd28564a533d77de42d4553f22a2",
            "patch": "@@ -1,9 +1,12 @@\n-import { assert, describe, it } from 'vitest';\n+import { assert, describe, it, vi } from 'vitest';\n import { testedLang } from '../utils';\n-import { getChallenges } from './test-challenges';\n \n-// Daily coding challenges are upcoming changes, so this test does nothing\n-// unless SHOW_UPCOMING_CHANGES is true.\n+vi.stubEnv('SHOW_UPCOMING_CHANGES', 'true');\n+\n+// We need to use dynamic import here to ensure the environment variable is set\n+// before the module is loaded.\n+const { getChallenges } = await import('./test-challenges.js');\n+\n describe('Daily Coding Challenges', async () => {\n   const lang = testedLang();\n   const challenges = await getChallenges(lang, {\n@@ -18,6 +21,19 @@ describe('Daily Coding Challenges', async () => {\n     c => c.block === 'daily-coding-challenges-python'\n   );\n \n+  it('should have some daily challenges', function () {\n+    assert.isAbove(\n+      jsDailyChallenges.length,\n+      0,\n+      'No JavaScript daily challenges found'\n+    );\n+    assert.isAbove(\n+      pyDailyChallenges.length,\n+      0,\n+      'No Python daily challenges found'\n+    );\n+  });\n+\n   it('should have matching number of JavaScript and Python challenges', function () {\n     assert.equal(\n       jsDailyChallenges.length,\n@@ -26,44 +42,41 @@ describe('Daily Coding Challenges', async () => {\n     );\n   });\n \n-  for (let i = 0; i < jsDailyChallenges.length; i++) {\n-    describe(`Challenge ${i + 1} Parity`, function () {\n-      const jsChallenge = jsDailyChallenges[i];\n-      const pyChallenge = pyDailyChallenges[i];\n+  it('should have matching properties for all challenges', function () {\n+    const challengePairs = jsDailyChallenges.map((jsChallenge, i) => ({\n+      jsChallenge,\n+      pyChallenge: pyDailyChallenges[i]\n+    }));\n+    const errors = [];\n \n-      it(\"should have matching ID's\", function () {\n-        assert.equal(\n-          jsChallenge.id,\n-          pyChallenge.id,\n-          `Challenge ${i + 1} ID mismatch - JS: ${jsChallenge.id}, Python: ${pyChallenge.id}`\n+    for (const { jsChallenge, pyChallenge } of challengePairs) {\n+      if (jsChallenge.id !== pyChallenge.id) {\n+        errors.push(\n+          `Challenge ID mismatch - JS: ${jsChallenge.id}, Python: ${pyChallenge.id}`\n         );\n-      });\n+      }\n \n-      it(`should have matching titles`, function () {\n-        assert.equal(\n-          jsChallenge.title,\n-          pyChallenge.title,\n-          `Challenge ${i + 1} title mismatch - JS: ${jsChallenge.title}, Python: ${pyChallenge.title}`\n+      if (jsChallenge.title !== pyChallenge.title) {\n+        errors.push(\n+          `Challenge title mismatch - JS: ${jsChallenge.title}, Python: ${pyChallenge.title} (id: ${jsChallenge.id})`\n         );\n-      });\n+      }\n \n-      it('should have matching descriptions', function () {\n-        assert.equal(\n-          jsChallenge.description,\n-          pyChallenge.description,\n-          `Challenge ${i + 1} description mismatch`\n-        );\n-      });\n+      if (jsChallenge.description !== pyChallenge.description) {\n+        errors.push(`Challenge description mismatch (id: ${jsChallenge.id})`);\n+      }\n \n-      it('should have the same number of tests', function () {\n-        const jsTestCount = jsChallenge.tests.length;\n-        const pyTestCount = pyChallenge.tests.length;\n-        assert.equal(\n-          jsTestCount,\n-          pyTestCount,\n-          `Challenge ${i + 1} test count mismatch - JS: ${jsTestCount}, Python: ${pyTestCount}`\n+      const jsTestCount = jsChallenge.tests.length;\n+      const pyTestCount = pyChallenge.tests.length;\n+      if (jsTestCount !== pyTestCount) {\n+        errors.push(\n+          `Challenge test count mismatch - JS: ${jsTestCount}, Python: ${pyTestCount} (id: ${jsChallenge.id})`\n         );\n-      });\n-    });\n-  }\n+      }\n+    }\n+\n+    if (errors.length > 0) {\n+      assert.fail(`Found ${errors.length} mismatch(es):\\n${errors.join('\\n')}`);\n+    }\n+  });\n });"
        }
    ],
    "stats": {
        "total": 87,
        "additions": 50,
        "deletions": 37
    }
}