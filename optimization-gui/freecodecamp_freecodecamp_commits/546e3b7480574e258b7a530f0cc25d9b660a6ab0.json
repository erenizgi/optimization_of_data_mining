{
    "author": "ahmaxed",
    "message": "fix: show donation page to unauthorized users (#61696)",
    "sha": "546e3b7480574e258b7a530f0cc25d9b660a6ab0",
    "files": [
        {
            "sha": "ba236e09861dc89989e98b2e17a281d819ca5d3d",
            "filename": "client/src/components/growth-book/growth-book-wrapper.tsx",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/546e3b7480574e258b7a530f0cc25d9b660a6ab0/client%2Fsrc%2Fcomponents%2Fgrowth-book%2Fgrowth-book-wrapper.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/546e3b7480574e258b7a530f0cc25d9b660a6ab0/client%2Fsrc%2Fcomponents%2Fgrowth-book%2Fgrowth-book-wrapper.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fgrowth-book%2Fgrowth-book-wrapper.tsx?ref=546e3b7480574e258b7a530f0cc25d9b660a6ab0",
            "patch": "@@ -98,7 +98,11 @@ const GrowthBookWrapper = ({\n         clientLocal: clientLocale\n       };\n \n-      if (user) {\n+      // Needs more checks as the user object is not empty but user is not signed in\n+      const isSignedIn =\n+        user && user.completedChallenges && user.email && user.joinDate;\n+\n+      if (isSignedIn) {\n         userAttributes = {\n           ...userAttributes,\n           staff: user.email.includes('@freecodecamp'),"
        },
        {
            "sha": "3867957c5a10b7aec89b261a237a2be5a026a3ec",
            "filename": "client/src/pages/donate.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/546e3b7480574e258b7a530f0cc25d9b660a6ab0/client%2Fsrc%2Fpages%2Fdonate.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/546e3b7480574e258b7a530f0cc25d9b660a6ab0/client%2Fsrc%2Fpages%2Fdonate.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fpages%2Fdonate.tsx?ref=546e3b7480574e258b7a530f0cc25d9b660a6ab0",
            "patch": "@@ -25,6 +25,7 @@ import {\n import { PaymentContext } from '../../../shared/config/donation-settings';\n import { DonateFormState } from '../redux/types';\n import callGA from '../analytics/call-ga';\n+import type { User } from '../redux/prop-types';\n interface DonatePageProps {\n   isDonating?: boolean;\n   showLoading: boolean;\n@@ -37,11 +38,11 @@ const mapStateToProps = createSelector(\n   signInLoadingSelector,\n   donationFormStateSelector,\n   (\n-    { isDonating }: { isDonating: boolean },\n+    user: User | null,\n     showLoading: boolean,\n     donationFormState: DonateFormState\n   ) => ({\n-    isDonating,\n+    isDonating: user?.isDonating || false,\n     showLoading,\n     donationFormState\n   })"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 8,
        "deletions": 3
    }
}