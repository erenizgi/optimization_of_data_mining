{
    "author": "huyenltnguyen",
    "message": "feat(external curricula): build external curricula data v2 (#59533)\n\nCo-authored-by: sembauke <semboot699@gmail.com>",
    "sha": "17812fc54950c288ff3c7f6852656af763615d97",
    "files": [
        {
            "sha": "43c2cdfed80374bd7421d82fbc048d2daa990b84",
            "filename": "shared/config/chapters.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/17812fc54950c288ff3c7f6852656af763615d97/shared%2Fconfig%2Fchapters.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/17812fc54950c288ff3c7f6852656af763615d97/shared%2Fconfig%2Fchapters.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/shared%2Fconfig%2Fchapters.ts?ref=17812fc54950c288ff3c7f6852656af763615d97",
            "patch": "@@ -1,3 +1,5 @@\n+import type { Module } from './modules';\n+\n // TODO: Dynamically create these from intro.json or full-stack.json\n export enum FsdChapters {\n   Welcome = 'freecodecamp',\n@@ -9,3 +11,10 @@ export enum FsdChapters {\n   BackendJavascript = 'backend-javascript',\n   Python = 'python'\n }\n+\n+export interface Chapter {\n+  dashedName: string;\n+  comingSoon?: boolean;\n+  modules: Module[];\n+  chapterType?: string;\n+}"
        },
        {
            "sha": "9deea8677963142ec4200ee2ebfbb0b3461bcbd4",
            "filename": "shared/config/modules.ts",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/17812fc54950c288ff3c7f6852656af763615d97/shared%2Fconfig%2Fmodules.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/17812fc54950c288ff3c7f6852656af763615d97/shared%2Fconfig%2Fmodules.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/shared%2Fconfig%2Fmodules.ts?ref=17812fc54950c288ff3c7f6852656af763615d97",
            "patch": "@@ -0,0 +1,8 @@\n+export interface Module {\n+  dashedName: string;\n+  comingSoon?: boolean;\n+  blocks: {\n+    dashedName: string;\n+  }[];\n+  moduleType?: string;\n+}"
        },
        {
            "sha": "6d7267e50656662f71f5043a6c6e236abafa7bd2",
            "filename": "tools/scripts/build/build-curriculum.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 3,
            "changes": 12,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/17812fc54950c288ff3c7f6852656af763615d97/tools%2Fscripts%2Fbuild%2Fbuild-curriculum.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/17812fc54950c288ff3c7f6852656af763615d97/tools%2Fscripts%2Fbuild%2Fbuild-curriculum.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fscripts%2Fbuild%2Fbuild-curriculum.ts?ref=17812fc54950c288ff3c7f6852656af763615d97",
            "patch": "@@ -4,17 +4,23 @@ import path from 'path';\n import { getChallengesForLang } from '../../../curriculum/get-challenges';\n import {\n   buildExtCurriculumDataV1,\n-  Curriculum,\n-  CurriculumProps\n+  type Curriculum as CurriculumV1,\n+  type CurriculumProps as CurriculumPropsV1\n } from './build-external-curricula-data-v1';\n+import {\n+  buildExtCurriculumDataV2,\n+  type Curriculum as CurriculumV2,\n+  type CurriculumProps as CurriculumPropsV2\n+} from './build-external-curricula-data-v2';\n \n const globalConfigPath = path.resolve(__dirname, '../../../shared/config');\n \n // We are defaulting to English because the ids for the challenges are same\n // across all languages.\n void getChallengesForLang('english')\n   .then((result: Record<string, unknown>) => {\n-    buildExtCurriculumDataV1(result as Curriculum<CurriculumProps>);\n+    buildExtCurriculumDataV1(result as CurriculumV1<CurriculumPropsV1>);\n+    buildExtCurriculumDataV2(result as CurriculumV2<CurriculumPropsV2>);\n     return result;\n   })\n   .then(JSON.stringify)"
        },
        {
            "sha": "44a6eae744def9ca0384f22c7a1e43d040071332",
            "filename": "tools/scripts/build/build-external-curricula-data-v1.test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/17812fc54950c288ff3c7f6852656af763615d97/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data-v1.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/17812fc54950c288ff3c7f6852656af763615d97/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data-v1.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data-v1.test.ts?ref=17812fc54950c288ff3c7f6852656af763615d97",
            "patch": "@@ -7,7 +7,7 @@ import { SuperBlocks } from '../../../shared/config/curriculum';\n import {\n   superblockSchemaValidator,\n   availableSuperBlocksValidator\n-} from './external-data-schema';\n+} from './external-data-schema-v1';\n import {\n   type Curriculum,\n   type CurriculumIntros,"
        },
        {
            "sha": "6633f1f6e5d2e501b48b8d0cad9a60022eef019e",
            "filename": "tools/scripts/build/build-external-curricula-data-v2.test.ts",
            "status": "added",
            "additions": 235,
            "deletions": 0,
            "changes": 235,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/17812fc54950c288ff3c7f6852656af763615d97/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data-v2.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/17812fc54950c288ff3c7f6852656af763615d97/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data-v2.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data-v2.test.ts?ref=17812fc54950c288ff3c7f6852656af763615d97",
            "patch": "@@ -0,0 +1,235 @@\n+import path from 'path';\n+import fs, { readFileSync } from 'fs';\n+\n+import readdirp from 'readdirp';\n+\n+import {\n+  chapterBasedSuperBlocks,\n+  SuperBlocks\n+} from '../../../shared/config/curriculum';\n+import {\n+  superblockSchemaValidator,\n+  availableSuperBlocksValidator\n+} from './external-data-schema-v2';\n+import {\n+  type CurriculumIntros,\n+  type Curriculum,\n+  type GeneratedCurriculumProps,\n+  type GeneratedBlockBasedCurriculumProps,\n+  type GeneratedChapterBasedCurriculumProps,\n+  orderedSuperBlockInfo\n+} from './build-external-curricula-data-v2';\n+\n+const VERSION = 'v2';\n+const intros = JSON.parse(\n+  readFileSync(\n+    path.resolve(__dirname, '../../../client/i18n/locales/english/intro.json'),\n+    'utf-8'\n+  )\n+) as CurriculumIntros;\n+\n+describe('external curriculum data build', () => {\n+  const clientStaticPath = path.resolve(__dirname, '../../../client/static');\n+\n+  const validateSuperBlock = superblockSchemaValidator();\n+\n+  test(\"the external curriculum data should be in the client's static directory\", () => {\n+    expect(\n+      fs.existsSync(`${clientStaticPath}/curriculum-data/${VERSION}`)\n+    ).toBe(true);\n+\n+    expect(\n+      fs.readdirSync(`${clientStaticPath}/curriculum-data/${VERSION}`).length\n+    ).toBeGreaterThan(0);\n+  });\n+\n+  test('there should be an endpoint to request submit types from', () => {\n+    expect(\n+      fs.existsSync(\n+        `${clientStaticPath}/curriculum-data/${VERSION}/submit-types.json`\n+      )\n+    ).toBe(true);\n+  });\n+\n+  test('the available-superblocks file should have the correct structure', async () => {\n+    const validateAvailableSuperBlocks = availableSuperBlocksValidator();\n+    const availableSuperblocks: unknown = JSON.parse(\n+      await fs.promises.readFile(\n+        `${clientStaticPath}/curriculum-data/${VERSION}/available-superblocks.json`,\n+        'utf-8'\n+      )\n+    );\n+\n+    const result = validateAvailableSuperBlocks(availableSuperblocks);\n+\n+    if (result.error) {\n+      throw Error(\n+        `file: available-superblocks.json\n+${result.error.message}`\n+      );\n+    }\n+  });\n+\n+  test('the super block files generated should have the correct schema', async () => {\n+    const fileArray = (\n+      await readdirp.promise(`${clientStaticPath}/curriculum-data/${VERSION}`, {\n+        directoryFilter: ['!challenges'],\n+        fileFilter: entry => {\n+          // The directory contains super block files and other curriculum-related files.\n+          // We're only interested in super block ones.\n+          const superBlocks = Object.values(SuperBlocks);\n+          return superBlocks.includes(entry.basename);\n+        }\n+      })\n+    ).map(file => file.path);\n+\n+    fileArray.forEach(fileInArray => {\n+      const fileContent = fs.readFileSync(\n+        `${clientStaticPath}/curriculum-data/${VERSION}/${fileInArray}`,\n+        'utf-8'\n+      );\n+\n+      const result = validateSuperBlock(JSON.parse(fileContent));\n+\n+      if (result.error) {\n+        throw Error(`file: ${fileInArray}\n+${result.error.message}`);\n+      }\n+    });\n+  });\n+\n+  test('block-based super blocks and blocks should have the correct data', async () => {\n+    const superBlockFiles = (\n+      await readdirp.promise(`${clientStaticPath}/curriculum-data/${VERSION}`, {\n+        directoryFilter: ['!challenges'],\n+        fileFilter: entry => {\n+          // The directory contains super block files and other curriculum-related files.\n+          // We're only interested in super block ones.\n+          const superBlocks = Object.values(SuperBlocks);\n+          return (\n+            superBlocks.includes(entry.basename) &&\n+            !chapterBasedSuperBlocks.includes(entry.basename)\n+          );\n+        }\n+      })\n+    ).map(file => file.path);\n+\n+    superBlockFiles.forEach(file => {\n+      const fileContentJson = fs.readFileSync(\n+        `${clientStaticPath}/curriculum-data/${VERSION}/${file}`,\n+        'utf-8'\n+      );\n+\n+      const fileContent = JSON.parse(\n+        fileContentJson\n+      ) as Curriculum<GeneratedCurriculumProps>;\n+\n+      const superBlock = Object.keys(fileContent)[0] as SuperBlocks;\n+      const superBlockData = fileContent[\n+        superBlock\n+      ] as GeneratedBlockBasedCurriculumProps;\n+\n+      // Randomly pick a block to check its data.\n+      const blocks = superBlockData.blocks;\n+      const randomBlockIndex = Math.floor(Math.random() * blocks.length);\n+\n+      expect(superBlockData.intro).toEqual(intros[superBlock].intro);\n+      expect(superBlockData.blocks[randomBlockIndex].intro).toEqual(\n+        intros[superBlock].blocks[randomBlockIndex].intro\n+      );\n+      expect(superBlockData.blocks[randomBlockIndex].meta.name).toEqual(\n+        intros[superBlock].blocks[randomBlockIndex].title\n+      );\n+    });\n+  });\n+\n+  test('chapter-based super blocks and blocks should have the correct data', async () => {\n+    const superBlockFiles = (\n+      await readdirp.promise(`${clientStaticPath}/curriculum-data/${VERSION}`, {\n+        directoryFilter: ['!challenges'],\n+        fileFilter: entry => {\n+          // The directory contains super block files and other curriculum-related files.\n+          // We're only interested in super block ones.\n+          const superBlocks = Object.values(SuperBlocks);\n+          return (\n+            superBlocks.includes(entry.basename) &&\n+            chapterBasedSuperBlocks.includes(entry.basename)\n+          );\n+        }\n+      })\n+    ).map(file => file.path);\n+\n+    superBlockFiles.forEach(file => {\n+      const fileContentJson = fs.readFileSync(\n+        `${clientStaticPath}/curriculum-data/${VERSION}/${file}`,\n+        'utf-8'\n+      );\n+\n+      const fileContent = JSON.parse(\n+        fileContentJson\n+      ) as Curriculum<GeneratedCurriculumProps>;\n+\n+      const superBlock = Object.keys(fileContent)[0] as SuperBlocks;\n+      const superBlockData = fileContent[\n+        superBlock\n+      ] as GeneratedChapterBasedCurriculumProps;\n+\n+      // Randomly pick a chapter.\n+      const chapters = superBlockData.chapters;\n+      const randomChapterIndex = Math.floor(Math.random() * chapters.length);\n+      const randomChapter = chapters[randomChapterIndex];\n+\n+      // Randomly pick a module.\n+      const modules = randomChapter.modules;\n+      const randomModuleIndex = Math.floor(Math.random() * modules.length);\n+      const randomModule = modules[randomModuleIndex];\n+\n+      // Randomly pick a block.\n+      const blocks = randomModule.blocks;\n+      const randomBlockIndex = Math.floor(Math.random() * blocks.length);\n+\n+      expect(superBlockData.intro).toEqual(intros[superBlock].intro);\n+      expect(\n+        superBlockData.chapters[randomChapterIndex].modules[randomModuleIndex]\n+          .blocks[randomBlockIndex].intro\n+      ).toEqual(intros[superBlock].blocks[randomBlockIndex].intro);\n+      expect(\n+        superBlockData.chapters[randomChapterIndex].modules[randomModuleIndex]\n+          .blocks[randomBlockIndex].meta.name\n+      ).toEqual(intros[superBlock].blocks[randomBlockIndex].title);\n+    });\n+  });\n+\n+  test('All public SuperBlocks should be present in the SuperBlock object', () => {\n+    const publicSuperBlockNames = Object.values(SuperBlocks);\n+\n+    const superBlockDashedNames = Object.keys(orderedSuperBlockInfo).reduce(\n+      (acc, superBlockStage) => {\n+        const dashedNames = orderedSuperBlockInfo[superBlockStage].map(\n+          superBlock => superBlock.dashedName\n+        );\n+        acc.push(...dashedNames);\n+\n+        return acc;\n+      },\n+      [] as SuperBlocks[]\n+    );\n+\n+    expect(superBlockDashedNames).toEqual(\n+      expect.arrayContaining(publicSuperBlockNames)\n+    );\n+    expect(superBlockDashedNames).toHaveLength(publicSuperBlockNames.length);\n+  });\n+\n+  test('challenge files should be created and in the correct directory', () => {\n+    expect(\n+      fs.existsSync(`${clientStaticPath}/curriculum-data/${VERSION}/challenges`)\n+    ).toBe(true);\n+\n+    expect(\n+      fs.readdirSync(\n+        `${clientStaticPath}/curriculum-data/${VERSION}/challenges`\n+      ).length\n+    ).toBeGreaterThan(0);\n+  });\n+});"
        },
        {
            "sha": "cc676f8b87275adc23a1c053009ec3088d8e223d",
            "filename": "tools/scripts/build/build-external-curricula-data-v2.ts",
            "status": "added",
            "additions": 346,
            "deletions": 0,
            "changes": 346,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/17812fc54950c288ff3c7f6852656af763615d97/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data-v2.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/17812fc54950c288ff3c7f6852656af763615d97/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data-v2.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data-v2.ts?ref=17812fc54950c288ff3c7f6852656af763615d97",
            "patch": "@@ -0,0 +1,346 @@\n+import { mkdirSync, writeFileSync, readFileSync } from 'fs';\n+import { resolve, dirname } from 'path';\n+import { submitTypes } from '../../../shared/config/challenge-types';\n+import { type ChallengeNode } from '../../../client/src/redux/prop-types';\n+import {\n+  SuperBlocks,\n+  SuperBlockStage\n+} from '../../../shared/config/curriculum';\n+import fullStackSuperBlockStructure from '../../../curriculum/superblock-structure/full-stack.json';\n+import type { Chapter } from '../../../shared/config/chapters';\n+\n+export type CurriculumIntros = {\n+  [keyValue in SuperBlocks]: {\n+    title: string;\n+    intro: string[];\n+    blocks: Record<string, { title: string; intro: string[] }>;\n+  };\n+};\n+\n+export type Curriculum<T> = {\n+  [keyValue in SuperBlocks]: T extends CurriculumProps\n+    ? CurriculumProps\n+    : GeneratedCurriculumProps;\n+};\n+\n+export interface CurriculumProps {\n+  intro: string[];\n+  blocks: Record<string, Block<ChallengeNode['challenge'][]>>;\n+}\n+\n+interface Block<T> {\n+  desc: string[];\n+  intro: string[];\n+  challenges: T;\n+  meta: Record<string, unknown>;\n+}\n+\n+export type GeneratedCurriculumProps =\n+  | GeneratedBlockBasedCurriculumProps\n+  | GeneratedChapterBasedCurriculumProps;\n+\n+export interface GeneratedBlockBasedCurriculumProps {\n+  intro: string[];\n+  blocks: GeneratedBlock[];\n+}\n+\n+export interface GeneratedChapterBasedCurriculumProps {\n+  intro: string[];\n+  chapters: GeneratedChapter[];\n+}\n+\n+interface GeneratedChapter {\n+  dashedName: string;\n+  comingSoon?: boolean;\n+  modules: GeneratedModule[];\n+  chapterType?: string;\n+}\n+\n+interface GeneratedModule {\n+  dashedName: string;\n+  comingSoon?: boolean;\n+  blocks: GeneratedBlock[];\n+  moduleType?: string;\n+}\n+\n+interface GeneratedBlock {\n+  dashedName: string;\n+  intro: string;\n+  meta: Record<string, unknown>;\n+}\n+\n+const ver = 'v2';\n+\n+const staticFolderPath = resolve(__dirname, '../../../client/static');\n+const dataPath = `${staticFolderPath}/curriculum-data/`;\n+const blockIntroPath = resolve(\n+  __dirname,\n+  '../../../client/i18n/locales/english/intro.json'\n+);\n+const intros = JSON.parse(\n+  readFileSync(blockIntroPath, 'utf-8')\n+) as CurriculumIntros;\n+\n+export const orderedSuperBlockInfo: Record<\n+  string,\n+  Array<{ dashedName: SuperBlocks; public: boolean; title: string }>\n+> = {\n+  [SuperBlockStage.Core]: [\n+    {\n+      dashedName: SuperBlocks.FullStackDeveloper,\n+      public: false,\n+      title: intros[SuperBlocks.FullStackDeveloper].title\n+    }\n+  ],\n+\n+  [SuperBlockStage.English]: [\n+    {\n+      dashedName: SuperBlocks.A2English,\n+      public: true,\n+      title: intros[SuperBlocks.A2English].title\n+    },\n+    {\n+      dashedName: SuperBlocks.B1English,\n+      public: true,\n+      title: intros[SuperBlocks.B1English].title\n+    }\n+  ],\n+\n+  [SuperBlockStage.Extra]: [\n+    {\n+      dashedName: SuperBlocks.TheOdinProject,\n+      public: true,\n+      title: intros[SuperBlocks.TheOdinProject].title\n+    },\n+    {\n+      dashedName: SuperBlocks.CodingInterviewPrep,\n+      public: false,\n+      title: intros[SuperBlocks.CodingInterviewPrep].title\n+    },\n+    {\n+      dashedName: SuperBlocks.ProjectEuler,\n+      public: false,\n+      title: intros[SuperBlocks.ProjectEuler].title\n+    },\n+    {\n+      dashedName: SuperBlocks.RosettaCode,\n+      public: false,\n+      title: intros[SuperBlocks.RosettaCode].title\n+    }\n+  ],\n+\n+  [SuperBlockStage.Legacy]: [\n+    {\n+      dashedName: SuperBlocks.RespWebDesignNew,\n+      public: true,\n+      title: intros[SuperBlocks.RespWebDesignNew].title\n+    },\n+    {\n+      dashedName: SuperBlocks.JsAlgoDataStructNew,\n+      public: false,\n+      title: intros[SuperBlocks.JsAlgoDataStructNew].title\n+    },\n+    {\n+      dashedName: SuperBlocks.FrontEndDevLibs,\n+      public: false,\n+      title: intros[SuperBlocks.FrontEndDevLibs].title\n+    },\n+    {\n+      dashedName: SuperBlocks.DataVis,\n+      public: false,\n+      title: intros[SuperBlocks.DataVis].title\n+    },\n+    {\n+      dashedName: SuperBlocks.RelationalDb,\n+      public: false,\n+      title: intros[SuperBlocks.RelationalDb].title\n+    },\n+    {\n+      dashedName: SuperBlocks.BackEndDevApis,\n+      public: false,\n+      title: intros[SuperBlocks.BackEndDevApis].title\n+    },\n+    {\n+      dashedName: SuperBlocks.QualityAssurance,\n+      public: false,\n+      title: intros[SuperBlocks.QualityAssurance].title\n+    },\n+    {\n+      dashedName: SuperBlocks.SciCompPy,\n+      public: false,\n+      title: intros[SuperBlocks.SciCompPy].title\n+    },\n+    {\n+      dashedName: SuperBlocks.DataAnalysisPy,\n+      public: true,\n+      title: intros[SuperBlocks.DataAnalysisPy].title\n+    },\n+    {\n+      dashedName: SuperBlocks.InfoSec,\n+      public: false,\n+      title: intros[SuperBlocks.InfoSec].title\n+    },\n+    {\n+      dashedName: SuperBlocks.MachineLearningPy,\n+      public: true,\n+      title: intros[SuperBlocks.MachineLearningPy].title\n+    },\n+    {\n+      dashedName: SuperBlocks.CollegeAlgebraPy,\n+      public: true,\n+      title: intros[SuperBlocks.CollegeAlgebraPy].title\n+    },\n+    {\n+      dashedName: SuperBlocks.RespWebDesign,\n+      public: true,\n+      title: intros[SuperBlocks.RespWebDesign].title\n+    },\n+    {\n+      dashedName: SuperBlocks.JsAlgoDataStruct,\n+      public: false,\n+      title: intros[SuperBlocks.JsAlgoDataStruct].title\n+    },\n+    {\n+      dashedName: SuperBlocks.PythonForEverybody,\n+      public: true,\n+      title: intros[SuperBlocks.PythonForEverybody].title\n+    }\n+  ],\n+\n+  [SuperBlockStage.Professional]: [\n+    {\n+      dashedName: SuperBlocks.FoundationalCSharp,\n+      public: false,\n+      title: intros[SuperBlocks.FoundationalCSharp].title\n+    }\n+  ]\n+};\n+\n+export const superBlockDashedNames = Object.keys(orderedSuperBlockInfo).reduce(\n+  (acc, superBlockStage) => {\n+    const dashedNames = orderedSuperBlockInfo[superBlockStage].map(\n+      superBlock => superBlock.dashedName\n+    );\n+    acc.push(...dashedNames);\n+\n+    return acc;\n+  },\n+  [] as SuperBlocks[]\n+);\n+\n+export function buildExtCurriculumDataV2(\n+  curriculum: Curriculum<CurriculumProps>\n+): void {\n+  mkdirSync(dataPath, { recursive: true });\n+\n+  parseCurriculumData();\n+  getSubmitTypes();\n+\n+  function parseCurriculumData() {\n+    const superBlockKeys = Object.values(SuperBlocks).filter(x =>\n+      superBlockDashedNames.includes(x)\n+    );\n+\n+    writeToFile('available-superblocks', {\n+      superblocks: orderedSuperBlockInfo\n+    });\n+\n+    for (const superBlockKey of superBlockKeys) {\n+      if (superBlockKey === SuperBlocks.FullStackDeveloper) {\n+        buildChapterBasedCurriculum(superBlockKey);\n+      } else {\n+        buildBlockBasedCurriculum(superBlockKey);\n+      }\n+\n+      buildChallengeFiles(superBlockKey);\n+    }\n+  }\n+\n+  function buildChapterBasedCurriculum(superBlockKey: SuperBlocks) {\n+    const chapters: Chapter[] = fullStackSuperBlockStructure.chapters;\n+    const blocksWithData = curriculum[superBlockKey].blocks;\n+\n+    // Skip upcoming chapter/module as the metadata of their blocks\n+    // is not included in the `curriculum` object.\n+    const allChapters = chapters.map(chapter => ({\n+      dashedName: chapter.dashedName,\n+      comingSoon: chapter.comingSoon,\n+      chapterType: chapter.chapterType,\n+      modules: chapter.comingSoon\n+        ? []\n+        : chapter.modules.map(module => ({\n+            dashedName: module.dashedName,\n+            comingSoon: module.comingSoon,\n+            moduleType: module.moduleType,\n+            blocks: module.comingSoon\n+              ? []\n+              : module.blocks.map(block => {\n+                  const blockData = blocksWithData[block.dashedName];\n+\n+                  return {\n+                    intro: intros[superBlockKey].blocks[block.dashedName].intro,\n+                    meta: blockData.meta\n+                  };\n+                })\n+          }))\n+    }));\n+\n+    const superBlock = {\n+      [superBlockKey]: {\n+        intro: intros[superBlockKey].intro,\n+        chapters: allChapters\n+      }\n+    };\n+\n+    writeToFile(superBlockKey, superBlock);\n+  }\n+\n+  function buildBlockBasedCurriculum(superBlockKey: SuperBlocks) {\n+    const blockNames = Object.keys(curriculum[superBlockKey].blocks);\n+    const blocks = blockNames.map(blockName => {\n+      const blockData = curriculum[superBlockKey].blocks[blockName];\n+\n+      return {\n+        intro: intros[superBlockKey].blocks[blockName].intro,\n+        meta: blockData.meta\n+      };\n+    });\n+\n+    const superBlock = {\n+      [superBlockKey]: {\n+        intro: intros[superBlockKey].intro,\n+        blocks\n+      }\n+    };\n+\n+    writeToFile(superBlockKey, superBlock);\n+  }\n+\n+  function buildChallengeFiles(superBlockKey: SuperBlocks) {\n+    const blocks = Object.keys(curriculum[superBlockKey].blocks);\n+\n+    for (const block of blocks) {\n+      const challenges = curriculum[superBlockKey]['blocks'][block].challenges;\n+\n+      for (const challenge of challenges) {\n+        const challengeId = challenge.id;\n+        const challengePath = `challenges/${superBlockKey}/${block}/${challengeId}`;\n+\n+        writeToFile(challengePath, challenge);\n+      }\n+    }\n+  }\n+\n+  function writeToFile(fileName: string, data: Record<string, unknown>): void {\n+    const filePath = `${dataPath}/${ver}/${fileName}.json`;\n+    mkdirSync(dirname(filePath), { recursive: true });\n+    writeFileSync(filePath, JSON.stringify(data, null, 2));\n+  }\n+\n+  function getSubmitTypes() {\n+    writeFileSync(\n+      `${dataPath}/${ver}/submit-types.json`,\n+      JSON.stringify(submitTypes, null, 2)\n+    );\n+  }\n+}"
        },
        {
            "sha": "deb0417d9c57293d17be40f924d6cab6f0525037",
            "filename": "tools/scripts/build/external-data-schema-v1.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/17812fc54950c288ff3c7f6852656af763615d97/tools%2Fscripts%2Fbuild%2Fexternal-data-schema-v1.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/17812fc54950c288ff3c7f6852656af763615d97/tools%2Fscripts%2Fbuild%2Fexternal-data-schema-v1.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fscripts%2Fbuild%2Fexternal-data-schema-v1.js?ref=17812fc54950c288ff3c7f6852656af763615d97",
            "previous_filename": "tools/scripts/build/external-data-schema.js"
        },
        {
            "sha": "365997a7408a9be4a97d5a14589050fae2843875",
            "filename": "tools/scripts/build/external-data-schema-v2.js",
            "status": "added",
            "additions": 125,
            "deletions": 0,
            "changes": 125,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/17812fc54950c288ff3c7f6852656af763615d97/tools%2Fscripts%2Fbuild%2Fexternal-data-schema-v2.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/17812fc54950c288ff3c7f6852656af763615d97/tools%2Fscripts%2Fbuild%2Fexternal-data-schema-v2.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fscripts%2Fbuild%2Fexternal-data-schema-v2.js?ref=17812fc54950c288ff3c7f6852656af763615d97",
            "patch": "@@ -0,0 +1,125 @@\n+const Joi = require('joi');\n+const {\n+  chapterBasedSuperBlocks\n+} = require('../../../shared/config/curriculum');\n+\n+const slugRE = new RegExp('^[a-z0-9-]+$');\n+\n+const blockSchema = Joi.object().keys({\n+  intro: Joi.array().min(1),\n+  meta: Joi.object({}).keys({\n+    name: Joi.string().required(),\n+    isUpcomingChange: Joi.bool().required(),\n+    usesMultifileEditor: Joi.bool().optional(),\n+    hasEditableBoundaries: Joi.bool().optional(),\n+    dashedName: Joi.string().required(),\n+    helpCategory: Joi.valid(\n+      'JavaScript',\n+      'HTML-CSS',\n+      'Python',\n+      'Backend Development',\n+      'C-Sharp',\n+      'English',\n+      'Odin',\n+      'Euler',\n+      'Rosetta'\n+    ).required(),\n+    order: Joi.number().when('superBlock', {\n+      is: chapterBasedSuperBlocks,\n+      then: Joi.forbidden(),\n+      otherwise: Joi.required()\n+    }),\n+    template: Joi.string().allow(''),\n+    required: Joi.array(),\n+    superBlock: Joi.string().required(),\n+    blockLayout: Joi.valid(\n+      'challenge-list',\n+      'challenge-grid',\n+      'dialogue-grid',\n+      'link',\n+      'project-list',\n+      'legacy-challenge-list',\n+      'legacy-link',\n+      'legacy-challenge-grid'\n+    ).required(),\n+    blockType: Joi.valid(\n+      'lecture',\n+      'workshop',\n+      'lab',\n+      'review',\n+      'quiz',\n+      'exam'\n+    ).when('superBlock', {\n+      is: chapterBasedSuperBlocks,\n+      then: Joi.required(),\n+      otherwise: Joi.optional()\n+    }),\n+    challengeOrder: Joi.array().items(\n+      Joi.object({}).keys({\n+        id: Joi.string(),\n+        title: Joi.string()\n+      })\n+    ),\n+    disableLoopProtectTests: Joi.boolean(),\n+    disableLoopProtectPreview: Joi.boolean(),\n+    superOrder: Joi.number()\n+  })\n+});\n+\n+const blockBasedCurriculumSchema = Joi.object().pattern(\n+  Joi.string(),\n+  Joi.object().keys({\n+    intro: Joi.array(),\n+    blocks: Joi.array().items(blockSchema)\n+  })\n+);\n+\n+const chapterBasedCurriculumSchema = Joi.object().pattern(\n+  Joi.string(),\n+  Joi.object().keys({\n+    intro: Joi.array(),\n+    chapters: Joi.array().items(\n+      Joi.object().keys({\n+        dashedName: Joi.string().regex(slugRE).required(),\n+        comingSoon: Joi.boolean().optional(),\n+        chapterType: Joi.valid('exam').optional(),\n+        modules: Joi.array()\n+          .items(\n+            Joi.object().keys({\n+              moduleType: Joi.valid('review', 'exam').optional(),\n+              comingSoon: Joi.boolean().optional(),\n+              dashedName: Joi.string().regex(slugRE).required(),\n+              blocks: Joi.array().items(blockSchema)\n+            })\n+          )\n+          .required()\n+      })\n+    )\n+  })\n+);\n+\n+const availableSuperBlocksSchema = Joi.object({\n+  superblocks: Joi.object().pattern(\n+    Joi.string(),\n+    Joi.array().items(\n+      Joi.object({\n+        dashedName: Joi.string().required(),\n+        title: Joi.string().required(),\n+        public: Joi.bool().required()\n+      })\n+    )\n+  )\n+});\n+\n+exports.superblockSchemaValidator = () => superBlock => {\n+  const superBlockName = Object.keys(superBlock)[0];\n+\n+  if (chapterBasedSuperBlocks.includes(superBlockName)) {\n+    return chapterBasedCurriculumSchema.validate(superBlock);\n+  }\n+\n+  return blockBasedCurriculumSchema.validate(superBlock);\n+};\n+\n+exports.availableSuperBlocksValidator = () => data =>\n+  availableSuperBlocksSchema.validate(data);"
        }
    ],
    "stats": {
        "total": 737,
        "additions": 733,
        "deletions": 4
    }
}