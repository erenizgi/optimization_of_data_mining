{
    "author": "Sembauke",
    "message": "feat: convert \"navigation tests spec\" to Playwright (#54944)\n\nCo-authored-by: Huyen Nguyen <25715018+huyenltnguyen@users.noreply.github.com>",
    "sha": "020a8c5c3e47b059746917332d472d902a327a04",
    "files": [
        {
            "sha": "7236efc5e8c36aae3e59fbb20154d18882019f8a",
            "filename": "cypress/e2e/default/learn/challenges/navigation.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/020a8c5c3e47b059746917332d472d902a327a04/cypress%2Fe2e%2Fdefault%2Flearn%2Fchallenges%2Fnavigation.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/020a8c5c3e47b059746917332d472d902a327a04/cypress%2Fe2e%2Fdefault%2Flearn%2Fchallenges%2Fnavigation.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/cypress%2Fe2e%2Fdefault%2Flearn%2Fchallenges%2Fnavigation.ts?ref=020a8c5c3e47b059746917332d472d902a327a04",
            "patch": "@@ -15,7 +15,7 @@ const challenge2 = {\n const rwdChallenge = {\n   url: '/learn/2022/responsive-web-design/build-a-personal-portfolio-webpage-project/build-a-personal-portfolio-webpage',\n   nextUrl:\n-    'http://localhost:8000/learn/2022/responsive-web-design/#build-a-personal-portfolio-webpage-project'\n+    '/learn/2022/responsive-web-design/#build-a-personal-portfolio-webpage-project'\n };\n \n const rwdChallengeSolution = `<head>"
        },
        {
            "sha": "f7b50572d0527f722e340bb25b693ed04a1f2b40",
            "filename": "e2e/challenge-reset-modal.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Fchallenge-reset-modal.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Fchallenge-reset-modal.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fchallenge-reset-modal.spec.ts?ref=020a8c5c3e47b059746917332d472d902a327a04",
            "patch": "@@ -57,7 +57,7 @@ test('User can reset challenge', async ({ page, isMobile, browserName }) => {\n \n   // Modify the text in the editor pane, clearing first, otherwise the existing\n   // text will be selected before typing\n-  await focusEditor({ page, isMobile, browserName });\n+  await focusEditor({ page, isMobile });\n   await clearEditor({ page, browserName });\n   await getEditors(page).fill(updatedText);\n   await expect(updatedFrame).toBeVisible({ timeout: 10000 });"
        },
        {
            "sha": "64a6ee087b46173a4475c741e6c33fbbe9a72c9b",
            "filename": "e2e/editor.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Feditor.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Feditor.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Feditor.spec.ts?ref=020a8c5c3e47b059746917332d472d902a327a04",
            "patch": "@@ -44,7 +44,7 @@ test.describe('Python Terminal', () => {\n       'learn/scientific-computing-with-python/learn-string-manipulation-by-building-a-cipher/step-2'\n     );\n \n-    await focusEditor({ page, isMobile, browserName });\n+    await focusEditor({ page, isMobile });\n     await clearEditor({ page, browserName });\n     // Then enter invalid code\n     await page.keyboard.insertText('def');"
        },
        {
            "sha": "a033b618df0e6f75ae49d05a4443da829c8ba365",
            "filename": "e2e/fixtures/build-a-personal-portfolio-webpage.json",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Ffixtures%2Fbuild-a-personal-portfolio-webpage.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Ffixtures%2Fbuild-a-personal-portfolio-webpage.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Ffixtures%2Fbuild-a-personal-portfolio-webpage.json?ref=020a8c5c3e47b059746917332d472d902a327a04",
            "patch": "@@ -0,0 +1,3 @@\n+{\n+  \"content\": \"<head><style>@media (max-width: 500px){nav{display: none;}}</style></head><body><nav id=\\\"navbar\\\"><a href=\\\"#projects\\\">text</a> | </nav><main><section id=\\\"welcome-section\\\"><h1>text</h1></section><hr><section id=\\\"projects\\\"><h1>Projects</h1><h2 class=\\\"project-tile\\\"><a id=\\\"profile-link\\\" target=\\\"_blank\\\" href=\\\"https://freecodecamp.org\\\">text</a></h2></section><hr></body></html>\"\n+}"
        },
        {
            "sha": "45b2009227c43a1437dd5b756faede643bb02a1a",
            "filename": "e2e/lower-jaw.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Flower-jaw.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Flower-jaw.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Flower-jaw.spec.ts?ref=020a8c5c3e47b059746917332d472d902a327a04",
            "patch": "@@ -110,7 +110,7 @@ test('Prompts unauthenticated user to sign in to save progress', async ({\n   const loginButton = page.getByRole('link', {\n     name: 'Sign in to save your progress'\n   });\n-  await focusEditor({ page, browserName, isMobile });\n+  await focusEditor({ page, isMobile });\n   await clearEditor({ page, browserName });\n \n   await editor.fill("
        },
        {
            "sha": "3bb60e9fb0a83b561658169be663134b52e036c0",
            "filename": "e2e/navigation-from-last-challenge.spec.ts",
            "status": "added",
            "additions": 90,
            "deletions": 0,
            "changes": 90,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Fnavigation-from-last-challenge.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Fnavigation-from-last-challenge.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fnavigation-from-last-challenge.spec.ts?ref=020a8c5c3e47b059746917332d472d902a327a04",
            "patch": "@@ -0,0 +1,90 @@\n+import { test } from '@playwright/test';\n+import solution from './fixtures/build-a-personal-portfolio-webpage.json';\n+import { clearEditor, focusEditor } from './utils/editor';\n+import { isMacOS } from './utils/user-agent';\n+\n+// middle of block\n+const challenge1 = {\n+  url: '/learn/front-end-development-libraries/front-end-development-libraries-projects/build-a-javascript-calculator',\n+  nextUrl:\n+    '/learn/front-end-development-libraries/front-end-development-libraries-projects/build-a-25--5-clock'\n+};\n+\n+// last in superblock\n+const challenge2 = {\n+  url: '/learn/college-algebra-with-python/build-a-data-graph-explorer-project/build-a-data-graph-explorer',\n+  nextUrl:\n+    '/learn/college-algebra-with-python/#build-a-data-graph-explorer-project'\n+};\n+\n+const rwdChallenge = {\n+  url: '/learn/2022/responsive-web-design/build-a-personal-portfolio-webpage-project/build-a-personal-portfolio-webpage',\n+  nextUrl:\n+    '/learn/2022/responsive-web-design/#build-a-personal-portfolio-webpage-project'\n+};\n+test.use({ storageState: 'playwright/.auth/certified-user.json' });\n+test.describe('Navigation from the middle or end (URL solution)', () => {\n+  test('In the middle of a block should take you to the next challenge', async ({\n+    page\n+  }) => {\n+    await page.goto(challenge1.url);\n+    await page\n+      .getByRole('textbox', { name: 'solution' })\n+      .fill('https://example.com');\n+    await page.keyboard.press('Enter');\n+    await page\n+      .getByRole('button', { name: 'Submit and go to next challenge' })\n+      .click();\n+    await page.waitForURL(challenge1.nextUrl);\n+  });\n+\n+  test('at the end of a superblock should take you to the superblock page with the current block hash', async ({\n+    page\n+  }) => {\n+    await page.goto(challenge2.url);\n+    await page\n+      .getByRole('textbox', { name: 'solution' })\n+      .fill('https://example.com');\n+    await page.keyboard.press('Enter');\n+    await page\n+      .getByRole('button', { name: 'Submit and go to next challenge' })\n+      .click();\n+    await page.waitForURL(challenge2.nextUrl);\n+  });\n+});\n+\n+test.describe('Should take you to the next superblock (with editor solution)', () => {\n+  test.skip(\n+    ({ browserName }) => browserName !== 'chromium',\n+    'Only chromium allows us to use the clipboard API.'\n+  );\n+  test('at the end of a superblock should take you to the superblock page with the current block hash', async ({\n+    page,\n+    isMobile,\n+    browserName,\n+    context\n+  }) => {\n+    await context.grantPermissions(['clipboard-read', 'clipboard-write']);\n+    await page.goto(rwdChallenge.url);\n+    await focusEditor({ page, isMobile });\n+    await clearEditor({ page, browserName });\n+\n+    await page.evaluate(\n+      async solution => await navigator.clipboard.writeText(solution.content),\n+      solution\n+    );\n+\n+    if (isMacOS) {\n+      await page.keyboard.press('Meta+v');\n+    } else {\n+      await page.keyboard.press('Control+v');\n+    }\n+\n+    await page.keyboard.press('Control+Enter');\n+\n+    await page\n+      .getByRole('button', { name: 'Submit and go to next challenge' })\n+      .click();\n+    await page.waitForURL(rwdChallenge.nextUrl);\n+  });\n+});"
        },
        {
            "sha": "5cdb6eb06d479ffb6a0bfd2dbcb1dc98e9291d84",
            "filename": "e2e/preview.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Fpreview.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Fpreview.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fpreview.spec.ts?ref=020a8c5c3e47b059746917332d472d902a327a04",
            "patch": "@@ -28,10 +28,9 @@ test.describe('Challenge Preview Component', () => {\n \n   test('should render correct output of changed code', async ({\n     page,\n-    browserName,\n     isMobile\n   }) => {\n-    await focusEditor({ page, isMobile, browserName });\n+    await focusEditor({ page, isMobile });\n \n     await page.keyboard.insertText('<h1>FreeCodeCamp</h1>');\n     if (isMobile) {"
        },
        {
            "sha": "8e3743ebc68e06f947aec2947cb643e759fe1cb6",
            "filename": "e2e/progress-bar.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Fprogress-bar.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Fprogress-bar.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fprogress-bar.spec.ts?ref=020a8c5c3e47b059746917332d472d902a327a04",
            "patch": "@@ -15,7 +15,7 @@ test.describe('Progress bar component', () => {\n     // If focusEditor fails, typically it's because the instructions are too\n     // large. There's a bug that means `scrollIntoView` does not work in the\n     // editor and so we have to pick less verbose challenges until that's fixed.\n-    await focusEditor({ page, isMobile, browserName });\n+    await focusEditor({ page, isMobile });\n     await clearEditor({ page, browserName });\n \n     await page.keyboard.insertText("
        },
        {
            "sha": "4f289d12d007b1f20afb1f82dda59504a4d0c887",
            "filename": "e2e/projects.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Fprojects.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Fprojects.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fprojects.spec.ts?ref=020a8c5c3e47b059746917332d472d902a327a04",
            "patch": "@@ -148,7 +148,7 @@ test.describe('JavaScript projects can be submitted and then viewed in /settings\n       '/learn/javascript-algorithms-and-data-structures/javascript-algorithms-and-data-structures-projects/palindrome-checker'\n     );\n \n-    await focusEditor({ page, browserName, isMobile });\n+    await focusEditor({ page, isMobile });\n     await clearEditor({ page, browserName });\n \n     await page.evaluate("
        },
        {
            "sha": "5572c3a6b5227b08dbcc757eaa1973b64ce77ae0",
            "filename": "e2e/utils/editor.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 12,
            "changes": 14,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Futils%2Feditor.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/020a8c5c3e47b059746917332d472d902a327a04/e2e%2Futils%2Feditor.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Futils%2Feditor.ts?ref=020a8c5c3e47b059746917332d472d902a327a04",
            "patch": "@@ -8,12 +8,10 @@ export const getEditors = (page: Page) => {\n \n export const focusEditor = async ({\n   page,\n-  isMobile,\n-  browserName\n+  isMobile\n }: {\n   page: Page;\n   isMobile: boolean;\n-  browserName: string;\n }) => {\n   if (isMobile) {\n     const codeBtn = page.getByRole('tab', { name: 'Code' });\n@@ -23,15 +21,7 @@ export const focusEditor = async ({\n     await codeBtn.click({ force: true });\n   }\n \n-  // The editor has an overlay div, which prevents the click event from bubbling up in iOS Safari.\n-  // This is a quirk in this browser-OS combination, and the workaround here is to use `.focus()`\n-  // in place of `.click()` to focus on the editor.\n-  // Ref: https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n-  if (isMobile && browserName === 'webkit') {\n-    await getEditors(page).focus();\n-  } else {\n-    await getEditors(page).click();\n-  }\n+  await getEditors(page).focus();\n };\n \n export async function clearEditor({"
        }
    ],
    "stats": {
        "total": 122,
        "additions": 102,
        "deletions": 20
    }
}