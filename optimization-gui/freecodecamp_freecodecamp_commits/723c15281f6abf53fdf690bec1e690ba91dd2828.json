{
    "author": "Abhishek-dev479",
    "message": "fix(curriculum): Date Validation in Tests with Non-UTC Server Timezones  (#57426)",
    "sha": "723c15281f6abf53fdf690bec1e690ba91dd2828",
    "files": [
        {
            "sha": "0f7ade1e6fd315cb0f53167f1849b7be1e9cbc9a",
            "filename": "curriculum/challenges/english/05-back-end-development-and-apis/back-end-development-and-apis-projects/exercise-tracker.md",
            "status": "modified",
            "additions": 45,
            "deletions": 19,
            "changes": 64,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/723c15281f6abf53fdf690bec1e690ba91dd2828/curriculum%2Fchallenges%2Fenglish%2F05-back-end-development-and-apis%2Fback-end-development-and-apis-projects%2Fexercise-tracker.md",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/723c15281f6abf53fdf690bec1e690ba91dd2828/curriculum%2Fchallenges%2Fenglish%2F05-back-end-development-and-apis%2Fback-end-development-and-apis-projects%2Fexercise-tracker.md",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fchallenges%2Fenglish%2F05-back-end-development-and-apis%2Fback-end-development-and-apis-projects%2Fexercise-tracker.md?ref=723c15281f6abf53fdf690bec1e690ba91dd2828",
            "patch": "@@ -212,15 +212,29 @@ async (getUserInput) => {\n       headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n       body: `description=${expected.description}&duration=${expected.duration}&date=1990-01-01`\n     });\n-    if (addRes.ok) {\n-      const actual = await addRes.json();\n-      assert.deepEqual(actual, expected);\n-      assert.isString(actual.description);\n-      assert.isNumber(actual.duration);\n-      assert.isString(actual.date);\n-    } else {\n+    assert.isTrue(addRes.ok);\n+    if (!addRes.ok) {\n       throw new Error(`${addRes.status} ${addRes.statusText}`);\n     }\n+    const responseBody = await addRes.json();\n+    assert.isString(responseBody.description);\n+    assert.isNumber(responseBody.duration);\n+    assert.isString(responseBody.date);\n+    assert.equal(responseBody._id, expected._id);\n+    assert.equal(responseBody.username, expected.username);\n+    assert.equal(responseBody.description, expected.description);\n+    assert.equal(responseBody.duration, expected.duration);\n+    const receivedDate = new Date(responseBody.date);\n+    const expectedDate = new Date(expected.date); // Jan 1, 1990\n+    const allowedPreviousDate = new Date(expectedDate);\n+    allowedPreviousDate.setDate(expectedDate.getDate() - 1); // Dec 31, 1989\n+    const isValidDate =\n+      receivedDate.toDateString() === expectedDate.toDateString() ||\n+      receivedDate.toDateString() === allowedPreviousDate.toDateString();\n+    assert.isTrue(\n+      isValidDate,\n+      `Expected date to be ${expectedDate.toDateString()} or ${allowedPreviousDate.toDateString()}, but got ${receivedDate.toDateString()}`\n+    );\n   } else {\n     throw new Error(`${res.status} ${res.statusText}`);\n   }\n@@ -495,26 +509,38 @@ async(getUserInput) => {\n The `date` property of any object in the `log` array that is returned from `GET /api/users/:_id/logs` should be a string. Use the `dateString` format of the `Date` API.\n \n ```js\n-async(getUserInput) => {\n+async (getUserInput) => {\n   const url = getUserInput('url');\n   const res = await fetch(url + '/api/users', {\n     method: 'POST',\n     headers: {\n       'Content-Type': 'application/x-www-form-urlencoded',\n     },\n-    body: `username=fcc_test_${Date.now()}`.substring(0,29)\n+    body: `username=fcc_test_${Date.now()}`.substring(0, 29)\n   });\n-  if(res.ok) {\n-    const {_id, username} = await res.json();\n+  \n+  if (res.ok) {\n+    const { _id, username } = await res.json();\n+    const currentDate = new Date();\n+    const expectedDates = [\n+      new Date(currentDate.setDate(currentDate.getDate() - 1)).toLocaleDateString(\"en-US\", {\n+        timeZone: \"UTC\", weekday: \"short\", month: \"short\",\n+        day: \"2-digit\", year: \"numeric\"\n+      }).replaceAll(',', ''),\n+      new Date().toLocaleDateString(\"en-US\", {\n+        timeZone: \"UTC\", weekday: \"short\", month: \"short\",\n+        day: \"2-digit\", year: \"numeric\"\n+      }).replaceAll(',', ''),\n+      new Date(currentDate.setDate(currentDate.getDate() + 1)).toLocaleDateString(\"en-US\", {\n+        timeZone: \"UTC\", weekday: \"short\", month: \"short\",\n+        day: \"2-digit\", year: \"numeric\"\n+      }).replaceAll(',', '')\n+    ];\n     const expected = {\n       username,\n       description: 'test',\n       duration: 60,\n       _id,\n-      date: new Date().toLocaleDateString(\"en-US\", {\n-        timeZone: \"UTC\", weekday: \"short\", month: \"short\",\n-        day: \"2-digit\", year: \"numeric\"\n-      }).replaceAll(',', '')\n     };\n     const addRes = await fetch(url + `/api/users/${_id}/exercises`, {\n       method: 'POST',\n@@ -523,13 +549,13 @@ async(getUserInput) => {\n       },\n       body: `description=${expected.description}&duration=${expected.duration}`\n     });\n-    if(addRes.ok) {\n+    if (addRes.ok) {\n       const logRes = await fetch(url + `/api/users/${_id}/logs`);\n-      if(logRes.ok){\n-        const {log} = await logRes.json();\n+      if (logRes.ok) {\n+        const { log } = await logRes.json();\n         const exercise = log[0];\n         assert.isString(exercise.date);\n-        assert.equal(exercise.date, expected.date);\n+        assert.include(expectedDates, exercise.date); // Check if date matches any valid dates\n       } else {\n         throw new Error(`${logRes.status} ${logRes.statusText}`);\n       }"
        }
    ],
    "stats": {
        "total": 64,
        "additions": 45,
        "deletions": 19
    }
}