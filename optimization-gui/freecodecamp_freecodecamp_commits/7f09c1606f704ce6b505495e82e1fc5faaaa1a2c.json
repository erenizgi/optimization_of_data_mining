{
    "author": "Sembauke",
    "message": "fix: reset username change spec test (#56845)",
    "sha": "7f09c1606f704ce6b505495e82e1fc5faaaa1a2c",
    "files": [
        {
            "sha": "0b0d2ff8546b6bdba32e27965e574d618c456c23",
            "filename": "e2e/username-change.spec.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 8,
            "changes": 17,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/7f09c1606f704ce6b505495e82e1fc5faaaa1a2c/e2e%2Fusername-change.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/7f09c1606f704ce6b505495e82e1fc5faaaa1a2c/e2e%2Fusername-change.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fusername-change.spec.ts?ref=7f09c1606f704ce6b505495e82e1fc5faaaa1a2c",
            "patch": "@@ -1,7 +1,13 @@\n+import { execSync } from 'child_process';\n import { test, expect } from '@playwright/test';\n import translations from '../client/i18n/locales/english/translations.json';\n test.use({ storageState: 'playwright/.auth/certified-user.json' });\n \n+test.afterAll(() => {\n+  // change the name back to the original\n+  execSync('node ./tools/scripts/seed/seed-demo-user --certified-user');\n+});\n+\n const settingsObject = {\n   usernamePlaceholder: '{{username}}',\n   usernameUpdateToLowerCase: 'quincy',\n@@ -16,11 +22,10 @@ const settingsObject = {\n   errorCode: '404'\n };\n \n-let currentUsername = 'certifieduser';\n-\n test.describe('Username Settings Validation', () => {\n   test.beforeEach(async ({ page }) => {\n-    await page.goto(`/${currentUsername}`);\n+    execSync('node ./tools/scripts/seed/seed-demo-user --certified-user');\n+    await page.goto(`/certifieduser`);\n \n     if (!process.env.CI) {\n       await page\n@@ -108,7 +113,6 @@ test.describe('Username Settings Validation', () => {\n     await expect(\n       page.getByRole('alert').filter({ hasText: flashText }).first()\n     ).toBeVisible();\n-    currentUsername = settingsObject.usernameAvailable;\n   });\n \n   test('should update username in lowercase and reflect in the UI', async ({\n@@ -129,7 +133,6 @@ test.describe('Username Settings Validation', () => {\n     await expect(\n       page.getByRole('alert').filter({ hasText: flashText }).first()\n     ).toBeVisible();\n-    currentUsername = settingsObject.usernameUpdateToLowerCase;\n   });\n \n   test('should update username in uppercase and reflect in the UI', async ({\n@@ -150,7 +153,6 @@ test.describe('Username Settings Validation', () => {\n     await expect(\n       page.getByRole('alert').filter({ hasText: flashText }).first()\n     ).toBeVisible();\n-    currentUsername = settingsObject.usernameUpdateToUpperCase;\n   });\n \n   test('should update username by pressing enter', async ({ page }) => {\n@@ -171,7 +173,6 @@ test.describe('Username Settings Validation', () => {\n     await expect(\n       page.getByRole('alert').filter({ hasText: flashText }).first()\n     ).toBeVisible();\n-    currentUsername = settingsObject.testUser;\n   });\n \n   test('should not be able to update username to the same username', async ({\n@@ -181,7 +182,7 @@ test.describe('Username Settings Validation', () => {\n     const saveButton = page.getByRole('button', {\n       name: translations.settings.labels.username\n     });\n-    await inputLabel.fill(settingsObject.testUser);\n+    await inputLabel.fill(settingsObject.certifiedUsername);\n     await expect(saveButton).toBeDisabled();\n   });\n });"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 9,
        "deletions": 8
    }
}