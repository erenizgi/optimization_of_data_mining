{
    "author": "ojeytonwilliams",
    "message": "fix: optionally keep source if setting file contents (#58747)\n\nCo-authored-by: Naomi <accounts+github@nhcarrigan.com>",
    "sha": "71e39308a4cf464e4999fb5a33a48da37ebd881c",
    "files": [
        {
            "sha": "135ef92191c968bc094d1a39bdb4394654ba1376",
            "filename": "shared/utils/polyvinyl.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 9,
            "changes": 19,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/71e39308a4cf464e4999fb5a33a48da37ebd881c/shared%2Futils%2Fpolyvinyl.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/71e39308a4cf464e4999fb5a33a48da37ebd881c/shared%2Futils%2Fpolyvinyl.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/shared%2Futils%2Fpolyvinyl.ts?ref=71e39308a4cf464e4999fb5a33a48da37ebd881c",
            "patch": "@@ -21,7 +21,7 @@ export interface ChallengeFile extends IncompleteChallengeFile {\n   head: string;\n   tail: string;\n   seed?: string;\n-  source?: string | null;\n+  source?: string;\n   path: string;\n   history: string[];\n }\n@@ -105,16 +105,17 @@ function checkPoly(poly: ChallengeFile) {\n   );\n }\n \n-// setContent will lose source if set\n+// setContent will lose source if not supplied\n export function setContent(\n   contents: string,\n-  poly: ChallengeFile\n+  poly: ChallengeFile,\n+  source?: string\n ): ChallengeFile {\n   checkPoly(poly);\n   return {\n     ...poly,\n     contents,\n-    source: null\n+    source\n   };\n }\n \n@@ -161,9 +162,7 @@ export async function transformContents(\n   polyP: ChallengeFile | Promise<ChallengeFile>\n ) {\n   const poly = await polyP;\n-  const newPoly = setContent(await wrap(poly.contents), poly);\n-  // if no source exist, set the original contents as source\n-  newPoly.source = poly.source || poly.contents;\n+  const newPoly = setContent(await wrap(poly.contents), poly, poly.source);\n   return newPoly;\n }\n \n@@ -183,9 +182,11 @@ export async function transformHeadTailAndContents(\n }\n \n // createSource(poly: PolyVinyl) => PolyVinyl\n-export function createSource(poly: Pick<ChallengeFile, 'contents' | 'source'>) {\n+export function createSource<Rest>(\n+  poly: Pick<ChallengeFile, 'contents' | 'source'> & Rest\n+): Rest & { contents: string; source: string } {\n   return {\n     ...poly,\n-    source: poly.source || poly.contents\n+    source: poly.source ?? poly.contents\n   };\n }"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 10,
        "deletions": 9
    }
}