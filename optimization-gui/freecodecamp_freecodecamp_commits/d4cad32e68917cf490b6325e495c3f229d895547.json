{
    "author": "Sembauke",
    "message": "feat: convert \"Donation Block Completion modal\" tests to Playwright (#54903)",
    "sha": "d4cad32e68917cf490b6325e495c3f229d895547",
    "files": [
        {
            "sha": "d5b394cb67aab1bb4dbe55143ae6100c562c641c",
            "filename": "cypress/e2e/default/learn/donate/donation-block-completion-modal.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 39,
            "changes": 39,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/26ea6d30c9dfff59a7e7ad5c494b7bfbab7df4be/cypress%2Fe2e%2Fdefault%2Flearn%2Fdonate%2Fdonation-block-completion-modal.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/26ea6d30c9dfff59a7e7ad5c494b7bfbab7df4be/cypress%2Fe2e%2Fdefault%2Flearn%2Fdonate%2Fdonation-block-completion-modal.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/cypress%2Fe2e%2Fdefault%2Flearn%2Fdonate%2Fdonation-block-completion-modal.ts?ref=26ea6d30c9dfff59a7e7ad5c494b7bfbab7df4be",
            "patch": "@@ -1,39 +0,0 @@\n-describe('Donate page', () => {\n-  before(() => {\n-    cy.task('seed');\n-    cy.login();\n-  });\n-\n-  after(() => {\n-    cy.task('seed');\n-  });\n-\n-  const projects = [\n-    'random-quote-machine',\n-    'markdown-previewer',\n-    'drum-machine',\n-    'javascript-calculator',\n-    '25--5-clock'\n-  ];\n-\n-  it('Should be possible to submit projects', () => {\n-    const submitProject = (str: string) => {\n-      cy.visit(\n-        `/learn/front-end-development-libraries/front-end-development-libraries-projects/build-a-${str}`\n-      );\n-      cy.get('#dynamic-front-end-form')\n-        .get('#solution')\n-        .type('https://codepen.io/camperbot/full/oNvPqqo', {\n-          force: true\n-        });\n-\n-      cy.contains(\"I've completed this challenge\").click();\n-      cy.contains('Submit and go to next challenge').click();\n-    };\n-\n-    projects.forEach(project => submitProject(project));\n-\n-    // pop up modal\n-    cy.get(\"div[role='dialog'] img#donation-animation\").should('be.visible');\n-  });\n-});"
        },
        {
            "sha": "e04eec56d5431e5cd271ba13483d6e4b4cabd30e",
            "filename": "e2e/donation-block-completion-modal.spec.ts",
            "status": "added",
            "additions": 48,
            "deletions": 0,
            "changes": 48,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/d4cad32e68917cf490b6325e495c3f229d895547/e2e%2Fdonation-block-completion-modal.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/d4cad32e68917cf490b6325e495c3f229d895547/e2e%2Fdonation-block-completion-modal.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fdonation-block-completion-modal.spec.ts?ref=d4cad32e68917cf490b6325e495c3f229d895547",
            "patch": "@@ -0,0 +1,48 @@\n+import { execSync } from 'child_process';\n+import { test, expect, Page } from '@playwright/test';\n+test.use({ storageState: 'playwright/.auth/development-user.json' });\n+\n+test.beforeAll(() => {\n+  execSync('node ./tools/scripts/seed/seed-demo-user');\n+});\n+\n+test.afterAll(() => {\n+  execSync('node ./tools/scripts/seed/seed-demo-user certified-user');\n+});\n+const projects = [\n+  'random-quote-machine',\n+  'markdown-previewer',\n+  'drum-machine',\n+  'javascript-calculator',\n+  '25--5-clock'\n+];\n+\n+test.describe('Donate page', () => {\n+  const submitProject = async (page: Page, str: string) => {\n+    await page.goto(\n+      `/learn/front-end-development-libraries/front-end-development-libraries-projects/build-a-${str}`\n+    );\n+    await page\n+      .getByRole('textbox', { name: 'solution' })\n+      .fill('https://codepen.io/camperbot/full/oNvPqqo');\n+    await page\n+      .getByRole('button', { name: \"I've completed this challenge\" })\n+      .click();\n+    await page\n+      .getByRole('button', { name: 'Submit and go to next challenge' })\n+      .click();\n+  };\n+\n+  test('Should be possible to submit projects, after the donation modal should show', async ({\n+    page\n+  }) => {\n+    for (const project of projects) {\n+      await submitProject(page, project);\n+    }\n+\n+    await expect(page.getByRole('dialog')).toBeVisible();\n+    await expect(\n+      page.locator(\"div[role='dialog'] img#donation-animation\")\n+    ).toBeVisible();\n+  });\n+});"
        }
    ],
    "stats": {
        "total": 87,
        "additions": 48,
        "deletions": 39
    }
}