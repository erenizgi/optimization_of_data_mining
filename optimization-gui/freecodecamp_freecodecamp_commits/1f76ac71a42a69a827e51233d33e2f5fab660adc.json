{
    "author": "Sembauke",
    "message": "feat(client): exam environment download page (#57325)\n\nCo-authored-by: Shaun Hamilton <shauhami020@gmail.com>",
    "sha": "1f76ac71a42a69a827e51233d33e2f5fab660adc",
    "files": [
        {
            "sha": "d5842ed93e232e874668eea2e139d16f94315911",
            "filename": "client/i18n/locales/english/translations.json",
            "status": "modified",
            "additions": 12,
            "deletions": 1,
            "changes": 13,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/1f76ac71a42a69a827e51233d33e2f5fab660adc/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/1f76ac71a42a69a827e51233d33e2f5fab660adc/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json?ref=1f76ac71a42a69a827e51233d33e2f5fab660adc",
            "patch": "@@ -38,6 +38,7 @@\n     \"news\": \"News\",\n     \"donate\": \"Donate\",\n     \"supporters\": \"Supporters\",\n+    \"exam-app\": \"Exam App\",\n     \"go-to-supporters\": \"Go to Supporters Page\",\n     \"update-settings\": \"Update my account settings\",\n     \"sign-me-out\": \"Sign me out of freeCodeCamp\",\n@@ -114,7 +115,9 @@\n     \"closed-caption\": \"Closed caption\",\n     \"share-on-x\": \"Share on X\",\n     \"share-on-bluesky\": \"Share on BlueSky\",\n-    \"share-on-threads\": \"Share on Threads\"\n+    \"share-on-threads\": \"Share on Threads\",\n+    \"play-scene\": \"Press Play\",\n+    \"download-latest-version\": \"Download the Latest Version\"\n   },\n   \"landing\": {\n     \"big-heading-1\": \"Learn to code â€” for free.\",\n@@ -345,6 +348,14 @@\n       \"p7\": \"As an academic institution that grants achievement-based certifications, we take academic honesty very seriously. If you have any questions about this policy, or suspect that someone has violated it, you can email <0>{{email}}</0> and we will investigate.\"\n     }\n   },\n+  \"exam\": {\n+    \"download-header\": \"Download the freeCodeCamp Exam Environment App\",\n+    \"explanation\": \"To earn a certification, you must take an exam to test your understanding of the material you have learned. Taking the exam is absolutely free of charge.\",\n+    \"version\": \"The latest version of our app is: {{version}}.\",\n+    \"download-details\": \"Manually download the app\",\n+    \"unable-to-detect-os\": \"We were unable to detect your operating system. Please manually download the app below.\",\n+    \"download-trouble\": \"If you have trouble downloading the correct version, do not hesitate to contact support:\"\n+  },\n   \"profile\": {\n     \"you-change-privacy\": \"You need to change your privacy setting in order for your portfolio to be seen by others. This is a preview of how your portfolio will look when made public.\",\n     \"username-change-privacy\": \"{{username}} needs to change their privacy setting in order for you to view their portfolio.\","
        },
        {
            "sha": "04d55af385ff7629100c226c816a607e02220089",
            "filename": "client/src/templates/Challenges/exam-download/show.tsx",
            "status": "added",
            "additions": 146,
            "deletions": 0,
            "changes": 146,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/1f76ac71a42a69a827e51233d33e2f5fab660adc/client%2Fsrc%2Ftemplates%2FChallenges%2Fexam-download%2Fshow.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/1f76ac71a42a69a827e51233d33e2f5fab660adc/client%2Fsrc%2Ftemplates%2FChallenges%2Fexam-download%2Fshow.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fexam-download%2Fshow.tsx?ref=1f76ac71a42a69a827e51233d33e2f5fab660adc",
            "patch": "@@ -0,0 +1,146 @@\n+import React, { useEffect, useState } from 'react';\n+import { Button, Spacer } from '@freecodecamp/ui';\n+import { isEmpty } from 'lodash';\n+import { useTranslation } from 'react-i18next';\n+import { FullWidthRow } from '../../../components/helpers';\n+import useDetectOS from '../utils/use-detect-os';\n+\n+interface GitProps {\n+  tag_name: string;\n+  assets: {\n+    browser_download_url: string;\n+  }[];\n+}\n+\n+function ShowExamDownload(): JSX.Element {\n+  const [latestVersion, setLatestVersion] = useState<string | null>(null);\n+\n+  const [downloadLink, setDownloadLink] = useState<string | undefined>('');\n+  const [downloadLinks, setDownloadLinks] = useState<string[]>([]);\n+\n+  const os = useDetectOS();\n+\n+  const { t } = useTranslation();\n+\n+  const handleDownloadLink = (downloadLinks: string[]) => {\n+    const win = downloadLinks.find(link => link.match(/\\.msi/));\n+    const macARM = downloadLinks.find(\n+      link => link.match(/aarch64/) && link.match(/\\.dmg/)\n+    );\n+    const macX64 = downloadLinks.find(\n+      link => link.match(/x64/) && link.match(/\\.dmg/)\n+    );\n+\n+    const linuxARM = downloadLinks.find(\n+      link => link.match(/aarch64/) && link.match(/tar\\.gz/)\n+    );\n+\n+    const linuxX64 = downloadLinks.find(\n+      link => link.match(/amd64/) && link.match(/AppImage/)\n+    );\n+\n+    if (os.os === 'WIN') {\n+      if (isEmpty(win)) return '';\n+\n+      return win;\n+    }\n+\n+    if (os.os === 'MAC') {\n+      if (os.architecture.toLowerCase() === 'arm') {\n+        if (isEmpty(macARM)) return '';\n+\n+        return macARM;\n+      } else {\n+        if (isEmpty(macX64)) return '';\n+\n+        return macX64;\n+      }\n+    }\n+\n+    if (os.os === 'LINUX') {\n+      if (os.architecture.toLowerCase() === 'arm') {\n+        if (isEmpty(linuxARM)) return '';\n+\n+        return linuxARM;\n+      } else {\n+        if (isEmpty(linuxX64)) return '';\n+\n+        return linuxX64;\n+      }\n+    }\n+\n+    return '';\n+  };\n+\n+  useEffect(() => {\n+    const checkLatestVersion = async () => {\n+      return await fetch(\n+        'https://api.github.com/repos/freeCodeCamp/exam-env/releases/latest'\n+      );\n+    };\n+    checkLatestVersion()\n+      .then(response => {\n+        if (response.ok) {\n+          void response.json().then(data => {\n+            const { tag_name, assets } = data as GitProps;\n+            setLatestVersion(tag_name);\n+\n+            setDownloadLink(\n+              handleDownloadLink(\n+                assets.map(links => links.browser_download_url)\n+              )\n+            );\n+\n+            setDownloadLinks(assets.map(links => links.browser_download_url));\n+          });\n+        }\n+      })\n+      .catch(() => {\n+        setLatestVersion('...');\n+      });\n+  });\n+\n+  return (\n+    <FullWidthRow>\n+      <Spacer size='l' />\n+      <h2>{t('exam.download-header')}</h2>\n+      <p>{t('exam.explanation')}</p>\n+      <p>\n+        {t('exam.version', {\n+          version: latestVersion || '...'\n+        })}\n+      </p>\n+      <Button\n+        disabled={!downloadLink}\n+        aria-disabled={!downloadLink}\n+        href={downloadLink}\n+        download={downloadLink}\n+      >\n+        {t('buttons.download-latest-version')}\n+      </Button>\n+      {!downloadLink && <strong>{t('exam.unable-to-detect-os')}</strong>}\n+      <Spacer size='l' />\n+      <details>\n+        <summary>{t('exam.download-details')}</summary>\n+        <ul>\n+          {downloadLinks\n+            .filter(link => !link.match(/\\.sig|\\.json/))\n+            .map((link, index) => {\n+              return (\n+                <li key={index} style={{ listStyle: 'none' }}>\n+                  <a href={link} download={link}>\n+                    {link}\n+                  </a>\n+                </li>\n+              );\n+            })}\n+        </ul>\n+      </details>\n+      <Spacer size='l' />\n+      <strong>{t('exam.download-trouble')}</strong>\n+      <a href='mailto: support@freecodecamp.org'>support@freecodecamp.org</a>\n+    </FullWidthRow>\n+  );\n+}\n+\n+export default ShowExamDownload;"
        },
        {
            "sha": "3c93be90c1bbd51517e4c8382795d56cfabcd70b",
            "filename": "client/src/templates/Challenges/utils/use-detect-os.ts",
            "status": "added",
            "additions": 76,
            "deletions": 0,
            "changes": 76,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/1f76ac71a42a69a827e51233d33e2f5fab660adc/client%2Fsrc%2Ftemplates%2FChallenges%2Futils%2Fuse-detect-os.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/1f76ac71a42a69a827e51233d33e2f5fab660adc/client%2Fsrc%2Ftemplates%2FChallenges%2Futils%2Fuse-detect-os.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Futils%2Fuse-detect-os.ts?ref=1f76ac71a42a69a827e51233d33e2f5fab660adc",
            "patch": "@@ -0,0 +1,76 @@\n+import { useEffect, useState } from 'react';\n+\n+type UserOS = 'MAC' | 'WIN' | 'LINUX' | 'AIX' | 'OTHER' | 'LOADING';\n+\n+type UserOSState = {\n+  os: UserOS;\n+  architecture: string;\n+};\n+\n+interface NavigatorUAData {\n+  getHighEntropyValues(hints: string[]): Promise<Record<string, string>>;\n+}\n+\n+interface Navigator {\n+  userAgentData?: NavigatorUAData;\n+}\n+\n+const getArchitecture = async (): Promise<string> => {\n+  if ((navigator as Navigator).userAgentData?.getHighEntropyValues) {\n+    try {\n+      const { architecture } =\n+        (await (navigator as Navigator).userAgentData?.getHighEntropyValues([\n+          'architecture'\n+        ])) ?? {};\n+      if (architecture) {\n+        return architecture;\n+      }\n+    } catch (error) {\n+      console.error(\n+        'Error fetching architecture via User-Agent Client Hints:',\n+        error\n+      );\n+    }\n+  }\n+\n+  const userAgent = navigator.userAgent;\n+\n+  if (/x86_64|Win64|WOW64|amd64/.test(userAgent)) {\n+    return 'x86_64';\n+  } else if (/i686|x86|Win32/.test(userAgent)) {\n+    return 'x86';\n+  } else if (/arm|aarch64/.test(userAgent)) {\n+    return /aarch64/.test(userAgent) ? 'ARM64' : 'ARM';\n+  }\n+\n+  return 'Unknown';\n+};\n+\n+export const detectOsInUserAgent = (userAgent: string | undefined): UserOS => {\n+  const osMatch = userAgent?.match(/(Win|Mac|Linux)/);\n+  return osMatch ? (osMatch[1].toUpperCase() as UserOS) : 'OTHER';\n+};\n+\n+export const detectOS = (): UserOS => detectOsInUserAgent(navigator?.userAgent);\n+\n+const useDetectOS = () => {\n+  const [userOS, setUserOS] = useState<UserOSState>({\n+    os: 'LOADING',\n+    architecture: 'LOADING'\n+  });\n+\n+  useEffect(() => {\n+    Promise.all([getArchitecture()])\n+      .then(([arch]) => {\n+        setUserOS({\n+          os: detectOS(),\n+          architecture: arch ? arch : ''\n+        });\n+      })\n+      .catch(console.error);\n+  }, []);\n+\n+  return userOS;\n+};\n+\n+export default useDetectOS;"
        },
        {
            "sha": "b2c35b936e6d6ef114ea24d39d207ef82f26df26",
            "filename": "client/utils/gatsby/challenge-page-creator.js",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/1f76ac71a42a69a827e51233d33e2f5fab660adc/client%2Futils%2Fgatsby%2Fchallenge-page-creator.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/1f76ac71a42a69a827e51233d33e2f5fab660adc/client%2Futils%2Fgatsby%2Fchallenge-page-creator.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Futils%2Fgatsby%2Fchallenge-page-creator.js?ref=1f76ac71a42a69a827e51233d33e2f5fab660adc",
            "patch": "@@ -50,6 +50,11 @@ const generic = path.resolve(\n   '../../src/templates/Challenges/generic/show.tsx'\n );\n \n+const examDownload = path.resolve(\n+  __dirname,\n+  '../../src/templates/Challenges/exam-download/show.tsx'\n+);\n+\n const views = {\n   backend,\n   classic,\n@@ -60,7 +65,8 @@ const views = {\n   exam,\n   msTrophy,\n   fillInTheBlank,\n-  generic\n+  generic,\n+  examDownload\n };\n \n function getIsFirstStepInBlock(id, edges) {"
        },
        {
            "sha": "6e81de3bf9360ddef92c1d3754ce19fc637203ef",
            "filename": "curriculum/challenges/english/25-front-end-development/exam-certified-full-stack-developer/645147516c245de4d11eb7ba.md",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/1f76ac71a42a69a827e51233d33e2f5fab660adc/curriculum%2Fchallenges%2Fenglish%2F25-front-end-development%2Fexam-certified-full-stack-developer%2F645147516c245de4d11eb7ba.md",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/1f76ac71a42a69a827e51233d33e2f5fab660adc/curriculum%2Fchallenges%2Fenglish%2F25-front-end-development%2Fexam-certified-full-stack-developer%2F645147516c245de4d11eb7ba.md",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fchallenges%2Fenglish%2F25-front-end-development%2Fexam-certified-full-stack-developer%2F645147516c245de4d11eb7ba.md?ref=1f76ac71a42a69a827e51233d33e2f5fab660adc",
            "patch": "@@ -1,7 +1,7 @@\n ---\n id: 645147516c245de4d11eb7ba\n title: Certified Full Stack Developer Exam\n-challengeType: 24\n+challengeType: 30\n dashedName: exam-certified-full-stack-developer\n ---\n "
        },
        {
            "sha": "8eab41bbc9788aa70596bf2d71b58fc08658f98b",
            "filename": "curriculum/schema/challenge-schema.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/1f76ac71a42a69a827e51233d33e2f5fab660adc/curriculum%2Fschema%2Fchallenge-schema.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/1f76ac71a42a69a827e51233d33e2f5fab660adc/curriculum%2Fschema%2Fchallenge-schema.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fschema%2Fchallenge-schema.js?ref=1f76ac71a42a69a827e51233d33e2f5fab660adc",
            "patch": "@@ -159,7 +159,7 @@ const schema = Joi.object()\n       otherwise: Joi.optional()\n     }),\n     certification: Joi.string().regex(slugWithSlashRE),\n-    challengeType: Joi.number().min(0).max(29).required(),\n+    challengeType: Joi.number().min(0).max(30).required(),\n     checksum: Joi.number(),\n     // TODO: require this only for normal challenges, not certs\n     dashedName: Joi.string().regex(slugRE),"
        },
        {
            "sha": "42505d8bb5224c45f08133ca6eb1dfd0e60e6001",
            "filename": "shared/config/challenge-types.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 4,
            "changes": 13,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/1f76ac71a42a69a827e51233d33e2f5fab660adc/shared%2Fconfig%2Fchallenge-types.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/1f76ac71a42a69a827e51233d33e2f5fab660adc/shared%2Fconfig%2Fchallenge-types.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/shared%2Fconfig%2Fchallenge-types.ts?ref=1f76ac71a42a69a827e51233d33e2f5fab660adc",
            "patch": "@@ -29,6 +29,7 @@ const jsLab = 26;\n const pyLab = 27;\n const dailyChallengeJs = 28;\n const dailyChallengePy = 29;\n+const examDownload = 30;\n \n export const challengeTypes = {\n   html,\n@@ -61,7 +62,8 @@ export const challengeTypes = {\n   jsLab,\n   pyLab,\n   dailyChallengeJs,\n-  dailyChallengePy\n+  dailyChallengePy,\n+  examDownload\n };\n \n export const hasNoSolution = (challengeType: number): boolean => {\n@@ -84,7 +86,8 @@ export const hasNoSolution = (challengeType: number): boolean => {\n     multipleChoice,\n     dialogue,\n     fillInTheBlank,\n-    generic\n+    generic,\n+    examDownload\n   ];\n \n   return noSolutions.includes(challengeType);\n@@ -120,7 +123,8 @@ export const viewTypes = {\n   [jsLab]: 'classic',\n   [pyLab]: 'classic',\n   [dailyChallengeJs]: 'classic',\n-  [dailyChallengePy]: 'classic'\n+  [dailyChallengePy]: 'classic',\n+  [examDownload]: 'examDownload'\n };\n \n // determine the type of submit function to use for the challenge on completion\n@@ -157,7 +161,8 @@ export const submitTypes = {\n   [jsLab]: 'tests',\n   [pyLab]: 'tests',\n   [dailyChallengeJs]: 'tests',\n-  [dailyChallengePy]: 'tests'\n+  [dailyChallengePy]: 'tests',\n+  [examDownload]: 'examDownload'\n };\n \n export const canSaveToDB = (challengeType: number): boolean =>"
        }
    ],
    "stats": {
        "total": 260,
        "additions": 252,
        "deletions": 8
    }
}