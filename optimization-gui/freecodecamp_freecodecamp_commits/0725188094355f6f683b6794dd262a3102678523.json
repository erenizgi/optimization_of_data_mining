{
    "author": "dev-kamil",
    "message": "fix(curriculum): Add test and user story to enforce correct RPG Creature API endpoint usage (#61194)",
    "sha": "0725188094355f6f683b6794dd262a3102678523",
    "files": [
        {
            "sha": "905989bf9ab1b6b8f33f7caca9755622e46ac61c",
            "filename": "curriculum/challenges/english/15-javascript-algorithms-and-data-structures-22/build-an-rpg-creature-search-app-project/build-an-rpg-creature-search-app.md",
            "status": "modified",
            "additions": 32,
            "deletions": 0,
            "changes": 32,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0725188094355f6f683b6794dd262a3102678523/curriculum%2Fchallenges%2Fenglish%2F15-javascript-algorithms-and-data-structures-22%2Fbuild-an-rpg-creature-search-app-project%2Fbuild-an-rpg-creature-search-app.md",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0725188094355f6f683b6794dd262a3102678523/curriculum%2Fchallenges%2Fenglish%2F15-javascript-algorithms-and-data-structures-22%2Fbuild-an-rpg-creature-search-app-project%2Fbuild-an-rpg-creature-search-app.md",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fchallenges%2Fenglish%2F15-javascript-algorithms-and-data-structures-22%2Fbuild-an-rpg-creature-search-app-project%2Fbuild-an-rpg-creature-search-app.md?ref=0725188094355f6f683b6794dd262a3102678523",
            "patch": "@@ -382,6 +382,38 @@ async () => {\n };\n ```\n \n+When the search button is clicked, the app should send a fetch request to the correct endpoint for the creature name or ID.\n+\n+```js\n+async () => {\n+  const spy = __helpers.spyOn(window, 'fetch');\n+  const searchInput = document.getElementById('search-input');\n+  const searchButton = document.getElementById('search-button');\n+\n+  searchInput.value = 'Pyrolynx';\n+  searchInput.dispatchEvent(new Event('change'));\n+  searchButton.click();\n+  await new Promise((resolve) => setTimeout(resolve, 500));\n+\n+  searchInput.value = '2';\n+  searchInput.dispatchEvent(new Event('change'));\n+  searchButton.click();\n+  await new Promise((resolve) => setTimeout(resolve, 500));\n+\n+  // Test with random valid ID\n+  const randomValidCreatureId = String(Math.floor(Math.random() * 20) + 1);\n+  searchInput.value = randomValidCreatureId;\n+  searchInput.dispatchEvent(new Event('change'));\n+  searchButton.click();\n+  await new Promise((resolve) => setTimeout(resolve, 500));\n+\n+  const calls = spy.calls.map((call) => call[0]);\n+  assert.strictEqual(calls[0].toLowerCase(), 'https://rpg-creature-api.freecodecamp.rocks/api/creature/pyrolynx');\n+  assert.strictEqual(calls[1], 'https://rpg-creature-api.freecodecamp.rocks/api/creature/2');\n+  assert.strictEqual(calls[2], `https://rpg-creature-api.freecodecamp.rocks/api/creature/${randomValidCreatureId}`);\n+};\n+```\n+\n # --seed--\n \n ## --seed-contents--"
        }
    ],
    "stats": {
        "total": 32,
        "additions": 32,
        "deletions": 0
    }
}