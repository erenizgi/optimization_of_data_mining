{
    "author": "raisedadead",
    "message": "fix(api): adjust logs (#59887)",
    "sha": "1cab0991b590c1e436f1870171fea4c25d7ce89e",
    "files": [
        {
            "sha": "eb17ccd2e18f2da58f828f7d76aff212e9312ecf",
            "filename": "api/src/plugins/auth0.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/1cab0991b590c1e436f1870171fea4c25d7ce89e/api%2Fsrc%2Fplugins%2Fauth0.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/1cab0991b590c1e436f1870171fea4c25d7ce89e/api%2Fsrc%2Fplugins%2Fauth0.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fplugins%2Fauth0.ts?ref=1cab0991b590c1e436f1870171fea4c25d7ce89e",
            "patch": "@@ -89,8 +89,7 @@ export const auth0Client: FastifyPluginCallbackTypebox = fp(\n           logger.info('Access denied due to user location');\n           return reply.redirect(`${HOME_LOCATION}/blocked`);\n         } else {\n-          logger.error('Authentication failed for user:' + error_description);\n-\n+          logger.info('Authentication failed for user:' + error_description);\n           return reply.redirectWithMessage(`${HOME_LOCATION}/learn`, {\n             type: 'info',\n             content: error_description ?? 'Authentication failed'\n@@ -113,8 +112,7 @@ export const auth0Client: FastifyPluginCallbackTypebox = fp(\n         if (error instanceof Error && error.message === 'Invalid state') {\n           logger.error('Auth failed: invalid state');\n         } else {\n-          logger.error('Auth failed:');\n-          logger.error(error);\n+          logger.error(error, 'Auth failed');\n           fastify.Sentry.captureException(error);\n         }\n         // It's important _not_ to redirect to /signin here, as that could"
        },
        {
            "sha": "73ff3106f5110a7a685dfb668fe7d90feae83a7d",
            "filename": "api/src/plugins/mailer.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/1cab0991b590c1e436f1870171fea4c25d7ce89e/api%2Fsrc%2Fplugins%2Fmailer.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/1cab0991b590c1e436f1870171fea4c25d7ce89e/api%2Fsrc%2Fplugins%2Fmailer.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fplugins%2Fmailer.ts?ref=1cab0991b590c1e436f1870171fea4c25d7ce89e",
            "patch": "@@ -37,8 +37,7 @@ const plugin: FastifyPluginCallback<{ provider: MailProvider }> = (\n \n   fastify.decorate('sendEmail', async (args: SendEmailArgs) => {\n     const logger = fastify.log.child({ args });\n-    logger.debug('Sending Email');\n-\n+    logger.info('Sending Email');\n     return await provider.send(args);\n   });\n "
        },
        {
            "sha": "c5a636c948bc807f9546e2d5da8c6457ee341687",
            "filename": "api/src/plugins/not-found.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/1cab0991b590c1e436f1870171fea4c25d7ce89e/api%2Fsrc%2Fplugins%2Fnot-found.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/1cab0991b590c1e436f1870171fea4c25d7ce89e/api%2Fsrc%2Fplugins%2Fnot-found.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fplugins%2Fnot-found.ts?ref=1cab0991b590c1e436f1870171fea4c25d7ce89e",
            "patch": "@@ -15,11 +15,10 @@ const fourOhFour: FastifyPluginCallback = (fastify, _options, done) => {\n   // If the request accepts JSON and does not specifically prefer text/html,\n   // this will return a 404 JSON response. Everything else will be redirected.\n   fastify.setNotFoundHandler((req, reply) => {\n-    const logger = fastify.log.child({ req });\n-    const accepted = req.accepts().type(['json', 'html']);\n-\n-    logger.debug('User requested path that does not exist');\n+    const logger = fastify.log.child({});\n+    logger.info('User requested path that does not exist');\n \n+    const accepted = req.accepts().type(['json', 'html']);\n     if (accepted == 'json') {\n       void reply.code(404).send({ error: 'path not found' });\n     } else {"
        },
        {
            "sha": "73301d303c21b9ba901f919dc523b5eecaa8d5c0",
            "filename": "api/src/plugins/security.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/1cab0991b590c1e436f1870171fea4c25d7ce89e/api%2Fsrc%2Fplugins%2Fsecurity.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/1cab0991b590c1e436f1870171fea4c25d7ce89e/api%2Fsrc%2Fplugins%2Fsecurity.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fplugins%2Fsecurity.ts?ref=1cab0991b590c1e436f1870171fea4c25d7ce89e",
            "patch": "@@ -6,10 +6,6 @@ import { FREECODECAMP_NODE_ENV } from '../utils/env';\n const securityHeaders: FastifyPluginCallback = (fastify, _options, done) => {\n   // OWASP recommended headers\n   fastify.addHook('onRequest', async (req, reply) => {\n-    const logger = fastify.log.child({ req });\n-\n-    logger.debug('Adding security headers to response');\n-\n     void reply\n       .header('Cache-Control', 'no-store')\n       .header('Content-Security-Policy', \"frame-ancestors 'none'\")"
        }
    ],
    "stats": {
        "total": 20,
        "additions": 6,
        "deletions": 14
    }
}