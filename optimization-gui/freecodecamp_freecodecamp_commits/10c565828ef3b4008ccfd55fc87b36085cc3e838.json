{
    "author": "ojeytonwilliams",
    "message": "fix(tools): curriculum command line helpers (#61831)",
    "sha": "10c565828ef3b4008ccfd55fc87b36085cc3e838",
    "files": [
        {
            "sha": "3bf1f6ad9c9e0cd8365cfb025c480af62021f5fd",
            "filename": "client/utils/build-challenges.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/client%2Futils%2Fbuild-challenges.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/client%2Futils%2Fbuild-challenges.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Futils%2Fbuild-challenges.js?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -9,6 +9,7 @@ const {\n   getContentDir,\n   getBlockCreator\n } = require('../../curriculum/build-curriculum');\n+const { getBlockStructure } = require('../../curriculum/file-handler');\n \n const { curriculumLocale } = envData;\n \n@@ -23,7 +24,7 @@ exports.replaceChallengeNode = () => {\n     const filename = path.basename(filePath);\n \n     console.log(`Replacing challenge node for ${filePath}`);\n-    const meta = blockCreator.getMetaForBlock(block);\n+    const meta = getBlockStructure(block);\n \n     return await blockCreator.createChallenge({\n       filename,"
        },
        {
            "sha": "a4d4c006ef5b06cabdc84ded8982bc02c407d310",
            "filename": "curriculum/build-curriculum.js",
            "status": "modified",
            "additions": 15,
            "deletions": 110,
            "changes": 125,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/curriculum%2Fbuild-curriculum.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/curriculum%2Fbuild-curriculum.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fbuild-curriculum.js?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -1,6 +1,5 @@\n const fs = require('fs');\n const path = require('path');\n-const assert = require('assert');\n \n const { isEmpty } = require('lodash');\n const debug = require('debug')('fcc:build-curriculum');\n@@ -13,14 +12,13 @@ const {\n \n const { buildCertification } = require('./build-certification');\n const { applyFilters } = require('./utils');\n-\n-const CURRICULUM_DIR = __dirname;\n-const I18N_CURRICULUM_DIR = path.resolve(\n-  CURRICULUM_DIR,\n-  'i18n-curriculum',\n-  'curriculum'\n-);\n-const STRUCTURE_DIR = path.resolve(CURRICULUM_DIR, 'structure');\n+const {\n+  getContentDir,\n+  getLanguageConfig,\n+  getCurriculumStructure,\n+  getBlockStructure,\n+  getSuperblockStructure\n+} = require('./file-handler');\n \n /**\n  * Creates a BlockCreator instance for a specific language with appropriate configuration\n@@ -35,7 +33,6 @@ const STRUCTURE_DIR = path.resolve(CURRICULUM_DIR, 'structure');\n const getBlockCreator = (lang, skipValidation, opts) => {\n   const {\n     blockContentDir,\n-    blockStructureDir,\n     i18nBlockContentDir,\n     dictionariesDir,\n     i18nDictionariesDir\n@@ -47,7 +44,6 @@ const getBlockCreator = (lang, skipValidation, opts) => {\n   return new BlockCreator({\n     lang,\n     blockContentDir,\n-    blockStructureDir,\n     i18nBlockContentDir,\n     commentTranslations: createCommentMap(\n       dictionariesDir,\n@@ -194,84 +190,12 @@ const superBlockNames = {\n   'dev-playground': 'dev-playground'\n };\n \n-/**\n- * Gets language-specific configuration paths for curriculum content\n- * @param {string} lang - The language code (e.g., 'english', 'spanish', etc.)\n- * @param {Object} [options] - Optional configuration object with directory overrides\n- * @param {string} [options.baseDir] - Base directory for curriculum content (defaults to CURRICULUM_DIR)\n- * @param {string} [options.i18nBaseDir] - Base directory for i18n content (defaults to I18N_CURRICULUM_DIR)\n- * @param {string} [options.structureDir] - Directory for curriculum structure (defaults to STRUCTURE_DIR)\n- * @returns {Object} Object containing all relevant directory paths for the language\n- * @throws {AssertionError} When required i18n directories don't exist for non-English languages\n- */\n-function getLanguageConfig(\n-  lang,\n-  { baseDir, i18nBaseDir, structureDir } = {\n-    baseDir: CURRICULUM_DIR,\n-    i18nBaseDir: I18N_CURRICULUM_DIR,\n-    structureDir: STRUCTURE_DIR\n-  }\n-) {\n-  const contentDir = path.resolve(baseDir, 'challenges', 'english');\n-  const i18nContentDir = path.resolve(i18nBaseDir, 'challenges', lang);\n-  const blockContentDir = path.resolve(contentDir, 'blocks');\n-  const i18nBlockContentDir = path.resolve(i18nContentDir, 'blocks');\n-  const blockStructureDir = path.resolve(structureDir, 'blocks');\n-  const dictionariesDir = path.resolve(baseDir, 'dictionaries');\n-  const i18nDictionariesDir = path.resolve(i18nBaseDir, 'dictionaries');\n-\n-  if (lang !== 'english') {\n-    assert(\n-      fs.existsSync(i18nContentDir),\n-      `i18n content directory does not exist: ${i18nContentDir}`\n-    );\n-    assert(\n-      fs.existsSync(i18nBlockContentDir),\n-      `i18n block content directory does not exist: ${i18nBlockContentDir}`\n-    );\n-    assert(\n-      fs.existsSync(i18nDictionariesDir),\n-      `i18n dictionaries directory does not exist: ${i18nDictionariesDir}`\n-    );\n-  }\n-\n-  debug(`Using content directory: ${contentDir}`);\n-  debug(`Using i18n content directory: ${i18nContentDir}`);\n-  debug(`Using block content directory: ${blockContentDir}`);\n-  debug(`Using i18n block content directory: ${i18nBlockContentDir}`);\n-  debug(`Using dictionaries directory: ${dictionariesDir}`);\n-  debug(`Using i18n dictionaries directory: ${i18nDictionariesDir}`);\n-\n-  return {\n-    contentDir,\n-    i18nContentDir,\n-    blockContentDir,\n-    i18nBlockContentDir,\n-    blockStructureDir,\n-    dictionariesDir,\n-    i18nDictionariesDir\n-  };\n-}\n-\n-/**\n- * Gets the appropriate content directory path for a given language\n- * @param {string} lang - The language code (e.g., 'english', 'spanish', etc.)\n- * @returns {string} Path to the content directory for the specified language\n- */\n-function getContentDir(lang) {\n-  const { contentDir, i18nContentDir } = getLanguageConfig(lang);\n-\n-  return lang === 'english' ? contentDir : i18nContentDir;\n-}\n-\n-const getCurriculumStructure = () => {\n-  const curriculumPath = path.resolve(STRUCTURE_DIR, 'curriculum.json');\n-  if (!fs.existsSync(curriculumPath)) {\n-    throw new Error(`Curriculum file not found: ${curriculumPath}`);\n-  }\n-\n-  return JSON.parse(fs.readFileSync(curriculumPath, 'utf8'));\n-};\n+const superBlockToFilename = Object.entries(superBlockNames).reduce(\n+  (map, entry) => {\n+    return { ...map, [entry[1]]: entry[0] };\n+  },\n+  {}\n+);\n \n /**\n  * Builds an array of superblock structures from a curriculum object\n@@ -304,26 +228,6 @@ function addSuperblockStructure(superblocks) {\n   return superblockStructures;\n }\n \n-function getSuperblockStructure(superblock) {\n-  const superblockPath = path.resolve(\n-    STRUCTURE_DIR,\n-    'superblocks',\n-    `${superblock}.json`\n-  );\n-\n-  return JSON.parse(fs.readFileSync(superblockPath, 'utf8'));\n-}\n-\n-function getBlockStructure(block) {\n-  const blockPath = path.resolve(STRUCTURE_DIR, 'blocks', `${block}.json`);\n-\n-  try {\n-    return JSON.parse(fs.readFileSync(blockPath, 'utf8'));\n-  } catch {\n-    console.warn('block missing', block);\n-  }\n-}\n-\n function addBlockStructure(\n   superblocks,\n   _getBlockStructure = getBlockStructure\n@@ -383,5 +287,6 @@ module.exports = {\n   getBlockCreator,\n   getBlockStructure,\n   getSuperblockStructure,\n-  createCommentMap\n+  createCommentMap,\n+  superBlockToFilename\n };"
        },
        {
            "sha": "7649a2ddd09b43d573e283b0630881696fb1d34a",
            "filename": "curriculum/build-superblock.js",
            "status": "modified",
            "additions": 0,
            "deletions": 27,
            "changes": 27,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/curriculum%2Fbuild-superblock.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/curriculum%2Fbuild-superblock.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fbuild-superblock.js?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -226,8 +226,6 @@ class BlockCreator {\n   /**\n    * @param {object} options - Options object\n    * @param {string} options.blockContentDir - Directory containing block content files\n-   * @param {string} options.blockStructureDir - Directory containing block structure files (meta\n-   * .json)\n    * @param {string} options.i18nBlockContentDir - Directory containing i18n block content files\n    * @param {string} options.lang - Language code for the block content\n    * @param {object} options.commentTranslations - Translations for comments in challenges\n@@ -238,14 +236,12 @@ class BlockCreator {\n    */\n   constructor({\n     blockContentDir,\n-    blockStructureDir,\n     i18nBlockContentDir,\n     lang,\n     commentTranslations,\n     skipValidation\n   }) {\n     this.blockContentDir = blockContentDir;\n-    this.blockStructureDir = blockStructureDir;\n     this.i18nBlockContentDir = i18nBlockContentDir;\n     this.lang = lang;\n     this.commentTranslations = commentTranslations;\n@@ -309,29 +305,6 @@ class BlockCreator {\n     );\n   }\n \n-  /**\n-   * Gets meta information for a block from its JSON file\n-   * @param {string} blockName - Name of the block\n-   * @returns {object} The meta information object for the block\n-   * @throws {Error} If meta file is not found\n-   */\n-  getMetaForBlock(blockName) {\n-    // Read meta.json for this block\n-    const metaPath = path.resolve(this.blockStructureDir, `${blockName}.json`);\n-    if (!fs.existsSync(metaPath)) {\n-      throw new Error(\n-        `Meta file not found for block ${blockName}: ${metaPath}`\n-      );\n-    }\n-\n-    // Not all \"meta information\" can be found in the meta.json.\n-    const rawMeta = JSON.parse(fs.readFileSync(metaPath, 'utf8'));\n-    debug(\n-      `Meta file indicates ${rawMeta.challengeOrder.length} challenges should exist`\n-    );\n-    return rawMeta;\n-  }\n-\n   async processBlock(block, { superBlock, order }) {\n     const blockName = block.dashedName;\n     debug(`Processing block ${blockName} in superblock ${superBlock}`);"
        },
        {
            "sha": "7f2f3d7c9fa86a7ee8dafe384d789659d2b86d0b",
            "filename": "curriculum/file-handler.js",
            "status": "added",
            "additions": 199,
            "deletions": 0,
            "changes": 199,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/curriculum%2Ffile-handler.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/curriculum%2Ffile-handler.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Ffile-handler.js?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -0,0 +1,199 @@\n+const path = require('node:path');\n+const assert = require('node:assert');\n+const fs = require('node:fs');\n+const fsP = require('node:fs/promises');\n+\n+// const prettier = require('prettier');\n+\n+const debug = require('debug')('fcc:file-handler');\n+\n+const CURRICULUM_DIR = __dirname;\n+const I18N_CURRICULUM_DIR = path.resolve(\n+  CURRICULUM_DIR,\n+  'i18n-curriculum',\n+  'curriculum'\n+);\n+const STRUCTURE_DIR = path.resolve(CURRICULUM_DIR, 'structure');\n+const BLOCK_STRUCTURE_DIR = path.resolve(STRUCTURE_DIR, 'blocks');\n+\n+/**\n+ * Gets language-specific configuration paths for curriculum content\n+ * @param {string} lang - The language code (e.g., 'english', 'spanish', etc.)\n+ * @param {Object} [options] - Optional configuration object with directory overrides\n+ * @param {string} [options.baseDir] - Base directory for curriculum content (defaults to CURRICULUM_DIR)\n+ * @param {string} [options.i18nBaseDir] - Base directory for i18n content (defaults to I18N_CURRICULUM_DIR)\n+ * @param {string} [options.structureDir] - Directory for curriculum structure (defaults to STRUCTURE_DIR)\n+ * @returns {Object} Object containing all relevant directory paths for the language\n+ * @throws {AssertionError} When required i18n directories don't exist for non-English languages\n+ */\n+function getContentConfig(\n+  lang,\n+  { baseDir, i18nBaseDir } = {\n+    baseDir: CURRICULUM_DIR,\n+    i18nBaseDir: I18N_CURRICULUM_DIR\n+  }\n+) {\n+  const contentDir = path.resolve(baseDir, 'challenges', 'english');\n+  const i18nContentDir = path.resolve(i18nBaseDir, 'challenges', lang);\n+  const blockContentDir = path.resolve(contentDir, 'blocks');\n+  const i18nBlockContentDir = path.resolve(i18nContentDir, 'blocks');\n+  const dictionariesDir = path.resolve(baseDir, 'dictionaries');\n+  const i18nDictionariesDir = path.resolve(i18nBaseDir, 'dictionaries');\n+\n+  if (lang !== 'english') {\n+    assert(\n+      fs.existsSync(i18nContentDir),\n+      `i18n content directory does not exist: ${i18nContentDir}`\n+    );\n+    assert(\n+      fs.existsSync(i18nBlockContentDir),\n+      `i18n block content directory does not exist: ${i18nBlockContentDir}`\n+    );\n+    assert(\n+      fs.existsSync(i18nDictionariesDir),\n+      `i18n dictionaries directory does not exist: ${i18nDictionariesDir}`\n+    );\n+  }\n+\n+  debug(`Using content directory: ${contentDir}`);\n+  debug(`Using i18n content directory: ${i18nContentDir}`);\n+  debug(`Using block content directory: ${blockContentDir}`);\n+  debug(`Using i18n block content directory: ${i18nBlockContentDir}`);\n+  debug(`Using dictionaries directory: ${dictionariesDir}`);\n+  debug(`Using i18n dictionaries directory: ${i18nDictionariesDir}`);\n+\n+  return {\n+    contentDir,\n+    i18nContentDir,\n+    blockContentDir,\n+    i18nBlockContentDir,\n+    dictionariesDir,\n+    i18nDictionariesDir\n+  };\n+}\n+\n+/**\n+ * Gets the appropriate content directory path for a given language\n+ * @param {string} lang - The language code (e.g., 'english', 'spanish', etc.)\n+ * @returns {string} Path to the content directory for the specified language\n+ */\n+function getContentDir(lang) {\n+  const { contentDir, i18nContentDir } = getContentConfig(lang);\n+\n+  return lang === 'english' ? contentDir : i18nContentDir;\n+}\n+\n+function getCurriculumStructure() {\n+  const curriculumPath = path.resolve(STRUCTURE_DIR, 'curriculum.json');\n+  if (!fs.existsSync(curriculumPath)) {\n+    throw new Error(`Curriculum file not found: ${curriculumPath}`);\n+  }\n+\n+  return JSON.parse(fs.readFileSync(curriculumPath, 'utf8'));\n+}\n+\n+function getBlockStructurePath(block) {\n+  return path.resolve(BLOCK_STRUCTURE_DIR, `${block}.json`);\n+}\n+\n+function getBlockStructure(block) {\n+  return JSON.parse(fs.readFileSync(getBlockStructurePath(block), 'utf8'));\n+}\n+\n+async function writeBlockStructure(block, structure) {\n+  // TODO: format with prettier (jest, at least this version, is not compatible\n+  // with prettier)\n+  const content = JSON.stringify(structure);\n+  await fsP.writeFile(getBlockStructurePath(block), content, 'utf8');\n+}\n+\n+async function writeSuperblockStructure(superblock, structure) {\n+  const content = JSON.stringify(structure);\n+  await fsP.writeFile(getSuperblockStructurePath(superblock), content);\n+}\n+\n+function getSuperblockStructure(superblockFilename) {\n+  const superblockPath = getSuperblockStructurePath(superblockFilename);\n+\n+  if (!fs.existsSync(superblockPath)) {\n+    throw Error(`Superblock file not found: ${superblockPath}`);\n+  }\n+\n+  return JSON.parse(fs.readFileSync(superblockPath, 'utf8'));\n+}\n+\n+function getSuperblockStructurePath(superblockFilename) {\n+  return path.resolve(\n+    STRUCTURE_DIR,\n+    'superblocks',\n+    `${superblockFilename}.json`\n+  );\n+}\n+\n+/**\n+ * Gets language-specific configuration paths for curriculum content\n+ * @param {string} lang - The language code (e.g., 'english', 'spanish', etc.)\n+ * @param {Object} [options] - Optional configuration object with directory overrides\n+ * @param {string} [options.baseDir] - Base directory for curriculum content (defaults to CURRICULUM_DIR)\n+ * @param {string} [options.i18nBaseDir] - Base directory for i18n content (defaults to I18N_CURRICULUM_DIR)\n+ * @param {string} [options.structureDir] - Directory for curriculum structure (defaults to STRUCTURE_DIR)\n+ * @returns {Object} Object containing all relevant directory paths for the language\n+ * @throws {AssertionError} When required i18n directories don't exist for non-English languages\n+ */\n+function getLanguageConfig(\n+  lang,\n+  { baseDir, i18nBaseDir, structureDir } = {\n+    baseDir: CURRICULUM_DIR,\n+    i18nBaseDir: I18N_CURRICULUM_DIR,\n+    structureDir: STRUCTURE_DIR\n+  }\n+) {\n+  const contentDir = path.resolve(baseDir, 'challenges', 'english');\n+  const i18nContentDir = path.resolve(i18nBaseDir, 'challenges', lang);\n+  const blockContentDir = path.resolve(contentDir, 'blocks');\n+  const i18nBlockContentDir = path.resolve(i18nContentDir, 'blocks');\n+  const blockStructureDir = path.resolve(structureDir, 'blocks');\n+  const dictionariesDir = path.resolve(baseDir, 'dictionaries');\n+  const i18nDictionariesDir = path.resolve(i18nBaseDir, 'dictionaries');\n+\n+  if (lang !== 'english') {\n+    assert(\n+      fs.existsSync(i18nContentDir),\n+      `i18n content directory does not exist: ${i18nContentDir}`\n+    );\n+    assert(\n+      fs.existsSync(i18nBlockContentDir),\n+      `i18n block content directory does not exist: ${i18nBlockContentDir}`\n+    );\n+    assert(\n+      fs.existsSync(i18nDictionariesDir),\n+      `i18n dictionaries directory does not exist: ${i18nDictionariesDir}`\n+    );\n+  }\n+\n+  debug(`Using content directory: ${contentDir}`);\n+  debug(`Using i18n content directory: ${i18nContentDir}`);\n+  debug(`Using block content directory: ${blockContentDir}`);\n+  debug(`Using i18n block content directory: ${i18nBlockContentDir}`);\n+  debug(`Using dictionaries directory: ${dictionariesDir}`);\n+  debug(`Using i18n dictionaries directory: ${i18nDictionariesDir}`);\n+\n+  return {\n+    contentDir,\n+    i18nContentDir,\n+    blockContentDir,\n+    i18nBlockContentDir,\n+    blockStructureDir,\n+    dictionariesDir,\n+    i18nDictionariesDir\n+  };\n+}\n+\n+exports.getContentConfig = getContentConfig;\n+exports.getContentDir = getContentDir;\n+exports.getBlockStructure = getBlockStructure;\n+exports.getSuperblockStructure = getSuperblockStructure;\n+exports.getCurriculumStructure = getCurriculumStructure;\n+exports.writeBlockStructure = writeBlockStructure;\n+exports.writeSuperblockStructure = writeSuperblockStructure;\n+exports.getLanguageConfig = getLanguageConfig;"
        },
        {
            "sha": "51f3b2de4ba9c696929a6b2ac0becee9bf58db9e",
            "filename": "curriculum/package.json",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/curriculum%2Fpackage.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/curriculum%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fpackage.json?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -32,7 +32,6 @@\n     \"delete-challenge\": \"CALLING_DIR=$INIT_CWD tsx --tsconfig ../tsconfig.json ../tools/challenge-helper-scripts/delete-challenge\",\n     \"delete-task\": \"CALLING_DIR=$INIT_CWD tsx --tsconfig ../tsconfig.json ../tools/challenge-helper-scripts/delete-task\",\n     \"lint\": \"tsx --tsconfig ../tsconfig.json lint-localized\",\n-    \"repair-meta\": \"CALLING_DIR=$INIT_CWD tsx --tsconfig ../tsconfig.json ../tools/challenge-helper-scripts/repair-meta\",\n     \"reorder-tasks\": \"CALLING_DIR=$INIT_CWD tsx --tsconfig ../tsconfig.json ../tools/challenge-helper-scripts/reorder-tasks\",\n     \"update-challenge-order\": \"CALLING_DIR=$INIT_CWD tsx --tsconfig ../tsconfig.json ../tools/challenge-helper-scripts/update-challenge-order\",\n     \"update-step-titles\": \"CALLING_DIR=$INIT_CWD tsx --tsconfig ../tsconfig.json ../tools/challenge-helper-scripts/update-step-titles\","
        },
        {
            "sha": "76353cc22c8d0540d4dc215b52cf1f30ded0ab57",
            "filename": "curriculum/test/test-challenges.js",
            "status": "modified",
            "additions": 3,
            "deletions": 5,
            "changes": 8,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/curriculum%2Ftest%2Ftest-challenges.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/curriculum%2Ftest%2Ftest-challenges.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Ftest%2Ftest-challenges.js?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -37,9 +37,10 @@ const {\n   prefixDoctype,\n   helperVersion\n } = require('../../client/src/templates/Challenges/utils/frame');\n-const { STRUCTURE_DIR, getBlockCreator } = require('../build-curriculum');\n+\n const { curriculumSchemaValidator } = require('../schema/curriculum-schema');\n const { validateMetaSchema } = require('../schema/meta-schema');\n+const { getBlockStructure } = require('../file-handler');\n const ChallengeTitles = require('./utils/challenge-titles');\n const MongoIds = require('./utils/mongo-ids');\n const createPseudoWorker = require('./utils/pseudo-worker');\n@@ -168,10 +169,7 @@ async function setup() {\n     // we can skip them.\n     // TODO: omit certifications from the list of challenges\n     if (dashedBlockName && !meta[dashedBlockName]) {\n-      meta[dashedBlockName] = await getBlockCreator(lang).getMetaForBlock(\n-        dashedBlockName,\n-        STRUCTURE_DIR\n-      );\n+      meta[dashedBlockName] = getBlockStructure(dashedBlockName);\n       const result = validateMetaSchema(meta[dashedBlockName]);\n \n       if (result.error) {"
        },
        {
            "sha": "de0332a86144e03d702e8354dcac8e585cd92a30",
            "filename": "shared/config/curriculum.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 35,
            "changes": 35,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/shared%2Fconfig%2Fcurriculum.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/shared%2Fconfig%2Fcurriculum.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/shared%2Fconfig%2Fcurriculum.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -35,41 +35,6 @@ export enum SuperBlocks {\n   DevPlayground = 'dev-playground'\n }\n \n-// Note that this object is used to create folderToSuperBlockMap object\n-export const superBlockToFolderMap = {\n-  [SuperBlocks.RespWebDesign]: '01-responsive-web-design',\n-  [SuperBlocks.JsAlgoDataStruct]:\n-    '02-javascript-algorithms-and-data-structures',\n-  [SuperBlocks.FrontEndDevLibs]: '03-front-end-development-libraries',\n-  [SuperBlocks.DataVis]: '04-data-visualization',\n-  [SuperBlocks.BackEndDevApis]: '05-back-end-development-and-apis',\n-  [SuperBlocks.QualityAssurance]: '06-quality-assurance',\n-  [SuperBlocks.SciCompPy]: '07-scientific-computing-with-python',\n-  [SuperBlocks.DataAnalysisPy]: '08-data-analysis-with-python',\n-  [SuperBlocks.InfoSec]: '09-information-security',\n-  [SuperBlocks.CodingInterviewPrep]: '10-coding-interview-prep',\n-  [SuperBlocks.MachineLearningPy]: '11-machine-learning-with-python',\n-  [SuperBlocks.RelationalDb]: '13-relational-databases',\n-  [SuperBlocks.RespWebDesignNew]: '14-responsive-web-design-22',\n-  [SuperBlocks.JsAlgoDataStructNew]:\n-    '15-javascript-algorithms-and-data-structures-22',\n-  [SuperBlocks.TheOdinProject]: '16-the-odin-project',\n-  [SuperBlocks.CollegeAlgebraPy]: '17-college-algebra-with-python',\n-  [SuperBlocks.ProjectEuler]: '18-project-euler',\n-  [SuperBlocks.FoundationalCSharp]: '19-foundational-c-sharp-with-microsoft',\n-  [SuperBlocks.A2English]: '21-a2-english-for-developers',\n-  [SuperBlocks.RosettaCode]: '22-rosetta-code',\n-  [SuperBlocks.PythonForEverybody]: '23-python-for-everybody',\n-  [SuperBlocks.B1English]: '24-b1-english-for-developers',\n-  [SuperBlocks.FullStackDeveloper]: '25-front-end-development',\n-  [SuperBlocks.A2Spanish]: '26-a2-professional-spanish',\n-  [SuperBlocks.A2Chinese]: '27-a2-professional-chinese',\n-  [SuperBlocks.BasicHtml]: '28-basic-html',\n-  [SuperBlocks.SemanticHtml]: '29-semantic-html',\n-  [SuperBlocks.A1Chinese]: '30-a1-professional-chinese',\n-  [SuperBlocks.DevPlayground]: '99-dev-playground'\n-};\n-\n export const languageSuperBlocks = [\n   SuperBlocks.A2English,\n   SuperBlocks.B1English,"
        },
        {
            "sha": "8641570bf96082c162e17442e100e2a0ceb69d69",
            "filename": "tools/challenge-auditor/index.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 11,
            "changes": 23,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-auditor%2Findex.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-auditor%2Findex.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-auditor%2Findex.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -11,8 +11,7 @@ import { availableLangs } from '../../shared/config/i18n';\n import { getChallengesForLang } from '../../curriculum/get-challenges';\n import {\n   SuperBlocks,\n-  getAuditedSuperBlocks,\n-  superBlockToFolderMap\n+  getAuditedSuperBlocks\n } from '../../shared/config/curriculum';\n \n // TODO: re-organise the types to a common 'types' folder that can be shared\n@@ -91,15 +90,17 @@ void (async () => {\n       'challenges',\n       language\n     );\n-    const auditedFiles = englishFilePaths.filter(file =>\n-      certs.some(\n-        cert =>\n-          // we're not ready to audit the new curriculum yet\n-          (cert !== SuperBlocks.JsAlgoDataStructNew ||\n-            process.env.SHOW_UPCOMING_CHANGES === 'true') &&\n-          file.startsWith(superBlockToFolderMap[cert])\n-      )\n-    );\n+    // TODO: decide if we need to audit files at all.\n+    const auditedFiles = englishFilePaths;\n+    // const auditedFiles = englishFilePaths.filter(file =>\n+    //   certs.some(\n+    //     cert =>\n+    //       // we're not ready to audit the new curriculum yet\n+    //       (cert !== SuperBlocks.JsAlgoDataStructNew ||\n+    //         process.env.SHOW_UPCOMING_CHANGES === 'true') &&\n+    //       file.startsWith(superBlockToFolderMap[cert])\n+    //   )\n+    // );\n     const noMissingFiles = await auditChallengeFiles(auditedFiles, {\n       langCurriculumDirectory\n     });"
        },
        {
            "sha": "8bd416deed0e10f5b01515fe9013ecd2b079e34b",
            "filename": "tools/challenge-helper-scripts/commands.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 42,
            "changes": 51,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcommands.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcommands.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcommands.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -1,9 +1,6 @@\n import fs from 'fs';\n-import { SuperBlocks } from '../../shared/config/curriculum';\n-import { challengeTypes } from '../../shared/config/challenge-types';\n import { getProjectPath } from './helpers/get-project-info';\n-import { getMetaData, updateMetaData } from './helpers/project-metadata';\n-import { getChallengeOrderFromFileTree } from './helpers/get-challenge-order';\n+import { getMetaData } from './helpers/project-metadata';\n import {\n   createStepFile,\n   deleteStepFromMeta,\n@@ -12,7 +9,7 @@ import {\n   updateStepTitles\n } from './utils';\n \n-function deleteStep(stepNum: number): void {\n+async function deleteStep(stepNum: number): Promise<void> {\n   if (stepNum < 1) {\n     throw Error('Step not deleted. Step num must be a number greater than 0.');\n   }\n@@ -27,13 +24,13 @@ function deleteStep(stepNum: number): void {\n   const stepId = challengeOrder[stepNum - 1].id;\n \n   fs.unlinkSync(`${getProjectPath()}${stepId}.md`);\n-  deleteStepFromMeta({ stepNum });\n+  await deleteStepFromMeta({ stepNum });\n   updateStepTitles();\n \n   console.log(`Successfully deleted step #${stepNum}`);\n }\n \n-function insertStep(stepNum: number): void {\n+async function insertStep(stepNum: number): Promise<void> {\n   if (stepNum < 1) {\n     throw Error('Step not inserted. New step number must be greater than 0.');\n   }\n@@ -45,11 +42,6 @@ function insertStep(stepNum: number): void {\n         challengeOrder.length + 2\n       }.`\n     );\n-  const challengeType = [SuperBlocks.SciCompPy].includes(\n-    getMetaData().superBlock\n-  )\n-    ? challengeTypes.python\n-    : challengeTypes.html;\n \n   const challengeSeeds =\n     stepNum > 1\n@@ -60,52 +52,27 @@ function insertStep(stepNum: number): void {\n \n   const stepId = createStepFile({\n     stepNum,\n-    challengeType,\n     challengeSeeds\n   });\n \n-  insertStepIntoMeta({ stepNum, stepId });\n+  await insertStepIntoMeta({ stepNum, stepId });\n   updateStepTitles();\n   console.log(`Successfully inserted new step #${stepNum}`);\n }\n \n-function createEmptySteps(num: number): void {\n+async function createEmptySteps(num: number): Promise<void> {\n   if (num < 1 || num > 1000) {\n     throw Error(\n       `No steps created. arg 'num' must be between 1 and 1000 inclusive`\n     );\n   }\n \n   const nextStepNum = getMetaData().challengeOrder.length + 1;\n-  const challengeType = [SuperBlocks.SciCompPy].includes(\n-    getMetaData().superBlock\n-  )\n-    ? challengeTypes.python\n-    : challengeTypes.html;\n-\n   for (let stepNum = nextStepNum; stepNum < nextStepNum + num; stepNum++) {\n-    const stepId = createStepFile({ stepNum, challengeType });\n-    insertStepIntoMeta({ stepNum, stepId });\n+    const stepId = createStepFile({ stepNum });\n+    await insertStepIntoMeta({ stepNum, stepId });\n   }\n   console.log(`Successfully added ${num} steps`);\n }\n \n-const repairMeta = async () => {\n-  const sortByStepNum = (a: string, b: string) =>\n-    parseInt(a.split(' ')[1]) - parseInt(b.split(' ')[1]);\n-\n-  const challengeOrder = await getChallengeOrderFromFileTree();\n-  if (!challengeOrder.every(({ title }) => /Step \\d+/.test(title))) {\n-    throw new Error(\n-      'You can only run this command on project-based blocks with step files.'\n-    );\n-  }\n-  const sortedChallengeOrder = challengeOrder.sort((a, b) =>\n-    sortByStepNum(a.title, b.title)\n-  );\n-  const meta = getMetaData();\n-  meta.challengeOrder = sortedChallengeOrder;\n-  updateMetaData(meta);\n-};\n-\n-export { deleteStep, insertStep, createEmptySteps, repairMeta };\n+export { deleteStep, insertStep, createEmptySteps };"
        },
        {
            "sha": "32db1d3f4eeecc56c21e0e4bc762cbf8a85947e4",
            "filename": "tools/challenge-helper-scripts/create-empty-steps.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcreate-empty-steps.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcreate-empty-steps.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-empty-steps.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -1,6 +1,4 @@\n import { getArgValue } from './helpers/get-arg-value';\n import { createEmptySteps } from './commands';\n-import { validateMetaData } from './helpers/project-metadata';\n \n-validateMetaData();\n-createEmptySteps(getArgValue(process.argv));\n+void createEmptySteps(getArgValue(process.argv));"
        },
        {
            "sha": "2777cadd15bad649251a36710cd73a631322bc67",
            "filename": "tools/challenge-helper-scripts/create-language-block.ts",
            "status": "modified",
            "additions": 21,
            "deletions": 25,
            "changes": 46,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcreate-language-block.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcreate-language-block.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-language-block.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -1,4 +1,3 @@\n-import { existsSync } from 'fs';\n import fs from 'fs/promises';\n import path from 'path';\n import { prompt } from 'inquirer';\n@@ -7,12 +6,17 @@ import ObjectID from 'bson-objectid';\n \n import {\n   SuperBlocks,\n-  languageSuperBlocks,\n-  superBlockToFolderMap\n+  languageSuperBlocks\n } from '../../shared/config/curriculum';\n-import { createDialogueFile, validateBlockName } from './utils';\n+import {\n+  getContentConfig,\n+  writeBlockStructure\n+} from '../../curriculum/file-handler';\n+import { superBlockToFilename } from '../../curriculum/build-curriculum';\n import { getBaseMeta } from './helpers/get-base-meta';\n import { createIntroMD } from './helpers/create-intro';\n+import { createDialogueFile, validateBlockName } from './utils';\n+import { updateSimpleSuperblockStructure } from './helpers/create-project';\n \n const helpCategories = ['English'] as const;\n \n@@ -46,7 +50,11 @@ async function createLanguageBlock(\n   await updateIntroJson(superBlock, block, title);\n \n   const challengeId = await createDialogueChallenge(superBlock, block);\n-  await createMetaJson(superBlock, block, title, helpCategory, challengeId);\n+  await createMetaJson(block, title, helpCategory, challengeId);\n+  const superblockFilename = (\n+    superBlockToFilename as Record<SuperBlocks, string>\n+  )[superBlock];\n+  void updateSimpleSuperblockStructure(block, { order: 0 }, superblockFilename);\n   // TODO: remove once we stop relying on markdown in the client.\n   await createIntroMD(superBlock, block, title);\n }\n@@ -73,46 +81,34 @@ async function updateIntroJson(\n }\n \n async function createMetaJson(\n-  superBlock: SuperBlocks,\n   block: string,\n   title: string,\n   helpCategory: string,\n   challengeId: ObjectID\n ) {\n-  const metaDir = path.resolve(__dirname, '../../curriculum/challenges/_meta');\n   const newMeta = getBaseMeta('Language');\n   newMeta.name = title;\n   newMeta.dashedName = block;\n   newMeta.helpCategory = helpCategory;\n-  newMeta.superBlock = superBlock;\n   newMeta.challengeOrder = [\n     // eslint-disable-next-line @typescript-eslint/no-base-to-string\n     { id: challengeId.toString(), title: \"Dialogue 1: I'm Tom\" }\n   ];\n-  const newMetaDir = path.resolve(metaDir, block);\n-  if (!existsSync(newMetaDir)) {\n-    await withTrace(fs.mkdir, newMetaDir);\n-  }\n \n-  void withTrace(\n-    fs.writeFile,\n-    path.resolve(metaDir, `${block}/meta.json`),\n-    await format(JSON.stringify(newMeta), { parser: 'json' })\n-  );\n+  await writeBlockStructure(block, newMeta);\n }\n \n async function createDialogueChallenge(\n   superBlock: SuperBlocks,\n   block: string\n ): Promise<ObjectID> {\n-  const superBlockSubPath = superBlockToFolderMap[superBlock];\n-  const newChallengeDir = path.resolve(\n-    __dirname,\n-    `../../curriculum/challenges/english/${superBlockSubPath}/${block}`\n-  );\n-  if (!existsSync(newChallengeDir)) {\n-    await withTrace(fs.mkdir, newChallengeDir);\n-  }\n+  const { blockContentDir } = getContentConfig('english') as {\n+    blockContentDir: string;\n+  };\n+\n+  const newChallengeDir = path.resolve(blockContentDir, block);\n+  await fs.mkdir(newChallengeDir, { recursive: true });\n+\n   return createDialogueFile({\n     projectPath: newChallengeDir + '/'\n   });"
        },
        {
            "sha": "cc79f0d751729b88a64996c556f5da771650ee4a",
            "filename": "tools/challenge-helper-scripts/create-next-challenge.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcreate-next-challenge.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcreate-next-challenge.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-next-challenge.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -22,7 +22,7 @@ const createNextChallenge = async () => {\n     id: challengeId.toString(),\n     title: options.title\n   });\n-  updateMetaData(meta);\n+  await updateMetaData(meta);\n };\n \n void createNextChallenge();"
        },
        {
            "sha": "7364edab878f774008bf057e7ed2b5667a16d8b5",
            "filename": "tools/challenge-helper-scripts/create-next-step.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcreate-next-step.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcreate-next-step.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-next-step.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -1,6 +1,4 @@\n import { getLastStep } from './helpers/get-last-step-file-number';\n import { insertStep } from './commands';\n-import { validateMetaData } from './helpers/project-metadata';\n \n-validateMetaData();\n-insertStep(getLastStep().stepNum + 1);\n+void insertStep(getLastStep().stepNum + 1);"
        },
        {
            "sha": "a7361094fe5058755ccfefcbd1c5937664357483",
            "filename": "tools/challenge-helper-scripts/create-next-task.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 9,
            "changes": 12,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcreate-next-task.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcreate-next-task.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-next-task.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -2,20 +2,14 @@ import ObjectID from 'bson-objectid';\n import { getTemplate } from './helpers/get-challenge-template';\n import { newTaskPrompts } from './helpers/new-task-prompts';\n import { getProjectPath } from './helpers/get-project-info';\n-import {\n-  getMetaData,\n-  updateMetaData,\n-  validateMetaData\n-} from './helpers/project-metadata';\n+import { getMetaData, updateMetaData } from './helpers/project-metadata';\n import {\n   createChallengeFile,\n   updateTaskMeta,\n   updateTaskMarkdownFiles\n } from './utils';\n \n const createNextTask = async () => {\n-  validateMetaData();\n-\n   const { challengeType } = await newTaskPrompts();\n \n   // Placeholder title, to be replaced by updateTaskMarkdownFiles\n@@ -40,10 +34,10 @@ const createNextTask = async () => {\n     id: challengeIdString,\n     title: options.title\n   });\n-  updateMetaData(meta);\n+  await updateMetaData(meta);\n   console.log(`Finished inserting task into 'meta.json' file.`);\n \n-  updateTaskMeta();\n+  await updateTaskMeta();\n   console.log(\"Finished updating tasks in 'meta.json'.\");\n \n   updateTaskMarkdownFiles();"
        },
        {
            "sha": "66f73f5799371cba5f39c593a46602e190a976b6",
            "filename": "tools/challenge-helper-scripts/create-project.ts",
            "status": "modified",
            "additions": 22,
            "deletions": 34,
            "changes": 56,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcreate-project.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcreate-project.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-project.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -1,17 +1,19 @@\n-import { existsSync } from 'fs';\n import fs from 'fs/promises';\n import path from 'path';\n import { prompt } from 'inquirer';\n import { format } from 'prettier';\n import ObjectID from 'bson-objectid';\n \n+import { SuperBlocks } from '../../shared/config/curriculum';\n import {\n-  SuperBlocks,\n-  superBlockToFolderMap\n-} from '../../shared/config/curriculum';\n+  getContentConfig,\n+  writeBlockStructure\n+} from '../../curriculum/file-handler';\n+import { superBlockToFilename } from '../../curriculum/build-curriculum';\n import { createStepFile, validateBlockName } from './utils';\n import { getBaseMeta } from './helpers/get-base-meta';\n import { createIntroMD } from './helpers/create-intro';\n+import { updateSimpleSuperblockStructure } from './helpers/create-project';\n \n const helpCategories = [\n   'HTML-CSS',\n@@ -56,14 +58,15 @@ async function createProject(\n   void updateIntroJson(superBlock, block, title);\n \n   const challengeId = await createFirstChallenge(superBlock, block);\n-  void createMetaJson(\n-    superBlock,\n-    block,\n-    title,\n-    helpCategory,\n-    order,\n-    challengeId\n-  );\n+  void createMetaJson(block, title, helpCategory, challengeId);\n+  const superblockFilename = (\n+    superBlockToFilename as Record<SuperBlocks, string>\n+  )[superBlock];\n+  // TODO: handle full-stack-developer (createProjects needs calling with a\n+  // chapter and module name as well)\n+  if (superBlock !== SuperBlocks.FullStackDeveloper) {\n+    void updateSimpleSuperblockStructure(block, { order }, superblockFilename);\n+  }\n   // TODO: remove once we stop relying on markdown in the client.\n   void createIntroMD(superBlock, block, title);\n }\n@@ -90,46 +93,31 @@ async function updateIntroJson(\n }\n \n async function createMetaJson(\n-  superBlock: SuperBlocks,\n   block: string,\n   title: string,\n   helpCategory: string,\n-  order: number,\n   challengeId: ObjectID\n ) {\n-  const metaDir = path.resolve(__dirname, '../../curriculum/challenges/_meta');\n   const newMeta = getBaseMeta('Step');\n   newMeta.name = title;\n   newMeta.dashedName = block;\n   newMeta.helpCategory = helpCategory;\n-  newMeta.order = order;\n-  newMeta.superBlock = superBlock;\n   // eslint-disable-next-line @typescript-eslint/no-base-to-string\n   newMeta.challengeOrder = [{ id: challengeId.toString(), title: 'Step 1' }];\n-  const newMetaDir = path.resolve(metaDir, block);\n-  if (!existsSync(newMetaDir)) {\n-    await withTrace(fs.mkdir, newMetaDir);\n-  }\n \n-  void withTrace(\n-    fs.writeFile,\n-    path.resolve(metaDir, `${block}/meta.json`),\n-    await format(JSON.stringify(newMeta), { parser: 'json' })\n-  );\n+  await writeBlockStructure(block, newMeta);\n }\n \n async function createFirstChallenge(\n   superBlock: SuperBlocks,\n   block: string\n ): Promise<ObjectID> {\n-  const superBlockSubPath = superBlockToFolderMap[superBlock];\n-  const newChallengeDir = path.resolve(\n-    __dirname,\n-    `../../curriculum/challenges/english/${superBlockSubPath}/${block}`\n-  );\n-  if (!existsSync(newChallengeDir)) {\n-    await withTrace(fs.mkdir, newChallengeDir);\n-  }\n+  const { blockContentDir } = getContentConfig('english') as {\n+    blockContentDir: string;\n+  };\n+\n+  const newChallengeDir = path.resolve(blockContentDir, block);\n+  await fs.mkdir(newChallengeDir, { recursive: true });\n \n   // TODO: would be nice if the extension made sense for the challenge, but, at\n   // least until react I think they're all going to be html anyway."
        },
        {
            "sha": "b834bc6f20a5325cd02b24c601825b0bb4a038b1",
            "filename": "tools/challenge-helper-scripts/create-quiz.ts",
            "status": "modified",
            "additions": 19,
            "deletions": 25,
            "changes": 44,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcreate-quiz.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcreate-quiz.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-quiz.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -1,17 +1,19 @@\n-import { existsSync } from 'fs';\n import fs from 'fs/promises';\n import path from 'path';\n import { prompt } from 'inquirer';\n import { format } from 'prettier';\n import ObjectID from 'bson-objectid';\n \n+import { SuperBlocks } from '../../shared/config/curriculum';\n import {\n-  SuperBlocks,\n-  superBlockToFolderMap\n-} from '../../shared/config/curriculum';\n+  getContentConfig,\n+  writeBlockStructure\n+} from '../../curriculum/file-handler';\n+import { superBlockToFilename } from '../../curriculum/build-curriculum';\n import { createQuizFile, validateBlockName } from './utils';\n import { getBaseMeta } from './helpers/get-base-meta';\n import { createIntroMD } from './helpers/create-intro';\n+import { updateSimpleSuperblockStructure } from './helpers/create-project';\n \n const helpCategories = [\n   'HTML-CSS',\n@@ -57,7 +59,11 @@ async function createQuiz(\n     title,\n     questionCount\n   );\n-  await createMetaJson(superBlock, block, title, helpCategory, challengeId);\n+  await createMetaJson(block, title, helpCategory, challengeId);\n+  const superblockFilename = (\n+    superBlockToFilename as Record<SuperBlocks, string>\n+  )[superBlock];\n+  void updateSimpleSuperblockStructure(block, { order: 0 }, superblockFilename);\n   // TODO: remove once we stop relying on markdown in the client.\n   await createIntroMD(superBlock, block, title);\n }\n@@ -84,30 +90,19 @@ async function updateIntroJson(\n }\n \n async function createMetaJson(\n-  superBlock: SuperBlocks,\n   block: string,\n   title: string,\n   helpCategory: string,\n   challengeId: ObjectID\n ) {\n-  const metaDir = path.resolve(__dirname, '../../curriculum/challenges/_meta');\n   const newMeta = getBaseMeta('Quiz');\n   newMeta.name = title;\n   newMeta.dashedName = block;\n   newMeta.helpCategory = helpCategory;\n-  newMeta.superBlock = superBlock;\n   // eslint-disable-next-line @typescript-eslint/no-base-to-string\n   newMeta.challengeOrder = [{ id: challengeId.toString(), title: title }];\n-  const newMetaDir = path.resolve(metaDir, block);\n-  if (!existsSync(newMetaDir)) {\n-    await withTrace(fs.mkdir, newMetaDir);\n-  }\n \n-  void withTrace(\n-    fs.writeFile,\n-    path.resolve(metaDir, `${block}/meta.json`),\n-    await format(JSON.stringify(newMeta), { parser: 'json' })\n-  );\n+  await writeBlockStructure(block, newMeta);\n }\n \n async function createQuizChallenge(\n@@ -116,14 +111,13 @@ async function createQuizChallenge(\n   title: string,\n   questionCount: number\n ): Promise<ObjectID> {\n-  const superBlockSubPath = superBlockToFolderMap[superBlock];\n-  const newChallengeDir = path.resolve(\n-    __dirname,\n-    `../../curriculum/challenges/english/${superBlockSubPath}/${block}`\n-  );\n-  if (!existsSync(newChallengeDir)) {\n-    await withTrace(fs.mkdir, newChallengeDir);\n-  }\n+  const { blockContentDir } = getContentConfig('english') as {\n+    blockContentDir: string;\n+  };\n+\n+  const newChallengeDir = path.resolve(blockContentDir, block);\n+  await fs.mkdir(newChallengeDir, { recursive: true });\n+\n   return createQuizFile({\n     projectPath: newChallengeDir + '/',\n     title: title,"
        },
        {
            "sha": "d90cdca71fe8ca5025ff701f9ae8797034bb703a",
            "filename": "tools/challenge-helper-scripts/create-this-challenge.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 7,
            "changes": 19,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcreate-this-challenge.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fcreate-this-challenge.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-this-challenge.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -7,9 +7,14 @@\n  * you want that.\n  */\n import ObjectID from 'bson-objectid';\n+\n+import {\n+  getBlockStructure,\n+  writeBlockStructure\n+} from '../../curriculum/file-handler';\n import { createChallengeFile } from './utils';\n import { getProjectPath } from './helpers/get-project-info';\n-import { getMetaData, updateMetaData } from './helpers/project-metadata';\n+import { getBlock, type Meta } from './helpers/project-metadata';\n \n // eslint-disable-next-line @typescript-eslint/no-base-to-string\n const challengeId = new ObjectID().toString();\n@@ -141,16 +146,18 @@ Watch the video\n \n const path = getProjectPath();\n if (\n-  !/freeCodeCamp\\/curriculum\\/challenges\\/english\\/[^/]+\\/[^/]+\\/$/.test(path)\n+  !/freeCodeCamp\\/curriculum\\/challenges\\/english\\/blocks\\/[^/]+\\/$/.test(path)\n ) {\n   throw Error(`\n You cannot run this script from anywhere other than a block folder of the English curriculum.\n In the terminal, go to the block folder where you want to create this challenge first.\n-For example: 'freeCodeCamp/curriculum/challenges/english/21-a2-english-for-developers/learn-greetings-in-your-first-day-at-the-office/'\n+For example: 'freeCodeCamp/curriculum/challenges/english/blocks/learn-greetings-in-your-first-day-at-the-office/'\n   `);\n }\n \n-const meta = getMetaData();\n+const block = getBlock(path);\n+\n+const meta = getBlockStructure(block) as Meta;\n if (meta.challengeOrder.some(c => c.title === title)) {\n   throw Error(`\n     A challenge with the title ${title} already exists in this block.\n@@ -162,8 +169,6 @@ meta.challengeOrder.push({\n   title\n });\n \n-// write the meta.json file\n-updateMetaData(meta);\n+void writeBlockStructure(block, meta);\n \n-// write the challenge file, the first argument is the filename\n createChallengeFile(challengeId, template, path);"
        },
        {
            "sha": "feb70cb157b269aefb95e68d2415af5710ffea24",
            "filename": "tools/challenge-helper-scripts/delete-challenge.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fdelete-challenge.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fdelete-challenge.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fdelete-challenge.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -2,13 +2,12 @@ import { unlink } from 'fs/promises';\n import { prompt } from 'inquirer';\n import { getProjectPath } from './helpers/get-project-info';\n import { getMetaData, updateMetaData } from './helpers/project-metadata';\n-import { getChallengeOrderFromMeta } from './helpers/get-challenge-order';\n import { getFileName } from './helpers/get-file-name';\n \n const deleteChallenge = async () => {\n   const path = getProjectPath();\n \n-  const challenges = getChallengeOrderFromMeta();\n+  const challenges = getMetaData().challengeOrder;\n \n   const challengeToDelete = (await prompt({\n     name: 'id',\n@@ -32,7 +31,7 @@ const deleteChallenge = async () => {\n \n   const meta = getMetaData();\n   meta.challengeOrder.splice(indexToDelete, 1);\n-  updateMetaData(meta);\n+  await updateMetaData(meta);\n };\n \n void deleteChallenge();"
        },
        {
            "sha": "3790bf97338b884bff614928d3284d3aa6129ae8",
            "filename": "tools/challenge-helper-scripts/delete-step.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fdelete-step.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fdelete-step.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fdelete-step.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -1,6 +1,4 @@\n import { deleteStep } from './commands';\n import { getArgValue } from './helpers/get-arg-value';\n-import { validateMetaData } from './helpers/project-metadata';\n \n-validateMetaData();\n-deleteStep(getArgValue(process.argv));\n+void deleteStep(getArgValue(process.argv));"
        },
        {
            "sha": "2f8ac28fa78404d132e15b335f8e968bd7b19514",
            "filename": "tools/challenge-helper-scripts/delete-task.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 7,
            "changes": 11,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fdelete-task.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fdelete-task.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fdelete-task.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -1,21 +1,18 @@\n import { unlink } from 'fs/promises';\n import { prompt } from 'inquirer';\n import { getProjectPath } from './helpers/get-project-info';\n-import { getChallengeOrderFromMeta } from './helpers/get-challenge-order';\n import { getFileName } from './helpers/get-file-name';\n-import { validateMetaData } from './helpers/project-metadata';\n import {\n   deleteChallengeFromMeta,\n   updateTaskMarkdownFiles,\n   updateTaskMeta\n } from './utils';\n import { isTaskChallenge } from './helpers/task-helpers';\n+import { getMetaData } from './helpers/project-metadata';\n \n const deleteTask = async () => {\n-  validateMetaData();\n-\n   const path = getProjectPath();\n-  const challenges = getChallengeOrderFromMeta();\n+  const challenges = getMetaData().challengeOrder;\n \n   const challengeToDelete = (await prompt({\n     name: 'id',\n@@ -39,11 +36,11 @@ const deleteTask = async () => {\n   await unlink(`${path}${fileToDelete}`);\n   console.log(`Finished deleting file: '${fileToDelete}'.`);\n \n-  deleteChallengeFromMeta(indexToDelete);\n+  await deleteChallengeFromMeta(indexToDelete);\n   console.log(`Finished removing challenge from 'meta.json'.`);\n \n   if (isTaskChallenge(challenges[indexToDelete].title)) {\n-    updateTaskMeta();\n+    await updateTaskMeta();\n     console.log(\"Finished updating tasks in 'meta.json'.\");\n \n     updateTaskMarkdownFiles();"
        },
        {
            "sha": "b73cf92278e3c5773a6df4724aa97baa72f692d2",
            "filename": "tools/challenge-helper-scripts/helpers/create-project.test.ts",
            "status": "added",
            "additions": 186,
            "deletions": 0,
            "changes": 186,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fcreate-project.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fcreate-project.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fcreate-project.test.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -0,0 +1,186 @@\n+import {\n+  getSuperblockStructure,\n+  writeSuperblockStructure\n+} from '../../../curriculum/file-handler';\n+import {\n+  updateChapterModuleSuperblockStructure,\n+  updateSimpleSuperblockStructure\n+} from './create-project';\n+\n+jest.mock('../../../curriculum/file-handler');\n+\n+const mockGetSuperblockStructure =\n+  getSuperblockStructure as jest.MockedFunction<typeof getSuperblockStructure>;\n+const mockWriteSuperblockStructure =\n+  writeSuperblockStructure as jest.MockedFunction<\n+    typeof writeSuperblockStructure\n+  >;\n+\n+const incompleteSimpleChapterModuleSuperblock = {\n+  chapters: [\n+    {\n+      dashedName: 'chapter1',\n+      modules: [\n+        {\n+          dashedName: 'module1c1',\n+          blocks: ['block1', 'block3']\n+        }\n+      ]\n+    }\n+  ]\n+};\n+\n+const simpleChapterModuleSuperblock = {\n+  chapters: [\n+    {\n+      dashedName: 'chapter1',\n+      modules: [\n+        {\n+          dashedName: 'module1c1',\n+          blocks: ['block1', 'block2', 'block3']\n+        }\n+      ]\n+    }\n+  ]\n+};\n+\n+describe('updateSimpleSuperblockStructure', () => {\n+  beforeEach(() => {\n+    jest.clearAllMocks();\n+  });\n+\n+  it('should insert the block into the blocks array at the expected position', async () => {\n+    const existingBlocks = ['block1', 'block2', 'block4'];\n+    const superblockFilename = 'test-superblock';\n+    const newBlock = 'block3';\n+    const order = 2;\n+\n+    mockGetSuperblockStructure.mockReturnValue({\n+      blocks: existingBlocks\n+    });\n+\n+    await updateSimpleSuperblockStructure(\n+      newBlock,\n+      { order },\n+      superblockFilename\n+    );\n+\n+    expect(mockGetSuperblockStructure).toHaveBeenCalledWith(superblockFilename);\n+    expect(mockWriteSuperblockStructure).toHaveBeenCalledWith(\n+      superblockFilename,\n+      {\n+        blocks: ['block1', 'block2', 'block3', 'block4']\n+      }\n+    );\n+  });\n+});\n+\n+describe('updateChapterModuleSuperblockStructure', () => {\n+  beforeEach(() => {\n+    jest.clearAllMocks();\n+  });\n+\n+  it('should insert the block correctly when there is only one chapter and one module', async () => {\n+    const superblockFilename = 'test-superblock';\n+    const newBlock = 'block2';\n+    const position = {\n+      order: 1,\n+      chapter: 'chapter1',\n+      module: 'module1c1'\n+    };\n+\n+    mockGetSuperblockStructure.mockReturnValue(\n+      incompleteSimpleChapterModuleSuperblock\n+    );\n+\n+    await updateChapterModuleSuperblockStructure(\n+      newBlock,\n+      position,\n+      superblockFilename\n+    );\n+\n+    expect(mockGetSuperblockStructure).toHaveBeenCalledWith(superblockFilename);\n+    expect(mockWriteSuperblockStructure).toHaveBeenCalledWith(\n+      superblockFilename,\n+      simpleChapterModuleSuperblock\n+    );\n+  });\n+\n+  it('should create a module if it does not exist', async () => {\n+    const superblockFilename = 'test-superblock';\n+    const newBlock = 'block2';\n+    const position = {\n+      order: 0,\n+      chapter: 'chapter1',\n+      module: 'module2c1'\n+    };\n+\n+    mockGetSuperblockStructure.mockReturnValue(\n+      incompleteSimpleChapterModuleSuperblock\n+    );\n+\n+    await updateChapterModuleSuperblockStructure(\n+      newBlock,\n+      position,\n+      superblockFilename\n+    );\n+\n+    expect(mockGetSuperblockStructure).toHaveBeenCalledWith(superblockFilename);\n+    expect(mockWriteSuperblockStructure).toHaveBeenCalledWith(\n+      superblockFilename,\n+      {\n+        chapters: [\n+          {\n+            dashedName: 'chapter1',\n+            modules: [\n+              {\n+                dashedName: 'module1c1',\n+                blocks: ['block1', 'block3']\n+              },\n+              {\n+                dashedName: 'module2c1',\n+                blocks: ['block2']\n+              }\n+            ]\n+          }\n+        ]\n+      }\n+    );\n+  });\n+\n+  it('should create a chapter and module if they do not exist', async () => {\n+    const superblockFilename = 'test-superblock';\n+    const newBlock = 'block1m2c2';\n+    const position = {\n+      order: 0,\n+      chapter: 'chapter2',\n+      module: 'module1c2'\n+    };\n+\n+    mockGetSuperblockStructure.mockReturnValue({ chapters: [] });\n+\n+    await updateChapterModuleSuperblockStructure(\n+      newBlock,\n+      position,\n+      superblockFilename\n+    );\n+\n+    expect(mockGetSuperblockStructure).toHaveBeenCalledWith(superblockFilename);\n+    expect(mockWriteSuperblockStructure).toHaveBeenCalledWith(\n+      superblockFilename,\n+      {\n+        chapters: [\n+          {\n+            dashedName: 'chapter2',\n+            modules: [\n+              {\n+                dashedName: 'module1c2',\n+                blocks: ['block1m2c2']\n+              }\n+            ]\n+          }\n+        ]\n+      }\n+    );\n+  });\n+});"
        },
        {
            "sha": "de608cdc754ffdfadd9dc82364ac9ab2be5bc723",
            "filename": "tools/challenge-helper-scripts/helpers/create-project.ts",
            "status": "added",
            "additions": 94,
            "deletions": 0,
            "changes": 94,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fcreate-project.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fcreate-project.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fcreate-project.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -0,0 +1,94 @@\n+// TODO: this belongs in create-project, but we can't test that (since it uses\n+// prettier) until we migrate to vitest\n+import {\n+  getSuperblockStructure,\n+  writeSuperblockStructure\n+} from '../../../curriculum/file-handler';\n+import { insertInto } from './utils';\n+\n+export async function updateSimpleSuperblockStructure(\n+  block: string,\n+  position: { order: number },\n+  superblockFilename: string\n+) {\n+  const existing = getSuperblockStructure(superblockFilename) as {\n+    blocks: string[];\n+  };\n+  const updated = {\n+    blocks: insertInto(existing.blocks, position.order, block)\n+  };\n+  await writeSuperblockStructure(superblockFilename, updated);\n+}\n+\n+function createNewChapter(chapter: string, module: string, block: string) {\n+  return {\n+    dashedName: chapter,\n+    modules: [\n+      {\n+        dashedName: module,\n+        blocks: [block]\n+      }\n+    ]\n+  };\n+}\n+\n+function createNewModule(module: string, block: string) {\n+  return {\n+    dashedName: module,\n+    blocks: [block]\n+  };\n+}\n+\n+type ChapterModuleSuperblockStructure = {\n+  chapters: {\n+    dashedName: string;\n+    modules: {\n+      dashedName: string;\n+      blocks: string[];\n+    }[];\n+  }[];\n+};\n+\n+export async function updateChapterModuleSuperblockStructure(\n+  block: string,\n+  position: { order: number; chapter: string; module: string },\n+  superblockFilename: string\n+) {\n+  const existing = getSuperblockStructure(\n+    superblockFilename\n+  ) as ChapterModuleSuperblockStructure;\n+  const modifiedChapter = existing.chapters.find(\n+    chapter => chapter.dashedName === position.chapter\n+  );\n+  const modifiedModule = modifiedChapter?.modules.find(\n+    module => module.dashedName === position.module\n+  );\n+\n+  const updatedModule = modifiedModule\n+    ? {\n+        ...modifiedModule,\n+        blocks: insertInto(modifiedModule.blocks, position.order, block)\n+      }\n+    : createNewModule(position.module, block);\n+\n+  const updatedChapter = modifiedChapter\n+    ? {\n+        ...modifiedChapter,\n+        modules: modifiedModule\n+          ? modifiedChapter.modules.map(module =>\n+              module === modifiedModule ? updatedModule : module\n+            )\n+          : [...modifiedChapter.modules, updatedModule]\n+      }\n+    : createNewChapter(position.chapter, position.module, block);\n+\n+  const updated = {\n+    chapters: modifiedChapter\n+      ? existing.chapters.map(chapter =>\n+          chapter === modifiedChapter ? updatedChapter : chapter\n+        )\n+      : [...existing.chapters, updatedChapter]\n+  };\n+\n+  await writeSuperblockStructure(superblockFilename, updated);\n+}"
        },
        {
            "sha": "0354b7f27415117528e83fca6ed6eec7d2388a08",
            "filename": "tools/challenge-helper-scripts/helpers/get-base-meta.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fget-base-meta.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fget-base-meta.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fget-base-meta.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -2,9 +2,8 @@ const baseMeta = {\n   name: '',\n   isUpcomingChange: true,\n   dashedName: '',\n-  superBlock: '',\n-  order: 42,\n   helpCategory: '',\n+  blockLayout: 'legacy-challenge-list',\n   challengeOrder: [\n     {\n       id: '',"
        },
        {
            "sha": "7787988e8f77fa70ebbc043ab863fb2cfd9f6d04",
            "filename": "tools/challenge-helper-scripts/helpers/get-challenge-order.test.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 111,
            "changes": 111,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/c58ba56eebc2cf616fbca8577ceee35a0cbc1dfe/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fget-challenge-order.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/c58ba56eebc2cf616fbca8577ceee35a0cbc1dfe/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fget-challenge-order.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fget-challenge-order.test.ts?ref=c58ba56eebc2cf616fbca8577ceee35a0cbc1dfe",
            "patch": "@@ -1,111 +0,0 @@\n-import fs from 'fs';\n-import { join } from 'path';\n-\n-import {\n-  getChallengeOrderFromFileTree,\n-  getChallengeOrderFromMeta\n-} from './get-challenge-order';\n-\n-const basePath = join(\n-  process.cwd(),\n-  '__fixtures__' + process.env.JEST_WORKER_ID\n-);\n-const commonPath = join(basePath, 'curriculum', 'challenges');\n-\n-const block = 'project-get-challenge-order';\n-const metaPath = join(commonPath, '_meta', block);\n-const superBlockPath = join(\n-  commonPath,\n-  'english',\n-  'superblock-get-challenge-order'\n-);\n-const projectPath = join(superBlockPath, block);\n-\n-describe('get-challenge-order helper', () => {\n-  beforeEach(() => {\n-    fs.mkdirSync(superBlockPath, { recursive: true });\n-    fs.mkdirSync(projectPath, { recursive: true });\n-    fs.mkdirSync(metaPath, { recursive: true });\n-  });\n-  describe('getChallengeOrderFromMeta helper', () => {\n-    beforeEach(() => {\n-      fs.writeFileSync(\n-        join(projectPath, 'this-is-a-challenge.md'),\n-        '---\\nid: 1\\ntitle: This is a Challenge\\n---',\n-        'utf-8'\n-      );\n-      fs.writeFileSync(\n-        join(projectPath, 'what-a-cool-thing.md'),\n-        '---\\nid: 100\\ntitle: What a Cool Thing\\n---',\n-        'utf-8'\n-      );\n-      fs.writeFileSync(\n-        join(projectPath, 'i-dunno.md'),\n-        '---\\nid: 2\\ntitle: I Dunno\\n---'\n-      );\n-      fs.writeFileSync(\n-        join(metaPath, 'meta.json'),\n-        `{\n-      \"id\": \"mock-id\",\n-      \"challengeOrder\": [{\"id\": \"1\", \"title\": \"This title is wrong\"}, {\"id\": \"2\", \"title\": \"I Dunno\"}, {\"id\": \"100\", \"title\": \"What a Cool Thing\"}]}`,\n-        'utf-8'\n-      );\n-    });\n-\n-    it('should load the file order', () => {\n-      process.env.CALLING_DIR = projectPath;\n-      const challengeOrder = getChallengeOrderFromMeta();\n-      expect(challengeOrder).toEqual([\n-        { id: '1', title: 'This title is wrong' },\n-        { id: '2', title: 'I Dunno' },\n-        { id: '100', title: 'What a Cool Thing' }\n-      ]);\n-    });\n-  });\n-\n-  describe('getChallengeOrderFromFileTree helper', () => {\n-    beforeEach(() => {\n-      fs.writeFileSync(\n-        join(projectPath, 'step-001.md'),\n-        '---\\nid: a8d97bd4c764e91f9d2bda01\\ntitle: Step 1\\n---',\n-        'utf-8'\n-      );\n-      fs.writeFileSync(\n-        join(projectPath, 'step-002.md'),\n-        '---\\nid: a6b0bb188d873cb2c8729495\\ntitle: Step 2\\n---',\n-        'utf-8'\n-      );\n-      fs.writeFileSync(\n-        join(projectPath, 'step-003.md'),\n-        '---\\nid: a5de63ebea8dbee56860f4f2\\ntitle: Step 3\\n---'\n-      );\n-      fs.writeFileSync(\n-        join(metaPath, 'meta.json'),\n-        `{\n-      \"id\": \"mock-id\",\n-      \"challengeOrder\": [{\"id\": \"a8d97bd4c764e91f9d2bda01\", \"title\": \"Step 1\"}, {\"id\": \"a6b0bb188d873cb2c8729495\", \"title\": \"Step 3\"}, {\"id\": \"a5de63ebea8dbee56860f4f2\", \"title\": \"Step 2\"}]}`,\n-        'utf-8'\n-      );\n-    });\n-\n-    it('should load the file order', async () => {\n-      expect.assertions(1);\n-      process.env.CALLING_DIR = projectPath;\n-      const challengeOrder = await getChallengeOrderFromFileTree();\n-      expect(challengeOrder).toEqual([\n-        { id: 'a8d97bd4c764e91f9d2bda01', title: 'Step 1' },\n-        { id: 'a6b0bb188d873cb2c8729495', title: 'Step 2' },\n-        { id: 'a5de63ebea8dbee56860f4f2', title: 'Step 3' }\n-      ]);\n-    });\n-  });\n-  afterEach(() => {\n-    delete process.env.CALLING_DIR;\n-    try {\n-      fs.rmSync(basePath, { recursive: true });\n-    } catch (err) {\n-      console.log(err);\n-      console.log('Could not remove fixtures folder.');\n-    }\n-  });\n-});"
        },
        {
            "sha": "1b3aaffe114853ae633327dda2b69cc9f864b3ae",
            "filename": "tools/challenge-helper-scripts/helpers/get-challenge-order.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 34,
            "changes": 34,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/c58ba56eebc2cf616fbca8577ceee35a0cbc1dfe/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fget-challenge-order.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/c58ba56eebc2cf616fbca8577ceee35a0cbc1dfe/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fget-challenge-order.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fget-challenge-order.ts?ref=c58ba56eebc2cf616fbca8577ceee35a0cbc1dfe",
            "patch": "@@ -1,34 +0,0 @@\n-import { readdir } from 'fs/promises';\n-import { join } from 'path';\n-\n-import matter from 'gray-matter';\n-\n-import { getProjectPath } from './get-project-info';\n-import { getMetaData } from './project-metadata';\n-\n-export const getChallengeOrderFromFileTree = async (): Promise<\n-  { id: string; title: string }[]\n-> => {\n-  const path = getProjectPath();\n-  const fileList = await readdir(path);\n-  const challengeOrder = fileList\n-    .map(file => {\n-      return matter.read(join(path, file));\n-    })\n-    .map(({ data }) => ({\n-      id: data.id as string,\n-      title: data.title as string\n-    }));\n-  return challengeOrder;\n-};\n-\n-export const getChallengeOrderFromMeta = (): {\n-  id: string;\n-  title: string;\n-}[] => {\n-  const meta = getMetaData();\n-  return meta.challengeOrder.map(({ id, title }) => ({\n-    id,\n-    title\n-  }));\n-};"
        },
        {
            "sha": "6b15b0c9d47a9bf1c7af78714804fadd88398415",
            "filename": "tools/challenge-helper-scripts/helpers/get-step-template.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fget-step-template.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fget-step-template.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fget-step-template.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -24,7 +24,7 @@ type StepOptions = {\n   challengeId: ObjectID;\n   challengeSeeds: Record<string, ChallengeSeed>;\n   stepNum: number;\n-  challengeType: number;\n+  challengeType?: number;\n   isFirstChallenge?: boolean;\n };\n \n@@ -79,7 +79,7 @@ demoType: onClick`\n     `---\n id: ${challengeId.toString()}\n title: Step ${stepNum}\n-challengeType: ${challengeType}\n+challengeType: ${challengeType ?? 'placeholder'}\n dashedName: step-${stepNum}${demoString}\n ---\n "
        },
        {
            "sha": "dd6e1b972f8ae7af94cd6304622941d29bb64eb2",
            "filename": "tools/challenge-helper-scripts/helpers/project-metadata.test.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 193,
            "changes": 202,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fproject-metadata.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fproject-metadata.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fproject-metadata.test.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -1,202 +1,18 @@\n-import fs from 'fs';\n import { join } from 'path';\n-import {\n-  getMetaData,\n-  getProjectMetaPath,\n-  validateMetaData\n-} from './project-metadata';\n+import { getBlockStructure } from '../../../curriculum/file-handler';\n+import { getMetaData } from './project-metadata';\n \n-const basePath = join(\n-  process.cwd(),\n-  '__fixtures__' + process.env.JEST_WORKER_ID\n-);\n-const commonPath = join(basePath, 'curriculum', 'challenges');\n+jest.mock('../../../curriculum/file-handler');\n \n-const block = 'project-project-metadata';\n-const metaPath = join(commonPath, '_meta', block);\n-const superBlockPath = join(\n-  commonPath,\n-  'english',\n-  'superblock-project-metadata'\n-);\n-const projectPath = join(superBlockPath, block);\n+const commonPath = join('curriculum', 'challenges', 'blocks');\n+const block = 'block-name';\n \n describe('project-metadata helper', () => {\n-  beforeEach(() => {\n-    fs.mkdirSync(superBlockPath, { recursive: true });\n-    fs.mkdirSync(projectPath, { recursive: true });\n-    fs.mkdirSync(metaPath, { recursive: true });\n-  });\n-  describe('getProjectMetaPath helper', () => {\n-    it('should return the meta path', () => {\n-      const expected = join(metaPath, 'meta.json');\n-\n-      process.env.CALLING_DIR = projectPath;\n-\n-      expect(getProjectMetaPath()).toEqual(expected);\n-    });\n-  });\n-\n   describe('getMetaData helper', () => {\n-    beforeEach(() => {\n-      fs.writeFileSync(\n-        join(projectPath, 'step-001.md'),\n-        'Lorem ipsum...',\n-        'utf-8'\n-      );\n-      fs.writeFileSync(\n-        join(projectPath, 'step-002.md'),\n-        'Lorem ipsum...',\n-        'utf-8'\n-      );\n-      fs.writeFileSync(\n-        join(projectPath, 'step-003.md'),\n-        'Lorem ipsum...',\n-        'utf-8'\n-      );\n-      fs.writeFileSync(\n-        join(metaPath, 'meta.json'),\n-        `{\n-      \"id\": \"mock-id\",\n-      \"challengeOrder\": [{\"id\": \"1\", \"title\": \"Step 1\"}, {\"id\": \"2\", \"title\": \"Step 2\"}, {\"id\": \"1\", \"title\": \"Step 3\"}]}`,\n-        'utf-8'\n-      );\n-    });\n-\n-    it('should process requested file', () => {\n-      const expected = {\n-        id: 'mock-id',\n-        challengeOrder: [\n-          { id: '1', title: 'Step 1' },\n-          { id: '2', title: 'Step 2' },\n-          { id: '1', title: 'Step 3' }\n-        ]\n-      };\n-      process.env.CALLING_DIR = projectPath;\n-      expect(getMetaData()).toEqual(expected);\n-    });\n-\n-    it('should throw if file is not found', () => {\n-      process.env.CALLING_DIR =\n-        'curriculum/challenges/english/superblock/mick-priject';\n-\n-      const errorPath = join(\n-        'curriculum',\n-        'challenges',\n-        '_meta',\n-        'mick-priject',\n-        'meta.json'\n-      );\n-      expect(() => {\n-        getMetaData();\n-      }).toThrowError(\n-        new Error(`ENOENT: no such file or directory, open '${errorPath}'`)\n-      );\n+    it('should call getBlockStructure with the correct path', () => {\n+      process.env.CALLING_DIR = join(commonPath, block);\n+      getMetaData();\n+      expect(getBlockStructure).toHaveBeenCalledWith(block);\n     });\n   });\n-\n-  describe('validateMetaData helper', () => {\n-    it('should throw if a stepfile is missing', () => {\n-      fs.writeFileSync(\n-        join(projectPath, 'step-001.md'),\n-        `---\n-id: id-1\n-title: Step 2\n-challengeType: a\n-dashedName: step-2\n----\n-`,\n-        'utf-8'\n-      );\n-      fs.writeFileSync(\n-        join(projectPath, 'step-003.md'),\n-        `---\n-id: id-3\n-title: Step 3\n-challengeType: c\n-dashedName: step-3\n----\n-`,\n-        'utf-8'\n-      );\n-      fs.writeFileSync(\n-        join(metaPath, 'meta.json'),\n-        `{\n-      \"id\": \"mock-id\",\n-      \"challengeOrder\": [{\"id\": \"1\", \"title\": \"Step 1\"}, {\"id\": \"2\", \"title\": \"Step 2\"}, {\"id\": \"1\", \"title\": \"Step 3\"}]}`,\n-        'utf-8'\n-      );\n-\n-      process.env.CALLING_DIR = projectPath;\n-\n-      expect(() => validateMetaData()).toThrow(\n-        `The file\n-${projectPath}/1.md\n-does not exist, but is required by the challengeOrder of\n-${metaPath}/meta.json\n-\n-To fix this, you can rename the file containing id: 1 to 1.md\n-If there is no file for this id, then either the challengeOrder needs to be updated, or the file needs to be created.\n-`\n-      );\n-    });\n-\n-    it('should throw if a step is present in the project, but not the meta', () => {\n-      fs.writeFileSync(\n-        join(projectPath, '1.md'),\n-        `---\n-id: id-1\n-title: Step 2\n-challengeType: a\n-dashedName: step-2\n----\n-`,\n-        'utf-8'\n-      );\n-      fs.writeFileSync(\n-        join(projectPath, '2.md'),\n-        `---\n-id: id-2\n-title: Step 1\n-challengeType: b\n-dashedName: step-1\n----\n-`,\n-        'utf-8'\n-      );\n-      fs.writeFileSync(\n-        join(projectPath, '3.md'),\n-        `---\n-id: id-3\n-title: Step 3\n-challengeType: c\n-dashedName: step-3\n----\n-`,\n-        'utf-8'\n-      );\n-      fs.writeFileSync(\n-        join(metaPath, 'meta.json'),\n-        `{\n-      \"id\": \"mock-id\",\n-      \"challengeOrder\": [{\"id\": \"1\", \"title\": \"Step 1\"}, {\"id\": \"2\", \"title\": \"Step 2\"}, {\"id\": \"1\", \"title\": \"Step 3\"}]}`,\n-        'utf-8'\n-      );\n-\n-      process.env.CALLING_DIR = projectPath;\n-\n-      expect(() => validateMetaData()).toThrow(\n-        `File ${projectPath}/3.md should be in the meta.json's challengeOrder`\n-      );\n-    });\n-  });\n-  afterEach(() => {\n-    delete process.env.CALLING_DIR;\n-    try {\n-      fs.rmSync(basePath, { recursive: true });\n-    } catch (err) {\n-      console.log(err);\n-      console.log('Could not remove fixtures folder.');\n-    }\n-  });\n });"
        },
        {
            "sha": "92cd067b45eb954dafb9d89f96304e298962d08f",
            "filename": "tools/challenge-helper-scripts/helpers/project-metadata.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 53,
            "changes": 68,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fproject-metadata.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fproject-metadata.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fproject-metadata.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -1,7 +1,10 @@\n-import fs from 'fs';\n import path from 'path';\n-import glob from 'glob';\n-import { getProjectName, getProjectPath } from './get-project-info';\n+\n+import {\n+  getBlockStructure,\n+  writeBlockStructure\n+} from '../../../curriculum/file-handler';\n+import { getProjectPath } from './get-project-info';\n \n export type Meta = {\n   name: string;\n@@ -10,65 +13,24 @@ export type Meta = {\n   isUpcomingChange: boolean;\n   dashedName: string;\n   helpCategory: string;\n-  order: number;\n   time: string;\n   template: string;\n   required: string[];\n-  superBlock: string;\n   challengeOrder: { id: string; title: string }[];\n };\n \n-function getMetaData(): Meta {\n-  const metaData = fs.readFileSync(getProjectMetaPath(), 'utf-8');\n-  return JSON.parse(metaData) as Meta;\n-}\n-\n-function updateMetaData(newMetaData: Record<string, unknown>): void {\n-  fs.writeFileSync(getProjectMetaPath(), JSON.stringify(newMetaData, null, 2));\n+function getMetaData() {\n+  const block = getBlock(getProjectPath());\n+  return getBlockStructure(block) as Meta;\n }\n \n-function getProjectMetaPath(): string {\n-  return path.join(\n-    getProjectPath(),\n-    '../../..',\n-    '_meta',\n-    getProjectName(),\n-    'meta.json'\n-  );\n+function getBlock(filePath: string) {\n+  return path.basename(filePath);\n }\n \n-// This (and everything else) should be async, but it's fast enough\n-// for the moment.\n-function validateMetaData(): void {\n-  const { challengeOrder } = getMetaData();\n-\n-  // each step in the challengeOrder should correspond to a file\n-  challengeOrder.forEach(({ id }) => {\n-    const filePath = `${getProjectPath()}${id}.md`;\n-    try {\n-      fs.accessSync(filePath);\n-    } catch (_e) {\n-      throw new Error(\n-        `The file\n-${filePath}\n-does not exist, but is required by the challengeOrder of\n-${getProjectMetaPath()}\n-\n-To fix this, you can rename the file containing id: ${id} to ${id}.md\n-If there is no file for this id, then either the challengeOrder needs to be updated, or the file needs to be created.\n-`\n-      );\n-    }\n-  });\n-\n-  // each file should have a corresponding step in the challengeOrder\n-  glob.sync(`${getProjectPath()}/*.md`).forEach(file => {\n-    const id = path.basename(file, '.md');\n-    if (!challengeOrder.find(({ id: stepId }) => stepId === id))\n-      throw new Error(\n-        `File ${file} should be in the meta.json's challengeOrder`\n-      );\n-  });\n+async function updateMetaData(newMetaData: Record<string, unknown>) {\n+  const block = getBlock(getProjectPath());\n+  await writeBlockStructure(block, newMetaData);\n }\n \n-export { getMetaData, updateMetaData, getProjectMetaPath, validateMetaData };\n+export { getMetaData, updateMetaData, getBlock };"
        },
        {
            "sha": "acf9223ec3e43128f2574065e51fba7088e7db11",
            "filename": "tools/challenge-helper-scripts/helpers/utils.test.ts",
            "status": "added",
            "additions": 36,
            "deletions": 0,
            "changes": 36,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fhelpers%2Futils.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fhelpers%2Futils.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fhelpers%2Futils.test.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -0,0 +1,36 @@\n+import { insertInto } from './utils';\n+\n+describe('insertInto', () => {\n+  it('should not modify the original array', () => {\n+    const arr = [1, 2, 3];\n+    const result = insertInto(arr, 1, 99);\n+    expect(arr).toEqual([1, 2, 3]);\n+    expect(result).not.toBe(arr);\n+  });\n+\n+  it('should insert at the end if the index is larger than the original array', () => {\n+    const arr = [1, 2, 3];\n+    const result = insertInto(arr, 10, 99);\n+    expect(result).toEqual([1, 2, 3, 99]);\n+  });\n+\n+  it('should insert at the beginning if the index is <= 0', () => {\n+    const arr = [1, 2, 3];\n+    const result = insertInto(arr, 0, 99);\n+    expect(result).toEqual([99, 1, 2, 3]);\n+    const resultNeg = insertInto(arr, -5, 99);\n+    expect(resultNeg).toEqual([99, 1, 2, 3]);\n+  });\n+\n+  it('should insert at the correct index', () => {\n+    const arr = [1, 2, 3];\n+    const result = insertInto(arr, 1, 99);\n+    expect(result).toEqual([1, 99, 2, 3]);\n+  });\n+\n+  it('should work with empty arrays', () => {\n+    const arr: number[] = [];\n+    const result = insertInto(arr, 0, 99);\n+    expect(result).toEqual([99]);\n+  });\n+});"
        },
        {
            "sha": "96e222c6719d81c82a196a96fbc71e28c4d461b8",
            "filename": "tools/challenge-helper-scripts/helpers/utils.ts",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fhelpers%2Futils.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fhelpers%2Futils.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fhelpers%2Futils.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -0,0 +1,8 @@\n+export function insertInto<T>(arr: T[], index: number, elem: T): T[] {\n+  if (index >= arr.length) return [...arr, elem];\n+  if (index <= 0) return [elem, ...arr];\n+\n+  return arr.flatMap((x, id) => {\n+    return id === index ? [elem, x] : x;\n+  });\n+}"
        },
        {
            "sha": "7da25d9251f70b8936adea26182d1e67fd07a448",
            "filename": "tools/challenge-helper-scripts/insert-challenge.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Finsert-challenge.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Finsert-challenge.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Finsert-challenge.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -5,14 +5,13 @@ import { newChallengePrompts } from './helpers/new-challenge-prompts';\n import { getProjectPath } from './helpers/get-project-info';\n import { getMetaData, updateMetaData } from './helpers/project-metadata';\n import { createChallengeFile } from './utils';\n-import { getChallengeOrderFromMeta } from './helpers/get-challenge-order';\n \n const insertChallenge = async () => {\n   const path = getProjectPath();\n \n   const options = await newChallengePrompts();\n \n-  const challenges = getChallengeOrderFromMeta();\n+  const challenges = getMetaData().challengeOrder;\n \n   const challengeAfter = await prompt<{ id: string }>({\n     name: 'id',\n@@ -38,7 +37,7 @@ const insertChallenge = async () => {\n     id: challengeId.toString(),\n     title: options.title\n   });\n-  updateMetaData(meta);\n+  await updateMetaData(meta);\n };\n \n void insertChallenge();"
        },
        {
            "sha": "068fb3d5aea28bd9083825bebd23a93b228dcd28",
            "filename": "tools/challenge-helper-scripts/insert-step.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Finsert-step.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Finsert-step.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Finsert-step.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -1,6 +1,4 @@\n import { getArgValue } from './helpers/get-arg-value';\n import { insertStep } from './commands';\n-import { validateMetaData } from './helpers/project-metadata';\n \n-validateMetaData();\n-insertStep(getArgValue(process.argv));\n+void insertStep(getArgValue(process.argv));"
        },
        {
            "sha": "6a40fc8e5d9dd1d6ec4c292bf58eabe63ad2c2ed",
            "filename": "tools/challenge-helper-scripts/insert-task.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 7,
            "changes": 11,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Finsert-task.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Finsert-task.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Finsert-task.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -3,19 +3,16 @@ import { prompt } from 'inquirer';\n import { getTemplate } from './helpers/get-challenge-template';\n import { newTaskPrompts } from './helpers/new-task-prompts';\n import { getProjectPath } from './helpers/get-project-info';\n-import { validateMetaData } from './helpers/project-metadata';\n import {\n   createChallengeFile,\n   insertChallengeIntoMeta,\n   updateTaskMeta,\n   updateTaskMarkdownFiles\n } from './utils';\n-import { getChallengeOrderFromMeta } from './helpers/get-challenge-order';\n+import { getMetaData } from './helpers/project-metadata';\n \n const insertChallenge = async () => {\n-  validateMetaData();\n-\n-  const challenges = getChallengeOrderFromMeta();\n+  const challenges = getMetaData().challengeOrder;\n   const challengeAfter = await prompt<{ id: string }>({\n     name: 'id',\n     message: 'Which challenge should come AFTER this new one?',\n@@ -50,14 +47,14 @@ const insertChallenge = async () => {\n   createChallengeFile(challengeIdString, challengeText, path);\n   console.log('Finished creating new task markdown file.');\n \n-  insertChallengeIntoMeta({\n+  await insertChallengeIntoMeta({\n     index: indexToInsert,\n     id: challengeId,\n     title: newTaskTitle\n   });\n   console.log(`Finished inserting task into 'meta.json' file.`);\n \n-  updateTaskMeta();\n+  await updateTaskMeta();\n   console.log(\"Finished updating tasks in 'meta.json'.\");\n \n   updateTaskMarkdownFiles();"
        },
        {
            "sha": "a1655d16d04c08a224c16cad164c906b8ea640dc",
            "filename": "tools/challenge-helper-scripts/reorder-tasks.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Freorder-tasks.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Freorder-tasks.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Freorder-tasks.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -1,10 +1,7 @@\n-import { validateMetaData } from './helpers/project-metadata';\n import { updateTaskMeta, updateTaskMarkdownFiles } from './utils';\n \n-const reorderTasks = () => {\n-  validateMetaData();\n-\n-  updateTaskMeta();\n+const reorderTasks = async () => {\n+  await updateTaskMeta();\n   console.log(\"Finished updating tasks in 'meta.json'.\");\n \n   updateTaskMarkdownFiles();"
        },
        {
            "sha": "63352b54ffd9c222b502ae54723b1e2a04a858db",
            "filename": "tools/challenge-helper-scripts/repair-meta.test.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 73,
            "changes": 73,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/c58ba56eebc2cf616fbca8577ceee35a0cbc1dfe/tools%2Fchallenge-helper-scripts%2Frepair-meta.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/c58ba56eebc2cf616fbca8577ceee35a0cbc1dfe/tools%2Fchallenge-helper-scripts%2Frepair-meta.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Frepair-meta.test.ts?ref=c58ba56eebc2cf616fbca8577ceee35a0cbc1dfe",
            "patch": "@@ -1,73 +0,0 @@\n-import { join } from 'path';\n-import fs from 'fs';\n-\n-import { repairMeta } from './commands';\n-\n-const basePath = join(\n-  process.cwd(),\n-  '__fixtures__' + process.env.JEST_WORKER_ID\n-);\n-const commonPath = join(basePath, 'curriculum', 'challenges');\n-\n-const metaPath = join(commonPath, '_meta', 'project-repair-meta');\n-const superBlockPath = join(commonPath, 'english', 'superblock-repair-meta');\n-const projectPath = join(superBlockPath, 'project-repair-meta');\n-\n-describe('Challenge utils helper scripts', () => {\n-  beforeEach(() => {\n-    process.env.CALLING_DIR = projectPath;\n-    fs.mkdirSync(metaPath, { recursive: true });\n-    fs.mkdirSync(superBlockPath, { recursive: true });\n-    fs.mkdirSync(projectPath);\n-  });\n-\n-  it('should restore the challenge order in the meta.json file', async () => {\n-    fs.writeFileSync(\n-      join(metaPath, 'meta.json'),\n-      // all the challenges from step 1 to 30 in reverse order:\n-      `{\"challengeOrder\": [${Array.from(\n-        { length: 30 },\n-        (_, i) => `{\"id\": \"id-${i + 1}\", \"title\": \"Step ${30 - i}\"}`\n-      ).join(',')}]}`,\n-      'utf-8'\n-    );\n-\n-    // create all 30 challenges:\n-    Array.from({ length: 30 }, (_, i) => {\n-      fs.writeFileSync(\n-        join(projectPath, `step-${i + 1}.md`),\n-        `---\n-id: id-${i + 1}\n-title: Step ${30 - i}\n----\n-`,\n-        'utf-8'\n-      );\n-    });\n-\n-    // run the repair script:\n-    await repairMeta();\n-\n-    // confirm that the meta.json file now has the correct challenge order:\n-    const meta = JSON.parse(\n-      fs.readFileSync(join(metaPath, 'meta.json'), 'utf-8')\n-    ) as { challengeOrder: { id: string; title: string }[] };\n-\n-    expect(meta.challengeOrder).toEqual(\n-      Array.from({ length: 30 }, (_, i) => ({\n-        id: `id-${30 - i}`,\n-        title: `Step ${i + 1}`\n-      }))\n-    );\n-  });\n-\n-  afterEach(() => {\n-    delete process.env.CALLING_DIR;\n-    try {\n-      fs.rmSync(basePath, { recursive: true });\n-    } catch (err) {\n-      console.log(err);\n-      console.log('Could not remove fixtures folder.');\n-    }\n-  });\n-});"
        },
        {
            "sha": "d5a55829a696e533735f852fe8ff3a8d953d6821",
            "filename": "tools/challenge-helper-scripts/repair-meta.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/c58ba56eebc2cf616fbca8577ceee35a0cbc1dfe/tools%2Fchallenge-helper-scripts%2Frepair-meta.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/c58ba56eebc2cf616fbca8577ceee35a0cbc1dfe/tools%2Fchallenge-helper-scripts%2Frepair-meta.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Frepair-meta.ts?ref=c58ba56eebc2cf616fbca8577ceee35a0cbc1dfe",
            "patch": "@@ -1,3 +0,0 @@\n-import { repairMeta } from './commands';\n-\n-void (() => repairMeta())();"
        },
        {
            "sha": "c0af91180e8cc8b3ff712d96a7750baf5f41b952",
            "filename": "tools/challenge-helper-scripts/update-challenge-order.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fupdate-challenge-order.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fupdate-challenge-order.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fupdate-challenge-order.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -1,10 +1,9 @@\n import { prompt } from 'inquirer';\n \n import { getMetaData, updateMetaData } from './helpers/project-metadata';\n-import { getChallengeOrderFromMeta } from './helpers/get-challenge-order';\n \n const updateChallengeOrder = async () => {\n-  const oldChallengeOrder = getChallengeOrderFromMeta();\n+  const oldChallengeOrder = getMetaData().challengeOrder;\n   console.log('Current challenge order is: ');\n   console.table(oldChallengeOrder.map(({ title }) => ({ title })));\n \n@@ -49,7 +48,7 @@ const updateChallengeOrder = async () => {\n \n   const meta = getMetaData();\n   meta.challengeOrder = newChallengeOrder;\n-  updateMetaData(meta);\n+  await updateMetaData(meta);\n };\n \n void (async () => await updateChallengeOrder())();"
        },
        {
            "sha": "8d47c10c17b2007ef401f835178a945a2481e444",
            "filename": "tools/challenge-helper-scripts/update-step-titles.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fupdate-step-titles.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Fupdate-step-titles.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fupdate-step-titles.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -1,5 +1,3 @@\n-import { validateMetaData } from './helpers/project-metadata';\n import { updateStepTitles } from './utils';\n \n-validateMetaData();\n updateStepTitles();"
        },
        {
            "sha": "ef455434c586f39a15247bc0821c2cf1d8082abd",
            "filename": "tools/challenge-helper-scripts/utils.test.ts",
            "status": "modified",
            "additions": 72,
            "deletions": 152,
            "changes": 224,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Futils.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Futils.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Futils.test.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -1,19 +1,42 @@\n import fs from 'fs';\n-import { join } from 'path';\n-import ObjectID from 'bson-objectid';\n-import glob from 'glob';\n+import path, { join } from 'path';\n import matter from 'gray-matter';\n+import ObjectID from 'bson-objectid';\n+\n+jest.mock('fs', () => {\n+  return {\n+    writeFileSync: jest.fn(),\n+    readdirSync: jest.fn()\n+  };\n+});\n+\n+jest.mock('gray-matter', () => {\n+  return {\n+    read: jest.fn(),\n+    stringify: jest.fn()\n+  };\n+});\n \n jest.mock('bson-objectid', () => {\n   return jest.fn(() => ({ toString: () => mockChallengeId }));\n });\n \n jest.mock('./helpers/get-step-template', () => {\n   return {\n-    getStepTemplate: jest.fn(() => 'Mock template...')\n+    getStepTemplate: jest.fn()\n   };\n });\n \n+const mockMeta = {\n+  challengeOrder: [{ id: 'abc', title: 'mock title' }]\n+};\n+\n+jest.mock('./helpers/project-metadata', () => ({\n+  // ...jest.requireActual('./helpers/project-metadata'),\n+  getMetaData: jest.fn(() => mockMeta),\n+  updateMetaData: jest.fn()\n+}));\n+\n const mockChallengeId = '60d35cf3fe32df2ce8e31b03';\n import { getStepTemplate } from './helpers/get-step-template';\n import {\n@@ -23,37 +46,26 @@ import {\n   updateStepTitles,\n   validateBlockName\n } from './utils';\n+import { updateMetaData } from './helpers/project-metadata';\n \n const basePath = join(\n   process.cwd(),\n   '__fixtures__' + process.env.JEST_WORKER_ID\n );\n-const commonPath = join(basePath, 'curriculum', 'challenges');\n+const commonPath = join(basePath, 'curriculum');\n \n const block = 'utils-project';\n-const metaPath = join(commonPath, '_meta', block);\n-const superBlockPath = join(commonPath, 'english', 'utils-superblock');\n-const projectPath = join(superBlockPath, block);\n+const projectPath = join(commonPath, 'challenges', 'english', 'blocks', block);\n \n describe('Challenge utils helper scripts', () => {\n-  beforeEach(() => {\n-    fs.mkdirSync(superBlockPath, { recursive: true });\n-    fs.mkdirSync(projectPath, { recursive: true });\n-    fs.mkdirSync(metaPath, { recursive: true });\n+  afterEach(() => {\n+    jest.clearAllMocks();\n   });\n   describe('createStepFile util', () => {\n     it('should create next step and return its identifier', () => {\n-      fs.writeFileSync(\n-        join(projectPath, 'step-001.md'),\n-        'Lorem ipsum...',\n-        'utf-8'\n-      );\n-      fs.writeFileSync(\n-        join(projectPath, 'step-002.md'),\n-        'Lorem ipsum...',\n-        'utf-8'\n-      );\n       process.env.CALLING_DIR = projectPath;\n+      const mockTemplate = 'Mock template...';\n+      (getStepTemplate as jest.Mock).mockReturnValue(mockTemplate);\n       const step = createStepFile({\n         stepNum: 3,\n         challengeType: 0\n@@ -66,15 +78,10 @@ describe('Challenge utils helper scripts', () => {\n       // Internal tasks\n       // - Should generate a template for the step that is being created\n       expect(getStepTemplate).toHaveBeenCalledTimes(1);\n-\n-      // - Should write a file with a given name and template\n-      const files = glob.sync(`${projectPath}/*.md`);\n-\n-      expect(files).toEqual([\n+      expect(fs.writeFileSync).toHaveBeenCalledWith(\n         `${projectPath}/${mockChallengeId}.md`,\n-        `${projectPath}/step-001.md`,\n-        `${projectPath}/step-002.md`\n-      ]);\n+        mockTemplate\n+      );\n     });\n   });\n \n@@ -104,155 +111,68 @@ describe('Challenge utils helper scripts', () => {\n \n   describe('createChallengeFile util', () => {\n     it('should create the challenge', () => {\n-      fs.writeFileSync(\n-        join(projectPath, 'fake-challenge.md'),\n-        'Lorem ipsum...',\n-        'utf-8'\n-      );\n-      fs.writeFileSync(\n-        join(projectPath, 'so-many-fakes.md'),\n-        'Lorem ipsum...',\n-        'utf-8'\n-      );\n-\n       process.env.CALLING_DIR = projectPath;\n+      const template = 'pretend this is a template';\n \n-      createChallengeFile('hi', 'pretend this is a template');\n+      createChallengeFile('hi', template);\n       // - Should write a file with a given name and template\n-      const files = glob.sync(`${projectPath}/*.md`);\n-\n-      expect(files).toEqual([\n-        `${projectPath}/fake-challenge.md`,\n+      expect(fs.writeFileSync).toHaveBeenCalledWith(\n         `${projectPath}/hi.md`,\n-        `${projectPath}/so-many-fakes.md`\n-      ]);\n+        template\n+      );\n     });\n   });\n \n   describe('insertStepIntoMeta util', () => {\n-    it('should update the meta with a new file id and name', () => {\n-      fs.writeFileSync(\n-        join(metaPath, 'meta.json'),\n-        `{\"id\": \"mock-id\",\n-        \"challengeOrder\": [\n-          {\n-            \"id\": \"id-1\",\n-            \"title\": \"Step 1\"\n-          },\n-          {\n-            \"id\": \"id-2\",\n-            \"title\": \"Step 2\"\n-          },\n-          {\n-            \"id\": \"id-3\",\n-            \"title\": \"Step 3\"\n-          }\n-        ]}`,\n-        'utf-8'\n-      );\n+    it('should call updateMetaData with a new file id and name', async () => {\n       process.env.CALLING_DIR = projectPath;\n \n-      insertStepIntoMeta({ stepNum: 3, stepId: new ObjectID(mockChallengeId) });\n+      await insertStepIntoMeta({\n+        stepNum: 3,\n+        stepId: new ObjectID(mockChallengeId)\n+      });\n \n-      const meta = JSON.parse(\n-        fs.readFileSync(join(metaPath, 'meta.json'), 'utf-8')\n-      );\n-      expect(meta).toEqual({\n-        id: 'mock-id',\n+      expect(updateMetaData).toHaveBeenCalledWith({\n         challengeOrder: [\n-          {\n-            id: 'id-1',\n-            title: 'Step 1'\n-          },\n-          {\n-            id: 'id-2',\n-            title: 'Step 2'\n-          },\n-          {\n-            id: mockChallengeId,\n-            title: 'Step 3'\n-          },\n-          {\n-            id: 'id-3',\n-            title: 'Step 4'\n-          }\n+          { id: 'abc', title: 'Step 1' }, // title gets overwritten\n+          { id: mockChallengeId, title: 'Step 2' }\n         ]\n       });\n     });\n   });\n \n   describe('updateStepTitles util', () => {\n     it('should apply meta.challengeOrder to step files', () => {\n-      fs.writeFileSync(\n-        join(metaPath, 'meta.json'),\n-        `{\"id\": \"mock-id\", \"challengeOrder\": [{\"id\": \"id-1\", \"title\": \"Step 1\"}, {\"id\": \"id-3\", \"title\": \"Step 2\"}, {\"id\": \"id-2\", \"title\": \"Step 3\"}]}`,\n-        'utf-8'\n-      );\n-      fs.writeFileSync(\n-        join(projectPath, 'id-1.md'),\n-        `---\n-id: id-1\n-title: Step 2\n-challengeType: a\n-dashedName: step-2\n----\n-`,\n-        'utf-8'\n-      );\n-      fs.writeFileSync(\n-        join(projectPath, 'id-2.md'),\n-        `---\n-id: id-2\n-title: Step 1\n-challengeType: b\n-dashedName: step-1\n----\n-`,\n-        'utf-8'\n-      );\n-      fs.writeFileSync(\n-        join(projectPath, 'id-3.md'),\n-        `---\n-id: id-3\n-title: Step 3\n-challengeType: c\n-dashedName: step-3\n----\n-`,\n-        'utf-8'\n-      );\n-\n       process.env.CALLING_DIR = projectPath;\n+      (getStepTemplate as jest.Mock).mockReturnValue('Mock template...');\n+      (fs.readdirSync as jest.Mock).mockReturnValue([\n+        'name.md',\n+        'another-name.md'\n+      ]);\n+      (matter.read as jest.Mock).mockReturnValue({\n+        data: { id: 'abc' },\n+        content: 'goes here'\n+      });\n \n       updateStepTitles();\n \n-      expect(matter.read(join(projectPath, 'id-1.md')).data).toEqual({\n-        id: 'id-1',\n-        title: 'Step 1',\n-        challengeType: 'a',\n-        dashedName: 'step-1'\n-      });\n-      expect(matter.read(join(projectPath, 'id-2.md')).data).toEqual({\n-        id: 'id-2',\n-        title: 'Step 3',\n-        challengeType: 'b',\n-        dashedName: 'step-3'\n-      });\n-      expect(matter.read(join(projectPath, 'id-3.md')).data).toEqual({\n-        id: 'id-3',\n-        title: 'Step 2',\n-        challengeType: 'c',\n-        dashedName: 'step-2'\n+      expect(fs.readdirSync).toHaveBeenCalledWith(projectPath + '/');\n+      expect(fs.writeFileSync).toHaveBeenCalledWith(\n+        path.join(projectPath, 'name.md'),\n+        undefined\n+      );\n+      expect(fs.writeFileSync).toHaveBeenCalledWith(\n+        path.join(projectPath, 'another-name.md'),\n+        undefined\n+      );\n+      expect(matter.stringify).toHaveBeenCalledWith('goes here', {\n+        dashedName: 'step-1',\n+        id: 'abc',\n+        title: 'Step 1'\n       });\n     });\n   });\n   afterEach(() => {\n     delete process.env.CALLING_DIR;\n-    try {\n-      fs.rmSync(basePath, { recursive: true });\n-    } catch (err) {\n-      console.log(err);\n-      console.log('Could not remove fixtures folder.');\n-    }\n   });\n });"
        },
        {
            "sha": "1b4f0e49b816b78e5f91252760307e807c94fdd3",
            "filename": "tools/challenge-helper-scripts/utils.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Futils.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/10c565828ef3b4008ccfd55fc87b36085cc3e838/tools%2Fchallenge-helper-scripts%2Futils.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Futils.ts?ref=10c565828ef3b4008ccfd55fc87b36085cc3e838",
            "patch": "@@ -15,7 +15,7 @@ import { getTemplate } from './helpers/get-challenge-template';\n \n interface Options {\n   stepNum: number;\n-  challengeType: number;\n+  challengeType?: number;\n   projectPath?: string;\n   challengeSeeds?: Record<string, ChallengeSeed>;\n   isFirstChallenge?: boolean;\n@@ -112,20 +112,20 @@ interface InsertChallengeOptions {\n   title: string;\n }\n \n-function insertChallengeIntoMeta({\n+async function insertChallengeIntoMeta({\n   index,\n   id,\n   title\n-}: InsertChallengeOptions): void {\n+}: InsertChallengeOptions) {\n   const existingMeta = getMetaData();\n   const challengeOrder = [...existingMeta.challengeOrder];\n \n   // eslint-disable-next-line @typescript-eslint/no-base-to-string\n   challengeOrder.splice(index, 0, { id: id.toString(), title });\n-  updateMetaData({ ...existingMeta, challengeOrder });\n+  await updateMetaData({ ...existingMeta, challengeOrder });\n }\n \n-function insertStepIntoMeta({ stepNum, stepId }: InsertOptions): void {\n+async function insertStepIntoMeta({ stepNum, stepId }: InsertOptions) {\n   const existingMeta = getMetaData();\n   const oldOrder = [...existingMeta.challengeOrder];\n   // eslint-disable-next-line @typescript-eslint/no-base-to-string\n@@ -136,10 +136,10 @@ function insertStepIntoMeta({ stepNum, stepId }: InsertOptions): void {\n     title: `Step ${index + 1}`\n   }));\n \n-  updateMetaData({ ...existingMeta, challengeOrder });\n+  await updateMetaData({ ...existingMeta, challengeOrder });\n }\n \n-function deleteStepFromMeta({ stepNum }: { stepNum: number }): void {\n+async function deleteStepFromMeta({ stepNum }: { stepNum: number }) {\n   const existingMeta = getMetaData();\n   const oldOrder = [...existingMeta.challengeOrder];\n   oldOrder.splice(stepNum - 1, 1);\n@@ -149,17 +149,17 @@ function deleteStepFromMeta({ stepNum }: { stepNum: number }): void {\n     title: `Step ${index + 1}`\n   }));\n \n-  updateMetaData({ ...existingMeta, challengeOrder });\n+  await updateMetaData({ ...existingMeta, challengeOrder });\n }\n \n-function deleteChallengeFromMeta(challengeIndex: number): void {\n+async function deleteChallengeFromMeta(challengeIndex: number) {\n   const existingMeta = getMetaData();\n   const challengeOrder = [...existingMeta.challengeOrder];\n   challengeOrder.splice(challengeIndex, 1);\n-  updateMetaData({ ...existingMeta, challengeOrder });\n+  await updateMetaData({ ...existingMeta, challengeOrder });\n }\n \n-function updateTaskMeta() {\n+async function updateTaskMeta() {\n   const existingMeta = getMetaData();\n   const oldOrder = [...existingMeta.challengeOrder];\n \n@@ -176,7 +176,7 @@ function updateTaskMeta() {\n     }\n   });\n \n-  updateMetaData({ ...existingMeta, challengeOrder });\n+  await updateMetaData({ ...existingMeta, challengeOrder });\n }\n \n const updateStepTitles = (): void => {"
        }
    ],
    "stats": {
        "total": 1783,
        "additions": 773,
        "deletions": 1010
    }
}