{
    "author": "ojeytonwilliams",
    "message": "fix(client): remove video component (#57389)",
    "sha": "25de45da462403ea6a7dc28daff3f1b71fe4a41b",
    "files": [
        {
            "sha": "0165e47051f4645b9f3bebfecccf51a0773440c0",
            "filename": "client/src/templates/Challenges/video/show.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 357,
            "changes": 357,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/d80e3b0c8f98f74a5689d17b82db0f127391061a/client%2Fsrc%2Ftemplates%2FChallenges%2Fvideo%2Fshow.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/d80e3b0c8f98f74a5689d17b82db0f127391061a/client%2Fsrc%2Ftemplates%2FChallenges%2Fvideo%2Fshow.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fvideo%2Fshow.tsx?ref=d80e3b0c8f98f74a5689d17b82db0f127391061a",
            "patch": "@@ -1,357 +0,0 @@\n-// Package Utilities\n-import { graphql } from 'gatsby';\n-import React, { Component } from 'react';\n-import Helmet from 'react-helmet';\n-import { ObserveKeys } from 'react-hotkeys';\n-import type { TFunction } from 'i18next';\n-import { withTranslation } from 'react-i18next';\n-import { connect } from 'react-redux';\n-import { bindActionCreators } from 'redux';\n-import type { Dispatch } from 'redux';\n-import { createSelector } from 'reselect';\n-import { isEqual } from 'lodash-es';\n-import { Container, Col, Row, Button, Spacer } from '@freecodecamp/ui';\n-\n-// Local Utilities\n-import LearnLayout from '../../../components/layouts/learn';\n-import { ChallengeNode, ChallengeMeta, Test } from '../../../redux/prop-types';\n-import { challengeTypes } from '../../../../../shared/config/challenge-types';\n-import ChallengeDescription from '../components/challenge-description';\n-import Hotkeys from '../components/hotkeys';\n-import VideoPlayer from '../components/video-player';\n-import ChallengeTitle from '../components/challenge-title';\n-import CompletionModal from '../components/completion-modal';\n-import HelpModal from '../components/help-modal';\n-import MultipleChoiceQuestions from '../components/multiple-choice-questions';\n-import {\n-  challengeMounted,\n-  updateChallengeMeta,\n-  openModal,\n-  updateSolutionFormValues,\n-  initTests\n-} from '../redux/actions';\n-import { isChallengeCompletedSelector } from '../redux/selectors';\n-\n-// Redux Setup\n-const mapStateToProps = createSelector(\n-  isChallengeCompletedSelector,\n-  (isChallengeCompleted: boolean) => ({\n-    isChallengeCompleted\n-  })\n-);\n-const mapDispatchToProps = (dispatch: Dispatch) =>\n-  bindActionCreators(\n-    {\n-      initTests,\n-      updateChallengeMeta,\n-      challengeMounted,\n-      updateSolutionFormValues,\n-      openCompletionModal: () => openModal('completion'),\n-      openHelpModal: () => openModal('help')\n-    },\n-    dispatch\n-  );\n-\n-// Types\n-interface ShowVideoProps {\n-  challengeMounted: (arg0: string) => void;\n-  data: { challengeNode: ChallengeNode };\n-  description: string;\n-  initTests: (xs: Test[]) => void;\n-  isChallengeCompleted: boolean;\n-  openCompletionModal: () => void;\n-  openHelpModal: () => void;\n-  pageContext: {\n-    challengeMeta: ChallengeMeta;\n-  };\n-  t: TFunction;\n-  updateChallengeMeta: (arg0: ChallengeMeta) => void;\n-  updateSolutionFormValues: () => void;\n-}\n-\n-interface ShowVideoState {\n-  subtitles: string;\n-  downloadURL: string | null;\n-  selectedMcqOptions: (number | null)[];\n-  submittedMcqAnswers: (number | null)[];\n-  showFeedback: boolean;\n-  videoIsLoaded: boolean;\n-}\n-\n-// Component\n-class ShowVideo extends Component<ShowVideoProps, ShowVideoState> {\n-  static displayName: string;\n-  private container: React.RefObject<HTMLElement> = React.createRef();\n-\n-  constructor(props: ShowVideoProps) {\n-    super(props);\n-\n-    const {\n-      data: {\n-        challengeNode: {\n-          challenge: { questions }\n-        }\n-      }\n-    } = this.props;\n-\n-    this.state = {\n-      subtitles: '',\n-      downloadURL: null,\n-      selectedMcqOptions: questions.map(() => null),\n-      submittedMcqAnswers: questions.map(() => null),\n-      showFeedback: false,\n-      videoIsLoaded: false\n-    };\n-  }\n-\n-  componentDidMount(): void {\n-    const {\n-      challengeMounted,\n-      data: {\n-        challengeNode: {\n-          challenge: {\n-            fields: { tests },\n-            title,\n-            challengeType,\n-            helpCategory\n-          }\n-        }\n-      },\n-      pageContext: { challengeMeta },\n-      initTests,\n-      updateChallengeMeta\n-    } = this.props;\n-    initTests(tests);\n-    updateChallengeMeta({\n-      ...challengeMeta,\n-      title,\n-      challengeType,\n-      helpCategory\n-    });\n-    challengeMounted(challengeMeta.id);\n-    this.container.current?.focus();\n-  }\n-\n-  componentDidUpdate(prevProps: ShowVideoProps): void {\n-    const {\n-      data: {\n-        challengeNode: {\n-          challenge: { title: prevTitle }\n-        }\n-      }\n-    } = prevProps;\n-    const {\n-      challengeMounted,\n-      data: {\n-        challengeNode: {\n-          challenge: { title: currentTitle, challengeType, helpCategory }\n-        }\n-      },\n-      pageContext: { challengeMeta },\n-      updateChallengeMeta\n-    } = this.props;\n-    if (prevTitle !== currentTitle) {\n-      updateChallengeMeta({\n-        ...challengeMeta,\n-        title: currentTitle,\n-        challengeType,\n-        helpCategory\n-      });\n-      challengeMounted(challengeMeta.id);\n-    }\n-  }\n-\n-  handleSubmit = () => {\n-    const {\n-      data: {\n-        challengeNode: {\n-          challenge: { questions }\n-        }\n-      },\n-      openCompletionModal\n-    } = this.props;\n-\n-    // subract 1 because the solutions are 1-indexed\n-    const mcqSolutions = questions.map(question => question.solution - 1);\n-\n-    this.setState({\n-      submittedMcqAnswers: this.state.selectedMcqOptions,\n-      showFeedback: true\n-    });\n-\n-    const allMcqAnswersCorrect = isEqual(\n-      mcqSolutions,\n-      this.state.selectedMcqOptions\n-    );\n-\n-    if (allMcqAnswersCorrect) {\n-      openCompletionModal();\n-    }\n-  };\n-\n-  handleMcqOptionChange = (\n-    questionIndex: number,\n-    answerIndex: number\n-  ): void => {\n-    this.setState(state => ({\n-      selectedMcqOptions: state.selectedMcqOptions.map((option, index) =>\n-        index === questionIndex ? answerIndex : option\n-      )\n-    }));\n-  };\n-\n-  onVideoLoad = () => {\n-    this.setState({\n-      videoIsLoaded: true\n-    });\n-  };\n-\n-  render() {\n-    const {\n-      data: {\n-        challengeNode: {\n-          challenge: {\n-            title,\n-            challengeType,\n-            description,\n-            superBlock,\n-            block,\n-            translationPending,\n-            videoId,\n-            videoLocaleIds,\n-            bilibiliIds,\n-            fields: { blockName },\n-            questions\n-          }\n-        }\n-      },\n-      openHelpModal,\n-      pageContext: {\n-        challengeMeta: { nextChallengePath, prevChallengePath }\n-      },\n-      t,\n-      isChallengeCompleted\n-    } = this.props;\n-\n-    const blockNameTitle = `${t(\n-      `intro:${superBlock}.blocks.${block}.title`\n-    )} - ${title}`;\n-\n-    return (\n-      <Hotkeys\n-        executeChallenge={this.handleSubmit}\n-        containerRef={this.container}\n-        nextChallengePath={nextChallengePath}\n-        prevChallengePath={prevChallengePath}\n-      >\n-        <LearnLayout>\n-          <Helmet\n-            title={`${blockNameTitle} | ${t('learn.learn')} | freeCodeCamp.org`}\n-          />\n-          <Container>\n-            <Row>\n-              <Spacer size='m' />\n-              <ChallengeTitle\n-                isCompleted={isChallengeCompleted}\n-                translationPending={translationPending}\n-              >\n-                {title}\n-              </ChallengeTitle>\n-\n-              {challengeType === challengeTypes.video && (\n-                <Col lg={10} lgOffset={1} md={10} mdOffset={1}>\n-                  <VideoPlayer\n-                    bilibiliIds={bilibiliIds}\n-                    onVideoLoad={this.onVideoLoad}\n-                    title={title}\n-                    videoId={videoId}\n-                    videoIsLoaded={this.state.videoIsLoaded}\n-                    videoLocaleIds={videoLocaleIds}\n-                  />\n-                </Col>\n-              )}\n-\n-              <Col md={8} mdOffset={2} sm={10} smOffset={1} xs={12}>\n-                <ChallengeDescription description={description} />\n-                <ObserveKeys>\n-                  <MultipleChoiceQuestions\n-                    questions={questions}\n-                    selectedOptions={this.state.selectedMcqOptions}\n-                    handleOptionChange={this.handleMcqOptionChange}\n-                    submittedMcqAnswers={this.state.submittedMcqAnswers}\n-                    showFeedback={this.state.showFeedback}\n-                  />\n-                </ObserveKeys>\n-                <Spacer size='m' />\n-                <Button\n-                  block={true}\n-                  variant='primary'\n-                  onClick={this.handleSubmit}\n-                >\n-                  {t('buttons.check-answer')}\n-                </Button>\n-                <Spacer size='xxs' />\n-                <Button block={true} variant='primary' onClick={openHelpModal}>\n-                  {t('buttons.ask-for-help')}\n-                </Button>\n-                <Spacer size='l' />\n-              </Col>\n-              <CompletionModal />\n-              <HelpModal challengeTitle={title} challengeBlock={blockName} />\n-            </Row>\n-          </Container>\n-        </LearnLayout>\n-      </Hotkeys>\n-    );\n-  }\n-}\n-\n-ShowVideo.displayName = 'ShowVideo';\n-\n-export default connect(\n-  mapStateToProps,\n-  mapDispatchToProps\n-)(withTranslation()(ShowVideo));\n-\n-export const query = graphql`\n-  query VideoChallenge($id: String!) {\n-    challengeNode(id: { eq: $id }) {\n-      challenge {\n-        videoId\n-        videoLocaleIds {\n-          espanol\n-          italian\n-          portuguese\n-        }\n-        bilibiliIds {\n-          aid\n-          bvid\n-          cid\n-        }\n-        title\n-        description\n-        challengeType\n-        helpCategory\n-        superBlock\n-        block\n-        fields {\n-          blockName\n-          slug\n-          tests {\n-            text\n-            testString\n-          }\n-        }\n-        questions {\n-          text\n-          answers {\n-            answer\n-            feedback\n-          }\n-          solution\n-        }\n-        translationPending\n-      }\n-    }\n-  }\n-`;"
        },
        {
            "sha": "3e733405d5498366d690daf4ef6832e641886a79",
            "filename": "client/utils/gatsby/challenge-page-creator.js",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/25de45da462403ea6a7dc28daff3f1b71fe4a41b/client%2Futils%2Fgatsby%2Fchallenge-page-creator.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/25de45da462403ea6a7dc28daff3f1b71fe4a41b/client%2Futils%2Fgatsby%2Fchallenge-page-creator.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Futils%2Fgatsby%2Fchallenge-page-creator.js?ref=25de45da462403ea6a7dc28daff3f1b71fe4a41b",
            "patch": "@@ -31,11 +31,6 @@ const quiz = path.resolve(\n   '../../src/templates/Challenges/quiz/show.tsx'\n );\n \n-const video = path.resolve(\n-  __dirname,\n-  '../../src/templates/Challenges/video/show.tsx'\n-);\n-\n const exam = path.resolve(\n   __dirname,\n   '../../src/templates/Challenges/exam/show.tsx'\n@@ -62,7 +57,6 @@ const views = {\n   modern: classic,\n   frontend,\n   quiz,\n-  video,\n   codeAlly,\n   exam,\n   msTrophy,"
        },
        {
            "sha": "76973e61e805c792a7cca1f754825f2638c4beab",
            "filename": "shared/config/challenge-types.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/25de45da462403ea6a7dc28daff3f1b71fe4a41b/shared%2Fconfig%2Fchallenge-types.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/25de45da462403ea6a7dc28daff3f1b71fe4a41b/shared%2Fconfig%2Fchallenge-types.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/shared%2Fconfig%2Fchallenge-types.ts?ref=25de45da462403ea6a7dc28daff3f1b71fe4a41b",
            "patch": "@@ -92,7 +92,7 @@ export const viewTypes = {\n   [step]: 'step',\n   [quiz]: 'quiz',\n   [backend]: 'backend',\n-  [video]: 'video',\n+  [video]: 'generic',\n   [codeAllyPractice]: 'codeAlly',\n   [codeAllyCert]: 'codeAlly',\n   [multifileCertProject]: 'classic',"
        }
    ],
    "stats": {
        "total": 365,
        "additions": 1,
        "deletions": 364
    }
}