{
    "author": "huyenltnguyen",
    "message": "test(e2e): consolidate /learn tests (#55415)",
    "sha": "35faca5df6fd5032c18c35f221fc620afd128ac7",
    "files": [
        {
            "sha": "7ce133b567c8150b1a27af248c9316c1f78953a3",
            "filename": "e2e/intro.spec.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 78,
            "changes": 78,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/bb95e2ff5478c6a61826241e75cc74612163ace4/e2e%2Fintro.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/bb95e2ff5478c6a61826241e75cc74612163ace4/e2e%2Fintro.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fintro.spec.ts?ref=bb95e2ff5478c6a61826241e75cc74612163ace4",
            "patch": "@@ -1,78 +0,0 @@\n-import { test, expect } from '@playwright/test';\n-import translations from '../client/i18n/locales/english/translations.json';\n-\n-test.beforeEach(async ({ page }) => {\n-  await page.goto('/learn');\n-});\n-\n-const IntroObject = {\n-  randomQuote: 'random-quote',\n-  randomAuthor: 'random-author',\n-  youtubeChannelPlaceholder: \"<0>freeCodeCamp's YouTube channel</0>\",\n-  youtubeText: \"freeCodeCamp's YouTube channel\",\n-  forumPlaceholder: '<0>the freeCodeCamp forum</0>',\n-  forumText: 'the freeCodeCamp forum',\n-  userNamePlaceholder: '{{name}}',\n-  userName: 'Full Stack User'\n-};\n-\n-const IntroDescription = [\n-  translations.learn['read-this'].p1,\n-  translations.learn['read-this'].p2,\n-  translations.learn['read-this'].p3,\n-  translations.learn['read-this'].p4,\n-  translations.learn['read-this'].p5,\n-  translations.learn['read-this'].p6,\n-  translations.learn['read-this'].p7,\n-  translations.learn['read-this'].p8,\n-  translations.learn['read-this'].p9.replace(\n-    IntroObject.youtubeChannelPlaceholder,\n-    IntroObject.youtubeText\n-  ),\n-  translations.learn['read-this'].p10,\n-  translations.learn['read-this'].p11.replace(\n-    IntroObject.forumPlaceholder,\n-    IntroObject.forumText\n-  ),\n-  translations.learn['read-this'].p12\n-];\n-\n-test.describe('Intro Component E2E Test Suite with Signed In User', () => {\n-  test.use({ storageState: 'playwright/.auth/certified-user.json' });\n-  test('Verifies the Correct Intro component heading', async ({ page }) => {\n-    await expect(\n-      page.getByText(\n-        translations.learn['welcome-1'].replace(\n-          IntroObject.userNamePlaceholder,\n-          IntroObject.userName\n-        )\n-      )\n-    ).toBeVisible();\n-  });\n-\n-  test('Verifies the Random Quote Section', ({ page }) => {\n-    const quote = page.getByTestId(IntroObject.randomQuote);\n-    const author = page.getByTestId(IntroObject.randomAuthor);\n-    expect(quote).not.toBeNull();\n-    expect(author).not.toBeNull();\n-  });\n-});\n-\n-test.describe('Intro Component E2E Test Suite with Signed Out User', () => {\n-  test('Verifies the Correct Intro component heading', async ({ page }) => {\n-    await expect(page.getByText(translations.learn.heading)).toBeVisible();\n-  });\n-\n-  test('Verifies Intro Description Section', async ({ page }) => {\n-    await expect(\n-      page.getByText(translations.learn['read-this'].heading)\n-    ).toBeVisible();\n-    for (let i = 0; i < IntroDescription.length; i++) {\n-      await expect(page.getByText(IntroDescription[i])).toBeVisible();\n-    }\n-  });\n-\n-  test('Verifies Login CTA', async ({ page }) => {\n-    await page.getByText(translations.buttons['logged-out-cta-btn']).click();\n-  });\n-});"
        },
        {
            "sha": "9ce0b901d347ce650ed24234e4f7cf554e293b74",
            "filename": "e2e/learn.spec.ts",
            "status": "modified",
            "additions": 68,
            "deletions": 37,
            "changes": 105,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/35faca5df6fd5032c18c35f221fc620afd128ac7/e2e%2Flearn.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/35faca5df6fd5032c18c35f221fc620afd128ac7/e2e%2Flearn.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Flearn.spec.ts?ref=35faca5df6fd5032c18c35f221fc620afd128ac7",
            "patch": "@@ -1,5 +1,4 @@\n import { test, expect } from '@playwright/test';\n-import translations from '../client/i18n/locales/english/translations.json';\n import words from '../client/i18n/locales/english/motivation.json';\n \n const superBlocks = [\n@@ -26,47 +25,71 @@ const superBlocks = [\n   'Legacy Python for Everybody'\n ];\n \n-test('the page should render correctly', async ({ page }) => {\n-  await page.goto('/learn');\n-  await expect(page).toHaveTitle(\n-    'Learn to Code — For Free — Coding Courses for Busy People'\n-  );\n-\n-  const header = page.getByTestId('learn-heading');\n-  await expect(header).toBeVisible();\n-  await expect(header).toContainText(translations.learn.heading);\n-\n-  // Advice for new learners\n-  const learnReadThisSection = page.getByTestId('learn-read-this-section');\n-  await expect(learnReadThisSection).toBeVisible();\n-\n-  const learnReadThisSectionHeading = page.getByTestId(\n-    'learn-read-this-heading'\n-  );\n-  await expect(learnReadThisSectionHeading).toBeVisible();\n-\n-  const learnReadThisSectionParagraphs = page.getByTestId('learn-read-this-p');\n-  await expect(learnReadThisSectionParagraphs).toHaveCount(10);\n-\n-  for (const paragraph of await learnReadThisSectionParagraphs.all()) {\n-    await expect(paragraph).toBeVisible();\n-  }\n-  // certifications\n-  const curriculumBtns = page.getByTestId('curriculum-map-button');\n-  await expect(curriculumBtns).toHaveCount(superBlocks.length);\n-  for (let i = 0; i < superBlocks.length; i++) {\n-    const btn = curriculumBtns.nth(i);\n-    await expect(btn).toContainText(superBlocks[i]);\n-  }\n+test.describe('Learn - Unauthenticated user', () => {\n+  test.use({ storageState: { cookies: [], origins: [] } });\n+\n+  test('the page should render correctly', async ({ page }) => {\n+    await page.goto('/learn');\n+\n+    await expect(page).toHaveTitle(\n+      'Learn to Code — For Free — Coding Courses for Busy People'\n+    );\n+\n+    await expect(\n+      page.getByRole('heading', {\n+        level: 1,\n+        name: \"Welcome to freeCodeCamp's curriculum.\"\n+      })\n+    ).toBeVisible();\n+\n+    // Advice for new learners\n+    const learnReadThisSection = page.getByTestId('learn-read-this-section');\n+    await expect(learnReadThisSection).toBeVisible();\n+\n+    const learnReadThisSectionHeading = page.getByTestId(\n+      'learn-read-this-heading'\n+    );\n+    await expect(learnReadThisSectionHeading).toBeVisible();\n+\n+    const learnReadThisSectionParagraphs =\n+      page.getByTestId('learn-read-this-p');\n+    await expect(learnReadThisSectionParagraphs).toHaveCount(10);\n+\n+    for (const paragraph of await learnReadThisSectionParagraphs.all()) {\n+      await expect(paragraph).toBeVisible();\n+    }\n+\n+    // certifications\n+    const curriculumBtns = page.getByTestId('curriculum-map-button');\n+    await expect(curriculumBtns).toHaveCount(superBlocks.length);\n+    for (let i = 0; i < superBlocks.length; i++) {\n+      const btn = curriculumBtns.nth(i);\n+      await expect(btn).toContainText(superBlocks[i]);\n+    }\n+\n+    await expect(\n+      page.getByRole('link', { name: 'Sign in to save your progress' })\n+    ).toBeVisible();\n+  });\n });\n \n-test.describe('Learn (authenticated user)', () => {\n+test.describe('Learn - Authenticated user)', () => {\n   test.use({ storageState: 'playwright/.auth/certified-user.json' });\n \n-  test('the page shows a random quote for an authenticated user', async ({\n-    page\n-  }) => {\n+  test('the page should render correctly', async ({ page }) => {\n     await page.goto('/learn');\n+\n+    await expect(page).toHaveTitle(\n+      'Learn to Code — For Free — Coding Courses for Busy People'\n+    );\n+\n+    await expect(\n+      page.getByRole('heading', {\n+        level: 1,\n+        name: 'Welcome back, Full Stack User.'\n+      })\n+    ).toBeVisible();\n+\n     const shownQuote = await page.getByTestId('random-quote').textContent();\n \n     const shownAuthorText = await page\n@@ -80,5 +103,13 @@ test.describe('Learn (authenticated user)', () => {\n \n     expect(allMotivationalQuotes).toContain(shownQuote);\n     expect(allAuthors).toContain(shownAuthor);\n+\n+    // certifications\n+    const curriculumBtns = page.getByTestId('curriculum-map-button');\n+    await expect(curriculumBtns).toHaveCount(superBlocks.length);\n+    for (let i = 0; i < superBlocks.length; i++) {\n+      const btn = curriculumBtns.nth(i);\n+      await expect(btn).toContainText(superBlocks[i]);\n+    }\n   });\n });"
        }
    ],
    "stats": {
        "total": 183,
        "additions": 68,
        "deletions": 115
    }
}