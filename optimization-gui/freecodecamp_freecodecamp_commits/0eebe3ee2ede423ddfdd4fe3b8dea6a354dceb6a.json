{
    "author": "ojeytonwilliams",
    "message": "refactor: simplify curriculum ordering (#55657)",
    "sha": "0eebe3ee2ede423ddfdd4fe3b8dea6a354dceb6a",
    "files": [
        {
            "sha": "6154b86dc18e50250f16faafcbf4ff4e4675e1aa",
            "filename": "client/src/components/Map/index.tsx",
            "status": "modified",
            "additions": 29,
            "deletions": 100,
            "changes": 129,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0eebe3ee2ede423ddfdd4fe3b8dea6a354dceb6a/client%2Fsrc%2Fcomponents%2FMap%2Findex.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0eebe3ee2ede423ddfdd4fe3b8dea6a354dceb6a/client%2Fsrc%2Fcomponents%2FMap%2Findex.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FMap%2Findex.tsx?ref=0eebe3ee2ede423ddfdd4fe3b8dea6a354dceb6a",
            "patch": "@@ -4,15 +4,19 @@ import { useTranslation } from 'react-i18next';\n import { connect } from 'react-redux';\n import { createSelector } from 'reselect';\n import {\n-  SuperBlockStages,\n-  SuperBlocks,\n-  superBlockOrder\n+  type SuperBlocks,\n+  SuperBlockStage,\n+  getStageOrder,\n+  superBlockStages\n } from '../../../../shared/config/curriculum';\n import { SuperBlockIcon } from '../../assets/icons/superblock-icon';\n import LinkButton from '../../assets/icons/link-button';\n import { Spacer, ButtonLink } from '../helpers';\n import { getSuperBlockTitleForMap } from '../../utils/superblock-map-titles';\n-import { showUpcomingChanges } from '../../../config/env.json';\n+import {\n+  showUpcomingChanges,\n+  showNewCurriculum\n+} from '../../../config/env.json';\n \n import './map.css';\n \n@@ -49,11 +53,15 @@ const linkSpacingStyle = {\n   gap: '15px'\n };\n \n-const coreCurriculum = [\n-  ...superBlockOrder[SuperBlockStages.FrontEnd],\n-  ...superBlockOrder[SuperBlockStages.Backend],\n-  ...superBlockOrder[SuperBlockStages.Python]\n-];\n+const superBlockHeadings: { [key in SuperBlockStage]: string } = {\n+  [SuperBlockStage.Core]: 'landing.core-certs-heading',\n+  [SuperBlockStage.English]: 'landing.learn-english-heading',\n+  [SuperBlockStage.Professional]: 'landing.professional-certs-heading',\n+  [SuperBlockStage.Extra]: 'landing.interview-prep-heading',\n+  [SuperBlockStage.Legacy]: 'landing.legacy-curriculum-heading',\n+  [SuperBlockStage.New]: '', // TODO: add translation\n+  [SuperBlockStage.Upcoming]: 'landing.upcoming-heading'\n+};\n \n const mapStateToProps = createSelector(\n   isSignedInSelector,\n@@ -173,107 +181,28 @@ function Map({\n \n   return (\n     <div className='map-ui' data-test-label='curriculum-map'>\n-      <h2 className={forLanding ? 'big-heading' : ''}>\n-        {t('landing.core-certs-heading')}\n-      </h2>\n-      <ul>\n-        {coreCurriculum.map((superBlock, i) => (\n-          <MapLi\n-            key={i}\n-            superBlock={superBlock}\n-            landing={forLanding}\n-            index={i}\n-            claimed={isClaimed(superBlock)}\n-            showProgressionLines={true}\n-            showNumbers={true}\n-            completed={allSuperblockChallengesCompleted(superBlock)}\n-          />\n-        ))}\n-      </ul>\n-      <Spacer size='medium' />\n-      <h2 className={forLanding ? 'big-heading' : ''}>\n-        {t('landing.learn-english-heading')}\n-      </h2>\n-      <ul>\n-        {superBlockOrder[SuperBlockStages.English].map((superBlock, i) => (\n-          <MapLi\n-            key={i}\n-            superBlock={superBlock}\n-            landing={forLanding}\n-            completed={allSuperblockChallengesCompleted(superBlock)}\n-            claimed={isClaimed(superBlock)}\n-            index={i}\n-          />\n-        ))}\n-      </ul>\n-      <Spacer size='medium' />\n-      <h2 className={forLanding ? 'big-heading' : ''}>\n-        {t('landing.professional-certs-heading')}\n-      </h2>\n-      <ul>\n-        {superBlockOrder[SuperBlockStages.Professional].map((superBlock, i) => (\n-          <MapLi\n-            key={i}\n-            superBlock={superBlock}\n-            landing={forLanding}\n-            completed={allSuperblockChallengesCompleted(superBlock)}\n-            claimed={isClaimed(superBlock)}\n-            index={i}\n-          />\n-        ))}\n-      </ul>\n-      <Spacer size='medium' />\n-      <h2 className={forLanding ? 'big-heading' : ''}>\n-        {t('landing.interview-prep-heading')}\n-      </h2>\n-      <ul>\n-        {superBlockOrder[SuperBlockStages.Extra].map((superBlock, i) => (\n-          <MapLi\n-            key={i}\n-            superBlock={superBlock}\n-            landing={forLanding}\n-            completed={allSuperblockChallengesCompleted(superBlock)}\n-            claimed={isClaimed(superBlock)}\n-            index={i}\n-          />\n-        ))}\n-      </ul>\n-      <Spacer size='medium' />\n-      <h2 className={forLanding ? 'big-heading' : ''}>\n-        {t('landing.legacy-curriculum-heading')}\n-      </h2>\n-      <ul>\n-        {superBlockOrder[SuperBlockStages.Legacy].map((superBlock, i) => (\n-          <MapLi\n-            key={i}\n-            superBlock={superBlock}\n-            landing={forLanding}\n-            completed={allSuperblockChallengesCompleted(superBlock)}\n-            claimed={isClaimed(superBlock)}\n-            index={i}\n-          />\n-        ))}\n-      </ul>\n-      {showUpcomingChanges && (\n+      {getStageOrder({ showNewCurriculum, showUpcomingChanges }).map(stage => (\n         <>\n-          <Spacer size='medium' />\n           <h2 className={forLanding ? 'big-heading' : ''}>\n-            {t('landing.upcoming-heading')}\n+            {t(superBlockHeadings[stage])}\n           </h2>\n-          <ul>\n-            {superBlockOrder[SuperBlockStages.Upcoming].map((superBlock, i) => (\n+          <ul key={stage}>\n+            {superBlockStages[stage].map((superblock, i) => (\n               <MapLi\n-                key={i}\n-                superBlock={superBlock}\n+                key={superblock}\n+                superBlock={superblock}\n                 landing={forLanding}\n-                completed={allSuperblockChallengesCompleted(superBlock)}\n                 index={i}\n-                claimed={isClaimed(superBlock)}\n+                claimed={isClaimed(superblock)}\n+                showProgressionLines={stage === SuperBlockStage.Core}\n+                showNumbers={stage === SuperBlockStage.Core}\n+                completed={allSuperblockChallengesCompleted(superblock)}\n               />\n             ))}\n           </ul>\n+          <Spacer size='medium' />\n         </>\n-      )}\n+      ))}\n     </div>\n   );\n }"
        },
        {
            "sha": "5d2d00ef4f54a3ab1990043c0417c8c4ecf4a74b",
            "filename": "e2e/map.spec.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 8,
            "changes": 14,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0eebe3ee2ede423ddfdd4fe3b8dea6a354dceb6a/e2e%2Fmap.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0eebe3ee2ede423ddfdd4fe3b8dea6a354dceb6a/e2e%2Fmap.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fmap.spec.ts?ref=0eebe3ee2ede423ddfdd4fe3b8dea6a354dceb6a",
            "patch": "@@ -2,20 +2,18 @@ import { test, expect } from '@playwright/test';\n import translations from '../client/i18n/locales/english/translations.json';\n import intro from '../client/i18n/locales/english/intro.json';\n \n-import { SuperBlockStages, superBlockOrder } from '../shared/config/curriculum';\n+import { SuperBlockStage, superBlockStages } from '../shared/config/curriculum';\n \n test.beforeEach(async ({ page }) => {\n   await page.goto('/learn');\n });\n \n const superBlocksWithLinks = [\n-  ...superBlockOrder[SuperBlockStages.FrontEnd],\n-  ...superBlockOrder[SuperBlockStages.Backend],\n-  ...superBlockOrder[SuperBlockStages.Python],\n-  ...superBlockOrder[SuperBlockStages.English],\n-  ...superBlockOrder[SuperBlockStages.Professional],\n-  ...superBlockOrder[SuperBlockStages.Extra],\n-  ...superBlockOrder[SuperBlockStages.Legacy]\n+  ...superBlockStages[SuperBlockStage.Core],\n+  ...superBlockStages[SuperBlockStage.English],\n+  ...superBlockStages[SuperBlockStage.Professional],\n+  ...superBlockStages[SuperBlockStage.Extra],\n+  ...superBlockStages[SuperBlockStage.Legacy]\n ];\n \n const superBlockTitleOverride: Record<string, string> = {"
        },
        {
            "sha": "4c88eae26f5ed30ccb0f2aae1eb8f71615336818",
            "filename": "shared/config/curriculum.test.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 33,
            "changes": 41,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0eebe3ee2ede423ddfdd4fe3b8dea6a354dceb6a/shared%2Fconfig%2Fcurriculum.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0eebe3ee2ede423ddfdd4fe3b8dea6a354dceb6a/shared%2Fconfig%2Fcurriculum.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/shared%2Fconfig%2Fcurriculum.test.ts?ref=0eebe3ee2ede423ddfdd4fe3b8dea6a354dceb6a",
            "patch": "@@ -1,74 +1,49 @@\n import { Languages } from './i18n';\n import {\n   SuperBlocks,\n-  SuperBlockStages,\n-  superBlockOrder,\n+  SuperBlockStage,\n+  superBlockStages,\n   notAuditedSuperBlocks,\n-  createSuperBlockMap,\n   createFlatSuperBlockMap,\n   getAuditedSuperBlocks\n } from './curriculum';\n \n describe('superBlockOrder', () => {\n   it('should contain all SuperBlocks', () => {\n     const allSuperBlocks = Object.values(SuperBlocks);\n-    const superBlockOrderValues = Object.values(superBlockOrder).flat();\n+    const superBlockOrderValues = Object.values(superBlockStages).flat();\n     expect(superBlockOrderValues).toHaveLength(allSuperBlocks.length);\n     expect(superBlockOrderValues).toEqual(\n       expect.arrayContaining(allSuperBlocks)\n     );\n   });\n });\n \n-describe('createSuperBlockMap', () => {\n-  it('should return an object with New and Upcoming when { showNewCurriculum: true, showUpcomingChanges: true }', () => {\n-    const result = createSuperBlockMap({\n-      showNewCurriculum: true,\n-      showUpcomingChanges: true\n-    });\n-    expect(result[SuperBlockStages.New]).toHaveLength(\n-      superBlockOrder[SuperBlockStages.New].length\n-    );\n-    expect(result[SuperBlockStages.Upcoming]).toHaveLength(\n-      superBlockOrder[SuperBlockStages.Upcoming].length\n-    );\n-  });\n-\n-  it('should return an object without New and Upcoming when { showNewCurriculum: false, showUpcomingChanges: false }', () => {\n-    const result = createSuperBlockMap({\n-      showNewCurriculum: false,\n-      showUpcomingChanges: false\n-    });\n-    expect(result[SuperBlockStages.New]).toHaveLength(0);\n-    expect(result[SuperBlockStages.Upcoming]).toHaveLength(0);\n-  });\n-});\n-\n describe('createFlatSuperBlockMap', () => {\n   it('should return an array of SuperBlocks object with New and Upcoming when { showNewCurriculum: true, showUpcomingChanges: true }', () => {\n     const result = createFlatSuperBlockMap({\n       showNewCurriculum: true,\n       showUpcomingChanges: true\n     });\n-    expect(result).toHaveLength(Object.values(superBlockOrder).flat().length);\n+    expect(result).toHaveLength(Object.values(superBlockStages).flat().length);\n   });\n \n   it('should return an array of SuperBlocks without New and Upcoming when { showNewCurriculum: false, showUpcomingChanges: false }', () => {\n     const result = createFlatSuperBlockMap({\n       showNewCurriculum: false,\n       showUpcomingChanges: false\n     });\n-    const tempSuperBlockMap = { ...superBlockOrder };\n-    tempSuperBlockMap[SuperBlockStages.New] = [];\n-    tempSuperBlockMap[SuperBlockStages.Upcoming] = [];\n+    const tempSuperBlockMap = { ...superBlockStages };\n+    tempSuperBlockMap[SuperBlockStage.New] = [];\n+    tempSuperBlockMap[SuperBlockStage.Upcoming] = [];\n     expect(result).toHaveLength(Object.values(tempSuperBlockMap).flat().length);\n   });\n });\n \n describe('Immutability of superBlockOrder, notAuditedSuperBlocks, and flatSuperBlockMap', () => {\n   it('should not allow modification of superBlockOrder', () => {\n     expect(() => {\n-      superBlockOrder[SuperBlockStages.FrontEnd] = [];\n+      superBlockStages[SuperBlockStage.Core] = [];\n     }).toThrowError(TypeError);\n   });\n "
        },
        {
            "sha": "d7f12098a0ebecf4b9277bcffb95364ccdd53808",
            "filename": "shared/config/curriculum.ts",
            "status": "modified",
            "additions": 39,
            "deletions": 51,
            "changes": 90,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0eebe3ee2ede423ddfdd4fe3b8dea6a354dceb6a/shared%2Fconfig%2Fcurriculum.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0eebe3ee2ede423ddfdd4fe3b8dea6a354dceb6a/shared%2Fconfig%2Fcurriculum.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/shared%2Fconfig%2Fcurriculum.ts?ref=0eebe3ee2ede423ddfdd4fe3b8dea6a354dceb6a",
            "patch": "@@ -37,10 +37,8 @@ export enum SuperBlocks {\n  * SuperBlockStages.Upcoming = SHOW_UPCOMING_CHANGES === 'true'\n  * 'Upcoming' is for development -> not shown on stag or prod anywhere\n  */\n-export enum SuperBlockStages {\n-  FrontEnd,\n-  Backend,\n-  Python,\n+export enum SuperBlockStage {\n+  Core,\n   English,\n   Professional,\n   Extra,\n@@ -49,53 +47,67 @@ export enum SuperBlockStages {\n   Upcoming\n }\n \n-export type SuperBlockOrder = {\n-  [key in SuperBlockStages]: SuperBlocks[];\n+const defaultStageOrder = [\n+  SuperBlockStage.Core,\n+  SuperBlockStage.English,\n+  SuperBlockStage.Professional,\n+  SuperBlockStage.Extra,\n+  SuperBlockStage.Legacy\n+];\n+\n+export function getStageOrder({\n+  showNewCurriculum,\n+  showUpcomingChanges\n+}: Config): SuperBlockStage[] {\n+  const stageOrder = [...defaultStageOrder];\n+\n+  if (showNewCurriculum) stageOrder.push(SuperBlockStage.New);\n+  if (showUpcomingChanges) stageOrder.push(SuperBlockStage.Upcoming);\n+  return stageOrder;\n+}\n+\n+export type StageMap = {\n+  [key in SuperBlockStage]: SuperBlocks[];\n };\n \n-// order of buttons on map, this should include all superblocks\n-// new and upcoming superblocks are removed below\n-export const superBlockOrder: SuperBlockOrder = {\n-  [SuperBlockStages.FrontEnd]: [\n+// Groups of superblocks in learn map. This should include all superblocks.\n+export const superBlockStages: StageMap = {\n+  [SuperBlockStage.Core]: [\n     SuperBlocks.RespWebDesignNew,\n     SuperBlocks.JsAlgoDataStructNew,\n     SuperBlocks.FrontEndDevLibs,\n-    SuperBlocks.DataVis\n-  ],\n-  [SuperBlockStages.Backend]: [\n+    SuperBlocks.DataVis,\n     SuperBlocks.RelationalDb,\n     SuperBlocks.BackEndDevApis,\n-    SuperBlocks.QualityAssurance\n-  ],\n-  [SuperBlockStages.Python]: [\n+    SuperBlocks.QualityAssurance,\n     SuperBlocks.SciCompPy,\n     SuperBlocks.DataAnalysisPy,\n     SuperBlocks.InfoSec,\n     SuperBlocks.MachineLearningPy,\n     SuperBlocks.CollegeAlgebraPy\n   ],\n-  [SuperBlockStages.English]: [SuperBlocks.A2English],\n-  [SuperBlockStages.Professional]: [SuperBlocks.FoundationalCSharp],\n-  [SuperBlockStages.Extra]: [\n+  [SuperBlockStage.English]: [SuperBlocks.A2English],\n+  [SuperBlockStage.Professional]: [SuperBlocks.FoundationalCSharp],\n+  [SuperBlockStage.Extra]: [\n     SuperBlocks.TheOdinProject,\n     SuperBlocks.CodingInterviewPrep,\n     SuperBlocks.ProjectEuler,\n     SuperBlocks.RosettaCode\n   ],\n-  [SuperBlockStages.Legacy]: [\n+  [SuperBlockStage.Legacy]: [\n     SuperBlocks.RespWebDesign,\n     SuperBlocks.JsAlgoDataStruct,\n     SuperBlocks.PythonForEverybody\n   ],\n-  [SuperBlockStages.New]: [],\n-  [SuperBlockStages.Upcoming]: [\n+  [SuperBlockStage.New]: [],\n+  [SuperBlockStage.Upcoming]: [\n     SuperBlocks.B1English,\n     SuperBlocks.FrontEndDevelopment,\n     SuperBlocks.UpcomingPython\n   ]\n };\n \n-Object.freeze(superBlockOrder);\n+Object.freeze(superBlockStages);\n \n type NotAuditedSuperBlocks = {\n   [key in Languages]: SuperBlocks[];\n@@ -277,34 +289,10 @@ type LanguagesConfig = Config & {\n   language: string;\n };\n \n-// removes new and upcoming from superBlockOrder\n-// not used yet, will be used when adding progress indicators to map\n-export function createSuperBlockMap({\n-  showNewCurriculum,\n-  showUpcomingChanges\n-}: Config): SuperBlockOrder {\n-  const superBlockMap = { ...superBlockOrder };\n-  if (!showNewCurriculum) {\n-    superBlockMap[SuperBlockStages.New] = [];\n-  }\n-  if (!showUpcomingChanges) {\n-    superBlockMap[SuperBlockStages.Upcoming] = [];\n-  }\n-  return superBlockMap;\n-}\n-\n-export function createFlatSuperBlockMap({\n-  showNewCurriculum,\n-  showUpcomingChanges\n-}: Config): SuperBlocks[] {\n-  const superBlockMap = { ...superBlockOrder };\n-  if (!showNewCurriculum) {\n-    superBlockMap[SuperBlockStages.New] = [];\n-  }\n-  if (!showUpcomingChanges) {\n-    superBlockMap[SuperBlockStages.Upcoming] = [];\n-  }\n-  return Object.values(superBlockMap).flat();\n+export function createFlatSuperBlockMap(config: Config): SuperBlocks[] {\n+  return getStageOrder(config)\n+    .map(stage => superBlockStages[stage])\n+    .flat();\n }\n \n export function getAuditedSuperBlocks({"
        }
    ],
    "stats": {
        "total": 274,
        "additions": 82,
        "deletions": 192
    }
}