{
    "author": "gagan-bhullar-tech",
    "message": "fix(client): completion modal cannot be closed using Escape key (#55431)",
    "sha": "806706bdeedfeae44728c19382d77fb689f56fe4",
    "files": [
        {
            "sha": "fc47764ed025a4fa9e984a1e11a998684e73e3eb",
            "filename": "client/src/templates/Challenges/components/completion-modal.tsx",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/806706bdeedfeae44728c19382d77fb689f56fe4/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fcompletion-modal.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/806706bdeedfeae44728c19382d77fb689f56fe4/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fcompletion-modal.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fcompletion-modal.tsx?ref=806706bdeedfeae44728c19382d77fb689f56fe4",
            "patch": "@@ -128,6 +128,10 @@ class CompletionModal extends Component<\n   }\n \n   handleKeypress(e: React.KeyboardEvent): void {\n+    if (e.key === 'Escape') {\n+      e.stopPropagation();\n+      this.props.close();\n+    }\n     if (e.key === 'Enter' && (e.ctrlKey || e.metaKey)) {\n       e.preventDefault();\n       // Since Hotkeys also listens to Ctrl + Enter we have to stop this event"
        },
        {
            "sha": "60fc38d50e8e55413595093ad2cfe6db02414793",
            "filename": "e2e/completion-modal.spec.ts",
            "status": "modified",
            "additions": 41,
            "deletions": 0,
            "changes": 41,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/806706bdeedfeae44728c19382d77fb689f56fe4/e2e%2Fcompletion-modal.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/806706bdeedfeae44728c19382d77fb689f56fe4/e2e%2Fcompletion-modal.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fcompletion-modal.spec.ts?ref=806706bdeedfeae44728c19382d77fb689f56fe4",
            "patch": "@@ -1,5 +1,6 @@\n import { test, expect } from '@playwright/test';\n import translations from '../client/i18n/locales/english/translations.json';\n+import { authedRequest } from './utils/request';\n \n const nextChallengeURL =\n   '/learn/data-analysis-with-python/data-analysis-with-python-projects/demographic-data-analyzer';\n@@ -33,6 +34,12 @@ test.describe('Challenge Completion Modal Tests (Signed Out)', () => {\n     await expect(page.getByTestId('completion-success-icon')).not.toBeVisible();\n   });\n \n+  test('should close the modal after user presses escape', async ({ page }) => {\n+    await expect(page.getByRole('dialog')).toBeVisible();\n+    await page.keyboard.press('Escape');\n+    await expect(page.getByRole('dialog')).not.toBeVisible();\n+  });\n+\n   test('should display the text of go to next challenge button accordingly based on device type', async ({\n     page,\n     isMobile,\n@@ -96,6 +103,40 @@ test.describe('Challenge Completion Modal Tests (Signed In)', () => {\n     await expect(page.getByTestId('completion-success-icon')).not.toBeVisible();\n   });\n \n+  test('should close the modal after user presses escape while having keyboard shortcuts disabled', async ({\n+    page,\n+    request\n+  }) => {\n+    await authedRequest({\n+      request,\n+      endpoint: 'update-my-keyboard-shortcuts',\n+      method: 'put',\n+      data: {\n+        keyboardShortcuts: false\n+      }\n+    });\n+    await expect(page.getByRole('dialog')).toBeVisible();\n+    await page.keyboard.press('Escape');\n+    await expect(page.getByRole('dialog')).not.toBeVisible();\n+  });\n+\n+  test('should close the modal after user presses escape while having keyboard shortcuts enabled', async ({\n+    page,\n+    request\n+  }) => {\n+    await authedRequest({\n+      request,\n+      endpoint: 'update-my-keyboard-shortcuts',\n+      method: 'put',\n+      data: {\n+        keyboardShortcuts: true\n+      }\n+    });\n+    await expect(page.getByRole('dialog')).toBeVisible();\n+    await page.keyboard.press('Escape');\n+    await expect(page.getByRole('dialog')).toBeVisible();\n+  });\n+\n   test('should display the text of go to next challenge button accordingly based on device type', async ({\n     page,\n     isMobile,"
        }
    ],
    "stats": {
        "total": 45,
        "additions": 45,
        "deletions": 0
    }
}