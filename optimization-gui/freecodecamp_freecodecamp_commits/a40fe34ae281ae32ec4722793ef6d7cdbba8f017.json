{
    "author": "moT01",
    "message": "feat(tools): script to create daily challenge files (#61921)",
    "sha": "a40fe34ae281ae32ec4722793ef6d7cdbba8f017",
    "files": [
        {
            "sha": "1e62f7da051ce522645bf419a70a629624dc2f4c",
            "filename": "tools/challenge-helper-scripts/create-daily-challenges.ts",
            "status": "added",
            "additions": 138,
            "deletions": 0,
            "changes": 138,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a40fe34ae281ae32ec4722793ef6d7cdbba8f017/tools%2Fchallenge-helper-scripts%2Fcreate-daily-challenges.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a40fe34ae281ae32ec4722793ef6d7cdbba8f017/tools%2Fchallenge-helper-scripts%2Fcreate-daily-challenges.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-daily-challenges.ts?ref=a40fe34ae281ae32ec4722793ef6d7cdbba8f017",
            "patch": "@@ -0,0 +1,138 @@\n+/*\n+  Script to create daily coding challenge files in the dev-playground superblock.\n+  Accepts a number arg for how many challenges to create.\n+*/\n+\n+import { readFileSync, writeFileSync } from 'fs';\n+import path, { join } from 'path';\n+import { fileURLToPath } from 'url';\n+import ObjectID from 'bson-objectid';\n+import { Meta } from './helpers/project-metadata';\n+import { getArgValue } from './helpers/get-arg-value';\n+import {\n+  getDailyJavascriptChallengeTemplate,\n+  getDailyPythonChallengeTemplate\n+} from './helpers/get-challenge-template';\n+\n+const numberOfChallengesToCreate = getArgValue(process.argv);\n+\n+if (numberOfChallengesToCreate > 10) {\n+  throw new Error('Are you sure you want to create that many challenges?');\n+}\n+\n+const __filename = fileURLToPath(import.meta.url);\n+const __dirname = path.dirname(__filename);\n+\n+const curriculumPath = join(__dirname, '../../curriculum');\n+\n+const structureBlocksPath = join(curriculumPath, '/structure/blocks');\n+const jsStructurePath = join(\n+  structureBlocksPath,\n+  '/daily-coding-challenges-javascript.json'\n+);\n+const pyStructurePath = join(\n+  structureBlocksPath,\n+  '/daily-coding-challenges-python.json'\n+);\n+\n+const challengeBlocksPath = join(curriculumPath, '/challenges/english/blocks');\n+const jsChallengesPath = join(\n+  challengeBlocksPath,\n+  '/daily-coding-challenges-javascript'\n+);\n+const pyChallengesPath = join(\n+  challengeBlocksPath,\n+  '/daily-coding-challenges-python'\n+);\n+\n+for (let i = 0; i < numberOfChallengesToCreate; i++) {\n+  const jsMeta = JSON.parse(readFileSync(jsStructurePath, 'utf-8')) as Meta;\n+  const pyMeta = JSON.parse(readFileSync(pyStructurePath, 'utf-8')) as Meta;\n+\n+  const numberOfJsChallenges = jsMeta.challengeOrder.length;\n+  const numberOfPyChallenges = pyMeta.challengeOrder.length;\n+\n+  if (numberOfJsChallenges !== numberOfPyChallenges) {\n+    throw new Error(\n+      'Inconsistent number of challenges in each daily challenge language, cannot create new challenge.'\n+    );\n+  }\n+\n+  const newChallengeNumber = numberOfJsChallenges + 1;\n+\n+  createDailyJsChallenge({ challengeNumber: newChallengeNumber, meta: jsMeta });\n+  createDailyPyChallenge({ challengeNumber: newChallengeNumber, meta: pyMeta });\n+}\n+\n+interface CreateDailyChallengeOptions {\n+  challengeNumber: number;\n+  meta: Meta;\n+}\n+\n+function createDailyJsChallenge({\n+  challengeNumber,\n+  meta\n+}: CreateDailyChallengeOptions) {\n+  const challengeId = new ObjectID();\n+\n+  const newMeta = {\n+    ...meta,\n+    challengeOrder: [\n+      ...meta.challengeOrder,\n+      {\n+        // eslint-disable-next-line @typescript-eslint/no-base-to-string\n+        id: challengeId.toString(),\n+        title: `JavaScript Challenge ${challengeNumber}`\n+      }\n+    ]\n+  };\n+\n+  writeFileSync(jsStructurePath, JSON.stringify(newMeta, null, 2));\n+\n+  const jsTemplate = getDailyJavascriptChallengeTemplate({\n+    challengeId,\n+    challengeNumber\n+  });\n+\n+  const jsChallengePath = join(\n+    jsChallengesPath,\n+    // eslint-disable-next-line @typescript-eslint/no-base-to-string\n+    `${challengeId.toString()}.md`\n+  );\n+\n+  writeFileSync(jsChallengePath, jsTemplate);\n+}\n+\n+function createDailyPyChallenge({\n+  challengeNumber,\n+  meta\n+}: CreateDailyChallengeOptions) {\n+  const challengeId = new ObjectID();\n+\n+  const newMeta = {\n+    ...meta,\n+    challengeOrder: [\n+      ...meta.challengeOrder,\n+      {\n+        // eslint-disable-next-line @typescript-eslint/no-base-to-string\n+        id: challengeId.toString(),\n+        title: `Python Challenge ${challengeNumber}`\n+      }\n+    ]\n+  };\n+\n+  writeFileSync(pyStructurePath, JSON.stringify(newMeta, null, 2));\n+\n+  const pyTemplate = getDailyPythonChallengeTemplate({\n+    challengeId,\n+    challengeNumber\n+  });\n+\n+  const pyChallengePath = join(\n+    pyChallengesPath,\n+    // eslint-disable-next-line @typescript-eslint/no-base-to-string\n+    `${challengeId.toString()}.md`\n+  );\n+\n+  writeFileSync(pyChallengePath, pyTemplate);\n+}"
        },
        {
            "sha": "486690b14aca135077a57c0dbe6d1291006c7d39",
            "filename": "tools/challenge-helper-scripts/helpers/get-challenge-template.ts",
            "status": "modified",
            "additions": 92,
            "deletions": 0,
            "changes": 92,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a40fe34ae281ae32ec4722793ef6d7cdbba8f017/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fget-challenge-template.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a40fe34ae281ae32ec4722793ef6d7cdbba8f017/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fget-challenge-template.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fget-challenge-template.ts?ref=a40fe34ae281ae32ec4722793ef6d7cdbba8f017",
            "patch": "@@ -343,6 +343,98 @@ Generic challenge description.\n Do the assignment.\n `;\n \n+interface DailyCodingChallengeOptions {\n+  challengeId: ObjectID;\n+  challengeNumber: number;\n+}\n+\n+export const getDailyJavascriptChallengeTemplate = ({\n+  challengeId,\n+  challengeNumber\n+}: DailyCodingChallengeOptions) => `---\n+id: ${challengeId.toString()}\n+title: \"JavaScript Challenge ${challengeNumber}: Placeholder\"\n+challengeType: 28\n+dashedName: javascript-challenge-${challengeNumber}\n+---\n+\n+# --description--\n+\n+Placeholder description\n+\n+# --hints--\n+\n+Placeholder test\n+\n+\\`\\`\\`js\n+assert.isTrue(true);\n+\\`\\`\\`\n+\n+# --seed--\n+\n+## --seed-contents--\n+\n+\\`\\`\\`js\n+function placeholder(arg) {\n+\n+  return arg;\n+}\n+\\`\\`\\`\n+\n+# --solutions--\n+\n+\\`\\`\\`js\n+function placeholder(arg) {\n+\n+  return arg;\n+}\n+\\`\\`\\`\n+`;\n+\n+export const getDailyPythonChallengeTemplate = ({\n+  challengeId,\n+  challengeNumber\n+}: DailyCodingChallengeOptions) => `---\n+id: ${challengeId.toString()}\n+title: \"Python Challenge ${challengeNumber}: Placeholder\"\n+challengeType: 29\n+dashedName: python-challenge-${challengeNumber}\n+---\n+\n+# --description--\n+\n+Placeholder description\n+\n+# --hints--\n+\n+Placeholder test\n+\n+\\`\\`\\`js\n+({test: () => { runPython(\\`\n+from unittest import TestCase\n+TestCase().assertTrue(True)\\`)\n+}})\n+\\`\\`\\`\n+\n+# --seed--\n+\n+## --seed-contents--\n+\n+\\`\\`\\`py\n+def placeholder(arg):\n+\n+    return arg\n+\\`\\`\\`\n+\n+# --solutions--\n+\n+\\`\\`\\`py\n+def placeholder(arg):\n+\n+    return arg\n+\\`\\`\\`\n+`;\n+\n type Template = (opts: ChallengeOptions) => string;\n \n export const getTemplate = (challengeType: string): Template => {"
        },
        {
            "sha": "22ca0ea08b4da04033e69531feab42a34f714b96",
            "filename": "tools/challenge-helper-scripts/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a40fe34ae281ae32ec4722793ef6d7cdbba8f017/tools%2Fchallenge-helper-scripts%2Fpackage.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a40fe34ae281ae32ec4722793ef6d7cdbba8f017/tools%2Fchallenge-helper-scripts%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fpackage.json?ref=a40fe34ae281ae32ec4722793ef6d7cdbba8f017",
            "patch": "@@ -20,6 +20,7 @@\n   \"main\": \"utils.js\",\n   \"scripts\": {\n     \"test\": \"mocha --delay --reporter progress --bail\",\n+    \"create-daily-challenges\": \"tsx create-daily-challenges\",\n     \"create-project\": \"tsx create-project\",\n     \"create-language-block\": \"tsx create-language-block\",\n     \"create-quiz\": \"tsx create-quiz\""
        }
    ],
    "stats": {
        "total": 231,
        "additions": 231,
        "deletions": 0
    }
}