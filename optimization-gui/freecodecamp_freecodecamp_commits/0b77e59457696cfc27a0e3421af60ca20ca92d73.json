{
    "author": "a2937",
    "message": "feat(ui): add syncable dark mode (#56243)\n\nCo-authored-by: Ahmad Abdolsaheb <ahmad.abdolsaheb@gmail.com>\nCo-authored-by: Oliver Eyton-Williams <ojeytonwilliams@gmail.com>\nCo-authored-by: Sem Bauke <semboot699@gmail.com>",
    "sha": "0b77e59457696cfc27a0e3421af60ca20ca92d73",
    "files": [
        {
            "sha": "ae3721473f326edbed9a80289df9b23452c4c020",
            "filename": "client/src/client-only-routes/show-certification.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fclient-only-routes%2Fshow-certification.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fclient-only-routes%2Fshow-certification.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fclient-only-routes%2Fshow-certification.tsx?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -14,7 +14,7 @@ import MicrosoftLogo from '../assets/icons/microsoft-logo';\n import { createFlashMessage } from '../components/Flash/redux';\n import { Loader } from '../components/helpers';\n import RedirectHome from '../components/redirect-home';\n-import { Themes } from '../components/settings/theme';\n+import { LocalStorageThemes } from '../redux/types';\n import { showCert, fetchProfileForUser } from '../redux/actions';\n import {\n   showCertSelector,\n@@ -273,7 +273,7 @@ const ShowCertification = (props: ShowCertificationProps): JSX.Element => {\n           data-playwright-test-label='donation-form'\n         >\n           <MultiTierDonationForm\n-            defaultTheme={Themes.Default}\n+            defaultTheme={LocalStorageThemes.Light}\n             handleProcessing={handleProcessing}\n             isMinimalForm={true}\n             paymentContext={PaymentContext.Certificate}"
        },
        {
            "sha": "0a43c111f53f3325c4ede6d7a20d63e74ba696c4",
            "filename": "client/src/client-only-routes/show-settings.test.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fclient-only-routes%2Fshow-settings.test.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fclient-only-routes%2Fshow-settings.test.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fclient-only-routes%2Fshow-settings.test.tsx?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -42,7 +42,7 @@ const loggedInProps = {\n   navigate: navigate,\n   showLoading: false,\n   submitNewAbout: jest.fn(),\n-  toggleNightMode: jest.fn(),\n+  toggleTheme: jest.fn(),\n   updateSocials: jest.fn(),\n   updateIsHonest: jest.fn(),\n   updatePortfolio: jest.fn(),"
        },
        {
            "sha": "74c21294e63d7ce89ea75c97e62ba7695d332144",
            "filename": "client/src/client-only-routes/show-settings.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 8,
            "changes": 9,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fclient-only-routes%2Fshow-settings.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fclient-only-routes%2Fshow-settings.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fclient-only-routes%2Fshow-settings.tsx?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -17,7 +17,6 @@ import DangerZone from '../components/settings/danger-zone';\n import Email from '../components/settings/email';\n import Honesty from '../components/settings/honesty';\n import Privacy from '../components/settings/privacy';\n-import { type ThemeProps, Themes } from '../components/settings/theme';\n import UserToken from '../components/settings/user-token';\n import ExamToken from '../components/settings/exam-token';\n import { hardGoTo as navigate } from '../redux/actions';\n@@ -33,7 +32,6 @@ import {\n   updateMyHonesty,\n   updateMyQuincyEmail,\n   updateMySound,\n-  updateMyTheme,\n   updateMyKeyboardShortcuts,\n   verifyCert,\n   resetMyEditorLayout\n@@ -42,7 +40,7 @@ import {\n const { apiLocation } = envData;\n \n // TODO: update types for actions\n-type ShowSettingsProps = Pick<ThemeProps, 'toggleNightMode'> & {\n+type ShowSettingsProps = {\n   createFlashMessage: typeof createFlashMessage;\n   isSignedIn: boolean;\n   navigate: (location: string) => void;\n@@ -75,7 +73,6 @@ const mapDispatchToProps = {\n   createFlashMessage,\n   navigate,\n   submitNewAbout,\n-  toggleNightMode: (theme: Themes) => updateMyTheme({ theme }),\n   toggleSoundMode: (sound: boolean) => updateMySound({ sound }),\n   toggleKeyboardShortcuts: (keyboardShortcuts: boolean) =>\n     updateMyKeyboardShortcuts({ keyboardShortcuts }),\n@@ -91,7 +88,6 @@ export function ShowSettings(props: ShowSettingsProps): JSX.Element {\n   const {\n     createFlashMessage,\n     isSignedIn,\n-    toggleNightMode,\n     toggleSoundMode,\n     toggleKeyboardShortcuts,\n     resetEditorLayout,\n@@ -121,7 +117,6 @@ export function ShowSettings(props: ShowSettingsProps): JSX.Element {\n       isHonest,\n       sendQuincyEmail,\n       username,\n-      theme,\n       keyboardShortcuts\n     },\n     navigate,\n@@ -163,13 +158,11 @@ export function ShowSettings(props: ShowSettingsProps): JSX.Element {\n             {t('settings.for', { username: username })}\n           </h1>\n           <MiscSettings\n-            currentTheme={theme}\n             keyboardShortcuts={keyboardShortcuts}\n             sound={sound}\n             editorLayout={editorLayout}\n             resetEditorLayout={resetEditorLayout}\n             toggleKeyboardShortcuts={toggleKeyboardShortcuts}\n-            toggleNightMode={toggleNightMode}\n             toggleSoundMode={toggleSoundMode}\n           />\n           <Spacer size='m' />"
        },
        {
            "sha": "2166fad829d2ed28f9c6d10b35375f061eaa2ed7",
            "filename": "client/src/components/Donation/donate-form.tsx",
            "status": "modified",
            "additions": 11,
            "deletions": 9,
            "changes": 20,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2FDonation%2Fdonate-form.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2FDonation%2Fdonate-form.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FDonation%2Fdonate-form.tsx?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -21,10 +21,10 @@ import {\n   isDonatingSelector,\n   signInLoadingSelector,\n   donationFormStateSelector,\n-  completedChallengesSelector\n+  completedChallengesSelector,\n+  themeSelector\n } from '../../redux/selectors';\n-import { Themes } from '../settings/theme';\n-import { DonateFormState } from '../../redux/types';\n+import { LocalStorageThemes, DonateFormState } from '../../redux/types';\n import type { CompletedChallenge } from '../../redux/prop-types';\n import { CENTS_IN_DOLLAR, formattedAmountLabel } from './utils';\n import DonateCompletion from './donate-completion';\n@@ -61,7 +61,7 @@ type PostCharge = (data: {\n \n type DonateFormProps = {\n   postCharge: PostCharge;\n-  defaultTheme?: Themes;\n+  defaultTheme?: LocalStorageThemes;\n   email: string;\n   handleProcessing?: () => void;\n   editAmount?: () => void;\n@@ -72,10 +72,10 @@ type DonateFormProps = {\n   isDonating: boolean;\n   showLoading: boolean;\n   t: TFunction;\n-  theme: Themes;\n   updateDonationFormState: (state: DonationApprovalData) => unknown;\n   paymentContext: PaymentContext;\n   completedChallenges: CompletedChallenge[];\n+  theme: LocalStorageThemes;\n };\n \n const mapStateToProps = createSelector(\n@@ -85,21 +85,23 @@ const mapStateToProps = createSelector(\n   donationFormStateSelector,\n   userSelector,\n   completedChallengesSelector,\n+  themeSelector,\n   (\n     showLoading: DonateFormProps['showLoading'],\n     isSignedIn: DonateFormProps['isSignedIn'],\n     isDonating: DonateFormProps['isDonating'],\n     donationFormState: DonateFormState,\n-    { email, theme }: { email: string; theme: Themes },\n-    completedChallenges: CompletedChallenge[]\n+    { email }: { email: string },\n+    completedChallenges: CompletedChallenge[],\n+    theme: LocalStorageThemes\n   ) => ({\n     isSignedIn,\n     isDonating,\n     showLoading,\n     donationFormState,\n     email,\n-    theme,\n-    completedChallenges\n+    completedChallenges,\n+    theme\n   })\n );\n "
        },
        {
            "sha": "6087f9a7eb51df3c08054905c49becf7a9af3e41",
            "filename": "client/src/components/Donation/multi-tier-donation-form.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2FDonation%2Fmulti-tier-donation-form.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2FDonation%2Fmulti-tier-donation-form.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FDonation%2Fmulti-tier-donation-form.tsx?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -17,7 +17,7 @@ import {\n   defaultTierAmount,\n   type DonationAmount\n } from '../../../../shared/config/donation-settings'; // You can further extract these into separate components and import them\n-import { Themes } from '../settings/theme';\n+import { LocalStorageThemes } from '../../redux/types';\n import { formattedAmountLabel, convertToTimeContributed } from './utils';\n import DonateForm from './donate-form';\n \n@@ -26,7 +26,7 @@ type MultiTierDonationFormProps = {\n   handleProcessing?: () => void;\n   paymentContext: PaymentContext;\n   isMinimalForm?: boolean;\n-  defaultTheme?: Themes;\n+  defaultTheme?: LocalStorageThemes;\n   isAnimationEnabled?: boolean;\n };\n function SelectionTabs({"
        },
        {
            "sha": "9c881ddaa524104e94d450212eab1ac523f97e53",
            "filename": "client/src/components/Donation/paypal-button.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2FDonation%2Fpaypal-button.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2FDonation%2Fpaypal-button.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FDonation%2Fpaypal-button.tsx?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -12,7 +12,7 @@ import {\n } from '../../../../shared/config/donation-settings';\n import envData from '../../../config/env.json';\n import { userSelector, signInLoadingSelector } from '../../redux/selectors';\n-import { Themes } from '../settings/theme';\n+import { LocalStorageThemes } from '../../redux/types';\n import { DonationApprovalData, PostPayment } from './types';\n import PayPalButtonScriptLoader from './paypal-button-script-loader';\n \n@@ -34,7 +34,7 @@ type PaypalButtonProps = {\n   isPaypalLoading: boolean;\n   t: (label: string) => string;\n   ref?: Ref<PaypalButton>;\n-  theme: Themes;\n+  theme: LocalStorageThemes;\n   isSubscription?: boolean;\n   handlePaymentButtonLoad: (provider: 'stripe' | 'paypal') => void;\n   isMinimalForm: boolean | undefined;\n@@ -91,7 +91,7 @@ class PaypalButton extends Component<PaypalButtonProps, PaypalButtonState> {\n     const { duration, planId, amount } = this.state;\n     const { t, theme, isPaypalLoading, isMinimalForm } = this.props;\n     const isSubscription = duration !== 'one-time';\n-    const buttonColor = theme === Themes.Night ? 'white' : 'gold';\n+    const buttonColor = theme === LocalStorageThemes.Dark ? 'white' : 'gold';\n     if (!paypalClientId) {\n       return null;\n     }"
        },
        {
            "sha": "2f9235c019f7c24cc0ef195f39c4f00342c63160",
            "filename": "client/src/components/Donation/stripe-card-form.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2FDonation%2Fstripe-card-form.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2FDonation%2Fstripe-card-form.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FDonation%2Fstripe-card-form.tsx?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -11,14 +11,14 @@ import type {\n import React, { useState } from 'react';\n \n import { PaymentProvider } from '../../../../shared/config/donation-settings';\n-import { Themes } from '../settings/theme';\n+import { LocalStorageThemes } from '../../redux/types';\n import { DonationApprovalData, PostPayment } from './types';\n \n interface FormPropTypes {\n   onDonationStateChange: (donationState: DonationApprovalData) => void;\n   postPayment: (arg0: PostPayment) => void;\n   t: (label: string) => string;\n-  theme: Themes;\n+  theme: LocalStorageThemes;\n   processing: boolean;\n }\n \n@@ -80,7 +80,7 @@ export default function StripeCardForm({\n       base: {\n         fontSize: '18px',\n         fontFamily: 'Lato, sans-serif',\n-        color: `${theme === Themes.Night ? '#fff' : '#0a0a23'}`,\n+        color: `${theme === LocalStorageThemes.Dark ? '#fff' : '#0a0a23'}`,\n         '::placeholder': {\n           color: `#858591`\n         }"
        },
        {
            "sha": "038ce8a2a8f10c20baedf074526d5584e4037f18",
            "filename": "client/src/components/Donation/wallets-button.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2FDonation%2Fwallets-button.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2FDonation%2Fwallets-button.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FDonation%2Fwallets-button.tsx?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -6,7 +6,7 @@ import type { PaymentRequest, Stripe } from '@stripe/stripe-js';\n import React, { useState, useEffect, useCallback } from 'react';\n import { useTranslation } from 'react-i18next';\n \n-import { Themes } from '../settings/theme';\n+import { LocalStorageThemes } from '../../redux/types';\n import {\n   PaymentProvider,\n   DonationDuration\n@@ -17,7 +17,7 @@ import { DonationApprovalData, PostPayment } from './types';\n interface WrapperProps {\n   label: string;\n   amount: number;\n-  theme: Themes;\n+  theme: LocalStorageThemes;\n   duration: DonationDuration;\n   postPayment: (arg0: PostPayment) => void;\n   onDonationStateChange: (donationState: DonationApprovalData) => void;\n@@ -145,7 +145,7 @@ const WalletsButton = ({\n             style: {\n               paymentRequestButton: {\n                 type: 'default',\n-                theme: theme === Themes.Night ? 'light' : 'dark',\n+                theme: theme === LocalStorageThemes.Light ? 'light' : 'dark',\n                 height: '43px'\n               }\n             },"
        },
        {
            "sha": "4ad02f4f5ab6e4314b42599afc9c10c639f9952e",
            "filename": "client/src/components/Flash/redux/index.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2FFlash%2Fredux%2Findex.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2FFlash%2Fredux%2Findex.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FFlash%2Fredux%2Findex.ts?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -4,10 +4,10 @@ import {\n   FlashState,\n   State,\n   FlashApp,\n-  FlashMessageArg\n+  FlashMessageArg,\n+  LocalStorageThemes\n } from '../../../redux/types';\n import { playTone } from '../../../utils/tone';\n-import { Themes } from '../../settings/theme';\n import { FlashMessages } from './flash-messages';\n \n export const flashMessageSelector = (state: State): FlashState['message'] =>\n@@ -33,7 +33,7 @@ export const createFlashMessage = (\n ): ReducerPayload<FlashActionTypes.CreateFlashMessage> => {\n   // Nightmode theme has special tones\n   if (flash.variables?.theme) {\n-    void playTone(flash.variables.theme as Themes);\n+    void playTone(flash.variables.theme as LocalStorageThemes);\n   } else if (flash.message !== FlashMessages.None) {\n     void playTone(flash.message);\n   }"
        },
        {
            "sha": "5a255f19d46674a1a999bd7653fc129fd5ee81cf",
            "filename": "client/src/components/Header/components/nav-links.tsx",
            "status": "modified",
            "additions": 29,
            "deletions": 54,
            "changes": 83,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2FHeader%2Fcomponents%2Fnav-links.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2FHeader%2Fcomponents%2Fnav-links.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FHeader%2Fcomponents%2Fnav-links.tsx?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -4,31 +4,39 @@ import {\n   faExternalLinkAlt\n } from '@fortawesome/free-solid-svg-icons';\n import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n-import React, { Fragment } from 'react';\n+import React from 'react';\n import { useTranslation, withTranslation } from 'react-i18next';\n import { connect } from 'react-redux';\n+import { createSelector } from 'reselect';\n import { radioLocation } from '../../../../config/env.json';\n-import { openSignoutModal } from '../../../redux/actions';\n-import { updateMyTheme } from '../../../redux/settings/actions';\n+import { openSignoutModal, toggleTheme } from '../../../redux/actions';\n import { Link } from '../../helpers';\n-import { type ThemeProps, Themes } from '../../settings/theme';\n+import { LocalStorageThemes } from '../../../redux/types';\n+import { themeSelector } from '../../../redux/selectors';\n import { User } from '../../../redux/prop-types';\n import SupporterBadge from '../../../assets/icons/supporter-badge';\n \n-export interface NavLinksProps extends Pick<ThemeProps, 'toggleNightMode'> {\n+export interface NavLinksProps {\n   displayMenu: boolean;\n   showMenu: () => void;\n   hideMenu: () => void;\n   user?: User;\n   menuButtonRef: React.RefObject<HTMLButtonElement>;\n   openSignoutModal: () => void;\n+  theme: LocalStorageThemes;\n+  toggleTheme: () => void;\n }\n \n const mapDispatchToProps = {\n-  toggleNightMode: (theme: Themes) => updateMyTheme({ theme }),\n+  toggleTheme,\n   openSignoutModal\n };\n \n+const mapStateToProps = createSelector(\n+  themeSelector,\n+  (theme: LocalStorageThemes) => ({ theme })\n+);\n+\n interface DonateButtonProps {\n   isUserDonating: boolean | undefined;\n   handleMenuKeyDown: (event: React.KeyboardEvent<HTMLAnchorElement>) => void;\n@@ -65,29 +73,17 @@ const DonateButton = ({\n   );\n };\n \n-const toggleTheme = (\n-  currentTheme = Themes.Default,\n-  toggleNightMode: typeof updateMyTheme\n-) => {\n-  toggleNightMode(\n-    currentTheme === Themes.Night ? Themes.Default : Themes.Night\n-  );\n-};\n-\n function NavLinks({\n   menuButtonRef,\n   openSignoutModal,\n   hideMenu,\n   displayMenu,\n-  toggleNightMode,\n-  user\n+  user,\n+  theme,\n+  toggleTheme\n }: NavLinksProps) {\n   const { t } = useTranslation();\n-  const {\n-    isDonating: isUserDonating,\n-    username: currentUserName,\n-    theme: currentUserTheme\n-  } = user || {};\n+  const { isDonating: isUserDonating, username: currentUserName } = user || {};\n \n   // the accessibility tree just needs a little more time to pick up the change.\n   // This function allows us to set aria-expanded to false and then delay just a bit before setting focus on the button\n@@ -249,40 +245,16 @@ function NavLinks({\n       </li>\n       <li className='nav-line' key='theme'>\n         <button\n-          {...(!currentUserName && { 'aria-describedby': 'theme-sign-in' })}\n-          aria-disabled={!currentUserName}\n-          aria-pressed={currentUserTheme === Themes.Night ? 'true' : 'false'}\n-          className={\n-            'nav-link nav-link-flex' +\n-            (!currentUserName ? ' nav-link-header' : '')\n-          }\n-          onClick={() => {\n-            if (currentUserName) {\n-              toggleTheme(currentUserTheme, toggleNightMode);\n-            }\n-          }}\n+          aria-pressed={theme === LocalStorageThemes.Dark}\n+          className={'nav-link nav-link-flex'}\n+          onClick={toggleTheme}\n           onKeyDown={currentUserName ? handleMenuKeyDown : handleSignOutKeys}\n         >\n-          {currentUserName ? (\n-            <>\n-              <span>{t('settings.labels.night-mode')}</span>\n-              {currentUserTheme === Themes.Night ? (\n-                <FontAwesomeIcon icon={faCheckSquare} />\n-              ) : (\n-                <FontAwesomeIcon icon={faSquare} />\n-              )}\n-            </>\n+          <span>{t('settings.labels.night-mode')}</span>\n+          {theme === LocalStorageThemes.Dark ? (\n+            <FontAwesomeIcon icon={faCheckSquare} />\n           ) : (\n-            <Fragment key='night-mode'>\n-              <span className='sr-only'>{t('settings.labels.night-mode')}</span>\n-              <span\n-                aria-hidden='true'\n-                className='nav-link-dull'\n-                id='theme-sign-in'\n-              >\n-                {t('misc.change-theme')}\n-              </span>\n-            </Fragment>\n+            <FontAwesomeIcon icon={faSquare} />\n           )}\n         </button>\n       </li>\n@@ -304,4 +276,7 @@ function NavLinks({\n \n NavLinks.displayName = 'NavLinks';\n \n-export default connect(null, mapDispatchToProps)(withTranslation()(NavLinks));\n+export default connect(\n+  mapStateToProps,\n+  mapDispatchToProps\n+)(withTranslation()(NavLinks));"
        },
        {
            "sha": "6273cdb8a8bd2d7708b11b068415a24f57f9a09e",
            "filename": "client/src/components/Header/components/universal-nav.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2FHeader%2Fcomponents%2Funiversal-nav.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2FHeader%2Fcomponents%2Funiversal-nav.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FHeader%2Fcomponents%2Funiversal-nav.tsx?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -19,7 +19,7 @@ const SearchBarOptimized = Loadable(\n \n type UniversalNavProps = Omit<\n   NavLinksProps,\n-  'toggleNightMode' | 'openSignoutModal'\n+  'toggleTheme' | 'openSignoutModal'\n > & {\n   fetchState: { pending: boolean };\n   searchBarRef?: React.RefObject<HTMLDivElement>;"
        },
        {
            "sha": "8058dfbfa21c9b55e73a7469d42f9b07c357d4ad",
            "filename": "client/src/components/layouts/default.tsx",
            "status": "modified",
            "additions": 20,
            "deletions": 18,
            "changes": 38,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2Flayouts%2Fdefault.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2Flayouts%2Fdefault.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Flayouts%2Fdefault.tsx?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -23,6 +23,7 @@ import hackZeroSlashRegularURL from '../../../static/fonts/hack-zeroslash/Hack-Z\n import { isBrowser } from '../../../utils';\n import {\n   fetchUser,\n+  initializeTheme,\n   onlineStatusChange,\n   serverStatusChange\n } from '../../redux/actions';\n@@ -32,7 +33,8 @@ import {\n   userSelector,\n   isOnlineSelector,\n   isServerOnlineSelector,\n-  userFetchStateSelector\n+  userFetchStateSelector,\n+  themeSelector\n } from '../../redux/selectors';\n \n import { UserFetchState, User } from '../../redux/prop-types';\n@@ -56,6 +58,7 @@ import './fonts.css';\n import './global.css';\n import './variables.css';\n import './rtl-layout.css';\n+import { LocalStorageThemes } from '../../redux/types';\n \n const mapStateToProps = createSelector(\n   isSignedInSelector,\n@@ -65,14 +68,16 @@ const mapStateToProps = createSelector(\n   isServerOnlineSelector,\n   userFetchStateSelector,\n   userSelector,\n+  themeSelector,\n   (\n     isSignedIn,\n     examInProgress: boolean,\n     flashMessage,\n     isOnline: boolean,\n     isServerOnline: boolean,\n     fetchState: UserFetchState,\n-    user: User\n+    user: User,\n+    theme: LocalStorageThemes\n   ) => ({\n     isSignedIn,\n     examInProgress,\n@@ -81,8 +86,8 @@ const mapStateToProps = createSelector(\n     isOnline,\n     isServerOnline,\n     fetchState,\n-    theme: user.theme,\n-    user\n+    user,\n+    theme\n   })\n );\n \n@@ -94,7 +99,8 @@ const mapDispatchToProps = (dispatch: Dispatch) =>\n       fetchUser,\n       removeFlashMessage,\n       onlineStatusChange,\n-      serverStatusChange\n+      serverStatusChange,\n+      initializeTheme\n     },\n     dispatch\n   );\n@@ -112,13 +118,6 @@ interface DefaultLayoutProps extends StateProps, DispatchProps {\n   superBlock?: string;\n }\n \n-const getSystemTheme = () =>\n-  `${\n-    window.matchMedia('(prefers-color-scheme: dark)').matches === true\n-      ? 'dark-palette'\n-      : 'light-palette'\n-  }`;\n-\n function DefaultLayout({\n   children,\n   hasMessage,\n@@ -137,7 +136,8 @@ function DefaultLayout({\n   theme,\n   user,\n   pathname,\n-  fetchUser\n+  fetchUser,\n+  initializeTheme\n }: DefaultLayoutProps): JSX.Element {\n   const { t } = useTranslation();\n   const isMobileLayout = useMediaQuery({ maxWidth: MAX_MOBILE_WIDTH });\n@@ -148,6 +148,12 @@ function DefaultLayout({\n   const isExSmallViewportHeight = useMediaQuery({\n     maxHeight: EX_SMALL_VIEWPORT_HEIGHT\n   });\n+\n+  useEffect(() => {\n+    initializeTheme();\n+    // eslint-disable-next-line react-hooks/exhaustive-deps\n+  }, []);\n+\n   useEffect(() => {\n     // componentDidMount\n     if (!isSignedIn) {\n@@ -170,8 +176,6 @@ function DefaultLayout({\n     return typeof isOnline === 'boolean' ? onlineStatusChange(isOnline) : null;\n   };\n \n-  const useSystemTheme = fetchState.complete && isSignedIn === false;\n-\n   const isJapanese = clientLocale === 'japanese';\n \n   if (fetchState.pending) {\n@@ -183,9 +187,7 @@ function DefaultLayout({\n           envData.environment === 'production' && <StagingWarningModal />}\n         <Helmet\n           bodyAttributes={{\n-            class: useSystemTheme\n-              ? getSystemTheme()\n-              : `${String(theme) === 'night' ? 'dark' : 'light'}-palette`\n+            class: `${theme}-palette`\n           }}\n           meta={[\n             {"
        },
        {
            "sha": "bf4b8c0ca99656701e4dc6b28750d6e5d8733388",
            "filename": "client/src/components/profile/profile.test.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2Fprofile%2Fprofile.test.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2Fprofile%2Fprofile.test.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fprofile%2Fprofile.test.tsx?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -2,7 +2,7 @@ import { render, screen } from '@testing-library/react';\n import React from 'react';\n import { Provider } from 'react-redux';\n import { createStore } from 'redux';\n-import { Themes } from '../settings/theme';\n+import { UserThemes } from '../../redux/types';\n import Profile from './profile';\n \n jest.mock('../../analytics');\n@@ -46,7 +46,7 @@ const userProps = {\n     sendQuincyEmail: true,\n     sound: true,\n     keyboardShortcuts: false,\n-    theme: Themes.Default,\n+    theme: UserThemes.Default,\n     twitter: 'string',\n     username: 'string',\n     website: 'string',"
        },
        {
            "sha": "ca83fe77b5e5c95d35dccbf73bebdcf1b57bae86",
            "filename": "client/src/components/settings/misc-settings.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 10,
            "changes": 12,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2Fsettings%2Fmisc-settings.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fcomponents%2Fsettings%2Fmisc-settings.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fsettings%2Fmisc-settings.tsx?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -2,30 +2,26 @@ import React from 'react';\n import { useTranslation } from 'react-i18next';\n import { Button, Spacer } from '@freecodecamp/ui';\n import { FullWidthRow } from '../helpers';\n-import ThemeSettings, { ThemeProps } from '../../components/settings/theme';\n+\n import SoundSettings from '../../components/settings/sound';\n import KeyboardShortcutsSettings from '../../components/settings/keyboard-shortcuts';\n import ScrollbarWidthSettings from '../../components/settings/scrollbar-width';\n \n-type MiscSettingsProps = ThemeProps & {\n-  currentTheme: string;\n+type MiscSettingsProps = {\n   keyboardShortcuts: boolean;\n   sound: boolean;\n   editorLayout: boolean | null;\n   toggleKeyboardShortcuts: (keyboardShortcuts: boolean) => void;\n-  toggleNightMode: () => void;\n   toggleSoundMode: (sound: boolean) => void;\n   resetEditorLayout: () => void;\n };\n \n const MiscSettings = ({\n-  currentTheme,\n   keyboardShortcuts,\n   sound,\n   editorLayout,\n   resetEditorLayout,\n   toggleKeyboardShortcuts,\n-  toggleNightMode,\n   toggleSoundMode\n }: MiscSettingsProps) => {\n   const { t } = useTranslation();\n@@ -34,10 +30,6 @@ const MiscSettings = ({\n     <>\n       <Spacer size='m' />\n       <FullWidthRow>\n-        <ThemeSettings\n-          currentTheme={currentTheme}\n-          toggleNightMode={toggleNightMode}\n-        />\n         <SoundSettings sound={sound} toggleSoundMode={toggleSoundMode} />\n         <KeyboardShortcutsSettings\n           keyboardShortcuts={keyboardShortcuts}"
        },
        {
            "sha": "64c87a038cd24ff53f260ad03d515b42a051902c",
            "filename": "client/src/components/settings/theme.tsx",
            "status": "removed",
            "additions": 0,
            "deletions": 39,
            "changes": 39,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/674a31811ec058ab1dc1fbe28a861b4dee6161d5/client%2Fsrc%2Fcomponents%2Fsettings%2Ftheme.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/674a31811ec058ab1dc1fbe28a861b4dee6161d5/client%2Fsrc%2Fcomponents%2Fsettings%2Ftheme.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fsettings%2Ftheme.tsx?ref=674a31811ec058ab1dc1fbe28a861b4dee6161d5",
            "patch": "@@ -1,39 +0,0 @@\n-import React from 'react';\n-import { useTranslation } from 'react-i18next';\n-import type { updateMyTheme } from '../../redux/settings/actions';\n-\n-import ToggleButtonSetting from './toggle-button-setting';\n-\n-export enum Themes {\n-  Night = 'night',\n-  Default = 'default'\n-}\n-\n-export type ThemeProps = {\n-  currentTheme: Themes;\n-  toggleNightMode: typeof updateMyTheme;\n-};\n-\n-export default function ThemeSettings({\n-  currentTheme,\n-  toggleNightMode\n-}: ThemeProps): JSX.Element {\n-  const { t } = useTranslation();\n-\n-  return (\n-    <ToggleButtonSetting\n-      action={t('settings.labels.night-mode')}\n-      flag={currentTheme === Themes.Night}\n-      flagName='currentTheme'\n-      offLabel={t('buttons.off')}\n-      onLabel={t('buttons.on')}\n-      toggleFlag={() => {\n-        toggleNightMode(\n-          currentTheme === Themes.Night ? Themes.Default : Themes.Night\n-        );\n-      }}\n-    />\n-  );\n-}\n-\n-ThemeSettings.displayName = 'ThemeSettings';"
        },
        {
            "sha": "f7b36b41d84c50449b03d634bafe142716c2510f",
            "filename": "client/src/redux/action-types.js",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Faction-types.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Faction-types.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Faction-types.js?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -4,6 +4,9 @@ export const ns = 'app';\n \n export const actionTypes = createTypes(\n   [\n+    'setTheme',\n+    'initializeTheme',\n+    'toggleTheme',\n     'appMount',\n     'hardGoTo',\n     'allowBlockDonationRequests',"
        },
        {
            "sha": "9c70e4a5a4266f4963a33fd24f2596abc753b99a",
            "filename": "client/src/redux/actions.js",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Factions.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Factions.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Factions.js?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -52,6 +52,10 @@ export const fetchUser = createAction(actionTypes.fetchUser);\n export const fetchUserComplete = createAction(actionTypes.fetchUserComplete);\n export const fetchUserError = createAction(actionTypes.fetchUserError);\n \n+export const toggleTheme = createAction(actionTypes.toggleTheme);\n+export const setTheme = createAction(actionTypes.setTheme);\n+export const initializeTheme = createAction(actionTypes.initializeTheme);\n+\n export const updateAllChallengesInfo = createAction(\n   actionTypes.updateAllChallengesInfo\n );"
        },
        {
            "sha": "703027d8c4ff6c7ce1d63f156f34e3b4d7efd246",
            "filename": "client/src/redux/index.js",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Findex.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Findex.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Findex.js?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -23,6 +23,7 @@ import { createUserTokenSaga } from './user-token-saga';\n import { createMsUsernameSaga } from './ms-username-saga';\n import { createSurveySaga } from './survey-saga';\n import { createSessionCompletedChallengesSaga } from './session-completed-challenges';\n+import { createThemeSaga } from './theme-saga';\n \n const defaultFetchState = {\n   pending: true,\n@@ -55,6 +56,7 @@ const initialState = {\n   currentChallengeId: store.get(CURRENT_CHALLENGE_KEY),\n   examInProgress: false,\n   isProcessing: false,\n+  theme: 'light',\n   showCert: {},\n   showCertFetchState: {\n     ...defaultFetchState\n@@ -87,6 +89,7 @@ export const epics = [hardGoToEpic, failedUpdatesEpic, updateCompleteEpic];\n \n export const sagas = [\n   ...createAcceptTermsSaga(actionTypes),\n+  ...createThemeSaga(actionTypes),\n   ...createAppMountSaga(actionTypes),\n   ...createDonationSaga(actionTypes),\n   ...createFetchUserSaga(actionTypes),\n@@ -253,6 +256,10 @@ export const reducer = handleActions(\n         error: payload\n       }\n     }),\n+    [actionTypes.setTheme]: (state, { payload: theme }) => ({\n+      ...state,\n+      theme\n+    }),\n     [actionTypes.onlineStatusChange]: (state, { payload: isOnline }) => ({\n       ...state,\n       isOnline\n@@ -481,8 +488,6 @@ export const reducer = handleActions(\n       payload ? spreadThePayloadOnUser(state, payload) : state,\n     [settingsTypes.updateMySoundComplete]: (state, { payload }) =>\n       payload ? spreadThePayloadOnUser(state, payload) : state,\n-    [settingsTypes.updateMyThemeComplete]: (state, { payload }) =>\n-      payload ? spreadThePayloadOnUser(state, payload) : state,\n     [settingsTypes.updateMyKeyboardShortcutsComplete]: (state, { payload }) =>\n       payload ? spreadThePayloadOnUser(state, payload) : state,\n     [settingsTypes.updateMyHonestyComplete]: (state, { payload }) =>"
        },
        {
            "sha": "3dad46649d4bb0a03ccb52a3da2f1d93a84c1e1d",
            "filename": "client/src/redux/prop-types.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Fprop-types.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Fprop-types.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Fprop-types.ts?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -2,8 +2,8 @@ import { HandlerProps } from 'react-reflex';\n import { SuperBlocks } from '../../../shared/config/curriculum';\n import { BlockLayouts, BlockTypes } from '../../../shared/config/blocks';\n import type { ChallengeFile, Ext } from '../../../shared/utils/polyvinyl';\n-import { Themes } from '../components/settings/theme';\n import { type CertTitle } from '../../config/cert-and-project-map';\n+import { UserThemes } from './types';\n \n export type { ChallengeFile, Ext };\n \n@@ -316,7 +316,7 @@ export type User = {\n   savedChallenges: SavedChallenges;\n   sendQuincyEmail: boolean;\n   sound: boolean;\n-  theme: Themes;\n+  theme: UserThemes;\n   keyboardShortcuts: boolean;\n   twitter: string;\n   username: string;"
        },
        {
            "sha": "ca56462626514146c266937a02cac2c42e897ec4",
            "filename": "client/src/redux/selectors.js",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Fselectors.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Fselectors.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Fselectors.js?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -259,6 +259,10 @@ export const allChallengesInfoSelector = state =>\n export const userProfileFetchStateSelector = state =>\n   state[MainApp].userProfileFetchState;\n export const usernameSelector = state => state[MainApp].appUsername;\n+export const themeSelector = state => state[MainApp].theme;\n+export const userThemeSelector = state => {\n+  return userSelector(state).theme;\n+};\n export const userSelector = state => {\n   const username = usernameSelector(state);\n "
        },
        {
            "sha": "8bb0ddde85b7cafe3130e441c1906c228061df58",
            "filename": "client/src/redux/settings/action-types.js",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Fsettings%2Faction-types.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Fsettings%2Faction-types.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Fsettings%2Faction-types.js?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -10,7 +10,6 @@ export const actionTypes = createTypes(\n     ...createAsyncTypes('updateMyEmail'),\n     ...createAsyncTypes('updateMySocials'),\n     ...createAsyncTypes('updateMySound'),\n-    ...createAsyncTypes('updateMyTheme'),\n     ...createAsyncTypes('updateMyKeyboardShortcuts'),\n     ...createAsyncTypes('updateMyHonesty'),\n     ...createAsyncTypes('updateMyQuincyEmail'),"
        },
        {
            "sha": "4a561ff4650dd4b44bb55e8b032c0cdd65599e9f",
            "filename": "client/src/redux/settings/actions.js",
            "status": "modified",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Fsettings%2Factions.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Fsettings%2Factions.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Fsettings%2Factions.js?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -46,13 +46,6 @@ export const updateMySoundComplete = createAction(\n );\n export const updateMySoundError = createAction(types.updateMySoundError);\n \n-export const updateMyTheme = createAction(types.updateMyTheme);\n-export const updateMyThemeComplete = createAction(\n-  types.updateMyThemeComplete,\n-  checkForSuccessPayload\n-);\n-export const updateMyThemeError = createAction(types.updateMyThemeError);\n-\n export const updateMyKeyboardShortcuts = createAction(\n   types.updateMyKeyboardShortcuts\n );"
        },
        {
            "sha": "f0cdb45994881d3ce4bccfd91749a38ce0f1b72f",
            "filename": "client/src/redux/settings/settings-sagas.js",
            "status": "modified",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Fsettings%2Fsettings-sagas.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Fsettings%2Fsettings-sagas.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Fsettings%2Fsettings-sagas.js?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -24,7 +24,6 @@ import {\n   putUpdateMyProfileUI,\n   putUpdateMyQuincyEmail,\n   putUpdateMySocials,\n-  putUpdateMyTheme,\n   putUpdateMyUsername,\n   putVerifyCert\n } from '../../utils/ajax';\n@@ -50,8 +49,6 @@ import {\n   updateMySocialsError,\n   updateMySoundComplete,\n   updateMySoundError,\n-  updateMyThemeComplete,\n-  updateMyThemeError,\n   validateUsernameComplete,\n   validateUsernameError,\n   verifyCertComplete,\n@@ -132,16 +129,6 @@ function* resetMyEditorLayoutSaga() {\n   }\n }\n \n-function* updateMyThemeSaga({ payload: update }) {\n-  try {\n-    const { data } = yield call(putUpdateMyTheme, update);\n-    yield put(updateMyThemeComplete({ ...data, payload: update }));\n-    yield put(createFlashMessage({ ...data }));\n-  } catch (e) {\n-    yield put(updateMyThemeError);\n-  }\n-}\n-\n function* updateMyKeyboardShortcutsSaga({ payload: update }) {\n   try {\n     const { data } = yield call(putUpdateMyKeyboardShortcuts, update);\n@@ -248,7 +235,6 @@ export function createSettingsSagas(types) {\n     takeEvery(types.updateMyHonesty, updateMyHonestySaga),\n     takeEvery(types.updateMySound, updateMySoundSaga),\n     takeEvery(types.resetMyEditorLayout, resetMyEditorLayoutSaga),\n-    takeEvery(types.updateMyTheme, updateMyThemeSaga),\n     takeEvery(types.updateMyKeyboardShortcuts, updateMyKeyboardShortcutsSaga),\n     takeEvery(types.updateMyQuincyEmail, updateMyQuincyEmailSaga),\n     takeEvery(types.updateMyPortfolio, updateMyPortfolioSaga),"
        },
        {
            "sha": "5281ca91eec08a84647695e8e3ba5c5dc2bfccf0",
            "filename": "client/src/redux/theme-saga.js",
            "status": "added",
            "additions": 45,
            "deletions": 0,
            "changes": 45,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Ftheme-saga.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Ftheme-saga.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Ftheme-saga.js?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -0,0 +1,45 @@\n+import { put, takeEvery, select, take } from 'redux-saga/effects';\n+import { createFlashMessage } from '../components/Flash/redux';\n+import { setTheme } from './actions';\n+import { actionTypes } from './action-types';\n+import { userThemeSelector } from './selectors';\n+\n+function* toggleThemeSaga() {\n+  const data = { type: 'success', message: 'flash.updated-themes' };\n+  const currentTheme = localStorage.getItem('theme');\n+  const invertedTheme = currentTheme === 'dark' ? 'light' : 'dark';\n+  localStorage.setItem('theme', invertedTheme);\n+  yield put(setTheme(invertedTheme));\n+  yield put(createFlashMessage({ ...data }));\n+}\n+\n+function* initializeThemeSaga() {\n+  // Wait for the fetch userComplete action\n+  yield take(actionTypes.fetchUserComplete);\n+\n+  const userTheme = yield select(userThemeSelector);\n+  const localStorageTheme = localStorage.getItem('theme');\n+  const isSysThemeDark = window.matchMedia(\n+    '(prefers-color-scheme: dark)'\n+  ).matches;\n+\n+  let selectTheme = 'light';\n+\n+  if (localStorageTheme !== null) {\n+    selectTheme = localStorageTheme === 'dark' ? 'dark' : 'light';\n+  } else if (userTheme) {\n+    selectTheme = userTheme === 'night' ? 'dark' : 'light';\n+  } else if (isSysThemeDark) {\n+    selectTheme = 'dark';\n+  }\n+\n+  localStorage.setItem('theme', selectTheme);\n+  yield put(setTheme(selectTheme));\n+}\n+\n+export function createThemeSaga(types) {\n+  return [\n+    takeEvery(types.toggleTheme, toggleThemeSaga),\n+    takeEvery(types.initializeTheme, initializeThemeSaga)\n+  ];\n+}"
        },
        {
            "sha": "1e9f935aadef11c38c0e1d7c352ca9c7173cd650",
            "filename": "client/src/redux/types.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Ftypes.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Fredux%2Ftypes.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Ftypes.ts?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -62,3 +62,13 @@ export interface UpdateCardState {\n   success: boolean;\n   error: string;\n }\n+\n+export enum LocalStorageThemes {\n+  Light = 'light',\n+  Dark = 'dark'\n+}\n+\n+export enum UserThemes {\n+  Night = 'night',\n+  Default = 'default'\n+}"
        },
        {
            "sha": "ed00998f34a69686cf33a99fe9ccb744eae9e74b",
            "filename": "client/src/templates/Challenges/classic/editor.tsx",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Feditor.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Feditor.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Feditor.tsx?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -18,12 +18,12 @@ import store from 'store';\n import { debounce } from 'lodash-es';\n import { useTranslation } from 'react-i18next';\n import { Loader } from '../../../components/helpers';\n-import { Themes } from '../../../components/settings/theme';\n+import { LocalStorageThemes } from '../../../redux/types';\n import { saveChallenge } from '../../../redux/actions';\n import {\n   isDonationModalOpenSelector,\n   isSignedInSelector,\n-  userSelector\n+  themeSelector\n } from '../../../redux/selectors';\n import {\n   ChallengeFiles,\n@@ -101,7 +101,7 @@ export interface EditorProps {\n   stopResetting: () => void;\n   resetAttempts: () => void;\n   tests: Test[];\n-  theme: Themes;\n+  theme: LocalStorageThemes;\n   title: string;\n   showProjectPreview: boolean;\n   previewOpen: boolean;\n@@ -137,9 +137,9 @@ const mapStateToProps = createSelector(\n   isProjectPreviewModalOpenSelector,\n   isResettingSelector,\n   isSignedInSelector,\n-  userSelector,\n   challengeTestsSelector,\n   isChallengeCompletedSelector,\n+  themeSelector,\n   (\n     attempts: number,\n     canFocus: boolean,\n@@ -148,19 +148,19 @@ const mapStateToProps = createSelector(\n     previewOpen: boolean,\n     isResetting: boolean,\n     isSignedIn: boolean,\n-    { theme }: { theme: Themes },\n     tests: [{ text: string; testString: string; message?: string }],\n-    isChallengeCompleted: boolean\n+    isChallengeCompleted: boolean,\n+    theme: LocalStorageThemes\n   ) => ({\n     attempts,\n     canFocus: open ? false : canFocus,\n     challengeType,\n     previewOpen,\n     isResetting,\n     isSignedIn,\n-    theme,\n     tests,\n-    isChallengeCompleted\n+    isChallengeCompleted,\n+    theme\n   })\n );\n \n@@ -1269,9 +1269,9 @@ const Editor = (props: EditorProps): JSX.Element => {\n   ).matches;\n   const editorSystemTheme = preferDarkScheme ? 'vs-dark-custom' : 'vs-custom';\n   const editorTheme =\n-    theme === Themes.Night\n+    theme === LocalStorageThemes.Dark\n       ? 'vs-dark-custom'\n-      : theme === Themes.Default\n+      : theme === LocalStorageThemes.Light\n         ? 'vs-custom'\n         : editorSystemTheme;\n "
        },
        {
            "sha": "45cf004426b5f6157aa2babd338ebc1405b74342",
            "filename": "client/src/templates/Challenges/classic/multifile-editor.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 10,
            "changes": 13,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fmultifile-editor.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fmultifile-editor.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fmultifile-editor.tsx?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -2,10 +2,7 @@ import React, { useRef } from 'react';\n import { connect } from 'react-redux';\n import { ReflexContainer, ReflexElement, ReflexSplitter } from 'react-reflex';\n import { createSelector } from 'reselect';\n-import {\n-  userSelector,\n-  isDonationModalOpenSelector\n-} from '../../../redux/selectors';\n+import { isDonationModalOpenSelector } from '../../../redux/selectors';\n import {\n   canFocusEditorSelector,\n   consoleOutputSelector,\n@@ -14,7 +11,6 @@ import {\n import { getTargetEditor } from '../utils/get-target-editor';\n import './editor.css';\n import { FileKey } from '../../../redux/prop-types';\n-import { Themes } from '../../../components/settings/theme';\n import Editor, { type EditorProps } from './editor';\n \n export type VisibleEditors = {\n@@ -51,18 +47,15 @@ const mapStateToProps = createSelector(\n   canFocusEditorSelector,\n   consoleOutputSelector,\n   isDonationModalOpenSelector,\n-  userSelector,\n   (\n     visibleEditors: VisibleEditors,\n     canFocus: boolean,\n     output: string[],\n-    open,\n-    { theme }: { theme: Themes }\n+    open\n   ) => ({\n     visibleEditors,\n     canFocus: open ? false : canFocus,\n-    output,\n-    theme\n+    output\n   })\n );\n "
        },
        {
            "sha": "961880c6891eaf9e3dc334af09c3523398401ca9",
            "filename": "client/src/utils/ajax.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Futils%2Fajax.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Futils%2Fajax.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Futils%2Fajax.ts?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -363,12 +363,6 @@ export function putUpdateMySocials(\n   return put('/update-my-socials', update);\n }\n \n-export function putUpdateMyTheme(\n-  update: Record<string, string>\n-): Promise<ResponseWithData<void>> {\n-  return put('/update-my-theme', update);\n-}\n-\n export function putUpdateMyKeyboardShortcuts(\n   update: Record<string, string>\n ): Promise<ResponseWithData<void>> {"
        },
        {
            "sha": "97dcbd48d207d33bc9eea96eb874eb94a210cf04",
            "filename": "client/src/utils/tone/index.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Futils%2Ftone%2Findex.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/client%2Fsrc%2Futils%2Ftone%2Findex.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Futils%2Ftone%2Findex.ts?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -1,13 +1,12 @@\n import store from 'store';\n import { FlashMessages } from '../../components/Flash/redux/flash-messages';\n-import { Themes } from '../../components/settings/theme';\n-\n+import { LocalStorageThemes } from '../../redux/types';\n const TRY_AGAIN = 'https://campfire-mode.freecodecamp.org/try-again.mp3';\n const CHAL_COMP = 'https://campfire-mode.freecodecamp.org/chal-comp.mp3';\n \n const toneUrls = {\n-  [Themes.Default]: 'https://campfire-mode.freecodecamp.org/day.mp3',\n-  [Themes.Night]: 'https://campfire-mode.freecodecamp.org/night.mp3',\n+  [LocalStorageThemes.Light]: 'https://campfire-mode.freecodecamp.org/day.mp3',\n+  [LocalStorageThemes.Dark]: 'https://campfire-mode.freecodecamp.org/night.mp3',\n   donation: 'https://campfire-mode.freecodecamp.org/donate.mp3',\n   'tests-completed': CHAL_COMP,\n   'block-toggle': 'https://tonejs.github.io/audio/berklee/guitar_chord1.mp3',"
        },
        {
            "sha": "971f2bcaf9697c8ac315ccd2bd8b4953b4d96c3b",
            "filename": "e2e/editor.spec.ts",
            "status": "modified",
            "additions": 44,
            "deletions": 2,
            "changes": 46,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/e2e%2Feditor.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/e2e%2Feditor.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Feditor.spec.ts?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -79,7 +79,7 @@ test.describe('Editor theme if the system theme is dark', () => {\n     });\n   });\n \n-  test.describe('If the user is signed out', () => {\n+  test.describe('If the user is signed out and has no local storage data', () => {\n     test.use({ storageState: { cookies: [], origins: [] } });\n \n     test('should be in dark mode', async ({ page }) => {\n@@ -88,6 +88,27 @@ test.describe('Editor theme if the system theme is dark', () => {\n       await expect(editor).toHaveClass(/vs-dark/);\n     });\n   });\n+\n+  test.describe('if the user is signed out and has a dark theme set in local storage', () => {\n+    test.use({ storageState: { cookies: [], origins: [] } });\n+\n+    test('should be in dark mode', async ({ page }) => {\n+      // go to the test page\n+      await page.goto(testPage);\n+\n+      // set the dark theme in local storage\n+      await page.evaluate(() => {\n+        localStorage.setItem('theme', 'dark');\n+      });\n+\n+      // reload the page to apply the local storage changes\n+      await page.reload();\n+\n+      // check if the editor is in dark mode\n+      const editor = page.locator(\"div[role='code'].monaco-editor\");\n+      await expect(editor).toHaveClass(/vs-dark/);\n+    });\n+  });\n });\n \n test.describe('Editor theme if the system theme is light', () => {\n@@ -135,13 +156,34 @@ test.describe('Editor theme if the system theme is light', () => {\n     });\n   });\n \n-  test.describe('If the user is signed out', () => {\n+  test.describe('If the user is signed out and has no local storage value', () => {\n     test.use({ storageState: { cookies: [], origins: [] } });\n \n     test('should be in light mode', async ({ page }) => {\n       await page.goto(testPage);\n       const editor = page.locator(\"div[role='code'].monaco-editor\");\n       await expect(editor).toHaveClass(/vs(?!\\w)/);\n     });\n+\n+    test.describe('if the user is signed out and has a light theme set in local storage', () => {\n+      test.use({ storageState: { cookies: [], origins: [] } });\n+\n+      test('should be in light mode', async ({ page }) => {\n+        // go to the test page\n+        await page.goto(testPage);\n+\n+        // set the light theme in local storage\n+        await page.evaluate(() => {\n+          localStorage.setItem('theme', 'light');\n+        });\n+\n+        // reload the page to apply the local storage changes\n+        await page.reload();\n+\n+        // check if the editor is in light mode\n+        const editor = page.locator(\"div[role='code'].monaco-editor\");\n+        await expect(editor).toHaveClass(/vs(?!\\w)/);\n+      });\n+    });\n   });\n });"
        },
        {
            "sha": "612f898a0ad3ba9b267ea7cff205af82cc679510",
            "filename": "e2e/settings.spec.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0b77e59457696cfc27a0e3421af60ca20ca92d73/e2e%2Fsettings.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0b77e59457696cfc27a0e3421af60ca20ca92d73/e2e%2Fsettings.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fsettings.spec.ts?ref=0b77e59457696cfc27a0e3421af60ca20ca92d73",
            "patch": "@@ -168,15 +168,6 @@ test.describe('Settings - Certified User', () => {\n       name: translations.buttons['download-data']\n     });\n     await expect(downloadButton).toBeVisible();\n-\n-    await expect(\n-      page\n-        .getByRole('group', {\n-          name: translations.settings.labels['night-mode'],\n-          exact: true\n-        })\n-        .locator('p')\n-    ).toBeVisible();\n     await expect(page.locator('#legendsound')).toBeVisible();\n     await expect(\n       page.getByText(translations.settings['sound-volume'])"
        }
    ],
    "stats": {
        "total": 443,
        "additions": 218,
        "deletions": 225
    }
}