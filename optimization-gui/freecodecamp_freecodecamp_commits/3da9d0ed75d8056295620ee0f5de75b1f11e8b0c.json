{
    "author": "Sembauke",
    "message": "feat: convert report user test to Playwright (#54683)\n\nCo-authored-by: Oliver Eyton-Williams <ojeytonwilliams@gmail.com>",
    "sha": "3da9d0ed75d8056295620ee0f5de75b1f11e8b0c",
    "files": [
        {
            "sha": "c59a22560154a22ad9fe882cce4b61faa92b91b9",
            "filename": "client/src/client-only-routes/show-user.tsx",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/3da9d0ed75d8056295620ee0f5de75b1f11e8b0c/client%2Fsrc%2Fclient-only-routes%2Fshow-user.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/3da9d0ed75d8056295620ee0f5de75b1f11e8b0c/client%2Fsrc%2Fclient-only-routes%2Fshow-user.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fclient-only-routes%2Fshow-user.tsx?ref=3da9d0ed75d8056295620ee0f5de75b1f11e8b0c",
            "patch": "@@ -124,7 +124,6 @@ function ShowUser({\n             <FormGroup controlId='report-user-textarea'>\n               <ControlLabel>{t('report.what')}</ControlLabel>\n               <FormControl\n-                data-cy='report-user'\n                 componentClass='textarea'\n                 onChange={handleChange}\n                 placeholder={t('report.details')}"
        },
        {
            "sha": "cc1c23384f2ccba874f473f31a6cccdfe27dbf9b",
            "filename": "cypress/e2e/default/user/report-user.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 21,
            "changes": 21,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/074172e264cc7353c252e029657014f01be837fb/cypress%2Fe2e%2Fdefault%2Fuser%2Freport-user.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/074172e264cc7353c252e029657014f01be837fb/cypress%2Fe2e%2Fdefault%2Fuser%2Freport-user.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/cypress%2Fe2e%2Fdefault%2Fuser%2Freport-user.ts?ref=074172e264cc7353c252e029657014f01be837fb",
            "patch": "@@ -1,21 +0,0 @@\n-describe('Report User', () => {\n-  beforeEach(() => {\n-    cy.task('seed');\n-    cy.login();\n-  });\n-  it('should be possible to report a user from their profile page', () => {\n-    // Since going to a user page initially generates a 404, we have to ignore\n-    // status codes on that request\n-    cy.visit('/twaha', { failOnStatusCode: false });\n-    // The following line is only required if you want to test it in development\n-    // cy.contains('Preview custom 404 page').click();\n-    cy.contains(\"Flag This User's Account for Abuse\").click();\n-    cy.contains(\"Do you want to report twaha's portfolio for abuse?\");\n-    cy.get('[data-cy=\"report-user\"]').type('Some details');\n-    cy.contains('Submit the report').click();\n-    cy.location().should(loc => {\n-      expect(loc.pathname).to.eq('/learn');\n-    });\n-    cy.contains('A report was sent to the team with foo@bar.com in copy');\n-  });\n-});"
        },
        {
            "sha": "6569e2cd75b2def53e03f5fa3e0d17f446cfb1d7",
            "filename": "e2e/report-user.spec.ts",
            "status": "added",
            "additions": 31,
            "deletions": 0,
            "changes": 31,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/3da9d0ed75d8056295620ee0f5de75b1f11e8b0c/e2e%2Freport-user.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/3da9d0ed75d8056295620ee0f5de75b1f11e8b0c/e2e%2Freport-user.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Freport-user.spec.ts?ref=3da9d0ed75d8056295620ee0f5de75b1f11e8b0c",
            "patch": "@@ -0,0 +1,31 @@\n+import { test, expect } from '@playwright/test';\n+test.use({ storageState: 'playwright/.auth/certified-user.json' });\n+\n+// To run this test you will need to run the email server.\n+// To do this: https://contribute.freecodecamp.org/#/how-to-catch-outgoing-emails-locally?id=using-mailhog\n+\n+test('should be possible to report a user from their profile page', async ({\n+  page\n+}) => {\n+  await page.goto('/twaha');\n+\n+  // If you build the client locally, delete the button click below.\n+  if (!process.env.CI) {\n+    await page.getByRole('button', { name: 'Preview custom 404 page' }).click();\n+  }\n+\n+  await page.getByText(\"Flag This User's Account for Abuse\").click();\n+\n+  await expect(\n+    page.getByText(\"Do you want to report twaha's portfolio for abuse?\")\n+  ).toBeVisible();\n+\n+  await page.getByRole('textbox').nth(1).fill('Some details');\n+  await page.getByRole('button', { name: 'Submit the report' }).click();\n+  await expect(page).toHaveURL('/learn');\n+\n+  await expect(page.getByTestId('flash-message')).toBeVisible();\n+  await expect(page.getByTestId('flash-message')).toContainText(\n+    'A report was sent to the team with foo@bar.com in copy'\n+  );\n+});"
        }
    ],
    "stats": {
        "total": 53,
        "additions": 31,
        "deletions": 22
    }
}