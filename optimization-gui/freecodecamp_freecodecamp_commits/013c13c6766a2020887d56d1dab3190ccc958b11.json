{
    "author": "ojeytonwilliams",
    "message": "fix(docker): clean up dockerfiles (#60947)",
    "sha": "013c13c6766a2020887d56d1dab3190ccc958b11",
    "files": [
        {
            "sha": "3814c970079fe676883eb5b2bcd93fc4bf135243",
            "filename": "docker/api/Dockerfile",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/013c13c6766a2020887d56d1dab3190ccc958b11/docker%2Fapi%2FDockerfile",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/013c13c6766a2020887d56d1dab3190ccc958b11/docker%2Fapi%2FDockerfile",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/docker%2Fapi%2FDockerfile?ref=013c13c6766a2020887d56d1dab3190ccc958b11",
            "patch": "@@ -2,7 +2,7 @@ FROM node:22-bookworm AS builder\n RUN apt-get update && apt-get install -y jq\n # global installs need root permissions, so have to happen before we switch to\n # the node user\n-RUN npm i -g pnpm@10\n+RUN corepack enable\n # node images create a non-root user that we can use\n USER node\n WORKDIR /home/node/build\n@@ -41,7 +41,7 @@ COPY --chown=node:node pnpm*.yaml .\n COPY --chown=node:node package.json .\n COPY --chown=node:node api/ api/\n COPY --chown=node:node shared/ shared/\n-RUN npm i -g pnpm@10\n+RUN corepack enable\n \n # Weirdly this config does not seem necessary for the new api (the same number\n # of deps are installed in both cases), but I'm including it just for"
        },
        {
            "sha": "2edbed2bebc47e9a5f1edaea99058591f96b5611",
            "filename": "docker/web/Dockerfile",
            "status": "modified",
            "additions": 8,
            "deletions": 9,
            "changes": 17,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/013c13c6766a2020887d56d1dab3190ccc958b11/docker%2Fweb%2FDockerfile",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/013c13c6766a2020887d56d1dab3190ccc958b11/docker%2Fweb%2FDockerfile",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/docker%2Fweb%2FDockerfile?ref=013c13c6766a2020887d56d1dab3190ccc958b11",
            "patch": "@@ -1,7 +1,7 @@\n FROM node:22-bookworm AS builder\n # global installs need root permissions, so have to happen before we switch to\n # the node user\n-RUN npm i -g pnpm@10\n+RUN corepack enable\n # node images create a non-root user that we can use\n USER node\n WORKDIR /home/node/build\n@@ -13,21 +13,20 @@ COPY --chown=node:node tools/ tools/\n COPY --chown=node:node curriculum/ curriculum/\n \n ARG HOME_LOCATION\n-ARG API_LOCATION\n-ARG FORUM_LOCATION\n ARG NEWS_LOCATION\n-ARG RADIO_LOCATION\n ARG CLIENT_LOCALE\n ARG CURRICULUM_LOCALE\n-ARG ALGOLIA_APP_ID\n+ARG API_LOCATION\n ARG ALGOLIA_API_KEY\n-ARG STRIPE_PUBLIC_KEY\n-ARG PAYPAL_CLIENT_ID\n+ARG ALGOLIA_APP_ID\n+ARG GROWTHBOOK_URI\n+ARG FORUM_LOCATION\n ARG PATREON_CLIENT_ID\n-ARG DEPLOYMENT_ENV\n+ARG PAYPAL_CLIENT_ID\n+ARG STRIPE_PUBLIC_KEY\n ARG SHOW_UPCOMING_CHANGES\n-ARG GROWTHBOOK_URI\n ARG FREECODECAMP_NODE_ENV\n+ARG DEPLOYMENT_ENV\n \n # For simplicity and because node_modules do not make it into the final image,\n # we can just install all dependencies here."
        }
    ],
    "stats": {
        "total": 21,
        "additions": 10,
        "deletions": 11
    }
}