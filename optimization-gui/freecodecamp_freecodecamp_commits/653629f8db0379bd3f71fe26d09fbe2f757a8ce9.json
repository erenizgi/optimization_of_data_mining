{
    "author": "ojeytonwilliams",
    "message": "fix: better meta validation errors (#57180)",
    "sha": "653629f8db0379bd3f71fe26d09fbe2f757a8ce9",
    "files": [
        {
            "sha": "4cd80951870d5bec71d76156d2da4e573f48bd6e",
            "filename": "curriculum/schema/meta-schema.js",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/653629f8db0379bd3f71fe26d09fbe2f757a8ce9/curriculum%2Fschema%2Fmeta-schema.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/653629f8db0379bd3f71fe26d09fbe2f757a8ce9/curriculum%2Fschema%2Fmeta-schema.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fschema%2Fmeta-schema.js?ref=653629f8db0379bd3f71fe26d09fbe2f757a8ce9",
            "patch": "@@ -1,5 +1,7 @@\n const Joi = require('joi');\n \n+const { SuperBlocks } = require('../../shared/config/curriculum');\n+\n const slugRE = new RegExp('^[a-z0-9-]+$');\n const slugWithSlashRE = new RegExp('^[a-z0-9-/]+$');\n \n@@ -25,7 +27,10 @@ const schema = Joi.object()\n     ),\n     isUpcomingChange: Joi.boolean().required(),\n     dashedName: Joi.string().regex(slugRE).required(),\n-    superBlock: Joi.string().regex(slugWithSlashRE).required(),\n+    superBlock: Joi.string()\n+      .regex(slugWithSlashRE)\n+      .valid(...Object.values(SuperBlocks))\n+      .required(),\n     order: Joi.number().when('superBlock', {\n       is: 'full-stack-developer',\n       then: Joi.forbidden(),\n@@ -73,5 +78,5 @@ const schema = Joi.object()\n   .unknown(false);\n \n exports.metaSchemaValidator = meta => {\n-  return schema.validate(meta);\n+  return schema.validate(meta, { abortEarly: false });\n };"
        }
    ],
    "stats": {
        "total": 9,
        "additions": 7,
        "deletions": 2
    }
}