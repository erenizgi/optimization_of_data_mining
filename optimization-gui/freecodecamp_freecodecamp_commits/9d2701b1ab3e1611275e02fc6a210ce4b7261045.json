{
    "author": "huyenltnguyen",
    "message": "chore(curriculum, tools): improve external curricula data validation (#59541)",
    "sha": "9d2701b1ab3e1611275e02fc6a210ce4b7261045",
    "files": [
        {
            "sha": "a1bcb63bd58193f08ff0aa89e3d4f86335643bca",
            "filename": "curriculum/schema/meta-schema.js",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/9d2701b1ab3e1611275e02fc6a210ce4b7261045/curriculum%2Fschema%2Fmeta-schema.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/9d2701b1ab3e1611275e02fc6a210ce4b7261045/curriculum%2Fschema%2Fmeta-schema.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fschema%2Fmeta-schema.js?ref=9d2701b1ab3e1611275e02fc6a210ce4b7261045",
            "patch": "@@ -28,7 +28,11 @@ const schema = Joi.object()\n       'review',\n       'quiz',\n       'exam'\n-    ),\n+    ).when('superBlock', {\n+      is: 'full-stack-developer',\n+      then: Joi.required(),\n+      otherwise: Joi.optional()\n+    }),\n     isUpcomingChange: Joi.boolean().required(),\n     dashedName: Joi.string().regex(slugRE).required(),\n     superBlock: Joi.string()"
        },
        {
            "sha": "2a4d15401c785cf7c07f0a5965ee36eb5ebc76f0",
            "filename": "tools/scripts/build/build-external-curricula-data.test.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/9d2701b1ab3e1611275e02fc6a210ce4b7261045/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/9d2701b1ab3e1611275e02fc6a210ce4b7261045/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fscripts%2Fbuild%2Fbuild-external-curricula-data.test.ts?ref=9d2701b1ab3e1611275e02fc6a210ce4b7261045",
            "patch": "@@ -88,4 +88,16 @@ ${result.error.message}`);\n       publicSuperBlockNames.length\n     );\n   });\n+\n+  test('challenge files should be created and in the correct directory', () => {\n+    expect(\n+      fs.existsSync(`${clientStaticPath}/curriculum-data/${VERSION}/challenges`)\n+    ).toBe(true);\n+\n+    expect(\n+      fs.readdirSync(\n+        `${clientStaticPath}/curriculum-data/${VERSION}/challenges`\n+      ).length\n+    ).toBeGreaterThan(0);\n+  });\n });"
        },
        {
            "sha": "deb0417d9c57293d17be40f924d6cab6f0525037",
            "filename": "tools/scripts/build/external-data-schema.js",
            "status": "modified",
            "additions": 25,
            "deletions": 9,
            "changes": 34,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/9d2701b1ab3e1611275e02fc6a210ce4b7261045/tools%2Fscripts%2Fbuild%2Fexternal-data-schema.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/9d2701b1ab3e1611275e02fc6a210ce4b7261045/tools%2Fscripts%2Fbuild%2Fexternal-data-schema.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fscripts%2Fbuild%2Fexternal-data-schema.js?ref=9d2701b1ab3e1611275e02fc6a210ce4b7261045",
            "patch": "@@ -3,11 +3,11 @@ const Joi = require('joi');\n const blockSchema = Joi.object({}).keys({\n   desc: Joi.array().min(1),\n   challenges: Joi.object({}).keys({\n-    name: Joi.string(),\n-    isUpcomingChange: Joi.bool(),\n+    name: Joi.string().required(),\n+    isUpcomingChange: Joi.bool().required(),\n     usesMultifileEditor: Joi.bool().optional(),\n     hasEditableBoundaries: Joi.bool().optional(),\n-    dashedName: Joi.string(),\n+    dashedName: Joi.string().required(),\n     helpCategory: Joi.valid(\n       'JavaScript',\n       'HTML-CSS',\n@@ -18,21 +18,37 @@ const blockSchema = Joi.object({}).keys({\n       'Odin',\n       'Euler',\n       'Rosetta'\n-    ),\n-    order: Joi.number(),\n-    time: Joi.string().allow(''),\n+    ).required(),\n+    order: Joi.number().when('superBlock', {\n+      is: 'full-stack-developer',\n+      then: Joi.forbidden(),\n+      otherwise: Joi.required()\n+    }),\n     template: Joi.string().allow(''),\n     required: Joi.array(),\n-    superBlock: Joi.string(),\n-    blockLayout: Joi.string(),\n+    superBlock: Joi.string().required(),\n+    blockLayout: Joi.valid(\n+      'challenge-list',\n+      'challenge-grid',\n+      'dialogue-grid',\n+      'link',\n+      'project-list',\n+      'legacy-challenge-list',\n+      'legacy-link',\n+      'legacy-challenge-grid'\n+    ).required(),\n     blockType: Joi.valid(\n       'lecture',\n       'workshop',\n       'lab',\n       'review',\n       'quiz',\n       'exam'\n-    ),\n+    ).when('superBlock', {\n+      is: 'full-stack-developer',\n+      then: Joi.required(),\n+      otherwise: Joi.optional()\n+    }),\n     challengeOrder: Joi.array().items(\n       Joi.object({}).keys({\n         id: Joi.string(),"
        }
    ],
    "stats": {
        "total": 52,
        "additions": 42,
        "deletions": 10
    }
}