{
    "author": "Sembauke",
    "message": "refactor(client): convert backend to functional component (#57401)",
    "sha": "882c4314c870e2350b0dc1809f6585b63579ce5d",
    "files": [
        {
            "sha": "b6ea4efc9c5f96504935bcce614bba56a685d1eb",
            "filename": "client/src/templates/Challenges/projects/backend/show.tsx",
            "status": "modified",
            "additions": 95,
            "deletions": 153,
            "changes": 248,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/882c4314c870e2350b0dc1809f6585b63579ce5d/client%2Fsrc%2Ftemplates%2FChallenges%2Fprojects%2Fbackend%2Fshow.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/882c4314c870e2350b0dc1809f6585b63579ce5d/client%2Fsrc%2Ftemplates%2FChallenges%2Fprojects%2Fbackend%2Fshow.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fprojects%2Fbackend%2Fshow.tsx?ref=882c4314c870e2350b0dc1809f6585b63579ce5d",
            "patch": "@@ -1,9 +1,5 @@\n-/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n-/* eslint-disable @typescript-eslint/no-unsafe-call */\n-/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n-\n import { graphql } from 'gatsby';\n-import React, { Component } from 'react';\n+import React, { useEffect, useRef } from 'react';\n import Helmet from 'react-helmet';\n import { withTranslation } from 'react-i18next';\n import type { TFunction } from 'i18next';\n@@ -95,59 +91,18 @@ interface BackEndProps {\n   updateSolutionFormValues: () => void;\n }\n \n-// Component\n-class BackEnd extends Component<BackEndProps> {\n-  static displayName: string;\n-  private container: React.RefObject<HTMLElement> = React.createRef();\n-\n-  constructor(props: BackEndProps) {\n-    super(props);\n-    this.state = {};\n-    this.updateDimensions = this.updateDimensions.bind(this);\n-    this.handleSubmit = this.handleSubmit.bind(this);\n-  }\n-\n-  componentDidMount() {\n-    this.initializeComponent();\n-    window.addEventListener('resize', () => this.updateDimensions());\n-    this.container.current?.focus();\n-  }\n-\n-  updateDimensions() {\n-    this.setState({ width: window.innerWidth, height: window.innerHeight });\n-  }\n-\n-  componentWillUnmount() {\n-    window.removeEventListener('resize', () => this.updateDimensions());\n-  }\n+const ShowBackEnd = (props: BackEndProps) => {\n+  const container = useRef<HTMLElement>(null);\n \n-  componentDidUpdate(prevProps: BackEndProps) {\n-    const {\n-      data: {\n-        challengeNode: {\n-          challenge: {\n-            title: prevTitle,\n-            fields: { tests: prevTests }\n-          }\n-        }\n-      }\n-    } = prevProps;\n-    const {\n-      data: {\n-        challengeNode: {\n-          challenge: {\n-            title: currentTitle,\n-            fields: { tests: currTests }\n-          }\n-        }\n-      }\n-    } = this.props;\n-    if (prevTitle !== currentTitle || prevTests !== currTests) {\n-      this.initializeComponent();\n-    }\n-  }\n+  const handleSubmit = ({\n+    showCompletionModal\n+  }: {\n+    showCompletionModal: boolean;\n+  }) => {\n+    props.executeChallenge({ showCompletionModal });\n+  };\n \n-  initializeComponent() {\n+  useEffect(() => {\n     const {\n       challengeMounted,\n       initConsole,\n@@ -164,7 +119,7 @@ class BackEnd extends Component<BackEndProps> {\n         }\n       },\n       pageContext: { challengeMeta }\n-    } = this.props;\n+    } = props;\n     initConsole();\n     initTests(tests);\n     updateChallengeMeta({\n@@ -174,112 +129,99 @@ class BackEnd extends Component<BackEndProps> {\n       helpCategory\n     });\n     challengeMounted(challengeMeta.id);\n-  }\n-\n-  handleSubmit({\n-    showCompletionModal\n-  }: {\n-    showCompletionModal: boolean;\n-  }): void {\n-    this.props.executeChallenge({\n-      showCompletionModal\n-    });\n-  }\n-\n-  render() {\n-    const {\n-      data: {\n-        challengeNode: {\n-          challenge: {\n-            fields: { blockName },\n-            challengeType,\n-            forumTopicId,\n-            title,\n-            description,\n-            instructions,\n-            translationPending,\n-            superBlock,\n-            block\n-          }\n+    container.current?.focus();\n+    // eslint-disable-next-line react-hooks/exhaustive-deps\n+  }, []);\n+\n+  const {\n+    data: {\n+      challengeNode: {\n+        challenge: {\n+          fields: { blockName },\n+          challengeType,\n+          forumTopicId,\n+          title,\n+          description,\n+          instructions,\n+          translationPending,\n+          superBlock,\n+          block\n         }\n-      },\n-      isChallengeCompleted,\n-      output,\n-      pageContext: {\n-        challengeMeta: { nextChallengePath, prevChallengePath }\n-      },\n-      t,\n-      tests,\n-      updateSolutionFormValues\n-    } = this.props;\n-\n-    const blockNameTitle = `${t(\n-      `intro:${superBlock}.blocks.${block}.title`\n-    )} - ${title}`;\n-\n-    return (\n-      <Hotkeys\n-        containerRef={this.container}\n-        nextChallengePath={nextChallengePath}\n-        prevChallengePath={prevChallengePath}\n-      >\n-        <LearnLayout>\n-          <Helmet\n-            title={`${blockNameTitle} | ${t('learn.learn')} | freeCodeCamp.org`}\n-          />\n-          <Container>\n-            <Row>\n-              <Col md={8} mdOffset={2} sm={10} smOffset={1} xs={12}>\n-                <Spacer size='m' />\n-                <ChallengeTitle\n-                  isCompleted={isChallengeCompleted}\n-                  translationPending={translationPending}\n-                >\n-                  {title}\n-                </ChallengeTitle>\n-                <ChallengeDescription\n-                  description={description}\n-                  instructions={instructions}\n-                />\n-                <Spacer size='m' />\n-                <SolutionForm\n-                  challengeType={challengeType}\n-                  // eslint-disable-next-line @typescript-eslint/unbound-method\n-                  onSubmit={this.handleSubmit}\n-                  updateSolutionForm={updateSolutionFormValues}\n-                />\n-                <ProjectToolPanel\n-                  guideUrl={getGuideUrl({ forumTopicId, title })}\n-                />\n-                <br />\n-                <Output\n-                  defaultOutput={`/**\n+      }\n+    },\n+    isChallengeCompleted,\n+    output,\n+    pageContext: {\n+      challengeMeta: { nextChallengePath, prevChallengePath }\n+    },\n+    t,\n+    tests,\n+    updateSolutionFormValues\n+  } = props;\n+\n+  const blockNameTitle = `${t(\n+    `intro:${superBlock}.blocks.${block}.title`\n+  )} - ${title}`;\n+\n+  return (\n+    <Hotkeys\n+      containerRef={container}\n+      nextChallengePath={nextChallengePath}\n+      prevChallengePath={prevChallengePath}\n+    >\n+      <LearnLayout>\n+        <Helmet\n+          title={`${blockNameTitle} | ${t('learn.learn')} | freeCodeCamp.org`}\n+        />\n+        <Container>\n+          <Row>\n+            <Col md={8} mdOffset={2} sm={10} smOffset={1} xs={12}>\n+              <Spacer size='m' />\n+              <ChallengeTitle\n+                isCompleted={isChallengeCompleted}\n+                translationPending={translationPending}\n+              >\n+                {title}\n+              </ChallengeTitle>\n+              <ChallengeDescription\n+                description={description}\n+                instructions={instructions}\n+              />\n+              <Spacer size='m' />\n+              <SolutionForm\n+                challengeType={challengeType}\n+                onSubmit={handleSubmit}\n+                updateSolutionForm={updateSolutionFormValues}\n+              />\n+              <ProjectToolPanel\n+                guideUrl={getGuideUrl({ forumTopicId, title })}\n+              />\n+              <br />\n+              <Output\n+                defaultOutput={`/**\n *\n * ${t('learn.test-output')}\n *\n *\n */`}\n-                  output={output}\n-                />\n-                <TestSuite tests={tests} />\n-                <Spacer size='m' />\n-              </Col>\n-              <CompletionModal />\n-              <HelpModal challengeTitle={title} challengeBlock={blockName} />\n-            </Row>\n-          </Container>\n-        </LearnLayout>\n-      </Hotkeys>\n-    );\n-  }\n-}\n-\n-BackEnd.displayName = 'BackEnd';\n+                output={output}\n+              />\n+              <TestSuite tests={tests} />\n+              <Spacer size='m' />\n+            </Col>\n+            <CompletionModal />\n+            <HelpModal challengeTitle={title} challengeBlock={blockName} />\n+          </Row>\n+        </Container>\n+      </LearnLayout>\n+    </Hotkeys>\n+  );\n+};\n \n export default connect(\n   mapStateToProps,\n   mapDispatchToActions\n-)(withTranslation()(BackEnd));\n+)(withTranslation()(ShowBackEnd));\n \n export const query = graphql`\n   query BackendChallenge($id: String!) {"
        }
    ],
    "stats": {
        "total": 248,
        "additions": 95,
        "deletions": 153
    }
}