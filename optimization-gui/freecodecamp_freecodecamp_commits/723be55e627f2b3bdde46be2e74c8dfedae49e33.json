{
    "author": "huyenltnguyen",
    "message": "fix(a11y): add editor name to editor aria-label (#60529)",
    "sha": "723be55e627f2b3bdde46be2e74c8dfedae49e33",
    "files": [
        {
            "sha": "0f891d0e4150a3d18c85713bda9363867bc7ec2c",
            "filename": "client/i18n/locales/english/translations.json",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/723be55e627f2b3bdde46be2e74c8dfedae49e33/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/723be55e627f2b3bdde46be2e74c8dfedae49e33/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json?ref=723be55e627f2b3bdde46be2e74c8dfedae49e33",
            "patch": "@@ -858,6 +858,10 @@\n     \"rsa-checkbox\": \"I have tried the Read-Search-Ask method\",\n     \"similar-questions-checkbox\": \"I have searched for similar questions that have already been answered on the forum\",\n     \"edit-my-profile\": \"Edit my profile\",\n+    \"editor-a11y-off-macos\": \"{{editorName}} editor content. Press Option+F1 for accessibility options.\",\n+    \"editor-a11y-off-non-macos\": \"{{editorName}} editor content. Press Alt+F1 for accessibility options.\",\n+    \"editor-a11y-on-macos\": \"{{editorName}} editor content. Accessibility mode set to 'on'. Press Command+E to disable or press Option+F1 for more options.\",\n+    \"editor-a11y-on-non-macos\": \"{{editorName}} editor content. Accessibility mode set to 'on'. Press Ctrl+E to disable or press Alt+F1 for more options.\",\n     \"terminal-output\": \"Terminal output\"\n   },\n   \"flash\": {"
        },
        {
            "sha": "30852a9a667618a54db6c454130d94ee7430b02e",
            "filename": "client/src/templates/Challenges/classic/editor.tsx",
            "status": "modified",
            "additions": 30,
            "deletions": 9,
            "changes": 39,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/723be55e627f2b3bdde46be2e74c8dfedae49e33/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Feditor.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/723be55e627f2b3bdde46be2e74c8dfedae49e33/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Feditor.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Feditor.tsx?ref=723be55e627f2b3bdde46be2e74c8dfedae49e33",
            "patch": "@@ -239,7 +239,14 @@ const initialData: EditorProperties = {\n \n const Editor = (props: EditorProps): JSX.Element => {\n   const { t } = useTranslation();\n-  const { editorRef, initTests, resetAttempts, isMobileLayout } = props;\n+  const {\n+    editorRef,\n+    initTests,\n+    resetAttempts,\n+    isMobileLayout,\n+    challengeFiles,\n+    fileKey\n+  } = props;\n   // These refs are used during initialisation of the editor as well as by\n   // callbacks.  Since they have to be initialised before editorWillMount and\n   // editorDidMount are called, we cannot use useState.  Reason being that will\n@@ -275,6 +282,12 @@ const Editor = (props: EditorProps): JSX.Element => {\n   const attemptsRef = useRef<number>(0);\n   attemptsRef.current = props.attempts;\n \n+  const challengeFile = challengeFiles?.find(\n+    challengeFile => challengeFile.fileKey === fileKey\n+  );\n+\n+  const ariaEditorName = `${challengeFile?.name}.${challengeFile?.ext}`;\n+\n   const options: editor.IStandaloneEditorConstructionOptions = {\n     fontSize: 18,\n     fontFamily: 'Hack-ZeroSlash, monospace',\n@@ -335,7 +348,7 @@ const Editor = (props: EditorProps): JSX.Element => {\n   };\n \n   const editorWillMount = (monaco: typeof monacoEditor) => {\n-    const { challengeFiles, fileKey, usesMultifileEditor } = props;\n+    const { usesMultifileEditor } = props;\n \n     monacoRef.current = monaco;\n     defineMonacoThemes(monaco, { usesMultifileEditor });\n@@ -344,9 +357,6 @@ const Editor = (props: EditorProps): JSX.Element => {\n     // swap and reuse models, we have to create our own models to prevent\n     // disposal.\n \n-    const challengeFile = challengeFiles?.find(\n-      challengeFile => challengeFile.fileKey === fileKey\n-    );\n     const model =\n       dataRef.current.model ||\n       monaco.editor.createModel(\n@@ -414,15 +424,26 @@ const Editor = (props: EditorProps): JSX.Element => {\n \n     const storedAccessibilityMode = () => {\n       const accessibility = store.get('accessibilityMode') as boolean;\n+\n+      const isMacOS = navigator.userAgent.includes('Mac OS');\n+      const a11yOffText = isMacOS\n+        ? t('aria.editor-a11y-off-macos', { editorName: ariaEditorName })\n+        : t('aria.editor-a11y-off-non-macos', { editorName: ariaEditorName });\n+      const a11yOnText = isMacOS\n+        ? t('aria.editor-a11y-on-macos', { editorName: ariaEditorName })\n+        : t('aria.editor-a11y-on-non-macos', { editorName: ariaEditorName });\n+\n       if (!accessibility) {\n         store.set('accessibilityMode', false);\n+\n+        editor.updateOptions({\n+          ariaLabel: a11yOffText\n+        });\n       }\n-      // Only able to set the arialabel when accessibility mode is set to true\n-      // Otherwise it gets overwritten by the monaco default aria-label\n+\n       if (accessibility) {\n         editor.updateOptions({\n-          ariaLabel:\n-            'Accessibility mode set to true. Press Ctrl+e to disable or press Alt+F1 for more options'\n+          ariaLabel: a11yOnText\n         });\n       }\n "
        },
        {
            "sha": "749840a7e40ab50ff732ecf7dc07bb0ac53ded45",
            "filename": "e2e/utils/editor.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/723be55e627f2b3bdde46be2e74c8dfedae49e33/e2e%2Futils%2Feditor.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/723be55e627f2b3bdde46be2e74c8dfedae49e33/e2e%2Futils%2Feditor.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Futils%2Feditor.ts?ref=723be55e627f2b3bdde46be2e74c8dfedae49e33",
            "patch": "@@ -1,9 +1,7 @@\n import { type Page } from '@playwright/test';\n \n export const getEditors = (page: Page) => {\n-  return page.getByLabel(\n-    'Editor content;Press Alt+F1 for Accessibility Options'\n-  );\n+  return page.getByRole('textbox', { name: /editor content/i });\n };\n \n export const focusEditor = async ({"
        }
    ],
    "stats": {
        "total": 47,
        "additions": 35,
        "deletions": 12
    }
}