{
    "author": "ojeytonwilliams",
    "message": "fix(api): relax cookie settings in development (#55351)\n\nCo-authored-by: Naomi the Technomancer <accounts+github@nhcarrigan.com>",
    "sha": "766e982040af94f030434432d08b887a04aa8029",
    "files": [
        {
            "sha": "f2672838392dbf0b03c1241e953dbd73eecccbca",
            "filename": "api/src/plugins/cookies.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/766e982040af94f030434432d08b887a04aa8029/api%2Fsrc%2Fplugins%2Fcookies.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/766e982040af94f030434432d08b887a04aa8029/api%2Fsrc%2Fplugins%2Fcookies.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fplugins%2Fcookies.test.ts?ref=766e982040af94f030434432d08b887a04aa8029",
            "patch": "@@ -7,7 +7,8 @@ import cookies from './cookies';\n // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n jest.mock('../utils/env', () => ({\n   ...jest.requireActual('../utils/env'),\n-  COOKIE_DOMAIN: 'www.example.com'\n+  COOKIE_DOMAIN: 'www.example.com',\n+  FREECODECAMP_NODE_ENV: 'not-development'\n }));\n \n describe('cookies', () => {"
        },
        {
            "sha": "795b2b683f11cabbaf7345fd2d7cef2898144611",
            "filename": "api/src/plugins/cookies.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/766e982040af94f030434432d08b887a04aa8029/api%2Fsrc%2Fplugins%2Fcookies.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/766e982040af94f030434432d08b887a04aa8029/api%2Fsrc%2Fplugins%2Fcookies.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fplugins%2Fcookies.ts?ref=766e982040af94f030434432d08b887a04aa8029",
            "patch": "@@ -2,7 +2,11 @@ import fastifyCookie from '@fastify/cookie';\n import { FastifyPluginCallback } from 'fastify';\n import fp from 'fastify-plugin';\n \n-import { COOKIE_DOMAIN, COOKIE_SECRET } from '../utils/env';\n+import {\n+  COOKIE_DOMAIN,\n+  COOKIE_SECRET,\n+  FREECODECAMP_NODE_ENV\n+} from '../utils/env';\n \n /**\n  * Signs a cookie value by prefixing it with \"s:\" and using the COOKIE_SECRET.\n@@ -44,12 +48,12 @@ const cookies: FastifyPluginCallback = (fastify, _options, done) => {\n     },\n     parseOptions: {\n       domain: COOKIE_DOMAIN,\n-      httpOnly: true,\n+      httpOnly: FREECODECAMP_NODE_ENV !== 'development',\n       // Path is necessary to ensure that only one cookie is set and it is valid\n       // for all routes.\n       path: '/',\n       sameSite: 'lax',\n-      secure: true,\n+      secure: FREECODECAMP_NODE_ENV !== 'development',\n       signed: true\n     }\n   });"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 9,
        "deletions": 4
    }
}