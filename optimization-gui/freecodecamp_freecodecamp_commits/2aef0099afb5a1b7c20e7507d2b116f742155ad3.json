{
    "author": "raisedadead",
    "message": "revert: clean up dockerfiles (#60996)",
    "sha": "2aef0099afb5a1b7c20e7507d2b116f742155ad3",
    "files": [
        {
            "sha": "8f7abaa86cf05ca10d12e6337c6a4f0b1fed6eaf",
            "filename": "docker/api/Dockerfile",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2aef0099afb5a1b7c20e7507d2b116f742155ad3/docker%2Fapi%2FDockerfile",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2aef0099afb5a1b7c20e7507d2b116f742155ad3/docker%2Fapi%2FDockerfile",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/docker%2Fapi%2FDockerfile?ref=2aef0099afb5a1b7c20e7507d2b116f742155ad3",
            "patch": "@@ -2,7 +2,7 @@ FROM node:22-bookworm AS builder\n RUN apt-get update && apt-get install -y jq\n # global installs need root permissions, so have to happen before we switch to\n # the node user\n-RUN corepack enable\n+RUN npm i -g pnpm@10\n # node images create a non-root user that we can use\n USER node\n WORKDIR /home/node/build\n@@ -41,7 +41,7 @@ COPY --chown=node:node pnpm*.yaml .\n COPY --chown=node:node package.json .\n COPY --chown=node:node api/ api/\n COPY --chown=node:node shared/ shared/\n-RUN corepack enable\n+RUN npm i -g pnpm@10\n \n # Weirdly this config does not seem necessary for the new api (the same number\n # of deps are installed in both cases), but I'm including it just for"
        },
        {
            "sha": "e2dfa794df727012f65e4d6ff5de3f3ec965ee64",
            "filename": "docker/web/Dockerfile",
            "status": "modified",
            "additions": 9,
            "deletions": 8,
            "changes": 17,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2aef0099afb5a1b7c20e7507d2b116f742155ad3/docker%2Fweb%2FDockerfile",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2aef0099afb5a1b7c20e7507d2b116f742155ad3/docker%2Fweb%2FDockerfile",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/docker%2Fweb%2FDockerfile?ref=2aef0099afb5a1b7c20e7507d2b116f742155ad3",
            "patch": "@@ -1,7 +1,7 @@\n FROM node:22-bookworm AS builder\n # global installs need root permissions, so have to happen before we switch to\n # the node user\n-RUN corepack enable\n+RUN npm i -g pnpm@10\n # node images create a non-root user that we can use\n USER node\n WORKDIR /home/node/build\n@@ -13,20 +13,21 @@ COPY --chown=node:node tools/ tools/\n COPY --chown=node:node curriculum/ curriculum/\n \n ARG HOME_LOCATION\n+ARG API_LOCATION\n+ARG FORUM_LOCATION\n ARG NEWS_LOCATION\n+ARG RADIO_LOCATION\n ARG CLIENT_LOCALE\n ARG CURRICULUM_LOCALE\n-ARG API_LOCATION\n-ARG ALGOLIA_API_KEY\n ARG ALGOLIA_APP_ID\n-ARG GROWTHBOOK_URI\n-ARG FORUM_LOCATION\n-ARG PATREON_CLIENT_ID\n-ARG PAYPAL_CLIENT_ID\n+ARG ALGOLIA_API_KEY\n ARG STRIPE_PUBLIC_KEY\n+ARG PAYPAL_CLIENT_ID\n+ARG PATREON_CLIENT_ID\n+ARG DEPLOYMENT_ENV\n ARG SHOW_UPCOMING_CHANGES\n+ARG GROWTHBOOK_URI\n ARG FREECODECAMP_NODE_ENV\n-ARG DEPLOYMENT_ENV\n \n # For simplicity and because node_modules do not make it into the final image,\n # we can just install all dependencies here."
        }
    ],
    "stats": {
        "total": 21,
        "additions": 11,
        "deletions": 10
    }
}