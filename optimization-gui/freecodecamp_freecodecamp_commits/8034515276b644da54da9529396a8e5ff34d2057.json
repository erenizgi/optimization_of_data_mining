{
    "author": "Sembauke",
    "message": "fix(client): add better navigation for navigating back to blocks (#64027)\n\nCo-authored-by: Huyen Nguyen <25715018+huyenltnguyen@users.noreply.github.com>",
    "sha": "8034515276b644da54da9529396a8e5ff34d2057",
    "files": [
        {
            "sha": "f20ea09764762fb3bd0e95261071252e558b28e8",
            "filename": "client/src/templates/Introduction/components/block-header.test.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/8034515276b644da54da9529396a8e5ff34d2057/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock-header.test.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/8034515276b644da54da9529396a8e5ff34d2057/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock-header.test.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock-header.test.tsx?ref=8034515276b644da54da9529396a8e5ff34d2057",
            "patch": "@@ -34,6 +34,7 @@ describe('<BlockHeader />', () => {\n         {...defaultProps}\n         accordion={true}\n         blockUrl='/learn/test-block'\n+        onLinkClick={() => {}}\n       />\n     );\n "
        },
        {
            "sha": "581e105b974c95ac1b298a7724554a9b2e0200ba",
            "filename": "client/src/templates/Introduction/components/block-header.tsx",
            "status": "modified",
            "additions": 15,
            "deletions": 4,
            "changes": 19,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/8034515276b644da54da9529396a8e5ff34d2057/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock-header.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/8034515276b644da54da9529396a8e5ff34d2057/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock-header.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock-header.tsx?ref=8034515276b644da54da9529396a8e5ff34d2057",
            "patch": "@@ -10,7 +10,7 @@ import CheckMark from './check-mark';\n import BlockLabel from './block-label';\n import BlockIntros from './block-intros';\n \n-interface BlockHeaderProps {\n+interface BaseBlockHeaderProps {\n   blockDashed: string;\n   blockTitle: string;\n   blockLabel: BlockLabelType | null;\n@@ -22,9 +22,19 @@ interface BlockHeaderProps {\n   percentageCompleted: number;\n   blockIntroArr?: string[];\n   accordion?: boolean;\n-  blockUrl?: string;\n }\n \n+interface BlockHeaderButtonProps extends BaseBlockHeaderProps {\n+  blockUrl?: never;\n+  onLinkClick?: never;\n+}\n+\n+interface BlockHeaderLinkProps extends BaseBlockHeaderProps {\n+  blockUrl: string;\n+  onLinkClick: () => void;\n+}\n+\n+type BlockHeaderProps = BlockHeaderButtonProps | BlockHeaderLinkProps;\n function BlockHeader({\n   blockDashed,\n   blockTitle,\n@@ -37,7 +47,8 @@ function BlockHeader({\n   percentageCompleted,\n   blockIntroArr,\n   accordion,\n-  blockUrl\n+  blockUrl,\n+  onLinkClick\n }: BlockHeaderProps): JSX.Element {\n   const InnerBlockHeader = () => (\n     <>\n@@ -68,7 +79,7 @@ function BlockHeader({\n     <>\n       <h3 className='block-grid-title'>\n         {accordion && blockUrl ? (\n-          <Link className='block-header' to={blockUrl}>\n+          <Link className='block-header' to={blockUrl} onClick={onLinkClick}>\n             <InnerBlockHeader />\n           </Link>\n         ) : ("
        },
        {
            "sha": "053361b371c58aa5ea7e3feaff1f013762b6f42a",
            "filename": "client/src/templates/Introduction/components/block.tsx",
            "status": "modified",
            "additions": 30,
            "deletions": 38,
            "changes": 68,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/8034515276b644da54da9529396a8e5ff34d2057/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/8034515276b644da54da9529396a8e5ff34d2057/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock.tsx?ref=8034515276b644da54da9529396a8e5ff34d2057",
            "patch": "@@ -82,7 +82,7 @@ export class Block extends Component<BlockProps> {\n     super(props);\n \n     this.handleBlockClick = this.handleBlockClick.bind(this);\n-    this.handleBlockHover = this.handleBlockHover.bind(this);\n+    this.handleChallengeClick = this.handleChallengeClick.bind(this);\n   }\n \n   handleBlockClick = (): void => {\n@@ -91,13 +91,8 @@ export class Block extends Component<BlockProps> {\n     toggleBlock(block);\n   };\n \n-  /*\n-   * This function handles the block hover event.\n-   * It also updates the URL hash to reflect the current block.\n-   */\n-  handleBlockHover = (): void => {\n+  handleChallengeClick = (): void => {\n     const { block } = this.props;\n-    // Convert block to dashed format\n     const dashedBlock = block\n       .toLowerCase()\n       .replace(/\\s+/g, '-')\n@@ -181,11 +176,7 @@ export class Block extends Component<BlockProps> {\n      */\n     const LegacyChallengeListBlock = (\n       <Element name={block}>\n-        <div\n-          className={`block ${isExpanded ? 'open' : ''}`}\n-          onMouseOver={this.handleBlockHover}\n-          onFocus={this.handleBlockHover}\n-        >\n+        <div className={`block ${isExpanded ? 'open' : ''}`}>\n           <div className='block-header'>\n             <h3 className='big-block-title'>{blockTitle}</h3>\n             {blockLabel && <BlockLabel blockLabel={blockLabel} />}\n@@ -224,7 +215,12 @@ export class Block extends Component<BlockProps> {\n               </span>\n             </div>\n           </button>\n-          {isExpanded && <ChallengesList challenges={extendedChallenges} />}\n+          {isExpanded && (\n+            <ChallengesList\n+              challenges={extendedChallenges}\n+              onChallengeClick={this.handleChallengeClick}\n+            />\n+          )}\n         </div>\n       </Element>\n     );\n@@ -236,11 +232,7 @@ export class Block extends Component<BlockProps> {\n      */\n     const ProjectListBlock = (\n       <Element name={block}>\n-        <div\n-          className='block'\n-          onMouseOver={this.handleBlockHover}\n-          onFocus={this.handleBlockHover}\n-        >\n+        <div className='block'>\n           <div className='block-header'>\n             <h3 className='big-block-title'>{blockTitle}</h3>\n             {blockLabel && <BlockLabel blockLabel={blockLabel} />}\n@@ -255,7 +247,10 @@ export class Block extends Component<BlockProps> {\n               </div>\n             )}\n           </div>\n-          <ChallengesList challenges={extendedChallenges} />\n+          <ChallengesList\n+            challenges={extendedChallenges}\n+            onChallengeClick={this.handleChallengeClick}\n+          />\n         </div>\n       </Element>\n     );\n@@ -267,11 +262,7 @@ export class Block extends Component<BlockProps> {\n      */\n     const LegacyChallengeGridBlock = (\n       <Element name={block}>\n-        <div\n-          className={`block block-grid ${isExpanded ? 'open' : ''}`}\n-          onMouseOver={this.handleBlockHover}\n-          onFocus={this.handleBlockHover}\n-        >\n+        <div className={`block block-grid ${isExpanded ? 'open' : ''}`}>\n           <BlockHeader\n             blockDashed={block}\n             blockTitle={blockTitle}\n@@ -305,6 +296,7 @@ export class Block extends Component<BlockProps> {\n                   challenges={extendedChallenges}\n                   isProjectBlock={isProjectBlock}\n                   blockTitle={blockTitle}\n+                  onChallengeClick={this.handleChallengeClick}\n                 />\n               </div>\n             </>\n@@ -353,6 +345,7 @@ export class Block extends Component<BlockProps> {\n                   challenges={extendedChallenges}\n                   blockTitle={blockTitle}\n                   jumpLink={!accordion}\n+                  onChallengeClick={this.handleChallengeClick}\n                 />\n               </div>\n             </>\n@@ -368,11 +361,7 @@ export class Block extends Component<BlockProps> {\n      */\n     const LegacyLinkBlock = (\n       <Element name={block}>\n-        <div\n-          className='block block-grid grid-project-block'\n-          onMouseOver={this.handleBlockHover}\n-          onFocus={this.handleBlockHover}\n-        >\n+        <div className='block block-grid grid-project-block'>\n           <div className='tags-wrapper'>\n             <span className='cert-tag' aria-hidden='true'>\n               {t('misc.certification-project')}\n@@ -394,9 +383,7 @@ export class Block extends Component<BlockProps> {\n             <h3 className='block-grid-title'>\n               <Link\n                 className='block-header'\n-                onClick={() => {\n-                  this.handleBlockClick();\n-                }}\n+                onClick={this.handleChallengeClick}\n                 to={link}\n               >\n                 <CheckMark isCompleted={isBlockCompleted} />\n@@ -423,8 +410,6 @@ export class Block extends Component<BlockProps> {\n         </Element>\n         <div\n           className={`block block-grid block-grid-no-border challenge-grid-block ${isExpanded ? 'open' : ''}`}\n-          onMouseOver={this.handleBlockHover}\n-          onFocus={this.handleBlockHover}\n         >\n           <BlockHeader\n             blockDashed={block}\n@@ -461,9 +446,13 @@ export class Block extends Component<BlockProps> {\n                     blockTitle={blockTitle}\n                     isProjectBlock={isProjectBlock}\n                     jumpLink={false}\n+                    onChallengeClick={this.handleChallengeClick}\n                   />\n                 ) : (\n-                  <ChallengesList challenges={extendedChallenges} />\n+                  <ChallengesList\n+                    challenges={extendedChallenges}\n+                    onChallengeClick={this.handleChallengeClick}\n+                  />\n                 )}\n               </div>\n             </div>\n@@ -477,8 +466,6 @@ export class Block extends Component<BlockProps> {\n         </Element>\n         <div\n           className={`block block-grid challenge-grid-block ${isExpanded ? 'open' : ''}`}\n-          onMouseOver={this.handleBlockHover}\n-          onFocus={this.handleBlockHover}\n         >\n           <BlockHeader\n             blockDashed={block}\n@@ -516,9 +503,13 @@ export class Block extends Component<BlockProps> {\n                     challenges={extendedChallenges}\n                     blockTitle={blockTitle}\n                     isProjectBlock={isProjectBlock}\n+                    onChallengeClick={this.handleChallengeClick}\n                   />\n                 ) : (\n-                  <ChallengesList challenges={extendedChallenges} />\n+                  <ChallengesList\n+                    challenges={extendedChallenges}\n+                    onChallengeClick={this.handleChallengeClick}\n+                  />\n                 )}\n               </div>\n             </div>\n@@ -539,6 +530,7 @@ export class Block extends Component<BlockProps> {\n           completedCount={completedCount}\n           courseCompletionStatus={courseCompletionStatus()}\n           handleClick={this.handleBlockClick}\n+          onLinkClick={this.handleChallengeClick}\n           isCompleted={isBlockCompleted}\n           isExpanded={isExpanded}\n           percentageCompleted={percentageCompleted}"
        },
        {
            "sha": "83a416aa41dca3f054402c852ec8545a0fd0e8ba",
            "filename": "client/src/templates/Introduction/components/challenges.tsx",
            "status": "modified",
            "additions": 77,
            "deletions": 29,
            "changes": 106,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/8034515276b644da54da9529396a8e5ff34d2057/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fchallenges.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/8034515276b644da54da9529396a8e5ff34d2057/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fchallenges.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fchallenges.tsx?ref=8034515276b644da54da9529396a8e5ff34d2057",
            "patch": "@@ -20,6 +20,7 @@ interface ChallengeInfo {\n \n interface ChallengesProps {\n   challenges: ChallengeInfo[];\n+  onChallengeClick: () => void;\n }\n \n interface JumpLinkProps {\n@@ -37,25 +38,44 @@ interface IsProjectBlockProps {\n const CheckMark = ({ isCompleted }: { isCompleted: boolean }) =>\n   isCompleted ? <GreenPass /> : <GreenNotCompleted />;\n \n-const ListChallenge = ({ challenge }: { challenge: ChallengeInfo }) => (\n-  <Link to={challenge.fields.slug}>\n-    <span>\n-      <CheckMark isCompleted={challenge.isCompleted} />\n-    </span>\n-    {challenge.title}\n-  </Link>\n-);\n-\n-const CertChallenge = ({ challenge }: { challenge: ChallengeInfo }) => (\n-  <Link to={challenge.fields.slug}>\n-    {challenge.title}\n-    <span className='map-project-checkmark'>\n-      <CheckMark isCompleted={challenge.isCompleted} />\n-    </span>\n-  </Link>\n-);\n-\n-export function ChallengesList({ challenges }: ChallengesProps): JSX.Element {\n+const ListChallenge = ({\n+  challenge,\n+  onChallengeClick\n+}: {\n+  challenge: ChallengeInfo;\n+  onChallengeClick: () => void;\n+}) => {\n+  return (\n+    <Link to={challenge.fields.slug} onClick={onChallengeClick}>\n+      <span>\n+        <CheckMark isCompleted={challenge.isCompleted} />\n+      </span>\n+      {challenge.title}\n+    </Link>\n+  );\n+};\n+\n+const CertChallenge = ({\n+  challenge,\n+  onChallengeClick\n+}: {\n+  challenge: ChallengeInfo;\n+  onChallengeClick: () => void;\n+}) => {\n+  return (\n+    <Link to={challenge.fields.slug} onClick={onChallengeClick}>\n+      {challenge.title}\n+      <span className='map-project-checkmark'>\n+        <CheckMark isCompleted={challenge.isCompleted} />\n+      </span>\n+    </Link>\n+  );\n+};\n+\n+export function ChallengesList({\n+  challenges,\n+  onChallengeClick\n+}: ChallengesProps): JSX.Element {\n   return (\n     <ul className={`map-challenges-ul`}>\n       {challenges.map(challenge => (\n@@ -64,7 +84,10 @@ export function ChallengesList({ challenges }: ChallengesProps): JSX.Element {\n           id={challenge.dashedName}\n           key={'map-challenge' + challenge.fields.slug}\n         >\n-          <ListChallenge challenge={challenge} />\n+          <ListChallenge\n+            challenge={challenge}\n+            onChallengeClick={onChallengeClick}\n+          />\n         </li>\n       ))}\n     </ul>\n@@ -73,16 +96,19 @@ export function ChallengesList({ challenges }: ChallengesProps): JSX.Element {\n // Step or Task challenge\n const GridChallenge = ({\n   challenge,\n-  isTask = false\n+  isTask = false,\n+  onChallengeClick\n }: {\n   challenge: ChallengeInfo;\n   isTask?: boolean;\n+  onChallengeClick: () => void;\n }) => {\n   const { t } = useTranslation();\n \n   return (\n     <Link\n       to={challenge.fields.slug}\n+      onClick={onChallengeClick}\n       className={`map-grid-item ${\n         challenge.isCompleted ? 'challenge-completed' : ''\n       }`}\n@@ -100,7 +126,8 @@ const GridChallenge = ({\n \n const LinkToFirstIncompleteChallenge = ({\n   challenges,\n-  blockTitle\n+  blockTitle,\n+  onChallengeClick\n }: ChallengesProps & BlockTitleProps) => {\n   const { t } = useTranslation();\n \n@@ -113,7 +140,11 @@ const LinkToFirstIncompleteChallenge = ({\n   );\n   return firstIncompleteChallenge ? (\n     <div className='challenge-jump-link'>\n-      <ButtonLink size='small' href={firstIncompleteChallenge.fields.slug}>\n+      <ButtonLink\n+        size='small'\n+        href={firstIncompleteChallenge.fields.slug}\n+        onClick={onChallengeClick}\n+      >\n         {!isChallengeStarted\n           ? t('buttons.start-project')\n           : t('buttons.resume-project')}{' '}\n@@ -127,7 +158,8 @@ export const GridMapChallenges = ({\n   challenges,\n   blockTitle,\n   isProjectBlock,\n-  jumpLink\n+  jumpLink,\n+  onChallengeClick\n }: ChallengesProps & BlockTitleProps & IsProjectBlockProps & JumpLinkProps) => {\n   const { t } = useTranslation();\n   return (\n@@ -136,6 +168,7 @@ export const GridMapChallenges = ({\n         <LinkToFirstIncompleteChallenge\n           challenges={challenges}\n           blockTitle={blockTitle}\n+          onChallengeClick={onChallengeClick}\n         />\n       )}\n       <nav aria-label={t('aria.steps-for', { blockTitle })}>\n@@ -153,9 +186,15 @@ export const GridMapChallenges = ({\n               key={`map-challenge ${challenge.fields.slug}`}\n             >\n               {!isProjectBlock ? (\n-                <GridChallenge challenge={challenge} />\n+                <GridChallenge\n+                  challenge={challenge}\n+                  onChallengeClick={onChallengeClick}\n+                />\n               ) : (\n-                <CertChallenge challenge={challenge} />\n+                <CertChallenge\n+                  challenge={challenge}\n+                  onChallengeClick={onChallengeClick}\n+                />\n               )}\n             </li>\n           ))}\n@@ -168,7 +207,8 @@ export const GridMapChallenges = ({\n export const ChallengesWithDialogues = ({\n   challenges,\n   blockTitle,\n-  jumpLink\n+  jumpLink,\n+  onChallengeClick\n }: ChallengesProps & BlockTitleProps & JumpLinkProps) => {\n   const { t } = useTranslation();\n   return (\n@@ -177,6 +217,7 @@ export const ChallengesWithDialogues = ({\n         <LinkToFirstIncompleteChallenge\n           challenges={challenges}\n           blockTitle={blockTitle}\n+          onChallengeClick={onChallengeClick}\n         />\n       )}\n \n@@ -193,9 +234,16 @@ export const ChallengesWithDialogues = ({\n               key={`map-challenge ${challenge.fields.slug}`}\n             >\n               {challenge.challengeType === challengeTypes.dialogue ? (\n-                <ListChallenge challenge={challenge} />\n+                <ListChallenge\n+                  challenge={challenge}\n+                  onChallengeClick={onChallengeClick}\n+                />\n               ) : (\n-                <GridChallenge challenge={challenge} isTask />\n+                <GridChallenge\n+                  challenge={challenge}\n+                  isTask\n+                  onChallengeClick={onChallengeClick}\n+                />\n               )}\n             </li>\n           ))}"
        },
        {
            "sha": "40d7cff9b415a128c1cb2b7c4a104ea27fa6b503",
            "filename": "e2e/block-navigation.spec.ts",
            "status": "added",
            "additions": 92,
            "deletions": 0,
            "changes": 92,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/8034515276b644da54da9529396a8e5ff34d2057/e2e%2Fblock-navigation.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/8034515276b644da54da9529396a8e5ff34d2057/e2e%2Fblock-navigation.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fblock-navigation.spec.ts?ref=8034515276b644da54da9529396a8e5ff34d2057",
            "patch": "@@ -0,0 +1,92 @@\n+import { test, expect } from '@playwright/test';\n+\n+test.describe('Block Navigation - Hash Updates', () => {\n+  test.use({ storageState: { cookies: [], origins: [] } });\n+\n+  test('should update URL hash when clicking on a challenge link in a grid layout', async ({\n+    page\n+  }) => {\n+    await page.goto(\n+      '/learn/javascript-algorithms-and-data-structures-v8/#learn-introductory-javascript-by-building-a-pyramid-generator'\n+    );\n+\n+    // Verify the hash is set correctly\n+    await expect(page).toHaveURL(\n+      /#learn-introductory-javascript-by-building-a-pyramid-generator$/\n+    );\n+\n+    // Click on step 1 in the grid - the accessible name includes the sr-only text\n+    const step1Link = page.getByRole('link', { name: 'Step 1 Not Passed' });\n+    await expect(step1Link).toBeVisible();\n+    await step1Link.click();\n+\n+    // Wait for navigation\n+    await page.waitForURL(/step-1$/);\n+\n+    // Go back to verify the hash persists in history\n+    await page.goBack();\n+    await expect(page).toHaveURL(\n+      /#learn-introductory-javascript-by-building-a-pyramid-generator$/\n+    );\n+  });\n+\n+  test('should update URL hash when clicking on a certification project', async ({\n+    page\n+  }) => {\n+    await page.goto('/learn/javascript-algorithms-and-data-structures-v8');\n+\n+    // Click on the certification project link\n+    const projectLink = page.getByRole('link', {\n+      name: 'Build a Palindrome Checker Project Certification Project, Not completed'\n+    });\n+    await expect(projectLink).toBeVisible();\n+    await projectLink.click();\n+\n+    // Wait for navigation\n+    await page.waitForURL(/build-a-palindrome-checker$/);\n+\n+    // Go back to verify the hash persists in history\n+    await page.goBack();\n+    await expect(page).toHaveURL(/#build-a-palindrome-checker-project$/);\n+  });\n+\n+  test('should update URL hash when clicking on a challenge in accordion layout (v9)', async ({\n+    page\n+  }) => {\n+    await page.goto('/learn/javascript-v9');\n+\n+    await page.getByRole('button', { name: 'Build a Greeting Bot' }).click();\n+\n+    // Click on step 1 in the accordion\n+    const step1Link = page.getByRole('link', { name: 'Step 1 Not Passed' });\n+    await expect(step1Link).toBeVisible();\n+    await step1Link.click();\n+\n+    // Wait for navigation\n+    await page.waitForURL(/step-1$/);\n+\n+    // Go back to verify the hash persists in history\n+    await page.goBack();\n+    await expect(page).toHaveURL(/#workshop-greeting-bot$/);\n+  });\n+\n+  test('should update URL hash when clicking on a certification project in accordion layout (v9)', async ({\n+    page\n+  }) => {\n+    await page.goto('/learn/javascript-v9');\n+\n+    // Click on the certification project link\n+    const projectLink = page.getByRole('link', {\n+      name: 'Build a Markdown to HTML Converter'\n+    });\n+    await expect(projectLink).toBeVisible();\n+    await projectLink.click();\n+\n+    // Wait for navigation\n+    await page.waitForURL(/build-a-markdown-to-html-converter$/);\n+\n+    // Go back to verify the hash persists in history\n+    await page.goBack();\n+    await expect(page).toHaveURL(/#lab-markdown-to-html-converter$/);\n+  });\n+});"
        }
    ],
    "stats": {
        "total": 286,
        "additions": 215,
        "deletions": 71
    }
}