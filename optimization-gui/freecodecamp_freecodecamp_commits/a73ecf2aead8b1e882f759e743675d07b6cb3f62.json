{
    "author": "a2937",
    "message": "feat(ui): test indicator icon (#60049)\n\nCo-authored-by: Oliver Eyton-Williams <ojeytonwilliams@gmail.com>",
    "sha": "a73ecf2aead8b1e882f759e743675d07b6cb3f62",
    "files": [
        {
            "sha": "6eb6dc3f4d0b670a411d6caf5e8a706717fdf745",
            "filename": "client/src/templates/Challenges/components/test-suite.css",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a73ecf2aead8b1e882f759e743675d07b6cb3f62/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Ftest-suite.css",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a73ecf2aead8b1e882f759e743675d07b6cb3f62/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Ftest-suite.css",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Ftest-suite.css?ref=a73ecf2aead8b1e882f759e743675d07b6cb3f62",
            "patch": "@@ -11,6 +11,10 @@\n   text-align: center;\n }\n \n+.sk-spinner {\n+  color: var(--primary-color);\n+}\n+\n .challenge-test-suite code {\n   white-space: pre-wrap;\n   overflow-wrap: anywhere;"
        },
        {
            "sha": "f6b0075d6d44c88b3d9233e200d03fd922c271e8",
            "filename": "client/src/templates/Challenges/components/test-suite.tsx",
            "status": "modified",
            "additions": 33,
            "deletions": 30,
            "changes": 63,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a73ecf2aead8b1e882f759e743675d07b6cb3f62/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Ftest-suite.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a73ecf2aead8b1e882f759e743675d07b6cb3f62/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Ftest-suite.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Ftest-suite.tsx?ref=a73ecf2aead8b1e882f759e743675d07b6cb3f62",
            "patch": "@@ -1,6 +1,6 @@\n import React from 'react';\n import { useTranslation } from 'react-i18next';\n-\n+import Spinner from 'react-spinkit';\n import Fail from '../../../assets/icons/fail';\n import GreenPass from '../../../assets/icons/green-pass';\n import Initial from '../../../assets/icons/initial';\n@@ -10,6 +10,7 @@ import { ChallengeTest, Test } from '../../../redux/prop-types';\n type TestSuiteTest = {\n   err?: string;\n   pass?: boolean;\n+  running?: boolean;\n } & ChallengeTest;\n \n function isTestSuiteTest(test: Test): test is TestSuiteTest {\n@@ -23,45 +24,47 @@ interface TestSuiteProps {\n function TestSuite({ tests }: TestSuiteProps): JSX.Element {\n   const { t } = useTranslation();\n   const testSuiteTests = tests.filter(isTestSuiteTest);\n-\n   return (\n     <>\n       <h2 className='challenge-test-suite-heading'>\n         {t('learn.editor-tabs.tests')}\n       </h2>\n       <ul className='challenge-test-suite'>\n-        {testSuiteTests.map(({ err, pass = false, text = '' }, index) => {\n-          const isInitial = !pass && !err;\n-          const statusIcon =\n-            pass && !err ? (\n+        {testSuiteTests.map(\n+          ({ err, pass = false, text = '', running }, index) => {\n+            const isInitial = !pass && !err && !running;\n+            const statusIcon = running ? (\n+              <Spinner name='circle' fadeIn='none' />\n+            ) : pass && !err ? (\n               <GreenPass data-playwright-test-label='test-pass-icon' />\n             ) : (\n               <Fail />\n             );\n-          const initialText = t('icons.waiting');\n-          const statusText =\n-            pass && !err ? t('icons.passed') : t('icons.failed');\n-          // Remove opening/closing <p> so screen reader will read both\n-          // status message and test text as one block.\n-          text = `${index + 1}. ${text.replace(/^<p>|<\\/p>$/g, '')}`;\n-          return (\n-            <li\n-              className='test-result'\n-              data-playwright-test-label='test-result'\n-              key={text.slice(-6) + String(index)}\n-            >\n-              <div className='test-status-icon' aria-hidden='true'>\n-                {isInitial ? <Initial /> : statusIcon}\n-              </div>\n-              <div className='test-output'>\n-                <span className='sr-only'>\n-                  {isInitial ? initialText : statusText}:{' '}\n-                </span>\n-                <span dangerouslySetInnerHTML={{ __html: text }} />\n-              </div>\n-            </li>\n-          );\n-        })}\n+            const initialText = t('icons.waiting');\n+            const statusText =\n+              pass && !err ? t('icons.passed') : t('icons.failed');\n+            // Remove opening/closing <p> so screen reader will read both\n+            // status message and test text as one block.\n+            text = `${index + 1}. ${text.replace(/^<p>|<\\/p>$/g, '')}`;\n+            return (\n+              <li\n+                className='test-result'\n+                data-playwright-test-label='test-result'\n+                key={text.slice(-6) + String(index)}\n+              >\n+                <div className='test-status-icon' aria-hidden='true'>\n+                  {isInitial ? <Initial /> : statusIcon}\n+                </div>\n+                <div className='test-output'>\n+                  <span className='sr-only'>\n+                    {isInitial ? initialText : statusText}:{' '}\n+                  </span>\n+                  <span dangerouslySetInnerHTML={{ __html: text }} />\n+                </div>\n+              </li>\n+            );\n+          }\n+        )}\n       </ul>\n     </>\n   );"
        },
        {
            "sha": "9e74b00d910d9efec5ca25aef493c9016a7252fd",
            "filename": "client/src/templates/Challenges/redux/execute-challenge-saga.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a73ecf2aead8b1e882f759e743675d07b6cb3f62/client%2Fsrc%2Ftemplates%2FChallenges%2Fredux%2Fexecute-challenge-saga.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a73ecf2aead8b1e882f759e743675d07b6cb3f62/client%2Fsrc%2Ftemplates%2FChallenges%2Fredux%2Fexecute-challenge-saga.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fredux%2Fexecute-challenge-saga.js?ref=a73ecf2aead8b1e882f759e743675d07b6cb3f62",
            "patch": "@@ -109,7 +109,7 @@ export function* executeChallengeSaga({ payload }) {\n     yield put(initConsole(i18next.t('learn.running-tests')));\n     // reset tests to initial state\n     const tests = (yield select(challengeTestsSelector)).map(\n-      ({ text, testString }) => ({ text, testString })\n+      ({ text, testString }) => ({ text, testString, running: true })\n     );\n     const hooks = yield select(challengeHooksSelector);\n     yield put(updateTests(tests));\n@@ -198,7 +198,7 @@ function* executeTests(testRunner, tests, testTimeout = 5000) {\n   const testResults = [];\n   for (let i = 0; i < tests.length; i++) {\n     const { text, testString } = tests[i];\n-    const newTest = { text, testString };\n+    const newTest = { text, testString, running: false };\n     // only the last test outputs console.logs to avoid log duplication.\n     const firstTest = i === 1;\n     try {"
        }
    ],
    "stats": {
        "total": 71,
        "additions": 39,
        "deletions": 32
    }
}