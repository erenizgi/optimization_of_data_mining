{
    "author": "a2937",
    "message": "refactor: convert mstrophy show.tsx to function (#57392)\n\nCo-authored-by: Oliver Eyton-Williams <ojeytonwilliams@gmail.com>",
    "sha": "7f5ed21ab7748a3eff587a5c4cfeff5661c40469",
    "files": [
        {
            "sha": "bf7dfa7ede328f4e002f12717baf81950f40306d",
            "filename": "client/src/templates/Challenges/ms-trophy/show.tsx",
            "status": "modified",
            "additions": 96,
            "deletions": 128,
            "changes": 224,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/7f5ed21ab7748a3eff587a5c4cfeff5661c40469/client%2Fsrc%2Ftemplates%2FChallenges%2Fms-trophy%2Fshow.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/7f5ed21ab7748a3eff587a5c4cfeff5661c40469/client%2Fsrc%2Ftemplates%2FChallenges%2Fms-trophy%2Fshow.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fms-trophy%2Fshow.tsx?ref=7f5ed21ab7748a3eff587a5c4cfeff5661c40469",
            "patch": "@@ -1,5 +1,5 @@\n import { graphql } from 'gatsby';\n-import React, { Component } from 'react';\n+import React, { useEffect, useRef } from 'react';\n import Helmet from 'react-helmet';\n import type { TFunction } from 'i18next';\n import { withTranslation } from 'react-i18next';\n@@ -82,16 +82,16 @@ interface MsTrophyProps {\n   updateChallengeMeta: (arg0: ChallengeMeta) => void;\n }\n \n-// Component\n-class MsTrophy extends Component<MsTrophyProps> {\n-  static displayName: string;\n-  private container: React.RefObject<HTMLElement> = React.createRef();\n-\n-  constructor(props: MsTrophyProps) {\n-    super(props);\n-    this.handleSubmit = this.handleSubmit.bind(this);\n-  }\n-  componentDidMount() {\n+function MsTrophy(props: MsTrophyProps) {\n+  const container = useRef<HTMLElement>(null);\n+  const {\n+    data: {\n+      challengeNode: {\n+        challenge: { title }\n+      }\n+    }\n+  } = props;\n+  useEffect(() => {\n     const {\n       challengeMounted,\n       data: {\n@@ -107,7 +107,7 @@ class MsTrophy extends Component<MsTrophyProps> {\n       pageContext: { challengeMeta },\n       initTests,\n       updateChallengeMeta\n-    } = this.props;\n+    } = props;\n     initTests(tests);\n     updateChallengeMeta({\n       ...challengeMeta,\n@@ -116,133 +116,101 @@ class MsTrophy extends Component<MsTrophyProps> {\n       helpCategory\n     });\n     challengeMounted(challengeMeta.id);\n-    this.container.current?.focus();\n-  }\n-\n-  componentDidUpdate(prevProps: MsTrophyProps): void {\n-    const {\n-      data: {\n-        challengeNode: {\n-          challenge: { title: prevTitle }\n-        }\n-      }\n-    } = prevProps;\n-    const {\n-      challengeMounted,\n-      data: {\n-        challengeNode: {\n-          challenge: { title: currentTitle, challengeType, helpCategory }\n-        }\n-      },\n-      pageContext: { challengeMeta },\n-      updateChallengeMeta\n-    } = this.props;\n-    if (prevTitle !== currentTitle) {\n-      updateChallengeMeta({\n-        ...challengeMeta,\n-        title: currentTitle,\n-        challengeType,\n-        helpCategory\n-      });\n-      challengeMounted(challengeMeta.id);\n-    }\n-  }\n+    container.current?.focus();\n+    // This effect should be run once on mount\n+    // eslint-disable-next-line react-hooks/exhaustive-deps\n+  }, []);\n \n-  handleSubmit = (): void => {\n-    const { setIsProcessing, submitChallenge } = this.props;\n+  const handleSubmit = () => {\n+    const { setIsProcessing, submitChallenge } = props;\n \n     setIsProcessing(true);\n     submitChallenge();\n   };\n \n-  render() {\n-    const {\n-      data: {\n-        challengeNode: {\n-          challenge: {\n-            title,\n-            description,\n-            instructions,\n-            superBlock,\n-            block,\n-            translationPending,\n-            fields: { blockName }\n-          }\n+  const {\n+    data: {\n+      challengeNode: {\n+        challenge: {\n+          description,\n+          instructions,\n+          superBlock,\n+          block,\n+          translationPending,\n+          fields: { blockName }\n         }\n-      },\n-      isChallengeCompleted,\n-      isProcessing,\n-      msUsername,\n-      openHelpModal,\n-      pageContext: {\n-        challengeMeta: { nextChallengePath, prevChallengePath }\n-      },\n-      t\n-    } = this.props;\n+      }\n+    },\n+    isChallengeCompleted,\n+    isProcessing,\n+    msUsername,\n+    openHelpModal,\n+    pageContext: {\n+      challengeMeta: { nextChallengePath, prevChallengePath }\n+    },\n+    t\n+  } = props;\n \n-    const blockNameTitle = `${t(\n-      `intro:${superBlock}.blocks.${block}.title`\n-    )} - ${title}`;\n+  const blockNameTitle = `${t(\n+    `intro:${superBlock}.blocks.${block}.title`\n+  )} - ${title}`;\n \n-    return (\n-      <Hotkeys\n-        containerRef={this.container}\n-        nextChallengePath={nextChallengePath}\n-        prevChallengePath={prevChallengePath}\n-      >\n-        <LearnLayout>\n-          <Helmet\n-            title={`${blockNameTitle} | ${t('learn.learn')} | freeCodeCamp.org`}\n-          />\n-          <Container>\n-            <Row>\n-              <Col md={8} mdOffset={2} sm={10} smOffset={1} xs={12}>\n-                <Spacer size='m' />\n-                <ChallengeTitle\n-                  isCompleted={isChallengeCompleted}\n-                  translationPending={translationPending}\n-                >\n-                  {title}\n-                </ChallengeTitle>\n-                <ChallengeDescription\n-                  description={description}\n-                  instructions={instructions}\n-                />\n-                <LinkMsUser />\n-                <hr />\n-                <Button\n-                  block={true}\n-                  variant='primary'\n-                  data-playwright-test-label='verify-trophy-button'\n-                  disabled={!msUsername || isProcessing}\n-                  onClick={this.handleSubmit}\n-                >\n-                  {t('buttons.verify-trophy')}\n-                </Button>\n-                <Spacer size='xxs' />\n-                <Button\n-                  block={true}\n-                  variant='primary'\n-                  data-playwright-test-label='ask-for-help-button'\n-                  onClick={openHelpModal}\n-                >\n-                  {t('buttons.ask-for-help')}\n-                </Button>\n-                <br />\n-                <Spacer size='m' />\n-              </Col>\n-              <CompletionModal />\n-              <HelpModal challengeTitle={title} challengeBlock={blockName} />\n-            </Row>\n-          </Container>\n-        </LearnLayout>\n-      </Hotkeys>\n-    );\n-  }\n+  return (\n+    <Hotkeys\n+      containerRef={container}\n+      nextChallengePath={nextChallengePath}\n+      prevChallengePath={prevChallengePath}\n+    >\n+      <LearnLayout>\n+        <Helmet\n+          title={`${blockNameTitle} | ${t('learn.learn')} | freeCodeCamp.org`}\n+        />\n+        <Container>\n+          <Row>\n+            <Col md={8} mdOffset={2} sm={10} smOffset={1} xs={12}>\n+              <Spacer size='m' />\n+              <ChallengeTitle\n+                isCompleted={isChallengeCompleted}\n+                translationPending={translationPending}\n+              >\n+                {title}\n+              </ChallengeTitle>\n+              <ChallengeDescription\n+                description={description}\n+                instructions={instructions}\n+              />\n+              <LinkMsUser />\n+              <hr />\n+              <Button\n+                block={true}\n+                variant='primary'\n+                data-playwright-test-label='verify-trophy-button'\n+                disabled={!msUsername || isProcessing}\n+                onClick={handleSubmit}\n+              >\n+                {t('buttons.verify-trophy')}\n+              </Button>\n+              <Spacer size='xxs' />\n+              <Button\n+                block={true}\n+                variant='primary'\n+                data-playwright-test-label='ask-for-help-button'\n+                onClick={openHelpModal}\n+              >\n+                {t('buttons.ask-for-help')}\n+              </Button>\n+              <br />\n+              <Spacer size='m' />\n+            </Col>\n+            <CompletionModal />\n+            <HelpModal challengeTitle={title} challengeBlock={blockName} />\n+          </Row>\n+        </Container>\n+      </LearnLayout>\n+    </Hotkeys>\n+  );\n }\n \n-MsTrophy.displayName = 'MsTrophy';\n-\n export default connect(\n   mapStateToProps,\n   mapDispatchToProps"
        }
    ],
    "stats": {
        "total": 224,
        "additions": 96,
        "deletions": 128
    }
}