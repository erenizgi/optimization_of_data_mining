{
    "author": "Sembauke",
    "message": "feat: reset editor layout button (#57104)",
    "sha": "cfb14af924084b6a56a60fd5eae11fba9da87b49",
    "files": [
        {
            "sha": "4b5d867f0b3b9cf6d90c8ff9665f076eb69b409e",
            "filename": "client/i18n/locales/english/translations.json",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/cfb14af924084b6a56a60fd5eae11fba9da87b49/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/cfb14af924084b6a56a60fd5eae11fba9da87b49/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json?ref=cfb14af924084b6a56a60fd5eae11fba9da87b49",
            "patch": "@@ -238,6 +238,8 @@\n     \"sound-mode\": \"This adds the pleasant sound of acoustic guitar throughout the website. You'll get musical feedback as you type in the editor, complete challenges, claim certifications, and more.\",\n     \"sound-volume\": \"Campfire Volume:\",\n     \"scrollbar-width\": \"Editor Scrollbar Width\",\n+    \"reset-editor-layout-tooltip\": \"Reset the editor layout to its default state\",\n+    \"reset-editor-layout\": \"Reset Editor Layout\",\n     \"shortcuts-explained\": \"Within a challenge, press ESC followed by the question mark to show a list of available shortcuts.\",\n     \"username\": {\n       \"contains invalid characters\": \"Username \\\"{{username}}\\\" contains invalid characters\",\n@@ -896,6 +898,7 @@\n     \"invalid-update-flag\": \"You are attempting to access forbidden resources. Please request assistance on https://forum.freecodecamp.org if this is a valid request.\",\n     \"generate-exam-error\": \"An error occurred trying to generate your exam.\",\n     \"cert-not-found\": \"The certification {{certSlug}} does not exist.\",\n+    \"reset-editor-layout\": \"Your editor layout has been reset.\",\n     \"ms\": {\n       \"transcript\": {\n         \"link-err-1\": \"Please include a Microsoft transcript URL in the request.\","
        },
        {
            "sha": "506e7d934dd6f7d468b624a933e9c82d5a4278c8",
            "filename": "client/src/client-only-routes/show-settings.tsx",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/cfb14af924084b6a56a60fd5eae11fba9da87b49/client%2Fsrc%2Fclient-only-routes%2Fshow-settings.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/cfb14af924084b6a56a60fd5eae11fba9da87b49/client%2Fsrc%2Fclient-only-routes%2Fshow-settings.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fclient-only-routes%2Fshow-settings.tsx?ref=cfb14af924084b6a56a60fd5eae11fba9da87b49",
            "patch": "@@ -35,7 +35,8 @@ import {\n   updateMySound,\n   updateMyTheme,\n   updateMyKeyboardShortcuts,\n-  verifyCert\n+  verifyCert,\n+  resetMyEditorLayout\n } from '../redux/settings/actions';\n \n const { apiLocation } = envData;\n@@ -47,6 +48,7 @@ type ShowSettingsProps = Pick<ThemeProps, 'toggleNightMode'> & {\n   navigate: (location: string) => void;\n   showLoading: boolean;\n   toggleSoundMode: (sound: boolean) => void;\n+  resetEditorLayout: () => void;\n   toggleKeyboardShortcuts: (keyboardShortcuts: boolean) => void;\n   updateIsHonest: () => void;\n   updateQuincyEmail: (isSendQuincyEmail: boolean) => void;\n@@ -80,6 +82,7 @@ const mapDispatchToProps = {\n   updateIsHonest: updateMyHonesty,\n   updateQuincyEmail: (sendQuincyEmail: boolean) =>\n     updateMyQuincyEmail({ sendQuincyEmail }),\n+  resetEditorLayout: () => resetMyEditorLayout(),\n   verifyCert\n };\n \n@@ -91,6 +94,7 @@ export function ShowSettings(props: ShowSettingsProps): JSX.Element {\n     toggleNightMode,\n     toggleSoundMode,\n     toggleKeyboardShortcuts,\n+    resetEditorLayout,\n     user: {\n       completedChallenges,\n       email,\n@@ -140,6 +144,7 @@ export function ShowSettings(props: ShowSettingsProps): JSX.Element {\n     return <Loader fullScreen={true} />;\n   }\n   const sound = (store.get('fcc-sound') as boolean) ?? false;\n+  const editorLayout = (store.get('challenge-layout') as boolean) ?? false;\n   return (\n     <>\n       <Helmet title={`${t('buttons.settings')} | freeCodeCamp.org`} />\n@@ -161,6 +166,8 @@ export function ShowSettings(props: ShowSettingsProps): JSX.Element {\n             currentTheme={theme}\n             keyboardShortcuts={keyboardShortcuts}\n             sound={sound}\n+            editorLayout={editorLayout}\n+            resetEditorLayout={resetEditorLayout}\n             toggleKeyboardShortcuts={toggleKeyboardShortcuts}\n             toggleNightMode={toggleNightMode}\n             toggleSoundMode={toggleSoundMode}"
        },
        {
            "sha": "2518cf35a4dc85bf3c77590d6d4125ed02df9d8b",
            "filename": "client/src/components/settings/misc-settings.tsx",
            "status": "modified",
            "additions": 18,
            "deletions": 1,
            "changes": 19,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/cfb14af924084b6a56a60fd5eae11fba9da87b49/client%2Fsrc%2Fcomponents%2Fsettings%2Fmisc-settings.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/cfb14af924084b6a56a60fd5eae11fba9da87b49/client%2Fsrc%2Fcomponents%2Fsettings%2Fmisc-settings.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fsettings%2Fmisc-settings.tsx?ref=cfb14af924084b6a56a60fd5eae11fba9da87b49",
            "patch": "@@ -1,6 +1,6 @@\n import React from 'react';\n import { useTranslation } from 'react-i18next';\n-import { Spacer } from '@freecodecamp/ui';\n+import { Button, Spacer } from '@freecodecamp/ui';\n import { FullWidthRow } from '../helpers';\n import ThemeSettings, { ThemeProps } from '../../components/settings/theme';\n import SoundSettings from '../../components/settings/sound';\n@@ -11,15 +11,19 @@ type MiscSettingsProps = ThemeProps & {\n   currentTheme: string;\n   keyboardShortcuts: boolean;\n   sound: boolean;\n+  editorLayout: boolean | null;\n   toggleKeyboardShortcuts: (keyboardShortcuts: boolean) => void;\n   toggleNightMode: () => void;\n   toggleSoundMode: (sound: boolean) => void;\n+  resetEditorLayout: () => void;\n };\n \n const MiscSettings = ({\n   currentTheme,\n   keyboardShortcuts,\n   sound,\n+  editorLayout,\n+  resetEditorLayout,\n   toggleKeyboardShortcuts,\n   toggleNightMode,\n   toggleSoundMode\n@@ -41,6 +45,19 @@ const MiscSettings = ({\n           explain={t('settings.shortcuts-explained')?.toString()}\n         />\n         <ScrollbarWidthSettings />\n+        <label htmlFor='reset-layout-btn'>\n+          {t('settings.reset-editor-layout-tooltip')}\n+        </label>\n+        <Spacer size='xs' />\n+        <Button\n+          onClick={resetEditorLayout}\n+          id='reset-layout-btn'\n+          data-playwright-test-label='reset-layout-btn'\n+          disabled={!editorLayout}\n+          aria-disabled={!editorLayout}\n+        >\n+          {t('settings.reset-editor-layout')}\n+        </Button>\n       </FullWidthRow>\n     </>\n   );"
        },
        {
            "sha": "a4b76b21ab9323b757eab64ae485967326ee9876",
            "filename": "client/src/redux/index.js",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/cfb14af924084b6a56a60fd5eae11fba9da87b49/client%2Fsrc%2Fredux%2Findex.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/cfb14af924084b6a56a60fd5eae11fba9da87b49/client%2Fsrc%2Fredux%2Findex.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Findex.js?ref=cfb14af924084b6a56a60fd5eae11fba9da87b49",
            "patch": "@@ -491,6 +491,8 @@ export const reducer = handleActions(\n       payload ? spreadThePayloadOnUser(state, payload) : state,\n     [settingsTypes.updateMyPortfolioComplete]: (state, { payload }) =>\n       payload ? spreadThePayloadOnUser(state, payload) : state,\n+    [settingsTypes.resetMyEditorLayoutComplete]: (state, { payload }) =>\n+      payload ? spreadThePayloadOnUser(state, payload) : state,\n     [settingsTypes.verifyCertComplete]: (state, { payload }) =>\n       payload ? spreadThePayloadOnUser(state, payload) : state,\n     [settingsTypes.submitProfileUIComplete]: (state, { payload }) =>"
        },
        {
            "sha": "68931381c01d772a89df9fc004902c33d15a73b2",
            "filename": "client/src/redux/settings/action-types.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/cfb14af924084b6a56a60fd5eae11fba9da87b49/client%2Fsrc%2Fredux%2Fsettings%2Faction-types.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/cfb14af924084b6a56a60fd5eae11fba9da87b49/client%2Fsrc%2Fredux%2Fsettings%2Faction-types.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Fsettings%2Faction-types.js?ref=cfb14af924084b6a56a60fd5eae11fba9da87b49",
            "patch": "@@ -18,6 +18,7 @@ export const actionTypes = createTypes(\n     ...createAsyncTypes('submitProfileUI'),\n     ...createAsyncTypes('verifyCert'),\n     ...createAsyncTypes('resetProgress'),\n+    ...createAsyncTypes('resetMyEditorLayout'),\n     ...createAsyncTypes('deleteAccount')\n   ],\n   ns"
        },
        {
            "sha": "466e74dfa22ae5731fae7fba99ec8d77a4c7aa6d",
            "filename": "client/src/redux/settings/actions.js",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/cfb14af924084b6a56a60fd5eae11fba9da87b49/client%2Fsrc%2Fredux%2Fsettings%2Factions.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/cfb14af924084b6a56a60fd5eae11fba9da87b49/client%2Fsrc%2Fredux%2Fsettings%2Factions.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Fsettings%2Factions.js?ref=cfb14af924084b6a56a60fd5eae11fba9da87b49",
            "patch": "@@ -105,5 +105,13 @@ export const verifyCertError = createAction(types.verifyCertError);\n export const resetProgress = createAction(types.resetProgress);\n export const resetProgressError = createAction(types.resetProgressError);\n \n+export const resetMyEditorLayout = createAction(types.resetMyEditorLayout);\n+export const resetMyEditorLayoutComplete = createAction(\n+  types.resetMyEditorLayoutComplete\n+);\n+export const resetMyEditorLayoutError = createAction(\n+  types.resetMyEditorLayoutError\n+);\n+\n export const deleteAccount = createAction(types.deleteAccount);\n export const deleteAccountError = createAction(types.deleteAccountError);"
        },
        {
            "sha": "35c47eef3fbd608fca9f6c6da95583040d2428b2",
            "filename": "client/src/redux/settings/settings-sagas.js",
            "status": "modified",
            "additions": 23,
            "deletions": 0,
            "changes": 23,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/cfb14af924084b6a56a60fd5eae11fba9da87b49/client%2Fsrc%2Fredux%2Fsettings%2Fsettings-sagas.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/cfb14af924084b6a56a60fd5eae11fba9da87b49/client%2Fsrc%2Fredux%2Fsettings%2Fsettings-sagas.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Fsettings%2Fsettings-sagas.js?ref=cfb14af924084b6a56a60fd5eae11fba9da87b49",
            "patch": "@@ -30,6 +30,8 @@ import {\n } from '../../utils/ajax';\n import { completedChallengesSelector } from '../selectors';\n import {\n+  resetMyEditorLayoutComplete,\n+  resetMyEditorLayoutError,\n   submitNewAboutComplete,\n   submitNewAboutError,\n   submitNewUsernameComplete,\n@@ -110,6 +112,26 @@ function* updateMySoundSaga({ payload: update }) {\n   }\n }\n \n+function* resetMyEditorLayoutSaga() {\n+  const layout = store.get('challenge-layout');\n+\n+  if (layout) {\n+    try {\n+      const data = {\n+        message: 'flash.reset-editor-layout',\n+        type: 'success'\n+      };\n+\n+      store.remove('challenge-layout');\n+\n+      yield put(createFlashMessage({ ...data }));\n+      yield put(resetMyEditorLayoutComplete({ ...data }));\n+    } catch (e) {\n+      yield put(resetMyEditorLayoutError);\n+    }\n+  }\n+}\n+\n function* updateMyThemeSaga({ payload: update }) {\n   try {\n     const { data } = yield call(putUpdateMyTheme, update);\n@@ -225,6 +247,7 @@ export function createSettingsSagas(types) {\n     takeEvery(types.updateMySocials, updateMySocialsSaga),\n     takeEvery(types.updateMyHonesty, updateMyHonestySaga),\n     takeEvery(types.updateMySound, updateMySoundSaga),\n+    takeEvery(types.resetMyEditorLayout, resetMyEditorLayoutSaga),\n     takeEvery(types.updateMyTheme, updateMyThemeSaga),\n     takeEvery(types.updateMyKeyboardShortcuts, updateMyKeyboardShortcutsSaga),\n     takeEvery(types.updateMyQuincyEmail, updateMyQuincyEmailSaga),"
        },
        {
            "sha": "11af13d2b95b493ae60b7023a7ebdb26f96ace03",
            "filename": "e2e/reset-editor-layout.spec.ts",
            "status": "added",
            "additions": 48,
            "deletions": 0,
            "changes": 48,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/cfb14af924084b6a56a60fd5eae11fba9da87b49/e2e%2Freset-editor-layout.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/cfb14af924084b6a56a60fd5eae11fba9da87b49/e2e%2Freset-editor-layout.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Freset-editor-layout.spec.ts?ref=cfb14af924084b6a56a60fd5eae11fba9da87b49",
            "patch": "@@ -0,0 +1,48 @@\n+import { test, expect } from '@playwright/test';\n+test.use({ storageState: 'playwright/.auth/certified-user.json' });\n+test.describe('Reset Editor Layout', () => {\n+  test('drag layout and reset', async ({ page, isMobile }) => {\n+    test.skip(\n+      isMobile,\n+      'The mobile layout does not have resizable panes, so this test is not applicable.'\n+    );\n+\n+    await page.goto(\n+      '/learn/2022/responsive-web-design/learn-basic-css-by-building-a-cafe-menu/step-15'\n+    );\n+\n+    const desktopLayout = page.getByTestId('desktop-layout');\n+    const splitter = page.getByTestId('preview-left-splitter');\n+    const editorPane = desktopLayout.getByTestId('editor-pane');\n+    const initialStyle = await editorPane.getAttribute('style');\n+\n+    expect(initialStyle).toContain('flex: 1');\n+\n+    // Drag the splitter to resize the editor pane\n+    await splitter.hover();\n+    await page.mouse.down();\n+    await page.mouse.move(100, 100);\n+    await page.mouse.up();\n+\n+    const newStyle = await editorPane.getAttribute('style');\n+    expect(newStyle).not.toContain('flex: 1');\n+\n+    await page.goto('/settings#privacy-settings');\n+\n+    const resetButton = page.getByTestId('reset-layout-btn');\n+    await resetButton.click();\n+\n+    await expect(page.getByTestId('flash-message')).toContainText(\n+      'Your editor layout has been reset'\n+    );\n+\n+    await expect(resetButton).toBeDisabled();\n+\n+    await page.goto(\n+      '/learn/2022/responsive-web-design/learn-basic-css-by-building-a-cafe-menu/step-15'\n+    );\n+\n+    const afterReset = await editorPane.getAttribute('style');\n+    expect(afterReset).toContain('flex: 1');\n+  });\n+});"
        }
    ],
    "stats": {
        "total": 113,
        "additions": 111,
        "deletions": 2
    }
}