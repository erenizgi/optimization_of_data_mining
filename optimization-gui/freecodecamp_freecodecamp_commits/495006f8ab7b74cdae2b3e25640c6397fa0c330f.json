{
    "author": "lasjorg",
    "message": "fix(client): add doctype to preview iframe (#57041)\n\nCo-authored-by: Oliver Eyton-Williams <ojeytonwilliams@gmail.com>",
    "sha": "495006f8ab7b74cdae2b3e25640c6397fa0c330f",
    "files": [
        {
            "sha": "5681ea173c35c7e3629ba62d894b71bb28204113",
            "filename": "client/src/templates/Challenges/utils/frame.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/495006f8ab7b74cdae2b3e25640c6397fa0c330f/client%2Fsrc%2Ftemplates%2FChallenges%2Futils%2Fframe.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/495006f8ab7b74cdae2b3e25640c6397fa0c330f/client%2Fsrc%2Ftemplates%2FChallenges%2Futils%2Fframe.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Futils%2Fframe.ts?ref=495006f8ab7b74cdae2b3e25640c6397fa0c330f",
            "patch": "@@ -378,8 +378,11 @@ function writeToFrame(content: string, frame?: FrameDocument) {\n }\n \n const writeContentToFrame = (frameContext: Context) => {\n+  const doctype =\n+    frameContext.sources.contents?.match(/^<!DOCTYPE html>/i)?.[0] || '';\n+\n   writeToFrame(\n-    createHeader(frameContext.element.id) + frameContext.build,\n+    doctype + createHeader(frameContext.element.id) + frameContext.build,\n     frameContext.document\n   );\n "
        }
    ],
    "stats": {
        "total": 5,
        "additions": 4,
        "deletions": 1
    }
}