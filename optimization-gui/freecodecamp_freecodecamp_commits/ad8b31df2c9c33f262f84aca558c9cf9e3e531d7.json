{
    "author": "moT01",
    "message": "feat(client): enable daily challenges + add e2e tests (#61549)\n\nCo-authored-by: Huyen Nguyen <25715018+huyenltnguyen@users.noreply.github.com>",
    "sha": "ad8b31df2c9c33f262f84aca558c9cf9e3e531d7",
    "files": [
        {
            "sha": "f76eae7b43dfbd58dd1d109cc56cd00966a9e608",
            "filename": "client/src/components/daily-coding-challenge/calendar-day.tsx",
            "status": "modified",
            "additions": 10,
            "deletions": 2,
            "changes": 12,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ad8b31df2c9c33f262f84aca558c9cf9e3e531d7/client%2Fsrc%2Fcomponents%2Fdaily-coding-challenge%2Fcalendar-day.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ad8b31df2c9c33f262f84aca558c9cf9e3e531d7/client%2Fsrc%2Fcomponents%2Fdaily-coding-challenge%2Fcalendar-day.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fdaily-coding-challenge%2Fcalendar-day.tsx?ref=ad8b31df2c9c33f262f84aca558c9cf9e3e531d7",
            "patch": "@@ -29,6 +29,7 @@ function DailyCodingChallengeCalendarDay({\n       <button\n         disabled\n         className='calendar-day not-available'\n+        data-playwright-test-label='calendar-day'\n         aria-label={`${date && formatDisplayDate(date)}, (${t('aria.not-available')})`}\n       >\n         <span className='calendar-day-number' aria-hidden='true'>\n@@ -42,18 +43,25 @@ function DailyCodingChallengeCalendarDay({\n     <Link\n       to={`/learn/daily-coding-challenge?date=${date}`}\n       className='calendar-day available'\n+      data-playwright-test-label='calendar-day'\n       aria-label={`${date && formatDisplayDate(date)}`}\n     >\n       <span className='calendar-day-number' aria-hidden='true'>\n         {dayNumber}\n       </span>\n \n       {isCompleted ? (\n-        <span className='completed'>\n+        <span\n+          className='completed'\n+          data-playwright-test-label='calendar-day-completed'\n+        >\n           <GreenPass />\n         </span>\n       ) : (\n-        <span className='not-completed'>\n+        <span\n+          className='not-completed'\n+          data-playwright-test-label='calendar-day-not-completed'\n+        >\n           <GreenNotCompleted />\n         </span>\n       )}"
        },
        {
            "sha": "f8c66f717d1990a5997f480fd2e55559f57315cf",
            "filename": "e2e/daily-coding-challenge.spec.ts",
            "status": "added",
            "additions": 212,
            "deletions": 0,
            "changes": 212,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ad8b31df2c9c33f262f84aca558c9cf9e3e531d7/e2e%2Fdaily-coding-challenge.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ad8b31df2c9c33f262f84aca558c9cf9e3e531d7/e2e%2Fdaily-coding-challenge.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fdaily-coding-challenge.spec.ts?ref=ad8b31df2c9c33f262f84aca558c9cf9e3e531d7",
            "patch": "@@ -0,0 +1,212 @@\n+import { test, expect } from '@playwright/test';\n+import {\n+  getTodayUsCentral,\n+  formatDate\n+} from '../client/src/components/daily-coding-challenge/helpers';\n+\n+const dateRouteRe = /.*\\/daily-coding-challenge\\/date\\/.*/;\n+const allRouteRe = /.*\\/daily-coding-challenge\\/all/;\n+\n+const todayUsCentral = getTodayUsCentral();\n+const [year, month, day] = todayUsCentral.split('-').map(Number);\n+\n+const todayMidnight = `${todayUsCentral}T00:00:00.000Z`;\n+\n+const mockApiChallenge = {\n+  id: 'test-challenge-id',\n+  challengeNumber: 1,\n+  title: 'Test title',\n+  date: todayMidnight,\n+  description: 'Test description',\n+  javascript: {\n+    tests: [\n+      {\n+        text: 'Test text',\n+        testString: 'assert.strictEqual(true, true);'\n+      }\n+    ],\n+    challengeFiles: [\n+      {\n+        fileKey: 'scriptjs',\n+        contents: '// JavaScript seed code'\n+      }\n+    ]\n+  },\n+  python: {\n+    tests: [\n+      {\n+        text: 'Test text',\n+        testString: '({test: () => { runPython(`assert True == True`)}})'\n+      }\n+    ],\n+    challengeFiles: [\n+      {\n+        fileKey: 'mainpy',\n+        contents: '# Python seed code'\n+      }\n+    ]\n+  }\n+};\n+\n+const mockApiAllChallenges = [\n+  // today\n+  {\n+    // real ID from certified user so it shows completed in calendar\n+    id: '6814d8e1516e86b171929de4',\n+    date: todayMidnight\n+  },\n+  // yesterday, or tomorrow if today is the first\n+  {\n+    id: 'other-id',\n+    date: `${formatDate({ year, month, day: day === 1 ? day + 1 : day - 1 })}T00:00:00.000Z`\n+  }\n+];\n+\n+const mockDaysInMonth = new Date(year, month, 0).getDate();\n+\n+test.describe('Daily Coding Challenges', () => {\n+  test('should show not found page for invalid date', async ({ page }) => {\n+    await page.goto('/learn/daily-coding-challenge?date=invalid-date');\n+    await expect(\n+      page.getByText(/daily coding challenge not found\\./i)\n+    ).toBeVisible();\n+  });\n+\n+  test('should show not found page for date without challenge', async ({\n+    page\n+  }) => {\n+    await page.route(dateRouteRe, async route => {\n+      await route.fulfill({\n+        status: 404,\n+        headers: { 'Content-Type': 'application/json' },\n+        json: { type: 'error', message: 'Challenge not found.' }\n+      });\n+    });\n+\n+    await page.goto('/learn/daily-coding-challenge?date=2025-01-01');\n+    await expect(\n+      page.getByText(/daily coding challenge not found\\./i)\n+    ).toBeVisible();\n+  });\n+\n+  test('should show not found page for API error', async ({ page }) => {\n+    await page.route(dateRouteRe, async route => {\n+      await route.fulfill({\n+        status: 500,\n+        headers: { 'Content-Type': 'application/json' },\n+        json: { type: 'error', message: 'Internal server error.' }\n+      });\n+    });\n+\n+    await page.goto('/learn/daily-coding-challenge?date=2025-01-01');\n+    await expect(\n+      page.getByText(/daily coding challenge not found\\./i)\n+    ).toBeVisible();\n+  });\n+\n+  test('should show not found page for invalid challenge data', async ({\n+    page\n+  }) => {\n+    await page.route(dateRouteRe, async route => {\n+      await route.fulfill({\n+        status: 200,\n+        headers: { 'Content-Type': 'application/json' },\n+        json: { invalid: 'data structure' }\n+      });\n+    });\n+\n+    await page.goto('/learn/daily-coding-challenge?date=2025-06-27');\n+    await expect(\n+      page.getByText(/daily coding challenge not found\\./i)\n+    ).toBeVisible();\n+  });\n+\n+  test('should load and display a daily coding challenge with a valid date, and should be able to switch between JavaScript and Python', async ({\n+    page\n+  }) => {\n+    await page.route(dateRouteRe, async route => {\n+      await route.fulfill({\n+        status: 200,\n+        headers: { 'Content-Type': 'application/json' },\n+        json: mockApiChallenge\n+      });\n+    });\n+\n+    await page.goto(`/learn/daily-coding-challenge?date=${todayUsCentral}`);\n+\n+    await expect(page.getByText('Test title')).toBeVisible();\n+\n+    await expect(page.getByText('Test description')).toBeVisible();\n+\n+    // Language buttons\n+    await expect(\n+      page.getByRole('button', { name: /javascript/i })\n+    ).toBeVisible();\n+    await expect(page.getByRole('button', { name: /python/i })).toBeVisible();\n+\n+    // Should show JS UI by default\n+\n+    await expect(\n+      page.getByRole('button', { name: /script.js/i })\n+    ).toBeVisible();\n+    await expect(\n+      page.getByRole('button', { name: /main.py/i })\n+    ).not.toBeVisible();\n+    await expect(page.getByRole('button', { name: /console/i })).toBeVisible();\n+    await expect(page.getByTestId('preview-pane-button')).not.toBeVisible();\n+    await expect(page.locator(\"div[role='code'].monaco-editor\")).toContainText(\n+      '// JavaScript seed code'\n+    );\n+\n+    // Show show Python UI after changing language\n+    await page.getByRole('button', { name: /python/i }).click();\n+\n+    await expect(page.getByRole('button', { name: /main.py/i })).toBeVisible();\n+    await expect(\n+      page.getByRole('button', { name: /script.js/i })\n+    ).not.toBeVisible();\n+    await expect(page.getByRole('button', { name: /console/i })).toBeVisible();\n+    await expect(page.getByTestId('preview-pane-button')).toBeVisible();\n+    await expect(page.locator(\"div[role='code'].monaco-editor\")).toContainText(\n+      '# Python seed code'\n+    );\n+\n+    await page.goto(`/learn/daily-coding-challenge?date=${todayUsCentral}`);\n+\n+    await expect(page.getByRole('button', { name: /main.py/i })).toBeVisible();\n+  });\n+});\n+\n+test.describe('Daily Coding Challenge Archive', () => {\n+  test('should load and display the calendar', async ({ page }) => {\n+    await page.route(allRouteRe, async route => {\n+      await route.fulfill({\n+        status: 200,\n+        headers: { 'Content-Type': 'application/json' },\n+        json: mockApiAllChallenges\n+      });\n+    });\n+\n+    await page.goto('/learn/daily-coding-challenge/archive');\n+\n+    await expect(page.getByText('Daily Coding Challenges')).toBeVisible();\n+\n+    await expect(\n+      page.getByRole('button', { name: /previous month/i })\n+    ).toBeVisible();\n+    await expect(\n+      page.getByRole('button', { name: /next month/i })\n+    ).toBeVisible();\n+\n+    await expect(\n+      page.getByRole('link', { name: /go to today/i })\n+    ).toBeVisible();\n+\n+    const totalCalendarDays = await page.getByTestId('calendar-day').count();\n+    expect(totalCalendarDays).toBe(mockDaysInMonth);\n+\n+    await expect(page.getByTestId('calendar-day-completed')).toHaveCount(1);\n+\n+    await expect(page.getByTestId('calendar-day-not-completed')).toHaveCount(1);\n+  });\n+});"
        },
        {
            "sha": "105ca6f49e030dca28e163a17c147c4e39d0ebdc",
            "filename": "sample.env",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ad8b31df2c9c33f262f84aca558c9cf9e3e531d7/sample.env",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ad8b31df2c9c33f262f84aca558c9cf9e3e531d7/sample.env",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/sample.env?ref=ad8b31df2c9c33f262f84aca558c9cf9e3e531d7",
            "patch": "@@ -54,7 +54,7 @@ CURRICULUM_LOCALE=english\n \n # Show or hide WIP in progress challenges\n SHOW_UPCOMING_CHANGES=false\n-SHOW_DAILY_CODING_CHALLENGES=false\n+SHOW_DAILY_CODING_CHALLENGES=true\n \n # ---------------------\n # New API"
        },
        {
            "sha": "3ea49b2cecb5994a9d7f9932be3a64e243393365",
            "filename": "tools/scripts/seed/user-data.js",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ad8b31df2c9c33f262f84aca558c9cf9e3e531d7/tools%2Fscripts%2Fseed%2Fuser-data.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ad8b31df2c9c33f262f84aca558c9cf9e3e531d7/tools%2Fscripts%2Fseed%2Fuser-data.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fscripts%2Fseed%2Fuser-data.js?ref=ad8b31df2c9c33f262f84aca558c9cf9e3e531d7",
            "patch": "@@ -12281,6 +12281,13 @@ module.exports.fullyCertifiedUser = {\n       id: '672d456f4ac35950b300e93f'\n     }\n   ],\n+  completedDailyCodingChallenges: [\n+    {\n+      id: '6814d8e1516e86b171929de4',\n+      completedDate: 1729240849345,\n+      languages: ['javascript']\n+    }\n+  ],\n   completedExams: [\n     {\n       id: '647e22d18acb466c97ccbef8',"
        }
    ],
    "stats": {
        "total": 233,
        "additions": 230,
        "deletions": 3
    }
}