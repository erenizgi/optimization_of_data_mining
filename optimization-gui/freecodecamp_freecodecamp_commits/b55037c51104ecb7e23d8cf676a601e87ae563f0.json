{
    "author": "Almee98",
    "message": "feat(client): Added tests for per-module progress in client (#64226)\n\nCo-authored-by: Almee Christian <almee@Almees-MacBook-Pro.local>",
    "sha": "b55037c51104ecb7e23d8cf676a601e87ae563f0",
    "files": [
        {
            "sha": "5ccea043323593f992c8c20bf58bf18e4cd895ea",
            "filename": "client/src/templates/Introduction/components/super-block-accordion.test.tsx",
            "status": "modified",
            "additions": 138,
            "deletions": 0,
            "changes": 138,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/b55037c51104ecb7e23d8cf676a601e87ae563f0/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fsuper-block-accordion.test.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/b55037c51104ecb7e23d8cf676a601e87ae563f0/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fsuper-block-accordion.test.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fsuper-block-accordion.test.tsx?ref=b55037c51104ecb7e23d8cf676a601e87ae563f0",
            "patch": "@@ -3,6 +3,10 @@ import { render, screen, within } from '@testing-library/react';\n import { describe, it, expect } from 'vitest';\n import { SuperBlocks } from '../../../../../shared-dist/config/curriculum';\n import { SuperBlockAccordion } from './super-block-accordion';\n+import {\n+  BlockLabel,\n+  BlockLayouts\n+} from '../../../../../shared-dist/config/blocks';\n \n const mockStructure = {\n   superBlock: SuperBlocks.RespWebDesign,\n@@ -19,6 +23,19 @@ const mockStructure = {\n   ]\n };\n \n+// Representative challenge used to populate module content.\n+const mockChallenge = {\n+  id: 'test-challenge-id',\n+  block: 'test-block',\n+  blockLabel: BlockLabel.lecture,\n+  title: 'Test Challenge',\n+  fields: { slug: '/test-slug' },\n+  dashedName: 'test-challenge',\n+  challengeType: 0,\n+  blockLayout: BlockLayouts.ChallengeList,\n+  superBlock: SuperBlocks.RespWebDesign\n+};\n+\n describe('SuperBlockAccordion', () => {\n   it('does not show completed checkmark when there are zero challenges in a chapter', () => {\n     render(\n@@ -40,4 +57,125 @@ describe('SuperBlockAccordion', () => {\n     const checkmark = within(chapterButton).getByTestId('green-not-completed');\n     expect(checkmark).toBeInTheDocument();\n   });\n+\n+  // With progress data present, the module button should render the steps label.\n+  it('shows module progress when totalSteps > 0 and not comingSoon', () => {\n+    const structureWithProgress = {\n+      superBlock: SuperBlocks.RespWebDesign,\n+      chapters: [\n+        {\n+          dashedName: 'test-chapter',\n+          modules: [\n+            {\n+              dashedName: 'test-module',\n+              blocks: ['test-block'],\n+              comingSoon: false,\n+              totalSteps: 10,\n+              completedSteps: 5\n+            }\n+          ]\n+        }\n+      ]\n+    };\n+\n+    render(\n+      <SuperBlockAccordion\n+        challenges={[mockChallenge]}\n+        superBlock={SuperBlocks.RespWebDesign}\n+        structure={structureWithProgress}\n+        chosenBlock={''}\n+        completedChallengeIds={[]}\n+      />\n+    );\n+\n+    const moduleButtons = screen.getAllByRole('button', {\n+      name: /test-module/i\n+    });\n+    const moduleButton = moduleButtons[0];\n+\n+    const moduleRight = within(moduleButton).getByTestId('module-button-right');\n+    const moduleSteps = within(moduleRight).getByText(\n+      /learn\\.steps-completed/i\n+    );\n+    expect(moduleSteps).toBeInTheDocument();\n+    expect(moduleSteps).toHaveClass('module-steps');\n+  });\n+\n+  // A coming-soon module should hide the steps summary even if progress exists.\n+  it('does not show module progress when comingSoon is true', () => {\n+    const structureComingSoon = {\n+      superBlock: SuperBlocks.RespWebDesign,\n+      chapters: [\n+        {\n+          dashedName: 'test-chapter',\n+          modules: [\n+            {\n+              dashedName: 'test-module',\n+              blocks: ['test-block'],\n+              comingSoon: true,\n+              totalSteps: 10,\n+              completedSteps: 5\n+            }\n+          ]\n+        }\n+      ]\n+    };\n+\n+    render(\n+      <SuperBlockAccordion\n+        challenges={[mockChallenge]}\n+        superBlock={SuperBlocks.RespWebDesign}\n+        structure={structureComingSoon}\n+        chosenBlock={''}\n+        completedChallengeIds={[]}\n+      />\n+    );\n+\n+    const moduleButtons = screen.getAllByRole('button', {\n+      name: /test-module/i\n+    });\n+    const moduleButton = moduleButtons[0];\n+\n+    const moduleRight = within(moduleButton).getByTestId('module-button-right');\n+    expect(within(moduleRight).queryByText(/steps/i)).not.toBeInTheDocument();\n+  });\n+\n+  // Modules with zero total steps should not display any progress text.\n+  it('does not show module progress when totalSteps is zero', () => {\n+    const structureZeroSteps = {\n+      superBlock: SuperBlocks.RespWebDesign,\n+      chapters: [\n+        {\n+          dashedName: 'test-chapter',\n+          modules: [\n+            {\n+              dashedName: 'test-module',\n+              blocks: ['test-block'],\n+              comingSoon: false,\n+              totalSteps: 0,\n+              completedSteps: 0\n+            }\n+          ]\n+        }\n+      ]\n+    };\n+\n+    render(\n+      <SuperBlockAccordion\n+        challenges={[]}\n+        superBlock={SuperBlocks.RespWebDesign}\n+        structure={structureZeroSteps}\n+        chosenBlock={''}\n+        completedChallengeIds={[]}\n+      />\n+    );\n+\n+    const moduleButtons = screen.getAllByRole('button', {\n+      name: /test-module/i\n+    });\n+    const moduleButton = moduleButtons[0];\n+\n+    const moduleRight = within(moduleButton).getByTestId('module-button-right');\n+    expect(within(moduleRight).queryByText(/steps/i)).not.toBeInTheDocument();\n+  });\n });"
        },
        {
            "sha": "e1a21a9c8d4951ea142c9cb35da02331dc95f980",
            "filename": "client/src/templates/Introduction/components/super-block-accordion.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/b55037c51104ecb7e23d8cf676a601e87ae563f0/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fsuper-block-accordion.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/b55037c51104ecb7e23d8cf676a601e87ae563f0/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fsuper-block-accordion.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fsuper-block-accordion.tsx?ref=b55037c51104ecb7e23d8cf676a601e87ae563f0",
            "patch": "@@ -189,7 +189,7 @@ const Module = ({\n           </span>\n           {t(`intro:${superBlock}.modules.${dashedName}`)}\n         </div>\n-        <div className='module-button-right'>\n+        <div className='module-button-right' data-testid='module-button-right'>\n           {!comingSoon && !!totalSteps && (\n             <span className='module-steps'>\n               {t('learn.steps-completed', {"
        }
    ],
    "stats": {
        "total": 140,
        "additions": 139,
        "deletions": 1
    }
}