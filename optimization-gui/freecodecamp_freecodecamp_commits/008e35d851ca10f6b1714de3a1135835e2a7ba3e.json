{
    "author": "raisedadead",
    "message": "fix(api): update logging (#60187)",
    "sha": "008e35d851ca10f6b1714de3a1135835e2a7ba3e",
    "files": [
        {
            "sha": "75461e6817a672bda7ba9b93c3ee1c2dca88ad91",
            "filename": "api/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fpackage.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fpackage.json?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -16,6 +16,7 @@\n     \"@growthbook/growthbook\": \"1.3.1\",\n     \"@prisma/client\": \"5.5.2\",\n     \"@sentry/node\": \"9.1.0\",\n+    \"@types/pino\": \"^7.0.5\",\n     \"ajv\": \"8.12.0\",\n     \"ajv-formats\": \"2.1.1\",\n     \"date-fns\": \"2.30.0\",\n@@ -30,6 +31,7 @@\n     \"nanoid\": \"3\",\n     \"no-profanity\": \"1.5.1\",\n     \"nodemailer\": \"6.9.10\",\n+    \"pino\": \"^9.6.0\",\n     \"pino-pretty\": \"10.2.3\",\n     \"query-string\": \"7.1.3\",\n     \"stripe\": \"16.0.0\","
        },
        {
            "sha": "8476a9facb3bbbbd9d71df0e417d104cb3854d37",
            "filename": "api/src/app.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 61,
            "changes": 64,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Fapp.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Fapp.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fapp.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -1,5 +1,4 @@\n import { randomBytes } from 'crypto';\n-import { isEmpty } from 'lodash';\n import fastifyAccepts from '@fastify/accepts';\n import fastifySwagger from '@fastify/swagger';\n import fastifySwaggerUI from '@fastify/swagger-ui';\n@@ -11,7 +10,6 @@ import Fastify, {\n   FastifyBaseLogger,\n   FastifyHttpOptions,\n   FastifyInstance,\n-  FastifyRequest,\n   RawReplyDefaultExpression,\n   RawRequestDefaultExpression,\n   RawServerDefault\n@@ -45,11 +43,10 @@ import {\n   FCC_ENABLE_EXAM_ENVIRONMENT,\n   FCC_ENABLE_SENTRY_ROUTES,\n   GROWTHBOOK_FASTIFY_API_HOST,\n-  GROWTHBOOK_FASTIFY_CLIENT_KEY,\n-  FREECODECAMP_NODE_ENV,\n-  FCC_API_LOG_LEVEL\n+  GROWTHBOOK_FASTIFY_CLIENT_KEY\n } from './utils/env';\n import { isObjectID } from './utils/validation';\n+import { getLogger } from './utils/logger';\n import {\n   examEnvironmentMultipartRoutes,\n   examEnvironmentOpenRoutes,\n@@ -83,63 +80,8 @@ ajv.addFormat('objectid', {\n   validate: (str: string) => isObjectID(str)\n });\n \n-const requestSerializer = (req: FastifyRequest) => {\n-  const method = req.method || 'METHOD not found';\n-  const url = req.url || 'URL not found';\n-  const headers = req.headers || 'HEADERS not found';\n-  const xForwardedFor = Array.isArray(req.headers['x-forwarded-for'])\n-    ? req.headers['x-forwarded-for'][0]\n-    : req.headers['x-forwarded-for'];\n-  const ip =\n-    xForwardedFor || req.headers['x-real-ip'] || req.ip || 'IP not found';\n-  const query = isEmpty(req.query) ? 'QUERY not found' : req.query;\n-  const hostname = req.hostname || 'HOSTNAME not found';\n-  const remotePort = req.socket.remotePort || 'REMOTE_PORT not found';\n-\n-  return {\n-    REQ_ID: req.id,\n-    METHOD: method,\n-    URL: url,\n-    IP: ip,\n-    HOSTNAME: hostname,\n-    REMOTE_PORT: remotePort,\n-    QUERY: query,\n-    HEADERS: headers\n-  };\n-};\n-\n-const envToLogger = {\n-  development: {\n-    transport: {\n-      target: 'pino-pretty',\n-      options: {\n-        singleLine: true,\n-        translateTime: 'HH:MM:ss Z',\n-        ignore: 'pid,hostname'\n-      }\n-    },\n-    level: FCC_API_LOG_LEVEL || 'info',\n-    serializers: {\n-      req: (req: FastifyRequest) => {\n-        return {\n-          method: req.method,\n-          url: req.url\n-        };\n-      }\n-    }\n-    // No need to redact in development\n-  },\n-  production: {\n-    level: FCC_API_LOG_LEVEL || 'info',\n-    serializers: {\n-      req: requestSerializer\n-    },\n-    redact: ['req.HEADERS.cookie']\n-  }\n-};\n-\n export const buildOptions = {\n-  logger: envToLogger[FREECODECAMP_NODE_ENV] ?? true,\n+  logger: getLogger(),\n   genReqId: () => randomBytes(8).toString('hex'),\n   disableRequestLogging: true\n };"
        },
        {
            "sha": "541531ac2498e95aab67f8b9df92572ce8b96e19",
            "filename": "api/src/plugins/auth0.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Fplugins%2Fauth0.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Fplugins%2Fauth0.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fplugins%2Fauth0.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -79,7 +79,7 @@ export const auth0Client: FastifyPluginCallbackTypebox = fp(\n \n     // TODO: use a schema to validate the query params.\n     fastify.get('/auth/auth0/callback', async function (req, reply) {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n \n       const { error, error_description } = req.query as Record<string, string>;\n       if (error === 'access_denied') {"
        },
        {
            "sha": "f7707e2d3777328d67a043072bd8a4dd13bd7635",
            "filename": "api/src/plugins/bouncer.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Fplugins%2Fbouncer.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Fplugins%2Fbouncer.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fplugins%2Fbouncer.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -19,7 +19,7 @@ const plugin: FastifyPluginCallback = (fastify, _options, done) => {\n     'send401IfNoUser',\n     async function (req: FastifyRequest, reply: FastifyReply) {\n       if (!req.user) {\n-        const logger = fastify.log.child({ req });\n+        const logger = fastify.log.child({ req, res: reply });\n \n         logger.trace(\n           'Protected route accessed by unauthenticated user. Sent 401.'\n@@ -36,7 +36,7 @@ const plugin: FastifyPluginCallback = (fastify, _options, done) => {\n   fastify.decorate(\n     'redirectIfNoUser',\n     async function (req: FastifyRequest, reply: FastifyReply) {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       if (!req.user) {\n         logger.trace(\n           'Protected route accessed by unauthenticated user. Redirecting to login.'\n@@ -55,7 +55,7 @@ const plugin: FastifyPluginCallback = (fastify, _options, done) => {\n     'redirectIfSignedIn',\n     async function (req: FastifyRequest, reply: FastifyReply) {\n       if (req.user) {\n-        const logger = fastify.log.child({ req });\n+        const logger = fastify.log.child({ req, res: reply });\n \n         const { returnTo } = getRedirectParams(req);\n "
        },
        {
            "sha": "0b7f8b715d28d48ff391f4b3aec08ea7117e080c",
            "filename": "api/src/plugins/cors.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Fplugins%2Fcors.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Fplugins%2Fcors.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fplugins%2Fcors.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -10,7 +10,7 @@ const cors: FastifyPluginCallback = (fastify, _options, done) => {\n   });\n \n   fastify.addHook('onRequest', async (req, reply) => {\n-    const logger = fastify.log.child({ req });\n+    const logger = fastify.log.child({ req, res: reply });\n     const origin = req.headers.origin;\n     if (origin && allowedOrigins.includes(origin)) {\n       // Do we want to log allowed origins?"
        },
        {
            "sha": "2065348e6ac5436faa52db20f0d756a00dacb0f0",
            "filename": "api/src/plugins/csrf.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Fplugins%2Fcsrf.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Fplugins%2Fcsrf.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fplugins%2Fcsrf.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -28,7 +28,7 @@ const csrf: FastifyPluginCallback = (fastify, _options, done) => {\n \n   // All routes except signout should add a CSRF token to the response\n   fastify.addHook('onRequest', (req, reply, done) => {\n-    const logger = fastify.log.child({ req });\n+    const logger = fastify.log.child({ req, res: reply });\n     const isSignout = req.url === '/signout' || req.url === '/signout/';\n \n     if (!isSignout) {"
        },
        {
            "sha": "19f4928646c8bb3471305ca4323048fd748f4aa5",
            "filename": "api/src/plugins/not-found.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Fplugins%2Fnot-found.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Fplugins%2Fnot-found.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fplugins%2Fnot-found.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -15,7 +15,7 @@ const fourOhFour: FastifyPluginCallback = (fastify, _options, done) => {\n   // If the request accepts JSON and does not specifically prefer text/html,\n   // this will return a 404 JSON response. Everything else will be redirected.\n   fastify.setNotFoundHandler((req, reply) => {\n-    const logger = fastify.log.child({ req });\n+    const logger = fastify.log.child({ req, res: reply });\n     logger.info('User requested path that does not exist');\n \n     const accepted = req.accepts().type(['json', 'html']);"
        },
        {
            "sha": "0e1ea1d2c1ae2aebe0d121e8fb9d957c41bef350",
            "filename": "api/src/routes/protected/certificate.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fprotected%2Fcertificate.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fprotected%2Fcertificate.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fprotected%2Fcertificate.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -266,7 +266,7 @@ export const protectedCertificateRoutes: FastifyPluginCallbackTypebox = (\n       }\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       const { certSlug } = req.body;\n \n       if (!isKnownCertSlug(certSlug) || !isCertAllowed(certSlug)) {"
        },
        {
            "sha": "cba143eb68246d56fda2246596778f994d8f82a6",
            "filename": "api/src/routes/protected/challenge.ts",
            "status": "modified",
            "additions": 17,
            "deletions": 17,
            "changes": 34,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fprotected%2Fchallenge.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fprotected%2Fchallenge.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fprotected%2Fchallenge.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -68,7 +68,7 @@ export const challengeRoutes: FastifyPluginCallbackTypebox = (\n     {\n       schema: schemas.coderoadChallengeCompleted,\n       errorHandler(error, req, reply) {\n-        const logger = fastify.log.child({ req });\n+        const logger = fastify.log.child({ req, res: reply });\n         if (error.validation) {\n           logger.warn({ validationError: error.validation });\n           void reply.code(400);\n@@ -79,7 +79,7 @@ export const challengeRoutes: FastifyPluginCallbackTypebox = (\n       }\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       logger.info(\n         { userId: req.user?.id },\n         'User submitted a coderoad challenge'\n@@ -207,7 +207,7 @@ export const challengeRoutes: FastifyPluginCallbackTypebox = (\n     {\n       schema: schemas.projectCompleted,\n       errorHandler(error, req, reply) {\n-        const logger = fastify.log.child({ req });\n+        const logger = fastify.log.child({ req, res: reply });\n         if (error.validation) {\n           logger.warn({ validationError: error.validation });\n           void reply.code(400);\n@@ -310,8 +310,8 @@ export const challengeRoutes: FastifyPluginCallbackTypebox = (\n         }\n       }\n     },\n-    async req => {\n-      const logger = fastify.log.child({ req });\n+    async (req, reply) => {\n+      const logger = fastify.log.child({ req, res: reply });\n       logger.info(\n         { userId: req.user?.id },\n         `User submitted a backend challenge`\n@@ -353,7 +353,7 @@ export const challengeRoutes: FastifyPluginCallbackTypebox = (\n       schema: schemas.modernChallengeCompleted,\n       errorHandler(error, req, reply) {\n         if (error.validation) {\n-          const logger = fastify.log.child({ req });\n+          const logger = fastify.log.child({ req, res: reply });\n           // This is another highly used route, so debug log level is used to\n           // avoid excessive logging\n           logger.debug({ validationError: error.validation });\n@@ -364,8 +364,8 @@ export const challengeRoutes: FastifyPluginCallbackTypebox = (\n         }\n       }\n     },\n-    async req => {\n-      const logger = fastify.log.child({ req });\n+    async (req, reply) => {\n+      const logger = fastify.log.child({ req, res: reply });\n       // This is another highly used route, so debug log level is used to\n       // avoid excessive logging\n       logger.debug(\n@@ -420,7 +420,7 @@ export const challengeRoutes: FastifyPluginCallbackTypebox = (\n     {\n       schema: schemas.saveChallenge,\n       errorHandler(error, req, reply) {\n-        const logger = fastify.log.child({ req });\n+        const logger = fastify.log.child({ req, res: reply });\n         if (error.validation) {\n           logger.warn({ validationError: error.validation });\n           void reply.code(400);\n@@ -431,7 +431,7 @@ export const challengeRoutes: FastifyPluginCallbackTypebox = (\n       }\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       logger.info({ userId: req.user?.id }, 'User saved a challenge');\n \n       const { files, id: challengeId } = req.body;\n@@ -480,7 +480,7 @@ export const challengeRoutes: FastifyPluginCallbackTypebox = (\n     {\n       schema: schemas.exam,\n       errorHandler(error, req, reply) {\n-        const logger = fastify.log.child({ req });\n+        const logger = fastify.log.child({ req, res: reply });\n         if (error.validation) {\n           logger.warn({ validationError: error.validation });\n           void reply.code(400);\n@@ -491,7 +491,7 @@ export const challengeRoutes: FastifyPluginCallbackTypebox = (\n       }\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       logger.info(\n         { userId: req.user?.id, examId: req.params.id },\n         'User requested an exam'\n@@ -580,7 +580,7 @@ export const challengeRoutes: FastifyPluginCallbackTypebox = (\n     {\n       schema: schemas.msTrophyChallengeCompleted,\n       errorHandler(error, req, reply) {\n-        const logger = fastify.log.child({ req });\n+        const logger = fastify.log.child({ req, res: reply });\n         if (error.validation) {\n           logger.warn({ validationError: error.validation });\n           void reply.code(400);\n@@ -591,7 +591,7 @@ export const challengeRoutes: FastifyPluginCallbackTypebox = (\n       }\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       logger.info(\n         { userId: req.user?.id },\n         'User submitted a Microsoft trophy challenge'\n@@ -685,7 +685,7 @@ export const challengeRoutes: FastifyPluginCallbackTypebox = (\n     {\n       schema: schemas.examChallengeCompleted,\n       errorHandler(error, req, reply) {\n-        const logger = fastify.log.child({ req });\n+        const logger = fastify.log.child({ req, res: reply });\n         if (error.validation) {\n           logger.warn({ validationError: error.validation });\n           void reply.code(400);\n@@ -698,7 +698,7 @@ export const challengeRoutes: FastifyPluginCallbackTypebox = (\n       }\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n \n       logger.info({ userId: req.user?.id }, 'User submitted an exam challenge');\n \n@@ -899,7 +899,7 @@ export const challengeRoutes: FastifyPluginCallbackTypebox = (\n     {\n       schema: schemas.submitQuizAttempt,\n       errorHandler(error, req, reply) {\n-        const logger = fastify.log.child({ req });\n+        const logger = fastify.log.child({ req, res: reply });\n         if (error.validation) {\n           logger.warn({ validationError: error.validation });\n           void reply.code(400);"
        },
        {
            "sha": "3533d69e6f53f1206f5039451c9e5703902f1999",
            "filename": "api/src/routes/protected/donate.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fprotected%2Fdonate.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fprotected%2Fdonate.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fprotected%2Fdonate.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -28,8 +28,8 @@ export const donateRoutes: FastifyPluginCallbackTypebox = (\n     {\n       schema: schemas.updateStripeCard\n     },\n-    async req => {\n-      const logger = fastify.log.child({ req });\n+    async (req, reply) => {\n+      const logger = fastify.log.child({ req, res: reply });\n       const donation = await fastify.prisma.donation.findFirst({\n         where: { userId: req.user?.id, provider: 'stripe' }\n       });\n@@ -62,7 +62,7 @@ export const donateRoutes: FastifyPluginCallbackTypebox = (\n       schema: schemas.addDonation\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       try {\n         const user = await fastify.prisma.user.findUnique({\n           where: { id: req.user?.id }\n@@ -107,7 +107,7 @@ export const donateRoutes: FastifyPluginCallbackTypebox = (\n       schema: schemas.chargeStripeCard\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       try {\n         const { paymentMethodId, amount, duration } = req.body;\n         const id = req.user!.id;"
        },
        {
            "sha": "d2428b3ec36db8877ed4318fbcf096ad9ea84401",
            "filename": "api/src/routes/protected/settings.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 13,
            "changes": 26,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fprotected%2Fsettings.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fprotected%2Fsettings.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fprotected%2Fsettings.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -113,7 +113,7 @@ export const settingRoutes: FastifyPluginCallbackTypebox = (\n       schema: schemas.updateMyProfileUI\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       try {\n         await fastify.prisma.user.update({\n           where: { id: req.user?.id },\n@@ -167,7 +167,7 @@ Happy coding!\n       attachValidation: true\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       if (req.validationError) {\n         logger.warn(`Invalid email ${req.body.email}`);\n         void reply.code(400);\n@@ -308,7 +308,7 @@ ${isLinkSentWithinLimitTTL}`\n       schema: schemas.updateMyTheme\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       try {\n         await fastify.prisma.user.update({\n           where: { id: req.user?.id },\n@@ -337,7 +337,7 @@ ${isLinkSentWithinLimitTTL}`\n       schema: schemas.updateMySocials\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n \n       const socials = {\n         twitter: req.body.twitter,\n@@ -391,7 +391,7 @@ ${isLinkSentWithinLimitTTL}`\n       attachValidation: true\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n \n       try {\n         const user = await fastify.prisma.user.findFirstOrThrow({\n@@ -482,7 +482,7 @@ ${isLinkSentWithinLimitTTL}`\n       schema: schemas.updateMyAbout\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       const hasProtocol = isPictureWithProtocol(req.body.picture);\n \n       try {\n@@ -515,7 +515,7 @@ ${isLinkSentWithinLimitTTL}`\n       schema: schemas.updateMyKeyboardShortcuts\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       try {\n         await fastify.prisma.user.update({\n           where: { id: req.user?.id },\n@@ -543,7 +543,7 @@ ${isLinkSentWithinLimitTTL}`\n       schema: schemas.updateMyQuincyEmail\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       try {\n         await fastify.prisma.user.update({\n           where: { id: req.user?.id },\n@@ -571,7 +571,7 @@ ${isLinkSentWithinLimitTTL}`\n       schema: schemas.updateMyHonesty\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       try {\n         await fastify.prisma.user.update({\n           where: { id: req.user?.id },\n@@ -599,7 +599,7 @@ ${isLinkSentWithinLimitTTL}`\n       schema: schemas.updateMyPrivacyTerms\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       try {\n         await fastify.prisma.user.update({\n           where: { id: req.user?.id },\n@@ -628,7 +628,7 @@ ${isLinkSentWithinLimitTTL}`\n       schema: schemas.updateMyPortfolio\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       try {\n         // TODO(Post-MVP): make all properties required in the schema and use\n         // req.body.portfolio directly.\n@@ -667,7 +667,7 @@ ${isLinkSentWithinLimitTTL}`\n       schema: schemas.updateMyClassroomMode\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       try {\n         const classroomMode = req.body.isClassroomAccount;\n \n@@ -764,7 +764,7 @@ export const settingRedirectRoutes: FastifyPluginCallbackTypebox = (\n       }\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       const email = Buffer.from(req.query.email, 'base64').toString();\n \n       const { origin } = getRedirectParams(req);"
        },
        {
            "sha": "3c6898a3be5a0dedf3508e478bef32d6aef97c15",
            "filename": "api/src/routes/protected/user.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fprotected%2Fuser.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fprotected%2Fuser.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fprotected%2Fuser.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -64,7 +64,7 @@ export const userRoutes: FastifyPluginCallbackTypebox = (\n       schema: schemas.deleteMyAccount\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       logger.info(`User ${req.user?.id} requested account deletion`);\n       await fastify.prisma.userToken.deleteMany({\n         where: { userId: req.user!.id }\n@@ -89,8 +89,8 @@ export const userRoutes: FastifyPluginCallbackTypebox = (\n     {\n       schema: schemas.resetMyProgress\n     },\n-    async req => {\n-      const logger = fastify.log.child({ req });\n+    async (req, reply) => {\n+      const logger = fastify.log.child({ req, res: reply });\n       logger.info(`User ${req.user?.id} requested progress reset`);\n       await fastify.prisma.userToken.deleteMany({\n         where: { userId: req.user!.id }\n@@ -110,8 +110,8 @@ export const userRoutes: FastifyPluginCallbackTypebox = (\n     }\n   );\n   // TODO(Post-MVP): POST -> PUT\n-  fastify.post('/user/user-token', async req => {\n-    const logger = fastify.log.child({ req });\n+  fastify.post('/user/user-token', async (req, reply) => {\n+    const logger = fastify.log.child({ req, res: reply });\n     logger.info(`User ${req.user?.id} requested a new user token`);\n \n     await fastify.prisma.userToken.deleteMany({\n@@ -139,7 +139,7 @@ export const userRoutes: FastifyPluginCallbackTypebox = (\n       schema: schemas.deleteUserToken\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       logger.info(`User ${req.user?.id} requested token deletion`);\n \n       const { count } = await fastify.prisma.userToken.deleteMany({\n@@ -168,7 +168,7 @@ export const userRoutes: FastifyPluginCallbackTypebox = (\n       }\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       logger.info(`User ${req.user?.id} reported user ${req.body.username}`);\n \n       const user = await fastify.prisma.user.findUniqueOrThrow({\n@@ -231,7 +231,7 @@ export const userRoutes: FastifyPluginCallbackTypebox = (\n       schema: schemas.deleteMsUsername\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       logger.info(`User ${req.user?.id} requested unlinking of msUsername`);\n \n       try {\n@@ -258,7 +258,7 @@ export const userRoutes: FastifyPluginCallbackTypebox = (\n     {\n       schema: schemas.postMsUsername,\n       errorHandler(error, req, reply) {\n-        const logger = fastify.log.child({ req });\n+        const logger = fastify.log.child({ req, res: reply });\n         if (error.validation) {\n           logger.warn({ validationError: error.validation });\n           void reply.code(400).send({\n@@ -271,7 +271,7 @@ export const userRoutes: FastifyPluginCallbackTypebox = (\n       }\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       logger.info(`User ${req.user?.id} requested linking of msUsername`);\n \n       try {\n@@ -367,7 +367,7 @@ export const userRoutes: FastifyPluginCallbackTypebox = (\n       }\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       logger.info(`User ${req.user?.id} submitted a survey`);\n       try {\n         const user = await fastify.prisma.user.findUniqueOrThrow({\n@@ -490,7 +490,7 @@ export const userGetRoutes: FastifyPluginCallbackTypebox = (\n       schema: schemas.getSessionUser\n     },\n     async (req, res) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res });\n       // This is one of the most requested routes. To avoid spamming the logs\n       // with this route, we'll log requests at the debug level.\n       logger.debug({ userId: req.user?.id });"
        },
        {
            "sha": "545b51086ac929a052997907aa174dccf6242aca",
            "filename": "api/src/routes/public/auth.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fpublic%2Fauth.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fpublic%2Fauth.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fpublic%2Fauth.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -43,7 +43,7 @@ export const mobileAuth0Routes: FastifyPluginCallback = (\n   fastify.get('/mobile-login', async (req, reply) => {\n     const email = await getEmailFromAuth0(req);\n \n-    const logger = fastify.log.child({ req });\n+    const logger = fastify.log.child({ req, res: reply });\n \n     logger.info('Mobile app login attempt');\n "
        },
        {
            "sha": "4e1360bb95c209742476ac8dbdbcf89f860de4a6",
            "filename": "api/src/routes/public/certificate.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fpublic%2Fcertificate.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fpublic%2Fcertificate.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fpublic%2Fcertificate.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -32,7 +32,7 @@ export const unprotectedCertificateRoutes: FastifyPluginCallbackTypebox = (\n       schema: schemas.certSlug\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n       const username = req.params.username.toLowerCase();\n       const certSlug = req.params.certSlug;\n "
        },
        {
            "sha": "4958c9d31d37a73de780394b0ed505f5f2ee8fdb",
            "filename": "api/src/routes/public/signout.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fpublic%2Fsignout.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fpublic%2Fsignout.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fpublic%2Fsignout.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -16,7 +16,7 @@ export const signoutRoute: FastifyPluginCallback = (\n   done\n ) => {\n   fastify.get('/signout', async (req, reply) => {\n-    const logger = fastify.log.child({ req });\n+    const logger = fastify.log.child({ req, res: reply });\n \n     void reply.clearOurCookies();\n     logger.info('User signed out');"
        },
        {
            "sha": "a9b9c05567edb74979db3b9e16b6eddcdde68efd",
            "filename": "api/src/routes/public/status.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fpublic%2Fstatus.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fpublic%2Fstatus.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fpublic%2Fstatus.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -15,13 +15,13 @@ export const statusRoute: FastifyPluginCallbackTypebox = (\n   _options,\n   done\n ) => {\n-  fastify.get('/status/ping', async (req, _reply) => {\n-    fastify.log.child({ req }).debug('pong');\n+  fastify.get('/status/ping', async (req, res) => {\n+    fastify.log.child({ req, res }).debug('Replying to ping');\n     return { msg: 'pong' };\n   });\n \n-  fastify.get('/status/version', async (req, _reply) => {\n-    fastify.log.child({ req }).debug('version');\n+  fastify.get('/status/version', async (req, res) => {\n+    fastify.log.child({ req, res }).debug('Sending version');\n     return { version: DEPLOYMENT_VERSION };\n   });\n "
        },
        {
            "sha": "934b679e4866185d310ee42ac38850ce22c8d48f",
            "filename": "api/src/routes/public/user.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fpublic%2Fuser.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Froutes%2Fpublic%2Fuser.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fpublic%2Fuser.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -120,7 +120,7 @@ export const userPublicGetRoutes: FastifyPluginCallbackTypebox = (\n       }\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, reply });\n       logger.info({ username: req.query.username });\n       // TODO(Post-MVP): look for duplicates unless we can make username unique in the db.\n       const user = await fastify.prisma.user.findFirst({\n@@ -219,10 +219,12 @@ export const userPublicGetRoutes: FastifyPluginCallbackTypebox = (\n       attachValidation: true\n     },\n     async (req, reply) => {\n-      const logger = fastify.log.child({ req });\n+      const logger = fastify.log.child({ req, res: reply });\n \n       if (req.validationError) {\n-        logger.warn({ validationError: req.validationError });\n+        logger.warn('Validation error', {\n+          validationError: req.validationError\n+        });\n         void reply.code(400);\n         return await reply.send({\n           type: 'danger',"
        },
        {
            "sha": "ca956ee65980a710563bf523f61f1eff6447634b",
            "filename": "api/src/utils/env.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Futils%2Fenv.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Futils%2Fenv.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Futils%2Fenv.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -72,12 +72,18 @@ function isLogLevel(level: string): level is LogLevel {\n }\n \n const _FCC_API_LOG_LEVEL = process.env.FCC_API_LOG_LEVEL || 'info';\n+const _FCC_API_LOG_TRANSPORT = process.env.FCC_API_LOG_TRANSPORT || 'default ';\n \n assert.ok(\n   isLogLevel(_FCC_API_LOG_LEVEL),\n   `FCC_API_LOG_LEVEL must be one of ${LOG_LEVELS.join(', ')}. Found ${_FCC_API_LOG_LEVEL}`\n );\n \n+assert.ok(\n+  _FCC_API_LOG_TRANSPORT === 'pretty' || _FCC_API_LOG_TRANSPORT === 'default',\n+  `FCC_API_LOG_TRANSPORT must be one of 'pretty' or 'default'. Found ${_FCC_API_LOG_TRANSPORT}`\n+);\n+\n if (process.env.FREECODECAMP_NODE_ENV !== 'development') {\n   assert.ok(process.env.SES_ID);\n   assert.ok(process.env.SES_SECRET);\n@@ -178,6 +184,7 @@ export const FCC_ENABLE_SWAGGER_UI = undefinedOrBool(\n export const FCC_ENABLE_DEV_LOGIN_MODE =\n   process.env.FCC_ENABLE_DEV_LOGIN_MODE === 'true';\n export const FCC_API_LOG_LEVEL = _FCC_API_LOG_LEVEL;\n+export const FCC_API_LOG_TRANSPORT = _FCC_API_LOG_TRANSPORT;\n export const FCC_ENABLE_SHADOW_CAPTURE = undefinedOrBool(\n   process.env.FCC_ENABLE_SHADOW_CAPTURE\n );"
        },
        {
            "sha": "ba3fb919998a2d6511cdbdb3660c2379a76bf639",
            "filename": "api/src/utils/logger.ts",
            "status": "added",
            "additions": 74,
            "deletions": 0,
            "changes": 74,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Futils%2Flogger.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/api%2Fsrc%2Futils%2Flogger.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Futils%2Flogger.ts?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -0,0 +1,74 @@\n+import pino, { TransportTargetOptions } from 'pino';\n+import { FastifyRequest, FastifyReply } from 'fastify';\n+import { isEmpty } from 'lodash';\n+import { FCC_API_LOG_LEVEL, FCC_API_LOG_TRANSPORT } from './env';\n+\n+const transportOptionsPretty: TransportTargetOptions = {\n+  target: 'pino-pretty',\n+  options: {\n+    singleLine: true,\n+    translateTime: 'HH:MM:ss Z',\n+    ignore: 'pid,hostname',\n+    colorize: true\n+  }\n+};\n+\n+const serializersPretty = {\n+  req: (req: FastifyRequest) => {\n+    return {\n+      REQ_METHOD: req.method,\n+      REQ_URL: req.url\n+    };\n+  }\n+};\n+\n+const serializersDefault = {\n+  req: (req: FastifyRequest) => {\n+    const method = req.method || 'METHOD not found';\n+    const url = req.url || 'URL not found';\n+    const xForwardedFor = Array.isArray(req.headers['x-forwarded-for'])\n+      ? req.headers['x-forwarded-for'][0]\n+      : req.headers['x-forwarded-for'];\n+    const ip =\n+      req.headers['cf-connecting-ip'] ||\n+      xForwardedFor ||\n+      req.headers['x-real-ip'] ||\n+      req.ip ||\n+      'IP not found';\n+    const userAgent = req.headers['user-agent'] || 'USER_AGENT not found';\n+    const country = req.headers['cf-ipcountry'] || 'COUNTRY not found';\n+    const query = isEmpty(req.query) ? 'QUERY not found' : req.query;\n+\n+    return {\n+      REQ_METHOD: method,\n+      REQ_URL: url,\n+      REQ_IP: ip,\n+      REQ_USER_AGENT: userAgent,\n+      REQ_COUNTRY: country,\n+      REQ_QUERY: query\n+    };\n+  },\n+  res: (reply: FastifyReply) => {\n+    return {\n+      RES_STATUS_CODE: reply.statusCode,\n+      RES_RESPONSE_TIME: reply.elapsedTime\n+    };\n+  }\n+};\n+\n+/**\n+ * Get a logger instance with the default options.\n+ *\n+ * @returns A logger instance with the default options.\n+ */\n+export const getLogger = () => {\n+  const isPretty = FCC_API_LOG_TRANSPORT === 'pretty';\n+  const options = {\n+    level: FCC_API_LOG_LEVEL || 'info',\n+    serializers: isPretty ? serializersPretty : serializersDefault\n+  };\n+\n+  return isPretty\n+    ? pino({ ...options, transport: transportOptionsPretty })\n+    : pino(options);\n+};"
        },
        {
            "sha": "3ab79ac27f81afcd7181be75174a108e7a1d4c78",
            "filename": "pnpm-lock.yaml",
            "status": "modified",
            "additions": 17,
            "deletions": 1,
            "changes": 18,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/pnpm-lock.yaml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/pnpm-lock.yaml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/pnpm-lock.yaml?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -194,6 +194,9 @@ importers:\n       '@sentry/node':\n         specifier: 9.1.0\n         version: 9.1.0\n+      '@types/pino':\n+        specifier: ^7.0.5\n+        version: 7.0.5\n       ajv:\n         specifier: 8.12.0\n         version: 8.12.0\n@@ -236,6 +239,9 @@ importers:\n       nodemailer:\n         specifier: 6.9.10\n         version: 6.9.10\n+      pino:\n+        specifier: ^9.6.0\n+        version: 9.6.0\n       pino-pretty:\n         specifier: 10.2.3\n         version: 10.2.3\n@@ -5134,6 +5140,10 @@ packages:\n   '@types/pg@8.6.1':\n     resolution: {integrity: sha512-1Kc4oAGzAl7uqUStZCDvaLFqZrW9qWSjXOmBfdgyBP5La7Us6Mg4GBvRlSoaZMhQF/zSj1C8CtKMBkoiT8eL8w==}\n \n+  '@types/pino@7.0.5':\n+    resolution: {integrity: sha512-wKoab31pknvILkxAF8ss+v9iNyhw5Iu/0jLtRkUD74cNfOOLJNnqfFKAv0r7wVaTQxRZtWrMpGfShwwBjOcgcg==}\n+    deprecated: This is a stub types definition. pino provides its own type definitions, so you do not need this installed.\n+\n   '@types/prismjs@1.26.0':\n     resolution: {integrity: sha512-ZTaqn/qSqUuAq1YwvOFQfVW1AR/oQJlLSZVustdjwI+GZ8kr0MSHBj0tsXPW1EqHubx50gtBEjbPGsdZwQwCjQ==}\n \n@@ -8526,6 +8536,7 @@ packages:\n \n   formidable@2.1.2:\n     resolution: {integrity: sha512-CM3GuJ57US06mlpQ47YcunuUZ9jpm8Vx+P2CGt2j7HpgkKZO/DJYQ0Bobim8G6PFQmK5lOqOOdUXboU+h73A4g==}\n+    deprecated: 'ACTION REQUIRED: SWITCH TO v3 - v1 and v2 are VULNERABLE! v1 is DEPRECATED FOR OVER 2 YEARS! Use formidable@latest or try formidable-mini for fresh projects'\n \n   forwarded-parse@2.1.2:\n     resolution: {integrity: sha512-alTFZZQDKMporBH77856pXgzhEzaUVmLCDk+egLgIgHst3Tpndzz8MnKe+GzRJRfvVdn69HhpW7cmXzvtLvJAw==}\n@@ -15351,6 +15362,7 @@ packages:\n   yurnalist@2.1.0:\n     resolution: {integrity: sha512-PgrBqosQLM3gN2xBFIMDLACRTV9c365VqityKKpSTWpwR+U4LAFR3rSVyEoscWlu3EzX9+Y0I86GXUKxpHFl6w==}\n     engines: {node: '>=4.0.0'}\n+    deprecated: Package no longer supported. Contact Support at https://www.npmjs.com/support for more info.\n \n   zod@3.23.8:\n     resolution: {integrity: sha512-XBx9AXhXktjUqnepgTiE5flcKIYWi/rme0Eaj+5Y0lftuGBq+jyRu/md4WnuxqgP1ubdpNCsYEYPxrzVHD8d6g==}\n@@ -21569,6 +21581,10 @@ snapshots:\n       pg-protocol: 1.8.0\n       pg-types: 2.2.0\n \n+  '@types/pino@7.0.5':\n+    dependencies:\n+      pino: 9.6.0\n+\n   '@types/prismjs@1.26.0': {}\n \n   '@types/prop-types@15.7.8': {}\n@@ -32595,7 +32611,7 @@ snapshots:\n \n   send@1.2.0:\n     dependencies:\n-      debug: 4.3.7\n+      debug: 4.4.0\n       encodeurl: 2.0.0\n       escape-html: 1.0.3\n       etag: 1.8.1"
        },
        {
            "sha": "fbed968b62c632f374770bfbc400504509d4b9f9",
            "filename": "sample.env",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/008e35d851ca10f6b1714de3a1135835e2a7ba3e/sample.env",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/008e35d851ca10f6b1714de3a1135835e2a7ba3e/sample.env",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/sample.env?ref=008e35d851ca10f6b1714de3a1135835e2a7ba3e",
            "patch": "@@ -74,6 +74,7 @@ FCC_ENABLE_SHADOW_CAPTURE=false\n FCC_ENABLE_EXAM_ENVIRONMENT=false\n FCC_ENABLE_SENTRY_ROUTES=false\n FCC_API_LOG_LEVEL=info\n+FCC_API_LOG_TRANSPORT=pretty\n \n # Email\n # use ses in production"
        }
    ],
    "stats": {
        "total": 296,
        "additions": 170,
        "deletions": 126
    }
}