{
    "author": "ojeytonwilliams",
    "message": "refactor: use cert as key (#64293)",
    "sha": "9d8cbcff5ab067370d6db548d55a3e219f76d85c",
    "files": [
        {
            "sha": "538de1c2200717f8b97e4c4a3740405ab15098ce",
            "filename": "api/src/routes/protected/certificate.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/9d8cbcff5ab067370d6db548d55a3e219f76d85c/api%2Fsrc%2Froutes%2Fprotected%2Fcertificate.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/9d8cbcff5ab067370d6db548d55a3e219f76d85c/api%2Fsrc%2Froutes%2Fprotected%2Fcertificate.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fprotected%2Fcertificate.ts?ref=9d8cbcff5ab067370d6db548d55a3e219f76d85c",
            "patch": "@@ -6,7 +6,7 @@ import { getChallenges } from '../../utils/get-challenges.js';\n import {\n   certIds,\n   certSlugTypeMap,\n-  certTypeTitleMap,\n+  certToTitleMap,\n   certTypes,\n   currentCertifications,\n   legacyCertifications,\n@@ -298,7 +298,7 @@ export const protectedCertificateRoutes: FastifyPluginCallbackTypebox = (\n       }\n \n       const certType = certSlugTypeMap[certSlug];\n-      const certName = certTypeTitleMap[certType];\n+      const certName = certToTitleMap[certSlug];\n \n       const user = await fastify.prisma.user.findUnique({\n         where: { id: req.user?.id }"
        },
        {
            "sha": "a3dfc10979efe0022c2262684853ee8c6e797434",
            "filename": "api/src/routes/public/certificate.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/9d8cbcff5ab067370d6db548d55a3e219f76d85c/api%2Fsrc%2Froutes%2Fpublic%2Fcertificate.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/9d8cbcff5ab067370d6db548d55a3e219f76d85c/api%2Fsrc%2Froutes%2Fpublic%2Fcertificate.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fpublic%2Fcertificate.ts?ref=9d8cbcff5ab067370d6db548d55a3e219f76d85c",
            "patch": "@@ -4,7 +4,7 @@ import { find } from 'lodash-es';\n import * as schemas from '../../schemas.js';\n import {\n   certSlugTypeMap,\n-  certTypeTitleMap,\n+  certToTitleMap,\n   certTypeIdMap,\n   completionHours,\n   oldDataVizId\n@@ -53,7 +53,7 @@ export const unprotectedCertificateRoutes: FastifyPluginCallbackTypebox = (\n \n       const certType = certSlugTypeMap[certSlug];\n       const certId = certTypeIdMap[certType];\n-      const certTitle = certTypeTitleMap[certType];\n+      const certTitle = certToTitleMap[certSlug];\n       const completionTime = completionHours[certType] || 300;\n       const user = await fastify.prisma.user.findFirst({\n         where: { username },\n@@ -180,16 +180,15 @@ export const unprotectedCertificateRoutes: FastifyPluginCallbackTypebox = (\n       }\n \n       if (!user[certType]) {\n-        const cert = certTypeTitleMap[certType];\n         logger.info(\n-          `User ${username} has not completed the ${cert} certification.`\n+          `User ${username} has not completed the ${certTitle} certification.`\n         );\n         return reply.send({\n           messages: [\n             {\n               type: 'info',\n               message: 'flash.user-not-certified',\n-              variables: { username, cert }\n+              variables: { username, cert: certTitle }\n             }\n           ]\n         });"
        },
        {
            "sha": "76c5832935eefa1ee033b1afd44438619d724a6d",
            "filename": "client/src/redux/selectors.js",
            "status": "modified",
            "additions": 3,
            "deletions": 12,
            "changes": 15,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/9d8cbcff5ab067370d6db548d55a3e219f76d85c/client%2Fsrc%2Fredux%2Fselectors.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/9d8cbcff5ab067370d6db548d55a3e219f76d85c/client%2Fsrc%2Fredux%2Fselectors.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Fselectors.js?ref=9d8cbcff5ab067370d6db548d55a3e219f76d85c",
            "patch": "@@ -2,7 +2,7 @@ import { createSelector } from 'reselect';\n import { liveCerts } from '../../config/cert-and-project-map';\n import {\n   certTypeIdMap,\n-  certTypeTitleMap\n+  certToTitleMap\n } from '../../../shared-dist/config/certification-settings.js';\n \n import { randomBetween } from '../utils/random-between';\n@@ -238,18 +238,10 @@ export const claimableCertsSelector = createSelector([userSelector], user => {\n     },\n     {}\n   );\n-  // Invert certTypeIdMap ({[userFlag]: certId}  => {[certId]: userFlag}) to get certType from id\n-  const invertedCertTypeIdMap = Object.entries(certTypeIdMap).reduce(\n-    (acc, [userFlag, certId]) => {\n-      acc[certId] = userFlag;\n-      return acc;\n-    },\n-    {}\n-  );\n \n   const claimable = [];\n \n-  for (const { id, projects } of liveCerts) {\n+  for (const { id, projects, certSlug } of liveCerts) {\n     if (!projects) continue;\n     if (isClaimedById[id]) continue;\n \n@@ -258,8 +250,7 @@ export const claimableCertsSelector = createSelector([userSelector], user => {\n       completedChallengeIds.includes(id)\n     );\n \n-    const certType = invertedCertTypeIdMap[id];\n-    const certTitle = certTypeTitleMap[certType];\n+    const certTitle = certToTitleMap[certSlug];\n     if (allProjectsComplete) {\n       claimable.push({\n         certTitle"
        },
        {
            "sha": "132840506a2f9c231d0800a55a903c2a7dce245e",
            "filename": "shared/config/certification-settings.test.ts",
            "status": "modified",
            "additions": 14,
            "deletions": 1,
            "changes": 15,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/9d8cbcff5ab067370d6db548d55a3e219f76d85c/shared%2Fconfig%2Fcertification-settings.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/9d8cbcff5ab067370d6db548d55a3e219f76d85c/shared%2Fconfig%2Fcertification-settings.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/shared%2Fconfig%2Fcertification-settings.test.ts?ref=9d8cbcff5ab067370d6db548d55a3e219f76d85c",
            "patch": "@@ -1,5 +1,9 @@\n import { describe, it, expect } from 'vitest';\n-import { Certification, linkedInCredentialIds } from './certification-settings';\n+import {\n+  Certification,\n+  linkedInCredentialIds,\n+  certToTitleMap\n+} from './certification-settings';\n \n describe('linkedInCredentialIds', () => {\n   it('should contain a value for all certifications', () => {\n@@ -9,3 +13,12 @@ describe('linkedInCredentialIds', () => {\n     expect(linkedInCredentialIdsKeys).toEqual(allCertifications);\n   });\n });\n+\n+describe('certToTitleMap', () => {\n+  it('should not contain duplicate titles', () => {\n+    const titles = Object.values(certToTitleMap);\n+    const uniqueTitles = Array.from(new Set(titles));\n+\n+    expect(titles.length).toBe(uniqueTitles.length);\n+  });\n+});"
        },
        {
            "sha": "07c7b90f1a58281bf58c5fae2ce2f765bbbf8466",
            "filename": "shared/config/certification-settings.ts",
            "status": "modified",
            "additions": 39,
            "deletions": 23,
            "changes": 62,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/9d8cbcff5ab067370d6db548d55a3e219f76d85c/shared%2Fconfig%2Fcertification-settings.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/9d8cbcff5ab067370d6db548d55a3e219f76d85c/shared%2Fconfig%2Fcertification-settings.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/shared%2Fconfig%2Fcertification-settings.ts?ref=9d8cbcff5ab067370d6db548d55a3e219f76d85c",
            "patch": "@@ -269,31 +269,47 @@ export const certTypeIdMap = {\n   [certTypes.a2English]: certIds.a2EnglishId\n };\n \n-export const certTypeTitleMap = {\n-  [certTypes.frontEnd]: 'Legacy Front End',\n-  [certTypes.backEnd]: 'Legacy Back End',\n-  [certTypes.dataVis]: 'Legacy Data Visualization',\n-  [certTypes.infosecQa]: 'Legacy Information Security and Quality Assurance',\n-  [certTypes.fullStack]: 'Legacy Full Stack',\n-  [certTypes.respWebDesign]: 'Legacy Responsive Web Design V8',\n-  [certTypes.respWebDesignV9]: 'Responsive Web Design',\n-  [certTypes.frontEndDevLibs]: 'Front End Development Libraries V8',\n-  [certTypes.jsAlgoDataStruct]:\n+// TODO: use i18n keys instead of hardcoded titles\n+export const certToTitleMap: Record<Certification, string> = {\n+  // Legacy certifications\n+  [Certification.LegacyFrontEnd]: 'Legacy Front End',\n+  [Certification.JsAlgoDataStruct]:\n     'Legacy JavaScript Algorithms and Data Structures V7',\n-  [certTypes.dataVis2018]: 'Data Visualization V8',\n-  [certTypes.apisMicroservices]: 'Back End Development and APIs V8',\n-  [certTypes.qaV7]: 'Quality Assurance',\n-  [certTypes.infosecV7]: 'Information Security',\n-  [certTypes.sciCompPyV7]: 'Scientific Computing with Python',\n-  [certTypes.dataAnalysisPyV7]: 'Data Analysis with Python',\n-  [certTypes.machineLearningPyV7]: 'Machine Learning with Python',\n-  [certTypes.relationalDatabaseV8]: 'Relational Database V8',\n-  [certTypes.collegeAlgebraPyV8]: 'College Algebra with Python',\n-  [certTypes.foundationalCSharpV8]: 'Foundational C# with Microsoft',\n-  [certTypes.jsAlgoDataStructV8]:\n+  [Certification.LegacyBackEnd]: 'Legacy Back End',\n+  [Certification.LegacyDataVis]: 'Legacy Data Visualization',\n+  [Certification.LegacyInfoSecQa]:\n+    'Legacy Information Security and Quality Assurance',\n+  [Certification.LegacyFullStack]: 'Legacy Full Stack',\n+\n+  // Current certifications\n+  [Certification.RespWebDesign]: 'Legacy Responsive Web Design V8',\n+  [Certification.JsAlgoDataStructNew]:\n     'Legacy JavaScript Algorithms and Data Structures V8',\n-  [certTypes.javascriptV9]: 'JavaScript',\n-  [certTypes.a2English]: 'A2 English for Developers'\n+  [Certification.FrontEndDevLibs]: 'Front End Development Libraries V8',\n+  [Certification.DataVis]: 'Data Visualization V8',\n+  [Certification.BackEndDevApis]: 'Back End Development and APIs V8',\n+  [Certification.QualityAssurance]: 'Quality Assurance',\n+  [Certification.InfoSec]: 'Information Security',\n+  [Certification.SciCompPy]: 'Scientific Computing with Python',\n+  [Certification.DataAnalysisPy]: 'Data Analysis with Python',\n+  [Certification.MachineLearningPy]: 'Machine Learning with Python',\n+  [Certification.RelationalDb]: 'Relational Database V8',\n+  [Certification.CollegeAlgebraPy]: 'College Algebra with Python',\n+  [Certification.FoundationalCSharp]: 'Foundational C# with Microsoft',\n+  [Certification.A2English]: 'A2 English for Developers',\n+\n+  // Upcoming certifications\n+  [Certification.RespWebDesignV9]: 'Responsive Web Design',\n+  [Certification.JsV9]: 'JavaScript',\n+  [Certification.FrontEndDevLibsV9]: 'Front End Development Libraries',\n+  [Certification.PythonV9]: 'Python',\n+  [Certification.RelationalDbV9]: 'Relational Database',\n+  [Certification.BackEndDevApisV9]: 'Back End Development and APIs',\n+  [Certification.FullStackDeveloperV9]: 'Full Stack Developer',\n+  [Certification.B1English]: 'B1 English for Developers',\n+  [Certification.A2Spanish]: 'A2 Professional Spanish',\n+  [Certification.A2Chinese]: 'A2 Professional Chinese',\n+  [Certification.A1Chinese]: 'A1 Professional Chinese'\n };\n \n export const superBlockToCertMap: {"
        },
        {
            "sha": "634acf7aa65cb01df4b8712445c75104ef2e80a8",
            "filename": "shared/config/challenge-types.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/9d8cbcff5ab067370d6db548d55a3e219f76d85c/shared%2Fconfig%2Fchallenge-types.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/9d8cbcff5ab067370d6db548d55a3e219f76d85c/shared%2Fconfig%2Fchallenge-types.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/shared%2Fconfig%2Fchallenge-types.ts?ref=9d8cbcff5ab067370d6db548d55a3e219f76d85c",
            "patch": "@@ -174,15 +174,15 @@ export const canSaveToDB = (challengeType: number): boolean =>\n   challengeType === challengeTypes.multifileCertProject ||\n   challengeType === challengeTypes.multifilePythonCertProject;\n \n-export const dailyCodingChallengeTypes = [\n+const dailyCodingChallengeTypes = [\n   challengeTypes.dailyChallengeJs,\n   challengeTypes.dailyChallengePy\n ];\n \n export const getIsDailyCodingChallenge = (challengeType: number): boolean =>\n   dailyCodingChallengeTypes.includes(challengeType);\n \n-export const dailyCodingChallengeLanguages = {\n+const dailyCodingChallengeLanguages = {\n   [challengeTypes.dailyChallengeJs]: 'javascript',\n   [challengeTypes.dailyChallengePy]: 'python'\n };"
        }
    ],
    "stats": {
        "total": 109,
        "additions": 64,
        "deletions": 45
    }
}