{
    "author": "huyenltnguyen",
    "message": "fix(client): use Gatsby Link for internal links (#55350)\n\nCo-authored-by: Oliver Eyton-Williams <ojeytonwilliams@gmail.com>",
    "sha": "a36ef8daec314a85b35290b7326c0ef964916a1a",
    "files": [
        {
            "sha": "b99213ac40e11062d6439bc0a22e163e56c0f1ed",
            "filename": "client/src/components/Map/index.tsx",
            "status": "modified",
            "additions": 8,
            "deletions": 3,
            "changes": 11,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a36ef8daec314a85b35290b7326c0ef964916a1a/client%2Fsrc%2Fcomponents%2FMap%2Findex.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a36ef8daec314a85b35290b7326c0ef964916a1a/client%2Fsrc%2Fcomponents%2FMap%2Findex.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FMap%2Findex.tsx?ref=a36ef8daec314a85b35290b7326c0ef964916a1a",
            "patch": "@@ -10,7 +10,7 @@ import {\n } from '../../../../shared/config/superblocks';\n import { SuperBlockIcon } from '../../assets/icons/superblock-icon';\n import LinkButton from '../../assets/icons/link-button';\n-import { Link, Spacer } from '../helpers';\n+import { Spacer, ButtonLink } from '../helpers';\n import { getSuperBlockTitleForMap } from '../../utils/superblock-map-titles';\n import { showUpcomingChanges } from '../../../config/env.json';\n \n@@ -102,13 +102,18 @@ function MapLi({\n           </div>\n         </div>\n \n-        <Link className='btn link-btn btn-lg' to={`/learn/${superBlock}/`}>\n+        <ButtonLink\n+          block\n+          size='large'\n+          className='map-superblock-link'\n+          href={`/learn/${superBlock}/`}\n+        >\n           <div style={linkSpacingStyle}>\n             <SuperBlockIcon className='map-icon' superBlock={superBlock} />\n             {getSuperBlockTitleForMap(superBlock)}\n           </div>\n           {landing && <LinkButton />}\n-        </Link>\n+        </ButtonLink>\n       </li>\n     </>\n   );"
        },
        {
            "sha": "8287bd126976ea4d3bc3ab1acddd4048a3c1649e",
            "filename": "client/src/components/helpers/button-link.tsx",
            "status": "added",
            "additions": 79,
            "deletions": 0,
            "changes": 79,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a36ef8daec314a85b35290b7326c0ef964916a1a/client%2Fsrc%2Fcomponents%2Fhelpers%2Fbutton-link.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a36ef8daec314a85b35290b7326c0ef964916a1a/client%2Fsrc%2Fcomponents%2Fhelpers%2Fbutton-link.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fhelpers%2Fbutton-link.tsx?ref=a36ef8daec314a85b35290b7326c0ef964916a1a",
            "patch": "@@ -0,0 +1,79 @@\n+import React from 'react';\n+import { Link as GatsbyLink } from 'gatsby';\n+import { Button } from '@freecodecamp/ui';\n+\n+export type ButtonSize = 'small' | 'medium' | 'large';\n+\n+interface Props extends React.AnchorHTMLAttributes<HTMLAnchorElement> {\n+  children: React.ReactNode;\n+  href: string;\n+  className?: string;\n+  size?: ButtonSize;\n+  onClick?: React.MouseEventHandler<HTMLAnchorElement>;\n+  block?: boolean;\n+  download?: string;\n+  target?: React.HTMLAttributeAnchorTarget;\n+  disabled?: boolean;\n+}\n+\n+/**\n+ * ButtonLink is a link that looks like a button.\n+ * The component renders:\n+ * - Internal link with Gatsby's Link component\n+ * - External link with freecodecamp/ui's Button component,\n+ *   which renders a plain `<a>` if it receives an `href`.\n+ * NOTE: We probably want to move this component to @freecodecamp/ui.\n+ */\n+export const ButtonLink = ({\n+  className,\n+  children,\n+  href,\n+  target,\n+  download,\n+  onClick,\n+  size = 'medium',\n+  block,\n+  disabled\n+}: Props) => {\n+  // We only need to compute the styles of `size` and `block` for Gatsby Link.\n+  // freecodecamp/ui's Button already has the logic implemented.\n+  const cls = ['btn'];\n+  if (block) cls.push('btn-block');\n+  // The 'btn' class contains the base button styles as well as the `medium` variant styles.\n+  // So we only need to handle `large` and `small`.\n+  if (size === 'large') cls.push('btn-lg');\n+  if (size === 'small') cls.push('btn-sm');\n+  if (className) cls.push(className);\n+  const gatsbyLinkCls = cls.join(' ');\n+\n+  // Links cannot be disabled. So if `disabled` is true,\n+  // we pass the prop to `Button` in order to render a `<button>` instead of an `<a>`.\n+  if (disabled || target === '_blank' || download) {\n+    return (\n+      <Button\n+        variant='primary'\n+        className={className}\n+        href={href}\n+        target={target}\n+        onClick={onClick}\n+        download={download}\n+        size={size}\n+        block={block}\n+        disabled={disabled}\n+      >\n+        {children}\n+      </Button>\n+    );\n+  }\n+\n+  return (\n+    <GatsbyLink\n+      className={gatsbyLinkCls}\n+      to={href}\n+      target={target}\n+      onClick={onClick}\n+    >\n+      {children}\n+    </GatsbyLink>\n+  );\n+};"
        },
        {
            "sha": "9b6a144ee9f772baf999ea62759f4baa134b935c",
            "filename": "client/src/components/helpers/index.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a36ef8daec314a85b35290b7326c0ef964916a1a/client%2Fsrc%2Fcomponents%2Fhelpers%2Findex.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a36ef8daec314a85b35290b7326c0ef964916a1a/client%2Fsrc%2Fcomponents%2Fhelpers%2Findex.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fhelpers%2Findex.ts?ref=a36ef8daec314a85b35290b7326c0ef964916a1a",
            "patch": "@@ -5,3 +5,4 @@ export { default as Spacer } from './spacer';\n export { default as Link } from './link';\n export { default as LazyImage } from './lazy-image';\n export { default as AvatarRenderer } from './avatar-renderer';\n+export { ButtonLink } from './button-link';"
        },
        {
            "sha": "eaa210950e51194a11ecf2912ac62788180ac7c4",
            "filename": "client/src/components/layouts/global.css",
            "status": "modified",
            "additions": 27,
            "deletions": 19,
            "changes": 46,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a36ef8daec314a85b35290b7326c0ef964916a1a/client%2Fsrc%2Fcomponents%2Flayouts%2Fglobal.css",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a36ef8daec314a85b35290b7326c0ef964916a1a/client%2Fsrc%2Fcomponents%2Flayouts%2Fglobal.css",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Flayouts%2Fglobal.css?ref=a36ef8daec314a85b35290b7326c0ef964916a1a",
            "patch": "@@ -291,6 +291,7 @@ input[type='submit'],\n   border-radius: 0;\n   text-decoration: none;\n   white-space: pre-line;\n+  text-align: center;\n }\n \n button:hover,\n@@ -370,21 +371,28 @@ fieldset[disabled] .btn {\n   width: 100%;\n }\n \n-/* Equivalent to the `large` size of `@freecodecamp/ui` Button component */\n-.btn-lg {\n-  padding: 10px 16px;\n-  font-size: 18px;\n-  line-height: 1.3333333;\n-}\n-\n /* Equivalent to the `medium` size of `@freecodecamp/ui` Button component */\n .btn {\n   padding: 6px 12px;\n   font-size: 18px;\n   line-height: 1.42857143;\n }\n \n-.link-btn {\n+/* Equivalent to the `large` size of `@freecodecamp/ui` Button component */\n+.btn-lg {\n+  padding: 0.625rem 1rem;\n+  font-size: 24px;\n+  line-height: 1.3333333;\n+}\n+\n+/* Equivalent to the `small` size of `@freecodecamp/ui` Button component */\n+.btn-sm {\n+  padding: 0.25rem 0.625rem;\n+  font-size: 16px;\n+  line-height: 1.5;\n+}\n+\n+.map-superblock-link {\n   margin-bottom: 10px;\n   display: flex;\n   justify-content: space-between;\n@@ -394,42 +402,42 @@ fieldset[disabled] .btn {\n   text-align: left;\n }\n \n-.link-btn.btn-lg svg {\n+.map-superblock-link.btn-lg svg {\n   height: 100%;\n   min-height: 20px;\n   min-width: 16px;\n   margin-inline-start: 5px;\n }\n \n-.link-btn:active {\n+.map-superblock-link:active {\n   background-color: var(--quaternary-background);\n }\n \n-.link-btn:focus,\n-.link-btn.btn-lg:focus svg {\n+.map-superblock-link:focus,\n+.map-superblock-link.btn-lg:focus svg {\n   fill: var(--quaternary-background);\n   background-color: var(--secondary-color);\n   border-color: var(--gray-45);\n   color: var(--secondary-background);\n }\n \n-.link-btn:focus:not(:focus-visible),\n-.link-btn.btn-lg:focus:not(:focus-visible) svg {\n+.map-superblock-link:focus:not(:focus-visible),\n+.map-superblock-link.btn-lg:focus:not(:focus-visible) svg {\n   background-color: var(--quaternary-background);\n   border-color: var(--secondary-color);\n   color: var(--secondary-color);\n   fill: var(--primary-color);\n }\n \n-.link-btn:hover,\n-.link-btn.btn-lg:hover svg {\n+.map-superblock-link:hover,\n+.map-superblock-link.btn-lg:hover svg {\n   fill: var(--quaternary-background) !important;\n   background-color: var(--secondary-color) !important;\n   border-color: var(--secondary-color) !important;\n   color: var(--secondary-background) !important;\n }\n \n-.link-btn.btn-lg svg,\n+.map-superblock-link.btn-lg svg,\n .map-icon,\n .cert-header-icon {\n   flex-shrink: 0;\n@@ -440,7 +448,7 @@ fieldset[disabled] .btn {\n   fill: var(--quaternary-background);\n }\n \n-.link-btn.btn-lg:hover .map-icon .inverted-color,\n+.map-superblock-link.btn-lg:hover .map-icon .inverted-color,\n .map-arrow-icon {\n   fill: var(--secondary-color);\n }\n@@ -463,7 +471,7 @@ fieldset[disabled] .btn {\n }\n \n @media (min-width: 700px) {\n-  .link-btn {\n+  .map-superblock-link {\n     font-size: 1.1rem;\n   }\n   .map-icon {"
        },
        {
            "sha": "edec36e8604720d1d755984e6e1a99e0c026e887",
            "filename": "client/src/components/layouts/rtl-layout.css",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a36ef8daec314a85b35290b7326c0ef964916a1a/client%2Fsrc%2Fcomponents%2Flayouts%2Frtl-layout.css",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a36ef8daec314a85b35290b7326c0ef964916a1a/client%2Fsrc%2Fcomponents%2Flayouts%2Frtl-layout.css",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Flayouts%2Frtl-layout.css?ref=a36ef8daec314a85b35290b7326c0ef964916a1a",
            "patch": "@@ -23,7 +23,7 @@ Intro project buttons and headings\n  intro to courses section\n */\n \n-[dir='rtl'] .link-btn.btn-lg > svg {\n+[dir='rtl'] .map-superblock-link.btn-lg > svg {\n   transform: rotate(180deg);\n }\n "
        },
        {
            "sha": "35252dc99026a846f4faa61d7f87dc645117f6e3",
            "filename": "client/src/components/profile/components/certifications.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 5,
            "changes": 8,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a36ef8daec314a85b35290b7326c0ef964916a1a/client%2Fsrc%2Fcomponents%2Fprofile%2Fcomponents%2Fcertifications.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a36ef8daec314a85b35290b7326c0ef964916a1a/client%2Fsrc%2Fcomponents%2Fprofile%2Fcomponents%2Fcertifications.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fprofile%2Fcomponents%2Fcertifications.tsx?ref=a36ef8daec314a85b35290b7326c0ef964916a1a",
            "patch": "@@ -2,11 +2,10 @@ import React from 'react';\n import { useTranslation } from 'react-i18next';\n import { connect } from 'react-redux';\n import { createSelector } from 'reselect';\n-import { Button } from '@freecodecamp/ui';\n \n import { certificatesByNameSelector } from '../../../redux/selectors';\n import type { CurrentCert } from '../../../redux/prop-types';\n-import { FullWidthRow, Spacer } from '../../helpers';\n+import { FullWidthRow, Spacer, ButtonLink } from '../../helpers';\n \n const mapStateToProps = (\n   state: Record<string, unknown>,\n@@ -47,16 +46,15 @@ function CertButton({ username, cert }: CertButtonProps): JSX.Element {\n   const { t } = useTranslation();\n   return (\n     <>\n-      <Button\n+      <ButtonLink\n         block\n         size='large'\n         href={`/certification/${username}/${cert.certSlug}`}\n-        data-playwright-test-label='claimed-certification'\n       >\n         {t('buttons.view-cert-title', {\n           certTitle: t(`certification.title.${cert.certSlug}`)\n         })}\n-      </Button>\n+      </ButtonLink>\n       <Spacer size='small' />\n     </>\n   );"
        },
        {
            "sha": "d0e9f6a16f95f401bde180730368688ce7c3b9a2",
            "filename": "client/src/templates/Introduction/components/challenges.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a36ef8daec314a85b35290b7326c0ef964916a1a/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fchallenges.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a36ef8daec314a85b35290b7326c0ef964916a1a/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fchallenges.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fchallenges.tsx?ref=a36ef8daec314a85b35290b7326c0ef964916a1a",
            "patch": "@@ -2,13 +2,12 @@ import { Link } from 'gatsby';\n import React from 'react';\n import { withTranslation, useTranslation } from 'react-i18next';\n \n-import { Button } from '@freecodecamp/ui';\n-\n import GreenNotCompleted from '../../../assets/icons/green-not-completed';\n import GreenPass from '../../../assets/icons/green-pass';\n import { ChallengeWithCompletedNode } from '../../../redux/prop-types';\n import { SuperBlocks } from '../../../../../shared/config/superblocks';\n import { challengeTypes } from '../../../../../shared/config/challenge-types';\n+import { ButtonLink } from '../../../components/helpers/button-link';\n \n const getStepNumber = (dashedName: string) => {\n   // dashedName should be in the format 'step-1' or 'task-1'\n@@ -68,12 +67,12 @@ function Challenges({\n     <>\n       {firstIncompleteChallenge && (\n         <div className='challenge-jump-link'>\n-          <Button size='small' href={firstIncompleteChallenge.fields.slug}>\n+          <ButtonLink size='small' href={firstIncompleteChallenge.fields.slug}>\n             {!isChallengeStarted\n               ? t('buttons.start-project')\n               : t('buttons.resume-project')}{' '}\n             {blockTitle && <span className='sr-only'>{blockTitle}</span>}\n-          </Button>\n+          </ButtonLink>\n         </div>\n       )}\n       <nav"
        },
        {
            "sha": "29de1baa97b047492c16350e02bdb83a8cd38820",
            "filename": "client/src/templates/Introduction/intro.tsx",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a36ef8daec314a85b35290b7326c0ef964916a1a/client%2Fsrc%2Ftemplates%2FIntroduction%2Fintro.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a36ef8daec314a85b35290b7326c0ef964916a1a/client%2Fsrc%2Ftemplates%2FIntroduction%2Fintro.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FIntroduction%2Fintro.tsx?ref=a36ef8daec314a85b35290b7326c0ef964916a1a",
            "patch": "@@ -3,8 +3,8 @@ import React from 'react';\n import Helmet from 'react-helmet';\n import { useTranslation } from 'react-i18next';\n \n-import { Container, Button } from '@freecodecamp/ui';\n-import Spacer from '../../components/helpers/spacer';\n+import { Container } from '@freecodecamp/ui';\n+import { Spacer, ButtonLink } from '../../components/helpers';\n import FullWidthRow from '../../components/helpers/full-width-row';\n import LearnLayout from '../../components/layouts/learn';\n import type { MarkdownRemark, AllChallengeNode } from '../../redux/prop-types';\n@@ -44,13 +44,13 @@ function IntroductionPage({\n           />\n         </FullWidthRow>\n         <FullWidthRow>\n-          <Button block size='large' href={firstLessonPath}>\n+          <ButtonLink block size='large' href={firstLessonPath}>\n             {t('buttons.first-lesson')}\n-          </Button>\n+          </ButtonLink>\n           <Spacer size='small' />\n-          <Button block size='large' href='/learn'>\n+          <ButtonLink block size='large' href='/learn'>\n             {t('buttons.view-curriculum')}\n-          </Button>\n+          </ButtonLink>\n           <Spacer size='small' />\n           <hr />\n         </FullWidthRow>"
        },
        {
            "sha": "75d6f24c297d5b66fab40694908f57e9a36ad428",
            "filename": "e2e/cert-username-case-navigation.spec.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a36ef8daec314a85b35290b7326c0ef964916a1a/e2e%2Fcert-username-case-navigation.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a36ef8daec314a85b35290b7326c0ef964916a1a/e2e%2Fcert-username-case-navigation.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fcert-username-case-navigation.spec.ts?ref=a36ef8daec314a85b35290b7326c0ef964916a1a",
            "patch": "@@ -15,7 +15,9 @@ test.describe('Public profile certifications', () => {\n         .click();\n     }\n \n-    await expect(page.getByTestId('claimed-certification')).toHaveCount(19);\n+    await expect(\n+      page.getByRole('link', { name: /View.+Certification/ })\n+    ).toHaveCount(19);\n   });\n \n   test('Should show claimed certifications if the username includes uppercase characters', async ({\n@@ -37,7 +39,9 @@ test.describe('Public profile certifications', () => {\n     }\n \n     await page.waitForURL('/certifiedboozer');\n-    await expect(page.getByTestId('claimed-certification')).toHaveCount(19);\n+    await expect(\n+      page.getByRole('link', { name: /View.+Certification/ })\n+    ).toHaveCount(19);\n   });\n \n   test.afterAll(() => {"
        }
    ],
    "stats": {
        "total": 174,
        "additions": 134,
        "deletions": 40
    }
}