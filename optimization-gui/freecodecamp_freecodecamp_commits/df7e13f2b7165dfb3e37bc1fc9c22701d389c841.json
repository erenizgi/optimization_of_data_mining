{
    "author": "X1Vi",
    "message": "fix: now pane remembers state (#57368)\n\nCo-authored-by: root <root@DESKTOP-G3MCU14>",
    "sha": "df7e13f2b7165dfb3e37bc1fc9c22701d389c841",
    "files": [
        {
            "sha": "6ba7f60a2c028ec6280d94cd760d1616b87fefe4",
            "filename": "client/src/templates/Challenges/classic/desktop-layout.tsx",
            "status": "modified",
            "additions": 72,
            "deletions": 3,
            "changes": 75,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/df7e13f2b7165dfb3e37bc1fc9c22701d389c841/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fdesktop-layout.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/df7e13f2b7165dfb3e37bc1fc9c22701d389c841/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fdesktop-layout.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fdesktop-layout.tsx?ref=df7e13f2b7165dfb3e37bc1fc9c22701d389c841",
            "patch": "@@ -3,6 +3,7 @@ import React, { useState, useEffect, ReactElement } from 'react';\n import { ReflexContainer, ReflexSplitter, ReflexElement } from 'react-reflex';\n import { createSelector } from 'reselect';\n import { connect } from 'react-redux';\n+import store from 'store';\n import { sortChallengeFiles } from '../../../../utils/sort-challengefiles';\n import { challengeTypes } from '../../../../../shared/config/challenge-types';\n import {\n@@ -99,9 +100,77 @@ const DesktopLayout = (props: DesktopLayoutProps): JSX.Element => {\n     startWithConsoleShown\n   } = props;\n \n-  const [showNotes, setShowNotes] = useState(false);\n-  const [showConsole, setShowConsole] = useState(startWithConsoleShown);\n-  const [showInstructions, setShowInstructions] = useState(true);\n+  const initialShowState = (key: string, defaultValue: boolean): boolean => {\n+    const savedState: string = store.get('layoutPaneBooleans') as string;\n+    try {\n+      if (savedState) {\n+        const parsedState: Record<string, boolean> = JSON.parse(\n+          savedState\n+        ) as Record<string, boolean>;\n+        return parsedState[key] || defaultValue;\n+      }\n+    } catch (error) {\n+      console.error('Error parsing layoutPaneBooleans from store', error);\n+    }\n+    return defaultValue;\n+  };\n+\n+  const [showNotes, setShowNotes] = useState(() =>\n+    initialShowState('showNotes', false)\n+  );\n+  const [showConsole, setShowConsole] = useState(() =>\n+    initialShowState('showConsole', startWithConsoleShown)\n+  );\n+  const [showInstructions, setShowInstructions] = useState(() =>\n+    initialShowState('showInstructions', true)\n+  );\n+\n+  /* eslint-disable react-hooks/exhaustive-deps */\n+  useEffect(() => {\n+    setShowPreviewPane(initialShowState('showPreviewPane', false));\n+    setShowPreviewPortal(initialShowState('showPreviewPortal', false));\n+  }, []);\n+\n+  useEffect(() => {\n+    const layoutPaneBooleans = {\n+      showNotes,\n+      showConsole,\n+      showInstructions,\n+      showPreviewPane,\n+      showPreviewPortal\n+    };\n+    store.set('layoutPaneBooleans', JSON.stringify(layoutPaneBooleans));\n+  }, [\n+    showNotes,\n+    showConsole,\n+    showInstructions,\n+    showPreviewPane,\n+    showPreviewPortal\n+  ]);\n+\n+  useEffect(() => {\n+    const layoutPaneBooleans: string = store.get(\n+      'layoutPaneBooleans'\n+    ) as string;\n+    if (layoutPaneBooleans) {\n+      let parsedLayoutPaneBooleans: Record<string, boolean> = {};\n+      try {\n+        parsedLayoutPaneBooleans = JSON.parse(layoutPaneBooleans) as Record<\n+          string,\n+          boolean\n+        >;\n+      } catch (error) {\n+        console.error('Error parsing layoutPaneBooleans from store', error);\n+      }\n+      setShowNotes(parsedLayoutPaneBooleans.showNotes || false);\n+      setShowConsole(\n+        parsedLayoutPaneBooleans.showConsole || startWithConsoleShown\n+      );\n+      setShowInstructions(parsedLayoutPaneBooleans.showInstructions || true);\n+      setShowPreviewPane(parsedLayoutPaneBooleans.showPreviewPane || false);\n+      setShowPreviewPortal(parsedLayoutPaneBooleans.showPreviewPortal || false);\n+    }\n+  }, []);\n \n   const togglePane = (pane: string): void => {\n     if (pane === 'showPreviewPane') {"
        }
    ],
    "stats": {
        "total": 75,
        "additions": 72,
        "deletions": 3
    }
}