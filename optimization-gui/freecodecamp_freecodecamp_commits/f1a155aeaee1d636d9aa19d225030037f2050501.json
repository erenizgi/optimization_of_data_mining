{
    "author": "moT01",
    "message": "refactor(client): move queries for map to map component (#59074)",
    "sha": "f1a155aeaee1d636d9aa19d225030037f2050501",
    "files": [
        {
            "sha": "a0b3fce876f5389cb56ae1e4181c6855d60aec62",
            "filename": "client/src/components/Map/index.tsx",
            "status": "modified",
            "additions": 29,
            "deletions": 7,
            "changes": 36,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/f1a155aeaee1d636d9aa19d225030037f2050501/client%2Fsrc%2Fcomponents%2FMap%2Findex.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/f1a155aeaee1d636d9aa19d225030037f2050501/client%2Fsrc%2Fcomponents%2FMap%2Findex.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FMap%2Findex.tsx?ref=f1a155aeaee1d636d9aa19d225030037f2050501",
            "patch": "@@ -3,6 +3,7 @@ import { useTranslation } from 'react-i18next';\n import { connect } from 'react-redux';\n import { createSelector } from 'reselect';\n import { Spacer } from '@freecodecamp/ui';\n+import { graphql, useStaticQuery } from 'gatsby';\n \n import {\n   type SuperBlocks,\n@@ -38,10 +39,17 @@ interface MapProps {\n   currentCerts: CurrentCert[];\n   claimedCertifications?: ClaimedCertifications;\n   completedChallengeIds: string[];\n-  allChallenges: {\n-    id: string;\n-    superBlock: SuperBlocks;\n-  }[];\n+}\n+\n+interface Data {\n+  allChallengeNode: {\n+    nodes: {\n+      challenge: {\n+        id: string;\n+        superBlock: SuperBlocks;\n+      };\n+    }[];\n+  };\n }\n \n const linkSpacingStyle = {\n@@ -128,11 +136,25 @@ function Map({\n   forLanding = false,\n   isSignedIn,\n   currentCerts,\n-  completedChallengeIds,\n-  allChallenges\n+  completedChallengeIds\n }: MapProps): React.ReactElement {\n   const { t } = useTranslation();\n-\n+  const {\n+    allChallengeNode: { nodes: challengeNodes }\n+  }: Data = useStaticQuery(graphql`\n+    query {\n+      allChallengeNode {\n+        nodes {\n+          challenge {\n+            id\n+            superBlock\n+          }\n+        }\n+      }\n+    }\n+  `);\n+\n+  const allChallenges = challengeNodes.map(node => node.challenge);\n   const allSuperblockChallengesCompleted = (superblock: SuperBlocks) => {\n     // array of all challenge ID's in the superblock\n     const allSuperblockChallenges = allChallenges"
        },
        {
            "sha": "7b3a66df237bf5030b605a553bd9dd18cedda24a",
            "filename": "client/src/components/landing/components/certifications.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 10,
            "changes": 12,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/f1a155aeaee1d636d9aa19d225030037f2050501/client%2Fsrc%2Fcomponents%2Flanding%2Fcomponents%2Fcertifications.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/f1a155aeaee1d636d9aa19d225030037f2050501/client%2Fsrc%2Fcomponents%2Flanding%2Fcomponents%2Fcertifications.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Flanding%2Fcomponents%2Fcertifications.tsx?ref=f1a155aeaee1d636d9aa19d225030037f2050501",
            "patch": "@@ -2,17 +2,9 @@ import React from 'react';\n import { Col, Spacer } from '@freecodecamp/ui';\n \n import Map from '../../Map/index';\n-import { type SuperBlocks } from '../../../../../shared/config/curriculum';\n import BigCallToAction from './big-call-to-action';\n \n-const Certifications = ({\n-  allChallenges\n-}: {\n-  allChallenges: {\n-    id: string;\n-    superBlock: SuperBlocks;\n-  }[];\n-}): JSX.Element => {\n+const Certifications = (): JSX.Element => {\n   return (\n     <Col\n       className='certification-section'\n@@ -22,7 +14,7 @@ const Certifications = ({\n       smOffset={1}\n       xs={12}\n     >\n-      <Map allChallenges={allChallenges} forLanding={true} />\n+      <Map forLanding={true} />\n       <Spacer size='m' />\n       <BigCallToAction />\n       <Spacer size='m' />"
        },
        {
            "sha": "caa07a8cb587951d164a7692e6ed238355236e1c",
            "filename": "client/src/pages/index.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 40,
            "changes": 42,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/f1a155aeaee1d636d9aa19d225030037f2050501/client%2Fsrc%2Fpages%2Findex.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/f1a155aeaee1d636d9aa19d225030037f2050501/client%2Fsrc%2Fpages%2Findex.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fpages%2Findex.tsx?ref=f1a155aeaee1d636d9aa19d225030037f2050501",
            "patch": "@@ -1,8 +1,6 @@\n import React from 'react';\n-import { graphql } from 'gatsby';\n import { useTranslation } from 'react-i18next';\n import { useGrowthBook } from '@growthbook/growthbook-react';\n-import { SuperBlocks } from '../../../shared/config/curriculum';\n import SEO from '../components/seo';\n import { Loader } from '../components/helpers';\n import LandingTop from '../components/landing/components/landing-top';\n@@ -14,29 +12,12 @@ import Faq from '../components/landing/components/faq';\n import Benefits from '../components/landing/components/benefits';\n import '../components/landing/landing.css';\n \n-type Challenge = {\n-  id: string;\n-  superBlock: SuperBlocks;\n-};\n-\n-type Props = {\n-  data: {\n-    allChallengeNode: {\n-      nodes: {\n-        challenge: Challenge;\n-      }[];\n-    };\n-  };\n-};\n-\n type LandingProps = {\n-  allChallenges: Challenge[];\n   showLandingPageRedesign: boolean;\n   showBenefitsSection: boolean;\n };\n \n const Landing = ({\n-  allChallenges,\n   showLandingPageRedesign,\n   showBenefitsSection\n }: LandingProps) => (\n@@ -47,19 +28,14 @@ const Landing = ({\n     {showBenefitsSection ? <Benefits /> : <AsSeenIn />}\n \n     <Testimonials />\n-    <Certifications allChallenges={allChallenges} />\n+    <Certifications />\n     <Faq />\n   </main>\n );\n \n-function IndexPage({\n-  data: {\n-    allChallengeNode: { nodes: challengeNodes }\n-  }\n-}: Props): JSX.Element {\n+function IndexPage(): JSX.Element {\n   const { t } = useTranslation();\n   const growthbook = useGrowthBook();\n-  const allChallenges = challengeNodes.map(node => node.challenge);\n   if (growthbook && growthbook.ready) {\n     const showLandingPageRedesign = growthbook.getFeatureValue(\n       'landing-page-redesign',\n@@ -74,7 +50,6 @@ function IndexPage({\n       <>\n         <SEO title={t('metaTags:title')} />\n         <Landing\n-          allChallenges={allChallenges}\n           showLandingPageRedesign={showLandingPageRedesign}\n           showBenefitsSection={showBenefitsSection}\n         />\n@@ -93,16 +68,3 @@ function IndexPage({\n IndexPage.displayName = 'IndexPage';\n \n export default IndexPage;\n-\n-export const query = graphql`\n-  query AllChallengeNode {\n-    allChallengeNode {\n-      nodes {\n-        challenge {\n-          id\n-          superBlock\n-        }\n-      }\n-    }\n-  }\n-`;"
        },
        {
            "sha": "880059f0cb40c5f7fe19da51f7700ddb3f6d2af7",
            "filename": "client/src/pages/learn.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 20,
            "changes": 22,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/f1a155aeaee1d636d9aa19d225030037f2050501/client%2Fsrc%2Fpages%2Flearn.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/f1a155aeaee1d636d9aa19d225030037f2050501/client%2Fsrc%2Fpages%2Flearn.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fpages%2Flearn.tsx?ref=f1a155aeaee1d636d9aa19d225030037f2050501",
            "patch": "@@ -16,7 +16,6 @@ import {\n } from '../redux/selectors';\n \n import callGA from '../analytics/call-ga';\n-import { SuperBlocks } from '../../../shared/config/curriculum';\n \n interface FetchState {\n   pending: boolean;\n@@ -57,14 +56,6 @@ interface LearnPageProps {\n         fields: Slug;\n       };\n     };\n-    allChallengeNode: {\n-      nodes: {\n-        challenge: {\n-          id: string;\n-          superBlock: SuperBlocks;\n-        };\n-      }[];\n-    };\n   };\n }\n \n@@ -77,8 +68,7 @@ function LearnPage({\n       challenge: {\n         fields: { slug }\n       }\n-    },\n-    allChallengeNode: { nodes: challengeNodes }\n+    }\n   }\n }: LearnPageProps) {\n   const { t } = useTranslation();\n@@ -105,7 +95,7 @@ function LearnPage({\n               onLearnDonationAlertClick={onLearnDonationAlertClick}\n               isDonating={isDonating}\n             />\n-            <Map allChallenges={challengeNodes.map(node => node.challenge)} />\n+            <Map />\n             <Spacer size='l' />\n           </Col>\n         </Row>\n@@ -133,13 +123,5 @@ export const query = graphql`\n         }\n       }\n     }\n-    allChallengeNode {\n-      nodes {\n-        challenge {\n-          id\n-          superBlock\n-        }\n-      }\n-    }\n   }\n `;"
        },
        {
            "sha": "111fb1dda96b1c2891a68bae6c4106a1be6257ca",
            "filename": "client/src/templates/Introduction/super-block-intro.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/f1a155aeaee1d636d9aa19d225030037f2050501/client%2Fsrc%2Ftemplates%2FIntroduction%2Fsuper-block-intro.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/f1a155aeaee1d636d9aa19d225030037f2050501/client%2Fsrc%2Ftemplates%2FIntroduction%2Fsuper-block-intro.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FIntroduction%2Fsuper-block-intro.tsx?ref=f1a155aeaee1d636d9aa19d225030037f2050501",
            "patch": "@@ -307,7 +307,7 @@ const SuperBlockIntroductionPage = (props: SuperBlockProps) => {\n                 {t(`intro:misc-text.browse-other`)}\n               </h3>\n               <Spacer size='m' />\n-              <Map allChallenges={allChallenges} />\n+              <Map />\n               <Spacer size='l' />\n             </Col>\n           </Row>"
        }
    ],
    "stats": {
        "total": 114,
        "additions": 36,
        "deletions": 78
    }
}