{
    "author": "Sembauke",
    "message": "feat(api): add debug logging for security headers in response (#59070)\n\nCo-authored-by: Shaun Hamilton <shauhami020@gmail.com>",
    "sha": "d071676ae750848c57bb38679096248802a91ff9",
    "files": [
        {
            "sha": "bc842569a8fde9070580f924a2f22a2d37b54b00",
            "filename": "api/src/plugins/security.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/d071676ae750848c57bb38679096248802a91ff9/api%2Fsrc%2Fplugins%2Fsecurity.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/d071676ae750848c57bb38679096248802a91ff9/api%2Fsrc%2Fplugins%2Fsecurity.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fplugins%2Fsecurity.ts?ref=d071676ae750848c57bb38679096248802a91ff9",
            "patch": "@@ -5,7 +5,11 @@ import { FREECODECAMP_NODE_ENV } from '../utils/env';\n \n const securityHeaders: FastifyPluginCallback = (fastify, _options, done) => {\n   // OWASP recommended headers\n-  fastify.addHook('onRequest', async (_request, reply) => {\n+  fastify.addHook('onRequest', async (req, reply) => {\n+    const logger = fastify.log.child({ req });\n+\n+    logger.debug('Adding security headers to response');\n+\n     void reply\n       .header('Cache-Control', 'no-store')\n       .header('Content-Security-Policy', \"frame-ancestors 'none'\")"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 5,
        "deletions": 1
    }
}