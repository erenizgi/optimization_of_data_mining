{
    "author": "raisedadead",
    "message": "fix(api): update logging (#60210)",
    "sha": "8a6fcd70dbaafc89916020bf0f2d96369fdfb108",
    "files": [
        {
            "sha": "97cd4f6b7c0faabacb0d891b0752a41fe15014b9",
            "filename": "api/src/routes/public/user.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/8a6fcd70dbaafc89916020bf0f2d96369fdfb108/api%2Fsrc%2Froutes%2Fpublic%2Fuser.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/8a6fcd70dbaafc89916020bf0f2d96369fdfb108/api%2Fsrc%2Froutes%2Fpublic%2Fuser.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fpublic%2Fuser.ts?ref=8a6fcd70dbaafc89916020bf0f2d96369fdfb108",
            "patch": "@@ -222,8 +222,10 @@ export const userPublicGetRoutes: FastifyPluginCallbackTypebox = (\n       const logger = fastify.log.child({ req, res: reply });\n \n       if (req.validationError) {\n-        logger.warn('Validation error: No username provided');\n         void reply.code(400);\n+        logger\n+          .child({ res: reply })\n+          .warn('Validation error: No username provided');\n         return await reply.send({\n           type: 'danger',\n           message: 'username parameter is required'"
        },
        {
            "sha": "4f7e741719f5fd15c1b1d9928128b25280f37104",
            "filename": "api/src/utils/logger.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 3,
            "changes": 12,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/8a6fcd70dbaafc89916020bf0f2d96369fdfb108/api%2Fsrc%2Futils%2Flogger.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/8a6fcd70dbaafc89916020bf0f2d96369fdfb108/api%2Fsrc%2Futils%2Flogger.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Futils%2Flogger.ts?ref=8a6fcd70dbaafc89916020bf0f2d96369fdfb108",
            "patch": "@@ -19,6 +19,12 @@ const serializersPretty = {\n       REQ_METHOD: req.method,\n       REQ_URL: req.url\n     };\n+  },\n+  res: (res: FastifyReply) => {\n+    return {\n+      RES_STATUS_CODE: res.statusCode,\n+      RES_ELAPSED_TIME: res.elapsedTime\n+    };\n   }\n };\n \n@@ -50,10 +56,10 @@ const serializersDefault = {\n       REQ_ID: id\n     };\n   },\n-  res: (reply: FastifyReply) => {\n+  res: (res: FastifyReply) => {\n     return {\n-      RES_STATUS_CODE: reply.statusCode,\n-      RES_RESPONSE_TIME: reply.elapsedTime\n+      RES_STATUS_CODE: res.statusCode,\n+      RES_ELAPSED_TIME: res.elapsedTime\n     };\n   }\n };"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 12,
        "deletions": 4
    }
}