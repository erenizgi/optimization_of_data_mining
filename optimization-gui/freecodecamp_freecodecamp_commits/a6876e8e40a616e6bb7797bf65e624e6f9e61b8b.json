{
    "author": "ojeytonwilliams",
    "message": "chore(docker): remove api-server Dockerfile (#58591)",
    "sha": "a6876e8e40a616e6bb7797bf65e624e6f9e61b8b",
    "files": [
        {
            "sha": "976bd32c4140294575e22f3993c17574e701c548",
            "filename": ".github/workflows/temporary-container-checks.yml",
            "status": "modified",
            "additions": 0,
            "deletions": 18,
            "changes": 18,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a6876e8e40a616e6bb7797bf65e624e6f9e61b8b/.github%2Fworkflows%2Ftemporary-container-checks.yml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a6876e8e40a616e6bb7797bf65e624e6f9e61b8b/.github%2Fworkflows%2Ftemporary-container-checks.yml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/.github%2Fworkflows%2Ftemporary-container-checks.yml?ref=a6876e8e40a616e6bb7797bf65e624e6f9e61b8b",
            "patch": "@@ -55,24 +55,6 @@ jobs:\n             --build-arg FREECODECAMP_NODE_ENV=development \\\n             -f docker/web/Dockerfile .\n \n-  build-api:\n-    name: Build Api (Container)\n-    runs-on: ubuntu-22.04\n-    strategy:\n-      matrix:\n-        node-version: [20.x]\n-\n-    steps:\n-      - name: Checkout Source Files\n-        uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1\n-        with:\n-          submodules: 'recursive'\n-\n-      - name: Create Image\n-        run: |\n-          docker build \\\n-            -f docker/api-server/Dockerfile .\n-\n   build-new-api:\n     name: Build New Api (Container)\n     runs-on: ubuntu-22.04"
        },
        {
            "sha": "46009fe5b88a1a819bd78b10ef430cd2d3ff88ef",
            "filename": "docker/api-server/Dockerfile",
            "status": "removed",
            "additions": 0,
            "deletions": 61,
            "changes": 61,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/46c8afd21b08ba8b22c805b454fbd4e68df2438c/docker%2Fapi-server%2FDockerfile",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/46c8afd21b08ba8b22c805b454fbd4e68df2438c/docker%2Fapi-server%2FDockerfile",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/docker%2Fapi-server%2FDockerfile?ref=46c8afd21b08ba8b22c805b454fbd4e68df2438c",
            "patch": "@@ -1,61 +0,0 @@\n-FROM node:20-bookworm AS builder\n-# global installs need root permissions, so have to happen before we switch to\n-# the node user\n-RUN npm i -g pnpm@9\n-# node images create a non-root user that we can use\n-USER node\n-WORKDIR /home/node/build\n-\n-COPY --chown=node:node *.* .\n-COPY --chown=node:node api-server/ api-server/\n-COPY --chown=node:node shared/ shared/\n-COPY --chown=node:node tools/ tools/\n-COPY --chown=node:node curriculum/ curriculum/\n-# TODO: AFAIK it's just the intro translations. Those should be folded into the\n-# curriculum and then we can remove this.\n-COPY --chown=node:node client/ client/\n-\n-# We have to prevent pnpm from deduping peer dependencies because otherwise it\n-# will install all of the packages, not just api-server. Also, pnpm deploy is\n-# not useful since we need to install more than one package.\n-\n-RUN pnpm config set dedupe-peer-dependents false\n-RUN pnpm -F=api-server -F=tools/scripts/build -F=challenge-parser -F=curriculum -F=shared \\\n-  install --frozen-lockfile --ignore-scripts\n-\n-# The api needs to source curriculum.json and build:curriculum relies on the\n-# following env vars.\n-ARG SHOW_UPCOMING_CHANGES=false\n-ENV SHOW_UPCOMING_CHANGES=$SHOW_UPCOMING_CHANGES\n-RUN pnpm build:curriculum\n-\n-RUN pnpm build:server\n-\n-FROM node:20-bookworm AS deps\n-\n-WORKDIR /home/node/build\n-COPY --chown=node:node pnpm*.yaml .\n-COPY --chown=node:node api-server/package.json api-server/package.json\n-COPY --chown=node:node shared/package.json shared/package.json\n-\n-RUN npm i -g pnpm@9\n-# Prevent pnpm installing unnecessary packages (see above)\n-RUN pnpm config set dedupe-peer-dependents false\n-RUN pnpm -F=api-server -F=shared install --prod --ignore-scripts\n-\n-FROM node:20-alpine\n-RUN npm i -g pm2@4\n-USER node\n-WORKDIR /home/node/fcc\n-COPY --from=builder --chown=node:node /home/node/build/api-server/config/ api-server/config/\n-COPY --from=builder --chown=node:node /home/node/build/api-server/lib/ api-server/lib/\n-COPY --from=builder --chown=node:node /home/node/build/api-server/ecosystem.config.js api-server/ecosystem.config.js\n-COPY --from=builder --chown=node:node /home/node/build/api-server/package.json api-server/package.json\n-COPY --from=builder --chown=node:node /home/node/build/shared/ shared/\n-COPY --from=builder --chown=node:node /home/node/build/package.json package.json\n-COPY --from=deps --chown=node:node /home/node/build/node_modules/ node_modules/\n-COPY --from=deps --chown=node:node /home/node/build/api-server/node_modules/ api-server/node_modules/\n-COPY --from=deps --chown=node:node /home/node/build/shared/node_modules/ shared/node_modules/\n-\n-CMD [\"pm2-runtime\", \"start\", \"api-server/ecosystem.config.js\"]\n-"
        }
    ],
    "stats": {
        "total": 79,
        "additions": 0,
        "deletions": 79
    }
}