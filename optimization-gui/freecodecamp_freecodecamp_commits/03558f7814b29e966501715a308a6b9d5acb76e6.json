{
    "author": "Sembauke",
    "message": "fix: separate footer from hits (#57130)",
    "sha": "03558f7814b29e966501715a308a6b9d5acb76e6",
    "files": [
        {
            "sha": "083759656367a29bdb4ae78b0fbbb2c91acb4bb5",
            "filename": "client/src/components/search/searchBar/no-hits-suggestion.tsx",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/03558f7814b29e966501715a308a6b9d5acb76e6/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fno-hits-suggestion.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/03558f7814b29e966501715a308a6b9d5acb76e6/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fno-hits-suggestion.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fno-hits-suggestion.tsx?ref=03558f7814b29e966501715a308a6b9d5acb76e6",
            "patch": "@@ -1,16 +1,16 @@\n import React from 'react';\n \n interface NoHitsSuggestionProps {\n-  handleMouseEnter: (e: React.ChangeEvent<HTMLElement>) => void;\n-  handleMouseLeave: (e: React.ChangeEvent<HTMLElement>) => void;\n   title: string;\n }\n \n const NoHitsSuggestion = ({ title }: NoHitsSuggestionProps): JSX.Element => {\n   return (\n-    <div className={'no-hits-footer fcc_suggestion_item'} role='region'>\n-      <span className='hit-name'>{title}</span>\n-    </div>\n+    <li className='ais-Hits-item'>\n+      <div className={'no-hits-footer fcc_suggestion_item'} role='region'>\n+        <span className='hit-name'>{title}</span>\n+      </div>\n+    </li>\n   );\n };\n "
        },
        {
            "sha": "25e34f21536e1e31d7cb0ce05bf5c10b9dbce366",
            "filename": "client/src/components/search/searchBar/search-bar-footer.tsx",
            "status": "added",
            "additions": 50,
            "deletions": 0,
            "changes": 50,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/03558f7814b29e966501715a308a6b9d5acb76e6/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-bar-footer.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/03558f7814b29e966501715a308a6b9d5acb76e6/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-bar-footer.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-bar-footer.tsx?ref=03558f7814b29e966501715a308a6b9d5acb76e6",
            "patch": "@@ -0,0 +1,50 @@\n+import React from 'react';\n+import { useTranslation } from 'react-i18next';\n+import { searchPageUrl } from '../../../utils/algolia-locale-setup';\n+import NoHitsSuggestion from './no-hits-suggestion';\n+\n+interface SearchBarFooterProps {\n+  hasHits: boolean;\n+  query?: string;\n+  selectedIndex: number;\n+  onMouseEnter: (e: React.SyntheticEvent<HTMLElement, Event>) => void;\n+  onMouseLeave: (e: React.SyntheticEvent<HTMLElement, Event>) => void;\n+}\n+\n+const SearchBarFooter = ({\n+  hasHits,\n+  query,\n+  selectedIndex,\n+  onMouseEnter,\n+  onMouseLeave\n+}: SearchBarFooterProps) => {\n+  const { t } = useTranslation();\n+  const title = t('search.no-tutorials');\n+\n+  if (!query) {\n+    return null;\n+  }\n+\n+  return hasHits ? (\n+    <li\n+      className={`ais-Hits-item ${selectedIndex === 5 ? 'selected' : ''}`}\n+      onMouseEnter={onMouseEnter}\n+      onMouseLeave={onMouseLeave}\n+    >\n+      <a\n+        className='fcc_suggestion_item'\n+        href={searchPageUrl + '?query=' + encodeURIComponent(query ?? '')}\n+        rel='noopener noreferrer'\n+        target='_blank'\n+      >\n+        <span className='hit-name'>\n+          {t('search.see-results', { searchQuery: query })}\n+        </span>\n+      </a>\n+    </li>\n+  ) : (\n+    <NoHitsSuggestion title={title} />\n+  );\n+};\n+\n+export default SearchBarFooter;"
        },
        {
            "sha": "7d92f9801b1e7d117f9811f62a6e9920f5bba9cb",
            "filename": "client/src/components/search/searchBar/search-bar.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/03558f7814b29e966501715a308a6b9d5acb76e6/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-bar.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/03558f7814b29e966501715a308a6b9d5acb76e6/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-bar.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-bar.tsx?ref=03558f7814b29e966501715a308a6b9d5acb76e6",
            "patch": "@@ -185,13 +185,13 @@ export class SearchBar extends Component<SearchBarProps, SearchBarState> {\n     indexUp: (e: KeyboardEvent | undefined): void => {\n       e?.preventDefault();\n       this.setState(({ index, hits }) => ({\n-        index: index === -1 ? hits.length - 1 : index - 1\n+        index: index === -1 ? hits.length : index - 1\n       }));\n     },\n     indexDown: (e: KeyboardEvent | undefined): void => {\n       e?.preventDefault();\n       this.setState(({ index, hits }) => ({\n-        index: index === hits.length - 1 ? -1 : index + 1\n+        index: index === hits.length ? -1 : index + 1\n       }));\n     }\n   };"
        },
        {
            "sha": "f0c763fd039112ee59cc853d5a7dd26c60e20331",
            "filename": "client/src/components/search/searchBar/search-hits.tsx",
            "status": "modified",
            "additions": 11,
            "deletions": 31,
            "changes": 42,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/03558f7814b29e966501715a308a6b9d5acb76e6/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-hits.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/03558f7814b29e966501715a308a6b9d5acb76e6/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-hits.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-hits.tsx?ref=03558f7814b29e966501715a308a6b9d5acb76e6",
            "patch": "@@ -2,12 +2,9 @@ import { isEmpty } from 'lodash-es';\n import React, { useEffect } from 'react';\n import { useTranslation } from 'react-i18next';\n import { useHits } from 'react-instantsearch';\n-import { searchPageUrl } from '../../../utils/algolia-locale-setup';\n import Suggestion from './search-suggestion';\n-import NoHitsSuggestion from './no-hits-suggestion';\n import type { Hit } from './types';\n-\n-const searchUrl = searchPageUrl;\n+import SearchBarFooter from './search-bar-footer';\n \n interface SearchHitsProps {\n   handleMouseEnter: (e: React.SyntheticEvent<HTMLElement, Event>) => void;\n@@ -23,29 +20,11 @@ function SearchHits({\n   selectedIndex\n }: SearchHitsProps) {\n   const { results } = useHits<Hit>();\n-  const query = results ? results.query : '';\n   const { t } = useTranslation();\n-\n   const noHits = isEmpty(results?.hits);\n-  const noHitsTitle = t('search.no-tutorials');\n \n-  const footer = [\n-    {\n-      __position: 8,\n-      objectID: `footer-${query}`,\n-      query: query,\n-      url: noHits ? '' : `${searchUrl}?query=${encodeURIComponent(query)}`,\n-      _highlightResult: {\n-        query: {\n-          value: `${t('search.see-results', { searchQuery: query })}`,\n-          matchLevel: 'none' as const,\n-          matchedWords: []\n-        }\n-      }\n-    }\n-  ];\n   const allHits: Hit[] =\n-    results?.hits && results?.query ? [...results.hits, ...footer] : [];\n+    results?.hits && results?.query ? [...results.hits] : [];\n \n   useEffect(() => {\n     handleHits(allHits);\n@@ -64,21 +43,22 @@ function SearchHits({\n             data-fccobjectid={hit.objectID}\n             key={hit.objectID}\n           >\n-            {noHits ? (\n-              <NoHitsSuggestion\n-                handleMouseEnter={handleMouseEnter}\n-                handleMouseLeave={handleMouseLeave}\n-                title={noHitsTitle}\n-              />\n-            ) : (\n+            {!noHits && (\n               <Suggestion\n+                hit={hit}\n                 handleMouseEnter={handleMouseEnter}\n                 handleMouseLeave={handleMouseLeave}\n-                hit={hit}\n               />\n             )}\n           </li>\n         ))}\n+        <SearchBarFooter\n+          hasHits={!noHits}\n+          query={results?.query}\n+          selectedIndex={selectedIndex}\n+          onMouseEnter={handleMouseEnter}\n+          onMouseLeave={handleMouseLeave}\n+        />\n       </ul>\n     </div>\n   );"
        },
        {
            "sha": "12813165a86a9e075f7af5aa84f00c62fa6307c7",
            "filename": "client/src/components/search/searchBar/search-suggestion.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 11,
            "changes": 13,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/03558f7814b29e966501715a308a6b9d5acb76e6/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-suggestion.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/03558f7814b29e966501715a308a6b9d5acb76e6/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-suggestion.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearch-suggestion.tsx?ref=03558f7814b29e966501715a308a6b9d5acb76e6",
            "patch": "@@ -13,26 +13,17 @@ const Suggestion = ({\n   handleMouseEnter,\n   handleMouseLeave\n }: SuggestionProps): JSX.Element => {\n-  const dropdownFooter = hit.objectID.includes('footer-');\n   return (\n     <a\n-      className={\n-        dropdownFooter\n-          ? 'fcc_suggestion_footer fcc_suggestion_item'\n-          : 'fcc_suggestion_item'\n-      }\n+      className={'fcc_suggestion_item'}\n       href={hit.url}\n       onMouseEnter={handleMouseEnter}\n       onMouseLeave={handleMouseLeave}\n       rel='noopener noreferrer'\n       target='_blank'\n     >\n       <span className='hit-name'>\n-        {dropdownFooter ? (\n-          <Highlight attribute='query' hit={hit} />\n-        ) : (\n-          <Highlight attribute='title' hit={hit} />\n-        )}\n+        <Highlight attribute='title' hit={hit} />\n       </span>\n     </a>\n   );"
        },
        {
            "sha": "64967d986229ae8dd0ae4d69e9727c5821091b17",
            "filename": "client/src/components/search/searchBar/searchbar.css",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/03558f7814b29e966501715a308a6b9d5acb76e6/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearchbar.css",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/03558f7814b29e966501715a308a6b9d5acb76e6/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearchbar.css",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fsearch%2FsearchBar%2Fsearchbar.css?ref=03558f7814b29e966501715a308a6b9d5acb76e6",
            "patch": "@@ -135,7 +135,7 @@\n   background-color: var(--gray-75);\n }\n \n-.ais-Hits-item:hover {\n+.ais-Hits-item:not(:has(.no-hits-footer.fcc_suggestion_item)):hover {\n   background-color: var(--blue-dark);\n }\n "
        }
    ],
    "stats": {
        "total": 121,
        "additions": 71,
        "deletions": 50
    }
}