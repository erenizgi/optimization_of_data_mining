{
    "author": "ShaunSHamilton",
    "message": "fix(api): return usernameDisplay (#61567)\n\nCo-authored-by: Oliver Eyton-Williams <ojeytonwilliams@gmail.com>",
    "sha": "ad7b0748d9a5bc32bab01604c0e2a688cbac441c",
    "files": [
        {
            "sha": "d69127a81aeb03099e6d33fba758c963dd446e9a",
            "filename": "api/src/routes/protected/user.test.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ad7b0748d9a5bc32bab01604c0e2a688cbac441c/api%2Fsrc%2Froutes%2Fprotected%2Fuser.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ad7b0748d9a5bc32bab01604c0e2a688cbac441c/api%2Fsrc%2Froutes%2Fprotected%2Fuser.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fprotected%2Fuser.test.ts?ref=ad7b0748d9a5bc32bab01604c0e2a688cbac441c",
            "patch": "@@ -140,6 +140,7 @@ const minimalUserData: Prisma.userCreateInput = {\n   picture: 'https://www.freecodecamp.org/cat.png',\n   sendQuincyEmail: true,\n   username: 'testuser',\n+  usernameDisplay: 'testuser',\n   unsubscribeId: '1234567890'\n };\n \n@@ -276,7 +277,8 @@ const publicUserData = {\n   profileUI: testUserData.profileUI,\n   savedChallenges: testUserData.savedChallenges,\n   twitter: 'https://twitter.com/foobar',\n-  username: testUserData.usernameDisplay, // It defaults to usernameDisplay\n+  username: testUserData.username,\n+  usernameDisplay: testUserData.usernameDisplay,\n   website: testUserData.website,\n   yearsTopContributor: testUserData.yearsTopContributor\n };"
        },
        {
            "sha": "82b5dc33dd62c5cddbcdf981789d651c5a1e6864",
            "filename": "api/src/routes/protected/user.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ad7b0748d9a5bc32bab01604c0e2a688cbac441c/api%2Fsrc%2Froutes%2Fprotected%2Fuser.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ad7b0748d9a5bc32bab01604c0e2a688cbac441c/api%2Fsrc%2Froutes%2Fprotected%2Fuser.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fprotected%2Fuser.ts?ref=ad7b0748d9a5bc32bab01604c0e2a688cbac441c",
            "patch": "@@ -682,7 +682,8 @@ export const userGetRoutes: FastifyPluginCallbackTypebox = (\n               name: name ?? '',\n               theme: theme ?? 'default',\n               twitter: normalizeTwitter(twitter),\n-              username: usernameDisplay || username,\n+              username,\n+              usernameDisplay: usernameDisplay || username,\n               userToken: encodedToken,\n               completedSurveys: normalizeSurveys(completedSurveys),\n               msUsername: msUsername?.msUsername"
        },
        {
            "sha": "788d9307c73165d843050cb937fa5945abe03abf",
            "filename": "api/src/routes/public/user.test.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ad7b0748d9a5bc32bab01604c0e2a688cbac441c/api%2Fsrc%2Froutes%2Fpublic%2Fuser.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ad7b0748d9a5bc32bab01604c0e2a688cbac441c/api%2Fsrc%2Froutes%2Fpublic%2Fuser.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fpublic%2Fuser.test.ts?ref=ad7b0748d9a5bc32bab01604c0e2a688cbac441c",
            "patch": "@@ -206,7 +206,8 @@ const publicUserData = {\n   profileUI: testUserData.profileUI,\n   savedChallenges: testUserData.savedChallenges,\n   twitter: 'https://twitter.com/foobar',\n-  username: testUserData.usernameDisplay, // It defaults to usernameDisplay\n+  username: testUserData.username,\n+  usernameDisplay: testUserData.usernameDisplay,\n   website: testUserData.website,\n   yearsTopContributor: testUserData.yearsTopContributor\n };"
        },
        {
            "sha": "51fe0f70259c705ea56b9217dc805d81cb782f8a",
            "filename": "api/src/routes/public/user.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ad7b0748d9a5bc32bab01604c0e2a688cbac441c/api%2Fsrc%2Froutes%2Fpublic%2Fuser.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ad7b0748d9a5bc32bab01604c0e2a688cbac441c/api%2Fsrc%2Froutes%2Fpublic%2Fuser.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fpublic%2Fuser.ts?ref=ad7b0748d9a5bc32bab01604c0e2a688cbac441c",
            "patch": "@@ -150,7 +150,6 @@ export const userPublicGetRoutes: FastifyPluginCallbackTypebox = (\n         'unsubscribeId',\n         'donationEmails',\n         'externalId',\n-        'usernameDisplay',\n         'isBanned'\n       ]);\n \n@@ -166,7 +165,8 @@ export const userPublicGetRoutes: FastifyPluginCallbackTypebox = (\n               [user.username]: {\n                 isLocked: true,\n                 profileUI: normalizedProfileUI,\n-                username: user.username\n+                username: user.username,\n+                usernameDisplay: user.usernameDisplay || user.username\n               }\n             }\n           },\n@@ -197,7 +197,8 @@ export const userPublicGetRoutes: FastifyPluginCallbackTypebox = (\n           // setting control it? Same applies to website, githubProfile,\n           // and linkedin.\n           twitter: normalizeTwitter(user.twitter),\n-          yearsTopContributor: user.yearsTopContributor\n+          yearsTopContributor: user.yearsTopContributor,\n+          usernameDisplay: user.usernameDisplay || user.username\n         };\n         return reply.send({\n           // TODO(Post-MVP): just return a user object (i.e. returnedUser) and"
        },
        {
            "sha": "b09d4dcd28202c3ed443f6c811dee086e36f854a",
            "filename": "api/src/schemas/user/get-session-user.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ad7b0748d9a5bc32bab01604c0e2a688cbac441c/api%2Fsrc%2Fschemas%2Fuser%2Fget-session-user.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ad7b0748d9a5bc32bab01604c0e2a688cbac441c/api%2Fsrc%2Fschemas%2Fuser%2Fget-session-user.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Fuser%2Fget-session-user.ts?ref=ad7b0748d9a5bc32bab01604c0e2a688cbac441c",
            "patch": "@@ -117,6 +117,7 @@ export const getSessionUser = {\n           joinDate: Type.String(),\n           savedChallenges: Type.Optional(Type.Array(savedChallenge)),\n           username: Type.String(),\n+          usernameDisplay: Type.String(),\n           userToken: Type.Optional(Type.String()),\n           completedSurveys: Type.Array(\n             Type.Object({"
        },
        {
            "sha": "8daea0aead8a2043bd7d0d9983077d84a1dbee38",
            "filename": "api/src/schemas/users/get-public-profile.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ad7b0748d9a5bc32bab01604c0e2a688cbac441c/api%2Fsrc%2Fschemas%2Fusers%2Fget-public-profile.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ad7b0748d9a5bc32bab01604c0e2a688cbac441c/api%2Fsrc%2Fschemas%2Fusers%2Fget-public-profile.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Fusers%2Fget-public-profile.ts?ref=ad7b0748d9a5bc32bab01604c0e2a688cbac441c",
            "patch": "@@ -102,6 +102,7 @@ export const getPublicProfile = {\n               joinDate: Type.String(),\n               savedChallenges: Type.Array(savedChallenge),\n               username: Type.String(),\n+              usernameDisplay: Type.String(),\n               msUsername: Type.Optional(Type.String())\n             })\n           ])"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 13,
        "deletions": 6
    }
}