{
    "author": "YueZheng-Sea-angle",
    "message": "feat(client): add isDialogue prop to ChallengeTranscript component (#64831)\n\nCo-authored-by: Huyen Nguyen <25715018+huyenltnguyen@users.noreply.github.com>",
    "sha": "d5e855906adfa2103f2c1582f692ed404341e1e9",
    "files": [
        {
            "sha": "588af47d0e5592aa1cc8ba4fa1698a7726fc8026",
            "filename": "client/src/templates/Challenges/components/challenge-transcript.test.tsx",
            "status": "modified",
            "additions": 39,
            "deletions": 0,
            "changes": 39,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/d5e855906adfa2103f2c1582f692ed404341e1e9/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fchallenge-transcript.test.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/d5e855906adfa2103f2c1582f692ed404341e1e9/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fchallenge-transcript.test.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fchallenge-transcript.test.tsx?ref=d5e855906adfa2103f2c1582f692ed404341e1e9",
            "patch": "@@ -58,4 +58,43 @@ describe('<ChallengeTranscript />', () => {\n     expect(setSpy).not.toHaveBeenCalled();\n     setSpy.mockRestore();\n   });\n+\n+  it('should render the transcript as a table when isDialogue is true', () => {\n+    store.set('fcc-transcript-expanded', true);\n+\n+    render(\n+      <ChallengeTranscript\n+        {...baseProps}\n+        transcript={'Hello\\nWorld'}\n+        shouldPersistExpanded={true}\n+        isDialogue={true}\n+      />\n+    );\n+    const table = screen.getByRole('table');\n+    expect(table).toBeVisible();\n+    expect(screen.getByRole('cell', { name: 'Hello' })).toBeVisible();\n+    expect(screen.getByRole('cell', { name: 'World' })).toBeVisible();\n+  });\n+\n+  it('should render the transcript with PrismFormatted when isDialogue is false', () => {\n+    store.set('fcc-transcript-expanded', true);\n+\n+    render(\n+      <ChallengeTranscript\n+        {...baseProps}\n+        transcript='<pre><code class=\"language-js\">console.log(\"hi\")</code></pre>'\n+        shouldPersistExpanded={true}\n+        isDialogue={false}\n+      />\n+    );\n+\n+    const preElement = screen.getByRole('region');\n+    expect(preElement).toBeVisible();\n+    expect(preElement.tagName).toBe('PRE');\n+\n+    // eslint-disable-next-line testing-library/no-node-access\n+    const codeElement = preElement.querySelector('code');\n+    expect(codeElement).toBeInTheDocument();\n+    expect(preElement).toHaveTextContent('console.log(\"hi\")');\n+  });\n });"
        },
        {
            "sha": "d4670084bf43f4f6f145113d3ca440eeb4df8039",
            "filename": "client/src/templates/Challenges/components/challenge-transcript.tsx",
            "status": "modified",
            "additions": 22,
            "deletions": 15,
            "changes": 37,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/d5e855906adfa2103f2c1582f692ed404341e1e9/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fchallenge-transcript.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/d5e855906adfa2103f2c1582f692ed404341e1e9/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fchallenge-transcript.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fchallenge-transcript.tsx?ref=d5e855906adfa2103f2c1582f692ed404341e1e9",
            "patch": "@@ -3,16 +3,19 @@ import { useTranslation } from 'react-i18next';\n import { Spacer } from '@freecodecamp/ui';\n import store from 'store';\n \n+import PrismFormatted from './prism-formatted';\n import './challenge-transcript.css';\n \n interface ChallengeTranscriptProps {\n   transcript: string;\n   shouldPersistExpanded?: boolean;\n+  isDialogue?: boolean;\n }\n \n function ChallengeTranscript({\n   transcript,\n-  shouldPersistExpanded\n+  shouldPersistExpanded,\n+  isDialogue\n }: ChallengeTranscriptProps): JSX.Element {\n   const { t } = useTranslation();\n \n@@ -42,20 +45,24 @@ function ChallengeTranscript({\n           {t('learn.transcript')}\n         </summary>\n         <Spacer size='m' />\n-        <table className='transcript-table'>\n-          <tbody>\n-            {transcript\n-              .split('\\n')\n-              .filter(line => line.trim() !== '')\n-              .map((line, idx) => {\n-                return (\n-                  <tr key={idx}>\n-                    <td dangerouslySetInnerHTML={{ __html: line }} />\n-                  </tr>\n-                );\n-              })}\n-          </tbody>\n-        </table>\n+        {isDialogue ? (\n+          <table className='transcript-table'>\n+            <tbody>\n+              {transcript\n+                .split('\\n')\n+                .filter(line => line.trim() !== '')\n+                .map((line, idx) => {\n+                  return (\n+                    <tr key={idx}>\n+                      <td dangerouslySetInnerHTML={{ __html: line }} />\n+                    </tr>\n+                  );\n+                })}\n+            </tbody>\n+          </table>\n+        ) : (\n+          <PrismFormatted className='line-numbers' text={transcript} />\n+        )}\n       </details>\n       <Spacer size='m' />\n     </>"
        },
        {
            "sha": "c50ac90c3006e6381745b216658ebf93ba6d3011",
            "filename": "client/src/templates/Challenges/components/scene/scene.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/d5e855906adfa2103f2c1582f692ed404341e1e9/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fscene%2Fscene.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/d5e855906adfa2103f2c1582f692ed404341e1e9/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fscene%2Fscene.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fscene%2Fscene.tsx?ref=d5e855906adfa2103f2c1582f692ed404341e1e9",
            "patch": "@@ -437,7 +437,7 @@ export function Scene({\n           </button>\n         )}\n       </div>\n-      <ChallengeTranscript transcript={transcriptText} />\n+      <ChallengeTranscript transcript={transcriptText} isDialogue={true} />\n       <Spacer size='m' />\n     </Col>\n   );"
        },
        {
            "sha": "014700cd0f44dd33355573090fb0d7b08657f75f",
            "filename": "client/src/templates/Challenges/fill-in-the-blank/show.tsx",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/d5e855906adfa2103f2c1582f692ed404341e1e9/client%2Fsrc%2Ftemplates%2FChallenges%2Ffill-in-the-blank%2Fshow.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/d5e855906adfa2103f2c1582f692ed404341e1e9/client%2Fsrc%2Ftemplates%2FChallenges%2Ffill-in-the-blank%2Fshow.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Ffill-in-the-blank%2Fshow.tsx?ref=d5e855906adfa2103f2c1582f692ed404341e1e9",
            "patch": "@@ -279,7 +279,12 @@ const ShowFillInTheBlank = ({\n             {scene && <Scene scene={scene} sceneSubject={sceneSubject} />}\n \n             <Col md={8} mdOffset={2} sm={10} smOffset={1} xs={12}>\n-              {transcript && <ChallengeTranscript transcript={transcript} />}\n+              {transcript && (\n+                <ChallengeTranscript\n+                  transcript={transcript}\n+                  isDialogue={true}\n+                />\n+              )}\n \n               {instructions && (\n                 <>"
        }
    ],
    "stats": {
        "total": 85,
        "additions": 68,
        "deletions": 17
    }
}