{
    "author": "raisedadead",
    "message": "fix(tools): s/MailHog/Mailpit/g (#62481)",
    "sha": "ef610dd36c1ce2ef429d0e9d513ccb0a957212e4",
    "files": [
        {
            "sha": "7a4a33be269e039306e368b723d8fbfcae9b9498",
            "filename": ".github/workflows/e2e-third-party.yml",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/.github%2Fworkflows%2Fe2e-third-party.yml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/.github%2Fworkflows%2Fe2e-third-party.yml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/.github%2Fworkflows%2Fe2e-third-party.yml?ref=ef610dd36c1ce2ef429d0e9d513ccb0a957212e4",
            "patch": "@@ -99,8 +99,8 @@ jobs:\n         image: mongo:8.0\n         ports:\n           - 27017:27017\n-      mailhog:\n-        image: mailhog/mailhog\n+      mailpit:\n+        image: axllent/mailpit\n         ports:\n           - 1025:1025\n     steps:"
        },
        {
            "sha": "8bc673b170addb2764b16cb8f965bdd852317d18",
            "filename": ".gitpod.yml",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/.gitpod.yml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/.gitpod.yml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/.gitpod.yml?ref=ef610dd36c1ce2ef429d0e9d513ccb0a957212e4",
            "patch": "@@ -18,10 +18,10 @@ ports:\n     visibility: public\n   - port: 3300 # challenge editor client\n     visibility: public\n-  - port: 8025 # MailHog\n+  - port: 8025 # Mailpit\n     visibility: public\n     onOpen: ignore\n-  - port: 1025 # MailHog\n+  - port: 1025 # Mailpit\n     onOpen: ignore\n   - port: 9323 # Playwright\n     visibility: public"
        },
        {
            "sha": "7adf31b04f3d8bbe2fe3c97a8afc7db59ed04ac2",
            "filename": "api/src/plugins/mail-providers/nodemailer.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/api%2Fsrc%2Fplugins%2Fmail-providers%2Fnodemailer.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/api%2Fsrc%2Fplugins%2Fmail-providers%2Fnodemailer.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fplugins%2Fmail-providers%2Fnodemailer.ts?ref=ef610dd36c1ce2ef429d0e9d513ccb0a957212e4",
            "patch": "@@ -11,8 +11,8 @@ export class NodemailerProvider implements MailProvider {\n   private transporter: Transporter;\n \n   /**\n-   * Sets up nodemailer, with hardcodeded configuration.  This is intended for\n-   * use in development.\n+   * Sets up nodemailer, with hardcoded configuration. This is intended for\n+   * use in development with Mailpit.\n    */\n   constructor() {\n     this.transporter = nodemailer.createTransport({"
        },
        {
            "sha": "0876dc133295ad24b370996dcbf0665d1f2a6d40",
            "filename": "api/src/utils/env.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/api%2Fsrc%2Futils%2Fenv.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/api%2Fsrc%2Futils%2Fenv.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Futils%2Fenv.ts?ref=ef610dd36c1ce2ef429d0e9d513ccb0a957212e4",
            "patch": "@@ -157,7 +157,7 @@ if (process.env.FREECODECAMP_NODE_ENV !== 'development') {\n }\n \n export const HOME_LOCATION = process.env.HOME_LOCATION;\n-// Mailhog is used in development and test environments, hence the localhost\n+// Mailpit is used in development and test environments, hence the localhost\n // default.\n export const MAILHOG_HOST = process.env.MAILHOG_HOST ?? 'localhost';\n export const MONGOHQ_URL ="
        },
        {
            "sha": "402f38e46f9812b283948d1801569561cc20f2e8",
            "filename": "docker-compose.yml",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/docker-compose.yml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/docker-compose.yml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/docker-compose.yml?ref=ef610dd36c1ce2ef429d0e9d513ccb0a957212e4",
            "patch": "@@ -15,25 +15,25 @@ services:\n         # This will try to initiate the replica set, until it succeeds twice (i.e. until the replica set is already initialized)\n         'mongosh --host mongo:27017 --eval ''try {rs.initiate();} catch (err) { if(err.codeName !== \"AlreadyInitialized\") throw err };'''\n       ]\n-  mailhog:\n+  mailpit:\n     restart: unless-stopped\n-    image: mailhog/mailhog\n+    image: axllent/mailpit\n     ports:\n       - '1025:1025'\n       - '8025:8025'\n   api:\n     restart: unless-stopped\n     depends_on:\n       - mongo\n-      - mailhog\n+      - mailpit\n     image: fcc-api\n     env_file:\n       - .env\n     environment:\n-      # The api cannot connect to mongodb or mailhog via localhost from inside the\n+      # The api cannot connect to mongodb or mailpit via localhost from inside the\n       # container, so we have to override these variables.\n       - MONGOHQ_URL=mongodb://mongo:27017/freecodecamp?directConnection=true\n-      - MAILHOG_HOST=mailhog\n+      - MAILHOG_HOST=mailpit\n       - HOST=0.0.0.0\n     ports:\n       - '3000:3000'"
        },
        {
            "sha": "47fd215ed3d33ac50a1724b6596d097083c3b9f7",
            "filename": "e2e/certification.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/e2e%2Fcertification.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/e2e%2Fcertification.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fcertification.spec.ts?ref=ef610dd36c1ce2ef429d0e9d513ccb0a957212e4",
            "patch": "@@ -30,7 +30,7 @@ test.describe('Claim a certification - almost certified user', () => {\n     // verify that an email is sent\n     await expect(async () => {\n       const emails = await getAllEmails();\n-      expect(emails.items).toHaveLength(1);\n+      expect(emails.messages).toHaveLength(1);\n       expect(getSubject(getFirstEmail(emails))).toBe(\n         'Congratulations on completing all of the freeCodeCamp certifications!'\n       );"
        },
        {
            "sha": "63fb341e1a0cd7e55eaaa50dc06e4977bbfb3af7",
            "filename": "e2e/report-user.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/e2e%2Freport-user.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/e2e%2Freport-user.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Freport-user.spec.ts?ref=ef610dd36c1ce2ef429d0e9d513ccb0a957212e4",
            "patch": "@@ -39,7 +39,7 @@ test('should be possible to report a user from their profile page', async ({\n \n   await expect(async () => {\n     const emails = await getAllEmails();\n-    expect(emails.items).toHaveLength(1);\n+    expect(emails.messages).toHaveLength(1);\n     expect(getSubject(getFirstEmail(emails))).toBe(\n       \"Abuse Report : Reporting twaha's profile.\"\n     );"
        },
        {
            "sha": "22f787cbc400dab17becd05bb2a6eb48c1fc66ab",
            "filename": "e2e/update-email.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/e2e%2Fupdate-email.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/e2e%2Fupdate-email.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fupdate-email.spec.ts?ref=ef610dd36c1ce2ef429d0e9d513ccb0a957212e4",
            "patch": "@@ -69,7 +69,7 @@ test.describe('The update-email page when the user is signed in', () => {\n     await submitButton.click();\n     await expect(async () => {\n       const emails = await getAllEmails();\n-      expect(emails.items).toHaveLength(1);\n+      expect(emails.messages).toHaveLength(1);\n       expect(getSubject(getFirstEmail(emails))).toBe(\n         'Please confirm your updated email address for freeCodeCamp.org'\n       );"
        },
        {
            "sha": "9c3d0f0a042bf2348b2799026ef0aeaa289c7b0c",
            "filename": "e2e/utils/mailhog.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 9,
            "changes": 21,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/e2e%2Futils%2Fmailhog.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/e2e%2Futils%2Fmailhog.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Futils%2Fmailhog.ts?ref=ef610dd36c1ce2ef429d0e9d513ccb0a957212e4",
            "patch": "@@ -1,26 +1,29 @@\n type Email = {\n-  Content: { Headers: { Subject: string[] } };\n+  Subject: string;\n+  ID: string;\n+  From: { Address: string; Name: string };\n+  To: Array<{ Address: string; Name: string }>;\n };\n \n type AllEmails = {\n-  items: Email[];\n+  messages: Email[];\n+  total: number;\n+  count: number;\n };\n \n const host = process.env.MAILHOG_HOST || 'localhost';\n \n export const getAllEmails = async (): Promise<AllEmails> => {\n-  const res = await fetch(`http://${host}:8025/api/v2/messages`);\n+  const res = await fetch(`http://${host}:8025/api/v1/messages`);\n   return res.json() as Promise<AllEmails>;\n };\n \n-export const getFirstEmail = (allEmails: { items: Email[] }) => {\n-  return allEmails.items[0];\n+export const getFirstEmail = (allEmails: { messages: Email[] }) => {\n+  return allEmails.messages[0];\n };\n \n-export const getSubject = (email: {\n-  Content: { Headers: { Subject: string[] } };\n-}) => {\n-  return email.Content.Headers.Subject[0];\n+export const getSubject = (email: { Subject: string }) => {\n+  return email.Subject;\n };\n \n export const deleteAllEmails = async () => {"
        },
        {
            "sha": "9967d0ca9ae1d0a9709e7a49effc698603171b83",
            "filename": "playwright.config.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/playwright.config.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ef610dd36c1ce2ef429d0e9d513ccb0a957212e4/playwright.config.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/playwright.config.ts?ref=ef610dd36c1ce2ef429d0e9d513ccb0a957212e4",
            "patch": "@@ -87,9 +87,9 @@ export default defineConfig({\n     // }\n   ],\n \n-  /* Some tests make the api send emails, so we need mailhog to catch them */\n+  /* Some tests make the api send emails, so we need mailpit to catch them */\n   webServer: {\n-    command: 'docker run -d -p 1025:1025 -p 8025:8025 mailhog/mailhog',\n+    command: 'docker run --rm -p 1025:1025 -p 8025:8025 axllent/mailpit',\n     port: 1025,\n     reuseExistingServer: true,\n     timeout: 180000"
        }
    ],
    "stats": {
        "total": 55,
        "additions": 29,
        "deletions": 26
    }
}