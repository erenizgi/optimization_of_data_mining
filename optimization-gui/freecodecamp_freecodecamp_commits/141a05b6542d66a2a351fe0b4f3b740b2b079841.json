{
    "author": "errantpianist",
    "message": "fix: correct solution and test for euler problem 89 (#61854)",
    "sha": "141a05b6542d66a2a351fe0b4f3b740b2b079841",
    "files": [
        {
            "sha": "40d2eed645ccbeba06d4d109b3e6a55c851996ad",
            "filename": "curriculum/challenges/english/18-project-euler/project-euler-problems-1-to-100/problem-89-roman-numerals.md",
            "status": "modified",
            "additions": 93,
            "deletions": 13,
            "changes": 106,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/141a05b6542d66a2a351fe0b4f3b740b2b079841/curriculum%2Fchallenges%2Fenglish%2F18-project-euler%2Fproject-euler-problems-1-to-100%2Fproblem-89-roman-numerals.md",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/141a05b6542d66a2a351fe0b4f3b740b2b079841/curriculum%2Fchallenges%2Fenglish%2F18-project-euler%2Fproject-euler-problems-1-to-100%2Fproblem-89-roman-numerals.md",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fchallenges%2Fenglish%2F18-project-euler%2Fproject-euler-problems-1-to-100%2Fproblem-89-roman-numerals.md?ref=141a05b6542d66a2a351fe0b4f3b740b2b079841",
            "patch": "@@ -48,10 +48,10 @@ Find the number of characters saved by writing each of these in their minimal fo\n assert(typeof romanNumerals(_testNumerals1) === 'number');\n ```\n \n-`romanNumerals(testNumerals1)` should return `19`.\n+`romanNumerals(testNumerals1)` should return `21`.\n \n ```js\n-assert.strictEqual(romanNumerals(_testNumerals1), 19);\n+assert.strictEqual(romanNumerals(_testNumerals1), 21);\n ```\n \n `romanNumerals(testNumerals2)` should return `743`.\n@@ -93,23 +93,103 @@ romanNumerals(testNumerals1);\n # --solutions--\n \n ```js\n+const romanArabicPairs = [\n+  [1000, \"M\"],\n+  [900, \"CM\"],\n+  [500, \"D\"],\n+  [400, \"CD\"],\n+  [100, \"C\"],\n+  [90, \"XC\"],\n+  [50, \"L\"],\n+  [40, \"XL\"],\n+  [10, \"X\"],\n+  [9, \"IX\"],\n+  [5, \"V\"],\n+  [4, \"IV\"],\n+  [1, \"I\"],\n+].sort((a, b) => b[0] - a[0]);\n+\n+\n+function romanToArabic(num) {\n+  let arabic = 0;\n+\n+  for (let i = 0; i < num.length; i++) {\n+    switch (num[i]) {\n+      case 'M':\n+        arabic += 1000;\n+        break;\n+      case 'D':\n+        arabic += 500;\n+        break;\n+      case 'L':\n+        arabic += 50;\n+        break;\n+      case 'V':\n+        arabic += 5;\n+        break;\n+      case 'C':\n+        if (num[i + 1] === 'M') {\n+          arabic += 900;\n+          i++;\n+        } else if (num[i + 1] === 'D') {\n+          arabic += 400;\n+          i++\n+        } else {\n+          arabic += 100;\n+        }\n+        break;\n+      case 'X':\n+        if (num[i + 1] === 'C') {\n+          arabic += 90;\n+          i++;\n+        } else if (num[i + 1] === 'L') {\n+          arabic += 40;\n+          i++\n+        } else {\n+          arabic += 10;\n+        }\n+        break;\n+      case 'I':\n+        if (num[i + 1] === 'X') {\n+          arabic += 9;\n+          i++;\n+        } else if (num[i + 1] === 'V') {\n+          arabic += 4;\n+          i++\n+        } else {\n+          arabic += 1;\n+        }\n+        break;\n+    }\n+  }\n+  return arabic;\n+}\n+\n+function arabicToRoman(num) {\n+  return romanArabicPairs\n+    .reduce((romanNum, pair) => {\n+      const arabic = pair[0];\n+      const roman = pair[1];\n+\n+      while (num >= arabic) {\n+        num -= arabic;\n+        romanNum += roman;\n+      }\n+      return romanNum;\n+    },\n+      \"\");\n+}\n+\n function romanNumerals(roman) {\n   const numerals = [...roman];\n-  const replaces = [\n-    ['VIIII', 'IX'],\n-    ['IIII', 'IV'],\n-    ['LXXXX', 'XC'],\n-    ['XXXX', 'XL'],\n-    ['DCCCC', 'CM'],\n-    ['CCCC', 'CD']\n-  ];\n   let savedChars = 0;\n+\n   for (let i = 0; i < numerals.length; i++) {\n     const charsBefore = numerals[i].length;\n-    for (let j = 0; j < replaces.length; j++) {\n-      numerals[i] = numerals[i].replace(...replaces[j]);\n-    }\n+\n+    numerals[i] = arabicToRoman(romanToArabic(numerals[i]));\n     const charsAfter = numerals[i].length;\n+\n     savedChars += charsBefore - charsAfter;\n   }\n   return savedChars;"
        }
    ],
    "stats": {
        "total": 106,
        "additions": 93,
        "deletions": 13
    }
}