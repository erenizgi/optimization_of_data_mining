{
    "author": "ojeytonwilliams",
    "message": "refactor(test): create helper to look for alerts (#55483)",
    "sha": "af1ce853dd1d42dc5a9b4b8595c6bab81c389a86",
    "files": [
        {
            "sha": "5abf3883644baee821c6052c5e0acfb42aa4c254",
            "filename": "e2e/certification.spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/af1ce853dd1d42dc5a9b4b8595c6bab81c389a86/e2e%2Fcertification.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/af1ce853dd1d42dc5a9b4b8595c6bab81c389a86/e2e%2Fcertification.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fcertification.spec.ts?ref=af1ce853dd1d42dc5a9b4b8595c6bab81c389a86",
            "patch": "@@ -1,5 +1,7 @@\n import { test, expect, Page } from '@playwright/test';\n+\n import translations from '../client/i18n/locales/english/translations.json';\n+import { alertToBeVisible } from './utils/alerts';\n \n test.use({ storageState: 'playwright/.auth/certified-user.json' });\n \n@@ -142,9 +144,7 @@ test.describe('Invalid certification page', () => {\n     {\n       await page.goto('/certification/certifieduser/invalid-certification');\n       await expect(page).toHaveURL('/');\n-      await expect(page.getByRole('alert')).toHaveText(\n-        /The certification you tried to view does not exist/\n-      );\n+      await alertToBeVisible(page, translations.flash['certificate-missing']);\n     }\n   };\n   test.describe('for authenticated user', () => {"
        },
        {
            "sha": "bfd8f92234c0edc2eaf2860b41a835790635cff4",
            "filename": "e2e/delete-modal.spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/af1ce853dd1d42dc5a9b4b8595c6bab81c389a86/e2e%2Fdelete-modal.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/af1ce853dd1d42dc5a9b4b8595c6bab81c389a86/e2e%2Fdelete-modal.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fdelete-modal.spec.ts?ref=af1ce853dd1d42dc5a9b4b8595c6bab81c389a86",
            "patch": "@@ -4,6 +4,7 @@ import { promisify } from 'util';\n import { test, expect } from '@playwright/test';\n \n import translations from '../client/i18n/locales/english/translations.json';\n+import { alertToBeVisible } from './utils/alerts';\n \n const execP = promisify(exec);\n \n@@ -111,11 +112,7 @@ test.describe('Delete Modal component', () => {\n     ).not.toBeVisible();\n \n     await expect(page).toHaveURL(/.*\\/learn\\/?/);\n-    await expect(\n-      page\n-        .getByRole('alert')\n-        .filter({ hasText: 'Your account has been successfully deleted' })\n-    ).toBeVisible();\n+    await alertToBeVisible(page, translations.flash['account-deleted']);\n     // The user is signed out after their account is deleted\n     await expect(page.getByRole('link', { name: 'Sign in' })).toHaveCount(2);\n   });"
        },
        {
            "sha": "596fb6155df3bb90b196645280c5a853a8c5d68a",
            "filename": "e2e/hotkeys.spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/af1ce853dd1d42dc5a9b4b8595c6bab81c389a86/e2e%2Fhotkeys.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/af1ce853dd1d42dc5a9b4b8595c6bab81c389a86/e2e%2Fhotkeys.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fhotkeys.spec.ts?ref=af1ce853dd1d42dc5a9b4b8595c6bab81c389a86",
            "patch": "@@ -3,6 +3,7 @@ import { test, expect, type Page } from '@playwright/test';\n import translations from '../client/i18n/locales/english/translations.json';\n import { authedRequest } from './utils/request';\n import { getEditors } from './utils/editor';\n+import { alertToBeVisible } from './utils/alerts';\n \n const links = {\n   basicJS1:\n@@ -67,11 +68,7 @@ test.beforeEach(async ({ page }) => {\n     .getByRole('button', { name: translations.buttons.on, exact: true })\n     .click();\n   // wait for the client to register the change:\n-  await expect(\n-    page\n-      .getByRole('alert')\n-      .filter({ hasText: translations.flash['keyboard-shortcut-updated'] })\n-  ).toBeVisible();\n+  await alertToBeVisible(page, translations.flash['keyboard-shortcut-updated']);\n });\n \n test.afterEach("
        },
        {
            "sha": "a3584404245467abcfcb889821df2676a3887fcd",
            "filename": "e2e/link-ms-user.spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/af1ce853dd1d42dc5a9b4b8595c6bab81c389a86/e2e%2Flink-ms-user.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/af1ce853dd1d42dc5a9b4b8595c6bab81c389a86/e2e%2Flink-ms-user.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Flink-ms-user.spec.ts?ref=af1ce853dd1d42dc5a9b4b8595c6bab81c389a86",
            "patch": "@@ -2,6 +2,7 @@ import { execSync } from 'child_process';\n \n import { test, expect } from '@playwright/test';\n import translations from '../client/i18n/locales/english/translations.json';\n+import { alertToBeVisible } from './utils/alerts';\n \n test.beforeEach(async ({ page }) => {\n   await page.goto(\n@@ -67,11 +68,7 @@ test.describe('Link MS user component (signed-in user)', () => {\n     await expect(unlinkButton).toBeVisible();\n     await unlinkButton.click();\n \n-    await expect(\n-      page\n-        .getByRole('alert')\n-        .filter({ hasText: translations.flash.ms.transcript.unlinked })\n-    ).toBeVisible();\n+    await alertToBeVisible(page, translations.flash.ms.transcript.unlinked);\n \n     await expect(\n       page.getByRole('heading', {"
        },
        {
            "sha": "374798139725a66c0256173b43452901eaf1c815",
            "filename": "e2e/third-party-donation.spec.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 6,
            "changes": 10,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/af1ce853dd1d42dc5a9b4b8595c6bab81c389a86/e2e%2Fthird-party-donation.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/af1ce853dd1d42dc5a9b4b8595c6bab81c389a86/e2e%2Fthird-party-donation.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fthird-party-donation.spec.ts?ref=af1ce853dd1d42dc5a9b4b8595c6bab81c389a86",
            "patch": "@@ -1,6 +1,8 @@\n import { test, expect } from '@playwright/test';\n \n+import translations from '../client/i18n/locales/english/translations.json';\n import stripeJson from './fixtures/donation/stripe.json';\n+import { alertToBeVisible } from './utils/alerts';\n \n test.describe('third-party donation tests', () => {\n   test.use({ storageState: 'playwright/.auth/certified-user.json' });\n@@ -65,11 +67,7 @@ test.describe('third-party donation tests', () => {\n \n     await expect(page.getByRole('alert')).toBeVisible();\n \n-    await expect(page.getByRole('alert')).toContainText(\n-      'Your donations will support free technology education for people all over the world.'\n-    );\n-    await expect(page.getByRole('alert')).toContainText(\n-      'Visit supporters page to learn about your supporter benefits.'\n-    );\n+    await alertToBeVisible(page, translations.donate['free-tech']);\n+    await alertToBeVisible(page, translations.donate['visit-supporters']);\n   });\n });"
        },
        {
            "sha": "2246d0799064e40ff77803cc54be29ecc3cd441b",
            "filename": "e2e/user-token.spec.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/af1ce853dd1d42dc5a9b4b8595c6bab81c389a86/e2e%2Fuser-token.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/af1ce853dd1d42dc5a9b4b8595c6bab81c389a86/e2e%2Fuser-token.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fuser-token.spec.ts?ref=af1ce853dd1d42dc5a9b4b8595c6bab81c389a86",
            "patch": "@@ -1,5 +1,9 @@\n import { execSync } from 'child_process';\n import { test, expect } from '@playwright/test';\n+\n+import translations from '../client/i18n/locales/english/translations.json';\n+import { alertToBeVisible } from './utils/alerts';\n+\n test.use({ storageState: 'playwright/.auth/development-user.json' });\n \n test.beforeEach(() => {\n@@ -36,9 +40,7 @@ test.describe('After creating token', () => {\n     ).toBeVisible();\n     await page.getByRole('button', { name: 'Delete my user token' }).click();\n \n-    await expect(page.getByRole('alert')).toContainText(\n-      /Your user token has been deleted./\n-    );\n+    await alertToBeVisible(page, translations.flash['token-deleted']);\n     await expect(\n       page.getByText('User Token', { exact: true })\n     ).not.toBeVisible();"
        },
        {
            "sha": "4ca8650fa4961715a1498e6b96903896daa0a3e5",
            "filename": "e2e/utils/alerts.ts",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/af1ce853dd1d42dc5a9b4b8595c6bab81c389a86/e2e%2Futils%2Falerts.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/af1ce853dd1d42dc5a9b4b8595c6bab81c389a86/e2e%2Futils%2Falerts.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Futils%2Falerts.ts?ref=af1ce853dd1d42dc5a9b4b8595c6bab81c389a86",
            "patch": "@@ -0,0 +1,4 @@\n+import { expect, type Page } from '@playwright/test';\n+\n+export const alertToBeVisible = async (page: Page, text: string) =>\n+  await expect(page.getByRole('alert').filter({ hasText: text })).toBeVisible();"
        }
    ],
    "stats": {
        "total": 49,
        "additions": 22,
        "deletions": 27
    }
}