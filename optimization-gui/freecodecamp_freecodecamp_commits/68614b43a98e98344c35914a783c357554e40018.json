{
    "author": "huyenltnguyen",
    "message": "chore(tools): migrate scripts/lint test to vitest (#62265)\n\nCo-authored-by: Sem Bauke <sem@freecodecamp.org>\nCo-authored-by: Oliver Eyton-Williams <ojeytonwilliams@gmail.com>",
    "sha": "68614b43a98e98344c35914a783c357554e40018",
    "files": [
        {
            "sha": "0c9aa39cd07fe8ddc17dbba56a06a78e83330b77",
            "filename": "jest.config.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/68614b43a98e98344c35914a783c357554e40018/jest.config.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/68614b43a98e98344c35914a783c357554e40018/jest.config.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/jest.config.js?ref=68614b43a98e98344c35914a783c357554e40018",
            "patch": "@@ -6,6 +6,7 @@ module.exports = {\n     'tools/challenge-helper-scripts/',\n     'tools/challenge-parser/',\n     'tools/scripts/build/',\n+    'tools/scripts/lint/',\n     'curriculum',\n     'client'\n   ],"
        },
        {
            "sha": "d64e7fa46d57e01ffdfe3ca35e2daa52f1ff71c8",
            "filename": "package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/68614b43a98e98344c35914a783c357554e40018/package.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/68614b43a98e98344c35914a783c357554e40018/package.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/package.json?ref=68614b43a98e98344c35914a783c357554e40018",
            "patch": "@@ -74,13 +74,13 @@\n     \"test:api\": \"cd api && pnpm test\",\n     \"test:tools:challenge-helper-scripts\": \"cd ./tools/challenge-helper-scripts && pnpm test run\",\n     \"test:tools:scripts-build\": \"cd ./tools/scripts/build && pnpm test run\",\n+    \"test:tools:scripts-lint\": \"cd ./tools/scripts/lint && pnpm test run\",\n     \"test:tools:challenge-parser\": \"cd ./tools/challenge-parser && pnpm test run\",\n     \"test:curriculum:content\": \"cd ./curriculum && pnpm test run\",\n     \"test:curriculum:tooling\": \"cd ./curriculum && pnpm vitest run\",\n     \"test-curriculum-full-output\": \"cd ./curriculum && pnpm run test:full-output run\",\n     \"test:client\": \"cd ./client && pnpm test run\",\n     \"test-config\": \"jest config\",\n-    \"test-tools\": \"jest tools\",\n     \"test-utils\": \"jest utils\",\n     \"prepare\": \"husky\",\n     \"playwright:run\": \"playwright test\","
        },
        {
            "sha": "ed161ad5ec70687583f8b0841ec844964989d1c7",
            "filename": "pnpm-lock.yaml",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/68614b43a98e98344c35914a783c357554e40018/pnpm-lock.yaml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/68614b43a98e98344c35914a783c357554e40018/pnpm-lock.yaml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/pnpm-lock.yaml?ref=68614b43a98e98344c35914a783c357554e40018",
            "patch": "@@ -1079,6 +1079,15 @@ importers:\n         specifier: ^3.2.4\n         version: 3.2.4(@types/node@20.12.8)(@vitest/ui@3.2.4)(jsdom@26.1.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.8.2))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.0)\n \n+  tools/scripts/lint:\n+    devDependencies:\n+      '@vitest/ui':\n+        specifier: ^3.2.4\n+        version: 3.2.4(vitest@3.2.4)\n+      vitest:\n+        specifier: ^3.2.4\n+        version: 3.2.4(@types/node@20.12.8)(@vitest/ui@3.2.4)(jsdom@26.1.0)(msw@2.8.7(@types/node@20.12.8)(typescript@5.8.2))(terser@5.28.1)(tsx@4.19.1)(yaml@2.8.0)\n+\n   tools/scripts/seed:\n     devDependencies:\n       debug:"
        },
        {
            "sha": "4e8a62d9509d78e308ae6cbed343a3f2b671a48c",
            "filename": "pnpm-workspace.yaml",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/68614b43a98e98344c35914a783c357554e40018/pnpm-workspace.yaml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/68614b43a98e98344c35914a783c357554e40018/pnpm-workspace.yaml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/pnpm-workspace.yaml?ref=68614b43a98e98344c35914a783c357554e40018",
            "patch": "@@ -11,6 +11,7 @@ packages:\n   - 'tools/crowdin'\n   - 'tools/daily-challenges'\n   - 'tools/scripts/build'\n+  - 'tools/scripts/lint'\n   - 'tools/scripts/seed'\n   - 'tools/scripts/seed-exams'\n "
        },
        {
            "sha": "72c7948d6a5b918681095fb359f5f9241a145b45",
            "filename": "tools/scripts/lint/index.test.js",
            "status": "modified",
            "additions": 25,
            "deletions": 36,
            "changes": 61,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/68614b43a98e98344c35914a783c357554e40018/tools%2Fscripts%2Flint%2Findex.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/68614b43a98e98344c35914a783c357554e40018/tools%2Fscripts%2Flint%2Findex.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fscripts%2Flint%2Findex.test.js?ref=68614b43a98e98344c35914a783c357554e40018",
            "patch": "@@ -1,13 +1,13 @@\n-const path = require('path');\n-\n-const lint = require('.');\n+import path from 'path';\n+import { describe, it, beforeEach, afterEach, expect, vi } from 'vitest';\n+import lint from '.';\n \n describe('markdown linter', () => {\n-  let good = { path: path.join(__dirname, './fixtures/good.md') };\n-  let badYML = { path: path.join(__dirname, './fixtures/badYML.md') };\n-  let badFencing = { path: path.join(__dirname, './fixtures/badFencing.md') };\n+  const good = { path: path.join(__dirname, './fixtures/good.md') };\n+  const badYML = { path: path.join(__dirname, './fixtures/badYML.md') };\n+  const badFencing = { path: path.join(__dirname, './fixtures/badFencing.md') };\n   beforeEach(() => {\n-    console.log = jest.fn();\n+    console.log = vi.fn();\n     // the linter signals that a file failed by setting\n     // exitCode to 1, so it needs (re)setting to 0\n     process.exitCode = 0;\n@@ -16,40 +16,29 @@ describe('markdown linter', () => {\n     process.exitCode = 0;\n   });\n \n-  it('should pass `good` markdown', done => {\n-    function callback() {\n-      expect(process.exitCode).toBe(0);\n-      done();\n-    }\n-    lint(good, callback);\n+  it('should pass `good` markdown', async () => {\n+    await new Promise(resolve => lint(good, resolve));\n+    expect(process.exitCode).toBe(0);\n   });\n \n-  it('should fail invalid YML blocks', done => {\n-    function callback() {\n-      expect(process.exitCode).toBe(1);\n-      done();\n-    }\n-    lint(badYML, callback);\n+  it('should fail invalid YML blocks', async () => {\n+    await new Promise(resolve => lint(badYML, resolve));\n+    expect(process.exitCode).toBe(1);\n   });\n \n-  it('should fail when code fences are not surrounded by newlines', done => {\n-    function callback() {\n-      expect(process.exitCode).toBe(1);\n-      done();\n-    }\n-    lint(badFencing, callback);\n+  it('should fail when code fences are not surrounded by newlines', async () => {\n+    await new Promise(resolve => lint(badFencing, resolve));\n+    expect(process.exitCode).toBe(1);\n   });\n \n-  it('should write to the console describing the problem', done => {\n-    function callback() {\n-      const expected =\n-        'badYML.md: 19: yaml-linter YAML code blocks should be valid [bad indentation of a mapping entry at line 3, column 17:\\n          testString: testString\\n                    ^] [Context: \"```yml\"]';\n-      expect(console.log.mock.calls.length).toBe(1);\n-      expect(console.log.mock.calls[0][0]).toEqual(\n-        expect.stringContaining(expected)\n-      );\n-      done();\n-    }\n-    lint(badYML, callback);\n+  it('should write to the console describing the problem', async () => {\n+    await new Promise(resolve => lint(badYML, resolve));\n+\n+    const expected =\n+      'badYML.md: 19: yaml-linter YAML code blocks should be valid [bad indentation of a mapping entry at line 3, column 17:\\n          testString: testString\\n                    ^] [Context: \"```yml\"]';\n+    expect(console.log.mock.calls.length).toBe(1);\n+    expect(console.log.mock.calls[0][0]).toEqual(\n+      expect.stringContaining(expected)\n+    );\n   });\n });"
        },
        {
            "sha": "4dbad4ce75d87a0dede716c8be8119c67178c18c",
            "filename": "tools/scripts/lint/package.json",
            "status": "added",
            "additions": 24,
            "deletions": 0,
            "changes": 24,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/68614b43a98e98344c35914a783c357554e40018/tools%2Fscripts%2Flint%2Fpackage.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/68614b43a98e98344c35914a783c357554e40018/tools%2Fscripts%2Flint%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fscripts%2Flint%2Fpackage.json?ref=68614b43a98e98344c35914a783c357554e40018",
            "patch": "@@ -0,0 +1,24 @@\n+{\n+  \"name\": \"@freecodecamp/scripts-lint\",\n+  \"version\": \"0.0.1\",\n+  \"description\": \"The freeCodeCamp.org open-source codebase and curriculum\",\n+  \"license\": \"BSD-3-Clause\",\n+  \"private\": true,\n+  \"main\": \"none\",\n+  \"repository\": {\n+    \"type\": \"git\",\n+    \"url\": \"git+https://github.com/freeCodeCamp/freeCodeCamp.git\"\n+  },\n+  \"bugs\": {\n+    \"url\": \"https://github.com/freeCodeCamp/freeCodeCamp/issues\"\n+  },\n+  \"homepage\": \"https://github.com/freeCodeCamp/freeCodeCamp#readme\",\n+  \"author\": \"freeCodeCamp <team@freecodecamp.org>\",\n+  \"scripts\": {\n+    \"test\": \"vitest\"\n+  },\n+  \"devDependencies\": {\n+    \"@vitest/ui\": \"^3.2.4\",\n+    \"vitest\": \"^3.2.4\"\n+  }\n+}"
        }
    ],
    "stats": {
        "total": 98,
        "additions": 61,
        "deletions": 37
    }
}