{
    "author": "ojeytonwilliams",
    "message": "fix(client): prevent client double prefixing i18n paths on quiz exit (#61659)",
    "sha": "19af1cdcd29b894d584a5156728fb9b02ae0b96e",
    "files": [
        {
            "sha": "b22705d573c0e0d1706c49bf2d9fb5a81a420a5e",
            "filename": "client/src/templates/Challenges/quiz/show.tsx",
            "status": "modified",
            "additions": 6,
            "deletions": 12,
            "changes": 18,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/19af1cdcd29b894d584a5156728fb9b02ae0b96e/client%2Fsrc%2Ftemplates%2FChallenges%2Fquiz%2Fshow.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/19af1cdcd29b894d584a5156728fb9b02ae0b96e/client%2Fsrc%2Ftemplates%2FChallenges%2Fquiz%2Fshow.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fquiz%2Fshow.tsx?ref=19af1cdcd29b894d584a5156728fb9b02ae0b96e",
            "patch": "@@ -1,4 +1,4 @@\n-import { graphql, navigate } from 'gatsby';\n+import { graphql } from 'gatsby';\n import React, { useCallback, useEffect, useRef, useState } from 'react';\n import Helmet from 'react-helmet';\n import { ObserveKeys } from 'react-hotkeys';\n@@ -128,7 +128,7 @@ const ShowQuiz = ({\n \n   const [showUnanswered, setShowUnanswered] = useState(false);\n \n-  const [exitConfirmed, setExitConfirmed] = useState(false);\n+  const exitConfirmed = useRef(false);\n \n   const [exitPathname, setExitPathname] = useState(blockHashSlug);\n \n@@ -247,8 +247,8 @@ const ShowQuiz = ({\n   };\n \n   const handleExitQuizModalBtnClick = () => {\n-    setExitConfirmed(true);\n-    void navigate(exitPathname || '/learn');\n+    exitConfirmed.current = true;\n+    void reachNavigate(exitPathname || '/learn');\n     closeExitQuizModal();\n   };\n \n@@ -267,7 +267,7 @@ const ShowQuiz = ({\n       //   - If they don't pass, the Finish Quiz button is disabled, there isn't anything for them to do other than leaving the page\n       //   - If they pass, the Submit-and-go button shows up, and campers should be allowed to leave the page\n       // - When they have clicked the exit button on the exit modal\n-      if (hasSubmitted || exitConfirmed) {\n+      if (hasSubmitted || exitConfirmed.current) {\n         return;\n       }\n \n@@ -283,13 +283,7 @@ const ShowQuiz = ({\n       void reachNavigate(`${curLocation.pathname}`);\n       openExitQuizModal();\n     },\n-    [\n-      curLocation.pathname,\n-      hasSubmitted,\n-      exitConfirmed,\n-      openExitQuizModal,\n-      blockHashSlug\n-    ]\n+    [curLocation.pathname, hasSubmitted, openExitQuizModal, blockHashSlug]\n   );\n \n   usePageLeave({"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 6,
        "deletions": 12
    }
}