{
    "author": "Arif-Khalid",
    "message": "fix(client): fix backend code source submission (#58832)\n\nCo-authored-by: sembauke <semboot699@gmail.com>",
    "sha": "e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37",
    "files": [
        {
            "sha": "bd6dd44fea55155a7017e11b7cd2102fe887f36f",
            "filename": "client/i18n/locales/english/translations.json",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json?ref=e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37",
            "patch": "@@ -981,7 +981,8 @@\n     \"publicly-visible-url\": \"Remember to submit a publicly visible app URL.\",\n     \"ms-learn-link\": \"Please use a valid Microsoft Learn trophy link.\",\n     \"path-url\": \"You probably want to submit the root path i.e. https://example.com, not https://example.com/path\",\n-    \"source-code-link-required\": \"Remember to submit the link to your source code.\"\n+    \"source-code-link-required\": \"Remember to submit the link to your source code.\",\n+    \"source-code-link-public\": \"Source code link must be publicly visible.\"\n   },\n   \"certification\": {\n     \"executive\": \"Executive Director, freeCodeCamp.org\","
        },
        {
            "sha": "9a0b696f4952b9545e299fa0846a0ea6b874a2a5",
            "filename": "client/src/components/formHelpers/form-fields.tsx",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform-fields.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform-fields.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform-fields.tsx?ref=e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37",
            "patch": "@@ -15,7 +15,8 @@ import {\n   fCCValidator,\n   httpValidator,\n   pathValidator,\n-  sourceCodeLinkExistsValidator\n+  sourceCodeLinkExistsValidator,\n+  sourceCodeLinkPublicValidator\n } from './form-validators';\n \n export type FormOptions = {\n@@ -67,8 +68,11 @@ function FormFields({ formFields, options }: FormFieldsProps): JSX.Element {\n         validators.push(pathValidator);\n       }\n     }\n-    if (isSourceCodeLinkRequired && name === 'githubLink') {\n-      validators.push(sourceCodeLinkExistsValidator);\n+    if (name === 'githubLink') {\n+      if (isSourceCodeLinkRequired) {\n+        validators.push(sourceCodeLinkExistsValidator);\n+      }\n+      validators.push(sourceCodeLinkPublicValidator);\n     }\n     if (!isLocalLinkAllowed) {\n       validators.push(localhostValidator);"
        },
        {
            "sha": "fe1efad87ed723605903c8f066436cc6b0ee6fc6",
            "filename": "client/src/components/formHelpers/form-validators.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform-validators.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform-validators.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform-validators.tsx?ref=e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37",
            "patch": "@@ -41,6 +41,8 @@ export const pathValidator: Validator = value =>\n export const sourceCodeLinkExistsValidator: Validator = value =>\n   value ? null : <Trans>validation.source-code-link-required</Trans>;\n \n+export const sourceCodeLinkPublicValidator: Validator = value =>\n+  isPrivate(value) ? <Trans>validation.source-code-link-public</Trans> : null;\n export function composeValidators(...validators: Validator[]) {\n   return (value: string): ReturnType<Validator> | null =>\n     validators.reduce("
        },
        {
            "sha": "e30776b21badcf5a48d5d687a53c3f8836b929e1",
            "filename": "client/src/components/formHelpers/form.tsx",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FformHelpers%2Fform.tsx?ref=e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37",
            "patch": "@@ -9,7 +9,8 @@ import {\n   composeValidators,\n   fCCValidator,\n   httpValidator,\n-  sourceCodeLinkExistsValidator\n+  sourceCodeLinkExistsValidator,\n+  sourceCodeLinkPublicValidator\n } from './form-validators';\n import FormFields, { FormOptions } from './form-fields';\n \n@@ -69,8 +70,11 @@ function validateFormValues(\n     if (!isLocalLinkAllowed) {\n       validators.push(localhostValidator);\n     }\n-    if (isSourceCodeLinkRequired) {\n-      validators.push(sourceCodeLinkExistsValidator);\n+    if (key === 'githubLink') {\n+      if (isSourceCodeLinkRequired) {\n+        validators.push(sourceCodeLinkExistsValidator);\n+      }\n+      validators.push(sourceCodeLinkPublicValidator);\n     }\n \n     const nullOrWarning = composeValidators(...validators)(value);"
        },
        {
            "sha": "33ad5371ab67d026c4da4b4188c7d87d2b3792a1",
            "filename": "client/src/templates/Challenges/redux/completion-epic.js",
            "status": "modified",
            "additions": 10,
            "deletions": 3,
            "changes": 13,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37/client%2Fsrc%2Ftemplates%2FChallenges%2Fredux%2Fcompletion-epic.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37/client%2Fsrc%2Ftemplates%2FChallenges%2Fredux%2Fcompletion-epic.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fredux%2Fcompletion-epic.js?ref=e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37",
            "patch": "@@ -56,7 +56,7 @@ function postChallenge(update) {\n   const saveChallenge = postUpdate$(update).pipe(\n     retry(3),\n     switchMap(({ data }) => {\n-      const { savedChallenges, message, examResults } = data;\n+      const { type, savedChallenges, message, examResults } = data;\n       const payloadWithClientProperties = {\n         ...omit(update.payload, ['files'])\n       };\n@@ -79,8 +79,15 @@ function postChallenge(update) {\n         submitChallengeComplete()\n       ];\n \n-      if (message && challengeType === challengeTypes.msTrophy) {\n-        actions = [createFlashMessage(data), submitChallengeError()];\n+      if (\n+        type === 'error' ||\n+        (message && challengeType === challengeTypes.msTrophy)\n+      ) {\n+        actions = [];\n+        if (message) {\n+          actions.push(createFlashMessage(data));\n+        }\n+        actions.push(submitChallengeError());\n       } else if (challengeType === challengeTypes.msTrophy) {\n         actions.push(createFlashMessage(msTrophyVerified));\n       }"
        },
        {
            "sha": "552b63ab4e83d33cdc17db69e8aafb273425786b",
            "filename": "e2e/backend.spec.ts",
            "status": "modified",
            "additions": 18,
            "deletions": 1,
            "changes": 19,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37/e2e%2Fbackend.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37/e2e%2Fbackend.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fbackend.spec.ts?ref=e411c1eea6cd1f08e0ad6c2a1d786b7f566e0a37",
            "patch": "@@ -3,7 +3,9 @@ import { test, expect } from '@playwright/test';\n const locations = {\n   index:\n     'learn/back-end-development-and-apis/managing-packages-with-npm/' +\n-    'how-to-use-package-json-the-core-of-any-node-js-project-or-npm-package'\n+    'how-to-use-package-json-the-core-of-any-node-js-project-or-npm-package',\n+  project:\n+    '/learn/back-end-development-and-apis/back-end-development-and-apis-projects/timestamp-microservice'\n };\n \n const unhandledErrorMessage = 'Something is not quite right';\n@@ -28,3 +30,18 @@ test.describe('Backend challenge', () => {\n     await expect(page.getByText(unhandledErrorMessage)).not.toBeVisible();\n   });\n });\n+\n+test.describe('Backend project', () => {\n+  test.beforeEach(async ({ page }) => {\n+    await page.goto(locations.project);\n+  });\n+\n+  test('warns against private source code links', async ({ page }) => {\n+    await page.fill('input[name=\"solution\"]', 'https://example.com');\n+    await page.fill('input[name=\"githubLink\"]', 'https://localhost:3000');\n+\n+    await expect(\n+      page.getByText('Source code link must be publicly visible.')\n+    ).toBeVisible();\n+  });\n+});"
        }
    ],
    "stats": {
        "total": 57,
        "additions": 46,
        "deletions": 11
    }
}