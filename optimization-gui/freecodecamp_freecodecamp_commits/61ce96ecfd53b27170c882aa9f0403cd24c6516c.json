{
    "author": "Sembauke",
    "message": "feat: convert Codeally test to Playwright (#54876)",
    "sha": "61ce96ecfd53b27170c882aa9f0403cd24c6516c",
    "files": [
        {
            "sha": "249069eff7732c8ef948f223818757fc46b853f9",
            "filename": ".github/workflows/temporary-container-checks.yml",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/61ce96ecfd53b27170c882aa9f0403cd24c6516c/.github%2Fworkflows%2Ftemporary-container-checks.yml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/61ce96ecfd53b27170c882aa9f0403cd24c6516c/.github%2Fworkflows%2Ftemporary-container-checks.yml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/.github%2Fworkflows%2Ftemporary-container-checks.yml?ref=61ce96ecfd53b27170c882aa9f0403cd24c6516c",
            "patch": "@@ -158,4 +158,4 @@ jobs:\n           config: baseUrl=http://localhost:8000\n           browser: ${{ matrix.browsers }}\n           # Only run one test to keep the run time down.\n-          spec: 'cypress/e2e/default/learn/challenges/codeally.ts'\n+          spec: 'cypress/e2e/default/learn/redirects/es6-to-basic-javascript.ts'"
        },
        {
            "sha": "ad6918331de5443eb9f31b24d4cfef4d8940b167",
            "filename": "cypress/e2e/default/learn/challenges/codeally.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 39,
            "changes": 39,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/aae96b3af987611e6ed8a39e2e6ee2951379786d/cypress%2Fe2e%2Fdefault%2Flearn%2Fchallenges%2Fcodeally.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/aae96b3af987611e6ed8a39e2e6ee2951379786d/cypress%2Fe2e%2Fdefault%2Flearn%2Fchallenges%2Fcodeally.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/cypress%2Fe2e%2Fdefault%2Flearn%2Fchallenges%2Fcodeally.ts?ref=aae96b3af987611e6ed8a39e2e6ee2951379786d",
            "patch": "@@ -1,39 +0,0 @@\n-describe('CodeAlly cert challenge', function () {\n-  describe('before completing the project', function () {\n-    before(() => {\n-      cy.task('seed');\n-      cy.login();\n-      cy.visit(\n-        '/learn/relational-database/build-a-celestial-bodies-database-project/build-a-celestial-bodies-database'\n-      );\n-    });\n-\n-    it('should not allow you to submit a URL', function () {\n-      cy.get('input[name=\"solution\"]')\n-        .type('https://example.com')\n-        .type('{enter}');\n-\n-      cy.contains('You must complete the project first.');\n-    });\n-  });\n-\n-  describe('after completing the project', function () {\n-    before(() => {\n-      cy.task('seed', ['certified-user']);\n-      cy.login('certified-user');\n-      cy.visit(\n-        '/learn/relational-database/build-a-celestial-bodies-database-project/build-a-celestial-bodies-database'\n-      );\n-    });\n-\n-    it('should allow you to submit a URL', function () {\n-      cy.get('input[name=\"solution\"]')\n-        .type('https://example.com')\n-        .type('{enter}');\n-\n-      cy.get('div[role=\"dialog\"]')\n-        .contains('Submit and go to next challenge')\n-        .should('be.visible');\n-    });\n-  });\n-});"
        },
        {
            "sha": "ce83838f4cf685f92a5339e8648face52a5ff35f",
            "filename": "e2e/codeally.spec.ts",
            "status": "added",
            "additions": 46,
            "deletions": 0,
            "changes": 46,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/61ce96ecfd53b27170c882aa9f0403cd24c6516c/e2e%2Fcodeally.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/61ce96ecfd53b27170c882aa9f0403cd24c6516c/e2e%2Fcodeally.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fcodeally.spec.ts?ref=61ce96ecfd53b27170c882aa9f0403cd24c6516c",
            "patch": "@@ -0,0 +1,46 @@\n+import { execSync } from 'child_process';\n+import { test, expect } from '@playwright/test';\n+\n+test.describe('Before completing the project', () => {\n+  test.use({ storageState: 'playwright/.auth/development-user.json' });\n+\n+  test.beforeEach(() => {\n+    execSync('node ./tools/scripts/seed/seed-demo-user --donor');\n+  });\n+\n+  test('should not allow you to submit a URL', async ({ page }) => {\n+    await page.goto(\n+      '/learn/relational-database/build-a-celestial-bodies-database-project/build-a-celestial-bodies-database'\n+    );\n+    await page\n+      .getByRole('textbox', { name: 'solution' })\n+      .fill('https://example.com');\n+    await page.getByRole('textbox', { name: 'solution' }).press('Enter');\n+    await expect(page.getByTestId('flash-message')).toContainText(\n+      /You must complete the project first./\n+    );\n+  });\n+});\n+\n+test.describe('After completing the project', () => {\n+  test.use({ storageState: 'playwright/.auth/certified-user.json' });\n+\n+  test.beforeAll(() => {\n+    execSync('node ./tools/scripts/seed/seed-demo-user certified-user');\n+  });\n+\n+  test('should allow you to submit a URL', async ({ page }) => {\n+    await page.goto(\n+      '/learn/relational-database/build-a-celestial-bodies-database-project/build-a-celestial-bodies-database'\n+    );\n+    await page\n+      .getByRole('textbox', { name: 'solution' })\n+      .fill('https://example.com');\n+    await page.getByRole('textbox', { name: 'solution' }).press('Enter');\n+\n+    await expect(page.getByRole('dialog')).toBeVisible();\n+    await expect(page.getByRole('dialog')).toContainText(\n+      'Submit and go to next challenge'\n+    );\n+  });\n+});"
        }
    ],
    "stats": {
        "total": 87,
        "additions": 47,
        "deletions": 40
    }
}