{
    "author": "ojeytonwilliams",
    "message": "fix(api): use generic error message if CSRF error (#55264)",
    "sha": "a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
    "files": [
        {
            "sha": "fa2dbf681548a5c06f693ba915582bd4e089a925",
            "filename": "api/src/app.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fapp.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fapp.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fapp.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -105,7 +105,10 @@ export const build = async (\n     // test environments)\n     skipInit: !SENTRY_DSN,\n     errorResponse: (error, _request, reply) => {\n-      if (reply.statusCode === 500) {\n+      const isCSRFError =\n+        error.code === 'FST_CSRF_INVALID_TOKEN' ||\n+        error.code === 'FST_CSRF_MISSING_SECRET';\n+      if (reply.statusCode === 500 || isCSRFError) {\n         void reply.send({\n           message: 'flash.generic-error',\n           type: 'danger'"
        },
        {
            "sha": "b29fcfc7b2a4c5be3c96e7f0ceed78d23638d957",
            "filename": "api/src/routes/challenge.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Froutes%2Fchallenge.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Froutes%2Fchallenge.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fchallenge.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -396,8 +396,7 @@ export const challengeRoutes: FastifyPluginCallbackTypebox = (\n         !multifileCertProjectIds.includes(challengeId) &&\n         !multifilePythonCertProjectIds.includes(challengeId)\n       ) {\n-        void reply.code(403);\n-        return 'That challenge type is not saveable.';\n+        void reply.code(403).send('That challenge type is not saveable.');\n       }\n \n       const userSavedChallenges = saveUserChallengeData(\n@@ -413,7 +412,7 @@ export const challengeRoutes: FastifyPluginCallbackTypebox = (\n         }\n       });\n \n-      return { savedChallenges: userSavedChallenges };\n+      void reply.send({ savedChallenges: userSavedChallenges });\n     }\n   );\n "
        },
        {
            "sha": "23aa8abc70c4de16e620794192a337baa404a046",
            "filename": "api/src/routes/settings.test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 8,
            "changes": 12,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Froutes%2Fsettings.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Froutes%2Fsettings.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fsettings.test.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -62,10 +62,8 @@ describe('settingRoutes', () => {\n       });\n \n       expect(response.body).toEqual({\n-        code: 'FST_CSRF_MISSING_SECRET',\n-        error: 'Forbidden',\n-        message: 'Missing csrf secret',\n-        statusCode: 403\n+        message: 'flash.generic-error',\n+        type: 'danger'\n       });\n       expect(response.statusCode).toEqual(403);\n     });\n@@ -76,10 +74,8 @@ describe('settingRoutes', () => {\n       }).set('Cookie', ['_csrf=foo', 'csrf-token=bar']);\n \n       expect(response.body).toEqual({\n-        code: 'FST_CSRF_INVALID_TOKEN',\n-        error: 'Forbidden',\n-        message: 'Invalid csrf token',\n-        statusCode: 403\n+        message: 'flash.generic-error',\n+        type: 'danger'\n       });\n       expect(response.statusCode).toEqual(403);\n     });"
        },
        {
            "sha": "402fb2fac408f037951d6a65f3717c524b81cb48",
            "filename": "api/src/schemas/certificate/cert-slug.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fcertificate%2Fcert-slug.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fcertificate%2Fcert-slug.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Fcertificate%2Fcert-slug.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -1,6 +1,6 @@\n import { Type } from '@fastify/type-provider-typebox';\n import { Certification } from '../../../../shared/config/certification-settings';\n-import { generic500 } from '../types';\n+import { genericError } from '../types';\n \n export const certSlug = {\n   params: Type.Object({\n@@ -120,6 +120,6 @@ export const certSlug = {\n         })\n       )\n     }),\n-    500: generic500\n+    default: genericError\n   }\n };"
        },
        {
            "sha": "9825544a89b46671fb63baa8fc6da5c2208142e9",
            "filename": "api/src/schemas/certificate/certificate-verify.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fcertificate%2Fcertificate-verify.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fcertificate%2Fcertificate-verify.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Fcertificate%2Fcertificate-verify.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -1,5 +1,5 @@\n import { Type } from '@fastify/type-provider-typebox';\n-import { generic500, isCertMap } from '../types';\n+import { genericError, isCertMap } from '../types';\n \n export const certificateVerify = {\n   // TODO(POST_MVP): Remove partial validation from route for schema validation\n@@ -126,7 +126,8 @@ export const certificateVerify = {\n         type: Type.Literal('danger'),\n         message: Type.Literal('flash.went-wrong')\n       }),\n-      generic500\n-    ])\n+      genericError\n+    ]),\n+    default: genericError\n   }\n };"
        },
        {
            "sha": "65a2a2617dba7e7182a17ac5143ab919e8d7665e",
            "filename": "api/src/schemas/challenge/backend-challenge-completed.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fchallenge%2Fbackend-challenge-completed.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fchallenge%2Fbackend-challenge-completed.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Fchallenge%2Fbackend-challenge-completed.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -1,5 +1,5 @@\n import { Type } from '@fastify/type-provider-typebox';\n-import { generic500 } from '../types';\n+import { genericError } from '../types';\n \n export const backendChallengeCompleted = {\n   body: Type.Object({\n@@ -17,6 +17,6 @@ export const backendChallengeCompleted = {\n         'That does not appear to be a valid challenge submission.'\n       )\n     }),\n-    500: generic500\n+    default: genericError\n   }\n };"
        },
        {
            "sha": "f8ba0e2ed1e8b4761cbff82a970b12688dc5cfea",
            "filename": "api/src/schemas/challenge/coderoad-challenge-completed.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fchallenge%2Fcoderoad-challenge-completed.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fchallenge%2Fcoderoad-challenge-completed.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Fchallenge%2Fcoderoad-challenge-completed.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -1,5 +1,5 @@\n import { Type } from '@fastify/type-provider-typebox';\n-import { generic500 } from '../types';\n+import { genericError } from '../types';\n \n export const coderoadChallengeCompleted = {\n   body: Type.Object({\n@@ -15,6 +15,6 @@ export const coderoadChallengeCompleted = {\n       type: Type.Literal('error'),\n       msg: Type.String()\n     }),\n-    500: generic500\n+    default: genericError\n   }\n };"
        },
        {
            "sha": "af161ee84478a1e0af3bb3fedd840b99a52344bb",
            "filename": "api/src/schemas/challenge/exam-challenge-completed.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 4,
            "changes": 11,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fchallenge%2Fexam-challenge-completed.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fchallenge%2Fexam-challenge-completed.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Fchallenge%2Fexam-challenge-completed.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -1,5 +1,5 @@\n import { Type } from '@fastify/type-provider-typebox';\n-import { examResults } from '../types';\n+import { examResults, genericError } from '../types';\n \n export const examChallengeCompleted = {\n   body: Type.Object({\n@@ -30,9 +30,12 @@ export const examChallengeCompleted = {\n     400: Type.Object({\n       error: Type.String()\n     }),\n-    403: Type.Object({\n-      error: Type.String()\n-    }),\n+    403: Type.Union([\n+      Type.Object({\n+        error: Type.String()\n+      }),\n+      genericError\n+    ]),\n     500: Type.Object({\n       error: Type.String()\n     })"
        },
        {
            "sha": "ca48befe5262e2f689bf7472096a1c0bfe21f888",
            "filename": "api/src/schemas/challenge/exam.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fchallenge%2Fexam.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fchallenge%2Fexam.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Fchallenge%2Fexam.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -1,4 +1,5 @@\n import { Type } from '@fastify/type-provider-typebox';\n+import { genericError } from '../types';\n \n export const exam = {\n   params: Type.Object({\n@@ -27,9 +28,12 @@ export const exam = {\n     400: Type.Object({\n       error: Type.String()\n     }),\n-    403: Type.Object({\n-      error: Type.String()\n-    }),\n+    403: Type.Union([\n+      Type.Object({\n+        error: Type.String()\n+      }),\n+      genericError\n+    ]),\n     500: Type.Object({\n       error: Type.String()\n     })"
        },
        {
            "sha": "da6c5d8fddba28901113af4cedadde3db3c53885",
            "filename": "api/src/schemas/challenge/modern-challenge-completed.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fchallenge%2Fmodern-challenge-completed.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fchallenge%2Fmodern-challenge-completed.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Fchallenge%2Fmodern-challenge-completed.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -1,5 +1,5 @@\n import { Type } from '@fastify/type-provider-typebox';\n-import { generic500, savedChallenge } from '../types';\n+import { genericError, savedChallenge } from '../types';\n \n export const modernChallengeCompleted = {\n   body: Type.Object({\n@@ -30,6 +30,6 @@ export const modernChallengeCompleted = {\n         'That does not appear to be a valid challenge submission.'\n       )\n     }),\n-    500: generic500\n+    default: genericError\n   }\n };"
        },
        {
            "sha": "d7230c2baadce43919e15a5cace7c79945e759a9",
            "filename": "api/src/schemas/challenge/project-completed.ts",
            "status": "modified",
            "additions": 16,
            "deletions": 11,
            "changes": 27,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fchallenge%2Fproject-completed.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fchallenge%2Fproject-completed.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Fchallenge%2Fproject-completed.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -1,5 +1,5 @@\n import { Type } from '@fastify/type-provider-typebox';\n-import { generic500 } from '../types';\n+import { genericError } from '../types';\n \n export const projectCompleted = {\n   body: Type.Object({\n@@ -28,15 +28,20 @@ export const projectCompleted = {\n         )\n       ])\n     }),\n-    403: Type.Object({\n-      type: Type.Literal('error'),\n-      message: Type.Union([\n-        Type.Literal(\n-          'You have to complete the project before you can submit a URL.'\n-        ),\n-        Type.Literal('That does not appear to be a valid challenge submission.')\n-      ])\n-    }),\n-    500: generic500\n+    403: Type.Union([\n+      Type.Object({\n+        type: Type.Literal('error'),\n+        message: Type.Union([\n+          Type.Literal(\n+            'You have to complete the project before you can submit a URL.'\n+          ),\n+          Type.Literal(\n+            'That does not appear to be a valid challenge submission.'\n+          )\n+        ])\n+      }),\n+      genericError\n+    ]),\n+    default: genericError\n   }\n };"
        },
        {
            "sha": "93b27a8aad8ad17e29fcdb21d033e62054152e46",
            "filename": "api/src/schemas/challenge/save-challenge.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 3,
            "changes": 15,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fchallenge%2Fsave-challenge.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fchallenge%2Fsave-challenge.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Fchallenge%2Fsave-challenge.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -1,5 +1,5 @@\n import { Type } from '@fastify/type-provider-typebox';\n-import { file, generic500, savedChallenge } from '../types';\n+import { file, genericError, savedChallenge } from '../types';\n \n export const saveChallenge = {\n   body: Type.Object({\n@@ -14,7 +14,16 @@ export const saveChallenge = {\n     200: Type.Object({\n       savedChallenges: Type.Array(savedChallenge)\n     }),\n-    403: Type.Literal('That challenge type is not saveable.'),\n-    500: generic500\n+    400: Type.Object({\n+      message: Type.Literal(\n+        'That does not appear to be a valid challenge submission.'\n+      ),\n+      type: Type.Literal('error')\n+    }),\n+    403: Type.Union([\n+      Type.Literal('That challenge type is not saveable.'),\n+      genericError\n+    ]),\n+    default: genericError\n   }\n };"
        },
        {
            "sha": "76d1db7520f33ec29945f01f234cf4e33c40f09d",
            "filename": "api/src/schemas/settings/update-my-classroom-mode.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 4,
            "changes": 12,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fsettings%2Fupdate-my-classroom-mode.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fsettings%2Fupdate-my-classroom-mode.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Fsettings%2Fupdate-my-classroom-mode.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -1,4 +1,5 @@\n import { Type } from '@fastify/type-provider-typebox';\n+import { genericError } from '../types';\n \n export const updateMyClassroomMode = {\n   body: Type.Object({\n@@ -9,9 +10,12 @@ export const updateMyClassroomMode = {\n       message: Type.Literal('flash.classroom-mode-updated'),\n       type: Type.Literal('success')\n     }),\n-    403: Type.Object({\n-      message: Type.Literal('flash.wrong-updating'),\n-      type: Type.Literal('danger')\n-    })\n+    403: Type.Union([\n+      Type.Object({\n+        message: Type.Literal('flash.wrong-updating'),\n+        type: Type.Literal('danger')\n+      }),\n+      genericError\n+    ])\n   }\n };"
        },
        {
            "sha": "94e90db0ff773a534eb461afb60f50fbc2df1cde",
            "filename": "api/src/schemas/types.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Ftypes.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Ftypes.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Ftypes.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -1,6 +1,6 @@\n import { Type } from '@fastify/type-provider-typebox';\n \n-export const generic500 = Type.Object({\n+export const genericError = Type.Object({\n   message: Type.Literal('flash.generic-error'),\n   type: Type.Literal('danger')\n });"
        },
        {
            "sha": "8004a7c6aaafc6b9f9c0829c20ed16c4158313cd",
            "filename": "api/src/schemas/user/delete-my-account.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fuser%2Fdelete-my-account.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fuser%2Fdelete-my-account.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Fuser%2Fdelete-my-account.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -1,9 +1,9 @@\n import { Type } from '@fastify/type-provider-typebox';\n-import { generic500 } from '../types';\n+import { genericError } from '../types';\n \n export const deleteMyAccount = {\n   response: {\n     200: Type.Object({}),\n-    500: generic500\n+    default: genericError\n   }\n };"
        },
        {
            "sha": "5ddfa8c2248e58490603a39bb1e04452a8baafcd",
            "filename": "api/src/schemas/user/delete-user-token.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fuser%2Fdelete-user-token.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fuser%2Fdelete-user-token.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Fuser%2Fdelete-user-token.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -1,5 +1,5 @@\n import { Type } from '@fastify/type-provider-typebox';\n-import { generic500 } from '../types';\n+import { genericError } from '../types';\n \n export const deleteUserToken = {\n   response: {\n@@ -10,6 +10,6 @@ export const deleteUserToken = {\n       message: Type.Literal('userToken not found'),\n       type: Type.Literal('info')\n     }),\n-    500: generic500\n+    default: genericError\n   }\n };"
        },
        {
            "sha": "5791871f5af233cbb17cc0cdac98ec3c680d07c4",
            "filename": "api/src/schemas/user/post-ms-username.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 4,
            "changes": 12,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fuser%2Fpost-ms-username.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fuser%2Fpost-ms-username.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Fuser%2Fpost-ms-username.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -1,4 +1,5 @@\n import { Type } from '@fastify/type-provider-typebox';\n+import { genericError } from '../types';\n \n export const postMsUsername = {\n   body: Type.Object({\n@@ -16,10 +17,13 @@ export const postMsUsername = {\n       type: Type.Literal('error'),\n       message: Type.Literal('flash.ms.transcript.link-err-2')\n     }),\n-    403: Type.Object({\n-      type: Type.Literal('error'),\n-      message: Type.Literal('flash.ms.transcript.link-err-4')\n-    }),\n+    403: Type.Union([\n+      Type.Object({\n+        type: Type.Literal('error'),\n+        message: Type.Literal('flash.ms.transcript.link-err-4')\n+      }),\n+      genericError\n+    ]),\n     500: Type.Union([\n       Type.Object({\n         type: Type.Literal('error'),"
        },
        {
            "sha": "f2523b264cf40fa54ba87e16ef170f43c2c04c57",
            "filename": "api/src/schemas/user/report-user.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fuser%2Freport-user.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fuser%2Freport-user.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Fuser%2Freport-user.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -1,5 +1,5 @@\n import { Type } from '@fastify/type-provider-typebox';\n-import { generic500 } from '../types';\n+import { genericError } from '../types';\n \n export const reportUser = {\n   body: Type.Object({\n@@ -18,6 +18,6 @@ export const reportUser = {\n       type: Type.Literal('danger'),\n       message: Type.Literal('flash.provide-username')\n     }),\n-    500: generic500\n+    default: genericError\n   }\n };"
        },
        {
            "sha": "0dcbb5ca253c7bcf9e9a2ec812dd31c85460eade",
            "filename": "api/src/schemas/user/reset-my-progress.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fuser%2Freset-my-progress.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Fschemas%2Fuser%2Freset-my-progress.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fschemas%2Fuser%2Freset-my-progress.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -1,9 +1,9 @@\n import { Type } from '@fastify/type-provider-typebox';\n-import { generic500 } from '../types';\n+import { genericError } from '../types';\n \n export const resetMyProgress = {\n   response: {\n     200: Type.Object({}),\n-    500: generic500\n+    default: genericError\n   }\n };"
        },
        {
            "sha": "3c671d0f926c47ff61a6d8e1ae062086fd6cc4e2",
            "filename": "api/src/utils/error-formatting.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Futils%2Ferror-formatting.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a22e90c10d6a23c660a19a7f237e3b77c01d6f41/api%2Fsrc%2Futils%2Ferror-formatting.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Futils%2Ferror-formatting.ts?ref=a22e90c10d6a23c660a19a7f237e3b77c01d6f41",
            "patch": "@@ -34,6 +34,8 @@ export const formatProjectCompletedValidation = (\n ): FormattedError => {\n   const error = getError(errors);\n \n+  // TODO: split this into two functions. There's no need for it to handle both\n+  // /project-completed and /save-challenge\n   return error.instancePath === '' &&\n     error.params.missingProperty === 'solution'\n     ? {"
        }
    ],
    "stats": {
        "total": 152,
        "additions": 91,
        "deletions": 61
    }
}