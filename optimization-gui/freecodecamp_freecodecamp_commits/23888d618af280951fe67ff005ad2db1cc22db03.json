{
    "author": "ojeytonwilliams",
    "message": "feat: transform JSX in scripts (#55860)",
    "sha": "23888d618af280951fe67ff005ad2db1cc22db03",
    "files": [
        {
            "sha": "e4419e6db084c67bde976916af1c7e84a0b32114",
            "filename": "client/src/templates/Challenges/rechallenge/transformers.js",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/23888d618af280951fe67ff005ad2db1cc22db03/client%2Fsrc%2Ftemplates%2FChallenges%2Frechallenge%2Ftransformers.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/23888d618af280951fe67ff005ad2db1cc22db03/client%2Fsrc%2Ftemplates%2FChallenges%2Frechallenge%2Ftransformers.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Frechallenge%2Ftransformers.js?ref=23888d618af280951fe67ff005ad2db1cc22db03",
            "patch": "@@ -177,9 +177,17 @@ async function transformSASS(documentElement) {\n async function transformScript(documentElement) {\n   await loadBabel();\n   await loadPresetEnv();\n+  await loadPresetReact();\n   const scriptTags = documentElement.querySelectorAll('script');\n   scriptTags.forEach(script => {\n-    script.innerHTML = babelTransformCode(getBabelOptions(presetsJS))(\n+    const isBabel = script.type === 'text/babel';\n+    // TODO: make the use of JSX conditional on more than just the script type.\n+    // It should only be used for React challenges since it would be confusing\n+    // for learners to see the results of a transformation they didn't ask for.\n+    const options = isBabel ? presetsJSX : presetsJS;\n+\n+    if (isBabel) script.removeAttribute('type'); // otherwise the browser will ignore the script\n+    script.innerHTML = babelTransformCode(getBabelOptions(options))(\n       script.innerHTML\n     );\n   });"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 9,
        "deletions": 1
    }
}