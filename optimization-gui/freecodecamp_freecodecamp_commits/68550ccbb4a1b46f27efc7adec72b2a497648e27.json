{
    "author": "Sembauke",
    "message": "fix: initialize MathJax correctly  (#57321)\n\nCo-authored-by: Naomi <accounts+github@nhcarrigan.com>",
    "sha": "68550ccbb4a1b46f27efc7adec72b2a497648e27",
    "files": [
        {
            "sha": "9d478a58dc2f31d09607cb7e648e5976d4fe47ab",
            "filename": "client/src/templates/Challenges/classic/show.tsx",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fshow.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fshow.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fshow.tsx?ref=68550ccbb4a1b46f27efc7adec72b2a497648e27",
            "patch": "@@ -403,13 +403,11 @@ function ShowClassic({\n   }) => {\n     return (\n       <SidePanel\n-        block={block}\n         challengeDescription={\n           <ChallengeDescription\n             description={description}\n             instructions={instructions}\n             superBlock={superBlock}\n-            block={block}\n           />\n         }\n         challengeTitle={\n@@ -422,7 +420,6 @@ function ShowClassic({\n         }\n         instructionsPanelRef={instructionsPanelRef}\n         toolPanel={toolPanel}\n-        superBlock={superBlock}\n         hasDemo={hasDemo}\n       />\n     );"
        },
        {
            "sha": "22a652ab8ea1ea1f506e3407eca46c4879890692",
            "filename": "client/src/templates/Challenges/components/challenge-description.tsx",
            "status": "modified",
            "additions": 12,
            "deletions": 9,
            "changes": 21,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fchallenge-description.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fchallenge-description.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fchallenge-description.tsx?ref=68550ccbb4a1b46f27efc7adec72b2a497648e27",
            "patch": "@@ -1,25 +1,28 @@\n-import React from 'react';\n-\n+import React, { useEffect } from 'react';\n+import { initializeMathJax, isMathJaxAllowed } from '../../../utils/math-jax';\n import PrismFormatted from './prism-formatted';\n import './challenge-description.css';\n \n type Props = {\n   description?: string;\n   instructions?: string;\n-  superBlock?: string;\n-  block?: string;\n+  superBlock: string;\n };\n+\n const ChallengeDescription = ({\n   description,\n   instructions,\n-  superBlock,\n-  block\n+  superBlock\n }: Props) => {\n-  const sbClass = superBlock ? superBlock : '';\n-  const bClass = block ? block : '';\n+  useEffect(() => {\n+    if (isMathJaxAllowed(superBlock)) {\n+      initializeMathJax();\n+    }\n+  }, [superBlock]);\n+\n   return (\n     <div\n-      className={`challenge-instructions ${sbClass} ${bClass}`}\n+      className={'challenge-instructions mathjax-support'}\n       data-playwright-test-label='challenge-description'\n     >\n       {description && <PrismFormatted text={description} />}"
        },
        {
            "sha": "dbf8680e3c82645cb715ada3a59e61f34ea3040b",
            "filename": "client/src/templates/Challenges/components/side-panel.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 15,
            "changes": 16,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fside-panel.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fside-panel.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fside-panel.tsx?ref=68550ccbb4a1b46f27efc7adec72b2a497648e27",
            "patch": "@@ -1,12 +1,10 @@\n-import React, { useEffect, ReactElement, ReactNode } from 'react';\n+import React, { ReactElement, ReactNode } from 'react';\n import { connect } from 'react-redux';\n import { createSelector } from 'reselect';\n import { Trans } from 'react-i18next';\n import { Spacer } from '@freecodecamp/ui';\n \n import { Test } from '../../../redux/prop-types';\n-import { SuperBlocks } from '../../../../../shared/config/curriculum';\n-import { initializeMathJax } from '../../../utils/math-jax';\n import { challengeTestsSelector } from '../redux/selectors';\n import { openModal } from '../redux/actions';\n import TestSuite from './test-suite';\n@@ -30,35 +28,23 @@ type StateProps = ReturnType<typeof mapStateToProps>;\n type DispatchProps = typeof mapDispatchToProps;\n \n interface SidePanelProps extends DispatchProps, StateProps {\n-  block: string;\n   challengeDescription: ReactElement;\n   challengeTitle: ReactElement;\n   instructionsPanelRef: React.RefObject<HTMLDivElement>;\n   hasDemo: boolean;\n   toolPanel: ReactNode;\n-  superBlock: SuperBlocks;\n   tests: Test[];\n }\n \n export function SidePanel({\n-  block,\n   challengeDescription,\n   challengeTitle,\n   instructionsPanelRef,\n   hasDemo,\n   toolPanel,\n-  superBlock,\n   tests,\n   openModal\n }: SidePanelProps): JSX.Element {\n-  useEffect(() => {\n-    const mathJaxChallenge =\n-      superBlock === SuperBlocks.RosettaCode ||\n-      superBlock === SuperBlocks.ProjectEuler ||\n-      block === 'intermediate-algorithm-scripting';\n-    initializeMathJax(mathJaxChallenge);\n-  }, [block, superBlock]);\n-\n   return (\n     <div\n       className='instructions-panel'"
        },
        {
            "sha": "0ab656de4ed23819ff242e5a224cc971f71133b3",
            "filename": "client/src/templates/Challenges/generic/show.tsx",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Ftemplates%2FChallenges%2Fgeneric%2Fshow.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Ftemplates%2FChallenges%2Fgeneric%2Fshow.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fgeneric%2Fshow.tsx?ref=68550ccbb4a1b46f27efc7adec72b2a497648e27",
            "patch": "@@ -217,7 +217,10 @@ const ShowGeneric = ({\n \n             {description && (\n               <Col md={8} mdOffset={2} sm={10} smOffset={1} xs={12}>\n-                <ChallengeDescription description={description} />\n+                <ChallengeDescription\n+                  description={description}\n+                  superBlock={superBlock}\n+                />\n                 <Spacer size='m' />\n               </Col>\n             )}\n@@ -239,7 +242,10 @@ const ShowGeneric = ({\n \n             <Col md={8} mdOffset={2} sm={10} smOffset={1} xs={12}>\n               {instructions && (\n-                <ChallengeDescription instructions={instructions} />\n+                <ChallengeDescription\n+                  instructions={instructions}\n+                  superBlock={superBlock}\n+                />\n               )}\n \n               <Spacer size='m' />"
        },
        {
            "sha": "4ee7cdf940b56106cfeff3eb1786e53d19676a34",
            "filename": "client/src/templates/Challenges/ms-trophy/show.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Ftemplates%2FChallenges%2Fms-trophy%2Fshow.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Ftemplates%2FChallenges%2Fms-trophy%2Fshow.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fms-trophy%2Fshow.tsx?ref=68550ccbb4a1b46f27efc7adec72b2a497648e27",
            "patch": "@@ -184,6 +184,7 @@ function MsTrophy(props: MsTrophyProps) {\n                 {title}\n               </ChallengeTitle>\n               <ChallengeDescription\n+                superBlock={superBlock}\n                 description={description}\n                 instructions={instructions}\n               />"
        },
        {
            "sha": "ed053d076b5c6fb0ce3912e573e1d1b3785d18c5",
            "filename": "client/src/templates/Challenges/projects/backend/show.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Ftemplates%2FChallenges%2Fprojects%2Fbackend%2Fshow.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Ftemplates%2FChallenges%2Fprojects%2Fbackend%2Fshow.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fprojects%2Fbackend%2Fshow.tsx?ref=68550ccbb4a1b46f27efc7adec72b2a497648e27",
            "patch": "@@ -189,6 +189,7 @@ const ShowBackEnd = (props: BackEndProps) => {\n                 {title}\n               </ChallengeTitle>\n               <ChallengeDescription\n+                superBlock={superBlock}\n                 description={description}\n                 instructions={instructions}\n               />"
        },
        {
            "sha": "f27ee706d7d37ef1990da6e922744170aa77a322",
            "filename": "client/src/templates/Challenges/projects/frontend/show.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Ftemplates%2FChallenges%2Fprojects%2Ffrontend%2Fshow.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Ftemplates%2FChallenges%2Fprojects%2Ffrontend%2Fshow.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fprojects%2Ffrontend%2Fshow.tsx?ref=68550ccbb4a1b46f27efc7adec72b2a497648e27",
            "patch": "@@ -158,6 +158,7 @@ const ShowFrontEndProject = (props: ProjectProps) => {\n                 {title}\n               </ChallengeTitle>\n               <ChallengeDescription\n+                superBlock={superBlock}\n                 description={description}\n                 instructions={instructions}\n               />"
        },
        {
            "sha": "098612c6c9924a84c192147b5a4634d14e96b51e",
            "filename": "client/src/templates/Challenges/quiz/show.tsx",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Ftemplates%2FChallenges%2Fquiz%2Fshow.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Ftemplates%2FChallenges%2Fquiz%2Fshow.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fquiz%2Fshow.tsx?ref=68550ccbb4a1b46f27efc7adec72b2a497648e27",
            "patch": "@@ -313,7 +313,10 @@ const ShowQuiz = ({\n \n             <Col md={8} mdOffset={2} sm={10} smOffset={1} xs={12}>\n               <Spacer size='m' />\n-              <ChallengeDescription description={description} />\n+              <ChallengeDescription\n+                description={description}\n+                superBlock={superBlock}\n+              />\n               <Spacer size='l' />\n               <ObserveKeys>\n                 <Quiz questions={quizData} disabled={hasSubmitted} />"
        },
        {
            "sha": "b537b017b4d8e2091f5d58c3969ab92a315572ed",
            "filename": "client/src/utils/math-jax.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Futils%2Fmath-jax.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Fsrc%2Futils%2Fmath-jax.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Futils%2Fmath-jax.ts?ref=68550ccbb4a1b46f27efc7adec72b2a497648e27",
            "patch": "@@ -1,15 +1,19 @@\n+import { SuperBlocks } from '../../../shared/config/curriculum';\n import { scriptLoader } from './script-loaders';\n \n export const mathJaxSrc =\n   'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_HTML';\n \n export const isMathJaxAllowed = (pathname: string) =>\n-  [\n-    '/learn/javascript-algorithms-and-data-structures-v8',\n-    '/learn/project-euler/',\n-    '/learn/rosetta-code',\n-    '/learn/scientific-computing-with-python'\n-  ].some(allowedPath => pathname.includes(allowedPath));\n+  superBlocksWithMathJax.some(superBlock => pathname.includes(superBlock));\n+\n+const superBlocksWithMathJax = [\n+  SuperBlocks.JsAlgoDataStructNew,\n+  SuperBlocks.JsAlgoDataStruct,\n+  SuperBlocks.ProjectEuler,\n+  SuperBlocks.RosettaCode,\n+  SuperBlocks.SciCompPy\n+];\n \n const configure = () => {\n   if (!global.MathJax) return;\n@@ -21,17 +25,13 @@ const configure = () => {\n         ['\\\\(', '\\\\)']\n       ],\n       processEscapes: true,\n-      processClass:\n-        'rosetta-code|project-euler|intermediate-algorithm-scripting|description-container'\n+      processClass: 'mathjax-support'\n     }\n   });\n   MathJax.Hub.Queue([\n     'Typeset',\n     MathJax.Hub,\n-    document.querySelector('.intermediate-algorithm-scripting'),\n-    document.querySelector('.rosetta-code'),\n-    document.querySelector('.project-euler'),\n-    document.querySelector('.description-container')\n+    document.querySelector('.mathjax-support')\n   ]);\n };\n "
        },
        {
            "sha": "4f1d9c9814ac6f9391baeb89de4973127079a479",
            "filename": "client/utils/tags.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Futils%2Ftags.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/68550ccbb4a1b46f27efc7adec72b2a497648e27/client%2Futils%2Ftags.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Futils%2Ftags.tsx?ref=68550ccbb4a1b46f27efc7adec72b2a497648e27",
            "patch": "@@ -44,7 +44,7 @@ export function getheadTagComponents(): JSX.Element[] {\n   return headTags;\n }\n \n-export function getPostBodyComponents(pathname: string): JSX.Element[] {\n+export function getPostBodyComponents(superblock: string): JSX.Element[] {\n   const scripts = [];\n   const mathJaxScriptElement = (\n     <script\n@@ -56,7 +56,7 @@ export function getPostBodyComponents(pathname: string): JSX.Element[] {\n     />\n   );\n \n-  if (isMathJaxAllowed(pathname)) {\n+  if (isMathJaxAllowed(superblock)) {\n     scripts.push(mathJaxScriptElement);\n   }\n "
        }
    ],
    "stats": {
        "total": 86,
        "additions": 42,
        "deletions": 44
    }
}