{
    "author": "ojeytonwilliams",
    "message": "refactor: share common intro creation code (#61814)",
    "sha": "0ae01847cb1514c3b7df1b28126f45642a0e73e9",
    "files": [
        {
            "sha": "13cea2d6f27a36173811570a291b279b47f4b7f8",
            "filename": "tools/challenge-helper-scripts/create-language-block.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 25,
            "changes": 29,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0ae01847cb1514c3b7df1b28126f45642a0e73e9/tools%2Fchallenge-helper-scripts%2Fcreate-language-block.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0ae01847cb1514c3b7df1b28126f45642a0e73e9/tools%2Fchallenge-helper-scripts%2Fcreate-language-block.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-language-block.ts?ref=0ae01847cb1514c3b7df1b28126f45642a0e73e9",
            "patch": "@@ -12,6 +12,7 @@ import {\n } from '../../shared/config/curriculum';\n import { createDialogueFile, validateBlockName } from './utils';\n import { getBaseMeta } from './helpers/get-base-meta';\n+import { createIntroMD } from './helpers/create-intro';\n \n const helpCategories = ['English'] as const;\n \n@@ -42,12 +43,12 @@ async function createLanguageBlock(\n   if (!title) {\n     title = block;\n   }\n-  void updateIntroJson(superBlock, block, title);\n+  await updateIntroJson(superBlock, block, title);\n \n   const challengeId = await createDialogueChallenge(superBlock, block);\n-  void createMetaJson(superBlock, block, title, helpCategory, challengeId);\n+  await createMetaJson(superBlock, block, title, helpCategory, challengeId);\n   // TODO: remove once we stop relying on markdown in the client.\n-  void createIntroMD(superBlock, block, title);\n+  await createIntroMD(superBlock, block, title);\n }\n \n async function updateIntroJson(\n@@ -100,28 +101,6 @@ async function createMetaJson(\n   );\n }\n \n-async function createIntroMD(superBlock: string, block: string, title: string) {\n-  const introMD = `---\n-title: Introduction to the ${title}\n-block: ${block}\n-superBlock: ${superBlock}\n----\n-\n-## Introduction to the ${title}\n-\n-This page is for the ${title}\n-`;\n-  const dirPath = path.resolve(\n-    __dirname,\n-    `../../client/src/pages/learn/${superBlock}/${block}/`\n-  );\n-  const filePath = path.resolve(dirPath, 'index.md');\n-  if (!existsSync(dirPath)) {\n-    await withTrace(fs.mkdir, dirPath);\n-  }\n-  void withTrace(fs.writeFile, filePath, introMD, { encoding: 'utf8' });\n-}\n-\n async function createDialogueChallenge(\n   superBlock: SuperBlocks,\n   block: string"
        },
        {
            "sha": "79ce960de036298bc9acd1b209e493744a0bcca2",
            "filename": "tools/challenge-helper-scripts/create-project.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 22,
            "changes": 23,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0ae01847cb1514c3b7df1b28126f45642a0e73e9/tools%2Fchallenge-helper-scripts%2Fcreate-project.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0ae01847cb1514c3b7df1b28126f45642a0e73e9/tools%2Fchallenge-helper-scripts%2Fcreate-project.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-project.ts?ref=0ae01847cb1514c3b7df1b28126f45642a0e73e9",
            "patch": "@@ -11,6 +11,7 @@ import {\n } from '../../shared/config/curriculum';\n import { createStepFile, validateBlockName } from './utils';\n import { getBaseMeta } from './helpers/get-base-meta';\n+import { createIntroMD } from './helpers/create-intro';\n \n const helpCategories = [\n   'HTML-CSS',\n@@ -117,28 +118,6 @@ async function createMetaJson(\n   );\n }\n \n-async function createIntroMD(superBlock: string, block: string, title: string) {\n-  const introMD = `---\n-title: Introduction to the ${title}\n-block: ${block}\n-superBlock: ${superBlock}\n----\n-\n-## Introduction to the ${title}\n-\n-This is a test for the new project-based curriculum.\n-`;\n-  const dirPath = path.resolve(\n-    __dirname,\n-    `../../client/src/pages/learn/${superBlock}/${block}/`\n-  );\n-  const filePath = path.resolve(dirPath, 'index.md');\n-  if (!existsSync(dirPath)) {\n-    await withTrace(fs.mkdir, dirPath);\n-  }\n-  void withTrace(fs.writeFile, filePath, introMD, { encoding: 'utf8' });\n-}\n-\n async function createFirstChallenge(\n   superBlock: SuperBlocks,\n   block: string"
        },
        {
            "sha": "ea66fe1ebd4cbf505e9c302d460417873073eca1",
            "filename": "tools/challenge-helper-scripts/create-quiz.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 25,
            "changes": 29,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0ae01847cb1514c3b7df1b28126f45642a0e73e9/tools%2Fchallenge-helper-scripts%2Fcreate-quiz.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0ae01847cb1514c3b7df1b28126f45642a0e73e9/tools%2Fchallenge-helper-scripts%2Fcreate-quiz.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-quiz.ts?ref=0ae01847cb1514c3b7df1b28126f45642a0e73e9",
            "patch": "@@ -11,6 +11,7 @@ import {\n } from '../../shared/config/curriculum';\n import { createQuizFile, validateBlockName } from './utils';\n import { getBaseMeta } from './helpers/get-base-meta';\n+import { createIntroMD } from './helpers/create-intro';\n \n const helpCategories = [\n   'HTML-CSS',\n@@ -48,17 +49,17 @@ async function createQuiz(\n   if (!title) {\n     title = block;\n   }\n-  void updateIntroJson(superBlock, block, title);\n+  await updateIntroJson(superBlock, block, title);\n \n   const challengeId = await createQuizChallenge(\n     superBlock,\n     block,\n     title,\n     questionCount\n   );\n-  void createMetaJson(superBlock, block, title, helpCategory, challengeId);\n+  await createMetaJson(superBlock, block, title, helpCategory, challengeId);\n   // TODO: remove once we stop relying on markdown in the client.\n-  void createIntroMD(superBlock, block, title);\n+  await createIntroMD(superBlock, block, title);\n }\n \n async function updateIntroJson(\n@@ -109,28 +110,6 @@ async function createMetaJson(\n   );\n }\n \n-async function createIntroMD(superBlock: string, block: string, title: string) {\n-  const introMD = `---\n-title: Introduction to the ${title}\n-block: ${block}\n-superBlock: ${superBlock}\n----\n-\n-## Introduction to the ${title}\n-\n-This page is for the ${title}\n-`;\n-  const dirPath = path.resolve(\n-    __dirname,\n-    `../../client/src/pages/learn/${superBlock}/${block}/`\n-  );\n-  const filePath = path.resolve(dirPath, 'index.md');\n-  if (!existsSync(dirPath)) {\n-    await withTrace(fs.mkdir, dirPath);\n-  }\n-  void withTrace(fs.writeFile, filePath, introMD, { encoding: 'utf8' });\n-}\n-\n async function createQuizChallenge(\n   superBlock: SuperBlocks,\n   block: string,"
        },
        {
            "sha": "032fd2f6f108e353dfd878d944a6362cf047b346",
            "filename": "tools/challenge-helper-scripts/helpers/create-intro.ts",
            "status": "added",
            "additions": 36,
            "deletions": 0,
            "changes": 36,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0ae01847cb1514c3b7df1b28126f45642a0e73e9/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fcreate-intro.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0ae01847cb1514c3b7df1b28126f45642a0e73e9/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fcreate-intro.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fhelpers%2Fcreate-intro.ts?ref=0ae01847cb1514c3b7df1b28126f45642a0e73e9",
            "patch": "@@ -0,0 +1,36 @@\n+import path from 'node:path';\n+import fs from 'node:fs/promises';\n+\n+function introTemplate(\n+  superBlock: string,\n+  block: string,\n+  title: string\n+): string {\n+  return `---\n+title: Introduction to the ${title}\n+block: ${block}\n+superBlock: ${superBlock}\n+---\n+\n+## Introduction to the ${title}\n+\n+This page is for the ${title}\n+`;\n+}\n+\n+export async function createIntroMD(\n+  superBlock: string,\n+  block: string,\n+  title: string\n+) {\n+  const dirPath = path.resolve(\n+    __dirname,\n+    `../../../client/src/pages/learn/${superBlock}/${block}/`\n+  );\n+  await fs.mkdir(dirPath, { recursive: true });\n+\n+  const filePath = path.resolve(dirPath, 'index.md');\n+  await fs.writeFile(filePath, introTemplate(superBlock, block, title), {\n+    encoding: 'utf8'\n+  });\n+}"
        }
    ],
    "stats": {
        "total": 117,
        "additions": 45,
        "deletions": 72
    }
}