{
    "author": "ojeytonwilliams",
    "message": "fix(api): handle when emailVerified is null (#60429)",
    "sha": "a5ec9e1ee723349e56b05972716ea019f8d2c933",
    "files": [
        {
            "sha": "7100efac0e577fd2e010585e6534cc7001b7c9ad",
            "filename": "api/prisma/schema.prisma",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a5ec9e1ee723349e56b05972716ea019f8d2c933/api%2Fprisma%2Fschema.prisma",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a5ec9e1ee723349e56b05972716ea019f8d2c933/api%2Fprisma%2Fschema.prisma",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fprisma%2Fschema.prisma?ref=a5ec9e1ee723349e56b05972716ea019f8d2c933",
            "patch": "@@ -101,7 +101,7 @@ model user {\n   donationEmails                 String[] // Undefined | String[] (only possible for built in Types like String)\n   email                          String\n   emailAuthLinkTTL               DateTime? // Null | Undefined\n-  emailVerified                  Boolean\n+  emailVerified                  Boolean?\n   emailVerifyTTL                 DateTime? // Null | Undefined\n   externalId                     String\n   githubProfile                  String? // Undefined"
        },
        {
            "sha": "1095f723fb2ae64320be58d0ea30246407405dde",
            "filename": "api/src/routes/protected/user.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/a5ec9e1ee723349e56b05972716ea019f8d2c933/api%2Fsrc%2Froutes%2Fprotected%2Fuser.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/a5ec9e1ee723349e56b05972716ea019f8d2c933/api%2Fsrc%2Froutes%2Fprotected%2Fuser.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fprotected%2Fuser.ts?ref=a5ec9e1ee723349e56b05972716ea019f8d2c933",
            "patch": "@@ -612,6 +612,7 @@ export const userGetRoutes: FastifyPluginCallbackTypebox = (\n         const [flags, rest] = splitUser(user);\n \n         const {\n+          emailVerified,\n           username,\n           usernameDisplay,\n           completedChallenges,\n@@ -639,13 +640,14 @@ export const userGetRoutes: FastifyPluginCallbackTypebox = (\n               calendar: getCalendar(\n                 progressTimestamps as ProgressTimestamp[] | null\n               ),\n+              emailVerified: !!emailVerified,\n               // This assertion is necessary until the database is normalized.\n               points: getPoints(\n                 progressTimestamps as ProgressTimestamp[] | null\n               ),\n               profileUI: normalizeProfileUI(profileUI),\n               // TODO(Post-MVP) remove this and just use emailVerified\n-              isEmailVerified: user.emailVerified,\n+              isEmailVerified: !!emailVerified,\n               joinDate: new ObjectId(user.id).getTimestamp().toISOString(),\n               location: location ?? '',\n               name: name ?? '',"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 4,
        "deletions": 2
    }
}