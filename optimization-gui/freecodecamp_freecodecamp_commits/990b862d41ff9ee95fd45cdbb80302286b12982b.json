{
    "author": "ShaunSHamilton",
    "message": "chore(api): log duplicate account ids (#60405)",
    "sha": "990b862d41ff9ee95fd45cdbb80302286b12982b",
    "files": [
        {
            "sha": "48173fa59f5adf4472662fba1df1c94d55fffb6f",
            "filename": "api/src/routes/helpers/auth-helpers.test.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 3,
            "changes": 12,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/990b862d41ff9ee95fd45cdbb80302286b12982b/api%2Fsrc%2Froutes%2Fhelpers%2Fauth-helpers.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/990b862d41ff9ee95fd45cdbb80302286b12982b/api%2Fsrc%2Froutes%2Fhelpers%2Fauth-helpers.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fhelpers%2Fauth-helpers.test.ts?ref=990b862d41ff9ee95fd45cdbb80302286b12982b",
            "patch": "@@ -28,14 +28,20 @@ describe('findOrCreateUser', () => {\n   });\n \n   it('should send a message to Sentry if there are multiple users with the same email', async () => {\n-    await fastify.prisma.user.create({ data: createUserInput(email) });\n-    await fastify.prisma.user.create({ data: createUserInput(email) });\n+    const user1 = await fastify.prisma.user.create({\n+      data: createUserInput(email)\n+    });\n+    const user2 = await fastify.prisma.user.create({\n+      data: createUserInput(email)\n+    });\n+\n+    const ids = [user1.id, user2.id];\n \n     await findOrCreateUser(fastify, email);\n \n     expect(captureException).toHaveBeenCalledTimes(1);\n     expect(captureException).toHaveBeenCalledWith(\n-      new Error('Multiple user records found for: test@user.com')\n+      new Error(`Multiple user records found for: ${ids.join(', ')}`)\n     );\n   });\n "
        },
        {
            "sha": "741bcb2998ce37eec7ce4becd8e78f0462c944be",
            "filename": "api/src/routes/helpers/auth-helpers.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/990b862d41ff9ee95fd45cdbb80302286b12982b/api%2Fsrc%2Froutes%2Fhelpers%2Fauth-helpers.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/990b862d41ff9ee95fd45cdbb80302286b12982b/api%2Fsrc%2Froutes%2Fhelpers%2Fauth-helpers.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fhelpers%2Fauth-helpers.ts?ref=990b862d41ff9ee95fd45cdbb80302286b12982b",
            "patch": "@@ -19,7 +19,9 @@ export const findOrCreateUser = async (\n   });\n   if (existingUser.length > 1) {\n     fastify.Sentry.captureException(\n-      new Error(`Multiple user records found for: ${email}`)\n+      new Error(\n+        `Multiple user records found for: ${existingUser.map(user => user.id).join(', ')}`\n+      )\n     );\n   }\n "
        }
    ],
    "stats": {
        "total": 16,
        "additions": 12,
        "deletions": 4
    }
}