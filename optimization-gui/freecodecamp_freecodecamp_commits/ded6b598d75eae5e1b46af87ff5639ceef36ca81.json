{
    "author": "ahmaxed",
    "message": "feat(client): add 25 dollar tier ab test (#62014)",
    "sha": "ded6b598d75eae5e1b46af87ff5639ceef36ca81",
    "files": [
        {
            "sha": "048953fe1d65b810ad8bace4d3c9b5ebaaba00a7",
            "filename": "client/config/growthbook-features-default.json",
            "status": "modified",
            "additions": 26,
            "deletions": 0,
            "changes": 26,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ded6b598d75eae5e1b46af87ff5639ceef36ca81/client%2Fconfig%2Fgrowthbook-features-default.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ded6b598d75eae5e1b46af87ff5639ceef36ca81/client%2Fconfig%2Fgrowthbook-features-default.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fconfig%2Fgrowthbook-features-default.json?ref=ded6b598d75eae5e1b46af87ff5639ceef36ca81",
            "patch": "@@ -30,6 +30,32 @@\n         \"name\": \"tests the conversion rate of the new design comparing to the old one\"\n       }\n     ]\n+  },\n+    \"replace-20-with-25\": {\n+    \"defaultValue\": false,\n+    \"rules\": [\n+      {\n+        \"coverage\": 1,\n+        \"hashAttribute\": \"id\",\n+        \"seed\": \"replace-20-with-25\",\n+        \"hashVersion\": 2,\n+        \"variations\": [false, true],\n+        \"weights\": [0.5, 0.5],\n+        \"key\": \"replace-20-with-25\",\n+        \"meta\": [\n+          {\n+            \"key\": \"0\",\n+            \"name\": \"Control\"\n+          },\n+          {\n+            \"key\": \"1\",\n+            \"name\": \"Variation 1\"\n+          }\n+        ],\n+        \"phase\": \"0\",\n+        \"name\": \"stg replace 20 with 25\"\n+      }\n+    ]\n   },\n   \"show-modal-randomly\": {\n     \"defaultValue\": false,"
        },
        {
            "sha": "6c39db4ba639ab0f56c9345a8ef66005110c8a7c",
            "filename": "client/src/components/Donation/multi-tier-donation-form.tsx",
            "status": "modified",
            "additions": 12,
            "deletions": 3,
            "changes": 15,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ded6b598d75eae5e1b46af87ff5639ceef36ca81/client%2Fsrc%2Fcomponents%2FDonation%2Fmulti-tier-donation-form.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ded6b598d75eae5e1b46af87ff5639ceef36ca81/client%2Fsrc%2Fcomponents%2FDonation%2Fmulti-tier-donation-form.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2FDonation%2Fmulti-tier-donation-form.tsx?ref=ded6b598d75eae5e1b46af87ff5639ceef36ca81",
            "patch": "@@ -14,7 +14,9 @@ import { useTranslation } from 'react-i18next';\n import {\n   PaymentContext,\n   subscriptionAmounts,\n+  subscriptionAmountsB,\n   defaultTierAmount,\n+  defaultTierAmountB,\n   type DonationAmount\n } from '../../../../shared/config/donation-settings'; // You can further extract these into separate components and import them\n import callGA from '../../analytics/call-ga';\n@@ -42,6 +44,10 @@ function SelectionTabs({\n   isAnimationEnabled?: boolean;\n }) {\n   const { t } = useTranslation();\n+  const replace20With25 = useFeature('replace-20-with-25').on;\n+  const activeSubscriptionAmounts = replace20With25\n+    ? subscriptionAmountsB\n+    : subscriptionAmounts;\n   const switchTab = (value: string): void => {\n     setDonationAmount(Number(value) as DonationAmount);\n   };\n@@ -81,7 +87,7 @@ function SelectionTabs({\n           onValueChange={switchTab}\n         >\n           <TabsList className='nav-lists'>\n-            {subscriptionAmounts.map(value => (\n+            {activeSubscriptionAmounts.map(value => (\n               <TabsTrigger\n                 key={value}\n                 value={value.toString()}\n@@ -92,7 +98,7 @@ function SelectionTabs({\n             ))}\n           </TabsList>\n           <Spacer size='xs' />\n-          {subscriptionAmounts.map(value => {\n+          {activeSubscriptionAmounts.map(value => {\n             const usd = formattedAmountLabel(donationAmount);\n             const hours = convertToTimeContributed(donationAmount);\n             const donationDescription = t('donate.your-donation-2', {\n@@ -169,7 +175,10 @@ const MultiTierDonationForm: React.FC<MultiTierDonationFormProps> = ({\n   paymentContext,\n   isAnimationEnabled\n }) => {\n-  const [donationAmount, setDonationAmount] = useState(defaultTierAmount);\n+  const replace20With25 = useFeature('replace-20-with-25').on;\n+  const [donationAmount, setDonationAmount] = useState(\n+    replace20With25 ? defaultTierAmountB : defaultTierAmount\n+  );\n \n   const [showDonateForm, setShowDonateForm] = useState(false);\n "
        },
        {
            "sha": "1e731e46755b672607fea38fb964cbb1fa97bf7e",
            "filename": "e2e/donate-page-default.spec.ts",
            "status": "modified",
            "additions": 63,
            "deletions": 26,
            "changes": 89,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ded6b598d75eae5e1b46af87ff5639ceef36ca81/e2e%2Fdonate-page-default.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ded6b598d75eae5e1b46af87ff5639ceef36ca81/e2e%2Fdonate-page-default.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fdonate-page-default.spec.ts?ref=ded6b598d75eae5e1b46af87ff5639ceef36ca81",
            "patch": "@@ -1,5 +1,6 @@\n import { test, expect } from '@playwright/test';\n import translations from '../client/i18n/locales/english/translations.json';\n+import { addGrowthbookCookie } from './utils/add-growthbook-cookie';\n \n const pageElements = {\n   mainHeading: 'main-head',\n@@ -16,17 +17,24 @@ const donationStringReplacements = {\n };\n \n const donationFormStrings = {\n-  conformTwentyDollar: translations.donate['confirm-monthly'].replace(\n+  confirmTwentyDollar: translations.donate['confirm-monthly'].replace(\n     donationStringReplacements.usdPlaceHolder,\n     '20'\n   ),\n+  confirmTwentyFiveDollar: translations.donate['confirm-monthly'].replace(\n+    donationStringReplacements.usdPlaceHolder,\n+    '25'\n+  ),\n   confirmFiveDollars: translations.donate['confirm-monthly'].replace(\n     donationStringReplacements.usdPlaceHolder,\n     '5'\n   ),\n   twentyDollarsLearningContribution: translations.donate['your-donation-2']\n     .replace(donationStringReplacements.usdPlaceHolder, '20')\n     .replace(donationStringReplacements.hoursPlaceHolder, '1,000'),\n+  twentyFiveDollarsLearningContribution: translations.donate['your-donation-2']\n+    .replace(donationStringReplacements.usdPlaceHolder, '25')\n+    .replace(donationStringReplacements.hoursPlaceHolder, '1,250'),\n   fiveDollarsLearningContribution: translations.donate['your-donation-2']\n     .replace(donationStringReplacements.usdPlaceHolder, '5')\n     .replace(donationStringReplacements.hoursPlaceHolder, '250'),\n@@ -213,31 +221,6 @@ function donatePageTests() {\n     await faq12.click();\n   });\n \n-  test('should select $20 tier by default', async ({ page }) => {\n-    await expect(\n-      page.getByText(donationFormStrings.conformTwentyDollar)\n-    ).toBeVisible();\n-\n-    const tabs = await page.$$('[role=\"tab\"]');\n-    expect(tabs.length).toBe(4);\n-\n-    for (const tab of tabs) {\n-      const tabText = await tab.innerText();\n-      expect(['$5', '$10', '$20', '$40']).toContain(tabText);\n-\n-      if (tabText === '$20') {\n-        const isActive = await tab.getAttribute('data-state');\n-        expect(isActive).toBe('active');\n-      } else {\n-        const isActive = await tab.getAttribute('data-state');\n-        expect(isActive).not.toBe('active');\n-      }\n-    }\n-    await expect(\n-      page.getByText(donationFormStrings.twentyDollarsLearningContribution)\n-    ).toBeVisible();\n-  });\n-\n   test('should make $5 tier selectable', async ({ page }) => {\n     await page.click('[role=\"tab\"]:has-text(\"$5\")');\n \n@@ -281,17 +264,71 @@ function donatePageTests() {\n   });\n }\n \n+interface DefaultTierTestConfig {\n+  defaultTier: string;\n+  tiers: string[];\n+  confirmationText: string;\n+  contributionText: string;\n+}\n+\n+function donatePageDefault(config: DefaultTierTestConfig) {\n+  const { defaultTier, tiers, confirmationText, contributionText } = config;\n+  test(`should select ${defaultTier} tier by default`, async ({ page }) => {\n+    await expect(page.getByText(confirmationText)).toBeVisible();\n+    const tabs = await page.$$('[role=\"tab\"]');\n+    expect(tabs.length).toBe(tiers.length);\n+    for (const tab of tabs) {\n+      const tabText = await tab.innerText();\n+      expect(tiers).toContain(tabText);\n+      const isActive = await tab.getAttribute('data-state');\n+      if (tabText === defaultTier) {\n+        expect(isActive).toBe('active');\n+      } else {\n+        expect(isActive).not.toBe('active');\n+      }\n+    }\n+    await expect(page.getByText(contributionText)).toBeVisible();\n+  });\n+}\n+\n test.describe('Authenticated User', () => {\n   test.beforeEach(async ({ page }) => {\n     await page.goto('/donate');\n   });\n   donatePageTests();\n });\n \n+test.describe('Authenticated User Page Defaults - Variation A', () => {\n+  test.beforeEach(async ({ context, page }) => {\n+    await addGrowthbookCookie({ context, variation: 'A243' });\n+    await page.goto('/donate');\n+  });\n+  donatePageDefault({\n+    defaultTier: '$20',\n+    tiers: ['$5', '$10', '$20', '$40'],\n+    confirmationText: donationFormStrings.confirmTwentyDollar,\n+    contributionText: donationFormStrings.twentyDollarsLearningContribution\n+  });\n+});\n+\n test.describe('Unauthenticated User', () => {\n   test.use({ storageState: { cookies: [], origins: [] } });\n   test.beforeEach(async ({ page }) => {\n     await page.goto('/donate');\n   });\n   donatePageTests();\n });\n+\n+test.describe('Unauthenticated User Page Default - Variation B', () => {\n+  test.use({ storageState: { cookies: [], origins: [] } });\n+  test.beforeEach(async ({ context, page }) => {\n+    await addGrowthbookCookie({ context, variation: 'B145' });\n+    await page.goto('/donate');\n+  });\n+  donatePageDefault({\n+    defaultTier: '$25',\n+    tiers: ['$5', '$10', '$25', '$40'],\n+    confirmationText: donationFormStrings.confirmTwentyFiveDollar,\n+    contributionText: donationFormStrings.twentyFiveDollarsLearningContribution\n+  });\n+});"
        },
        {
            "sha": "f5877e178edc09fe548be2dbc4a2a6305ec1e645",
            "filename": "shared/config/donation-settings.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/ded6b598d75eae5e1b46af87ff5639ceef36ca81/shared%2Fconfig%2Fdonation-settings.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/ded6b598d75eae5e1b46af87ff5639ceef36ca81/shared%2Fconfig%2Fdonation-settings.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/shared%2Fconfig%2Fdonation-settings.ts?ref=ded6b598d75eae5e1b46af87ff5639ceef36ca81",
            "patch": "@@ -1,20 +1,22 @@\n // Configuration for client side\n \n-export type DonationAmount = 500 | 1000 | 2000 | 4000;\n+export type DonationAmount = 500 | 1000 | 2000 | 2500 | 4000;\n export type DonationDuration = 'one-time' | 'month';\n export interface DonationConfig {\n   donationAmount: DonationAmount;\n   donationDuration: DonationDuration;\n }\n \n export const subscriptionAmounts: DonationAmount[] = [500, 1000, 2000, 4000];\n+export const subscriptionAmountsB: DonationAmount[] = [500, 1000, 2500, 4000];\n \n export const defaultDonation: DonationConfig = {\n   donationAmount: 500,\n   donationDuration: 'month'\n };\n \n export const defaultTierAmount: DonationAmount = 2000;\n+export const defaultTierAmountB: DonationAmount = 2500;\n \n export const onetimeSKUConfig = {\n   production: [\n@@ -53,6 +55,7 @@ export const paypalConfigTypes = {\n       500: { planId: 'P-6B636789V3105190KMTJFH7A' },\n       1000: { planId: 'P-53P76823N8780520DMVTWF3I' },\n       2000: { planId: 'P-8HY47434FB9663500MVTWFOA' },\n+      2500: { planId: 'P-1E758922LA293854BNC3SK3A' },\n       3000: { planId: 'P-1KY930839N8045117L6E4BKY' },\n       4000: { planId: 'P-0MH28916302828423MVTWEBI' },\n       5000: { planId: 'P-0WR49877YD949401BL6E4CTA' }\n@@ -63,6 +66,7 @@ export const paypalConfigTypes = {\n       500: { planId: 'P-37N14480BW163382FLZYPVMA' },\n       1000: { planId: 'P-28B62039J8092810UL6E3FXA' },\n       2000: { planId: 'P-7HR706961M9170433L6HI5VI' },\n+      2500: { planId: 'P-2BK29709FB733490FNC3RPGQ' },\n       3000: { planId: 'P-35V33574BU596924JL6HI6XY' },\n       4000: { planId: 'P-45M45060289267734L6HJSXA' },\n       5000: { planId: 'P-0MD70861FY4172444L6HJTUQ' }\n@@ -90,6 +94,7 @@ export const paypalConfigurator = (\n       500: { planId: string };\n       1000: { planId: string };\n       2000: { planId: string };\n+      2500: { planId: string };\n       3000: { planId: string };\n       4000: { planId: string };\n       5000: { planId: string };\n@@ -130,6 +135,7 @@ const stripeProductIds = {\n       500: 'prod_Cc9bIxB2NvjpLy',\n       1000: 'prod_BuiSxWk7jGSFlJ',\n       2000: 'prod_IElpZVK7kOn6Fe',\n+      2500: 'prod_JCakZSxh12ZaDF',\n       4000: 'prod_IElq1foW39g3Cx'\n     }\n   },\n@@ -138,6 +144,7 @@ const stripeProductIds = {\n       500: 'prod_GD1GGbJsqQaupl',\n       1000: 'prod_GD1IzNEXfSCGgy',\n       2000: 'prod_IEkNp8M03xvsuB',\n+      2500: 'prod_T12UtcRPvzzVN1',\n       4000: 'prod_IEkPebxS63mVbs'\n     }\n   }"
        }
    ],
    "stats": {
        "total": 139,
        "additions": 109,
        "deletions": 30
    }
}