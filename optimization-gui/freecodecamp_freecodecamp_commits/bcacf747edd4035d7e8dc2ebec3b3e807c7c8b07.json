{
    "author": "bengguankoay",
    "message": "fix(client): hide console on JS-only interactive examples (#64210)",
    "sha": "bcacf747edd4035d7e8dc2ebec3b3e807c7c8b07",
    "files": [
        {
            "sha": "49b70b393329149679004f6769706e6920379bf4",
            "filename": "client/src/templates/Challenges/components/interactive-editor.tsx",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/bcacf747edd4035d7e8dc2ebec3b3e807c7c8b07/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Finteractive-editor.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/bcacf747edd4035d7e8dc2ebec3b3e807c7c8b07/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Finteractive-editor.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Finteractive-editor.tsx?ref=bcacf747edd4035d7e8dc2ebec3b3e807c7c8b07",
            "patch": "@@ -44,7 +44,11 @@ const InteractiveEditor = ({ files }: Props) => {\n     return files.some(f => f.ext === ext);\n   }\n \n-  const showConsole = got('js') || got('ts');\n+  const hasHTML = got('html');\n+  const hasJavaScript = got('js') || got('ts') || got('jsx') || got('tsx');\n+\n+  const showConsole = hasJavaScript && hasHTML;\n+  const layout = hasHTML ? 'preview' : 'console';\n   const freeCodeCampDarkSyntax = {\n     ...freeCodeCampDark.syntax,\n     punctuation: '#ffff00',\n@@ -84,7 +88,7 @@ const InteractiveEditor = ({ files }: Props) => {\n           editorWidthPercentage: 60,\n           showConsole: showConsole,\n           showConsoleButton: showConsole,\n-          layout: got('html') ? 'preview' : 'console',\n+          layout: layout,\n           showLineNumbers: true\n         }}\n       />"
        },
        {
            "sha": "0961ba5925d2068628eeaf1b2b64a0e08fda7b47",
            "filename": "e2e/interactive-editor.spec.ts",
            "status": "modified",
            "additions": 64,
            "deletions": 0,
            "changes": 64,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/bcacf747edd4035d7e8dc2ebec3b3e807c7c8b07/e2e%2Finteractive-editor.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/bcacf747edd4035d7e8dc2ebec3b3e807c7c8b07/e2e%2Finteractive-editor.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Finteractive-editor.spec.ts?ref=bcacf747edd4035d7e8dc2ebec3b3e807c7c8b07",
            "patch": "@@ -178,4 +178,68 @@ test.describe('Interactive Editor', () => {\n       page.evaluate(() => localStorage.getItem('showInteractiveEditor'))\n     ).resolves.toBe('false');\n   });\n+\n+  test('should hide console panel in JS-only interactive editor to prevent output duplication', async ({\n+    page\n+  }) => {\n+    await page.route(\n+      `**/page-data${challengePath}/page-data.json`,\n+      async route => {\n+        const response = await route.fetch();\n+        const body = await response.text();\n+        const pageData = JSON.parse(body) as PageData;\n+\n+        pageData.result.data.challengeNode.challenge.title = challengeTitle;\n+        pageData.result.data.challengeNode.challenge.nodules = [\n+          {\n+            type: 'paragraph',\n+            data: '<p>This challenge has only JavaScript code.</p>'\n+          },\n+          {\n+            type: 'interactiveEditor',\n+            data: [\n+              {\n+                contents: 'console.log(\"Hello from JS-only editor\");',\n+                ext: 'js',\n+                name: 'script-1',\n+                contentsHtml:\n+                  '<pre><code class=\"language-javascript\">console.log(\"Hello from JS-only editor\");</code></pre>'\n+              }\n+            ]\n+          }\n+        ];\n+\n+        await route.fulfill({\n+          contentType: 'application/json',\n+          body: JSON.stringify(pageData)\n+        });\n+      }\n+    );\n+\n+    await page.goto(challengePath);\n+\n+    await expect(\n+      page.getByRole('heading', { name: challengeTitle })\n+    ).toBeVisible();\n+    await expect(\n+      page.getByText('This challenge has only JavaScript code.')\n+    ).toBeVisible();\n+\n+    await expect(\n+      page\n+        .locator('pre code')\n+        .filter({ hasText: 'console.log(\"Hello from JS-only editor\");' })\n+    ).toBeVisible();\n+\n+    // Click the toggle button to show interactive editor\n+    await page\n+      .getByRole('button', {\n+        name: /interactive editor/i\n+      })\n+      .click();\n+\n+    // Check that the console is visible and the console wrapper is hidden\n+    await expect(page.locator('.sp-console')).toBeVisible();\n+    await expect(page.locator('.sp-console-wrapper')).not.toBeVisible();\n+  });\n });"
        }
    ],
    "stats": {
        "total": 72,
        "additions": 70,
        "deletions": 2
    }
}