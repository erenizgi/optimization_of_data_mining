{
    "author": "ShaunSHamilton",
    "message": "chore(api): add more auth0 plugin logs (#60398)\n\nCo-authored-by: Oliver Eyton-Williams <ojeytonwilliams@gmail.com>",
    "sha": "3a146ec946d14ea0adab665de90e597a0cd75fb8",
    "files": [
        {
            "sha": "5b9690d0ec8389f290d6d4f6b9c5d874d6e10307",
            "filename": "api/src/plugins/auth0.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/3a146ec946d14ea0adab665de90e597a0cd75fb8/api%2Fsrc%2Fplugins%2Fauth0.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/3a146ec946d14ea0adab665de90e597a0cd75fb8/api%2Fsrc%2Fplugins%2Fauth0.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fplugins%2Fauth0.ts?ref=3a146ec946d14ea0adab665de90e597a0cd75fb8",
            "patch": "@@ -128,8 +128,12 @@ export const auth0Client: FastifyPluginCallbackTypebox = fp(\n         const userinfo = (await fastify.auth0OAuth.userinfo(token)) as {\n           email: string;\n         };\n+        logger.info(`Auth0 userinfo: ${JSON.stringify(userinfo)}`);\n         email = userinfo.email;\n-        if (typeof email !== 'string') throw Error('Invalid userinfo response');\n+        if (typeof email !== 'string') {\n+          const msg = `Invalid userinfo email: ${JSON.stringify(userinfo)}`;\n+          throw Error(msg);\n+        }\n       } catch (error) {\n         logger.error({ error }, 'Auth failed');\n         fastify.Sentry.captureException(error);"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 5,
        "deletions": 1
    }
}