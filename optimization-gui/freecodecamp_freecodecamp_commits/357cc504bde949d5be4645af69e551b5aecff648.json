{
    "author": "ahmaxed",
    "message": "Test adding transcript tabs to lectures (#60948)",
    "sha": "357cc504bde949d5be4645af69e551b5aecff648",
    "files": [
        {
            "sha": "5b7c2edd7280ddcd492a31ac3dd4b35b7e1ea7d7",
            "filename": "client/i18n/locales/english/translations.json",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/357cc504bde949d5be4645af69e551b5aecff648/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/357cc504bde949d5be4645af69e551b5aecff648/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json?ref=357cc504bde949d5be4645af69e551b5aecff648",
            "patch": "@@ -419,6 +419,7 @@\n     \"answered-mcq\": \"You have unanswered questions and/or incorrect answers.\",\n     \"explanation\": \"Explanation\",\n     \"transcript\": \"Transcript\",\n+    \"video\": \"Video\",\n     \"solution-link\": \"Solution Link\",\n     \"source-code-link\": \"Source Code Link\",\n     \"ms-link\": \"Microsoft Link\","
        },
        {
            "sha": "cc3ad08c406f776a41f00cb7796fc362a07f77a6",
            "filename": "client/src/templates/Challenges/components/challenge-transcript.tsx",
            "status": "modified",
            "additions": 12,
            "deletions": 1,
            "changes": 13,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/357cc504bde949d5be4645af69e551b5aecff648/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fchallenge-transcript.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/357cc504bde949d5be4645af69e551b5aecff648/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fchallenge-transcript.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fchallenge-transcript.tsx?ref=357cc504bde949d5be4645af69e551b5aecff648",
            "patch": "@@ -8,10 +8,12 @@ import './challenge-transcript.css';\n \n interface ChallengeTranscriptProps {\n   transcript: string;\n+  showTranscriptTabs?: boolean;\n }\n \n function ChallengeTranscript({\n-  transcript\n+  transcript,\n+  showTranscriptTabs\n }: ChallengeTranscriptProps): JSX.Element {\n   const { t } = useTranslation();\n \n@@ -26,6 +28,15 @@ function ChallengeTranscript({\n     setIsOpen(!isOpen);\n   }\n \n+  if (showTranscriptTabs)\n+    return (\n+      <>\n+        <Spacer size='m' />\n+        <PrismFormatted className={'line-numbers'} text={transcript} />\n+        <Spacer size='m' />\n+      </>\n+    );\n+\n   return (\n     <>\n       <details data-testid='challenge-transcript' open={isOpen}>"
        },
        {
            "sha": "1b7bd088fb3e92b6641a29412d9f2f1ffa23a198",
            "filename": "client/src/templates/Challenges/generic/show.css",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/357cc504bde949d5be4645af69e551b5aecff648/client%2Fsrc%2Ftemplates%2FChallenges%2Fgeneric%2Fshow.css",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/357cc504bde949d5be4645af69e551b5aecff648/client%2Fsrc%2Ftemplates%2FChallenges%2Fgeneric%2Fshow.css",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fgeneric%2Fshow.css?ref=357cc504bde949d5be4645af69e551b5aecff648",
            "patch": "@@ -31,3 +31,12 @@ input[type='checkbox']:checked::before {\n audio {\n   background-color: aqua;\n }\n+\n+.transcript-tabs button[aria-selected='false'] {\n+  color: var(--secondary-color);\n+  background-color: transparent;\n+}\n+\n+.transcript-tabs button[aria-selected='false']:hover {\n+  background-color: var(--quaternary-background);\n+}"
        },
        {
            "sha": "d981a6f714a90532dfa195469869b568fb086661",
            "filename": "client/src/templates/Challenges/generic/show.tsx",
            "status": "modified",
            "additions": 73,
            "deletions": 10,
            "changes": 83,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/357cc504bde949d5be4645af69e551b5aecff648/client%2Fsrc%2Ftemplates%2FChallenges%2Fgeneric%2Fshow.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/357cc504bde949d5be4645af69e551b5aecff648/client%2Fsrc%2Ftemplates%2FChallenges%2Fgeneric%2Fshow.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fgeneric%2Fshow.tsx?ref=357cc504bde949d5be4645af69e551b5aecff648",
            "patch": "@@ -3,10 +3,21 @@ import React, { useEffect, useRef, useState } from 'react';\n import Helmet from 'react-helmet';\n import { useTranslation } from 'react-i18next';\n import { connect } from 'react-redux';\n-import { Container, Col, Row, Button, Spacer } from '@freecodecamp/ui';\n+import {\n+  Container,\n+  Col,\n+  Row,\n+  Button,\n+  Spacer,\n+  Tabs,\n+  TabsContent,\n+  TabsTrigger,\n+  TabsList\n+} from '@freecodecamp/ui';\n import { isEqual } from 'lodash';\n import store from 'store';\n import { YouTubeEvent } from 'react-youtube';\n+import { useFeatureIsOn } from '@growthbook/growthbook-react';\n \n // Local Utilities\n import LearnLayout from '../../../components/layouts/learn';\n@@ -104,6 +115,11 @@ const ShowGeneric = ({\n   const { t } = useTranslation();\n   const container = useRef<HTMLElement | null>(null);\n \n+  // just test on this particular block\n+  const transcriptTabsFlagIsOn = useFeatureIsOn('transcript-tabs');\n+  const showTranscriptTabs =\n+    block === 'lecture-html-fundamentals' && transcriptTabsFlagIsOn;\n+\n   const blockNameTitle = `${t(\n     `intro:${superBlock}.blocks.${block}.title`\n   )} - ${title}`;\n@@ -127,6 +143,11 @@ const ShowGeneric = ({\n     // eslint-disable-next-line react-hooks/exhaustive-deps\n   }, []);\n \n+  const tabs = {\n+    transcript: 'transcript',\n+    video: 'video'\n+  } as const;\n+\n   // video\n   const [videoIsLoaded, setVideoIsLoaded] = useState(false);\n \n@@ -228,7 +249,54 @@ const ShowGeneric = ({\n             )}\n \n             <Col lg={10} lgOffset={1} md={10} mdOffset={1}>\n-              {videoId && (\n+              {showTranscriptTabs && (\n+                <Tabs\n+                  defaultValue={tabs.transcript}\n+                  className='transcript-tabs'\n+                >\n+                  <TabsList className='nav-lists'>\n+                    <TabsTrigger value={tabs.transcript}>\n+                      {t('learn.transcript')}\n+                    </TabsTrigger>\n+                    <TabsTrigger value={tabs.video}>\n+                      {t('learn.video')}\n+                    </TabsTrigger>\n+                  </TabsList>\n+                  <TabsContent\n+                    tabIndex={-1}\n+                    className='tab-content'\n+                    value={tabs.transcript}\n+                  >\n+                    {transcript && (\n+                      <ChallengeTranscript\n+                        showTranscriptTabs={showTranscriptTabs}\n+                        transcript={transcript}\n+                      />\n+                    )}\n+                  </TabsContent>\n+\n+                  <TabsContent\n+                    tabIndex={-1}\n+                    className='tab-content'\n+                    value={tabs.video}\n+                  >\n+                    {videoId && (\n+                      <>\n+                        <VideoPlayer\n+                          bilibiliIds={bilibiliIds}\n+                          onVideoLoad={handleVideoIsLoaded}\n+                          title={title}\n+                          videoId={videoId}\n+                          videoIsLoaded={videoIsLoaded}\n+                          videoLocaleIds={videoLocaleIds}\n+                        />\n+                        <Spacer size='m' />\n+                      </>\n+                    )}\n+                  </TabsContent>\n+                </Tabs>\n+              )}\n+              {videoId && !showTranscriptTabs && (\n                 <>\n                   <VideoPlayer\n                     bilibiliIds={bilibiliIds}\n@@ -246,8 +314,9 @@ const ShowGeneric = ({\n             {scene && <Scene scene={scene} sceneSubject={sceneSubject} />}\n \n             <Col md={8} mdOffset={2} sm={10} smOffset={1} xs={12}>\n-              {transcript && <ChallengeTranscript transcript={transcript} />}\n-\n+              {transcript && !showTranscriptTabs && (\n+                <ChallengeTranscript transcript={transcript} />\n+              )}\n               {instructions && (\n                 <>\n                   <ChallengeDescription\n@@ -257,15 +326,13 @@ const ShowGeneric = ({\n                   <Spacer size='m' />\n                 </>\n               )}\n-\n               {assignments.length > 0 && (\n                 <Assignments\n                   assignments={assignments}\n                   allAssignmentsCompleted={allAssignmentsCompleted}\n                   handleAssignmentChange={handleAssignmentChange}\n                 />\n               )}\n-\n               {questions.length > 0 && (\n                 <MultipleChoiceQuestions\n                   questions={questions}\n@@ -275,15 +342,12 @@ const ShowGeneric = ({\n                   showFeedback={showFeedback}\n                 />\n               )}\n-\n               {explanation ? (\n                 <ChallengeExplanation explanation={explanation} />\n               ) : null}\n-\n               {!hasAnsweredMcqCorrectly && (\n                 <p className='text-center'>{t('learn.answered-mcq')}</p>\n               )}\n-\n               <Button block={true} variant='primary' onClick={handleSubmit}>\n                 {blockType === BlockTypes.review\n                   ? t('buttons.submit')\n@@ -293,7 +357,6 @@ const ShowGeneric = ({\n               <Button block={true} variant='primary' onClick={openHelpModal}>\n                 {t('buttons.ask-for-help')}\n               </Button>\n-\n               <Spacer size='l' />\n             </Col>\n             <CompletionModal />"
        }
    ],
    "stats": {
        "total": 106,
        "additions": 95,
        "deletions": 11
    }
}