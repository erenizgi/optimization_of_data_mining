{
    "author": "Sembauke",
    "message": "feat(api): add logging to cookie update (#59057)",
    "sha": "9b0a63234dd7918496034c89794f511a02155e53",
    "files": [
        {
            "sha": "83e4965cb7791dd644e6da9f9e0c3ece7ef6ac09",
            "filename": "api/src/plugins/cookie-update.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/9b0a63234dd7918496034c89794f511a02155e53/api%2Fsrc%2Fplugins%2Fcookie-update.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/9b0a63234dd7918496034c89794f511a02155e53/api%2Fsrc%2Fplugins%2Fcookie-update.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Fplugins%2Fcookie-update.ts?ref=9b0a63234dd7918496034c89794f511a02155e53",
            "patch": "@@ -22,6 +22,8 @@ export const cookieUpdate: FastifyPluginCallback<Options> = (\n   done\n ) => {\n   fastify.addHook('onSend', (request, reply, _payload, next) => {\n+    const logger = fastify.log.child({ request });\n+\n     for (const cookie of options.cookies) {\n       const oldCookie = request.cookies[cookie];\n       if (!oldCookie) continue;\n@@ -30,6 +32,9 @@ export const cookieUpdate: FastifyPluginCallback<Options> = (\n       const raw = unsigned.valid ? unsigned.value : oldCookie;\n       void reply.setCookie(cookie, raw, options.attributes);\n     }\n+\n+    logger.debug('Updated cookies for user.');\n+\n     next();\n   });\n "
        }
    ],
    "stats": {
        "total": 5,
        "additions": 5,
        "deletions": 0
    }
}