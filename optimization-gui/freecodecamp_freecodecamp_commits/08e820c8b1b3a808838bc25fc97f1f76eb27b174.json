{
    "author": "ShaunSHamilton",
    "message": "dev(api): add logs to /certificate/showCert (#58981)",
    "sha": "08e820c8b1b3a808838bc25fc97f1f76eb27b174",
    "files": [
        {
            "sha": "62c252ec08d6066b225ee3b71b203cd76416c43a",
            "filename": "api/src/routes/public/certificate.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 3,
            "changes": 18,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/08e820c8b1b3a808838bc25fc97f1f76eb27b174/api%2Fsrc%2Froutes%2Fpublic%2Fcertificate.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/08e820c8b1b3a808838bc25fc97f1f76eb27b174/api%2Fsrc%2Froutes%2Fpublic%2Fcertificate.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/api%2Fsrc%2Froutes%2Fpublic%2Fcertificate.ts?ref=08e820c8b1b3a808838bc25fc97f1f76eb27b174",
            "patch": "@@ -32,12 +32,12 @@ export const unprotectedCertificateRoutes: FastifyPluginCallbackTypebox = (\n       schema: schemas.certSlug\n     },\n     async (req, reply) => {\n+      const logger = fastify.log.child({ req });\n       const username = req.params.username.toLowerCase();\n       const certSlug = req.params.certSlug;\n \n-      fastify.log.info(`certSlug: ${certSlug}`);\n-\n       if (!isKnownCertSlug(certSlug)) {\n+        logger.warn(`Unknown certSlug: ${certSlug}`);\n         void reply.code(404);\n         return reply.send({\n           messages: [\n@@ -87,6 +87,7 @@ export const unprotectedCertificateRoutes: FastifyPluginCallbackTypebox = (\n       });\n \n       if (user === null) {\n+        logger.info(`User ${username} not found.`);\n         return reply.send({\n           messages: [\n             {\n@@ -99,6 +100,7 @@ export const unprotectedCertificateRoutes: FastifyPluginCallbackTypebox = (\n       }\n \n       if (user.isCheater || user.isBanned) {\n+        logger.info(`User ${username} is banned or a cheater.`);\n         return reply.send({\n           messages: [\n             {\n@@ -110,6 +112,7 @@ export const unprotectedCertificateRoutes: FastifyPluginCallbackTypebox = (\n       }\n \n       if (!user.isHonest) {\n+        logger.info(`User ${username} has not accepted honesty policy.`);\n         return reply.send({\n           messages: [\n             {\n@@ -122,6 +125,7 @@ export const unprotectedCertificateRoutes: FastifyPluginCallbackTypebox = (\n       }\n \n       if (user.profileUI?.isLocked) {\n+        logger.info(`User ${username} has a locked profile.`);\n         return reply.send({\n           messages: [\n             {\n@@ -134,6 +138,7 @@ export const unprotectedCertificateRoutes: FastifyPluginCallbackTypebox = (\n       }\n \n       if (!user.name) {\n+        logger.info(`User ${username} has not added a name.`);\n         return reply.send({\n           messages: [\n             {\n@@ -145,6 +150,7 @@ export const unprotectedCertificateRoutes: FastifyPluginCallbackTypebox = (\n       }\n \n       if (!user.profileUI?.showCerts) {\n+        logger.info(`User ${username} has private certs.`);\n         return reply.send({\n           messages: [\n             {\n@@ -157,6 +163,7 @@ export const unprotectedCertificateRoutes: FastifyPluginCallbackTypebox = (\n       }\n \n       if (!user.profileUI?.showTimeLine) {\n+        logger.info(`User ${username} has private timeline.`);\n         return reply.send({\n           messages: [\n             {\n@@ -169,12 +176,16 @@ export const unprotectedCertificateRoutes: FastifyPluginCallbackTypebox = (\n       }\n \n       if (!user[certType]) {\n+        const cert = certTypeTitleMap[certType];\n+        logger.info(\n+          `User ${username} has not completed the ${cert} certification.`\n+        );\n         return reply.send({\n           messages: [\n             {\n               type: 'info',\n               message: 'flash.user-not-certified',\n-              variables: { username, cert: certTypeTitleMap[certType] }\n+              variables: { username, cert }\n             }\n           ]\n         });\n@@ -211,6 +222,7 @@ export const unprotectedCertificateRoutes: FastifyPluginCallbackTypebox = (\n       const { name } = user;\n \n       if (!user.profileUI.showName) {\n+        logger.info(`User ${username} has private name.`);\n         void reply.code(200);\n         return reply.send({\n           certSlug,"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 15,
        "deletions": 3
    }
}