{
    "author": "moT01",
    "message": "fix(client): move intros back to collapsed area (#57910)",
    "sha": "e47ccaa9124a745a4a05e03c72881de69e6125e6",
    "files": [
        {
            "sha": "408e2b7f2233991efaefa8969c74efe213062e2b",
            "filename": "client/src/templates/Introduction/components/block-header.tsx",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/e47ccaa9124a745a4a05e03c72881de69e6125e6/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock-header.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/e47ccaa9124a745a4a05e03c72881de69e6125e6/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock-header.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock-header.tsx?ref=e47ccaa9124a745a4a05e03c72881de69e6125e6",
            "patch": "@@ -50,7 +50,7 @@ function BlockHeader({\n           </span>\n           <DropDown />\n         </span>\n-        {!isEmpty(blockIntroArr) && (\n+        {isExpanded && !isEmpty(blockIntroArr) && (\n           <BlockIntros intros={blockIntroArr as string[]} />\n         )}\n         {!isExpanded && !isCompleted && completedCount > 0 && ("
        },
        {
            "sha": "8f7fb1d192e9039256e9b9676f8b72c19b760a61",
            "filename": "client/src/templates/Introduction/components/block.css",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/e47ccaa9124a745a4a05e03c72881de69e6125e6/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock.css",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/e47ccaa9124a745a4a05e03c72881de69e6125e6/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock.css",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock.css?ref=e47ccaa9124a745a4a05e03c72881de69e6125e6",
            "patch": "@@ -0,0 +1,17 @@\n+/* these are all used in the AccordionBlock() layout in Block.tsx */\n+.accordion-block-expanded {\n+  padding: 0 24px;\n+}\n+\n+.accordion-block-expanded .block-description {\n+  padding: 18px 15px;\n+  border-bottom: 1px solid var(--secondary-background);\n+}\n+\n+.accordion-block-expanded .challenge-jump-link {\n+  margin: 0 15px 25px;\n+}\n+\n+.accordion-block-expanded .map-challenges-grid {\n+  margin: 0 15px 18px;\n+}"
        },
        {
            "sha": "a071c65f97465a2f5e1a42dc5c351e72937f3816",
            "filename": "client/src/templates/Introduction/components/block.test.tsx",
            "status": "modified",
            "additions": 10,
            "deletions": 3,
            "changes": 13,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/e47ccaa9124a745a4a05e03c72881de69e6125e6/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock.test.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/e47ccaa9124a745a4a05e03c72881de69e6125e6/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock.test.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock.test.tsx?ref=e47ccaa9124a745a4a05e03c72881de69e6125e6",
            "patch": "@@ -20,6 +20,13 @@ jest.mock('../../../../../shared/utils/is-audited', () => ({\n   isAuditedSuperBlock: jest.fn().mockReturnValueOnce(true)\n }));\n \n+jest.mock('../redux', () => ({\n+  makeExpandedBlockSelector: jest.fn(() => jest.fn(() => true)),\n+  completedChallengesSelector: jest.fn(() => [\n+    { id: 'mockId', title: 'mockTitle' }\n+  ])\n+}));\n+\n const defaultProps = {\n   block: 'test-block',\n   blockType: null,\n@@ -69,7 +76,7 @@ const defaultProps = {\n       },\n       sourceInstanceName: 'mockSourceInstanceName',\n       superOrder: 1,\n-      superBlock: SuperBlocks.RespWebDesign,\n+      superBlock: SuperBlocks.FullStackDeveloper,\n       tail: ['mockTail'],\n       template: 'mockTemplate',\n       tests: [] as Test[],\n@@ -84,9 +91,9 @@ const defaultProps = {\n     }\n   ],\n   completedChallengeIds: ['testchallengeIds'],\n-  isExpanded: false,\n+  isExpanded: true,\n   t: jest.fn((key: string) => [key]),\n-  superBlock: SuperBlocks.RespWebDesign,\n+  superBlock: SuperBlocks.FullStackDeveloper,\n   toggleBlock: jest.fn()\n };\n "
        },
        {
            "sha": "a2f8d8cd9aa2e9e24f2968f3a1fea8e70abccbd7",
            "filename": "client/src/templates/Introduction/components/block.tsx",
            "status": "modified",
            "additions": 55,
            "deletions": 138,
            "changes": 193,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/e47ccaa9124a745a4a05e03c72881de69e6125e6/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/e47ccaa9124a745a4a05e03c72881de69e6125e6/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FIntroduction%2Fcomponents%2Fblock.tsx?ref=e47ccaa9124a745a4a05e03c72881de69e6125e6",
            "patch": "@@ -26,6 +26,7 @@ import BlockIntros from './block-intros';\n import BlockHeader from './block-header';\n \n import '../intro.css';\n+import './block.css';\n \n const { curriculumLocale } = envData;\n \n@@ -107,7 +108,7 @@ class Block extends Component<BlockProps> {\n       return isProjectBased(challenge.challengeType, block);\n     });\n \n-    const isGridBlock = challenges.some(challenge => {\n+    const isGridSuperBlock = challenges.some(challenge => {\n       return isGridBased(superBlock, challenge.challengeType);\n     });\n \n@@ -133,6 +134,7 @@ class Block extends Component<BlockProps> {\n     // not being used to render anything\n     const link = challenges[0]?.fields.slug || '';\n     const blockLayout = challenges[0]?.blockLayout;\n+    const isGridBlock = blockLayout === BlockLayouts.ChallengeGrid;\n \n     const isEmptyBlock = !challenges.length;\n \n@@ -256,26 +258,30 @@ class Block extends Component<BlockProps> {\n             isExpanded={isExpanded}\n             percentageCompleted={percentageCompleted}\n           />\n-          {!isAudited && (\n-            <div className='tags-wrapper'>\n-              <Link\n-                className='cert-tag'\n-                to={t('links:help-translate-link-url')}\n-              >\n-                {t('misc.translation-pending')}\n-              </Link>\n-            </div>\n-          )}\n+\n           {isExpanded && (\n-            <div id={`${block}-panel`}>\n-              <BlockIntros intros={blockIntroArr} />\n-              <Challenges\n-                challenges={extendedChallenges}\n-                isProjectBlock={isProjectBlock}\n-                isGridMap={true}\n-                blockTitle={blockTitle}\n-              />\n-            </div>\n+            <>\n+              {!isAudited && (\n+                <div className='tags-wrapper'>\n+                  <Link\n+                    className='cert-tag'\n+                    to={t('links:help-translate-link-url')}\n+                  >\n+                    {t('misc.translation-pending')}\n+                  </Link>\n+                </div>\n+              )}\n+\n+              <div id={`${block}-panel`}>\n+                <BlockIntros intros={blockIntroArr} />\n+                <Challenges\n+                  challenges={extendedChallenges}\n+                  isProjectBlock={isProjectBlock}\n+                  isGridMap={true}\n+                  blockTitle={blockTitle}\n+                />\n+              </div>\n+            </>\n           )}\n         </div>\n       </ScrollableAnchor>\n@@ -331,104 +337,9 @@ class Block extends Component<BlockProps> {\n     );\n \n     /**\n-     * ChallengeListBlock displays challenges in a list.\n-     * Created for the new Full Stack Developer Certification,\n-     * so we can play with it without affecting the existing block layouts.\n-     */\n-    const ChallengeListBlock = (\n-      <>\n-        <ScrollableAnchor id={block}>\n-          <span className='hide-scrollable-anchor'></span>\n-        </ScrollableAnchor>\n-        <div\n-          className={`block block-grid challenge-list-block ${isExpanded ? 'open' : ''}`}\n-        >\n-          <BlockHeader\n-            blockDashed={block}\n-            blockTitle={blockTitle}\n-            blockType={blockType}\n-            completedCount={completedCount}\n-            courseCompletionStatus={courseCompletionStatus()}\n-            handleClick={this.handleBlockClick}\n-            isCompleted={isBlockCompleted}\n-            isExpanded={isExpanded}\n-            percentageCompleted={percentageCompleted}\n-            blockIntroArr={blockIntroArr}\n-          />\n-          {!isAudited && (\n-            <div className='tags-wrapper'>\n-              <Link\n-                className='cert-tag'\n-                to={t('links:help-translate-link-url')}\n-              >\n-                {t('misc.translation-pending')}\n-              </Link>\n-            </div>\n-          )}\n-          {isExpanded && (\n-            <div id={`${block}-panel`}>\n-              <Challenges\n-                challenges={extendedChallenges}\n-                isProjectBlock={isProjectBlock}\n-              />\n-            </div>\n-          )}\n-        </div>\n-      </>\n-    );\n-\n-    /**\n-     * LinkBlock displays the block as a single link.\n-     * This layout is used if the block has a single challenge.\n-     * Created for the new Full Stack Developer Certification,\n-     * so we can play with it without affecting the existing block layouts.\n-     */\n-    const LinkBlock = (\n-      <>\n-        <ScrollableAnchor id={block}>\n-          <span className='hide-scrollable-anchor'></span>\n-        </ScrollableAnchor>\n-        <div className='block block-grid grid-project-block grid-project-block-no-margin'>\n-          <div className='tags-wrapper'>\n-            {!isAudited && (\n-              <Link\n-                className='cert-tag'\n-                to={t('links:help-translate-link-url')}\n-              >\n-                {t('misc.translation-pending')}{' '}\n-              </Link>\n-            )}\n-          </div>\n-          <div className='title-wrapper map-title'>\n-            <h3 className='block-grid-title'>\n-              <Link\n-                className='block-header'\n-                onClick={() => {\n-                  this.handleBlockClick();\n-                }}\n-                to={link}\n-              >\n-                <CheckMark isCompleted={isBlockCompleted} />\n-                {blockType && <BlockLabel blockType={blockType} />}\n-                {blockTitle}\n-                <span className='sr-only'>\n-                  {isBlockCompleted\n-                    ? `, ${t('learn.completed')}`\n-                    : `, ${t('learn.not-completed')}`}\n-                </span>\n-              </Link>\n-            </h3>\n-          </div>\n-          <BlockIntros intros={blockIntroArr} />\n-        </div>\n-      </>\n-    );\n-\n-    /**\n-     * ChallengeGridBlock displays challenges in a grid.\n-     * This layout is specifically used for the new Full Stack Developer Certification.\n+     * AccordionBlock is used as the block layout in new accordion style superblocks.\n      */\n-    const ChallengeGridBlock = (\n+    const AccordionBlock = (\n       <>\n         <ScrollableAnchor id={block}>\n           <span className='hide-scrollable-anchor'></span>\n@@ -448,34 +359,40 @@ class Block extends Component<BlockProps> {\n             percentageCompleted={percentageCompleted}\n             blockIntroArr={blockIntroArr}\n           />\n-          {!isAudited && (\n-            <div className='tags-wrapper'>\n-              <Link\n-                className='cert-tag'\n-                to={t('links:help-translate-link-url')}\n-              >\n-                {t('misc.translation-pending')}\n-              </Link>\n-            </div>\n-          )}\n+\n           {isExpanded && (\n-            <div id={`${block}-panel`} className='challenge-grid-block-panel'>\n-              <Challenges\n-                challenges={extendedChallenges}\n-                isProjectBlock={isProjectBlock}\n-                isGridMap={true}\n-                blockTitle={blockTitle}\n-              />\n+            <div className='accordion-block-expanded'>\n+              {!isAudited && (\n+                <div className='tags-wrapper'>\n+                  <Link\n+                    className='cert-tag'\n+                    to={t('links:help-translate-link-url')}\n+                  >\n+                    {t('misc.translation-pending')}\n+                  </Link>\n+                </div>\n+              )}\n+              <div\n+                id={`${block}-panel`}\n+                className={isGridBlock ? 'challenge-grid-block-panel' : ''}\n+              >\n+                <Challenges\n+                  challenges={extendedChallenges}\n+                  isProjectBlock={false}\n+                  isGridMap={isGridBlock}\n+                  blockTitle={blockTitle}\n+                />\n+              </div>\n             </div>\n           )}\n         </div>\n       </>\n     );\n \n     const layoutToComponent = {\n-      [BlockLayouts.ChallengeGrid]: ChallengeGridBlock,\n-      [BlockLayouts.ChallengeList]: ChallengeListBlock,\n-      [BlockLayouts.Link]: LinkBlock,\n+      [BlockLayouts.ChallengeGrid]: AccordionBlock,\n+      [BlockLayouts.ChallengeList]: AccordionBlock,\n+      [BlockLayouts.Link]: AccordionBlock,\n       [BlockLayouts.ProjectList]: ProjectListBlock,\n       [BlockLayouts.LegacyLink]: LegacyLinkBlock,\n       [BlockLayouts.LegacyChallengeList]: LegacyChallengeListBlock,\n@@ -486,7 +403,7 @@ class Block extends Component<BlockProps> {\n       !isEmptyBlock && (\n         <>\n           {layoutToComponent[blockLayout]}\n-          {(!isGridBlock || isProjectBlock) &&\n+          {(!isGridSuperBlock || isProjectBlock) &&\n             superBlock !== SuperBlocks.FullStackDeveloper && (\n               <Spacer size='m' />\n             )}"
        },
        {
            "sha": "4b489dcbcfe4ae5da548f8019703424d3399ad82",
            "filename": "e2e/super-block-page.spec.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/e47ccaa9124a745a4a05e03c72881de69e6125e6/e2e%2Fsuper-block-page.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/e47ccaa9124a745a4a05e03c72881de69e6125e6/e2e%2Fsuper-block-page.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fsuper-block-page.spec.ts?ref=e47ccaa9124a745a4a05e03c72881de69e6125e6",
            "patch": "@@ -123,7 +123,9 @@ test.describe('Super Block Page - Authenticated User', () => {\n \n       // Module\n       await expect(\n-        page.getByRole('button', { name: /Basic CSS/ })\n+        page.getByRole('button', {\n+          name: /Basic CSS \\d+ of \\d+ steps complete/\n+        })\n       ).toHaveAttribute('aria-expanded', 'true');\n \n       // Block\n@@ -153,7 +155,9 @@ test.describe('Super Block Page - Authenticated User', () => {\n \n       // Basic HTML module\n       await expect(\n-        page.getByRole('button', { name: /Basic HTML/ })\n+        page.getByRole('button', {\n+          name: /Basic HTML \\d+ of \\d+ steps complete/\n+        })\n       ).toHaveAttribute('aria-expanded', 'true');\n \n       // What is HTML block"
        }
    ],
    "stats": {
        "total": 233,
        "additions": 89,
        "deletions": 144
    }
}