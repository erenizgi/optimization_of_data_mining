{
    "author": "DanielRosa74",
    "message": "feat(tools, client): add speaking tasks logic (#61906)\n\nCo-authored-by: Huyen Nguyen <25715018+huyenltnguyen@users.noreply.github.com>\nCo-authored-by: Oliver Eyton-Williams <ojeytonwilliams@gmail.com>",
    "sha": "2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
    "files": [
        {
            "sha": "fcabe9f49a63c75aa7c74df7ab8a40a1538284ee",
            "filename": "client/gatsby-node.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fgatsby-node.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fgatsby-node.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fgatsby-node.js?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -386,6 +386,7 @@ exports.createSchemaCustomization = ({ actions }) => {\n     type Answer {\n       answer: String\n       feedback: String\n+      audioId: String\n     }\n     type RequiredResource {\n       link: String"
        },
        {
            "sha": "d02b1e796a192078509c80d62fb7ba57792c8998",
            "filename": "client/i18n/locales/english/translations.json",
            "status": "modified",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fi18n%2Flocales%2Fenglish%2Ftranslations.json?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -1354,6 +1354,26 @@\n       \"two-questions\": \"Congratulations on getting this far. Before you can start the exam, please answer these two short survey questions.\"\n     }\n   },\n+  \"speaking-modal\": {\n+    \"heading\": \"Speaking Practice\",\n+    \"repeat-sentence\": \"Repeat aloud this sentence:\",\n+    \"play\": \"Play\",\n+    \"playing\": \"Playing...\",\n+    \"record\": \"Record\",\n+    \"stop\": \"Stop\",\n+    \"incorrect-words\": \"Incorrect words: {{words}}.\",\n+    \"misplaced-words\": \"Misplaced words: {{words}}.\",\n+    \"correct-congratulations\": \"That's correct! Congratulations!\",\n+    \"very-good\": \"Very good!\",\n+    \"try-again\": \"Try again.\",\n+    \"no-audio-available\": \"No audio file available.\",\n+    \"no-speech-detected\": \"Recording stopped. No speech detected.\",\n+    \"speech-recognition-not-supported\": \"Speech recognition not supported in this browser.\",\n+    \"recording-speak-now\": \"Recording. Speak now.\",\n+    \"recording-stopped-processing\": \"Recording stopped. Processing...\",\n+    \"microphone-access-error\": \"Error: Could not access microphone.\",\n+    \"speaking-button\": \"Practice speaking\"\n+  },\n   \"curriculum\": {\n     \"catalog\": {\n       \"title\": \"Explore our Catalog\","
        },
        {
            "sha": "ecd8a62d98372751e5b34558f1c52b7582e4e96a",
            "filename": "client/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fpackage.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fpackage.json?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -62,6 +62,7 @@\n     \"@reduxjs/toolkit\": \"2.8.2\",\n     \"@stripe/react-stripe-js\": \"1.16.5\",\n     \"@stripe/stripe-js\": \"1.54.2\",\n+    \"@types/react-speech-recognition\": \"3.9.6\",\n     \"algoliasearch\": \"4.22.1\",\n     \"assert\": \"2.0.0\",\n     \"babel-plugin-preval\": \"5.1.0\",\n@@ -113,6 +114,7 @@\n     \"react-reflex\": \"4.1.0\",\n     \"react-responsive\": \"9.0.2\",\n     \"react-scroll\": \"1.9.0\",\n+    \"react-speech-recognition\": \"4.0.1\",\n     \"react-spinkit\": \"3.0.0\",\n     \"react-tooltip\": \"4.5.1\",\n     \"react-transition-group\": \"4.4.5\","
        },
        {
            "sha": "6100c2439d2d48cdef22e9bed1ebf1083dd67fc4",
            "filename": "client/src/redux/prop-types.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Fredux%2Fprop-types.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Fredux%2Fprop-types.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Fprop-types.ts?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -37,6 +37,7 @@ export type MarkdownRemark = {\n type MultipleChoiceAnswer = {\n   answer: string;\n   feedback: string | null;\n+  audioId: string | null;\n };\n \n export type Question = {"
        },
        {
            "sha": "ccef1df62e0e2eea23db36bdebfb5294af4491d4",
            "filename": "client/src/templates/Challenges/components/multiple-choice-questions.tsx",
            "status": "modified",
            "additions": 141,
            "deletions": 56,
            "changes": 197,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fmultiple-choice-questions.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fmultiple-choice-questions.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fmultiple-choice-questions.tsx?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -1,8 +1,14 @@\n-import React from 'react';\n+import React, { useState } from 'react';\n+import { connect } from 'react-redux';\n import { useTranslation } from 'react-i18next';\n+import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n+import { faMicrophone } from '@fortawesome/free-solid-svg-icons';\n \n-import { Spacer } from '@freecodecamp/ui';\n+import { Button, Spacer } from '@freecodecamp/ui';\n import { Question } from '../../../redux/prop-types';\n+import { openModal } from '../redux/actions';\n+import { SuperBlocks } from '../../../../../shared/config/curriculum';\n+import SpeakingModal from './speaking-modal';\n import ChallengeHeading from './challenge-heading';\n import PrismFormatted from './prism-formatted';\n \n@@ -12,6 +18,8 @@ type MultipleChoiceQuestionsProps = {\n   handleOptionChange: (questionIndex: number, answerIndex: number) => void;\n   submittedMcqAnswers: (number | null)[];\n   showFeedback: boolean;\n+  openSpeakingModal: () => void;\n+  superBlock: SuperBlocks;\n };\n \n function removeParagraphTags(text: string): string {\n@@ -23,10 +31,45 @@ function MultipleChoiceQuestions({\n   selectedOptions,\n   handleOptionChange,\n   submittedMcqAnswers,\n-  showFeedback\n+  showFeedback,\n+  openSpeakingModal,\n+  superBlock\n }: MultipleChoiceQuestionsProps): JSX.Element {\n   const { t } = useTranslation();\n \n+  const [modalText, setModalText] = useState('');\n+  const [modalAnswerIndex, setModalAnswerIndex] = useState<number>(0);\n+  const [modalQuestionIndex, setModalQuestionIndex] = useState<number>(0);\n+\n+  function stripCodeTags(text: string): string {\n+    return text.replace(/<code>(.*?)<\\/code>/g, '$1');\n+  }\n+\n+  const handleSpeakingButtonClick = (\n+    answer: string,\n+    answerIndex: number,\n+    questionIndex: number\n+  ) => {\n+    setModalText(stripCodeTags(removeParagraphTags(answer)));\n+    setModalAnswerIndex(answerIndex);\n+    setModalQuestionIndex(questionIndex);\n+    openSpeakingModal();\n+  };\n+\n+  const constructAudioUrl = (audioId?: string): string | undefined =>\n+    audioId\n+      ? `https://cdn.freecodecamp.org/curriculum/english/animation-assets/sounds/${audioId}`\n+      : undefined;\n+\n+  const getAudioUrl = (\n+    questionIndex: number,\n+    answerIndex: number\n+  ): string | undefined => {\n+    const answer = questions[questionIndex]?.answers[answerIndex];\n+    const audioId = answer?.audioId ?? undefined;\n+    return constructAudioUrl(audioId);\n+  };\n+\n   return (\n     <>\n       <ChallengeHeading\n@@ -50,74 +93,116 @@ function MultipleChoiceQuestions({\n                 // -1 because the solution is 1-indexed\n                 questions[questionIndex].solution - 1;\n \n+              const labelId = `mc-question-${questionIndex}-answer-${answerIndex}-label`;\n+              const hasAudio =\n+                questions[questionIndex]?.answers[answerIndex]?.audioId;\n+\n               return (\n-                <React.Fragment key={answerIndex}>\n-                  <label\n-                    className={`video-quiz-option-label \n-                      ${showFeedback && isSubmittedAnswer ? 'mcq-hide-border' : ''} \n-                      ${showFeedback && isSubmittedAnswer ? (isCorrect ? 'mcq-correct-border' : 'mcq-incorrect-border') : ''}`}\n-                    htmlFor={`mc-question-${questionIndex}-answer-${answerIndex}`}\n-                  >\n-                    <input\n-                      name={`mc-question-${questionIndex}`}\n-                      checked={selectedOptions[questionIndex] === answerIndex}\n-                      className='sr-only'\n-                      onChange={() =>\n-                        handleOptionChange(questionIndex, answerIndex)\n-                      }\n-                      type='radio'\n-                      value={answerIndex}\n-                      id={`mc-question-${questionIndex}-answer-${answerIndex}`}\n-                    />{' '}\n-                    <span className='video-quiz-input-visible'>\n-                      {selectedOptions[questionIndex] === answerIndex ? (\n-                        <span className='video-quiz-selected-input' />\n-                      ) : null}\n-                    </span>\n-                    <PrismFormatted\n-                      className={'video-quiz-option'}\n-                      text={removeParagraphTags(answer)}\n-                      useSpan\n-                      noAria\n-                    />\n-                  </label>\n-                  {showFeedback && isSubmittedAnswer && (\n-                    <div\n-                      className={`video-quiz-option-label mcq-feedback ${isCorrect ? 'mcq-correct' : 'mcq-incorrect'}`}\n-                    >\n-                      <p>\n-                        {isCorrect\n-                          ? t('learn.quiz.correct-answer')\n-                          : t('learn.quiz.incorrect-answer')}\n-                      </p>\n-                      {feedback && (\n+                <div key={answerIndex} className='mcq-option-row'>\n+                  <div className='mcq-option-with-feedback'>\n+                    <div className='mcq-option-content'>\n+                      <label\n+                        id={labelId}\n+                        className={`video-quiz-option-label mcq-option-label\n+                            ${showFeedback && isSubmittedAnswer ? 'mcq-hide-border' : ''}\n+                            ${showFeedback && isSubmittedAnswer ? (isCorrect ? 'mcq-correct-border' : 'mcq-incorrect-border') : ''}`}\n+                        htmlFor={`mc-question-${questionIndex}-answer-${answerIndex}`}\n+                      >\n+                        <input\n+                          name={`mc-question-${questionIndex}`}\n+                          checked={\n+                            selectedOptions[questionIndex] === answerIndex\n+                          }\n+                          className='sr-only'\n+                          onChange={() =>\n+                            handleOptionChange(questionIndex, answerIndex)\n+                          }\n+                          type='radio'\n+                          value={answerIndex}\n+                          id={`mc-question-${questionIndex}-answer-${answerIndex}`}\n+                        />{' '}\n+                        <span className='video-quiz-input-visible'>\n+                          {selectedOptions[questionIndex] === answerIndex ? (\n+                            <span className='video-quiz-selected-input' />\n+                          ) : null}\n+                        </span>\n+                        <PrismFormatted\n+                          className={'video-quiz-option'}\n+                          text={removeParagraphTags(answer)}\n+                          useSpan\n+                          noAria\n+                        />\n+                      </label>\n+                    </div>\n+                    {showFeedback && isSubmittedAnswer && (\n+                      <div\n+                        className={`video-quiz-option-label mcq-feedback ${isCorrect ? 'mcq-correct' : 'mcq-incorrect'}`}\n+                      >\n                         <p>\n-                          <PrismFormatted\n-                            className={\n-                              isCorrect\n-                                ? 'mcq-prism-correct'\n-                                : 'mcq-prism-incorrect'\n-                            }\n-                            text={removeParagraphTags(feedback)}\n-                            useSpan\n-                            noAria\n-                          />\n+                          {isCorrect\n+                            ? t('learn.quiz.correct-answer')\n+                            : t('learn.quiz.incorrect-answer')}\n                         </p>\n-                      )}\n+                        {feedback && (\n+                          <p>\n+                            <PrismFormatted\n+                              className={\n+                                isCorrect\n+                                  ? 'mcq-prism-correct'\n+                                  : 'mcq-prism-incorrect'\n+                              }\n+                              text={removeParagraphTags(feedback)}\n+                              useSpan\n+                              noAria\n+                            />\n+                          </p>\n+                        )}\n+                      </div>\n+                    )}\n+                  </div>\n+\n+                  {hasAudio && (\n+                    <div className='mcq-speaking-button-wrapper'>\n+                      <Button\n+                        size='medium'\n+                        onClick={() =>\n+                          handleSpeakingButtonClick(\n+                            answer,\n+                            answerIndex,\n+                            questionIndex\n+                          )\n+                        }\n+                        className='mcq-speaking-button'\n+                        aria-describedby={labelId}\n+                        aria-label={t('speaking-modal.speaking-button')}\n+                      >\n+                        <FontAwesomeIcon icon={faMicrophone} />\n+                      </Button>\n                     </div>\n                   )}\n-                </React.Fragment>\n+                </div>\n               );\n             })}\n           </div>\n           <Spacer size='m' />\n         </fieldset>\n       ))}\n+\n       <Spacer size='m' />\n+      <SpeakingModal\n+        sentence={modalText}\n+        audioUrl={getAudioUrl(modalQuestionIndex, modalAnswerIndex)}\n+        answerIndex={modalAnswerIndex}\n+        superBlock={superBlock}\n+      />\n     </>\n   );\n }\n \n+const mapDispatchToProps = {\n+  openSpeakingModal: () => openModal('speaking')\n+};\n+\n MultipleChoiceQuestions.displayName = 'MultipleChoiceQuestions';\n \n-export default MultipleChoiceQuestions;\n+export default connect(null, mapDispatchToProps)(MultipleChoiceQuestions);"
        },
        {
            "sha": "92457ca6b7da08c0a74ee41ff61726baca8be235",
            "filename": "client/src/templates/Challenges/components/speaking-modal-helpers.test.ts",
            "status": "added",
            "additions": 234,
            "deletions": 0,
            "changes": 234,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal-helpers.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal-helpers.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal-helpers.test.ts?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -0,0 +1,234 @@\n+import { describe, it, expect } from 'vitest';\n+import { normalizeText, compareTexts } from './speaking-modal-helpers';\n+\n+describe('speaking-modal-helpers', () => {\n+  describe('normalizeText', () => {\n+    it('should convert text to lowercase and remove punctuation', () => {\n+      expect(normalizeText('Hello, World!')).toEqual(['hello', 'world']);\n+    });\n+\n+    it('should handle multiple spaces and trim whitespace', () => {\n+      expect(normalizeText('  Hello    World  ')).toEqual(['hello', 'world']);\n+    });\n+\n+    it('should remove various punctuation marks', () => {\n+      expect(normalizeText(\"Hello! How are you? I'm fine.\")).toEqual([\n+        'hello',\n+        'how',\n+        'are',\n+        'you',\n+        'im',\n+        'fine'\n+      ]);\n+    });\n+\n+    it('should handle empty string', () => {\n+      expect(normalizeText('')).toEqual([]);\n+    });\n+\n+    it('should handle string with only punctuation', () => {\n+      expect(normalizeText('!!!')).toEqual([]);\n+    });\n+\n+    it('should handle string with only spaces', () => {\n+      expect(normalizeText('   ')).toEqual([]);\n+    });\n+\n+    it('should preserve numbers and letters', () => {\n+      expect(normalizeText('Hello123 World456')).toEqual([\n+        'hello123',\n+        'world456'\n+      ]);\n+    });\n+  });\n+\n+  describe('compareTexts', () => {\n+    describe('exact matches', () => {\n+      it('should return exact match for identical text', () => {\n+        const result = compareTexts('Hello world', 'Hello world');\n+        expect(result).toEqual({\n+          status: 'correct'\n+        });\n+      });\n+\n+      it('should return exact match ignoring punctuation and case', () => {\n+        const result = compareTexts('Hello, World!', 'hello world');\n+        expect(result).toEqual({\n+          status: 'correct'\n+        });\n+      });\n+\n+      it('should return exact match ignoring extra spaces', () => {\n+        const result = compareTexts('Hello   world', '  hello world  ');\n+        expect(result).toEqual({\n+          status: 'correct'\n+        });\n+      });\n+    });\n+\n+    describe('partial matches', () => {\n+      it('should mark individual wrong words as incorrect', () => {\n+        const result = compareTexts(\n+          'Hello beautiful world',\n+          'Hello wonderful world'\n+        );\n+        expect(result.comparison).toEqual([\n+          { expected: 'hello', actual: 'hello' },\n+          { expected: 'beautiful', actual: 'wonderful' },\n+          { expected: 'world', actual: 'world' }\n+        ]);\n+      });\n+\n+      it('should handle shorter utterance with a missing word', () => {\n+        const result = compareTexts('Hello beautiful world', 'Hello world');\n+        expect(result.comparison).toEqual([\n+          { expected: 'hello', actual: 'hello' },\n+          { expected: 'beautiful' },\n+          { expected: 'world', actual: 'world' }\n+        ]);\n+      });\n+\n+      it('should handle consecutive missing words', () => {\n+        const result = compareTexts('a b c d', 'a d');\n+        expect(result.comparison).toEqual([\n+          { expected: 'a', actual: 'a' },\n+          { expected: 'b' },\n+          { expected: 'c' },\n+          { expected: 'd', actual: 'd' }\n+        ]);\n+      });\n+\n+      it('should handle consecutive extra words', () => {\n+        const result = compareTexts('a d', 'a b c d');\n+        expect(result.comparison).toEqual([\n+          { expected: 'a', actual: 'a' },\n+          { actual: 'b' },\n+          { actual: 'c' },\n+          { expected: 'd', actual: 'd' }\n+        ]);\n+      });\n+\n+      it('should handle missing words in longer sentences', () => {\n+        const result = compareTexts('a b c d e f g', 'a b c e f g');\n+        expect(result.comparison).toEqual([\n+          { expected: 'a', actual: 'a' },\n+          { expected: 'b', actual: 'b' },\n+          { expected: 'c', actual: 'c' },\n+          { expected: 'd' },\n+          { expected: 'e', actual: 'e' },\n+          { expected: 'f', actual: 'f' },\n+          { expected: 'g', actual: 'g' }\n+        ]);\n+      });\n+\n+      it('should pad shorter utterance with undefined for alignment', () => {\n+        const result = compareTexts('a b c', 'b c');\n+        expect(result.comparison).toEqual([\n+          { expected: 'a' },\n+          { expected: 'b', actual: 'b' },\n+          { expected: 'c', actual: 'c' }\n+        ]);\n+      });\n+\n+      it('should handle completely different texts that are longer than the original', () => {\n+        const result = compareTexts('a b', 'c d e');\n+        expect(result.comparison).toEqual([\n+          { expected: 'a', actual: 'c' },\n+          { expected: 'b', actual: 'd' },\n+          { actual: 'e' }\n+        ]);\n+      });\n+\n+      it('should handle completely different texts that are shorter than the original', () => {\n+        const result = compareTexts('a b c', 'd e');\n+        expect(result.comparison).toEqual([\n+          { expected: 'a', actual: 'd' },\n+          { expected: 'b', actual: 'e' },\n+          { expected: 'c' }\n+        ]);\n+      });\n+\n+      it('should handle repeated words correctly', () => {\n+        const result = compareTexts(\n+          'hello hello hello hello hello',\n+          'hello hello hello hello'\n+        );\n+\n+        expect(result.comparison).toEqual([\n+          { expected: 'hello', actual: 'hello' },\n+          { expected: 'hello', actual: 'hello' },\n+          { expected: 'hello', actual: 'hello' },\n+          { expected: 'hello', actual: 'hello' },\n+          { expected: 'hello' }\n+        ]);\n+      });\n+\n+      it('should not ignore incorrect words in the middle of the sentence', () => {\n+        const result = compareTexts(\n+          'The cat sat on the mat',\n+          'The black cat sat on the mat'\n+        );\n+        expect(result.comparison).toEqual([\n+          { expected: 'the', actual: 'the' },\n+          { actual: 'black' },\n+          { expected: 'cat', actual: 'cat' },\n+          { expected: 'sat', actual: 'sat' },\n+          { expected: 'on', actual: 'on' },\n+          { expected: 'the', actual: 'the' },\n+          { expected: 'mat', actual: 'mat' }\n+        ]);\n+      });\n+    });\n+\n+    describe('edge cases', () => {\n+      it('should handle empty utterance', () => {\n+        const result = compareTexts('Hello world', '');\n+        expect(result.comparison).toEqual([\n+          { expected: 'hello' },\n+          { expected: 'world' }\n+        ]);\n+      });\n+\n+      it('should handle single word comparison', () => {\n+        const result = compareTexts('Hello', 'Hello');\n+        expect(result.status).toBe('correct');\n+      });\n+\n+      it('should treat punctuation-only original text as if it was empty', () => {\n+        const result = compareTexts('!!!', 'hello');\n+        expect(result.comparison).toEqual([\n+          {\n+            actual: 'hello'\n+          }\n+        ]);\n+      });\n+    });\n+\n+    describe('accuracy calculations', () => {\n+      it('should calculate accuracy based on correct words', () => {\n+        const result = compareTexts('Hello beautiful world', 'Hello world');\n+        expect(result.status).toBe('incorrect');\n+      });\n+\n+      it('should handle zero division when original is empty after normalization', () => {\n+        const result = compareTexts('   ', 'hello');\n+        expect(result.status).toBe('incorrect');\n+      });\n+\n+      it('should return partially-correct for 80% accuracy', () => {\n+        const result = compareTexts(\n+          'Hello beautiful wonderful world amazing',\n+          'Hello beautiful wonderful world fantastic'\n+        );\n+        expect(result.status).toBe('partially-correct');\n+      });\n+\n+      it('should handle both empty strings', () => {\n+        const result = compareTexts('', '');\n+        expect(result).toEqual({\n+          status: 'correct'\n+        });\n+      });\n+    });\n+  });\n+});"
        },
        {
            "sha": "6909330c88ad3bf2e48b20cc9edaf81896c57155",
            "filename": "client/src/templates/Challenges/components/speaking-modal-helpers.ts",
            "status": "added",
            "additions": 183,
            "deletions": 0,
            "changes": 183,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal-helpers.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal-helpers.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal-helpers.ts?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -0,0 +1,183 @@\n+import { isEmpty } from 'lodash-es';\n+\n+export const normalizeText = (text: string) => {\n+  return text\n+    .toLowerCase()\n+    .replace(/[^\\w\\s]/g, '')\n+    .trim()\n+    .split(/\\s+/)\n+    .filter((word: string) => word.length > 0);\n+};\n+\n+interface Missing {\n+  expected: string;\n+  actual?: never;\n+}\n+\n+interface Extra {\n+  actual: string;\n+  expected?: never;\n+}\n+\n+interface Comparison {\n+  expected: string;\n+  actual: string;\n+}\n+\n+export type ComparisonWord = Missing | Extra | Comparison;\n+\n+export interface ComparisonResult {\n+  comparison?: ComparisonWord[];\n+  status?: 'correct' | 'partially-correct' | 'incorrect';\n+}\n+\n+export const compareTexts = (\n+  original: string,\n+  utterance: string\n+): ComparisonResult => {\n+  const originalWords = normalizeText(original);\n+  const utteranceWords = normalizeText(utterance);\n+\n+  if (originalWords.join(' ') === utteranceWords.join(' ')) {\n+    return {\n+      status: 'correct'\n+    };\n+  }\n+\n+  const alignment = alignWords(originalWords, utteranceWords);\n+\n+  const correctCount = alignment.filter(\n+    item => item.expected === item.actual\n+  ).length;\n+  const accuracy =\n+    originalWords.length > 0 ? (correctCount / originalWords.length) * 100 : 0;\n+\n+  const rounded = Math.round(accuracy);\n+\n+  const status: ComparisonResult['status'] =\n+    rounded === 100\n+      ? 'correct'\n+      : rounded >= 80\n+        ? 'partially-correct'\n+        : 'incorrect';\n+\n+  return {\n+    comparison: alignment,\n+    status\n+  };\n+};\n+\n+const toMissing = (word?: string): ComparisonWord => ({ expected: word! });\n+const toExtra = (word?: string): ComparisonWord => ({ actual: word! });\n+\n+function search<T extends string | undefined>(\n+  needle: T,\n+  haystack: T[],\n+  compare: (x?: string) => ComparisonWord\n+): {\n+  comparisons: ComparisonWord[];\n+  updatedHaystack: T[];\n+} {\n+  const id = haystack.indexOf(needle);\n+  const match = { expected: needle!, actual: needle! };\n+\n+  return {\n+    comparisons: id > -1 ? [...haystack.slice(0, id).map(compare), match] : [],\n+    updatedHaystack: id > -1 ? haystack.slice(id) : haystack\n+  };\n+}\n+\n+function matchTexts(\n+  originalWords: string[],\n+  utteranceWords: (string | undefined)[]\n+) {\n+  const results: ComparisonWord[] = [];\n+\n+  let originals = [...originalWords];\n+  let utterances = [...utteranceWords];\n+\n+  while (utterances.length > 0 || originals.length > 0) {\n+    const expected = originals[0];\n+    const actual = utterances[0];\n+\n+    if (expected === actual) {\n+      results.push({ expected, actual });\n+    } else {\n+      // If it's not a direct match, see if there is a match in the original\n+      // text, i.e. find out if the speaker omitted some words\n+      if (originals.includes(actual!)) {\n+        const output = search(actual!, originals, toMissing);\n+        if (isEmpty(output.comparisons)) {\n+          results.push({ expected, actual });\n+        } else {\n+          results.push(...output.comparisons);\n+        }\n+        originals = output.updatedHaystack;\n+      } else {\n+        // The utterance isn't in the original, but the original may be later on\n+        // in the utterances. i.e. we find out if the speaker inserted some\n+        // incorrect words\n+\n+        const output = search(originals[0], utterances, toExtra);\n+        if (isEmpty(output.comparisons)) {\n+          results.push({ expected, actual });\n+        } else {\n+          results.push(...output.comparisons);\n+        }\n+        utterances = output.updatedHaystack;\n+      }\n+    }\n+\n+    originals.shift();\n+    utterances.shift();\n+  }\n+  return results;\n+}\n+\n+function alignWords(\n+  originalWords: string[],\n+  utteranceWords: string[]\n+): ComparisonWord[] {\n+  // first we find the first utterance that's in the original array\n+\n+  const firstUtteranceIndex = utteranceWords.findIndex(word =>\n+    originalWords.includes(word)\n+  );\n+\n+  // Assuming there's a match now we need to know where that appears in the original, so we can align them\n+\n+  if (firstUtteranceIndex !== -1) {\n+    const firstUtterance = utteranceWords[firstUtteranceIndex];\n+    const firstOriginalIndex = originalWords.findIndex(\n+      // we know there's a match, so no need to handle the -1 case\n+      word => word === firstUtterance\n+    );\n+\n+    const delta = firstOriginalIndex - firstUtteranceIndex;\n+    // if delta is positive, the utterance is too short, so we pad the utterance to align\n+    // if delta is negative, the utterance is too long, and we can ignore the first |delta| utterances\n+\n+    const alignedUtterance: (string | undefined)[] =\n+      delta >= 0\n+        ? Array<string | undefined>(delta)\n+            .fill(undefined)\n+            .concat(utteranceWords)\n+        : utteranceWords.slice(-delta);\n+\n+    return matchTexts(originalWords, alignedUtterance);\n+  } else {\n+    const missingUtteranceCount =\n+      utteranceWords.length < originalWords.length\n+        ? originalWords.length - utteranceWords.length\n+        : 0;\n+\n+    const paddedUtterance = utteranceWords.concat(\n+      Array(missingUtteranceCount).fill(undefined)\n+    );\n+\n+    return paddedUtterance.map((uttered, index) => ({\n+      expected: originalWords[index],\n+      actual: uttered\n+    }));\n+  }\n+}"
        },
        {
            "sha": "4af6db20aa2ce12422fc47717856b904597b2f13",
            "filename": "client/src/templates/Challenges/components/speaking-modal.css",
            "status": "added",
            "additions": 55,
            "deletions": 0,
            "changes": 55,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal.css",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal.css",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal.css?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -0,0 +1,55 @@\n+.speaking-modal-body {\n+  display: flex;\n+  flex-direction: column;\n+  align-items: center;\n+  padding: 1.5rem 0;\n+}\n+\n+.speaking-modal-sentence-container {\n+  display: flex;\n+  align-items: center;\n+  justify-content: space-between;\n+  width: 80%;\n+  gap: 2rem;\n+  background-color: var(--background-primary);\n+  border: 2px solid var(--background-tertiary);\n+  padding: 0.5rem 1rem;\n+}\n+\n+.speaking-modal-sentence {\n+  margin: 0;\n+}\n+\n+.speaking-modal-record-container {\n+  display: flex;\n+  justify-content: center;\n+  width: 100%;\n+  margin-top: 1.5rem;\n+}\n+\n+.speaking-modal-record-icon {\n+  margin-inline-end: 0.5rem;\n+}\n+\n+.speaking-modal-feedback {\n+  margin-top: 2rem;\n+}\n+\n+.speaking-modal-correct-text {\n+  color: var(--background-success);\n+}\n+\n+.speaking-modal-feedback-message {\n+  margin-top: 8px;\n+  margin-bottom: 0;\n+}\n+\n+.speaking-modal-comparison-word-correct {\n+  color: var(--background-success);\n+  margin-inline-start: 4px;\n+}\n+\n+.speaking-modal-comparison-word-incorrect {\n+  color: var(--background-danger);\n+  margin-inline-start: 4px;\n+}"
        },
        {
            "sha": "48b2dc1bfc8ebc865bc1e444540100d44b463c0d",
            "filename": "client/src/templates/Challenges/components/speaking-modal.tsx",
            "status": "added",
            "additions": 398,
            "deletions": 0,
            "changes": 398,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fspeaking-modal.tsx?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -0,0 +1,398 @@\n+import React, { useState, useRef, useEffect, useCallback } from 'react';\n+import { connect } from 'react-redux';\n+import { Button, Modal } from '@freecodecamp/ui';\n+import { useTranslation } from 'react-i18next';\n+import SpeechRecognition, {\n+  useSpeechRecognition\n+} from 'react-speech-recognition';\n+import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n+import {\n+  faPlay,\n+  faStop,\n+  faMicrophone\n+} from '@fortawesome/free-solid-svg-icons';\n+\n+import { closeModal } from '../redux/actions';\n+import { isSpeakingModalOpenSelector } from '../redux/selectors';\n+import {\n+  SuperBlocks,\n+  superBlockToSpeechLang\n+} from '../../../../../shared-dist/config/curriculum';\n+import {\n+  compareTexts,\n+  type ComparisonResult,\n+  type ComparisonWord\n+} from './speaking-modal-helpers';\n+import './speaking-modal.css';\n+\n+interface ExactMatchFeedbackProps {\n+  sentence: string;\n+  feedback: string;\n+}\n+\n+interface PartialMatchFeedbackProps {\n+  comparisonResult: ComparisonResult;\n+  sentence: string;\n+  feedback: string;\n+}\n+\n+const ExactMatchFeedback = ({\n+  sentence,\n+  feedback\n+}: ExactMatchFeedbackProps) => (\n+  <>\n+    <div className='speaking-modal-correct-text'>{sentence}</div>\n+    <p className='speaking-modal-feedback-message'>{feedback}</p>\n+  </>\n+);\n+\n+function processComparison(comparison: ComparisonWord): {\n+  status: 'correct' | 'misplaced' | 'extra' | 'wrong';\n+  word: string;\n+} {\n+  if (comparison.actual === undefined)\n+    return { status: 'misplaced', word: comparison.expected };\n+  if (comparison.expected === undefined)\n+    return { status: 'extra', word: comparison.actual };\n+  if (comparison.actual === comparison.expected)\n+    return { status: 'correct', word: comparison.expected };\n+\n+  return {\n+    status: 'wrong',\n+    word: comparison.actual\n+  };\n+}\n+\n+const PartialMatchFeedback = ({\n+  comparisonResult,\n+  sentence,\n+  feedback\n+}: PartialMatchFeedbackProps) => {\n+  const { t } = useTranslation();\n+  if (!comparisonResult?.comparison) return null;\n+\n+  const punctuationMark = sentence[sentence.length - 1];\n+\n+  const fullUtterance =\n+    comparisonResult.comparison.map(w => w.actual).join(' ') + punctuationMark;\n+\n+  const comparison = comparisonResult.comparison.map(processComparison);\n+\n+  const misplacedWords = comparison\n+    .filter(item => item.status === 'misplaced')\n+    .map(item => item.word)\n+    .join(', ');\n+\n+  const incorrectWords = comparison\n+    .filter(item => item.status === 'extra' || item.status === 'wrong')\n+    .map(item => item.word)\n+    .join(', ');\n+\n+  return (\n+    <>\n+      <div>\n+        {/* Render the utterance as a full sentence rather than separated words\n+            so screen readers don't add a stop after each word */}\n+        <p className='sr-only'>{fullUtterance}</p>\n+\n+        {misplacedWords && (\n+          <p>\n+            {t('speaking-modal.misplaced-words', { words: misplacedWords })}\n+          </p>\n+        )}\n+\n+        {incorrectWords && (\n+          <p>\n+            {t('speaking-modal.incorrect-words', { words: incorrectWords })}\n+          </p>\n+        )}\n+\n+        {comparison\n+          .filter(({ status }) => status !== 'misplaced')\n+          .map((item, index: number) => (\n+            <span\n+              key={index}\n+              aria-hidden='true'\n+              className={`${item.status === 'correct' ? 'speaking-modal-comparison-word-correct' : 'speaking-modal-comparison-word-incorrect'}`}\n+            >\n+              {index === 0\n+                ? item.word.charAt(0).toUpperCase() + item.word.slice(1)\n+                : item.word}\n+            </span>\n+          ))}\n+        <span aria-hidden='true'>{punctuationMark}</span>\n+      </div>\n+\n+      <p className='speaking-modal-feedback-message'>{feedback}</p>\n+    </>\n+  );\n+};\n+\n+interface SpeakingModalProps {\n+  closeSpeakingModal: () => void;\n+  isSpeakingModalOpen: boolean;\n+  sentence: string;\n+  audioUrl?: string;\n+  answerIndex: number;\n+  superBlock: SuperBlocks;\n+}\n+\n+const SpeakingModal = ({\n+  closeSpeakingModal,\n+  isSpeakingModalOpen,\n+  sentence,\n+  audioUrl,\n+  superBlock\n+}: SpeakingModalProps) => {\n+  const { t } = useTranslation();\n+  const [isPlaying, setIsPlaying] = useState(false);\n+  const [feedback, setFeedback] = useState('');\n+  const [comparisonResult, setComparisonResult] =\n+    useState<ComparisonResult | null>(null);\n+  const [hasStartedRecording, setHasStartedRecording] = useState(false);\n+  const [previouslyListening, setPreviouslyListening] = useState(false);\n+  const audioRef = useRef<HTMLAudioElement | null>(null);\n+  const stopListeningTimeoutRef = useRef<\n+    ReturnType<typeof setTimeout> | undefined\n+  >();\n+\n+  const {\n+    transcript,\n+    listening,\n+    resetTranscript,\n+    browserSupportsSpeechRecognition\n+  } = useSpeechRecognition();\n+\n+  console.log('Speech recognition transcript:', transcript);\n+\n+  const handleAudioEnded = useCallback(() => {\n+    setIsPlaying(false);\n+  }, []);\n+\n+  const handleAudioError = useCallback((e: Event) => {\n+    setIsPlaying(false);\n+    console.error('Audio playback error:', e);\n+  }, []);\n+\n+  const cleanupAudioResources = useCallback(() => {\n+    try {\n+      if (audioRef.current) {\n+        audioRef.current.pause();\n+        audioRef.current.removeEventListener('ended', handleAudioEnded);\n+        audioRef.current.removeEventListener('error', handleAudioError);\n+        audioRef.current = null;\n+      }\n+    } catch (error) {\n+      console.warn('Error stopping audio playback:', error);\n+    }\n+  }, [handleAudioEnded, handleAudioError]);\n+\n+  // Reset feedback when modal is closed and cleanup on unmount\n+  useEffect(() => {\n+    if (!isSpeakingModalOpen) {\n+      setFeedback('');\n+      setComparisonResult(null);\n+      setHasStartedRecording(false);\n+      setPreviouslyListening(false);\n+      setIsPlaying(false);\n+      resetTranscript();\n+      void SpeechRecognition.stopListening();\n+\n+      clearTimeout(stopListeningTimeoutRef.current);\n+      cleanupAudioResources();\n+    }\n+\n+    return () => {\n+      clearTimeout(stopListeningTimeoutRef.current);\n+      cleanupAudioResources();\n+    };\n+  }, [isSpeakingModalOpen, resetTranscript, cleanupAudioResources]);\n+\n+  // Track listening state changes\n+  useEffect(() => {\n+    if (previouslyListening && !listening && hasStartedRecording) {\n+      // Speech recognition just stopped and we had started a recording session\n+      if (transcript && transcript.trim()) {\n+        const result = compareTexts(sentence, transcript);\n+\n+        setComparisonResult(result);\n+\n+        if (result.status === 'correct') {\n+          setFeedback(t('speaking-modal.correct-congratulations'));\n+        } else if (result.status === 'partially-correct') {\n+          setFeedback(`${t('speaking-modal.very-good')}`);\n+        } else {\n+          setFeedback(`${t('speaking-modal.try-again')}`);\n+        }\n+      } else {\n+        // No transcript and we were recording, this means no speech detected\n+        setFeedback(t('speaking-modal.no-speech-detected'));\n+        setComparisonResult(null);\n+      }\n+\n+      setHasStartedRecording(false);\n+    }\n+\n+    setPreviouslyListening(listening);\n+  }, [\n+    listening,\n+    previouslyListening,\n+    hasStartedRecording,\n+    transcript,\n+    sentence,\n+    t\n+  ]);\n+\n+  const handlePlay = async () => {\n+    if (!audioUrl) {\n+      setFeedback(t('speaking-modal.no-audio-available'));\n+      return;\n+    }\n+\n+    const modifiedAudioUrl = audioUrl.endsWith('.mp3')\n+      ? audioUrl\n+      : `${audioUrl}.mp3`;\n+\n+    try {\n+      setIsPlaying(true);\n+\n+      cleanupAudioResources();\n+\n+      const audio = new Audio(modifiedAudioUrl);\n+      audioRef.current = audio;\n+\n+      audio.addEventListener('ended', handleAudioEnded);\n+      audio.addEventListener('error', handleAudioError);\n+\n+      await audio.play();\n+    } catch (error) {\n+      setIsPlaying(false);\n+      console.error('Audio playback error:', error);\n+    }\n+  };\n+\n+  const handleStartRecording = () => {\n+    if (!browserSupportsSpeechRecognition) {\n+      setFeedback(t('speaking-modal.speech-recognition-not-supported'));\n+      return;\n+    }\n+\n+    try {\n+      setFeedback(t('speaking-modal.recording-speak-now'));\n+      setHasStartedRecording(true);\n+      resetTranscript();\n+      setComparisonResult(null);\n+\n+      void SpeechRecognition.startListening({\n+        continuous: false,\n+        language: superBlockToSpeechLang[superBlock]\n+      });\n+\n+      stopListeningTimeoutRef.current = setTimeout(() => {\n+        void SpeechRecognition.stopListening();\n+      }, 30000);\n+    } catch (error) {\n+      console.error('Error starting recording:', error);\n+      setFeedback(t('speaking-modal.microphone-access-error'));\n+    }\n+  };\n+\n+  const handleStopRecording = () => {\n+    void SpeechRecognition.stopListening();\n+    clearTimeout(stopListeningTimeoutRef.current);\n+\n+    setFeedback(t('speaking-modal.recording-stopped-processing'));\n+  };\n+\n+  const handleRecord = () => {\n+    if (listening) {\n+      handleStopRecording();\n+    } else {\n+      handleStartRecording();\n+    }\n+  };\n+\n+  return (\n+    <Modal onClose={closeSpeakingModal} open={isSpeakingModalOpen} size='large'>\n+      <Modal.Header closeButtonClassNames='close'>\n+        {t('speaking-modal.heading')}\n+      </Modal.Header>\n+      <Modal.Body alignment='center' className='speaking-modal-body'>\n+        <p>{t('speaking-modal.repeat-sentence')}</p>\n+\n+        <div className='speaking-modal-sentence-container'>\n+          <p id='speaking-sentence' className='speaking-modal-sentence'>\n+            {sentence}\n+          </p>\n+          <Button\n+            size='medium'\n+            onClick={() => void handlePlay()}\n+            aria-describedby='speaking-sentence'\n+            disabled={isPlaying || listening}\n+            aria-label={\n+              isPlaying ? t('speaking-modal.playing') : t('speaking-modal.play')\n+            }\n+          >\n+            <FontAwesomeIcon\n+              icon={isPlaying ? faStop : faPlay}\n+              aria-hidden='true'\n+            />\n+          </Button>\n+        </div>\n+\n+        <div className='speaking-modal-record-container'>\n+          {browserSupportsSpeechRecognition ? (\n+            <Button\n+              size='medium'\n+              onClick={() => void handleRecord()}\n+              disabled={isPlaying}\n+            >\n+              <FontAwesomeIcon\n+                icon={listening ? faStop : faMicrophone}\n+                aria-hidden='true'\n+                className='speaking-modal-record-icon'\n+              />\n+              {listening\n+                ? t('speaking-modal.stop')\n+                : t('speaking-modal.record')}\n+            </Button>\n+          ) : (\n+            <p className='speaking-modal-not-supported'>\n+              {t('speaking-modal.speech-recognition-not-supported')}\n+            </p>\n+          )}\n+        </div>\n+\n+        <div\n+          className='speaking-modal-feedback'\n+          aria-live='polite'\n+          aria-atomic='true'\n+        >\n+          {comparisonResult?.status === 'correct' ? (\n+            <ExactMatchFeedback sentence={sentence} feedback={feedback} />\n+          ) : comparisonResult?.comparison ? (\n+            <PartialMatchFeedback\n+              comparisonResult={comparisonResult}\n+              sentence={sentence}\n+              feedback={feedback}\n+            />\n+          ) : (\n+            feedback\n+          )}\n+        </div>\n+      </Modal.Body>\n+    </Modal>\n+  );\n+};\n+\n+const mapStateToProps = (state: unknown) => ({\n+  isSpeakingModalOpen: isSpeakingModalOpenSelector(state) as boolean\n+});\n+\n+const mapDispatchToProps = {\n+  closeSpeakingModal: () => closeModal('speaking')\n+};\n+\n+SpeakingModal.displayName = 'SpeakingModal';\n+\n+export default connect(mapStateToProps, mapDispatchToProps)(SpeakingModal);"
        },
        {
            "sha": "bb731ef3abf2e9462c0a2bf7a5f0fd294b16a2c7",
            "filename": "client/src/templates/Challenges/generic/show.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fgeneric%2Fshow.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fgeneric%2Fshow.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fgeneric%2Fshow.tsx?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -330,6 +330,7 @@ const ShowGeneric = ({\n                       handleOptionChange={handleMcqOptionChange}\n                       submittedMcqAnswers={submittedMcqAnswers}\n                       showFeedback={showFeedback}\n+                      superBlock={superBlock}\n                     />\n                   </ObserveKeys>\n                 )}\n@@ -405,6 +406,7 @@ export const query = graphql`\n           answers {\n             answer\n             feedback\n+            audioId\n           }\n           solution\n         }"
        },
        {
            "sha": "507c0011d417aa360fc8adcc5cb12764e21454e5",
            "filename": "client/src/templates/Challenges/redux/index.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fredux%2Findex.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fredux%2Findex.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fredux%2Findex.js?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -47,7 +47,8 @@ const initialState = {\n     examResults: false,\n     survey: false,\n     projectPreview: false,\n-    shortcuts: false\n+    shortcuts: false,\n+    speaking: false\n   },\n   portalWindow: null,\n   showPreviewPortal: false,"
        },
        {
            "sha": "6b73376bab972e87e31572fecfc7c3d495c4a808",
            "filename": "client/src/templates/Challenges/redux/selectors.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fredux%2Fselectors.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fredux%2Fselectors.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fredux%2Fselectors.js?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -52,6 +52,7 @@ export const isFinishQuizModalOpenSelector = state =>\n export const isProjectPreviewModalOpenSelector = state =>\n   state[ns].modal.projectPreview;\n export const isShortcutsModalOpenSelector = state => state[ns].modal.shortcuts;\n+export const isSpeakingModalOpenSelector = state => state[ns].modal.speaking;\n export const isSubmittingSelector = state => state[ns].isSubmitting;\n export const isResettingSelector = state => state[ns].isResetting;\n "
        },
        {
            "sha": "4c9d544d0ebe5743a125a075c736031f09383cd1",
            "filename": "client/src/templates/Challenges/video.css",
            "status": "modified",
            "additions": 54,
            "deletions": 14,
            "changes": 68,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fvideo.css",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/client%2Fsrc%2Ftemplates%2FChallenges%2Fvideo.css",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fvideo.css?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -32,6 +32,8 @@\n \n .video-quiz-options {\n   background-color: var(--primary-background);\n+  display: flex;\n+  flex-direction: column;\n }\n \n /* remove bootstrap margin and center the radio buttons */\n@@ -59,18 +61,6 @@\n   cursor: pointer;\n   display: flex;\n   font-weight: normal;\n-  border-left: 4px solid var(--tertiary-background);\n-  border-right: 4px solid var(--tertiary-background);\n-  border-top: 2px solid var(--tertiary-background);\n-  border-bottom: 2px solid var(--tertiary-background);\n-}\n-\n-.video-quiz-option-label:first-child {\n-  border-top: 4px solid var(--tertiary-background);\n-}\n-\n-.video-quiz-option-label:last-child {\n-  border-bottom: 4px solid var(--tertiary-background);\n }\n \n .video-quiz-input-visible {\n@@ -116,14 +106,51 @@ input:focus-visible + .video-quiz-input-visible {\n   background: none;\n }\n \n-.mcq-correct-border {\n+.mcq-option-row {\n+  /* Use grid so we can align the speaking button to the option content row only */\n+  display: grid;\n+  grid-template-columns: 1fr auto;\n+  grid-template-rows: auto auto; /* row1 = option content, row2 = feedback */\n+  gap: 0 1rem;\n+  border-left: 4px solid var(--tertiary-background);\n+  border-right: 4px solid var(--tertiary-background);\n+  border-top: 2px solid var(--tertiary-background);\n+  border-bottom: 2px solid var(--tertiary-background);\n+}\n+\n+.mcq-option-row:first-child {\n+  border-top: 4px solid var(--tertiary-background);\n+}\n+\n+.mcq-option-row:last-child {\n+  border-bottom: 4px solid var(--tertiary-background);\n+}\n+\n+.mcq-option-row:has(.mcq-correct) {\n   border-left-color: var(--success-background);\n }\n \n-.mcq-incorrect-border {\n+.mcq-option-row:has(.mcq-incorrect) {\n   border-left-color: var(--danger-background);\n }\n \n+.mcq-option-with-feedback {\n+  display: contents;\n+}\n+\n+.mcq-option-content {\n+  display: block;\n+  grid-column: 1;\n+  grid-row: 1;\n+}\n+\n+.mcq-option-label {\n+  display: flex;\n+  align-items: center;\n+  margin: 0;\n+  flex: 1;\n+}\n+\n .mcq-correct {\n   color: var(--success-color);\n   border-left-color: var(--success-background);\n@@ -138,7 +165,20 @@ input:focus-visible + .video-quiz-input-visible {\n   border-bottom: none;\n }\n \n+.mcq-speaking-button-wrapper {\n+  grid-column: 2;\n+  /* place the button in the same grid row as the option content */\n+  grid-row: 1;\n+  display: flex;\n+  align-items: center; /* vertically center the button within the option content row */\n+  justify-content: center;\n+  padding-inline-end: 20px;\n+}\n+\n+/* ensure feedback occupies the second grid row */\n .mcq-feedback {\n+  grid-column: 1;\n+  grid-row: 2;\n   border-top: none;\n   display: block;\n }"
        },
        {
            "sha": "7361ca527b99008dd70c6aa925dec421ebcef89f",
            "filename": "curriculum/challenges/english/blocks/learn-about-adverbial-phrases/67fe9b40ec6bdb9c8f891e4d.md",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/curriculum%2Fchallenges%2Fenglish%2Fblocks%2Flearn-about-adverbial-phrases%2F67fe9b40ec6bdb9c8f891e4d.md",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/curriculum%2Fchallenges%2Fenglish%2Fblocks%2Flearn-about-adverbial-phrases%2F67fe9b40ec6bdb9c8f891e4d.md",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fchallenges%2Fenglish%2Fblocks%2Flearn-about-adverbial-phrases%2F67fe9b40ec6bdb9c8f891e4d.md?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -3,6 +3,7 @@ id: 67fe9b40ec6bdb9c8f891e4d\n title: Task 19\n challengeType: 19\n dashedName: task-19\n+showSpeakingButton: true\n lang: en-US\n ---\n \n@@ -24,6 +25,10 @@ Which of the following best shows that Sarah agrees with Bob's suggestion?\n \n `I don't think that would help much.`\n \n+### --audio-id--\n+\n+67fe9b-SP1\n+\n ### --feedback--\n \n This shows disagreement, not support.\n@@ -32,6 +37,10 @@ This shows disagreement, not support.\n \n `That sounds like a good approach to me.`\n \n+### --audio-id--\n+\n+67fe9b-SP2\n+\n ## --video-solution--\n \n 2"
        },
        {
            "sha": "ed447a347509dc7294d95640fa119acd5e0388e1",
            "filename": "curriculum/schema/challenge-schema.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/curriculum%2Fschema%2Fchallenge-schema.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/curriculum%2Fschema%2Fchallenge-schema.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fschema%2Fchallenge-schema.js?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -93,7 +93,8 @@ const questionJoi = Joi.object().keys({\n     .items(\n       Joi.object().keys({\n         answer: Joi.string().required(),\n-        feedback: Joi.string().allow(null)\n+        feedback: Joi.string().allow(null),\n+        audioId: Joi.string().allow(null)\n       })\n     )\n     .required()\n@@ -334,6 +335,7 @@ const schema = Joi.object().keys({\n         'array.unique': 'Dialogues must not have overlapping times.'\n       })\n   }),\n+  showSpeakingButton: Joi.bool(),\n   solutions: Joi.array().items(Joi.array().items(fileJoi).min(1)),\n   superBlock: Joi.string().regex(slugWithSlashRE),\n   superOrder: Joi.number(),"
        },
        {
            "sha": "d5a3cd4eab51e3ceb947f3c7bf0b96877b49a24f",
            "filename": "e2e/multiple-choice-question-challenge.spec.ts",
            "status": "added",
            "additions": 114,
            "deletions": 0,
            "changes": 114,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/e2e%2Fmultiple-choice-question-challenge.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/e2e%2Fmultiple-choice-question-challenge.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fmultiple-choice-question-challenge.spec.ts?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -0,0 +1,114 @@\n+import { test, expect } from '@playwright/test';\n+import translations from '../client/i18n/locales/english/translations.json';\n+\n+const pageWithSpeaking =\n+  '/learn/b1-english-for-developers/learn-about-adverbial-phrases/task-19';\n+const pageWithoutSpeaking =\n+  '/learn/full-stack-developer/lecture-what-is-css/what-is-the-basic-anatomy-of-a-css-rule';\n+\n+test.describe('Multiple Choice Question Challenge - With Speaking Modal', () => {\n+  test.beforeEach(async ({ page }) => {\n+    await page.goto(pageWithSpeaking);\n+  });\n+\n+  test('should show the speaking button and open the speaking modal', async ({\n+    page,\n+    browserName\n+  }) => {\n+    test.skip(\n+      browserName === 'firefox',\n+      'Skip on Firefox - speech recognition unsupported'\n+    );\n+\n+    const speakingButtons = page.getByRole('button', {\n+      name: translations['speaking-modal']['speaking-button']\n+    });\n+    const speakingButtonCount = await speakingButtons.count();\n+    expect(speakingButtonCount).toBeGreaterThan(0);\n+\n+    const radioCount = await page.getByRole('radio').count();\n+    expect(speakingButtonCount).toBe(radioCount);\n+\n+    for (let i = 0; i < speakingButtonCount; i++) {\n+      const btn = speakingButtons.nth(i);\n+      await expect(btn).toBeVisible();\n+\n+      const describedBy = await btn.getAttribute('aria-describedby');\n+      expect(describedBy).toBeTruthy();\n+\n+      // Ensure aria-describedby points to an existing element\n+      await expect(page.locator(`#${describedBy}`)).toBeVisible();\n+\n+      await expect(btn).toHaveAttribute(\n+        'aria-label',\n+        translations['speaking-modal']['speaking-button']\n+      );\n+    }\n+\n+    await speakingButtons.first().click();\n+\n+    await expect(page.getByRole('dialog')).toBeVisible();\n+\n+    await expect(\n+      page.getByRole('button', {\n+        name: translations['speaking-modal']['play']\n+      })\n+    ).toBeVisible();\n+    await expect(\n+      page.getByRole('button', {\n+        name: translations['speaking-modal']['record']\n+      })\n+    ).toBeVisible();\n+  });\n+\n+  test('should show not-supported message on Firefox', async ({\n+    page,\n+    browserName\n+  }) => {\n+    test.skip(\n+      browserName !== 'firefox',\n+      'Run only on Firefox to validate unsupported path'\n+    );\n+\n+    const radioCount = await page.getByRole('radio').count();\n+    expect(radioCount).toBeGreaterThan(1);\n+\n+    const speakingButton = page\n+      .getByRole('button', {\n+        name: translations['speaking-modal']['speaking-button']\n+      })\n+      .first();\n+    await expect(speakingButton).toBeVisible();\n+\n+    await speakingButton.click();\n+\n+    await expect(page.getByRole('dialog')).toBeVisible();\n+\n+    await expect(\n+      page.getByText(\n+        translations['speaking-modal']['speech-recognition-not-supported']\n+      )\n+    ).toBeVisible();\n+  });\n+});\n+\n+test.describe('Multiple Choice Question Challenge - Without Speaking Modal', () => {\n+  test.beforeEach(async ({ page }) => {\n+    await page.goto(pageWithoutSpeaking);\n+  });\n+\n+  test('should not show speaking controls on a challenge without speaking', async ({\n+    page\n+  }) => {\n+    const radioCount = await page.getByRole('radio').count();\n+    expect(radioCount).toBeGreaterThan(1);\n+\n+    const speakingButtonsCount = await page\n+      .getByRole('button', {\n+        name: translations['speaking-modal']['speaking-button']\n+      })\n+      .count();\n+\n+    expect(speakingButtonsCount).toBe(0);\n+  });\n+});"
        },
        {
            "sha": "b2fb7068b538797355ec965deed6964c7f532ecd",
            "filename": "pnpm-lock.yaml",
            "status": "modified",
            "additions": 23,
            "deletions": 0,
            "changes": 23,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/pnpm-lock.yaml",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/pnpm-lock.yaml",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/pnpm-lock.yaml?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -360,6 +360,9 @@ importers:\n       '@stripe/stripe-js':\n         specifier: 1.54.2\n         version: 1.54.2\n+      '@types/react-speech-recognition':\n+        specifier: 3.9.6\n+        version: 3.9.6\n       algoliasearch:\n         specifier: 4.22.1\n         version: 4.22.1\n@@ -513,6 +516,9 @@ importers:\n       react-scroll:\n         specifier: 1.9.0\n         version: 1.9.0(react-dom@17.0.2(react@17.0.2))(react@17.0.2)\n+      react-speech-recognition:\n+        specifier: 4.0.1\n+        version: 4.0.1(react@17.0.2)\n       react-spinkit:\n         specifier: 3.0.0\n         version: 3.0.0\n@@ -4785,6 +4791,9 @@ packages:\n   '@types/react-scroll@1.8.10':\n     resolution: {integrity: sha512-RD4Z7grbdNGOKwKnUBKar6zNxqaW3n8m9QSrfvljW+gmkj1GArb8AFBomVr6xMOgHPD3v1uV3BrIf01py57daQ==}\n \n+  '@types/react-speech-recognition@3.9.6':\n+    resolution: {integrity: sha512-cdzwXIZXWyp8zfM2XI7APDW1rZf4Nz73T4SIS2y+cC7zHnZluCdumYKH6HacxgxJH+zemAq2oXbHWXcyW0eT3A==}\n+\n   '@types/react-spinkit@3.0.10':\n     resolution: {integrity: sha512-grNfPdesm/xVJPyohfW752bM8N9kuJUx2yFo0I41mZwF3BuXt4+IV4TwaCPcBtA1V3C5r2NUPyqfEUpNTtWbvA==}\n \n@@ -11833,6 +11842,11 @@ packages:\n     peerDependencies:\n       react: ^16.3.0 || ^17.0.0 || ^18.0.0\n \n+  react-speech-recognition@4.0.1:\n+    resolution: {integrity: sha512-0fIqzLtfY8vuYA6AmJVK7qiabZx0oFKOO+rbiBgFI3COWVGREy0A+gdU16hWXmFebeyrI8JsOLYsWk6WaHUXRw==}\n+    peerDependencies:\n+      react: '>=16.8.0'\n+\n   react-spinkit@3.0.0:\n     resolution: {integrity: sha512-RrfGRPjqxHQiy7quPqhjPynTu0zobgQaZu1QYBMpJJ6pCSRRRK16EZMaxdE6fLVYFRJWpX/eGATWLMoVFFT5uQ==}\n \n@@ -19587,6 +19601,10 @@ snapshots:\n     dependencies:\n       '@types/react': 17.0.83\n \n+  '@types/react-speech-recognition@3.9.6':\n+    dependencies:\n+      '@types/dom-speech-recognition': 0.0.1\n+\n   '@types/react-spinkit@3.0.10':\n     dependencies:\n       '@types/react': 17.0.83\n@@ -28764,6 +28782,11 @@ snapshots:\n     dependencies:\n       react: 17.0.2\n \n+  react-speech-recognition@4.0.1(react@17.0.2):\n+    dependencies:\n+      lodash.debounce: 4.0.8\n+      react: 17.0.2\n+\n   react-spinkit@3.0.0:\n     dependencies:\n       classnames: 2.3.2"
        },
        {
            "sha": "3da5664495a627be304cc543d93c4ec3998a3a10",
            "filename": "shared/config/curriculum.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/shared%2Fconfig%2Fcurriculum.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/shared%2Fconfig%2Fcurriculum.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/shared%2Fconfig%2Fcurriculum.ts?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -53,6 +53,12 @@ export const languageSuperBlocks = [\n   SuperBlocks.A2Chinese\n ];\n \n+// Mapping from superblock to a speech recognition language (BCP-47)\n+export const superBlockToSpeechLang: Partial<Record<SuperBlocks, string>> = {\n+  [SuperBlocks.A2English]: 'en-US',\n+  [SuperBlocks.B1English]: 'en-US'\n+};\n+\n /*\n  * SuperBlockStages.Upcoming = SHOW_UPCOMING_CHANGES === 'true'\n  * 'Upcoming' is for development -> not shown on stag or prod anywhere"
        },
        {
            "sha": "6cd925a1a93d8c89007b2d08a65a9d268d020481",
            "filename": "tools/challenge-parser/parser/__fixtures__/with-video-question-audio.md",
            "status": "added",
            "additions": 55,
            "deletions": 0,
            "changes": 55,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/tools%2Fchallenge-parser%2Fparser%2F__fixtures__%2Fwith-video-question-audio.md",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/tools%2Fchallenge-parser%2Fparser%2F__fixtures__%2Fwith-video-question-audio.md",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2F__fixtures__%2Fwith-video-question-audio.md?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -0,0 +1,55 @@\n+# --description--\n+\n+Paragraph 1\n+\n+```html\n+code example\n+```\n+\n+# --instructions--\n+\n+Paragraph 0\n+\n+```html\n+code example 0\n+```\n+\n+# --questions--\n+\n+## --text--\n+\n+Question line 1\n+\n+```js\n+  var x = 'y';\n+```\n+\n+## --answers--\n+\n+Some inline `code`\n+\n+### --feedback--\n+\n+That is not correct.\n+\n+### --audio-id--\n+\n+answer1-audio\n+\n+---\n+\n+Some *italics*\n+\n+A second answer paragraph.\n+\n+### --audio-id--\n+\n+answer2-audio\n+\n+---\n+\n+<code> code in </code> code tags\n+\n+## --video-solution--\n+\n+3"
        },
        {
            "sha": "e42effd57c164042650f9a193e1973c8291be691",
            "filename": "tools/challenge-parser/parser/__snapshots__/index.acceptance.test.js.snap",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/tools%2Fchallenge-parser%2Fparser%2F__snapshots__%2Findex.acceptance.test.js.snap",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/tools%2Fchallenge-parser%2Fparser%2F__snapshots__%2Findex.acceptance.test.js.snap",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2F__snapshots__%2Findex.acceptance.test.js.snap?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -688,15 +688,18 @@ exports[`challenge parser > should parse video questions 1`] = `\n       \"answers\": [\n         {\n           \"answer\": \"<p>Some inline <code>code</code></p>\",\n+          \"audioId\": null,\n           \"feedback\": \"<p>That is not correct.</p>\",\n         },\n         {\n           \"answer\": \"<p>Some <em>italics</em></p>\n <p>A second answer paragraph.</p>\",\n+          \"audioId\": null,\n           \"feedback\": null,\n         },\n         {\n           \"answer\": \"<p><code> code in </code> code tags</p>\",\n+          \"audioId\": null,\n           \"feedback\": null,\n         },\n       ],"
        },
        {
            "sha": "630048f1a3f010c813675826984ae2f098f9af43",
            "filename": "tools/challenge-parser/parser/plugins/__snapshots__/add-video-question.test.js.snap",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-video-question.test.js.snap",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-video-question.test.js.snap",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2F__snapshots__%2Fadd-video-question.test.js.snap?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -7,15 +7,18 @@ exports[`add-video-question plugin > should match the video snapshot 1`] = `\n       \"answers\": [\n         {\n           \"answer\": \"<p>Some inline <code>code</code></p>\",\n+          \"audioId\": null,\n           \"feedback\": \"<p>That is not correct.</p>\",\n         },\n         {\n           \"answer\": \"<p>Some <em>italics</em></p>\n <p>A second answer paragraph.</p>\",\n+          \"audioId\": null,\n           \"feedback\": null,\n         },\n         {\n           \"answer\": \"<p><code> code in </code> code tags</p>\",\n+          \"audioId\": null,\n           \"feedback\": null,\n         },\n       ],"
        },
        {
            "sha": "a8360019a62cd373c2410c742097dfa135ebc083",
            "filename": "tools/challenge-parser/parser/plugins/add-video-question.js",
            "status": "modified",
            "additions": 39,
            "deletions": 6,
            "changes": 45,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-video-question.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-video-question.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-video-question.js?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -58,23 +58,56 @@ function getAnswers(answersNodes) {\n \n   return answerGroups.map(answerGroup => {\n     const answerTree = root(answerGroup);\n-    const feedback = find(answerTree, { value: '--feedback--' });\n \n-    if (feedback) {\n-      const answerNodes = getAllBefore(answerTree, '--feedback--');\n-      const feedbackNodes = getSection(answerTree, '--feedback--');\n+    const feedbackNodes = getSection(answerTree, '--feedback--');\n+    const audioIdNodes = getSection(answerTree, '--audio-id--');\n+    const hasFeedback = feedbackNodes.length > 0;\n+    const hasAudioId = audioIdNodes.length > 0;\n+\n+    if (hasFeedback || hasAudioId) {\n+      let answerNodes;\n+\n+      if (hasFeedback && hasAudioId) {\n+        const feedbackHeading = find(answerTree, {\n+          type: 'heading',\n+          children: [{ type: 'text', value: '--feedback--' }]\n+        });\n+        const audioIdHeading = find(answerTree, {\n+          type: 'heading',\n+          children: [{ type: 'text', value: '--audio-id--' }]\n+        });\n+\n+        const feedbackIndex = answerTree.children.indexOf(feedbackHeading);\n+        const audioIdIndex = answerTree.children.indexOf(audioIdHeading);\n+        const firstMarker =\n+          feedbackIndex < audioIdIndex ? '--feedback--' : '--audio-id--';\n+        answerNodes = getAllBefore(answerTree, firstMarker);\n+      } else if (hasFeedback) {\n+        answerNodes = getAllBefore(answerTree, '--feedback--');\n+      } else {\n+        answerNodes = getAllBefore(answerTree, '--audio-id--');\n+      }\n \n       if (answerNodes.length < 1) {\n         throw Error('Answer missing');\n       }\n \n+      let extractedAudioId = null;\n+      if (hasAudioId) {\n+        const audioIdContent = getParagraphContent(audioIdNodes[0]);\n+        if (audioIdContent && audioIdContent.trim()) {\n+          extractedAudioId = audioIdContent.trim();\n+        }\n+      }\n+\n       return {\n         answer: mdastToHtml(answerNodes),\n-        feedback: mdastToHtml(feedbackNodes)\n+        feedback: hasFeedback ? mdastToHtml(feedbackNodes) : null,\n+        audioId: extractedAudioId\n       };\n     }\n \n-    return { answer: mdastToHtml(answerGroup), feedback: null };\n+    return { answer: mdastToHtml(answerGroup), feedback: null, audioId: null };\n   });\n }\n "
        },
        {
            "sha": "44e062c84ceff8a243c4770765421334f0377922",
            "filename": "tools/challenge-parser/parser/plugins/add-video-question.test.js",
            "status": "modified",
            "additions": 38,
            "deletions": 4,
            "changes": 42,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-video-question.test.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-video-question.test.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fadd-video-question.test.js?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -3,7 +3,11 @@ import parseFixture from '../__fixtures__/parse-fixture';\n import addVideoQuestion from './add-video-question';\n \n describe('add-video-question plugin', () => {\n-  let simpleAST, videoAST, multipleQuestionAST, videoOutOfOrderAST;\n+  let simpleAST,\n+    videoAST,\n+    multipleQuestionAST,\n+    videoOutOfOrderAST,\n+    videoWithAudioAST;\n   const plugin = addVideoQuestion();\n   let file = { data: {} };\n \n@@ -16,6 +20,7 @@ describe('add-video-question plugin', () => {\n     videoOutOfOrderAST = await parseFixture(\n       'with-video-question-out-of-order.md'\n     );\n+    videoWithAudioAST = await parseFixture('with-video-question-audio.md');\n   });\n \n   beforeEach(() => {\n@@ -43,6 +48,7 @@ describe('add-video-question plugin', () => {\n     expect(question.answers[0]).toHaveProperty('answer');\n     expect(question.answers[0].answer).toBeTruthy();\n     expect(question.answers[0]).toHaveProperty('feedback');\n+    expect(question.answers[0]).toHaveProperty('audioId');\n   };\n \n   it('should generate a questions array from a video challenge AST', () => {\n@@ -76,16 +82,19 @@ describe('add-video-question plugin', () => {\n     expect(testObject.solution).toBe(3);\n     expect(testObject.answers[0]).toStrictEqual({\n       answer: '<p>Some inline <code>code</code></p>',\n-      feedback: '<p>That is not correct.</p>'\n+      feedback: '<p>That is not correct.</p>',\n+      audioId: null\n     });\n     expect(testObject.answers[1]).toStrictEqual({\n       answer: `<p>Some <em>italics</em></p>\n <p>A second answer paragraph.</p>`,\n-      feedback: null\n+      feedback: null,\n+      audioId: null\n     });\n     expect(testObject.answers[2]).toStrictEqual({\n       answer: '<p><code> code in </code> code tags</p>',\n-      feedback: null\n+      feedback: null,\n+      audioId: null\n     });\n   });\n \n@@ -101,6 +110,31 @@ describe('add-video-question plugin', () => {\n     expect(() => plugin(simpleAST)).not.toThrow();\n   });\n \n+  it('should extract audioId from answers when present', () => {\n+    plugin(videoWithAudioAST, file);\n+\n+    const testObject = file.data.questions[0];\n+\n+    expect(testObject.answers[0]).toStrictEqual({\n+      answer: '<p>Some inline <code>code</code></p>',\n+      feedback: '<p>That is not correct.</p>',\n+      audioId: 'answer1-audio'\n+    });\n+\n+    expect(testObject.answers[1]).toStrictEqual({\n+      answer: `<p>Some <em>italics</em></p>\n+<p>A second answer paragraph.</p>`,\n+      feedback: null,\n+      audioId: 'answer2-audio'\n+    });\n+\n+    expect(testObject.answers[2]).toStrictEqual({\n+      answer: '<p><code> code in </code> code tags</p>',\n+      feedback: null,\n+      audioId: null\n+    });\n+  });\n+\n   it('should match the video snapshot', () => {\n     plugin(videoAST, file);\n     expect(file.data).toMatchSnapshot();"
        },
        {
            "sha": "d623d0cc064004fbc05b893a874412789ec8668e",
            "filename": "tools/challenge-parser/parser/plugins/validate-sections.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fvalidate-sections.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fvalidate-sections.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-parser%2Fparser%2Fplugins%2Fvalidate-sections.js?ref=2432f5e9e40cec150a9525df4f33a3ad5f8e8b5e",
            "patch": "@@ -35,6 +35,7 @@ const VALID_MARKERS = [\n   '## --before-user-code--',\n \n   // Level 3\n+  '### --audio-id--',\n   '### --feedback--',\n   '### --question--',\n "
        }
    ],
    "stats": {
        "total": 1470,
        "additions": 1388,
        "deletions": 82
    }
}