{
    "author": "farchettiensis",
    "message": "test(client): add tests to build transcript function (#63822)",
    "sha": "bc46ae9bbf267641160e62b1156fbd5397b9333f",
    "files": [
        {
            "sha": "0228787b491472aa70d62efc2357c4e472930888",
            "filename": "client/src/redux/prop-types.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/bc46ae9bbf267641160e62b1156fbd5397b9333f/client%2Fsrc%2Fredux%2Fprop-types.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/bc46ae9bbf267641160e62b1156fbd5397b9333f/client%2Fsrc%2Fredux%2Fprop-types.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Fprop-types.ts?ref=bc46ae9bbf267641160e62b1156fbd5397b9333f",
            "patch": "@@ -74,7 +74,7 @@ export interface VideoLocaleIds {\n }\n \n // English types for animations\n-interface Dialogue {\n+export interface Dialogue {\n   text: string;\n   align: 'left' | 'right' | 'center';\n }\n@@ -85,7 +85,7 @@ export interface CharacterPosition {\n   z?: number;\n }\n \n-interface SceneCommand {\n+export interface SceneCommand {\n   background?: string;\n   character: string;\n   position?: CharacterPosition;"
        },
        {
            "sha": "bcac67385281f5c0c815a65940431590ed1e78a1",
            "filename": "client/src/templates/Challenges/components/scene/scene-helpers.test.ts",
            "status": "added",
            "additions": 195,
            "deletions": 0,
            "changes": 195,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/bc46ae9bbf267641160e62b1156fbd5397b9333f/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fscene%2Fscene-helpers.test.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/bc46ae9bbf267641160e62b1156fbd5397b9333f/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fscene%2Fscene-helpers.test.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fscene%2Fscene-helpers.test.ts?ref=bc46ae9bbf267641160e62b1156fbd5397b9333f",
            "patch": "@@ -0,0 +1,195 @@\n+import { describe, it, expect } from 'vitest';\n+import { type SceneCommand } from '../../../../redux/prop-types';\n+import { buildTranscript } from './scene-helpers';\n+\n+describe('scene-helpers', () => {\n+  describe('buildTranscript', () => {\n+    it('should return empty string for empty commands array', () => {\n+      const commands: SceneCommand[] = [];\n+      const result = buildTranscript(commands);\n+      expect(result).toBe('');\n+    });\n+\n+    it('should build transcript from single command with dialogue', () => {\n+      const commands: SceneCommand[] = [\n+        {\n+          character: 'Naomi',\n+          startTime: 1,\n+          dialogue: {\n+            text: 'Hello world, I have 5 cats',\n+            align: 'left'\n+          }\n+        }\n+      ];\n+      const result = buildTranscript(commands);\n+      expect(result).toBe(\n+        '\\n<strong>Naomi</strong>: Hello world, I have 5 cats\\n'\n+      );\n+    });\n+\n+    it('should build transcript from multiple commands with dialogue', () => {\n+      const commands: SceneCommand[] = [\n+        {\n+          character: 'Naomi',\n+          startTime: 1,\n+          dialogue: {\n+            text: 'Hello',\n+            align: 'left'\n+          }\n+        },\n+        {\n+          character: 'Quincy',\n+          startTime: 1,\n+          dialogue: {\n+            text: 'Hi there, I found 3 bugs',\n+            align: 'right'\n+          }\n+        },\n+        {\n+          character: 'Naomi',\n+          startTime: 2,\n+          dialogue: {\n+            text: 'How are you?',\n+            align: 'left'\n+          }\n+        }\n+      ];\n+      const result = buildTranscript(commands);\n+      expect(result).toBe(\n+        '\\n<strong>Naomi</strong>: Hello\\n' +\n+          '\\n<strong>Quincy</strong>: Hi there, I found 3 bugs\\n' +\n+          '\\n<strong>Naomi</strong>: How are you?\\n'\n+      );\n+    });\n+\n+    it('should skip commands without dialogue', () => {\n+      const commands: SceneCommand[] = [\n+        {\n+          character: 'Naomi',\n+          startTime: 1,\n+          dialogue: {\n+            text: 'Hello',\n+            align: 'left'\n+          }\n+        },\n+        {\n+          character: 'Quincy',\n+          startTime: 1\n+          // No dialogue\n+        },\n+        {\n+          character: 'Naomi',\n+          startTime: 2,\n+          dialogue: {\n+            text: 'How are you?',\n+            align: 'left'\n+          }\n+        }\n+      ];\n+      const result = buildTranscript(commands);\n+      expect(result).toBe(\n+        '\\n<strong>Naomi</strong>: Hello\\n' +\n+          '\\n<strong>Naomi</strong>: How are you?\\n'\n+      );\n+    });\n+\n+    it('should handle dialogue with special characters', () => {\n+      const commands: SceneCommand[] = [\n+        {\n+          character: 'Naomi',\n+          startTime: 1,\n+          dialogue: {\n+            text: 'He said \"I love TypeScript!\" & she replied, \\'I prefer Ruby! #ruby #rubyonrails\\'',\n+            align: 'left'\n+          }\n+        }\n+      ];\n+      const result = buildTranscript(commands);\n+      expect(result).toBe(\n+        '\\n<strong>Naomi</strong>: He said \"I love TypeScript!\" & she replied, \\'I prefer Ruby! #ruby #rubyonrails\\'\\n'\n+      );\n+    });\n+\n+    it('should handle empty dialogue text', () => {\n+      const commands: SceneCommand[] = [\n+        {\n+          character: 'Naomi',\n+          startTime: 1,\n+          dialogue: {\n+            text: '',\n+            align: 'left'\n+          }\n+        }\n+      ];\n+      const result = buildTranscript(commands);\n+      expect(result).toBe('\\n<strong>Naomi</strong>: \\n');\n+    });\n+\n+    it('should handle dialogue with newlines', () => {\n+      const commands: SceneCommand[] = [\n+        {\n+          character: 'Naomi',\n+          startTime: 1,\n+          dialogue: {\n+            text: 'Hello\\nworld',\n+            align: 'left'\n+          }\n+        }\n+      ];\n+      const result = buildTranscript(commands);\n+      expect(result).toBe('\\n<strong>Naomi</strong>: Hello\\nworld\\n');\n+    });\n+\n+    it('should handle multiple consecutive commands from same character', () => {\n+      const commands: SceneCommand[] = [\n+        {\n+          character: 'Naomi',\n+          startTime: 1,\n+          dialogue: {\n+            text: 'First line',\n+            align: 'left'\n+          }\n+        },\n+        {\n+          character: 'Naomi',\n+          startTime: 1,\n+          dialogue: {\n+            text: 'Second line',\n+            align: 'left'\n+          }\n+        },\n+        {\n+          character: 'Naomi',\n+          startTime: 2,\n+          dialogue: {\n+            text: 'Third line',\n+            align: 'left'\n+          }\n+        }\n+      ];\n+      const result = buildTranscript(commands);\n+      expect(result).toBe(\n+        '\\n<strong>Naomi</strong>: First line\\n' +\n+          '\\n<strong>Naomi</strong>: Second line\\n' +\n+          '\\n<strong>Naomi</strong>: Third line\\n'\n+      );\n+    });\n+\n+    it('should preserve HTML content', () => {\n+      const commands: SceneCommand[] = [\n+        {\n+          character: 'Naomi',\n+          startTime: 1,\n+          dialogue: {\n+            text: 'Use <div> and <span> tags',\n+            align: 'left'\n+          }\n+        }\n+      ];\n+      const result = buildTranscript(commands);\n+      expect(result).toBe(\n+        '\\n<strong>Naomi</strong>: Use <div> and <span> tags\\n'\n+      );\n+    });\n+  });\n+});"
        },
        {
            "sha": "6902d6e9ea719c1151c36da57e9ecf6567bd81c9",
            "filename": "client/src/templates/Challenges/components/scene/scene-helpers.ts",
            "status": "added",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/bc46ae9bbf267641160e62b1156fbd5397b9333f/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fscene%2Fscene-helpers.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/bc46ae9bbf267641160e62b1156fbd5397b9333f/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fscene%2Fscene-helpers.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fscene%2Fscene-helpers.ts?ref=bc46ae9bbf267641160e62b1156fbd5397b9333f",
            "patch": "@@ -0,0 +1,20 @@\n+import { type SceneCommand } from '../../../../redux/prop-types';\n+\n+export const buildTranscript = (commands: SceneCommand[]): string => {\n+  let transcriptText = '';\n+  commands.forEach(command => {\n+    if (command.character && command.dialogue && command.startTime) {\n+      transcriptText =\n+        transcriptText +\n+        '\\n' +\n+        '<strong>' +\n+        command.character +\n+        '</strong>:' +\n+        ' ' +\n+        command.dialogue.text +\n+        '\\n';\n+    }\n+  });\n+\n+  return transcriptText;\n+};"
        },
        {
            "sha": "f513f4c642844e26505d4ee0b45aeef9b7bfb984",
            "filename": "client/src/templates/Challenges/components/scene/scene.tsx",
            "status": "modified",
            "additions": 2,
            "deletions": 20,
            "changes": 22,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/bc46ae9bbf267641160e62b1156fbd5397b9333f/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fscene%2Fscene.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/bc46ae9bbf267641160e62b1156fbd5397b9333f/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fscene%2Fscene.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fscene%2Fscene.tsx?ref=bc46ae9bbf267641160e62b1156fbd5397b9333f",
            "patch": "@@ -17,6 +17,7 @@ import ChallengeTranscript from '../challenge-transcript';\n import { sounds, backgrounds, characterAssets } from './scene-assets';\n import Character from './character';\n import { SceneSubject } from './scene-subject';\n+import { buildTranscript } from './scene-helpers';\n \n import './scene.css';\n \n@@ -168,25 +169,6 @@ export function Scene({\n     setSceneIsReady(true);\n   };\n \n-  const buildTranscript = () => {\n-    let transcriptText = '';\n-    commands.forEach(command => {\n-      if (command.character && command.dialogue && command.startTime) {\n-        transcriptText =\n-          transcriptText +\n-          '\\n' +\n-          '<strong>' +\n-          command.character +\n-          '</strong>:' +\n-          ' ' +\n-          command.dialogue.text +\n-          '\\n';\n-      }\n-    });\n-\n-    return transcriptText;\n-  };\n-\n   const handlePlay = useCallback(() => {\n     const pausedAt = pausedAtRef.current;\n     const updateCurrentTime = () => {\n@@ -369,7 +351,7 @@ export function Scene({\n     };\n   }, []);\n \n-  const transcriptText = buildTranscript();\n+  const transcriptText = buildTranscript(commands);\n   return (\n     <Col lg={10} lgOffset={1} md={10} mdOffset={1}>\n       <div"
        }
    ],
    "stats": {
        "total": 241,
        "additions": 219,
        "deletions": 22
    }
}