{
    "author": "gikf",
    "message": "fix(curriculum): granular chart tests in budget app (#56785)\n\nCo-authored-by: Ilenia M <nethleen@gmail.com>\r\nCo-authored-by: Dario-DC <105294544+Dario-DC@users.noreply.github.com>",
    "sha": "6b5baa15aa0867662107aa1a7bb2ff5665e4d114",
    "files": [
        {
            "sha": "93fa34c3584f1f84932899cff8bcdc235ce52956",
            "filename": "curriculum/challenges/english/07-scientific-computing-with-python/build-a-budget-app-project/budget-app.md",
            "status": "modified",
            "additions": 352,
            "deletions": 0,
            "changes": 352,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/6b5baa15aa0867662107aa1a7bb2ff5665e4d114/curriculum%2Fchallenges%2Fenglish%2F07-scientific-computing-with-python%2Fbuild-a-budget-app-project%2Fbudget-app.md",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/6b5baa15aa0867662107aa1a7bb2ff5665e4d114/curriculum%2Fchallenges%2Fenglish%2F07-scientific-computing-with-python%2Fbuild-a-budget-app-project%2Fbudget-app.md",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fchallenges%2Fenglish%2F07-scientific-computing-with-python%2Fbuild-a-budget-app-project%2Fbudget-app.md?ref=6b5baa15aa0867662107aa1a7bb2ff5665e4d114",
            "patch": "@@ -711,6 +711,358 @@ t.result.wasSuccessful()\n })\n ```\n \n+Title at the top of `create_spend_chart` chart should say `Percentage spent by category`.\n+\n+```js\n+({\n+  test: () => {\n+    pyodide.FS.writeFile('/home/pyodide/budget.py', code);\n+    pyodide.FS.writeFile('/home/pyodide/test_module.py',`\n+import unittest\n+import budget\n+from importlib import reload\n+\n+reload(budget)\n+class UnitTests(unittest.TestCase):\n+    maxDiff = None\n+    def setUp(self):\n+        self.food = budget.Category(\"Food\")\n+\n+    def test_create_spend_chart(self):\n+        self.food.deposit(900, \"deposit\")\n+        self.food.withdraw(105.55)\n+        chart = budget.create_spend_chart([self.food])\n+        expected = \"Percentage spent by category\"\n+        self.assertEqual(chart.split(\"\\\\n\")[0], expected, \"Chart should have correct title.\")\n+`);\n+\n+    const testCode = `\n+from unittest import main\n+from importlib import reload\n+import test_module\n+reload(test_module)\n+t = main(module='test_module', exit=False)\n+t.result.wasSuccessful()\n+`;\n+    const out = runPython(testCode);\n+    assert(out);\n+  }\n+})\n+```\n+\n+`create_spend_chart` chart should have correct percentages down the left side.\n+\n+```js\n+({\n+  test: () => {\n+    pyodide.FS.writeFile('/home/pyodide/budget.py', code);\n+    pyodide.FS.writeFile('/home/pyodide/test_module.py',`\n+import unittest\n+import budget\n+from importlib import reload\n+\n+reload(budget)\n+class UnitTests(unittest.TestCase):\n+    maxDiff = None\n+    def setUp(self):\n+        self.food = budget.Category(\"Food\")\n+\n+    def test_create_spend_chart(self):\n+        self.food.deposit(900, \"deposit\")\n+        self.food.withdraw(105.55)\n+        chart = budget.create_spend_chart([self.food])\n+        percentages = [\"100|\", \" 90|\", \" 80|\", \" 70|\", \" 60|\", \" 50|\", \" 40|\", \" 30|\", \" 20|\", \" 10|\", \"  0|\"]\n+        for line, percent in zip(chart.split(\"\\\\n\")[1:], percentages):\n+           self.assertTrue(line.startswith(percent), \"Chart correct percentages in the vertical axis.\")\n+`);\n+\n+    const testCode = `\n+from unittest import main\n+from importlib import reload\n+import test_module\n+reload(test_module)\n+t = main(module='test_module', exit=False)\n+t.result.wasSuccessful()\n+`;\n+    const out = runPython(testCode);\n+    assert(out);\n+  }\n+})\n+```\n+\n+The height of each bar on the `create_spend_chart` chart should be rounded down to the nearest 10.\n+\n+```js\n+({\n+  test: () => {\n+    pyodide.FS.writeFile('/home/pyodide/budget.py', code);\n+    pyodide.FS.writeFile('/home/pyodide/test_module.py',`\n+import unittest\n+import budget\n+from importlib import reload\n+\n+reload(budget)\n+class UnitTests(unittest.TestCase):\n+    maxDiff = None\n+    def setUp(self):\n+        self.food = budget.Category(\"Food\")\n+        self.entertainment = budget.Category(\"Entertainment\")\n+        self.business = budget.Category(\"Business\")\n+        self.food.deposit(900, \"deposit\")\n+        self.entertainment.deposit(900, \"deposit\")\n+        self.business.deposit(900, \"deposit\")\n+        self.food.withdraw(78)\n+        self.entertainment.withdraw(22)\n+        self.business.withdraw(8)\n+\n+    def test_create_spend_chart_rounding_close_to_upper_and_lower_ten(self):\n+        chart_lines = budget.create_spend_chart([self.food, self.entertainment]).split(\"\\\\n\")[1:12]\n+        result_lines = '''100|\n+ 90|\n+ 80|\n+ 70| o\n+ 60| o\n+ 50| o\n+ 40| o\n+ 30| o\n+ 20| o  o\n+ 10| o  o\n+  0| o  o'''.split(\"\\\\n\")\n+\n+        self.assertEqual(len(chart_lines), len(result_lines), \"Lines missing in chart.\")\n+        for actual, expected in zip(chart_lines, result_lines):\n+            self.assertTrue(actual.startswith(expected), \"Expected different rounding of bars.\")\n+\n+\n+    def test_create_spend_chart_rounding_single_digit(self):\n+        chart_lines = budget.create_spend_chart([self.business, self.food, self.entertainment]).split(\"\\\\n\")[1:12]\n+        result_lines = '''100|\n+ 90|\n+ 80|\n+ 70|    o\n+ 60|    o\n+ 50|    o\n+ 40|    o\n+ 30|    o\n+ 20|    o  o\n+ 10|    o  o\n+  0| o  o  o'''.split(\"\\\\n\")\n+\n+        self.assertEqual(len(chart_lines), len(result_lines), \"Lines missing in chart.\")\n+        for actual, expected in zip(chart_lines, result_lines):\n+            self.assertTrue(actual.startswith(expected), \"Expected different rounding of bars.\")\n+`);\n+\n+    const testCode = `\n+from unittest import main\n+from importlib import reload\n+import test_module\n+reload(test_module)\n+t = main(module='test_module', exit=False)\n+t.result.wasSuccessful()\n+`;\n+    const out = runPython(testCode);\n+    assert(out);\n+  }\n+})\n+```\n+\n+Each line in `create_spend_chart` chart should have the same length. Bars for different categories should be separated by two spaces, with additional two spaces after the final bar.\n+\n+```js\n+({\n+  test: () => {\n+    pyodide.FS.writeFile('/home/pyodide/budget.py', code);\n+    pyodide.FS.writeFile('/home/pyodide/test_module.py',`\n+import unittest\n+import budget\n+from importlib import reload\n+\n+reload(budget)\n+class UnitTests(unittest.TestCase):\n+    maxDiff = None\n+    def setUp(self):\n+        self.food = budget.Category(\"Food\")\n+        self.entertainment = budget.Category(\"Entertainment\")\n+        self.business = budget.Category(\"Business\")\n+        self.food.deposit(900, \"deposit\")\n+        self.entertainment.deposit(900, \"deposit\")\n+        self.business.deposit(900, \"deposit\")\n+        self.food.withdraw(78)\n+        self.entertainment.withdraw(22)\n+        self.business.withdraw(8)\n+\n+\n+    def test_create_spend_chart_chart_lines_have_expected_length(self):\n+        chart_categories = [[self.food, self.entertainment], [self.business, self.food, self.entertainment]]\n+\n+        expected_lengths = [len(line) for line in [\"  0| o  o  \", \"  0| o  o  o  \"]]\n+        expected_chart_lines = 11\n+\n+        for categories, expected_length in zip(chart_categories, expected_lengths):\n+            chart_lines = budget.create_spend_chart(categories).split(\"\\\\n\")[1:12]\n+\n+            self.assertEqual(len(chart_lines), expected_chart_lines, \"Lines missing in chart.\")\n+            for actual in chart_lines:\n+                self.assertEqual(len(actual), expected_length, \"Expected different length of the chart line. Check that all spacing is exact.\")\n+`);\n+    const testCode = `\n+from unittest import main\n+from importlib import reload\n+import test_module\n+reload(test_module)\n+t = main(module='test_module', exit=False)\n+t.result.wasSuccessful()\n+`;\n+    const out = runPython(testCode);\n+    assert(out);\n+  }\n+})\n+```\n+\n+`create_spend_chart` should correctly show horizontal line below the bars. Using three `-` characters for each category, and in total going two characters past the final bar.\n+\n+```js\n+({\n+  test: () => {\n+    pyodide.FS.writeFile('/home/pyodide/budget.py', code);\n+    pyodide.FS.writeFile('/home/pyodide/test_module.py',`\n+import unittest\n+import budget\n+from importlib import reload\n+\n+reload(budget)\n+class UnitTests(unittest.TestCase):\n+    maxDiff = None\n+    def setUp(self):\n+        self.food = budget.Category(\"Food\")\n+        self.entertainment = budget.Category(\"Entertainment\")\n+        self.business = budget.Category(\"Business\")\n+        self.food.deposit(900, \"deposit\")\n+        self.entertainment.deposit(900, \"deposit\")\n+        self.business.deposit(900, \"deposit\")\n+        self.food.withdraw(105.55)\n+        self.entertainment.withdraw(33.40)\n+        self.business.withdraw(10.99)\n+\n+    def test_create_spend_chart_horizontal_bar(self):\n+        chart_categories = [[self.business], [self.business, self.food], [self.business, self.food, self.entertainment]]\n+        horizontal_lines = [\"    ----\", \"    -------\", \"    ----------\"]\n+        for categories, expected in zip(chart_categories, horizontal_lines):\n+            actual = budget.create_spend_chart(categories).split(\"\\\\n\")[12]\n+            self.assertEqual(actual, expected, \"Expected different horizontal bar. Check that all spacing is exact.\")\n+`);\n+\n+    const testCode = `\n+from unittest import main\n+from importlib import reload\n+import test_module\n+reload(test_module)\n+t = main(module='test_module', exit=False)\n+t.result.wasSuccessful()\n+`;\n+    const out = runPython(testCode);\n+    assert(out);\n+  }\n+})\n+```\n+\n+`create_spend_chart` chart should not have new line character at the end.\n+\n+```js\n+({\n+  test: () => {\n+    pyodide.FS.writeFile('/home/pyodide/budget.py', code);\n+    pyodide.FS.writeFile('/home/pyodide/test_module.py',`\n+import unittest\n+import budget\n+from importlib import reload\n+\n+reload(budget)\n+class UnitTests(unittest.TestCase):\n+    maxDiff = None\n+    def setUp(self):\n+        self.food = budget.Category(\"Food\")\n+        self.entertainment = budget.Category(\"Entertainment\")\n+        self.business = budget.Category(\"Business\")\n+\n+    def test_create_spend_chart_no_ending_new_line(self):\n+        self.food.deposit(900, \"deposit\")\n+        self.entertainment.deposit(900, \"deposit\")\n+        self.business.deposit(900, \"deposit\")\n+        self.food.withdraw(105.55)\n+        self.entertainment.withdraw(33.40)\n+        self.business.withdraw(10.99)\n+        actual = budget.create_spend_chart([self.business, self.food, self.entertainment])\n+        self.assertFalse(actual.endswith(\"\\\\n\"), \"Expected chart to not have new line at the end.\")\n+`);\n+\n+    const testCode = `\n+from unittest import main\n+from importlib import reload\n+import test_module\n+reload(test_module)\n+t = main(module='test_module', exit=False)\n+t.result.wasSuccessful()\n+`;\n+    const out = runPython(testCode);\n+    assert(out);\n+  }\n+})\n+```\n+\n+`create_spend_chart` chart should have each category name written vertically below the bar. Each line should have the same length, each category should be separated by two spaces, with additional two spaces after the final category.\n+\n+```js\n+({\n+  test: () => {\n+    pyodide.FS.writeFile('/home/pyodide/budget.py', code);\n+    pyodide.FS.writeFile('/home/pyodide/test_module.py',`\n+import unittest\n+import budget\n+from importlib import reload\n+\n+reload(budget)\n+class UnitTests(unittest.TestCase):\n+    maxDiff = None\n+    def setUp(self):\n+        self.food = budget.Category(\"Food\")\n+        self.entertainment = budget.Category(\"Entertainment\")\n+        self.business = budget.Category(\"Business\")\n+        self.food.deposit(900, \"deposit\")\n+        self.entertainment.deposit(900, \"deposit\")\n+        self.business.deposit(900, \"deposit\")\n+        self.food.withdraw(105.55)\n+        self.entertainment.withdraw(33.40)\n+        self.business.withdraw(10.99)\n+\n+    def test_create_spend_chart_names_two_categories(self):\n+        chart = budget.create_spend_chart([self.food, self.entertainment])\n+        actual = \"\\\\n\".join(chart.split(\"\\\\n\")[13:]).rstrip(\"\\\\n\")\n+        expected = \"     F  E  \\\\n     o  n  \\\\n     o  t  \\\\n     d  e  \\\\n        r  \\\\n        t  \\\\n        a  \\\\n        i  \\\\n        n  \\\\n        m  \\\\n        e  \\\\n        n  \\\\n        t  \"\n+        self.assertEqual(actual, expected, \"Expected different category names written vertically below the bar. Check that all spacing is exact.\")\n+\n+    def test_create_spend_chart_names_three_categories(self):\n+        chart = budget.create_spend_chart([self.business, self.food, self.entertainment])\n+        actual = \"\\\\n\".join(chart.split(\"\\\\n\")[13:]).rstrip(\"\\\\n\")\n+        expected = \"     B  F  E  \\\\n     u  o  n  \\\\n     s  o  t  \\\\n     i  d  e  \\\\n     n     r  \\\\n     e     t  \\\\n     s     a  \\\\n     s     i  \\\\n           n  \\\\n           m  \\\\n           e  \\\\n           n  \\\\n           t  \"\n+        self.assertEqual(actual, expected, \"Expected different category names written vertically below the bar. Check that all spacing is exact.\")\n+`);\n+\n+    const testCode = `\n+from unittest import main\n+from importlib import reload\n+import test_module\n+reload(test_module)\n+t = main(module='test_module', exit=False)\n+t.result.wasSuccessful()\n+`;\n+    const out = runPython(testCode);\n+    assert(out);\n+  }\n+})\n+```\n+\n `create_spend_chart` should print a different chart representation. Check that all spacing is exact. Open your browser console with F12 for more details.\n \n ```js"
        }
    ],
    "stats": {
        "total": 352,
        "additions": 352,
        "deletions": 0
    }
}