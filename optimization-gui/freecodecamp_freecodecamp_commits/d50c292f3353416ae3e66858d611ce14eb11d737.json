{
    "author": "gikf",
    "message": "fix(curriculum): prevent hardcoding cash register (#55066)",
    "sha": "d50c292f3353416ae3e66858d611ce14eb11d737",
    "files": [
        {
            "sha": "ffd58941849eceab4a2db10a70f7bea3969c5447",
            "filename": "curriculum/challenges/english/15-javascript-algorithms-and-data-structures-22/build-a-cash-register-project/build-a-cash-register.md",
            "status": "modified",
            "additions": 491,
            "deletions": 93,
            "changes": 584,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/d50c292f3353416ae3e66858d611ce14eb11d737/curriculum%2Fchallenges%2Fenglish%2F15-javascript-algorithms-and-data-structures-22%2Fbuild-a-cash-register-project%2Fbuild-a-cash-register.md",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/d50c292f3353416ae3e66858d611ce14eb11d737/curriculum%2Fchallenges%2Fenglish%2F15-javascript-algorithms-and-data-structures-22%2Fbuild-a-cash-register-project%2Fbuild-a-cash-register.md",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fchallenges%2Fenglish%2F15-javascript-algorithms-and-data-structures-22%2Fbuild-a-cash-register-project%2Fbuild-a-cash-register.md?ref=d50c292f3353416ae3e66858d611ce14eb11d737",
            "patch": "@@ -95,24 +95,67 @@ const el = document.getElementById('purchase-btn');\n assert.strictEqual(el?.nodeName?.toLowerCase(), 'button');\n ```\n \n-When the value in the `#cash` element is less than `price`, an alert should appear with the text `\"Customer does not have enough money to purchase the item\"`.\n+When `price` is `20` and the value in the `#cash` element is `10`, an alert should appear with the text `\"Customer does not have enough money to purchase the item\"`.\n \n ```js\n const cashInput = document.getElementById('cash');\n const purchaseBtn = document.getElementById('purchase-btn');\n let alertMessage;\n-window.alert = (message) => alertMessage = message; // Override alert and store message\n+window.alert = message => (alertMessage = message); // Override alert and store message\n // set price and customer cash\n price = 20;\n cashInput.value = '10';\n cid = [['PENNY', 1.01], ['NICKEL', 2.05], ['DIME', 3.1], ['QUARTER', 4.25], ['ONE', 90], ['FIVE', 55], ['TEN', 20], ['TWENTY', 60], ['ONE HUNDRED', 100]];\n \n cashInput.dispatchEvent(new Event('change'));\n purchaseBtn.click();\n-assert.strictEqual(alertMessage.trim().replace(/[.,?!]+$/g, '').toLowerCase(), 'customer does not have enough money to purchase the item');\n+assert.strictEqual(\n+  alertMessage\n+    .trim()\n+    .replace(/[.,?!]+$/g, '')\n+    .toLowerCase(),\n+  'customer does not have enough money to purchase the item'\n+);\n ```\n \n-When the value in the `#cash` element is equal to `price`, the value in the `#change-due` element should be `\"No change due - customer paid with exact cash\"`.\n+When the value in the `#cash` element is less than `price`, an alert should appear with the text `\"Customer does not have enough money to purchase the item\"`.\n+\n+```js\n+const cashInput = document.getElementById('cash');\n+const purchaseBtn = document.getElementById('purchase-btn');\n+let alertMessage;\n+window.alert = message => (alertMessage = message);\n+\n+// Min $5.00, max $100.00, changes by $0.01, in cents.\n+const randomPrice = _randomNumber(9500) + 500;\n+// Min $1.00, max price - $1, changes by $0.01, in cents.\n+const randomCash = _randomNumber(randomPrice - 200) + 100;\n+price = randomPrice / 100;\n+cashInput.value = `${randomCash / 100}`;\n+cid = [\n+  ['PENNY', 1.01],\n+  ['NICKEL', 2.05],\n+  ['DIME', 3.1],\n+  ['QUARTER', 4.25],\n+  ['ONE', 90],\n+  ['FIVE', 55],\n+  ['TEN', 20],\n+  ['TWENTY', 60],\n+  ['ONE HUNDRED', 100]\n+];\n+\n+cashInput.dispatchEvent(new Event('change'));\n+purchaseBtn.click();\n+assert.strictEqual(\n+  alertMessage\n+    .trim()\n+    .replace(/[.,?!]+$/g, '')\n+    .toLowerCase(),\n+  'customer does not have enough money to purchase the item'\n+);\n+```\n+\n+When `price` is `11.95` and the value in the `#cash` element is `11.95`, the value in the `#change-due` element should be `\"No change due - customer paid with exact cash\"`.\n \n ```js\n const cashInput = document.getElementById('cash');\n@@ -125,7 +168,47 @@ cid = [['PENNY', 1.01], ['NICKEL', 2.05], ['DIME', 3.1], ['QUARTER', 4.25], ['ON\n \n cashInput.dispatchEvent(new Event('change'));\n purchaseBtn.click();\n-assert.strictEqual(changeDueDiv.innerText.trim().replace(/[.,?!]+$/g, '').toLowerCase(), 'no change due - customer paid with exact cash');\n+assert.strictEqual(\n+  changeDueDiv.innerText\n+    .trim()\n+    .replace(/[.,?!]+$/g, '')\n+    .toLowerCase(),\n+  'no change due - customer paid with exact cash'\n+);\n+```\n+\n+When the value in the `#cash` element is equal to `price`, the value in the `#change-due` element should be `\"No change due - customer paid with exact cash\"`.\n+\n+```js\n+const cashInput = document.getElementById('cash');\n+const purchaseBtn = document.getElementById('purchase-btn');\n+const changeDueDiv = document.getElementById('change-due');\n+\n+// Min $1.00, max $50.00, changes by $0.01, in cents.\n+const randomPrice = _randomNumber(4900) + 100;\n+price = randomPrice / 100;\n+cashInput.value = `${price}`;\n+cid = [\n+  ['PENNY', 1.01],\n+  ['NICKEL', 2.05],\n+  ['DIME', 3.1],\n+  ['QUARTER', 4.25],\n+  ['ONE', 90],\n+  ['FIVE', 55],\n+  ['TEN', 20],\n+  ['TWENTY', 60],\n+  ['ONE HUNDRED', 100]\n+];\n+\n+cashInput.dispatchEvent(new Event('change'));\n+purchaseBtn.click();\n+assert.strictEqual(\n+  changeDueDiv.innerText\n+    .trim()\n+    .replace(/[.,?!]+$/g, '')\n+    .toLowerCase(),\n+  'no change due - customer paid with exact cash'\n+);\n ```\n \n When `price` is `19.5`, the value in the `#cash` element is `20`, `cid` is `[[\"PENNY\", 1.01], [\"NICKEL\", 2.05], [\"DIME\", 3.1], [\"QUARTER\", 4.25], [\"ONE\", 90], [\"FIVE\", 55], [\"TEN\", 20], [\"TWENTY\", 60], [\"ONE HUNDRED\", 100]]`, and the `#purchase-btn` element is clicked, the value in the `#change-due` element should be `\"Status: OPEN QUARTER: $0.5\"`.\n@@ -137,15 +220,34 @@ const changeDueDiv = document.getElementById('change-due');\n // set price, customer cash, and cid\n price = 19.5;\n cashInput.value = 20;\n-cid = [['PENNY', 1.01], ['NICKEL', 2.05], ['DIME', 3.1], ['QUARTER', 4.25], ['ONE', 90], ['FIVE', 55], ['TEN', 20], ['TWENTY', 60], ['ONE HUNDRED', 100]];\n+cid = [\n+  ['PENNY', 1.01],\n+  ['NICKEL', 2.05],\n+  ['DIME', 3.1],\n+  ['QUARTER', 4.25],\n+  ['ONE', 90],\n+  ['FIVE', 55],\n+  ['TEN', 20],\n+  ['TWENTY', 60],\n+  ['ONE HUNDRED', 100]\n+];\n \n const expected = ['Status: OPEN', 'QUARTER: $0.5'];\n cashInput.dispatchEvent(new Event('change'));\n purchaseBtn.click();\n const result = changeDueDiv.innerText.trim().toLowerCase();\n assert.isTrue(expected.every(str => result.includes(str.toLowerCase())));\n-const notExpected = [/PENNY/, /NICKEL/, /DIME/, /ONE [^H]/, /FIVE/, /TEN/, /TWENTY/, /ONE HUNDRED/];\n-assert.isTrue(!notExpected.some(regex => result.match(new RegExp(regex, 'i'))))\n+const notExpected = [\n+  /PENNY/,\n+  /NICKEL/,\n+  /DIME/,\n+  /ONE [^H]/,\n+  /FIVE/,\n+  /TEN/,\n+  /TWENTY/,\n+  /ONE HUNDRED/\n+];\n+assert.isTrue(!notExpected.some(regex => result.match(new RegExp(regex, 'i'))));\n ```\n \n When `price` is `3.26`, the value in the `#cash` element is `100`, `cid` is `[[\"PENNY\", 1.01], [\"NICKEL\", 2.05], [\"DIME\", 3.1], [\"QUARTER\", 4.25], [\"ONE\", 90], [\"FIVE\", 55], [\"TEN\", 20], [\"TWENTY\", 60], [\"ONE HUNDRED\", 100]]`, and the `#purchase-btn` element is clicked, the value in the `#change-due` element should be `\"Status: OPEN TWENTY: $60 TEN: $20 FIVE: $15 ONE: $1 QUARTER: $0.5 DIME: $0.2 PENNY: $0.04\"`.\n@@ -157,15 +259,88 @@ const changeDueDiv = document.getElementById('change-due');\n // set price, customer cash, and cid\n price = 3.26;\n cashInput.value = 100;\n-cid = [['PENNY', 1.01], ['NICKEL', 2.05], ['DIME', 3.1], ['QUARTER', 4.25], ['ONE', 90], ['FIVE', 55], ['TEN', 20], ['TWENTY', 60], ['ONE HUNDRED', 100]];\n+cid = [\n+  ['PENNY', 1.01],\n+  ['NICKEL', 2.05],\n+  ['DIME', 3.1],\n+  ['QUARTER', 4.25],\n+  ['ONE', 90],\n+  ['FIVE', 55],\n+  ['TEN', 20],\n+  ['TWENTY', 60],\n+  ['ONE HUNDRED', 100]\n+];\n \n-const expected = ['Status: OPEN', 'TWENTY: $60', 'TEN: $20', 'FIVE: $15', 'ONE: $1', 'QUARTER: $0.5', 'DIME: $0.2', 'PENNY: $0.04'];\n+const expected = [\n+  'Status: OPEN',\n+  'TWENTY: $60',\n+  'TEN: $20',\n+  'FIVE: $15',\n+  'ONE: $1',\n+  'QUARTER: $0.5',\n+  'DIME: $0.2',\n+  'PENNY: $0.04'\n+];\n cashInput.dispatchEvent(new Event('change'));\n purchaseBtn.click();\n const result = changeDueDiv.innerText.trim().toLowerCase();\n assert.isTrue(expected.every(str => result.includes(str.toLowerCase())));\n const notExpected = [/NICKEL/];\n-assert.isTrue(!notExpected.some(regex => result.match(new RegExp(regex, 'i'))))\n+assert.isTrue(!notExpected.some(regex => result.match(new RegExp(regex, 'i'))));\n+```\n+\n+When `price` is less than the value in the `#cash` element, total cash in drawer `cid` is greater than the change due, individual denomination amounts allows for returning change due, and the `#purchase-btn` element is clicked, the value in the `#change-due` element should be `\"Status: OPEN\"` with required change due in coins and bills sorted in highest to lowest order.\n+\n+```js\n+const cashInput = document.getElementById('cash');\n+const purchaseBtn = document.getElementById('purchase-btn');\n+const changeDueDiv = document.getElementById('change-due');\n+\n+// Min $50, max $100, changes by $10, in cents.\n+const randomCash = _randomNumber(5) * 1000 + 5000;\n+// Min $5.00, max $30.00, changes by $0.01, in cents.\n+const randomChange = _randomNumber(2500) + 500;\n+price = (randomCash - randomChange) / 100;\n+cashInput.value = `${randomCash / 100}`;\n+\n+let changeLeft = randomChange;\n+const _expectedChangeDue = [];\n+const _cashInDrawer = [];\n+for (const [denominationName, denomination] of _money) {\n+  const drawerCount = _randomNumber(15);\n+  _cashInDrawer.push([denominationName, (denomination * drawerCount) / 100]);\n+  if (denomination <= changeLeft && drawerCount > 0) {\n+    const maxCountInChange = Math.floor(changeLeft / denomination);\n+    const actualCount = Math.min(drawerCount, maxCountInChange);\n+    const amountInChange = actualCount * denomination;\n+    _expectedChangeDue.push([denominationName, amountInChange / 100]);\n+    changeLeft -= amountInChange;\n+  }\n+}\n+\n+// At least changeLeft is needed in pennies, to make returning change due possible.\n+const drawerCount = _randomNumber(100) + changeLeft;\n+_cashInDrawer.push(['PENNY', drawerCount / 100]);\n+if (changeLeft > 0) {\n+  _expectedChangeDue.push(['PENNY', changeLeft / 100]);\n+}\n+\n+cid = _cashInDrawer.reverse();\n+const expected = [\n+  'Status: OPEN',\n+  ..._expectedChangeDue\n+    .reverse()\n+    .map(([denominationName, amount]) => `${denominationName}: $${amount}`)\n+];\n+const notExpected = _denomRegexes.filter(\n+  regex => !expected.some(change => change.match(new RegExp(regex, 'i')))\n+);\n+\n+cashInput.dispatchEvent(new Event('change'));\n+purchaseBtn.click();\n+const result = changeDueDiv.innerText.trim().toLowerCase();\n+assert.isTrue(expected.every(str => result.includes(str.toLowerCase())));\n+assert.isTrue(!notExpected.some(regex => result.match(new RegExp(regex, 'i'))));\n ```\n \n When `price` is `19.5`, the value in the `#cash` element is `20`, `cid` is `[[\"PENNY\", 0.01], [\"NICKEL\", 0], [\"DIME\", 0], [\"QUARTER\", 0], [\"ONE\", 0], [\"FIVE\", 0], [\"TEN\", 0], [\"TWENTY\", 0], [\"ONE HUNDRED\", 0]]`, and the `#purchase-btn` element is clicked, the value in the `#change-due` element should be `\"Status: INSUFFICIENT_FUNDS\"`\n@@ -177,11 +352,70 @@ const changeDueDiv = document.getElementById('change-due');\n // set price, customer cash, and cid\n price = 19.5;\n cashInput.value = 20;\n-cid = [['PENNY', 0.01], ['NICKEL', 0], ['DIME', 0], ['QUARTER', 0], ['ONE', 0], ['FIVE', 0], ['TEN', 0], ['TWENTY', 0], ['ONE HUNDRED', 0]];\n+cid = [\n+  ['PENNY', 0.01],\n+  ['NICKEL', 0],\n+  ['DIME', 0],\n+  ['QUARTER', 0],\n+  ['ONE', 0],\n+  ['FIVE', 0],\n+  ['TEN', 0],\n+  ['TWENTY', 0],\n+  ['ONE HUNDRED', 0]\n+];\n+\n+cashInput.dispatchEvent(new Event('change'));\n+purchaseBtn.click();\n+assert.strictEqual(\n+  changeDueDiv.innerText.trim().toLowerCase(),\n+  'status: insufficient_funds'\n+);\n+```\n+\n+When `price` is less than the value in the `#cash` element, total cash in drawer `cid` is greater than change due, individual denomination amounts make impossible to return needed change, and the `#purchase-btn` element is clicked, the value in the `#change-due` element should be `\"Status: INSUFFICIENT_FUNDS\"`\n+\n+```js\n+const cashInput = document.getElementById('cash');\n+const purchaseBtn = document.getElementById('purchase-btn');\n+const changeDueDiv = document.getElementById('change-due');\n+\n+// Min $50, max $100, changes by $10, in cents.\n+const randomCash = _randomNumber(5) * 1000 + 5000;\n+// Min $5.00, max $30.00, changes by $0.01, in cents.\n+const randomChange = _randomNumber(2500) + 500;\n+price = (randomCash - randomChange) / 100;\n+cashInput.value = `${randomCash / 100}`;\n+\n+let changeLeft = randomChange;\n+const _expectedChangeDue = [];\n+const _cashInDrawer = [];\n+for (const [denominationName, denomination] of _money) {\n+  const maxCountInChange = Math.floor(changeLeft / denomination);\n+  // If denomination can complete required changeLeft, available amount in drawer cannot\n+  // equal the maximum. Otherwise count in drawer can be greater than maximum count in change.\n+  const drawerCount = _randomNumber(\n+    changeLeft % denomination === 0 ? Math.min(15, maxCountInChange - 1) : 15\n+  );\n+  const amountInDrawer = drawerCount * denomination;\n+  _cashInDrawer.push([denominationName, amountInDrawer / 100]);\n+  const changeCount = Math.min(drawerCount, maxCountInChange);\n+  if (denomination <= changeLeft && changeCount > 0) {\n+    changeLeft -= changeCount * denomination;\n+  }\n+}\n+\n+// Less pennies than changeLeft makes impossible to return change due.\n+const drawerCount = _randomNumber(Math.min(15, changeLeft - 1));\n+_cashInDrawer.push(['PENNY', drawerCount / 100]);\n+\n+cid = _cashInDrawer.reverse();\n \n cashInput.dispatchEvent(new Event('change'));\n purchaseBtn.click();\n-assert.strictEqual(changeDueDiv.innerText.trim().toLowerCase(), 'status: insufficient_funds');\n+assert.strictEqual(\n+  changeDueDiv.innerText.trim().toLowerCase(),\n+  'status: insufficient_funds'\n+);\n ```\n \n When `price` is `19.5`, the value in the `#cash` element is `20`, `cid` is `[[\"PENNY\", 0.01], [\"NICKEL\", 0], [\"DIME\", 0], [\"QUARTER\", 0], [\"ONE\", 1], [\"FIVE\", 0], [\"TEN\", 0], [\"TWENTY\", 0], [\"ONE HUNDRED\", 0]]`, and the `#purchase-btn` element is clicked, the value in the `#change-due` element should be `\"Status: INSUFFICIENT_FUNDS\"`.\n@@ -193,11 +427,66 @@ const changeDueDiv = document.getElementById('change-due');\n // set price, customer cash, and cid\n price = 19.5;\n cashInput.value = 20;\n-cid = [['PENNY', 0.01], ['NICKEL', 0], ['DIME', 0], ['QUARTER', 0], ['ONE', 1], ['FIVE', 0], ['TEN', 0], ['TWENTY', 0], ['ONE HUNDRED', 0]];\n+cid = [\n+  ['PENNY', 0.01],\n+  ['NICKEL', 0],\n+  ['DIME', 0],\n+  ['QUARTER', 0],\n+  ['ONE', 1],\n+  ['FIVE', 0],\n+  ['TEN', 0],\n+  ['TWENTY', 0],\n+  ['ONE HUNDRED', 0]\n+];\n+\n+cashInput.dispatchEvent(new Event('change'));\n+purchaseBtn.click();\n+assert.strictEqual(\n+  changeDueDiv.innerText.trim().toLowerCase(),\n+  'status: insufficient_funds'\n+);\n+```\n+\n+When `price` is less than the value in the `#cash` element, total cash in drawer `cid` is less than the change due, and the `#purchase-btn` element is clicked, the value in the `#change-due` element should be `\"Status: INSUFFICIENT_FUNDS\"`.\n+\n+```js\n+const cashInput = document.getElementById('cash');\n+const purchaseBtn = document.getElementById('purchase-btn');\n+const changeDueDiv = document.getElementById('change-due');\n+\n+// Min $50, max $100, changes by $10, in cents.\n+const randomCash = _randomNumber(5) * 1000 + 5000;\n+// Min $5.00, max $30.00, changes by $0.01, in cents.\n+const randomChange = _randomNumber(2500) + 500;\n+price = (randomCash - randomChange) / 100;\n+cashInput.value = `${randomCash / 100}`;\n+\n+let changeLeft = randomChange;\n+const _cashInDrawer = [];\n+for (const [denominationName, denomination] of _money) {\n+  const maxCountInChange = Math.floor(changeLeft / denomination);\n+  // Amount lower than maximum (adjusted to changeLeft) will ensure total in drawer\n+  // will be lower than needed change.\n+  const drawerCount = _randomNumber(Math.max(0, Math.min(15, maxCountInChange - 1)));\n+  const amountInDrawer = drawerCount * denomination;\n+  _cashInDrawer.push([denominationName, amountInDrawer / 100]);\n+  if (denomination <= changeLeft && drawerCount > 0) {\n+    changeLeft -= amountInDrawer;\n+  }\n+}\n+\n+// Less pennies than changeLeft makes sure total cash in drawer is less than change due.\n+const count = _randomNumber(Math.min(15, changeLeft - 1));\n+_cashInDrawer.push(['PENNY', count / 100]);\n+\n+cid = _cashInDrawer.reverse();\n \n cashInput.dispatchEvent(new Event('change'));\n purchaseBtn.click();\n-assert.strictEqual(changeDueDiv.innerText.trim().toLowerCase(), 'status: insufficient_funds');\n+assert.strictEqual(\n+  changeDueDiv.innerText.trim().toLowerCase(),\n+  'status: insufficient_funds'\n+);\n ```\n \n When `price` is `19.5`, the value in the `#cash` element is `20`, `cid` is `[[\"PENNY\", 0.5], [\"NICKEL\", 0], [\"DIME\", 0], [\"QUARTER\", 0], [\"ONE\", 0], [\"FIVE\", 0], [\"TEN\", 0], [\"TWENTY\", 0], [\"ONE HUNDRED\", 0]]`, and the `#purchase-btn` element is clicked, the value in the `#change-due` element should be `\"Status: CLOSED PENNY: $0.5\"`.\n@@ -209,19 +498,119 @@ const changeDueDiv = document.getElementById('change-due');\n // set price, customer cash, and cid\n price = 19.5;\n cashInput.value = 20;\n-cid = [['PENNY', 0.5], ['NICKEL', 0], ['DIME', 0], ['QUARTER', 0], ['ONE', 0], ['FIVE', 0], ['TEN', 0], ['TWENTY', 0], ['ONE HUNDRED', 0]];\n+cid = [\n+  ['PENNY', 0.5],\n+  ['NICKEL', 0],\n+  ['DIME', 0],\n+  ['QUARTER', 0],\n+  ['ONE', 0],\n+  ['FIVE', 0],\n+  ['TEN', 0],\n+  ['TWENTY', 0],\n+  ['ONE HUNDRED', 0]\n+];\n \n const expected = ['Status: CLOSED', 'PENNY: $0.5'];\n cashInput.dispatchEvent(new Event('change'));\n purchaseBtn.click();\n const result = changeDueDiv.innerText.trim().toLowerCase();\n assert.isTrue(expected.every(str => result.includes(str.toLowerCase())));\n-const notExpected = [/NICKEL/, /DIME/, /QUARTER/, /ONE [^H]/, /FIVE/, /TEN/, /TWENTY/, /ONE HUNDRED/];\n-assert.isTrue(!notExpected.some(regex => result.match(new RegExp(regex, 'i'))))\n+const notExpected = [\n+  /NICKEL/,\n+  /DIME/,\n+  /QUARTER/,\n+  /ONE [^H]/,\n+  /FIVE/,\n+  /TEN/,\n+  /TWENTY/,\n+  /ONE HUNDRED/\n+];\n+assert.isTrue(!notExpected.some(regex => result.match(new RegExp(regex, 'i'))));\n+```\n+\n+When `price` is less than the value in the `#cash` element, total cash in drawer `cid` is equal to change due, and the `#purchase-btn` element is clicked, the value in the `#change-due` element should be `\"Status: CLOSED\"` with change due in coins and bills sorted in highest to lowest order.\n+\n+```js\n+const cashInput = document.getElementById('cash');\n+const purchaseBtn = document.getElementById('purchase-btn');\n+const changeDueDiv = document.getElementById('change-due');\n+\n+// Min $50, max $100, changes by $10, in cents.\n+const randomCash = _randomNumber(5) * 1000 + 5000;\n+// Min $5.00, max $30.00, changes by $0.01, in cents.\n+const randomChange = _randomNumber(2500) + 500;\n+price = (randomCash - randomChange) / 100;\n+cashInput.value = `${randomCash / 100}`;\n+\n+let changeLeft = randomChange;\n+const _expectedChangeDue = [];\n+const _cashInDrawer = [];\n+for (const [denominationName, denomination] of _money) {\n+  const maxCountInChange = Math.floor(changeLeft / denomination);\n+  const drawerCount = _randomNumber(maxCountInChange);\n+  const amountInDrawer = drawerCount * denomination;\n+  _cashInDrawer.push([denominationName, amountInDrawer / 100]);\n+  if (denomination <= changeLeft && drawerCount > 0) {\n+    _expectedChangeDue.push([denominationName, amountInDrawer / 100]);\n+    changeLeft -= amountInDrawer;\n+  }\n+}\n+\n+// Pennies equal to changeLeft makes sure total cash in drawer is equal to change due.\n+_cashInDrawer.push(['PENNY', changeLeft / 100]);\n+if (changeLeft > 0) {\n+  _expectedChangeDue.push(['PENNY', changeLeft / 100]);\n+}\n+\n+cid = _cashInDrawer.reverse();\n+const expected = [\n+  'Status: CLOSED',\n+  ..._expectedChangeDue\n+    .reverse()\n+    .map(([denominationName, amount]) => `${denominationName}: $${amount}`)\n+];\n+const notExpected = _denomRegexes.filter(\n+  regex => !expected.some(change => change.match(new RegExp(regex, 'i')))\n+);\n+\n+cashInput.dispatchEvent(new Event('change'));\n+purchaseBtn.click();\n+const result = changeDueDiv.innerText.trim().toLowerCase();\n+assert.isTrue(expected.every(str => result.includes(str.toLowerCase())));\n+assert.isTrue(!notExpected.some(regex => result.match(new RegExp(regex, 'i'))));\n ```\n \n # --seed--\n \n+## --after-user-code--\n+\n+```js\n+const _money = [\n+  ['ONE HUNDRED', 10000],\n+  ['TWENTY', 2000],\n+  ['TEN', 1000],\n+  ['FIVE', 500],\n+  ['ONE', 100],\n+  ['QUARTER', 25],\n+  ['DIME', 10],\n+  ['NICKEL', 5]\n+];\n+const _denomRegexes = [\n+  /PENNY/,\n+  /NICKEL/,\n+  /DIME/,\n+  /QUARTER/,\n+  /ONE [^H]/,\n+  /FIVE/,\n+  /TEN/,\n+  /TWENTY/,\n+  /ONE HUNDRED/\n+];\n+function _randomNumber(max) {\n+  return Math.floor(Math.random() * (max + 1));\n+}\n+```\n+\n ## --seed-contents--\n \n ```html\n@@ -235,15 +624,15 @@ assert.isTrue(!notExpected.some(regex => result.match(new RegExp(regex, 'i'))))\n ```js\n let price = 1.87;\n let cid = [\n-  [\"PENNY\", 1.01],\n-  [\"NICKEL\", 2.05],\n-  [\"DIME\", 3.1],\n-  [\"QUARTER\", 4.25],\n-  [\"ONE\", 90],\n-  [\"FIVE\", 55],\n-  [\"TEN\", 20],\n-  [\"TWENTY\", 60],\n-  [\"ONE HUNDRED\", 100]\n+  ['PENNY', 1.01],\n+  ['NICKEL', 2.05],\n+  ['DIME', 3.1],\n+  ['QUARTER', 4.25],\n+  ['ONE', 90],\n+  ['FIVE', 55],\n+  ['TEN', 20],\n+  ['TWENTY', 60],\n+  ['ONE HUNDRED', 100]\n ];\n \n ```\n@@ -469,81 +858,84 @@ label {\n ```js\n let price = 3.26;\n let cid = [\n-  [\"PENNY\", 1.01],\n-  [\"NICKEL\", 2.05],\n-  [\"DIME\", 3.1],\n-  [\"QUARTER\", 4.25],\n-  [\"ONE\", 90],\n-  [\"FIVE\", 55],\n-  [\"TEN\", 20],\n-  [\"TWENTY\", 60],\n-  [\"ONE HUNDRED\", 100],\n+  ['PENNY', 1.01],\n+  ['NICKEL', 2.05],\n+  ['DIME', 3.1],\n+  ['QUARTER', 4.25],\n+  ['ONE', 90],\n+  ['FIVE', 55],\n+  ['TEN', 20],\n+  ['TWENTY', 60],\n+  ['ONE HUNDRED', 100]\n ];\n \n-const displayChangeDue = document.getElementById(\"change-due\");\n-const cash = document.getElementById(\"cash\");\n-const purchaseBtn = document.getElementById(\"purchase-btn\");\n-const priceScreen = document.getElementById(\"price-screen\");\n-const cashDrawerDisplay = document.getElementById(\"cash-drawer-display\");\n+const displayChangeDue = document.getElementById('change-due');\n+const cash = document.getElementById('cash');\n+const purchaseBtn = document.getElementById('purchase-btn');\n+const priceScreen = document.getElementById('price-screen');\n+const cashDrawerDisplay = document.getElementById('cash-drawer-display');\n \n const formatResults = (status, change) => {\n   displayChangeDue.innerHTML = `<p>Status: ${status}</p>`;\n-  change.map(\n-    (money) =>\n-      (displayChangeDue.innerHTML += `<p>${money[0]}: $${money[1]}</p>`),\n-  );\n-  return;\n+  displayChangeDue.innerHTML += change\n+    .map(\n+      ([denominationName, amount]) => `<p>${denominationName}: $${amount}</p>`\n+    )\n+    .join('');\n };\n \n const checkCashRegister = () => {\n-  if (Number(cash.value) < price) {\n-    alert(\"Customer does not have enough money to purchase the item\");\n-    cash.value = \"\";\n+  const cashInCents = Math.round(Number(cash.value) * 100);\n+  const priceInCents = Math.round(price * 100);\n+  if (cashInCents < priceInCents) {\n+    alert('Customer does not have enough money to purchase the item');\n+    cash.value = '';\n     return;\n   }\n \n-  if (Number(cash.value) === price) {\n+  if (cashInCents === priceInCents) {\n     displayChangeDue.innerHTML =\n-      \"<p>No change due - customer paid with exact cash</p>\";\n-    cash.value = \"\";\n+      '<p>No change due - customer paid with exact cash</p>';\n+    cash.value = '';\n     return;\n   }\n \n-  let changeDue = Number(cash.value) - price;\n-  let reversedCid = [...cid].reverse();\n-  let denominations = [100, 20, 10, 5, 1, 0.25, 0.1, 0.05, 0.01];\n-  let result = { status: \"OPEN\", change: [] };\n-  let totalCID = parseFloat(\n-    cid\n-      .map((total) => total[1])\n-      .reduce((prev, curr) => prev + curr)\n-      .toFixed(2),\n-  );\n+  let changeDue = cashInCents - priceInCents;\n+  const reversedCid = [...cid]\n+    .reverse()\n+    .map(([denominationName, amount]) => [\n+      denominationName,\n+      Math.round(amount * 100)\n+    ]);\n+  const denominations = [10000, 2000, 1000, 500, 100, 25, 10, 5, 1];\n+  const result = { status: 'OPEN', change: [] };\n+  const totalCID = reversedCid.reduce((prev, [_, amount]) => prev + amount, 0);\n \n   if (totalCID < changeDue) {\n-    return (displayChangeDue.innerHTML = \"<p>Status: INSUFFICIENT_FUNDS</p>\");\n+    displayChangeDue.innerHTML = '<p>Status: INSUFFICIENT_FUNDS</p>';\n+    return;\n   }\n \n   if (totalCID === changeDue) {\n-    result.status = \"CLOSED\";\n+    result.status = 'CLOSED';\n   }\n \n   for (let i = 0; i <= reversedCid.length; i++) {\n-    if (changeDue > denominations[i] && changeDue > 0) {\n-      let count = 0;\n-      let total = reversedCid[i][1];\n-      while (total > 0 && changeDue >= denominations[i]) {\n-        total -= denominations[i];\n-        changeDue = parseFloat((changeDue -= denominations[i]).toFixed(2));\n-        count++;\n-      }\n+    if (changeDue >= denominations[i] && changeDue > 0) {\n+      const [denominationName, total] = reversedCid[i];\n+      const possibleChange = Math.min(total, changeDue);\n+      const count = Math.floor(possibleChange / denominations[i]);\n+      const amountInChange = count * denominations[i];\n+      changeDue -= amountInChange;\n+\n       if (count > 0) {\n-        result.change.push([reversedCid[i][0], count * denominations[i]]);\n+        result.change.push([denominationName, amountInChange / 100]);\n       }\n     }\n   }\n   if (changeDue > 0) {\n-    return (displayChangeDue.innerHTML = \"<p>Status: INSUFFICIENT_FUNDS</p>\");\n+    displayChangeDue.innerHTML = '<p>Status: INSUFFICIENT_FUNDS</p>';\n+    return;\n   }\n \n   formatResults(result.status, result.change);\n@@ -557,39 +949,45 @@ const checkResults = () => {\n   checkCashRegister();\n };\n \n-const updateUI = (change) => {\n+const updateUI = change => {\n   const currencyNameMap = {\n-    PENNY: \"Pennies\",\n-    NICKEL: \"Nickels\",\n-    DIME: \"Dimes\",\n-    QUARTER: \"Quarters\",\n-    ONE: \"Ones\",\n-    FIVE: \"Fives\",\n-    TEN: \"Tens\",\n-    TWENTY: \"Twenties\",\n-    \"ONE HUNDRED\": \"Hundreds\",\n+    PENNY: 'Pennies',\n+    NICKEL: 'Nickels',\n+    DIME: 'Dimes',\n+    QUARTER: 'Quarters',\n+    ONE: 'Ones',\n+    FIVE: 'Fives',\n+    TEN: 'Tens',\n+    TWENTY: 'Twenties',\n+    'ONE HUNDRED': 'Hundreds'\n   };\n   // Update cid if change is passed in\n   if (change) {\n-    change.forEach((changeArr) => {\n-      const targetArr = cid.find((cidArr) => cidArr[0] === changeArr[0]);\n-      targetArr[1] = parseFloat((targetArr[1] - changeArr[1]).toFixed(2));\n+    change.forEach(([changeDenomination, changeAmount]) => {\n+      const targetArr = cid.find(\n+        ([denominationName, _]) => denominationName === changeDenomination\n+      );\n+      targetArr[1] =\n+        (Math.round(targetArr[1] * 100) - Math.round(changeAmount * 100)) / 100;\n     });\n   }\n \n-  cash.value = \"\";\n+  cash.value = '';\n   priceScreen.textContent = `Total: $${price}`;\n   cashDrawerDisplay.innerHTML = `<p><strong>Change in drawer:</strong></p>\n     ${cid\n-      .map((money) => `<p>${currencyNameMap[money[0]]}: $${money[1]}</p>`)\n-      .join(\"\")}  \n+      .map(\n+        ([denominationName, amount]) =>\n+          `<p>${currencyNameMap[denominationName]}: $${amount}</p>`\n+      )\n+      .join('')}\n   `;\n };\n \n-purchaseBtn.addEventListener(\"click\", checkResults);\n+purchaseBtn.addEventListener('click', checkResults);\n \n-cash.addEventListener(\"keydown\", (e) => {\n-  if (e.key === \"Enter\") {\n+cash.addEventListener('keydown', e => {\n+  if (e.key === 'Enter') {\n     checkResults();\n   }\n });"
        }
    ],
    "stats": {
        "total": 584,
        "additions": 491,
        "deletions": 93
    }
}