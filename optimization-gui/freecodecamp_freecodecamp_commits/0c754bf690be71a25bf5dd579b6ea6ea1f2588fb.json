{
    "author": "ojeytonwilliams",
    "message": "fix(client): show project previews (#58761)",
    "sha": "0c754bf690be71a25bf5dd579b6ea6ea1f2588fb",
    "files": [
        {
            "sha": "3e7a895e4cafe68ebeaed369cc139dcf19fdcd27",
            "filename": "client/src/client-only-routes/show-project-links.tsx",
            "status": "modified",
            "additions": 10,
            "deletions": 5,
            "changes": 15,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/client%2Fsrc%2Fclient-only-routes%2Fshow-project-links.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/client%2Fsrc%2Fclient-only-routes%2Fshow-project-links.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fclient-only-routes%2Fshow-project-links.tsx?ref=0c754bf690be71a25bf5dd579b6ea6ea1f2588fb",
            "patch": "@@ -6,7 +6,11 @@ import { Table, Spacer } from '@freecodecamp/ui';\n \n import { Link } from '../components/helpers';\n import ProjectModal from '../components/SolutionViewer/project-modal';\n-import type { CompletedChallenge, User } from '../redux/prop-types';\n+import type {\n+  ChallengeData,\n+  CompletedChallenge,\n+  User\n+} from '../redux/prop-types';\n import { certsToProjects } from '../../config/cert-and-project-map';\n \n import { SolutionDisplayWidget } from '../components/solution-display-widget';\n@@ -15,7 +19,7 @@ import ExamResultsModal from '../components/SolutionViewer/exam-results-modal';\n \n import { openModal } from '../templates/Challenges/redux/actions';\n \n-import { regeneratePathAndHistory } from '../../../shared/utils/polyvinyl';\n+import { regenerateMissingProperties } from '../../../shared/utils/polyvinyl';\n import '../components/layouts/project-links.css';\n import { Certification } from '../../../shared/config/certification-settings';\n interface ShowProjectLinksProps {\n@@ -164,13 +168,14 @@ const ShowProjectLinks = (props: ShowProjectLinksProps): JSX.Element => {\n     }\n   };\n \n-  const challengeData: CompletedChallenge | null = completedChallenge\n+  const challengeData: ChallengeData | null = completedChallenge\n     ? {\n         ...completedChallenge,\n         // // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n         challengeFiles:\n-          completedChallenge?.challengeFiles?.map(regeneratePathAndHistory) ??\n-          null\n+          completedChallenge?.challengeFiles?.map(\n+            regenerateMissingProperties\n+          ) ?? null\n       }\n     : null;\n "
        },
        {
            "sha": "b634d3256844ecaf6eaf49dc9447e54e5a904172",
            "filename": "client/src/components/profile/components/time-line.tsx",
            "status": "modified",
            "additions": 9,
            "deletions": 5,
            "changes": 14,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/client%2Fsrc%2Fcomponents%2Fprofile%2Fcomponents%2Ftime-line.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/client%2Fsrc%2Fcomponents%2Fprofile%2Fcomponents%2Ftime-line.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fprofile%2Fcomponents%2Ftime-line.tsx?ref=0c754bf690be71a25bf5dd579b6ea6ea1f2588fb",
            "patch": "@@ -10,9 +10,12 @@ import { Table, Button, Modal, Spacer } from '@freecodecamp/ui';\n import envData from '../../../../config/env.json';\n import { getLangCode } from '../../../../../shared/config/i18n';\n import { getCertIds, getPathFromID } from '../../../../utils';\n-import { regeneratePathAndHistory } from '../../../../../shared/utils/polyvinyl';\n+import { regenerateMissingProperties } from '../../../../../shared/utils/polyvinyl';\n import CertificationIcon from '../../../assets/icons/certification';\n-import { CompletedChallenge } from '../../../redux/prop-types';\n+import type {\n+  ChallengeData,\n+  CompletedChallenge\n+} from '../../../redux/prop-types';\n import ProjectPreviewModal from '../../../templates/Challenges/components/project-preview-modal';\n import ExamResultsModal from '../../SolutionViewer/exam-results-modal';\n import { openModal } from '../../../templates/Challenges/redux/actions';\n@@ -160,13 +163,14 @@ function TimelineInner({\n     );\n   }\n \n-  const challengeData: CompletedChallenge | null = completedChallenge\n+  const challengeData: ChallengeData | null = completedChallenge\n     ? {\n         ...completedChallenge,\n         // // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n         challengeFiles:\n-          completedChallenge?.challengeFiles?.map(regeneratePathAndHistory) ??\n-          null\n+          completedChallenge?.challengeFiles?.map(\n+            regenerateMissingProperties\n+          ) ?? null\n       }\n     : null;\n "
        },
        {
            "sha": "ce2ba16b2019811054e55cdb564cb1f77a5bfa22",
            "filename": "client/src/components/settings/certification.tsx",
            "status": "modified",
            "additions": 7,
            "deletions": 5,
            "changes": 12,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/client%2Fsrc%2Fcomponents%2Fsettings%2Fcertification.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/client%2Fsrc%2Fcomponents%2Fsettings%2Fcertification.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fcomponents%2Fsettings%2Fcertification.tsx?ref=0c754bf690be71a25bf5dd579b6ea6ea1f2588fb",
            "patch": "@@ -6,7 +6,7 @@ import ScrollableAnchor, { configureAnchors } from 'react-scrollable-anchor';\n import { connect } from 'react-redux';\n import { Table, Button, Spacer } from '@freecodecamp/ui';\n \n-import { regeneratePathAndHistory } from '../../../../shared/utils/polyvinyl';\n+import { regenerateMissingProperties } from '../../../../shared/utils/polyvinyl';\n import ProjectPreviewModal from '../../templates/Challenges/components/project-preview-modal';\n import ExamResultsModal from '../SolutionViewer/exam-results-modal';\n import { openModal } from '../../templates/Challenges/redux/actions';\n@@ -24,7 +24,8 @@ import {\n } from '../../../../shared/config/certification-settings';\n import env from '../../../config/env.json';\n \n-import {\n+import type {\n+  ChallengeData,\n   ClaimedCertifications,\n   CompletedChallenge,\n   GeneratedExamResults,\n@@ -206,7 +207,7 @@ function CertificationSettings(props: CertificationSettingsProps) {\n   const [challengeFiles, setChallengeFiles] = useState<\n     CompletedChallenge['challengeFiles'] | null\n   >(null);\n-  const [challengeData, setChallengeData] = useState<CompletedChallenge | null>(\n+  const [challengeData, setChallengeData] = useState<ChallengeData | null>(\n     null\n   );\n   const [solution, setSolution] = useState<string | null>();\n@@ -245,8 +246,9 @@ function CertificationSettings(props: CertificationSettingsProps) {\n       ? {\n           ...completedProject,\n           challengeFiles:\n-            completedProject?.challengeFiles?.map(regeneratePathAndHistory) ??\n-            null\n+            completedProject?.challengeFiles?.map(\n+              regenerateMissingProperties\n+            ) ?? null\n         }\n       : null;\n "
        },
        {
            "sha": "be0db6238740f74d2755f5610247c082b996c963",
            "filename": "client/src/redux/prop-types.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/client%2Fsrc%2Fredux%2Fprop-types.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/client%2Fsrc%2Fredux%2Fprop-types.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Fredux%2Fprop-types.ts?ref=0c754bf690be71a25bf5dd579b6ea6ea1f2588fb",
            "patch": "@@ -366,7 +366,7 @@ export type SavedChallengeFile = {\n \n export type SavedChallengeFiles = SavedChallengeFile[];\n \n-export type CompletedChallenge = {\n+export interface CompletedChallenge {\n   id: string;\n   solution?: string | null;\n   githubLink?: string;\n@@ -376,7 +376,11 @@ export type CompletedChallenge = {\n     | Pick<ChallengeFile, 'contents' | 'ext' | 'fileKey' | 'name'>[]\n     | null;\n   examResults?: GeneratedExamResults;\n-};\n+}\n+\n+export interface ChallengeData extends CompletedChallenge {\n+  challengeFiles: ChallengeFile[] | null;\n+}\n \n export type FileKey =\n   | 'scriptjs'"
        },
        {
            "sha": "c51e506f30a31f2cb82ac6a4bf1fdb22d54ff099",
            "filename": "client/src/templates/Challenges/classic/show.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fshow.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fshow.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fclassic%2Fshow.tsx?ref=0c754bf690be71a25bf5dd579b6ea6ea1f2588fb",
            "patch": "@@ -15,11 +15,11 @@ import { challengeTypes } from '../../../../../shared/config/challenge-types';\n import LearnLayout from '../../../components/layouts/learn';\n import { MAX_MOBILE_WIDTH } from '../../../../config/misc';\n \n-import {\n+import type {\n+  ChallengeData,\n   ChallengeFiles,\n   ChallengeMeta,\n   ChallengeNode,\n-  CompletedChallenge,\n   ResizeProps,\n   SavedChallenge,\n   SavedChallengeFiles,\n@@ -113,7 +113,7 @@ interface ShowClassicProps extends Pick<PreviewProps, 'previewMounted'> {\n   pageContext: {\n     challengeMeta: ChallengeMeta;\n     projectPreview: {\n-      challengeData: CompletedChallenge;\n+      challengeData: ChallengeData;\n     };\n   };\n   updateChallengeMeta: (arg0: ChallengeMeta) => void;"
        },
        {
            "sha": "c8c676693534af4c1a2664d997a9fb7537af4704",
            "filename": "client/src/templates/Challenges/components/project-preview-modal.tsx",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fproject-preview-modal.tsx",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fproject-preview-modal.tsx",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fcomponents%2Fproject-preview-modal.tsx?ref=0c754bf690be71a25bf5dd579b6ea6ea1f2588fb",
            "patch": "@@ -2,7 +2,7 @@ import React, { useEffect } from 'react';\n import { connect } from 'react-redux';\n import { Button, Modal } from '@freecodecamp/ui';\n \n-import type { CompletedChallenge } from '../../../redux/prop-types';\n+import type { ChallengeData } from '../../../redux/prop-types';\n import {\n   closeModal,\n   setEditorFocusability,\n@@ -15,14 +15,14 @@ import Preview from './preview';\n import './project-preview-modal.css';\n \n interface ProjectPreviewMountedPayload {\n-  challengeData: CompletedChallenge | null;\n+  challengeData: ChallengeData | null;\n }\n \n interface Props {\n   closeModal: (arg: string) => void;\n   isOpen: boolean;\n   projectPreviewMounted: (payload: ProjectPreviewMountedPayload) => void;\n-  challengeData: CompletedChallenge | null;\n+  challengeData: ChallengeData | null;\n   setEditorFocusability: (focusability: boolean) => void;\n   previewTitle: string;\n   closeText: string;"
        },
        {
            "sha": "9514a4a3290eaec40000bf296ae4cfeb0b24fadc",
            "filename": "client/src/templates/Challenges/redux/execute-challenge-saga.js",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/client%2Fsrc%2Ftemplates%2FChallenges%2Fredux%2Fexecute-challenge-saga.js",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/client%2Fsrc%2Ftemplates%2FChallenges%2Fredux%2Fexecute-challenge-saga.js",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/client%2Fsrc%2Ftemplates%2FChallenges%2Fredux%2Fexecute-challenge-saga.js?ref=0c754bf690be71a25bf5dd579b6ea6ea1f2588fb",
            "patch": "@@ -354,13 +354,18 @@ function* previewProjectSolutionSaga({ payload }) {\n   try {\n     if (canBuildChallenge(challengeData)) {\n       const buildData = yield buildChallengeData(challengeData);\n+      if (buildData.error) throw Error(buildData.error);\n+\n       if (challengeHasPreview(challengeData)) {\n         const document = yield getContext('document');\n         yield call(updateProjectPreview, buildData, document);\n+      } else {\n+        throw Error('Project does not have a preview');\n       }\n     }\n   } catch (err) {\n-    console.log(err);\n+    console.error('Unable to show project preview');\n+    console.error(err);\n   }\n }\n "
        },
        {
            "sha": "1907dbffd953bff9f9fdd78b661e029899bf3815",
            "filename": "e2e/completed-project-preview.spec.ts",
            "status": "added",
            "additions": 86,
            "deletions": 0,
            "changes": 86,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/e2e%2Fcompleted-project-preview.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/e2e%2Fcompleted-project-preview.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fcompleted-project-preview.spec.ts?ref=0c754bf690be71a25bf5dd579b6ea6ea1f2588fb",
            "patch": "@@ -0,0 +1,86 @@\n+import { execSync } from 'node:child_process';\n+\n+import { test, expect, Page } from '@playwright/test';\n+\n+import tributePage from './fixtures/tribute-page.json';\n+\n+import { authedRequest } from './utils/request';\n+\n+const unlockedProfile = {\n+  isLocked: false,\n+  showAbout: true,\n+  showCerts: true,\n+  showDonation: true,\n+  showHeatMap: true,\n+  showLocation: true,\n+  showName: true,\n+  showPoints: true,\n+  showPortfolio: true,\n+  showTimeLine: true\n+};\n+\n+async function expectPreviewToBeShown(page: Page) {\n+  await page\n+    .getByRole('button', { name: 'View Solution for Build a Tribute Page' })\n+    .first()\n+    .click();\n+  await page.getByRole('menuitem', { name: 'View Project' }).click();\n+  const modalHeading = page.getByRole('heading', {\n+    name: 'Build a Tribute Page',\n+    exact: true\n+  });\n+  await expect(modalHeading).toBeVisible();\n+\n+  const projectPreview = page.frameLocator('#fcc-project-preview-frame');\n+  await expect(projectPreview.getByText('Tribute page text')).toBeVisible();\n+}\n+\n+test.describe('Completed project preview', () => {\n+  test.use({ storageState: 'playwright/.auth/development-user.json' });\n+\n+  test.beforeEach(async ({ request }) => {\n+    execSync('node ./tools/scripts/seed/seed-demo-user');\n+\n+    await authedRequest({\n+      request,\n+      method: 'post',\n+      endpoint: '/modern-challenge-completed',\n+      data: {\n+        id: tributePage.id,\n+        challengeType: 14,\n+        files: [tributePage.htmlFile, tributePage.cssFile]\n+      }\n+    });\n+\n+    await authedRequest({\n+      request,\n+      endpoint: '/update-my-profileui',\n+      method: 'put',\n+      data: {\n+        profileUI: unlockedProfile\n+      }\n+    });\n+  });\n+\n+  test('it should be viewable on the timeline', async ({ page }) => {\n+    await page.goto('/developmentuser');\n+\n+    if (!process.env.CI) {\n+      await page\n+        .getByRole('button', { name: 'Preview custom 404 page' })\n+        .click();\n+    }\n+\n+    await expect(\n+      page.getByRole('heading', { name: '@developmentuser' })\n+    ).toBeVisible();\n+\n+    await expectPreviewToBeShown(page);\n+  });\n+\n+  test('it should be viewable on the settings page', async ({ page }) => {\n+    await page.goto('/settings');\n+\n+    await expectPreviewToBeShown(page);\n+  });\n+});"
        },
        {
            "sha": "d439894983828183b553c31556e2ef97a44e1c23",
            "filename": "e2e/completion-modal.spec.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/e2e%2Fcompletion-modal.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/e2e%2Fcompletion-modal.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fcompletion-modal.spec.ts?ref=0c754bf690be71a25bf5dd579b6ea6ea1f2588fb",
            "patch": "@@ -1,3 +1,5 @@\n+import { execSync } from 'node:child_process';\n+\n import { test, expect } from '@playwright/test';\n import translations from '../client/i18n/locales/english/translations.json';\n import { authedRequest } from './utils/request';\n@@ -6,6 +8,10 @@ import { allowTrailingSlash } from './utils/url';\n const nextChallengeURL =\n   '/learn/data-analysis-with-python/data-analysis-with-python-projects/demographic-data-analyzer';\n \n+test.beforeAll(() => {\n+  execSync('node ./tools/scripts/seed/seed-demo-user --certified-user');\n+});\n+\n test.beforeEach(async ({ page }) => {\n   await page.goto(\n     '/learn/data-analysis-with-python/data-analysis-with-python-projects/mean-variance-standard-deviation-calculator'"
        },
        {
            "sha": "0723574f5d8af214cbcc2990dae2b9b130203a74",
            "filename": "e2e/fixtures/tribute-page-css.json",
            "status": "removed",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/552791879c179ea9577c06c034f0302f209424c0/e2e%2Ffixtures%2Ftribute-page-css.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/552791879c179ea9577c06c034f0302f209424c0/e2e%2Ffixtures%2Ftribute-page-css.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Ffixtures%2Ftribute-page-css.json?ref=552791879c179ea9577c06c034f0302f209424c0",
            "patch": "@@ -1,5 +0,0 @@\n-{\n-  \"tribute-page-css\": {\n-    \"contents\": \"#image{max-width:100%;height:auto;display:block;margin:0 auto;}\"\n-  }\n-}"
        },
        {
            "sha": "8f645d4a546399f4e9c026d21153fe4a24770140",
            "filename": "e2e/fixtures/tribute-page-html.json",
            "status": "removed",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/552791879c179ea9577c06c034f0302f209424c0/e2e%2Ffixtures%2Ftribute-page-html.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/552791879c179ea9577c06c034f0302f209424c0/e2e%2Ffixtures%2Ftribute-page-html.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Ffixtures%2Ftribute-page-html.json?ref=552791879c179ea9577c06c034f0302f209424c0",
            "patch": "@@ -1,5 +0,0 @@\n-{\n-  \"tribute-page-html\": {\n-    \"contents\": \"<head><link rel=\\\"stylesheet\\\" href=\\\"styles.css\\\"></head><body><main id=\\\"main\\\"><div id=\\\"title\\\">D</div><div id=\\\"img-div\\\"><img id=\\\"image\\\" src=\\\"\\\" alt=\\\"D\\\" ><div id=\\\"img-caption\\\">s</div></div><div id=\\\"tribute-info\\\">s</div><a id=\\\"tribute-link\\\" href=\\\"\\\" target=\\\"_blank\\\">L</a></main></body></html>\"\n-  }\n-}"
        },
        {
            "sha": "684516ccc5105f7a2e45e1fb9ad133cd050f8851",
            "filename": "e2e/fixtures/tribute-page.json",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/e2e%2Ffixtures%2Ftribute-page.json",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/e2e%2Ffixtures%2Ftribute-page.json",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Ffixtures%2Ftribute-page.json?ref=0c754bf690be71a25bf5dd579b6ea6ea1f2588fb",
            "patch": "@@ -0,0 +1,17 @@\n+{\n+  \"id\": \"bd7158d8c442eddfaeb5bd18\",\n+  \"htmlFile\": {\n+    \"contents\": \"<head><link rel=\\\"stylesheet\\\" href=\\\"styles.css\\\"></head><body><main id=\\\"main\\\"><div id=\\\"title\\\">D</div><div id=\\\"img-div\\\"><img id=\\\"image\\\" src=\\\"\\\" alt=\\\"D\\\" ><div id=\\\"img-caption\\\">s</div></div><div id=\\\"tribute-info\\\">s</div><a id=\\\"tribute-link\\\" href=\\\"\\\" target=\\\"_blank\\\">L</a> Tribute page text</main></body></html>\",\n+    \"key\": \"indexhtml\",\n+    \"ext\": \"html\",\n+    \"name\": \"index\",\n+    \"history\": [\"index.html\"]\n+  },\n+  \"cssFile\": {\n+    \"contents\": \"#image{max-width:100%;height:auto;display:block;margin:0 auto;}\",\n+    \"key\": \"stylescss\",\n+    \"ext\": \"css\",\n+    \"name\": \"styles\",\n+    \"history\": [\"styles.css\"]\n+  }\n+}"
        },
        {
            "sha": "06d894ba88ddce461aeba552758b02455911ba82",
            "filename": "e2e/projects.spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/e2e%2Fprojects.spec.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/e2e%2Fprojects.spec.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/e2e%2Fprojects.spec.ts?ref=0c754bf690be71a25bf5dd579b6ea6ea1f2588fb",
            "patch": "@@ -2,8 +2,7 @@ import { execSync } from 'child_process';\n import { test, expect, Page } from '@playwright/test';\n import { SuperBlocks } from '../shared/config/curriculum';\n import translations from '../client/i18n/locales/english/translations.json';\n-import tributePageHtml from './fixtures/tribute-page-html.json';\n-import tributePageCss from './fixtures/tribute-page-css.json';\n+import tributePage from './fixtures/tribute-page.json';\n import curriculum from './fixtures/js-ads-projects.json';\n import { authedRequest } from './utils/request';\n \n@@ -255,8 +254,8 @@ test.describe('Completion modal should be shown after submitting a project', ()\n     await context.grantPermissions(['clipboard-read', 'clipboard-write']);\n \n     const tributeContent = [\n-      tributePageHtml['tribute-page-html'].contents,\n-      tributePageCss['tribute-page-css'].contents\n+      tributePage.htmlFile.contents,\n+      tributePage.cssFile.contents\n     ];\n \n     await page.goto("
        },
        {
            "sha": "c29bca04a783b6c8e00c949a708b535b4b5c1bf7",
            "filename": "shared/utils/polyvinyl.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 6,
            "changes": 16,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/shared%2Futils%2Fpolyvinyl.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/0c754bf690be71a25bf5dd579b6ea6ea1f2588fb/shared%2Futils%2Fpolyvinyl.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/shared%2Futils%2Fpolyvinyl.ts?ref=0c754bf690be71a25bf5dd579b6ea6ea1f2588fb",
            "patch": "@@ -4,14 +4,16 @@ import invariant from 'invariant';\n const exts = ['js', 'html', 'css', 'jsx', 'ts', 'py'] as const;\n export type Ext = (typeof exts)[number];\n \n-export type IncompleteChallengeFile = {\n+export interface IncompleteChallengeFile {\n   fileKey: string;\n   ext: Ext;\n   name: string;\n   contents: string;\n-};\n+  head?: string;\n+  tail?: string;\n+}\n \n-export type ChallengeFile = IncompleteChallengeFile & {\n+export interface ChallengeFile extends IncompleteChallengeFile {\n   editableRegionBoundaries?: number[];\n   editableContents?: string;\n   usesMultifileEditor?: boolean;\n@@ -22,7 +24,7 @@ export type ChallengeFile = IncompleteChallengeFile & {\n   source?: string | null;\n   path: string;\n   history: string[];\n-};\n+}\n \n type PolyProps = {\n   name: string;\n@@ -118,12 +120,14 @@ export function setContent(\n \n // This is currently only used to add back properties that are not stored in the\n // database.\n-export function regeneratePathAndHistory(file: IncompleteChallengeFile) {\n+export function regenerateMissingProperties(file: IncompleteChallengeFile) {\n   const newPath = file.name + '.' + file.ext;\n   const newFile = {\n     ...file,\n     path: newPath,\n-    history: [newPath]\n+    history: [newPath],\n+    head: file.head ?? '',\n+    tail: file.tail ?? ''\n   };\n   return newFile;\n }"
        }
    ],
    "stats": {
        "total": 210,
        "additions": 166,
        "deletions": 44
    }
}