{
    "author": "ojeytonwilliams",
    "message": "fix(challenge-helper-scripts): create quiz project challenges in correct folder (#64144)\n\nCo-authored-by: Huyen Nguyen <25715018+huyenltnguyen@users.noreply.github.com>",
    "sha": "8f480d8cdfdd0ff8ad5be602e0d0d0ddc9ca4c4b",
    "files": [
        {
            "sha": "0049432957eb8ded5d1ea095ad58f9b64fe37ecc",
            "filename": "curriculum/src/file-handler.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 1,
            "changes": 12,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/8f480d8cdfdd0ff8ad5be602e0d0d0ddc9ca4c4b/curriculum%2Fsrc%2Ffile-handler.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/8f480d8cdfdd0ff8ad5be602e0d0d0ddc9ca4c4b/curriculum%2Fsrc%2Ffile-handler.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/curriculum%2Fsrc%2Ffile-handler.ts?ref=8f480d8cdfdd0ff8ad5be602e0d0d0ddc9ca4c4b",
            "patch": "@@ -1,7 +1,7 @@\n import { dirname, resolve } from 'node:path';\n import assert from 'node:assert';\n import { existsSync, readFileSync } from 'node:fs';\n-import { writeFile } from 'node:fs/promises';\n+import { mkdir, writeFile } from 'node:fs/promises';\n import { fileURLToPath } from 'node:url';\n import debug from 'debug';\n \n@@ -173,6 +173,16 @@ export interface BlockStructure {\n   module?: string;\n }\n \n+export async function createBlockFolder(block: string) {\n+  const { blockContentDir } = getContentConfig('english') as {\n+    blockContentDir: string;\n+  };\n+\n+  const newBlockDir = resolve(blockContentDir, block);\n+  await mkdir(newBlockDir, { recursive: true });\n+  return newBlockDir + '/';\n+}\n+\n export function getBlockStructure(block: string) {\n   return JSON.parse(\n     readFileSync(getBlockStructurePath(block), 'utf8')"
        },
        {
            "sha": "a6e0272b8cfbaaafdd752b3150d7c3b8f2a7bcd6",
            "filename": "tools/challenge-helper-scripts/create-language-block.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 11,
            "changes": 14,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/8f480d8cdfdd0ff8ad5be602e0d0d0ddc9ca4c4b/tools%2Fchallenge-helper-scripts%2Fcreate-language-block.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/8f480d8cdfdd0ff8ad5be602e0d0d0ddc9ca4c4b/tools%2Fchallenge-helper-scripts%2Fcreate-language-block.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-language-block.ts?ref=8f480d8cdfdd0ff8ad5be602e0d0d0ddc9ca4c4b",
            "patch": "@@ -1,5 +1,4 @@\n import fs from 'fs/promises';\n-import { existsSync } from 'fs';\n import path from 'path';\n import { prompt } from 'inquirer';\n import { format } from 'prettier';\n@@ -15,7 +14,8 @@ import { BlockLayouts, BlockLabel } from '../../shared/config/blocks';\n import {\n   getContentConfig,\n   writeBlockStructure,\n-  getSuperblockStructure\n+  getSuperblockStructure,\n+  createBlockFolder\n } from '../../curriculum/src/file-handler';\n import { superBlockToFilename } from '../../curriculum/src/build-curriculum';\n import { getBaseMeta } from './helpers/get-base-meta';\n@@ -211,16 +211,8 @@ async function createQuizChallenge(\n   questionCount: number,\n   challengeLang: string\n ): Promise<ObjectID> {\n-  const { blockContentDir } = getContentConfig('english') as {\n-    blockContentDir: string;\n-  };\n-\n-  const newChallengeDir = path.resolve(blockContentDir, block);\n-  if (!existsSync(newChallengeDir)) {\n-    await withTrace(fs.mkdir, newChallengeDir);\n-  }\n   return createQuizFile({\n-    projectPath: newChallengeDir + '/',\n+    projectPath: await createBlockFolder(block),\n     title: title,\n     dashedName: block,\n     questionCount: questionCount,"
        },
        {
            "sha": "b7243b11efb6c34e8a8be31f0c2c414d82daade0",
            "filename": "tools/challenge-helper-scripts/create-project.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 18,
            "changes": 21,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/8f480d8cdfdd0ff8ad5be602e0d0d0ddc9ca4c4b/tools%2Fchallenge-helper-scripts%2Fcreate-project.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/8f480d8cdfdd0ff8ad5be602e0d0d0ddc9ca4c4b/tools%2Fchallenge-helper-scripts%2Fcreate-project.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-project.ts?ref=8f480d8cdfdd0ff8ad5be602e0d0d0ddc9ca4c4b",
            "patch": "@@ -1,4 +1,3 @@\n-import { existsSync } from 'fs';\n import fs from 'fs/promises';\n import path from 'path';\n import { prompt } from 'inquirer';\n@@ -11,7 +10,7 @@ import {\n } from '../../shared/config/curriculum';\n import { BlockLayouts, BlockLabel } from '../../shared/config/blocks';\n import {\n-  getContentConfig,\n+  createBlockFolder,\n   writeBlockStructure\n } from '../../curriculum/src/file-handler';\n import { superBlockToFilename } from '../../curriculum/src/build-curriculum';\n@@ -209,13 +208,6 @@ async function createMetaJson(\n }\n \n async function createFirstChallenge(block: string): Promise<ObjectID> {\n-  const { blockContentDir } = getContentConfig('english') as {\n-    blockContentDir: string;\n-  };\n-\n-  const newChallengeDir = path.resolve(blockContentDir, block);\n-  await fs.mkdir(newChallengeDir, { recursive: true });\n-\n   // TODO: would be nice if the extension made sense for the challenge, but, at\n   // least until react I think they're all going to be html anyway.\n   const challengeSeeds = [\n@@ -227,7 +219,7 @@ async function createFirstChallenge(block: string): Promise<ObjectID> {\n   ];\n   // including trailing slash for compatibility with createStepFile\n   return createStepFile({\n-    projectPath: newChallengeDir + '/',\n+    projectPath: await createBlockFolder(block),\n     stepNum: 1,\n     challengeType: 0,\n     challengeSeeds,\n@@ -240,15 +232,8 @@ async function createQuizChallenge(\n   title: string,\n   questionCount: number\n ): Promise<ObjectID> {\n-  const newChallengeDir = path.resolve(\n-    __dirname,\n-    `../../curriculum/challenges/english/${block}`\n-  );\n-  if (!existsSync(newChallengeDir)) {\n-    await withTrace(fs.mkdir, newChallengeDir);\n-  }\n   return createQuizFile({\n-    projectPath: newChallengeDir + '/',\n+    projectPath: await createBlockFolder(block),\n     title: title,\n     dashedName: block,\n     questionCount: questionCount"
        },
        {
            "sha": "20014540311078210aacba114adceda2e4d6cc24",
            "filename": "tools/challenge-helper-scripts/create-quiz.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 9,
            "changes": 11,
            "blob_url": "https://github.com/freeCodeCamp/freeCodeCamp/blob/8f480d8cdfdd0ff8ad5be602e0d0d0ddc9ca4c4b/tools%2Fchallenge-helper-scripts%2Fcreate-quiz.ts",
            "raw_url": "https://github.com/freeCodeCamp/freeCodeCamp/raw/8f480d8cdfdd0ff8ad5be602e0d0d0ddc9ca4c4b/tools%2Fchallenge-helper-scripts%2Fcreate-quiz.ts",
            "contents_url": "https://api.github.com/repos/freeCodeCamp/freeCodeCamp/contents/tools%2Fchallenge-helper-scripts%2Fcreate-quiz.ts?ref=8f480d8cdfdd0ff8ad5be602e0d0d0ddc9ca4c4b",
            "patch": "@@ -6,7 +6,7 @@ import ObjectID from 'bson-objectid';\n \n import { SuperBlocks } from '../../shared/config/curriculum';\n import {\n-  getContentConfig,\n+  createBlockFolder,\n   writeBlockStructure\n } from '../../curriculum/src/file-handler';\n import { superBlockToFilename } from '../../curriculum/src/build-curriculum';\n@@ -111,15 +111,8 @@ async function createQuizChallenge(\n   title: string,\n   questionCount: number\n ): Promise<ObjectID> {\n-  const { blockContentDir } = getContentConfig('english') as {\n-    blockContentDir: string;\n-  };\n-\n-  const newChallengeDir = path.resolve(blockContentDir, block);\n-  await fs.mkdir(newChallengeDir, { recursive: true });\n-\n   return createQuizFile({\n-    projectPath: newChallengeDir + '/',\n+    projectPath: await createBlockFolder(block),\n     title: title,\n     dashedName: block,\n     questionCount: questionCount"
        }
    ],
    "stats": {
        "total": 58,
        "additions": 19,
        "deletions": 39
    }
}