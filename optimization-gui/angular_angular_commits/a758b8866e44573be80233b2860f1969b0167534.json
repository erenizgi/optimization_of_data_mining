{
    "author": "JoostK",
    "message": "refactor(compiler): remove `BindingForm` enum (#44411)\n\nThe Ivy compiler only uses `BindingForm.Expression`, so all other\nvariants are removed.\n\nPR Close #44411",
    "sha": "a758b8866e44573be80233b2860f1969b0167534",
    "files": [
        {
            "sha": "7e0d8336adc7aac87ea1c927704ac90d90da1398",
            "filename": "packages/compiler/src/compiler_util/expression_converter.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 28,
            "changes": 30,
            "blob_url": "https://github.com/angular/angular/blob/a758b8866e44573be80233b2860f1969b0167534/packages%2Fcompiler%2Fsrc%2Fcompiler_util%2Fexpression_converter.ts",
            "raw_url": "https://github.com/angular/angular/raw/a758b8866e44573be80233b2860f1969b0167534/packages%2Fcompiler%2Fsrc%2Fcompiler_util%2Fexpression_converter.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fcompiler_util%2Fexpression_converter.ts?ref=a758b8866e44573be80233b2860f1969b0167534",
            "patch": "@@ -100,28 +100,14 @@ export class ConvertPropertyBindingResult {\n   constructor(public stmts: o.Statement[], public currValExpr: o.Expression) {}\n }\n \n-export enum BindingForm {\n-  // The general form of binding expression, supports all expressions.\n-  General,\n-\n-  // Try to generate a simple binding (no temporaries or statements)\n-  // otherwise generate a general binding\n-  TrySimple,\n-\n-  // Inlines assignment of temporaries into the generated expression. The result may still\n-  // have statements attached for declarations of temporary variables.\n-  // This is the only relevant form for Ivy, the other forms are only used in ViewEngine.\n-  Expression,\n-}\n-\n /**\n  * Converts the given expression AST into an executable output AST, assuming the expression\n  * is used in property binding. The expression has to be preprocessed via\n  * `convertPropertyBindingBuiltins`.\n  */\n export function convertPropertyBinding(\n     localResolver: LocalResolver|null, implicitReceiver: o.Expression,\n-    expressionWithoutBuiltins: cdAst.AST, bindingId: string, form: BindingForm,\n+    expressionWithoutBuiltins: cdAst.AST, bindingId: string,\n     interpolationFunction?: InterpolationFunction): ConvertPropertyBindingResult {\n   if (!localResolver) {\n     localResolver = new DefaultLocalResolver();\n@@ -135,15 +121,7 @@ export function convertPropertyBinding(\n     localResolver.notifyImplicitReceiverUse();\n   }\n \n-  if (visitor.temporaryCount === 0 && form == BindingForm.TrySimple) {\n-    return new ConvertPropertyBindingResult([], outputExpr);\n-  } else if (form === BindingForm.Expression) {\n-    return new ConvertPropertyBindingResult(stmts, outputExpr);\n-  }\n-\n-  const currValExpr = createCurrValueExpr(bindingId);\n-  stmts.push(currValExpr.set(outputExpr).toDeclStmt(o.DYNAMIC_TYPE, [o.StmtModifier.Final]));\n-  return new ConvertPropertyBindingResult(stmts, currValExpr);\n+  return new ConvertPropertyBindingResult(stmts, outputExpr);\n }\n \n /**\n@@ -906,10 +884,6 @@ class DefaultLocalResolver implements LocalResolver {\n   }\n }\n \n-function createCurrValueExpr(bindingId: string): o.ReadVarExpr {\n-  return o.variable(`currVal_${bindingId}`);  // fix syntax highlighting: `\n-}\n-\n export class BuiltinFunctionCall extends cdAst.Call {\n   constructor(\n       span: cdAst.ParseSpan, sourceSpan: cdAst.AbsoluteSourceSpan, args: cdAst.AST[],"
        },
        {
            "sha": "17f5e3718099a4b2e7e3b36894795d0e319657d5",
            "filename": "packages/compiler/src/render3/view/compiler.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/a758b8866e44573be80233b2860f1969b0167534/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Fcompiler.ts",
            "raw_url": "https://github.com/angular/angular/raw/a758b8866e44573be80233b2860f1969b0167534/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Fcompiler.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Fcompiler.ts?ref=a758b8866e44573be80233b2860f1969b0167534",
            "patch": "@@ -6,7 +6,7 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import {BindingForm, convertPropertyBinding} from '../../compiler_util/expression_converter';\n+import {convertPropertyBinding} from '../../compiler_util/expression_converter';\n import {ConstantPool} from '../../constant_pool';\n import * as core from '../../core';\n import {AST, ParsedEvent, ParsedEventType, ParsedProperty} from '../../expression_parser/ast';\n@@ -646,7 +646,7 @@ function createHostBindingsFunction(\n \n function bindingFn(implicit: any, value: AST) {\n   return convertPropertyBinding(\n-      null, implicit, value, 'b', BindingForm.Expression, () => error('Unexpected interpolation'));\n+      null, implicit, value, 'b', () => error('Unexpected interpolation'));\n }\n \n function convertStylingCall("
        },
        {
            "sha": "5902e824d037b21f19cc2c5eeb172998bd0e3818",
            "filename": "packages/compiler/src/render3/view/template.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/a758b8866e44573be80233b2860f1969b0167534/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Ftemplate.ts",
            "raw_url": "https://github.com/angular/angular/raw/a758b8866e44573be80233b2860f1969b0167534/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Ftemplate.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Ftemplate.ts?ref=a758b8866e44573be80233b2860f1969b0167534",
            "patch": "@@ -6,7 +6,7 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import {BindingForm, BuiltinFunctionCall, convertActionBinding, convertPropertyBinding, convertUpdateArguments, LocalResolver} from '../../compiler_util/expression_converter';\n+import {BuiltinFunctionCall, convertActionBinding, convertPropertyBinding, convertUpdateArguments, LocalResolver} from '../../compiler_util/expression_converter';\n import {ConstantPool} from '../../constant_pool';\n import * as core from '../../core';\n import {AST, AstMemoryEfficientTransformer, BindingPipe, BindingType, Call, ImplicitReceiver, Interpolation, LiteralArray, LiteralMap, LiteralPrimitive, ParsedEventType, PropertyRead} from '../../expression_parser/ast';\n@@ -1261,7 +1261,7 @@ export class TemplateDefinitionBuilder implements t.Visitor<void>, LocalResolver\n \n   private convertPropertyBinding(value: AST): o.Expression {\n     const convertedPropertyBinding = convertPropertyBinding(\n-        this, this.getImplicitReceiverExpr(), value, this.bindingContext(), BindingForm.Expression,\n+        this, this.getImplicitReceiverExpr(), value, this.bindingContext(),\n         () => error('Unexpected interpolation'));\n     const valExpr = convertedPropertyBinding.currValExpr;\n     this._tempVariables.push(...convertedPropertyBinding.stmts);"
        }
    ],
    "stats": {
        "total": 38,
        "additions": 6,
        "deletions": 32
    }
}