{
    "author": "alxhub",
    "message": "docs: release notes for the v13.0.0 release (#44034)\n\nPR Close #44034",
    "sha": "1a1dfaba6ef314822f09414c8b4fd1253f57c712",
    "files": [
        {
            "sha": "84092378e25a143f72bb229cf60678ede4e25a2f",
            "filename": "CHANGELOG.md",
            "status": "modified",
            "additions": 194,
            "deletions": 0,
            "changes": 194,
            "blob_url": "https://github.com/angular/angular/blob/1a1dfaba6ef314822f09414c8b4fd1253f57c712/CHANGELOG.md",
            "raw_url": "https://github.com/angular/angular/raw/1a1dfaba6ef314822f09414c8b4fd1253f57c712/CHANGELOG.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/CHANGELOG.md?ref=1a1dfaba6ef314822f09414c8b4fd1253f57c712",
            "patch": "@@ -1,3 +1,197 @@\n+<a name=\"13.0.0\"></a>\n+# 13.0.0 (2021-11-03)\n+## Breaking Changes\n+### common\n+- The behavior of the `SpyLocation` used by the `RouterTestingModule` has changed\n+to match the behavior of browsers. It no longer emits a 'popstate' event\n+when `Location.go` is called. In addition, `simulateHashChange` now\n+triggers _both_ a `hashchange` and a `popstate` event.\n+Tests which use `location.go` and expect the changes to be picked up by\n+the `Router` should likely change to `simulateHashChange` instead.\n+Each test is different in what it attempts to assert so there is no\n+single change that works for all tests. Each test using the `SpyLocation` to\n+simulate browser URL changes should be evaluated on a case-by-case basis.\n+### core\n+- TypeScript versions older than 4.4.2 are no longer supported.\n+\n+- NodeJS versions older than `v12.20.0` are no longer\n+supported due to the Angular packages using the NodeJS package exports\n+feature with subpath patterns.\n+\n+- The `WrappedValue` class can no longer be imported from `@angular/core`,\n+which may result in compile errors or failures at runtime if outdated\n+libraries are used that are still using `WrappedValue`. The usage of\n+`WrappedValue` should be removed as no replacement is available.\n+### forms\n+- A new type called `FormControlStatus` has been introduced, which is a union of all possible status strings for form controls. `AbstractControl.status` has been narrowed from `string` to `FormControlStatus`, and `statusChanges` has been narrowed from `Observable<any>` to `Observable<FormControlStatus>`. Most applications should consume the new types seamlessly. Any breakage caused by this change is likely due to one of the following two problems: (1) the app is comparing `AbstractControl.status` against a string which is not a valid status; or, (2) the app is using `statusChanges` events as if they were something other than strings.\n+### router\n+- The default url serializer would previously drop\n+everything after and including a question mark in query parameters. That\n+is, for a navigation to `/path?q=hello?&other=123`, the query\n+params would be parsed to just `{q: 'hello'}`. This is\n+incorrect because the URI spec allows for question mark characers in\n+query data. This change will now correctly parse the params for the\n+above example to be `{v: 'hello?', other: '123'}`.\n+\n+- Previously `null` and `undefined` inputs for `routerLink` were\n+equaivalent to empty string and there was no way to disable the link's\n+navigation.\n+In addition, the `href` is changed from a property `HostBinding()` to an\n+attribute binding (`HostBinding('attr.href')`). The effect of this\n+change is that `DebugElement.properties['href']` will now return the\n+`href` value returned by the native element which will be the full URL\n+rather than the internal value of the `RouterLink` `href` property.\n+\n+- The router will no longer replace the browser URL when a new navigation\n+cancels an ongoing navigation. This often causes URL flicker and was\n+only in place to support some AngularJS hybrid applications. Hybrid\n+applications which rely on the `navigationId` being present on initial\n+navigations that were handled by the Angular router should instead\n+subscribe to `NavigationCancel` events and perform the\n+`location.replaceState` themselves to add `navigationId` to the Router\n+state.\n+In addition, tests which assert `urlChanges` on the `SpyLocation` may\n+need to be adjusted to account for the `replaceState` which is no longer\n+triggered.\n+\n+- It is no longer possible to use `Route.loadChildren` using a string\n+value. The following supporting classes were removed from\n+`@angular/core`:\n+\n+- `NgModuleFactoryLoader`\n+- `SystemJsNgModuleFactoryLoader`\n+\n+The `@angular/router` package no longer exports these symbols:\n+\n+- `SpyNgModuleFactoryLoader`\n+- `DeprecatedLoadChildren`\n+\n+The signature of the `setupTestingRouter` function from\n+`@angular/core/testing` has been changed to drop its `NgModuleFactoryLoader`\n+parameter, as an argument for that parameter can no longer be created.\n+### service-worker\n+- The return type of `SwUpdate#activateUpdate` and `SwUpdate#checkForUpdate` changed to `Promise<boolean>`.\n+\n+Although unlikely, it is possible that this change will cause TypeScript type-checking to fail in\n+some cases. If necessary, update your types to account for the new\n+return type.\n+## Deprecations\n+### \n+- The `renderModuleFactory` symbol in `@angular/platform-server` is no longer necessary as of Angular v13.\n+\n+The `renderModuleFactory` calls can be replaced with `renderModule`.\n+### service-worker\n+- The `SwUpdate#activated` observable is deprecated.\n+\n+The `SwUpdate#activated` observable only emits values as a direct response to calling\n+`SwUpdate#activateUpdate()` and was only useful for determining whether the call resulted in an\n+update or not. Now, the return value of `SwUpdate#activateUpdate()` can be used to determine the\n+outcome of the operation and therefore using `SwUpdate#activated` does not offer any benefit.\n+\n+- The `SwUpdate#availalbe` observable is deprecated.\n+\n+The new `SwUpdate#versionUpdates` observable provides the same information and more. Therefore, it\n+is possible to rebuild the same behavior as `SwUpdate#availalbe` using the events emitted by\n+`SwUpdate#versionUpdates` and filtering for `VersionReadyEvent` events.\n+As a result, the `SwUpdate#availalbe` observable is now redundant.\n+### \n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [747553dd68](https://github.com/angular/angular/commit/747553dd68209fe25a9704fe7094b4b3fb38bf06) | docs | deprecate ViewEngine-based `renderModuleFactory` ([#43757](https://github.com/angular/angular/pull/43757)) |\n+### bazel\n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [62d7005a52](https://github.com/angular/angular/commit/62d7005a52304f41a48f878f176f40e90437a555) | feat | add `strict_templates` and `experimental_extended_template_diagnostics` to `ng_module()` rule ([#43582](https://github.com/angular/angular/pull/43582)) |\n+| [d977701a43](https://github.com/angular/angular/commit/d977701a43866e9f9fae9f83f224e4b6980a8bd4) | feat | allow for custom conditions to be set in `ng_package` targets ([#43764](https://github.com/angular/angular/pull/43764)) |\n+| [4886585875](https://github.com/angular/angular/commit/48865858750bc1607f20db9b6bf9f913870742bc) | feat | create transition for enabling partial compilation ([#43431](https://github.com/angular/angular/pull/43431)) |\n+| [cd1b52483e](https://github.com/angular/angular/commit/cd1b52483e886f6e2ad6cde23ff8a2225cafa219) | feat | expose `esm2020` and `es2020` conditions in APF package exports ([#43740](https://github.com/angular/angular/pull/43740)) |\n+| [49b82ae561](https://github.com/angular/angular/commit/49b82ae56112c1e0d58ac28bcab1705e1f678ab1) | feat | implement partial compilation APF v13 for `ng_package` rule ([#43431](https://github.com/angular/angular/pull/43431)) |\n+| [274cb38e0b](https://github.com/angular/angular/commit/274cb38e0bb9a8bff4a48d1d15f4e16e59ec6f88) | feat | switch prodmode output to ES2020 ([#43431](https://github.com/angular/angular/pull/43431)) |\n+| [73ac50c447](https://github.com/angular/angular/commit/73ac50c44759c5d3048f11d6f98b98a5e625df58) | feat | wire up partial compilation build setting in `ng_module` ([#43431](https://github.com/angular/angular/pull/43431)) |\n+| [e0a72857cc](https://github.com/angular/angular/commit/e0a72857ccda2b21a91875ee714fef608b54c083) | fix | construct a manifest file even when warnings are emitted ([#43582](https://github.com/angular/angular/pull/43582)) |\n+| [dbe656d1e0](https://github.com/angular/angular/commit/dbe656d1e0569304c7001296ec90cf2e9cc8c91f) | fix | ngc-wrapped should not rely on linker for external workspaces ([#43690](https://github.com/angular/angular/pull/43690)) |\n+### common\n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [adf4481211](https://github.com/angular/angular/commit/adf4481211ac0a2eabf560f42ef5193ca550ec98) | feat | add injection token for default date pipe timezone ([#43611](https://github.com/angular/angular/pull/43611)) |\n+| [c6a93001eb](https://github.com/angular/angular/commit/c6a93001eb74374b0fbc6aea1286fe1183d21382) | fix | synchronise location mock behavior with the navigators ([#41730](https://github.com/angular/angular/pull/41730)) |\n+### compiler\n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [14b492df26](https://github.com/angular/angular/commit/14b492df26fcb3f2218f67878a382e8f7dff2c05) | fix | do not error if $any is used inside a listener ([#43866](https://github.com/angular/angular/pull/43866)) |\n+### compiler-cli\n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [bed121c34f](https://github.com/angular/angular/commit/bed121c34f9c4ec4741a4690693423bb7ed66982) | feat | inline resources when generating class metadata calls ([#43178](https://github.com/angular/angular/pull/43178)) |\n+| [263feba5c2](https://github.com/angular/angular/commit/263feba5c2d56e8433068718d1fdcbc3b2ae144c) | fix | handle nullable expressions correctly in the nullish coalescing extended template diagnostic ([#43572](https://github.com/angular/angular/pull/43572)) |\n+| [8f7fdc59af](https://github.com/angular/angular/commit/8f7fdc59af7f1b0a51b07e69044368c223b9f186) | fix | not evaluating new signature for __spreadArray ([#43618](https://github.com/angular/angular/pull/43618)) |\n+| [426a3ecae7](https://github.com/angular/angular/commit/426a3ecae7288c2cb3e8928d7fe56b0b4552d821) | fix | updates `ngc` to pass the build when only warnings are emitted ([#43673](https://github.com/angular/angular/pull/43673)) |\n+### core\n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [a3960846da](https://github.com/angular/angular/commit/a3960846da1f73282306560302daa3a4ddeca0f7) | feat | add `createNgModuleRef` function to create `NgModuleRef` based on NgModule class ([#43580](https://github.com/angular/angular/pull/43580)) |\n+| [fe1f6421d2](https://github.com/angular/angular/commit/fe1f6421d2b647adb706e65f69ec2e40e604fac3) | feat | add `getNgModuleById` function to retrieve loaded NgModules by id ([#43580](https://github.com/angular/angular/pull/43580)) |\n+| [81c7eb813c](https://github.com/angular/angular/commit/81c7eb813c27f08d2d640f34e165a1b5e487bac2) | feat | add migration to opt out existing apps from new test module teardown behavior ([#43353](https://github.com/angular/angular/pull/43353)) |\n+| [e57691c9c5](https://github.com/angular/angular/commit/e57691c9c5f8456f7dc75180aa1e80330da560fe) | feat | Add migration to update empty routerLinks in templates ([#43176](https://github.com/angular/angular/pull/43176)) |\n+| [7dccbdd27b](https://github.com/angular/angular/commit/7dccbdd27be13eb7287f535f482b1de2c13fca74) | feat | add support for Types in ViewContainerRef.createComponent ([#43022](https://github.com/angular/angular/pull/43022)) |\n+| [c14085e434](https://github.com/angular/angular/commit/c14085e43493f0a1eaea1df949cbf6f3b13b72a0) | feat | drop support for TypeScript 4.2 and 4.3 ([#43642](https://github.com/angular/angular/pull/43642)) |\n+| [94ba59bc9d](https://github.com/angular/angular/commit/94ba59bc9db81ae04f20e8147b5133a0d3d45510) | feat | enable test module teardown by default ([#43353](https://github.com/angular/angular/pull/43353)) |\n+| [ea61ec2562](https://github.com/angular/angular/commit/ea61ec25628206d18a424906f685c0d0fd6aa714) | feat | support TypeScript 4.4 ([#43281](https://github.com/angular/angular/pull/43281)) |\n+| [e0a0d05d45](https://github.com/angular/angular/commit/e0a0d05d45bcb93448a8c2fd03f9e1783146cf00) | feat | update node version support range to support v16 ([#43740](https://github.com/angular/angular/pull/43740)) |\n+| [7396021e4b](https://github.com/angular/angular/commit/7396021e4b22faca47b7fc0bab188c838090f3e7) | fix | avoid duplicating comments in TestBed teardown migration ([#43776](https://github.com/angular/angular/pull/43776)) |\n+| [7fd0428aae](https://github.com/angular/angular/commit/7fd0428aae3a7d94bfc8fee764ac24f5fe3fbb41) | fix | don't rethrow errors if test teardown has been disabled ([#43635](https://github.com/angular/angular/pull/43635)) |\n+| [66fb311d20](https://github.com/angular/angular/commit/66fb311d205e51647e2c1f84a6e3adf5ef3cfd64) | fix | incorrect signature for initTestEnvironment ([#43615](https://github.com/angular/angular/pull/43615)) |\n+| [8ae99821d6](https://github.com/angular/angular/commit/8ae99821d657ba940df998f6abec425f8a1f4cb1) | fix | support `InjectFlags` argument in `NodeInjector.get()` ([#41592](https://github.com/angular/angular/pull/41592)) |\n+| [8878183521](https://github.com/angular/angular/commit/88781835212354d7058a3674a04c2a1dd4b8f9c3) | perf | remove support for the deprecated `WrappedValue` ([#43507](https://github.com/angular/angular/pull/43507)) |\n+### elements\n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [a468213f34](https://github.com/angular/angular/commit/a468213f34943b7ddf234e6f9fd406431173d6a0) | fix | remove `ng-add` schematic ([#43975](https://github.com/angular/angular/pull/43975)) |\n+| [f544a53f5f](https://github.com/angular/angular/commit/f544a53f5f3667b4c557537543a9b74a122d5f24) | fix | remove incorrect `@angular/platform-browser` peer dependency ([#43975](https://github.com/angular/angular/pull/43975)) |\n+### forms\n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [d9d8f950e9](https://github.com/angular/angular/commit/d9d8f950e90567c79b43eb156b81810a9f3d5c93) | feat | allow disabling min/max validators dynamically (by setting the value to `null`) ([#42978](https://github.com/angular/angular/pull/42978)) |\n+| [e49fc96ed3](https://github.com/angular/angular/commit/e49fc96ed33c26434a14b80487dd912d8c76cace) | feat | Make Form Statuses use stricter types. ([#42952](https://github.com/angular/angular/pull/42952)) |\n+### language-service\n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [b10d90bef6](https://github.com/angular/angular/commit/b10d90bef6a3d1b721d087268aa7377985dd4c4f) | feat | Add method for retrieving the component template at the cursor location ([#43208](https://github.com/angular/angular/pull/43208)) |\n+| [d5f9890c92](https://github.com/angular/angular/commit/d5f9890c9205b4a121275ace84b26776aedd0478) | feat | auto-apply optional chaining on nullable symbol ([#42995](https://github.com/angular/angular/pull/42995)) |\n+| [69957f72e2](https://github.com/angular/angular/commit/69957f72e240e516fe65146c314014fadc43dd1f) | feat | provide snippets for attribute ([#43590](https://github.com/angular/angular/pull/43590)) |\n+| [fc3b50e427](https://github.com/angular/angular/commit/fc3b50e4275c84a1cd3f75e4b52ee2dc4b65c35c) | fix | exclude the `SafePropertyRead` when applying the optional chaining ([#43321](https://github.com/angular/angular/pull/43321)) |\n+### migrations\n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [95a68c5dc3](https://github.com/angular/angular/commit/95a68c5dc3b72c0fe275e5025445befec3d9dc1e) | fix | account for CRLF characters in template migrations ([#44013](https://github.com/angular/angular/pull/44013)) |\n+| [77bd2538cb](https://github.com/angular/angular/commit/77bd2538cb8fe114a326209791d7ec043d65ea9e) | fix | apply individual expression edits to preserve newline characters ([#43519](https://github.com/angular/angular/pull/43519)) |\n+| [d849350c7b](https://github.com/angular/angular/commit/d849350c7bf19117bbf85e2d854b5be4d5eb4b25) | fix | Ensure routerLink migration doesn't update unrelated files ([#43519](https://github.com/angular/angular/pull/43519)) |\n+| [2efc18e675](https://github.com/angular/angular/commit/2efc18e6757157589004e23d8d22b7967de4387d) | fix | migration failed finding tsconfig file ([#43343](https://github.com/angular/angular/pull/43343)) |\n+| [b6f2a55147](https://github.com/angular/angular/commit/b6f2a551475126893c4ceff1241314067e14d0b6) | fix | prevent migrations from updating external templates multiple times ([#44013](https://github.com/angular/angular/pull/44013)) |\n+### router\n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [4f3beffdbf](https://github.com/angular/angular/commit/4f3beffdbfa974b380b2225f163d363dd17e10bd) | feat | emit activate/deactivate events when an outlet gets attached/detached ([#43333](https://github.com/angular/angular/pull/43333)) |\n+| [faf9f5a3bc](https://github.com/angular/angular/commit/faf9f5a3bc444bb6cbf75916c8022f60e0742bca) | feat | new output that would notify when link is activated ([#43280](https://github.com/angular/angular/pull/43280)) |\n+| [3c6b653089](https://github.com/angular/angular/commit/3c6b653089837459809a370ebcaf8911c3bab9ed) | feat | Option to correctly restore history on failed navigation ([#43289](https://github.com/angular/angular/pull/43289)) |\n+| [784671597e](https://github.com/angular/angular/commit/784671597e0b28d9696bdc325b426a6c7be0cd8e) | fix | Allow question marks in query param values ([#31187](https://github.com/angular/angular/pull/31187)) |\n+| [796da641f0](https://github.com/angular/angular/commit/796da641f0a29e9f5f5de115c456da37426e971c) | fix | Do not modify parts of URL excluded from with 'eager' updates ([#43421](https://github.com/angular/angular/pull/43421)) |\n+| [772e08d14e](https://github.com/angular/angular/commit/772e08d14e534f20e4376109e81604965e189abf) | fix | fix Router's public API for canceledNavigationResolution ([#43842](https://github.com/angular/angular/pull/43842)) |\n+| [ccb09b4558](https://github.com/angular/angular/commit/ccb09b4558a3864fb5b2fe2214d08f1c1fe2758f) | fix | null/undefined routerLink should disable navigation ([#43087](https://github.com/angular/angular/pull/43087)) |\n+| [9e039ca68b](https://github.com/angular/angular/commit/9e039ca68bfae5328f3fc1f16fabd7673c466a25) | fix | Only trigger router navigation on `popstate` events from `Location` subscription ([#43328](https://github.com/angular/angular/pull/43328)) |\n+| [c5d0bd4966](https://github.com/angular/angular/commit/c5d0bd4966a4fc595d57f75569754b4d224ef2ba) | fix | Prevent URL flicker when new navigations cancel ongoing ones ([#43496](https://github.com/angular/angular/pull/43496)) |\n+| [adc68b100b](https://github.com/angular/angular/commit/adc68b100b98aef171ee298cc23bd5291b106526) | fix | reuse route strategy fix ([#43791](https://github.com/angular/angular/pull/43791)) |\n+| [361273fad5](https://github.com/angular/angular/commit/361273fad5030c900c83d333a779f6edbe20c688) | refactor | remove support for `loadChildren` string syntax ([#43591](https://github.com/angular/angular/pull/43591)) |\n+### service-worker\n+| Commit | Type | Description |\n+| -- | -- | -- |\n+| [59225f5586](https://github.com/angular/angular/commit/59225f5586f1319a47768cef2e3325d7ab6940af) | feat | `SwUpdate#activeUpdate` and `SwUpdate#checkForUpdate` should have a meaningful outcome ([#43668](https://github.com/angular/angular/pull/43668)) |\n+| [0dc45446fe](https://github.com/angular/angular/commit/0dc45446fe487febaefaf68a928c5a249880f2f3) | feat | expose more version update events ([#43668](https://github.com/angular/angular/pull/43668)) |\n+## Special Thanks\n+Ahmed Ayed, Alan Agius, Alex Rickabaugh, Andrew Kushnir, Andrew Scott, Bjarki, Charles Lyding, Dmitrij Kuba, Doug Parker, Dylan Hunn, George Kalpakas, Jessica Janiuk, Jochen Kraushaar, Joe Martin (Crowdstaffing), Joey Perrott, Jon Rimmer, JoostK, Kristiyan Kostadinov, Maximilian Köller, Paul Gschwendtner, Pei Wang, Pete Bacon Darwin, Tomasz Domański, Willy Schott, anandtiwary, dario-piotrowicz, iRealNirmal, ivanwonder, krzysztof-grzybek, mgechev and vthinkxie\n+\n+<!-- CHANGELOG SPLIT MARKER -->\n+\n <a name=\"13.0.0-rc.3\"></a>\n # 13.0.0-rc.3 (2021-11-01)\n ### core"
        }
    ],
    "stats": {
        "total": 194,
        "additions": 194,
        "deletions": 0
    }
}