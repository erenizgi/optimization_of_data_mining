{
    "author": "devversion",
    "message": "build: split dev-infra configuration into individual files (#37890)\n\nSplits the dev-infra configurations into individual files inside the\n`.ng-dev/` folder. This helps with clarity as there is no single\nconfiguration file that becomes extremely large and difficult to\nmaintain.\n\nAdditionally, more explicit configuration types are now used. This\nfixed the max-line length setting for commit message validation.\nThis option is currently named incorrectly and a noop.\n\nPR Close #37890",
    "sha": "e6afcf1f94b274a6a9ca141fb1c0e1933db0cb4a",
    "files": [
        {
            "sha": "5e2215509149fff2519d93929a2975b2d1111da8",
            "filename": ".ng-dev/commit-message.ts",
            "status": "added",
            "additions": 52,
            "deletions": 0,
            "changes": 52,
            "blob_url": "https://github.com/angular/angular/blob/e6afcf1f94b274a6a9ca141fb1c0e1933db0cb4a/.ng-dev%2Fcommit-message.ts",
            "raw_url": "https://github.com/angular/angular/raw/e6afcf1f94b274a6a9ca141fb1c0e1933db0cb4a/.ng-dev%2Fcommit-message.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.ng-dev%2Fcommit-message.ts?ref=e6afcf1f94b274a6a9ca141fb1c0e1933db0cb4a",
            "patch": "@@ -0,0 +1,52 @@\n+import {CommitMessageConfig} from '../dev-infra/commit-message/config';\n+\n+/**\n+ * The configuration for `ng-dev commit-message` commands.\n+ */\n+export const commitMessage: CommitMessageConfig = {\n+  maxLineLength: 120,\n+  minBodyLength: 20,\n+  minBodyLengthTypeExcludes: ['docs'],\n+  types: [\n+    'build',\n+    'ci',\n+    'docs',\n+    'feat',\n+    'fix',\n+    'perf',\n+    'refactor',\n+    'release',\n+    'style',\n+    'test',\n+  ],\n+  scopes: [\n+    'animations',\n+    'bazel',\n+    'benchpress',\n+    'changelog',\n+    'common',\n+    'compiler',\n+    'compiler-cli',\n+    'core',\n+    'dev-infra',\n+    'docs-infra',\n+    'elements',\n+    'forms',\n+    'http',\n+    'language-service',\n+    'localize',\n+    'migrations',\n+    'ngcc',\n+    'packaging',\n+    'platform-browser',\n+    'platform-browser-dynamic',\n+    'platform-server',\n+    'platform-webworker',\n+    'platform-webworker-dynamic',\n+    'router',\n+    'service-worker',\n+    'upgrade',\n+    've',\n+    'zone.js',\n+  ]\n+};"
        },
        {
            "sha": "c620e02b730aab4a493deae9a0598bf0c90a6f54",
            "filename": ".ng-dev/config.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 112,
            "changes": 116,
            "blob_url": "https://github.com/angular/angular/blob/e6afcf1f94b274a6a9ca141fb1c0e1933db0cb4a/.ng-dev%2Fconfig.ts",
            "raw_url": "https://github.com/angular/angular/raw/e6afcf1f94b274a6a9ca141fb1c0e1933db0cb4a/.ng-dev%2Fconfig.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.ng-dev%2Fconfig.ts?ref=e6afcf1f94b274a6a9ca141fb1c0e1933db0cb4a",
            "patch": "@@ -1,116 +1,8 @@\n-import {MergeConfig} from '../dev-infra/pr/merge/config';\n+import {commitMessage} from './commit-message';\n+import {format} from './format';\n+import {github} from './github';\n+import {merge} from './merge';\n \n-// The configuration for `ng-dev commit-message` commands.\n-const commitMessage = {\n-  'maxLength': 120,\n-  'minBodyLength': 20,\n-  'minBodyLengthTypeExcludes': ['docs'],\n-  'types': [\n-    'build',\n-    'ci',\n-    'docs',\n-    'feat',\n-    'fix',\n-    'perf',\n-    'refactor',\n-    'release',\n-    'style',\n-    'test',\n-  ],\n-  'scopes': [\n-    'animations',\n-    'bazel',\n-    'benchpress',\n-    'changelog',\n-    'common',\n-    'compiler',\n-    'compiler-cli',\n-    'core',\n-    'dev-infra',\n-    'docs-infra',\n-    'elements',\n-    'forms',\n-    'http',\n-    'language-service',\n-    'localize',\n-    'migrations',\n-    'ngcc',\n-    'packaging',\n-    'platform-browser',\n-    'platform-browser-dynamic',\n-    'platform-server',\n-    'platform-webworker',\n-    'platform-webworker-dynamic',\n-    'router',\n-    'service-worker',\n-    'upgrade',\n-    've',\n-    'zone.js',\n-  ]\n-};\n-\n-// The configuration for `ng-dev format` commands.\n-const format = {\n-  'clang-format': {\n-    'matchers': [\n-      '**/*.{js,ts}',\n-      // TODO: burn down format failures and remove aio and integration exceptions.\n-      '!aio/**',\n-      '!integration/**',\n-      // Both third_party and .yarn are directories containing copied code which should\n-      // not be modified.\n-      '!third_party/**',\n-      '!.yarn/**',\n-      // Do not format d.ts files as they are generated\n-      '!**/*.d.ts',\n-    ]\n-  },\n-  'buildifier': true\n-};\n-\n-/** Github metadata information for `ng-dev` commands. */\n-const github = {\n-  owner: 'angular',\n-  name: 'angular',\n-};\n-\n-// Configuration for the `ng-dev pr merge` command. The command can be used\n-// for merging upstream pull requests into branches based on a PR target label.\n-const merge = () => {\n-  // TODO: resume dynamically determining patch branch\n-  const patch = '10.0.x';\n-  const config: MergeConfig = {\n-    githubApiMerge: false,\n-    claSignedLabel: 'cla: yes',\n-    mergeReadyLabel: /^PR action: merge(-assistance)?/,\n-    caretakerNoteLabel: 'PR action: merge-assistance',\n-    commitMessageFixupLabel: 'commit message fixup',\n-    labels: [\n-      {\n-        pattern: 'PR target: master-only',\n-        branches: ['master'],\n-      },\n-      {\n-        pattern: 'PR target: patch-only',\n-        branches: [patch],\n-      },\n-      {\n-        pattern: 'PR target: master & patch',\n-        branches: ['master', patch],\n-      },\n-    ],\n-    requiredBaseCommits: {\n-      // PRs that target either `master` or the patch branch, need to be rebased\n-      // on top of the latest commit message validation fix.\n-      // These SHAs are the commits that update the required license text in the header.\n-      'master': '5aeb9a4124922d8ac08eb73b8f322905a32b0b3a',\n-      [patch]: '27b95ba64a5d99757f4042073fd1860e20e3ed24'\n-    },\n-  };\n-  return config;\n-};\n-\n-// Export function to build ng-dev configuration object.\n module.exports = {\n   commitMessage,\n   format,"
        },
        {
            "sha": "ed625e3e322be174cff27936e917e31f301fc573",
            "filename": ".ng-dev/format.ts",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/angular/angular/blob/e6afcf1f94b274a6a9ca141fb1c0e1933db0cb4a/.ng-dev%2Fformat.ts",
            "raw_url": "https://github.com/angular/angular/raw/e6afcf1f94b274a6a9ca141fb1c0e1933db0cb4a/.ng-dev%2Fformat.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.ng-dev%2Fformat.ts?ref=e6afcf1f94b274a6a9ca141fb1c0e1933db0cb4a",
            "patch": "@@ -0,0 +1,22 @@\n+import {FormatConfig} from '../dev-infra/format/config';\n+\n+/**\n+ * Configuration for the `ng-dev format` command.\n+ */\n+export const format: FormatConfig = {\n+  'clang-format': {\n+    'matchers': [\n+      '**/*.{js,ts}',\n+      // TODO: burn down format failures and remove aio and integration exceptions.\n+      '!aio/**',\n+      '!integration/**',\n+      // Both third_party and .yarn are directories containing copied code which should\n+      // not be modified.\n+      '!third_party/**',\n+      '!.yarn/**',\n+      // Do not format d.ts files as they are generated\n+      '!**/*.d.ts',\n+    ]\n+  },\n+  'buildifier': true\n+};"
        },
        {
            "sha": "c9b009bea572368ccbe9ca92f3abb3c56b2955ed",
            "filename": ".ng-dev/github.ts",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/e6afcf1f94b274a6a9ca141fb1c0e1933db0cb4a/.ng-dev%2Fgithub.ts",
            "raw_url": "https://github.com/angular/angular/raw/e6afcf1f94b274a6a9ca141fb1c0e1933db0cb4a/.ng-dev%2Fgithub.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.ng-dev%2Fgithub.ts?ref=e6afcf1f94b274a6a9ca141fb1c0e1933db0cb4a",
            "patch": "@@ -0,0 +1,11 @@\n+import {GithubConfig} from '../dev-infra/utils/config';\n+\n+/**\n+ * Github configuration for the `ng-dev` command. This repository is used as\n+ * remote for the merge script and other utilities like `ng-dev pr rebase`.\n+ */\n+\n+export const github: GithubConfig = {\n+  owner: 'angular',\n+  name: 'angular'\n+};"
        },
        {
            "sha": "cb508bd3b121a5c6a18af54589f83e3e28ed63b8",
            "filename": ".ng-dev/merge.ts",
            "status": "added",
            "additions": 38,
            "deletions": 0,
            "changes": 38,
            "blob_url": "https://github.com/angular/angular/blob/e6afcf1f94b274a6a9ca141fb1c0e1933db0cb4a/.ng-dev%2Fmerge.ts",
            "raw_url": "https://github.com/angular/angular/raw/e6afcf1f94b274a6a9ca141fb1c0e1933db0cb4a/.ng-dev%2Fmerge.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.ng-dev%2Fmerge.ts?ref=e6afcf1f94b274a6a9ca141fb1c0e1933db0cb4a",
            "patch": "@@ -0,0 +1,38 @@\n+import {MergeConfig} from '../dev-infra/pr/merge/config';\n+\n+/**\n+ * Configuration for the merge tool in `ng-dev`. This sets up the labels which\n+ * are respected by the merge script (e.g. the target labels).\n+ */\n+export const merge = (): MergeConfig => {\n+  // TODO: resume dynamically determining patch branch\n+  const patch = '10.0.x';\n+  return {\n+    githubApiMerge: false,\n+    claSignedLabel: 'cla: yes',\n+    mergeReadyLabel: /^PR action: merge(-assistance)?/,\n+    caretakerNoteLabel: 'PR action: merge-assistance',\n+    commitMessageFixupLabel: 'commit message fixup',\n+    labels: [\n+      {\n+        pattern: 'PR target: master-only',\n+        branches: ['master'],\n+      },\n+      {\n+        pattern: 'PR target: patch-only',\n+        branches: [patch],\n+      },\n+      {\n+        pattern: 'PR target: master & patch',\n+        branches: ['master', patch],\n+      },\n+    ],\n+    requiredBaseCommits: {\n+      // PRs that target either `master` or the patch branch, need to be rebased\n+      // on top of the latest commit message validation fix.\n+      // These SHAs are the commits that update the required license text in the header.\n+      'master': '5aeb9a4124922d8ac08eb73b8f322905a32b0b3a',\n+      [patch]: '27b95ba64a5d99757f4042073fd1860e20e3ed24'\n+    },\n+  };\n+};"
        }
    ],
    "stats": {
        "total": 239,
        "additions": 127,
        "deletions": 112
    }
}