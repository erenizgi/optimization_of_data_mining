{
    "author": "twerske",
    "message": "build(docs-infra): error guides in docs (#40060)\n\nadd /errors to docs\ncreate formatting for error guides infra\n\nPR Close #40060",
    "sha": "fbfd4889a9e2691eeda1a32df52996225e235c28",
    "files": [
        {
            "sha": "31e2b222a613177841d6a4ab86194bbf2bc7b543",
            "filename": ".pullapprove.yml",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/.pullapprove.yml",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/.pullapprove.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.pullapprove.yml?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -1232,6 +1232,7 @@ groups:\n           'goldens/public-api/**',\n           'CHANGELOG.md',\n           'docs/NAMING.md',\n+          'aio/content/errors/*.md',\n           'aio/content/guide/glossary.md',\n           'aio/content/guide/styleguide.md',\n           'aio/content/examples/styleguide/**',"
        },
        {
            "sha": "ecff113c4a2dfeb99bc30c2affd81aee2d80fa08",
            "filename": "aio/content/errors/index.md",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Fcontent%2Ferrors%2Findex.md",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Fcontent%2Ferrors%2Findex.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Ferrors%2Findex.md?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -0,0 +1 @@\n+# Errors List\n\\ No newline at end of file"
        },
        {
            "sha": "ed1348a342328db5b99e1497d52ac9e1de300723",
            "filename": "aio/content/navigation.json",
            "status": "modified",
            "additions": 40,
            "deletions": 29,
            "changes": 69,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Fcontent%2Fnavigation.json",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Fcontent%2Fnavigation.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fnavigation.json?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -56,35 +56,35 @@\n       \"tooltip\": \"Set up your environment and learn basic concepts\",\n       \"children\": [\n         {\n-            \"title\": \"Try it\",\n-            \"tooltip\": \"Examine and work with a ready-made sample app, with no setup.\",\n-            \"children\": [\n-              {\n-                \"url\": \"start\",\n-                \"title\": \"Getting started\",\n-                \"tooltip\": \"Take a look at Angular's component model, template syntax, and component communication.\"\n-              },\n-              {\n-                \"url\": \"start/start-routing\",\n-                \"title\": \"Adding navigation\",\n-                \"tooltip\": \"Navigate among different page views using the browser's URL.\"\n-              },\n-              {\n-                \"url\": \"start/start-data\",\n-                \"title\": \"Managing Data\",\n-                \"tooltip\": \"Use services and access external data via HTTP.\"\n-              },\n-              {\n-                \"url\": \"start/start-forms\",\n-                \"title\": \"Using Forms for User Input\",\n-                \"tooltip\": \"Learn about fetching and managing data from users with forms.\"\n-              },\n-              {\n-                \"url\": \"start/start-deployment\",\n-                \"title\": \"Deploying an application\",\n-                \"tooltip\": \"Move to local development, or deploy your application to Firebase or your own server.\"\n-              }\n-            ]\n+          \"title\": \"Try it\",\n+          \"tooltip\": \"Examine and work with a ready-made sample app, with no setup.\",\n+          \"children\": [\n+            {\n+              \"url\": \"start\",\n+              \"title\": \"Getting started\",\n+              \"tooltip\": \"Take a look at Angular's component model, template syntax, and component communication.\"\n+            },\n+            {\n+              \"url\": \"start/start-routing\",\n+              \"title\": \"Adding navigation\",\n+              \"tooltip\": \"Navigate among different page views using the browser's URL.\"\n+            },\n+            {\n+              \"url\": \"start/start-data\",\n+              \"title\": \"Managing Data\",\n+              \"tooltip\": \"Use services and access external data via HTTP.\"\n+            },\n+            {\n+              \"url\": \"start/start-forms\",\n+              \"title\": \"Using Forms for User Input\",\n+              \"tooltip\": \"Learn about fetching and managing data from users with forms.\"\n+            },\n+            {\n+              \"url\": \"start/start-deployment\",\n+              \"title\": \"Deploying an application\",\n+              \"tooltip\": \"Move to local development, or deploy your application to Firebase or your own server.\"\n+            }\n+          ]\n         },\n         {\n           \"url\": \"guide/setup-local\",\n@@ -916,6 +916,17 @@\n           \"tooltip\": \"Details of the Angular packages, classes, interfaces, and other types.\",\n           \"url\": \"api\"\n         },\n+        {\n+          \"title\": \"Error Reference\",\n+          \"tooltip\": \"Details of the errors that can be thrown by Angular.\",\n+          \"children\": [\n+            {\n+              \"title\": \"Overview\",\n+              \"url\": \"errors\",\n+              \"hidden\": true\n+            }\n+          ]\n+        },\n         {\n           \"title\": \"Example applications\",\n           \"tooltip\": \"List of all of the example applications in the Angular documentation.\","
        },
        {
            "sha": "7493e3ef48211efc1143bc91abcb101d5905923d",
            "filename": "aio/src/styles/1-layouts/_top-menu.scss",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Fsrc%2Fstyles%2F1-layouts%2F_top-menu.scss",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Fsrc%2Fstyles%2F1-layouts%2F_top-menu.scss",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fstyles%2F1-layouts%2F_top-menu.scss?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -52,6 +52,7 @@ aio-shell.folder-api mat-toolbar.mat-toolbar,\n aio-shell.folder-cli mat-toolbar.mat-toolbar,\n aio-shell.folder-docs mat-toolbar.mat-toolbar,\n aio-shell.folder-guide mat-toolbar.mat-toolbar,\n+aio-shell.folder-errors mat-toolbar.mat-toolbar,\n aio-shell.folder-start mat-toolbar.mat-toolbar,\n aio-shell.folder-tutorial mat-toolbar.mat-toolbar {\n   @media (min-width: $showTopMenuWidth) {"
        },
        {
            "sha": "d4d1a5c9bda718093ff1fc97e35006db2598e4dc",
            "filename": "aio/src/styles/2-modules/_errors.scss",
            "status": "added",
            "additions": 59,
            "deletions": 0,
            "changes": 59,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Fsrc%2Fstyles%2F2-modules%2F_errors.scss",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Fsrc%2Fstyles%2F2-modules%2F_errors.scss",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fstyles%2F2-modules%2F_errors.scss?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -0,0 +1,59 @@\n+\n+.error-list {\n+  display: grid;\n+  list-style: none;\n+  padding: 0;\n+  overflow: hidden;\n+\n+  @media screen and (max-width: 600px) {\n+    margin: 0 0 0 -8px;\n+  }\n+\n+  li {\n+    @include font-size(14);\n+    margin: 8px 0;\n+    @include line-height(14);\n+    padding: 0;\n+    float: left;\n+    overflow: hidden;\n+    min-width: 220px;\n+    text-overflow: ellipsis;\n+    white-space: nowrap;\n+\n+    .symbol {\n+      margin-right: 8px;\n+\n+      &.runtime {\n+        background: $green-500;\n+      }\n+\n+      &.compiler {\n+        background: $blue-500;\n+      }\n+    }\n+\n+    .symbol.runtime:before {\n+      content: \"R\";\n+    }  \n+    \n+    .symbol.compiler:before {\n+      content: \"C\";\n+    }  \n+\n+    a {\n+      color: $blue-grey-600;\n+      display: inline-block;\n+      @include line-height(16);\n+      padding: 0 16px 0;\n+      text-decoration: none;\n+      transition: all .3s;\n+      overflow: hidden;\n+      text-overflow: ellipsis;\n+\n+      &:hover {\n+        background: $blue-grey-50;\n+        color: $blue-500;\n+      }\n+    }\n+  }\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "d55755d56670125101da7af48e2cb7bac168cd14",
            "filename": "aio/src/styles/2-modules/_modules-dir.scss",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Fsrc%2Fstyles%2F2-modules%2F_modules-dir.scss",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Fsrc%2Fstyles%2F2-modules%2F_modules-dir.scss",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fstyles%2F2-modules%2F_modules-dir.scss?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -15,6 +15,7 @@\n    @import 'deploy-theme';\n    @import 'details';\n    @import 'edit-page-cta';\n+   @import 'errors';\n    @import 'features';\n    @import 'filetree';\n    @import 'heading-anchors';"
        },
        {
            "sha": "6e2d571c8864a83379bea8fb0bb73ad22dc63317",
            "filename": "aio/tools/transforms/angular-api-package/index.js",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Findex.js",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Findex.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Findex.js?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -17,7 +17,6 @@ module.exports =\n         // Register the processors\n         .processor(require('./processors/mergeParameterInfo'))\n         .processor(require('./processors/processPseudoClasses'))\n-        .processor(require('./processors/splitDescription'))\n         .processor(require('./processors/convertPrivateClassesToInterfaces'))\n         .processor(require('./processors/generateApiListDoc'))\n         .processor(require('./processors/addNotYetDocumentedProperty'))"
        },
        {
            "sha": "ab7020c6d31aaef4dac420ed0f6dfbc8bdfc6e46",
            "filename": "aio/tools/transforms/angular-base-package/index.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Findex.js",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Findex.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Findex.js?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -32,6 +32,7 @@ module.exports = new Package('angular-base', [\n   .processor(require('./processors/copyContentAssets'))\n   .processor(require('./processors/renderLinkInfo'))\n   .processor(require('./processors/checkContentRules'))\n+  .processor(require('./processors/splitDescription'))\n \n   // overrides base packageInfo and returns the one for the 'angular/angular' repo.\n   .factory('packageInfo', function() { return require(path.resolve(PROJECT_ROOT, 'package.json')); })"
        },
        {
            "sha": "dd5f58480278fa4c665031cd6782129cf6795870",
            "filename": "aio/tools/transforms/angular-base-package/processors/splitDescription.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Fprocessors%2FsplitDescription.js",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Fprocessors%2FsplitDescription.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Fprocessors%2FsplitDescription.js?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "previous_filename": "aio/tools/transforms/angular-api-package/processors/splitDescription.js"
        },
        {
            "sha": "313aa51cab4e654c0f0915f1b038700bff02d75f",
            "filename": "aio/tools/transforms/angular-base-package/processors/splitDescription.spec.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Fprocessors%2FsplitDescription.spec.js",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Fprocessors%2FsplitDescription.spec.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Fprocessors%2FsplitDescription.spec.js?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "previous_filename": "aio/tools/transforms/angular-api-package/processors/splitDescription.spec.js"
        },
        {
            "sha": "961b7277396b8e0a3d6a3843d404346903639cfa",
            "filename": "aio/tools/transforms/angular-errors-package/index.js",
            "status": "added",
            "additions": 87,
            "deletions": 0,
            "changes": 87,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Findex.js",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Findex.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Findex.js?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -0,0 +1,87 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+const path = require('canonical-path');\n+const Package = require('dgeni').Package;\n+const basePackage = require('../angular-base-package');\n+const contentPackage = require('../content-package');\n+const {CONTENTS_PATH, TEMPLATES_PATH, requireFolder} = require('../config');\n+\n+const errorPackage = new Package('angular-errors', [basePackage, contentPackage]);\n+errorPackage.factory(require('./readers/error'))\n+    .processor(require('./processors/processErrorDocs'))\n+    .processor(require('./processors/processErrorsContainerDoc'))\n+\n+    // Where do we find the error documentation files?\n+    .config(function(readFilesProcessor, errorFileReader) {\n+      readFilesProcessor.fileReaders.push(errorFileReader);\n+      readFilesProcessor.sourceFiles = readFilesProcessor.sourceFiles.concat([\n+        {\n+          basePath: CONTENTS_PATH,\n+          include: CONTENTS_PATH + '/errors/**/*.md',\n+          exclude: CONTENTS_PATH + '/errors/index.md',\n+          fileReader: 'errorFileReader'\n+        },\n+        {\n+          basePath: CONTENTS_PATH,\n+          include: CONTENTS_PATH + '/errors/index.md',\n+          fileReader: 'contentFileReader'\n+        },\n+      ]);\n+    })\n+\n+    // Here we compute the `id`, `code`, `aliases`, `path` and `outputPath` for the `error` docs.\n+    // * The `id` is the same as the `path` (the source path with the `.md` stripped off).\n+    // * The `code` is the id without any containing paths (currently all errors must be on the top\n+    // level).\n+    // * The `aliases` are used for automatic code linking and search terms.\n+    .config(function(computeIdsProcessor, computePathsProcessor) {\n+      computeIdsProcessor.idTemplates.push({\n+        docTypes: ['error'],\n+        getId: function(doc) {\n+          return doc.fileInfo\n+              .relativePath\n+              // strip off the extension\n+              .replace(/\\.\\w*$/, '');\n+        },\n+        getAliases: function(doc) {\n+          doc.code = path.basename(doc.id);\n+          return [doc.id, doc.code];\n+        }\n+      });\n+\n+      computePathsProcessor.pathTemplates = computePathsProcessor.pathTemplates.concat([\n+        {\n+          docTypes: ['error'],\n+          getPath: (doc) => doc.id,\n+          outputPathTemplate: '${path}.json',\n+        },\n+      ]);\n+    })\n+\n+    // Configure jsdoc-style tag parsing\n+    .config(function(parseTagsProcessor, getInjectables) {\n+      // Load up all the tag definitions in the tag-defs folder\n+      parseTagsProcessor.tagDefinitions = parseTagsProcessor.tagDefinitions.concat(\n+          getInjectables(requireFolder(__dirname, './tag-defs')));\n+    })\n+\n+    // The templates that define how the `error` and `error-container` doc-types are rendered are\n+    // found in the `TEMPLATES_PATH/error` directory.\n+    .config(function(templateFinder) {\n+      templateFinder.templateFolders.unshift(path.resolve(TEMPLATES_PATH, 'error'));\n+    })\n+\n+    // The AIO application expects content files to be provided as JSON files that it requests via\n+    // HTTP. So here we tell the `convertToJsonProcessor` to include docs of type `error` in those\n+    // that it converts.\n+    .config(function(convertToJsonProcessor, postProcessHtml) {\n+      convertToJsonProcessor.docTypes.push('error');\n+      postProcessHtml.docTypes.push('error');\n+    });\n+\n+module.exports = errorPackage;\n\\ No newline at end of file"
        },
        {
            "sha": "ca661fcfd224bd02579a7bca894b91589143822f",
            "filename": "aio/tools/transforms/angular-errors-package/processors/processErrorDocs.js",
            "status": "added",
            "additions": 55,
            "deletions": 0,
            "changes": 55,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Fprocessors%2FprocessErrorDocs.js",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Fprocessors%2FprocessErrorDocs.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Fprocessors%2FprocessErrorDocs.js?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -0,0 +1,55 @@\n+module.exports = function processErrorDocs(createDocMessage) {\n+  return {\n+    $runAfter: ['extra-docs-added'],\n+    $runBefore: ['rendering-docs'],\n+    $process(docs) {\n+      const navigationDoc = docs.find(doc => doc.docType === 'navigation-json');\n+      const errorsNode = navigationDoc && findErrorsNode(navigationDoc.data['SideNav']);\n+\n+      if (!errorsNode) {\n+        throw new Error(createDocMessage(\n+            'Missing `errors` url - This node is needed as a place to insert the generated errors docs.',\n+            navigationDoc));\n+      }\n+\n+      docs.forEach(doc => {\n+        if (doc.docType === 'error') {\n+          // Add to navigation doc\n+          const title = `${doc.code}: ${doc.name}`;\n+          errorsNode.children.push({url: doc.path, title: title, tooltip: doc.name});\n+        }\n+      });\n+    },\n+  };\n+};\n+\n+/**\n+ * Look for the `errors` navigation node. It is the node whose first child has `url: 'errors'`.\n+ * (NOTE: Using the URL instead of the title, because it is more robust.)\n+ *\n+ * We will \"recursively\" check all navigation nodes and their children (in breadth-first order),\n+ * until we find the `errors` node. Keep a list of nodes lists to check.\n+ * (NOTE: Each item in the list is a LIST of nodes.)\n+ */\n+function findErrorsNode(nodes) {\n+  const nodesList = [nodes];\n+\n+  while (nodesList.length > 0) {\n+    // Get the first item from the list of nodes lists.\n+    const currentNodes = nodesList.shift();\n+    const errorsNode = currentNodes.find(isErrorsNode);\n+\n+    // One of the nodes in `currentNodes` was the `errors` node. Return it.\n+    if (errorsNode) return errorsNode;\n+\n+    // The `errors` node is not in `currentNodes`. Check each node's children (if any).\n+    currentNodes.forEach(node => node.children && nodesList.push(node.children));\n+  }\n+\n+  // We checked all navigation nodes and their children and did not find the `errors` node.\n+  return undefined;\n+}\n+\n+function isErrorsNode(node) {\n+  return node.children && node.children.length && node.children[0].url === 'errors';\n+}"
        },
        {
            "sha": "908f0003a6aaa5048ba94a9b37173ffce032733d",
            "filename": "aio/tools/transforms/angular-errors-package/processors/processErrorDocs.spec.js",
            "status": "added",
            "additions": 125,
            "deletions": 0,
            "changes": 125,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Fprocessors%2FprocessErrorDocs.spec.js",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Fprocessors%2FprocessErrorDocs.spec.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Fprocessors%2FprocessErrorDocs.spec.js?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -0,0 +1,125 @@\n+const testPackage = require('../../helpers/test-package');\n+const Dgeni = require('dgeni');\n+\n+describe('processErrorDocs processor', () => {\n+  let dgeni, injector, processor, createDocMessage;\n+\n+  beforeEach(() => {\n+    dgeni = new Dgeni([testPackage('angular-errors-package')]);\n+    injector = dgeni.configureInjector();\n+    processor = injector.get('processErrorDocs');\n+    createDocMessage = injector.get('createDocMessage');\n+  });\n+\n+  it('should be available on the injector', () => {\n+    expect(processor.$process).toBeDefined();\n+  });\n+\n+  it('should run after the correct processor', () => {\n+    expect(processor.$runAfter).toEqual(['extra-docs-added']);\n+  });\n+\n+  it('should run before the correct processor', () => {\n+    expect(processor.$runBefore).toEqual(['rendering-docs']);\n+  });\n+\n+  it('should add the error to the `errors` node in the navigation doc if there is a top level node with a `errors` url',\n+     () => {\n+       const errorDoc = {\n+         docType: 'error',\n+         name: 'error1',\n+         code: '888',\n+         path: 'errors/error1',\n+       };\n+       const navigation = {\n+         docType: 'navigation-json',\n+         data: {\n+           SideNav: [\n+             {url: 'some/page', title: 'Some Page'},\n+             {\n+               title: 'Errors',\n+               children: [{'title': 'Overview', 'url': 'errors'}],\n+             },\n+             {url: 'other/page', title: 'Other Page'},\n+           ],\n+         },\n+       };\n+       processor.$process([errorDoc, navigation]);\n+       expect(navigation.data.SideNav[1].title).toEqual('Errors');\n+       expect(navigation.data.SideNav[1].children).toEqual([\n+         {url: 'errors', title: 'Overview'},\n+         {url: 'errors/error1', title: '888: error1', tooltip: 'error1'},\n+       ]);\n+     });\n+\n+  it('should detect the `errors` node if it is nested in another node', () => {\n+    const errorDoc = {\n+      docType: 'error',\n+      name: 'error1',\n+      code: '888',\n+      path: 'errors/error1',\n+    };\n+    const navigation = {\n+      docType: 'navigation-json',\n+      data: {\n+        SideNav: [\n+          {url: 'some/page', title: 'Some Page'},\n+          {\n+            title: 'Errors Grandparent',\n+            children: [\n+              {url: 'some/nested/page', title: 'Some Nested Page'},\n+              {\n+                title: 'Errors Parent',\n+                children: [\n+                  {url: 'some/more/nested/page', title: 'Some More Nested Page'},\n+                  {\n+                    title: 'Errors',\n+                    children: [{'title': 'Overview', 'url': 'errors'}],\n+                  },\n+                  {url: 'other/more/nested/page', title: 'Other More Nested Page'},\n+                ],\n+              },\n+              {url: 'other/nested/page', title: 'Other Nested Page'},\n+            ],\n+          },\n+          {url: 'other/page', title: 'Other Page'},\n+        ],\n+      },\n+    };\n+\n+    processor.$process([errorDoc, navigation]);\n+\n+    const errorsContainerNode = navigation.data.SideNav[1].children[1].children[1];\n+    expect(errorsContainerNode.title).toEqual('Errors');\n+    expect(errorsContainerNode.children).toEqual([\n+      {url: 'errors', title: 'Overview'},\n+      {url: 'errors/error1', title: '888: error1', tooltip: 'error1'},\n+    ]);\n+  });\n+\n+  it('should complain if there is no child with `errors` url', () => {\n+    const errorDoc = {\n+      docType: 'error',\n+      name: 'error1',\n+      code: '888',\n+      path: 'errors/error1',\n+    };\n+    const navigation = {\n+      docType: 'navigation-json',\n+      data: {\n+        SideNav: [\n+          {url: 'some/page', title: 'Some Page'}, {\n+            title: 'Errors',\n+            tooltip: 'Angular Error reference',\n+            children: [{'title': 'Overview', 'url': 'not-errors'}]\n+          },\n+          {url: 'other/page', title: 'Other Page'}\n+        ]\n+      }\n+    };\n+    expect(() => processor.$process([errorDoc, navigation]))\n+        .toThrowError(createDocMessage(\n+            'Missing `errors` url - This node is needed as a place to insert the generated errors docs.',\n+            navigation));\n+  });\n+});"
        },
        {
            "sha": "876674beff8a1ad3cb7a97ea4098f991c37d0906",
            "filename": "aio/tools/transforms/angular-errors-package/processors/processErrorsContainerDoc.js",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Fprocessors%2FprocessErrorsContainerDoc.js",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Fprocessors%2FprocessErrorsContainerDoc.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Fprocessors%2FprocessErrorsContainerDoc.js?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -0,0 +1,11 @@\n+module.exports = function processErrorsContainerDoc() {\n+  return {\n+    $runAfter: ['extra-docs-added'],\n+    $runBefore: ['rendering-docs'],\n+    $process(docs) {\n+      const errorsDoc = docs.find(doc => doc.id === 'errors/index');\n+      errorsDoc.id = 'errors-container';\n+      errorsDoc.errors = docs.filter(doc => doc.docType === 'error');\n+    }\n+  };\n+};"
        },
        {
            "sha": "ef8cb172763f457dae4aa9d22cc106ea645d4615",
            "filename": "aio/tools/transforms/angular-errors-package/processors/processErrorsContainerDoc.spec.js",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Fprocessors%2FprocessErrorsContainerDoc.spec.js",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Fprocessors%2FprocessErrorsContainerDoc.spec.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Fprocessors%2FprocessErrorsContainerDoc.spec.js?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -0,0 +1,22 @@\n+const testPackage = require('../../helpers/test-package');\n+const processorFactory = require('./processErrorsContainerDoc');\n+const Dgeni = require('dgeni');\n+\n+describe('processErrorsContainerDoc processor', () => {\n+  it('should be available on the injector', () => {\n+    const dgeni = new Dgeni([testPackage('angular-errors-package')]);\n+    const injector = dgeni.configureInjector();\n+    const processor = injector.get('processErrorsContainerDoc');\n+    expect(processor.$process).toBeDefined();\n+  });\n+\n+  it('should run after the correct processor', () => {\n+    const processor = processorFactory();\n+    expect(processor.$runAfter).toEqual(['extra-docs-added']);\n+  });\n+\n+  it('should run before the correct processor', () => {\n+    const processor = processorFactory();\n+    expect(processor.$runBefore).toEqual(['rendering-docs']);\n+  });\n+});"
        },
        {
            "sha": "1a974ba02ab0279159ab775d92abe29f2aa108c5",
            "filename": "aio/tools/transforms/angular-errors-package/readers/error.js",
            "status": "added",
            "additions": 23,
            "deletions": 0,
            "changes": 23,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Freaders%2Ferror.js",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Freaders%2Ferror.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Freaders%2Ferror.js?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -0,0 +1,23 @@\n+/**\n+ * @dgService\n+ * @description\n+ * This file reader will pull the contents from a text file (by default .md)\n+ *\n+ * The doc will initially have the form:\n+ * ```\n+ * {\n+ *   docType: 'error',\n+ *   content: 'the content of the file',\n+ * }\n+ * ```\n+ */\n+module.exports = function errorFileReader() {\n+  return {\n+    name: 'errorFileReader',\n+    defaultPattern: /\\.md$/,\n+    getDocs: function(fileInfo) {\n+      // We return a single element array because content files only contain one document\n+      return [{docType: 'error', content: fileInfo.content}];\n+    }\n+  };\n+};"
        },
        {
            "sha": "bfc07b20731f79dc2d05b21f45b47514c2bf05cc",
            "filename": "aio/tools/transforms/angular-errors-package/readers/error.spec.js",
            "status": "added",
            "additions": 44,
            "deletions": 0,
            "changes": 44,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Freaders%2Ferror.spec.js",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Freaders%2Ferror.spec.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Freaders%2Ferror.spec.js?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -0,0 +1,44 @@\n+const Dgeni = require('dgeni');\n+const path = require('canonical-path');\n+const testPackage = require('../../helpers/test-package');\n+\n+describe('errorFileReader', () => {\n+  let dgeni, injector, fileReader;\n+\n+  beforeEach(() => {\n+    dgeni = new Dgeni([testPackage('angular-errors-package', false)]);\n+    injector = dgeni.configureInjector();\n+    fileReader = injector.get('errorFileReader');\n+  });\n+\n+  function createFileInfo(file, content, basePath) {\n+    return {\n+      fileReader: fileReader.name,\n+      filePath: file,\n+      baseName: path.basename(file, path.extname(file)),\n+      extension: path.extname(file).replace(/^\\./, ''),\n+      basePath: basePath,\n+      relativePath: path.relative(basePath, file),\n+      content: content\n+    };\n+  }\n+\n+  describe('defaultPattern', () => {\n+    it('should match .md files', () => {\n+      expect(fileReader.defaultPattern.test('abc.md')).toBeTruthy();\n+      expect(fileReader.defaultPattern.test('abc.js')).toBeFalsy();\n+    });\n+  });\n+\n+\n+  describe('getDocs', () => {\n+    it('should return an object containing info about the file and its contents', () => {\n+      const fileInfo = createFileInfo(\n+          'project/path/modules/someModule/foo/docs/subfolder/bar.md', 'A load of content',\n+          'project/path');\n+      expect(fileReader.getDocs(fileInfo)).toEqual([\n+        {docType: 'error', content: 'A load of content'}\n+      ]);\n+    });\n+  });\n+});"
        },
        {
            "sha": "51619bc7824f3ca58f683cb9eb4ad1052bbd42d1",
            "filename": "aio/tools/transforms/angular-errors-package/tag-defs/category.js",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Ftag-defs%2Fcategory.js",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Ftag-defs%2Fcategory.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Ftag-defs%2Fcategory.js?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -0,0 +1,3 @@\n+module.exports = function() {\n+  return {name: 'category'};\n+};"
        },
        {
            "sha": "c6e46e70549c756daf7f379874a7d129efd2357c",
            "filename": "aio/tools/transforms/angular-errors-package/tag-defs/debugging.js",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Ftag-defs%2Fdebugging.js",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Ftag-defs%2Fdebugging.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Ftag-defs%2Fdebugging.js?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -0,0 +1,3 @@\n+module.exports = function() {\n+  return {name: 'debugging'};\n+};"
        },
        {
            "sha": "60a54b99c9a39c091823f80ad539603d4adcaffd",
            "filename": "aio/tools/transforms/angular-errors-package/tag-defs/shortDescription.js",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Ftag-defs%2FshortDescription.js",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Ftag-defs%2FshortDescription.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-errors-package%2Ftag-defs%2FshortDescription.js?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -0,0 +1,3 @@\n+module.exports = function() {\n+  return {name: 'shortDescription'};\n+};"
        },
        {
            "sha": "139937e839d232800add5d47195c0711e9c26005",
            "filename": "aio/tools/transforms/angular.io-package/index.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular.io-package%2Findex.js",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Fangular.io-package%2Findex.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular.io-package%2Findex.js?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -9,12 +9,13 @@ const Package = require('dgeni').Package;\n const gitPackage = require('dgeni-packages/git');\n const apiPackage = require('../angular-api-package');\n const contentPackage = require('../angular-content-package');\n+const errorsPackage = require('../angular-errors-package');\n const cliDocsPackage = require('../cli-docs-package');\n const { extname, resolve } = require('canonical-path');\n const { existsSync } = require('fs');\n const { SRC_PATH } = require('../config');\n \n-module.exports = new Package('angular.io', [gitPackage, apiPackage, contentPackage, cliDocsPackage])\n+module.exports = new Package('angular.io', [gitPackage, apiPackage, contentPackage, cliDocsPackage, errorsPackage])\n \n   // This processor relies upon the versionInfo. See below...\n   .processor(require('./processors/processNavigationMap'))"
        },
        {
            "sha": "514b8f1c327155035918ba89034ceb92d7eab703",
            "filename": "aio/tools/transforms/templates/error/error.template.html",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Ftemplates%2Ferror%2Ferror.template.html",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Ftemplates%2Ferror%2Ferror.template.html",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Ftemplates%2Ferror%2Ferror.template.html?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -0,0 +1,18 @@\n+{% import \"lib/githubLinks.html\" as github -%}\n+\n+<h1>{$ doc.code $}: {$ doc.shortDescription $}</h1>\n+<div class=\"github-links\">\n+  {$ github.githubEditLink(doc, versionInfo) $}\n+</div>\n+\n+{% block content %}\n+<div class=\"content\">\n+  <h2>Description</h2>\n+  {$ doc.description | marked $}\n+</div>\n+<br>\n+<div class=\"debugging\">\n+  <h2>Debugging the error</h2>\n+  {$ doc.debugging | marked $}\n+</div>\n+{% endblock %}\n\\ No newline at end of file"
        },
        {
            "sha": "606a9f671621988189775e9925381f436ff4fedb",
            "filename": "aio/tools/transforms/templates/error/errors-container.template.html",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Ftemplates%2Ferror%2Ferrors-container.template.html",
            "raw_url": "https://github.com/angular/angular/raw/fbfd4889a9e2691eeda1a32df52996225e235c28/aio%2Ftools%2Ftransforms%2Ftemplates%2Ferror%2Ferrors-container.template.html",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Ftemplates%2Ferror%2Ferrors-container.template.html?ref=fbfd4889a9e2691eeda1a32df52996225e235c28",
            "patch": "@@ -0,0 +1,18 @@\n+{% extends 'content.template.html' -%}\n+\n+{% block content %}\n+<div class=\"content\">\n+  {$ doc.description | marked $}\n+</div>\n+\n+<ul class=\"error-list\">\n+  {% for error in doc.errors %}\n+  <li>\n+    <a class=\"code-anchor\" href=\"{$ error.path $}\">\n+      <span class=\"symbol {$ error.category $}\"></span>\n+      <code class=\"no-auto-link\">{$ error.code $}: {$ error.name $}</code>\n+    </a>\n+  </li>\n+  {% endfor %}\n+</ul>\n+{% endblock %}\n\\ No newline at end of file"
        }
    ],
    "stats": {
        "total": 549,
        "additions": 518,
        "deletions": 31
    }
}