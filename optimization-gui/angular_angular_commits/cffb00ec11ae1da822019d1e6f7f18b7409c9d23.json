{
    "author": "josephperrott",
    "message": "build: update bazel rules_nodejs to 2.3.3 (#40581)\n\nUpdates to rules_nodejs@2.3.3 to take advantage of windows specific fixes.\nrules_nodejs@2.3.3 was created as a patch specifically with a fix for\nthe issues we found updating to rules_nodejs@2.2.2.\n\nPR Close #40581",
    "sha": "cffb00ec11ae1da822019d1e6f7f18b7409c9d23",
    "files": [
        {
            "sha": "abc0a58541ee5ea60dab966b6ccb609dc2f23d27",
            "filename": "WORKSPACE",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/cffb00ec11ae1da822019d1e6f7f18b7409c9d23/WORKSPACE",
            "raw_url": "https://github.com/angular/angular/raw/cffb00ec11ae1da822019d1e6f7f18b7409c9d23/WORKSPACE",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/WORKSPACE?ref=cffb00ec11ae1da822019d1e6f7f18b7409c9d23",
            "patch": "@@ -8,8 +8,8 @@ load(\"@bazel_tools//tools/build_defs/repo:http.bzl\", \"http_archive\")\n # Fetch rules_nodejs so we can install our npm dependencies\n http_archive(\n     name = \"build_bazel_rules_nodejs\",\n-    sha256 = \"4952ef879704ab4ad6729a29007e7094aef213ea79e9f2e94cbe1c9a753e63ef\",\n-    urls = [\"https://github.com/bazelbuild/rules_nodejs/releases/download/2.2.0/rules_nodejs-2.2.0.tar.gz\"],\n+    sha256 = \"9d93d4e1340c43dbf6b2fd66b683d89630a6310bf8be3bf40ec96685dcacc26c\",\n+    urls = [\"https://github.com/bazelbuild/rules_nodejs/releases/download/2.3.3/rules_nodejs-2.3.3.tar.gz\"],\n )\n \n # Check the rules_nodejs version and download npm dependencies"
        },
        {
            "sha": "cf0da16cf6d155863674d0ba13dd2df7b5366d8b",
            "filename": "integration/bazel/WORKSPACE",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/cffb00ec11ae1da822019d1e6f7f18b7409c9d23/integration%2Fbazel%2FWORKSPACE",
            "raw_url": "https://github.com/angular/angular/raw/cffb00ec11ae1da822019d1e6f7f18b7409c9d23/integration%2Fbazel%2FWORKSPACE",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/integration%2Fbazel%2FWORKSPACE?ref=cffb00ec11ae1da822019d1e6f7f18b7409c9d23",
            "patch": "@@ -5,8 +5,8 @@ load(\"@bazel_tools//tools/build_defs/repo:http.bzl\", \"http_archive\")\n # Fetch rules_nodejs so we can install our npm dependencies\n http_archive(\n     name = \"build_bazel_rules_nodejs\",\n-    sha256 = \"4952ef879704ab4ad6729a29007e7094aef213ea79e9f2e94cbe1c9a753e63ef\",\n-    urls = [\"https://github.com/bazelbuild/rules_nodejs/releases/download/2.2.0/rules_nodejs-2.2.0.tar.gz\"],\n+    sha256 = \"9d93d4e1340c43dbf6b2fd66b683d89630a6310bf8be3bf40ec96685dcacc26c\",\n+    urls = [\"https://github.com/bazelbuild/rules_nodejs/releases/download/2.3.3/rules_nodejs-2.3.3.tar.gz\"],\n )\n \n # Fetch sass rules for compiling sass files"
        },
        {
            "sha": "442013ef5a780443eeece804c49ba8c0d1c4fa29",
            "filename": "integration/bazel/package.json",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/cffb00ec11ae1da822019d1e6f7f18b7409c9d23/integration%2Fbazel%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/cffb00ec11ae1da822019d1e6f7f18b7409c9d23/integration%2Fbazel%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/integration%2Fbazel%2Fpackage.json?ref=cffb00ec11ae1da822019d1e6f7f18b7409c9d23",
            "patch": "@@ -23,11 +23,11 @@\n     \"@angular/compiler\": \"file:../../dist/packages-dist/compiler\",\n     \"@angular/compiler-cli\": \"file:../../dist/packages-dist/compiler-cli\",\n     \"@bazel/bazelisk\": \"file:../../node_modules/@bazel/bazelisk\",\n-    \"@bazel/karma\": \"2.2.0\",\n-    \"@bazel/protractor\": \"2.2.0\",\n-    \"@bazel/rollup\": \"2.2.0\",\n-    \"@bazel/terser\": \"2.2.0\",\n-    \"@bazel/typescript\": \"2.2.0\",\n+    \"@bazel/karma\": \"2.3.3\",\n+    \"@bazel/protractor\": \"2.3.3\",\n+    \"@bazel/rollup\": \"2.3.3\",\n+    \"@bazel/terser\": \"2.3.3\",\n+    \"@bazel/typescript\": \"2.3.3\",\n     \"@types/jasmine\": \"2.8.8\",\n     \"http-server\": \"0.12.0\",\n     \"karma\": \"4.4.1\","
        },
        {
            "sha": "a280632b7a8c3fb76a9d6ffa08c773d7e92d70ec",
            "filename": "package.json",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/cffb00ec11ae1da822019d1e6f7f18b7409c9d23/package.json",
            "raw_url": "https://github.com/angular/angular/raw/cffb00ec11ae1da822019d1e6f7f18b7409c9d23/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=cffb00ec11ae1da822019d1e6f7f18b7409c9d23",
            "patch": "@@ -52,12 +52,12 @@\n     \"@babel/template\": \"^7.8.6\",\n     \"@babel/traverse\": \"^7.8.6\",\n     \"@babel/types\": \"^7.8.6\",\n-    \"@bazel/jasmine\": \"2.3.1\",\n-    \"@bazel/karma\": \"2.3.1\",\n-    \"@bazel/protractor\": \"2.3.1\",\n-    \"@bazel/rollup\": \"2.3.1\",\n-    \"@bazel/terser\": \"2.3.1\",\n-    \"@bazel/typescript\": \"2.3.1\",\n+    \"@bazel/jasmine\": \"2.3.3\",\n+    \"@bazel/karma\": \"2.3.3\",\n+    \"@bazel/protractor\": \"2.3.3\",\n+    \"@bazel/rollup\": \"2.3.3\",\n+    \"@bazel/terser\": \"2.3.3\",\n+    \"@bazel/typescript\": \"2.3.3\",\n     \"@microsoft/api-extractor\": \"7.7.11\",\n     \"@octokit/rest\": \"16.28.7\",\n     \"@octokit/types\": \"^5.0.1\","
        },
        {
            "sha": "6f28d7db878508b1cd0d34b50c77a87cb7b749f3",
            "filename": "packages/bazel/index.bzl",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/cffb00ec11ae1da822019d1e6f7f18b7409c9d23/packages%2Fbazel%2Findex.bzl",
            "raw_url": "https://github.com/angular/angular/raw/cffb00ec11ae1da822019d1e6f7f18b7409c9d23/packages%2Fbazel%2Findex.bzl",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fbazel%2Findex.bzl?ref=cffb00ec11ae1da822019d1e6f7f18b7409c9d23",
            "patch": "@@ -7,7 +7,7 @@\n Users should not load files under \"/src\"\n \"\"\"\n \n-load(\"//packages/bazel/src/ng_package:ng_package.bzl\", _ng_package = \"ng_package\")\n+load(\"//packages/bazel/src/ng_package:ng_package.bzl\", _ng_package = \"ng_package_macro\")\n load(\"//packages/bazel/src:ng_module.bzl\", _ng_module = \"ng_module_macro\")\n \n ng_module = _ng_module"
        },
        {
            "sha": "f0a07a848e000c8b805a91531df5f34a5073ba95",
            "filename": "packages/bazel/src/ng_package/ng_package.bzl",
            "status": "modified",
            "additions": 20,
            "deletions": 0,
            "changes": 20,
            "blob_url": "https://github.com/angular/angular/blob/cffb00ec11ae1da822019d1e6f7f18b7409c9d23/packages%2Fbazel%2Fsrc%2Fng_package%2Fng_package.bzl",
            "raw_url": "https://github.com/angular/angular/raw/cffb00ec11ae1da822019d1e6f7f18b7409c9d23/packages%2Fbazel%2Fsrc%2Fng_package%2Fng_package.bzl",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fbazel%2Fsrc%2Fng_package%2Fng_package.bzl?ref=cffb00ec11ae1da822019d1e6f7f18b7409c9d23",
            "patch": "@@ -811,3 +811,23 @@ ng_package = rule(\n \"\"\"\n ng_package produces an npm-ready package from an Angular library.\n \"\"\"\n+\n+def ng_package_macro(name, **kwargs):\n+    ng_package(\n+        name = name,\n+        **kwargs\n+    )\n+    native.alias(\n+        name = name + \".pack\",\n+        actual = select({\n+            \"@bazel_tools//src/conditions:host_windows\": name + \".pack.bat\",\n+            \"//conditions:default\": name + \".pack.sh\",\n+        }),\n+    )\n+    native.alias(\n+        name = name + \".publish\",\n+        actual = select({\n+            \"@bazel_tools//src/conditions:host_windows\": name + \".publish.bat\",\n+            \"//conditions:default\": name + \".publish.sh\",\n+        }),\n+    )"
        },
        {
            "sha": "351df8af919a0032a5d0ebca10b1d8d565aba012",
            "filename": "yarn.lock",
            "status": "modified",
            "additions": 24,
            "deletions": 24,
            "changes": 48,
            "blob_url": "https://github.com/angular/angular/blob/cffb00ec11ae1da822019d1e6f7f18b7409c9d23/yarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/cffb00ec11ae1da822019d1e6f7f18b7409c9d23/yarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/yarn.lock?ref=cffb00ec11ae1da822019d1e6f7f18b7409c9d23",
            "patch": "@@ -1972,38 +1972,38 @@\n   resolved \"https://registry.yarnpkg.com/@bazel/ibazel/-/ibazel-0.12.4.tgz#ddda7c8ead6e29dc8d637af446086a750f395218\"\n   integrity sha512-FzOy+esB/fXVDbAmL6Ce2yCEy+PESZih8GypKhi0B8XzoZHAAn3QNnQcMNwo9PrIfp3G1989nM/JQ1b8jwEinQ==\n \n-\"@bazel/jasmine@2.3.1\":\n-  version \"2.3.1\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/jasmine/-/jasmine-2.3.1.tgz#e4df8dd2b8d906e41e4073b5c49c700a962fe853\"\n-  integrity sha512-6QYTfJfbwPxCvKu4rOhG1YZUm94MbG4K2Dq1q2A2OUiM0eqAZG8T1HJAswDh7L286r5x9nRX8h7Pb7CyJvSmbg==\n+\"@bazel/jasmine@2.3.3\":\n+  version \"2.3.3\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/jasmine/-/jasmine-2.3.3.tgz#7221c3704e63a4b8b19a9c7c9dec4b0337f302e0\"\n+  integrity sha512-YAXSCSBQ51/Ep+PAIro9WnO1c47on4KJ3ISMLbBoowIsWVhXIRGVLUoRivIRE89yKX2vHE1+4OuwYpywgRQOZw==\n   dependencies:\n     c8 \"~7.1.0\"\n     jasmine-reporters \"~2.3.2\"\n \n-\"@bazel/karma@2.3.1\":\n-  version \"2.3.1\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/karma/-/karma-2.3.1.tgz#9a52128cefc4e061fc4e934c4918d7a3e17b1007\"\n-  integrity sha512-4w1aS3qaKY8eekyDujAFD7xsM+z0rCsEofs8QliEmZaF+RCKw+QsxWEMrxIXkdoftcQS+MBatAoSDhHbl47VpQ==\n+\"@bazel/karma@2.3.3\":\n+  version \"2.3.3\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/karma/-/karma-2.3.3.tgz#063192e597ec4bd7bf2b80bf6bc5d7e2013e2002\"\n+  integrity sha512-qetKRmK0abViVDZH6okAXlDsFgr5btdwrWngjStlGDHHaTR23ORNilPIUTLrbwyIgy6qHlMdGrTp9KVXGGK6sQ==\n \n-\"@bazel/protractor@2.3.1\":\n-  version \"2.3.1\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/protractor/-/protractor-2.3.1.tgz#470c280841f5ec91b0a80d2ffb692841a125e240\"\n-  integrity sha512-1MF3JlGE6HyYzPFXJBFnv5eEOuTuXhsJT70g66+lMgPZ9g0uUPh6CPu/iUkT6/92sw+pHGUsaptxwNu89Z7Dag==\n+\"@bazel/protractor@2.3.3\":\n+  version \"2.3.3\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/protractor/-/protractor-2.3.3.tgz#44eca70d159d3e5a67654683f81266cc3594ce5a\"\n+  integrity sha512-06EFGstTshvofjiUd1ZJJepGeTgkLZNZB9Bfb7IhMC/ca1ZaeKB8SRWHhiPw7wN1QojHf4JJ+uhbqDt60m+Xrg==\n \n-\"@bazel/rollup@2.3.1\":\n-  version \"2.3.1\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/rollup/-/rollup-2.3.1.tgz#30265ac682149e82f3a4a0cfda216f3d860e7373\"\n-  integrity sha512-KyMIYr8UV1MkwdW+2HUnwUNAddFhETM8OSaaOQK5I7hV4XKjBzc2EZstt4HRcNtsVF5Lnsi7Arb8xjbBdXTqvw==\n+\"@bazel/rollup@2.3.3\":\n+  version \"2.3.3\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/rollup/-/rollup-2.3.3.tgz#ecefb4e23b3fd63c6f36f925a98bcfc5436f7fa6\"\n+  integrity sha512-8KsW+0GpYPMV1jKiEuAZhBm2wMcU3gKjCxasXqdXTSYDyuwE4n/aihuPxSBSWpJ82Gv4MBBkSmieFZ+s9nVoBw==\n \n-\"@bazel/terser@2.3.1\":\n-  version \"2.3.1\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/terser/-/terser-2.3.1.tgz#c1aa0e88988d913be61d601e581a60c3bf771e06\"\n-  integrity sha512-G0I7niJyQzDFx+Z4WlA19g8SQuWpfMKbMHi+e94NHVYYpoUF0nRhLfysvNx5Kx5J6/N2gErmtwYsTQpRUI/vCQ==\n+\"@bazel/terser@2.3.3\":\n+  version \"2.3.3\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/terser/-/terser-2.3.3.tgz#680cedce0569291534ee832f76cae078948c4a7d\"\n+  integrity sha512-0PytwAoKO4Yqbfgm3HKzkLF7mycj1O10jndg7Sz8Z20yWmU35087ssULFzFy3sXehKSypFeV+PVJ3eO824/0OQ==\n \n-\"@bazel/typescript@2.3.1\":\n-  version \"2.3.1\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/typescript/-/typescript-2.3.1.tgz#f103c4a5230cabaffd8d574b7278265b5478f056\"\n-  integrity sha512-blgLpx+9Vh8DZWTVOYTWSk1HEU28FF+GwU1stFaemfY7/pUQfK/URb9FARRkw/v2UrPKCd9EBywFYQyPGSAb1A==\n+\"@bazel/typescript@2.3.3\":\n+  version \"2.3.3\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/typescript/-/typescript-2.3.3.tgz#8f238a6d395140cdc6ed6900f0861efb744ca91b\"\n+  integrity sha512-tkkrV1wrpMKj7gDlgloo/24lGmW5btHxzg9xqBZsXVvEfhr3HP9dU296bBxtdS1zZuORCxdIhh7D3iPonQDibg==\n   dependencies:\n     protobufjs \"6.8.8\"\n     semver \"5.6.0\""
        }
    ],
    "stats": {
        "total": 100,
        "additions": 60,
        "deletions": 40
    }
}