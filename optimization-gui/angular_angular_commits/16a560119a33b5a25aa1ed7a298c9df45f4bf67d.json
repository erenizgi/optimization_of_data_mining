{
    "author": "josephperrott",
    "message": "build: update to latest version of yarn (#38869)\n\nUpdate the vendored version of yarn to the latest version.\n\nPR Close #38869",
    "sha": "16a560119a33b5a25aa1ed7a298c9df45f4bf67d",
    "files": [
        {
            "sha": "d31be0b947fbb1ce010811303b84860450a313a5",
            "filename": ".yarn/releases/yarn-1.22.5.js",
            "status": "renamed",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/16a560119a33b5a25aa1ed7a298c9df45f4bf67d/.yarn%2Freleases%2Fyarn-1.22.5.js",
            "raw_url": "https://github.com/angular/angular/raw/16a560119a33b5a25aa1ed7a298c9df45f4bf67d/.yarn%2Freleases%2Fyarn-1.22.5.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.yarn%2Freleases%2Fyarn-1.22.5.js?ref=16a560119a33b5a25aa1ed7a298c9df45f4bf67d",
            "patch": "@@ -44654,7 +44654,7 @@ const FOLDERS_IGNORE = [\n const DEFAULT_IGNORE = (0, (_filter || _load_filter()).ignoreLinesToRegex)([...FOLDERS_IGNORE,\n \n // ignore cruft\n-'yarn.lock', '.lock-wscript', '.wafpickle-{0..9}', '*.swp', '._*', 'npm-debug.log', 'yarn-error.log', '.npmrc', '.yarnrc', '.npmignore', '.gitignore', '.DS_Store']);\n+'yarn.lock', '.lock-wscript', '.wafpickle-{0..9}', '*.swp', '._*', 'npm-debug.log', 'yarn-error.log', '.npmrc', '.yarnrc', '.yarnrc.yml', '.npmignore', '.gitignore', '.DS_Store']);\n \n const NEVER_IGNORE = (0, (_filter || _load_filter()).ignoreLinesToRegex)([\n // never ignore these files\n@@ -44663,6 +44663,7 @@ const NEVER_IGNORE = (0, (_filter || _load_filter()).ignoreLinesToRegex)([\n function packWithIgnoreAndHeaders(cwd, ignoreFunction, { mapHeader } = {}) {\n   return tar.pack(cwd, {\n     ignore: ignoreFunction,\n+    sort: true,\n     map: header => {\n       const suffix = header.name === '.' ? '' : `/${header.name}`;\n       header.name = `package${suffix}`;\n@@ -46678,7 +46679,7 @@ function mkdirfix (name, opts, cb) {\n /* 194 */\n /***/ (function(module, exports) {\n \n-module.exports = {\"name\":\"yarn\",\"installationMethod\":\"unknown\",\"version\":\"1.22.4\",\"license\":\"BSD-2-Clause\",\"preferGlobal\":true,\"description\":\"ðŸ“¦ðŸˆ Fast, reliable, and secure dependency management.\",\"dependencies\":{\"@zkochan/cmd-shim\":\"^3.1.0\",\"babel-runtime\":\"^6.26.0\",\"bytes\":\"^3.0.0\",\"camelcase\":\"^4.0.0\",\"chalk\":\"^2.1.0\",\"cli-table3\":\"^0.4.0\",\"commander\":\"^2.9.0\",\"death\":\"^1.0.0\",\"debug\":\"^3.0.0\",\"deep-equal\":\"^1.0.1\",\"detect-indent\":\"^5.0.0\",\"dnscache\":\"^1.0.1\",\"glob\":\"^7.1.1\",\"gunzip-maybe\":\"^1.4.0\",\"hash-for-dep\":\"^1.2.3\",\"imports-loader\":\"^0.8.0\",\"ini\":\"^1.3.4\",\"inquirer\":\"^6.2.0\",\"invariant\":\"^2.2.0\",\"is-builtin-module\":\"^2.0.0\",\"is-ci\":\"^1.0.10\",\"is-webpack-bundle\":\"^1.0.0\",\"js-yaml\":\"^3.13.1\",\"leven\":\"^2.0.0\",\"loud-rejection\":\"^1.2.0\",\"micromatch\":\"^2.3.11\",\"mkdirp\":\"^0.5.1\",\"node-emoji\":\"^1.6.1\",\"normalize-url\":\"^2.0.0\",\"npm-logical-tree\":\"^1.2.1\",\"object-path\":\"^0.11.2\",\"proper-lockfile\":\"^2.0.0\",\"puka\":\"^1.0.0\",\"read\":\"^1.0.7\",\"request\":\"^2.87.0\",\"request-capture-har\":\"^1.2.2\",\"rimraf\":\"^2.5.0\",\"semver\":\"^5.1.0\",\"ssri\":\"^5.3.0\",\"strip-ansi\":\"^4.0.0\",\"strip-bom\":\"^3.0.0\",\"tar-fs\":\"^1.16.0\",\"tar-stream\":\"^1.6.1\",\"uuid\":\"^3.0.1\",\"v8-compile-cache\":\"^2.0.0\",\"validate-npm-package-license\":\"^3.0.4\",\"yn\":\"^2.0.0\"},\"devDependencies\":{\"babel-core\":\"^6.26.0\",\"babel-eslint\":\"^7.2.3\",\"babel-loader\":\"^6.2.5\",\"babel-plugin-array-includes\":\"^2.0.3\",\"babel-plugin-inline-import\":\"^3.0.0\",\"babel-plugin-transform-builtin-extend\":\"^1.1.2\",\"babel-plugin-transform-inline-imports-commonjs\":\"^1.0.0\",\"babel-plugin-transform-runtime\":\"^6.4.3\",\"babel-preset-env\":\"^1.6.0\",\"babel-preset-flow\":\"^6.23.0\",\"babel-preset-stage-0\":\"^6.0.0\",\"babylon\":\"^6.5.0\",\"commitizen\":\"^2.9.6\",\"cz-conventional-changelog\":\"^2.0.0\",\"eslint\":\"^4.3.0\",\"eslint-config-fb-strict\":\"^22.0.0\",\"eslint-plugin-babel\":\"^5.0.0\",\"eslint-plugin-flowtype\":\"^2.35.0\",\"eslint-plugin-jasmine\":\"^2.6.2\",\"eslint-plugin-jest\":\"^21.0.0\",\"eslint-plugin-jsx-a11y\":\"^6.0.2\",\"eslint-plugin-prefer-object-spread\":\"^1.2.1\",\"eslint-plugin-prettier\":\"^2.1.2\",\"eslint-plugin-react\":\"^7.1.0\",\"eslint-plugin-relay\":\"^0.0.28\",\"eslint-plugin-yarn-internal\":\"file:scripts/eslint-rules\",\"execa\":\"^0.11.0\",\"fancy-log\":\"^1.3.2\",\"flow-bin\":\"^0.66.0\",\"git-release-notes\":\"^3.0.0\",\"gulp\":\"^4.0.0\",\"gulp-babel\":\"^7.0.0\",\"gulp-if\":\"^2.0.1\",\"gulp-newer\":\"^1.0.0\",\"gulp-plumber\":\"^1.0.1\",\"gulp-sourcemaps\":\"^2.2.0\",\"jest\":\"^22.4.4\",\"jsinspect\":\"^0.12.6\",\"minimatch\":\"^3.0.4\",\"mock-stdin\":\"^0.3.0\",\"prettier\":\"^1.5.2\",\"string-replace-loader\":\"^2.1.1\",\"temp\":\"^0.8.3\",\"webpack\":\"^2.1.0-beta.25\",\"yargs\":\"^6.3.0\"},\"resolutions\":{\"sshpk\":\"^1.14.2\"},\"engines\":{\"node\":\">=4.0.0\"},\"repository\":\"yarnpkg/yarn\",\"bin\":{\"yarn\":\"./bin/yarn.js\",\"yarnpkg\":\"./bin/yarn.js\"},\"scripts\":{\"build\":\"gulp build\",\"build-bundle\":\"node ./scripts/build-webpack.js\",\"build-chocolatey\":\"powershell ./scripts/build-chocolatey.ps1\",\"build-deb\":\"./scripts/build-deb.sh\",\"build-dist\":\"bash ./scripts/build-dist.sh\",\"build-win-installer\":\"scripts\\\\build-windows-installer.bat\",\"changelog\":\"git-release-notes $(git describe --tags --abbrev=0 $(git describe --tags --abbrev=0)^)..$(git describe --tags --abbrev=0) scripts/changelog.md\",\"dupe-check\":\"yarn jsinspect ./src\",\"lint\":\"eslint . && flow check\",\"pkg-tests\":\"yarn --cwd packages/pkg-tests jest yarn.test.js\",\"prettier\":\"eslint src __tests__ --fix\",\"release-branch\":\"./scripts/release-branch.sh\",\"test\":\"yarn lint && yarn test-only\",\"test-only\":\"node --max_old_space_size=4096 node_modules/jest/bin/jest.js --verbose\",\"test-only-debug\":\"node --inspect-brk --max_old_space_size=4096 node_modules/jest/bin/jest.js --runInBand --verbose\",\"test-coverage\":\"node --max_old_space_size=4096 node_modules/jest/bin/jest.js --coverage --verbose\",\"watch\":\"gulp watch\",\"commit\":\"git-cz\"},\"jest\":{\"collectCoverageFrom\":[\"src/**/*.js\"],\"testEnvironment\":\"node\",\"modulePathIgnorePatterns\":[\"__tests__/fixtures/\",\"packages/pkg-tests/pkg-tests-fixtures\",\"dist/\"],\"testPathIgnorePatterns\":[\"__tests__/(fixtures|__mocks__)/\",\"updates/\",\"_(temp|mock|install|init|helpers).js$\",\"packages/pkg-tests\"]},\"config\":{\"commitizen\":{\"path\":\"./node_modules/cz-conventional-changelog\"}}}\n+module.exports = {\"name\":\"yarn\",\"installationMethod\":\"unknown\",\"version\":\"1.22.5\",\"license\":\"BSD-2-Clause\",\"preferGlobal\":true,\"description\":\"ðŸ“¦ðŸˆ Fast, reliable, and secure dependency management.\",\"dependencies\":{\"@zkochan/cmd-shim\":\"^3.1.0\",\"babel-runtime\":\"^6.26.0\",\"bytes\":\"^3.0.0\",\"camelcase\":\"^4.0.0\",\"chalk\":\"^2.1.0\",\"cli-table3\":\"^0.4.0\",\"commander\":\"^2.9.0\",\"death\":\"^1.0.0\",\"debug\":\"^3.0.0\",\"deep-equal\":\"^1.0.1\",\"detect-indent\":\"^5.0.0\",\"dnscache\":\"^1.0.1\",\"glob\":\"^7.1.1\",\"gunzip-maybe\":\"^1.4.0\",\"hash-for-dep\":\"^1.2.3\",\"imports-loader\":\"^0.8.0\",\"ini\":\"^1.3.4\",\"inquirer\":\"^6.2.0\",\"invariant\":\"^2.2.0\",\"is-builtin-module\":\"^2.0.0\",\"is-ci\":\"^1.0.10\",\"is-webpack-bundle\":\"^1.0.0\",\"js-yaml\":\"^3.13.1\",\"leven\":\"^2.0.0\",\"loud-rejection\":\"^1.2.0\",\"micromatch\":\"^2.3.11\",\"mkdirp\":\"^0.5.1\",\"node-emoji\":\"^1.6.1\",\"normalize-url\":\"^2.0.0\",\"npm-logical-tree\":\"^1.2.1\",\"object-path\":\"^0.11.2\",\"proper-lockfile\":\"^2.0.0\",\"puka\":\"^1.0.0\",\"read\":\"^1.0.7\",\"request\":\"^2.87.0\",\"request-capture-har\":\"^1.2.2\",\"rimraf\":\"^2.5.0\",\"semver\":\"^5.1.0\",\"ssri\":\"^5.3.0\",\"strip-ansi\":\"^4.0.0\",\"strip-bom\":\"^3.0.0\",\"tar-fs\":\"^1.16.0\",\"tar-stream\":\"^1.6.1\",\"uuid\":\"^3.0.1\",\"v8-compile-cache\":\"^2.0.0\",\"validate-npm-package-license\":\"^3.0.4\",\"yn\":\"^2.0.0\"},\"devDependencies\":{\"babel-core\":\"^6.26.0\",\"babel-eslint\":\"^7.2.3\",\"babel-loader\":\"^6.2.5\",\"babel-plugin-array-includes\":\"^2.0.3\",\"babel-plugin-inline-import\":\"^3.0.0\",\"babel-plugin-transform-builtin-extend\":\"^1.1.2\",\"babel-plugin-transform-inline-imports-commonjs\":\"^1.0.0\",\"babel-plugin-transform-runtime\":\"^6.4.3\",\"babel-preset-env\":\"^1.6.0\",\"babel-preset-flow\":\"^6.23.0\",\"babel-preset-stage-0\":\"^6.0.0\",\"babylon\":\"^6.5.0\",\"commitizen\":\"^2.9.6\",\"cz-conventional-changelog\":\"^2.0.0\",\"eslint\":\"^4.3.0\",\"eslint-config-fb-strict\":\"^22.0.0\",\"eslint-plugin-babel\":\"^5.0.0\",\"eslint-plugin-flowtype\":\"^2.35.0\",\"eslint-plugin-jasmine\":\"^2.6.2\",\"eslint-plugin-jest\":\"^21.0.0\",\"eslint-plugin-jsx-a11y\":\"^6.0.2\",\"eslint-plugin-prefer-object-spread\":\"^1.2.1\",\"eslint-plugin-prettier\":\"^2.1.2\",\"eslint-plugin-react\":\"^7.1.0\",\"eslint-plugin-relay\":\"^0.0.28\",\"eslint-plugin-yarn-internal\":\"file:scripts/eslint-rules\",\"execa\":\"^0.11.0\",\"fancy-log\":\"^1.3.2\",\"flow-bin\":\"^0.66.0\",\"git-release-notes\":\"^3.0.0\",\"gulp\":\"^4.0.0\",\"gulp-babel\":\"^7.0.0\",\"gulp-if\":\"^2.0.1\",\"gulp-newer\":\"^1.0.0\",\"gulp-plumber\":\"^1.0.1\",\"gulp-sourcemaps\":\"^2.2.0\",\"jest\":\"^22.4.4\",\"jsinspect\":\"^0.12.6\",\"minimatch\":\"^3.0.4\",\"mock-stdin\":\"^0.3.0\",\"prettier\":\"^1.5.2\",\"string-replace-loader\":\"^2.1.1\",\"temp\":\"^0.8.3\",\"webpack\":\"^2.1.0-beta.25\",\"yargs\":\"^6.3.0\"},\"resolutions\":{\"sshpk\":\"^1.14.2\"},\"engines\":{\"node\":\">=4.0.0\"},\"repository\":\"yarnpkg/yarn\",\"bin\":{\"yarn\":\"./bin/yarn.js\",\"yarnpkg\":\"./bin/yarn.js\"},\"scripts\":{\"build\":\"gulp build\",\"build-bundle\":\"node ./scripts/build-webpack.js\",\"build-chocolatey\":\"powershell ./scripts/build-chocolatey.ps1\",\"build-deb\":\"./scripts/build-deb.sh\",\"build-dist\":\"bash ./scripts/build-dist.sh\",\"build-win-installer\":\"scripts\\\\build-windows-installer.bat\",\"changelog\":\"git-release-notes $(git describe --tags --abbrev=0 $(git describe --tags --abbrev=0)^)..$(git describe --tags --abbrev=0) scripts/changelog.md\",\"dupe-check\":\"yarn jsinspect ./src\",\"lint\":\"eslint . && flow check\",\"pkg-tests\":\"yarn --cwd packages/pkg-tests jest yarn.test.js\",\"prettier\":\"eslint src __tests__ --fix\",\"release-branch\":\"./scripts/release-branch.sh\",\"test\":\"yarn lint && yarn test-only\",\"test-only\":\"node --max_old_space_size=4096 node_modules/jest/bin/jest.js --verbose\",\"test-only-debug\":\"node --inspect-brk --max_old_space_size=4096 node_modules/jest/bin/jest.js --runInBand --verbose\",\"test-coverage\":\"node --max_old_space_size=4096 node_modules/jest/bin/jest.js --coverage --verbose\",\"watch\":\"gulp watch\",\"commit\":\"git-cz\"},\"jest\":{\"collectCoverageFrom\":[\"src/**/*.js\"],\"testEnvironment\":\"node\",\"modulePathIgnorePatterns\":[\"__tests__/fixtures/\",\"packages/pkg-tests/pkg-tests-fixtures\",\"dist/\"],\"testPathIgnorePatterns\":[\"__tests__/(fixtures|__mocks__)/\",\"updates/\",\"_(temp|mock|install|init|helpers).js$\",\"packages/pkg-tests\"]},\"config\":{\"commitizen\":{\"path\":\"./node_modules/cz-conventional-changelog\"}}}\n \n /***/ }),\n /* 195 */\n@@ -98338,7 +98339,7 @@ var _buildSubCommands = (0, (_buildSubCommands2 || _load_buildSubCommands()).def\n \n       const bundle = yield fetchBundle(config, bundleUrl);\n \n-      const yarnPath = path.resolve(config.lockfileFolder, `.yarn/releases/yarn-${bundleVersion}.js`);\n+      const yarnPath = path.resolve(config.lockfileFolder, `.yarn/releases/yarn-${bundleVersion}.cjs`);\n       reporter.log(`Saving it into ${chalk.magenta(yarnPath)}...`);\n       yield (_fs || _load_fs()).mkdirp(path.dirname(yarnPath));\n       yield (_fs || _load_fs()).writeFile(yarnPath, bundle);\n@@ -100190,7 +100191,7 @@ let main = exports.main = (() => {\n \n     const config = new (_config || _load_config()).default(reporter);\n     const outputWrapperEnabled = (0, (_conversion || _load_conversion()).boolifyWithDefault)(process.env.YARN_WRAP_OUTPUT, true);\n-    const shouldWrapOutput = outputWrapperEnabled && !(_commander || _load_commander()).default.json && command.hasWrapper((_commander || _load_commander()).default, (_commander || _load_commander()).default.args);\n+    const shouldWrapOutput = outputWrapperEnabled && !(_commander || _load_commander()).default.json && command.hasWrapper((_commander || _load_commander()).default, (_commander || _load_commander()).default.args) && !(commandName === 'init' && (_commander || _load_commander()).default[`2`]);\n \n     if (shouldWrapOutput) {\n       reporter.header(commandName, { name: 'yarn', version: (_yarnVersion || _load_yarnVersion()).version });\n@@ -100604,7 +100605,7 @@ let start = (() => {\n       });\n \n       try {\n-        if (yarnPath.endsWith(`.js`)) {\n+        if (/\\.[cm]?js$/.test(yarnPath)) {\n           exitCode = yield (0, (_child || _load_child()).spawnp)(process.execPath, [yarnPath, ...argv], opts);\n         } else {\n           exitCode = yield (0, (_child || _load_child()).spawnp)(yarnPath, argv, opts);",
            "previous_filename": ".yarn/releases/yarn-1.22.4.js"
        },
        {
            "sha": "54b28414542d9e46637dd4e36e6f677a4cd58fac",
            "filename": ".yarnrc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/16a560119a33b5a25aa1ed7a298c9df45f4bf67d/.yarnrc",
            "raw_url": "https://github.com/angular/angular/raw/16a560119a33b5a25aa1ed7a298c9df45f4bf67d/.yarnrc",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.yarnrc?ref=16a560119a33b5a25aa1ed7a298c9df45f4bf67d",
            "patch": "@@ -2,4 +2,4 @@\n # yarn lockfile v1\n \n \n-yarn-path \".yarn/releases/yarn-1.22.4.js\"\n+yarn-path \".yarn/releases/yarn-1.22.5.js\""
        }
    ],
    "stats": {
        "total": 13,
        "additions": 7,
        "deletions": 6
    }
}