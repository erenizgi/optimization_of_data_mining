{
    "author": "devversion",
    "message": "fix(dev-infra): missing `pkg_npm` substitution for top-level targets being accessed (#42754)\n\nCurrently if a top-level target or file within `//dev-infra` is\nbeing referenced. like `//dev-infra:tsconfig`, then the label\nis not subsituted properly and breaks consumption of the built\nNPM package.\n\nPR Close #42754",
    "sha": "c9b47f21822343286d056fd70aec882acc0ae788",
    "files": [
        {
            "sha": "db10ba96d31e5bf2c497a3e02f50c031450bbb7c",
            "filename": "dev-infra/BUILD.bazel",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/c9b47f21822343286d056fd70aec882acc0ae788/dev-infra%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/c9b47f21822343286d056fd70aec882acc0ae788/dev-infra%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2FBUILD.bazel?ref=c9b47f21822343286d056fd70aec882acc0ae788",
            "patch": "@@ -1,9 +1,12 @@\n+# BEGIN-INTERNAL\n load(\"@build_bazel_rules_nodejs//:index.bzl\", \"pkg_npm\")\n load(\"@npm//@bazel/typescript:index.bzl\", \"ts_library\")\n load(\"//dev-infra:index.bzl\", \"ng_dev_rolled_up_generated_file\")\n+# END-INTERNAL\n \n exports_files([\"tsconfig.json\"])\n \n+# BEGIN-INTERNAL\n ts_library(\n     name = \"cli\",\n     srcs = [\n@@ -45,6 +48,7 @@ pkg_npm(\n     name = \"npm_package\",\n     srcs = [\n         \"index.bzl\",\n+        \"BUILD.bazel\",\n         # Some tools within `dev-infra` which are shipped as Bazel rules might\n         # rely on a tsconfig file. We bring the config into the NPM package.\n         \"tsconfig.json\",\n@@ -55,6 +59,7 @@ pkg_npm(\n         # angular/angular should not consume it's own packages, so we use\n         # substitutions to replace these in the published version of dev-infra.\n         \"//dev-infra/\": \"@npm//@angular/dev-infra-private/\",\n+        \"//dev-infra:\": \"@npm//@angular/dev-infra-private:\",\n         \"//packages/benchpress\": \"@npm//@angular/benchpress\",\n         \"//packages/bazel\": \"@npm//@angular/bazel\",\n         \"//packages/zone.js/bundles:zone.umd.js\": \"@npm//zone.js\",\n@@ -106,3 +111,4 @@ ng_dev_rolled_up_generated_file(\n         \"//dev-infra/release/build\",\n     ],\n )\n+# END-INTERNAL"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 6,
        "deletions": 0
    }
}