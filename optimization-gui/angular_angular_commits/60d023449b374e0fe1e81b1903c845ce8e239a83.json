{
    "author": "petebacondarwin",
    "message": "build(docs-infra): ensure that jasmine node tests fail on build error (#41596)\n\nPreviously if there was a problem when building the tests, the error would\nbe swallowed as an unhandled promise rejection. Now these are caught and\nthe process is exited with a non-zero value to prevent any CI jobs from\npassing incorrectly.\n\nPR Close #41596",
    "sha": "60d023449b374e0fe1e81b1903c845ce8e239a83",
    "files": [
        {
            "sha": "d5f82d6330c7187820951c998c940abb34ca356b",
            "filename": "aio/tests/deployment/unit/test.js",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/60d023449b374e0fe1e81b1903c845ce8e239a83/aio%2Ftests%2Fdeployment%2Funit%2Ftest.js",
            "raw_url": "https://github.com/angular/angular/raw/60d023449b374e0fe1e81b1903c845ce8e239a83/aio%2Ftests%2Fdeployment%2Funit%2Ftest.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftests%2Fdeployment%2Funit%2Ftest.js?ref=60d023449b374e0fe1e81b1903c845ce8e239a83",
            "patch": "@@ -18,4 +18,8 @@ register({project: join(__dirname, 'tsconfig.json')});\n \n const runner = new Jasmine({projectBaseDir: __dirname});\n runner.loadConfig({spec_files: ['**/*.spec.ts']});\n-runner.execute();\n+runner.execute().catch((error) => {\n+  // Something broke so non-zero exit to prevent the process from succeeding.\n+  console.error(error);\n+  process.exit(1);\n+});"
        },
        {
            "sha": "d13a4335d68d843036fd7293319a4bc193147f58",
            "filename": "aio/tools/examples/test.js",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/60d023449b374e0fe1e81b1903c845ce8e239a83/aio%2Ftools%2Fexamples%2Ftest.js",
            "raw_url": "https://github.com/angular/angular/raw/60d023449b374e0fe1e81b1903c845ce8e239a83/aio%2Ftools%2Fexamples%2Ftest.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Fexamples%2Ftest.js?ref=60d023449b374e0fe1e81b1903c845ce8e239a83",
            "patch": "@@ -14,4 +14,8 @@\n const Jasmine = require('jasmine');\n const jasmine = new Jasmine({ projectBaseDir: __dirname });\n jasmine.loadConfig({ spec_files: ['*.spec.js'] });\n-jasmine.execute();\n+jasmine.execute().catch((error) => {\n+  // Something broke so non-zero exit to prevent the process from succeeding.\n+  console.error(error);\n+  process.exit(1);\n+});"
        },
        {
            "sha": "0d29873bf1f90bfdd9c5f9ee78a1616918373527",
            "filename": "aio/tools/firebase-test-utils/test.js",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/60d023449b374e0fe1e81b1903c845ce8e239a83/aio%2Ftools%2Ffirebase-test-utils%2Ftest.js",
            "raw_url": "https://github.com/angular/angular/raw/60d023449b374e0fe1e81b1903c845ce8e239a83/aio%2Ftools%2Ffirebase-test-utils%2Ftest.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ffirebase-test-utils%2Ftest.js?ref=60d023449b374e0fe1e81b1903c845ce8e239a83",
            "patch": "@@ -18,4 +18,8 @@ register({project: join(__dirname, 'tsconfig.json')});\n \n const runner = new Jasmine({projectBaseDir: __dirname});\n runner.loadConfig({spec_files: ['**/*.spec.ts']});\n-runner.execute();\n+runner.execute().catch((error) => {\n+  // Something broke so non-zero exit to prevent the process from succeeding.\n+  console.error(error);\n+  process.exit(1);\n+});"
        },
        {
            "sha": "e77d7d325ac1654fb4b369d02a5f84ec835aa8c3",
            "filename": "aio/tools/transforms/test.js",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/60d023449b374e0fe1e81b1903c845ce8e239a83/aio%2Ftools%2Ftransforms%2Ftest.js",
            "raw_url": "https://github.com/angular/angular/raw/60d023449b374e0fe1e81b1903c845ce8e239a83/aio%2Ftools%2Ftransforms%2Ftest.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Ftest.js?ref=60d023449b374e0fe1e81b1903c845ce8e239a83",
            "patch": "@@ -14,4 +14,8 @@\n const Jasmine = require('jasmine');\n const jasmine = new Jasmine({ projectBaseDir: __dirname });\n jasmine.loadConfig({ random: true, spec_files: ['**/*.spec.js'] });\n-jasmine.execute();\n+jasmine.execute().catch((error) => {\n+  // Something broke so non-zero exit to prevent the process from succeeding.\n+  console.error(error);\n+  process.exit(1);\n+});"
        }
    ],
    "stats": {
        "total": 24,
        "additions": 20,
        "deletions": 4
    }
}