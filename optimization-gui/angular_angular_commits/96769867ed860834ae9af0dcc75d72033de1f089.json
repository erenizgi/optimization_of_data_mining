{
    "author": "josephperrott",
    "message": "fix(dev-infra): ensure hashbang is present in both published and local ng-devs (#39443)\n\nThe node hash bang was incidentally removed in the published ng-dev, it should\nbe included to allow for the command to be run without having to specify node.\n\nPR Close #39443",
    "sha": "96769867ed860834ae9af0dcc75d72033de1f089",
    "files": [
        {
            "sha": "d3e3bee4f2fc4ac11825eb4b85d2512e708c925b",
            "filename": "dev-infra/BUILD.bazel",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/96769867ed860834ae9af0dcc75d72033de1f089/dev-infra%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/96769867ed860834ae9af0dcc75d72033de1f089/dev-infra%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2FBUILD.bazel?ref=96769867ed860834ae9af0dcc75d72033de1f089",
            "patch": "@@ -26,12 +26,19 @@ ts_library(\n \n rollup_bundle(\n     name = \"cli_rollup\",\n+    args = [\n+        \"--plugin\",\n+        \"rollup-plugin-hashbang\",\n+    ],\n     entry_point = \":cli.ts\",\n     format = \"cjs\",\n     silent = True,\n     sourcemap = \"false\",\n     deps = [\n         \":cli\",\n+        # TODO(josephperrott): Determine if this plugin is the best method for ensuring the hashbang\n+        # in both local and published use case.\n+        \"@npm//rollup-plugin-hashbang\",\n     ],\n )\n "
        },
        {
            "sha": "979bcde5b0ad51d91981913f0dd364e13555892c",
            "filename": "dev-infra/cli.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/96769867ed860834ae9af0dcc75d72033de1f089/dev-infra%2Fcli.ts",
            "raw_url": "https://github.com/angular/angular/raw/96769867ed860834ae9af0dcc75d72033de1f089/dev-infra%2Fcli.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fcli.ts?ref=96769867ed860834ae9af0dcc75d72033de1f089",
            "patch": "@@ -1,3 +1,4 @@\n+#!/usr/bin/env node\n /**\n  * @license\n  * Copyright Google LLC All Rights Reserved."
        },
        {
            "sha": "d0742e26f9e47c49ec2d29ec42005fd4b6aed8a4",
            "filename": "dev-infra/ng-dev.js",
            "status": "modified",
            "additions": 1,
            "deletions": 7,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/96769867ed860834ae9af0dcc75d72033de1f089/dev-infra%2Fng-dev.js",
            "raw_url": "https://github.com/angular/angular/raw/96769867ed860834ae9af0dcc75d72033de1f089/dev-infra%2Fng-dev.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fng-dev.js?ref=96769867ed860834ae9af0dcc75d72033de1f089",
            "patch": "@@ -1,3 +1,4 @@\n+#!/usr/bin/env node\n 'use strict';\n \n function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n@@ -6777,13 +6778,6 @@ function convertReferenceChainToString(chain) {\n     return chain.join(' â†’ ');\n }\n \n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n yargs.scriptName('ng-dev')\n     .middleware(captureLogOutputForCommand)\n     .demandCommand()"
        },
        {
            "sha": "44276d589f4af75bc8d5fa88818d67f73ae05402",
            "filename": "package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/96769867ed860834ae9af0dcc75d72033de1f089/package.json",
            "raw_url": "https://github.com/angular/angular/raw/96769867ed860834ae9af0dcc75d72033de1f089/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=96769867ed860834ae9af0dcc75d72033de1f089",
            "patch": "@@ -190,6 +190,7 @@\n     \"nock\": \"^13.0.3\",\n     \"ora\": \"^5.0.0\",\n     \"rewire\": \"2.5.2\",\n+    \"rollup-plugin-hashbang\": \"^2.2.2\",\n     \"sauce-connect\": \"https://saucelabs.com/downloads/sc-4.6.2-linux.tar.gz\",\n     \"semver\": \"^6.3.0\",\n     \"ts-node\": \"^8.6.2\","
        },
        {
            "sha": "743592f9d2f5fe1fd055802d22dbcf2cde693357",
            "filename": "yarn.lock",
            "status": "modified",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/angular/angular/blob/96769867ed860834ae9af0dcc75d72033de1f089/yarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/96769867ed860834ae9af0dcc75d72033de1f089/yarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/yarn.lock?ref=96769867ed860834ae9af0dcc75d72033de1f089",
            "patch": "@@ -10087,6 +10087,13 @@ magic-string@0.25.7, magic-string@^0.25.2:\n   dependencies:\n     sourcemap-codec \"^1.4.4\"\n \n+magic-string@^0.22.4:\n+  version \"0.22.5\"\n+  resolved \"https://registry.yarnpkg.com/magic-string/-/magic-string-0.22.5.tgz#8e9cf5afddf44385c1da5bc2a6a0dbd10b03657e\"\n+  integrity sha512-oreip9rJZkzvA8Qzk9HFs8fZGF/u7H/gtrE8EN6RjKJ9kh2HlC+yQ2QezifqTZfGyiuAV0dRv5a+y/8gBb1m9w==\n+  dependencies:\n+    vlq \"^0.2.2\"\n+\n make-dir@^1.0.0:\n   version \"1.3.0\"\n   resolved \"https://registry.yarnpkg.com/make-dir/-/make-dir-1.3.0.tgz#79c1033b80515bd6d24ec9933e860ca75ee27f0c\"\n@@ -13349,6 +13356,13 @@ rollup-plugin-commonjs@^10.1.0:\n     resolve \"^1.11.0\"\n     rollup-pluginutils \"^2.8.1\"\n \n+rollup-plugin-hashbang@^2.2.2:\n+  version \"2.2.2\"\n+  resolved \"https://registry.yarnpkg.com/rollup-plugin-hashbang/-/rollup-plugin-hashbang-2.2.2.tgz#971fc49b452e63f9dfdc75f79ae7256b3485e750\"\n+  integrity sha512-Yxw9ogeK3KncG1e4CvK0I0IKVBNeJP+DTZS3bExGTfGjw0WP1C7xxbY7LtRd8IKx4fFf53hz7XR1XG7UV6xqCw==\n+  dependencies:\n+    magic-string \"^0.22.4\"\n+\n rollup-plugin-node-resolve@^5.2.0:\n   version \"5.2.0\"\n   resolved \"https://registry.yarnpkg.com/rollup-plugin-node-resolve/-/rollup-plugin-node-resolve-5.2.0.tgz#730f93d10ed202473b1fb54a5997a7db8c6d8523\"\n@@ -15818,6 +15832,11 @@ vlq@0.2.2:\n   resolved \"https://registry.yarnpkg.com/vlq/-/vlq-0.2.2.tgz#e316d5257b40b86bb43cb8d5fea5d7f54d6b0ca1\"\n   integrity sha1-4xbVJXtAuGu0PLjV/qXX9U1rDKE=\n \n+vlq@^0.2.2:\n+  version \"0.2.3\"\n+  resolved \"https://registry.yarnpkg.com/vlq/-/vlq-0.2.3.tgz#8f3e4328cf63b1540c0d67e1b2778386f8975b26\"\n+  integrity sha512-DRibZL6DsNhIgYQ+wNdWDL2SL3bKPlVrRiBqV5yuMm++op8W4kGFtaQfCs4KEJn0wBZcHVHJ3eoywX8983k1ow==\n+\n vm-browserify@^1.0.1:\n   version \"1.1.2\"\n   resolved \"https://registry.yarnpkg.com/vm-browserify/-/vm-browserify-1.1.2.tgz#78641c488b8e6ca91a75f511e7a3b32a86e5dda0\""
        }
    ],
    "stats": {
        "total": 36,
        "additions": 29,
        "deletions": 7
    }
}