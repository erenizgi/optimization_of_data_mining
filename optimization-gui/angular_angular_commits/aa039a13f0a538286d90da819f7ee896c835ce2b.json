{
    "author": "petebacondarwin",
    "message": "fix(compiler): correctly process multiple rules containing `:host` selectors (#41261)\n\nWhen there was more than one rule in a single style string, only the first\nrule was having its `:host` selector processed correctly. Now subsequent\nrules will also be processed accurately.\n\nFixes #41237\n\nPR Close #41261",
    "sha": "aa039a13f0a538286d90da819f7ee896c835ce2b",
    "files": [
        {
            "sha": "e8d08e7adbc8764222b8034dd36292a79c237172",
            "filename": "packages/compiler/src/shadow_css.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/aa039a13f0a538286d90da819f7ee896c835ce2b/packages%2Fcompiler%2Fsrc%2Fshadow_css.ts",
            "raw_url": "https://github.com/angular/angular/raw/aa039a13f0a538286d90da819f7ee896c835ce2b/packages%2Fcompiler%2Fsrc%2Fshadow_css.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fshadow_css.ts?ref=aa039a13f0a538286d90da819f7ee896c835ce2b",
            "patch": "@@ -720,6 +720,7 @@ function escapeBlocks(\n  */\n function combineHostContextSelectors(contextSelectors: string[], otherSelectors: string): string {\n   const hostMarker = _polyfillHostNoCombinator;\n+  _polyfillHostRe.lastIndex = 0;  // reset the regex to ensure we get an accurate test\n   const otherSelectorsHasHost = _polyfillHostRe.test(otherSelectors);\n \n   // If there are no context selectors then just output a host marker"
        },
        {
            "sha": "32cd76dbab9eb13ffe1fb6fa84b167a86d7ba3c2",
            "filename": "packages/compiler/test/shadow_css_spec.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/aa039a13f0a538286d90da819f7ee896c835ce2b/packages%2Fcompiler%2Ftest%2Fshadow_css_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/aa039a13f0a538286d90da819f7ee896c835ce2b/packages%2Fcompiler%2Ftest%2Fshadow_css_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fshadow_css_spec.ts?ref=aa039a13f0a538286d90da819f7ee896c835ce2b",
            "patch": "@@ -286,6 +286,17 @@ import {normalizeCSS} from '@angular/platform-browser/testing/src/browser_util';\n         expect(s(':host-context(div) > :host(.x) > .y {}', 'contenta', 'a-host'))\n             .toEqual('div > .x[a-host] > .y[contenta] {}');\n       });\n+\n+      it('should parse multiple rules containing :host-context and :host', () => {\n+        const input = `\n+            :host-context(outer1) :host(bar) {}\n+            :host-context(outer2) :host(foo) {}\n+        `;\n+        expect(s(input, 'contenta', 'a-host'))\n+            .toEqual(\n+                'outer1 bar[a-host] {} ' +\n+                'outer2 foo[a-host] {}');\n+      });\n     });\n \n     it('should support polyfill-next-selector', () => {"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 12,
        "deletions": 0
    }
}