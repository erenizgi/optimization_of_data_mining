{
    "author": "crisbeto",
    "message": "fix(localize): include meaning in generated ARB files (#40546)\n\nThe ARB format doesn't have a dedicated field for message meaning so these changes include it\nas a customize attribute called `x-meaning`.\n\nFixes #40506.\n\nPR Close #40546",
    "sha": "8b9f6b504e79ef631bbbc66002e6a92b89d80c4b",
    "files": [
        {
            "sha": "1a5d79a400639f2e998fa69ea8adce7b883323ee",
            "filename": "packages/localize/src/tools/src/extract/translation_files/arb_translation_serializer.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 3,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/8b9f6b504e79ef631bbbc66002e6a92b89d80c4b/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Ftranslation_files%2Farb_translation_serializer.ts",
            "raw_url": "https://github.com/angular/angular/raw/8b9f6b504e79ef631bbbc66002e6a92b89d80c4b/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Ftranslation_files%2Farb_translation_serializer.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Ftranslation_files%2Farb_translation_serializer.ts?ref=8b9f6b504e79ef631bbbc66002e6a92b89d80c4b",
            "patch": "@@ -50,7 +50,8 @@ export class ArbTranslationSerializer implements TranslationSerializer {\n       const id = getMessageId(message);\n       output += this.serializeMessage(id, message);\n       output += this.serializeMeta(\n-          id, message.description, duplicateMessages.filter(hasLocation).map(m => m.location));\n+          id, message.description, message.meaning,\n+          duplicateMessages.filter(hasLocation).map(m => m.location));\n     }\n \n     output += '\\n}';\n@@ -62,14 +63,19 @@ export class ArbTranslationSerializer implements TranslationSerializer {\n     return `,\\n  ${JSON.stringify(id)}: ${JSON.stringify(message.text)}`;\n   }\n \n-  private serializeMeta(id: string, description: string|undefined, locations: ɵSourceLocation[]):\n-      string {\n+  private serializeMeta(\n+      id: string, description: string|undefined, meaning: string|undefined,\n+      locations: ɵSourceLocation[]): string {\n     const meta: string[] = [];\n \n     if (description) {\n       meta.push(`\\n    \"description\": ${JSON.stringify(description)}`);\n     }\n \n+    if (meaning) {\n+      meta.push(`\\n    \"x-meaning\": ${JSON.stringify(meaning)}`);\n+    }\n+\n     if (locations.length > 0) {\n       let locationStr = `\\n    \"x-locations\": [`;\n       for (let i = 0; i < locations.length; i++) {"
        },
        {
            "sha": "f2c7103a8ac45dcf7e94b0974f6dc5090a2e3d5b",
            "filename": "packages/localize/src/tools/test/extract/translation_files/arb_translation_serializer_spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8b9f6b504e79ef631bbbc66002e6a92b89d80c4b/packages%2Flocalize%2Fsrc%2Ftools%2Ftest%2Fextract%2Ftranslation_files%2Farb_translation_serializer_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8b9f6b504e79ef631bbbc66002e6a92b89d80c4b/packages%2Flocalize%2Fsrc%2Ftools%2Ftest%2Fextract%2Ftranslation_files%2Farb_translation_serializer_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Ftest%2Fextract%2Ftranslation_files%2Farb_translation_serializer_spec.ts?ref=8b9f6b504e79ef631bbbc66002e6a92b89d80c4b",
            "patch": "@@ -64,14 +64,16 @@ runInEachFileSystem(() => {\n           '  \"13579\": \"{$START_BOLD_TEXT}b{$CLOSE_BOLD_TEXT}\",',\n           '  \"24680\": \"a\",',\n           '  \"@24680\": {',\n-          '    \"description\": \"and description\"',\n+          '    \"description\": \"and description\",',\n+          '    \"x-meaning\": \"meaning\"',\n           '  },',\n           '  \"80808\": \"multi\\\\nlines\",',\n           '  \"90000\": \"<escape{$double-quotes-\\\\\"}me>\",',\n           '  \"100000\": \"pre-ICU {VAR_SELECT, select, a {a} b {{INTERPOLATION}} c {pre {INTERPOLATION_1} post}} post-ICU\",',\n           '  \"100001\": \"{VAR_PLURAL, plural, one {{START_BOLD_TEXT}something bold{CLOSE_BOLD_TEXT}} other {pre {START_TAG_SPAN}middle{CLOSE_TAG_SPAN} post}}\",',\n           '  \"12345\": \"a{$PH}b{$PH_1}c\",',\n           '  \"@12345\": {',\n+          '    \"x-meaning\": \"some meaning\",',\n           '    \"x-locations\": [',\n           '      {',\n           '        \"file\": \"file.ts\",',"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 12,
        "deletions": 4
    }
}