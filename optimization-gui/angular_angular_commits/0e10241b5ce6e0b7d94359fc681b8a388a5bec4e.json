{
    "author": "mgechev",
    "message": "fix(devtools): set extension icon and popup only on DevTools background message\n\nThe script handles messages globally, for all extensions running on the page. I this case, we don't want to do anything if the message does not come from Angular DevTools itself.",
    "sha": "0e10241b5ce6e0b7d94359fc681b8a388a5bec4e",
    "files": [
        {
            "sha": "bb36f2764e254d12c46f82b716a8e70271c9ad44",
            "filename": "projects/shell-chrome/src/app/background.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/0e10241b5ce6e0b7d94359fc681b8a388a5bec4e/projects%2Fshell-chrome%2Fsrc%2Fapp%2Fbackground.ts",
            "raw_url": "https://github.com/angular/angular/raw/0e10241b5ce6e0b7d94359fc681b8a388a5bec4e/projects%2Fshell-chrome%2Fsrc%2Fapp%2Fbackground.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fshell-chrome%2Fsrc%2Fapp%2Fbackground.ts?ref=0e10241b5ce6e0b7d94359fc681b8a388a5bec4e",
            "patch": "@@ -100,6 +100,9 @@ const getPopUpName = (ng: AngularDetection) => {\n };\n \n chrome.runtime.onMessage.addListener((req, sender) => {\n+  if (!req.isAngularDevTools) {\n+    return;\n+  }\n   if (sender && sender.tab) {\n     chrome.browserAction.setPopup({\n       tabId: sender.tab.id,"
        },
        {
            "sha": "f702c689407c525c01f56cc35af9167573e857f6",
            "filename": "projects/shell-chrome/src/app/ng-validate.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/0e10241b5ce6e0b7d94359fc681b8a388a5bec4e/projects%2Fshell-chrome%2Fsrc%2Fapp%2Fng-validate.ts",
            "raw_url": "https://github.com/angular/angular/raw/0e10241b5ce6e0b7d94359fc681b8a388a5bec4e/projects%2Fshell-chrome%2Fsrc%2Fapp%2Fng-validate.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fshell-chrome%2Fsrc%2Fapp%2Fng-validate.ts?ref=0e10241b5ce6e0b7d94359fc681b8a388a5bec4e",
            "patch": "@@ -1,4 +1,10 @@\n export interface AngularDetection {\n+  // This is necessary because the runtime\n+  // message listener handles messages globally\n+  // including from other extensions. We don't\n+  // want to set icon and/or popup based on\n+  // a message coming from an unrelated extension.\n+  isAngularDevTools: true;\n   isIvy: boolean;\n   isAngular: boolean;\n   isDebugMode: boolean;\n@@ -34,6 +40,7 @@ function detectAngular(win: Window): void {\n       isAngular,\n       isDebugMode,\n       isSupportedAngularVersion,\n+      isAngularDevTools: true,\n     } as AngularDetection,\n     '*'\n   );"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 10,
        "deletions": 0
    }
}