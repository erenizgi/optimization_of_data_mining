{
    "author": "IgorMinar",
    "message": "docs: add a note about <select> and nested <option>s in Ivy compat guide (#42338)\n\nAn internal change in Ivy has surfaced issues in previosly broken code. This change adds a note to the\nIvy compatibility guide as well as the TrackByFunction api docs.\n\nFixes #35896\n\nPR Close #42338",
    "sha": "e73fef4d0bf8833e740cfc0e2e9ef3c18dd72d93",
    "files": [
        {
            "sha": "0db0b561ebb08efd6662e3644a6b9e39f25ac370",
            "filename": "aio/content/guide/ivy-compatibility.md",
            "status": "modified",
            "additions": 9,
            "deletions": 4,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/e73fef4d0bf8833e740cfc0e2e9ef3c18dd72d93/aio%2Fcontent%2Fguide%2Fivy-compatibility.md",
            "raw_url": "https://github.com/angular/angular/raw/e73fef4d0bf8833e740cfc0e2e9ef3c18dd72d93/aio%2Fcontent%2Fguide%2Fivy-compatibility.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fivy-compatibility.md?ref=e73fef4d0bf8833e740cfc0e2e9ef3c18dd72d93",
            "patch": "@@ -85,7 +85,12 @@ For more information about the updated style precedence in Ivy, refer to the [st\n * If selecting the native `<option>` element in a `<select>` where the `<option>`s are created using `*ngFor`, use the `[selected]` property of an `<option>` instead of binding to the `[value]` property of the `<select>` element (previously, you could bind to either.) [details](guide/ivy-compatibility-examples#select-value-binding)\n \n * Embedded views (such as ones created by `*ngFor`) are now inserted in front of anchor DOM comment node (for example, `<!--ng-for-of-->`) rather than behind it as was the case previously.\n-In most cases this does not have any impact on rendered DOM.\n-In some cases (such as animations delaying the removal of an embedded view) any new embedded views will be inserted after the embedded view being animated away.\n-This difference only last while the animation is active, and might alter the visual appearance of the animation.\n-Once the animation is finished the resulting rendered DOM is identical to that rendered with View Engine.\n+  In most cases this has no impact on rendered DOM.\n+\n+  When animations delay the removal of an embedded view, any new embedded views will be inserted after the embedded view that will be removed once the animation completes.\n+  This difference only lasts while the animation is active, and might alter the visual appearance of the animation.\n+  When the animation is finished, the resulting rendered DOM is identical to that rendered with View Engine.\n+\n+  One additional exception is the `<select>` element with `<option>` elements dynamically rendered using `NgForOf`. If a [`trackBy`](api/common/NgForOf#ngForTrackBy) function is not provided, the selected `<option>` will not be preserved when the iterable used by the `NgForOf` changes.\n+  With View Engine, this programming error was obscured, and often not visible.\n+  To avoid this problem, provide the `trackBy` function to correctly associate the model with the rendered DOM elements."
        },
        {
            "sha": "ec90548e33181714b1fc1709b2ce4bc3fc269d5f",
            "filename": "packages/core/src/change_detection/differs/iterable_differs.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/e73fef4d0bf8833e740cfc0e2e9ef3c18dd72d93/packages%2Fcore%2Fsrc%2Fchange_detection%2Fdiffers%2Fiterable_differs.ts",
            "raw_url": "https://github.com/angular/angular/raw/e73fef4d0bf8833e740cfc0e2e9ef3c18dd72d93/packages%2Fcore%2Fsrc%2Fchange_detection%2Fdiffers%2Fiterable_differs.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fchange_detection%2Fdiffers%2Fiterable_differs.ts?ref=e73fef4d0bf8833e740cfc0e2e9ef3c18dd72d93",
            "patch": "@@ -126,6 +126,8 @@ export interface IterableChangeRecord<V> {\n  * - preserve any DOM-specific UI state (like cursor position, focus, text selection) when the\n  *   iterable is modified\n  * - enable animation of item addition, removal, and iterable reordering\n+ * - preserve the value of the `<select>` element when nested `<option>` elements are dynamically\n+ *   populated using `NgForOf` and the bound iterable is updated\n  *\n  * A common use for custom `trackBy` functions is when the model that `NgForOf` iterates over\n  * contains a property with a unique identifier. For example, given a model:"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 11,
        "deletions": 4
    }
}