{
    "author": "JoostK",
    "message": "refactor(compiler-cli): remove unused return type transform (#41996)\n\nWith the removal of the `ModuleWithProviders` transform in the parent commit,\nthe underlying dts transform can also be removed as it is not used elsewhere.\n\nPR Close #41996",
    "sha": "69e57827e2be7ca7164c428e32cb3ac187aaac3c",
    "files": [
        {
            "sha": "e3da19c3b15f3f4d3ca984d83570a2487fe7d9cd",
            "filename": "packages/compiler-cli/src/ngtsc/transform/index.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/69e57827e2be7ca7164c428e32cb3ac187aaac3c/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftransform%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/69e57827e2be7ca7164c428e32cb3ac187aaac3c/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftransform%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftransform%2Findex.ts?ref=69e57827e2be7ca7164c428e32cb3ac187aaac3c",
            "patch": "@@ -9,6 +9,6 @@\n export * from './src/api';\n export {aliasTransformFactory} from './src/alias';\n export {ClassRecord, TraitCompiler} from './src/compilation';\n-export {declarationTransformFactory, DtsTransformRegistry, IvyDeclarationDtsTransform, ReturnTypeTransform} from './src/declaration';\n+export {declarationTransformFactory, DtsTransformRegistry, IvyDeclarationDtsTransform} from './src/declaration';\n export {AnalyzedTrait, PendingTrait, ResolvedTrait, SkippedTrait, Trait, TraitState} from './src/trait';\n export {ivyTransformFactory} from './src/transform';"
        },
        {
            "sha": "4adeee9ddbe65aaa08aca2243e3285d2dd490e96",
            "filename": "packages/compiler-cli/src/ngtsc/transform/src/declaration.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 59,
            "changes": 59,
            "blob_url": "https://github.com/angular/angular/blob/69e57827e2be7ca7164c428e32cb3ac187aaac3c/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftransform%2Fsrc%2Fdeclaration.ts",
            "raw_url": "https://github.com/angular/angular/raw/69e57827e2be7ca7164c428e32cb3ac187aaac3c/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftransform%2Fsrc%2Fdeclaration.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftransform%2Fsrc%2Fdeclaration.ts?ref=69e57827e2be7ca7164c428e32cb3ac187aaac3c",
            "patch": "@@ -22,7 +22,6 @@ import {addImports} from './utils';\n  */\n export class DtsTransformRegistry {\n   private ivyDeclarationTransforms = new Map<ts.SourceFile, IvyDeclarationDtsTransform>();\n-  private returnTypeTransforms = new Map<ts.SourceFile, ReturnTypeTransform>();\n \n   getIvyDeclarationTransform(sf: ts.SourceFile): IvyDeclarationDtsTransform {\n     if (!this.ivyDeclarationTransforms.has(sf)) {\n@@ -31,13 +30,6 @@ export class DtsTransformRegistry {\n     return this.ivyDeclarationTransforms.get(sf)!;\n   }\n \n-  getReturnTypeTransform(sf: ts.SourceFile): ReturnTypeTransform {\n-    if (!this.returnTypeTransforms.has(sf)) {\n-      this.returnTypeTransforms.set(sf, new ReturnTypeTransform());\n-    }\n-    return this.returnTypeTransforms.get(sf)!;\n-  }\n-\n   /**\n    * Gets the dts transforms to be applied for the given source file, or `null` if no transform is\n    * necessary.\n@@ -57,10 +49,6 @@ export class DtsTransformRegistry {\n       transforms = [];\n       transforms.push(this.ivyDeclarationTransforms.get(originalSf)!);\n     }\n-    if (this.returnTypeTransforms.has(originalSf)) {\n-      transforms = transforms || [];\n-      transforms.push(this.returnTypeTransforms.get(originalSf)!);\n-    }\n     return transforms;\n   }\n }\n@@ -230,50 +218,3 @@ function markForEmitAsSingleLine(node: ts.Node) {\n   ts.setEmitFlags(node, ts.EmitFlags.SingleLine);\n   ts.forEachChild(node, markForEmitAsSingleLine);\n }\n-\n-export class ReturnTypeTransform implements DtsTransform {\n-  private typeReplacements = new Map<ts.Declaration, Type>();\n-\n-  addTypeReplacement(declaration: ts.Declaration, type: Type): void {\n-    this.typeReplacements.set(declaration, type);\n-  }\n-\n-  transformClassElement(element: ts.ClassElement, imports: ImportManager): ts.ClassElement {\n-    if (ts.isMethodDeclaration(element)) {\n-      const original = ts.getOriginalNode(element, ts.isMethodDeclaration);\n-      if (!this.typeReplacements.has(original)) {\n-        return element;\n-      }\n-      const returnType = this.typeReplacements.get(original)!;\n-      const tsReturnType = translateType(returnType, imports);\n-\n-      return ts.updateMethod(\n-          element, element.decorators, element.modifiers, element.asteriskToken, element.name,\n-          element.questionToken, element.typeParameters, element.parameters, tsReturnType,\n-          element.body);\n-    }\n-\n-    return element;\n-  }\n-\n-  transformFunctionDeclaration(element: ts.FunctionDeclaration, imports: ImportManager):\n-      ts.FunctionDeclaration {\n-    const original = ts.getOriginalNode(element) as ts.FunctionDeclaration;\n-    if (!this.typeReplacements.has(original)) {\n-      return element;\n-    }\n-    const returnType = this.typeReplacements.get(original)!;\n-    const tsReturnType = translateType(returnType, imports);\n-\n-    return ts.updateFunctionDeclaration(\n-        /* node */ element,\n-        /* decorators */ element.decorators,\n-        /* modifiers */ element.modifiers,\n-        /* asteriskToken */ element.asteriskToken,\n-        /* name */ element.name,\n-        /* typeParameters */ element.typeParameters,\n-        /* parameters */ element.parameters,\n-        /* type */ tsReturnType,\n-        /* body */ element.body);\n-  }\n-}"
        }
    ],
    "stats": {
        "total": 61,
        "additions": 1,
        "deletions": 60
    }
}