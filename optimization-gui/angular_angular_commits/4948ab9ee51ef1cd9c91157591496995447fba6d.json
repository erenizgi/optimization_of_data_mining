{
    "author": "t-bowersox",
    "message": "docs: expand async validators in reactive forms (#44764)\n\n* Hone docregions for code examples\n* Add more detailed description\n\nPR Close #44764",
    "sha": "4948ab9ee51ef1cd9c91157591496995447fba6d",
    "files": [
        {
            "sha": "d01375672b3e1ec7d01e1dbdc989b4d4e9e6093f",
            "filename": "aio/content/examples/form-validation/src/app/reactive/hero-form-reactive.component.2.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 7,
            "changes": 19,
            "blob_url": "https://github.com/angular/angular/blob/4948ab9ee51ef1cd9c91157591496995447fba6d/aio%2Fcontent%2Fexamples%2Fform-validation%2Fsrc%2Fapp%2Freactive%2Fhero-form-reactive.component.2.ts",
            "raw_url": "https://github.com/angular/angular/raw/4948ab9ee51ef1cd9c91157591496995447fba6d/aio%2Fcontent%2Fexamples%2Fform-validation%2Fsrc%2Fapp%2Freactive%2Fhero-form-reactive.component.2.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Fform-validation%2Fsrc%2Fapp%2Freactive%2Fhero-form-reactive.component.2.ts?ref=4948ab9ee51ef1cd9c91157591496995447fba6d",
            "patch": "@@ -19,18 +19,21 @@ export class HeroFormReactiveComponent implements OnInit {\n   heroForm: FormGroup;\n \n   ngOnInit(): void {\n+    // #docregion async-validator-usage\n+    const alterEgoControl = new FormControl('', {\n+      asyncValidators: [this.alterEgoValidator.validate.bind(this.alterEgoValidator)],\n+      updateOn: 'blur'\n+    });\n+    alterEgoControl.setValue(this.hero.alterEgo);\n+    // #enddocregion async-validator-usage\n+\n     this.heroForm = new FormGroup({\n       name: new FormControl(this.hero.name, [\n         Validators.required,\n         Validators.minLength(4),\n         forbiddenNameValidator(/bob/i)\n       ]),\n-      // #docregion async-validator\n-      alterEgo: new FormControl(this.hero.alterEgo, {\n-        asyncValidators: [this.alterEgoValidator.validate.bind(this.alterEgoValidator)],\n-        updateOn: 'blur'\n-      }),\n-      // #enddocregion async-validator\n+      alterEgo: alterEgoControl,\n       power: new FormControl(this.hero.power, Validators.required)\n     });\n   }\n@@ -40,6 +43,8 @@ export class HeroFormReactiveComponent implements OnInit {\n   get power() { return this.heroForm.get('power'); }\n \n   get alterEgo() { return this.heroForm.get('alterEgo'); }\n-\n+  \n+  // #docregion async-validator-inject\n   constructor(private alterEgoValidator: UniqueAlterEgoValidator) {}\n+  // #enddocregion async-validator-inject\n }"
        },
        {
            "sha": "50a6bcef8fbc460c8f28625065439f6eb1995c7e",
            "filename": "aio/content/guide/form-validation.md",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/4948ab9ee51ef1cd9c91157591496995447fba6d/aio%2Fcontent%2Fguide%2Fform-validation.md",
            "raw_url": "https://github.com/angular/angular/raw/4948ab9ee51ef1cd9c91157591496995447fba6d/aio%2Fcontent%2Fguide%2Fform-validation.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fform-validation.md?ref=4948ab9ee51ef1cd9c91157591496995447fba6d",
            "patch": "@@ -335,9 +335,15 @@ The `pending` flag is set to `false`, and the form validity is updated.\n \n ### Adding async validators to reactive forms\n \n-In reactive forms, add an async validator by passing the function directly to the `FormControl`.\n+To use an async validator in reactive forms, begin by injecting the validator into the constructor of the component class.\n \n-<code-example path=\"form-validation/src/app/reactive/hero-form-reactive.component.2.ts\" region=\"async-validator\"></code-example>\n+<code-example path=\"form-validation/src/app/reactive/hero-form-reactive.component.2.ts\" region=\"async-validator-inject\"></code-example>\n+\n+Then, pass the validator function directly to the `FormControl` to apply it. \n+\n+In the following example, the `validate` function of `UniqueAlterEgoValidator` is applied to `alterEgoControl` by passing it to the control's `asyncValidators` option and binding it to the instance of `UniqueAlterEgoValidator` that was injected into `HeroFormReactiveComponent`. The value of `asyncValidators` can be either a single async validator function, or an array of functions.\n+\n+<code-example path=\"form-validation/src/app/reactive/hero-form-reactive.component.2.ts\" region=\"async-validator-usage\"></code-example>\n \n ### Adding async validators to template-driven forms\n "
        }
    ],
    "stats": {
        "total": 29,
        "additions": 20,
        "deletions": 9
    }
}