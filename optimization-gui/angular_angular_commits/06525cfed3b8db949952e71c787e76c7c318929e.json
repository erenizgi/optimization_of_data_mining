{
    "author": "JoostK",
    "message": "test(compiler-cli): fix tests to have at least one component (#39011)\n\nWith the introduction of incremental type checking in #36211, an\nintermediate `ts.Program` for type checking is only created if there are\nany templates to check. This rendered some tests ineffective at avoiding\nregressions, as the intermediate `ts.Program` was required for the tests\nto fail if the scenario under test would not be accounted for. This\ncommit adds a single component to these tests, to ensure the\nintermediate `ts.Program` is in fact created.\n\nPR Close #39011",
    "sha": "06525cfed3b8db949952e71c787e76c7c318929e",
    "files": [
        {
            "sha": "59be3f750de9b89c5f8a0d11fa02262d837374e6",
            "filename": "packages/compiler-cli/test/ngtsc/incremental_spec.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 2,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/06525cfed3b8db949952e71c787e76c7c318929e/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Fincremental_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/06525cfed3b8db949952e71c787e76c7c318929e/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Fincremental_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Fincremental_spec.ts?ref=06525cfed3b8db949952e71c787e76c7c318929e",
            "patch": "@@ -433,8 +433,13 @@ runInEachFileSystem(() => {\n     });\n \n     it('should compile incrementally with template type-checking turned on', () => {\n-      env.tsconfig({ivyTemplateTypeCheck: true});\n-      env.write('main.ts', 'export class Foo {}');\n+      env.tsconfig({fullTemplateTypeCheck: true});\n+      env.write('main.ts', `\n+        import {Component} from '@angular/core';\n+\n+        @Component({template: ''})\n+        export class MyComponent {}\n+      `);\n       env.driveMain();\n       env.invalidateCachedFile('main.ts');\n       env.driveMain();\n@@ -482,8 +487,12 @@ runInEachFileSystem(() => {\n       env.write('node_modules/b/index.js', `export {ServiceA as ServiceB} from 'a';`);\n       env.write('node_modules/b/index.d.ts', `export {ServiceA as ServiceB} from 'a';`);\n       env.write('test.ts', `\n+        import {Component} from '@angular/core';\n         import {ServiceA} from 'a';\n         import {ServiceB} from 'b';\n+\n+        @Component({template: ''})\n+        export class MyComponent {}\n       `);\n       env.driveMain();\n       env.flushWrittenFileTracking();"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 11,
        "deletions": 2
    }
}