{
    "author": "PowerKiKi",
    "message": "docs: integrate webserver configuration (#36553)\n\nThe article previously referred was out of date. Most of the article content\nwas already duplicated here, or described how to generate multiple bundles. But\ncreating multiple bundles manually is now obsolete and the parameter `--localize`\nshould be preferred instead, because it is much faster.\n\nThis commit integrate the only interesting part left, relating to webserver configuration.\n\nCo-authored-by: David Shevitz <dshevitz@google.com>\n\nPR Close #36553",
    "sha": "07f2e0c34e701c11d7fd2e7956ac8c5f1607fdf4",
    "files": [
        {
            "sha": "2a9e686761043e9bcee5ecba6d463dc9af16dee7",
            "filename": "aio/content/guide/i18n.md",
            "status": "modified",
            "additions": 77,
            "deletions": 2,
            "changes": 79,
            "blob_url": "https://github.com/angular/angular/blob/07f2e0c34e701c11d7fd2e7956ac8c5f1607fdf4/aio%2Fcontent%2Fguide%2Fi18n.md",
            "raw_url": "https://github.com/angular/angular/raw/07f2e0c34e701c11d7fd2e7956ac8c5f1607fdf4/aio%2Fcontent%2Fguide%2Fi18n.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fi18n.md?ref=07f2e0c34e701c11d7fd2e7956ac8c5f1607fdf4",
            "patch": "@@ -774,8 +774,83 @@ The HTML `base` tag with the `href` attribute specifies the base URI, or URL, fo\n \n You can also use the CLI `--baseHref` option with [`ng build`](cli/build \"CLI reference for ng build\") to declare the base `href` at compile time.\n \n-Configuring servers for hosting multiple locales is outside the scope of this guide.\n-For details on how to deploy apps to a remote server, see [Deployment](guide/deployment \"Deployment guide\").\n+### Configuring servers\n+\n+Typical deployment of multiple languages serve each language from a different subdirectory.\n+Users are redirected to the preferred language defined in the browser using the\n+`Accept-Language` HTTP header. If the user has not defined a preferred language,\n+or if the preferred language is not available, then the server falls back to the default language.\n+Users can change the language by navigating to other subdirectories, which often occurs using a\n+menu implemented in the application.\n+\n+For more information on how to deploy apps to a remote server, see [Deployment](guide/deployment \"Deployment guide\").\n+\n+#### Nginx\n+\n+The following is an example of an Nginx configuration.\n+\n+```\n+http {\n+\n+    # Browser preferred language detection (does NOT require AcceptLanguageModule)\n+    map $http_accept_language $accept_language {\n+        ~*^de de;\n+        ~*^fr fr;\n+        ~*^en en;\n+    }\n+    # ...\n+}\n+\n+server {\n+    listen 80;\n+    server_name localhost;\n+    root /www/data;\n+\n+    # Fallback to default language if no preference defined by browser \n+    if ($accept_language ~ \"^$\") {\n+        set $accept_language \"fr\";\n+    }\n+    \n+    # Redirect \"/\" to Angular app in browser's preferred language\n+    rewrite ^/$ /$accept_language permanent;\n+\n+    # Everything under the Angular app is always redirected to Angular in the correct language\n+    location ~ ^/(fr|de|en) {\n+        try_files $uri /$1/index.html?$args;\n+    }\n+    # ...\n+}\n+```\n+\n+#### Apache\n+\n+The following is an example of an Apache configuration.\n+\n+```\n+<VirtualHost *:80>\n+    ServerName localhost\n+    DocumentRoot /www/data\n+    <Directory \"/www/data\">\n+        RewriteEngine on\n+        RewriteBase /\n+        RewriteRule ^../index\\.html$ - [L]\n+        \n+        RewriteCond %{REQUEST_FILENAME} !-f\n+        RewriteCond %{REQUEST_FILENAME} !-d\n+        RewriteRule (..) $1/index.html [L]\n+        \n+        RewriteCond %{HTTP:Accept-Language} ^de [NC]\n+        RewriteRule ^$ /de/ [R]\n+        \n+        RewriteCond %{HTTP:Accept-Language} ^en [NC]\n+        RewriteRule ^$ /en/ [R]\n+        \n+        RewriteCond %{HTTP:Accept-Language} !^en [NC]\n+        RewriteCond %{HTTP:Accept-Language} !^de [NC]\n+        RewriteRule ^$ /fr/ [R]\n+    </Directory>\n+</VirtualHost>\n+```\n \n {@a app-pre-translation}\n "
        }
    ],
    "stats": {
        "total": 79,
        "additions": 77,
        "deletions": 2
    }
}