{
    "author": "petebacondarwin",
    "message": "test(compiler): add a test for parsing multiline expressions in attributes (#43129)\n\nThis tests a scenario that was failing in an internal project.\n\nPR Close #43129",
    "sha": "66f1962fa69179fbc40be69ea408ad4bb1d9d9b9",
    "files": [
        {
            "sha": "851516b4874a0e68a93a24d8aef31600de9d161f",
            "filename": "packages/compiler/test/ml_parser/html_parser_spec.ts",
            "status": "modified",
            "additions": 23,
            "deletions": 0,
            "changes": 23,
            "blob_url": "https://github.com/angular/angular/blob/66f1962fa69179fbc40be69ea408ad4bb1d9d9b9/packages%2Fcompiler%2Ftest%2Fml_parser%2Fhtml_parser_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/66f1962fa69179fbc40be69ea408ad4bb1d9d9b9/packages%2Fcompiler%2Ftest%2Fml_parser%2Fhtml_parser_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fml_parser%2Fhtml_parser_spec.ts?ref=66f1962fa69179fbc40be69ea408ad4bb1d9d9b9",
            "patch": "@@ -267,6 +267,29 @@ import {humanizeDom, humanizeDomSourceSpans, humanizeLineColumn, humanizeNodes}\n           ]);\n         });\n \n+        it('should parse attributes containing unquoted interpolation', () => {\n+          expect(humanizeDom(parser.parse('<div foo={{message}}></div>', 'TestComp'))).toEqual([\n+            [html.Element, 'div', 0], [html.Attribute, 'foo', '{{message}}']\n+          ]);\n+        });\n+\n+        it('should parse bound inputs with expressions containing newlines', () => {\n+          expect(humanizeDom(parser.parse(\n+                     `<app-component\n+                        [attr]=\"[\n+                        {text: 'some text',url:'//www.google.com'},\n+                        {text:'other text',url:'//www.google.com'}]\"></app-component>`,\n+                     'TestComp')))\n+              .toEqual([\n+                [html.Element, 'app-component', 0],\n+                [\n+                  html.Attribute, '[attr]', `[\n+                        {text: 'some text',url:'//www.google.com'},\n+                        {text:'other text',url:'//www.google.com'}]`\n+                ],\n+              ]);\n+        });\n+\n         it('should normalize line endings within attribute values', () => {\n           const result =\n               parser.parse('<div key=\"  \\r\\n line 1 \\r\\n   line 2  \"></div>', 'TestComp');"
        },
        {
            "sha": "afc29dd9318d22f7c54c7afa039ef10ae3c6c56c",
            "filename": "packages/compiler/test/ml_parser/lexer_spec.ts",
            "status": "modified",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/angular/angular/blob/66f1962fa69179fbc40be69ea408ad4bb1d9d9b9/packages%2Fcompiler%2Ftest%2Fml_parser%2Flexer_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/66f1962fa69179fbc40be69ea408ad4bb1d9d9b9/packages%2Fcompiler%2Ftest%2Fml_parser%2Flexer_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fml_parser%2Flexer_spec.ts?ref=66f1962fa69179fbc40be69ea408ad4bb1d9d9b9",
            "patch": "@@ -362,6 +362,27 @@ import {ParseLocation, ParseSourceFile, ParseSourceSpan} from '../../src/parse_u\n         ]);\n       });\n \n+      it('should parse bound inputs with expressions containing newlines', () => {\n+        expect(tokenizeAndHumanizeParts(`<app-component\n+        [attr]=\"[\n+        {text: 'some text',url:'//www.google.com'},\n+        {text:'other text',url:'//www.google.com'}]\">`))\n+            .toEqual([\n+              [lex.TokenType.TAG_OPEN_START, '', 'app-component'],\n+              [lex.TokenType.ATTR_NAME, '', '[attr]'],\n+              [lex.TokenType.ATTR_QUOTE, '\"'],\n+              [\n+                lex.TokenType.ATTR_VALUE,\n+                '[\\n' +\n+                    '        {text: \\'some text\\',url:\\'//www.google.com\\'},\\n' +\n+                    '        {text:\\'other text\\',url:\\'//www.google.com\\'}]'\n+              ],\n+              [lex.TokenType.ATTR_QUOTE, '\"'],\n+              [lex.TokenType.TAG_OPEN_END],\n+              [lex.TokenType.EOF],\n+            ]);\n+      });\n+\n       it('should allow whitespace', () => {\n         expect(tokenizeAndHumanizeParts('<t a = b >')).toEqual([\n           [lex.TokenType.TAG_OPEN_START, '', 't'],"
        }
    ],
    "stats": {
        "total": 44,
        "additions": 44,
        "deletions": 0
    }
}