{
    "author": "devversion",
    "message": "test: update router tests to work with es2015 temporal dead zone (#44505)\n\nUpdate router tests to work with the the es2015 temporal dead zone.\n\nSomewhat similar to: https://github.com/angular/angular/issues/30106.\n\nPR Close #44505",
    "sha": "92806ff0422c6ba745afed5cd2672d5224344aa0",
    "files": [
        {
            "sha": "9b06161310765a617169db2b56bd01900b79ef23",
            "filename": "packages/router/test/computed_state_restoration.spec.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/92806ff0422c6ba745afed5cd2672d5224344aa0/packages%2Frouter%2Ftest%2Fcomputed_state_restoration.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/92806ff0422c6ba745afed5cd2672d5224344aa0/packages%2Frouter%2Ftest%2Fcomputed_state_restoration.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Frouter%2Ftest%2Fcomputed_state_restoration.spec.ts?ref=92806ff0422c6ba745afed5cd2672d5224344aa0",
            "patch": "@@ -64,12 +64,6 @@ describe('`restoredState#ɵrouterPageId`', () => {\n     }\n   }\n \n-  @NgModule(\n-      {imports: [RouterModule.forChild([{path: '', component: SimpleCmp}])]},\n-      )\n-  class LoadedModule {\n-  }\n-\n   let fixture: ComponentFixture<unknown>;\n \n   beforeEach(fakeAsync(() => {\n@@ -113,7 +107,7 @@ describe('`restoredState#ɵrouterPageId`', () => {\n         path: 'throwing',\n         component: ThrowingCmp,\n       },\n-      {path: 'loaded', loadChildren: () => of(LoadedModule), canLoad: ['alwaysFalse']}\n+      {path: 'loaded', loadChildren: () => of(ModuleWithSimpleCmpAsRoute), canLoad: ['alwaysFalse']}\n     ]);\n     router.navigateByUrl('/first');\n     advance(fixture);\n@@ -466,6 +460,12 @@ function createRoot(router: Router, type: any): ComponentFixture<any> {\n class SimpleCmp {\n }\n \n+@NgModule(\n+    {imports: [RouterModule.forChild([{path: '', component: SimpleCmp}])]},\n+    )\n+class ModuleWithSimpleCmpAsRoute {\n+}\n+\n @Component({selector: 'root-cmp', template: `<router-outlet></router-outlet>`})\n class RootCmp {\n }"
        },
        {
            "sha": "c3cdb98f9026664a7ea4cfe221689e35dfa57aed",
            "filename": "packages/router/test/integration.spec.ts",
            "status": "modified",
            "additions": 21,
            "deletions": 10,
            "changes": 31,
            "blob_url": "https://github.com/angular/angular/blob/92806ff0422c6ba745afed5cd2672d5224344aa0/packages%2Frouter%2Ftest%2Fintegration.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/92806ff0422c6ba745afed5cd2672d5224344aa0/packages%2Frouter%2Ftest%2Fintegration.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Frouter%2Ftest%2Fintegration.spec.ts?ref=92806ff0422c6ba745afed5cd2672d5224344aa0",
            "patch": "@@ -4283,10 +4283,6 @@ describe('Integration', () => {\n         return of(delayMs).pipe(delay(delayMs), mapTo(true));\n       }\n \n-      @NgModule({imports: [RouterModule.forChild([{path: '', component: BlankCmp}])]})\n-      class LoadedModule {\n-      }\n-\n       let log: string[];\n \n       beforeEach(() => {\n@@ -4338,10 +4334,14 @@ describe('Integration', () => {\n            const router = TestBed.inject(Router);\n \n            router.resetConfig([\n-             {path: 'lazy', canLoad: ['guard1'], loadChildren: () => of(LoadedModule)},\n+             {path: 'lazy', canLoad: ['guard1'], loadChildren: () => of(ModuleWithBlankCmpAsRoute)},\n              {path: 'redirected', component: SimpleCmp},\n              // canLoad should not run for this route because 'lazy' activates first\n-             {path: '', canLoad: ['returnFalseAndNavigate'], loadChildren: () => of(LoadedModule)},\n+             {\n+               path: '',\n+               canLoad: ['returnFalseAndNavigate'],\n+               loadChildren: () => of(ModuleWithBlankCmpAsRoute)\n+             },\n            ]);\n \n            router.navigateByUrl('/lazy');\n@@ -4351,8 +4351,11 @@ describe('Integration', () => {\n          }));\n \n       it('should execute canLoad guards', fakeAsync(inject([Router], (router: Router) => {\n-           router.resetConfig(\n-               [{path: 'lazy', canLoad: ['guard1', 'guard2'], loadChildren: () => LoadedModule}]);\n+           router.resetConfig([{\n+             path: 'lazy',\n+             canLoad: ['guard1', 'guard2'],\n+             loadChildren: () => ModuleWithBlankCmpAsRoute\n+           }]);\n \n            router.navigateByUrl('/lazy');\n            tick(5);\n@@ -4367,7 +4370,7 @@ describe('Integration', () => {\n              {\n                path: 'lazy',\n                canLoad: ['returnUrlTree', 'guard1', 'guard2'],\n-               loadChildren: () => LoadedModule\n+               loadChildren: () => ModuleWithBlankCmpAsRoute\n              },\n              {path: 'redirected', component: SimpleCmp}\n            ]);\n@@ -4383,7 +4386,11 @@ describe('Integration', () => {\n       it('should redirect with UrlTree if UrlTree is lower priority',\n          fakeAsync(inject([Router, Location], (router: Router, location: Location) => {\n            router.resetConfig([\n-             {path: 'lazy', canLoad: ['guard1', 'returnUrlTree'], loadChildren: () => LoadedModule},\n+             {\n+               path: 'lazy',\n+               canLoad: ['guard1', 'returnUrlTree'],\n+               loadChildren: () => ModuleWithBlankCmpAsRoute\n+             },\n              {path: 'redirected', component: SimpleCmp}\n            ]);\n \n@@ -6289,6 +6296,10 @@ class CollectParamsCmp {\n class BlankCmp {\n }\n \n+@NgModule({imports: [RouterModule.forChild([{path: '', component: BlankCmp}])]})\n+class ModuleWithBlankCmpAsRoute {\n+}\n+\n @Component({\n   selector: 'team-cmp',\n   template: `team {{id | async}} ` +"
        }
    ],
    "stats": {
        "total": 45,
        "additions": 28,
        "deletions": 17
    }
}