{
    "author": "gkalpak",
    "message": "docs: add info about working with fixup commits (#39110)\n\nUsing fixup commits when addressing review feedback can considerably\nimprove the review experience on subsequent reviews.\n\nThis commit adds information and guidelines for contributors on how to\nwork with fixup commits.\n\nFixes #33042\n\nPR Close #39110",
    "sha": "6e0a8eb268d8f88866c15a1d5cda651edc558081",
    "files": [
        {
            "sha": "dbf568d435072695cc1fdfebdfdda2c8bd8ab655",
            "filename": ".pullapprove.yml",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/6e0a8eb268d8f88866c15a1d5cda651edc558081/.pullapprove.yml",
            "raw_url": "https://github.com/angular/angular/raw/6e0a8eb268d8f88866c15a1d5cda651edc558081/.pullapprove.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.pullapprove.yml?ref=6e0a8eb268d8f88866c15a1d5cda651edc558081",
            "patch": "@@ -1114,6 +1114,7 @@ groups:\n           'docs/DEBUG.md',\n           'docs/DEBUG_COMPONENTS_REPO_IVY.md',\n           'docs/DEVELOPER.md',\n+          'docs/FIXUP_COMMITS.md',\n           'docs/GITHUB_PROCESS.md',\n           'docs/PR_REVIEW.md',\n           'docs/SAVED_REPLIES.md',"
        },
        {
            "sha": "dcb5013dd1f1e26296f4ced2c5f33984af8ac5dc",
            "filename": "CONTRIBUTING.md",
            "status": "modified",
            "additions": 24,
            "deletions": 9,
            "changes": 33,
            "blob_url": "https://github.com/angular/angular/blob/6e0a8eb268d8f88866c15a1d5cda651edc558081/CONTRIBUTING.md",
            "raw_url": "https://github.com/angular/angular/raw/6e0a8eb268d8f88866c15a1d5cda651edc558081/CONTRIBUTING.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/CONTRIBUTING.md?ref=6e0a8eb268d8f88866c15a1d5cda651edc558081",
            "patch": "@@ -107,7 +107,7 @@ Before you submit your Pull Request (PR) consider the following guidelines:\n    Adherence to these conventions is necessary because release notes are automatically generated from these messages.\n \n      ```shell\n-     git commit -a\n+     git commit --all\n      ```\n     Note: the optional commit `-a` command line option will automatically \"add\" and \"rm\" edited files.\n \n@@ -119,16 +119,31 @@ Before you submit your Pull Request (PR) consider the following guidelines:\n \n 11. In GitHub, send a pull request to `angular:master`.\n \n-   If we ask for changes via code reviews then:\n \n-   * Make the required updates.\n-   * Re-run the Angular test suites to ensure tests are still passing.\n-   * Rebase your branch and force push to your GitHub repository (this will update your Pull Request):\n+#### Addressing review feedback\n \n-      ```shell\n-      git rebase master -i\n-      git push -f\n-      ```\n+If we ask for changes via code reviews then:\n+\n+1. Make the required updates to the code.\n+\n+2. Re-run the Angular test suites to ensure tests are still passing.\n+\n+3. Create a fixup commit and push to your GitHub repository (this will update your Pull Request):\n+\n+    ```shell\n+    git commit --all --fixup HEAD\n+    git push\n+    ```\n+\n+    For more info on working with fixup commits see [here](docs/FIXUP_COMMITS.md).\n+\n+> Fixup commits (as shown above) are preferred when addressing review feedback, but in some cases you may need to amend the original commit instead of creating a fixup commit (for example, if you want to update the commit message).\n+> To amend the last commit and update the Pull Request:\n+>\n+> ```shell\n+> git commit --all --amend\n+> git push --force-with-lease\n+> ```\n \n That's it! Thank you for your contribution!\n "
        },
        {
            "sha": "c32a91ef3d708b51132f1f994c255fe89520e78a",
            "filename": "docs/FIXUP_COMMITS.md",
            "status": "added",
            "additions": 95,
            "deletions": 0,
            "changes": 95,
            "blob_url": "https://github.com/angular/angular/blob/6e0a8eb268d8f88866c15a1d5cda651edc558081/docs%2FFIXUP_COMMITS.md",
            "raw_url": "https://github.com/angular/angular/raw/6e0a8eb268d8f88866c15a1d5cda651edc558081/docs%2FFIXUP_COMMITS.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/docs%2FFIXUP_COMMITS.md?ref=6e0a8eb268d8f88866c15a1d5cda651edc558081",
            "patch": "@@ -0,0 +1,95 @@\n+# Working with fixup commits\n+\n+This document provides information and guidelines for working with fixup commits:\n+- [What are fixup commits](#about-fixup-commits)\n+- [Why use fixup commits](#why-fixup-commits)\n+- [Creating fixup commits](#create-fixup-commits)\n+- [Squashing fixup commits](#squash-fixup-commits)\n+\n+[This blog post](https://thoughtbot.com/blog/autosquashing-git-commits) is also a good resource on the subject.\n+\n+\n+## <a name=\"about-fixup-commits\"></a> What are fixup commits\n+\n+At their core, fixup commits are just regular commits with a special commit message:\n+The first line of their commit message starts with \"fixup! \" (notice the space after \"!\") followed by the first line of the commit message of an earlier commit (it doesn't have to be the immediately preceding one).\n+\n+The purpose of a fixup commit is to modify an earlier commit.\n+I.e. it allows adding more changes in a new commit, but \"marking\" them as belonging to an earlier commit.\n+`Git` provides tools to make it easy to squash fixup commits into the original commit at a later time (see [below](#squash-fixup-commits) for details).\n+\n+For example, let's assume you have added the following commits to your branch:\n+\n+```\n+feat: first commit\n+fix: second commit\n+```\n+\n+If you want to add more changes to the first commit, you can create a new commit with the commit message:\n+`fixup! feat: first commit`:\n+\n+```\n+feat: first commit\n+fix: second commit\n+fixup! feat: first commit\n+```\n+\n+\n+## <a name=\"why-fixup-commits\"></a> Why use fixup commits\n+\n+So, when are fixup commits useful?\n+\n+During the life of a Pull Request, a reviewer might request changes.\n+The Pull Request author can make the requested changes and submit them for another review.\n+Normally, these changes should be part of one of the original commits of the Pull Request.\n+However, amending an existing commit with the changes makes it difficult for the reviewer to know exactly what has changed since the last time they reviewed the Pull Request.\n+\n+Here is where fixup commits come in handy.\n+By addressing review feedback in fixup commits, you make it very straight forward for the reviewer to see what are the new changes that need to be reviewed and verify that their earlier feedback has been addressed.\n+This can save a lot of effort, especially on larger Pull Requests (where having to re-review _all_ the changes is pretty wasteful).\n+\n+When the time comes to merge the Pull Request into the repository, the merge script [knows how to automatically squash](../dev-infra/pr/merge/strategies/autosquash-merge.ts) fixup commits with the corresponding regular commits.\n+\n+\n+## <a name=\"create-fixup-commits\"></a> Creating fixup commits\n+\n+As mentioned [above](#about-fixup-commits), the only thing that differentiates a fixup commit from a regular commit is the commit message.\n+You can create a fixup commit by specifying an appropriate commit message (i.e. `fixup! <original-commit-message-subject>`).\n+\n+In addition, the `git` command-line tool provides an easy way to create a fixup commit via [git commit --fixup](https://git-scm.com/docs/git-commit#Documentation/git-commit.txt---fixupltcommitgt):\n+\n+```sh\n+# Create a fixup commit to fix up the last commit on the branch:\n+git commit --fixup HEAD ...\n+\n+# Create a fixup commit to fix up commit with SHA <COMMIT_SHA>:\n+git commit --fixup <COMMIT_SHA> ...\n+```\n+\n+\n+## <a name=\"squash-fixup-commits\"></a> Squashing fixup commits\n+\n+As mentioned above, the merge script will [automatically squash](../dev-infra/pr/merge/strategies/autosquash-merge.ts) fixup commits.\n+However, sometimes you might want to manually squash a fixup commit.\n+\n+\n+### Rebasing to squash fixup commits\n+\n+The easiest way to re-order and squash any commit is via [rebasing interactively](https://git-scm.com/docs/git-rebase#_interactive_mode). You move a commit right after the one you want to squash it into in the rebase TODO list and change the corresponding action from `pick` to `fixup`.\n+\n+`Git` can do all these automatically for you if you pass the `--autosquash` option to `git rebase`.\n+See the [`git` docs](https://git-scm.com/docs/git-rebase#Documentation/git-rebase.txt---autosquash) for more details.\n+\n+\n+### Additional options\n+\n+You may like to consider some optional configurations:\n+\n+\n+#### Configuring `git` to auto-squash by default\n+\n+By default, `git` will not automatically squash fixup commits when interactively rebasing.\n+If you prefer to not have to pass the `--autosquash` option every time, you can change the default behavior by setting the `rebase.autoSquash` `git` config option to true.\n+See the [`git` docs](https://git-scm.com/docs/git-rebase#Documentation/git-rebase.txt-rebaseautoSquash) for more details.\n+\n+If you have `rebase.autoSquash` set to true, you can pass the `--no-autosquash` option to `git rebase` to override and disable this setting."
        }
    ],
    "stats": {
        "total": 129,
        "additions": 120,
        "deletions": 9
    }
}