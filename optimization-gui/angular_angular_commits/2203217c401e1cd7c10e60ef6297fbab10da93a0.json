{
    "author": "gkalpak",
    "message": "build(docs-infra): disambiguate doc paths for global APIs (#42648)\n\nIn #41788, the `disambiguateDocsPathsProcessor` was introduced to fix\nan issue with case-insensitively equal paths. This processor may alter\nthe output paths of some docs. Due to its nature, the\n`disambiguateDocPathsProcessor` must be the last processor in the\npipeline that updates a doc's output path. However, the\n`updateGlobalApiPathProcess` (which also alters the output paths of some\ndocs) was not configured to run before `disambiguateDocPathsProcessor`.\nAs a result, the changes made by `disambiguateDocPathsProcessor` were\noverridden by `updateGlobalApiPathProcess`, resulting in the app's\nfailing to load such global API docs pages. An example of such an API\npage is: https://angular.io/api/core/global/ngApplyChanges\n\nThis commit fixes it by ensuring that the `updateGlobalApiPathProcess`\nis explicitly run before the `disambiguateDocPathsProcessor`, so that\nthe former does not override the changes made by the latter.\n\nPR Close #42648",
    "sha": "2203217c401e1cd7c10e60ef6297fbab10da93a0",
    "files": [
        {
            "sha": "66e246aebaefefb2d754d1d4e8d972551b81bae5",
            "filename": "aio/tests/deployment/e2e/smoke-tests.e2e-spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/2203217c401e1cd7c10e60ef6297fbab10da93a0/aio%2Ftests%2Fdeployment%2Fe2e%2Fsmoke-tests.e2e-spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/2203217c401e1cd7c10e60ef6297fbab10da93a0/aio%2Ftests%2Fdeployment%2Fe2e%2Fsmoke-tests.e2e-spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftests%2Fdeployment%2Fe2e%2Fsmoke-tests.e2e-spec.ts?ref=2203217c401e1cd7c10e60ef6297fbab10da93a0",
            "patch": "@@ -68,6 +68,7 @@ describe(browser.baseUrl, () => {\n         /* Directive */ 'api/common/NgIf': 'class ngif',\n         /* Enum */ 'api/core/ChangeDetectionStrategy': 'enum changedetectionstrategy',\n         /* Function */ 'api/animations/animate': 'animate(',\n+        /* Global */ 'api/core/global/ngApplyChanges': 'ng.applychanges(',\n         /* Interface */ 'api/core/OnDestroy': 'interface ondestroy',\n         /* Pipe */ 'api/common/JsonPipe': '| json',\n         /* Type-Alias */ 'api/common/http/HttpEvent': 'type httpevent',"
        },
        {
            "sha": "dd7f4609a1f98b3b47aa0424d577ed69d485f6b8",
            "filename": "aio/tools/transforms/angular-api-package/processors/updateGlobalApiPath.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/2203217c401e1cd7c10e60ef6297fbab10da93a0/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Fprocessors%2FupdateGlobalApiPath.js",
            "raw_url": "https://github.com/angular/angular/raw/2203217c401e1cd7c10e60ef6297fbab10da93a0/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Fprocessors%2FupdateGlobalApiPath.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Fprocessors%2FupdateGlobalApiPath.js?ref=2203217c401e1cd7c10e60ef6297fbab10da93a0",
            "patch": "@@ -6,8 +6,8 @@\n  */\n module.exports = function updateGlobalApiPathProcessor() {\n   return {\n-    $runAfter: ['computePathsProcessor'],\n-    $runBefore: ['processNgModuleDocs'],\n+    $runAfter: ['paths-computed'],\n+    $runBefore: ['disambiguateDocPathsProcessor', 'processNgModuleDocs'],\n     $process: function(docs) {\n       docs.forEach(doc => {\n         if (doc.global && doc.globalNamespace) {"
        },
        {
            "sha": "726ae8732aca9f0f007ec02f8fef13ba19ecf4c6",
            "filename": "aio/tools/transforms/angular-api-package/processors/updateGlobalApiPath.spec.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/2203217c401e1cd7c10e60ef6297fbab10da93a0/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Fprocessors%2FupdateGlobalApiPath.spec.js",
            "raw_url": "https://github.com/angular/angular/raw/2203217c401e1cd7c10e60ef6297fbab10da93a0/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Fprocessors%2FupdateGlobalApiPath.spec.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Fprocessors%2FupdateGlobalApiPath.spec.js?ref=2203217c401e1cd7c10e60ef6297fbab10da93a0",
            "patch": "@@ -12,12 +12,12 @@ describe('updateGlobalApiPath processor', () => {\n \n   it('should run before the correct processor', () => {\n     const processor = processorFactory();\n-    expect(processor.$runBefore).toEqual(['processNgModuleDocs']);\n+    expect(processor.$runBefore).toEqual(['disambiguateDocPathsProcessor', 'processNgModuleDocs']);\n   });\n \n   it('should run after the correct processor', () => {\n     const processor = processorFactory();\n-    expect(processor.$runAfter).toEqual(['computePathsProcessor']);\n+    expect(processor.$runAfter).toEqual(['paths-computed']);\n   });\n \n   it('should update the paths of namespaced global APIs', () => {"
        }
    ],
    "stats": {
        "total": 9,
        "additions": 5,
        "deletions": 4
    }
}