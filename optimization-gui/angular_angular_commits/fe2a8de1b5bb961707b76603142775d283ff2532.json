{
    "author": "devversion",
    "message": "refactor(compiler-cli): expose tooling code through `private` entry-point (#43431)\n\nSimilar to the other private entry-points we have added for localize,\nbazel or the migrations, we should expose the tooling code through\na dedicated private export. This will make the compiler-cli exports\nmore consistent and it will become easier for the CLI to export\nnecessary code.\n\nPR Close #43431",
    "sha": "fe2a8de1b5bb961707b76603142775d283ff2532",
    "files": [
        {
            "sha": "764fe9c1d440febe92bc24c05f8c7f6834e0073e",
            "filename": ".pullapprove.yml",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/fe2a8de1b5bb961707b76603142775d283ff2532/.pullapprove.yml",
            "raw_url": "https://github.com/angular/angular/raw/fe2a8de1b5bb961707b76603142775d283ff2532/.pullapprove.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.pullapprove.yml?ref=fe2a8de1b5bb961707b76603142775d283ff2532",
            "patch": "@@ -1028,7 +1028,7 @@ groups:\n       - *can-be-global-docs-approved\n       - >\n         contains_any_globs(files, [\n-          'packages/compiler-cli/src/tooling.ts',\n+          'packages/compiler-cli/private/tooling.ts',\n           'packages/localize/tools/index.ts'\n         ])\n     reviewers:"
        },
        {
            "sha": "28030754c1c35171a374b87c44900f4cb9d3ff44",
            "filename": "packages/compiler-cli/BUILD.bazel",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2FBUILD.bazel?ref=fe2a8de1b5bb961707b76603142775d283ff2532",
            "patch": "@@ -35,6 +35,7 @@ esbuild(\n         \"//packages/compiler-cli/private:bazel.ts\",\n         \"//packages/compiler-cli/private:localize.ts\",\n         \"//packages/compiler-cli/private:migrations.ts\",\n+        \"//packages/compiler-cli/private:tooling.ts\",\n         \"//packages/compiler-cli/ngcc:src/locking/lock_file_with_child_process/ngcc_lock_unlocker.ts\",\n         \"//packages/compiler-cli/ngcc:src/execution/cluster/ngcc_cluster_worker.ts\",\n     ],\n@@ -89,6 +90,7 @@ ts_library(\n     deps = [\n         \":import_meta_url_types\",\n         \"//packages/compiler\",\n+        \"//packages/compiler-cli/private\",\n         \"//packages/compiler-cli/src/ngtsc/core\",\n         \"//packages/compiler-cli/src/ngtsc/core:api\",\n         \"//packages/compiler-cli/src/ngtsc/diagnostics\",\n@@ -103,6 +105,7 @@ ts_library(\n         \"//packages/compiler-cli/src/ngtsc/translator\",\n         \"//packages/compiler-cli/src/ngtsc/typecheck\",\n         \"//packages/compiler-cli/src/ngtsc/typecheck/api\",\n+        \"//packages/compiler-cli/src/transformers/downlevel_decorators_transform\",\n         \"@npm//@bazel/typescript\",\n         \"@npm//@types/minimist\",\n         \"@npm//@types/node\","
        },
        {
            "sha": "737f227f1379559efeb1fa565e87ec9f19ad046c",
            "filename": "packages/compiler-cli/index.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Findex.ts?ref=fe2a8de1b5bb961707b76603142775d283ff2532",
            "patch": "@@ -23,9 +23,8 @@ export {CompilerOptions as AngularCompilerOptions} from './src/transformers/api'\n export {ngToTsDiagnostic} from './src/transformers/util';\n \n // Internal exports needed for packages relying on the compiler-cli.\n-// TODO: Consider moving into `@angular/compiler-cli/private`. This would\n-// help with a consistent pattern for cross package imports for Angular.\n-export * from './src/tooling';\n+// TODO: Remove this when the CLI has switched to the private entry-point.\n+export * from './private/tooling';\n \n // Exposed as they are needed for relying on the `linker`.\n export * from './src/ngtsc/logging';"
        },
        {
            "sha": "dab00a743c4de124a055a9505956e3ce0fac81b7",
            "filename": "packages/compiler-cli/package.json",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fpackage.json?ref=fe2a8de1b5bb961707b76603142775d283ff2532",
            "patch": "@@ -41,6 +41,10 @@\n       \"types\": \"./private/migrations.d.ts\",\n       \"default\": \"./bundles/private/migrations.js\"\n     },\n+    \"./private/tooling\": {\n+      \"types\": \"./private/tooling.d.ts\",\n+      \"default\": \"./bundles/private/tooling.js\"\n+    },\n     \"./ngcc/src/execution/cluster/ngcc_cluster_worker\": {\n       \"default\": \"./bundles/ngcc/src/execution/cluster/ngcc_cluster_worker.js\"\n     },"
        },
        {
            "sha": "c95c1328d69aebfc8a591ffcae2e65aec2cbd384",
            "filename": "packages/compiler-cli/private/BUILD.bazel",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Fprivate%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Fprivate%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fprivate%2FBUILD.bazel?ref=fe2a8de1b5bb961707b76603142775d283ff2532",
            "patch": "@@ -14,5 +14,7 @@ ts_library(\n         \"//packages/compiler-cli/src/ngtsc/perf\",\n         \"//packages/compiler-cli/src/ngtsc/reflection\",\n         \"//packages/compiler-cli/src/ngtsc/sourcemaps\",\n+        \"//packages/compiler-cli/src/transformers/downlevel_decorators_transform\",\n+        \"@npm//typescript\",\n     ],\n )"
        },
        {
            "sha": "372e00198ca86c42d714cbb73dc23dc585b4a888",
            "filename": "packages/compiler-cli/private/tooling.ts",
            "status": "renamed",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Fprivate%2Ftooling.ts",
            "raw_url": "https://github.com/angular/angular/raw/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Fprivate%2Ftooling.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fprivate%2Ftooling.ts?ref=fe2a8de1b5bb961707b76603142775d283ff2532",
            "patch": "@@ -15,8 +15,8 @@\n \n import ts from 'typescript';\n \n-import {TypeScriptReflectionHost} from './ngtsc/reflection';\n-import {getDownlevelDecoratorsTransform} from './transformers/downlevel_decorators_transform';\n+import {TypeScriptReflectionHost} from '../src/ngtsc/reflection';\n+import {getDownlevelDecoratorsTransform} from '../src/transformers/downlevel_decorators_transform/index';\n \n /**\n  * Known values for global variables in `@angular/core` that Terser should set using",
            "previous_filename": "packages/compiler-cli/src/tooling.ts"
        },
        {
            "sha": "5aa8de9ab9d24249e29486dae037203f6340f8eb",
            "filename": "packages/compiler-cli/src/transformers/downlevel_decorators_transform/BUILD.bazel",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fdownlevel_decorators_transform%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fdownlevel_decorators_transform%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fdownlevel_decorators_transform%2FBUILD.bazel?ref=fe2a8de1b5bb961707b76603142775d283ff2532",
            "patch": "@@ -0,0 +1,12 @@\n+load(\"//tools:defaults.bzl\", \"ts_library\")\n+\n+package(default_visibility = [\"//visibility:public\"])\n+\n+ts_library(\n+    name = \"downlevel_decorators_transform\",\n+    srcs = glob([\"*.ts\"]),\n+    deps = [\n+        \"//packages/compiler-cli/src/ngtsc/reflection\",\n+        \"@npm//typescript\",\n+    ],\n+)"
        },
        {
            "sha": "cfeb4060d54ff084d8058922fff08f3230630289",
            "filename": "packages/compiler-cli/src/transformers/downlevel_decorators_transform/downlevel_decorators_transform.ts",
            "status": "renamed",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fdownlevel_decorators_transform%2Fdownlevel_decorators_transform.ts",
            "raw_url": "https://github.com/angular/angular/raw/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fdownlevel_decorators_transform%2Fdownlevel_decorators_transform.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fdownlevel_decorators_transform%2Fdownlevel_decorators_transform.ts?ref=fe2a8de1b5bb961707b76603142775d283ff2532",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import ts from 'typescript';\n-import {Decorator, ReflectionHost} from '../ngtsc/reflection';\n+import {Decorator, ReflectionHost} from '../../ngtsc/reflection';\n import {isAliasImportDeclaration, loadIsReferencedAliasDeclarationPatch} from './patch_alias_reference_resolution';\n \n /**",
            "previous_filename": "packages/compiler-cli/src/transformers/downlevel_decorators_transform.ts"
        },
        {
            "sha": "e0ee891b172aee4b445f9c6643fe3a9816407e89",
            "filename": "packages/compiler-cli/src/transformers/downlevel_decorators_transform/index.ts",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fdownlevel_decorators_transform%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fdownlevel_decorators_transform%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fdownlevel_decorators_transform%2Findex.ts?ref=fe2a8de1b5bb961707b76603142775d283ff2532",
            "patch": "@@ -0,0 +1,9 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+export {getDownlevelDecoratorsTransform} from './downlevel_decorators_transform';"
        },
        {
            "sha": "6491f93a887c438e8e109cca163fa0337c374200",
            "filename": "packages/compiler-cli/src/transformers/downlevel_decorators_transform/patch_alias_reference_resolution.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/angular/angular/blob/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fdownlevel_decorators_transform%2Fpatch_alias_reference_resolution.ts",
            "raw_url": "https://github.com/angular/angular/raw/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fdownlevel_decorators_transform%2Fpatch_alias_reference_resolution.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fdownlevel_decorators_transform%2Fpatch_alias_reference_resolution.ts?ref=fe2a8de1b5bb961707b76603142775d283ff2532",
            "previous_filename": "packages/compiler-cli/src/transformers/patch_alias_reference_resolution.ts"
        },
        {
            "sha": "6e17ff476f0fdb30f754112c97ec5747f6cbe2d1",
            "filename": "packages/compiler-cli/src/transformers/program.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fprogram.ts",
            "raw_url": "https://github.com/angular/angular/raw/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fprogram.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fprogram.ts?ref=fe2a8de1b5bb961707b76603142775d283ff2532",
            "patch": "@@ -21,7 +21,7 @@ import {verifySupportedTypeScriptVersion} from '../typescript_support';\n \n import {CompilerHost, CompilerOptions, CustomTransformers, DEFAULT_ERROR_CODE, Diagnostic, DiagnosticMessageChain, EmitFlags, LazyRoute, LibrarySummary, Program, SOURCE, TsEmitCallback, TsMergeEmitResultsCallback} from './api';\n import {CodeGenerator, getOriginalReferences, TsCompilerAotCompilerTypeCheckHostAdapter} from './compiler_host';\n-import {getDownlevelDecoratorsTransform} from './downlevel_decorators_transform';\n+import {getDownlevelDecoratorsTransform} from './downlevel_decorators_transform/index';\n import {i18nExtract} from './i18n';\n import {getInlineResourcesTransformFactory, InlineResourcesMetadataTransformer} from './inline_resources';\n import {getExpressionLoweringTransformFactory, LowerMetadataTransform} from './lower_expressions';"
        },
        {
            "sha": "bff116edb19e7fcd8dc21eefca6a1d2da3f44312",
            "filename": "packages/compiler-cli/test/transformers/BUILD.bazel",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Ftest%2Ftransformers%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Ftest%2Ftransformers%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Ftransformers%2FBUILD.bazel?ref=fe2a8de1b5bb961707b76603142775d283ff2532",
            "patch": "@@ -9,6 +9,7 @@ ts_library(\n         \"//packages/compiler\",\n         \"//packages/compiler-cli\",\n         \"//packages/compiler-cli/src/ngtsc/reflection\",\n+        \"//packages/compiler-cli/src/transformers/downlevel_decorators_transform\",\n         \"//packages/compiler-cli/test:test_utils\",\n         \"//packages/compiler/test:test_utils\",\n         \"//packages/core\","
        },
        {
            "sha": "9439e79dabeabe6064578bfff765489bcee34ddb",
            "filename": "packages/compiler-cli/test/transformers/downlevel_decorators_transform_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Ftest%2Ftransformers%2Fdownlevel_decorators_transform_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/fe2a8de1b5bb961707b76603142775d283ff2532/packages%2Fcompiler-cli%2Ftest%2Ftransformers%2Fdownlevel_decorators_transform_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Ftransformers%2Fdownlevel_decorators_transform_spec.ts?ref=fe2a8de1b5bb961707b76603142775d283ff2532",
            "patch": "@@ -9,7 +9,7 @@\n import ts from 'typescript';\n \n import {TypeScriptReflectionHost} from '../../src/ngtsc/reflection';\n-import {getDownlevelDecoratorsTransform} from '../../src/transformers/downlevel_decorators_transform';\n+import {getDownlevelDecoratorsTransform} from '../../src/transformers/downlevel_decorators_transform/index';\n import {MockAotContext, MockCompilerHost} from '../mocks';\n \n const TEST_FILE_INPUT = '/test.ts';"
        }
    ],
    "stats": {
        "total": 48,
        "additions": 39,
        "deletions": 9
    }
}