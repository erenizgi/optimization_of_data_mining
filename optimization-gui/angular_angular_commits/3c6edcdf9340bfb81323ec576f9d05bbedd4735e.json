{
    "author": "JoostK",
    "message": "fix(core): do not error when `ngDevMode` is undeclared (#39415)\n\nIn production mode, the `ngDevMode` global may not have been declared.\nThis is typically not a problem, as optimizers should have removed all\nusages of the `ngDevMode` variables. This does however require the\nbundler/optimizer to have been configured in a certain way, as to allow\nfor `ngDevMode` guarded code to be removed.\n\nAs an example, Terser can be configured to remove the `ngDevMode`\nguarded code using the following configuration:\n\n```js\nconst terserOptions = {\n  // ...\n  compress: {\n    // ...\n    global_defs: require('@angular/compiler-cli').GLOBAL_DEFS_FOR_TERSER,\n  }\n}\n```\n\n(Taken from https://github.com/angular/angular/issues/31595#issuecomment-519129090)\n\nIf this is not done, however, the bundle should still work (albeit with\nlarger code size due to missed tree-shaking opportunities). This commit\nadds a check for whether `ngDevMode` has been declared, as it is a\ntop-level statement that executes before `ngDevMode` has been initialized.\n\nFixes #31595\n\nPR Close #39415",
    "sha": "3c6edcdf9340bfb81323ec576f9d05bbedd4735e",
    "files": [
        {
            "sha": "13a1af3941286ef70173becfd2e51a8da45a4097",
            "filename": "integration/side-effects/snapshots/core/esm2015.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/3c6edcdf9340bfb81323ec576f9d05bbedd4735e/integration%2Fside-effects%2Fsnapshots%2Fcore%2Fesm2015.js",
            "raw_url": "https://github.com/angular/angular/raw/3c6edcdf9340bfb81323ec576f9d05bbedd4735e/integration%2Fside-effects%2Fsnapshots%2Fcore%2Fesm2015.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/integration%2Fside-effects%2Fsnapshots%2Fcore%2Fesm2015.js?ref=3c6edcdf9340bfb81323ec576f9d05bbedd4735e",
            "patch": "@@ -12,6 +12,6 @@ const __global = \"undefined\" !== typeof global && global;\n \n const _global = __globalThis || __global || __window || __self;\n \n-if (ngDevMode) _global.$localize = _global.$localize || function() {\n+if (\"undefined\" !== typeof ngDevMode && ngDevMode) _global.$localize = _global.$localize || function() {\n     throw new Error(\"It looks like your application or one of its dependencies is using i18n.\\n\" + \"Angular 9 introduced a global `$localize()` function that needs to be loaded.\\n\" + \"Please run `ng add @angular/localize` from the Angular CLI.\\n\" + \"(For non-CLI projects, add `import '@angular/localize/init';` to your `polyfills.ts` file.\\n\" + \"For server-side rendering applications add the import to your `main.server.ts` file.)\");\n };"
        },
        {
            "sha": "b59aabbbe10e18551a8de2e36273f2d6e0ed54df",
            "filename": "packages/core/src/core.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/3c6edcdf9340bfb81323ec576f9d05bbedd4735e/packages%2Fcore%2Fsrc%2Fcore.ts",
            "raw_url": "https://github.com/angular/angular/raw/3c6edcdf9340bfb81323ec576f9d05bbedd4735e/packages%2Fcore%2Fsrc%2Fcore.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fcore.ts?ref=3c6edcdf9340bfb81323ec576f9d05bbedd4735e",
            "patch": "@@ -38,7 +38,7 @@ export {Sanitizer} from './sanitization/sanitizer';\n export * from './codegen_private_exports';\n \n import {global} from './util/global';\n-if (ngDevMode) {\n+if (typeof ngDevMode !== 'undefined' && ngDevMode) {\n   // This helper is to give a reasonable error message to people upgrading to v9 that have not yet\n   // installed `@angular/localize` in their app.\n   // tslint:disable-next-line: no-toplevel-property-access"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}