{
    "author": "gkalpak",
    "message": "test(docs-infra): fix the `dynamic-component-loader` e2e tests (#39818)\n\nPreviously, the test made no meaningful assertion. It seems that the\nintention was to ensure that some elements were present on the page, but\nall the assertions did was verify that the corresponding\n`ElementFinder`s were defined. The `ElementFinder`s would always be\ndefined, even if there were no corresponding elements on the page. In\nfact, some of the `ElementFinder` selectors were incorrect, so they did\nnot match any actual elements.\n\nThis commit fixes the tests by fixing the `ElementFinder` selectors and\nasserting that the elements are actually present on the page.\n\nPR Close #39818",
    "sha": "c7605ccf05558ea6501a28bef3511faae26e3b3b",
    "files": [
        {
            "sha": "f0f7c7297b89cf8edf53a8be89f3a67fcb48e652",
            "filename": "aio/content/examples/dynamic-component-loader/e2e/src/app.e2e-spec.ts",
            "status": "modified",
            "additions": 16,
            "deletions": 11,
            "changes": 27,
            "blob_url": "https://github.com/angular/angular/blob/c7605ccf05558ea6501a28bef3511faae26e3b3b/aio%2Fcontent%2Fexamples%2Fdynamic-component-loader%2Fe2e%2Fsrc%2Fapp.e2e-spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/c7605ccf05558ea6501a28bef3511faae26e3b3b/aio%2Fcontent%2Fexamples%2Fdynamic-component-loader%2Fe2e%2Fsrc%2Fapp.e2e-spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Fdynamic-component-loader%2Fe2e%2Fsrc%2Fapp.e2e-spec.ts?ref=c7605ccf05558ea6501a28bef3511faae26e3b3b",
            "patch": "@@ -1,19 +1,24 @@\n import { browser, element, by } from 'protractor';\n \n-/* tslint:disable:quotemark */\n describe('Dynamic Component Loader', () => {\n \n-  beforeEach(() => {\n-    browser.get('');\n-  });\n+  // The tests trigger periodic asynchronous operations (via `setInterval()`), which will prevent\n+  // the app from stabilizing. See https://angular.io/api/core/ApplicationRef#is-stable-examples\n+  // for more details.\n+  // To allow the tests to complete, we will disable automatically waiting for the Angular app to\n+  // stabilize.\n+  beforeAll(() => browser.waitForAngularEnabled(false));\n+  afterAll(() => browser.waitForAngularEnabled(true));\n+\n+  beforeEach(() => browser.get(''));\n \n-  it('should load ad banner', () => {\n-    const headline = element(by.xpath(\"//h4[text()='Featured Hero Profile']\"));\n-    const name = element(by.xpath(\"//h3[text()='Bombasto']\"));\n-    const bio = element(by.xpath(\"//p[text()='Brave as they come']\"));\n+  it('should load ad banner', async () => {\n+    const headline = element(by.cssContainingText('h3', 'Featured Hero Profile'));\n+    const name = element(by.cssContainingText('h4', 'Bombasto'));\n+    const bio = element(by.cssContainingText('p', 'Brave as they come'));\n \n-    expect(name).toBeDefined();\n-    expect(headline).toBeDefined();\n-    expect(bio).toBeDefined();\n+    expect(await headline.isPresent()).toBe(true);\n+    expect(await name.isPresent()).toBe(true);\n+    expect(await bio.isPresent()).toBe(true);\n   });\n });"
        }
    ],
    "stats": {
        "total": 27,
        "additions": 16,
        "deletions": 11
    }
}