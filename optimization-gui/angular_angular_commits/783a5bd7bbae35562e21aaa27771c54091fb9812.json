{
    "author": "josephperrott",
    "message": "fix(router): remove preserveQueryParams symbol (#38762)\n\nRemove preserveQueryParams as it was deprecated for removal in v4, use\nqueryParamsHandling=\"preserve\" instead.\n\nBREAKING CHANGE: preserveQueryParams has been removed, use\nqueryParamsHandling=\"preserve\" instead\n\nPR Close #38762",
    "sha": "783a5bd7bbae35562e21aaa27771c54091fb9812",
    "files": [
        {
            "sha": "c8ccb0d82667ad234d97aae469770270bd860edf",
            "filename": "aio/content/guide/deprecations.md",
            "status": "modified",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/783a5bd7bbae35562e21aaa27771c54091fb9812/aio%2Fcontent%2Fguide%2Fdeprecations.md",
            "raw_url": "https://github.com/angular/angular/raw/783a5bd7bbae35562e21aaa27771c54091fb9812/aio%2Fcontent%2Fguide%2Fdeprecations.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fdeprecations.md?ref=783a5bd7bbae35562e21aaa27771c54091fb9812",
            "patch": "@@ -43,7 +43,6 @@ v9 - v12\n | `@angular/core`               | [`RenderComponentType`](#core)                                                | <!--v7--> v11 |\n | `@angular/core`               | [`WrappedValue`](#core)                                                       | <!--v10--> v12 |\n | `@angular/forms`              | [`ngModel` with reactive forms](#ngmodel-reactive)                            | <!--v6--> v11 |\n-| `@angular/router`             | [`preserveQueryParams`](#router)                                              | <!--v7--> v11 |\n | `@angular/upgrade`            | [`@angular/upgrade`](#upgrade)                                                | <!--v8--> v11 |\n | `@angular/upgrade`            | [`getAngularLib`](#upgrade-static)                                            | <!--v8--> v11 |\n | `@angular/upgrade`            | [`setAngularLib`](#upgrade-static)                                            | <!--v8--> v11 |\n@@ -113,12 +112,6 @@ Tip: In the [API reference section](api) of this doc site, deprecated APIs are i\n | --- | ----------- | --------------------- | ----- |\n | [`ngModel` with reactive forms](#ngmodel-reactive) | [`FormControlDirective`](api/forms/FormControlDirective) | v6 | none |\n \n-{@a router}\n-### @angular/router\n-\n-| API | Replacement | Deprecation announced | Notes |\n-| --- | ----------- | --------------------- | ----- |\n-| [`preserveQueryParams`](api/router/UrlCreationOptions#preserveQueryParams) | [`queryParamsHandling`](api/router/UrlCreationOptions#queryParamsHandling) | v4 | none |\n \n {@a upgrade}\n ### @angular/upgrade"
        },
        {
            "sha": "be72c3083cf58cb11e8a0b4f2d1b419f44a328b6",
            "filename": "goldens/public-api/router/router.d.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 4,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/783a5bd7bbae35562e21aaa27771c54091fb9812/goldens%2Fpublic-api%2Frouter%2Frouter.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/783a5bd7bbae35562e21aaa27771c54091fb9812/goldens%2Fpublic-api%2Frouter%2Frouter.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Frouter%2Frouter.d.ts?ref=783a5bd7bbae35562e21aaa27771c54091fb9812",
            "patch": "@@ -341,7 +341,7 @@ export declare class Router {\n     urlHandlingStrategy: UrlHandlingStrategy;\n     urlUpdateStrategy: 'deferred' | 'eager';\n     constructor(rootComponentType: Type<any> | null, urlSerializer: UrlSerializer, rootContexts: ChildrenOutletContexts, location: Location, injector: Injector, loader: NgModuleFactoryLoader, compiler: Compiler, config: Routes);\n-    createUrlTree(commands: any[], navigationExtras?: UrlCreationOptions): UrlTree;\n+    createUrlTree(commands: any[], navigationExtras?: NavigationExtras): UrlTree;\n     dispose(): void;\n     getCurrentNavigation(): Navigation | null;\n     initialNavigation(): void;\n@@ -378,7 +378,6 @@ export declare class RouterEvent {\n export declare class RouterLink implements OnChanges {\n     fragment?: string;\n     preserveFragment: boolean;\n-    /** @deprecated */ set preserveQueryParams(value: boolean);\n     queryParams?: Params | null;\n     queryParamsHandling?: QueryParamsHandling | null;\n     replaceUrl: boolean;\n@@ -411,7 +410,6 @@ export declare class RouterLinkWithHref implements OnChanges, OnDestroy {\n     fragment?: string;\n     href: string;\n     preserveFragment: boolean;\n-    /** @deprecated */ set preserveQueryParams(value: boolean);\n     queryParams?: Params | null;\n     queryParamsHandling?: QueryParamsHandling | null;\n     replaceUrl: boolean;\n@@ -498,7 +496,6 @@ export declare class Scroll {\n export declare interface UrlCreationOptions {\n     fragment?: string;\n     preserveFragment?: boolean;\n-    /** @deprecated */ preserveQueryParams?: boolean;\n     queryParams?: Params | null;\n     queryParamsHandling?: QueryParamsHandling | null;\n     relativeTo?: ActivatedRoute | null;"
        },
        {
            "sha": "01f782b6af25b5e1645114bf320a430195a2c8eb",
            "filename": "packages/router/src/directives/router_link.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 24,
            "changes": 24,
            "blob_url": "https://github.com/angular/angular/blob/783a5bd7bbae35562e21aaa27771c54091fb9812/packages%2Frouter%2Fsrc%2Fdirectives%2Frouter_link.ts",
            "raw_url": "https://github.com/angular/angular/raw/783a5bd7bbae35562e21aaa27771c54091fb9812/packages%2Frouter%2Fsrc%2Fdirectives%2Frouter_link.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Frouter%2Fsrc%2Fdirectives%2Frouter_link.ts?ref=783a5bd7bbae35562e21aaa27771c54091fb9812",
            "patch": "@@ -206,17 +206,6 @@ export class RouterLink implements OnChanges {\n     }\n   }\n \n-  /**\n-   * @deprecated As of Angular v4.0 use `queryParamsHandling` instead.\n-   */\n-  @Input()\n-  set preserveQueryParams(value: boolean) {\n-    if ((typeof ngDevMode === 'undefined' || ngDevMode) && <any>console && <any>console.warn) {\n-      console.warn('preserveQueryParams is deprecated!, use queryParamsHandling instead.');\n-    }\n-    this.preserve = value;\n-  }\n-\n   /** @nodoc */\n   @HostListener('click')\n   onClick(): boolean {\n@@ -234,7 +223,6 @@ export class RouterLink implements OnChanges {\n       relativeTo: this.route,\n       queryParams: this.queryParams,\n       fragment: this.fragment,\n-      preserveQueryParams: attrBoolValue(this.preserve),\n       queryParamsHandling: this.queryParamsHandling,\n       preserveFragment: attrBoolValue(this.preserveFragment),\n     });\n@@ -346,17 +334,6 @@ export class RouterLinkWithHref implements OnChanges, OnDestroy {\n     }\n   }\n \n-  /**\n-   * @deprecated As of Angular v4.0 use `queryParamsHandling` instead.\n-   */\n-  @Input()\n-  set preserveQueryParams(value: boolean) {\n-    if ((typeof ngDevMode === 'undefined' || ngDevMode) && <any>console && <any>console.warn) {\n-      console.warn('preserveQueryParams is deprecated, use queryParamsHandling instead.');\n-    }\n-    this.preserve = value;\n-  }\n-\n   /** @nodoc */\n   ngOnChanges(changes: SimpleChanges): any {\n     this.updateTargetUrlAndHref();\n@@ -399,7 +376,6 @@ export class RouterLinkWithHref implements OnChanges, OnDestroy {\n       relativeTo: this.route,\n       queryParams: this.queryParams,\n       fragment: this.fragment,\n-      preserveQueryParams: attrBoolValue(this.preserve),\n       queryParamsHandling: this.queryParamsHandling,\n       preserveFragment: attrBoolValue(this.preserveFragment),\n     });"
        },
        {
            "sha": "11d99bbca605b872695841676c9297ea92825939",
            "filename": "packages/router/src/router.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 34,
            "changes": 46,
            "blob_url": "https://github.com/angular/angular/blob/783a5bd7bbae35562e21aaa27771c54091fb9812/packages%2Frouter%2Fsrc%2Frouter.ts",
            "raw_url": "https://github.com/angular/angular/raw/783a5bd7bbae35562e21aaa27771c54091fb9812/packages%2Frouter%2Fsrc%2Frouter.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Frouter%2Fsrc%2Frouter.ts?ref=783a5bd7bbae35562e21aaa27771c54091fb9812",
            "patch": "@@ -104,14 +104,6 @@ export interface UrlCreationOptions {\n    */\n   fragment?: string;\n \n-  /**\n-   * **DEPRECATED**: Use `queryParamsHandling: \"preserve\"` instead to preserve\n-   * query parameters for the next navigation.\n-   *\n-   * @deprecated since v4\n-   */\n-  preserveQueryParams?: boolean;\n-\n   /**\n    * How to handle query parameters in the router link for the next navigation.\n    * One of:\n@@ -1104,35 +1096,21 @@ export class Router {\n    * router.createUrlTree(['../../team/44/user/22'], {relativeTo: route});\n    * ```\n    */\n-  createUrlTree(commands: any[], navigationExtras: UrlCreationOptions = {}): UrlTree {\n-    const {\n-      relativeTo,\n-      queryParams,\n-      fragment,\n-      preserveQueryParams,\n-      queryParamsHandling,\n-      preserveFragment\n-    } = navigationExtras;\n-    if ((typeof ngDevMode === 'undefined' || ngDevMode) && preserveQueryParams && <any>console &&\n-        <any>console.warn) {\n-      console.warn('preserveQueryParams is deprecated, use queryParamsHandling instead.');\n-    }\n+  createUrlTree(commands: any[], navigationExtras: NavigationExtras = {}): UrlTree {\n+    const {relativeTo, queryParams, fragment, queryParamsHandling, preserveFragment} =\n+        navigationExtras;\n     const a = relativeTo || this.routerState.root;\n     const f = preserveFragment ? this.currentUrlTree.fragment : fragment;\n     let q: Params|null = null;\n-    if (queryParamsHandling) {\n-      switch (queryParamsHandling) {\n-        case 'merge':\n-          q = {...this.currentUrlTree.queryParams, ...queryParams};\n-          break;\n-        case 'preserve':\n-          q = this.currentUrlTree.queryParams;\n-          break;\n-        default:\n-          q = queryParams || null;\n-      }\n-    } else {\n-      q = preserveQueryParams ? this.currentUrlTree.queryParams : queryParams || null;\n+    switch (queryParamsHandling) {\n+      case 'merge':\n+        q = {...this.currentUrlTree.queryParams, ...queryParams};\n+        break;\n+      case 'preserve':\n+        q = this.currentUrlTree.queryParams;\n+        break;\n+      default:\n+        q = queryParams || null;\n     }\n     if (q !== null) {\n       q = this.removeEmptyProps(q);"
        },
        {
            "sha": "e7f6c7bae1695c88c3c88491bfe87b59b4148b5c",
            "filename": "packages/router/test/integration.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/783a5bd7bbae35562e21aaa27771c54091fb9812/packages%2Frouter%2Ftest%2Fintegration.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/783a5bd7bbae35562e21aaa27771c54091fb9812/packages%2Frouter%2Ftest%2Fintegration.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Frouter%2Ftest%2Fintegration.spec.ts?ref=783a5bd7bbae35562e21aaa27771c54091fb9812",
            "patch": "@@ -2137,7 +2137,7 @@ describe('Integration', () => {\n          @Component({\n            selector: 'someRoot',\n            template:\n-               `<router-outlet></router-outlet><a routerLink=\"/home\" preserveQueryParams preserveFragment>Link</a>`\n+               `<router-outlet></router-outlet><a routerLink=\"/home\" queryParamsHandling=\"preserve\" preserveFragment>Link</a>`\n          })\n          class RootCmpWithLink {\n          }"
        }
    ],
    "stats": {
        "total": 84,
        "additions": 14,
        "deletions": 70
    }
}