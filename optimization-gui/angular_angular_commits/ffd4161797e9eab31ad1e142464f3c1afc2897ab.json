{
    "author": "mhevery",
    "message": "docs(core): Add documentation on debugging size regression failures (#39301)\n\nPR Close #39301",
    "sha": "ffd4161797e9eab31ad1e142464f3c1afc2897ab",
    "files": [
        {
            "sha": "2046d574844922de1d106550ad9af87a0b24f2bc",
            "filename": "integration/README.md",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/ffd4161797e9eab31ad1e142464f3c1afc2897ab/integration%2FREADME.md",
            "raw_url": "https://github.com/angular/angular/raw/ffd4161797e9eab31ad1e142464f3c1afc2897ab/integration%2FREADME.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/integration%2FREADME.md?ref=ffd4161797e9eab31ad1e142464f3c1afc2897ab",
            "patch": "@@ -139,3 +139,14 @@ On CircleCI, the puppeteer provisioned Chrome crashes with `CI we get Root cause\n \n See: https://github.com/puppeteer/puppeteer/blob/v1.0.0/docs/troubleshooting.md#tips\n See: https://stackoverflow.com/questions/50642308/webdriverexception-unknown-error-devtoolsactiveport-file-doesnt-exist-while-t\n+\n+## Debugging Size Regressions\n+\n+If size regression occurs, one way to debug is to get a build which shows the code before and after. Here are the steps to do that.\n+\n+1. Check out both the `master` branch as well as the your change (let's refer to it as `change` branch) into two different working locations. (A suggested way to do this is using `git worktree`.)\n+2. In both `master` and `change` locations update the failing tests `package.json` with `NG_BUILD_DEBUG_OPTIMIZE=minify` environment variable so that the resulting build would contain a human readable but optimized output. As an example:\n+   - Open `integration/cli-hello-world/package.json` and prefix `NG_BUILD_DEBUG_OPTIMIZE=minify` into the `build` rule. Resulting in something like: `\"build\": \"NG_BUILD_DEBUG_OPTIMIZE=minify ng build --prod\",`\n+   - Run `bazel run //integration:cli-hello-world_test.debug` to build the output. (optionally just run `yarn build` in the directory if you want to do a quick rebuild which will only pick up changes to the test application (not framework).)\n+   - Diff the `master` vs `change` to see the differences. `myDiffTool change/integration/cli-hello-world/dist/main-es2015.*.js master/integration/cli-hello-world/dist/main-es2015.*.js`\n+   - The above should give you a better understanding as to what has changed and what is causing the regression.\n\\ No newline at end of file"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 11,
        "deletions": 0
    }
}