{
    "author": "ranma42",
    "message": "feat(common): stricter types for DatePipe (#37447)\n\nMake typing of DatePipe stricter to catch some misuses (such as passing\nan Observable or an array) at compile time.\n\nBREAKING CHANGE:\nThe signature of the `date` pipe now explicitly states which types are\naccepted. This should only cause issues in corner cases, as any other\nvalues would result in runtime exceptions.\n\nPR Close #37447",
    "sha": "daf8b7f10038c7ecf7ea78bc6fe39766c85224a6",
    "files": [
        {
            "sha": "418fecafd25a862c80f45a8ac9c2b9591a283b54",
            "filename": "goldens/public-api/common/common.d.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/daf8b7f10038c7ecf7ea78bc6fe39766c85224a6/goldens%2Fpublic-api%2Fcommon%2Fcommon.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/daf8b7f10038c7ecf7ea78bc6fe39766c85224a6/goldens%2Fpublic-api%2Fcommon%2Fcommon.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fcommon%2Fcommon.d.ts?ref=daf8b7f10038c7ecf7ea78bc6fe39766c85224a6",
            "patch": "@@ -18,7 +18,9 @@ export declare class CurrencyPipe implements PipeTransform {\n \n export declare class DatePipe implements PipeTransform {\n     constructor(locale: string);\n-    transform(value: any, format?: string, timezone?: string, locale?: string): string | null;\n+    transform(value: Date | string | number, format?: string, timezone?: string, locale?: string): string | null;\n+    transform(value: null | undefined, format?: string, timezone?: string, locale?: string): null;\n+    transform(value: Date | string | number | null | undefined, format?: string, timezone?: string, locale?: string): string | null;\n }\n \n export declare class DecimalPipe implements PipeTransform {"
        },
        {
            "sha": "e4b8d4d1046c9944adc824a31c92b2624ed383dd",
            "filename": "packages/common/src/pipes/date_pipe.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/daf8b7f10038c7ecf7ea78bc6fe39766c85224a6/packages%2Fcommon%2Fsrc%2Fpipes%2Fdate_pipe.ts",
            "raw_url": "https://github.com/angular/angular/raw/daf8b7f10038c7ecf7ea78bc6fe39766c85224a6/packages%2Fcommon%2Fsrc%2Fpipes%2Fdate_pipe.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Fsrc%2Fpipes%2Fdate_pipe.ts?ref=daf8b7f10038c7ecf7ea78bc6fe39766c85224a6",
            "patch": "@@ -171,7 +171,15 @@ export class DatePipe implements PipeTransform {\n    * See [Setting your app locale](guide/i18n#setting-up-the-locale-of-your-app).\n    * @returns A date string in the desired format.\n    */\n-  transform(value: any, format = 'mediumDate', timezone?: string, locale?: string): string|null {\n+  transform(value: Date|string|number, format?: string, timezone?: string, locale?: string): string\n+      |null;\n+  transform(value: null|undefined, format?: string, timezone?: string, locale?: string): null;\n+  transform(\n+      value: Date|string|number|null|undefined, format?: string, timezone?: string,\n+      locale?: string): string|null;\n+  transform(\n+      value: Date|string|number|null|undefined, format = 'mediumDate', timezone?: string,\n+      locale?: string): string|null {\n     if (value == null || value === '' || value !== value) return null;\n \n     try {"
        },
        {
            "sha": "c054061188141daf5231acc1fd71dbdac69eb984",
            "filename": "packages/common/test/pipes/date_pipe_spec.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/daf8b7f10038c7ecf7ea78bc6fe39766c85224a6/packages%2Fcommon%2Ftest%2Fpipes%2Fdate_pipe_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/daf8b7f10038c7ecf7ea78bc6fe39766c85224a6/packages%2Fcommon%2Ftest%2Fpipes%2Fdate_pipe_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Ftest%2Fpipes%2Fdate_pipe_spec.ts?ref=daf8b7f10038c7ecf7ea78bc6fe39766c85224a6",
            "patch": "@@ -59,12 +59,20 @@ import {JitReflector} from '@angular/platform-browser-dynamic/src/compiler_refle\n         expect(pipe.transform(Number.NaN)).toEqual(null);\n       });\n \n+      it('should return null for null', () => {\n+        expect(pipe.transform(null)).toEqual(null);\n+      });\n+\n+      it('should return null for undefined', () => {\n+        expect(pipe.transform(undefined)).toEqual(null);\n+      });\n+\n       it('should support ISO string without time', () => {\n         expect(() => pipe.transform(isoStringWithoutTime)).not.toThrow();\n       });\n \n       it('should not support other objects', () => {\n-        expect(() => pipe.transform({})).toThrowError(/InvalidPipeArgument/);\n+        expect(() => pipe.transform({} as any)).toThrowError(/InvalidPipeArgument/);\n       });\n     });\n "
        },
        {
            "sha": "2bb0dcd5f89e5ba00d84f8d0fa8fc09fb5df15c5",
            "filename": "packages/language-service/test/definitions_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/daf8b7f10038c7ecf7ea78bc6fe39766c85224a6/packages%2Flanguage-service%2Ftest%2Fdefinitions_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/daf8b7f10038c7ecf7ea78bc6fe39766c85224a6/packages%2Flanguage-service%2Ftest%2Fdefinitions_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flanguage-service%2Ftest%2Fdefinitions_spec.ts?ref=daf8b7f10038c7ecf7ea78bc6fe39766c85224a6",
            "patch": "@@ -274,7 +274,7 @@ describe('definitions', () => {\n     expect(textSpan).toEqual(marker);\n \n     expect(definitions).toBeDefined();\n-    expect(definitions!.length).toBe(1);\n+    expect(definitions!.length).toBe(3);\n \n     const refFileName = '/node_modules/@angular/common/common.d.ts';\n     for (const def of definitions!) {"
        },
        {
            "sha": "5116c42f09acc7e152e91432339bc12e485e33f5",
            "filename": "packages/language-service/test/hover_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/daf8b7f10038c7ecf7ea78bc6fe39766c85224a6/packages%2Flanguage-service%2Ftest%2Fhover_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/daf8b7f10038c7ecf7ea78bc6fe39766c85224a6/packages%2Flanguage-service%2Ftest%2Fhover_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flanguage-service%2Ftest%2Fhover_spec.ts?ref=daf8b7f10038c7ecf7ea78bc6fe39766c85224a6",
            "patch": "@@ -211,7 +211,7 @@ describe('hover', () => {\n       expect(textSpan).toEqual(marker);\n       expect(toText(displayParts))\n           .toBe(\n-              '(pipe) date: (value: any, format?: string | undefined, timezone?: string | undefined, locale?: string | undefined) => string | null');\n+              '(pipe) date: { (value: string | number | Date, format?: string | undefined, timezone?: string | undefined, locale?: string | undefined): string | null; (value: null | undefined, format?: string | undefined, timezone?: string | undefined, locale?: string | undefined): null; (value: string | ... 3 more ... | undefined, format?: st...');\n     });\n \n     it('should work for the $any() cast function', () => {"
        }
    ],
    "stats": {
        "total": 28,
        "additions": 23,
        "deletions": 5
    }
}