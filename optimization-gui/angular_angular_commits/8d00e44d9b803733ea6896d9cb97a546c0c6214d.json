{
    "author": "AleksanderBodurri",
    "message": "feat(devtools): hide router tree if router config isn't found",
    "sha": "8d00e44d9b803733ea6896d9cb97a546c0c6214d",
    "files": [
        {
            "sha": "1b82be08ae465e123583729ed82c9d6c35e792e4",
            "filename": "projects/ng-devtools/src/lib/devtools-tabs/devtools-tabs.component.html",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/8d00e44d9b803733ea6896d9cb97a546c0c6214d/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdevtools-tabs.component.html",
            "raw_url": "https://github.com/angular/angular/raw/8d00e44d9b803733ea6896d9cb97a546c0c6214d/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdevtools-tabs.component.html",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdevtools-tabs.component.html?ref=8d00e44d9b803733ea6896d9cb97a546c0c6214d",
            "patch": "@@ -34,7 +34,7 @@\n     (toggleInspector)=\"toggleInspector()\"\n   ></ng-directive-explorer>\n   <ng-profiler [ngClass]=\"{ hidden: activeTab !== 'Profiler' }\"></ng-profiler>\n-  <ng-router-tree #routerTree [ngClass]=\"{ hidden: activeTab !== 'Router Tree' }\"></ng-router-tree>\n+  <ng-router-tree [routes]=\"routes\" [ngClass]=\"{ hidden: activeTab !== 'Router Tree' }\"></ng-router-tree>\n </div>\n \n <mat-menu #menu=\"matMenu\" class=\"options-menu\">"
        },
        {
            "sha": "2d9448f3addc81b0d78c9449de12708eb1b8e78c",
            "filename": "projects/ng-devtools/src/lib/devtools-tabs/devtools-tabs.component.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 4,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/8d00e44d9b803733ea6896d9cb97a546c0c6214d/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdevtools-tabs.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/8d00e44d9b803733ea6896d9cb97a546c0c6214d/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdevtools-tabs.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdevtools-tabs.component.ts?ref=8d00e44d9b803733ea6896d9cb97a546c0c6214d",
            "patch": "@@ -1,14 +1,13 @@\n /// <reference types=\"resize-observer-browser\" />\n import { AfterViewInit, Component, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\n-import { Events, MessageBus } from 'protocol';\n+import { Events, MessageBus, Route } from 'protocol';\n import { DirectiveExplorerComponent } from './directive-explorer/directive-explorer.component';\n import { ApplicationEnvironment } from '../application-environment';\n import { MatSlideToggleChange } from '@angular/material/slide-toggle';\n import { TabUpdate } from './tab-update';\n import { Theme, ThemeService } from '../theme-service';\n import { Subscription } from 'rxjs';\n import { MatTabNav } from '@angular/material/tabs';\n-import { RouterTreeComponent } from './router-tree/router-tree.component';\n \n @Component({\n   selector: 'ng-devtools-tabs',\n@@ -19,9 +18,7 @@ export class DevToolsTabsComponent implements OnInit, OnDestroy, AfterViewInit {\n   @Input() angularVersion: string | undefined = undefined;\n   @ViewChild(DirectiveExplorerComponent) directiveExplorer: DirectiveExplorerComponent;\n   @ViewChild('navBar', { static: true }) navbar: MatTabNav;\n-  @ViewChild('routerTree', { static: false }) routerTree: RouterTreeComponent;\n \n-  tabs = ['Components', 'Profiler', 'Router Tree'];\n   activeTab: 'Components' | 'Profiler' | 'Router Tree' = 'Components';\n \n   inspectorRunning = false;\n@@ -30,6 +27,8 @@ export class DevToolsTabsComponent implements OnInit, OnDestroy, AfterViewInit {\n   private _currentThemeSubscription: Subscription;\n   currentTheme: Theme;\n \n+  routes: Route[] = [];\n+\n   constructor(\n     public tabUpdate: TabUpdate,\n     public themeService: ThemeService,\n@@ -39,6 +38,15 @@ export class DevToolsTabsComponent implements OnInit, OnDestroy, AfterViewInit {\n \n   ngOnInit(): void {\n     this._currentThemeSubscription = this.themeService.currentTheme.subscribe((theme) => (this.currentTheme = theme));\n+\n+    this._messageBus.on('updateRouterTree', (routes) => {\n+      this.routes = routes || [];\n+    });\n+  }\n+\n+  get tabs(): string[] {\n+    const alwaysShown = ['Components', 'Profiler'];\n+    return this.routes.length === 0 ? alwaysShown : [...alwaysShown, 'Router Tree'];\n   }\n \n   ngAfterViewInit(): void {"
        },
        {
            "sha": "0bf360a27345e291cc683ac6d9d821ecbc851b08",
            "filename": "projects/ng-devtools/src/lib/devtools-tabs/router-tree/router-tree.component.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 13,
            "changes": 24,
            "blob_url": "https://github.com/angular/angular/blob/8d00e44d9b803733ea6896d9cb97a546c0c6214d/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Frouter-tree%2Frouter-tree.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/8d00e44d9b803733ea6896d9cb97a546c0c6214d/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Frouter-tree%2Frouter-tree.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Frouter-tree%2Frouter-tree.component.ts?ref=8d00e44d9b803733ea6896d9cb97a546c0c6214d",
            "patch": "@@ -1,35 +1,33 @@\n-import { Component, OnInit, ViewChild, ElementRef, AfterViewInit } from '@angular/core';\n-import { MessageBus, Events } from 'protocol';\n+import { Component, ViewChild, ElementRef, AfterViewInit, Input } from '@angular/core';\n+import { MessageBus, Events, Route } from 'protocol';\n import * as d3 from 'd3';\n \n @Component({\n   selector: 'ng-router-tree',\n   templateUrl: './router-tree.component.html',\n   styleUrls: ['./router-tree.component.scss'],\n })\n-export class RouterTreeComponent implements OnInit, AfterViewInit {\n+export class RouterTreeComponent implements AfterViewInit {\n   @ViewChild('svgContainer', { static: true }) private svgContainer: ElementRef;\n   @ViewChild('mainGroup', { static: true }) private g: ElementRef;\n \n-  routes: any[] = [];\n+  @Input() set routes(routes: Route[]) {\n+    this._routes = routes;\n+    this.render();\n+  }\n+\n+  private _routes: Route[] = [];\n   private tree: d3.TreeLayout<{}>;\n   private tooltip: any;\n \n   constructor(private _messageBus: MessageBus<Events>) {}\n \n-  ngOnInit(): void {\n-    this._messageBus.on('updateRouterTree', (routes) => {\n-      this.routes = routes || [];\n-      this.render();\n-    });\n-  }\n-\n   ngAfterViewInit(): void {\n     this._messageBus.emit('getRoutes');\n   }\n \n   render(): void {\n-    if (this.routes.length === 0 || !this.g) {\n+    if (this._routes.length === 0 || !this.g) {\n       return;\n     }\n \n@@ -48,7 +46,7 @@ export class RouterTreeComponent implements OnInit, AfterViewInit {\n     // Compute the new tree layout.\n     this.tree.nodeSize([75, 200]);\n \n-    const root: any = this.routes[0];\n+    const root: any = this._routes[0];\n \n     const nodes = this.tree(\n       d3.hierarchy(root.children.length === 0 || root.children.length > 1 ? root : root.children[0], (d) => d.children)"
        }
    ],
    "stats": {
        "total": 42,
        "additions": 24,
        "deletions": 18
    }
}