{
    "author": "josephperrott",
    "message": "build: remove check-env script (#39980)\n\nRemove the check-env script as it is not longer relied on and only surfaces\nfalse positives/known mismatches at this point.\n\nSince our tooling now acts using vendored code where needed, this is no\nlonger as necessary as it previously was.\n\nPR Close #39980",
    "sha": "6d19c16d329f689bf86d7eae334e4025466d5ed4",
    "files": [
        {
            "sha": "8c22aeb9f76d5dc85cfe38d685fb6a04ff40c751",
            "filename": "gulpfile.js",
            "status": "modified",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/6d19c16d329f689bf86d7eae334e4025466d5ed4/gulpfile.js",
            "raw_url": "https://github.com/angular/angular/raw/6d19c16d329f689bf86d7eae334e4025466d5ed4/gulpfile.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/gulpfile.js?ref=6d19c16d329f689bf86d7eae334e4025466d5ed4",
            "patch": "@@ -8,15 +8,6 @@\n \n 'use strict';\n \n-// THIS CHECK SHOULD BE THE FIRST THING IN THIS FILE\n-// This is to ensure that we catch env issues before we error while requiring other dependencies.\n-const engines = require('./package.json').engines;\n-require('./tools/check-environment')({\n-  requiredNodeVersion: engines.node,\n-  requiredNpmVersion: engines.npm,\n-  requiredYarnVersion: engines.yarn\n-});\n-\n const gulp = require('gulp');\n \n // See `tools/gulp-tasks/README.md` for information about task loading.\n@@ -30,7 +21,6 @@ function loadTask(fileName, taskName) {\n gulp.task('source-map-test', loadTask('source-map-test'));\n gulp.task('changelog', loadTask('changelog'));\n gulp.task('changelog:zonejs', loadTask('changelog-zonejs'));\n-gulp.task('check-env', () => {/* this is a noop because the env test ran already above */});\n gulp.task('cldr:extract', loadTask('cldr', 'extract'));\n gulp.task('cldr:download', loadTask('cldr', 'download'));\n gulp.task('cldr:gen-closure-locale', loadTask('cldr', 'closure'));"
        },
        {
            "sha": "58dded61d695d8f41264b6ddb96b9aa5c982a777",
            "filename": "package.json",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/6d19c16d329f689bf86d7eae334e4025466d5ed4/package.json",
            "raw_url": "https://github.com/angular/angular/raw/6d19c16d329f689bf86d7eae334e4025466d5ed4/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=6d19c16d329f689bf86d7eae334e4025466d5ed4",
            "patch": "@@ -23,7 +23,6 @@\n     \"/ \": \"\",\n     \"preinstall\": \"node tools/yarn/check-yarn.js\",\n     \"postinstall\": \"husky install && node scripts/webdriver-manager-update.js && node --preserve-symlinks --preserve-symlinks-main ./tools/postinstall-patches.js\",\n-    \"check-env\": \"gulp check-env\",\n     \"test-ivy-aot\": \"bazelisk test --config=ivy --build_tag_filters=-no-ivy-aot,-fixme-ivy-aot --test_tag_filters=-no-ivy-aot,-fixme-ivy-aot\",\n     \"test-non-ivy\": \"bazelisk test --build_tag_filters=-ivy-only --test_tag_filters=-ivy-only\",\n     \"test-fixme-ivy-aot\": \"bazelisk test --config=ivy --build_tag_filters=-no-ivy-aot --test_tag_filters=-no-ivy-aot\","
        },
        {
            "sha": "764f40592b83742b734d001b4ba1922f01b4fbb9",
            "filename": "tools/check-environment.js",
            "status": "removed",
            "additions": 0,
            "deletions": 114,
            "changes": 114,
            "blob_url": "https://github.com/angular/angular/blob/d9356f28425e62947387d72d5a428e06feb294e3/tools%2Fcheck-environment.js",
            "raw_url": "https://github.com/angular/angular/raw/d9356f28425e62947387d72d5a428e06feb294e3/tools%2Fcheck-environment.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fcheck-environment.js?ref=d9356f28425e62947387d72d5a428e06feb294e3",
            "patch": "@@ -1,114 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-/* !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n-   !!!                                                                                   !!!\n-   !!!  This file is special in that it must be able to execute with wrong Node version  !!!\n-   !!!  or even when node_modules are missing.                                           !!!\n-   !!!                                                                                   !!!\n-   !!!  Do not depend on Node4+ features or presence of npm packages here.               !!!\n-   !!!                                                                                   !!!\n-   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! */\n-\n-'use strict';\n-\n-var exec = require('child_process').exec;\n-var checkNodeModules;\n-var semver;\n-var issues = [];\n-\n-try {\n-  semver = require('semver');\n-} catch (e) {\n-  issues.push('Looks like you are missing some npm dependencies. Run: `yarn install`');\n-}\n-\n-if (issues.length) {\n-  printWarning(issues);\n-  console.error(\n-      'Your environment doesn\\'t provide the prerequisite dependencies.\\n' +\n-      'Please fix the issues listed above and then rerun the gulp command.\\n' +\n-      'Check out https://github.com/angular/angular/blob/master/docs/DEVELOPER.md for more info.');\n-  process.exit(1);\n-}\n-\n-// wrap in try/catch in case someone requires from within that file\n-try {\n-  checkNodeModules = require('./npm/check-node-modules.js');\n-} catch (e) {\n-  issues.push('Looks like you are missing some npm dependencies. Run: `yarn install`');\n-  throw e;\n-} finally {\n-  // print warnings and move on, the next steps will likely fail, but hey, we warned them.\n-  printWarning(issues);\n-}\n-\n-if (require.main === module) {\n-  // we are running this script directly so just run checkEnvironment against the main angular\n-  // package.json\n-  var engines = require(__dirname + '/../package.json').engines;\n-  checkEnvironment({\n-    requiredNodeVersion: engines.node,\n-    requiredNpmVersion: engines.npm,\n-    requiredYarnVersion: engines.yarn\n-  });\n-}\n-\n-function checkEnvironment(reqs) {\n-  exec('yarn --version', function(yarnErr, yarnStdout) {\n-    var foundNodeVersion = process.version;\n-    var foundYarnVersion = !yarnErr && semver.clean(yarnStdout);\n-    var issues = [];\n-\n-    if (!semver.satisfies(foundNodeVersion, reqs.requiredNodeVersion)) {\n-      issues.push(\n-          'You are running unsupported node version. Found: ' + foundNodeVersion +\n-          ' Expected: ' + reqs.requiredNodeVersion + '. Use nvm to update your node version.');\n-    }\n-\n-    if (yarnErr) {\n-      issues.push(\n-          'You don\\'t have yarn globally installed. This is required because we use yarn to ' +\n-          'ensure that we all use the exact same npm dependencies. Installation instructions: ' +\n-          'https://yarnpkg.com/lang/en/docs/install/');\n-    } else if (!semver.satisfies(foundYarnVersion, reqs.requiredYarnVersion)) {\n-      issues.push(\n-          'You are running an unsupported yarn version. Found: ' + foundYarnVersion +\n-          ' Expected: ' + reqs.requiredYarnVersion + '. This is required because we use yarn to ' +\n-          'ensure that we all use the exact same npm dependencies. Installation instructions: ' +\n-          'https://yarnpkg.com/lang/en/docs/install/');\n-    }\n-\n-    if (!checkNodeModules()) {\n-      issues.push(\n-          'Your node_modules directory is stale or out of sync with yarn.lock. Run: yarn install');\n-    }\n-\n-    printWarning(issues);\n-  });\n-}\n-\n-function printWarning(issues) {\n-  if (!issues.length) return;\n-\n-  console.warn('');\n-  console.warn('!'.repeat(110));\n-  console.warn('!!!  Your environment is not in a good shape. Following issues were found:');\n-  issues.forEach(function(issue) {\n-    console.warn('!!!   - ' + issue);\n-  });\n-  console.warn('!'.repeat(110));\n-  console.warn('');\n-\n-  if (process.env.CI) {\n-    process.exit(1);\n-  }\n-}\n-\n-\n-module.exports = checkEnvironment;"
        }
    ],
    "stats": {
        "total": 125,
        "additions": 0,
        "deletions": 125
    }
}