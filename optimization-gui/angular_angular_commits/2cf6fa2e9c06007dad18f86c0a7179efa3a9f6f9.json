{
    "author": "gkalpak",
    "message": "refactor(service-worker): avoid unnecessarily creating Promises in `Driver#deleteAllCaches()` (#40234)\n\nThis commit refactors `Driver#deleteAllCaches()` to use `Array#map()`\ninstead of `Array#reduce()` for running async operations in parallel.\nThis allows avoiding having to recursively wrap Promises with\n`Promise.all()`.\n\nPR Close #40234",
    "sha": "2cf6fa2e9c06007dad18f86c0a7179efa3a9f6f9",
    "files": [
        {
            "sha": "bfb1a6686106d2b17ef61b878edd3c02a78ec008",
            "filename": "packages/service-worker/worker/src/driver.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 12,
            "changes": 22,
            "blob_url": "https://github.com/angular/angular/blob/2cf6fa2e9c06007dad18f86c0a7179efa3a9f6f9/packages%2Fservice-worker%2Fworker%2Fsrc%2Fdriver.ts",
            "raw_url": "https://github.com/angular/angular/raw/2cf6fa2e9c06007dad18f86c0a7179efa3a9f6f9/packages%2Fservice-worker%2Fworker%2Fsrc%2Fdriver.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fservice-worker%2Fworker%2Fsrc%2Fdriver.ts?ref=2cf6fa2e9c06007dad18f86c0a7179efa3a9f6f9",
            "patch": "@@ -722,18 +722,16 @@ export class Driver implements Debuggable, UpdateSource {\n   }\n \n   private async deleteAllCaches(): Promise<void> {\n-    await (await this.scope.caches.keys())\n-        // The Chrome debugger is not able to render the syntax properly when the\n-        // code contains backticks. This is a known issue in Chrome and they have an\n-        // open [issue](https://bugs.chromium.org/p/chromium/issues/detail?id=659515) for that.\n-        // As a work-around for the time being, we can use \\\\ ` at the end of the line.\n-        .filter(key => key.startsWith(`${this.adapter.cacheNamePrefix}:`))  // `\n-        .reduce(async (previous, key) => {\n-          await Promise.all([\n-            previous,\n-            this.scope.caches.delete(key),\n-          ]);\n-        }, Promise.resolve());\n+    const cacheNames = await this.scope.caches.keys();\n+    const ownCacheNames =\n+        cacheNames\n+            // The Chrome debugger is not able to render the syntax properly when the\n+            // code contains backticks. This is a known issue in Chrome and they have an\n+            // open [issue](https://bugs.chromium.org/p/chromium/issues/detail?id=659515) for that.\n+            // As a work-around for the time being, we can use \\\\ ` at the end of the line.\n+            .filter(name => name.startsWith(`${this.adapter.cacheNamePrefix}:`));  // `\n+\n+    await Promise.all(ownCacheNames.map(name => this.scope.caches.delete(name)));\n   }\n \n   /**"
        }
    ],
    "stats": {
        "total": 22,
        "additions": 10,
        "deletions": 12
    }
}