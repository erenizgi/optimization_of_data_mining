{
    "author": "mhevery",
    "message": "refactor(core): Cleanup non-standard `Injector` handling. (#39621)\n\nDue to historical reasons `Injector.__NG_ELEMENT_ID__` was set to `-1`.\nThis changes it to be consistent with other `*Ref.__NG_ELEMENT_ID__`\nconstructs.\n\nPR Close #39621",
    "sha": "8574c3000ece48d781d89d7e9a05a0dbdd45305a",
    "files": [
        {
            "sha": "275a539843ebf06e995f8282e2e56026a11123ca",
            "filename": "goldens/circular-deps/packages.json",
            "status": "modified",
            "additions": 19,
            "deletions": 39,
            "changes": 58,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/goldens%2Fcircular-deps%2Fpackages.json",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/goldens%2Fcircular-deps%2Fpackages.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fcircular-deps%2Fpackages.json?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -255,21 +255,6 @@\n     \"packages/core/src/render3/definition.ts\",\n     \"packages/core/src/metadata/ng_module.ts\"\n   ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/application_tokens.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\",\n-    \"packages/core/src/linker/view_container_ref.ts\",\n-    \"packages/core/src/render3/di.ts\",\n-    \"packages/core/src/di/injector_compatibility.ts\",\n-    \"packages/core/src/di/injector.ts\",\n-    \"packages/core/src/di/r3_injector.ts\",\n-    \"packages/core/src/render3/definition.ts\",\n-    \"packages/core/src/metadata/ng_module.ts\"\n-  ],\n   [\n     \"packages/core/src/application_ref.ts\",\n     \"packages/core/src/application_tokens.ts\",\n@@ -641,16 +626,6 @@\n     \"packages/core/src/render3/definition.ts\",\n     \"packages/core/src/metadata/ng_module.ts\"\n   ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/ng_module_ref.ts\",\n-    \"packages/core/src/di/injector_compatibility.ts\",\n-    \"packages/core/src/di/injector.ts\",\n-    \"packages/core/src/di/r3_injector.ts\",\n-    \"packages/core/src/render3/definition.ts\",\n-    \"packages/core/src/metadata/ng_module.ts\"\n-  ],\n   [\n     \"packages/core/src/application_ref.ts\",\n     \"packages/core/src/linker/compiler.ts\",\n@@ -786,20 +761,6 @@\n     \"packages/core/src/render3/definition.ts\",\n     \"packages/core/src/metadata/ng_module.ts\"\n   ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/metadata/resource_loading.ts\",\n-    \"packages/core/src/metadata/directives.ts\",\n-    \"packages/core/src/render3/jit/directive.ts\",\n-    \"packages/core/src/render3/jit/environment.ts\",\n-    \"packages/core/src/render3/index.ts\",\n-    \"packages/core/src/render3/pipe.ts\",\n-    \"packages/core/src/di/injector_compatibility.ts\",\n-    \"packages/core/src/di/injector.ts\",\n-    \"packages/core/src/di/r3_injector.ts\",\n-    \"packages/core/src/render3/definition.ts\",\n-    \"packages/core/src/metadata/ng_module.ts\"\n-  ],\n   [\n     \"packages/core/src/application_ref.ts\",\n     \"packages/core/src/metadata/resource_loading.ts\",\n@@ -900,6 +861,16 @@\n     \"packages/core/src/view/entrypoint.ts\",\n     \"packages/core/src/view/services.ts\"\n   ],\n+  [\n+    \"packages/core/src/di.ts\",\n+    \"packages/core/src/di/index.ts\",\n+    \"packages/core/src/di/injectable.ts\",\n+    \"packages/core/src/di/jit/injectable.ts\",\n+    \"packages/core/src/di/jit/environment.ts\",\n+    \"packages/core/src/di/injector_compatibility.ts\",\n+    \"packages/core/src/di/injector.ts\",\n+    \"packages/core/src/di/null_injector.ts\"\n+  ],\n   [\n     \"packages/core/src/di/injectable.ts\",\n     \"packages/core/src/di/jit/injectable.ts\"\n@@ -908,6 +879,11 @@\n     \"packages/core/src/di/injector_compatibility.ts\",\n     \"packages/core/src/di/injector.ts\"\n   ],\n+  [\n+    \"packages/core/src/di/injector_compatibility.ts\",\n+    \"packages/core/src/di/injector.ts\",\n+    \"packages/core/src/di/null_injector.ts\"\n+  ],\n   [\n     \"packages/core/src/di/injector_compatibility.ts\",\n     \"packages/core/src/di/injector.ts\",\n@@ -921,6 +897,10 @@\n     \"packages/core/src/metadata/ng_module.ts\",\n     \"packages/core/src/di/util.ts\"\n   ],\n+  [\n+    \"packages/core/src/di/injector_token.ts\",\n+    \"packages/core/src/di/injector.ts\"\n+  ],\n   [\n     \"packages/core/src/di/injector.ts\",\n     \"packages/core/src/di/r3_injector.ts\""
        },
        {
            "sha": "5a861d8adbe8efc1fc877511e04227324fedc5da",
            "filename": "goldens/public-api/core/core.d.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/goldens%2Fpublic-api%2Fcore%2Fcore.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/goldens%2Fpublic-api%2Fcore%2Fcore.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fcore%2Fcore.d.ts?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -837,11 +837,11 @@ export declare interface RendererType2 {\n }\n \n export declare class ResolvedReflectiveFactory {\n-    dependencies: ɵangular_packages_core_core_e[];\n+    dependencies: ɵangular_packages_core_core_d[];\n     factory: Function;\n     constructor(\n     factory: Function,\n-    dependencies: ɵangular_packages_core_core_e[]);\n+    dependencies: ɵangular_packages_core_core_d[]);\n }\n \n export declare interface ResolvedReflectiveProvider {"
        },
        {
            "sha": "f2432d0decf9d92a825a7995d482aab2f6b342a2",
            "filename": "goldens/size-tracking/aio-payloads.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/goldens%2Fsize-tracking%2Faio-payloads.json",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/goldens%2Fsize-tracking%2Faio-payloads.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fsize-tracking%2Faio-payloads.json?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -12,7 +12,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime-es2015\": 3037,\n-        \"main-es2015\": 449483,\n+        \"main-es2015\": 448796,\n         \"polyfills-es2015\": 52415\n       }\n     }"
        },
        {
            "sha": "f00ac8b8478af7291a0f54555960cd479b206e29",
            "filename": "goldens/size-tracking/integration-payloads.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fsize-tracking%2Fintegration-payloads.json?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -21,7 +21,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime-es2015\": 1485,\n-        \"main-es2015\": 147252,\n+        \"main-es2015\": 146680,\n         \"polyfills-es2015\": 36964\n       }\n     }"
        },
        {
            "sha": "845757d5d63dd1de848bab9d0d832f44d394b6d6",
            "filename": "packages/core/src/di/index.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fdi%2Findex.ts?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -18,7 +18,8 @@ export {ɵɵdefineInjectable, defineInjectable, ɵɵdefineInjector, InjectableTy\n export {forwardRef, resolveForwardRef, ForwardRefFn} from './forward_ref';\n export {Injectable, InjectableDecorator, InjectableProvider} from './injectable';\n export {Injector} from './injector';\n-export {ɵɵinject, inject, INJECTOR, ɵɵinvalidFactoryDep} from './injector_compatibility';\n+export {ɵɵinject, inject, ɵɵinvalidFactoryDep} from './injector_compatibility';\n+export {INJECTOR} from './injector_token';\n export {ReflectiveInjector} from './reflective_injector';\n export {ClassProvider, ClassSansProvider, ConstructorProvider, ConstructorSansProvider, ExistingProvider, ExistingSansProvider, FactoryProvider, FactorySansProvider, Provider, StaticClassProvider, StaticClassSansProvider, StaticProvider, TypeProvider, ValueProvider, ValueSansProvider} from './interface/provider';\n export {ResolvedReflectiveFactory, ResolvedReflectiveProvider} from './reflective_provider';"
        },
        {
            "sha": "bc5527566e0133e35768e1598db4ec95aa5e0ee5",
            "filename": "packages/core/src/di/inject_switch.ts",
            "status": "added",
            "additions": 76,
            "deletions": 0,
            "changes": 76,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Finject_switch.ts",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Finject_switch.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fdi%2Finject_switch.ts?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -0,0 +1,76 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+import {Type} from '../interface/type';\n+import {assertNotEqual} from '../util/assert';\n+import {stringify} from '../util/stringify';\n+import {InjectionToken} from './injection_token';\n+import {getInjectableDef, ɵɵInjectableDef} from './interface/defs';\n+import {InjectFlags} from './interface/injector';\n+\n+\n+/**\n+ * Current implementation of inject.\n+ *\n+ * By default, it is `injectInjectorOnly`, which makes it `Injector`-only aware. It can be changed\n+ * to `directiveInject`, which brings in the `NodeInjector` system of ivy. It is designed this\n+ * way for two reasons:\n+ *  1. `Injector` should not depend on ivy logic.\n+ *  2. To maintain tree shake-ability we don't want to bring in unnecessary code.\n+ */\n+let _injectImplementation: (<T>(token: Type<T>|InjectionToken<T>, flags?: InjectFlags) => T | null)|\n+    undefined;\n+export function getInjectImplementation() {\n+  return _injectImplementation;\n+}\n+\n+\n+/**\n+ * Sets the current inject implementation.\n+ */\n+export function setInjectImplementation(\n+    impl: (<T>(token: Type<T>|InjectionToken<T>, flags?: InjectFlags) => T | null)|\n+    undefined): (<T>(token: Type<T>|InjectionToken<T>, flags?: InjectFlags) => T | null)|undefined {\n+  const previous = _injectImplementation;\n+  _injectImplementation = impl;\n+  return previous;\n+}\n+\n+\n+/**\n+ * Injects `root` tokens in limp mode.\n+ *\n+ * If no injector exists, we can still inject tree-shakable providers which have `providedIn` set to\n+ * `\"root\"`. This is known as the limp mode injection. In such case the value is stored in the\n+ * `InjectableDef`.\n+ */\n+export function injectRootLimpMode<T>(\n+    token: Type<T>|InjectionToken<T>, notFoundValue: T|undefined, flags: InjectFlags): T|null {\n+  const injectableDef: ɵɵInjectableDef<T>|null = getInjectableDef(token);\n+  if (injectableDef && injectableDef.providedIn == 'root') {\n+    return injectableDef.value === undefined ? injectableDef.value = injectableDef.factory() :\n+                                               injectableDef.value;\n+  }\n+  if (flags & InjectFlags.Optional) return null;\n+  if (notFoundValue !== undefined) return notFoundValue;\n+  throw new Error(`Injector: NOT_FOUND [${stringify(token)}]`);\n+}\n+\n+\n+/**\n+ * Assert that `_injectImplementation` is not `fn`.\n+ *\n+ * This is useful, to prevent infinite recursion.\n+ *\n+ * @param fn Function which it should not equal to\n+ */\n+export function assertInjectImplementationNotEqual(\n+    fn: (<T>(token: Type<T>|InjectionToken<T>, flags?: InjectFlags) => T | null)) {\n+  ngDevMode &&\n+      assertNotEqual(_injectImplementation, fn, 'Calling ɵɵinject would cause infinite recursion');\n+}"
        },
        {
            "sha": "f8b26f7eabf3596f1f5f428830cba83261d2640e",
            "filename": "packages/core/src/di/injection_token.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Finjection_token.ts",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Finjection_token.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fdi%2Finjection_token.ts?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -7,6 +7,7 @@\n  */\n \n import {Type} from '../interface/type';\n+import {assertLessThan} from '../util/assert';\n \n import {ɵɵdefineInjectable} from './interface/defs';\n \n@@ -61,9 +62,10 @@ export class InjectionToken<T> {\n   }) {\n     this.ɵprov = undefined;\n     if (typeof options == 'number') {\n+      (typeof ngDevMode === 'undefined' || ngDevMode) &&\n+          assertLessThan(options, 0, 'Only negative numbers are supported here');\n       // This is a special hack to assign __NG_ELEMENT_ID__ to this instance.\n-      // __NG_ELEMENT_ID__ is Used by Ivy to determine bloom filter id.\n-      // We are using it to assign `-1` which is used to identify `Injector`.\n+      // See `InjectorMarkers`\n       (this as any).__NG_ELEMENT_ID__ = options;\n     } else if (options !== undefined) {\n       this.ɵprov = ɵɵdefineInjectable({"
        },
        {
            "sha": "5fda8bfbf103b8278a7aec261f3d27518c3042a2",
            "filename": "packages/core/src/di/injector.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Finjector.ts",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Finjector.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fdi%2Finjector.ts?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -8,14 +8,16 @@\n \n import {AbstractType, Type} from '../interface/type';\n import {stringify} from '../util/stringify';\n-\n import {resolveForwardRef} from './forward_ref';\n import {InjectionToken} from './injection_token';\n-import {catchInjectorError, formatError, INJECTOR, NG_TEMP_TOKEN_PATH, NullInjector, setCurrentInjector, THROW_IF_NOT_FOUND, USE_VALUE, ɵɵinject} from './injector_compatibility';\n+import {catchInjectorError, formatError, NG_TEMP_TOKEN_PATH, setCurrentInjector, THROW_IF_NOT_FOUND, USE_VALUE, ɵɵinject} from './injector_compatibility';\n+import {InjectorMarkers} from './injector_marker';\n+import {INJECTOR} from './injector_token';\n import {getInjectableDef, ɵɵdefineInjectable} from './interface/defs';\n import {InjectFlags} from './interface/injector';\n import {ConstructorProvider, ExistingProvider, FactoryProvider, StaticClassProvider, StaticProvider, ValueProvider} from './interface/provider';\n import {Inject, Optional, Self, SkipSelf} from './metadata';\n+import {NullInjector} from './null_injector';\n import {createInjector} from './r3_injector';\n import {INJECTOR_SCOPE} from './scope';\n \n@@ -113,7 +115,7 @@ export abstract class Injector {\n    * @internal\n    * @nocollapse\n    */\n-  static __NG_ELEMENT_ID__ = -1;\n+  static __NG_ELEMENT_ID__ = InjectorMarkers.Injector;\n }\n \n "
        },
        {
            "sha": "249ce8b992f1ff3fc32d51c6e9a1fd073a0b2ade",
            "filename": "packages/core/src/di/injector_compatibility.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 85,
            "changes": 87,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Finjector_compatibility.ts",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Finjector_compatibility.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fdi%2Finjector_compatibility.ts?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -14,28 +14,14 @@ import {getClosureSafeProperty} from '../util/property';\n import {stringify} from '../util/stringify';\n \n import {resolveForwardRef} from './forward_ref';\n+import {getInjectImplementation, injectRootLimpMode} from './inject_switch';\n import {InjectionToken} from './injection_token';\n import {Injector} from './injector';\n-import {getInjectableDef, ɵɵInjectableDef} from './interface/defs';\n import {InjectFlags} from './interface/injector';\n import {ValueProvider} from './interface/provider';\n import {Inject, Optional, Self, SkipSelf} from './metadata';\n \n \n-\n-/**\n- * An InjectionToken that gets the current `Injector` for `createInjector()`-style injectors.\n- *\n- * Requesting this token instead of `Injector` allows `StaticInjector` to be tree-shaken from a\n- * project.\n- *\n- * @publicApi\n- */\n-export const INJECTOR = new InjectionToken<Injector>(\n-    'INJECTOR',\n-    -1 as any  // `-1` is used by Ivy DI system as special value to recognize it as `Injector`.\n-);\n-\n const _THROW_IF_NOT_FOUND = {};\n export const THROW_IF_NOT_FOUND = _THROW_IF_NOT_FOUND;\n \n@@ -62,41 +48,6 @@ export function setCurrentInjector(injector: Injector|null|undefined): Injector|\n   return former;\n }\n \n-/**\n- * Current implementation of inject.\n- *\n- * By default, it is `injectInjectorOnly`, which makes it `Injector`-only aware. It can be changed\n- * to `directiveInject`, which brings in the `NodeInjector` system of ivy. It is designed this\n- * way for two reasons:\n- *  1. `Injector` should not depend on ivy logic.\n- *  2. To maintain tree shake-ability we don't want to bring in unnecessary code.\n- */\n-let _injectImplementation: (<T>(token: Type<T>|InjectionToken<T>, flags?: InjectFlags) => T | null)|\n-    undefined;\n-\n-/**\n- * Sets the current inject implementation.\n- */\n-export function setInjectImplementation(\n-    impl: (<T>(token: Type<T>|InjectionToken<T>, flags?: InjectFlags) => T | null)|\n-    undefined): (<T>(token: Type<T>|InjectionToken<T>, flags?: InjectFlags) => T | null)|undefined {\n-  const previous = _injectImplementation;\n-  _injectImplementation = impl;\n-  return previous;\n-}\n-\n-/**\n- * Assert that `_injectImplementation` is not `fn`.\n- *\n- * This is useful, to prevent infinite recursion.\n- *\n- * @param fn Function which it should not equal to\n- */\n-export function assertInjectImplementationNot(\n-    fn: (<T>(token: Type<T>|InjectionToken<T>, flags?: InjectFlags) => T | null)) {\n-  ngDevMode &&\n-      assertNotEqual(_injectImplementation, fn, 'Calling ɵɵinject would cause infinite recursion');\n-}\n \n export function injectInjectorOnly<T>(token: Type<T>|InjectionToken<T>): T;\n export function injectInjectorOnly<T>(token: Type<T>|InjectionToken<T>, flags?: InjectFlags): T|\n@@ -128,7 +79,7 @@ export function injectInjectorOnly<T>(\n export function ɵɵinject<T>(token: Type<T>|InjectionToken<T>): T;\n export function ɵɵinject<T>(token: Type<T>|InjectionToken<T>, flags?: InjectFlags): T|null;\n export function ɵɵinject<T>(token: Type<T>|InjectionToken<T>, flags = InjectFlags.Default): T|null {\n-  return (_injectImplementation || injectInjectorOnly)(resolveForwardRef(token), flags);\n+  return (getInjectImplementation() || injectInjectorOnly)(resolveForwardRef(token), flags);\n }\n \n /**\n@@ -181,24 +132,6 @@ Please check that 1) the type for the parameter at index ${\n  */\n export const inject = ɵɵinject;\n \n-/**\n- * Injects `root` tokens in limp mode.\n- *\n- * If no injector exists, we can still inject tree-shakable providers which have `providedIn` set to\n- * `\"root\"`. This is known as the limp mode injection. In such case the value is stored in the\n- * `InjectableDef`.\n- */\n-export function injectRootLimpMode<T>(\n-    token: Type<T>|InjectionToken<T>, notFoundValue: T|undefined, flags: InjectFlags): T|null {\n-  const injectableDef: ɵɵInjectableDef<T>|null = getInjectableDef(token);\n-  if (injectableDef && injectableDef.providedIn == 'root') {\n-    return injectableDef.value === undefined ? injectableDef.value = injectableDef.factory() :\n-                                               injectableDef.value;\n-  }\n-  if (flags & InjectFlags.Optional) return null;\n-  if (notFoundValue !== undefined) return notFoundValue;\n-  throw new Error(`Injector: NOT_FOUND [${stringify(token)}]`);\n-}\n \n export function injectArgs(types: (Type<any>|InjectionToken<any>|any[])[]): any[] {\n   const args: any[] = [];\n@@ -236,22 +169,6 @@ export function injectArgs(types: (Type<any>|InjectionToken<any>|any[])[]): any[\n }\n \n \n-export class NullInjector implements Injector {\n-  get(token: any, notFoundValue: any = THROW_IF_NOT_FOUND): any {\n-    if (notFoundValue === THROW_IF_NOT_FOUND) {\n-      // Intentionally left behind: With dev tools open the debugger will stop here. There is no\n-      // reason why correctly written application should cause this exception.\n-      // TODO(misko): uncomment the next line once `ngDevMode` works with closure.\n-      // if (ngDevMode) debugger;\n-      const error = new Error(`NullInjectorError: No provider for ${stringify(token)}!`);\n-      error.name = 'NullInjectorError';\n-      throw error;\n-    }\n-    return notFoundValue;\n-  }\n-}\n-\n-\n export function catchInjectorError(\n     e: any, token: any, injectorErrorName: string, source: string|null): never {\n   const tokenPath: any[] = e[NG_TEMP_TOKEN_PATH];"
        },
        {
            "sha": "ff13f93b72d0030c3272438064524349d8827a75",
            "filename": "packages/core/src/di/injector_marker.ts",
            "status": "added",
            "additions": 24,
            "deletions": 0,
            "changes": 24,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Finjector_marker.ts",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Finjector_marker.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fdi%2Finjector_marker.ts?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -0,0 +1,24 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+/**\n+ * Special markers which can be left on `Type.__NG_ELEMENT_ID__` which are used by the Ivy's\n+ * `NodeInjector`. Usually these markers contain factory functions. But in case of this special\n+ * marker we can't leave behind a function because it would create tree shaking problem.\n+ *\n+ * Currently only `Injector` is special.\n+ *\n+ * NOTE: the numbers here must be negative, because positive numbers are used as IDs for bloom\n+ * filter.\n+ */\n+export const enum InjectorMarkers {\n+  /**\n+   * Marks that the current type is `Injector`\n+   */\n+  Injector = -1\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "b84fc4a261a4d50f39addd41b5c4971acbc669c2",
            "filename": "packages/core/src/di/injector_token.ts",
            "status": "added",
            "additions": 28,
            "deletions": 0,
            "changes": 28,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Finjector_token.ts",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Finjector_token.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fdi%2Finjector_token.ts?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -0,0 +1,28 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+import {InjectionToken} from './injection_token';\n+import {Injector} from './injector';\n+import {InjectorMarkers} from './injector_marker';\n+\n+\n+\n+/**\n+ * An InjectionToken that gets the current `Injector` for `createInjector()`-style injectors.\n+ *\n+ * Requesting this token instead of `Injector` allows `StaticInjector` to be tree-shaken from a\n+ * project.\n+ *\n+ * @publicApi\n+ */\n+export const INJECTOR = new InjectionToken<Injector>(\n+    'INJECTOR',\n+    // Dissable tslint because this is const enum which gets inlined not top level prop access.\n+    // tslint:disable-next-line: no-toplevel-property-access\n+    InjectorMarkers.Injector as any,  // Special value used by Ivy to identify `Injector`.\n+);"
        },
        {
            "sha": "fb889c92c951fac6abfd5f2bf5573848d0b4bbcd",
            "filename": "packages/core/src/di/null_injector.ts",
            "status": "added",
            "additions": 23,
            "deletions": 0,
            "changes": 23,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Fnull_injector.ts",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Fnull_injector.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fdi%2Fnull_injector.ts?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -0,0 +1,23 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+import {stringify} from '../util/stringify';\n+import {Injector} from '.';\n+import {THROW_IF_NOT_FOUND} from './injector_compatibility';\n+\n+\n+export class NullInjector implements Injector {\n+  get(token: any, notFoundValue: any = THROW_IF_NOT_FOUND): any {\n+    if (notFoundValue === THROW_IF_NOT_FOUND) {\n+      const error = new Error(`NullInjectorError: No provider for ${stringify(token)}!`);\n+      error.name = 'NullInjectorError';\n+      throw error;\n+    }\n+    return notFoundValue;\n+  }\n+}"
        },
        {
            "sha": "53823799d6caad1bf44e2b1be7d466f28239c98c",
            "filename": "packages/core/src/di/r3_injector.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Fr3_injector.ts",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fdi%2Fr3_injector.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fdi%2Fr3_injector.ts?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -19,10 +19,12 @@ import {stringify} from '../util/stringify';\n import {resolveForwardRef} from './forward_ref';\n import {InjectionToken} from './injection_token';\n import {Injector} from './injector';\n-import {catchInjectorError, injectArgs, INJECTOR, NG_TEMP_TOKEN_PATH, NullInjector, setCurrentInjector, THROW_IF_NOT_FOUND, USE_VALUE, ɵɵinject} from './injector_compatibility';\n+import {catchInjectorError, injectArgs, NG_TEMP_TOKEN_PATH, setCurrentInjector, THROW_IF_NOT_FOUND, USE_VALUE, ɵɵinject} from './injector_compatibility';\n+import {INJECTOR} from './injector_token';\n import {getInheritedInjectableDef, getInjectableDef, getInjectorDef, InjectorType, InjectorTypeWithProviders, ɵɵInjectableDef} from './interface/defs';\n import {InjectFlags} from './interface/injector';\n import {ClassProvider, ConstructorProvider, ExistingProvider, FactoryProvider, StaticClassProvider, StaticProvider, TypeProvider, ValueProvider} from './interface/provider';\n+import {NullInjector} from './null_injector';\n import {INJECTOR_SCOPE} from './scope';\n \n "
        },
        {
            "sha": "5f4fd9054a729a69ca907d68fba57c98f7d4e522",
            "filename": "packages/core/src/render3/di.ts",
            "status": "modified",
            "additions": 22,
            "deletions": 30,
            "changes": 52,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Frender3%2Fdi.ts",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Frender3%2Fdi.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fdi.ts?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -7,9 +7,10 @@\n  */\n \n import {isForwardRef, resolveForwardRef} from '../di/forward_ref';\n+import {injectRootLimpMode, setInjectImplementation} from '../di/inject_switch';\n import {InjectionToken} from '../di/injection_token';\n import {Injector} from '../di/injector';\n-import {injectRootLimpMode, setInjectImplementation} from '../di/injector_compatibility';\n+import {InjectorMarkers} from '../di/injector_marker';\n import {getInjectorDef} from '../di/interface/defs';\n import {InjectFlags} from '../di/interface/injector';\n import {Type} from '../interface/type';\n@@ -415,8 +416,11 @@ export function getOrCreateInjectable<T>(\n     // so just call the factory function to create it.\n     if (typeof bloomHash === 'function') {\n       if (!enterDI(lView, tNode, flags)) {\n-        // Failed to enter DI use module injector instead.\n-        return lookupTokenUsingModuleInjector<T>(lView, token, flags, notFoundValue);\n+        // Failed to enter DI, try module injector instead. If a token is injected with the @Host\n+        // flag, the module injector is not searched for that token in Ivy.\n+        return (flags & InjectFlags.Host) ?\n+            notFoundValueOrThrow<T>(notFoundValue, token, flags) :\n+            lookupTokenUsingModuleInjector<T>(lView, token, flags, notFoundValue);\n       }\n       try {\n         const value = bloomHash();\n@@ -429,32 +433,6 @@ export function getOrCreateInjectable<T>(\n         leaveDI();\n       }\n     } else if (typeof bloomHash === 'number') {\n-      // This is a value used to identify __NG_ELEMENT_ID__\n-      // `-1` is a special value used to identify `Injector` types in NodeInjector\n-      // This is a workaround for the fact that if the `Injector.__NG_ELEMENT_ID__`\n-      // would have a factory function (such as `ElementRef`) it would cause Ivy\n-      // to be pulled into the ViewEngine, because they both share `Injector` type.\n-      // This should be refactored to follow `ElementRef` pattern once ViewEngine is\n-      // removed\n-      if (bloomHash === -1) {\n-        if (!enterDI(lView, tNode, flags)) {\n-          // Failed to enter DI, try module injector instead. If a token is injected with the @Host\n-          // flag, the module injector is not searched for that token in Ivy.\n-          return (flags & InjectFlags.Host) ?\n-              notFoundValueOrThrow<T>(notFoundValue, token, flags) :\n-              lookupTokenUsingModuleInjector<T>(lView, token, flags, notFoundValue);\n-        }\n-        try {\n-          // Retrieving current `TNode` and `LView` from the state (rather than using `tNode` and\n-          // `lView`), because entering DI (by calling `enterDI`) may cause these values to change\n-          // (in case `@SkipSelf` flag is present).\n-          return new NodeInjector(getCurrentTNode()! as TDirectiveHostNode, getLView()) as any;\n-        } finally {\n-          leaveDI();\n-        }\n-      }\n-      // If the token has a bloom hash, then it is a token which could be in NodeInjector.\n-\n       // A reference to the previous injector TView that was found while climbing the element\n       // injector tree. This is used to know if viewProviders can be accessed on the current\n       // injector.\n@@ -525,6 +503,10 @@ export function getOrCreateInjectable<T>(\n \n const NOT_FOUND = {};\n \n+export function createNodeInjector(): Injector {\n+  return new NodeInjector(getCurrentTNode()! as TDirectiveHostNode, getLView()) as any;\n+}\n+\n function searchTokensOnInjector<T>(\n     injectorIndex: number, lView: LView, token: Type<T>|InjectionToken<T>,\n     previousTView: TView|null, flags: InjectFlags, hostTElementNode: TNode|null) {\n@@ -674,7 +656,17 @@ export function bloomHashBitOrFactory(token: Type<any>|InjectionToken<any>|strin\n       // First check with `hasOwnProperty` so we don't get an inherited ID.\n       token.hasOwnProperty(NG_ELEMENT_ID) ? (token as any)[NG_ELEMENT_ID] : undefined;\n   // Negative token IDs are used for special objects such as `Injector`\n-  return (typeof tokenId === 'number' && tokenId > 0) ? tokenId & BLOOM_MASK : tokenId;\n+  if (typeof tokenId === 'number') {\n+    if (tokenId >= 0) {\n+      return tokenId & BLOOM_MASK;\n+    } else {\n+      ngDevMode &&\n+          assertEqual(tokenId, InjectorMarkers.Injector, 'Expecting to get Special Injector Id');\n+      return createNodeInjector;\n+    }\n+  } else {\n+    return tokenId;\n+  }\n }\n \n export function bloomHasToken(bloomHash: number, injectorIndex: number, injectorView: LView|TData) {"
        },
        {
            "sha": "bb08814e5a53cdfc4640fcca5813f5e39f1bb672",
            "filename": "packages/core/src/render3/instructions/di.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fdi.ts",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fdi.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fdi.ts?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -6,7 +6,8 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n import {InjectFlags, InjectionToken, resolveForwardRef} from '../../di';\n-import {assertInjectImplementationNot, ɵɵinject} from '../../di/injector_compatibility';\n+import {assertInjectImplementationNotEqual} from '../../di/inject_switch';\n+import {ɵɵinject} from '../../di/injector_compatibility';\n import {Type} from '../../interface/type';\n import {getOrCreateInjectable, injectAttributeImpl} from '../di';\n import {TDirectiveHostNode} from '../interfaces/node';\n@@ -45,7 +46,7 @@ export function ɵɵdirectiveInject<T>(\n   // if inject utilities are used before bootstrapping.\n   if (lView === null) {\n     // Verify that we will not get into infinite loop.\n-    ngDevMode && assertInjectImplementationNot(ɵɵdirectiveInject);\n+    ngDevMode && assertInjectImplementationNotEqual(ɵɵdirectiveInject);\n     return ɵɵinject(token, flags);\n   }\n   const tNode = getCurrentTNode();"
        },
        {
            "sha": "a388e68aa8c6ede867e69529e83d296344da1d89",
            "filename": "packages/core/src/render3/ng_module_ref.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Frender3%2Fng_module_ref.ts",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Frender3%2Fng_module_ref.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fng_module_ref.ts?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import {Injector} from '../di/injector';\n-import {INJECTOR} from '../di/injector_compatibility';\n+import {INJECTOR} from '../di/injector_token';\n import {InjectFlags} from '../di/interface/injector';\n import {createInjectorWithoutInjectorInstances, R3Injector} from '../di/r3_injector';\n import {Type} from '../interface/type';"
        },
        {
            "sha": "148e7951841ba9133d30a59239a11fdc907da4a1",
            "filename": "packages/core/src/render3/pipe.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Frender3%2Fpipe.ts",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Frender3%2Fpipe.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fpipe.ts?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -8,8 +8,7 @@\n \n import {WrappedValue} from '../change_detection/change_detection_util';\n import {PipeTransform} from '../change_detection/pipe_transform';\n-import {setInjectImplementation} from '../di/injector_compatibility';\n-\n+import {setInjectImplementation} from '../di/inject_switch';\n import {getFactoryDef} from './definition';\n import {setIncludeViewProviders} from './di';\n import {RuntimeError, RuntimeErrorCode} from './error_code';"
        },
        {
            "sha": "5a414d4548b6a8655057f06ce63197e6627d389d",
            "filename": "packages/core/src/view/ng_module.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fview%2Fng_module.ts",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Fsrc%2Fview%2Fng_module.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fview%2Fng_module.ts?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -8,7 +8,8 @@\n \n import {resolveForwardRef} from '../di/forward_ref';\n import {Injector} from '../di/injector';\n-import {INJECTOR, setCurrentInjector} from '../di/injector_compatibility';\n+import {setCurrentInjector} from '../di/injector_compatibility';\n+import {INJECTOR} from '../di/injector_token';\n import {getInjectableDef, ɵɵInjectableDef} from '../di/interface/defs';\n import {INJECTOR_SCOPE} from '../di/scope';\n import {NgModuleRef} from '../linker/ng_module_factory';"
        },
        {
            "sha": "14d53f82a33066fa2c253a306428ac89555e7122",
            "filename": "packages/core/test/bundling/forms/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -833,6 +833,9 @@\n   {\n     \"name\": \"createLView\"\n   },\n+  {\n+    \"name\": \"createNodeInjector\"\n+  },\n   {\n     \"name\": \"createPlatformFactory\"\n   },"
        },
        {
            "sha": "0f0af28545529a61d839d373338395f56527a454",
            "filename": "packages/core/test/bundling/router/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Ftest%2Fbundling%2Frouter%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Ftest%2Fbundling%2Frouter%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Frouter%2Fbundle.golden_symbols.json?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -1073,6 +1073,9 @@\n   {\n     \"name\": \"createNewSegmentGroup\"\n   },\n+  {\n+    \"name\": \"createNodeInjector\"\n+  },\n   {\n     \"name\": \"createPlatformFactory\"\n   },"
        },
        {
            "sha": "64b81583e2863b1b86e61d6d0881569356449099",
            "filename": "packages/core/test/bundling/todo/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -272,6 +272,9 @@\n   {\n     \"name\": \"createLView\"\n   },\n+  {\n+    \"name\": \"createNodeInjector\"\n+  },\n   {\n     \"name\": \"createTView\"\n   },"
        },
        {
            "sha": "937568cfb650b56f8e6b8cf5f821987af18e0a6f",
            "filename": "packages/core/test/view/ng_module_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Ftest%2Fview%2Fng_module_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8574c3000ece48d781d89d7e9a05a0dbdd45305a/packages%2Fcore%2Ftest%2Fview%2Fng_module_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fview%2Fng_module_spec.ts?ref=8574c3000ece48d781d89d7e9a05a0dbdd45305a",
            "patch": "@@ -9,7 +9,7 @@\n import {NgModuleRef, ɵINJECTOR_SCOPE as INJECTOR_SCOPE} from '@angular/core';\n import {inject, InjectFlags} from '@angular/core/src/di';\n import {Injector} from '@angular/core/src/di/injector';\n-import {INJECTOR} from '@angular/core/src/di/injector_compatibility';\n+import {INJECTOR} from '@angular/core/src/di/injector_token';\n import {ɵɵdefineInjectable, ɵɵInjectableDef} from '@angular/core/src/di/interface/defs';\n import {NgModuleDefinition, NgModuleProviderDef, NodeFlags} from '@angular/core/src/view';\n import {moduleDef} from '@angular/core/src/view/ng_module';"
        }
    ],
    "stats": {
        "total": 401,
        "additions": 229,
        "deletions": 172
    }
}