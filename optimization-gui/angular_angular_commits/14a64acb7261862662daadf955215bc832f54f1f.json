{
    "author": "petebacondarwin",
    "message": "build(docs-infra): store search dictionary as a string (#41447)\n\nPreviously, the search index info file contained an array of strings that is\nthe dictionary of terms in the corpus.\nStoring this as a space separated string reduces the size of the file.\n\nPR Close #41447",
    "sha": "14a64acb7261862662daadf955215bc832f54f1f",
    "files": [
        {
            "sha": "08747633032966e2d486dd2189c137910ee4d6aa",
            "filename": "aio/src/app/search/search.worker.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/14a64acb7261862662daadf955215bc832f54f1f/aio%2Fsrc%2Fapp%2Fsearch%2Fsearch.worker.ts",
            "raw_url": "https://github.com/angular/angular/raw/14a64acb7261862662daadf955215bc832f54f1f/aio%2Fsrc%2Fapp%2Fsearch%2Fsearch.worker.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fsearch%2Fsearch.worker.ts?ref=14a64acb7261862662daadf955215bc832f54f1f",
            "patch": "@@ -22,7 +22,7 @@ interface PageInfo {\n }\n \n interface EncodedPages {\n-  dictionary: string[];\n+  dictionary: string;\n   pages: EncodedPage[];\n }\n \n@@ -91,11 +91,12 @@ function makeRequest(url: string, callback: (response: any) => void): void {\n // Create the search index from the searchInfo which contains the information about each page to be\n // indexed\n function loadIndex({dictionary, pages}: EncodedPages): IndexLoader {\n+  const dictionaryArray = dictionary.split(' ');\n   return (indexBuilder: lunr.Builder) => {\n     // Store the pages data to be used in mapping query results back to pages\n     // Add search terms from each page to the search index\n     pages.forEach(encodedPage => {\n-      const page = decodePage(encodedPage, dictionary);\n+      const page = decodePage(encodedPage, dictionaryArray);\n       indexBuilder.add(page);\n       pageMap[page.path] = page;\n     });"
        },
        {
            "sha": "54f0398a208afdebc37939e078c752d8dd85c45e",
            "filename": "aio/tools/transforms/angular-base-package/processors/generateKeywords.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/14a64acb7261862662daadf955215bc832f54f1f/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Fprocessors%2FgenerateKeywords.js",
            "raw_url": "https://github.com/angular/angular/raw/14a64acb7261862662daadf955215bc832f54f1f/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Fprocessors%2FgenerateKeywords.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Fprocessors%2FgenerateKeywords.js?ref=14a64acb7261862662daadf955215bc832f54f1f",
            "patch": "@@ -87,7 +87,7 @@ module.exports = function generateKeywordsProcessor(log) {\n \n       // Now process all the search data and collect it up to be used in creating a new document\n       const searchData = {\n-        dictionary: Array.from(dictionary.keys()),\n+        dictionary: Array.from(dictionary.keys()).join(' '),\n         pages: filteredDocs.map(page => {\n           // Copy the properties from the searchTerms object onto the search data object\n           const searchObj = {"
        },
        {
            "sha": "88d35ee2ae49420f0ad7020fbaaefc371ebd0dc3",
            "filename": "aio/tools/transforms/angular-base-package/processors/generateKeywords.spec.js",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/14a64acb7261862662daadf955215bc832f54f1f/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Fprocessors%2FgenerateKeywords.spec.js",
            "raw_url": "https://github.com/angular/angular/raw/14a64acb7261862662daadf955215bc832f54f1f/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Fprocessors%2FgenerateKeywords.spec.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Fprocessors%2FgenerateKeywords.spec.js?ref=14a64acb7261862662daadf955215bc832f54f1f",
            "patch": "@@ -73,7 +73,7 @@ describe('generateKeywords processor', () => {\n     ];\n     processor.$process(docs);\n     expect(docs[docs.length - 1].data).toEqual({\n-      dictionary: [ 'fooclass', 'barinterfac', 'captur', 'content' ],\n+      dictionary: 'fooclass barinterfac captur content',\n       pages: [\n         jasmine.objectContaining({ title: 'FooClass', type: 'class', keywords: [0] }),\n         jasmine.objectContaining({ title: 'BarInterface', type: 'interface', keywords: [1, 2, 3] }),\n@@ -93,7 +93,7 @@ describe('generateKeywords processor', () => {\n     ];\n     processor.$process(docs);\n     expect(docs[docs.length - 1].data).toEqual({\n-      dictionary: ['class', 'fooclass', 'content', 'insid', 'tabl'],\n+      dictionary: 'class fooclass content insid tabl',\n       pages: [\n         jasmine.objectContaining({keywords: [0, 1, 2, 3, 4] })\n       ],\n@@ -142,7 +142,7 @@ describe('generateKeywords processor', () => {\n     processor.$process(docs);\n     const keywordsDoc = docs[docs.length - 1];\n     expect(keywordsDoc.data).toEqual({\n-      dictionary: ['class', 'publicexport', 'head', 'secondari'],\n+      dictionary: 'class publicexport head secondari',\n       pages: [\n         jasmine.objectContaining({ headings: [2, 3, 2] })\n       ]\n@@ -175,7 +175,7 @@ describe('generateKeywords processor', () => {\n     processor.$process(docs);\n     const keywordsDoc = docs[docs.length - 1];\n     expect(keywordsDoc.data).toEqual({\n-      dictionary: ['class', 'publicexport', 'content', 'ngclass', 'instancemethoda','instancepropertya','instancemethodb','instancepropertyb','staticmethoda','staticpropertya','staticmethodb','staticpropertyb', 'head'],\n+      dictionary: 'class publicexport content ngclass instancemethoda instancepropertya instancemethodb instancepropertyb staticmethoda staticpropertya staticmethodb staticpropertyb head',\n       pages: [\n         jasmine.objectContaining({\n           members: [4, 5, 6, 7, 8, 9, 10, 11]\n@@ -220,7 +220,7 @@ describe('generateKeywords processor', () => {\n     processor.$process(docs);\n     const keywordsDoc = docs[docs.length - 1];\n     expect(keywordsDoc.data).toEqual({\n-      dictionary: ['class', 'child', 'childmember1', 'childmember2', 'parentmember1', 'parentmember2', 'parentmember3', 'parentclass', 'interfac', 'parentinterfac'],\n+      dictionary: 'class child childmember1 childmember2 parentmember1 parentmember2 parentmember3 parentclass interfac parentinterfac',\n       pages: [\n         jasmine.objectContaining({\n           title: 'Child',\n@@ -252,7 +252,7 @@ describe('generateKeywords processor', () => {\n     processor.$process(docs);\n     const keywordsDoc = docs[docs.length - 1];\n     expect(keywordsDoc.data).toEqual({\n-      dictionary: ['class', 'publicexport', 'ngcontrol', 'control', 'content', 'ngclass', 'ngmodel', 'model'],\n+      dictionary: 'class publicexport ngcontrol control content ngclass ngmodel model',\n       pages: [\n         jasmine.objectContaining({\n           headings: [6, 7],\n@@ -284,7 +284,7 @@ describe('generateKeywords processor', () => {\n     processor.$process(docs);\n     const keywordsDoc = docs[docs.length - 1];\n     expect(JSON.parse(keywordsDoc.renderedContent)).toEqual({\n-      dictionary: ['class', 'someclass', 'document', 'api', 'head', 'someclass2', 'descript', 'member1'],\n+      dictionary: 'class someclass document api head someclass2 descript member1',\n       pages: [{\n         'title':'SomeClass',\n         'type':'class',"
        }
    ],
    "stats": {
        "total": 21,
        "additions": 11,
        "deletions": 10
    }
}