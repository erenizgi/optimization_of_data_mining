{
    "author": "josephperrott",
    "message": "build: update to rules_nodejs@3.1.0 (#40710)\n\nUpdate to the latest version of rules_nodejs.\n\nPR Close #40710",
    "sha": "a6c1c913a9c506e2554452b100063c1dbaac49c5",
    "files": [
        {
            "sha": "52384881abb1b123ae6efe0ec529a4eaed812593",
            "filename": "WORKSPACE",
            "status": "modified",
            "additions": 6,
            "deletions": 8,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/a6c1c913a9c506e2554452b100063c1dbaac49c5/WORKSPACE",
            "raw_url": "https://github.com/angular/angular/raw/a6c1c913a9c506e2554452b100063c1dbaac49c5/WORKSPACE",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/WORKSPACE?ref=a6c1c913a9c506e2554452b100063c1dbaac49c5",
            "patch": "@@ -8,8 +8,8 @@ load(\"@bazel_tools//tools/build_defs/repo:http.bzl\", \"http_archive\")\n # Fetch rules_nodejs so we can install our npm dependencies\n http_archive(\n     name = \"build_bazel_rules_nodejs\",\n-    sha256 = \"9d93d4e1340c43dbf6b2fd66b683d89630a6310bf8be3bf40ec96685dcacc26c\",\n-    urls = [\"https://github.com/bazelbuild/rules_nodejs/releases/download/2.3.3/rules_nodejs-2.3.3.tar.gz\"],\n+    sha256 = \"dd4dc46066e2ce034cba0c81aa3e862b27e8e8d95871f567359f7a534cccb666\",\n+    urls = [\"https://github.com/bazelbuild/rules_nodejs/releases/download/3.1.0/rules_nodejs-3.1.0.tar.gz\"],\n )\n \n # Check the rules_nodejs version and download npm dependencies\n@@ -31,6 +31,9 @@ yarn_install(\n     name = \"npm\",\n     manual_build_file_contents = npm_package_archives(),\n     package_json = \"//:package.json\",\n+    # TODO(josephperrott): Correct usage of transitive dependencies to reenable strict_visibility\n+    # See: https://github.com/bazelbuild/rules_nodejs/wiki#strict_visibility-on-yarn_install-and-npm_install-now-defaults-true-2199\n+    strict_visibility = False,\n     yarn_lock = \"//:yarn.lock\",\n )\n \n@@ -44,11 +47,6 @@ load(\"@npm//@bazel/protractor:package.bzl\", \"npm_bazel_protractor_dependencies\")\n \n npm_bazel_protractor_dependencies()\n \n-# Load karma dependencies\n-load(\"@npm//@bazel/karma:package.bzl\", \"npm_bazel_karma_dependencies\")\n-\n-npm_bazel_karma_dependencies()\n-\n # Setup the rules_webtesting toolchain\n load(\"@io_bazel_rules_webtesting//web:repositories.bzl\", \"web_test_repositories\")\n \n@@ -59,7 +57,7 @@ load(\"//dev-infra/browsers:browser_repositories.bzl\", \"browser_repositories\")\n browser_repositories()\n \n # Setup the rules_sass toolchain\n-load(\"@io_bazel_rules_sass//sass:sass_repositories.bzl\", \"sass_repositories\")\n+load(\"@io_bazel_rules_sass//:defs.bzl\", \"sass_repositories\")\n \n sass_repositories()\n "
        },
        {
            "sha": "633b420cf6d6347dd7e7f51612cc589bf32170a5",
            "filename": "package.json",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/a6c1c913a9c506e2554452b100063c1dbaac49c5/package.json",
            "raw_url": "https://github.com/angular/angular/raw/a6c1c913a9c506e2554452b100063c1dbaac49c5/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=a6c1c913a9c506e2554452b100063c1dbaac49c5",
            "patch": "@@ -52,12 +52,12 @@\n     \"@babel/template\": \"^7.8.6\",\n     \"@babel/traverse\": \"^7.8.6\",\n     \"@babel/types\": \"^7.8.6\",\n-    \"@bazel/jasmine\": \"2.3.3\",\n-    \"@bazel/karma\": \"2.3.3\",\n-    \"@bazel/protractor\": \"2.3.3\",\n-    \"@bazel/rollup\": \"2.3.3\",\n-    \"@bazel/terser\": \"2.3.3\",\n-    \"@bazel/typescript\": \"2.3.3\",\n+    \"@bazel/concatjs\": \"3.0.0\",\n+    \"@bazel/jasmine\": \"3.1.0\",\n+    \"@bazel/protractor\": \"3.1.0\",\n+    \"@bazel/rollup\": \"3.1.0\",\n+    \"@bazel/terser\": \"3.1.0\",\n+    \"@bazel/typescript\": \"3.1.0\",\n     \"@microsoft/api-extractor\": \"7.7.11\",\n     \"@octokit/rest\": \"16.28.7\",\n     \"@octokit/types\": \"^5.0.1\","
        },
        {
            "sha": "a2d475788db492ce43eecc9745f0897195f295ed",
            "filename": "packages/bazel/package.bzl",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/a6c1c913a9c506e2554452b100063c1dbaac49c5/packages%2Fbazel%2Fpackage.bzl",
            "raw_url": "https://github.com/angular/angular/raw/a6c1c913a9c506e2554452b100063c1dbaac49c5/packages%2Fbazel%2Fpackage.bzl",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fbazel%2Fpackage.bzl?ref=a6c1c913a9c506e2554452b100063c1dbaac49c5",
            "patch": "@@ -43,11 +43,11 @@ def rules_angular_dev_dependencies():\n     _maybe(\n         http_archive,\n         name = \"io_bazel_rules_sass\",\n-        sha256 = \"77e241148f26d5dbb98f96fe0029d8f221c6cb75edbb83e781e08ac7f5322c5f\",\n-        strip_prefix = \"rules_sass-1.24.0\",\n+        sha256 = \"596ab3616d370135e0ecc710e103422e0aa3719f1c970303a0886b70c81ee819\",\n+        strip_prefix = \"rules_sass-1.32.2\",\n         urls = [\n-            \"https://github.com/bazelbuild/rules_sass/archive/1.24.0.zip\",\n-            \"https://mirror.bazel.build/github.com/bazelbuild/rules_sass/archive/1.24.0.zip\",\n+            \"https://github.com/bazelbuild/rules_sass/archive/1.32.2.zip\",\n+            \"https://mirror.bazel.build/github.com/bazelbuild/rules_sass/archive/1.32.2.zip\",\n         ],\n     )\n "
        },
        {
            "sha": "60f3622ef9ea5c6e9fd939b85f2815b5f556ee36",
            "filename": "yarn.lock",
            "status": "modified",
            "additions": 29,
            "deletions": 25,
            "changes": 54,
            "blob_url": "https://github.com/angular/angular/blob/a6c1c913a9c506e2554452b100063c1dbaac49c5/yarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/a6c1c913a9c506e2554452b100063c1dbaac49c5/yarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/yarn.lock?ref=a6c1c913a9c506e2554452b100063c1dbaac49c5",
            "patch": "@@ -1967,43 +1967,47 @@\n     \"@bazel/buildifier-linux_x64\" \"0.29.0\"\n     \"@bazel/buildifier-win32_x64\" \"0.29.0\"\n \n+\"@bazel/concatjs@3.0.0\":\n+  version \"3.0.0\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/concatjs/-/concatjs-3.0.0.tgz#8a8b0c90ffcea4ed74a7c8db8fd37af861df394e\"\n+  integrity sha512-JQTKFxWY6KQwfwqQRJCJtg8sQBN0ydTvV/5umTIC9wUz+1RdVRzGVtypYuY+V8wbTWB7Pt3cr+6eq9tPjPSFWQ==\n+  dependencies:\n+    protobufjs \"6.8.8\"\n+    source-map-support \"0.5.9\"\n+    tsutils \"2.27.2\"\n+\n \"@bazel/ibazel@^0.12.3\":\n   version \"0.12.4\"\n   resolved \"https://registry.yarnpkg.com/@bazel/ibazel/-/ibazel-0.12.4.tgz#ddda7c8ead6e29dc8d637af446086a750f395218\"\n   integrity sha512-FzOy+esB/fXVDbAmL6Ce2yCEy+PESZih8GypKhi0B8XzoZHAAn3QNnQcMNwo9PrIfp3G1989nM/JQ1b8jwEinQ==\n \n-\"@bazel/jasmine@2.3.3\":\n-  version \"2.3.3\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/jasmine/-/jasmine-2.3.3.tgz#7221c3704e63a4b8b19a9c7c9dec4b0337f302e0\"\n-  integrity sha512-YAXSCSBQ51/Ep+PAIro9WnO1c47on4KJ3ISMLbBoowIsWVhXIRGVLUoRivIRE89yKX2vHE1+4OuwYpywgRQOZw==\n+\"@bazel/jasmine@3.1.0\":\n+  version \"3.1.0\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/jasmine/-/jasmine-3.1.0.tgz#f71b60194f083cd171bf18089e90df1c16cb0ade\"\n+  integrity sha512-EPKbBtkqpolVhF9l9QCm8+wbdsRqtFvHgOruk/mkLXpvTmSV+cO//okunEMyeA03BIj1+Ek8Hqk4b4l4lAT4bw==\n   dependencies:\n     c8 \"~7.1.0\"\n     jasmine-reporters \"~2.3.2\"\n \n-\"@bazel/karma@2.3.3\":\n-  version \"2.3.3\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/karma/-/karma-2.3.3.tgz#063192e597ec4bd7bf2b80bf6bc5d7e2013e2002\"\n-  integrity sha512-qetKRmK0abViVDZH6okAXlDsFgr5btdwrWngjStlGDHHaTR23ORNilPIUTLrbwyIgy6qHlMdGrTp9KVXGGK6sQ==\n-\n-\"@bazel/protractor@2.3.3\":\n-  version \"2.3.3\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/protractor/-/protractor-2.3.3.tgz#44eca70d159d3e5a67654683f81266cc3594ce5a\"\n-  integrity sha512-06EFGstTshvofjiUd1ZJJepGeTgkLZNZB9Bfb7IhMC/ca1ZaeKB8SRWHhiPw7wN1QojHf4JJ+uhbqDt60m+Xrg==\n+\"@bazel/protractor@3.1.0\":\n+  version \"3.1.0\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/protractor/-/protractor-3.1.0.tgz#9d4e2514fa6949c58996b38824409811408924a8\"\n+  integrity sha512-39ilFP+grfdetXJOfeImNgNksB42vvlMmM/PU4cO5hUpGvDWSVpx9jIJUdr+NySf3M4A+Kizk3NtcO3xMNmwyQ==\n \n-\"@bazel/rollup@2.3.3\":\n-  version \"2.3.3\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/rollup/-/rollup-2.3.3.tgz#ecefb4e23b3fd63c6f36f925a98bcfc5436f7fa6\"\n-  integrity sha512-8KsW+0GpYPMV1jKiEuAZhBm2wMcU3gKjCxasXqdXTSYDyuwE4n/aihuPxSBSWpJ82Gv4MBBkSmieFZ+s9nVoBw==\n+\"@bazel/rollup@3.1.0\":\n+  version \"3.1.0\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/rollup/-/rollup-3.1.0.tgz#36346f052b2ce3c1e31e5ebb05ed80464548eb00\"\n+  integrity sha512-lmgPhlR1VsJRsSE83Jlv+WT26Lso0/0FqXknlVuOmvCWFwSUKlriws729fqJZsvV5O2muAgJKuQl/zk+gqGCug==\n \n-\"@bazel/terser@2.3.3\":\n-  version \"2.3.3\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/terser/-/terser-2.3.3.tgz#680cedce0569291534ee832f76cae078948c4a7d\"\n-  integrity sha512-0PytwAoKO4Yqbfgm3HKzkLF7mycj1O10jndg7Sz8Z20yWmU35087ssULFzFy3sXehKSypFeV+PVJ3eO824/0OQ==\n+\"@bazel/terser@3.1.0\":\n+  version \"3.1.0\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/terser/-/terser-3.1.0.tgz#5801e83d4ac648fb1a8824a77a1a1f32c3af0c1e\"\n+  integrity sha512-8oXZwy5G5dbr4zltBzLjfPw4ZARDEysB2E25dCqAo64XJ26ptS+D3/UnE3uZU9KuM/3ka1U+YIpit+f9SqCgTA==\n \n-\"@bazel/typescript@2.3.3\":\n-  version \"2.3.3\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/typescript/-/typescript-2.3.3.tgz#8f238a6d395140cdc6ed6900f0861efb744ca91b\"\n-  integrity sha512-tkkrV1wrpMKj7gDlgloo/24lGmW5btHxzg9xqBZsXVvEfhr3HP9dU296bBxtdS1zZuORCxdIhh7D3iPonQDibg==\n+\"@bazel/typescript@3.1.0\":\n+  version \"3.1.0\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/typescript/-/typescript-3.1.0.tgz#a07999ad7956b8c624604a521e653570bba32025\"\n+  integrity sha512-sEWuvkUGIDeRhjLENHtJyop7wu4UqKN8h/nSgUwc5gkpWXQiT2wGH5jKVxBqODOBHB+IInEMtAjyRmCT+HbSHA==\n   dependencies:\n     protobufjs \"6.8.8\"\n     semver \"5.6.0\""
        }
    ],
    "stats": {
        "total": 88,
        "additions": 45,
        "deletions": 43
    }
}