{
    "author": "josephperrott",
    "message": "refactor(localize): update yargs and typings for yargs (#38470)\n\nUpdating yargs and typings for the updated yargs module.\n\nPR Close #38470",
    "sha": "8373b720f3db0542ce1670a33a70236cb167ce11",
    "files": [
        {
            "sha": "c764abcb0bfaeb60b4dca84dc739ed3a9cb2cdcc",
            "filename": "packages/localize/src/tools/src/extract/main.ts",
            "status": "modified",
            "additions": 20,
            "deletions": 13,
            "changes": 33,
            "blob_url": "https://github.com/angular/angular/blob/8373b720f3db0542ce1670a33a70236cb167ce11/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Fmain.ts",
            "raw_url": "https://github.com/angular/angular/raw/8373b720f3db0542ce1670a33a70236cb167ce11/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Fmain.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Fmain.ts?ref=8373b720f3db0542ce1670a33a70236cb167ce11",
            "patch": "@@ -30,53 +30,60 @@ if (require.main === module) {\n             alias: 'locale',\n             describe: 'The locale of the source being processed',\n             default: 'en',\n+            type: 'string',\n           })\n           .option('r', {\n             alias: 'root',\n             default: '.',\n             describe: 'The root path for other paths provided in these options.\\n' +\n-                'This should either be absolute or relative to the current working directory.'\n+                'This should either be absolute or relative to the current working directory.',\n+            type: 'string',\n           })\n           .option('s', {\n             alias: 'source',\n             required: true,\n             describe:\n                 'A glob pattern indicating what files to search for translations, e.g. `./dist/**/*.js`.\\n' +\n                 'This should be relative to the root path.',\n+            type: 'string',\n           })\n           .option('f', {\n             alias: 'format',\n             required: true,\n             choices: ['xmb', 'xlf', 'xlif', 'xliff', 'xlf2', 'xlif2', 'xliff2', 'json'],\n             describe: 'The format of the translation file.',\n+            type: 'string',\n           })\n           .option('o', {\n             alias: 'outputPath',\n             required: true,\n             describe:\n-                'A path to where the translation file will be written. This should be relative to the root path.'\n+                'A path to where the translation file will be written. This should be relative to the root path.',\n+            type: 'string',\n           })\n           .option('loglevel', {\n             describe: 'The lowest severity logging message that should be output.',\n             choices: ['debug', 'info', 'warn', 'error'],\n+            type: 'string',\n           })\n           .option('useSourceMaps', {\n             type: 'boolean',\n             default: true,\n             describe:\n-                'Whether to generate source information in the output files by following source-map mappings found in the source files'\n+                'Whether to generate source information in the output files by following source-map mappings found in the source files',\n           })\n           .option('useLegacyIds', {\n             type: 'boolean',\n             default: true,\n             describe:\n-                'Whether to use the legacy id format for messages that were extracted from Angular templates.'\n+                'Whether to use the legacy id format for messages that were extracted from Angular templates.',\n           })\n           .option('d', {\n             alias: 'duplicateMessageHandling',\n             describe: 'How to handle messages with the same id but different text.',\n             choices: ['error', 'warning', 'ignore'],\n             default: 'warning',\n+            type: 'string',\n           })\n           .strict()\n           .help()\n@@ -85,22 +92,22 @@ if (require.main === module) {\n   const fs = new NodeJSFileSystem();\n   setFileSystem(fs);\n \n-  const rootPath = options['root'];\n-  const sourceFilePaths = glob.sync(options['source'], {cwd: rootPath, nodir: true});\n-  const logLevel = options['loglevel'] as (keyof typeof LogLevel) | undefined;\n+  const rootPath = options.r;\n+  const sourceFilePaths = glob.sync(options.s, {cwd: rootPath, nodir: true});\n+  const logLevel = options.loglevel as (keyof typeof LogLevel) | undefined;\n   const logger = new ConsoleLogger(logLevel ? LogLevel[logLevel] : LogLevel.warn);\n-  const duplicateMessageHandling: DiagnosticHandlingStrategy = options['d'];\n+  const duplicateMessageHandling = options.d as DiagnosticHandlingStrategy;\n \n \n   extractTranslations({\n     rootPath,\n     sourceFilePaths,\n-    sourceLocale: options['locale'],\n-    format: options['format'],\n-    outputPath: options['outputPath'],\n+    sourceLocale: options.l,\n+    format: options.f,\n+    outputPath: options.o,\n     logger,\n-    useSourceMaps: options['useSourceMaps'],\n-    useLegacyIds: options['useLegacyIds'],\n+    useSourceMaps: options.useSourceMaps,\n+    useLegacyIds: options.useLegacyIds,\n     duplicateMessageHandling,\n   });\n }"
        },
        {
            "sha": "590d00822f726d4b1d0bae02e229aa84daf30fe2",
            "filename": "packages/localize/src/tools/src/translate/main.ts",
            "status": "modified",
            "additions": 16,
            "deletions": 8,
            "changes": 24,
            "blob_url": "https://github.com/angular/angular/blob/8373b720f3db0542ce1670a33a70236cb167ce11/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Fmain.ts",
            "raw_url": "https://github.com/angular/angular/raw/8373b720f3db0542ce1670a33a70236cb167ce11/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Fmain.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Fmain.ts?ref=8373b720f3db0542ce1670a33a70236cb167ce11",
            "patch": "@@ -30,18 +30,21 @@ if (require.main === module) {\n             required: true,\n             describe:\n                 'The root path of the files to translate, either absolute or relative to the current working directory. E.g. `dist/en`.',\n+            type: 'string',\n           })\n           .option('s', {\n             alias: 'source',\n             required: true,\n             describe:\n                 'A glob pattern indicating what files to translate, relative to the `root` path. E.g. `bundles/**/*`.',\n+            type: 'string',\n           })\n \n           .option('l', {\n             alias: 'source-locale',\n             describe:\n                 'The source locale of the application. If this is provided then a copy of the application will be created with no translation but just the `$localize` calls stripped out.',\n+            type: 'string',\n           })\n \n           .option('t', {\n@@ -54,35 +57,40 @@ if (require.main === module) {\n                 'If you want to merge multiple translation files for each locale, then provide the list of files in an array.\\n' +\n                 'Note that the arrays must be in double quotes if you include any whitespace within the array.\\n' +\n                 'E.g. `-t \"[src/locale/messages.en.xlf, src/locale/messages-2.en.xlf]\" [src/locale/messages.fr.xlf,src/locale/messages-2.fr.xlf]`',\n+            type: 'string',\n           })\n \n           .option('target-locales', {\n             array: true,\n             describe:\n                 'A list of target locales for the translation files, which will override any target locale parsed from the translation file.\\n' +\n                 'E.g. \"-t en fr de\".',\n+            type: 'string',\n           })\n \n           .option('o', {\n             alias: 'outputPath',\n             required: true,\n             describe: 'A output path pattern to where the translated files will be written.\\n' +\n                 'The path must be either absolute or relative to the current working directory.\\n' +\n-                'The marker `{{LOCALE}}` will be replaced with the target locale. E.g. `dist/{{LOCALE}}`.'\n+                'The marker `{{LOCALE}}` will be replaced with the target locale. E.g. `dist/{{LOCALE}}`.',\n+            type: 'string',\n           })\n \n           .option('m', {\n             alias: 'missingTranslation',\n             describe: 'How to handle missing translations.',\n             choices: ['error', 'warning', 'ignore'],\n             default: 'warning',\n+            type: 'string',\n           })\n \n           .option('d', {\n             alias: 'duplicateTranslation',\n             describe: 'How to handle duplicate translations.',\n             choices: ['error', 'warning', 'ignore'],\n             default: 'warning',\n+            type: 'string',\n           })\n \n           .strict()\n@@ -92,14 +100,14 @@ if (require.main === module) {\n   const fs = new NodeJSFileSystem();\n   setFileSystem(fs);\n \n-  const sourceRootPath = options['r'];\n-  const sourceFilePaths = glob.sync(options['s'], {cwd: sourceRootPath, nodir: true});\n-  const translationFilePaths: (string|string[])[] = convertArraysFromArgs(options['t']);\n-  const outputPathFn = getOutputPathFn(fs.resolve(options['o']));\n+  const sourceRootPath = options.r;\n+  const sourceFilePaths = glob.sync(options.s, {cwd: sourceRootPath, nodir: true});\n+  const translationFilePaths: (string|string[])[] = convertArraysFromArgs(options.t);\n+  const outputPathFn = getOutputPathFn(fs.resolve(options.o));\n   const diagnostics = new Diagnostics();\n-  const missingTranslation: DiagnosticHandlingStrategy = options['m'];\n-  const duplicateTranslation: DiagnosticHandlingStrategy = options['d'];\n-  const sourceLocale: string|undefined = options['l'];\n+  const missingTranslation = options.m as DiagnosticHandlingStrategy;\n+  const duplicateTranslation = options.d as DiagnosticHandlingStrategy;\n+  const sourceLocale: string|undefined = options.l;\n   const translationFileLocales: string[] = options['target-locales'] || [];\n \n   translateFiles({"
        }
    ],
    "stats": {
        "total": 57,
        "additions": 36,
        "deletions": 21
    }
}