{
    "author": "petebacondarwin",
    "message": "test(compiler): add additional i18n serialization tests (#38484)\n\nThe addiational tests check that ICUs containing interpolations\nare serialized correctly.\n\nPR Close #38484",
    "sha": "be96510ce9feb2a870e5cba212ef865e89c19d30",
    "files": [
        {
            "sha": "328cb7b7f3d3284dd0c4b5dd48720e8113983bb9",
            "filename": "packages/compiler/test/render3/view/i18n_spec.ts",
            "status": "modified",
            "additions": 28,
            "deletions": 2,
            "changes": 30,
            "blob_url": "https://github.com/angular/angular/blob/be96510ce9feb2a870e5cba212ef865e89c19d30/packages%2Fcompiler%2Ftest%2Frender3%2Fview%2Fi18n_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/be96510ce9feb2a870e5cba212ef865e89c19d30/packages%2Fcompiler%2Ftest%2Frender3%2Fview%2Fi18n_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Frender3%2Fview%2Fi18n_spec.ts?ref=be96510ce9feb2a870e5cba212ef865e89c19d30",
            "patch": "@@ -415,7 +415,7 @@ describe('serializeI18nMessageForLocalize', () => {\n   });\n \n \n-  it('should serialize ICU with nested HTML for `$localize()`', () => {\n+  it('should serialize ICU with embedded HTML for `$localize()`', () => {\n     expect(serialize('{age, plural, 10 {<b>ten</b>} other {<div class=\"A\">other</div>}}')).toEqual({\n       messageParts: [\n         '{VAR_PLURAL, plural, 10 {{START_BOLD_TEXT}ten{CLOSE_BOLD_TEXT}} other {{START_TAG_DIV}other{CLOSE_TAG_DIV}}}'\n@@ -424,6 +424,15 @@ describe('serializeI18nMessageForLocalize', () => {\n     });\n   });\n \n+  it('should serialize ICU with embedded interpolation for `$localize()`', () => {\n+    expect(serialize('{age, plural, 10 {<b>ten</b>} other {{{age}} years old}}')).toEqual({\n+      messageParts: [\n+        '{VAR_PLURAL, plural, 10 {{START_BOLD_TEXT}ten{CLOSE_BOLD_TEXT}} other {{INTERPOLATION} years old}}'\n+      ],\n+      placeHolders: []\n+    });\n+  });\n+\n   it('should serialize ICU with nested HTML containing further ICUs for `$localize()`', () => {\n     expect(\n         serialize(\n@@ -433,6 +442,18 @@ describe('serializeI18nMessageForLocalize', () => {\n           placeHolders: ['ICU', 'START_TAG_DIV', 'ICU', 'CLOSE_TAG_DIV']\n         });\n   });\n+\n+  it('should serialize nested ICUs with embedded interpolation for `$localize()`', () => {\n+    expect(\n+        serialize(\n+            '{age, plural, 10 {ten {size, select, 1 {{{ varOne }}} 2 {{{ varTwo }}} other {2+}}} other {other}}'))\n+        .toEqual({\n+          messageParts: [\n+            '{VAR_PLURAL, plural, 10 {ten {VAR_SELECT, select, 1 {{INTERPOLATION}} 2 {{INTERPOLATION_1}} other {2+}}} other {other}}'\n+          ],\n+          placeHolders: []\n+        });\n+  });\n });\n \n describe('serializeIcuNode', () => {\n@@ -447,7 +468,7 @@ describe('serializeIcuNode', () => {\n         .toEqual('{VAR_PLURAL, plural, 10 {ten} other {other}}');\n   });\n \n-  it('should serialize a next ICU', () => {\n+  it('should serialize a nested ICU', () => {\n     expect(serialize(\n                '{age, plural, 10 {ten {size, select, 1 {one} 2 {two} other {2+}}} other {other}}'))\n         .toEqual(\n@@ -459,4 +480,9 @@ describe('serializeIcuNode', () => {\n         .toEqual(\n             '{VAR_PLURAL, plural, 10 {{START_BOLD_TEXT}ten{CLOSE_BOLD_TEXT}} other {{START_TAG_DIV}other{CLOSE_TAG_DIV}}}');\n   });\n+\n+  it('should serialize an ICU with embedded interpolations', () => {\n+    expect(serialize('{age, select, 10 {ten} other {{{age}} years old}}'))\n+        .toEqual('{VAR_SELECT, select, 10 {ten} other {{INTERPOLATION} years old}}');\n+  });\n });"
        }
    ],
    "stats": {
        "total": 30,
        "additions": 28,
        "deletions": 2
    }
}