{
    "author": "devversion",
    "message": "build: update symbol extractor test to work with terser v5 (#43431)\n\nUpdates the symbol extractor test to work with Terser v5 that\ndrops the variable declaration initializer if it is explicitly set\nto `undefined`. We want to capture such identifiers in the bundles\nas otherwise the majority of top-level declarations which are intially\nset to `undefined` would be hidden in size goldens.\n\nPR Close #43431",
    "sha": "c7815216065382373f318892c57ee8f6a4720bf7",
    "files": [
        {
            "sha": "f56b1f5af91825e6bc7a52d942361344e3de037d",
            "filename": "tools/symbol-extractor/symbol_extractor.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/c7815216065382373f318892c57ee8f6a4720bf7/tools%2Fsymbol-extractor%2Fsymbol_extractor.ts",
            "raw_url": "https://github.com/angular/angular/raw/c7815216065382373f318892c57ee8f6a4720bf7/tools%2Fsymbol-extractor%2Fsymbol_extractor.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fsymbol-extractor%2Fsymbol_extractor.ts?ref=c7815216065382373f318892c57ee8f6a4720bf7",
            "patch": "@@ -47,7 +47,10 @@ export class SymbolExtractor {\n           break;\n         case ts.SyntaxKind.VariableDeclaration:\n           const varDecl = child as ts.VariableDeclaration;\n-          if (varDecl.initializer && fnRecurseDepth !== 0) {\n+          // Terser optimizes variable declarations with `undefined` as initializer\n+          // by omitting the initializer completely. We capture such declarations as well.\n+          // https://github.com/terser/terser/blob/86ea74d5c12ae51b64468/CHANGELOG.md#v540.\n+          if (fnRecurseDepth !== 0) {\n             symbols.push({name: stripSuffix(varDecl.name.getText())});\n           }\n           if (fnRecurseDepth == 0 && isRollupExportSymbol(varDecl)) {"
        },
        {
            "sha": "cd2a785061ac2ea4ededf88010d25c45e8dc0580",
            "filename": "tools/symbol-extractor/symbol_extractor_spec/two_symbols_per_var.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/c7815216065382373f318892c57ee8f6a4720bf7/tools%2Fsymbol-extractor%2Fsymbol_extractor_spec%2Ftwo_symbols_per_var.js",
            "raw_url": "https://github.com/angular/angular/raw/c7815216065382373f318892c57ee8f6a4720bf7/tools%2Fsymbol-extractor%2Fsymbol_extractor_spec%2Ftwo_symbols_per_var.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fsymbol-extractor%2Fsymbol_extractor_spec%2Ftwo_symbols_per_var.js?ref=c7815216065382373f318892c57ee8f6a4720bf7",
            "patch": "@@ -21,7 +21,7 @@\n       return window.b;\n     }, B;\n   }();\n-  var ignore_no_initializer;\n+  var no_initializer;\n   // tslint:disable-next-line:no-console\n   console.error(new A().a(), new B().b());\n }();"
        },
        {
            "sha": "58974650b8e7fb15c61a3bfa9c80f29099aa5052",
            "filename": "tools/symbol-extractor/symbol_extractor_spec/two_symbols_per_var.json",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/c7815216065382373f318892c57ee8f6a4720bf7/tools%2Fsymbol-extractor%2Fsymbol_extractor_spec%2Ftwo_symbols_per_var.json",
            "raw_url": "https://github.com/angular/angular/raw/c7815216065382373f318892c57ee8f6a4720bf7/tools%2Fsymbol-extractor%2Fsymbol_extractor_spec%2Ftwo_symbols_per_var.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fsymbol-extractor%2Fsymbol_extractor_spec%2Ftwo_symbols_per_var.json?ref=c7815216065382373f318892c57ee8f6a4720bf7",
            "patch": "@@ -4,5 +4,8 @@\n   },\n   {\n     \"name\": \"B\"\n+  },\n+  {\n+    \"name\": \"no_initializer\"\n   }\n-]\n\\ No newline at end of file\n+]"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 9,
        "deletions": 3
    }
}