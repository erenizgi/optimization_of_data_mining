{
    "author": "AleksanderBodurri",
    "message": "test(devtools): fix some flakey cypress tests\n\nUses `cy.contains` as one command to optimize cypress' retry-ability mechanism\n\nAffected tests are in:\n\n`property-update.e2e.js` and `view-component-metadata.e2e.js`",
    "sha": "34385014b016ca80377d23a5e9dd2c6acfc924ba",
    "files": [
        {
            "sha": "40c14b45ed338003844ae4a4e56b21f998f8eb66",
            "filename": "devtools/cypress/integration/base.e2e.js",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/34385014b016ca80377d23a5e9dd2c6acfc924ba/devtools%2Fcypress%2Fintegration%2Fbase.e2e.js",
            "raw_url": "https://github.com/angular/angular/raw/34385014b016ca80377d23a5e9dd2c6acfc924ba/devtools%2Fcypress%2Fintegration%2Fbase.e2e.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/devtools%2Fcypress%2Fintegration%2Fbase.e2e.js?ref=34385014b016ca80377d23a5e9dd2c6acfc924ba",
            "patch": "@@ -15,15 +15,15 @@ describe('Testing the Todo app Demo', () => {\n   });\n \n   it('should contain the \"Components\" tab', () => {\n-    cy.get('.mat-tab-links').contains('Components');\n+    cy.contains('.mat-tab-links', 'Components');\n   });\n \n   it('should contain the \"Profiler\" tab', () => {\n-    cy.get('.mat-tab-links').contains('Profiler');\n+    cy.contains('.mat-tab-links', 'Profiler');\n   });\n \n   it('should contain \"app-root\" and \"app-todo-demo\" in the component tree', () => {\n-    cy.get('.tree-node').contains('app-root');\n-    cy.get('.tree-node').contains('app-todo-demo');\n+    cy.contains('.tree-node', 'app-root');\n+    cy.contains('.tree-node', 'app-todo-demo');\n   });\n });"
        },
        {
            "sha": "1fcdfdedfdac6dac8c6efc064d5494b489a82042",
            "filename": "devtools/cypress/integration/node-search.e2e.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/34385014b016ca80377d23a5e9dd2c6acfc924ba/devtools%2Fcypress%2Fintegration%2Fnode-search.e2e.js",
            "raw_url": "https://github.com/angular/angular/raw/34385014b016ca80377d23a5e9dd2c6acfc924ba/devtools%2Fcypress%2Fintegration%2Fnode-search.e2e.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/devtools%2Fcypress%2Fintegration%2Fnode-search.e2e.js?ref=34385014b016ca80377d23a5e9dd2c6acfc924ba",
            "patch": "@@ -1,5 +1,5 @@\n function checkSearchedNodesLength(type, length) {\n-  cy.get('.tree-wrapper').find(type).its('length').should('eq', length);\n+  cy.get(`.tree-wrapper:first ${type}`).its('length').should('eq', length);\n }\n \n function inputSearchText(text) {"
        },
        {
            "sha": "b7aef865a84aa3d7a286809dca29aa4f3ed7b4c5",
            "filename": "devtools/cypress/integration/property-update.e2e.js",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/34385014b016ca80377d23a5e9dd2c6acfc924ba/devtools%2Fcypress%2Fintegration%2Fproperty-update.e2e.js",
            "raw_url": "https://github.com/angular/angular/raw/34385014b016ca80377d23a5e9dd2c6acfc924ba/devtools%2Fcypress%2Fintegration%2Fproperty-update.e2e.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/devtools%2Fcypress%2Fintegration%2Fproperty-update.e2e.js?ref=34385014b016ca80377d23a5e9dd2c6acfc924ba",
            "patch": "@@ -18,11 +18,11 @@ describe('change of the state should reflect in property update', () => {\n     cy.get('.explorer-panel:contains(\"app-todo\")').find('ng-property-view mat-tree-node:contains(\"todo\")').click();\n \n     // Verify its value is now completed\n-    cy.get('.explorer-panel:contains(\"app-todo\")')\n-      .find('ng-property-view mat-tree-node:contains(\"completed\")')\n-      .find('ng-property-editor .editor')\n-      .should((el) => {\n-        expect(el.text().trim()).equal('true');\n-      });\n+    cy.contains(\n+      '.explorer-panel:contains(\"app-todo\") ' +\n+      'ng-property-view mat-tree-node:contains(\"completed\") ' +\n+      'ng-property-editor .editor',\n+      'true'\n+    );\n   });\n });"
        },
        {
            "sha": "1900060e4263ad9109d18057fd86a99fbe8d86cb",
            "filename": "devtools/cypress/integration/view-component-metadata.e2e.js",
            "status": "modified",
            "additions": 14,
            "deletions": 68,
            "changes": 82,
            "blob_url": "https://github.com/angular/angular/blob/34385014b016ca80377d23a5e9dd2c6acfc924ba/devtools%2Fcypress%2Fintegration%2Fview-component-metadata.e2e.js",
            "raw_url": "https://github.com/angular/angular/raw/34385014b016ca80377d23a5e9dd2c6acfc924ba/devtools%2Fcypress%2Fintegration%2Fview-component-metadata.e2e.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/devtools%2Fcypress%2Fintegration%2Fview-component-metadata.e2e.js?ref=34385014b016ca80377d23a5e9dd2c6acfc924ba",
            "patch": "@@ -12,95 +12,41 @@ describe('Viewing component metadata', () => {\n     beforeEach(() => prepareHeaderExpansionPanelForAssertions('.tree-node:contains(\"app-todo[TooltipDirective]\")'));\n \n     it('should display view encapsulation', () => {\n-      cy.get('.meta-data-container').find('.mat-button').first().should('have.text', ' View Encapsulation: Emulated');\n+      cy.contains('.meta-data-container .mat-button:first', 'View Encapsulation: Emulated')\n     });\n \n     it('should display change detection strategy', () => {\n-      cy.get('.meta-data-container')\n-        .find('.mat-button')\n-        .last()\n-        .should('have.text', ' Change Detection Strategy: OnPush');\n+      cy.contains('.meta-data-container .mat-button:last', 'Change Detection Strategy: OnPush')\n     });\n   });\n \n   describe('viewing DemoAppComponent', () => {\n     beforeEach(() => prepareHeaderExpansionPanelForAssertions('.tree-node:contains(\"app-demo-component\")'));\n \n     it('should display view encapsulation', () => {\n-      cy.get('.meta-data-container').find('.mat-button').first().should('have.text', ' View Encapsulation: None');\n+      cy.contains('.meta-data-container .mat-button:first', 'View Encapsulation: None')\n     });\n \n     it('should display change detection strategy', () => {\n-      cy.get('.meta-data-container')\n-        .find('.mat-button')\n-        .last()\n-        .should('have.text', ' Change Detection Strategy: Default');\n+      cy.contains('.meta-data-container .mat-button:last', 'Change Detection Strategy: Default')\n     });\n \n     it('should display correct set of inputs', () => {\n-      cy.get('mat-expansion-panel')\n-        .eq(1)\n-        .find('mat-expansion-panel-header')\n-        .first()\n-        .should('have.text', ' @Inputs open_in_new');\n-\n-      cy.get('mat-expansion-panel')\n-        .eq(1)\n-        .find('mat-tree-node')\n-        .eq(0)\n-        .find('span')\n-        .eq(0)\n-        .should('have.text', ' inputOne ');\n-\n-      cy.get('mat-expansion-panel')\n-        .eq(1)\n-        .find('mat-tree-node')\n-        .eq(1)\n-        .find('span')\n-        .eq(0)\n-        .should('have.text', ' inputTwo ');\n+      cy.contains('.cy-inputs', '@Inputs');\n+      cy.contains('.cy-inputs mat-tree-node:first span:first', 'inputOne');\n+      cy.contains('.cy-inputs mat-tree-node:last span:first', 'inputTwo');\n     });\n-\n+    \n     it('should display correct set of outputs', () => {\n-      cy.get('mat-expansion-panel')\n-        .eq(2)\n-        .find('mat-expansion-panel-header')\n-        .first()\n-        .should('have.text', ' @Outputs open_in_new');\n-\n-      cy.get('mat-expansion-panel')\n-        .eq(2)\n-        .find('mat-tree-node')\n-        .eq(0)\n-        .find('span')\n-        .eq(0)\n-        .should('have.text', ' outputOne ');\n-\n-      cy.get('mat-expansion-panel')\n-        .eq(2)\n-        .find('mat-tree-node')\n-        .eq(1)\n-        .find('span')\n-        .eq(0)\n-        .should('have.text', ' outputTwo ');\n+      cy.contains('.cy-outputs', '@Outputs');\n+      cy.contains('.cy-outputs mat-tree-node:first span:first', 'outputOne');\n+      cy.contains('.cy-outputs mat-tree-node:last span:first', 'outputTwo');\n     });\n \n     it('should display correct set of properties', () => {\n-      cy.get('mat-expansion-panel')\n-        .eq(3)\n-        .find('mat-expansion-panel-header')\n-        .first()\n-        .should('have.text', ' Properties open_in_new');\n-\n-      cy.get('mat-expansion-panel')\n-        .eq(3)\n-        .find('mat-tree-node')\n-        .eq(0)\n-        .find('span')\n-        .eq(0)\n-        .should('have.text', ' elementRef ');\n-\n-      cy.get('mat-expansion-panel').eq(3).find('mat-tree-node').eq(1).find('span').eq(0).should('have.text', ' zippy ');\n+      cy.contains('.cy-properties', 'Properties');\n+      cy.contains('.cy-properties mat-tree-node:first span:first', 'elementRef');\n+      cy.contains('.cy-properties mat-tree-node:last span:first', 'zippy');\n     });\n   });\n });"
        },
        {
            "sha": "2e32ffa6b57145b89bbf21be29f64f937b06b55f",
            "filename": "devtools/projects/ng-devtools/src/lib/devtools-tabs/directive-explorer/property-tab/property-view/property-view-body.component.html",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/34385014b016ca80377d23a5e9dd2c6acfc924ba/devtools%2Fprojects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdirective-explorer%2Fproperty-tab%2Fproperty-view%2Fproperty-view-body.component.html",
            "raw_url": "https://github.com/angular/angular/raw/34385014b016ca80377d23a5e9dd2c6acfc924ba/devtools%2Fprojects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdirective-explorer%2Fproperty-tab%2Fproperty-view%2Fproperty-view-body.component.html",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/devtools%2Fprojects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdirective-explorer%2Fproperty-tab%2Fproperty-view%2Fproperty-view-body.component.html?ref=34385014b016ca80377d23a5e9dd2c6acfc924ba",
            "patch": "@@ -1,6 +1,6 @@\n <mat-accordion cdkDropList (cdkDropListDropped)=\"drop($event)\" *ngIf=\"controlsLoaded\" [multi]=\"true\">\n   <div class=\"mat-accordion-content\" *ngFor=\"let index of categoryOrder\" cdkDrag>\n-    <mat-expansion-panel *ngIf=\"!panels[index].hidden\" [expanded]=\"true\">\n+    <mat-expansion-panel [class]=\"panels[index].class\" *ngIf=\"!panels[index].hidden\" [expanded]=\"true\">\n       <mat-expansion-panel-header collapsedHeight=\"25px\" expandedHeight=\"25px\">\n         <mat-panel-title>\n           {{ panels[index].title }}"
        },
        {
            "sha": "f7d4e9b095d635250c8f2baef5dc30e248e889ed",
            "filename": "devtools/projects/ng-devtools/src/lib/devtools-tabs/directive-explorer/property-tab/property-view/property-view-body.component.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/34385014b016ca80377d23a5e9dd2c6acfc924ba/devtools%2Fprojects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdirective-explorer%2Fproperty-tab%2Fproperty-view%2Fproperty-view-body.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/34385014b016ca80377d23a5e9dd2c6acfc924ba/devtools%2Fprojects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdirective-explorer%2Fproperty-tab%2Fproperty-view%2Fproperty-view-body.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/devtools%2Fprojects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdirective-explorer%2Fproperty-tab%2Fproperty-view%2Fproperty-view-body.component.ts?ref=34385014b016ca80377d23a5e9dd2c6acfc924ba",
            "patch": "@@ -19,25 +19,28 @@ export class PropertyViewBodyComponent {\n \n   categoryOrder = [0, 1, 2];\n \n-  get panels(): { title: string; hidden: boolean; controls: DirectiveTreeData; documentation: string }[] {\n+  get panels(): { title: string; hidden: boolean; controls: DirectiveTreeData; documentation: string, class: string }[] {\n     return [\n       {\n         title: '@Inputs',\n         hidden: this.directiveInputControls.dataSource.data.length === 0,\n         controls: this.directiveInputControls,\n         documentation: 'https://angular.io/api/core/Input',\n+        class: 'cy-inputs'\n       },\n       {\n         title: '@Outputs',\n         hidden: this.directiveOutputControls.dataSource.data.length === 0,\n         controls: this.directiveOutputControls,\n         documentation: 'https://angular.io/api/core/Output',\n+        class: 'cy-outputs'\n       },\n       {\n         title: 'Properties',\n         hidden: this.directiveStateControls.dataSource.data.length === 0,\n         controls: this.directiveStateControls,\n         documentation: 'https://angular.io/guide/property-binding',\n+        class: 'cy-properties'\n       },\n     ];\n   }"
        }
    ],
    "stats": {
        "total": 111,
        "additions": 30,
        "deletions": 81
    }
}