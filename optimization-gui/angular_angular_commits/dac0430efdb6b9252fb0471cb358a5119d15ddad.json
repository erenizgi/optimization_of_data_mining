{
    "author": "JoostK",
    "message": "refactor(compiler): store modifiers in a bitmask instead of an array (#44731)\n\nThis commit slightly reduces memory usage of output AST by storing type\nand statement modifiers as a bitmask instead of using an array.\n\nPR Close #44731",
    "sha": "dac0430efdb6b9252fb0471cb358a5119d15ddad",
    "files": [
        {
            "sha": "84b3164f952b70c4aa6e7e789e02d573da0c0b2a",
            "filename": "packages/compiler-cli/ngcc/test/rendering/commonjs_rendering_formatter_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Fcommonjs_rendering_formatter_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Fcommonjs_rendering_formatter_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Fcommonjs_rendering_formatter_spec.ts?ref=dac0430efdb6b9252fb0471cb358a5119d15ddad",
            "patch": "@@ -469,9 +469,9 @@ SOME DEFINITION TEXT\n       it('should transpile code to ES5', () => {\n         const {renderer, sourceFile, importManager} = setup(PROGRAM);\n \n-        const stmt1 = new DeclareVarStmt('foo', new LiteralExpr(42), null, [StmtModifier.Static]);\n+        const stmt1 = new DeclareVarStmt('foo', new LiteralExpr(42), null, StmtModifier.Static);\n         const stmt2 = new DeclareVarStmt('bar', new LiteralExpr(true));\n-        const stmt3 = new DeclareVarStmt('baz', new LiteralExpr('qux'), undefined, []);\n+        const stmt3 = new DeclareVarStmt('baz', new LiteralExpr('qux'));\n \n         expect(renderer.printStatement(stmt1, sourceFile, importManager)).toBe('var foo = 42;');\n         expect(renderer.printStatement(stmt2, sourceFile, importManager)).toBe('var bar = true;');"
        },
        {
            "sha": "cb75b83ba6afddca00b1c1b786dc14b805a0499b",
            "filename": "packages/compiler-cli/ngcc/test/rendering/esm5_rendering_formatter_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Fesm5_rendering_formatter_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Fesm5_rendering_formatter_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Fesm5_rendering_formatter_spec.ts?ref=dac0430efdb6b9252fb0471cb358a5119d15ddad",
            "patch": "@@ -500,9 +500,9 @@ SOME DEFINITION TEXT\n       it('should transpile code to ES5', () => {\n         const {renderer, sourceFile, importManager} = setup(PROGRAM);\n \n-        const stmt1 = new DeclareVarStmt('foo', new LiteralExpr(42), null, [StmtModifier.Static]);\n+        const stmt1 = new DeclareVarStmt('foo', new LiteralExpr(42), null, StmtModifier.Static);\n         const stmt2 = new DeclareVarStmt('bar', new LiteralExpr(true));\n-        const stmt3 = new DeclareVarStmt('baz', new LiteralExpr('qux'), undefined, []);\n+        const stmt3 = new DeclareVarStmt('baz', new LiteralExpr('qux'));\n \n         expect(renderer.printStatement(stmt1, sourceFile, importManager)).toBe('var foo = 42;');\n         expect(renderer.printStatement(stmt2, sourceFile, importManager)).toBe('var bar = true;');"
        },
        {
            "sha": "98e8ddf7e10cbc70f8c862f6ee959fede628f563",
            "filename": "packages/compiler-cli/ngcc/test/rendering/esm_rendering_formatter_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Fesm_rendering_formatter_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Fesm_rendering_formatter_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Fesm_rendering_formatter_spec.ts?ref=dac0430efdb6b9252fb0471cb358a5119d15ddad",
            "patch": "@@ -628,9 +628,9 @@ export { D };\n         it('should transpile code to ES2015', () => {\n           const {renderer, sourceFile, importManager} = setup([PROGRAM]);\n \n-          const stmt1 = new DeclareVarStmt('foo', new LiteralExpr(42), null, [StmtModifier.Final]);\n+          const stmt1 = new DeclareVarStmt('foo', new LiteralExpr(42), null, StmtModifier.Final);\n           const stmt2 = new DeclareVarStmt('bar', new LiteralExpr(true));\n-          const stmt3 = new DeclareVarStmt('baz', new LiteralExpr('qux'), undefined, []);\n+          const stmt3 = new DeclareVarStmt('baz', new LiteralExpr('qux'));\n \n           expect(renderer.printStatement(stmt1, sourceFile, importManager)).toBe('const foo = 42;');\n           expect(renderer.printStatement(stmt2, sourceFile, importManager)).toBe('let bar = true;');"
        },
        {
            "sha": "e0bbb32fcb12facf44105f23fcddcd97f0fa3947",
            "filename": "packages/compiler-cli/ngcc/test/rendering/umd_rendering_formatter_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Fumd_rendering_formatter_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Fumd_rendering_formatter_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Fumd_rendering_formatter_spec.ts?ref=dac0430efdb6b9252fb0471cb358a5119d15ddad",
            "patch": "@@ -737,10 +737,9 @@ SOME DEFINITION TEXT\n           it('should transpile code to ES5', () => {\n             const {renderer, sourceFile, importManager} = setup(PROGRAM);\n \n-            const stmt1 =\n-                new DeclareVarStmt('foo', new LiteralExpr(42), null, [StmtModifier.Static]);\n+            const stmt1 = new DeclareVarStmt('foo', new LiteralExpr(42), null, StmtModifier.Static);\n             const stmt2 = new DeclareVarStmt('bar', new LiteralExpr(true));\n-            const stmt3 = new DeclareVarStmt('baz', new LiteralExpr('qux'), undefined, []);\n+            const stmt3 = new DeclareVarStmt('baz', new LiteralExpr('qux'));\n \n             expect(renderer.printStatement(stmt1, sourceFile, importManager)).toBe('var foo = 42;');\n             expect(renderer.printStatement(stmt2, sourceFile, importManager))"
        },
        {
            "sha": "3c3815280afa983ea827a17f708bac3dfcbb9a5c",
            "filename": "packages/compiler-cli/src/ngtsc/typecheck/src/environment.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Fsrc%2Fenvironment.ts",
            "raw_url": "https://github.com/angular/angular/raw/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Fsrc%2Fenvironment.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Fsrc%2Fenvironment.ts?ref=dac0430efdb6b9252fb0471cb358a5119d15ddad",
            "patch": "@@ -6,7 +6,7 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import {ExpressionType, ExternalExpr, Type, WrappedNodeExpr} from '@angular/compiler';\n+import {ExpressionType, ExternalExpr, Type, TypeModifier} from '@angular/compiler';\n import ts from 'typescript';\n \n import {assertSuccessfulReferenceEmit, ImportFlags, Reference, ReferenceEmitKind, ReferenceEmitter} from '../../imports';\n@@ -163,7 +163,8 @@ export class Environment implements ReferenceEmitEnvironment {\n   referenceExternalType(moduleName: string, name: string, typeParams?: Type[]): ts.TypeNode {\n     const external = new ExternalExpr({moduleName, name});\n     return translateType(\n-        new ExpressionType(external, [/* modifiers */], typeParams), this.importManager);\n+        new ExpressionType(external, /* modifiers */ TypeModifier.None, typeParams),\n+        this.importManager);\n   }\n \n   getPreludeStatements(): ts.Statement[] {"
        },
        {
            "sha": "f9f0774c7edf0e9de81ea229734eae5251238c53",
            "filename": "packages/compiler/src/compiler.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler%2Fsrc%2Fcompiler.ts",
            "raw_url": "https://github.com/angular/angular/raw/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler%2Fsrc%2Fcompiler.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fcompiler.ts?ref=dac0430efdb6b9252fb0471cb358a5119d15ddad",
            "patch": "@@ -53,7 +53,7 @@ export * from './ml_parser/tags';\n export {ParseTreeResult, TreeError} from './ml_parser/parser';\n export {LexerRange} from './ml_parser/lexer';\n export * from './ml_parser/xml_parser';\n-export {ArrayType, DYNAMIC_TYPE, BinaryOperator, BinaryOperatorExpr, BuiltinType, BuiltinTypeName, CommaExpr, ConditionalExpr, DeclareFunctionStmt, DeclareVarStmt, Expression, ExpressionStatement, ExpressionType, ExpressionVisitor, ExternalExpr, ExternalReference, literalMap, FunctionExpr, IfStmt, InstantiateExpr, InvokeFunctionExpr, LiteralArrayExpr, LiteralExpr, LiteralMapExpr, MapType, NotExpr, NONE_TYPE, ReadKeyExpr, ReadPropExpr, ReadVarExpr, ReturnStatement, StatementVisitor, TaggedTemplateExpr, TemplateLiteral, TemplateLiteralElement, Type, TypeVisitor, WrappedNodeExpr, WriteKeyExpr, WritePropExpr, WriteVarExpr, StmtModifier, Statement, STRING_TYPE, TypeofExpr, jsDocComment, leadingComment, LeadingComment, JSDocComment, UnaryOperator, UnaryOperatorExpr, LocalizedString} from './output/output_ast';\n+export {ArrayType, DYNAMIC_TYPE, BinaryOperator, BinaryOperatorExpr, BuiltinType, BuiltinTypeName, CommaExpr, ConditionalExpr, DeclareFunctionStmt, DeclareVarStmt, Expression, ExpressionStatement, ExpressionType, ExpressionVisitor, ExternalExpr, ExternalReference, literalMap, FunctionExpr, IfStmt, InstantiateExpr, InvokeFunctionExpr, LiteralArrayExpr, LiteralExpr, LiteralMapExpr, MapType, NotExpr, NONE_TYPE, ReadKeyExpr, ReadPropExpr, ReadVarExpr, ReturnStatement, StatementVisitor, TaggedTemplateExpr, TemplateLiteral, TemplateLiteralElement, Type, TypeModifier, TypeVisitor, WrappedNodeExpr, WriteKeyExpr, WritePropExpr, WriteVarExpr, StmtModifier, Statement, STRING_TYPE, TypeofExpr, jsDocComment, leadingComment, LeadingComment, JSDocComment, UnaryOperator, UnaryOperatorExpr, LocalizedString} from './output/output_ast';\n export {EmitterVisitorContext} from './output/abstract_emitter';\n export {JitEvaluator} from './output/output_jit';\n export * from './parse_util';"
        },
        {
            "sha": "b118500ad873655b3f82a6c414a0cd729bdaa12d",
            "filename": "packages/compiler/src/constant_pool.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler%2Fsrc%2Fconstant_pool.ts",
            "raw_url": "https://github.com/angular/angular/raw/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler%2Fsrc%2Fconstant_pool.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fconstant_pool.ts?ref=dac0430efdb6b9252fb0471cb358a5119d15ddad",
            "patch": "@@ -142,7 +142,7 @@ export class ConstantPool {\n         usage = o.variable(name);\n       }\n \n-      this.statements.push(definition.toDeclStmt(o.INFERRED_TYPE, [o.StmtModifier.Final]));\n+      this.statements.push(definition.toDeclStmt(o.INFERRED_TYPE, o.StmtModifier.Final));\n       fixup.fixup(usage);\n     }\n \n@@ -187,10 +187,9 @@ export class ConstantPool {\n       const pureFunctionDeclaration =\n           o.fn(parameters, [new o.ReturnStatement(resultMap(resultExpressions))], o.INFERRED_TYPE);\n       const name = this.freshName();\n-      this.statements.push(\n-          o.variable(name).set(pureFunctionDeclaration).toDeclStmt(o.INFERRED_TYPE, [\n-            o.StmtModifier.Final\n-          ]));\n+      this.statements.push(o.variable(name)\n+                               .set(pureFunctionDeclaration)\n+                               .toDeclStmt(o.INFERRED_TYPE, o.StmtModifier.Final));\n       literalFactory = o.variable(name);\n       this.literalFactories.set(key, literalFactory);\n     }"
        },
        {
            "sha": "cd9989fe37ffb53da0311b58e8899f4ec09e0f22",
            "filename": "packages/compiler/src/jit_compiler_facade.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler%2Fsrc%2Fjit_compiler_facade.ts",
            "raw_url": "https://github.com/angular/angular/raw/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler%2Fsrc%2Fjit_compiler_facade.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fjit_compiler_facade.ts?ref=dac0430efdb6b9252fb0471cb358a5119d15ddad",
            "patch": "@@ -271,7 +271,7 @@ export class CompilerFacadeImpl implements CompilerFacade {\n     // declaration of $def which is set to the expression being compiled.\n     const statements: Statement[] = [\n       ...preStatements,\n-      new DeclareVarStmt('$def', def, undefined, [StmtModifier.Exported]),\n+      new DeclareVarStmt('$def', def, undefined, StmtModifier.Exported),\n     ];\n \n     const res = this.jitEvaluator.evaluateStatements("
        },
        {
            "sha": "40bc7b83483144c0544bab2ad9bf6aba02705ce0",
            "filename": "packages/compiler/src/output/output_ast.ts",
            "status": "modified",
            "additions": 27,
            "deletions": 25,
            "changes": 52,
            "blob_url": "https://github.com/angular/angular/blob/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler%2Fsrc%2Foutput%2Foutput_ast.ts",
            "raw_url": "https://github.com/angular/angular/raw/dac0430efdb6b9252fb0471cb358a5119d15ddad/packages%2Fcompiler%2Fsrc%2Foutput%2Foutput_ast.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Foutput%2Foutput_ast.ts?ref=dac0430efdb6b9252fb0471cb358a5119d15ddad",
            "patch": "@@ -13,15 +13,16 @@ import {I18nMeta} from '../render3/view/i18n/meta';\n \n //// Types\n export enum TypeModifier {\n-  Const\n+  None = 0,\n+  Const = 1 << 0,\n }\n \n export abstract class Type {\n-  constructor(public modifiers: TypeModifier[] = []) {}\n+  constructor(public modifiers: TypeModifier = TypeModifier.None) {}\n   abstract visitType(visitor: TypeVisitor, context: any): any;\n \n   hasModifier(modifier: TypeModifier): boolean {\n-    return this.modifiers.indexOf(modifier) !== -1;\n+    return (this.modifiers & modifier) !== 0;\n   }\n }\n \n@@ -37,7 +38,7 @@ export enum BuiltinTypeName {\n }\n \n export class BuiltinType extends Type {\n-  constructor(public name: BuiltinTypeName, modifiers?: TypeModifier[]) {\n+  constructor(public name: BuiltinTypeName, modifiers?: TypeModifier) {\n     super(modifiers);\n   }\n   override visitType(visitor: TypeVisitor, context: any): any {\n@@ -47,7 +48,7 @@ export class BuiltinType extends Type {\n \n export class ExpressionType extends Type {\n   constructor(\n-      public value: Expression, modifiers?: TypeModifier[], public typeParams: Type[]|null = null) {\n+      public value: Expression, modifiers?: TypeModifier, public typeParams: Type[]|null = null) {\n     super(modifiers);\n   }\n   override visitType(visitor: TypeVisitor, context: any): any {\n@@ -57,7 +58,7 @@ export class ExpressionType extends Type {\n \n \n export class ArrayType extends Type {\n-  constructor(public of: Type, modifiers?: TypeModifier[]) {\n+  constructor(public of: Type, modifiers?: TypeModifier) {\n     super(modifiers);\n   }\n   override visitType(visitor: TypeVisitor, context: any): any {\n@@ -68,7 +69,7 @@ export class ArrayType extends Type {\n \n export class MapType extends Type {\n   public valueType: Type|null;\n-  constructor(valueType: Type|null|undefined, modifiers?: TypeModifier[]) {\n+  constructor(valueType: Type|null|undefined, modifiers?: TypeModifier) {\n     super(modifiers);\n     this.valueType = valueType || null;\n   }\n@@ -335,12 +336,12 @@ export class WriteVarExpr extends Expression {\n     return visitor.visitWriteVarExpr(this, context);\n   }\n \n-  toDeclStmt(type?: Type|null, modifiers?: StmtModifier[]): DeclareVarStmt {\n+  toDeclStmt(type?: Type|null, modifiers?: StmtModifier): DeclareVarStmt {\n     return new DeclareVarStmt(this.name, this.value, type, modifiers, this.sourceSpan);\n   }\n \n   toConstDecl(): DeclareVarStmt {\n-    return this.toDeclStmt(INFERRED_TYPE, [StmtModifier.Final]);\n+    return this.toDeclStmt(INFERRED_TYPE, StmtModifier.Final);\n   }\n }\n \n@@ -748,7 +749,7 @@ export class FunctionExpr extends Expression {\n     return visitor.visitFunctionExpr(this, context);\n   }\n \n-  toDeclStmt(name: string, modifiers?: StmtModifier[]): DeclareFunctionStmt {\n+  toDeclStmt(name: string, modifiers?: StmtModifier): DeclareFunctionStmt {\n     return new DeclareFunctionStmt(\n         name, this.params, this.statements, this.type, modifiers, this.sourceSpan);\n   }\n@@ -950,10 +951,11 @@ export const TYPED_NULL_EXPR = new LiteralExpr(null, INFERRED_TYPE, null);\n \n //// Statements\n export enum StmtModifier {\n-  Final,\n-  Private,\n-  Exported,\n-  Static,\n+  None = 0,\n+  Final = 1 << 0,\n+  Private = 1 << 1,\n+  Exported = 1 << 2,\n+  Static = 1 << 3,\n }\n \n export class LeadingComment {\n@@ -973,8 +975,8 @@ export class JSDocComment extends LeadingComment {\n \n export abstract class Statement {\n   constructor(\n-      public modifiers: StmtModifier[] = [], public sourceSpan: ParseSourceSpan|null = null,\n-      public leadingComments?: LeadingComment[]) {}\n+      public modifiers: StmtModifier = StmtModifier.None,\n+      public sourceSpan: ParseSourceSpan|null = null, public leadingComments?: LeadingComment[]) {}\n   /**\n    * Calculates whether this statement produces the same value as the given statement.\n    * Note: We don't check Types nor ParseSourceSpans nor function arguments.\n@@ -984,7 +986,7 @@ export abstract class Statement {\n   abstract visitStatement(visitor: StatementVisitor, context: any): any;\n \n   hasModifier(modifier: StmtModifier): boolean {\n-    return this.modifiers.indexOf(modifier) !== -1;\n+    return (this.modifiers & modifier) !== 0;\n   }\n \n   addLeadingComment(leadingComment: LeadingComment): void {\n@@ -997,7 +999,7 @@ export abstract class Statement {\n export class DeclareVarStmt extends Statement {\n   public type: Type|null;\n   constructor(\n-      public name: string, public value?: Expression, type?: Type|null, modifiers?: StmtModifier[],\n+      public name: string, public value?: Expression, type?: Type|null, modifiers?: StmtModifier,\n       sourceSpan?: ParseSourceSpan|null, leadingComments?: LeadingComment[]) {\n     super(modifiers, sourceSpan, leadingComments);\n     this.type = type || (value && value.type) || null;\n@@ -1015,7 +1017,7 @@ export class DeclareFunctionStmt extends Statement {\n   public type: Type|null;\n   constructor(\n       public name: string, public params: FnParam[], public statements: Statement[],\n-      type?: Type|null, modifiers?: StmtModifier[], sourceSpan?: ParseSourceSpan|null,\n+      type?: Type|null, modifiers?: StmtModifier, sourceSpan?: ParseSourceSpan|null,\n       leadingComments?: LeadingComment[]) {\n     super(modifiers, sourceSpan, leadingComments);\n     this.type = type || null;\n@@ -1033,7 +1035,7 @@ export class ExpressionStatement extends Statement {\n   constructor(\n       public expr: Expression, sourceSpan?: ParseSourceSpan|null,\n       leadingComments?: LeadingComment[]) {\n-    super([], sourceSpan, leadingComments);\n+    super(StmtModifier.None, sourceSpan, leadingComments);\n   }\n   override isEquivalent(stmt: Statement): boolean {\n     return stmt instanceof ExpressionStatement && this.expr.isEquivalent(stmt.expr);\n@@ -1048,7 +1050,7 @@ export class ReturnStatement extends Statement {\n   constructor(\n       public value: Expression, sourceSpan: ParseSourceSpan|null = null,\n       leadingComments?: LeadingComment[]) {\n-    super([], sourceSpan, leadingComments);\n+    super(StmtModifier.None, sourceSpan, leadingComments);\n   }\n   override isEquivalent(stmt: Statement): boolean {\n     return stmt instanceof ReturnStatement && this.value.isEquivalent(stmt.value);\n@@ -1063,7 +1065,7 @@ export class IfStmt extends Statement {\n       public condition: Expression, public trueCase: Statement[],\n       public falseCase: Statement[] = [], sourceSpan?: ParseSourceSpan|null,\n       leadingComments?: LeadingComment[]) {\n-    super([], sourceSpan, leadingComments);\n+    super(StmtModifier.None, sourceSpan, leadingComments);\n   }\n   override isEquivalent(stmt: Statement): boolean {\n     return stmt instanceof IfStmt && this.condition.isEquivalent(stmt.condition) &&\n@@ -1264,13 +1266,13 @@ export function importExpr(\n }\n \n export function importType(\n-    id: ExternalReference, typeParams?: Type[]|null,\n-    typeModifiers?: TypeModifier[]): ExpressionType|null {\n+    id: ExternalReference, typeParams?: Type[]|null, typeModifiers?: TypeModifier): ExpressionType|\n+    null {\n   return id != null ? expressionType(importExpr(id, typeParams, null), typeModifiers) : null;\n }\n \n export function expressionType(\n-    expr: Expression, typeModifiers?: TypeModifier[], typeParams?: Type[]|null): ExpressionType {\n+    expr: Expression, typeModifiers?: TypeModifier, typeParams?: Type[]|null): ExpressionType {\n   return new ExpressionType(expr, typeModifiers, typeParams);\n }\n "
        }
    ],
    "stats": {
        "total": 87,
        "additions": 44,
        "deletions": 43
    }
}