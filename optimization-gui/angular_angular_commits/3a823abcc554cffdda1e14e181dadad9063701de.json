{
    "author": "alan-agius4",
    "message": "refactor(compiler): remove dependency on fs-extra (#41445)\n\nCurrently, fs-extra is used to delete a directory recursively, but this is already available in native Node.JS. Hence, making this dependency redundant.\n\nSee: https://nodejs.org/docs/latest-v12.x/api/fs.html\n\nPR Close #41445",
    "sha": "3a823abcc554cffdda1e14e181dadad9063701de",
    "files": [
        {
            "sha": "c62b1d95aefdcc918382780e74f1f8da1da03419",
            "filename": "package.json",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/3a823abcc554cffdda1e14e181dadad9063701de/package.json",
            "raw_url": "https://github.com/angular/angular/raw/3a823abcc554cffdda1e14e181dadad9063701de/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=3a823abcc554cffdda1e14e181dadad9063701de",
            "patch": "@@ -84,7 +84,6 @@\n     \"@types/convert-source-map\": \"^1.5.1\",\n     \"@types/diff\": \"^3.5.1\",\n     \"@types/events\": \"3.0.0\",\n-    \"@types/fs-extra\": \"4.0.2\",\n     \"@types/hammerjs\": \"2.0.35\",\n     \"@types/inquirer\": \"^7.3.0\",\n     \"@types/jasmine\": \"3.5.10\",\n@@ -121,7 +120,6 @@\n     \"dependency-graph\": \"^0.7.2\",\n     \"diff\": \"^3.5.0\",\n     \"domino\": \"2.1.2\",\n-    \"fs-extra\": \"4.0.2\",\n     \"google-closure-compiler\": \"20200517.0.0\",\n     \"hammerjs\": \"2.0.8\",\n     \"http-server\": \"^0.12.3\","
        },
        {
            "sha": "501d2cae2d206903329b34f2fac55deb9047ee10",
            "filename": "packages/compiler-cli/BUILD.bazel",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/3a823abcc554cffdda1e14e181dadad9063701de/packages%2Fcompiler-cli%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/3a823abcc554cffdda1e14e181dadad9063701de/packages%2Fcompiler-cli%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2FBUILD.bazel?ref=3a823abcc554cffdda1e14e181dadad9063701de",
            "patch": "@@ -41,7 +41,6 @@ ts_library(\n         \"@npm//@bazel/typescript\",\n         \"@npm//@types/node\",\n         \"@npm//chokidar\",\n-        \"@npm//fs-extra\",\n         \"@npm//minimist\",\n         \"@npm//reflect-metadata\",\n         \"@npm//tsickle\","
        },
        {
            "sha": "6738affeb21aef43a689035431084b3e75daaf19",
            "filename": "packages/compiler-cli/integrationtest/BUILD.bazel",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/3a823abcc554cffdda1e14e181dadad9063701de/packages%2Fcompiler-cli%2Fintegrationtest%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/3a823abcc554cffdda1e14e181dadad9063701de/packages%2Fcompiler-cli%2Fintegrationtest%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fintegrationtest%2FBUILD.bazel?ref=3a823abcc554cffdda1e14e181dadad9063701de",
            "patch": "@@ -31,7 +31,6 @@ nodejs_test(\n         \"@nodejs//:node\",\n         \"@npm//domino\",\n         \"@npm//chokidar\",\n-        \"@npm//fs-extra\",\n         \"@npm//source-map-support\",\n         \"@npm//shelljs\",\n         \"@npm//typescript\","
        },
        {
            "sha": "c3dbb25c0fafc94f19f31a9df53c672b5c655ca0",
            "filename": "packages/compiler-cli/integrationtest/test_helpers.js",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/3a823abcc554cffdda1e14e181dadad9063701de/packages%2Fcompiler-cli%2Fintegrationtest%2Ftest_helpers.js",
            "raw_url": "https://github.com/angular/angular/raw/3a823abcc554cffdda1e14e181dadad9063701de/packages%2Fcompiler-cli%2Fintegrationtest%2Ftest_helpers.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fintegrationtest%2Ftest_helpers.js?ref=3a823abcc554cffdda1e14e181dadad9063701de",
            "patch": "@@ -46,7 +46,6 @@ const requiredNodeModules = {\n   'tslib': resolveNpmTreeArtifact('npm/node_modules/tslib'),\n   'domino': resolveNpmTreeArtifact('npm/node_modules/domino'),\n   'xhr2': resolveNpmTreeArtifact('npm/node_modules/xhr2'),\n-  'fs-extra': resolveNpmTreeArtifact('npm/node_modules/fs-extra'),\n \n   // Fine grained dependencies which are used by the integration test Angular modules, and\n   // need to be symlinked so that they can be resolved by NodeJS or NGC."
        },
        {
            "sha": "93d936c6d685b5fd8d56244eafbe56731759fe2f",
            "filename": "packages/compiler-cli/package.json",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/3a823abcc554cffdda1e14e181dadad9063701de/packages%2Fcompiler-cli%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/3a823abcc554cffdda1e14e181dadad9063701de/packages%2Fcompiler-cli%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fpackage.json?ref=3a823abcc554cffdda1e14e181dadad9063701de",
            "patch": "@@ -19,7 +19,6 @@\n     \"chokidar\": \"^3.0.0\",\n     \"convert-source-map\": \"^1.5.1\",\n     \"dependency-graph\": \"^0.7.2\",\n-    \"fs-extra\": \"4.0.2\",\n     \"magic-string\": \"^0.25.0\",\n     \"semver\": \"^6.3.0\",\n     \"source-map\": \"^0.6.1\","
        },
        {
            "sha": "1dc56c80e760775a459d36af5862db15a151efc8",
            "filename": "packages/compiler-cli/src/ngtsc/file_system/BUILD.bazel",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/3a823abcc554cffdda1e14e181dadad9063701de/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ffile_system%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/3a823abcc554cffdda1e14e181dadad9063701de/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ffile_system%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ffile_system%2FBUILD.bazel?ref=3a823abcc554cffdda1e14e181dadad9063701de",
            "patch": "@@ -8,9 +8,7 @@ ts_library(\n         \"src/**/*.ts\",\n     ]),\n     deps = [\n-        \"@npm//@types/fs-extra\",\n         \"@npm//@types/node\",\n-        \"@npm//fs-extra\",\n         \"@npm//typescript\",\n     ],\n )"
        },
        {
            "sha": "b9556b5043b7f06d3f816e74630d4b03de087752",
            "filename": "packages/compiler-cli/src/ngtsc/file_system/src/node_js_file_system.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/3a823abcc554cffdda1e14e181dadad9063701de/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ffile_system%2Fsrc%2Fnode_js_file_system.ts",
            "raw_url": "https://github.com/angular/angular/raw/3a823abcc554cffdda1e14e181dadad9063701de/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ffile_system%2Fsrc%2Fnode_js_file_system.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ffile_system%2Fsrc%2Fnode_js_file_system.ts?ref=3a823abcc554cffdda1e14e181dadad9063701de",
            "patch": "@@ -7,7 +7,6 @@\n  */\n /// <reference types=\"node\" />\n import * as fs from 'fs';\n-import * as fsExtra from 'fs-extra';\n import * as p from 'path';\n import {AbsoluteFsPath, FileStats, FileSystem, PathManipulation, PathSegment, PathString, ReadonlyFileSystem} from './types';\n \n@@ -121,7 +120,7 @@ export class NodeJSFileSystem extends NodeJSReadonlyFileSystem implements FileSy\n     }\n   }\n   removeDeep(path: AbsoluteFsPath): void {\n-    fsExtra.removeSync(path);\n+    fs.rmdirSync(path, {recursive: true});\n   }\n \n   private safeMkdir(path: AbsoluteFsPath): void {"
        },
        {
            "sha": "4cdee34cae6f60494e6e689c74358ae0e608b9d0",
            "filename": "packages/compiler-cli/src/ngtsc/file_system/test/BUILD.bazel",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/3a823abcc554cffdda1e14e181dadad9063701de/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ffile_system%2Ftest%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/3a823abcc554cffdda1e14e181dadad9063701de/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ffile_system%2Ftest%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ffile_system%2Ftest%2FBUILD.bazel?ref=3a823abcc554cffdda1e14e181dadad9063701de",
            "patch": "@@ -11,7 +11,6 @@ ts_library(\n     deps = [\n         \"//packages/compiler-cli/src/ngtsc/file_system\",\n         \"//packages/compiler-cli/src/ngtsc/file_system/testing\",\n-        \"@npm//@types/fs-extra\",\n         \"@npm//typescript\",\n     ],\n )"
        },
        {
            "sha": "dc9dbf4362726a13d067ff247e2a04b1bf9071b0",
            "filename": "packages/compiler-cli/src/ngtsc/file_system/test/node_js_file_system_spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/3a823abcc554cffdda1e14e181dadad9063701de/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ffile_system%2Ftest%2Fnode_js_file_system_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/3a823abcc554cffdda1e14e181dadad9063701de/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ffile_system%2Ftest%2Fnode_js_file_system_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ffile_system%2Ftest%2Fnode_js_file_system_spec.ts?ref=3a823abcc554cffdda1e14e181dadad9063701de",
            "patch": "@@ -6,7 +6,6 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n import * as realFs from 'fs';\n-import * as fsExtra from 'fs-extra';\n import * as os from 'os';\n import {NodeJSFileSystem, NodeJSPathManipulation, NodeJSReadonlyFileSystem} from '../src/node_js_file_system';\n import {AbsoluteFsPath, PathSegment} from '../src/types';\n@@ -269,10 +268,10 @@ describe('NodeJSFileSystem', () => {\n   });\n \n   describe('removeDeep()', () => {\n-    it('should delegate to fsExtra.remove()', () => {\n-      const spy = spyOn(fsExtra, 'removeSync');\n+    it('should delegate to rmdirSync()', () => {\n+      const spy = spyOn(realFs, 'rmdirSync');\n       fs.removeDeep(abcPath);\n-      expect(spy).toHaveBeenCalledWith(abcPath);\n+      expect(spy).toHaveBeenCalledWith(abcPath, {recursive: true});\n     });\n   });\n });"
        },
        {
            "sha": "b1bcea392507679349c48a79def520166058d71f",
            "filename": "yarn.lock",
            "status": "modified",
            "additions": 0,
            "deletions": 16,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/3a823abcc554cffdda1e14e181dadad9063701de/yarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/3a823abcc554cffdda1e14e181dadad9063701de/yarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/yarn.lock?ref=3a823abcc554cffdda1e14e181dadad9063701de",
            "patch": "@@ -2601,13 +2601,6 @@\n   resolved \"https://registry.yarnpkg.com/@types/events/-/events-3.0.0.tgz#2862f3f58a9a7f7c3e78d79f130dd4d71c25c2a7\"\n   integrity sha512-EaObqwIvayI5a8dCzhFrjKzVwKLxjoG9T6Ppd5CEo07LRKfQ8Yokw54r5+Wq7FaBQ+yXRvQAYPrHwya1/UFt9g==\n \n-\"@types/fs-extra@4.0.2\":\n-  version \"4.0.2\"\n-  resolved \"https://registry.yarnpkg.com/@types/fs-extra/-/fs-extra-4.0.2.tgz#7b9b1bbf85962cbe029b5a83c9b530d7c75af3ba\"\n-  integrity sha512-Id1hnmfd+7G9K+jWz2syfMcpymx2mj6B1y4C72vAoYQzxOA79UhY/kNvOCyb9yYR1SoSaHyhwcYtWKKqUiLTZA==\n-  dependencies:\n-    \"@types/node\" \"*\"\n-\n \"@types/fs-extra@^8.0.1\":\n   version \"8.1.0\"\n   resolved \"https://registry.yarnpkg.com/@types/fs-extra/-/fs-extra-8.1.0.tgz#1114834b53c3914806cd03b3304b37b3bd221a4d\"\n@@ -7528,15 +7521,6 @@ fs-constants@^1.0.0:\n   resolved \"https://registry.yarnpkg.com/fs-constants/-/fs-constants-1.0.0.tgz#6be0de9be998ce16af8afc24497b9ee9b7ccd9ad\"\n   integrity sha512-y6OAwoSIf7FyjMIv94u+b5rdheZEjzR63GTyZJm5qh4Bi+2YgwLCcI/fPFZkL5PSixOt6ZNKm+w+Hfp/Bciwow==\n \n-fs-extra@4.0.2:\n-  version \"4.0.2\"\n-  resolved \"https://registry.yarnpkg.com/fs-extra/-/fs-extra-4.0.2.tgz#f91704c53d1b461f893452b0c307d9997647ab6b\"\n-  integrity sha1-+RcExT0bRh+JNFKwwwfZmXZHq2s=\n-  dependencies:\n-    graceful-fs \"^4.1.2\"\n-    jsonfile \"^4.0.0\"\n-    universalify \"^0.1.0\"\n-\n fs-extra@^0.23.1:\n   version \"0.23.1\"\n   resolved \"https://registry.yarnpkg.com/fs-extra/-/fs-extra-0.23.1.tgz#6611dba6adf2ab8dc9c69fab37cddf8818157e3d\""
        }
    ],
    "stats": {
        "total": 35,
        "additions": 4,
        "deletions": 31
    }
}