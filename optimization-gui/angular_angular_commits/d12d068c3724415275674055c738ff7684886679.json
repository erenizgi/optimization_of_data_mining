{
    "author": "uraj",
    "message": "build: Turn tsec checks into bazel tests. (#43108)\n\nIntroduce two new bazel rules: tsec_test and tsec_config, for\ndescribing the tsec checks and the tsconfig file needed for such\nchecks, respectively. Currently, tsec_test only checks the srcs\nof a ts_library or ng_module. It does not check direct or transitive\ndependencies. Also, tsconfig files need to be manually maintained\nto make sure tsec can read all necessary input (including global\nsymbols).\n\nPR Close #43108",
    "sha": "d12d068c3724415275674055c738ff7684886679",
    "files": [
        {
            "sha": "140aed39fc01421672128804f255656450c8774f",
            "filename": ".gitignore",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/.gitignore",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/.gitignore",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.gitignore?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -52,6 +52,3 @@ baseline.json\n \n # Husky\n .husky/_\n-\n-# tsec\n-.tsec"
        },
        {
            "sha": "3af885b08e5fa6b4e3ae4e8fcd4f36873e73deb2",
            "filename": ".pullapprove.yml",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/.pullapprove.yml",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/.pullapprove.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.pullapprove.yml?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -731,10 +731,10 @@ groups:\n           'packages/core/test/linker/security_integration_spec.ts',\n           'packages/compiler/src/schema/**',\n           'packages/platform-browser/src/security/**',\n-          'packages/tsconfig-tsec.json',\n           'packages/tsconfig-tsec-base.json',\n           'packages/**/tsconfig-tsec.json',\n-          'packages/tsec-exemption.json'\n+          'packages/tsec-exemption.json',\n+          'tools/tsec.bzl',\n           'aio/content/guide/security.md',\n           'aio/content/examples/security/**',\n           'aio/content/images/guide/security/**',"
        },
        {
            "sha": "5e2133ec54d00c0f0288a93948b275546154e57b",
            "filename": "package.json",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/package.json",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -26,6 +26,7 @@\n     \"prepare\": \"husky install\",\n     \"test-ivy-aot\": \"bazelisk test --config=ivy --build_tag_filters=-no-ivy-aot,-fixme-ivy-aot --test_tag_filters=-no-ivy-aot,-fixme-ivy-aot\",\n     \"test-non-ivy\": \"bazelisk test --build_tag_filters=-ivy-only --test_tag_filters=-ivy-only\",\n+    \"test-tsec\": \"bazelisk test //... --build_tag_filters=tsec --test_tag_filters=tsec\",\n     \"test-fixme-ivy-aot\": \"bazelisk test --config=ivy --build_tag_filters=-no-ivy-aot --test_tag_filters=-no-ivy-aot\",\n     \"list-fixme-ivy-targets\": \"bazelisk query --output=label 'attr(\\\"tags\\\", \\\"\\\\[.*fixme-ivy.*\\\\]\\\", //...) except kind(\\\"sh_binary\\\", //...) except kind(\\\"devmode_js_sources\\\", //...)' | sort\",\n     \"lint\": \"yarn -s tslint && yarn -s ng-dev format changed --check\",\n@@ -36,8 +37,7 @@\n     \"symbol-extractor:update\": \"node tools/symbol-extractor/run_all_symbols_extractor_tests.js accept\",\n     \"ts-circular-deps:check\": \"yarn -s ng-dev ts-circular-deps check --config ./packages/circular-deps-test.conf.js\",\n     \"ts-circular-deps:approve\": \"yarn -s ng-dev ts-circular-deps approve --config ./packages/circular-deps-test.conf.js\",\n-    \"check-tooling-setup\": \"yarn tsc --project .ng-dev/tsconfig.json\",\n-    \"tsec:packages\": \"yarn tsec -b packages/tsconfig-tsec.json\"\n+    \"check-tooling-setup\": \"yarn tsc --project .ng-dev/tsconfig.json\"\n   },\n   \"// 1\": \"dependencies are used locally and by bazel\",\n   \"dependencies\": {\n@@ -181,7 +181,7 @@\n     \"sauce-connect\": \"https://saucelabs.com/downloads/sc-4.6.2-linux.tar.gz\",\n     \"semver\": \"^7.3.5\",\n     \"ts-node\": \"^10.0.0\",\n-    \"tsec\": \"0.1.7\",\n+    \"tsec\": \"0.1.8\",\n     \"tslint-eslint-rules\": \"5.4.0\",\n     \"tslint-no-toplevel-property-access\": \"0.0.2\",\n     \"typed-graphqlify\": \"^3.1.1\","
        },
        {
            "sha": "59ce4860dbf450ff6b5bcf8bc0ed5f3b58fe7f00",
            "filename": "packages/BUILD.bazel",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2FBUILD.bazel?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -1,4 +1,5 @@\n load(\"//tools:defaults.bzl\", \"ts_config\", \"ts_library\")\n+load(\"//tools:tsec.bzl\", \"tsec_config\")\n \n package(default_visibility = [\"//visibility:public\"])\n \n@@ -22,6 +23,13 @@ ts_config(\n     deps = [\":tsconfig-build.json\"],\n )\n \n+tsec_config(\n+    name = \"tsec_config\",\n+    src = \"tsconfig-tsec-base.json\",\n+    exemption = \":tsec-exemption.json\",\n+    deps = [\":tsconfig-build.json\"],\n+)\n+\n exports_files([\n     \"license-banner.txt\",\n     \"README.md\","
        },
        {
            "sha": "65f9e28b17e5e0456c19408ee1beb2a2f0fc38b5",
            "filename": "packages/animations/browser/tsconfig-tsec.json",
            "status": "removed",
            "additions": 0,
            "deletions": 20,
            "changes": 20,
            "blob_url": "https://github.com/angular/angular/blob/509031c73431d37a85b28fa2f8573e1c847439a7/packages%2Fanimations%2Fbrowser%2Ftsconfig-tsec.json",
            "raw_url": "https://github.com/angular/angular/raw/509031c73431d37a85b28fa2f8573e1c847439a7/packages%2Fanimations%2Fbrowser%2Ftsconfig-tsec.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fanimations%2Fbrowser%2Ftsconfig-tsec.json?ref=509031c73431d37a85b28fa2f8573e1c847439a7",
            "patch": "@@ -1,20 +0,0 @@\n-/** For building //packages/animations/browser. */\n-{\n-  \"extends\": \"../../tsconfig-tsec-base.json\",\n-  \"compilerOptions\": {\n-    \"baseUrl\": \".\",\n-    \"outDir\": \".tsec\",\n-    \"paths\": {\n-      \"@angular/core\": [\"../../core\"],\n-      \"@angular/animations\": [\"../\"]\n-    }\n-  },\n-  \"include\": [\n-    \"*.ts\",\n-    \"src/**/*.ts\"\n-  ],\n-  \"references\": [\n-    {\"path\": \"../../core/tsconfig-tsec.json\"},\n-    {\"path\": \"../tsconfig-tsec.json\"}\n-  ]\n-}"
        },
        {
            "sha": "d43c2ca84443b714c12bf22effc824e18f43a72c",
            "filename": "packages/animations/tsconfig-tsec.json",
            "status": "removed",
            "additions": 0,
            "deletions": 18,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/509031c73431d37a85b28fa2f8573e1c847439a7/packages%2Fanimations%2Ftsconfig-tsec.json",
            "raw_url": "https://github.com/angular/angular/raw/509031c73431d37a85b28fa2f8573e1c847439a7/packages%2Fanimations%2Ftsconfig-tsec.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fanimations%2Ftsconfig-tsec.json?ref=509031c73431d37a85b28fa2f8573e1c847439a7",
            "patch": "@@ -1,18 +0,0 @@\n-/** For building //packages/animations. */\n-{\n-  \"extends\": \"../tsconfig-tsec-base.json\",\n-  \"compilerOptions\": {\n-    \"baseUrl\": \".\",\n-    \"outDir\": \".tsec\",\n-    \"paths\": {\n-      \"@angular/core\": [\"../core\"]\n-    }\n-  },\n-  \"include\": [\n-    \"*.ts\",\n-    \"src/**/*.ts\"\n-  ],\n-  \"references\": [\n-    {\"path\": \"../core/tsconfig-tsec.json\"}\n-  ]\n-}"
        },
        {
            "sha": "e0dc44681a1c636a83aa494a98927de00dd5c10e",
            "filename": "packages/common/http/tsconfig-tsec.json",
            "status": "removed",
            "additions": 0,
            "deletions": 20,
            "changes": 20,
            "blob_url": "https://github.com/angular/angular/blob/509031c73431d37a85b28fa2f8573e1c847439a7/packages%2Fcommon%2Fhttp%2Ftsconfig-tsec.json",
            "raw_url": "https://github.com/angular/angular/raw/509031c73431d37a85b28fa2f8573e1c847439a7/packages%2Fcommon%2Fhttp%2Ftsconfig-tsec.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Fhttp%2Ftsconfig-tsec.json?ref=509031c73431d37a85b28fa2f8573e1c847439a7",
            "patch": "@@ -1,20 +0,0 @@\n-/** For building //packages/common/http. */\n-{\n-  \"extends\": \"../../tsconfig-tsec-base.json\",\n-  \"compilerOptions\": {\n-    \"baseUrl\": \".\",\n-    \"outDir\": \".tsec\",\n-    \"paths\": {\n-      \"@angular/core\": [\"../../core\"],\n-      \"@angular/common\": [\"..\"]\n-    }\n-  },\n-  \"include\": [\n-    \"*.ts\",\n-    \"src/**/*.ts\"\n-  ],\n-  \"references\": [\n-    {\"path\": \"../../core/tsconfig-tsec.json\"},\n-    {\"path\": \"../tsconfig-tsec.json\"}\n-  ]\n-}"
        },
        {
            "sha": "8f96fb839c16cee9988c3581ae4e644c94b9d545",
            "filename": "packages/common/tsconfig-tsec.json",
            "status": "removed",
            "additions": 0,
            "deletions": 18,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/509031c73431d37a85b28fa2f8573e1c847439a7/packages%2Fcommon%2Ftsconfig-tsec.json",
            "raw_url": "https://github.com/angular/angular/raw/509031c73431d37a85b28fa2f8573e1c847439a7/packages%2Fcommon%2Ftsconfig-tsec.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Ftsconfig-tsec.json?ref=509031c73431d37a85b28fa2f8573e1c847439a7",
            "patch": "@@ -1,18 +0,0 @@\n-/** For building //packages/common. */\n-{\n-  \"extends\": \"../tsconfig-tsec-base.json\",\n-  \"compilerOptions\": {\n-    \"baseUrl\": \".\",\n-    \"outDir\": \".tsec\",\n-    \"paths\": {\n-      \"@angular/core\": [\"../core\"]\n-    }\n-  },\n-  \"include\": [\n-    \"*.ts\",\n-    \"src/**/*.ts\"\n-  ],\n-  \"references\": [\n-    {\"path\": \"../core/tsconfig-tsec.json\"}\n-  ]\n-}"
        },
        {
            "sha": "c5315e173f29a610e15bc0cb9a95319f1ee1f45e",
            "filename": "packages/compiler/BUILD.bazel",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fcompiler%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fcompiler%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2FBUILD.bazel?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -1,4 +1,5 @@\n load(\"//tools:defaults.bzl\", \"ng_package\", \"ts_library\")\n+load(\"//tools:tsec.bzl\", \"tsec_config\", \"tsec_test\")\n \n package(default_visibility = [\"//visibility:public\"])\n \n@@ -12,6 +13,18 @@ ts_library(\n     ),\n )\n \n+tsec_config(\n+    name = \"tsec_config\",\n+    src = \":tsconfig-tsec.json\",\n+    deps = [\"//packages:tsec_config\"],\n+)\n+\n+tsec_test(\n+    name = \"tsec_test\",\n+    target = \"compiler\",\n+    tsconfig = \"tsec_config\",\n+)\n+\n ng_package(\n     name = \"npm_package\",\n     srcs = ["
        },
        {
            "sha": "7ae99b1c05aa587789eea43e98d4f3df931ef507",
            "filename": "packages/core/BUILD.bazel",
            "status": "modified",
            "additions": 13,
            "deletions": 1,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2FBUILD.bazel?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -1,5 +1,6 @@\n load(\"@build_bazel_rules_nodejs//:index.bzl\", \"generated_file_test\")\n load(\"//tools:defaults.bzl\", \"api_golden_test\", \"api_golden_test_npm_package\", \"ng_module\", \"ng_package\")\n+load(\"//tools:tsec.bzl\", \"tsec_config\", \"tsec_test\")\n load(\"//packages/common/locales:index.bzl\", \"generate_base_locale_file\")\n \n package(default_visibility = [\"//visibility:public\"])\n@@ -34,12 +35,23 @@ ng_module(\n         \"//packages/core/src/interface\",\n         \"//packages/core/src/reflection\",\n         \"//packages/core/src/util\",\n-        \"//packages/localize\",\n         \"//packages/zone.js/lib:zone_d_ts\",\n         \"@npm//rxjs\",\n     ],\n )\n \n+tsec_config(\n+    name = \"tsconfig-tsec\",\n+    src = \":tsconfig-tsec.json\",\n+    deps = [\"//packages:tsec_config\"],\n+)\n+\n+tsec_test(\n+    name = \"tsec_test\",\n+    target = \"core\",\n+    tsconfig = \"tsconfig-tsec\",\n+)\n+\n ng_package(\n     name = \"npm_package\",\n     srcs = ["
        },
        {
            "sha": "eafa9852b3d23084efc20db7c44bbc37ab650c9a",
            "filename": "packages/core/src/compiler/BUILD.bazel",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Fcompiler%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Fcompiler%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fcompiler%2FBUILD.bazel?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -1,4 +1,5 @@\n load(\"//tools:defaults.bzl\", \"ts_library\")\n+load(\"//tools:tsec.bzl\", \"tsec_config\", \"tsec_test\")\n \n package(default_visibility = [\n     \"//packages/compiler/test:__pkg__\",\n@@ -17,3 +18,15 @@ ts_library(\n         \"//packages/core/src/util\",\n     ],\n )\n+\n+tsec_config(\n+    name = \"tsec_config\",\n+    src = \":tsconfig-tsec.json\",\n+    deps = [\"//packages:tsec_config\"],\n+)\n+\n+tsec_test(\n+    name = \"tsec_test\",\n+    target = \"compiler\",\n+    tsconfig = \"tsec_config\",\n+)"
        },
        {
            "sha": "e98abf20f236bfb29ce0b40aaefe8b9b97db971c",
            "filename": "packages/core/src/compiler/tsconfig-tsec.json",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Fcompiler%2Ftsconfig-tsec.json",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Fcompiler%2Ftsconfig-tsec.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fcompiler%2Ftsconfig-tsec.json?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -0,0 +1,8 @@\n+/** For building //packages/core/src/compiler. */\n+{\n+  \"extends\": \"../../../tsconfig-tsec-base.json\",\n+  \"include\": [\n+    \"**/*.ts\",\n+    \"../util/ng_dev_mode.d.ts\"\n+  ]\n+}"
        },
        {
            "sha": "4011a986f07ecf5826f55641be5afdfa19a0d207",
            "filename": "packages/core/src/di/interface/BUILD.bazel",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Fdi%2Finterface%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Fdi%2Finterface%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fdi%2Finterface%2FBUILD.bazel?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -1,4 +1,5 @@\n load(\"//tools:defaults.bzl\", \"ts_library\")\n+load(\"//tools:tsec.bzl\", \"tsec_config\", \"tsec_test\")\n \n package(default_visibility = [\n     \"//packages/core:__subpackages__\",\n@@ -18,3 +19,15 @@ ts_library(\n         \"@npm//rxjs\",\n     ],\n )\n+\n+tsec_config(\n+    name = \"tsec_config\",\n+    src = \":tsconfig-tsec.json\",\n+    deps = [\"//packages:tsec_config\"],\n+)\n+\n+tsec_test(\n+    name = \"tsec_test\",\n+    target = \"interface\",\n+    tsconfig = \"tsec_config\",\n+)"
        },
        {
            "sha": "990ba43b485e0b36fad06cc05cb853e0088fbf41",
            "filename": "packages/core/src/di/interface/tsconfig-tsec.json",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Fdi%2Finterface%2Ftsconfig-tsec.json",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Fdi%2Finterface%2Ftsconfig-tsec.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fdi%2Finterface%2Ftsconfig-tsec.json?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -0,0 +1,7 @@\n+/** For building //packages/core/src/di/interface. */\n+{\n+  \"extends\": \"../../../../tsconfig-tsec-base.json\",\n+  \"include\": [\n+    \"**/*.ts\"\n+  ]\n+}"
        },
        {
            "sha": "aef3e979a3b9ece66d9574c46d54bf5cbcb96bc6",
            "filename": "packages/core/src/interface/BUILD.bazel",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Finterface%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Finterface%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Finterface%2FBUILD.bazel?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -1,4 +1,5 @@\n load(\"//tools:defaults.bzl\", \"ts_library\")\n+load(\"//tools:tsec.bzl\", \"tsec_config\", \"tsec_test\")\n \n package(default_visibility = [\n     \"//packages/core:__subpackages__\",\n@@ -13,3 +14,15 @@ ts_library(\n         ],\n     ),\n )\n+\n+tsec_config(\n+    name = \"tsec_config\",\n+    src = \":tsconfig-tsec.json\",\n+    deps = [\"//packages:tsec_config\"],\n+)\n+\n+tsec_test(\n+    name = \"tsec_test\",\n+    target = \"interface\",\n+    tsconfig = \"tsec_config\",\n+)"
        },
        {
            "sha": "617b0901a83bfc78bf425d593e04ae0d542096e5",
            "filename": "packages/core/src/interface/tsconfig-tsec.json",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Finterface%2Ftsconfig-tsec.json",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Finterface%2Ftsconfig-tsec.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Finterface%2Ftsconfig-tsec.json?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -0,0 +1,7 @@\n+/** For building //packages/core/src/inteface. */\n+{\n+  \"extends\": \"../../../tsconfig-tsec-base.json\",\n+  \"include\": [\n+    \"*.ts\"\n+  ]\n+}"
        },
        {
            "sha": "018e9ec1cdaca574d77c55d7d5bfcdf19b99a42f",
            "filename": "packages/core/src/reflection/BUILD.bazel",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Freflection%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Freflection%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Freflection%2FBUILD.bazel?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -1,4 +1,5 @@\n load(\"//tools:defaults.bzl\", \"ts_library\")\n+load(\"//tools:tsec.bzl\", \"tsec_config\", \"tsec_test\")\n \n package(default_visibility = [\n     \"//packages/core:__subpackages__\",\n@@ -17,3 +18,15 @@ ts_library(\n         \"//packages/core/src/util\",\n     ],\n )\n+\n+tsec_config(\n+    name = \"tsec_config\",\n+    src = \":tsconfig-tsec.json\",\n+    deps = [\"//packages:tsec_config\"],\n+)\n+\n+tsec_test(\n+    name = \"tsec_test\",\n+    target = \"reflection\",\n+    tsconfig = \"tsec_config\",\n+)"
        },
        {
            "sha": "5d340f1929b02d482f5503d426f91dd62d112375",
            "filename": "packages/core/src/reflection/tsconfig-tsec.json",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Freflection%2Ftsconfig-tsec.json",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Freflection%2Ftsconfig-tsec.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Freflection%2Ftsconfig-tsec.json?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -0,0 +1,7 @@\n+/** For building //packages/core/src/reflection. */\n+{\n+  \"extends\": \"../../../tsconfig-tsec-base.json\",\n+  \"include\": [\n+    \"**/*.ts\"\n+  ]\n+}"
        },
        {
            "sha": "2a9b29a7c9be448f0b6cfd042ec89c78afbdfe53",
            "filename": "packages/core/src/util/BUILD.bazel",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Futil%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Futil%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Futil%2FBUILD.bazel?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -1,4 +1,5 @@\n load(\"//tools:defaults.bzl\", \"ts_library\")\n+load(\"//tools:tsec.bzl\", \"tsec_config\", \"tsec_test\")\n \n package(default_visibility = [\n     \"//packages/core:__subpackages__\",\n@@ -15,6 +16,19 @@ ts_library(\n     deps = [\n         \"//packages:types\",\n         \"//packages/core/src/interface\",\n+        \"//packages/zone.js/lib:zone_d_ts\",\n         \"@npm//rxjs\",\n     ],\n )\n+\n+tsec_config(\n+    name = \"tsec_config\",\n+    src = \":tsconfig-tsec.json\",\n+    deps = [\"//packages:tsec_config\"],\n+)\n+\n+tsec_test(\n+    name = \"tsec_test\",\n+    target = \"util\",\n+    tsconfig = \"tsec_config\",\n+)"
        },
        {
            "sha": "501d2d37978cc16d428612dccb1382d6fd6197e7",
            "filename": "packages/core/src/util/tsconfig-tsec.json",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Futil%2Ftsconfig-tsec.json",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Fsrc%2Futil%2Ftsconfig-tsec.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Futil%2Ftsconfig-tsec.json?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -0,0 +1,9 @@\n+/** For building //packages/core/src/util. */\n+{\n+  \"extends\": \"../../../tsconfig-tsec-base.json\",\n+  \"include\": [\n+    \"**/*.ts\",\n+    \"../../../*.d.ts\",\n+    \"../../../zone.js/lib/zone.d.ts\"\n+  ]\n+}"
        },
        {
            "sha": "e08e6c8433dc1f5ba45aed9b57b386442ebb05d1",
            "filename": "packages/core/tsconfig-tsec.json",
            "status": "modified",
            "additions": 2,
            "deletions": 7,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Ftsconfig-tsec.json",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fcore%2Ftsconfig-tsec.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftsconfig-tsec.json?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -1,15 +1,10 @@\n /** For building //packages/core. */\n {\n   \"extends\": \"../tsconfig-tsec-base.json\",\n-  \"compilerOptions\": {\n-    \"outDir\": \".tsec\"\n-  },\n   \"include\": [\n     \"*.ts\",\n     \"src/**/*.ts\",\n-    \"../*.d.ts\"\n-  ],\n-  \"references\": [\n-    {\"path\": \"../zone.js/lib/tsconfig-tsec.json\"}\n+    \"../*.d.ts\",\n+    \"../zone.js/lib/zone.d.ts\"\n   ]\n }"
        },
        {
            "sha": "5a2fa5fdba811ea815e424576de656204f53e44f",
            "filename": "packages/platform-browser-dynamic/tsconfig-tsec.json",
            "status": "removed",
            "additions": 0,
            "deletions": 25,
            "changes": 25,
            "blob_url": "https://github.com/angular/angular/blob/509031c73431d37a85b28fa2f8573e1c847439a7/packages%2Fplatform-browser-dynamic%2Ftsconfig-tsec.json",
            "raw_url": "https://github.com/angular/angular/raw/509031c73431d37a85b28fa2f8573e1c847439a7/packages%2Fplatform-browser-dynamic%2Ftsconfig-tsec.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-browser-dynamic%2Ftsconfig-tsec.json?ref=509031c73431d37a85b28fa2f8573e1c847439a7",
            "patch": "@@ -1,25 +0,0 @@\n-/** For building //packages/platform-browser-dynamic. */\n-{\n-  \"extends\": \"../tsconfig-tsec-base.json\",\n-  \"compilerOptions\": {\n-    \"baseUrl\": \".\",\n-    \"outDir\": \".tsec\",\n-    \"paths\": {\n-      \"@angular/core\": [\"../core\"],\n-      \"@angular/common\": [\"../common\"],\n-      \"@angular/compiler\": [\"../compiler\"],\n-      \"@angular/platform-browser\": [\"../platform-browser\"]\n-    }\n-  },\n-  \"include\": [\n-    \"*.ts\",\n-    \"src/**/*.ts\",\n-    \"../*.d.ts\"\n-  ],\n-  \"references\": [\n-    {\"path\": \"../core/tsconfig-tsec.json\"},\n-    {\"path\": \"../common/tsconfig-tsec.json\"},\n-    {\"path\": \"../compiler/tsconfig-tsec.json\"},\n-    {\"path\": \"../platform-browser/tsconfig-tsec.json\"}\n-  ]\n-}"
        },
        {
            "sha": "953dd71a129918c83df077f97330e0e0ffeb92e5",
            "filename": "packages/platform-browser/BUILD.bazel",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fplatform-browser%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fplatform-browser%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-browser%2FBUILD.bazel?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -1,4 +1,5 @@\n load(\"//tools:defaults.bzl\", \"api_golden_test_npm_package\", \"ng_module\", \"ng_package\")\n+load(\"//tools:tsec.bzl\", \"tsec_config\", \"tsec_test\")\n \n package(default_visibility = [\"//visibility:public\"])\n \n@@ -19,6 +20,18 @@ ng_module(\n     ],\n )\n \n+tsec_config(\n+    name = \"tsec_config\",\n+    src = \":tsconfig-tsec.json\",\n+    deps = [\"//packages:tsec_config\"],\n+)\n+\n+tsec_test(\n+    name = \"tsec_test\",\n+    target = \"platform-browser\",\n+    tsconfig = \"tsec_config\",\n+)\n+\n ng_package(\n     name = \"npm_package\",\n     srcs = ["
        },
        {
            "sha": "f212405a3b7c70359cfb3501fe77fab584c53e28",
            "filename": "packages/platform-browser/animations/BUILD.bazel",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fplatform-browser%2Fanimations%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fplatform-browser%2Fanimations%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-browser%2Fanimations%2FBUILD.bazel?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -1,4 +1,5 @@\n load(\"//tools:defaults.bzl\", \"ng_module\")\n+load(\"//tools:tsec.bzl\", \"tsec_config\", \"tsec_test\")\n \n package(default_visibility = [\"//visibility:public\"])\n \n@@ -20,3 +21,15 @@ ng_module(\n         \"//packages/platform-browser\",\n     ],\n )\n+\n+tsec_config(\n+    name = \"tsec_config\",\n+    src = \":tsconfig-tsec.json\",\n+    deps = [\"//packages:tsec_config\"],\n+)\n+\n+tsec_test(\n+    name = \"tsec_test\",\n+    target = \"animations\",\n+    tsconfig = \"tsec_config\",\n+)"
        },
        {
            "sha": "646cf09491d00edb5a1d95100c9b3578273746d2",
            "filename": "packages/platform-browser/animations/tsconfig-tsec.json",
            "status": "modified",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fplatform-browser%2Fanimations%2Ftsconfig-tsec.json",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fplatform-browser%2Fanimations%2Ftsconfig-tsec.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-browser%2Fanimations%2Ftsconfig-tsec.json?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -3,7 +3,6 @@\n   \"extends\": \"../../tsconfig-tsec-base.json\",\n   \"compilerOptions\": {\n     \"baseUrl\": \".\",\n-    \"outDir\": \".tsec\",\n     \"paths\": {\n       \"@angular/core\": [\"../../core\"],\n       \"@angular/common\": [\"../../common\"],\n@@ -15,12 +14,5 @@\n   \"include\": [\n     \"*.ts\",\n     \"src/**/*.ts\"\n-  ],\n-  \"references\": [\n-    {\"path\": \"../../core/tsconfig-tsec.json\"},\n-    {\"path\": \"../../common/tsconfig-tsec.json\"},\n-    {\"path\": \"../tsconfig-tsec.json\"},\n-    {\"path\": \"../../animations/tsconfig-tsec.json\"},\n-    {\"path\": \"../../animations/browser/tsconfig-tsec.json\"}\n   ]\n }"
        },
        {
            "sha": "aaf6c6e02a6dea4015e02b8d59db59906e7ad6d9",
            "filename": "packages/platform-browser/tsconfig-tsec.json",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fplatform-browser%2Ftsconfig-tsec.json",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fplatform-browser%2Ftsconfig-tsec.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-browser%2Ftsconfig-tsec.json?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -3,7 +3,6 @@\n   \"extends\": \"../tsconfig-tsec-base.json\",\n   \"compilerOptions\": {\n     \"baseUrl\": \".\",\n-    \"outDir\": \".tsec\",\n     \"paths\": {\n       \"@angular/core\": [\"../core\"],\n       \"@angular/common\": [\"../common\"]\n@@ -13,10 +12,5 @@\n     \"*.ts\",\n     \"src/**/*.ts\",\n     \"../*.d.ts\"\n-  ],\n-  \"references\": [\n-    {\"path\": \"../core/tsconfig-tsec.json\"},\n-    {\"path\": \"../common/tsconfig-tsec.json\"},\n-    {\"path\": \"../zone.js/lib/tsconfig-tsec.json\"}\n   ]\n }"
        },
        {
            "sha": "5b3576782321bc6d7d38d6f9bb5fb24a76852296",
            "filename": "packages/platform-server/BUILD.bazel",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fplatform-server%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fplatform-server%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-server%2FBUILD.bazel?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -1,4 +1,5 @@\n load(\"//tools:defaults.bzl\", \"api_golden_test_npm_package\", \"ng_module\", \"ng_package\")\n+load(\"//tools:tsec.bzl\", \"tsec_config\", \"tsec_test\")\n \n package(default_visibility = [\"//visibility:public\"])\n \n@@ -26,6 +27,18 @@ ng_module(\n     ],\n )\n \n+tsec_config(\n+    name = \"tsec_config\",\n+    src = \":tsconfig-tsec.json\",\n+    deps = [\"//packages:tsec_config\"],\n+)\n+\n+tsec_test(\n+    name = \"tsec_test\",\n+    target = \"platform-server\",\n+    tsconfig = \"tsec_config\",\n+)\n+\n ng_package(\n     name = \"npm_package\",\n     srcs = ["
        },
        {
            "sha": "941ed07114d900b347b8c1ff462270f6ba2afb73",
            "filename": "packages/platform-server/init/BUILD.bazel",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fplatform-server%2Finit%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fplatform-server%2Finit%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-server%2Finit%2FBUILD.bazel?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -1,4 +1,5 @@\n load(\"//tools:defaults.bzl\", \"ng_module\")\n+load(\"//tools:tsec.bzl\", \"tsec_config\", \"tsec_test\")\n \n package(default_visibility = [\"//visibility:public\"])\n \n@@ -16,3 +17,15 @@ ng_module(\n         \"//packages/platform-server\",\n     ],\n )\n+\n+tsec_config(\n+    name = \"tsec_config\",\n+    src = \":tsconfig-tsec.json\",\n+    deps = [\"//packages:tsec_config\"],\n+)\n+\n+tsec_test(\n+    name = \"tsec_test\",\n+    target = \"init\",\n+    tsconfig = \"tsec_config\",\n+)"
        },
        {
            "sha": "1143acd103e3127d8db970cca93ca1bcaabe8c4e",
            "filename": "packages/platform-server/init/tsconfig-tsec.json",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fplatform-server%2Finit%2Ftsconfig-tsec.json",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fplatform-server%2Finit%2Ftsconfig-tsec.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-server%2Finit%2Ftsconfig-tsec.json?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -0,0 +1,8 @@\n+/** For building //packages/platform-server/init. */\n+{\n+  \"extends\": \"../../tsconfig-tsec-base.json\",\n+  \"include\": [\n+    \"*.ts\",\n+    \"src/**/*.ts\"\n+  ]\n+}"
        },
        {
            "sha": "e375f46b910bb7347e661f27c7a9ddf7bf7d5f5a",
            "filename": "packages/platform-server/tsconfig-tsec.json",
            "status": "modified",
            "additions": 2,
            "deletions": 13,
            "changes": 15,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Fplatform-server%2Ftsconfig-tsec.json",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Fplatform-server%2Ftsconfig-tsec.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-server%2Ftsconfig-tsec.json?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -3,7 +3,6 @@\n   \"extends\": \"../tsconfig-tsec-base.json\",\n   \"compilerOptions\": {\n     \"baseUrl\": \".\",\n-    \"outDir\": \".tsec\",\n     \"paths\": {\n       \"@angular/core\": [\"../core\"],\n       \"@angular/common\": [\"../common\"],\n@@ -17,17 +16,7 @@\n   },\n   \"include\": [\n     \"*.ts\",\n-    \"src/**/*.ts\"\n-  ],\n-  \"references\": [\n-    {\"path\": \"../core/tsconfig-tsec.json\"},\n-    {\"path\": \"../common/tsconfig-tsec.json\"},\n-    {\"path\": \"../common/http/tsconfig-tsec.json\"},\n-    {\"path\": \"../compiler/tsconfig-tsec.json\"},\n-    {\"path\": \"../platform-browser/tsconfig-tsec.json\"},\n-    {\"path\": \"../platform-browser/animations/tsconfig-tsec.json\"},\n-    {\"path\": \"../platform-browser-dynamic/tsconfig-tsec.json\"},\n-    {\"path\": \"../zone.js/lib/tsconfig-tsec.json\"},\n-    {\"path\": \"../animations/browser/tsconfig-tsec.json\"}\n+    \"src/**/*.ts\",\n+    \"../zone.js/lib/*.d.ts\"\n   ]\n }"
        },
        {
            "sha": "27d6d4cfffbf97510b4a09768c1e8e189bdcdcfd",
            "filename": "packages/tsconfig-tsec-base.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/packages%2Ftsconfig-tsec-base.json",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/packages%2Ftsconfig-tsec-base.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Ftsconfig-tsec-base.json?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -3,7 +3,7 @@\n   \"extends\": \"./tsconfig-build.json\",\n   \"compilerOptions\": {\n     \"composite\": true,\n-    \"emitDeclarationOnly\": true,\n+    \"noEmit\": true,\n     \"lib\": [\"es2017\", \"dom\"],\n     \"plugins\": [{\"name\": \"tsec\", \"exemptionConfig\": \"./tsec-exemption.json\"}]\n   }"
        },
        {
            "sha": "dd177800777f51349726a9e250cb06bd1688e4fb",
            "filename": "packages/tsconfig-tsec.json",
            "status": "removed",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/509031c73431d37a85b28fa2f8573e1c847439a7/packages%2Ftsconfig-tsec.json",
            "raw_url": "https://github.com/angular/angular/raw/509031c73431d37a85b28fa2f8573e1c847439a7/packages%2Ftsconfig-tsec.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Ftsconfig-tsec.json?ref=509031c73431d37a85b28fa2f8573e1c847439a7",
            "patch": "@@ -1,10 +0,0 @@\n-/** Main config for building all packages that need to be checked by tsec. */\n-{\n-  \"extends\": \"./tsconfig-tsec-base.json\",\n-  \"include\": [],\n-  \"references\": [\n-    {\"path\": \"core/tsconfig-tsec.json\"},\n-    {\"path\": \"platform-browser/tsconfig-tsec.json\"},\n-    {\"path\": \"platform-server/tsconfig-tsec.json\"}\n-  ]\n-}"
        },
        {
            "sha": "7596e9c3cfdd2e5b9c5574b6f8bee3fc735c513d",
            "filename": "packages/zone.js/lib/tsconfig-tsec.json",
            "status": "removed",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/509031c73431d37a85b28fa2f8573e1c847439a7/packages%2Fzone.js%2Flib%2Ftsconfig-tsec.json",
            "raw_url": "https://github.com/angular/angular/raw/509031c73431d37a85b28fa2f8573e1c847439a7/packages%2Fzone.js%2Flib%2Ftsconfig-tsec.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Flib%2Ftsconfig-tsec.json?ref=509031c73431d37a85b28fa2f8573e1c847439a7",
            "patch": "@@ -1,9 +0,0 @@\n-/* For building //packages/zone.js/lib:zone_d_ts. */\n-{\n-  \"extends\": \"../../tsconfig-tsec-base.json\",\n-  \"compilerOptions\": {\n-    \"outFile\": \".tsec/zone.d.ts\",\n-    \"types\": [\"node\"]\n-  },\n-  \"files\": [\"zone.ts\"]\n-}"
        },
        {
            "sha": "c5577c24927c07041d6fbc6de09cb4c3cf5a6b9c",
            "filename": "tools/defaults.bzl",
            "status": "modified",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/tools%2Fdefaults.bzl",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/tools%2Fdefaults.bzl",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fdefaults.bzl?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -12,6 +12,7 @@ load(\"@npm//typescript:index.bzl\", \"tsc\")\n load(\"//packages/bazel:index.bzl\", _ng_module = \"ng_module\", _ng_package = \"ng_package\")\n load(\"@npm//@angular/dev-infra-private/bazel/benchmark/ng_rollup_bundle:ng_rollup_bundle.bzl\", _ng_rollup_bundle = \"ng_rollup_bundle\")\n load(\"//tools:ng_benchmark.bzl\", _ng_benchmark = \"ng_benchmark\")\n+load(\"//tools:tsec.bzl\", _get_forwarded_target_name = \"get_forwarded_target_name\", _ts_library_forwarded = \"ts_library_forwarded\")\n load(\"@npm//@angular/dev-infra-private/bazel/api-golden:index.bzl\", _api_golden_test = \"api_golden_test\", _api_golden_test_npm_package = \"api_golden_test_npm_package\")\n load(\"@npm//@angular/dev-infra-private/bazel:extract_js_module_output.bzl\", \"extract_js_module_output\")\n \n@@ -128,6 +129,16 @@ def ts_library(name, tsconfig = None, testonly = False, deps = [], module_name =\n         **kwargs\n     )\n \n+    # Forward `srcs` and `deps` to an implicitly create rule so that\n+    # `tsec_test` can get those arguments from its `target` argument.\n+    _ts_library_forwarded(\n+        name = _get_forwarded_target_name(name),\n+        testonly = True,\n+        srcs = kwargs.get(\"srcs\", []),\n+        deps = deps,\n+        tags = [\"tsec\"],\n+    )\n+\n     # Select the es5 .js output of the ts_library for use in downstream boostrap targets\n     # with `output_group = \"es5_sources\"`. This exposes an internal detail of ts_library\n     # that is not ideal.\n@@ -181,6 +192,16 @@ def ng_module(name, tsconfig = None, entry_point = None, testonly = False, deps\n         **kwargs\n     )\n \n+    # Forward `srcs` and `deps` to an implicitly create rule so that\n+    # `tsec_test` can get those arguments from its `target` argument.\n+    _ts_library_forwarded(\n+        name = _get_forwarded_target_name(name),\n+        testonly = True,\n+        srcs = kwargs.get(\"srcs\", []),\n+        deps = deps,\n+        tags = [\"tsec\"],\n+    )\n+\n def ng_package(name, readme_md = None, license_banner = None, deps = [], **kwargs):\n     \"\"\"Default values for ng_package\"\"\"\n     if not readme_md:"
        },
        {
            "sha": "fb72ed1275c4b17fc3b11cf4a448a778370d73b3",
            "filename": "tools/tsec.bzl",
            "status": "added",
            "additions": 143,
            "deletions": 0,
            "changes": 143,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/tools%2Ftsec.bzl",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/tools%2Ftsec.bzl",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Ftsec.bzl?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -0,0 +1,143 @@\n+\"\"\"Bazel rules and macros for running tsec over a ng_module or ts_library.\"\"\"\n+\n+load(\"@npm//@bazel/typescript/internal:ts_config.bzl\", \"TsConfigInfo\")\n+load(\"@build_bazel_rules_nodejs//:providers.bzl\", \"DeclarationInfo\")\n+load(\"@npm//tsec:index.bzl\", _tsec_test = \"tsec_test\")\n+\n+TsecTsconfigInfo = provider(fields = [\"src\", \"exemption\", \"deps\"])\n+\n+def _tsec_config_impl(ctx):\n+    deps = []\n+\n+    # Gather all extended tsconfig files.\n+    if ctx.files.deps:\n+        deps.extend(ctx.files.deps)\n+\n+    for d in ctx.attr.deps:\n+        # Gather all files from extended ts_config targets.\n+        if TsConfigInfo in d:\n+            deps.extend(d[TsConfigInfo].deps)\n+\n+        # Gather all files from extended tsec_config targets.\n+        if TsecTsconfigInfo in d:\n+            deps.append(d[TsecTsconfigInfo].src)\n+            if d[TsecTsconfigInfo].exemption:\n+                deps.append(d[TsecTsconfigInfo].exemption)\n+            deps.extend(d[TsecTsconfigInfo].deps)\n+    src = ctx.file.src\n+    return [\n+        # We need $(rootpath tsec_config_target) to get the path\n+        # of the top-level config file as the argument for tsec\n+        # binary. Only `src` should be stored in the DefaultInfo\n+        # provider.\n+        DefaultInfo(files = depset([src])),\n+        TsecTsconfigInfo(\n+            src = src,\n+            exemption = ctx.file.exemption,\n+            deps = deps,\n+        ),\n+    ]\n+\n+tsec_config = rule(\n+    implementation = _tsec_config_impl,\n+    attrs = {\n+        \"src\": attr.label(\n+            mandatory = True,\n+            allow_single_file = [\".json\"],\n+            doc = \"\"\"The single tsconfig used for running tsec.\"\"\",\n+        ),\n+        \"deps\": attr.label_list(\n+            allow_files = [\".json\"],\n+            doc = \"\"\"Any configs extended by `src`.\"\"\",\n+        ),\n+        \"exemption\": attr.label(\n+            allow_single_file = [\".json\"],\n+            doc = \"\"\"The exemption list used by `src`.\"\"\",\n+        ),\n+    },\n+    doc = \"\"\"Compute all transitive dependencies of a tsec_test config. \"\"\",\n+)\n+\n+TsLibInfo = provider(fields = [\"srcs\", \"deps\"])\n+\n+def _ts_library_forwarded_impl(ctx):\n+    \"\"\"Forward `srcs` and `deps` of `ts_library` and `ng_module` macros to `_tsec_test`.\"\"\"\n+    return [TsLibInfo(srcs = ctx.attr.srcs, deps = ctx.attr.deps)]\n+\n+ts_library_forwarded = rule(\n+    implementation = _ts_library_forwarded_impl,\n+    attrs = {\n+        \"srcs\": attr.label_list(allow_files = [\".ts\", \".tsx\"]),\n+        \"deps\": attr.label_list(),\n+    },\n+    doc = \"\"\"A rule-in-the-middle to forward `srcs` and `deps` to _src_and_deps, to avoid repeating these arguments in tsec_test.\n+\n+Should only be used by the `ts_library` and `ng_module` macros in tools/default.bzel.\"\"\",\n+)\n+\n+def get_forwarded_target_name(name):\n+    return \"%s_forwarded\" % name\n+\n+def _all_transitive_deps_impl(ctx):\n+    files = []\n+\n+    if TsecTsconfigInfo not in ctx.attr.tsconfig:\n+        fail(\"`tsconfig` must be a tsec_config target\")\n+\n+    tsec_tsconfig_info = ctx.attr.tsconfig[TsecTsconfigInfo]\n+    files.append(tsec_tsconfig_info.src)\n+    if tsec_tsconfig_info.exemption:\n+        files.append(tsec_tsconfig_info.exemption)\n+    files.extend(tsec_tsconfig_info.deps)\n+\n+    if TsLibInfo not in ctx.attr.forwarded_ts_target:\n+        fail(\"`target` must be a ts_library_forwarded target\")\n+\n+    ts_target_info = ctx.attr.forwarded_ts_target[TsLibInfo]\n+    for s in ts_target_info.srcs:\n+        if hasattr(s, \"files\"):\n+            files.extend(s.files.to_list())\n+\n+    for d in ts_target_info.deps:\n+        if DeclarationInfo in d:\n+            files.extend(d[DeclarationInfo].transitive_declarations.to_list())\n+        if hasattr(d, \"files\"):\n+            files.extend(d.files.to_list())\n+\n+    return [DefaultInfo(files = depset(files))]\n+\n+_all_transitive_deps = rule(\n+    implementation = _all_transitive_deps_impl,\n+    attrs = {\n+        \"tsconfig\": attr.label(),\n+        \"forwarded_ts_target\": attr.label(),\n+    },\n+    doc = \"\"\"Expand all transitive dependencies needed to run `_tsec_test`.\"\"\",\n+)\n+\n+def tsec_test(name, target, tsconfig):\n+    \"\"\"Run tsec over a ts_library or ng_module target to check its compatibility with Trusted Types.\n+\n+    This rule DOES NOT check transitive dependencies.\n+\n+    Args:\n+        name: name of the tsec test\n+        target: the ts_library or ng_module target to be checked\n+        tsconfig: the tsec_config target used for configuring tsec\n+    \"\"\"\n+    all_transitive_deps_name = \"%s_all_transitive_deps\" % name\n+\n+    _all_transitive_deps(\n+        name = all_transitive_deps_name,\n+        testonly = True,\n+        tsconfig = tsconfig,\n+        forwarded_ts_target = get_forwarded_target_name(target),\n+        tags = [\"tsec\"],\n+    )\n+\n+    _tsec_test(\n+        name = name,\n+        data = [tsconfig, all_transitive_deps_name],\n+        tags = [\"tsec\"],\n+        templated_args = [\"-p\", \"$(rootpath %s)\" % tsconfig],\n+    )"
        },
        {
            "sha": "d58705a6b16515c4b0b4edd585f165b6cb0191bb",
            "filename": "yarn.lock",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/d12d068c3724415275674055c738ff7684886679/yarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/d12d068c3724415275674055c738ff7684886679/yarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/yarn.lock?ref=d12d068c3724415275674055c738ff7684886679",
            "patch": "@@ -13270,10 +13270,10 @@ ts-node@^10.0.0:\n     make-error \"^1.1.1\"\n     yn \"3.1.1\"\n \n-tsec@0.1.7:\n-  version \"0.1.7\"\n-  resolved \"https://registry.yarnpkg.com/tsec/-/tsec-0.1.7.tgz#db217a1c7a47e2c0bca07aa9cd7ae28863343b22\"\n-  integrity sha512-hS8VPL8RX1jPvF8dPNvgZe9j0zE7L8Lj9pPuBYDoYaXDhGtXSfCY1Qn0vKTl7TaohXnnlnvlaNtvlMjubnX0CA==\n+tsec@0.1.8:\n+  version \"0.1.8\"\n+  resolved \"https://registry.yarnpkg.com/tsec/-/tsec-0.1.8.tgz#010d0c020d94b7e984e4511f0dd3bafb271a49f3\"\n+  integrity sha512-flbk1R6DC/ef+ZyBMjSALVh04hHDLRtUehUjpxP+gpShqF6IOVbK1XsjxV/7Sus/eH8svjPyOgI+WvlGIbxCMg==\n   dependencies:\n     glob \"^7.1.1\"\n     minimatch \"^3.0.3\""
        }
    ],
    "stats": {
        "total": 544,
        "additions": 376,
        "deletions": 168
    }
}