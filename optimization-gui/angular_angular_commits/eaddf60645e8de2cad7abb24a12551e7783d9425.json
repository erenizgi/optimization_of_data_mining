{
    "author": "devversion",
    "message": "refactor(compiler-cli): always build core package in full compilation mode (#43431)\n\nAs part of APF v13, we ship Angular framework packages using partial\ncompilation. This is done in preparation of VE removal, and to\neventually get rid of `ngcc` processing.\n\nThe new library format allows libraries to switch away from the View\nEngine package format without shipping Angular definitions with\ninstructions to NPM. This would make libraries tightly coupled to\nspecific versions of `@angular/core`.\n\nSince Angular core is always compatible with itself, we always should\ncompile Angular core using full compilation mode. It is unreasonable\nto ship Angular core with partial compilation output, especially since\nwe would need to export the linker `declare` functions in\n`r3_symbols.ts` otherwise.\n\nPR Close #43431",
    "sha": "eaddf60645e8de2cad7abb24a12551e7783d9425",
    "files": [
        {
            "sha": "e4dd475898c9b3b187c058dad3bd9e423bd5f05b",
            "filename": "packages/compiler-cli/src/ngtsc/core/src/compiler.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 2,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/eaddf60645e8de2cad7abb24a12551e7783d9425/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fcompiler.ts",
            "raw_url": "https://github.com/angular/angular/raw/eaddf60645e8de2cad7abb24a12551e7783d9425/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fcompiler.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fcompiler.ts?ref=eaddf60645e8de2cad7abb24a12551e7783d9425",
            "patch": "@@ -1000,8 +1000,12 @@ export class NgCompiler {\n \n     const resourceRegistry = new ResourceRegistry();\n \n-    const compilationMode =\n-        this.options.compilationMode === 'partial' ? CompilationMode.PARTIAL : CompilationMode.FULL;\n+    // Note: If this compilation builds `@angular/core`, we always build in full compilation\n+    // mode. Code inside the core package is always compatible with itself, so it does not\n+    // make sense to go through the indirection of partial compilation\n+    const compilationMode = this.options.compilationMode === 'partial' && !isCore ?\n+        CompilationMode.PARTIAL :\n+        CompilationMode.FULL;\n \n     // Cycles are handled in full compilation mode by \"remote scoping\".\n     // \"Remote scoping\" does not work well with tree shaking for libraries."
        }
    ],
    "stats": {
        "total": 8,
        "additions": 6,
        "deletions": 2
    }
}