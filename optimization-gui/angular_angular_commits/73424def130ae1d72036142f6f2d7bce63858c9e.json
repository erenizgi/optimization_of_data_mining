{
    "author": "ivanwonder",
    "message": "feat(compiler-cli): provide the animations for `DirectiveMeta` (#44630)\n\nIn `language-service`, the `checker.getDirectiveMetadata` doesn't return the animations meta of the `Component`.\nbut it's useful for animation completion.\n\nPR Close #44630",
    "sha": "73424def130ae1d72036142f6f2d7bce63858c9e",
    "files": [
        {
            "sha": "d455250c02a228754e9c58388a88e49667892338",
            "filename": "packages/compiler-cli/src/ngtsc/annotations/src/component.ts",
            "status": "modified",
            "additions": 32,
            "deletions": 2,
            "changes": 34,
            "blob_url": "https://github.com/angular/angular/blob/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Fsrc%2Fcomponent.ts",
            "raw_url": "https://github.com/angular/angular/raw/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Fsrc%2Fcomponent.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Fsrc%2Fcomponent.ts?ref=73424def130ae1d72036142f6f2d7bce63858c9e",
            "patch": "@@ -6,7 +6,7 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import {compileClassMetadata, compileComponentFromMetadata, compileDeclareClassMetadata, compileDeclareComponentFromMetadata, ConstantPool, CssSelector, DeclarationListEmitMode, DeclareComponentTemplateInfo, DEFAULT_INTERPOLATION_CONFIG, DomElementSchemaRegistry, Expression, ExternalExpr, FactoryTarget, InterpolationConfig, LexerRange, makeBindingParser, ParsedTemplate, ParseSourceFile, parseTemplate, R3ClassMetadata, R3ComponentMetadata, R3TargetBinder, R3UsedDirectiveMetadata, SelectorMatcher, Statement, TmplAstNode, ViewEncapsulation, WrappedNodeExpr} from '@angular/compiler';\n+import {AnimationTriggerNames, compileClassMetadata, compileComponentFromMetadata, compileDeclareClassMetadata, compileDeclareComponentFromMetadata, ConstantPool, CssSelector, DeclarationListEmitMode, DeclareComponentTemplateInfo, DEFAULT_INTERPOLATION_CONFIG, DomElementSchemaRegistry, Expression, ExternalExpr, FactoryTarget, InterpolationConfig, LexerRange, makeBindingParser, ParsedTemplate, ParseSourceFile, parseTemplate, R3ClassMetadata, R3ComponentMetadata, R3TargetBinder, R3UsedDirectiveMetadata, SelectorMatcher, Statement, TmplAstNode, ViewEncapsulation, WrappedNodeExpr} from '@angular/compiler';\n import ts from 'typescript';\n \n import {Cycle, CycleAnalyzer, CycleHandlingStrategy} from '../../cycles';\n@@ -17,7 +17,7 @@ import {DependencyTracker} from '../../incremental/api';\n import {extractSemanticTypeParameters, isArrayEqual, isReferenceEqual, SemanticDepGraphUpdater, SemanticReference, SemanticSymbol} from '../../incremental/semantic_graph';\n import {IndexingContext} from '../../indexer';\n import {ClassPropertyMapping, ComponentResources, DirectiveMeta, DirectiveTypeCheckMeta, extractDirectiveTypeCheckMeta, InjectableClassRegistry, MetadataReader, MetadataRegistry, MetaType, Resource, ResourceRegistry} from '../../metadata';\n-import {EnumValue, PartialEvaluator, ResolvedValue} from '../../partial_evaluator';\n+import {EnumValue, PartialEvaluator, ResolvedValue, ResolvedValueArray} from '../../partial_evaluator';\n import {PerfEvent, PerfRecorder} from '../../perf';\n import {ClassDeclaration, DeclarationNode, Decorator, ReflectionHost, reflectObjectLiteral} from '../../reflection';\n import {ComponentScopeReader, LocalModuleScopeRegistry, TypeCheckScopeRegistry} from '../../scope';\n@@ -86,6 +86,7 @@ export interface ComponentAnalysisData {\n   inlineStyles: string[]|null;\n \n   isPoisoned: boolean;\n+  animationTriggerNames: AnimationTriggerNames|null;\n }\n \n export type ComponentResolutionData = Pick<R3ComponentMetadata, ComponentMetadataResolvedFields>;\n@@ -348,8 +349,12 @@ export class ComponentDecoratorHandler implements\n         this._resolveEnumValue(component, 'changeDetection', 'ChangeDetectionStrategy');\n \n     let animations: Expression|null = null;\n+    let animationTriggerNames: AnimationTriggerNames|null = null;\n     if (component.has('animations')) {\n       animations = new WrappedNodeExpr(component.get('animations')!);\n+      const animationsValue = this.evaluator.evaluate(component.get('animations')!);\n+      animationTriggerNames = {includesDynamicAnimations: false, staticTriggerNames: []};\n+      collectAnimationNames(animationsValue, animationTriggerNames);\n     }\n \n     // Go through the root directories for this project, and select the one with the smallest\n@@ -516,6 +521,7 @@ export class ComponentDecoratorHandler implements\n           template: templateResource,\n         },\n         isPoisoned,\n+        animationTriggerNames,\n       },\n       diagnostics,\n     };\n@@ -551,6 +557,7 @@ export class ComponentDecoratorHandler implements\n       ...analysis.typeCheckMeta,\n       isPoisoned: analysis.isPoisoned,\n       isStructural: false,\n+      animationTriggerNames: analysis.animationTriggerNames,\n     });\n \n     this.resourceRegistry.registerResources(analysis.resources, node);\n@@ -1539,3 +1546,26 @@ function checkCustomElementSelectorForErrors(selector: string): string|null {\n \n   return null;\n }\n+\n+/**\n+ * Collect the animation names from the static evaluation result.\n+ * @param value the static evaluation result of the animations\n+ * @param animationTriggerNames the animation names collected and whether some names could not be\n+ *     statically evaluated.\n+ */\n+function collectAnimationNames(value: ResolvedValue, animationTriggerNames: AnimationTriggerNames) {\n+  if (value instanceof Map) {\n+    const name = value.get('name');\n+    if (typeof name === 'string') {\n+      animationTriggerNames.staticTriggerNames.push(name);\n+    } else {\n+      animationTriggerNames.includesDynamicAnimations = true;\n+    }\n+  } else if (Array.isArray(value)) {\n+    for (const resolvedValue of value) {\n+      collectAnimationNames(resolvedValue, animationTriggerNames);\n+    }\n+  } else {\n+    animationTriggerNames.includesDynamicAnimations = true;\n+  }\n+}"
        },
        {
            "sha": "73203f61978648866553fd18ac7ce694d15749db",
            "filename": "packages/compiler-cli/src/ngtsc/annotations/src/directive.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Fsrc%2Fdirective.ts",
            "raw_url": "https://github.com/angular/angular/raw/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Fsrc%2Fdirective.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Fsrc%2Fdirective.ts?ref=73424def130ae1d72036142f6f2d7bce63858c9e",
            "patch": "@@ -268,6 +268,7 @@ export class DirectiveDecoratorHandler implements\n       ...analysis.typeCheckMeta,\n       isPoisoned: analysis.isPoisoned,\n       isStructural: analysis.isStructural,\n+      animationTriggerNames: null,\n     });\n \n     this.injectableRegistry.registerInjectable(node);"
        },
        {
            "sha": "c6367af53e40c5e4a996b32f70369a5aa2f60b44",
            "filename": "packages/compiler-cli/src/ngtsc/annotations/test/component_spec.ts",
            "status": "modified",
            "additions": 120,
            "deletions": 2,
            "changes": 122,
            "blob_url": "https://github.com/angular/angular/blob/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Ftest%2Fcomponent_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Ftest%2Fcomponent_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Ftest%2Fcomponent_spec.ts?ref=73424def130ae1d72036142f6f2d7bce63858c9e",
            "patch": "@@ -13,7 +13,7 @@ import {CycleAnalyzer, CycleHandlingStrategy, ImportGraph} from '../../cycles';\n import {ErrorCode, FatalDiagnosticError} from '../../diagnostics';\n import {absoluteFrom} from '../../file_system';\n import {runInEachFileSystem} from '../../file_system/testing';\n-import {ModuleResolver, ReferenceEmitter} from '../../imports';\n+import {ModuleResolver, Reference, ReferenceEmitter} from '../../imports';\n import {CompoundMetadataReader, DtsMetadataReader, InjectableClassRegistry, LocalMetadataRegistry, ResourceRegistry} from '../../metadata';\n import {PartialEvaluator} from '../../partial_evaluator';\n import {NOOP_PERF_RECORDER} from '../../perf';\n@@ -87,7 +87,7 @@ function setup(program: ts.Program, options: ts.CompilerOptions, host: ts.Compil\n       /* annotateForClosureCompiler */ false,\n       NOOP_PERF_RECORDER,\n   );\n-  return {reflectionHost, handler, resourceLoader};\n+  return {reflectionHost, handler, resourceLoader, metaRegistry};\n }\n \n runInEachFileSystem(() => {\n@@ -400,6 +400,124 @@ runInEachFileSystem(() => {\n \n       expect(() => handler.analyze(TestCmp, detected.metadata)).not.toThrow();\n     });\n+\n+    it('should evaluate the name of animations', () => {\n+      const {program, options, host} = makeProgram([\n+        {\n+          name: _('/node_modules/@angular/core/index.d.ts'),\n+          contents: 'export const Component: any;',\n+        },\n+        {\n+          name: _('/entry.ts'),\n+          contents: `\n+          import {Component} from '@angular/core';\n+          function trigger(name) {\n+            return {name};\n+          }\n+          @Component({\n+            template: '',\n+            animations: [\n+              trigger('animationName'),\n+              [trigger('nestedAnimationName')],\n+            ],\n+          })\n+          class TestCmp {}\n+      `\n+        },\n+      ]);\n+      const {reflectionHost, handler, metaRegistry} = setup(program, options, host);\n+      const TestCmp = getDeclaration(program, _('/entry.ts'), 'TestCmp', isNamedClassDeclaration);\n+      const detected = handler.detect(TestCmp, reflectionHost.getDecoratorsOfDeclaration(TestCmp));\n+      if (detected === undefined) {\n+        return fail('Failed to recognize @Component');\n+      }\n+      const {analysis} = handler.analyze(TestCmp, detected.metadata);\n+      handler.register(TestCmp, analysis!);\n+      const meta = metaRegistry.getDirectiveMetadata(new Reference(TestCmp));\n+      expect(meta?.animationTriggerNames?.staticTriggerNames).toEqual([\n+        'animationName', 'nestedAnimationName'\n+      ]);\n+      expect(meta?.animationTriggerNames?.includesDynamicAnimations).toBeFalse();\n+    });\n+\n+    it('should tell if the animations include a dynamic value', () => {\n+      const {program, options, host} = makeProgram([\n+        {\n+          name: _('/node_modules/@angular/core/index.d.ts'),\n+          contents: 'export const Component: any;',\n+        },\n+        {\n+          name: _('/entry.ts'),\n+          contents: `\n+          import {Component} from '@angular/core';\n+          function trigger(name) {\n+            return {name};\n+          }\n+          function buildComplexAnimations() {\n+            const name = 'complex';\n+            return [trigger(name)];\n+          }\n+          @Component({\n+            template: '',\n+            animations: [\n+              trigger('animationName'),\n+              buildComplexAnimations(),\n+            ],\n+          })\n+          class TestCmp {}\n+      `\n+        },\n+      ]);\n+      const {reflectionHost, handler, metaRegistry} = setup(program, options, host);\n+      const TestCmp = getDeclaration(program, _('/entry.ts'), 'TestCmp', isNamedClassDeclaration);\n+      const detected = handler.detect(TestCmp, reflectionHost.getDecoratorsOfDeclaration(TestCmp));\n+      if (detected === undefined) {\n+        return fail('Failed to recognize @Component');\n+      }\n+      const {analysis} = handler.analyze(TestCmp, detected.metadata);\n+      handler.register(TestCmp, analysis!);\n+      const meta = metaRegistry.getDirectiveMetadata(new Reference(TestCmp));\n+      expect(meta?.animationTriggerNames?.staticTriggerNames).toEqual(['animationName']);\n+      expect(meta?.animationTriggerNames?.includesDynamicAnimations).toBeTrue();\n+    });\n+\n+    it('should treat complex animations expressions as dynamic', () => {\n+      const {program, options, host} = makeProgram([\n+        {\n+          name: _('/node_modules/@angular/core/index.d.ts'),\n+          contents: 'export const Component: any;',\n+        },\n+        {\n+          name: _('/entry.ts'),\n+          contents: `\n+          import {Component} from '@angular/core';\n+          function trigger(name) {\n+            return {name};\n+          }\n+          function buildComplexAnimations() {\n+            const name = 'complex';\n+            return [trigger(name)];\n+          }\n+          @Component({\n+            template: '',\n+            animations: buildComplexAnimations(),\n+          })\n+          class TestCmp {}\n+      `\n+        },\n+      ]);\n+      const {reflectionHost, handler, metaRegistry} = setup(program, options, host);\n+      const TestCmp = getDeclaration(program, _('/entry.ts'), 'TestCmp', isNamedClassDeclaration);\n+      const detected = handler.detect(TestCmp, reflectionHost.getDecoratorsOfDeclaration(TestCmp));\n+      if (detected === undefined) {\n+        return fail('Failed to recognize @Component');\n+      }\n+      const {analysis} = handler.analyze(TestCmp, detected.metadata);\n+      handler.register(TestCmp, analysis!);\n+      const meta = metaRegistry.getDirectiveMetadata(new Reference(TestCmp));\n+      expect(meta?.animationTriggerNames?.includesDynamicAnimations).toBeTrue();\n+      expect(meta?.animationTriggerNames?.staticTriggerNames.length).toBe(0);\n+    });\n   });\n \n   function ivyCode(code: ErrorCode): number {"
        },
        {
            "sha": "d096839de08b6fa6e0a2e59e46b76406e6a0002b",
            "filename": "packages/compiler-cli/src/ngtsc/annotations/test/directive_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Ftest%2Fdirective_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Ftest%2Fdirective_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Ftest%2Fdirective_spec.ts?ref=73424def130ae1d72036142f6f2d7bce63858c9e",
            "patch": "@@ -107,6 +107,7 @@ runInEachFileSystem(() => {\n         name: 'Dir',\n         selector: '[dir]',\n         isStructural: false,\n+        animationTriggerNames: null,\n       };\n       matcher.addSelectables(CssSelector.parse('[dir]'), dirMeta);\n "
        },
        {
            "sha": "18a45599036561edc0c05f0b17fc4801f7876e0b",
            "filename": "packages/compiler-cli/src/ngtsc/indexer/test/util.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Findexer%2Ftest%2Futil.ts",
            "raw_url": "https://github.com/angular/angular/raw/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Findexer%2Ftest%2Futil.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Findexer%2Ftest%2Futil.ts?ref=73424def130ae1d72036142f6f2d7bce63858c9e",
            "patch": "@@ -55,6 +55,7 @@ export function getBoundTemplate(\n       outputs: ClassPropertyMapping.fromMappedObject({}),\n       exportAs: null,\n       isStructural: false,\n+      animationTriggerNames: null,\n     });\n   });\n   const binder = new R3TargetBinder(matcher);"
        },
        {
            "sha": "1ba7b0f49890cbc24c1ba128507c82a001da9e50",
            "filename": "packages/compiler-cli/src/ngtsc/metadata/src/dts.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fmetadata%2Fsrc%2Fdts.ts",
            "raw_url": "https://github.com/angular/angular/raw/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fmetadata%2Fsrc%2Fdts.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fmetadata%2Fsrc%2Fdts.ts?ref=73424def130ae1d72036142f6f2d7bce63858c9e",
            "patch": "@@ -106,6 +106,7 @@ export class DtsMetadataReader implements MetadataReader {\n       baseClass: readBaseClass(clazz, this.checker, this.reflector),\n       isPoisoned: false,\n       isStructural,\n+      animationTriggerNames: null,\n     };\n   }\n "
        },
        {
            "sha": "c3fc1ca161cdb4befb39b1e11a206e8ce261af27",
            "filename": "packages/compiler-cli/src/ngtsc/scope/test/local_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fscope%2Ftest%2Flocal_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fscope%2Ftest%2Flocal_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fscope%2Ftest%2Flocal_spec.ts?ref=73424def130ae1d72036142f6f2d7bce63858c9e",
            "patch": "@@ -251,6 +251,7 @@ function fakeDirective(ref: Reference<ClassDeclaration>): DirectiveMeta {\n     baseClass: null,\n     isPoisoned: false,\n     isStructural: false,\n+    animationTriggerNames: null,\n   };\n }\n "
        },
        {
            "sha": "f87dc255c90bddabefd8a1030f44b79f31fa7c26",
            "filename": "packages/compiler-cli/src/ngtsc/typecheck/testing/index.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Ftesting%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Ftesting%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Ftesting%2Findex.ts?ref=73424def130ae1d72036142f6f2d7bce63858c9e",
            "patch": "@@ -582,6 +582,7 @@ function prepareDeclarations(\n       outputs: ClassPropertyMapping.fromMappedObject(decl.outputs || {}),\n       queries: decl.queries || [],\n       isStructural: false,\n+      animationTriggerNames: null,\n     };\n     matcher.addSelectables(selector, meta);\n   }\n@@ -646,6 +647,7 @@ function makeScope(program: ts.Program, sf: ts.SourceFile, decls: TestDeclaratio\n         isGeneric: decl.isGeneric ?? false,\n         isPoisoned: false,\n         isStructural: false,\n+        animationTriggerNames: null,\n       });\n     } else if (decl.type === 'pipe') {\n       scope.pipes.push({"
        },
        {
            "sha": "2df9815a86e8818bb5b1af2253c8451c7a58bf8f",
            "filename": "packages/compiler/src/render3/view/t2_api.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 0,
            "changes": 15,
            "blob_url": "https://github.com/angular/angular/blob/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Ft2_api.ts",
            "raw_url": "https://github.com/angular/angular/raw/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Ft2_api.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Ft2_api.ts?ref=73424def130ae1d72036142f6f2d7bce63858c9e",
            "patch": "@@ -36,6 +36,15 @@ export interface InputOutputPropertySet {\n   hasBindingPropertyName(propertyName: string): boolean;\n }\n \n+/**\n+ * A data structure which captures the animation trigger names that are statically resolvable\n+ * and whether some names could not be statically evaluated.\n+ */\n+export interface AnimationTriggerNames {\n+  includesDynamicAnimations: boolean;\n+  staticTriggerNames: string[];\n+}\n+\n /**\n  * Metadata regarding a directive that's needed to match it against template elements. This is\n  * provided by a consumer of the t2 APIs.\n@@ -76,6 +85,12 @@ export interface DirectiveMeta {\n   exportAs: string[]|null;\n \n   isStructural: boolean;\n+\n+  /**\n+   * The name of animations that the user defines in the component.\n+   * Only includes the animation names.\n+   */\n+  animationTriggerNames: AnimationTriggerNames|null;\n }\n \n /**"
        },
        {
            "sha": "10ba70cbc645d44d9f5a9f0d1d8a66c928cfc860",
            "filename": "packages/compiler/test/render3/view/binding_spec.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 4,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler%2Ftest%2Frender3%2Fview%2Fbinding_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/73424def130ae1d72036142f6f2d7bce63858c9e/packages%2Fcompiler%2Ftest%2Frender3%2Fview%2Fbinding_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Frender3%2Fview%2Fbinding_spec.ts?ref=73424def130ae1d72036142f6f2d7bce63858c9e",
            "patch": "@@ -40,6 +40,7 @@ function makeSelectorMatcher(): SelectorMatcher<DirectiveMeta> {\n     isComponent: false,\n     isStructural: true,\n     selector: '[ngFor][ngForOf]',\n+    animationTriggerNames: null,\n   });\n   matcher.addSelectables(CssSelector.parse('[dir]'), {\n     name: 'Dir',\n@@ -48,7 +49,8 @@ function makeSelectorMatcher(): SelectorMatcher<DirectiveMeta> {\n     outputs: new IdentityInputMapping([]),\n     isComponent: false,\n     isStructural: false,\n-    selector: '[dir]'\n+    selector: '[dir]',\n+    animationTriggerNames: null,\n   });\n   matcher.addSelectables(CssSelector.parse('[hasOutput]'), {\n     name: 'HasOutput',\n@@ -57,7 +59,8 @@ function makeSelectorMatcher(): SelectorMatcher<DirectiveMeta> {\n     outputs: new IdentityInputMapping(['outputBinding']),\n     isComponent: false,\n     isStructural: false,\n-    selector: '[hasOutput]'\n+    selector: '[hasOutput]',\n+    animationTriggerNames: null,\n   });\n   matcher.addSelectables(CssSelector.parse('[hasInput]'), {\n     name: 'HasInput',\n@@ -66,7 +69,8 @@ function makeSelectorMatcher(): SelectorMatcher<DirectiveMeta> {\n     outputs: new IdentityInputMapping([]),\n     isComponent: false,\n     isStructural: false,\n-    selector: '[hasInput]'\n+    selector: '[hasInput]',\n+    animationTriggerNames: null,\n   });\n   return matcher;\n }\n@@ -112,7 +116,8 @@ describe('t2 binding', () => {\n       outputs: new IdentityInputMapping([]),\n       isComponent: false,\n       isStructural: false,\n-      selector: 'text[dir]'\n+      selector: 'text[dir]',\n+      animationTriggerNames: null,\n     });\n     const binder = new R3TargetBinder(matcher);\n     const res = binder.bind({template: template.nodes});"
        }
    ],
    "stats": {
        "total": 191,
        "additions": 183,
        "deletions": 8
    }
}