{
    "author": "JiaLiPassion",
    "message": "build: update to use npm_package.pack rule (#39636)\n\nRemove the work around solution for the `npm pack`, we can now\nuse `npm_package.pack` rule of bazel, since the windows os issue\nhas been fixed here https://github.com/bazelbuild/rules_nodejs/commit/bc36519\n\nPR Close #39636",
    "sha": "35a197569791c064f947050815ae0cec6f5d06b3",
    "files": [
        {
            "sha": "d76197b68661941c52786c423fdf775f997561e7",
            "filename": "package.json",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/35a197569791c064f947050815ae0cec6f5d06b3/package.json",
            "raw_url": "https://github.com/angular/angular/raw/35a197569791c064f947050815ae0cec6f5d06b3/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=35a197569791c064f947050815ae0cec6f5d06b3",
            "patch": "@@ -52,12 +52,12 @@\n     \"@babel/template\": \"^7.8.6\",\n     \"@babel/traverse\": \"^7.8.6\",\n     \"@babel/types\": \"^7.8.6\",\n-    \"@bazel/jasmine\": \"2.2.0\",\n-    \"@bazel/karma\": \"2.2.0\",\n-    \"@bazel/protractor\": \"2.2.0\",\n-    \"@bazel/rollup\": \"2.2.0\",\n-    \"@bazel/terser\": \"2.2.0\",\n-    \"@bazel/typescript\": \"2.2.0\",\n+    \"@bazel/jasmine\": \"2.3.1\",\n+    \"@bazel/karma\": \"2.3.1\",\n+    \"@bazel/protractor\": \"2.3.1\",\n+    \"@bazel/rollup\": \"2.3.1\",\n+    \"@bazel/terser\": \"2.3.1\",\n+    \"@bazel/typescript\": \"2.3.1\",\n     \"@microsoft/api-extractor\": \"7.7.11\",\n     \"@octokit/rest\": \"16.28.7\",\n     \"@octokit/types\": \"^5.0.1\","
        },
        {
            "sha": "e7220daff53c4d2525425acfe6f117a833092a48",
            "filename": "packages/zone.js/test/karma_test.bzl",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/35a197569791c064f947050815ae0cec6f5d06b3/packages%2Fzone.js%2Ftest%2Fkarma_test.bzl",
            "raw_url": "https://github.com/angular/angular/raw/35a197569791c064f947050815ae0cec6f5d06b3/packages%2Fzone.js%2Ftest%2Fkarma_test.bzl",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Ftest%2Fkarma_test.bzl?ref=35a197569791c064f947050815ae0cec6f5d06b3",
            "patch": "@@ -79,6 +79,7 @@ def karma_test(name, env_srcs, env_deps, env_entry_point, test_srcs, test_deps,\n             tags = [\"zone_karma_test\"],\n             runtime_deps = [\n                 \"@npm//karma-browserstack-launcher\",\n+                \"@npm//karma-sauce-launcher\",\n             ],\n         )\n \n@@ -110,5 +111,6 @@ def karma_test(name, env_srcs, env_deps, env_entry_point, test_srcs, test_deps,\n                 visibility = [\"//:__pkg__\"],\n                 runtime_deps = [\n                     \"@npm//karma-browserstack-launcher\",\n+                    \"@npm//karma-sauce-launcher\",\n                 ],\n             )"
        },
        {
            "sha": "41108f7088b6f642c75492507e2075fa6dce754d",
            "filename": "scripts/build/zone-js-builder.js",
            "status": "modified",
            "additions": 1,
            "deletions": 5,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/35a197569791c064f947050815ae0cec6f5d06b3/scripts%2Fbuild%2Fzone-js-builder.js",
            "raw_url": "https://github.com/angular/angular/raw/35a197569791c064f947050815ae0cec6f5d06b3/scripts%2Fbuild%2Fzone-js-builder.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/scripts%2Fbuild%2Fzone-js-builder.js?ref=35a197569791c064f947050815ae0cec6f5d06b3",
            "patch": "@@ -35,7 +35,7 @@ function buildZoneJsPackage(destPath) {\n   console.info(`${scriptPath}:`);\n   console.info('  Building zone.js npm package');\n   console.info('##############################');\n-  exec(`${bazelCmd} build //packages/zone.js:npm_package`);\n+  exec(`${bazelCmd} run //packages/zone.js:npm_package.pack`);\n \n   // Create the output directory.\n   const absDestPath = resolve(baseDir, destPath);\n@@ -46,10 +46,6 @@ function buildZoneJsPackage(destPath) {\n   const buildOutputDir = `${bazelBin}/packages/zone.js/npm_package`;\n   const distTargetDir = `${absDestPath}/zone.js`;\n \n-  // Also create an archive so we can test the package itself.\n-  // Currently, the `npm_package.pack` rule does not work on Windows, so run `npm pack` directly.\n-  exec(`npm pack ${buildOutputDir}`, false, {cwd: baseDir});\n-\n   console.info(`# Copy npm_package artifacts to ${distTargetDir}`);\n   rm('-rf', distTargetDir);\n   cp('-R', buildOutputDir, distTargetDir);"
        },
        {
            "sha": "c46d8bcbf8b4a5a6199d056a2716842cb1823602",
            "filename": "yarn.lock",
            "status": "modified",
            "additions": 24,
            "deletions": 33,
            "changes": 57,
            "blob_url": "https://github.com/angular/angular/blob/35a197569791c064f947050815ae0cec6f5d06b3/yarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/35a197569791c064f947050815ae0cec6f5d06b3/yarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/yarn.lock?ref=35a197569791c064f947050815ae0cec6f5d06b3",
            "patch": "@@ -1972,40 +1972,38 @@\n   resolved \"https://registry.yarnpkg.com/@bazel/ibazel/-/ibazel-0.12.4.tgz#ddda7c8ead6e29dc8d637af446086a750f395218\"\n   integrity sha512-FzOy+esB/fXVDbAmL6Ce2yCEy+PESZih8GypKhi0B8XzoZHAAn3QNnQcMNwo9PrIfp3G1989nM/JQ1b8jwEinQ==\n \n-\"@bazel/jasmine@2.2.0\":\n-  version \"2.2.0\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/jasmine/-/jasmine-2.2.0.tgz#78fc4171362113d993e2473b0168ee8c255e05c9\"\n-  integrity sha512-NmrgbHBSWUaBXT9rFqeC+bYYWfHtPphnfgchusy7LOQMs/aWVePEo9tsbggNBt1pf6NYv+Y/cHLgtlL/EdQ6Dg==\n+\"@bazel/jasmine@2.3.1\":\n+  version \"2.3.1\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/jasmine/-/jasmine-2.3.1.tgz#e4df8dd2b8d906e41e4073b5c49c700a962fe853\"\n+  integrity sha512-6QYTfJfbwPxCvKu4rOhG1YZUm94MbG4K2Dq1q2A2OUiM0eqAZG8T1HJAswDh7L286r5x9nRX8h7Pb7CyJvSmbg==\n   dependencies:\n     c8 \"~7.1.0\"\n     jasmine-reporters \"~2.3.2\"\n \n-\"@bazel/karma@2.2.0\":\n-  version \"2.2.0\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/karma/-/karma-2.2.0.tgz#9bf6f6f1aa5f12b25468b1cad5e4404138436600\"\n-  integrity sha512-qyVE7vZ/qaibmpmcRdjS0rlorLGR0zZtlUSImVVTcPTSXqt364fp8TWBWe7oOneJ1SOVyUmTOAzyE86ArxZ/AA==\n-  dependencies:\n-    tmp \"0.1.0\"\n+\"@bazel/karma@2.3.1\":\n+  version \"2.3.1\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/karma/-/karma-2.3.1.tgz#9a52128cefc4e061fc4e934c4918d7a3e17b1007\"\n+  integrity sha512-4w1aS3qaKY8eekyDujAFD7xsM+z0rCsEofs8QliEmZaF+RCKw+QsxWEMrxIXkdoftcQS+MBatAoSDhHbl47VpQ==\n \n-\"@bazel/protractor@2.2.0\":\n-  version \"2.2.0\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/protractor/-/protractor-2.2.0.tgz#721b06507b84bf6d61d0e843e0af9939c6ad35a4\"\n-  integrity sha512-7dvAXxf/rGoi+S4+DWg8HNx3Co9s0kMg1xnBJ4T4nPF5wqSEoItkR6wsjkjQyocA2kIXan+HQcQvw4iIDMhGmg==\n+\"@bazel/protractor@2.3.1\":\n+  version \"2.3.1\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/protractor/-/protractor-2.3.1.tgz#470c280841f5ec91b0a80d2ffb692841a125e240\"\n+  integrity sha512-1MF3JlGE6HyYzPFXJBFnv5eEOuTuXhsJT70g66+lMgPZ9g0uUPh6CPu/iUkT6/92sw+pHGUsaptxwNu89Z7Dag==\n \n-\"@bazel/rollup@2.2.0\":\n-  version \"2.2.0\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/rollup/-/rollup-2.2.0.tgz#15651d545114e08db056f10a1eeaa4e76fc4df56\"\n-  integrity sha512-N4SyrvFkdAVc24CqFNhDtrR6P3XJTdPGziCuF7QM/BGihnsGlxF6+Dt2n5BTLJnObiB1St8vtRwCtAY8faxYWQ==\n+\"@bazel/rollup@2.3.1\":\n+  version \"2.3.1\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/rollup/-/rollup-2.3.1.tgz#30265ac682149e82f3a4a0cfda216f3d860e7373\"\n+  integrity sha512-KyMIYr8UV1MkwdW+2HUnwUNAddFhETM8OSaaOQK5I7hV4XKjBzc2EZstt4HRcNtsVF5Lnsi7Arb8xjbBdXTqvw==\n \n-\"@bazel/terser@2.2.0\":\n-  version \"2.2.0\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/terser/-/terser-2.2.0.tgz#e0452f3d20e41d5e63048b3eea3280256172fd30\"\n-  integrity sha512-vukKS9ayJsW/eFFX6tG2Blem+NmEWbcYuCXxwgjL/uYiMCL/uowaTpcvVp9B+DsNSXhGyohOYwud0nBreSUFzg==\n+\"@bazel/terser@2.3.1\":\n+  version \"2.3.1\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/terser/-/terser-2.3.1.tgz#c1aa0e88988d913be61d601e581a60c3bf771e06\"\n+  integrity sha512-G0I7niJyQzDFx+Z4WlA19g8SQuWpfMKbMHi+e94NHVYYpoUF0nRhLfysvNx5Kx5J6/N2gErmtwYsTQpRUI/vCQ==\n \n-\"@bazel/typescript@2.2.0\":\n-  version \"2.2.0\"\n-  resolved \"https://registry.yarnpkg.com/@bazel/typescript/-/typescript-2.2.0.tgz#f2d3dce8715d574fe3146f19fdb8479abcc4d608\"\n-  integrity sha512-Thf8pXntBzE3EvJtyiTBNsfIf1QnYmGPQmUSGLcKUuuFoplUVYShMRHaxBoPZmYsnD/x+BFLgUKIzlXiEQpGqQ==\n+\"@bazel/typescript@2.3.1\":\n+  version \"2.3.1\"\n+  resolved \"https://registry.yarnpkg.com/@bazel/typescript/-/typescript-2.3.1.tgz#f103c4a5230cabaffd8d574b7278265b5478f056\"\n+  integrity sha512-blgLpx+9Vh8DZWTVOYTWSk1HEU28FF+GwU1stFaemfY7/pUQfK/URb9FARRkw/v2UrPKCd9EBywFYQyPGSAb1A==\n   dependencies:\n     protobufjs \"6.8.8\"\n     semver \"5.6.0\"\n@@ -15277,13 +15275,6 @@ tmp@0.0.33, tmp@0.0.x, tmp@^0.0.33:\n   dependencies:\n     os-tmpdir \"~1.0.2\"\n \n-tmp@0.1.0:\n-  version \"0.1.0\"\n-  resolved \"https://registry.yarnpkg.com/tmp/-/tmp-0.1.0.tgz#ee434a4e22543082e294ba6201dcc6eafefa2877\"\n-  integrity sha512-J7Z2K08jbGcdA1kkQpJSqLF6T0tdQqpR2pnSUXsIchbPdTI9v3e85cLW0d6WDhwuAleOV71j2xWs8qMPfK7nKw==\n-  dependencies:\n-    rimraf \"^2.6.3\"\n-\n to-array@0.1.4:\n   version \"0.1.4\"\n   resolved \"https://registry.yarnpkg.com/to-array/-/to-array-0.1.4.tgz#17e6c11f73dd4f3d74cda7a4ff3238e9ad9bf890\""
        }
    ],
    "stats": {
        "total": 77,
        "additions": 33,
        "deletions": 44
    }
}