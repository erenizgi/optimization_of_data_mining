{
    "author": "JoostK",
    "message": "test(compiler-cli): expand logging when extra compliance check fails (#39863)\n\nPreviously this would have just printed that `false` was not equal to\n`true`, which, although true, is not very helpful. This commit adds\ndetails about which special check failed together with the generated\ncode, for easier debugging.\n\nPR Close #39863",
    "sha": "157d69070465bd976b9b1ae919d22ae47b6fc0ae",
    "files": [
        {
            "sha": "7fc651267576598d35cc9e64688cd17adad83567",
            "filename": "packages/compiler-cli/test/compliance/test_helpers/check_expectations.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/157d69070465bd976b9b1ae919d22ae47b6fc0ae/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fcheck_expectations.ts",
            "raw_url": "https://github.com/angular/angular/raw/157d69070465bd976b9b1ae919d22ae47b6fc0ae/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fcheck_expectations.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fcheck_expectations.ts?ref=157d69070465bd976b9b1ae919d22ae47b6fc0ae",
            "patch": "@@ -79,6 +79,10 @@ function runExtraChecks(\n           `Unknown extra-check function: \"${fnName}\" in ${testPath}.\\n` +\n           `Possible choices are: ${Object.keys(EXTRA_CHECK_FUNCTIONS).map(f => `\\n - ${f}`)}.`);\n     }\n-    expect(fn(generated, ...args)).toBe(true);\n+    if (!fn(generated, ...args)) {\n+      throw new Error(\n+          `Extra check ${fnName}(${args.map(arg => JSON.stringify(arg)).join(',')}) in ${\n+              testPath} failed for generated code:\\n\\n${generated}`);\n+    }\n   }\n }"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 5,
        "deletions": 1
    }
}