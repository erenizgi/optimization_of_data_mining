{
    "author": "petebacondarwin",
    "message": "fix(compiler-cli): match string indexed partial declarations (#41747)\n\nSome partial libraries have been minified, which results in the declaration\ncalls being being converted from property accesses to indexed accesses.\nThis commit ensures that the linker can process these calls.\n\nFixes #41655\n\nPR Close #41747",
    "sha": "c3a512a9e96c911ff3a2fc762e7e0d895ac8179e",
    "files": [
        {
            "sha": "11a647f0df416c314811113f2c771be7e1a42e82",
            "filename": "packages/compiler-cli/linker/babel/src/es2015_linker_plugin.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/c3a512a9e96c911ff3a2fc762e7e0d895ac8179e/packages%2Fcompiler-cli%2Flinker%2Fbabel%2Fsrc%2Fes2015_linker_plugin.ts",
            "raw_url": "https://github.com/angular/angular/raw/c3a512a9e96c911ff3a2fc762e7e0d895ac8179e/packages%2Fcompiler-cli%2Flinker%2Fbabel%2Fsrc%2Fes2015_linker_plugin.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Flinker%2Fbabel%2Fsrc%2Fes2015_linker_plugin.ts?ref=c3a512a9e96c911ff3a2fc762e7e0d895ac8179e",
            "patch": "@@ -139,6 +139,8 @@ function getCalleeName(call: NodePath<t.CallExpression>): string|null {\n     return callee.name;\n   } else if (t.isMemberExpression(callee) && t.isIdentifier(callee.property)) {\n     return callee.property.name;\n+  } else if (t.isMemberExpression(callee) && t.isStringLiteral(callee.property)) {\n+    return callee.property.value;\n   } else {\n     return null;\n   }"
        },
        {
            "sha": "92773e4a738e911bc075d9c4332a0f6f88373122",
            "filename": "packages/compiler-cli/linker/babel/test/es2015_linker_plugin_spec.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/c3a512a9e96c911ff3a2fc762e7e0d895ac8179e/packages%2Fcompiler-cli%2Flinker%2Fbabel%2Ftest%2Fes2015_linker_plugin_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/c3a512a9e96c911ff3a2fc762e7e0d895ac8179e/packages%2Fcompiler-cli%2Flinker%2Fbabel%2Ftest%2Fes2015_linker_plugin_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Flinker%2Fbabel%2Ftest%2Fes2015_linker_plugin_spec.ts?ref=c3a512a9e96c911ff3a2fc762e7e0d895ac8179e",
            "patch": "@@ -70,9 +70,10 @@ describe('createEs2015LinkerPlugin()', () => {\n            [\n              'var core;',\n              `ɵɵngDeclareDirective({minVersion: '0.0.0-PLACEHOLDER', version: '0.0.0-PLACEHOLDER', ngImport: core, x: 1});`,\n-             `ɵɵngDeclareComponent({minVersion: '0.0.0-PLACEHOLDER', version: '0.0.0-PLACEHOLDER', ngImport: core, foo: () => ɵɵngDeclareDirective({minVersion: '0.0.0-PLACEHOLDER', version: '0.0.0-PLACEHOLDER', ngImport: core, x: 2})});`,\n+             `i0.ɵɵngDeclareComponent({minVersion: '0.0.0-PLACEHOLDER', version: '0.0.0-PLACEHOLDER', ngImport: core, foo: () => ɵɵngDeclareDirective({minVersion: '0.0.0-PLACEHOLDER', version: '0.0.0-PLACEHOLDER', ngImport: core, x: 2})});`,\n              `x.qux(() => ɵɵngDeclareDirective({minVersion: '0.0.0-PLACEHOLDER', version: '0.0.0-PLACEHOLDER', ngImport: core, x: 3}));`,\n              'spread(...x);',\n+             `i0['ɵɵngDeclareDirective']({minVersion: '0.0.0-PLACEHOLDER', version: '0.0.0-PLACEHOLDER', ngImport: core, x: 4});`,\n            ].join('\\n'),\n            {\n              plugins: [createEs2015LinkerPlugin({fileSystem, logger})],\n@@ -93,7 +94,11 @@ describe('createEs2015LinkerPlugin()', () => {\n          [\n            'ɵɵngDeclareDirective',\n            '{minVersion:\\'0.0.0-PLACEHOLDER\\',version:\\'0.0.0-PLACEHOLDER\\',ngImport:core,x:3}'\n-         ]\n+         ],\n+         [\n+           'ɵɵngDeclareDirective',\n+           '{minVersion:\\'0.0.0-PLACEHOLDER\\',version:\\'0.0.0-PLACEHOLDER\\',ngImport:core,x:4}'\n+         ],\n        ]);\n      });\n "
        }
    ],
    "stats": {
        "total": 11,
        "additions": 9,
        "deletions": 2
    }
}