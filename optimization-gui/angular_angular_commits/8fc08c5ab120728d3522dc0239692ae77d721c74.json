{
    "author": "josephperrott",
    "message": "ci: update pullapprove config to properly handle global approvals (#42929)\n\nUpdate the config to properly identify a global approval as approved rather than\nas no file matching based groups being matched.\n\nPR Close #42929",
    "sha": "8fc08c5ab120728d3522dc0239692ae77d721c74",
    "files": [
        {
            "sha": "e49c09546b5ec10743b9e885ded4da0d8b6ba533",
            "filename": ".pullapprove.yml",
            "status": "modified",
            "additions": 3,
            "deletions": 7,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/8fc08c5ab120728d3522dc0239692ae77d721c74/.pullapprove.yml",
            "raw_url": "https://github.com/angular/angular/raw/8fc08c5ab120728d3522dc0239692ae77d721c74/.pullapprove.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.pullapprove.yml?ref=8fc08c5ab120728d3522dc0239692ae77d721c74",
            "patch": "@@ -80,10 +80,6 @@ meta:\n   no-groups-above-this-pending: &no-groups-above-this-pending len(groups.active.pending.exclude(\"required-minimum-review\").exclude(\"global-approvers\").exclude(\"global-docs-approvers\")) == 0\n   no-groups-above-this-rejected: &no-groups-above-this-rejected len(groups.active.rejected.exclude(\"required-minimum-review\").exclude(\"global-approvers\").exclude(\"global-docs-approvers\")) == 0\n \n-  # Yaml anchor that represents a PullApprove expression that evaluates to `true` whenever\n-  # there are no actual review groups active. Groups which are always active are excluded.\n-  no-review-groups-active: &no-review-groups-active len(groups.active.exclude(\"required-minimum-review\").exclude(\"global-approvers\").exclude(\"global-docs-approvers\")) == 0\n-\n   can-be-global-approved: &can-be-global-approved '\"global-approvers\" not in groups.approved'\n   can-be-global-docs-approved: &can-be-global-docs-approved '\"global-docs-approvers\" not in groups.approved'\n   defaults: &defaults\n@@ -112,9 +108,9 @@ overrides:\n   - if: \"'PullApprove: disable' in labels\"\n     status: success\n     explanation: \"PullApprove skipped because of 'PullApprove: disable' label\"\n-  # If no groups are active, report this pull request as failing. Most likely, the\n-  # PR author would need to update the PullApprove config, or create new group.\n-  - if: *no-review-groups-active\n+  # If no file matching based groups are active, report this pull request as failing. Most likely,\n+  # the PR author would need to update the PullApprove config, or create new group.\n+  - if: len(groups.active.exclude(\"required-minimum-review\").exclude(\"global-*\")) == 0 and len(groups.approved.include(\"global-*\")) == 0\n     status: failure\n     explanation: 'At least one group must match this PR. Please update an existing review group, or create a new group.'\n "
        }
    ],
    "stats": {
        "total": 10,
        "additions": 3,
        "deletions": 7
    }
}