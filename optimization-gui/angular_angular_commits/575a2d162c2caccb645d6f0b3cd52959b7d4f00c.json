{
    "author": "harunurhan",
    "message": "feat(common): implement `appendAll()` method on `HttpParams` (#20930)\n\nAdds an `appendAll()` method to `HttpParams` that can construct the HTTP\nrequest/response body from an object of parameters and values.\n\nThis avoids calling `append()` multiple times when multiple parameters\nneed to be added.\n\nFixes #20798\n\nPR Close #20930",
    "sha": "575a2d162c2caccb645d6f0b3cd52959b7d4f00c",
    "files": [
        {
            "sha": "5dfb3aeee715e749ebf03aeb298f5b1f0de217f1",
            "filename": "goldens/public-api/common/http/http.d.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/575a2d162c2caccb645d6f0b3cd52959b7d4f00c/goldens%2Fpublic-api%2Fcommon%2Fhttp%2Fhttp.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/575a2d162c2caccb645d6f0b3cd52959b7d4f00c/goldens%2Fpublic-api%2Fcommon%2Fhttp%2Fhttp.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fcommon%2Fhttp%2Fhttp.d.ts?ref=575a2d162c2caccb645d6f0b3cd52959b7d4f00c",
            "patch": "@@ -1570,6 +1570,9 @@ export declare interface HttpParameterCodec {\n export declare class HttpParams {\n     constructor(options?: HttpParamsOptions);\n     append(param: string, value: string): HttpParams;\n+    appendAll(params: {\n+        [param: string]: string | string[];\n+    }): HttpParams;\n     delete(param: string, value?: string): HttpParams;\n     get(param: string): string | null;\n     getAll(param: string): string[] | null;"
        },
        {
            "sha": "87cdedd61cb35ef5a92dbdbaa5d9fd599ecd6954",
            "filename": "packages/common/http/src/params.ts",
            "status": "modified",
            "additions": 22,
            "deletions": 2,
            "changes": 24,
            "blob_url": "https://github.com/angular/angular/blob/575a2d162c2caccb645d6f0b3cd52959b7d4f00c/packages%2Fcommon%2Fhttp%2Fsrc%2Fparams.ts",
            "raw_url": "https://github.com/angular/angular/raw/575a2d162c2caccb645d6f0b3cd52959b7d4f00c/packages%2Fcommon%2Fhttp%2Fsrc%2Fparams.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Fhttp%2Fsrc%2Fparams.ts?ref=575a2d162c2caccb645d6f0b3cd52959b7d4f00c",
            "patch": "@@ -209,6 +209,26 @@ export class HttpParams {\n     return this.clone({param, value, op: 'a'});\n   }\n \n+  /**\n+   * Constructs a new body with appended values for the given parameter name.\n+   * @param params parameters and values\n+   * @return A new body with the new value.\n+   */\n+  appendAll(params: {[param: string]: string|string[]}): HttpParams {\n+    const updates: Update[] = [];\n+    Object.keys(params).forEach(param => {\n+      const value = params[param];\n+      if (Array.isArray(value)) {\n+        value.forEach(_value => {\n+          updates.push({param, value: _value, op: 'a'});\n+        });\n+      } else {\n+        updates.push({param, value, op: 'a'});\n+      }\n+    });\n+    return this.clone(updates);\n+  }\n+\n   /**\n    * Replaces the value for a parameter.\n    * @param param The parameter name.\n@@ -251,10 +271,10 @@ export class HttpParams {\n         .join('&');\n   }\n \n-  private clone(update: Update): HttpParams {\n+  private clone(update: Update|Update[]): HttpParams {\n     const clone = new HttpParams({encoder: this.encoder} as HttpParamsOptions);\n     clone.cloneFrom = this.cloneFrom || this;\n-    clone.updates = (this.updates || []).concat([update]);\n+    clone.updates = (this.updates || []).concat(update);\n     return clone;\n   }\n "
        },
        {
            "sha": "9cd84226245ec629ccec5802d971d80b36baf2c7",
            "filename": "packages/common/http/test/params_spec.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/575a2d162c2caccb645d6f0b3cd52959b7d4f00c/packages%2Fcommon%2Fhttp%2Ftest%2Fparams_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/575a2d162c2caccb645d6f0b3cd52959b7d4f00c/packages%2Fcommon%2Fhttp%2Ftest%2Fparams_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Fhttp%2Ftest%2Fparams_spec.ts?ref=575a2d162c2caccb645d6f0b3cd52959b7d4f00c",
            "patch": "@@ -36,6 +36,12 @@ import {HttpParams} from '@angular/common/http/src/params';\n         expect(mutated.toString()).toEqual('a=b&a=c');\n       });\n \n+      it('should allow appending all parameters', () => {\n+        const body = new HttpParams({fromString: 'a=a1&b=b1'});\n+        const mutated = body.appendAll({a: ['a2', 'a3'], b: 'b2'});\n+        expect(mutated.toString()).toEqual('a=a1&a=a2&a=a3&b=b1&b=b2');\n+      });\n+\n       it('should allow deletion of parameters', () => {\n         const body = new HttpParams({fromString: 'a=b&c=d&e=f'});\n         const mutated = body.delete('c');"
        }
    ],
    "stats": {
        "total": 33,
        "additions": 31,
        "deletions": 2
    }
}