{
    "author": "swseverance",
    "message": "docs: unsubscribe from observables (#42284)\n\nAdd rxjs `first` operator in `DashboardHeroComponent` unit\ntests to ensure unsubscription from observables\n\nPR Close #42284",
    "sha": "ad12b31c276a9044317058f012424367fc81ef92",
    "files": [
        {
            "sha": "c89744a809fc5cc13a048267ed54236ed2400434",
            "filename": "aio/content/examples/testing/src/app/dashboard/dashboard-hero.component.spec.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 6,
            "changes": 21,
            "blob_url": "https://github.com/angular/angular/blob/ad12b31c276a9044317058f012424367fc81ef92/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fdashboard%2Fdashboard-hero.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/ad12b31c276a9044317058f012424367fc81ef92/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fdashboard%2Fdashboard-hero.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fdashboard%2Fdashboard-hero.component.spec.ts?ref=ad12b31c276a9044317058f012424367fc81ef92",
            "patch": "@@ -3,6 +3,7 @@\n import { DebugElement } from '@angular/core';\n import { ComponentFixture, TestBed, waitForAsync } from '@angular/core/testing';\n import { By } from '@angular/platform-browser';\n+import { first } from 'rxjs/operators';\n \n import { addMatchers, click } from '../../testing';\n import { Hero } from '../model/hero';\n@@ -18,7 +19,7 @@ describe('DashboardHeroComponent class only', () => {\n     const hero: Hero = {id: 42, name: 'Test'};\n     comp.hero = hero;\n \n-    comp.selected.subscribe((selectedHero: Hero) => expect(selectedHero).toBe(hero));\n+    comp.selected.pipe(first()).subscribe((selectedHero: Hero) => expect(selectedHero).toBe(hero));\n     comp.click();\n   });\n   // #enddocregion class-only\n@@ -69,7 +70,7 @@ describe('DashboardHeroComponent when tested directly', () => {\n   // #docregion click-test\n   it('should raise selected event when clicked (triggerEventHandler)', () => {\n     let selectedHero: Hero | undefined;\n-    comp.selected.subscribe((hero: Hero) => selectedHero = hero);\n+    comp.selected.pipe(first()).subscribe((hero: Hero) => selectedHero = hero);\n \n     // #docregion trigger-event-handler\n     heroDe.triggerEventHandler('click', null);\n@@ -81,24 +82,32 @@ describe('DashboardHeroComponent when tested directly', () => {\n   // #docregion click-test-2\n   it('should raise selected event when clicked (element.click)', () => {\n     let selectedHero: Hero | undefined;\n-    comp.selected.subscribe((hero: Hero) => selectedHero = hero);\n+    comp.selected.pipe(first()).subscribe((hero: Hero) => selectedHero = hero);\n \n     heroEl.click();\n     expect(selectedHero).toBe(expectedHero);\n   });\n   // #enddocregion click-test-2\n \n   // #docregion click-test-3\n-  it('should raise selected event when clicked (click helper)', () => {\n+  it('should raise selected event when clicked (click helper with DebugElement)', () => {\n     let selectedHero: Hero | undefined;\n-    comp.selected.subscribe((hero: Hero) => selectedHero = hero);\n+    comp.selected.pipe(first()).subscribe((hero: Hero) => selectedHero = hero);\n \n     click(heroDe);  // click helper with DebugElement\n-    click(heroEl);  // click helper with native element\n \n     expect(selectedHero).toBe(expectedHero);\n   });\n   // #enddocregion click-test-3\n+\n+  it('should raise selected event when clicked (click helper with native element)', () => {\n+    let selectedHero: Hero | undefined;\n+    comp.selected.pipe(first()).subscribe((hero: Hero) => selectedHero = hero);\n+\n+    click(heroEl);  // click helper with native element\n+\n+    expect(selectedHero).toBe(expectedHero);\n+  });\n });\n \n //////////////////"
        }
    ],
    "stats": {
        "total": 21,
        "additions": 15,
        "deletions": 6
    }
}