{
    "author": "petebacondarwin",
    "message": "test(compiler-cli): improve source mapping compliance test failure messages (#40237)\n\nNow, if a source-mapping compliance test fails, the message displays both\nthe path to the generated file, and more helpfully the path to the expected\nfile.\n\nPR Close #40237",
    "sha": "dfe64a0060795e7e59f7562436436306ccd829ef",
    "files": [
        {
            "sha": "74c74aef11228018d02bdf23a1942199cec87394",
            "filename": "packages/compiler-cli/test/compliance/test_helpers/check_expectations.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/dfe64a0060795e7e59f7562436436306ccd829ef/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fcheck_expectations.ts",
            "raw_url": "https://github.com/angular/angular/raw/dfe64a0060795e7e59f7562436436306ccd829ef/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fcheck_expectations.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fcheck_expectations.ts?ref=dfe64a0060795e7e59f7562436436306ccd829ef",
            "patch": "@@ -58,7 +58,7 @@ export function checkExpectations(\n     const generated = fs.readFile(generatedPath);\n     let expected = fs.readFile(expectedPath);\n     expected = replaceMacros(expected);\n-    expected = checkMappings(fs, generated, generatedPath, expected);\n+    expected = checkMappings(fs, generated, generatedPath, expected, expectedPath);\n \n     expectEmit(\n         generated, expected,"
        },
        {
            "sha": "75c43fff1e19eb59051294b5484dccc15cfa1e0f",
            "filename": "packages/compiler-cli/test/compliance/test_helpers/sourcemap_helpers.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/dfe64a0060795e7e59f7562436436306ccd829ef/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fsourcemap_helpers.ts",
            "raw_url": "https://github.com/angular/angular/raw/dfe64a0060795e7e59f7562436436306ccd829ef/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fsourcemap_helpers.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fsourcemap_helpers.ts?ref=dfe64a0060795e7e59f7562436436306ccd829ef",
            "patch": "@@ -33,8 +33,8 @@ import {SourceFileLoader} from '../../../src/ngtsc/sourcemaps';\n  * @returns The content of the expected source file, stripped of the mapping information.\n  */\n export function checkMappings(\n-    fs: FileSystem, generated: string, generatedPath: AbsoluteFsPath,\n-    expectedSource: string): string {\n+    fs: FileSystem, generated: string, generatedPath: AbsoluteFsPath, expectedSource: string,\n+    expectedPath: AbsoluteFsPath): string {\n   const actualMappings = getMappedSegments(fs, generatedPath, generated);\n \n   const {expected, mappings} = extractMappings(fs, expectedSource);\n@@ -49,7 +49,7 @@ export function checkMappings(\n \n   if (failures.length > 0) {\n     throw new Error(\n-        `When checking mappings for ${generatedPath}...\\n\\n` +\n+        `When checking mappings for ${generatedPath} against ${expectedPath} expected...\\n\\n` +\n         `${failures.join('\\n\\n')}\\n\\n` +\n         `All the mappings:\\n\\n${dumpMappings(actualMappings)}`);\n   }"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 4,
        "deletions": 4
    }
}