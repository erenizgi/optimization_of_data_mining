{
    "author": "gkalpak",
    "message": "fix(docs-infra): merge `docs` with `guide` and `start` with `tutorial` in search-results (#40881)\n\nPreviously, the `docs.md` guide was appearing under \"OTHER\" in search\nresults and the results for the `/start*` tutorial pages were appearing\nunder \"START\".\n\nThis commit changes this so that `docs.md` appears under \"GUIDES\" and\n`/start*` appear under \"TUTORIALS\", since that is where they belong\nconceptually.\n\nIt also changes the header of the guides search-area from \"GUIDE\" to\n\"GUIDES\" and that of tutorials from \"TUTORIAL\" to \"TUTORIALS\".\n\nBefore: ![search-results areas before][1]\nAfter: ![search-results areas after][2]\n\n[1]: https://user-images.githubusercontent.com/8604205/107811568-0ce80480-6d77-11eb-8652-e7a947c36e63.png\n[2]: https://user-images.githubusercontent.com/8604205/107811569-0eb1c800-6d77-11eb-9a69-0000a3703c8a.png\n\nPR Close #40881",
    "sha": "64efe38d66d24a9a42c72c681dec38b51c394e29",
    "files": [
        {
            "sha": "af32de5b8866896a48c3c22427248188c9e4574a",
            "filename": "aio/src/app/shared/search-results/search-results.component.spec.ts",
            "status": "modified",
            "additions": 14,
            "deletions": 4,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/64efe38d66d24a9a42c72c681dec38b51c394e29/aio%2Fsrc%2Fapp%2Fshared%2Fsearch-results%2Fsearch-results.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/64efe38d66d24a9a42c72c681dec38b51c394e29/aio%2Fsrc%2Fapp%2Fshared%2Fsearch-results%2Fsearch-results.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fshared%2Fsearch-results%2Fsearch-results.component.spec.ts?ref=64efe38d66d24a9a42c72c681dec38b51c394e29",
            "patch": "@@ -71,23 +71,33 @@ describe('SearchResultsComponent', () => {\n   });\n \n   it('should map the search results into groups based on their containing folder', () => {\n-    setSearchResults('', [guideA, apiD, guideB]);\n+    const startA =  { path: 'start/a', title: 'Start A', deprecated: false, keywords: '', titleWords: '', type: '', topics: '' };\n+    const tutorialA =  { path: 'tutorial/a', title: 'Tutorial A', deprecated: false, keywords: '', titleWords: '', type: '', topics: '' };\n+\n+    setSearchResults('', [guideA, apiD, guideB, startA, tutorialA]);\n     expect(component.searchAreas).toEqual([\n       { name: 'api', priorityPages: [apiD], pages: [] },\n-      { name: 'guide', priorityPages: [guideA, guideB], pages: [] }\n+      { name: 'guides', priorityPages: [guideA, guideB], pages: [] },\n+      { name: 'tutorials', priorityPages: [startA, tutorialA], pages: [] },\n     ]);\n   });\n \n   it('should special case results that are top level folders', () => {\n     setSearchResults('', [\n+      { path: 'docs', title: 'Docs introduction', type: '', keywords: '', titleWords: '', deprecated: false, topics: '' },\n+      { path: 'start', title: 'Getting started', type: '', keywords: '', titleWords: '', deprecated: false, topics: '' },\n       { path: 'tutorial', title: 'Tutorial index', type: '', keywords: '', titleWords: '', deprecated: false, topics: '' },\n       { path: 'tutorial/toh-pt1', title: 'Tutorial - part 1', type: '', keywords: '', titleWords: '', deprecated: false, topics: '' },\n     ]);\n     expect(component.searchAreas).toEqual([\n-      { name: 'tutorial', priorityPages: [\n+      { name: 'guides', priorityPages: [\n+        { path: 'docs', title: 'Docs introduction', type: '', keywords: '', titleWords: '', deprecated: false, topics: '' },\n+      ], pages: [] },\n+      { name: 'tutorials', priorityPages: [\n+        { path: 'start', title: 'Getting started', type: '', keywords: '', titleWords: '', deprecated: false, topics: '' },\n         { path: 'tutorial', title: 'Tutorial index', type: '', keywords: '', titleWords: '', deprecated: false, topics: '' },\n         { path: 'tutorial/toh-pt1', title: 'Tutorial - part 1', type: '', keywords: '', titleWords: '', deprecated: false, topics: '' },\n-      ], pages: [] }\n+      ], pages: [] },\n     ]);\n   });\n "
        },
        {
            "sha": "3d92d5cd94bf7225af614b7f3af603f1f1b3a1e2",
            "filename": "aio/src/app/shared/search-results/search-results.component.ts",
            "status": "modified",
            "additions": 14,
            "deletions": 9,
            "changes": 23,
            "blob_url": "https://github.com/angular/angular/blob/64efe38d66d24a9a42c72c681dec38b51c394e29/aio%2Fsrc%2Fapp%2Fshared%2Fsearch-results%2Fsearch-results.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/64efe38d66d24a9a42c72c681dec38b51c394e29/aio%2Fsrc%2Fapp%2Fshared%2Fsearch-results%2Fsearch-results.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fshared%2Fsearch-results%2Fsearch-results.component.ts?ref=64efe38d66d24a9a42c72c681dec38b51c394e29",
            "patch": "@@ -28,9 +28,17 @@ export class SearchResultsComponent implements OnChanges {\n   @Output()\n   resultSelected = new EventEmitter<SearchResult>();\n \n-  readonly defaultArea = 'other';\n   searchState: SearchState = SearchState.InProgress;\n-  readonly topLevelFolders = ['api', 'cli', 'errors', 'guide', 'start', 'tutorial'];\n+  readonly defaultArea = 'other';\n+  readonly folderToAreaMap: Record<string, string> = {\n+      api: 'api',\n+      cli: 'cli',\n+      docs: 'guides',\n+      errors: 'errors',\n+      guide: 'guides',\n+      start: 'tutorials',\n+      tutorial: 'tutorials',\n+  };\n   searchAreas: SearchArea[] = [];\n \n   ngOnChanges() {\n@@ -59,7 +67,7 @@ export class SearchResultsComponent implements OnChanges {\n     const searchAreaMap: { [key: string]: SearchResult[] } = {};\n     search.results.forEach(result => {\n       if (!result.title) { return; } // bad data; should fix\n-      const areaName = this.computeAreaName(result) || this.defaultArea;\n+      const areaName = this.computeAreaName(result);\n       const area = searchAreaMap[areaName] = searchAreaMap[areaName] || [];\n       area.push(result);\n     });\n@@ -75,12 +83,9 @@ export class SearchResultsComponent implements OnChanges {\n   }\n \n   // Split the search result path and use the top level folder, if there is one, as the area name.\n-  private computeAreaName(result: SearchResult) {\n-    if (this.topLevelFolders.indexOf(result.path) !== -1) {\n-      return result.path;\n-    }\n-    const [areaName, rest] = result.path.split('/', 2);\n-    return rest && areaName;\n+  private computeAreaName(result: SearchResult): string {\n+    const [folder] = result.path.split('/', 1);\n+    return this.folderToAreaMap[folder] ?? this.defaultArea;\n   }\n }\n "
        }
    ],
    "stats": {
        "total": 41,
        "additions": 28,
        "deletions": 13
    }
}