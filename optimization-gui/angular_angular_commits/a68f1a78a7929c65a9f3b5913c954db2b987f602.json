{
    "author": "petebacondarwin",
    "message": "refactor(compiler): element.startSourceSpan is required (#38581)\n\nPreviously, the `startSourceSpan` property could be null\nbut in reality it is always well defined - except for a legacy\ncase in the old i18n extraction/merging code, where the\ntypings for source-spans are already being undermined.\n\nMaking this property non-null, simplifies code elsewhere\nin the project.\n\nPR Close #38581",
    "sha": "a68f1a78a7929c65a9f3b5913c954db2b987f602",
    "files": [
        {
            "sha": "66a8e7a1df180bd7b5ecb15cad0ed5e5b72e108a",
            "filename": "packages/compiler/src/i18n/extractor_merger.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Fsrc%2Fi18n%2Fextractor_merger.ts",
            "raw_url": "https://github.com/angular/angular/raw/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Fsrc%2Fi18n%2Fextractor_merger.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fi18n%2Fextractor_merger.ts?ref=a68f1a78a7929c65a9f3b5913c954db2b987f602",
            "patch": "@@ -124,7 +124,7 @@ class _Visitor implements html.Visitor {\n     this._translations = translations;\n \n     // Construct a single fake root element\n-    const wrapper = new html.Element('wrapper', [], nodes, undefined!, undefined, undefined);\n+    const wrapper = new html.Element('wrapper', [], nodes, undefined!, undefined!, undefined);\n \n     const translatedNode = wrapper.visit(this, null);\n \n@@ -492,7 +492,7 @@ class _Visitor implements html.Visitor {\n   }\n \n   private _reportError(node: html.Node, msg: string): void {\n-    this._errors.push(new I18nError(node.sourceSpan!, msg));\n+    this._errors.push(new I18nError(node.sourceSpan, msg));\n   }\n }\n "
        },
        {
            "sha": "d6d93f32f81657264fc5a58a9359a79f7216e0c2",
            "filename": "packages/compiler/src/i18n/i18n_parser.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Fsrc%2Fi18n%2Fi18n_parser.ts",
            "raw_url": "https://github.com/angular/angular/raw/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Fsrc%2Fi18n%2Fi18n_parser.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fi18n%2Fi18n_parser.ts?ref=a68f1a78a7929c65a9f3b5913c954db2b987f602",
            "patch": "@@ -83,7 +83,7 @@ class _I18nVisitor implements html.Visitor {\n     const isVoid: boolean = getHtmlTagDefinition(el.name).isVoid;\n     const startPhName =\n         context.placeholderRegistry.getStartTagPlaceholderName(el.name, attrs, isVoid);\n-    context.placeholderToContent[startPhName] = el.sourceSpan!.toString();\n+    context.placeholderToContent[startPhName] = el.sourceSpan.toString();\n \n     let closePhName = '';\n \n@@ -93,7 +93,7 @@ class _I18nVisitor implements html.Visitor {\n     }\n \n     const node = new i18n.TagPlaceholder(\n-        el.name, attrs, startPhName, closePhName, children, isVoid, el.sourceSpan!);\n+        el.name, attrs, startPhName, closePhName, children, isVoid, el.sourceSpan);\n     return context.visitNodeFn(el, node);\n   }\n \n@@ -103,7 +103,7 @@ class _I18nVisitor implements html.Visitor {\n   }\n \n   visitText(text: html.Text, context: I18nMessageVisitorContext): i18n.Node {\n-    const node = this._visitTextWithInterpolation(text.value, text.sourceSpan!, context);\n+    const node = this._visitTextWithInterpolation(text.value, text.sourceSpan, context);\n     return context.visitNodeFn(text, node);\n   }\n "
        },
        {
            "sha": "8fca51e8d6a48c6fb9ca4c2597baee9508f5d4a7",
            "filename": "packages/compiler/src/i18n/serializers/xliff.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Fsrc%2Fi18n%2Fserializers%2Fxliff.ts",
            "raw_url": "https://github.com/angular/angular/raw/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Fsrc%2Fi18n%2Fserializers%2Fxliff.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fi18n%2Fserializers%2Fxliff.ts?ref=a68f1a78a7929c65a9f3b5913c954db2b987f602",
            "patch": "@@ -231,9 +231,9 @@ class XliffParser implements ml.Visitor {\n         break;\n \n       case _TARGET_TAG:\n-        const innerTextStart = element.startSourceSpan!.end.offset;\n+        const innerTextStart = element.startSourceSpan.end.offset;\n         const innerTextEnd = element.endSourceSpan!.start.offset;\n-        const content = element.startSourceSpan!.start.file.content;\n+        const content = element.startSourceSpan.start.file.content;\n         const innerText = content.slice(innerTextStart, innerTextEnd);\n         this._unitMlString = innerText;\n         break;\n@@ -264,7 +264,7 @@ class XliffParser implements ml.Visitor {\n   visitExpansionCase(expansionCase: ml.ExpansionCase, context: any): any {}\n \n   private _addError(node: ml.Node, message: string): void {\n-    this._errors.push(new I18nError(node.sourceSpan!, message));\n+    this._errors.push(new I18nError(node.sourceSpan, message));\n   }\n }\n \n@@ -288,14 +288,14 @@ class XmlToI18n implements ml.Visitor {\n   }\n \n   visitText(text: ml.Text, context: any) {\n-    return new i18n.Text(text.value, text.sourceSpan!);\n+    return new i18n.Text(text.value, text.sourceSpan);\n   }\n \n   visitElement(el: ml.Element, context: any): i18n.Placeholder|ml.Node[]|null {\n     if (el.name === _PLACEHOLDER_TAG) {\n       const nameAttr = el.attrs.find((attr) => attr.name === 'id');\n       if (nameAttr) {\n-        return new i18n.Placeholder('', nameAttr.value, el.sourceSpan!);\n+        return new i18n.Placeholder('', nameAttr.value, el.sourceSpan);\n       }\n \n       this._addError(el, `<${_PLACEHOLDER_TAG}> misses the \"id\" attribute`);\n@@ -332,7 +332,7 @@ class XmlToI18n implements ml.Visitor {\n   visitAttribute(attribute: ml.Attribute, context: any) {}\n \n   private _addError(node: ml.Node, message: string): void {\n-    this._errors.push(new I18nError(node.sourceSpan!, message));\n+    this._errors.push(new I18nError(node.sourceSpan, message));\n   }\n }\n "
        },
        {
            "sha": "f3499e7fcd8edfb36d1812a732a9f75bf2611e72",
            "filename": "packages/compiler/src/i18n/serializers/xliff2.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Fsrc%2Fi18n%2Fserializers%2Fxliff2.ts",
            "raw_url": "https://github.com/angular/angular/raw/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Fsrc%2Fi18n%2Fserializers%2Fxliff2.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fi18n%2Fserializers%2Fxliff2.ts?ref=a68f1a78a7929c65a9f3b5913c954db2b987f602",
            "patch": "@@ -246,9 +246,9 @@ class Xliff2Parser implements ml.Visitor {\n         break;\n \n       case _TARGET_TAG:\n-        const innerTextStart = element.startSourceSpan!.end.offset;\n+        const innerTextStart = element.startSourceSpan.end.offset;\n         const innerTextEnd = element.endSourceSpan!.start.offset;\n-        const content = element.startSourceSpan!.start.file.content;\n+        const content = element.startSourceSpan.start.file.content;\n         const innerText = content.slice(innerTextStart, innerTextEnd);\n         this._unitMlString = innerText;\n         break;"
        },
        {
            "sha": "ed7eab95f1d7d1e554490fbe81ecb590c29888ed",
            "filename": "packages/compiler/src/i18n/serializers/xtb.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Fsrc%2Fi18n%2Fserializers%2Fxtb.ts",
            "raw_url": "https://github.com/angular/angular/raw/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Fsrc%2Fi18n%2Fserializers%2Fxtb.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fi18n%2Fserializers%2Fxtb.ts?ref=a68f1a78a7929c65a9f3b5913c954db2b987f602",
            "patch": "@@ -130,9 +130,9 @@ class XtbParser implements ml.Visitor {\n           if (this._msgIdToHtml.hasOwnProperty(id)) {\n             this._addError(element, `Duplicated translations for msg ${id}`);\n           } else {\n-            const innerTextStart = element.startSourceSpan!.end.offset;\n+            const innerTextStart = element.startSourceSpan.end.offset;\n             const innerTextEnd = element.endSourceSpan!.start.offset;\n-            const content = element.startSourceSpan!.start.file.content;\n+            const content = element.startSourceSpan.start.file.content;\n             const innerText = content.slice(innerTextStart!, innerTextEnd!);\n             this._msgIdToHtml[id] = innerText;\n           }\n@@ -155,7 +155,7 @@ class XtbParser implements ml.Visitor {\n   visitExpansionCase(expansionCase: ml.ExpansionCase, context: any): any {}\n \n   private _addError(node: ml.Node, message: string): void {\n-    this._errors.push(new I18nError(node.sourceSpan!, message));\n+    this._errors.push(new I18nError(node.sourceSpan, message));\n   }\n }\n \n@@ -179,7 +179,7 @@ class XmlToI18n implements ml.Visitor {\n   }\n \n   visitText(text: ml.Text, context: any) {\n-    return new i18n.Text(text.value, text.sourceSpan!);\n+    return new i18n.Text(text.value, text.sourceSpan);\n   }\n \n   visitExpansion(icu: ml.Expansion, context: any) {\n@@ -203,7 +203,7 @@ class XmlToI18n implements ml.Visitor {\n     if (el.name === _PLACEHOLDER_TAG) {\n       const nameAttr = el.attrs.find((attr) => attr.name === 'name');\n       if (nameAttr) {\n-        return new i18n.Placeholder('', nameAttr.value, el.sourceSpan!);\n+        return new i18n.Placeholder('', nameAttr.value, el.sourceSpan);\n       }\n \n       this._addError(el, `<${_PLACEHOLDER_TAG}> misses the \"name\" attribute`);\n@@ -218,6 +218,6 @@ class XmlToI18n implements ml.Visitor {\n   visitAttribute(attribute: ml.Attribute, context: any) {}\n \n   private _addError(node: ml.Node, message: string): void {\n-    this._errors.push(new I18nError(node.sourceSpan!, message));\n+    this._errors.push(new I18nError(node.sourceSpan, message));\n   }\n }"
        },
        {
            "sha": "ead5c11cce5b0e00998d9d504f5044722fb0fead",
            "filename": "packages/compiler/src/ml_parser/ast.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Fsrc%2Fml_parser%2Fast.ts",
            "raw_url": "https://github.com/angular/angular/raw/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Fsrc%2Fml_parser%2Fast.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fml_parser%2Fast.ts?ref=a68f1a78a7929c65a9f3b5913c954db2b987f602",
            "patch": "@@ -64,7 +64,7 @@ export class Attribute extends NodeWithI18n {\n export class Element extends NodeWithI18n {\n   constructor(\n       public name: string, public attrs: Attribute[], public children: Node[],\n-      sourceSpan: ParseSourceSpan, public startSourceSpan: ParseSourceSpan|null = null,\n+      sourceSpan: ParseSourceSpan, public startSourceSpan: ParseSourceSpan,\n       public endSourceSpan: ParseSourceSpan|null = null, i18n?: I18nMeta) {\n     super(sourceSpan, i18n);\n   }"
        },
        {
            "sha": "996dacb5bd0fb7bfbafabfb13d807d81b92d6f60",
            "filename": "packages/compiler/src/render3/r3_ast.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 8,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Fsrc%2Frender3%2Fr3_ast.ts",
            "raw_url": "https://github.com/angular/angular/raw/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Fsrc%2Frender3%2Fr3_ast.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Frender3%2Fr3_ast.ts?ref=a68f1a78a7929c65a9f3b5913c954db2b987f602",
            "patch": "@@ -79,13 +79,8 @@ export class Element implements Node {\n   constructor(\n       public name: string, public attributes: TextAttribute[], public inputs: BoundAttribute[],\n       public outputs: BoundEvent[], public children: Node[], public references: Reference[],\n-      public sourceSpan: ParseSourceSpan, public startSourceSpan: ParseSourceSpan|null,\n-      public endSourceSpan: ParseSourceSpan|null, public i18n?: I18nMeta) {\n-    // If the element is empty then the source span should include any closing tag\n-    if (children.length === 0 && startSourceSpan && endSourceSpan) {\n-      this.sourceSpan = new ParseSourceSpan(sourceSpan.start, endSourceSpan.end);\n-    }\n-  }\n+      public sourceSpan: ParseSourceSpan, public startSourceSpan: ParseSourceSpan,\n+      public endSourceSpan: ParseSourceSpan|null, public i18n?: I18nMeta) {}\n   visit<Result>(visitor: Visitor<Result>): Result {\n     return visitor.visitElement(this);\n   }\n@@ -96,7 +91,7 @@ export class Template implements Node {\n       public tagName: string, public attributes: TextAttribute[], public inputs: BoundAttribute[],\n       public outputs: BoundEvent[], public templateAttrs: (BoundAttribute|TextAttribute)[],\n       public children: Node[], public references: Reference[], public variables: Variable[],\n-      public sourceSpan: ParseSourceSpan, public startSourceSpan: ParseSourceSpan|null,\n+      public sourceSpan: ParseSourceSpan, public startSourceSpan: ParseSourceSpan,\n       public endSourceSpan: ParseSourceSpan|null, public i18n?: I18nMeta) {}\n   visit<Result>(visitor: Visitor<Result>): Result {\n     return visitor.visitTemplate(this);"
        },
        {
            "sha": "5c6bd78918f9a72544ac8fd7d6abc55dd6dd8bae",
            "filename": "packages/compiler/src/template_parser/template_parser.ts",
            "status": "modified",
            "additions": 16,
            "deletions": 16,
            "changes": 32,
            "blob_url": "https://github.com/angular/angular/blob/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Fsrc%2Ftemplate_parser%2Ftemplate_parser.ts",
            "raw_url": "https://github.com/angular/angular/raw/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Fsrc%2Ftemplate_parser%2Ftemplate_parser.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Ftemplate_parser%2Ftemplate_parser.ts?ref=a68f1a78a7929c65a9f3b5913c954db2b987f602",
            "patch": "@@ -244,9 +244,9 @@ class TemplateParseVisitor implements html.Visitor {\n   visitText(text: html.Text, parent: ElementContext): any {\n     const ngContentIndex = parent.findNgContentIndex(TEXT_CSS_SELECTOR())!;\n     const valueNoNgsp = replaceNgsp(text.value);\n-    const expr = this._bindingParser.parseInterpolation(valueNoNgsp, text.sourceSpan!);\n-    return expr ? new t.BoundTextAst(expr, ngContentIndex, text.sourceSpan!) :\n-                  new t.TextAst(valueNoNgsp, ngContentIndex, text.sourceSpan!);\n+    const expr = this._bindingParser.parseInterpolation(valueNoNgsp, text.sourceSpan);\n+    return expr ? new t.BoundTextAst(expr, ngContentIndex, text.sourceSpan) :\n+                  new t.TextAst(valueNoNgsp, ngContentIndex, text.sourceSpan);\n   }\n \n   visitAttribute(attribute: html.Attribute, context: any): any {\n@@ -335,14 +335,14 @@ class TemplateParseVisitor implements html.Visitor {\n     const boundDirectivePropNames = new Set<string>();\n     const directiveAsts = this._createDirectiveAsts(\n         isTemplateElement, element.name, directiveMetas, elementOrDirectiveProps,\n-        elementOrDirectiveRefs, element.sourceSpan!, references, boundDirectivePropNames);\n+        elementOrDirectiveRefs, element.sourceSpan, references, boundDirectivePropNames);\n     const elementProps: t.BoundElementPropertyAst[] = this._createElementPropertyAsts(\n         element.name, elementOrDirectiveProps, boundDirectivePropNames);\n     const isViewRoot = parent.isTemplateElement || hasInlineTemplates;\n \n     const providerContext = new ProviderElementContext(\n         this.providerViewContext, parent.providerContext!, isViewRoot, directiveAsts, attrs,\n-        references, isTemplateElement, queryStartIndex, element.sourceSpan!);\n+        references, isTemplateElement, queryStartIndex, element.sourceSpan);\n \n     const children: t.TemplateAst[] = html.visitAll(\n         preparsedElement.nonBindable ? NON_BINDABLE_VISITOR : this, element.children,\n@@ -360,26 +360,26 @@ class TemplateParseVisitor implements html.Visitor {\n     if (preparsedElement.type === PreparsedElementType.NG_CONTENT) {\n       // `<ng-content>` element\n       if (element.children && !element.children.every(_isEmptyTextNode)) {\n-        this._reportError(`<ng-content> element cannot have content.`, element.sourceSpan!);\n+        this._reportError(`<ng-content> element cannot have content.`, element.sourceSpan);\n       }\n \n       parsedElement = new t.NgContentAst(\n-          this.ngContentCount++, hasInlineTemplates ? null! : ngContentIndex, element.sourceSpan!);\n+          this.ngContentCount++, hasInlineTemplates ? null! : ngContentIndex, element.sourceSpan);\n     } else if (isTemplateElement) {\n       // `<ng-template>` element\n       this._assertAllEventsPublishedByDirectives(directiveAsts, events);\n       this._assertNoComponentsNorElementBindingsOnTemplate(\n-          directiveAsts, elementProps, element.sourceSpan!);\n+          directiveAsts, elementProps, element.sourceSpan);\n \n       parsedElement = new t.EmbeddedTemplateAst(\n           attrs, events, references, elementVars, providerContext.transformedDirectiveAsts,\n           providerContext.transformProviders, providerContext.transformedHasViewContainer,\n           providerContext.queryMatches, children, hasInlineTemplates ? null! : ngContentIndex,\n-          element.sourceSpan!);\n+          element.sourceSpan);\n     } else {\n       // element other than `<ng-content>` and `<ng-template>`\n       this._assertElementExists(matchElement, element);\n-      this._assertOnlyOneComponent(directiveAsts, element.sourceSpan!);\n+      this._assertOnlyOneComponent(directiveAsts, element.sourceSpan);\n \n       const ngContentIndex =\n           hasInlineTemplates ? null : parent.findNgContentIndex(projectionSelector);\n@@ -397,22 +397,22 @@ class TemplateParseVisitor implements html.Visitor {\n       const {directives} = this._parseDirectives(this.selectorMatcher, templateSelector);\n       const templateBoundDirectivePropNames = new Set<string>();\n       const templateDirectiveAsts = this._createDirectiveAsts(\n-          true, elName, directives, templateElementOrDirectiveProps, [], element.sourceSpan!, [],\n+          true, elName, directives, templateElementOrDirectiveProps, [], element.sourceSpan, [],\n           templateBoundDirectivePropNames);\n       const templateElementProps: t.BoundElementPropertyAst[] = this._createElementPropertyAsts(\n           elName, templateElementOrDirectiveProps, templateBoundDirectivePropNames);\n       this._assertNoComponentsNorElementBindingsOnTemplate(\n-          templateDirectiveAsts, templateElementProps, element.sourceSpan!);\n+          templateDirectiveAsts, templateElementProps, element.sourceSpan);\n       const templateProviderContext = new ProviderElementContext(\n           this.providerViewContext, parent.providerContext!, parent.isTemplateElement,\n-          templateDirectiveAsts, [], [], true, templateQueryStartIndex, element.sourceSpan!);\n+          templateDirectiveAsts, [], [], true, templateQueryStartIndex, element.sourceSpan);\n       templateProviderContext.afterElement();\n \n       parsedElement = new t.EmbeddedTemplateAst(\n           [], [], [], templateElementVars, templateProviderContext.transformedDirectiveAsts,\n           templateProviderContext.transformProviders,\n           templateProviderContext.transformedHasViewContainer, templateProviderContext.queryMatches,\n-          [parsedElement], ngContentIndex, element.sourceSpan!);\n+          [parsedElement], ngContentIndex, element.sourceSpan);\n     }\n \n     return parsedElement;\n@@ -707,7 +707,7 @@ class TemplateParseVisitor implements html.Visitor {\n         errorMsg +=\n             `2. To allow any element add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.`;\n       }\n-      this._reportError(errorMsg, element.sourceSpan!);\n+      this._reportError(errorMsg, element.sourceSpan);\n     }\n   }\n \n@@ -815,7 +815,7 @@ class NonBindableVisitor implements html.Visitor {\n \n   visitText(text: html.Text, parent: ElementContext): t.TextAst {\n     const ngContentIndex = parent.findNgContentIndex(TEXT_CSS_SELECTOR())!;\n-    return new t.TextAst(text.value, ngContentIndex, text.sourceSpan!);\n+    return new t.TextAst(text.value, ngContentIndex, text.sourceSpan);\n   }\n \n   visitExpansion(expansion: html.Expansion, context: any): any {"
        },
        {
            "sha": "a6f7ca65df5bd5dc6763d95ccf0b014b6f0086cc",
            "filename": "packages/compiler/test/ml_parser/ast_spec_utils.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Ftest%2Fml_parser%2Fast_spec_utils.ts",
            "raw_url": "https://github.com/angular/angular/raw/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Ftest%2Fml_parser%2Fast_spec_utils.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fml_parser%2Fast_spec_utils.ts?ref=a68f1a78a7929c65a9f3b5913c954db2b987f602",
            "patch": "@@ -42,7 +42,7 @@ class _Humanizer implements html.Visitor {\n   visitElement(element: html.Element, context: any): any {\n     const res = this._appendContext(element, [html.Element, element.name, this.elDepth++]);\n     if (this.includeSourceSpan) {\n-      res.push(element.startSourceSpan?.toString() ?? null);\n+      res.push(element.startSourceSpan.toString() ?? null);\n       res.push(element.endSourceSpan?.toString() ?? null);\n     }\n     this.result.push(res);\n@@ -82,7 +82,7 @@ class _Humanizer implements html.Visitor {\n \n   private _appendContext(ast: html.Node, input: any[]): any[] {\n     if (!this.includeSourceSpan) return input;\n-    input.push(ast.sourceSpan!.toString());\n+    input.push(ast.sourceSpan.toString());\n     return input;\n   }\n }"
        },
        {
            "sha": "b3eb04fbe3916536ea93c97730ac46f55d52086f",
            "filename": "packages/compiler/test/ml_parser/html_parser_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Ftest%2Fml_parser%2Fhtml_parser_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Ftest%2Fml_parser%2Fhtml_parser_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fml_parser%2Fhtml_parser_spec.ts?ref=a68f1a78a7929c65a9f3b5913c954db2b987f602",
            "patch": "@@ -667,8 +667,8 @@ import {humanizeDom, humanizeDomSourceSpans, humanizeLineColumn} from './ast_spe\n         it('should set the start and end source spans', () => {\n           const node = <html.Element>parser.parse('<div>a</div>', 'TestComp').rootNodes[0];\n \n-          expect(node.startSourceSpan!.start.offset).toEqual(0);\n-          expect(node.startSourceSpan!.end.offset).toEqual(5);\n+          expect(node.startSourceSpan.start.offset).toEqual(0);\n+          expect(node.startSourceSpan.end.offset).toEqual(5);\n \n           expect(node.endSourceSpan!.start.offset).toEqual(6);\n           expect(node.endSourceSpan!.end.offset).toEqual(12);"
        },
        {
            "sha": "d9e8ed2407228c981eeb1422dc92b1fa1530529c",
            "filename": "packages/compiler/test/ml_parser/icu_ast_expander_spec.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Ftest%2Fml_parser%2Ficu_ast_expander_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Ftest%2Fml_parser%2Ficu_ast_expander_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fml_parser%2Ficu_ast_expander_spec.ts?ref=a68f1a78a7929c65a9f3b5913c954db2b987f602",
            "patch": "@@ -56,10 +56,10 @@ import {humanizeNodes} from './ast_spec_utils';\n       const nodes = expand(`{messages.length, plural,=0 {<b>bold</b>}}`).nodes;\n \n       const container: html.Element = <html.Element>nodes[0];\n-      expect(container.sourceSpan!.start.col).toEqual(0);\n-      expect(container.sourceSpan!.end.col).toEqual(42);\n-      expect(container.startSourceSpan!.start.col).toEqual(0);\n-      expect(container.startSourceSpan!.end.col).toEqual(42);\n+      expect(container.sourceSpan.start.col).toEqual(0);\n+      expect(container.sourceSpan.end.col).toEqual(42);\n+      expect(container.startSourceSpan.start.col).toEqual(0);\n+      expect(container.startSourceSpan.end.col).toEqual(42);\n       expect(container.endSourceSpan!.start.col).toEqual(0);\n       expect(container.endSourceSpan!.end.col).toEqual(42);\n \n@@ -68,15 +68,15 @@ import {humanizeNodes} from './ast_spec_utils';\n       expect(switchExp.sourceSpan.end.col).toEqual(16);\n \n       const template: html.Element = <html.Element>container.children[0];\n-      expect(template.sourceSpan!.start.col).toEqual(25);\n-      expect(template.sourceSpan!.end.col).toEqual(41);\n+      expect(template.sourceSpan.start.col).toEqual(25);\n+      expect(template.sourceSpan.end.col).toEqual(41);\n \n       const switchCheck = template.attrs[0];\n       expect(switchCheck.sourceSpan.start.col).toEqual(25);\n       expect(switchCheck.sourceSpan.end.col).toEqual(28);\n \n       const b: html.Element = <html.Element>template.children[0];\n-      expect(b.sourceSpan!.start.col).toEqual(29);\n+      expect(b.sourceSpan.start.col).toEqual(29);\n       expect(b.endSourceSpan!.end.col).toEqual(40);\n     });\n "
        },
        {
            "sha": "17f75b0957facf4a70ffc0d836e8331edfaca1f6",
            "filename": "packages/compiler/test/template_parser/template_parser_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Ftest%2Ftemplate_parser%2Ftemplate_parser_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Fcompiler%2Ftest%2Ftemplate_parser%2Ftemplate_parser_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Ftemplate_parser%2Ftemplate_parser_spec.ts?ref=a68f1a78a7929c65a9f3b5913c954db2b987f602",
            "patch": "@@ -140,7 +140,7 @@ class TemplateHumanizer implements TemplateAstVisitor {\n \n   private _appendSourceSpan(ast: TemplateAst, input: any[]): any[] {\n     if (!this.includeSourceSpan) return input;\n-    input.push(ast.sourceSpan!.toString());\n+    input.push(ast.sourceSpan.toString());\n     return input;\n   }\n }"
        },
        {
            "sha": "6025848b9d182400c763f2eeb08a603198c6251c",
            "filename": "packages/language-service/src/completions.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Flanguage-service%2Fsrc%2Fcompletions.ts",
            "raw_url": "https://github.com/angular/angular/raw/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Flanguage-service%2Fsrc%2Fcompletions.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flanguage-service%2Fsrc%2Fcompletions.ts?ref=a68f1a78a7929c65a9f3b5913c954db2b987f602",
            "patch": "@@ -65,7 +65,7 @@ function getBoundedWordSpan(\n     // The HTML tag may include `-` (e.g. `app-root`),\n     // so use the HtmlAst to get the span before ayazhafiz refactor the code.\n     return {\n-      start: templateInfo.template.span.start + ast.startSourceSpan!.start.offset + 1,\n+      start: templateInfo.template.span.start + ast.startSourceSpan.start.offset + 1,\n       length: ast.name.length\n     };\n   }"
        },
        {
            "sha": "c310da8459a7d4b3898bb8244cfc0193e4ef453a",
            "filename": "packages/localize/src/tools/src/translate/translation_files/translation_parsers/translation_utils.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Ftranslation_files%2Ftranslation_parsers%2Ftranslation_utils.ts",
            "raw_url": "https://github.com/angular/angular/raw/a68f1a78a7929c65a9f3b5913c954db2b987f602/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Ftranslation_files%2Ftranslation_parsers%2Ftranslation_utils.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Ftranslation_files%2Ftranslation_parsers%2Ftranslation_utils.ts?ref=a68f1a78a7929c65a9f3b5913c954db2b987f602",
            "patch": "@@ -48,7 +48,7 @@ export function parseInnerRange(element: Element): ParseTreeResult {\n  * @param element The element whose inner range we want to compute.\n  */\n function getInnerRange(element: Element): LexerRange {\n-  const start = element.startSourceSpan!.end;\n+  const start = element.startSourceSpan.end;\n   const end = element.endSourceSpan!.start;\n   return {\n     startPos: start.offset,"
        }
    ],
    "stats": {
        "total": 111,
        "additions": 53,
        "deletions": 58
    }
}