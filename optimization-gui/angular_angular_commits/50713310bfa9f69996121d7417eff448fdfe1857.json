{
    "author": "devversion",
    "message": "build: use platform from shared dev-infra package for remote execution (#41767)\n\nUses the new shared RBE platform from the dev-infra package.\n\nPR Close #41767",
    "sha": "50713310bfa9f69996121d7417eff448fdfe1857",
    "files": [
        {
            "sha": "2647e1163d1e57ae39182ed880280c9af9f31fb2",
            "filename": ".bazelrc",
            "status": "modified",
            "additions": 5,
            "deletions": 9,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/50713310bfa9f69996121d7417eff448fdfe1857/.bazelrc",
            "raw_url": "https://github.com/angular/angular/raw/50713310bfa9f69996121d7417eff448fdfe1857/.bazelrc",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.bazelrc?ref=50713310bfa9f69996121d7417eff448fdfe1857",
            "patch": "@@ -114,15 +114,11 @@ build:remote --cpu=k8\n build:remote --host_cpu=k8\n \n # Toolchain and platform related flags\n-build:remote --host_javabase=@rbe_ubuntu1604_angular//java:jdk\n-build:remote --javabase=@rbe_ubuntu1604_angular//java:jdk\n-build:remote --host_java_toolchain=@bazel_tools//tools/jdk:toolchain_hostjdk8\n-build:remote --java_toolchain=@bazel_tools//tools/jdk:toolchain_hostjdk8\n-build:remote --crosstool_top=@rbe_ubuntu1604_angular//cc:toolchain\n-build:remote --extra_toolchains=@rbe_ubuntu1604_angular//config:cc-toolchain\n-build:remote --extra_execution_platforms=//tools:rbe_ubuntu1604-angular\n-build:remote --host_platform=//tools:rbe_ubuntu1604-angular\n-build:remote --platforms=//tools:rbe_ubuntu1604-angular\n+build:remote --crosstool_top=//dev-infra/bazel/remote-execution/cpp:cc_toolchain_suite\n+build:remote --extra_toolchains=//dev-infra/bazel/remote-execution/cpp:cc_toolchain\n+build:remote --extra_execution_platforms=//dev-infra/bazel/remote-execution:platform\n+build:remote --host_platform=//dev-infra/bazel/remote-execution:platform\n+build:remote --platforms=//dev-infra/bazel/remote-execution:platform\n \n # Remote instance and caching\n build:remote --remote_instance_name=projects/internal-200822/instances/default_instance"
        },
        {
            "sha": "674ee28179168e826786de66d537f1d5f613089f",
            "filename": "WORKSPACE",
            "status": "modified",
            "additions": 0,
            "deletions": 24,
            "changes": 24,
            "blob_url": "https://github.com/angular/angular/blob/50713310bfa9f69996121d7417eff448fdfe1857/WORKSPACE",
            "raw_url": "https://github.com/angular/angular/raw/50713310bfa9f69996121d7417eff448fdfe1857/WORKSPACE",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/WORKSPACE?ref=50713310bfa9f69996121d7417eff448fdfe1857",
            "patch": "@@ -62,27 +62,3 @@ sass_repositories()\n load(\"@io_bazel_skydoc//skylark:skylark.bzl\", \"skydoc_repositories\")\n \n skydoc_repositories()\n-\n-load(\"@bazel_toolchains//rules:environments.bzl\", \"clang_env\")\n-load(\"@bazel_toolchains//rules:rbe_repo.bzl\", \"rbe_autoconfig\")\n-\n-rbe_autoconfig(\n-    name = \"rbe_ubuntu1604_angular\",\n-    # Need to specify a base container digest in order to ensure that we can use the checked-in\n-    # platform configurations for the \"ubuntu16_04\" image. Otherwise the autoconfig rule would\n-    # need to pull the image and run it in order determine the toolchain configuration. See:\n-    # https://github.com/bazelbuild/bazel-toolchains/blob/4.0.0/configs/ubuntu16_04_clang/versions.bzl\n-    base_container_digest = \"sha256:f6568d8168b14aafd1b707019927a63c2d37113a03bcee188218f99bd0327ea1\",\n-    # Note that if you change the `digest`, you might also need to update the\n-    # `base_container_digest` to make sure marketplace.gcr.io/google/rbe-ubuntu16-04-webtest:<digest>\n-    # and marketplace.gcr.io/google/rbe-ubuntu16-04:<base_container_digest> have\n-    # the same Clang and JDK installed. Clang is needed because of the dependency on\n-    # @com_google_protobuf. Java is needed for the Bazel's test executor Java tool.\n-    digest = \"sha256:dddaaddbe07a61c2517f9b08c4977fc23c4968fcb6c0b8b5971e955d2de7a961\",\n-    env = clang_env(),\n-    registry = \"marketplace.gcr.io\",\n-    # We can't use the default \"ubuntu16_04\" RBE image provided by the autoconfig because we need\n-    # a specific Linux kernel that comes with \"libx11\" in order to run headless browser tests.\n-    repository = \"google/rbe-ubuntu16-04-webtest\",\n-    use_checked_in_confs = \"Force\",\n-)"
        },
        {
            "sha": "64bad9c349ec896f2dbb0feb573aeab10000f2a0",
            "filename": "packages/bazel/package.bzl",
            "status": "modified",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/50713310bfa9f69996121d7417eff448fdfe1857/packages%2Fbazel%2Fpackage.bzl",
            "raw_url": "https://github.com/angular/angular/raw/50713310bfa9f69996121d7417eff448fdfe1857/packages%2Fbazel%2Fpackage.bzl",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fbazel%2Fpackage.bzl?ref=50713310bfa9f69996121d7417eff448fdfe1857",
            "patch": "@@ -24,19 +24,6 @@ def rules_angular_dev_dependencies():\n     shorter.\n     \"\"\"\n \n-    # Needed for Remote Execution\n-    # https://github.com/bazelbuild/bazel-toolchains/releases\n-    _maybe(\n-        http_archive,\n-        name = \"bazel_toolchains\",\n-        sha256 = \"1adf5db506a7e3c465a26988514cfc3971af6d5b3c2218925cd6e71ee443fc3f\",\n-        strip_prefix = \"bazel-toolchains-4.0.0\",\n-        urls = [\n-            \"https://mirror.bazel.build/github.com/bazelbuild/bazel-toolchains/releases/download/4.0.0/bazel-toolchains-4.0.0.tar.gz\",\n-            \"https://github.com/bazelbuild/bazel-toolchains/releases/download/4.0.0/bazel-toolchains-4.0.0.tar.gz\",\n-        ],\n-    )\n-\n     #############################################\n     # Dependencies for generating documentation #\n     #############################################"
        },
        {
            "sha": "6c901408c70b8a753d493c354d3c56b3b7d880b2",
            "filename": "renovate.json",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/50713310bfa9f69996121d7417eff448fdfe1857/renovate.json",
            "raw_url": "https://github.com/angular/angular/raw/50713310bfa9f69996121d7417eff448fdfe1857/renovate.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/renovate.json?ref=50713310bfa9f69996121d7417eff448fdfe1857",
            "patch": "@@ -78,7 +78,6 @@\n       \"packagePatterns\": [\n         \"^@bazel/.*\",\n         \"^build_bazel.*\",\n-        \"bazel_toolchains\"\n       ],\n       \"groupName\": \"bazel\",\n       \"pinVersions\": false"
        }
    ],
    "stats": {
        "total": 52,
        "additions": 5,
        "deletions": 47
    }
}