{
    "author": "mgechev",
    "message": "feat(devtools): use the user preferred color scheme\n\nNow we set the color scheme of DevTools depending on the user's preferred color scheme. On change of the user's preferred color scheme we reflect the update in DevTools.",
    "sha": "57418c13f521a26dfd1a21abb2b53abbf7a7a6f0",
    "files": [
        {
            "sha": "b580bbb20e2a52d8bf8a6043f604dcb590c2d7d4",
            "filename": "projects/ng-devtools/src/lib/theme-service.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 1,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/57418c13f521a26dfd1a21abb2b53abbf7a7a6f0/projects%2Fng-devtools%2Fsrc%2Flib%2Ftheme-service.ts",
            "raw_url": "https://github.com/angular/angular/raw/57418c13f521a26dfd1a21abb2b53abbf7a7a6f0/projects%2Fng-devtools%2Fsrc%2Flib%2Ftheme-service.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools%2Fsrc%2Flib%2Ftheme-service.ts?ref=57418c13f521a26dfd1a21abb2b53abbf7a7a6f0",
            "patch": "@@ -12,7 +12,8 @@ export class ThemeService {\n \n   constructor(private _rendererFactory: RendererFactory2) {\n     this.renderer = this._rendererFactory.createRenderer(null, null);\n-    this.toggleDarkMode(false);\n+    this.toggleDarkMode(this._prefersDarkMode);\n+    this._initializeThemeWatcher();\n   }\n \n   toggleDarkMode(isDark: boolean): void {\n@@ -22,4 +23,14 @@ export class ThemeService {\n     this.renderer.addClass(document.body, addClass);\n     this.currentTheme.next(addClass);\n   }\n+\n+  private _initializeThemeWatcher(): void {\n+    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {\n+      this.toggleDarkMode(this._prefersDarkMode);\n+    });\n+  }\n+\n+  private get _prefersDarkMode(): boolean {\n+    return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n+  }\n }"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 12,
        "deletions": 1
    }
}