{
    "author": "gkalpak",
    "message": "test(docs-infra): avoid running expensive operations when focusing/skipping tests (#43963)\n\nPreviously, the pre-computation of branch version info for the\n`deploy-to-firebase` tests would always take place even when the tests\nthat used that info were skipped. This pre-computation involves network\naccess and may add a noticeable delay.\n\nThis commit refactors the tests to not do the pre-computation if the\ncorresponding tests are skipped. This allows for a faster iteration\nwhen focusing on a different set of tests.\n\nPR Close #43963",
    "sha": "cbd0b37b4a3d97955b5facfbb1421e36aee0e4c0",
    "files": [
        {
            "sha": "082bcc736dd818a04fdb36f415ecffb08668ebe8",
            "filename": "aio/scripts/deploy-to-firebase/index.spec.mjs",
            "status": "modified",
            "additions": 19,
            "deletions": 10,
            "changes": 29,
            "blob_url": "https://github.com/angular/angular/blob/cbd0b37b4a3d97955b5facfbb1421e36aee0e4c0/aio%2Fscripts%2Fdeploy-to-firebase%2Findex.spec.mjs",
            "raw_url": "https://github.com/angular/angular/raw/cbd0b37b4a3d97955b5facfbb1421e36aee0e4c0/aio%2Fscripts%2Fdeploy-to-firebase%2Findex.spec.mjs",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fscripts%2Fdeploy-to-firebase%2Findex.spec.mjs?ref=cbd0b37b4a3d97955b5facfbb1421e36aee0e4c0",
            "patch": "@@ -10,16 +10,25 @@ import u from './utils.mjs';\n \n describe('deploy-to-firebase:', () => {\n   // Pre-computed values to avoid unnecessary re-computations.\n-  const mostRecentMinorBranch = u.getMostRecentMinorBranch();\n-  const latestCommits = {\n-    master: u.getLatestCommit('master'),\n-    '2.1.x': u.getLatestCommit('2.1.x'),\n-    '2.4.x': u.getLatestCommit('2.4.x'),\n-    '4.3.x': u.getLatestCommit('4.3.x'),\n-    '4.4.x': u.getLatestCommit('4.4.x'),\n-    '9.1.x': u.getLatestCommit('9.1.x'),\n-    [mostRecentMinorBranch]: u.getLatestCommit(mostRecentMinorBranch),\n-  };\n+  let mostRecentMinorBranch;\n+  let latestCommits;\n+\n+  beforeAll(() => {\n+    // Computing the values involves network requests and may add a noticeable delay (during which\n+    // nothing is printed to stdout). Print a message to let the user know what is happening.\n+    console.log('\\nPre-computing values for \\'deploy-to-firebase\\' tests...');\n+\n+    mostRecentMinorBranch = u.getMostRecentMinorBranch();\n+    latestCommits = {\n+      master: u.getLatestCommit('master'),\n+      '2.1.x': u.getLatestCommit('2.1.x'),\n+      '2.4.x': u.getLatestCommit('2.4.x'),\n+      '4.3.x': u.getLatestCommit('4.3.x'),\n+      '4.4.x': u.getLatestCommit('4.4.x'),\n+      '9.1.x': u.getLatestCommit('9.1.x'),\n+      [mostRecentMinorBranch]: u.getLatestCommit(mostRecentMinorBranch),\n+    };\n+  });\n \n   // Helpers\n   const jsonFunctionReplacer = (_key, val) =>"
        }
    ],
    "stats": {
        "total": 29,
        "additions": 19,
        "deletions": 10
    }
}