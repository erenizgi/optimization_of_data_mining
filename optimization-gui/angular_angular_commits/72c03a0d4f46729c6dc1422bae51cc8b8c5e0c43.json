{
    "author": "devversion",
    "message": "build: remove ts-api-guardian from repository (#42735)\n\nThis commit removes `ts-api-guardian` from the repository. We introduced\na new tool for testing API signature that is part of the shared\ndev-infra package. The TS API guardian package will be deprecated for\nthe public in favor of Microsoft's API extractor that has support for\nmore parts of the syntax, such as alias exports.\n\nPR Close #42735",
    "sha": "72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43",
    "files": [
        {
            "sha": "dde909853c92249f2c7f0102bcb765f53efc9b45",
            "filename": ".circleci/config.yml",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43/.circleci%2Fconfig.yml",
            "raw_url": "https://github.com/angular/angular/raw/72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43/.circleci%2Fconfig.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.circleci%2Fconfig.yml?ref=72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43",
            "patch": "@@ -798,11 +798,11 @@ jobs:\n       - setup_win\n       - run:\n           name: Build all windows CI targets\n-          command: yarn bazel build --build_tag_filters=-ivy-only //packages/compiler-cli/... //tools/ts-api-guardian/...\n+          command: yarn bazel build --build_tag_filters=-ivy-only //packages/compiler-cli/...\n           no_output_timeout: 15m\n       - run:\n           name: Test all windows CI targets\n-          command: yarn bazel test --test_tag_filters=\"-ivy-only,-browser:chromium-local\" //packages/compiler-cli/... //tools/ts-api-guardian/...\n+          command: yarn bazel test --test_tag_filters=\"-ivy-only,-browser:chromium-local\" //packages/compiler-cli/...\n           no_output_timeout: 15m\n \n   test_ivy_aot_win:\n@@ -811,11 +811,11 @@ jobs:\n       - setup_win\n       - run:\n           name: Build all windows CI targets\n-          command: yarn bazel build --config=ivy --build_tag_filters=-no-ivy-aot,-fixme-ivy-aot //packages/compiler-cli/... //tools/ts-api-guardian/...\n+          command: yarn bazel build --config=ivy --build_tag_filters=-no-ivy-aot,-fixme-ivy-aot //packages/compiler-cli/...\n           no_output_timeout: 15m\n       - run:\n           name: Test all windows CI targets\n-          command: yarn bazel test --config=ivy --test_tag_filters=\"-no-ivy-aot,-fixme-ivy-aot,-browser:chromium-local\" //packages/compiler-cli/... //tools/ts-api-guardian/... //packages/localize/...\n+          command: yarn bazel test --config=ivy --test_tag_filters=\"-no-ivy-aot,-fixme-ivy-aot,-browser:chromium-local\" //packages/compiler-cli/... //packages/localize/...\n           no_output_timeout: 15m\n       # Save dependencies to use on subsequent runs.\n       - save_cache:"
        },
        {
            "sha": "0acf0cd70da0ac76c7d1458e9c9de83bdb60b768",
            "filename": ".gitattributes",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43/.gitattributes",
            "raw_url": "https://github.com/angular/angular/raw/72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43/.gitattributes",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.gitattributes?ref=72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43",
            "patch": "@@ -5,8 +5,5 @@\n *.js eol=lf\n *.ts eol=lf\n \n-# API guardian patch must always use LF for tests to work\n-*.patch eol=lf\n-\n # Must keep Windows line ending to be parsed correctly\n scripts/windows/packages.txt eol=crlf"
        },
        {
            "sha": "ad0c4bbf41953465fb352419fb035ed0901d1211",
            "filename": ".pullapprove.yml",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43/.pullapprove.yml",
            "raw_url": "https://github.com/angular/angular/raw/72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43/.pullapprove.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.pullapprove.yml?ref=72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43",
            "patch": "@@ -1177,7 +1177,6 @@ groups:\n           'tools/source-map-test/**',\n           'tools/symbol-extractor/**',\n           'tools/testing/**',\n-          'tools/ts-api-guardian/**',\n           'tools/tslint/**',\n           'tools/utils/**',\n           'tools/yarn/**',"
        },
        {
            "sha": "48c89222d7b99b0e0f43d9c821ac01e1e92bc02b",
            "filename": "renovate.json",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43/renovate.json",
            "raw_url": "https://github.com/angular/angular/raw/72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43/renovate.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/renovate.json?ref=72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43",
            "patch": "@@ -53,7 +53,6 @@\n     \"integration/bazel/WORKSPACE\",\n     \"package.json\",\n     \"packages/**/package.json\",\n-    \"tools/ts-api-guardian/package.json\",\n     \"aio/package.json\"\n   ],\n   \"packageRules\": ["
        },
        {
            "sha": "d408c31f5d8858d0c4add083e899e515d7b8a195",
            "filename": "tools/ts-api-guardian/BUILD.bazel",
            "status": "removed",
            "additions": 0,
            "deletions": 115,
            "changes": 115,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2FBUILD.bazel?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,115 +0,0 @@\n-# BEGIN-INTERNAL\n-load(\"@build_bazel_rules_nodejs//:index.bzl\", \"pkg_npm\")\n-load(\"@npm//@bazel/typescript:index.bzl\", \"ts_library\")\n-load(\"//tools:defaults.bzl\", \"jasmine_node_test\")\n-\n-ts_library(\n-    name = \"lib\",\n-    srcs = glob([\"lib/*.ts\"]),\n-    module_name = \"ts-api-guardian\",\n-    tsconfig = \"//tools:tsconfig.json\",\n-    visibility = [\"//visibility:public\"],\n-    deps = [\n-        \"@npm//@types/diff\",\n-        \"@npm//@types/minimist\",\n-        \"@npm//@types/node\",\n-        \"@npm//chalk\",\n-        \"@npm//diff\",\n-        \"@npm//minimist\",\n-        \"@npm//typescript\",\n-    ],\n-)\n-\n-# Copy Angular's license to govern ts-api-guardian as well.\n-# We use a genrule to put it in this package, so it will be in the right root directory.\n-genrule(\n-    name = \"license\",\n-    srcs = [\"//:LICENSE\"],\n-    outs = [\"LICENSE\"],\n-    cmd = \"cp $< $@\",\n-)\n-\n-pkg_npm(\n-    name = \"ts-api-guardian\",\n-    package_name = \"ts-api-guardian\",\n-    srcs = [\n-        \"BUILD.bazel\",\n-        \"README.md\",\n-        \"bin/ts-api-guardian\",\n-        \"index.bzl\",\n-        \"package.json\",\n-    ],\n-    substitutions = {\n-        \"@angular//tools/ts-api-guardian:bin\": \"//:node_modules/ts-api-guardian/bin\",\n-        \"@angular//tools/ts-api-guardian:lib\": \"@npm//ts-api-guardian\",\n-    },\n-    deps = [\n-        \":lib\",\n-        \":license\",\n-    ],\n-)\n-\n-#######################################3\n-# Tests for this package\n-\n-ts_library(\n-    name = \"test_lib\",\n-    testonly = True,\n-    srcs = glob(\n-        [\"test/*.ts\"],\n-        exclude = [\"test/bootstrap.ts\"],\n-    ),\n-    tsconfig = \"//tools:tsconfig-test\",\n-    deps = [\n-        \":lib\",\n-        \"@npm//@bazel/runfiles\",\n-        \"@npm//@types/jasmine\",\n-        \"@npm//@types/node\",\n-        \"@npm//jasmine\",\n-        \"@npm//typescript\",\n-    ],\n-)\n-\n-ts_library(\n-    name = \"bootstrap\",\n-    testonly = True,\n-    srcs = [\"test/bootstrap.ts\"],\n-    tsconfig = \"//tools:tsconfig-test\",\n-    deps = [\"@npm//@types/node\"],\n-)\n-\n-# Select the es5 .js output of the ts_library :boostrap target\n-# with `output_group = \"es5_sources\"` for use in the jasmine_node_test\n-# below. This exposes an internal detail of ts_library that is not ideal.\n-# TODO(gregmagolan): clean this up by using tsc() in this case rather than ts_library\n-filegroup(\n-    name = \"bootstrap_es5\",\n-    testonly = True,\n-    srcs = [\":bootstrap\"],\n-    output_group = \"es5_sources\",\n-)\n-\n-jasmine_node_test(\n-    name = \"tests\",\n-    srcs = [\n-        \":test_lib\",\n-    ],\n-    bootstrap = [\":bootstrap_es5\"],\n-    data = glob([\n-        \"test/fixtures/*.ts\",\n-        \"test/fixtures/*.patch\",\n-    ]) + [\n-        \":ts-api-guardian\",\n-    ],\n-)\n-\n-filegroup(\n-    name = \"bin\",\n-    srcs = glob([\"lib/*.js\"]) + [\"bin/ts-api-guardian\"],\n-    visibility = [\"//visibility:public\"],\n-)\n-\n-# Exported to be referenced as entry_point of the nodejs_binary\n-exports_files([\"bin/ts-api-guardian\"])\n-\n-# END-INTERNAL"
        },
        {
            "sha": "296d4e1e6f3af56c2b47afa8866e1a473378c58c",
            "filename": "tools/ts-api-guardian/README.md",
            "status": "removed",
            "additions": 0,
            "deletions": 36,
            "changes": 36,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2FREADME.md",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2FREADME.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2FREADME.md?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,36 +0,0 @@\n-# Typescript API Guardian\n-\n-Keeps track of public API surface of a typescript library.\n-\n-Examples:\n-\n-```sh\n-# Generate one declaration file\n-ts-api-guardian --out api_guard.d.ts index.d.ts\n-# Generate multiple declaration files\n-# (output location like typescript)\n-ts-api-guardian --outDir api_guard [--rootDir .] core/index.d.ts core/testing.d.ts\n-# Print usage\n-ts-api-guardian --help\n-# Check against one declaration file\n-ts-api-guardian --verify api_guard.d.ts index.d.ts\n-# Check against multiple declaration files\n-ts-api-guardian --verifyDir api_guard [--rootDir .] core/index.d.ts core/testing.d.ts\n-```\n-\n-# For developers\n-\n-Build and test this library:\n-\n-```sh\n-$ yarn bazel run //:install\n-$ yarn bazel test //tools/ts-api-guardian:all\n-```\n-\n-Publish to NPM:\n-\n-```sh\n-$ yarn bazel run @nodejs//:npm whoami # should be logged in as angular\n-$ grep version tools/ts-api-guardian/package.json # advance as needed\n-$ yarn bazel run //tools/ts-api-guardian:ts-api-guardian.publish\n-```"
        },
        {
            "sha": "b0cfde463b7cec689cb101e4d858dd523adc36d0",
            "filename": "tools/ts-api-guardian/bin/ts-api-guardian",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Fbin%2Fts-api-guardian",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Fbin%2Fts-api-guardian",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Fbin%2Fts-api-guardian?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,3 +0,0 @@\n-#!/usr/bin/env node\n-\n-require('../lib/cli').startCli();"
        },
        {
            "sha": "f6ed5b311d3e10f1bf1c71ed8704c4fca2f1e59a",
            "filename": "tools/ts-api-guardian/index.bzl",
            "status": "removed",
            "additions": 0,
            "deletions": 148,
            "changes": 148,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Findex.bzl",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Findex.bzl",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Findex.bzl?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,148 +0,0 @@\n-# Copyright 2017 The Bazel Authors. All rights reserved.\n-#\n-# Licensed under the Apache License, Version 2.0 (the \"License\");\n-# you may not use this file except in compliance with the License.\n-# You may obtain a copy of the License at\n-#\n-#    http://www.apache.org/licenses/LICENSE-2.0\n-#\n-# Unless required by applicable law or agreed to in writing, software\n-# distributed under the License is distributed on an \"AS IS\" BASIS,\n-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n-# See the License for the specific language governing permissions and\n-# limitations under the License.\n-\n-\"\"\"Runs ts_api_guardian\n-\"\"\"\n-\n-load(\"@build_bazel_rules_nodejs//:index.bzl\", \"nodejs_binary\", \"nodejs_test\")\n-\n-COMMON_MODULE_IDENTIFIERS = [\"angular\", \"jasmine\", \"protractor\", \"Symbol\"]\n-\n-def ts_api_guardian_test(\n-        name,\n-        golden,\n-        actual,\n-        data = [],\n-        strip_export_pattern = [],\n-        allow_module_identifiers = COMMON_MODULE_IDENTIFIERS,\n-        use_angular_tag_rules = True,\n-        **kwargs):\n-    \"\"\"Runs ts_api_guardian\n-    \"\"\"\n-    data += [\n-        # Locally we need to add the TS build target\n-        # But it will replaced to @npm//ts-api-guardian when publishing\n-        \"@angular//tools/ts-api-guardian:lib\",\n-        # BEGIN-INTERNAL\n-        \"@angular//tools/ts-api-guardian:bin\",\n-        # END-INTERNAL\n-        # The below are required during runtime\n-        \"@npm//chalk\",\n-        \"@npm//diff\",\n-        \"@npm//minimist\",\n-        \"@npm//typescript\",\n-    ]\n-\n-    args = [\n-        # Needed so that node doesn't walk back to the source directory.\n-        # From there, the relative imports would point to .ts files.\n-        \"--node_options=--preserve-symlinks\",\n-        # TODO(josephperrott): update dependency usages to no longer need bazel patch module resolver\n-        # See: https://github.com/bazelbuild/rules_nodejs/wiki#--bazel_patch_module_resolver-now-defaults-to-false-2324\n-        \"--bazel_patch_module_resolver\",\n-    ]\n-\n-    for i in strip_export_pattern:\n-        # Quote the regexp before passing it via the command line.\n-        quoted_pattern = \"\\\"%s\\\"\" % i\n-        args += [\"--stripExportPattern\", quoted_pattern]\n-\n-    for i in allow_module_identifiers:\n-        args += [\"--allowModuleIdentifiers\", i]\n-\n-    if use_angular_tag_rules:\n-        args += [\"--useAngularTagRules\"]\n-\n-    nodejs_test(\n-        name = name,\n-        data = data,\n-        entry_point = Label(\"@angular//tools/ts-api-guardian:bin/ts-api-guardian\"),\n-        tags = kwargs.pop(\"tags\", []) + [\"api_guard\"],\n-        templated_args = args + [\"--verify\", golden, actual],\n-        **kwargs\n-    )\n-\n-    nodejs_binary(\n-        name = name + \".accept\",\n-        testonly = True,\n-        data = data,\n-        entry_point = Label(\"@angular//tools/ts-api-guardian:bin/ts-api-guardian\"),\n-        tags = kwargs.pop(\"tags\", []) + [\"api_guard\"],\n-        templated_args = args + [\"--out\", golden, actual],\n-        **kwargs\n-    )\n-\n-def ts_api_guardian_test_npm_package(\n-        name,\n-        goldenDir,\n-        actualDir,\n-        data = [],\n-        strip_export_pattern = [\"^ɵ(?!ɵdefineInjectable|ɵinject|ɵInjectableDef)\"],\n-        allow_module_identifiers = COMMON_MODULE_IDENTIFIERS,\n-        use_angular_tag_rules = True,\n-        **kwargs):\n-    \"\"\"Runs ts_api_guardian\n-    \"\"\"\n-    data += [\n-        # Locally we need to add the TS build target\n-        # But it will replaced to @npm//ts-api-guardian when publishing\n-        \"@angular//tools/ts-api-guardian:lib\",\n-        \"@angular//tools/ts-api-guardian:bin\",\n-        # The below are required during runtime\n-        \"@npm//chalk\",\n-        \"@npm//diff\",\n-        \"@npm//minimist\",\n-        \"@npm//typescript\",\n-    ]\n-\n-    args = [\n-        # Needed so that node doesn't walk back to the source directory.\n-        # From there, the relative imports would point to .ts files.\n-        \"--node_options=--preserve-symlinks\",\n-        # We automatically discover the enpoints for our NPM package.\n-        \"--autoDiscoverEntrypoints\",\n-        # TODO(josephperrott): update dependency usages to no longer need bazel patch module resolver\n-        # See: https://github.com/bazelbuild/rules_nodejs/wiki#--bazel_patch_module_resolver-now-defaults-to-false-2324\n-        \"--bazel_patch_module_resolver\",\n-    ]\n-\n-    for i in strip_export_pattern:\n-        # Quote the regexp before passing it via the command line.\n-        quoted_pattern = \"\\\"%s\\\"\" % i\n-        args += [\"--stripExportPattern\", quoted_pattern]\n-\n-    for i in allow_module_identifiers:\n-        args += [\"--allowModuleIdentifiers\", i]\n-\n-    if use_angular_tag_rules:\n-        args += [\"--useAngularTagRules\"]\n-\n-    nodejs_test(\n-        name = name,\n-        data = data,\n-        entry_point = \"@angular//tools/ts-api-guardian:bin/ts-api-guardian\",\n-        tags = kwargs.pop(\"tags\", []) + [\"api_guard\"],\n-        templated_args = args + [\"--autoDiscoverEntrypoints\", \"--verifyDir\", goldenDir, \"--rootDir\", \"$(rlocation %s)\" % actualDir],\n-        **kwargs\n-    )\n-\n-    nodejs_binary(\n-        name = name + \".accept\",\n-        testonly = True,\n-        data = data,\n-        entry_point = \"@angular//tools/ts-api-guardian:bin/ts-api-guardian\",\n-        tags = kwargs.pop(\"tags\", []) + [\"api_guard\"],\n-        templated_args = args + [\"--autoDiscoverEntrypoints\", \"--outDir\", goldenDir, \"--rootDir\", \"$(rlocation %s)\" % actualDir],\n-        **kwargs\n-    )"
        },
        {
            "sha": "0ff5cebd5e1ce78202f736b1a1c496d1cfe29747",
            "filename": "tools/ts-api-guardian/lib/cli.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 279,
            "changes": 279,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Flib%2Fcli.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Flib%2Fcli.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Flib%2Fcli.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,279 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-// tslint:disable:no-console\n-import * as chalk from 'chalk';\n-import * as minimist from 'minimist';\n-import * as path from 'path';\n-\n-import {discoverAllEntrypoints, generateGoldenFile, SerializationOptions, verifyAgainstGoldenFile} from './main';\n-\n-/** Name of the CLI */\n-const CMD = 'ts-api-guardian';\n-\n-/** Name of the Bazel workspace that runs the CLI. */\n-const bazelWorkspaceName = process.env.BAZEL_WORKSPACE;\n-/**\n- * Path to the Bazel workspace directory. Only set if the CLI is run with `bazel run`.\n- * https://docs.bazel.build/versions/master/user-manual.html#run.\n- */\n-const bazelWorkspaceDirectory = process.env.BUILD_WORKSPACE_DIRECTORY;\n-/**\n- * Regular expression that matches Bazel manifest paths that start with the\n- * current Bazel workspace, followed by a path delimiter.\n- */\n-const bazelWorkspaceManifestPathRegex =\n-    bazelWorkspaceName ? new RegExp(`^${bazelWorkspaceName}[/\\\\\\\\]`) : null;\n-\n-export function startCli() {\n-  const {argv, mode, errors} = parseArguments(process.argv.slice(2));\n-\n-  const options: SerializationOptions = {\n-    stripExportPattern: [].concat(argv['stripExportPattern']),\n-    allowModuleIdentifiers: [].concat(argv['allowModuleIdentifiers']),\n-  };\n-\n-  // Since the API guardian can be also used by other projects, we should not set up the default\n-  // Angular project tag rules unless specified explicitly through a given option.\n-  if (argv['useAngularTagRules']) {\n-    options.exportTags = {\n-      requireAtLeastOne: ['publicApi', 'codeGenApi'],\n-      banned: ['experimental'],\n-      toCopy: ['deprecated', 'codeGenApi']\n-    };\n-    options.memberTags = {\n-      requireAtLeastOne: [],\n-      banned: ['experimental', 'publicApi', 'codeGenApi'],\n-      toCopy: ['deprecated']\n-    };\n-    options.paramTags = {\n-      requireAtLeastOne: [],\n-      banned: ['experimental', 'publicApi', 'codeGenApi'],\n-      toCopy: ['deprecated']\n-    };\n-  }\n-\n-  // In autoDiscoverEntrypoints mode we set the inputed files as the discovered entrypoints\n-  // for the rootDir\n-  let entrypoints: string[];\n-  if (argv['autoDiscoverEntrypoints']) {\n-    entrypoints = discoverAllEntrypoints(argv['rootDir']);\n-  } else {\n-    entrypoints = argv._.slice();\n-  }\n-\n-  for (const error of errors) {\n-    console.warn(error);\n-  }\n-\n-  if (mode === 'help') {\n-    printUsageAndExit(!!errors.length);\n-  } else {\n-    const targets = resolveFileNamePairs(argv, mode, entrypoints);\n-\n-    if (mode === 'out') {\n-      for (const {entrypoint, goldenFile} of targets) {\n-        generateGoldenFile(entrypoint, goldenFile, options);\n-      }\n-    } else {  // mode === 'verify'\n-      let hasDiff = false;\n-\n-      for (const {entrypoint, goldenFile} of targets) {\n-        const diff = verifyAgainstGoldenFile(entrypoint, goldenFile, options);\n-        if (diff) {\n-          hasDiff = true;\n-          const lines = diff.split('\\n');\n-          if (lines.length) {\n-            lines.pop();  // Remove trailing newline\n-          }\n-          for (const line of lines) {\n-            const chalkMap:\n-                {[key: string]: any} = {'-': chalk.red, '+': chalk.green, '@': chalk.cyan};\n-            const chalkFunc = chalkMap[line[0]] || chalk.reset;\n-            console.log(chalkFunc(line));\n-          }\n-        }\n-      }\n-\n-      if (hasDiff) {\n-        const bazelTarget = process.env['BAZEL_TARGET'];\n-        // Under bazel, give instructions how to use bazel run to accept the golden file.\n-        if (bazelTarget) {\n-          console.error('\\n\\nIf you modify a public API, you must accept the new golden file.');\n-          console.error('\\n\\nTo do so, execute the following Bazel target:');\n-          console.error(`  yarn bazel run ${bazelTarget.replace(/_bin$/, '')}.accept`);\n-          if (process.env['TEST_WORKSPACE'] === 'angular') {\n-            console.error('\\n\\nFor more information, see');\n-            console.error(\n-                '\\n  https://github.com/angular/angular/blob/master/docs/PUBLIC_API.md#golden-files');\n-          }\n-        }\n-\n-        process.exit(1);\n-      }\n-    }\n-  }\n-}\n-\n-export function parseArguments(input: string[]):\n-    {argv: minimist.ParsedArgs, mode: string, errors: string[]} {\n-  let help = false;\n-  const errors: string[] = [];\n-\n-  const argv = minimist(input, {\n-    string: [\n-      'out', 'outDir', 'verify', 'verifyDir', 'rootDir', 'stripExportPattern',\n-      'allowModuleIdentifiers'\n-    ],\n-    boolean: [\n-      'help', 'useAngularTagRules', 'autoDiscoverEntrypoints',\n-      // Options used by chalk automagically\n-      'color', 'no-color'\n-    ],\n-    alias: {'outFile': 'out', 'verifyFile': 'verify'},\n-    unknown: (option: string) => {\n-      if (option[0] === '-') {\n-        errors.push(`Unknown option: ${option}`);\n-        help = true;\n-        return false;  // do not add to argv._\n-      } else {\n-        return true;  // add to argv._\n-      }\n-    }\n-  });\n-\n-  help = help || argv['help'];\n-\n-  if (help) {\n-    return {argv, mode: 'help', errors};\n-  }\n-\n-  let modes: string[] = [];\n-\n-  if (argv['out']) {\n-    modes.push('out');\n-  }\n-  if (argv['outDir']) {\n-    modes.push('out');\n-  }\n-  if (argv['verify']) {\n-    modes.push('verify');\n-  }\n-  if (argv['verifyDir']) {\n-    modes.push('verify');\n-  }\n-\n-  if (argv['autoDiscoverEntrypoints']) {\n-    if (!argv['rootDir']) {\n-      errors.push(`--rootDir must be provided with --autoDiscoverEntrypoints.`);\n-      modes = ['help'];\n-    }\n-    if (!argv['outDir'] && !argv['verifyDir']) {\n-      errors.push(`--outDir or --verifyDir must be used with --autoDiscoverEntrypoints.`);\n-      modes = ['help'];\n-    }\n-  } else {\n-    if (!argv._.length) {\n-      errors.push('No input file specified.');\n-      modes = ['help'];\n-    } else if (modes.length !== 1) {\n-      errors.push('Specify either --out[Dir] or --verify[Dir]');\n-      modes = ['help'];\n-    } else if (argv._.length > 1 && !argv['outDir'] && !argv['verifyDir']) {\n-      errors.push(`More than one input specified. Use --${modes[0]}Dir instead.`);\n-      modes = ['help'];\n-    }\n-  }\n-\n-  return {argv, mode: modes[0], errors};\n-}\n-\n-function printUsageAndExit(error = false) {\n-  const print = error ? console.warn.bind(console) : console.log.bind(console);\n-  print(`Usage:  ${CMD} [options] <file ...>\n-        ${CMD} --out <output file> <entrypoint .d.ts file>\n-        ${CMD} --outDir <output dir> [--rootDir .] <entrypoint .d.ts files>\n-\n-        ${CMD} --verify <golden file> <entrypoint .d.ts file>\n-        ${CMD} --verifyDir <golden file dir> [--rootDir .] <entrypoint .d.ts files>\n-\n-Options:\n-        --help                          Show this usage message\n-\n-        --out <file>                    Write golden output to file\n-        --outDir <dir>                  Write golden file structure to directory\n-\n-        --verify <file>                 Read golden input from file\n-        --verifyDir <dir>               Read golden file structure from directory\n-\n-        --rootDir <dir>                 Specify the root directory of input files\n-\n-        --useAngularTagRules <boolean>  Whether the Angular specific tag rules should be used.\n-        --stripExportPattern <regexp>   Do not output exports matching the pattern\n-        --allowModuleIdentifiers <identifier>\n-                                        Allow identifier for \"* as foo\" imports\n-        --autoDiscoverEntrypoints       Automatically find all entrypoints .d.ts files in the rootDir`);\n-  process.exit(error ? 1 : 0);\n-}\n-\n-/**\n- * Resolves a given path in the file system. If `ts-api-guardian` runs with Bazel, file paths\n- * are resolved through runfiles. Additionally in Bazel, this method handles the case where\n- * manifest file paths are not existing, but need to resolve to the Bazel workspace directory.\n- * This happens commonly when goldens are approved, but the golden file does not exist yet.\n- */\n-function resolveFilePath(fileName: string): string {\n-  // If an absolute path is specified, the path is already resolved.\n-  if (path.isAbsolute(fileName)) {\n-    return fileName;\n-  }\n-  // Outside of Bazel, file paths are resolved based on the current working directory.\n-  if (!bazelWorkspaceName) {\n-    return path.resolve(fileName);\n-  }\n-  // In Bazel, we first try to resolve the file through the runfiles. We do this by calling\n-  // the `require.resolve` function that is patched by the Bazel NodeJS rules. Note that we\n-  // need to catch errors because files inside tree artifacts cannot be resolved through\n-  // runfile manifests. Hence, we need to have alternative resolution logic when resolving\n-  // file paths. Additionally, it could happen that manifest paths which aren't part of the\n-  // runfiles are specified (i.e. golden is approved but does not exist in the workspace yet).\n-  try {\n-    return require.resolve(fileName);\n-  } catch {\n-  }\n-  // This handles cases where file paths cannot be resolved through runfiles. This happens\n-  // commonly when goldens are approved while the golden does not exist in the workspace yet.\n-  // In those cases, we want to build up a relative path based on the manifest path, and join\n-  // it with the absolute bazel workspace directory (which is only set in `bazel run`).\n-  // e.g. `angular/goldens/<..>/common` should become `{workspace_dir}/goldens/<...>/common`.\n-  if (bazelWorkspaceManifestPathRegex !== null && bazelWorkspaceDirectory &&\n-      bazelWorkspaceManifestPathRegex.test(fileName)) {\n-    return path.join(bazelWorkspaceDirectory, fileName.substr(bazelWorkspaceName.length + 1));\n-  }\n-  throw Error(`Could not resolve file path in runfiles: ${fileName}`);\n-}\n-\n-function resolveFileNamePairs(argv: minimist.ParsedArgs, mode: string, entrypoints: string[]):\n-    {entrypoint: string, goldenFile: string}[] {\n-  if (argv[mode]) {\n-    return [{\n-      entrypoint: resolveFilePath(entrypoints[0]),\n-      goldenFile: resolveFilePath(argv[mode]),\n-    }];\n-  } else {  // argv[mode + 'Dir']\n-    let rootDir = argv['rootDir'] || '.';\n-    const goldenDir = argv[mode + 'Dir'];\n-\n-    return entrypoints.map((fileName: string) => {\n-      return {\n-        entrypoint: resolveFilePath(fileName),\n-        goldenFile: resolveFilePath(path.join(goldenDir, path.relative(rootDir, fileName))),\n-      };\n-    });\n-  }\n-}"
        },
        {
            "sha": "777bce97c1721a10f9eb1b1039553a03053f041e",
            "filename": "tools/ts-api-guardian/lib/main.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 98,
            "changes": 98,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Flib%2Fmain.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Flib%2Fmain.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Flib%2Fmain.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,98 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-import {createPatch} from 'diff';\n-import * as fs from 'fs';\n-import * as path from 'path';\n-\n-import {publicApi, SerializationOptions} from './serializer';\n-\n-export {publicApi, SerializationOptions} from './serializer';\n-\n-export function generateGoldenFile(\n-    entrypoint: string, outFile: string, options: SerializationOptions = {}): void {\n-  const output = publicApi(entrypoint, options);\n-\n-  ensureDirectory(path.dirname(outFile));\n-  fs.writeFileSync(outFile, output);\n-}\n-\n-export function verifyAgainstGoldenFile(\n-    entrypoint: string, goldenFile: string, options: SerializationOptions = {}): string {\n-  const actual = publicApi(entrypoint, options);\n-  const expected = fs.existsSync(goldenFile) ? fs.readFileSync(goldenFile).toString() : '';\n-\n-  if (actual === expected) {\n-    return '';\n-  } else {\n-    // The patch should not show absolute paths, as these are pretty long and obfuscated\n-    // the printed golden diff. Additionally, path separators in the patch should be forward\n-    // slashes for consistency and to enable easier integration testing.\n-    const displayFileName = path.relative(process.cwd(), goldenFile).replace(/\\\\/g, '/');\n-    const patch = createPatch(displayFileName, expected, actual, 'Golden file', 'Generated API');\n-\n-    // Remove the header of the patch\n-    const start = patch.indexOf('\\n', patch.indexOf('\\n') + 1) + 1;\n-\n-    return patch.substring(start);\n-  }\n-}\n-\n-function ensureDirectory(dir: string) {\n-  if (!fs.existsSync(dir)) {\n-    ensureDirectory(path.dirname(dir));\n-    fs.mkdirSync(dir);\n-  }\n-}\n-\n-/**\n- * Determine if the provided path is a directory.\n- */\n-function isDirectory(dirPath: string) {\n-  try {\n-    return fs.lstatSync(dirPath).isDirectory();\n-  } catch {\n-    return false;\n-  }\n-}\n-\n-/**\n- * Gets an array of paths to the typings files for each of the recursively discovered\n- * package.json\n- * files from the directory provided.\n- */\n-export function discoverAllEntrypoints(dirPath: string) {\n-  // Determine all of the package.json files\n-  const packageJsons: string[] = [];\n-  const entryPoints: string[] = [];\n-  const findPackageJsonsInDir = (nextPath: string) => {\n-    for (const file of fs.readdirSync(nextPath)) {\n-      const fullPath = path.join(nextPath, file);\n-      if (isDirectory(fullPath)) {\n-        findPackageJsonsInDir(fullPath);\n-      } else {\n-        if (file === 'package.json') {\n-          packageJsons.push(fullPath);\n-        }\n-      }\n-    }\n-  };\n-  findPackageJsonsInDir(dirPath);\n-\n-  // Get all typings file locations from package.json files\n-  for (const packageJson of packageJsons) {\n-    const packageJsonObj =\n-        JSON.parse(fs.readFileSync(packageJson, {encoding: 'utf8'})) as {typings: string};\n-    const typings = packageJsonObj.typings;\n-    if (typings) {\n-      entryPoints.push(path.join(path.dirname(packageJson), typings));\n-    }\n-  }\n-\n-  return entryPoints;\n-}"
        },
        {
            "sha": "ca5ac5211650c32edbffe19a35bfab781f70e6d0",
            "filename": "tools/ts-api-guardian/lib/serializer.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 448,
            "changes": 448,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Flib%2Fserializer.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Flib%2Fserializer.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Flib%2Fserializer.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,448 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-import * as path from 'path';\n-import * as ts from 'typescript';\n-\n-const baseTsOptions: ts.CompilerOptions = {\n-  // We don't want symbols from external modules to be resolved, so we use the\n-  // classic algorithm.\n-  moduleResolution: ts.ModuleResolutionKind.Classic\n-};\n-\n-export interface JsDocTagOptions {\n-  /**\n-   * An array of names of jsdoc tags, one of which must exist. If no tags are provided, there are no\n-   * required tags.\n-   */\n-  requireAtLeastOne?: string[];\n-\n-  /**\n-   * An array of names of jsdoc tags that must not exist.\n-   */\n-  banned?: string[];\n-\n-  /**\n-   * An array of names of jsdoc tags that will be copied to the serialized code.\n-   */\n-  toCopy?: string[];\n-}\n-\n-export interface SerializationOptions {\n-  /**\n-   * Removes all exports matching the regular expression.\n-   */\n-  stripExportPattern?: RegExp|RegExp[];\n-  /**\n-   * Allows these identifiers as modules in the output. For example,\n-   * ```\n-   * import * as angular from './angularjs';\n-   *\n-   * export class Foo extends angular.Bar {}\n-   * ```\n-   * will produce `export class Foo extends angular.Bar {}` and requires explicitly allowing\n-   * `angular` as a module identifier.\n-   */\n-  allowModuleIdentifiers?: string[];\n-\n-  /** The jsdoc tag options for top level exports */\n-  exportTags?: JsDocTagOptions;\n-\n-  /** The jsdoc tag options for properties/methods/etc of exports */\n-  memberTags?: JsDocTagOptions;\n-\n-  /** The jsdoc tag options for parameters of members/functions */\n-  paramTags?: JsDocTagOptions;\n-}\n-\n-export type DiagnosticSeverity = 'warn'|'error'|'none';\n-\n-export function publicApi(fileName: string, options: SerializationOptions = {}): string {\n-  return publicApiInternal(ts.createCompilerHost(baseTsOptions), fileName, baseTsOptions, options);\n-}\n-\n-export function publicApiInternal(\n-    host: ts.CompilerHost, fileName: string, tsOptions: ts.CompilerOptions,\n-    options: SerializationOptions = {}): string {\n-  // Since the entry point will be compared with the source files from the TypeScript program,\n-  // the path needs to be normalized with forward slashes in order to work within Windows.\n-  const entrypoint = path.normalize(fileName).replace(/\\\\/g, '/');\n-\n-  // Setup default tag options\n-  options = {\n-    ...options,\n-    exportTags: applyDefaultTagOptions(options.exportTags),\n-    memberTags: applyDefaultTagOptions(options.memberTags),\n-    paramTags: applyDefaultTagOptions(options.paramTags)\n-  };\n-\n-  if (!entrypoint.match(/\\.d\\.ts$/)) {\n-    throw new Error(`Source file \"${fileName}\" is not a declaration file`);\n-  }\n-\n-  const program = ts.createProgram([entrypoint], tsOptions, host);\n-  return new ResolvedDeclarationEmitter(program, entrypoint, options).emit();\n-}\n-\n-interface Diagnostic {\n-  type?: DiagnosticSeverity;\n-  message: string;\n-}\n-\n-class ResolvedDeclarationEmitter {\n-  private program: ts.Program;\n-  private fileName: string;\n-  private typeChecker: ts.TypeChecker;\n-  private options: SerializationOptions;\n-  private diagnostics: Diagnostic[];\n-\n-  constructor(program: ts.Program, fileName: string, options: SerializationOptions) {\n-    this.program = program;\n-    this.fileName = fileName;\n-    this.options = options;\n-    this.diagnostics = [];\n-\n-    this.typeChecker = this.program.getTypeChecker();\n-  }\n-\n-  emit(): string {\n-    const sourceFile = this.program.getSourceFiles().find(sf => sf.fileName === this.fileName);\n-    if (!sourceFile) {\n-      throw new Error(`Source file \"${this.fileName}\" not found`);\n-    }\n-\n-    let output: string[] = [];\n-\n-    const resolvedSymbols = this.getResolvedSymbols(sourceFile);\n-    // Sort all symbols so that the output is more deterministic\n-    resolvedSymbols.sort(symbolCompareFunction);\n-\n-    for (const symbol of resolvedSymbols) {\n-      if (this.isExportPatternStripped(symbol.name)) {\n-        continue;\n-      }\n-\n-      const typeDecl = symbol.declarations && symbol.declarations[0];\n-      const valDecl = symbol.valueDeclaration;\n-      if (!typeDecl && !valDecl) {\n-        this.diagnostics.push({\n-          type: 'warn',\n-          message: `${sourceFile.fileName}: error: No declaration found for symbol \"${symbol.name}\"`\n-        });\n-        continue;\n-      }\n-      typeDecl && this.emitDeclaration(symbol, typeDecl, output);\n-      if (valDecl && typeDecl.kind === ts.SyntaxKind.InterfaceDeclaration) {\n-        // Only generate value declarations in case of interfaces.\n-        valDecl && this.emitDeclaration(symbol, valDecl, output);\n-      }\n-    }\n-\n-    if (this.diagnostics.length) {\n-      const message = this.diagnostics.map(d => d.message).join('\\n');\n-      console.warn(message);\n-      if (this.diagnostics.some(d => d.type === 'error')) {\n-        throw new Error(message);\n-      }\n-    }\n-\n-    return output.join('');\n-  }\n-\n-  emitDeclaration(symbol: ts.Symbol, decl: ts.Node, output: string[]) {\n-    // The declaration node may not be a complete statement, e.g. for var/const\n-    // symbols. We need to find the complete export statement by traversing\n-    // upwards.\n-    while (!hasModifier(decl, ts.SyntaxKind.ExportKeyword) && decl.parent) {\n-      decl = decl.parent;\n-    }\n-\n-    if (hasModifier(decl, ts.SyntaxKind.ExportKeyword)) {\n-      // Make an empty line between two exports\n-      if (output.length) {\n-        output.push('\\n');\n-      }\n-\n-      const jsdocComment = this.processJsDocTags(decl, this.options.exportTags);\n-      if (jsdocComment) {\n-        output.push(jsdocComment + '\\n');\n-      }\n-\n-      output.push(stripEmptyLines(this.emitNode(decl)) + '\\n');\n-    } else {\n-      // This may happen for symbols re-exported from external modules.\n-      this.diagnostics.push({\n-        type: 'warn',\n-        message: createErrorMessage(decl, `No export declaration found for symbol \"${symbol.name}\"`)\n-      });\n-    }\n-  }\n-\n-  private isExportPatternStripped(symbolName: string): boolean {\n-    return [].concat(this.options.stripExportPattern).some(p => !!(p && symbolName.match(p)));\n-  }\n-\n-  private getResolvedSymbols(sourceFile: ts.SourceFile): ts.Symbol[] {\n-    const ms = (<any>sourceFile).symbol;\n-    const rawSymbols = ms ? (this.typeChecker.getExportsOfModule(ms) || []) : [];\n-    return rawSymbols.map(s => {\n-      if (s.flags & ts.SymbolFlags.Alias) {\n-        const resolvedSymbol = this.typeChecker.getAliasedSymbol(s);\n-\n-        // This will happen, e.g. for symbols re-exported from external modules.\n-        if (!resolvedSymbol.valueDeclaration && !resolvedSymbol.declarations) {\n-          return s;\n-        }\n-        if (resolvedSymbol.name !== s.name) {\n-          if (this.isExportPatternStripped(s.name)) {\n-            return s;\n-          }\n-          throw new Error(\n-              `Symbol \"${resolvedSymbol.name}\" was aliased as \"${s.name}\". ` +\n-              `Aliases are not supported.`);\n-        }\n-\n-        return resolvedSymbol;\n-      } else {\n-        return s;\n-      }\n-    });\n-  }\n-\n-  emitNode(node: ts.Node) {\n-    if (hasModifier(node, ts.SyntaxKind.PrivateKeyword)) {\n-      return '';\n-    }\n-\n-    const firstQualifier: ts.Identifier|null = getFirstQualifier(node);\n-\n-    if (firstQualifier) {\n-      let isAllowed = false;\n-\n-      // Try to resolve the qualifier.\n-      const resolvedSymbol = this.typeChecker.getSymbolAtLocation(firstQualifier);\n-      if (resolvedSymbol && resolvedSymbol.declarations && resolvedSymbol.declarations.length > 0) {\n-        // If the qualifier can be resolved, and it's not a namespaced import, then it should be\n-        // allowed.\n-        isAllowed =\n-            resolvedSymbol.declarations.every(decl => decl.kind !== ts.SyntaxKind.NamespaceImport);\n-      }\n-\n-      // If it is not allowed otherwise, it's allowed if it's on the list of allowed identifiers.\n-      isAllowed = isAllowed ||\n-          !(!this.options.allowModuleIdentifiers ||\n-            this.options.allowModuleIdentifiers.indexOf(firstQualifier.text) < 0);\n-      if (!isAllowed) {\n-        this.diagnostics.push({\n-          type: 'error',\n-          message: createErrorMessage(\n-              firstQualifier,\n-              `Module identifier \"${firstQualifier.text}\" is not allowed. Remove it ` +\n-                  `from source or allow it via --allowModuleIdentifiers.`)\n-        });\n-      }\n-    }\n-\n-    let children: ts.Node[] = [];\n-    if (ts.isFunctionDeclaration(node)) {\n-      // Used ts.isFunctionDeclaration instead of node.kind because this is a type guard\n-      const symbol = this.typeChecker.getSymbolAtLocation(node.name);\n-      symbol.declarations.forEach(x => children = children.concat(x.getChildren()));\n-    } else {\n-      children = node.getChildren();\n-    }\n-\n-    const sourceText = node.getSourceFile().text;\n-    if (children.length) {\n-      // Sort declarations under a class or an interface\n-      if (node.kind === ts.SyntaxKind.SyntaxList) {\n-        switch (node.parent && node.parent.kind) {\n-          case ts.SyntaxKind.ClassDeclaration:\n-          case ts.SyntaxKind.InterfaceDeclaration: {\n-            // There can be multiple SyntaxLists under a class or an interface,\n-            // since SyntaxList is just an arbitrary data structure generated\n-            // by Node#getChildren(). We need to check that we are sorting the\n-            // right list.\n-            if (children.every(node => node.kind in memberDeclarationOrder)) {\n-              children = children.slice();\n-              children.sort((a: ts.NamedDeclaration, b: ts.NamedDeclaration) => {\n-                // Static after normal\n-                return compareFunction(\n-                           hasModifier(a, ts.SyntaxKind.StaticKeyword),\n-                           hasModifier(b, ts.SyntaxKind.StaticKeyword)) ||\n-                    // Our predefined order\n-                    compareFunction(\n-                           memberDeclarationOrder[a.kind], memberDeclarationOrder[b.kind]) ||\n-                    // Alphebetical order\n-                    // We need safe dereferencing due to edge cases, e.g. having two call signatures\n-                    compareFunction((a.name || a).getText(), (b.name || b).getText());\n-              });\n-            }\n-            break;\n-          }\n-        }\n-      }\n-\n-      let output: string = children.filter(x => x.kind !== ts.SyntaxKind.JSDocComment)\n-                               .map(n => this.emitNode(n))\n-                               .join('');\n-\n-      // Print stability annotation for fields and parmeters\n-      if (ts.isParameter(node) || node.kind in memberDeclarationOrder) {\n-        const tagOptions = ts.isParameter(node) ? this.options.paramTags : this.options.memberTags;\n-        const jsdocComment = this.processJsDocTags(node, tagOptions);\n-        if (jsdocComment) {\n-          // Add the annotation after the leading whitespace\n-          output = output.replace(/^(\\r?\\n\\s*)/, `$1${jsdocComment} `);\n-        }\n-      }\n-\n-      return output;\n-    } else {\n-      const ranges = ts.getLeadingCommentRanges(sourceText, node.pos);\n-      let tail = node.pos;\n-      for (const range of ranges || []) {\n-        if (range.end > tail) {\n-          tail = range.end;\n-        }\n-      }\n-      return sourceText.substring(tail, node.end);\n-    }\n-  }\n-\n-  private processJsDocTags(node: ts.Node, tagOptions: JsDocTagOptions) {\n-    const jsDocTags = getJsDocTags(node);\n-    const requireAtLeastOne = tagOptions.requireAtLeastOne;\n-    const isMissingAnyRequiredTag = requireAtLeastOne != null && requireAtLeastOne.length > 0 &&\n-        jsDocTags.every(tag => requireAtLeastOne.indexOf(tag) === -1);\n-    if (isMissingAnyRequiredTag) {\n-      this.diagnostics.push({\n-        type: 'error',\n-        message: createErrorMessage(\n-            node,\n-            'Required jsdoc tags - One of the tags: ' +\n-                requireAtLeastOne.map(tag => `\"@${tag}\"`).join(', ') +\n-                ` - must exist on ${getName(node)}.`)\n-      });\n-    }\n-    const bannedTagsFound =\n-        tagOptions.banned.filter(bannedTag => jsDocTags.some(tag => tag === bannedTag));\n-    if (bannedTagsFound.length) {\n-      this.diagnostics.push({\n-        type: 'error',\n-        message: createErrorMessage(\n-            node,\n-            'Banned jsdoc tags - ' + bannedTagsFound.map(tag => `\"@${tag}\"`).join(', ') +\n-                ` - were found on ${getName(node)}.`)\n-      });\n-    }\n-    const tagsToCopy =\n-        jsDocTags.filter(tag => tagOptions.toCopy.some(tagToCopy => tag === tagToCopy));\n-\n-    if (tagsToCopy.length === 1) {\n-      return `/** @${tagsToCopy[0]} */`;\n-    } else if (tagsToCopy.length > 1) {\n-      return '/**\\n' + tagsToCopy.map(tag => ` * @${tag}`).join('\\n') + ' */\\n';\n-    } else {\n-      return '';\n-    }\n-  }\n-}\n-\n-const tagRegex = /@(\\w+)/g;\n-\n-function getJsDocTags(node: ts.Node): string[] {\n-  const sourceText = node.getSourceFile().text;\n-  const trivia = sourceText.substr(node.pos, node.getLeadingTriviaWidth());\n-  // We use a hash so that we don't collect duplicate jsdoc tags\n-  // (e.g. if a property has a getter and setter with the same tag).\n-  const jsdocTags: {[key: string]: boolean} = {};\n-  let match: RegExpExecArray;\n-  while (match = tagRegex.exec(trivia)) {\n-    jsdocTags[match[1]] = true;\n-  }\n-  return Object.keys(jsdocTags);\n-}\n-\n-function symbolCompareFunction(a: ts.Symbol, b: ts.Symbol) {\n-  return a.name.localeCompare(b.name);\n-}\n-\n-function compareFunction<T>(a: T, b: T) {\n-  return a === b ? 0 : a > b ? 1 : -1;\n-}\n-\n-const memberDeclarationOrder: {[key: number]: number} = {\n-  [ts.SyntaxKind.PropertySignature]: 0,\n-  [ts.SyntaxKind.PropertyDeclaration]: 0,\n-  [ts.SyntaxKind.GetAccessor]: 0,\n-  [ts.SyntaxKind.SetAccessor]: 0,\n-  [ts.SyntaxKind.CallSignature]: 1,\n-  [ts.SyntaxKind.Constructor]: 2,\n-  [ts.SyntaxKind.ConstructSignature]: 2,\n-  [ts.SyntaxKind.IndexSignature]: 3,\n-  [ts.SyntaxKind.MethodSignature]: 4,\n-  [ts.SyntaxKind.MethodDeclaration]: 4\n-};\n-\n-function stripEmptyLines(text: string): string {\n-  return text.split(/\\r?\\n/).filter(x => !!x.length).join('\\n');\n-}\n-\n-/**\n- * Returns the first qualifier if the input node is a dotted expression.\n- */\n-function getFirstQualifier(node: ts.Node): ts.Identifier|null {\n-  switch (node.kind) {\n-    case ts.SyntaxKind.PropertyAccessExpression: {\n-      // For expression position\n-      let lhs = node;\n-      do {\n-        lhs = (<ts.PropertyAccessExpression>lhs).expression;\n-      } while (lhs && lhs.kind !== ts.SyntaxKind.Identifier);\n-\n-      return <ts.Identifier>lhs;\n-    }\n-    case ts.SyntaxKind.TypeReference: {\n-      // For type position\n-      let lhs: ts.Node = (<ts.TypeReferenceNode>node).typeName;\n-      do {\n-        lhs = (<ts.QualifiedName>lhs).left;\n-      } while (lhs && lhs.kind !== ts.SyntaxKind.Identifier);\n-\n-      return <ts.Identifier>lhs;\n-    }\n-    default:\n-      return null;\n-  }\n-}\n-\n-function createErrorMessage(node: ts.Node, message: string): string {\n-  const sourceFile = node.getSourceFile();\n-  let position;\n-  if (sourceFile) {\n-    const {line, character} = sourceFile.getLineAndCharacterOfPosition(node.getStart());\n-    position = `${sourceFile.fileName}(${line + 1},${character + 1})`;\n-  } else {\n-    position = '<unknown>';\n-  }\n-\n-  return `${position}: error: ${message}`;\n-}\n-\n-function hasModifier(node: ts.Node, modifierKind: ts.SyntaxKind): boolean {\n-  return !!node.modifiers && node.modifiers.some(x => x.kind === modifierKind);\n-}\n-\n-function applyDefaultTagOptions(tagOptions: JsDocTagOptions|undefined): JsDocTagOptions {\n-  return {requireAtLeastOne: [], banned: [], toCopy: [], ...tagOptions};\n-}\n-\n-function getName(node: any) {\n-  return '`' + (node.name && node.name.text ? node.name.text : node.getText()) + '`';\n-}"
        },
        {
            "sha": "0a4d56e73d8dca6e5bc2a26887d64c42891ad1b0",
            "filename": "tools/ts-api-guardian/package.json",
            "status": "removed",
            "additions": 0,
            "deletions": 53,
            "changes": 53,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Fpackage.json?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,53 +0,0 @@\n-{\n-  \"name\": \"ts-api-guardian\",\n-  \"version\": \"0.6.0\",\n-  \"description\": \"Guards the API of TypeScript libraries!\",\n-  \"main\": \"lib/main.js\",\n-  \"typings\": \"lib/main.d.ts\",\n-  \"bin\": {\n-    \"ts-api-guardian\": \"./bin/ts-api-guardian\"\n-  },\n-  \"directories\": {\n-    \"test\": \"test\"\n-  },\n-  \"peerDependencies\": {\n-    \"typescript\": \"~3.9.2\"\n-  },\n-  \"dependencies\": {\n-    \"chalk\": \"^4.0.0\",\n-    \"diff\": \"^5.0.0\",\n-    \"minimist\": \"^1.2.0\"\n-  },\n-  \"devDependencies\": {\n-    \"@types/diff\": \"^5.0.0\",\n-    \"@types/jasmine\": \"^3.0.0\",\n-    \"@types/minimist\": \"^1.2.0\",\n-    \"@types/node\": \"^10.9.4\",\n-    \"jasmine\": \"^3.1.0\",\n-    \"source-map-support\": \"^0.5.9\",\n-    \"typescript\": \"4.3.4\"\n-  },\n-  \"keywords\": [\n-    \"typescript\"\n-  ],\n-  \"contributors\": [\n-    \"Alan Agius <alan.agius4@gmail.com> (https://github.com/alan-agius4/)\",\n-    \"Alex Eagle <alexeagle@google.com> (https://angular.io/)\",\n-    \"Martin Probst <martinprobst@google.com> (https://angular.io/)\",\n-    \"Victor Savkin <vsavkin@google.com> (https://victorsavkin.com)\",\n-    \"Igor Minar <iminar@google.com> (https://angular.io/)\"\n-  ],\n-  \"license\": \"MIT\",\n-  \"bugs\": {\n-    \"url\": \"https://github.com/angular/angular/issues\"\n-  },\n-  \"homepage\": \"https://github.com/angular/angular/tools/ts-api-guardian\",\n-  \"repository\": {\n-    \"type\": \"git\",\n-    \"url\": \"https://github.com/angular/angular.git\",\n-    \"directory\": \"tools/ts-api-guardian\"\n-  },\n-  \"publishConfig\": {\n-    \"registry\": \"https://wombat-dressing-room.appspot.com\"\n-  }\n-}"
        },
        {
            "sha": "b67b2fb564a799e0805322115462031076fc8e08",
            "filename": "tools/ts-api-guardian/test/bootstrap.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 20,
            "changes": 20,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Fbootstrap.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Fbootstrap.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Fbootstrap.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,20 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-const path = require('path');\n-const {runfiles} = require('@bazel/runfiles');\n-\n-// Change directories to the path of the ts-api-guardian source tree. We need to resolve an actual\n-// path of a tree because we want to determine the path to the directory that includes all\n-// test fixture runfiles. On Windows this is usually the original non-sandboxed disk location,\n-// otherwise this just refers to the runfile directory with all the proper symlinked files.\n-// NB: we resolve `test/fixtures/empty.ts` and then step up 3 folders so to ensure we resolve to the\n-//     root of the source tree and not the output tree on Windows where there are no runfiles.\n-// TODO: remove the whole bootstrap file once the tests are Bazel and Windows compatible.\n-process.chdir(path.resolve(\n-    runfiles.resolve('angular/tools/ts-api-guardian/test/fixtures/empty.ts'), '../../..'));"
        },
        {
            "sha": "3b5ad0b91b0ecf2f51312d6294d5a1439d6199b0",
            "filename": "tools/ts-api-guardian/test/cli_e2e_test.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 148,
            "changes": 148,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Fcli_e2e_test.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Fcli_e2e_test.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Fcli_e2e_test.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,148 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-import * as child_process from 'child_process';\n-import * as fs from 'fs';\n-import * as path from 'path';\n-import {assertFileEqual} from './helpers';\n-\n-const BINARY_PATH = require.resolve('../ts-api-guardian/bin/ts-api-guardian');\n-\n-describe('cli: e2e test', () => {\n-  const outDir = path.join(process.env['TEST_TMPDIR'], 'tmp');\n-\n-  beforeEach(() => {\n-    if (!fs.existsSync(outDir)) {\n-      fs.mkdirSync(outDir);\n-    }\n-  });\n-\n-  afterEach(() => {\n-    fs.rmdirSync(outDir, {recursive: true});\n-  });\n-\n-  it('should print usage without any argument', () => {\n-    const {stderr} = execute([]);\n-    expect(stderr).toMatch(/Usage/);\n-  });\n-\n-  it('should show help message with --help', () => {\n-    const {stdout} = execute(['--help']);\n-    expect(stdout).toMatch(/Usage/);\n-  });\n-\n-  it('should generate golden file with --out', () => {\n-    const simpleFile = path.join(outDir, 'simple.d.ts');\n-    const {status, stderr} = execute(['--out', simpleFile, 'test/fixtures/simple.d.ts']);\n-    expect(status).toBe(0, stderr);\n-    assertFileEqual(simpleFile, 'test/fixtures/simple_expected.d.ts');\n-  });\n-\n-  it('should verify golden file with --verify and exit cleanly on no difference', () => {\n-    const {stdout, status} =\n-        execute(['--verify', 'test/fixtures/simple_expected.d.ts', 'test/fixtures/simple.d.ts']);\n-    expect(stdout).toBe('');\n-    expect(status).toBe(0);\n-  });\n-\n-  it('should verify golden file with --verify and exit with error on difference', () => {\n-    const {stdout, status} = execute(\n-        ['--verify', 'test/fixtures/verify_expected.d.ts', 'test/fixtures/verify_entrypoint.d.ts']);\n-    expect(stdout).toBe(fs.readFileSync('test/fixtures/verify.patch').toString());\n-    expect(status).toBe(1);\n-  });\n-\n-  it('should generate multiple golden files with --outDir and --rootDir', () => {\n-    const {status} = execute([\n-      '--outDir', outDir, '--rootDir', 'test/fixtures', 'test/fixtures/simple.d.ts',\n-      'test/fixtures/sorting.d.ts'\n-    ]);\n-    expect(status).toBe(0);\n-    assertFileEqual(path.join(outDir, 'simple.d.ts'), 'test/fixtures/simple_expected.d.ts');\n-    assertFileEqual(path.join(outDir, 'sorting.d.ts'), 'test/fixtures/sorting_expected.d.ts');\n-  });\n-\n-  it('should verify multiple golden files with --verifyDir and --rootDir', () => {\n-    copyFile('test/fixtures/simple_expected.d.ts', path.join(outDir, 'simple.d.ts'));\n-    copyFile('test/fixtures/sorting_expected.d.ts', path.join(outDir, 'sorting.d.ts'));\n-    const {stdout, status} = execute([\n-      '--verifyDir', outDir, '--rootDir', 'test/fixtures', 'test/fixtures/simple.d.ts',\n-      'test/fixtures/sorting.d.ts'\n-    ]);\n-    expect(stdout).toBe('');\n-    expect(status).toBe(0);\n-  });\n-\n-  it('should generate respecting --stripExportPattern', () => {\n-    const {status} = execute([\n-      '--out', path.join(outDir, 'underscored.d.ts'), '--stripExportPattern', '^__.*',\n-      'test/fixtures/underscored.d.ts'\n-    ]);\n-\n-    expect(status).toBe(0);\n-    assertFileEqual(\n-        path.join(outDir, 'underscored.d.ts'), 'test/fixtures/underscored_expected.d.ts');\n-  });\n-\n-  it('should not throw for aliased stripped exports', () => {\n-    const {status} = execute([\n-      '--out', path.join(outDir, 'stripped_alias.d.ts'), '--stripExportPattern', '^__.*',\n-      'test/fixtures/stripped_alias.d.ts'\n-    ]);\n-    expect(status).toBe(0);\n-    assertFileEqual(\n-        path.join(outDir, 'stripped_alias.d.ts'), 'test/fixtures/stripped_alias_expected.d.ts');\n-  });\n-\n-  it('should verify respecting --stripExportPattern', () => {\n-    const {stdout, status} = execute([\n-      '--verify', 'test/fixtures/underscored_expected.d.ts', 'test/fixtures/underscored.d.ts',\n-      '--stripExportPattern', '^__.*'\n-    ]);\n-    expect(stdout).toBe('');\n-    expect(status).toBe(0);\n-  });\n-\n-  it('should respect --allowModuleIdentifiers', () => {\n-    const {stdout, status} = execute([\n-      '--verify', 'test/fixtures/module_identifier_expected.d.ts', '--allowModuleIdentifiers',\n-      'foo', 'test/fixtures/module_identifier.d.ts'\n-    ]);\n-    expect(stdout).toBe('');\n-    expect(status).toBe(0);\n-  });\n-});\n-\n-function copyFile(sourceFile: string, targetFile: string) {\n-  fs.writeFileSync(targetFile, fs.readFileSync(sourceFile));\n-}\n-\n-function execute(args: string[]): {stdout: string, stderr: string, status: number} {\n-  // We need to determine the directory that includes the `ts-api-guardian` npm_package that\n-  // will be used to spawn the CLI binary. This is a workaround because technically we shouldn't\n-  // spawn a child process that doesn't have the custom NodeJS module resolution for Bazel.\n-  const nodePath = [\n-    path.join(require.resolve('npm/node_modules/chalk/package.json'), '../../'),\n-    path.join(require.resolve('../lib/cli.js'), '../../'),\n-  ].join(process.platform === 'win32' ? ';' : ':');\n-\n-  const output = child_process.spawnSync(process.execPath, [BINARY_PATH, ...args], {\n-    env: {\n-      'NODE_PATH': nodePath,\n-    }\n-  });\n-\n-  expect(output.error).toBeFalsy(`Child process failed or timed out: ${output.error}`);\n-  expect(output.signal).toBeFalsy(`Child process killed by signal ${output.signal}`);\n-\n-  return {\n-    stdout: output.stdout.toString(),\n-    stderr: output.stderr.toString(),\n-    status: output.status\n-  };\n-}"
        },
        {
            "sha": "d1eff0f96cadaa6e0efe06fce2c124b1c5a9cf58",
            "filename": "tools/ts-api-guardian/test/cli_unit_test.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 81,
            "changes": 81,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Fcli_unit_test.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Fcli_unit_test.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Fcli_unit_test.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,81 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-import {parseArguments} from '../lib/cli';\n-\n-describe('cli: parseArguments', () => {\n-  it('should show usage with error when supplied with no arguments', () => {\n-    const {mode, errors} = parseArguments([]);\n-    expect(mode).toBe('help');\n-    expect(errors).toEqual(['No input file specified.']);\n-  });\n-\n-  it('should show usage without error when supplied with --help', () => {\n-    const {mode, errors} = parseArguments(['--help']);\n-    expect(mode).toBe('help');\n-    expect(errors).toEqual([]);\n-  });\n-\n-  it('should show usage with error when supplied with none of --out/verify[Dir]', () => {\n-    const {mode, errors} = parseArguments(['input.d.ts']);\n-    expect(mode).toBe('help');\n-    expect(errors).toEqual(['Specify either --out[Dir] or --verify[Dir]']);\n-  });\n-\n-  it('should show usage with error when supplied with both of --out/verify[Dir]', () => {\n-    const {mode, errors} =\n-        parseArguments(['--out', 'out.d.ts', '--verifyDir', 'golden.d.ts', 'input.d.ts']);\n-    expect(mode).toBe('help');\n-    expect(errors).toEqual(['Specify either --out[Dir] or --verify[Dir]']);\n-  });\n-\n-  it('should show usage with error when supplied without input file', () => {\n-    const {mode, errors} = parseArguments(['--out', 'output.d.ts']);\n-    expect(mode).toBe('help');\n-    expect(errors).toEqual(['No input file specified.']);\n-  });\n-\n-  it('should show usage with error when supplied without input file', () => {\n-    const {mode, errors} = parseArguments(['--out', 'output.d.ts', 'first.d.ts', 'second.d.ts']);\n-    expect(mode).toBe('help');\n-    expect(errors).toEqual(['More than one input specified. Use --outDir instead.']);\n-  });\n-\n-  it('should use out mode when supplied with --out', () => {\n-    const {argv, mode, errors} = parseArguments(['--out', 'out.d.ts', 'input.d.ts']);\n-    expect(argv['out']).toBe('out.d.ts');\n-    expect(argv._).toEqual(['input.d.ts']);\n-    expect(mode).toBe('out');\n-    expect(errors).toEqual([]);\n-  });\n-\n-  it('should use verify mode when supplied with --verify', () => {\n-    const {argv, mode, errors} = parseArguments(['--verify', 'out.d.ts', 'input.d.ts']);\n-    expect(argv['verify']).toBe('out.d.ts');\n-    expect(argv._).toEqual(['input.d.ts']);\n-    expect(mode).toBe('verify');\n-    expect(errors).toEqual([]);\n-  });\n-\n-  it('should show usage with error when supplied with --autoDiscoverEntrypoints without --baseDir',\n-     () => {\n-       const {mode, errors} =\n-           parseArguments(['--autoDiscoverEntrypoints', '--outDir', 'something']);\n-       expect(mode).toBe('help');\n-       expect(errors).toEqual(['--rootDir must be provided with --autoDiscoverEntrypoints.']);\n-     });\n-\n-  it('should show usage with error when supplied with --autoDiscoverEntrypoints without --outDir/verifyDir',\n-     () => {\n-       const {mode, errors} =\n-           parseArguments(['--autoDiscoverEntrypoints', '--rootDir', 'something']);\n-       expect(mode).toBe('help');\n-       expect(errors).toEqual(\n-           ['--outDir or --verifyDir must be used with --autoDiscoverEntrypoints.']);\n-     });\n-});"
        },
        {
            "sha": "485e4ef31a9bb3c3e84e2c4b842aef177b34ecab",
            "filename": "tools/ts-api-guardian/test/fixtures/classes_and_interfaces.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fclasses_and_interfaces.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fclasses_and_interfaces.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fclasses_and_interfaces.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,14 +0,0 @@\n-export declare class A {\n-    field: string;\n-    method(a: string): number;\n-}\n-export interface B {\n-    field: A;\n-}\n-export declare class C {\n-    private privateProp;\n-    propWithDefault: number;\n-    protected protectedProp: number;\n-    someProp: string;\n-    constructor(someProp: string, propWithDefault: number, privateProp: any, protectedProp: number);\n-}"
        },
        {
            "sha": "6c37af1a01d2ee52c7c2825243c46513c16e5ed7",
            "filename": "tools/ts-api-guardian/test/fixtures/classes_and_interfaces_expected.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 15,
            "changes": 15,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fclasses_and_interfaces_expected.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fclasses_and_interfaces_expected.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fclasses_and_interfaces_expected.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,15 +0,0 @@\n-export declare class A {\n-    field: string;\n-    method(a: string): number;\n-}\n-\n-export interface B {\n-    field: A;\n-}\n-\n-export declare class C {\n-    propWithDefault: number;\n-    protected protectedProp: number;\n-    someProp: string;\n-    constructor(someProp: string, propWithDefault: number, privateProp: any, protectedProp: number);\n-}"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "tools/ts-api-guardian/test/fixtures/empty.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fempty.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fempty.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fempty.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba"
        },
        {
            "sha": "823e9bf40a2144b88c8da9de2b4b57a583844a9c",
            "filename": "tools/ts-api-guardian/test/fixtures/empty.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fempty.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fempty.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fempty.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,7 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "tools/ts-api-guardian/test/fixtures/empty_expected.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fempty_expected.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fempty_expected.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fempty_expected.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba"
        },
        {
            "sha": "db4a3c65e7779dc538cb2f2e3bbd86e61a293c15",
            "filename": "tools/ts-api-guardian/test/fixtures/enum_as_type.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fenum_as_type.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fenum_as_type.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fenum_as_type.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,8 +0,0 @@\n-export declare enum Foo {\n-  Alpha = 0,\n-  Beta = 1,\n-}\n-\n-export interface Bar {\n-  field: Foo.Alpha,\n-}\n\\ No newline at end of file"
        },
        {
            "sha": "63e8c6ba32effa15988cafe7cba1ddfbb66fb55d",
            "filename": "tools/ts-api-guardian/test/fixtures/enum_as_type_expected.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 8,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fenum_as_type_expected.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fenum_as_type_expected.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fenum_as_type_expected.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,8 +0,0 @@\n-export interface Bar {\n-  field: Foo.Alpha,\n-}\n-\n-export declare enum Foo {\n-  Alpha = 0,\n-  Beta = 1,\n-}"
        },
        {
            "sha": "4e161fe44c5987112647a4864c84c7fe6a36afb4",
            "filename": "tools/ts-api-guardian/test/fixtures/exports_type_and_value.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fexports_type_and_value.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fexports_type_and_value.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fexports_type_and_value.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,4 +0,0 @@\n-export interface TypeOnly { field: string; }\n-export interface TypeAndValue { field: string; }\n-\n-export const TypeAndValue: Function;\n\\ No newline at end of file"
        },
        {
            "sha": "63ff60881369661ec6ce7c39f58079873fa91988",
            "filename": "tools/ts-api-guardian/test/fixtures/exports_type_and_value_expected.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fexports_type_and_value_expected.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fexports_type_and_value_expected.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fexports_type_and_value_expected.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,5 +0,0 @@\n-export interface TypeAndValue { field: string; }\n-\n-export const TypeAndValue: Function;\n-\n-export interface TypeOnly { field: string; }"
        },
        {
            "sha": "c2b6c1749cbfb55cc32f539b05b0dea9e1fcbfee",
            "filename": "tools/ts-api-guardian/test/fixtures/keyof.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fkeyof.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fkeyof.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fkeyof.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,3 +0,0 @@\n-export declare type SimpleChanges<T = any> = {\n-    [P in keyof T]?: any;\n-};\n\\ No newline at end of file"
        },
        {
            "sha": "b04470236813849fd85888f28f7ad777cd624df9",
            "filename": "tools/ts-api-guardian/test/fixtures/keyof_expected.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fkeyof_expected.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fkeyof_expected.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fkeyof_expected.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,3 +0,0 @@\n-export declare type SimpleChanges<T = any> = {\n-    [P in keyof T]?: any;\n-};"
        },
        {
            "sha": "f8af6eedf4fd8e896acf4930bed3205e6ae1b256",
            "filename": "tools/ts-api-guardian/test/fixtures/module_identifier.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fmodule_identifier.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fmodule_identifier.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fmodule_identifier.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,5 +0,0 @@\n-import * as foo from './somewhere';\n-\n-/** @publicApi */\n-export declare class A extends foo.Bar {\n-}"
        },
        {
            "sha": "174b833508fe1d3b9f8cf08b0a6b967ef06b131e",
            "filename": "tools/ts-api-guardian/test/fixtures/module_identifier_expected.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fmodule_identifier_expected.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fmodule_identifier_expected.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fmodule_identifier_expected.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,2 +0,0 @@\n-export declare class A extends foo.Bar {\n-}"
        },
        {
            "sha": "b583f44e4f090e6de0141c738b4108f5de22f767",
            "filename": "tools/ts-api-guardian/test/fixtures/reexported.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1 +0,0 @@\n-export { A, B } from './simple';"
        },
        {
            "sha": "058677bf1b21e5e60cdfd88f750edd427d2efd45",
            "filename": "tools/ts-api-guardian/test/fixtures/reexported_aliased.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_aliased.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_aliased.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_aliased.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1 +0,0 @@\n-export { A as Apple } from './classes_and_interfaces';"
        },
        {
            "sha": "01a7a03a1051b919b0954427bbb2410ae7778199",
            "filename": "tools/ts-api-guardian/test/fixtures/reexported_classes.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_classes.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_classes.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_classes.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1 +0,0 @@\n-export { A } from './classes_and_interfaces';"
        },
        {
            "sha": "b8c57509245c590dfa1cb73534eaab09fc75b3e4",
            "filename": "tools/ts-api-guardian/test/fixtures/reexported_classes_expected.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_classes_expected.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_classes_expected.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_classes_expected.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,4 +0,0 @@\n-export declare class A {\n-    field: string;\n-    method(a: string): number;\n-}"
        },
        {
            "sha": "7020ff3c3f79965ab7e36be54855794fd9d276aa",
            "filename": "tools/ts-api-guardian/test/fixtures/reexported_expected.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_expected.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_expected.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_expected.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,3 +0,0 @@\n-export declare const A: string;\n-\n-export declare var B: string;"
        },
        {
            "sha": "0c0d859899ae375e0335f769a1850cdde3df0509",
            "filename": "tools/ts-api-guardian/test/fixtures/reexported_extern.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_extern.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_extern.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_extern.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,5 +0,0 @@\n-/**\n- * We want to ensure that external modules are not resolved. Typescript happens\n- * to be conveniently available in our environment.\n- */\n-export { CompilerHost } from 'typescript';"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "tools/ts-api-guardian/test/fixtures/reexported_extern_expected.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_extern_expected.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_extern_expected.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_extern_expected.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba"
        },
        {
            "sha": "882a36dbe8c19eaa8195b8077587781c28737aec",
            "filename": "tools/ts-api-guardian/test/fixtures/reexported_star.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_star.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_star.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_star.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1 +0,0 @@\n-export * from './simple';"
        },
        {
            "sha": "7020ff3c3f79965ab7e36be54855794fd9d276aa",
            "filename": "tools/ts-api-guardian/test/fixtures/reexported_star_expected.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_star_expected.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_star_expected.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Freexported_star_expected.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,3 +0,0 @@\n-export declare const A: string;\n-\n-export declare var B: string;"
        },
        {
            "sha": "b3c07b7e77b065735fe7b3cdbe79cf6812d24fd4",
            "filename": "tools/ts-api-guardian/test/fixtures/simple.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fsimple.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fsimple.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fsimple.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,4 +0,0 @@\n-/** @publicApi */\n-export declare const A: string;\n-/** @publicApi */\n-export declare var B: string;"
        },
        {
            "sha": "7020ff3c3f79965ab7e36be54855794fd9d276aa",
            "filename": "tools/ts-api-guardian/test/fixtures/simple_expected.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fsimple_expected.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fsimple_expected.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fsimple_expected.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,3 +0,0 @@\n-export declare const A: string;\n-\n-export declare var B: string;"
        },
        {
            "sha": "59daef5b7b9dbd1e3946363ebadf44bd42dd6e4b",
            "filename": "tools/ts-api-guardian/test/fixtures/sorting.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 17,
            "changes": 17,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fsorting.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fsorting.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fsorting.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,17 +0,0 @@\n-/** @publicApi */\n-export declare type E = string;\n-/** @publicApi */\n-export interface D {\n-    e: number;\n-}\n-/** @publicApi */\n-export declare var e: C;\n-/** @publicApi */\n-export declare class C {\n-    e: number;\n-    d: string;\n-}\n-/** @publicApi */\n-export declare function b(): boolean;\n-/** @publicApi */\n-export declare const a: string;"
        },
        {
            "sha": "d3921f8d9110a2d83992f9467fec52e74a8df8f7",
            "filename": "tools/ts-api-guardian/test/fixtures/sorting_expected.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 16,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fsorting_expected.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fsorting_expected.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fsorting_expected.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,16 +0,0 @@\n-export declare const a: string;\n-\n-export declare function b(): boolean;\n-\n-export declare class C {\n-    d: string;\n-    e: number;\n-}\n-\n-export interface D {\n-    e: number;\n-}\n-\n-export declare var e: C;\n-\n-export declare type E = string;"
        },
        {
            "sha": "b3ba8b7a40a5f74e9b7220f2b1a808438a3d2362",
            "filename": "tools/ts-api-guardian/test/fixtures/stripped_alias.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fstripped_alias.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fstripped_alias.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fstripped_alias.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,4 +0,0 @@\n-export {original_symbol as __private_symbol} from './stripped_alias_original';\n-/** @publicApi */\n-export class B {\n-}\n\\ No newline at end of file"
        },
        {
            "sha": "94fa3c9c47a32df92d8204e13e8fcaaae1db7e66",
            "filename": "tools/ts-api-guardian/test/fixtures/stripped_alias_expected.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fstripped_alias_expected.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fstripped_alias_expected.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fstripped_alias_expected.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,2 +0,0 @@\n-export class B {\n-}"
        },
        {
            "sha": "76536ae8353e8351a14f8a60613d0f945f174e9e",
            "filename": "tools/ts-api-guardian/test/fixtures/stripped_alias_original.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fstripped_alias_original.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fstripped_alias_original.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fstripped_alias_original.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1 +0,0 @@\n-export let original_symbol: number;\n\\ No newline at end of file"
        },
        {
            "sha": "1a2e41b591e15b20b01e50f54253453a5f907b86",
            "filename": "tools/ts-api-guardian/test/fixtures/type_literals.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Ftype_literals.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Ftype_literals.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Ftype_literals.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,7 +0,0 @@\n-export class UsesTypeLiterals {\n-  a: number | undefined;\n-  b: number | null;\n-  c: number | true;\n-  d: number | null | undefined;\n-  e: Array<string | null | undefined>;\n-}\n\\ No newline at end of file"
        },
        {
            "sha": "ce70fa6fa395aef17e509d40e4707dd3d40d7d91",
            "filename": "tools/ts-api-guardian/test/fixtures/type_literals_expected.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 7,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Ftype_literals_expected.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Ftype_literals_expected.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Ftype_literals_expected.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,7 +0,0 @@\n-export class UsesTypeLiterals {\n-  a: number | undefined;\n-  b: number | null;\n-  c: number | true;\n-  d: number | null | undefined;\n-  e: Array<string | null | undefined>;\n-}"
        },
        {
            "sha": "8ff7249036ce685761388a6f2b736d5c17a5e082",
            "filename": "tools/ts-api-guardian/test/fixtures/underscored.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Funderscored.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Funderscored.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Funderscored.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,4 +0,0 @@\n-export const __a__: string;\n-/** @publicApi */\n-export class B {\n-}"
        },
        {
            "sha": "94fa3c9c47a32df92d8204e13e8fcaaae1db7e66",
            "filename": "tools/ts-api-guardian/test/fixtures/underscored_expected.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Funderscored_expected.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Funderscored_expected.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Funderscored_expected.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,2 +0,0 @@\n-export class B {\n-}"
        },
        {
            "sha": "bb23ff2ee236c7a2b9e83a87b346ad44baa7c4e2",
            "filename": "tools/ts-api-guardian/test/fixtures/verify.patch",
            "status": "removed",
            "additions": 0,
            "deletions": 11,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fverify.patch",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fverify.patch",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fverify.patch?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,11 +0,0 @@\n---- test/fixtures/verify_expected.d.ts\tGolden file\n-+++ test/fixtures/verify_expected.d.ts\tGenerated API\n-@@ -1,5 +1,6 @@\n- export interface A {\n-     c: number;\n--    a(arg: any[]): any;\n--    b: string;\n-+    a(arg: any[]): {[name: string]: number};\n- }\n-+\n-+export declare const b: boolean;"
        },
        {
            "sha": "6c5d1c5cffe13e4f582d5c9480a5fe96ac3a31be",
            "filename": "tools/ts-api-guardian/test/fixtures/verify_entrypoint.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fverify_entrypoint.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fverify_entrypoint.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fverify_entrypoint.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,6 +0,0 @@\n-/** @publicApi */\n-export interface A {\n-    c: number;\n-    a(arg: any[]): {[name: string]: number};\n-}\n-export { b } from './verify_submodule';"
        },
        {
            "sha": "c7d5188ec4afab06b7dbd21d029df066465d1881",
            "filename": "tools/ts-api-guardian/test/fixtures/verify_expected.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fverify_expected.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fverify_expected.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fverify_expected.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,5 +0,0 @@\n-export interface A {\n-    c: number;\n-    a(arg: any[]): any;\n-    b: string;\n-}"
        },
        {
            "sha": "ae7a488d4bdc0460ef2c712e18dbbff65a979158",
            "filename": "tools/ts-api-guardian/test/fixtures/verify_submodule.d.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fverify_submodule.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fverify_submodule.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Ffixtures%2Fverify_submodule.d.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,2 +0,0 @@\n-/** @publicApi */\n-export declare const b: boolean;"
        },
        {
            "sha": "5079a45045da482de49e8c6594e97f976ad615d3",
            "filename": "tools/ts-api-guardian/test/helpers.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 13,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Fhelpers.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Fhelpers.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Fhelpers.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,13 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-import {readFileSync} from 'fs';\n-\n-export function assertFileEqual(actualFile: string, expectedFile: string) {\n-  expect(readFileSync(actualFile).toString()).toBe(readFileSync(expectedFile).toString());\n-}"
        },
        {
            "sha": "e46881059b0864e16f7df02965ba087f9c222355",
            "filename": "tools/ts-api-guardian/test/integration_test.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 151,
            "changes": 151,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Fintegration_test.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Fintegration_test.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Fintegration_test.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,151 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-import * as fs from 'fs';\n-import * as path from 'path';\n-\n-import * as main from '../lib/main';\n-\n-import {assertFileEqual} from './helpers';\n-\n-describe('integration test: public api', () => {\n-  let _warn: any = null;\n-  let warnings: string[] = [];\n-  beforeEach(() => {\n-    _warn = console.warn;\n-    console.warn = (...args: string[]) => warnings.push(args.join(' '));\n-  });\n-\n-  afterEach(() => {\n-    console.warn = _warn;\n-    warnings = [];\n-    _warn = null;\n-  });\n-\n-  it('should handle empty files', () => {\n-    check('test/fixtures/empty.d.ts', 'test/fixtures/empty_expected.d.ts');\n-  });\n-\n-  it('should include symbols', () => {\n-    check('test/fixtures/simple.d.ts', 'test/fixtures/simple_expected.d.ts');\n-  });\n-\n-  it('should include symbols reexported explicitly', () => {\n-    check('test/fixtures/reexported.d.ts', 'test/fixtures/reexported_expected.d.ts');\n-  });\n-\n-  it('should include symbols reexported with *', () => {\n-    check('test/fixtures/reexported_star.d.ts', 'test/fixtures/reexported_star_expected.d.ts');\n-  });\n-\n-  it('should include members of classes and interfaces', () => {\n-    check(\n-        'test/fixtures/classes_and_interfaces.d.ts',\n-        'test/fixtures/classes_and_interfaces_expected.d.ts');\n-  });\n-\n-  it('should include value and type', () => {\n-    check(\n-        'test/fixtures/exports_type_and_value.d.ts',\n-        'test/fixtures/exports_type_and_value_expected.d.ts');\n-  });\n-\n-  it('should include members reexported classes', () => {\n-    check(\n-        'test/fixtures/reexported_classes.d.ts', 'test/fixtures/reexported_classes_expected.d.ts');\n-  });\n-\n-  it('should remove reexported external symbols', () => {\n-    check('test/fixtures/reexported_extern.d.ts', 'test/fixtures/reexported_extern_expected.d.ts');\n-    expect(warnings).toEqual([\n-      'test/fixtures/reexported_extern.d.ts(5,1): error: No export declaration found for symbol \"CompilerHost\"'\n-    ]);\n-  });\n-\n-  it('should support type literals', () => {\n-    check('test/fixtures/type_literals.d.ts', 'test/fixtures/type_literals_expected.d.ts');\n-  });\n-\n-  it('should allow enums as types', () => {\n-    check('test/fixtures/enum_as_type.d.ts', 'test/fixtures/enum_as_type_expected.d.ts');\n-  });\n-\n-  it('should throw on passing a .ts file as an input', () => {\n-    expect(() => main.publicApi('test/fixtures/empty.ts'))\n-        .toThrowError('Source file \"test/fixtures/empty.ts\" is not a declaration file');\n-  });\n-\n-  it('should respect serialization options', () => {\n-    check(\n-        'test/fixtures/underscored.d.ts', 'test/fixtures/underscored_expected.d.ts',\n-        {stripExportPattern: /^__.*/});\n-  });\n-});\n-\n-describe('integration test: generateGoldenFile', () => {\n-  const outDir = path.join(process.env['TEST_TMPDIR'], 'tmp');\n-  const outFile = path.join(outDir, 'out.d.ts');\n-  const deepOutFile = path.join(outDir, 'a/b/c/out.d.ts');\n-\n-  beforeEach(() => {\n-    if (!fs.existsSync(outDir)) {\n-      fs.mkdirSync(outDir);\n-    }\n-  });\n-\n-  afterEach(() => {\n-    fs.rmdirSync(outDir, {recursive: true});\n-  });\n-\n-\n-  it('should generate a golden file', () => {\n-    main.generateGoldenFile('test/fixtures/reexported_classes.d.ts', outFile);\n-    assertFileEqual(outFile, 'test/fixtures/reexported_classes_expected.d.ts');\n-  });\n-\n-  it('should generate a golden file with any ancestor directory created', () => {\n-    main.generateGoldenFile('test/fixtures/reexported_classes.d.ts', deepOutFile);\n-    assertFileEqual(deepOutFile, 'test/fixtures/reexported_classes_expected.d.ts');\n-  });\n-\n-  it('should respect serialization options', () => {\n-    main.generateGoldenFile(\n-        'test/fixtures/underscored.d.ts', outFile, {stripExportPattern: /^__.*/});\n-    assertFileEqual(outFile, 'test/fixtures/underscored_expected.d.ts');\n-  });\n-\n-  it('should generate a golden file with keyof', () => {\n-    main.generateGoldenFile('test/fixtures/keyof.d.ts', outFile);\n-    assertFileEqual(outFile, 'test/fixtures/keyof_expected.d.ts');\n-  });\n-});\n-\n-describe('integration test: verifyAgainstGoldenFile', () => {\n-  it('should check an entrypoint against a golden file on equal', () => {\n-    const diff = main.verifyAgainstGoldenFile(\n-        'test/fixtures/reexported_classes.d.ts', 'test/fixtures/reexported_classes_expected.d.ts');\n-    expect(diff).toBe('');\n-  });\n-\n-  it('should check an entrypoint against a golden file with proper diff message', () => {\n-    const diff = main.verifyAgainstGoldenFile(\n-        'test/fixtures/verify_entrypoint.d.ts', 'test/fixtures/verify_expected.d.ts');\n-    expect(diff).toBe(fs.readFileSync('test/fixtures/verify.patch').toString());\n-  });\n-\n-  it('should respect serialization options', () => {\n-    const diff = main.verifyAgainstGoldenFile(\n-        'test/fixtures/underscored.d.ts', 'test/fixtures/underscored_expected.d.ts',\n-        {stripExportPattern: /^__.*/});\n-    expect(diff).toBe('');\n-  });\n-});\n-\n-function check(sourceFile: string, expectedFile: string, options: main.SerializationOptions = {}) {\n-  expect(main.publicApi(sourceFile, options)).toBe(fs.readFileSync(expectedFile).toString());\n-}"
        },
        {
            "sha": "c74205b7209ff2658aa23dc783a5a44cc593f48a",
            "filename": "tools/ts-api-guardian/test/unit_test.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 655,
            "changes": 655,
            "blob_url": "https://github.com/angular/angular/blob/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Funit_test.ts",
            "raw_url": "https://github.com/angular/angular/raw/271700cbb605eada5fa73e5d2c4924dfaa430fba/tools%2Fts-api-guardian%2Ftest%2Funit_test.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Funit_test.ts?ref=271700cbb605eada5fa73e5d2c4924dfaa430fba",
            "patch": "@@ -1,655 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-import * as ts from 'typescript';\n-\n-import {publicApiInternal, SerializationOptions} from '../lib/serializer';\n-\n-const classesAndInterfaces = `\n-  export declare class A {\n-      field: string;\n-      method(a: string): number;\n-  }\n-  export interface B {\n-      field: A;\n-  }\n-  export declare class C {\n-      someProp: string;\n-      propWithDefault: number;\n-      private privateProp;\n-      protected protectedProp: number;\n-      constructor(someProp: string, propWithDefault: number, privateProp: any, protectedProp: number);\n-  }\n-`;\n-\n-describe('unit test', () => {\n-  let _warn: any = null;\n-  let warnings: string[] = [];\n-  beforeEach(() => {\n-    _warn = console.warn;\n-    console.warn = (...args: string[]) => warnings.push(args.join(' '));\n-  });\n-\n-  afterEach(() => {\n-    console.warn = _warn;\n-    warnings = [];\n-    _warn = null;\n-  });\n-\n-  it('should ignore private methods', () => {\n-    const input = `\n-      export declare class A {\n-          fa(): void;\n-          protected fb(): void;\n-          private fc();\n-      }\n-    `;\n-    const expected = `\n-      export declare class A {\n-          fa(): void;\n-          protected fb(): void;\n-      }\n-    `;\n-    check({'file.d.ts': input}, expected);\n-  });\n-\n-  it('should support overloads functions', () => {\n-    const input = `\n-      export declare function group(steps: AnimationMetadata[], options?: AnimationOptions | null): AnimationGroupMetadata;\n-\n-      export declare function registerLocaleData(data: any, extraData?: any): void;\n-      export declare function registerLocaleData(data: any, localeId?: string, extraData?: any): void;\n-    `;\n-\n-    const expected = `\n-      export declare function group(steps: AnimationMetadata[], options?: AnimationOptions | null): AnimationGroupMetadata;\n-\n-      export declare function registerLocaleData(data: any, extraData?: any): void;\n-      export declare function registerLocaleData(data: any, localeId?: string, extraData?: any): void;\n-    `;\n-\n-    check({'file.d.ts': input}, expected);\n-  });\n-\n-  it('should ignore private props', () => {\n-    const input = `\n-      export declare class A {\n-          fa: any;\n-          protected fb: any;\n-          private fc;\n-      }\n-    `;\n-    const expected = `\n-      export declare class A {\n-          fa: any;\n-          protected fb: any;\n-      }\n-    `;\n-    check({'file.d.ts': input}, expected);\n-  });\n-\n-  it('should support imports without capturing imports', () => {\n-    const input = `\n-      import {A} from './classes_and_interfaces';\n-      export declare class C {\n-          field: A;\n-      }\n-    `;\n-    const expected = `\n-      export declare class C {\n-          field: A;\n-      }\n-    `;\n-    check({'classes_and_interfaces.d.ts': classesAndInterfaces, 'file.d.ts': input}, expected);\n-  });\n-\n-  it('should throw on aliased reexports', () => {\n-    const input = `\n-      export { A as Apple } from './classes_and_interfaces';\n-    `;\n-    checkThrows(\n-        {'classes_and_interfaces.d.ts': classesAndInterfaces, 'file.d.ts': input},\n-        'Symbol \"A\" was aliased as \"Apple\". Aliases are not supported.');\n-  });\n-\n-  it('should remove reexported external symbols', () => {\n-    const input = `\n-      export { Foo } from 'some-external-module-that-cannot-be-resolved';\n-    `;\n-    const expected = `\n-    `;\n-    check({'classes_and_interfaces.d.ts': classesAndInterfaces, 'file.d.ts': input}, expected);\n-    expect(warnings).toEqual(\n-        ['file.d.ts(1,1): error: No export declaration found for symbol \"Foo\"']);\n-  });\n-\n-  it('should sort exports', () => {\n-    const input = `\n-      export declare type E = string;\n-      export interface D {\n-          e: number;\n-      }\n-      export declare var e: C;\n-      export declare class C {\n-          e: number;\n-          d: string;\n-      }\n-      export declare function b(): boolean;\n-      export declare const a: string;\n-    `;\n-    const expected = `\n-      export declare const a: string;\n-\n-      export declare function b(): boolean;\n-\n-      export declare class C {\n-          d: string;\n-          e: number;\n-      }\n-\n-      export interface D {\n-          e: number;\n-      }\n-\n-      export declare var e: C;\n-\n-      export declare type E = string;\n-    `;\n-    check({'file.d.ts': input}, expected);\n-  });\n-\n-  it('should sort class members', () => {\n-    const input = `\n-      export class A {\n-        f: number;\n-        static foo(): void;\n-        c: string;\n-        static a: boolean;\n-        constructor();\n-        static bar(): void;\n-      }\n-    `;\n-    const expected = `\n-      export class A {\n-        c: string;\n-        f: number;\n-        constructor();\n-        static a: boolean;\n-        static bar(): void;\n-        static foo(): void;\n-      }\n-    `;\n-    check({'file.d.ts': input}, expected);\n-  });\n-\n-  it('should sort interface members', () => {\n-    const input = `\n-      export interface A {\n-        (): void;\n-        [key: string]: any;\n-        c(): void;\n-        a: number;\n-        new (): Object;\n-      }\n-    `;\n-    const expected = `\n-      export interface A {\n-        a: number;\n-        (): void;\n-        new (): Object;\n-        [key: string]: any;\n-        c(): void;\n-      }\n-    `;\n-    check({'file.d.ts': input}, expected);\n-  });\n-\n-  it('should sort class members including readonly', () => {\n-    const input = `\n-        export declare class DebugNode {\n-          private _debugContext;\n-          nativeNode: any;\n-          listeners: any[];\n-          parent: any | null;\n-          constructor(nativeNode: any, parent: DebugNode | null, _debugContext: any);\n-          readonly injector: any;\n-          readonly componentInstance: any;\n-          readonly context: any;\n-          readonly references: {\n-              [key: string]: any;\n-          };\n-          readonly providerTokens: any[];\n-      }\n-    `;\n-    const expected = `\n-        export declare class DebugNode {\n-          readonly componentInstance: any;\n-          readonly context: any;\n-          readonly injector: any;\n-          listeners: any[];\n-          nativeNode: any;\n-          parent: any | null;\n-          readonly providerTokens: any[];\n-          readonly references: {\n-              [key: string]: any;\n-          };\n-          constructor(nativeNode: any, parent: DebugNode | null, _debugContext: any);\n-      }\n-    `;\n-    check({'file.d.ts': input}, expected);\n-  });\n-\n-  it('should sort two call signatures', () => {\n-    const input = `\n-      export interface A {\n-        (b: number): void;\n-        (a: number): void;\n-      }\n-    `;\n-    const expected = `\n-      export interface A {\n-        (a: number): void;\n-        (b: number): void;\n-      }\n-    `;\n-    check({'file.d.ts': input}, expected);\n-  });\n-\n-  it('should sort exports including re-exports', () => {\n-    const submodule = `\n-      export declare var e: C;\n-      export declare class C {\n-          e: number;\n-          d: string;\n-      }\n-    `;\n-    const input = `\n-      export * from './submodule';\n-      export declare type E = string;\n-      export interface D {\n-          e: number;\n-      }\n-      export declare function b(): boolean;\n-      export declare const a: string;\n-    `;\n-    const expected = `\n-      export declare const a: string;\n-\n-      export declare function b(): boolean;\n-\n-      export declare class C {\n-          d: string;\n-          e: number;\n-      }\n-\n-      export interface D {\n-          e: number;\n-      }\n-\n-      export declare var e: C;\n-\n-      export declare type E = string;\n-    `;\n-    check({'submodule.d.ts': submodule, 'file.d.ts': input}, expected);\n-  });\n-\n-  it('should remove module comments', () => {\n-    const input = `\n-      /**\n-       * An amazing module.\n-       * @module\n-       */\n-      /**\n-       * Foo function.\n-       */\n-      export declare function foo(): boolean;\n-      export declare const bar: number;\n-    `;\n-    const expected = `\n-      export declare const bar: number;\n-\n-      export declare function foo(): boolean;\n-    `;\n-    check({'file.d.ts': input}, expected);\n-  });\n-\n-  it('should remove class and field comments', () => {\n-    const input = `\n-      /**\n-       * Does something really cool.\n-       */\n-      export declare class A {\n-          /**\n-           * A very interesting getter.\n-           */\n-          b: string;\n-          /**\n-           * A very useful field.\n-           */\n-          name: string;\n-      }\n-    `;\n-    const expected = `\n-      export declare class A {\n-          b: string;\n-          name: string;\n-      }\n-    `;\n-    check({'file.d.ts': input}, expected);\n-  });\n-\n-  it('should skip symbols matching specified pattern', () => {\n-    const input = `\n-      export const __a__: string;\n-      export class B {\n-      }\n-    `;\n-    const expected = `\n-      export class B {\n-      }\n-    `;\n-    check({'file.d.ts': input}, expected, {stripExportPattern: /^__.*/});\n-  });\n-\n-  it('should throw on using module imports in expression position that were not explicitly allowed',\n-     () => {\n-       const input = `\n-      import * as foo from './foo';\n-      export declare class A extends foo.A {\n-      }\n-    `;\n-       checkThrows(\n-           {'file.d.ts': input},\n-           'file.d.ts(2,32): error: Module identifier \"foo\" is not allowed. ' +\n-               'Remove it from source or allow it via --allowModuleIdentifiers.');\n-     });\n-\n-  it('should throw on using module imports in type position that were not explicitly allowed',\n-     () => {\n-       const input = `\n-      import * as foo from './foo';\n-      export type A = foo.A;\n-    `;\n-       checkThrows(\n-           {'file.d.ts': input},\n-           'file.d.ts(2,17): error: Module identifier \"foo\" is not allowed. ' +\n-               'Remove it from source or allow it via --allowModuleIdentifiers.');\n-     });\n-\n-  it('should not throw on using explicitly allowed module imports', () => {\n-    const input = `\n-      import * as foo from './foo';\n-      export declare class A extends foo.A {\n-      }\n-    `;\n-    const expected = `\n-      export declare class A extends foo.A {\n-      }\n-    `;\n-    check({'file.d.ts': input}, expected, {allowModuleIdentifiers: ['foo']});\n-  });\n-\n-  it('should not throw if module imports, that were not explicitly allowed, are not used', () => {\n-    const input = `\n-      import * as foo from './foo';\n-      export declare class A {\n-      }\n-    `;\n-    const expected = `\n-      export declare class A {\n-      }\n-    `;\n-    check({'file.d.ts': input}, expected);\n-  });\n-\n-  it('should copy specified jsdoc tags of exports in docstrings', () => {\n-    const input = `\n-      /**\n-       * @deprecated This is useless now\n-       */\n-      export declare class A {\n-      }\n-      /**\n-       * @experimental\n-       */\n-      export declare const b: string;\n-      /**\n-       * @stable\n-       */\n-      export declare var c: number;\n-    `;\n-    const expected = `\n-      /** @deprecated */\n-      export declare class A {\n-      }\n-\n-      /** @experimental */\n-      export declare const b: string;\n-\n-      export declare var c: number;\n-    `;\n-    check({'file.d.ts': input}, expected, {exportTags: {toCopy: ['deprecated', 'experimental']}});\n-  });\n-\n-  it('should copy specified jsdoc tags of fields in docstrings', () => {\n-    const input = `\n-      /** @otherTag */\n-      export declare class A {\n-        /**\n-         * @stable\n-         */\n-        value: number;\n-        /**\n-         * @experimental\n-         * @otherTag\n-         */\n-        constructor();\n-        /**\n-         * @deprecated\n-         */\n-        foo(): void;\n-      }\n-    `;\n-    const expected = `\n-      export declare class A {\n-        value: number;\n-        /** @experimental */ constructor();\n-        /** @deprecated */ foo(): void;\n-      }\n-    `;\n-    check({'file.d.ts': input}, expected, {memberTags: {toCopy: ['deprecated', 'experimental']}});\n-  });\n-\n-  it('should copy specified jsdoc tags of parameters in docstrings', () => {\n-    const input = `\n-      export declare class A {\n-        foo(str: string, /** @deprecated */ value: number): void;\n-      }\n-    `;\n-    const expected = `\n-      export declare class A {\n-        foo(str: string, /** @deprecated */ value: number): void;\n-      }\n-    `;\n-    check({'file.d.ts': input}, expected, {paramTags: {toCopy: ['deprecated', 'experimental']}});\n-  });\n-\n-  it('should throw on using banned jsdoc tags on exports', () => {\n-    const input = `\n-      /**\n-       * @stable\n-       */\n-      export declare class A {\n-        value: number;\n-      }\n-    `;\n-    checkThrows(\n-        {'file.d.ts': input},\n-        'file.d.ts(4,1): error: Banned jsdoc tags - \"@stable\" - were found on `A`.',\n-        {exportTags: {banned: ['stable']}});\n-  });\n-\n-  it('should throw on using banned jsdoc tags on fields', () => {\n-    const input = `\n-      export declare class A {\n-        /**\n-         * @stable\n-         */\n-        value: number;\n-      }\n-    `;\n-    checkThrows(\n-        {'file.d.ts': input},\n-        'file.d.ts(5,3): error: Banned jsdoc tags - \"@stable\" - were found on `value`.',\n-        {memberTags: {banned: ['stable']}});\n-  });\n-\n-  it('should throw on using banned jsdoc tags on parameters', () => {\n-    const input = `\n-      export declare class A {\n-        foo(/** @stable */ param: number): void;\n-      }\n-    `;\n-    checkThrows(\n-        {'file.d.ts': input},\n-        'file.d.ts(2,22): error: Banned jsdoc tags - \"@stable\" - were found on `param`.',\n-        {paramTags: {banned: ['stable']}});\n-  });\n-\n-  it('should throw on missing required jsdoc tags on exports', () => {\n-    const input = `\n-      /** @experimental */\n-      export declare class A {\n-        value: number;\n-      }\n-    `;\n-    checkThrows(\n-        {'file.d.ts': input},\n-        'file.d.ts(2,1): error: Required jsdoc tags - One of the tags: \"@stable\" - must exist on `A`.',\n-        {exportTags: {requireAtLeastOne: ['stable']}});\n-  });\n-\n-  it('should throw on missing required jsdoc tags on fields', () => {\n-    const input = `\n-      /** @experimental */\n-      export declare class A {\n-        value: number;\n-      }\n-    `;\n-    checkThrows(\n-        {'file.d.ts': input},\n-        'file.d.ts(3,3): error: Required jsdoc tags - One of the tags: \"@stable\" - must exist on `value`.',\n-        {memberTags: {requireAtLeastOne: ['stable']}});\n-  });\n-\n-  it('should throw on missing required jsdoc tags on parameters', () => {\n-    const input = `\n-      /** @experimental */\n-      export declare class A {\n-        foo(param: number): void;\n-      }\n-    `;\n-    checkThrows(\n-        {'file.d.ts': input},\n-        'file.d.ts(3,7): error: Required jsdoc tags - One of the tags: \"@stable\" - must exist on `param`.',\n-        {paramTags: {requireAtLeastOne: ['stable']}});\n-  });\n-\n-  it('should require at least one of the requireAtLeastOne tags', () => {\n-    const input = `\n-      /** @experimental */\n-      export declare class A {\n-        foo(param: number): void;\n-      }\n-    `;\n-    checkThrows(\n-        {'file.d.ts': input},\n-        'file.d.ts(3,7): error: Required jsdoc tags - One of the tags: \"@stable\", \"@foo\", \"@bar\" - must exist on `param`.',\n-        {paramTags: {requireAtLeastOne: ['stable', 'foo', 'bar']}});\n-  });\n-\n-  it('should allow with one of the requireAtLeastOne tags found', () => {\n-    const input = `\n-      /**\n-       * @foo\n-       * @bar\n-       * @stable\n-       */\n-      export declare class A {\n-      }\n-      /**\n-       * @foo\n-       */\n-      export declare const b: string;\n-      /**\n-       * @bar\n-       */\n-      export declare var c: number;\n-      /**\n-       * @stable\n-       */\n-      export declare function d(): void;\n-    `;\n-    const expected = `\n-    export declare class A {\n-    }\n-\n-    export declare const b: string;\n-\n-    export declare var c: number;\n-\n-    export declare function d(): void;\n-    `;\n-    check(\n-        {'file.d.ts': input}, expected,\n-        {exportTags: {requireAtLeastOne: ['stable', 'foo', 'bar']}});\n-  });\n-});\n-\n-function getMockHost(files: {[name: string]: string}): ts.CompilerHost {\n-  return {\n-    getSourceFile: (sourceName, languageVersion) => {\n-      if (!files[sourceName]) return undefined;\n-      return ts.createSourceFile(\n-          sourceName, stripExtraIndentation(files[sourceName]), languageVersion, true);\n-    },\n-    writeFile: (name, text, writeByteOrderMark) => {},\n-    fileExists: (filename) => !!files[filename],\n-    readFile: (filename) => stripExtraIndentation(files[filename]),\n-    getDefaultLibFileName: () => 'lib.ts',\n-    useCaseSensitiveFileNames: () => true,\n-    getCanonicalFileName: (filename) => filename,\n-    getCurrentDirectory: () => './',\n-    getNewLine: () => '\\n',\n-    getDirectories: () => []\n-  };\n-}\n-\n-function check(\n-    files: {[name: string]: string}, expected: string, options: SerializationOptions = {}) {\n-  const actual = publicApiInternal(getMockHost(files), 'file.d.ts', {}, options);\n-  expect(actual.trim()).toBe(stripExtraIndentation(expected).trim());\n-}\n-\n-function checkThrows(\n-    files: {[name: string]: string}, error: string, options: SerializationOptions = {}) {\n-  expect(() => publicApiInternal(getMockHost(files), 'file.d.ts', {}, options)).toThrowError(error);\n-}\n-\n-function stripExtraIndentation(text: string) {\n-  let lines = text.split('\\n');\n-  // Ignore first and last new line\n-  lines = lines.slice(1, lines.length - 1);\n-  const commonIndent = lines.reduce((min, line) => {\n-    const indent = /^( *)/.exec(line)![1].length;\n-    // Ignore empty line\n-    return line.length ? Math.min(min, indent) : min;\n-  }, text.length);\n-\n-  return lines.map(line => line.substr(commonIndent)).join('\\n') + '\\n';\n-}"
        },
        {
            "sha": "3a0358f660ec60e2ed04c44513e665effc495f26",
            "filename": "tools/tsconfig.json",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43/tools%2Ftsconfig.json",
            "raw_url": "https://github.com/angular/angular/raw/72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43/tools%2Ftsconfig.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Ftsconfig.json?ref=72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43",
            "patch": "@@ -26,7 +26,6 @@\n   \"exclude\": [\n     \"testing\",\n     \"node_modules\",\n-    \"ts-api-guardian\",\n     \"typings-test\",\n     \"public_api_guard\",\n     \"docs\""
        },
        {
            "sha": "2f812a798aaad36d0da975c64b93e81307f9e653",
            "filename": "tslint.json",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43/tslint.json",
            "raw_url": "https://github.com/angular/angular/raw/72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43/tslint.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tslint.json?ref=72c03a0d4f46729c6dc1422bae51cc8b8c5e0c43",
            "patch": "@@ -116,7 +116,6 @@\n       // Ignore test files\n       \"./packages/compiler-cli/test/compliance/test_cases/**/*\",\n       \"./packages/localize/**/test_files/**/*\",\n-      \"./tools/ts-api-guardian/test/fixtures/**/*\",\n       \"./tools/public_api_guard/**/*.d.ts\",\n       \"./modules/benchmarks_external/**/*\",\n       // Ignore zone.js directory"
        }
    ],
    "stats": {
        "total": 2447,
        "additions": 4,
        "deletions": 2443
    }
}