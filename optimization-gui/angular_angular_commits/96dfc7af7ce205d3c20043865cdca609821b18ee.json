{
    "author": "ramthir",
    "message": "refactor(core): make the error messages tree shakable (#44219)\n\nLong error messages can be tree-shaken in the production build.\nDoing this, we will keep the throw and remove the long error messages.\n\nSee: https://github.com/angular/angular/pull/44210#pullrequestreview-810615849\n\nPR Close #44219",
    "sha": "96dfc7af7ce205d3c20043865cdca609821b18ee",
    "files": [
        {
            "sha": "2a5635614759df485c11d7ae6513a757527f6184",
            "filename": "goldens/size-tracking/aio-payloads.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/96dfc7af7ce205d3c20043865cdca609821b18ee/goldens%2Fsize-tracking%2Faio-payloads.json",
            "raw_url": "https://github.com/angular/angular/raw/96dfc7af7ce205d3c20043865cdca609821b18ee/goldens%2Fsize-tracking%2Faio-payloads.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fsize-tracking%2Faio-payloads.json?ref=96dfc7af7ce205d3c20043865cdca609821b18ee",
            "patch": "@@ -15,12 +15,12 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime\": 4436,\n-        \"main\": 459822,\n+        \"main\": 459047,\n         \"polyfills\": 37271,\n         \"styles\": 70719,\n         \"light-theme\": 77717,\n         \"dark-theme\": 77897\n       }\n     }\n   }\n-}\n\\ No newline at end of file\n+}"
        },
        {
            "sha": "47d12afc1d87b06c47db58c62f40a5f5a9a3ac89",
            "filename": "goldens/size-tracking/integration-payloads.json",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/96dfc7af7ce205d3c20043865cdca609821b18ee/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "raw_url": "https://github.com/angular/angular/raw/96dfc7af7ce205d3c20043865cdca609821b18ee/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fsize-tracking%2Fintegration-payloads.json?ref=96dfc7af7ce205d3c20043865cdca609821b18ee",
            "patch": "@@ -3,8 +3,8 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime\": 1083,\n-        \"main\": 138745,\n-        \"polyfills\": 37226\n+        \"main\": 138491,\n+        \"polyfills\": 36964\n       }\n     }\n   },\n@@ -24,7 +24,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime\": 1105,\n-        \"main\": 144744,\n+        \"main\": 144185,\n         \"polyfills\": 36939\n       }\n     }\n@@ -33,7 +33,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime\": 929,\n-        \"main\": 137444,\n+        \"main\": 136770,\n         \"polyfills\": 37933\n       }\n     }\n@@ -42,7 +42,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime\": 2843,\n-        \"main\": 231164,\n+        \"main\": 230506,\n         \"polyfills\": 37064,\n         \"src_app_lazy_lazy_module_ts\": 795\n       }\n@@ -52,7 +52,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime\": 1063,\n-        \"main\": 164069,\n+        \"main\": 163342,\n         \"polyfills\": 36975\n       }\n     }\n@@ -68,4 +68,4 @@\n       }\n     }\n   }\n-}\n\\ No newline at end of file\n+}"
        },
        {
            "sha": "b7cf355c786878d2fabf7bbc1422334440f2c486",
            "filename": "packages/core/src/application_ref.ts",
            "status": "modified",
            "additions": 35,
            "deletions": 16,
            "changes": 51,
            "blob_url": "https://github.com/angular/angular/blob/96dfc7af7ce205d3c20043865cdca609821b18ee/packages%2Fcore%2Fsrc%2Fapplication_ref.ts",
            "raw_url": "https://github.com/angular/angular/raw/96dfc7af7ce205d3c20043865cdca609821b18ee/packages%2Fcore%2Fsrc%2Fapplication_ref.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fapplication_ref.ts?ref=96dfc7af7ce205d3c20043865cdca609821b18ee",
            "patch": "@@ -32,6 +32,7 @@ import {InternalViewRef, ViewRef} from './linker/view_ref';\n import {isComponentResourceResolutionQueueEmpty, resolveComponentResources} from './metadata/resource_loading';\n import {assertNgModuleType} from './render3/assert';\n import {ComponentFactory as R3ComponentFactory} from './render3/component_ref';\n+import {RuntimeError, RuntimeErrorCode} from './render3/error_code';\n import {setLocaleId} from './render3/i18n/i18n_locale_id';\n import {setJitOptions} from './render3/jit/jit_options';\n import {NgModuleFactory as R3NgModuleFactory} from './render3/ng_module_ref';\n@@ -123,8 +124,10 @@ export class NgProbeToken {\n export function createPlatform(injector: Injector): PlatformRef {\n   if (_platform && !_platform.destroyed &&\n       !_platform.injector.get(ALLOW_MULTIPLE_PLATFORMS, false)) {\n-    throw new Error(\n-        'There can be only one platform. Destroy the previous one to create a new one.');\n+    const errorMessage = (typeof ngDevMode === 'undefined' || ngDevMode) ?\n+        'There can be only one platform. Destroy the previous one to create a new one.' :\n+        '';\n+    throw new RuntimeError(RuntimeErrorCode.MULTIPLE_PLATFORMS, errorMessage);\n   }\n   publishDefaultGlobalUtils();\n   _platform = injector.get(PlatformRef);\n@@ -177,11 +180,15 @@ export function assertPlatform(requiredToken: any): PlatformRef {\n   const platform = getPlatform();\n \n   if (!platform) {\n-    throw new Error('No platform exists!');\n+    const errorMessage =\n+        (typeof ngDevMode === 'undefined' || ngDevMode) ? 'No platform exists!' : '';\n+    throw new RuntimeError(RuntimeErrorCode.PLATFORM_NOT_FOUND, errorMessage);\n   }\n \n-  if (!platform.injector.get(requiredToken, null)) {\n-    throw new Error(\n+  if ((typeof ngDevMode === 'undefined' || ngDevMode) &&\n+      !platform.injector.get(requiredToken, null)) {\n+    throw new RuntimeError(\n+        RuntimeErrorCode.MULTIPLE_PLATFORMS,\n         'A platform with a different configuration has been created. Please destroy it first.');\n   }\n \n@@ -329,7 +336,10 @@ export class PlatformRef {\n       const moduleRef = <InternalNgModuleRef<M>>moduleFactory.create(ngZoneInjector);\n       const exceptionHandler: ErrorHandler|null = moduleRef.injector.get(ErrorHandler, null);\n       if (!exceptionHandler) {\n-        throw new Error('No ErrorHandler. Is platform module (BrowserModule) included?');\n+        const errorMessage = (typeof ngDevMode === 'undefined' || ngDevMode) ?\n+            'No ErrorHandler. Is platform module (BrowserModule) included?' :\n+            '';\n+        throw new RuntimeError(RuntimeErrorCode.ERROR_HANDLER_NOT_FOUND, errorMessage);\n       }\n       ngZone!.runOutsideAngular(() => {\n         const subscription = ngZone!.onError.subscribe({\n@@ -388,12 +398,12 @@ export class PlatformRef {\n     } else if (moduleRef.instance.ngDoBootstrap) {\n       moduleRef.instance.ngDoBootstrap(appRef);\n     } else {\n-      throw new Error(\n-          `The module ${\n-              stringify(\n-                  moduleRef.instance\n-                      .constructor)} was bootstrapped, but it does not declare \"@NgModule.bootstrap\" components nor a \"ngDoBootstrap\" method. ` +\n-          `Please define one of these.`);\n+      const errorMessage = (typeof ngDevMode === 'undefined' || ngDevMode) ?\n+          `The module ${stringify(moduleRef.instance.constructor)} was bootstrapped, ` +\n+              `but it does not declare \"@NgModule.bootstrap\" components nor a \"ngDoBootstrap\" method. ` +\n+              `Please define one of these.` :\n+          '';\n+      throw new RuntimeError(RuntimeErrorCode.BOOTSTRAP_COMPONENTS_NOT_FOUND, errorMessage);\n     }\n     this._modules.push(moduleRef);\n   }\n@@ -419,7 +429,10 @@ export class PlatformRef {\n    */\n   destroy() {\n     if (this._destroyed) {\n-      throw new Error('The platform has already been destroyed!');\n+      const errorMessage = (typeof ngDevMode === 'undefined' || ngDevMode) ?\n+          'The platform has already been destroyed!' :\n+          '';\n+      throw new RuntimeError(RuntimeErrorCode.ALREADY_DESTROYED_PLATFORM, errorMessage);\n     }\n     this._modules.slice().forEach(module => module.destroy());\n     this._destroyListeners.forEach(listener => listener());\n@@ -782,8 +795,11 @@ export class ApplicationRef {\n   bootstrap<C>(componentOrFactory: ComponentFactory<C>|Type<C>, rootSelectorOrNode?: string|any):\n       ComponentRef<C> {\n     if (!this._initStatus.done) {\n-      throw new Error(\n-          'Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.');\n+      const errorMessage = (typeof ngDevMode === 'undefined' || ngDevMode) ?\n+          'Cannot bootstrap as there are still asynchronous initializers running. ' +\n+              'Bootstrap components in the `ngDoBootstrap` method of the root module.' :\n+          '';\n+      throw new RuntimeError(RuntimeErrorCode.ASYNC_INITIALIZERS_STILL_RUNNING, errorMessage);\n     }\n     let componentFactory: ComponentFactory<C>;\n     if (componentOrFactory instanceof ComponentFactory) {\n@@ -835,7 +851,10 @@ export class ApplicationRef {\n    */\n   tick(): void {\n     if (this._runningTick) {\n-      throw new Error('ApplicationRef.tick is called recursively');\n+      const errorMessage = (typeof ngDevMode === 'undefined' || ngDevMode) ?\n+          'ApplicationRef.tick is called recursively' :\n+          '';\n+      throw new RuntimeError(RuntimeErrorCode.RECURSIVE_APPLICATION_REF_TICK, errorMessage);\n     }\n \n     try {"
        },
        {
            "sha": "1e34bdb268c981ebe32150501fcea1ecadeebfed",
            "filename": "packages/core/src/render3/error_code.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/96dfc7af7ce205d3c20043865cdca609821b18ee/packages%2Fcore%2Fsrc%2Frender3%2Ferror_code.ts",
            "raw_url": "https://github.com/angular/angular/raw/96dfc7af7ce205d3c20043865cdca609821b18ee/packages%2Fcore%2Fsrc%2Frender3%2Ferror_code.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Ferror_code.ts?ref=96dfc7af7ce205d3c20043865cdca609821b18ee",
            "patch": "@@ -13,6 +13,7 @@ export const enum RuntimeErrorCode {\n \n   // Change Detection Errors\n   EXPRESSION_CHANGED_AFTER_CHECKED = '100',\n+  RECURSIVE_APPLICATION_REF_TICK = '101',\n \n   // Dependency Injection Errors\n   CYCLIC_DI_DEPENDENCY = '200',\n@@ -24,7 +25,15 @@ export const enum RuntimeErrorCode {\n   PIPE_NOT_FOUND = '302',\n   UNKNOWN_BINDING = '303',\n   UNKNOWN_ELEMENT = '304',\n-  TEMPLATE_STRUCTURE_ERROR = '305'\n+  TEMPLATE_STRUCTURE_ERROR = '305',\n+\n+  // Bootstrap Errors\n+  MULTIPLE_PLATFORMS = '400',\n+  PLATFORM_NOT_FOUND = '401',\n+  ERROR_HANDLER_NOT_FOUND = '402',\n+  BOOTSTRAP_COMPONENTS_NOT_FOUND = '403',\n+  ALREADY_DESTROYED_PLATFORM = '404',\n+  ASYNC_INITIALIZERS_STILL_RUNNING = '405',\n \n   // Styling Errors\n "
        },
        {
            "sha": "e5b118fd800d8cc64b793345fe73ceccc730b5e4",
            "filename": "packages/core/test/application_ref_spec.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/96dfc7af7ce205d3c20043865cdca609821b18ee/packages%2Fcore%2Ftest%2Fapplication_ref_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/96dfc7af7ce205d3c20043865cdca609821b18ee/packages%2Fcore%2Ftest%2Fapplication_ref_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fapplication_ref_spec.ts?ref=96dfc7af7ce205d3c20043865cdca609821b18ee",
            "patch": "@@ -166,7 +166,7 @@ class SomeComponent {\n         appRef.attachView(fixture.componentRef.hostView);\n         appRef.tick();\n         expect(fixture.componentInstance.reenterErr.message)\n-            .toBe('ApplicationRef.tick is called recursively');\n+            .toBe('NG0101: ApplicationRef.tick is called recursively');\n       });\n \n       describe('APP_BOOTSTRAP_LISTENER', () => {\n@@ -204,7 +204,7 @@ class SomeComponent {\n                  createRootEl();\n                  expect(() => ref.bootstrap(SomeComponent))\n                      .toThrowError(\n-                         'Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.');\n+                         'NG0405: Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.');\n                })));\n       });\n     });\n@@ -273,7 +273,8 @@ class SomeComponent {\n            return defaultPlatform.bootstrapModule(EmptyModule)\n                .then(() => fail('expecting error'), (error) => {\n                  expect(error.message)\n-                     .toEqual('No ErrorHandler. Is platform module (BrowserModule) included?');\n+                     .toEqual(\n+                         'NG0402: No ErrorHandler. Is platform module (BrowserModule) included?');\n                });\n          }));\n \n@@ -300,7 +301,7 @@ class SomeComponent {\n            defaultPlatform.bootstrapModule(createModule({ngDoBootstrap: false}))\n                .then(() => expect(false).toBe(true), (e) => {\n                  const expectedErrMsg =\n-                     `The module MyModule was bootstrapped, but it does not declare \"@NgModule.bootstrap\" components nor a \"ngDoBootstrap\" method. Please define one of these.`;\n+                     `NG0403: The module MyModule was bootstrapped, but it does not declare \"@NgModule.bootstrap\" components nor a \"ngDoBootstrap\" method. Please define one of these.`;\n                  expect(e.message).toEqual(expectedErrMsg);\n                  expect(mockConsole.res[0].join('#')).toEqual('ERROR#Error: ' + expectedErrMsg);\n                });"
        }
    ],
    "stats": {
        "total": 89,
        "additions": 59,
        "deletions": 30
    }
}