{
    "author": "mgechev",
    "message": "fix(devtools): proper dev mode detection when app compiled with closure",
    "sha": "ee0c245b4452603fb801f86b77b0b3eef5ee8ec2",
    "files": [
        {
            "sha": "58febdad5a9b5258c54f348d690a0da610263886",
            "filename": "projects/ng-devtools-backend/src/lib/angular-check.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 1,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/ee0c245b4452603fb801f86b77b0b3eef5ee8ec2/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fangular-check.ts",
            "raw_url": "https://github.com/angular/angular/raw/ee0c245b4452603fb801f86b77b0b3eef5ee8ec2/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fangular-check.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fangular-check.ts?ref=ee0c245b4452603fb801f86b77b0b3eef5ee8ec2",
            "patch": "@@ -21,8 +21,16 @@ export const appIsSupportedAngularVersion = (): boolean => {\n   return appIsAngular() && (major >= 9 || major === 0);\n };\n \n+/**\n+ * We check if the global `window.ng` is an object and if this object\n+ * has the `getComponent` method attached to it. In some g3 apps processed\n+ * with Closure, `ng` is a function, which means that `typeof ng !== 'undefined'`\n+ * is not a sufficient check.\n+ *\n+ * @returns if the app has global ng debug object\n+ */\n const appHasGlobalNgDebugObject = (): boolean => {\n-  return typeof ng !== 'undefined';\n+  return typeof ng === 'object' && typeof ng.getComponent === 'function';\n };\n \n export const getAngularVersion = (): string | null => {"
        },
        {
            "sha": "4bb56802c082eef3bdc033873970f1deebe7315e",
            "filename": "projects/ng-devtools-backend/src/lib/client-event-subscribers.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/ee0c245b4452603fb801f86b77b0b3eef5ee8ec2/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fclient-event-subscribers.ts",
            "raw_url": "https://github.com/angular/angular/raw/ee0c245b4452603fb801f86b77b0b3eef5ee8ec2/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fclient-event-subscribers.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fclient-event-subscribers.ts?ref=ee0c245b4452603fb801f86b77b0b3eef5ee8ec2",
            "patch": "@@ -50,7 +50,7 @@ export const subscribeToClientEvents = (messageBus: MessageBus<Events>): void =>\n     // Often websites have `scroll` event listener which triggers\n     // Angular's change detection. We don't want to constantly send\n     // update requests, instead we want to request an update at most\n-    // every 250ms\n+    // once every 250ms\n     runOutsideAngular(() => {\n       initializeOrGetDirectiveForestHooks()\n         .profiler.changeDetection$.pipe(debounceTime(250))"
        },
        {
            "sha": "7b0724b2087c99148d6b136b961f6756ea70d055",
            "filename": "projects/ng-devtools-backend/src/lib/utils.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/ee0c245b4452603fb801f86b77b0b3eef5ee8ec2/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Futils.ts",
            "raw_url": "https://github.com/angular/angular/raw/ee0c245b4452603fb801f86b77b0b3eef5ee8ec2/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Futils.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Futils.ts?ref=ee0c245b4452603fb801f86b77b0b3eef5ee8ec2",
            "patch": "@@ -8,7 +8,12 @@ export const runOutsideAngular = (f: () => any): void => {\n     w.Zone.current.run(f);\n     return;\n   }\n-  w.Zone.current._parent.run(f);\n+  const parent = w.Zone.current._parent;\n+  if (parent && parent.run) {\n+    parent.run(f);\n+    return;\n+  }\n+  f();\n };\n \n export const isCustomElement = (node: Node) => {"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 16,
        "deletions": 3
    }
}