{
    "author": "dgp1130",
    "message": "refactor(compiler-cli): add `allDiagnosticFactories` (#44391)\n\nRefs #42966.\n\nThis is a static array of all the 1P extended template diagnostic factories built into the Angular compiler directly. It provides an encapsulated list of all diagnostics rather than requiring users to manually list each one individually.\n\nPR Close #44391",
    "sha": "4033fdf5caf4d176f2b2ae2f7c51b96c90317c54",
    "files": [
        {
            "sha": "7f00fa4479aa5dc14708b41e8300426baf14dda0",
            "filename": "packages/compiler-cli/src/ngtsc/core/BUILD.bazel",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/4033fdf5caf4d176f2b2ae2f7c51b96c90317c54/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/4033fdf5caf4d176f2b2ae2f7c51b96c90317c54/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2FBUILD.bazel?ref=4033fdf5caf4d176f2b2ae2f7c51b96c90317c54",
            "patch": "@@ -37,8 +37,6 @@ ts_library(\n         \"//packages/compiler-cli/src/ngtsc/typecheck/diagnostics\",\n         \"//packages/compiler-cli/src/ngtsc/typecheck/extended\",\n         \"//packages/compiler-cli/src/ngtsc/typecheck/extended/api\",\n-        \"//packages/compiler-cli/src/ngtsc/typecheck/extended/checks/invalid_banana_in_box\",\n-        \"//packages/compiler-cli/src/ngtsc/typecheck/extended/checks/nullish_coalescing_not_nullable\",\n         \"//packages/compiler-cli/src/ngtsc/util\",\n         \"//packages/compiler-cli/src/ngtsc/xi18n\",\n         \"@npm//typescript\","
        },
        {
            "sha": "9ffb0e984346d4ef7ec568a81ad964ab12b1b8db",
            "filename": "packages/compiler-cli/src/ngtsc/core/src/compiler.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/4033fdf5caf4d176f2b2ae2f7c51b96c90317c54/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fcompiler.ts",
            "raw_url": "https://github.com/angular/angular/raw/4033fdf5caf4d176f2b2ae2f7c51b96c90317c54/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fcompiler.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fcompiler.ts?ref=4033fdf5caf4d176f2b2ae2f7c51b96c90317c54",
            "patch": "@@ -28,10 +28,8 @@ import {generatedFactoryTransform} from '../../shims';\n import {aliasTransformFactory, CompilationMode, declarationTransformFactory, DecoratorHandler, DtsTransformRegistry, ivyTransformFactory, TraitCompiler} from '../../transform';\n import {TemplateTypeCheckerImpl} from '../../typecheck';\n import {OptimizeFor, TemplateTypeChecker, TypeCheckingConfig} from '../../typecheck/api';\n-import {ExtendedTemplateCheckerImpl} from '../../typecheck/extended';\n+import {ALL_DIAGNOSTIC_FACTORIES, ExtendedTemplateCheckerImpl} from '../../typecheck/extended';\n import {ExtendedTemplateChecker} from '../../typecheck/extended/api';\n-import {factory as invalidBananaInBoxFactory} from '../../typecheck/extended/checks/invalid_banana_in_box';\n-import {factory as NullishCoalescingNotNullableFactory} from '../../typecheck/extended/checks/nullish_coalescing_not_nullable';\n import {getSourceFileOrNull, isDtsPath, toUnredirectedSourceFile} from '../../util/src/typescript';\n import {Xi18nContext} from '../../xi18n';\n import {NgCompilerAdapter, NgCompilerOptions} from '../api';\n@@ -1067,9 +1065,8 @@ export class NgCompiler {\n         reflector, this.adapter, this.incrementalCompilation, scopeRegistry, typeCheckScopeRegistry,\n         this.delegatingPerfRecorder);\n \n-    const diagnosticFactories = [invalidBananaInBoxFactory, NullishCoalescingNotNullableFactory];\n     const extendedTemplateChecker = new ExtendedTemplateCheckerImpl(\n-        templateTypeChecker, checker, diagnosticFactories, this.options);\n+        templateTypeChecker, checker, ALL_DIAGNOSTIC_FACTORIES, this.options);\n \n     return {\n       isCore,"
        },
        {
            "sha": "00218c0b36c01df3ebcbca62cf763f2dacd9e667",
            "filename": "packages/compiler-cli/src/ngtsc/typecheck/extended/BUILD.bazel",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/4033fdf5caf4d176f2b2ae2f7c51b96c90317c54/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Fextended%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/4033fdf5caf4d176f2b2ae2f7c51b96c90317c54/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Fextended%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Fextended%2FBUILD.bazel?ref=4033fdf5caf4d176f2b2ae2f7c51b96c90317c54",
            "patch": "@@ -11,6 +11,8 @@ ts_library(\n         \"//packages/compiler-cli/src/ngtsc/diagnostics\",\n         \"//packages/compiler-cli/src/ngtsc/typecheck/api\",\n         \"//packages/compiler-cli/src/ngtsc/typecheck/extended/api\",\n+        \"//packages/compiler-cli/src/ngtsc/typecheck/extended/checks/invalid_banana_in_box\",\n+        \"//packages/compiler-cli/src/ngtsc/typecheck/extended/checks/nullish_coalescing_not_nullable\",\n         \"@npm//typescript\",\n     ],\n )"
        },
        {
            "sha": "0717e4634d6c7f2d32fdfe0dff2b434475fb6a74",
            "filename": "packages/compiler-cli/src/ngtsc/typecheck/extended/index.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/4033fdf5caf4d176f2b2ae2f7c51b96c90317c54/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Fextended%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/4033fdf5caf4d176f2b2ae2f7c51b96c90317c54/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Fextended%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Fextended%2Findex.ts?ref=4033fdf5caf4d176f2b2ae2f7c51b96c90317c54",
            "patch": "@@ -6,4 +6,16 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n+import {ErrorCode, ExtendedTemplateDiagnosticName} from '../../diagnostics';\n+\n+import {TemplateCheckFactory} from './api';\n+import {factory as invalidBananaInBoxFactory} from './checks/invalid_banana_in_box';\n+import {factory as nullishCoalescingNotNullableFactory} from './checks/nullish_coalescing_not_nullable';\n+\n export {ExtendedTemplateCheckerImpl} from './src/extended_template_checker';\n+\n+export const ALL_DIAGNOSTIC_FACTORIES:\n+    readonly TemplateCheckFactory<ErrorCode, ExtendedTemplateDiagnosticName>[] = [\n+      invalidBananaInBoxFactory,\n+      nullishCoalescingNotNullableFactory,\n+    ];"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 16,
        "deletions": 7
    }
}