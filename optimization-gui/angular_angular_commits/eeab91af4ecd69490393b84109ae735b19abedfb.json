{
    "author": "JoostK",
    "message": "test(compiler-cli): log unexpected compilation errors in compliance test runner (#39862)\n\nIf the testcase has not specified that errors were expected, then any\nerrors that have occurred should be reported. These errors may have\nprevented an output file from being generated, which resulted in hard\nto debug test failures due to missing files.\n\nPR Close #39862",
    "sha": "eeab91af4ecd69490393b84109ae735b19abedfb",
    "files": [
        {
            "sha": "5eccb24c44ac332c510228695f68d2f6a739cb92",
            "filename": "packages/compiler-cli/test/compliance/test_helpers/check_errors.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/eeab91af4ecd69490393b84109ae735b19abedfb/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fcheck_errors.ts",
            "raw_url": "https://github.com/angular/angular/raw/eeab91af4ecd69490393b84109ae735b19abedfb/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fcheck_errors.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fcheck_errors.ts?ref=eeab91af4ecd69490393b84109ae735b19abedfb",
            "patch": "@@ -22,3 +22,11 @@ export function checkErrors(\n     }\n   }\n }\n+\n+export function checkNoUnexpectedErrors(testPath: string, actualErrors: string[]): void {\n+  if (actualErrors.length > 0) {\n+    throw new Error(\n+        `Unexpected errors occurred for test case at \"${testPath}\"\\n` +\n+        `Errors: ${inspect(actualErrors)}.`);\n+  }\n+}"
        },
        {
            "sha": "19501f6c7c9e6c3e2b770ca9bc20e775a96b920c",
            "filename": "packages/compiler-cli/test/compliance/test_helpers/test_runner.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/eeab91af4ecd69490393b84109ae735b19abedfb/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Ftest_runner.ts",
            "raw_url": "https://github.com/angular/angular/raw/eeab91af4ecd69490393b84109ae735b19abedfb/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Ftest_runner.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Ftest_runner.ts?ref=eeab91af4ecd69490393b84109ae735b19abedfb",
            "patch": "@@ -9,7 +9,7 @@ import {FileSystem} from '../../../src/ngtsc/file_system';\n import {checkExpectations} from '../test_helpers/check_expectations';\n import {CompileResult, initMockTestFileSystem} from '../test_helpers/compile_test';\n import {ComplianceTest, getAllComplianceTests} from '../test_helpers/get_compliance_tests';\n-import {checkErrors} from './check_errors';\n+import {checkErrors, checkNoUnexpectedErrors} from './check_errors';\n \n /**\n  * Set up jasmine specs for each of the compliance tests.\n@@ -46,6 +46,7 @@ export function runTests(\n                   test.relativePath, expectation.failureMessage, expectation.expectedErrors,\n                   errors);\n             } else {\n+              checkNoUnexpectedErrors(test.relativePath, errors);\n               checkExpectations(\n                   fs, test.relativePath, expectation.failureMessage, expectation.files,\n                   expectation.extraChecks);"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 10,
        "deletions": 1
    }
}