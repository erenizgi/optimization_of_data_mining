{
    "author": "gkalpak",
    "message": "test(docs-infra): fix and enable remaining `component-interaction` e2e tests (#39001)\n\nPreviously, some of the e2e tests of the `component-interaction` docs\nexample were disabled because they were failing.\n\nThis commit fixes and re-enables them.\n\nPR Close #39001",
    "sha": "53a7ed43177e67ec9e046589f47ceb830458aebc",
    "files": [
        {
            "sha": "d5727cc70c64a9ed08c54f3ba9a2818833572953",
            "filename": "aio/content/examples/component-interaction/e2e/src/app.e2e-spec.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 5,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/53a7ed43177e67ec9e046589f47ceb830458aebc/aio%2Fcontent%2Fexamples%2Fcomponent-interaction%2Fe2e%2Fsrc%2Fapp.e2e-spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/53a7ed43177e67ec9e046589f47ceb830458aebc/aio%2Fcontent%2Fexamples%2Fcomponent-interaction%2Fe2e%2Fsrc%2Fapp.e2e-spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Fcomponent-interaction%2Fe2e%2Fsrc%2Fapp.e2e-spec.ts?ref=53a7ed43177e67ec9e046589f47ceb830458aebc",
            "patch": "@@ -145,27 +145,35 @@ describe('Component Communication Cookbook Tests', () => {\n     // #enddocregion child-to-parent\n   });\n \n-  // Can't run timer tests in protractor because\n-  // interaction w/ zones causes all tests to freeze & timeout.\n-  xdescribe('Parent calls child via local var', () => {\n+  describe('Parent calls child via local var', () => {\n     countDownTimerTests('app-countdown-parent-lv');\n   });\n \n-  xdescribe('Parent calls ViewChild', () => {\n+  describe('Parent calls ViewChild', () => {\n     countDownTimerTests('app-countdown-parent-vc');\n   });\n \n   function countDownTimerTests(parentTag: string) {\n     // #docregion countdown-timer-tests\n     // ...\n+    // The tests trigger periodic asynchronous operations (via `setInterval()`), which will prevent\n+    // the app from stabilizing. See https://angular.io/api/core/ApplicationRef#is-stable-examples\n+    // for more details.\n+    // To allow the tests to complete, we will disable automatically waiting for the Angular app to\n+    // stabilize.\n+    beforeEach(() => browser.waitForAngularEnabled(false));\n+    afterEach(() => browser.waitForAngularEnabled(true));\n+\n     it('timer and parent seconds should match', async () => {\n       const parent = element(by.tagName(parentTag));\n       const startButton = parent.element(by.buttonText('Start'));\n       const seconds = parent.element(by.className('seconds'));\n       const timer = parent.element(by.tagName('app-countdown-timer'));\n \n       await startButton.click();\n-      await browser.sleep(10); // give `seconds` a chance to catchup with `timer`\n+\n+      // Wait for `<app-countdown-timer>` to be populated with any text.\n+      await browser.wait(() => timer.getText(), 2000);\n \n       expect(await timer.getText()).toContain(await seconds.getText());\n     });"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 13,
        "deletions": 5
    }
}