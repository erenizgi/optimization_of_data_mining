{
    "author": "alan-agius4",
    "message": "refactor(compiler-cli): remove dependency on minimist (#43644)\n\nThe compiler already has a dependency on another parser (`yargs`).\n\nPR Close #43644",
    "sha": "9442a2f856a21b5af85c2048f9866733e0c68344",
    "files": [
        {
            "sha": "47b250741d1162251a610e4562ec1933c45ec20a",
            "filename": "packages/compiler-cli/BUILD.bazel",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/9442a2f856a21b5af85c2048f9866733e0c68344/packages%2Fcompiler-cli%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/9442a2f856a21b5af85c2048f9866733e0c68344/packages%2Fcompiler-cli%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2FBUILD.bazel?ref=9442a2f856a21b5af85c2048f9866733e0c68344",
            "patch": "@@ -45,7 +45,6 @@ esbuild(\n         \"tsickle\",\n         \"@babel/core\",\n         \"reflect-metadata\",\n-        \"minimist\",\n         \"canonical-path\",\n         \"chokidar\",\n         \"convert-source-map\",\n@@ -107,10 +106,9 @@ ts_library(\n         \"//packages/compiler-cli/src/ngtsc/typecheck/api\",\n         \"//packages/compiler-cli/src/transformers/downlevel_decorators_transform\",\n         \"@npm//@bazel/typescript\",\n-        \"@npm//@types/minimist\",\n         \"@npm//@types/node\",\n+        \"@npm//@types/yargs\",\n         \"@npm//chokidar\",\n-        \"@npm//minimist\",\n         \"@npm//reflect-metadata\",\n         \"@npm//tsickle\",\n         \"@npm//typescript\","
        },
        {
            "sha": "eba5eff2236b72a6ee80cde89d087f41624efaad",
            "filename": "packages/compiler-cli/ngcc/BUILD.bazel",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/9442a2f856a21b5af85c2048f9866733e0c68344/packages%2Fcompiler-cli%2Fngcc%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/9442a2f856a21b5af85c2048f9866733e0c68344/packages%2Fcompiler-cli%2Fngcc%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2FBUILD.bazel?ref=9442a2f856a21b5af85c2048f9866733e0c68344",
            "patch": "@@ -40,5 +40,6 @@ ts_library(\n         \"@npm//magic-string\",\n         \"@npm//semver\",\n         \"@npm//typescript\",\n+        \"@npm//yargs\",\n     ],\n )"
        },
        {
            "sha": "47237b1e2bada80db62aa3806b68cf514814a2b8",
            "filename": "packages/compiler-cli/ngcc/test/BUILD.bazel",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/9442a2f856a21b5af85c2048f9866733e0c68344/packages%2Fcompiler-cli%2Fngcc%2Ftest%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/9442a2f856a21b5af85c2048f9866733e0c68344/packages%2Fcompiler-cli%2Fngcc%2Ftest%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Ftest%2FBUILD.bazel?ref=9442a2f856a21b5af85c2048f9866733e0c68344",
            "patch": "@@ -28,12 +28,11 @@ ts_library(\n         \"//packages/compiler-cli/src/ngtsc/transform\",\n         \"//packages/compiler-cli/src/ngtsc/translator\",\n         \"@npm//@types/convert-source-map\",\n-        \"@npm//convert-source-map\",\n+        \"@npm//@types/yargs\",\n         \"@npm//dependency-graph\",\n         \"@npm//magic-string\",\n         \"@npm//sourcemap-codec\",\n         \"@npm//typescript\",\n-        \"@npm//yargs\",\n     ],\n )\n "
        },
        {
            "sha": "66868c093744d189450dd94ffe7c76585fab6038",
            "filename": "packages/compiler-cli/package.json",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/9442a2f856a21b5af85c2048f9866733e0c68344/packages%2Fcompiler-cli%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/9442a2f856a21b5af85c2048f9866733e0c68344/packages%2Fcompiler-cli%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fpackage.json?ref=9442a2f856a21b5af85c2048f9866733e0c68344",
            "patch": "@@ -55,7 +55,6 @@\n   \"dependencies\": {\n     \"@babel/core\": \"^7.8.6\",\n     \"reflect-metadata\": \"^0.1.2\",\n-    \"minimist\": \"^1.2.0\",\n     \"canonical-path\": \"1.0.0\",\n     \"chokidar\": \"^3.0.0\",\n     \"convert-source-map\": \"^1.5.1\","
        },
        {
            "sha": "302a8131bf32e5e3bfe668cf67a604277b3dcd6c",
            "filename": "packages/compiler-cli/src/extract_i18n.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/9442a2f856a21b5af85c2048f9866733e0c68344/packages%2Fcompiler-cli%2Fsrc%2Fextract_i18n.ts",
            "raw_url": "https://github.com/angular/angular/raw/9442a2f856a21b5af85c2048f9866733e0c68344/packages%2Fcompiler-cli%2Fsrc%2Fextract_i18n.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fextract_i18n.ts?ref=9442a2f856a21b5af85c2048f9866733e0c68344",
            "patch": "@@ -10,7 +10,7 @@\n  * Extract i18n messages from source code\n  */\n \n-import minimist from 'minimist';\n+import yargs from 'yargs';\n \n import {main, readCommandLineAndConfiguration} from './main';\n import {ParsedConfiguration} from './perform_compile';\n@@ -24,7 +24,12 @@ export function mainXi18n(\n \n function readXi18nCommandLineAndConfiguration(args: string[]): ParsedConfiguration {\n   const options: api.CompilerOptions = {};\n-  const parsedArgs = minimist(args);\n+  const parsedArgs = yargs(args)\n+                         .option('i18nFormat', {type: 'string'})\n+                         .option('locale', {type: 'string'})\n+                         .option('outFile', {type: 'string'})\n+                         .parseSync();\n+\n   if (parsedArgs.outFile) options.i18nOutFile = parsedArgs.outFile;\n   if (parsedArgs.i18nFormat) options.i18nOutFormat = parsedArgs.i18nFormat;\n   if (parsedArgs.locale) options.i18nOutLocale = parsedArgs.locale;"
        },
        {
            "sha": "86a119387353038fc5440a350da9880fff7fb26c",
            "filename": "packages/compiler-cli/src/main.ts",
            "status": "modified",
            "additions": 17,
            "deletions": 9,
            "changes": 26,
            "blob_url": "https://github.com/angular/angular/blob/9442a2f856a21b5af85c2048f9866733e0c68344/packages%2Fcompiler-cli%2Fsrc%2Fmain.ts",
            "raw_url": "https://github.com/angular/angular/raw/9442a2f856a21b5af85c2048f9866733e0c68344/packages%2Fcompiler-cli%2Fsrc%2Fmain.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fmain.ts?ref=9442a2f856a21b5af85c2048f9866733e0c68344",
            "patch": "@@ -6,10 +6,9 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import minimist from 'minimist';\n import ts from 'typescript';\n-\n import type {TsickleHost} from 'tsickle';\n+import yargs from 'yargs';\n import {Diagnostics, exitCodeFromResult, filterErrorsAndWarnings, formatDiagnostics, ParsedConfiguration, performCompilation, readConfiguration} from './perform_compile';\n import {createPerformWatchHost, performWatchCompilation} from './perform_watch';\n import * as api from './transformers/api';\n@@ -136,18 +135,27 @@ export interface NgcParsedConfiguration extends ParsedConfiguration {\n \n export function readNgcCommandLineAndConfiguration(args: string[]): NgcParsedConfiguration {\n   const options: api.CompilerOptions = {};\n-  const parsedArgs = minimist(args);\n+  const parsedArgs =\n+      yargs(args)\n+          .parserConfiguration({'strip-aliased': true})\n+          .option('i18nFile', {type: 'string'})\n+          .option('i18nFormat', {type: 'string'})\n+          .option('locale', {type: 'string'})\n+          .option('missingTranslation', {type: 'string', choices: ['error', 'warning', 'ignore']})\n+          .option('outFile', {type: 'string'})\n+          .option('watch', {type: 'boolean', alias: ['w']})\n+          .parseSync();\n+\n   if (parsedArgs.i18nFile) options.i18nInFile = parsedArgs.i18nFile;\n   if (parsedArgs.i18nFormat) options.i18nInFormat = parsedArgs.i18nFormat;\n   if (parsedArgs.locale) options.i18nInLocale = parsedArgs.locale;\n-  const mt = parsedArgs.missingTranslation;\n-  if (mt === 'error' || mt === 'warning' || mt === 'ignore') {\n-    options.i18nInMissingTranslations = mt;\n-  }\n+  if (parsedArgs.missingTranslation)\n+    options.i18nInMissingTranslations =\n+        parsedArgs.missingTranslation as api.CompilerOptions['i18nInMissingTranslations'];\n+\n   const config = readCommandLineAndConfiguration(\n       args, options, ['i18nFile', 'i18nFormat', 'locale', 'missingTranslation', 'watch']);\n-  const watch = parsedArgs.w || parsedArgs.watch;\n-  return {...config, watch};\n+  return {...config, watch: parsedArgs.watch};\n }\n \n export function readCommandLineAndConfiguration("
        },
        {
            "sha": "0366cbd61b794094dff928f28d26b178ecd5e611",
            "filename": "packages/compiler-cli/test/BUILD.bazel",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/9442a2f856a21b5af85c2048f9866733e0c68344/packages%2Fcompiler-cli%2Ftest%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/9442a2f856a21b5af85c2048f9866733e0c68344/packages%2Fcompiler-cli%2Ftest%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2FBUILD.bazel?ref=9442a2f856a21b5af85c2048f9866733e0c68344",
            "patch": "@@ -53,7 +53,7 @@ jasmine_node_test(\n         \":extract_i18n_lib\",\n         \"//packages/core\",\n         \"@npm//@angular/common-12\",\n-        \"@npm//minimist\",\n+        \"@npm//yargs\",\n     ],\n )\n \n@@ -91,8 +91,8 @@ jasmine_node_test(\n     deps = [\n         \":ngc_lib\",\n         \"//packages/core\",\n-        \"@npm//minimist\",\n         \"@npm//rxjs\",\n+        \"@npm//yargs\",\n     ],\n )\n "
        },
        {
            "sha": "4144808bf5c196110f6e2a5558f9b899be8fc012",
            "filename": "packages/compiler-cli/test/ngtsc/BUILD.bazel",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/9442a2f856a21b5af85c2048f9866733e0c68344/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/9442a2f856a21b5af85c2048f9866733e0c68344/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2FBUILD.bazel?ref=9442a2f856a21b5af85c2048f9866733e0c68344",
            "patch": "@@ -32,6 +32,6 @@ jasmine_node_test(\n     shard_count = 4,\n     deps = [\n         \":ngtsc_lib\",\n-        \"@npm//minimist\",\n+        \"@npm//yargs\",\n     ],\n )"
        }
    ],
    "stats": {
        "total": 50,
        "additions": 30,
        "deletions": 20
    }
}