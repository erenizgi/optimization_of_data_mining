{
    "author": "josephperrott",
    "message": "refactor(dev-infra): move `parseCommitMessagesForRange` into the parse file (#39747)\n\nWhen attempting to actually rely on `parseCommitMessagesForRange`, it became apparent\nthat the function really belongs in the parse file, rather than utils.\n\nPR Close #39747",
    "sha": "881b77ef46e6e81f91dbf617d3514245c1ce7fd8",
    "files": [
        {
            "sha": "bbd95502e775fd6900795d5163587004e3762c78",
            "filename": "dev-infra/commit-message/parse.ts",
            "status": "modified",
            "additions": 29,
            "deletions": 0,
            "changes": 29,
            "blob_url": "https://github.com/angular/angular/blob/881b77ef46e6e81f91dbf617d3514245c1ce7fd8/dev-infra%2Fcommit-message%2Fparse.ts",
            "raw_url": "https://github.com/angular/angular/raw/881b77ef46e6e81f91dbf617d3514245c1ce7fd8/dev-infra%2Fcommit-message%2Fparse.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fcommit-message%2Fparse.ts?ref=881b77ef46e6e81f91dbf617d3514245c1ce7fd8",
            "patch": "@@ -6,6 +6,8 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n+import {exec} from '../utils/shelljs';\n+\n /** A parsed commit message. */\n export interface ParsedCommitMessage {\n   header: string;\n@@ -75,3 +77,30 @@ export function parseCommitMessage(commitMsg: string): ParsedCommitMessage {\n     isRevert: REVERT_PREFIX_RE.test(commitMsg),\n   };\n }\n+\n+/** Retrieve and parse each commit message in a provide range. */\n+export function parseCommitMessagesForRange(range: string): ParsedCommitMessage[] {\n+  /** A random number used as a split point in the git log result. */\n+  const randomValueSeparator = `${Math.random()}`;\n+  /**\n+   * Custom git log format that provides the commit header and body, separated as expected with the\n+   * custom separator as the trailing value.\n+   */\n+  const gitLogFormat = `%s%n%n%b${randomValueSeparator}`;\n+\n+  // Retrieve the commits in the provided range.\n+  const result = exec(`git log --reverse --format=${gitLogFormat} ${range}`);\n+  if (result.code) {\n+    throw new Error(`Failed to get all commits in the range:\\n  ${result.stderr}`);\n+  }\n+\n+  return result\n+      // Separate the commits from a single string into individual commits.\n+      .split(randomValueSeparator)\n+      // Remove extra space before and after each commit message.\n+      .map(l => l.trim())\n+      // Remove any superfluous lines which remain from the split.\n+      .filter(line => !!line)\n+      // Parse each commit message.\n+      .map(commit => parseCommitMessage(commit));\n+}"
        },
        {
            "sha": "17c75c293597a69f918545804ff71a4f57b8c487",
            "filename": "dev-infra/commit-message/utils.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 38,
            "changes": 38,
            "blob_url": "https://github.com/angular/angular/blob/e2ce9af11550aa1d793e9deac45f17a58eb34fff/dev-infra%2Fcommit-message%2Futils.ts",
            "raw_url": "https://github.com/angular/angular/raw/e2ce9af11550aa1d793e9deac45f17a58eb34fff/dev-infra%2Fcommit-message%2Futils.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fcommit-message%2Futils.ts?ref=e2ce9af11550aa1d793e9deac45f17a58eb34fff",
            "patch": "@@ -1,38 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-import {exec} from '../utils/shelljs';\n-\n-import {parseCommitMessage, ParsedCommitMessage} from './parse';\n-\n-/** Retrieve and parse each commit message in a provide range. */\n-export function parseCommitMessagesForRange(range: string): ParsedCommitMessage[] {\n-  /** A random number used as a split point in the git log result. */\n-  const randomValueSeparator = `${Math.random()}`;\n-  /**\n-   * Custom git log format that provides the commit header and body, separated as expected with the\n-   * custom separator as the trailing value.\n-   */\n-  const gitLogFormat = `%s%n%n%b${randomValueSeparator}`;\n-\n-  // Retrieve the commits in the provided range.\n-  const result = exec(`git log --reverse --format=${gitLogFormat} ${range}`);\n-  if (result.code) {\n-    throw new Error(`Failed to get all commits in the range:\\n  ${result.stderr}`);\n-  }\n-\n-  return result\n-      // Separate the commits from a single string into individual commits.\n-      .split(randomValueSeparator)\n-      // Remove extra space before and after each commit message.\n-      .map(l => l.trim())\n-      // Remove any superfluous lines which remain from the split.\n-      .filter(line => !!line)\n-      // Parse each commit message.\n-      .map(commit => parseCommitMessage(commit));\n-}"
        },
        {
            "sha": "56158e74deff00da70f87a7f13554113b5d0038d",
            "filename": "dev-infra/commit-message/validate-range/validate-range.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/881b77ef46e6e81f91dbf617d3514245c1ce7fd8/dev-infra%2Fcommit-message%2Fvalidate-range%2Fvalidate-range.ts",
            "raw_url": "https://github.com/angular/angular/raw/881b77ef46e6e81f91dbf617d3514245c1ce7fd8/dev-infra%2Fcommit-message%2Fvalidate-range%2Fvalidate-range.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fcommit-message%2Fvalidate-range%2Fvalidate-range.ts?ref=881b77ef46e6e81f91dbf617d3514245c1ce7fd8",
            "patch": "@@ -7,8 +7,7 @@\n  */\n import {error, info} from '../../utils/console';\n \n-import {ParsedCommitMessage} from '../parse';\n-import {parseCommitMessagesForRange} from '../utils';\n+import {parseCommitMessagesForRange, ParsedCommitMessage} from '../parse';\n import {printValidationErrors, validateCommitMessage, ValidateCommitMessageOptions} from '../validate';\n \n // Whether the provided commit is a fixup commit."
        }
    ],
    "stats": {
        "total": 70,
        "additions": 30,
        "deletions": 40
    }
}