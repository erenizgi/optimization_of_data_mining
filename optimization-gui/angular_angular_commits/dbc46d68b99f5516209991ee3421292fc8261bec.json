{
    "author": "AndrewKushnir",
    "message": "docs: deprecate factory-based signature of the `downgradeModule` function (#44090)\n\nDEPRECATED:\n\nThe `downgradeModule` function calls with NgModule factories are deprecated. Please use NgModule class based `downgradeModule` calls instead.\n\nPR Close #44090",
    "sha": "dbc46d68b99f5516209991ee3421292fc8261bec",
    "files": [
        {
            "sha": "3752e54c9ddb21a02d505ffdd81a4423069d913c",
            "filename": "aio/content/guide/deprecations.md",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/dbc46d68b99f5516209991ee3421292fc8261bec/aio%2Fcontent%2Fguide%2Fdeprecations.md",
            "raw_url": "https://github.com/angular/angular/raw/dbc46d68b99f5516209991ee3421292fc8261bec/aio%2Fcontent%2Fguide%2Fdeprecations.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fdeprecations.md?ref=dbc46d68b99f5516209991ee3421292fc8261bec",
            "patch": "@@ -53,6 +53,7 @@ v13 -> v16\n | `@angular/upgrade`                  | [`@angular/upgrade`](#upgrade)                                                                             | <!--v8--> v11         |\n | `@angular/upgrade`                  | [`getAngularLib`](#upgrade-static)                                                                         | <!--v8--> v11         |\n | `@angular/upgrade`                  | [`setAngularLib`](#upgrade-static)                                                                         | <!--v8--> v11         |\n+| `@angular/upgrade`                  | [Factory-based signature of `downgradeModule`](#upgrade-static)                                                                         | <!--v13--> v15         |\n | template syntax                     | [`<template>`](#template-tag)                                                                              | <!--v7--> v11         |\n | polyfills                           | [reflect-metadata](#reflect-metadata)                                                                      | <!--v8--> v11         |\n | `@angular/compiler-cli`             | [Input setter coercion](#input-setter-coercion)                                                            | <!--v13--> v15        |\n@@ -184,6 +185,7 @@ This section contains a complete list all of the currently-deprecated APIs, with\n | :-------------------------------------------------- | :------------------------------------------------------------ | :-------------------- | :--------------------------------------------- |\n | [`getAngularLib`](api/upgrade/static/getAngularLib) | [`getAngularJSGlobal`](api/upgrade/static/getAngularJSGlobal) | v5                    | See [Upgrading from AngularJS](guide/upgrade). |\n | [`setAngularLib`](api/upgrade/static/setAngularLib) | [`setAngularJSGlobal`](api/upgrade/static/setAngularJSGlobal) | v5                    | See [Upgrading from AngularJS](guide/upgrade). |\n+| [Factory-based signature of `downgradeModule`](api/upgrade/static/downgradeModule) | [NgModule-based signature of `downgradeModule`](api/upgrade/static/downgradeModule) | v13                    | The `downgradeModule` supports more ergonomic NgModule-based API (vs NgModule factory based API). |\n \n {@a deprecated-features}\n "
        },
        {
            "sha": "a181e089798621216be86e14a15c27451a65e3ee",
            "filename": "goldens/public-api/upgrade/static/static.md",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/dbc46d68b99f5516209991ee3421292fc8261bec/goldens%2Fpublic-api%2Fupgrade%2Fstatic%2Fstatic.md",
            "raw_url": "https://github.com/angular/angular/raw/dbc46d68b99f5516209991ee3421292fc8261bec/goldens%2Fpublic-api%2Fupgrade%2Fstatic%2Fstatic.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fupgrade%2Fstatic%2Fstatic.md?ref=dbc46d68b99f5516209991ee3421292fc8261bec",
            "patch": "@@ -34,7 +34,10 @@ export function downgradeComponent(info: {\n export function downgradeInjectable(token: any, downgradedModule?: string): Function;\n \n // @public\n-export function downgradeModule<T>(moduleOrBootstrapFn: Type<T> | NgModuleFactory<T> | ((extraProviders: StaticProvider[]) => Promise<NgModuleRef<T>>)): string;\n+export function downgradeModule<T>(moduleOrBootstrapFn: Type<T> | ((extraProviders: StaticProvider[]) => Promise<NgModuleRef<T>>)): string;\n+\n+// @public @deprecated\n+export function downgradeModule<T>(moduleOrBootstrapFn: NgModuleFactory<T>): string;\n \n // @public\n export function getAngularJSGlobal(): any;"
        },
        {
            "sha": "3e5d7668854a8c5b2d11d3ef18ef63566064b955",
            "filename": "packages/upgrade/static/src/downgrade_module.ts",
            "status": "modified",
            "additions": 234,
            "deletions": 0,
            "changes": 234,
            "blob_url": "https://github.com/angular/angular/blob/dbc46d68b99f5516209991ee3421292fc8261bec/packages%2Fupgrade%2Fstatic%2Fsrc%2Fdowngrade_module.ts",
            "raw_url": "https://github.com/angular/angular/raw/dbc46d68b99f5516209991ee3421292fc8261bec/packages%2Fupgrade%2Fstatic%2Fsrc%2Fdowngrade_module.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fupgrade%2Fstatic%2Fsrc%2Fdowngrade_module.ts?ref=dbc46d68b99f5516209991ee3421292fc8261bec",
            "patch": "@@ -40,6 +40,240 @@ let moduleUid = 0;\n  * `downgradeModule()` requires either an `NgModuleFactory`, `NgModule` class or a function:\n  * - `NgModuleFactory`: If you pass an `NgModuleFactory`, it will be used to instantiate a module\n  *   using `platformBrowser`'s {@link PlatformRef#bootstrapModuleFactory bootstrapModuleFactory()}.\n+ *   NOTE: this type of the argument is deprecated. Please either provide an `NgModule` class or a\n+ *   bootstrap function instead.\n+ * - `NgModule` class: If you pass an NgModule class, it will be used to instantiate a module\n+ *   using `platformBrowser`'s {@link PlatformRef#bootstrapModule bootstrapModule()}.\n+ * - `Function`: If you pass a function, it is expected to return a promise resolving to an\n+ *   `NgModuleRef`. The function is called with an array of extra {@link StaticProvider Providers}\n+ *   that are expected to be available from the returned `NgModuleRef`'s `Injector`.\n+ *\n+ * `downgradeModule()` returns the name of the created AngularJS wrapper module. You can use it to\n+ * declare a dependency in your main AngularJS module.\n+ *\n+ * {@example upgrade/static/ts/lite/module.ts region=\"basic-how-to\"}\n+ *\n+ * For more details on how to use `downgradeModule()` see\n+ * [Upgrading for Performance](guide/upgrade-performance).\n+ *\n+ * @usageNotes\n+ *\n+ * Apart from `UpgradeModule`, you can use the rest of the `upgrade/static` helpers as usual to\n+ * build a hybrid application. Note that the Angular pieces (e.g. downgraded services) will not be\n+ * available until the downgraded module has been bootstrapped, i.e. by instantiating a downgraded\n+ * component.\n+ *\n+ * <div class=\"alert is-important\">\n+ *\n+ *   You cannot use `downgradeModule()` and `UpgradeModule` in the same hybrid application.<br />\n+ *   Use one or the other.\n+ *\n+ * </div>\n+ *\n+ * ### Differences with `UpgradeModule`\n+ *\n+ * Besides their different API, there are two important internal differences between\n+ * `downgradeModule()` and `UpgradeModule` that affect the behavior of hybrid applications:\n+ *\n+ * 1. Unlike `UpgradeModule`, `downgradeModule()` does not bootstrap the main AngularJS module\n+ *    inside the {@link NgZone Angular zone}.\n+ * 2. Unlike `UpgradeModule`, `downgradeModule()` does not automatically run a\n+ *    [$digest()](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$digest) when changes are\n+ *    detected in the Angular part of the application.\n+ *\n+ * What this means is that applications using `UpgradeModule` will run change detection more\n+ * frequently in order to ensure that both frameworks are properly notified about possible changes.\n+ * This will inevitably result in more change detection runs than necessary.\n+ *\n+ * `downgradeModule()`, on the other side, does not try to tie the two change detection systems as\n+ * tightly, restricting the explicit change detection runs only to cases where it knows it is\n+ * necessary (e.g. when the inputs of a downgraded component change). This improves performance,\n+ * especially in change-detection-heavy applications, but leaves it up to the developer to manually\n+ * notify each framework as needed.\n+ *\n+ * For a more detailed discussion of the differences and their implications, see\n+ * [Upgrading for Performance](guide/upgrade-performance).\n+ *\n+ * <div class=\"alert is-helpful\">\n+ *\n+ *   You can manually trigger a change detection run in AngularJS using\n+ *   [scope.$apply(...)](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$apply) or\n+ *   [$rootScope.$digest()](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$digest).\n+ *\n+ *   You can manually trigger a change detection run in Angular using {@link NgZone#run\n+ *   ngZone.run(...)}.\n+ *\n+ * </div>\n+ *\n+ * ### Downgrading multiple modules\n+ *\n+ * It is possible to downgrade multiple modules and include them in an AngularJS application. In\n+ * that case, each downgraded module will be bootstrapped when an associated downgraded component or\n+ * injectable needs to be instantiated.\n+ *\n+ * Things to keep in mind, when downgrading multiple modules:\n+ *\n+ * - Each downgraded component/injectable needs to be explicitly associated with a downgraded\n+ *   module. See `downgradeComponent()` and `downgradeInjectable()` for more details.\n+ *\n+ * - If you want some injectables to be shared among all downgraded modules, you can provide them as\n+ *   `StaticProvider`s, when creating the `PlatformRef` (e.g. via `platformBrowser` or\n+ *   `platformBrowserDynamic`).\n+ *\n+ * - When using {@link PlatformRef#bootstrapmodule `bootstrapModule()`} or\n+ *   {@link PlatformRef#bootstrapmodulefactory `bootstrapModuleFactory()`} to bootstrap the\n+ *   downgraded modules, each one is considered a \"root\" module. As a consequence, a new instance\n+ *   will be created for every injectable provided in `\"root\"` (via\n+ *   {@link Injectable#providedIn `providedIn`}).\n+ *   If this is not your intention, you can have a shared module (that will act as act as the \"root\"\n+ *   module) and create all downgraded modules using that module's injector:\n+ *\n+ *   {@example upgrade/static/ts/lite-multi-shared/module.ts region=\"shared-root-module\"}\n+ *\n+ * @publicApi\n+ */\n+export function downgradeModule<T>(moduleOrBootstrapFn: Type<T>|(\n+    (extraProviders: StaticProvider[]) => Promise<NgModuleRef<T>>)): string;\n+/**\n+ * @description\n+ *\n+ * A helper function for creating an AngularJS module that can bootstrap an Angular module\n+ * \"on-demand\" (possibly lazily) when a {@link downgradeComponent downgraded component} needs to be\n+ * instantiated.\n+ *\n+ * *Part of the [upgrade/static](api?query=upgrade/static) library for hybrid upgrade apps that\n+ * support AOT compilation.*\n+ *\n+ * It allows loading/bootstrapping the Angular part of a hybrid application lazily and not having to\n+ * pay the cost up-front. For example, you can have an AngularJS application that uses Angular for\n+ * specific routes and only instantiate the Angular modules if/when the user visits one of these\n+ * routes.\n+ *\n+ * The Angular module will be bootstrapped once (when requested for the first time) and the same\n+ * reference will be used from that point onwards.\n+ *\n+ * `downgradeModule()` requires either an `NgModuleFactory`, `NgModule` class or a function:\n+ * - `NgModuleFactory`: If you pass an `NgModuleFactory`, it will be used to instantiate a module\n+ *   using `platformBrowser`'s {@link PlatformRef#bootstrapModuleFactory bootstrapModuleFactory()}.\n+ *   NOTE: this type of the argument is deprecated. Please either provide an `NgModule` class or a\n+ *   bootstrap function instead.\n+ * - `NgModule` class: If you pass an NgModule class, it will be used to instantiate a module\n+ *   using `platformBrowser`'s {@link PlatformRef#bootstrapModule bootstrapModule()}.\n+ * - `Function`: If you pass a function, it is expected to return a promise resolving to an\n+ *   `NgModuleRef`. The function is called with an array of extra {@link StaticProvider Providers}\n+ *   that are expected to be available from the returned `NgModuleRef`'s `Injector`.\n+ *\n+ * `downgradeModule()` returns the name of the created AngularJS wrapper module. You can use it to\n+ * declare a dependency in your main AngularJS module.\n+ *\n+ * {@example upgrade/static/ts/lite/module.ts region=\"basic-how-to\"}\n+ *\n+ * For more details on how to use `downgradeModule()` see\n+ * [Upgrading for Performance](guide/upgrade-performance).\n+ *\n+ * @usageNotes\n+ *\n+ * Apart from `UpgradeModule`, you can use the rest of the `upgrade/static` helpers as usual to\n+ * build a hybrid application. Note that the Angular pieces (e.g. downgraded services) will not be\n+ * available until the downgraded module has been bootstrapped, i.e. by instantiating a downgraded\n+ * component.\n+ *\n+ * <div class=\"alert is-important\">\n+ *\n+ *   You cannot use `downgradeModule()` and `UpgradeModule` in the same hybrid application.<br />\n+ *   Use one or the other.\n+ *\n+ * </div>\n+ *\n+ * ### Differences with `UpgradeModule`\n+ *\n+ * Besides their different API, there are two important internal differences between\n+ * `downgradeModule()` and `UpgradeModule` that affect the behavior of hybrid applications:\n+ *\n+ * 1. Unlike `UpgradeModule`, `downgradeModule()` does not bootstrap the main AngularJS module\n+ *    inside the {@link NgZone Angular zone}.\n+ * 2. Unlike `UpgradeModule`, `downgradeModule()` does not automatically run a\n+ *    [$digest()](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$digest) when changes are\n+ *    detected in the Angular part of the application.\n+ *\n+ * What this means is that applications using `UpgradeModule` will run change detection more\n+ * frequently in order to ensure that both frameworks are properly notified about possible changes.\n+ * This will inevitably result in more change detection runs than necessary.\n+ *\n+ * `downgradeModule()`, on the other side, does not try to tie the two change detection systems as\n+ * tightly, restricting the explicit change detection runs only to cases where it knows it is\n+ * necessary (e.g. when the inputs of a downgraded component change). This improves performance,\n+ * especially in change-detection-heavy applications, but leaves it up to the developer to manually\n+ * notify each framework as needed.\n+ *\n+ * For a more detailed discussion of the differences and their implications, see\n+ * [Upgrading for Performance](guide/upgrade-performance).\n+ *\n+ * <div class=\"alert is-helpful\">\n+ *\n+ *   You can manually trigger a change detection run in AngularJS using\n+ *   [scope.$apply(...)](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$apply) or\n+ *   [$rootScope.$digest()](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$digest).\n+ *\n+ *   You can manually trigger a change detection run in Angular using {@link NgZone#run\n+ *   ngZone.run(...)}.\n+ *\n+ * </div>\n+ *\n+ * ### Downgrading multiple modules\n+ *\n+ * It is possible to downgrade multiple modules and include them in an AngularJS application. In\n+ * that case, each downgraded module will be bootstrapped when an associated downgraded component or\n+ * injectable needs to be instantiated.\n+ *\n+ * Things to keep in mind, when downgrading multiple modules:\n+ *\n+ * - Each downgraded component/injectable needs to be explicitly associated with a downgraded\n+ *   module. See `downgradeComponent()` and `downgradeInjectable()` for more details.\n+ *\n+ * - If you want some injectables to be shared among all downgraded modules, you can provide them as\n+ *   `StaticProvider`s, when creating the `PlatformRef` (e.g. via `platformBrowser` or\n+ *   `platformBrowserDynamic`).\n+ *\n+ * - When using {@link PlatformRef#bootstrapmodule `bootstrapModule()`} or\n+ *   {@link PlatformRef#bootstrapmodulefactory `bootstrapModuleFactory()`} to bootstrap the\n+ *   downgraded modules, each one is considered a \"root\" module. As a consequence, a new instance\n+ *   will be created for every injectable provided in `\"root\"` (via\n+ *   {@link Injectable#providedIn `providedIn`}).\n+ *   If this is not your intention, you can have a shared module (that will act as act as the \"root\"\n+ *   module) and create all downgraded modules using that module's injector:\n+ *\n+ *   {@example upgrade/static/ts/lite-multi-shared/module.ts region=\"shared-root-module\"}\n+ *\n+ * @publicApi\n+ *\n+ * @deprecated Passing `NgModuleFactory` as the `downgradeModule` function argument is deprecated,\n+ *     please pass an NgModule class reference instead.\n+ */\n+export function downgradeModule<T>(moduleOrBootstrapFn: NgModuleFactory<T>): string;\n+/**\n+ * @description\n+ *\n+ * A helper function for creating an AngularJS module that can bootstrap an Angular module\n+ * \"on-demand\" (possibly lazily) when a {@link downgradeComponent downgraded component} needs to be\n+ * instantiated.\n+ *\n+ * *Part of the [upgrade/static](api?query=upgrade/static) library for hybrid upgrade apps that\n+ * support AOT compilation.*\n+ *\n+ * It allows loading/bootstrapping the Angular part of a hybrid application lazily and not having to\n+ * pay the cost up-front. For example, you can have an AngularJS application that uses Angular for\n+ * specific routes and only instantiate the Angular modules if/when the user visits one of these\n+ * routes.\n+ *\n+ * The Angular module will be bootstrapped once (when requested for the first time) and the same\n+ * reference will be used from that point onwards.\n+ *\n+ * `downgradeModule()` requires either an `NgModuleFactory`, `NgModule` class or a function:\n+ * - `NgModuleFactory`: If you pass an `NgModuleFactory`, it will be used to instantiate a module\n+ *   using `platformBrowser`'s {@link PlatformRef#bootstrapModuleFactory bootstrapModuleFactory()}.\n+ *   NOTE: this type of the argument is deprecated. Please either provide an `NgModule` class or a\n+ *   bootstrap function instead.\n  * - `NgModule` class: If you pass an NgModule class, it will be used to instantiate a module\n  *   using `platformBrowser`'s {@link PlatformRef#bootstrapModule bootstrapModule()}.\n  * - `Function`: If you pass a function, it is expected to return a promise resolving to an"
        }
    ],
    "stats": {
        "total": 241,
        "additions": 240,
        "deletions": 1
    }
}