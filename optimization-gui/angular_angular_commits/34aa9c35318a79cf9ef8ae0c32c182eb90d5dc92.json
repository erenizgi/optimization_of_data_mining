{
    "author": "cexbrayat",
    "message": "fix(core): remove duplicated EMPTY_ARRAY constant (#40587)\n\nThe codebase currently contains several `EMPTY_ARRAY` constants,\nand they can end up in the bundle of an application.\nA recent commit 6fbe219 tipped us off\nas it introduced several `noop` occurrences in the golden symbol files.\nAfter investigating with @petebacondarwin,\nwe decided to remove the duplicated symbols.\n\nThis probably shaves only a few bytes,\nbut this commit removes the duplicated functions,\nby always using the one in `core/src/utils/empty`.\n\nPR Close #40587",
    "sha": "34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92",
    "files": [
        {
            "sha": "9596c3c4ea5d6abfa65d3bac788e5b7d7f9d04a0",
            "filename": "packages/core/src/di/r3_injector.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Fdi%2Fr3_injector.ts",
            "raw_url": "https://github.com/angular/angular/raw/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Fdi%2Fr3_injector.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fdi%2Fr3_injector.ts?ref=34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92",
            "patch": "@@ -13,6 +13,7 @@ import {AbstractType, Type} from '../interface/type';\n import {FactoryFn, getFactoryDef} from '../render3/definition_factory';\n import {throwCyclicDependencyError, throwInvalidProviderError, throwMixedMultiProviderError} from '../render3/errors_di';\n import {deepForEach, newArray} from '../util/array_utils';\n+import {EMPTY_ARRAY} from '../util/empty';\n import {stringify} from '../util/stringify';\n \n import {resolveForwardRef} from './forward_ref';\n@@ -48,8 +49,6 @@ const NOT_YET = {};\n  */\n const CIRCULAR = {};\n \n-const EMPTY_ARRAY = [] as any[];\n-\n /**\n  * A lazily initialized NullInjector.\n  */"
        },
        {
            "sha": "1bb55375813983b59db246eac9799611fb4d6717",
            "filename": "packages/core/src/di/util.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Fdi%2Futil.ts",
            "raw_url": "https://github.com/angular/angular/raw/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Fdi%2Futil.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fdi%2Futil.ts?ref=34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92",
            "patch": "@@ -8,6 +8,7 @@\n \n import {Type} from '../interface/type';\n import {ReflectionCapabilities} from '../reflection/reflection_capabilities';\n+import {EMPTY_ARRAY} from '../util/empty';\n import {getClosureSafeProperty} from '../util/property';\n \n import {resolveForwardRef} from './forward_ref';\n@@ -16,7 +17,6 @@ import {ClassSansProvider, ConstructorSansProvider, ExistingSansProvider, Factor\n \n const USE_VALUE =\n     getClosureSafeProperty<ValueProvider>({provide: String, useValue: getClosureSafeProperty});\n-const EMPTY_ARRAY: any[] = [];\n \n export function convertInjectableProviderToFactory(\n     type: Type<any>,"
        },
        {
            "sha": "49dc61d169754848d35822251c77fda1a60a1f8e",
            "filename": "packages/core/src/render3/context_discovery.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Frender3%2Fcontext_discovery.ts",
            "raw_url": "https://github.com/angular/angular/raw/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Frender3%2Fcontext_discovery.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fcontext_discovery.ts?ref=34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92",
            "patch": "@@ -9,7 +9,7 @@ import '../util/ng_dev_mode';\n \n import {assertDomNode} from '../util/assert';\n \n-import {EMPTY_ARRAY} from './empty';\n+import {EMPTY_ARRAY} from '../util/empty';\n import {LContext, MONKEY_PATCH_KEY_NAME} from './interfaces/context';\n import {TNode, TNodeFlags} from './interfaces/node';\n import {RElement, RNode} from './interfaces/renderer_dom';"
        },
        {
            "sha": "03d665978c8ad0260ba399870473f34426fb1065",
            "filename": "packages/core/src/render3/definition.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Frender3%2Fdefinition.ts",
            "raw_url": "https://github.com/angular/angular/raw/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Frender3%2Fdefinition.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fdefinition.ts?ref=34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92",
            "patch": "@@ -12,9 +12,10 @@ import {NgModuleDef, NgModuleType} from '../metadata/ng_module_def';\n import {SchemaMetadata} from '../metadata/schema';\n import {ViewEncapsulation} from '../metadata/view';\n import {noSideEffects} from '../util/closure';\n+import {EMPTY_ARRAY} from '../util/empty';\n import {initNgDevMode} from '../util/ng_dev_mode';\n import {stringify} from '../util/stringify';\n-import {EMPTY_ARRAY, EMPTY_OBJ} from './empty';\n+import {EMPTY_OBJ} from './empty';\n import {NG_COMP_DEF, NG_DIR_DEF, NG_LOC_ID_DEF, NG_MOD_DEF, NG_PIPE_DEF} from './fields';\n import {ComponentDef, ComponentDefFeature, ComponentTemplate, ComponentType, ContentQueriesFunction, DirectiveDef, DirectiveDefFeature, DirectiveTypesOrFactory, HostBindingsFunction, PipeDef, PipeTypesOrFactory, ViewQueriesFunction} from './interfaces/definition';\n import {AttributeMarker, TAttributes, TConstantsOrFactory} from './interfaces/node';"
        },
        {
            "sha": "78ef36a82d6b0d1fa61e1e3d2a90ac262d5f264a",
            "filename": "packages/core/src/render3/empty.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Frender3%2Fempty.ts",
            "raw_url": "https://github.com/angular/angular/raw/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Frender3%2Fempty.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fempty.ts?ref=34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92",
            "patch": "@@ -15,14 +15,11 @@ import {initNgDevMode} from '../util/ng_dev_mode';\n  */\n \n export const EMPTY_OBJ: {} = {};\n-export const EMPTY_ARRAY: any[] = [];\n \n // freezing the values prevents any code from accidentally inserting new values in\n if ((typeof ngDevMode === 'undefined' || ngDevMode) && initNgDevMode()) {\n   // These property accesses can be ignored because ngDevMode will be set to false\n   // when optimizing code and the whole if statement will be dropped.\n   // tslint:disable-next-line:no-toplevel-property-access\n   Object.freeze(EMPTY_OBJ);\n-  // tslint:disable-next-line:no-toplevel-property-access\n-  Object.freeze(EMPTY_ARRAY);\n }"
        },
        {
            "sha": "7f454c65886ecac7977dbce5be7ad567a0adb2c6",
            "filename": "packages/core/src/render3/features/inherit_definition_feature.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Frender3%2Ffeatures%2Finherit_definition_feature.ts",
            "raw_url": "https://github.com/angular/angular/raw/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Frender3%2Ffeatures%2Finherit_definition_feature.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Ffeatures%2Finherit_definition_feature.ts?ref=34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92",
            "patch": "@@ -7,8 +7,9 @@\n  */\n \n import {Type, Writable} from '../../interface/type';\n+import {EMPTY_ARRAY} from '../../util/empty';\n import {fillProperties} from '../../util/property';\n-import {EMPTY_ARRAY, EMPTY_OBJ} from '../empty';\n+import {EMPTY_OBJ} from '../empty';\n import {ComponentDef, ContentQueriesFunction, DirectiveDef, DirectiveDefFeature, HostBindingsFunction, RenderFlags, ViewQueriesFunction} from '../interfaces/definition';\n import {TAttributes} from '../interfaces/node';\n import {isComponentDef} from '../interfaces/type_checks';"
        },
        {
            "sha": "acb42f498cf69b060904d711f72246e10900beca",
            "filename": "packages/core/src/render3/instructions/i18n_icu_container_visitor.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fi18n_icu_container_visitor.ts",
            "raw_url": "https://github.com/angular/angular/raw/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fi18n_icu_container_visitor.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fi18n_icu_container_visitor.ts?ref=34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92",
            "patch": "@@ -7,8 +7,8 @@\n  */\n \n import {assertDomNode, assertNumber, assertNumberInRange} from '../../util/assert';\n+import {EMPTY_ARRAY} from '../../util/empty';\n import {assertTIcu, assertTNodeForLView} from '../assert';\n-import {EMPTY_ARRAY} from '../empty';\n import {getCurrentICUCaseIndex} from '../i18n/i18n_util';\n import {I18nRemoveOpCodes, TIcu} from '../interfaces/i18n';\n import {TIcuContainerNode} from '../interfaces/node';"
        },
        {
            "sha": "91ce5262ddc9b09a755800d8ccbe960d29cbc17e",
            "filename": "packages/core/src/render3/jit/directive.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Frender3%2Fjit%2Fdirective.ts",
            "raw_url": "https://github.com/angular/angular/raw/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Frender3%2Fjit%2Fdirective.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fjit%2Fdirective.ts?ref=34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92",
            "patch": "@@ -15,9 +15,10 @@ import {Query} from '../../metadata/di';\n import {Component, Directive, Input} from '../../metadata/directives';\n import {componentNeedsResolution, maybeQueueResolutionOfComponentResources} from '../../metadata/resource_loading';\n import {ViewEncapsulation} from '../../metadata/view';\n+import {EMPTY_ARRAY} from '../../util/empty';\n import {initNgDevMode} from '../../util/ng_dev_mode';\n import {getComponentDef, getDirectiveDef} from '../definition';\n-import {EMPTY_ARRAY, EMPTY_OBJ} from '../empty';\n+import {EMPTY_OBJ} from '../empty';\n import {NG_COMP_DEF, NG_DIR_DEF, NG_FACTORY_DEF} from '../fields';\n import {ComponentType} from '../interfaces/definition';\n import {stringifyForError} from '../util/stringify_utils';"
        },
        {
            "sha": "478a8f544cb6f85ed83a1faec3c64d40da4948a2",
            "filename": "packages/core/src/render3/jit/module.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Frender3%2Fjit%2Fmodule.ts",
            "raw_url": "https://github.com/angular/angular/raw/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Frender3%2Fjit%2Fmodule.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fjit%2Fmodule.ts?ref=34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92",
            "patch": "@@ -16,6 +16,7 @@ import {ModuleWithProviders, NgModule} from '../../metadata/ng_module';\n import {NgModuleDef, NgModuleTransitiveScopes, NgModuleType} from '../../metadata/ng_module_def';\n import {deepForEach, flatten} from '../../util/array_utils';\n import {assertDefined} from '../../util/assert';\n+import {EMPTY_ARRAY} from '../../util/empty';\n import {getComponentDef, getDirectiveDef, getNgModuleDef, getPipeDef} from '../definition';\n import {NG_COMP_DEF, NG_DIR_DEF, NG_MOD_DEF, NG_PIPE_DEF} from '../fields';\n import {ComponentDef} from '../interfaces/definition';\n@@ -24,8 +25,6 @@ import {stringifyForError} from '../util/stringify_utils';\n \n import {angularCoreEnv} from './environment';\n \n-const EMPTY_ARRAY: Type<any>[] = [];\n-\n interface ModuleQueueItem {\n   moduleType: Type<any>;\n   ngModule: NgModule;"
        },
        {
            "sha": "74e9cfc8a239dbd89d77139740593fe162fb8632",
            "filename": "packages/core/src/view/index.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Fview%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Fview%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fview%2Findex.ts?ref=34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92",
            "patch": "@@ -6,6 +6,7 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n+export {EMPTY_ARRAY} from '../util/empty';\n export {anchorDef, elementDef} from './element';\n export {clearOverrides, createNgModuleFactory, overrideComponentView, overrideProvider} from './entrypoint';\n export {ngContentDef} from './ng_content';\n@@ -16,7 +17,7 @@ export {queryDef} from './query';\n export {createComponentFactory, getComponentViewDefinitionFactory, nodeValue, ViewRef_} from './refs';\n export {initServicesIfNeeded} from './services';\n export {textDef} from './text';\n-export {createRendererType2, elementEventFullName, EMPTY_ARRAY, EMPTY_MAP, inlineInterpolate, interpolate, rootRenderNodes, tokenKey, unwrapValue} from './util';\n+export {createRendererType2, elementEventFullName, EMPTY_MAP, inlineInterpolate, interpolate, rootRenderNodes, tokenKey, unwrapValue} from './util';\n export {viewDef} from './view';\n export {attachEmbeddedView, detachEmbeddedView, moveEmbeddedView} from './view_attach';\n "
        },
        {
            "sha": "c83b49360cb0a76b3995fe54abdd0eee90f411a1",
            "filename": "packages/core/src/view/util.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Fview%2Futil.ts",
            "raw_url": "https://github.com/angular/angular/raw/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Fsrc%2Fview%2Futil.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fview%2Futil.ts?ref=34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92",
            "patch": "@@ -444,5 +444,4 @@ function _toStringWithNull(v: any): string {\n   return v != null ? v.toString() : '';\n }\n \n-export const EMPTY_ARRAY: any[] = [];\n export const EMPTY_MAP: {[key: string]: any} = {};"
        },
        {
            "sha": "91167e7414dea34d707033e36c8f7d0c7c56e45f",
            "filename": "packages/core/test/bundling/forms/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json?ref=34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92",
            "patch": "@@ -173,12 +173,6 @@\n   {\n     \"name\": \"EMPTY_ARRAY\"\n   },\n-  {\n-    \"name\": \"EMPTY_ARRAY\"\n-  },\n-  {\n-    \"name\": \"EMPTY_ARRAY\"\n-  },\n   {\n     \"name\": \"EMPTY_OBJ\"\n   },"
        },
        {
            "sha": "b131ed3a3c235ad995f505cd68493f2a966e311a",
            "filename": "packages/core/test/bundling/router/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Ftest%2Fbundling%2Frouter%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Ftest%2Fbundling%2Frouter%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Frouter%2Fbundle.golden_symbols.json?ref=34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92",
            "patch": "@@ -236,9 +236,6 @@\n   {\n     \"name\": \"EMPTY_ARRAY\"\n   },\n-  {\n-    \"name\": \"EMPTY_ARRAY\"\n-  },\n   {\n     \"name\": \"EMPTY_OBJ\"\n   },"
        },
        {
            "sha": "b070bffaddfb15f9317e3ed0bc0342ed0e84a8ee",
            "filename": "packages/core/test/bundling/todo/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json?ref=34aa9c35318a79cf9ef8ae0c32c182eb90d5dc92",
            "patch": "@@ -14,9 +14,6 @@\n   {\n     \"name\": \"EMPTY_ARRAY\"\n   },\n-  {\n-    \"name\": \"EMPTY_ARRAY\"\n-  },\n   {\n     \"name\": \"EMPTY_OBJ\"\n   },"
        }
    ],
    "stats": {
        "total": 40,
        "additions": 13,
        "deletions": 27
    }
}