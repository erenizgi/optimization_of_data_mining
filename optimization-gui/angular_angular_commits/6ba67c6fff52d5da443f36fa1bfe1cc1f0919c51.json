{
    "author": "JoostK",
    "message": "feat(compiler-cli): mark ability to use partial compilation mode as stable (#41518)\n\nThis commit marks the `compilationMode` compiler option as stable, such\nthat libraries can be compiled in partial compilation mode.\n\nIn partial compilation mode, the compiler's output changes from fully\ncompiled AOT definitions to an intermediate form using partial\ndeclarations. This form is suitable to be published to NPM, which now\nallows libraries to be compiled and published using the Ivy compiler.\n\nPlease be aware that libraries that have been compiled using this mode\ncan only be used in Angular 12 applications and up; they cannot be used\nwhen Ivy is disabled (i.e. when using View Engine) or in versions of\nAngular prior to 12. The `compilationMode` option has no effect if\n`enableIvy: false` is used.\n\nCloses #41496\n\nPR Close #41518",
    "sha": "6ba67c6fff52d5da443f36fa1bfe1cc1f0919c51",
    "files": [
        {
            "sha": "76b79b939c7b8b6d910c9325eb803071a48ee915",
            "filename": "aio/content/guide/angular-compiler-options.md",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/6ba67c6fff52d5da443f36fa1bfe1cc1f0919c51/aio%2Fcontent%2Fguide%2Fangular-compiler-options.md",
            "raw_url": "https://github.com/angular/angular/raw/6ba67c6fff52d5da443f36fa1bfe1cc1f0919c51/aio%2Fcontent%2Fguide%2Fangular-compiler-options.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fangular-compiler-options.md?ref=6ba67c6fff52d5da443f36fa1bfe1cc1f0919c51",
            "patch": "@@ -67,6 +67,15 @@ Modifies how Angular-specific annotations are emitted to improve tree-shaking. N\n When `true`, use [Tsickle](https://github.com/angular/tsickle) to annotate the emitted JavaScript with [JSDoc](https://jsdoc.app/) comments needed by the\n [Closure Compiler](https://github.com/google/closure-compiler). Default is `false`.\n \n+### `compilationMode`\n+\n+Specifies the compilation mode to use. The following modes are available:\n+\n+- `'full'`: generates fully AOT-compiled code according to the version of Angular that is currently being used.\n+- `'partial'`: generates code in a stable, but intermediate form suitable for a published library.\n+\n+The default value is `'full'`.\n+\n ### `disableExpressionLowering`\n \n When `true` (the default), transforms code that is or could be used in an annotation, to allow it to be imported from template factory modules. See [metadata rewriting](guide/aot-compiler#metadata-rewriting) for more information."
        },
        {
            "sha": "e972a3e99ce56aa89f572feba9442787ee2d2c8b",
            "filename": "goldens/public-api/compiler-cli/compiler_options.d.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/6ba67c6fff52d5da443f36fa1bfe1cc1f0919c51/goldens%2Fpublic-api%2Fcompiler-cli%2Fcompiler_options.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/6ba67c6fff52d5da443f36fa1bfe1cc1f0919c51/goldens%2Fpublic-api%2Fcompiler-cli%2Fcompiler_options.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fcompiler-cli%2Fcompiler_options.d.ts?ref=6ba67c6fff52d5da443f36fa1bfe1cc1f0919c51",
            "patch": "@@ -43,3 +43,7 @@ export interface StrictTemplateOptions {\n     strictSafeNavigationTypes?: boolean;\n     strictTemplates?: boolean;\n }\n+\n+export interface TargetOptions {\n+    compilationMode?: 'full' | 'partial';\n+}"
        },
        {
            "sha": "b9117d54599dfc7661510d7471165e476028896d",
            "filename": "packages/compiler-cli/src/ngtsc/core/api/src/options.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 17,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/6ba67c6fff52d5da443f36fa1bfe1cc1f0919c51/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fapi%2Fsrc%2Foptions.ts",
            "raw_url": "https://github.com/angular/angular/raw/6ba67c6fff52d5da443f36fa1bfe1cc1f0919c51/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fapi%2Fsrc%2Foptions.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fapi%2Fsrc%2Foptions.ts?ref=6ba67c6fff52d5da443f36fa1bfe1cc1f0919c51",
            "patch": "@@ -8,7 +8,7 @@\n \n import * as ts from 'typescript';\n \n-import {BazelAndG3Options, I18nOptions, LegacyNgcOptions, MiscOptions, NgcCompatibilityOptions, StrictTemplateOptions} from './public_options';\n+import {BazelAndG3Options, I18nOptions, LegacyNgcOptions, MiscOptions, NgcCompatibilityOptions, StrictTemplateOptions, TargetOptions} from './public_options';\n \n \n /**\n@@ -36,22 +36,6 @@ export interface TestOnlyOptions {\n   tracePerformance?: string;\n }\n \n-/**\n- * Options that specify compilation target.\n- */\n-export interface TargetOptions {\n-  /**\n-   * Specifies the compilation mode to use. The following modes are available:\n-   * - 'full': generates fully AOT compiled code using Ivy instructions.\n-   * - 'partial': generates code in a stable, but intermediate form suitable to be published to NPM.\n-   *\n-   * To become public once the linker is ready.\n-   *\n-   * @internal\n-   */\n-  compilationMode?: 'full'|'partial';\n-}\n-\n /**\n  * A merged interface of all of the various Angular compiler options, as well as the standard\n  * `ts.CompilerOptions`."
        },
        {
            "sha": "7af887196de08edaa2b001b99c0f1eca6c301be9",
            "filename": "packages/compiler-cli/src/ngtsc/core/api/src/public_options.ts",
            "status": "modified",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/6ba67c6fff52d5da443f36fa1bfe1cc1f0919c51/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fapi%2Fsrc%2Fpublic_options.ts",
            "raw_url": "https://github.com/angular/angular/raw/6ba67c6fff52d5da443f36fa1bfe1cc1f0919c51/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fapi%2Fsrc%2Fpublic_options.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fapi%2Fsrc%2Fpublic_options.ts?ref=6ba67c6fff52d5da443f36fa1bfe1cc1f0919c51",
            "patch": "@@ -340,6 +340,22 @@ export interface I18nOptions {\n   i18nNormalizeLineEndingsInICUs?: boolean;\n }\n \n+/**\n+ * Options that specify compilation target.\n+ *\n+ * @publicApi\n+ */\n+export interface TargetOptions {\n+  /**\n+   * Specifies the compilation mode to use. The following modes are available:\n+   * - 'full': generates fully AOT compiled code using Ivy instructions.\n+   * - 'partial': generates code in a stable, but intermediate form suitable for publication to NPM.\n+   *\n+   * The default value is 'full'.\n+   */\n+  compilationMode?: 'full'|'partial';\n+}\n+\n /**\n  * Miscellaneous options that don't fall into any other category\n  *"
        }
    ],
    "stats": {
        "total": 47,
        "additions": 30,
        "deletions": 17
    }
}