{
    "author": "dylhunn",
    "message": "feat(forms): add hasValidators, addValidators, and removeValidators methods (for both sync and async) (#42838)\n\nSeveral new functionalities are possible with this change: the most requested is that callers can now check whether a control has a required validator. Other uses include incrementally changing the validators set without doing an expensive operation to reset all validators.\n\nCloses #13461.\n\nPR Close #42838",
    "sha": "1d9d02696eadbee2c2f719e432efca22f1e494e9",
    "files": [
        {
            "sha": "332b1ddc0e20b862c68ca79fc48138d849627890",
            "filename": "goldens/public-api/forms/forms.md",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/1d9d02696eadbee2c2f719e432efca22f1e494e9/goldens%2Fpublic-api%2Fforms%2Fforms.md",
            "raw_url": "https://github.com/angular/angular/raw/1d9d02696eadbee2c2f719e432efca22f1e494e9/goldens%2Fpublic-api%2Fforms%2Fforms.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fforms%2Fforms.md?ref=1d9d02696eadbee2c2f719e432efca22f1e494e9",
            "patch": "@@ -21,6 +21,8 @@ import { Version } from '@angular/core';\n // @public\n export abstract class AbstractControl {\n     constructor(validators: ValidatorFn | ValidatorFn[] | null, asyncValidators: AsyncValidatorFn | AsyncValidatorFn[] | null);\n+    addAsyncValidators(validators: AsyncValidatorFn | AsyncValidatorFn[]): void;\n+    addValidators(validators: ValidatorFn | ValidatorFn[]): void;\n     get asyncValidator(): AsyncValidatorFn | null;\n     set asyncValidator(asyncValidatorFn: AsyncValidatorFn | null);\n     clearAsyncValidators(): void;\n@@ -39,7 +41,9 @@ export abstract class AbstractControl {\n     readonly errors: ValidationErrors | null;\n     get(path: Array<string | number> | string): AbstractControl | null;\n     getError(errorCode: string, path?: Array<string | number> | string): any;\n+    hasAsyncValidator(validator: AsyncValidatorFn): boolean;\n     hasError(errorCode: string, path?: Array<string | number> | string): boolean;\n+    hasValidator(validator: ValidatorFn): boolean;\n     get invalid(): boolean;\n     markAllAsTouched(): void;\n     markAsDirty(opts?: {\n@@ -62,15 +66,17 @@ export abstract class AbstractControl {\n     abstract patchValue(value: any, options?: Object): void;\n     get pending(): boolean;\n     readonly pristine: boolean;\n+    removeAsyncValidators(validators: AsyncValidatorFn | AsyncValidatorFn[]): void;\n+    removeValidators(validators: ValidatorFn | ValidatorFn[]): void;\n     abstract reset(value?: any, options?: Object): void;\n     get root(): AbstractControl;\n-    setAsyncValidators(newValidator: AsyncValidatorFn | AsyncValidatorFn[] | null): void;\n+    setAsyncValidators(validators: AsyncValidatorFn | AsyncValidatorFn[] | null): void;\n     setErrors(errors: ValidationErrors | null, opts?: {\n         emitEvent?: boolean;\n     }): void;\n     // (undocumented)\n     setParent(parent: FormGroup | FormArray): void;\n-    setValidators(newValidator: ValidatorFn | ValidatorFn[] | null): void;\n+    setValidators(validators: ValidatorFn | ValidatorFn[] | null): void;\n     abstract setValue(value: any, options?: Object): void;\n     readonly status: string;\n     readonly statusChanges: Observable<any>;"
        },
        {
            "sha": "b5c279699f27d2a1559405dcfd39e5c098dc0418",
            "filename": "goldens/size-tracking/integration-payloads.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/1d9d02696eadbee2c2f719e432efca22f1e494e9/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "raw_url": "https://github.com/angular/angular/raw/1d9d02696eadbee2c2f719e432efca22f1e494e9/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fsize-tracking%2Fintegration-payloads.json?ref=1d9d02696eadbee2c2f719e432efca22f1e494e9",
            "patch": "@@ -49,7 +49,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime-es2015\": 1150,\n-        \"main-es2015\": 162346,\n+        \"main-es2015\": 163007,\n         \"polyfills-es2015\": 36975\n       }\n     }"
        },
        {
            "sha": "1358a6e54fa82fe74114fafee6ce30c4961b8b2e",
            "filename": "packages/core/test/bundling/forms_reactive/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/1d9d02696eadbee2c2f719e432efca22f1e494e9/packages%2Fcore%2Ftest%2Fbundling%2Fforms_reactive%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/1d9d02696eadbee2c2f719e432efca22f1e494e9/packages%2Fcore%2Ftest%2Fbundling%2Fforms_reactive%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Fforms_reactive%2Fbundle.golden_symbols.json?ref=1d9d02696eadbee2c2f719e432efca22f1e494e9",
            "patch": "@@ -665,6 +665,9 @@\n   {\n     \"name\": \"addToViewTree\"\n   },\n+  {\n+    \"name\": \"addValidators\"\n+  },\n   {\n     \"name\": \"allocExpando\"\n   },\n@@ -1082,6 +1085,9 @@\n   {\n     \"name\": \"hasValidLength\"\n   },\n+  {\n+    \"name\": \"hasValidator\"\n+  },\n   {\n     \"name\": \"hostReportError\"\n   },\n@@ -1271,6 +1277,9 @@\n   {\n     \"name\": \"makeRecord\"\n   },\n+  {\n+    \"name\": \"makeValidatorsArray\"\n+  },\n   {\n     \"name\": \"map\"\n   },\n@@ -1430,6 +1439,9 @@\n   {\n     \"name\": \"removeStyle\"\n   },\n+  {\n+    \"name\": \"removeValidators\"\n+  },\n   {\n     \"name\": \"renderComponent\"\n   },"
        },
        {
            "sha": "5c1cb3f1eba9412b8a215a3147dfe64a9c827fac",
            "filename": "packages/core/test/bundling/forms_template_driven/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/1d9d02696eadbee2c2f719e432efca22f1e494e9/packages%2Fcore%2Ftest%2Fbundling%2Fforms_template_driven%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/1d9d02696eadbee2c2f719e432efca22f1e494e9/packages%2Fcore%2Ftest%2Fbundling%2Fforms_template_driven%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Fforms_template_driven%2Fbundle.golden_symbols.json?ref=1d9d02696eadbee2c2f719e432efca22f1e494e9",
            "patch": "@@ -653,6 +653,9 @@\n   {\n     \"name\": \"addToViewTree\"\n   },\n+  {\n+    \"name\": \"addValidators\"\n+  },\n   {\n     \"name\": \"allocExpando\"\n   },\n@@ -1046,6 +1049,9 @@\n   {\n     \"name\": \"hasTagAndTypeMatch\"\n   },\n+  {\n+    \"name\": \"hasValidator\"\n+  },\n   {\n     \"name\": \"hostReportError\"\n   },\n@@ -1232,6 +1238,9 @@\n   {\n     \"name\": \"makeRecord\"\n   },\n+  {\n+    \"name\": \"makeValidatorsArray\"\n+  },\n   {\n     \"name\": \"map\"\n   },\n@@ -1394,6 +1403,9 @@\n   {\n     \"name\": \"removeStyle\"\n   },\n+  {\n+    \"name\": \"removeValidators\"\n+  },\n   {\n     \"name\": \"renderComponent\"\n   },"
        },
        {
            "sha": "ec298432886ff251f2238b7d0e9eeaed9d21e35b",
            "filename": "packages/forms/src/model.ts",
            "status": "modified",
            "additions": 106,
            "deletions": 16,
            "changes": 122,
            "blob_url": "https://github.com/angular/angular/blob/1d9d02696eadbee2c2f719e432efca22f1e494e9/packages%2Fforms%2Fsrc%2Fmodel.ts",
            "raw_url": "https://github.com/angular/angular/raw/1d9d02696eadbee2c2f719e432efca22f1e494e9/packages%2Fforms%2Fsrc%2Fmodel.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Fsrc%2Fmodel.ts?ref=1d9d02696eadbee2c2f719e432efca22f1e494e9",
            "patch": "@@ -11,7 +11,7 @@ import {Observable} from 'rxjs';\n \n import {removeListItem} from './directives/shared';\n import {AsyncValidatorFn, ValidationErrors, ValidatorFn} from './directives/validators';\n-import {composeAsyncValidators, composeValidators, toObservable} from './validators';\n+import {addValidators, composeAsyncValidators, composeValidators, hasValidator, makeValidatorsArray, removeValidators, toObservable} from './validators';\n \n /**\n  * Reports that a FormControl is valid, meaning that no errors exist in the input value.\n@@ -129,14 +129,12 @@ export interface AbstractControlOptions {\n   updateOn?: 'change'|'blur'|'submit';\n }\n \n-\n function isOptionsObj(validatorOrOpts?: ValidatorFn|ValidatorFn[]|AbstractControlOptions|\n                       null): validatorOrOpts is AbstractControlOptions {\n   return validatorOrOpts != null && !Array.isArray(validatorOrOpts) &&\n       typeof validatorOrOpts === 'object';\n }\n \n-\n /**\n  * This is the base class for `FormControl`, `FormGroup`, and `FormArray`.\n  *\n@@ -245,7 +243,9 @@ export abstract class AbstractControl {\n   }\n \n   /**\n-   * The function that is used to determine the validity of this control synchronously.\n+   * Returns the function that is used to determine the validity of this control synchronously.\n+   * If multiple validators have been added, this will be a single composed function.\n+   * See `Validators.compose()` for additional information.\n    */\n   get validator(): ValidatorFn|null {\n     return this._composedValidatorFn;\n@@ -255,7 +255,9 @@ export abstract class AbstractControl {\n   }\n \n   /**\n-   * The function that is used to determine the validity of this control asynchronously.\n+   * Returns the function that is used to determine the validity of this control asynchronously.\n+   * If multiple validators have been added, this will be a single composed function.\n+   * See `Validators.compose()` for additional information.\n    */\n   get asyncValidator(): AsyncValidatorFn|null {\n     return this._composedAsyncValidatorFn;\n@@ -425,32 +427,120 @@ export abstract class AbstractControl {\n \n   /**\n    * Sets the synchronous validators that are active on this control.  Calling\n-   * this overwrites any existing sync validators.\n+   * this overwrites any existing synchronous validators.\n+   *\n+   * When you add or remove a validator at run time, you must call\n+   * `updateValueAndValidity()` for the new validation to take effect.\n+   *\n+   * If you want to add a new validator without affecting existing ones, consider\n+   * using `addValidators()` method instead.\n+   */\n+  setValidators(validators: ValidatorFn|ValidatorFn[]|null): void {\n+    this._rawValidators = validators;\n+    this._composedValidatorFn = coerceToValidator(validators);\n+  }\n+\n+  /**\n+   * Sets the asynchronous validators that are active on this control. Calling this\n+   * overwrites any existing asynchronous validators.\n+   *\n+   * When you add or remove a validator at run time, you must call\n+   * `updateValueAndValidity()` for the new validation to take effect.\n+   *\n+   * If you want to add a new validator without affecting existing ones, consider\n+   * using `addAsyncValidators()` method instead.\n+   */\n+  setAsyncValidators(validators: AsyncValidatorFn|AsyncValidatorFn[]|null): void {\n+    this._rawAsyncValidators = validators;\n+    this._composedAsyncValidatorFn = coerceToAsyncValidator(validators);\n+  }\n+\n+  /**\n+   * Add a synchronous validator or validators to this control, without affecting other validators.\n+   *\n+   * When you add or remove a validator at run time, you must call\n+   * `updateValueAndValidity()` for the new validation to take effect.\n+   *\n+   * Adding a validator that already exists will have no effect. If duplicate validator functions\n+   * are present in the `validators` array, only the first instance would be added to a form\n+   * control.\n+   *\n+   * @param validators The new validator function or functions to add to this control.\n+   */\n+  addValidators(validators: ValidatorFn|ValidatorFn[]): void {\n+    this.setValidators(addValidators(validators, this._rawValidators));\n+  }\n+\n+  /**\n+   * Add an asynchronous validator or validators to this control, without affecting other\n+   * validators.\n+   *\n+   * When you add or remove a validator at run time, you must call\n+   * `updateValueAndValidity()` for the new validation to take effect.\n+   *\n+   * Adding a validator that already exists will have no effect.\n+   *\n+   * @param validators The new asynchronous validator function or functions to add to this control.\n+   */\n+  addAsyncValidators(validators: AsyncValidatorFn|AsyncValidatorFn[]): void {\n+    this.setAsyncValidators(addValidators(validators, this._rawAsyncValidators));\n+  }\n+\n+  /**\n+   * Remove a synchronous validator from this control, without affecting other validators.\n+   * Validators are compared by function reference; you must pass a reference to the exact same\n+   * validator function as the one that was originally set. If a provided validator is not found,\n+   * it is ignored.\n    *\n    * When you add or remove a validator at run time, you must call\n    * `updateValueAndValidity()` for the new validation to take effect.\n    *\n+   * @param validators The validator or validators to remove.\n    */\n-  setValidators(newValidator: ValidatorFn|ValidatorFn[]|null): void {\n-    this._rawValidators = newValidator;\n-    this._composedValidatorFn = coerceToValidator(newValidator);\n+  removeValidators(validators: ValidatorFn|ValidatorFn[]): void {\n+    this.setValidators(removeValidators(validators, this._rawValidators));\n   }\n \n   /**\n-   * Sets the async validators that are active on this control. Calling this\n-   * overwrites any existing async validators.\n+   * Remove an asynchronous validator from this control, without affecting other validators.\n+   * Validators are compared by function reference; you must pass a reference to the exact same\n+   * validator function as the one that was originally set. If a provided validator is not found, it\n+   * is ignored.\n    *\n    * When you add or remove a validator at run time, you must call\n    * `updateValueAndValidity()` for the new validation to take effect.\n    *\n+   * @param validators The asynchronous validator or validators to remove.\n+   */\n+  removeAsyncValidators(validators: AsyncValidatorFn|AsyncValidatorFn[]): void {\n+    this.setAsyncValidators(removeValidators(validators, this._rawAsyncValidators));\n+  }\n+\n+  /**\n+   * Check whether a synchronous validator function is present on this control. The provided\n+   * validator must be a reference to the exact same function that was provided.\n+   *\n+   * @param validator The validator to check for presence. Compared by function reference.\n+   * @returns Whether the provided validator was found on this control.\n+   */\n+  hasValidator(validator: ValidatorFn): boolean {\n+    return hasValidator(this._rawValidators, validator);\n+  }\n+\n+  /**\n+   * Check whether an asynchronous validator function is present on this control. The provided\n+   * validator must be a reference to the exact same function that was provided.\n+   *\n+   * @param validator The asynchronous validator to check for presence. Compared by function\n+   *     reference.\n+   * @returns Whether the provided asynchronous validator was found on this control.\n    */\n-  setAsyncValidators(newValidator: AsyncValidatorFn|AsyncValidatorFn[]|null): void {\n-    this._rawAsyncValidators = newValidator;\n-    this._composedAsyncValidatorFn = coerceToAsyncValidator(newValidator);\n+  hasAsyncValidator(validator: AsyncValidatorFn): boolean {\n+    return hasValidator(this._rawAsyncValidators, validator);\n   }\n \n   /**\n-   * Empties out the sync validator list.\n+   * Empties out the synchronous validator list.\n    *\n    * When you add or remove a validator at run time, you must call\n    * `updateValueAndValidity()` for the new validation to take effect.\n@@ -1065,7 +1155,7 @@ export abstract class AbstractControl {\n  * console.log(control.status);    // 'DISABLED'\n  * ```\n  *\n- * The following example initializes the control with a sync validator.\n+ * The following example initializes the control with a synchronous validator.\n  *\n  * ```ts\n  * const control = new FormControl('', Validators.required);"
        },
        {
            "sha": "99200c8bca36071af7016b4b2db5fd93fe7acc36",
            "filename": "packages/forms/src/validators.ts",
            "status": "modified",
            "additions": 53,
            "deletions": 0,
            "changes": 53,
            "blob_url": "https://github.com/angular/angular/blob/1d9d02696eadbee2c2f719e432efca22f1e494e9/packages%2Fforms%2Fsrc%2Fvalidators.ts",
            "raw_url": "https://github.com/angular/angular/raw/1d9d02696eadbee2c2f719e432efca22f1e494e9/packages%2Fforms%2Fsrc%2Fvalidators.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Fsrc%2Fvalidators.ts?ref=1d9d02696eadbee2c2f719e432efca22f1e494e9",
            "patch": "@@ -663,3 +663,56 @@ export function getControlAsyncValidators(control: AbstractControl): AsyncValida\n     AsyncValidatorFn[]|null {\n   return (control as any)._rawAsyncValidators as AsyncValidatorFn | AsyncValidatorFn[] | null;\n }\n+\n+/**\n+ * Accepts a singleton validator, an array, or null, and returns an array type with the provided\n+ * validators.\n+ *\n+ * @param validators A validator, validators, or null.\n+ * @returns A validators array.\n+ */\n+export function makeValidatorsArray<T extends ValidatorFn|AsyncValidatorFn>(validators: T|T[]|\n+                                                                            null): T[] {\n+  if (!validators) return [];\n+  return Array.isArray(validators) ? validators : [validators];\n+}\n+\n+/**\n+ * Determines whether a validator or validators array has a given validator.\n+ *\n+ * @param validators The validator or validators to compare against.\n+ * @param validator The validator to check.\n+ * @returns Whether the validator is present.\n+ */\n+export function hasValidator<T extends ValidatorFn|AsyncValidatorFn>(\n+    validators: T|T[]|null, validator: T): boolean {\n+  return Array.isArray(validators) ? validators.includes(validator) : validators === validator;\n+}\n+\n+/**\n+ * Combines two arrays of validators into one. If duplicates are provided, only one will be added.\n+ *\n+ * @param validators The new validators.\n+ * @param currentValidators The base array of currrent validators.\n+ * @returns An array of validators.\n+ */\n+export function addValidators<T extends ValidatorFn|AsyncValidatorFn>(\n+    validators: T|T[], currentValidators: T|T[]|null): T[] {\n+  const current = makeValidatorsArray(currentValidators);\n+  const validatorsToAdd = makeValidatorsArray(validators);\n+  validatorsToAdd.forEach((v: T) => {\n+    // Note: if there are duplicate entries in the new validators array,\n+    // only the first one would be added to the current list of validarors.\n+    // Duplicate ones would be ignored since `hasValidator` would detect\n+    // the presence of a validator function and we update the current list in place.\n+    if (!hasValidator(current, v)) {\n+      current.push(v);\n+    }\n+  });\n+  return current;\n+}\n+\n+export function removeValidators<T extends ValidatorFn|AsyncValidatorFn>(\n+    validators: T|T[], currentValidators: T|T[]|null): T[] {\n+  return makeValidatorsArray(currentValidators).filter(v => !hasValidator(validators, v));\n+}"
        },
        {
            "sha": "8fa6326e8994df0bdb7629c09f80440a38412d6e",
            "filename": "packages/forms/test/form_builder_spec.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/1d9d02696eadbee2c2f719e432efca22f1e494e9/packages%2Fforms%2Ftest%2Fform_builder_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/1d9d02696eadbee2c2f719e432efca22f1e494e9/packages%2Fforms%2Ftest%2Fform_builder_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Ftest%2Fform_builder_spec.ts?ref=1d9d02696eadbee2c2f719e432efca22f1e494e9",
            "patch": "@@ -69,6 +69,17 @@ describe('Form Builder', () => {\n     expect(g.controls['login'].asyncValidator).toBe(asyncValidator);\n   });\n \n+  it('should support controls with validators that are later modified', () => {\n+    const g = b.group({'login': b.control(null, syncValidator, asyncValidator)});\n+    expect(g.controls['login'].value).toBeNull();\n+    expect(g.controls['login'].validator).toBe(syncValidator);\n+    expect(g.controls['login'].asyncValidator).toBe(asyncValidator);\n+    g.controls['login'].addValidators(Validators.required);\n+    expect(g.controls['login'].hasValidator(Validators.required)).toBe(true);\n+    g.controls['login'].removeValidators(Validators.required);\n+    expect(g.controls['login'].hasValidator(Validators.required)).toBe(false);\n+  });\n+\n   it('should support controls with no validators and whose form state is undefined', () => {\n     const g = b.group({'login': b.control(undefined)});\n     expect(g.controls['login'].value).toBeNull();"
        },
        {
            "sha": "0c8900a4d0bcd0f11e87e2ce143aee89de5e6b20",
            "filename": "packages/forms/test/form_control_spec.ts",
            "status": "modified",
            "additions": 106,
            "deletions": 0,
            "changes": 106,
            "blob_url": "https://github.com/angular/angular/blob/1d9d02696eadbee2c2f719e432efca22f1e494e9/packages%2Fforms%2Ftest%2Fform_control_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/1d9d02696eadbee2c2f719e432efca22f1e494e9/packages%2Fforms%2Ftest%2Fform_control_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Ftest%2Fform_control_spec.ts?ref=1d9d02696eadbee2c2f719e432efca22f1e494e9",
            "patch": "@@ -312,6 +312,57 @@ describe('FormControl', () => {\n       c.setValidators([Validators.required]);\n       expect(c.validator).not.toBe(null);\n     });\n+\n+    it('should check presence of and remove a validator set in the control constructor', () => {\n+      const c = new FormControl('', Validators.required);\n+      expect(c.hasValidator(Validators.required)).toEqual(true);\n+\n+      c.removeValidators(Validators.required);\n+      expect(c.hasValidator(Validators.required)).toEqual(false);\n+\n+      c.addValidators(Validators.required);\n+      expect(c.hasValidator(Validators.required)).toEqual(true);\n+    });\n+\n+    it('should check presence of and remove a validator set with addValidators', () => {\n+      const c = new FormControl('');\n+      expect(c.hasValidator(Validators.required)).toEqual(false);\n+      c.addValidators(Validators.required);\n+      expect(c.hasValidator(Validators.required)).toEqual(true);\n+\n+      c.removeValidators(Validators.required);\n+      expect(c.hasValidator(Validators.required)).toEqual(false);\n+    });\n+\n+    it('should check presence of and remove multiple validators set at the same time', () => {\n+      const c = new FormControl('3');\n+      const minValidator = Validators.min(4);\n+      c.addValidators([Validators.required, minValidator]);\n+      expect(c.hasValidator(Validators.required)).toEqual(true);\n+      expect(c.hasValidator(minValidator)).toEqual(true);\n+\n+      c.removeValidators([Validators.required, minValidator]);\n+      expect(c.hasValidator(Validators.required)).toEqual(false);\n+      expect(c.hasValidator(minValidator)).toEqual(false);\n+    });\n+\n+    it('should be able to remove a validator added multiple times', () => {\n+      const c = new FormControl('', Validators.required);\n+      c.addValidators(Validators.required);\n+      c.addValidators(Validators.required);\n+      expect(c.hasValidator(Validators.required)).toEqual(true);\n+\n+      c.removeValidators(Validators.required);\n+      expect(c.hasValidator(Validators.required)).toEqual(false);\n+    });\n+\n+    it('should return false when checking presence of a validator not identical by reference',\n+       () => {\n+         const minValidator = Validators.min(5);\n+         const c = new FormControl('1', minValidator);\n+         expect(c.hasValidator(minValidator)).toEqual(true);\n+         expect(c.hasValidator(Validators.min(5))).toEqual(false);\n+       });\n   });\n \n   describe('asyncValidator', () => {\n@@ -508,6 +559,61 @@ describe('FormControl', () => {\n          tick();\n          expect(c.status).toEqual('DISABLED');\n        }));\n+\n+    it('should check presence of and remove a validator set in the control constructor', () => {\n+      const asyncVal = asyncValidator('expected');\n+      const c = new FormControl('', null, asyncVal);\n+      expect(c.hasAsyncValidator(asyncVal)).toEqual(true);\n+\n+      c.removeAsyncValidators(asyncVal);\n+      expect(c.hasAsyncValidator(asyncVal)).toEqual(false);\n+\n+      c.addAsyncValidators(asyncVal);\n+      expect(c.hasAsyncValidator(asyncVal)).toEqual(true);\n+    });\n+\n+    it('should check presence of and remove a validator set with addValidators', () => {\n+      const c = new FormControl('');\n+      const asyncVal = asyncValidator('expected');\n+      c.addAsyncValidators(asyncVal);\n+      expect(c.hasAsyncValidator(asyncVal)).toEqual(true);\n+\n+      c.removeAsyncValidators(asyncVal);\n+      expect(c.hasAsyncValidator(asyncVal)).toEqual(false);\n+    });\n+\n+    it('should check presence of and remove multiple validators set at the same time', () => {\n+      const c = new FormControl('3');\n+      const asyncVal1 = asyncValidator('expected1');\n+      const asyncVal2 = asyncValidator('expected2');\n+      c.addAsyncValidators([asyncVal1, asyncVal2]);\n+      expect(c.hasAsyncValidator(asyncVal1)).toEqual(true);\n+      expect(c.hasAsyncValidator(asyncVal2)).toEqual(true);\n+\n+      c.removeAsyncValidators([asyncVal1, asyncVal2]);\n+      expect(c.hasAsyncValidator(asyncVal1)).toEqual(false);\n+      expect(c.hasAsyncValidator(asyncVal2)).toEqual(false);\n+    });\n+\n+    it('should be able to remove a validator added multiple times', () => {\n+      const asyncVal = asyncValidator('expected');\n+      const c = new FormControl('', null, asyncVal);\n+      c.addAsyncValidators(asyncVal);\n+      c.addAsyncValidators(asyncVal);\n+      expect(c.hasAsyncValidator(asyncVal)).toEqual(true);\n+\n+      c.removeAsyncValidators(asyncVal);\n+      expect(c.hasAsyncValidator(asyncVal)).toEqual(false);\n+    });\n+\n+    it('should return false when checking presence of a validator not identical by reference',\n+       () => {\n+         const asyncVal = asyncValidator('expected');\n+         const asyncValDifferentFn = asyncValidator('expected');\n+         const c = new FormControl('1', null, asyncVal);\n+         expect(c.hasAsyncValidator(asyncVal)).toEqual(true);\n+         expect(c.hasAsyncValidator(asyncValDifferentFn)).toEqual(false);\n+       });\n   });\n \n   describe('dirty', () => {"
        }
    ],
    "stats": {
        "total": 328,
        "additions": 309,
        "deletions": 19
    }
}