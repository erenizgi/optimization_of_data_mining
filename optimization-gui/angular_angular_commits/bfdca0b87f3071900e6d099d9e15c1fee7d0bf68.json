{
    "author": "twerske",
    "message": "refactor(core): add links to top runtime errors (#40326)\n\nadd links to 5 runtime error messages\nnavigate user to AIO new /errors pages for debugging\n\nPR Close #40326",
    "sha": "bfdca0b87f3071900e6d099d9e15c1fee7d0bf68",
    "files": [
        {
            "sha": "8ac13126d0f9d8309475ed2cea3bab12ff7bb429",
            "filename": "packages/compiler-cli/integrationtest/bazel/injector_def/ivy_build/app/test/module_spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/bfdca0b87f3071900e6d099d9e15c1fee7d0bf68/packages%2Fcompiler-cli%2Fintegrationtest%2Fbazel%2Finjector_def%2Fivy_build%2Fapp%2Ftest%2Fmodule_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/bfdca0b87f3071900e6d099d9e15c1fee7d0bf68/packages%2Fcompiler-cli%2Fintegrationtest%2Fbazel%2Finjector_def%2Fivy_build%2Fapp%2Ftest%2Fmodule_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fintegrationtest%2Fbazel%2Finjector_def%2Fivy_build%2Fapp%2Ftest%2Fmodule_spec.ts?ref=bfdca0b87f3071900e6d099d9e15c1fee7d0bf68",
            "patch": "@@ -63,9 +63,11 @@ describe('Ivy NgModule', () => {\n       }\n \n       const errorCode = ivyEnabled ? 'NG0200: ' : '';\n+      const errorLink = ivyEnabled ? '. Find more at https://angular.io/errors/NG0200' : '';\n       expect(() => createInjector(AModule))\n           .toThrowError(`${\n-              errorCode}Circular dependency in DI detected for AModule. Dependency path: AModule > BModule > AModule`);\n+              errorCode}Circular dependency in DI detected for AModule. Dependency path: AModule > BModule > AModule${\n+              errorLink}`);\n     });\n \n     it('merges imports and exports', () => {"
        },
        {
            "sha": "bedac94a6076e66c67256da107761b3fb24e2192",
            "filename": "packages/core/src/render3/error_code.ts",
            "status": "modified",
            "additions": 30,
            "deletions": 1,
            "changes": 31,
            "blob_url": "https://github.com/angular/angular/blob/bfdca0b87f3071900e6d099d9e15c1fee7d0bf68/packages%2Fcore%2Fsrc%2Frender3%2Ferror_code.ts",
            "raw_url": "https://github.com/angular/angular/raw/bfdca0b87f3071900e6d099d9e15c1fee7d0bf68/packages%2Fcore%2Fsrc%2Frender3%2Ferror_code.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Ferror_code.ts?ref=bfdca0b87f3071900e6d099d9e15c1fee7d0bf68",
            "patch": "@@ -6,6 +6,11 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n+// Base URL for the error details page.\n+// Keep this value in sync with a similar const in\n+// `packages/compiler-cli/src/ngtsc/diagnostics/src/error_code.ts`.\n+const ERROR_DETAILS_PAGE_BASE_URL = 'https://angular.io/errors';\n+\n export const enum RuntimeErrorCode {\n   // Internal Errors\n \n@@ -38,8 +43,32 @@ export class RuntimeError extends Error {\n   }\n }\n \n+// Contains a set of error messages that have details guides at angular.io.\n+// Full list of available error guides can be found at https://angular.io/errors\n+/* tslint:disable:no-toplevel-property-access */\n+export const RUNTIME_ERRORS_WITH_GUIDES = new Set([\n+  RuntimeErrorCode.EXPRESSION_CHANGED_AFTER_CHECKED,\n+  RuntimeErrorCode.CYCLIC_DI_DEPENDENCY,\n+  RuntimeErrorCode.PROVIDER_NOT_FOUND,\n+  RuntimeErrorCode.MULTIPLE_COMPONENTS_MATCH,\n+  RuntimeErrorCode.EXPORT_NOT_FOUND,\n+]);\n+/* tslint:enable:no-toplevel-property-access */\n+\n /** Called to format a runtime error */\n export function formatRuntimeError(code: RuntimeErrorCode, message: string): string {\n   const fullCode = code ? `NG0${code}: ` : '';\n-  return `${fullCode}${message}`;\n+\n+  let errorMessage = `${fullCode}${message}`;\n+\n+  // Some runtime errors are still thrown without `ngDevMode` (for example\n+  // `throwProviderNotFoundError`), so we add `ngDevMode` check here to avoid pulling\n+  // `RUNTIME_ERRORS_WITH_GUIDES` symbol into prod bundles.\n+  // TODO: revisit all instances where `RuntimeError` is thrown and see if `ngDevMode` can be added\n+  // there instead to tree-shake more devmode-only code (and eventually remove `ngDevMode` check\n+  // from this code).\n+  if (ngDevMode && RUNTIME_ERRORS_WITH_GUIDES.has(code)) {\n+    errorMessage = `${errorMessage}. Find more at ${ERROR_DETAILS_PAGE_BASE_URL}/NG0${code}`;\n+  }\n+  return errorMessage;\n }"
        },
        {
            "sha": "fe1fe122c8c4646c9d5d042cbc2b4034f621728c",
            "filename": "packages/core/test/acceptance/di_spec.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 4,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/bfdca0b87f3071900e6d099d9e15c1fee7d0bf68/packages%2Fcore%2Ftest%2Facceptance%2Fdi_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/bfdca0b87f3071900e6d099d9e15c1fee7d0bf68/packages%2Fcore%2Ftest%2Facceptance%2Fdi_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fdi_spec.ts?ref=bfdca0b87f3071900e6d099d9e15c1fee7d0bf68",
            "patch": "@@ -617,7 +617,8 @@ describe('di', () => {\n \n           TestBed.configureTestingModule({declarations: [DirectiveA, DirectiveB, MyComp]});\n           expect(() => TestBed.createComponent(MyComp))\n-              .toThrowError('NG0200: Circular dependency in DI detected for DirectiveA');\n+              .toThrowError(\n+                  'NG0200: Circular dependency in DI detected for DirectiveA. Find more at https://angular.io/errors/NG0200');\n         });\n \n     onlyInIvy('Ivy has different error message for circular dependency')\n@@ -633,7 +634,8 @@ describe('di', () => {\n \n           TestBed.configureTestingModule({declarations: [DirectiveA, DirectiveB, MyComp]});\n           expect(() => TestBed.createComponent(MyComp))\n-              .toThrowError('NG0200: Circular dependency in DI detected for DirectiveA');\n+              .toThrowError(\n+                  'NG0200: Circular dependency in DI detected for DirectiveA. Find more at https://angular.io/errors/NG0200');\n         });\n \n     describe('flags', () => {\n@@ -1779,7 +1781,8 @@ describe('di', () => {\n \n               TestBed.configureTestingModule({declarations: [DirectiveString, MyComp, MyApp]});\n               expect(() => TestBed.createComponent(MyApp))\n-                  .toThrowError('NG0201: No provider for String found in NodeInjector');\n+                  .toThrowError(\n+                      'NG0201: No provider for String found in NodeInjector. Find more at https://angular.io/errors/NG0201');\n             });\n \n         onlyInIvy('Ivy has different error message when dependency is not found')\n@@ -1859,7 +1862,8 @@ describe('di', () => {\n \n               TestBed.configureTestingModule({declarations: [DirectiveComp, MyComp, MyApp]});\n               expect(() => TestBed.createComponent(MyApp))\n-                  .toThrowError('NG0201: No provider for MyApp found in NodeInjector');\n+                  .toThrowError(\n+                      'NG0201: No provider for MyApp found in NodeInjector. Find more at https://angular.io/errors/NG0201');\n             });\n \n         describe('regression', () => {"
        },
        {
            "sha": "9e2d88d4003eebd3227f3df06bf1ce56c294cfb7",
            "filename": "packages/core/test/linker/view_injector_integration_spec.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 5,
            "changes": 15,
            "blob_url": "https://github.com/angular/angular/blob/bfdca0b87f3071900e6d099d9e15c1fee7d0bf68/packages%2Fcore%2Ftest%2Flinker%2Fview_injector_integration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/bfdca0b87f3071900e6d099d9e15c1fee7d0bf68/packages%2Fcore%2Ftest%2Flinker%2Fview_injector_integration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Flinker%2Fview_injector_integration_spec.ts?ref=bfdca0b87f3071900e6d099d9e15c1fee7d0bf68",
            "patch": "@@ -628,7 +628,8 @@ describe('View injector', () => {\n         .it('should not instantiate a directive with cyclic dependencies', () => {\n           TestBed.configureTestingModule({declarations: [CycleDirective]});\n           expect(() => createComponent('<div cycleDirective></div>'))\n-              .toThrowError('NG0200: Circular dependency in DI detected for CycleDirective');\n+              .toThrowError(\n+                  'NG0200: Circular dependency in DI detected for CycleDirective. Find more at https://angular.io/errors/NG0200');\n         });\n \n     obsoleteInIvy('This error is no longer generated by the compiler')\n@@ -661,7 +662,8 @@ describe('View injector', () => {\n                   SimpleComponent, {set: {template: '<div needsServiceFromHost><div>'}});\n \n               expect(() => createComponent('<div simpleComponent></div>'))\n-                  .toThrowError('NG0201: No provider for service found in NodeInjector');\n+                  .toThrowError(\n+                      'NG0201: No provider for service found in NodeInjector. Find more at https://angular.io/errors/NG0201');\n             });\n \n     obsoleteInIvy('This error is no longer generated by the compiler')\n@@ -694,7 +696,8 @@ describe('View injector', () => {\n                   SimpleComponent, {set: {template: '<div needsServiceFromHost><div>'}});\n \n               expect(() => createComponent('<div simpleComponent someOtherDirective></div>'))\n-                  .toThrowError('NG0201: No provider for service found in NodeInjector');\n+                  .toThrowError(\n+                      'NG0201: No provider for service found in NodeInjector. Find more at https://angular.io/errors/NG0201');\n             });\n \n     obsoleteInIvy('This error is no longer generated by the compiler')\n@@ -717,7 +720,8 @@ describe('View injector', () => {\n               expect(\n                   () => createComponent(\n                       '<div simpleDirective><div needsDirectiveFromSelf></div></div>'))\n-                  .toThrowError('NG0201: No provider for SimpleDirective found in NodeInjector');\n+                  .toThrowError(\n+                      'NG0201: No provider for SimpleDirective found in NodeInjector. Find more at https://angular.io/errors/NG0201');\n             });\n \n     it('should instantiate directives that depend on other directives', fakeAsync(() => {\n@@ -779,7 +783,8 @@ describe('View injector', () => {\n               TestBed.overrideComponent(\n                   SimpleComponent, {set: {template: '<div needsDirectiveFromHost></div>'}});\n               expect(() => createComponent('<div simpleComponent simpleDirective></div>'))\n-                  .toThrowError('NG0201: No provider for SimpleDirective found in NodeInjector');\n+                  .toThrowError(\n+                      'NG0201: No provider for SimpleDirective found in NodeInjector. Find more at https://angular.io/errors/NG0201');\n             });\n \n     it('should allow to use the NgModule injector from a root ViewContainerRef.parentInjector',"
        },
        {
            "sha": "fe97b4d767de8eeafa352265c5cd9ad12a8a5881",
            "filename": "packages/core/test/render3/di_spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/bfdca0b87f3071900e6d099d9e15c1fee7d0bf68/packages%2Fcore%2Ftest%2Frender3%2Fdi_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/bfdca0b87f3071900e6d099d9e15c1fee7d0bf68/packages%2Fcore%2Ftest%2Frender3%2Fdi_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Fdi_spec.ts?ref=bfdca0b87f3071900e6d099d9e15c1fee7d0bf68",
            "patch": "@@ -107,7 +107,9 @@ describe('di', () => {\n           (DirA as any)['__NG_ELEMENT_ID__'] = 1;\n           (DirC as any)['__NG_ELEMENT_ID__'] = 257;\n           new ComponentFixture(App);\n-        }).toThrowError('NG0201: No provider for DirB found in NodeInjector');\n+        })\n+            .toThrowError(\n+                'NG0201: No provider for DirB found in NodeInjector. Find more at https://angular.io/errors/NG0201');\n       });\n     });\n   });"
        }
    ],
    "stats": {
        "total": 66,
        "additions": 54,
        "deletions": 12
    }
}