{
    "author": "josephperrott",
    "message": "refactor(zone.js): rename BlacklistedStackFrames to InternalZoneJsStackFrames (#38978)\n\nBlacklistedStackFrames to InternalZoneJsStackFrames along with other related\nsymbols renamed with the same changes (with appropriate casing style).\n\nPR Close #38978",
    "sha": "cb7164a236e6614d357680f1b3b6e93732a00645",
    "files": [
        {
            "sha": "7af365f72dde2265fe72a6a5ea395abe274b1c24",
            "filename": "packages/zone.js/MODULE.md",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/cb7164a236e6614d357680f1b3b6e93732a00645/packages%2Fzone.js%2FMODULE.md",
            "raw_url": "https://github.com/angular/angular/raw/cb7164a236e6614d357680f1b3b6e93732a00645/packages%2Fzone.js%2FMODULE.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2FMODULE.md?ref=cb7164a236e6614d357680f1b3b6e93732a00645",
            "patch": "@@ -102,7 +102,7 @@ This package will provide following functionality.\n \n      without `zone-error` patch, the example above will output `false`, with the patch, the reuslt will be `true`.\n \n-  2. BlacklistZoneStackFrames: remove zone.js stack from `stackTrace`, and add `zone`  information. Without this patch, a lot of `zone.js` invocation stack will be shown\n+  2. ZoneJsInternalStackFrames: remove zone.js stack from `stackTrace`, and add `zone`  information. Without this patch, a lot of `zone.js` invocation stack will be shown\n      in stack frames.\n \n     ```\n@@ -123,18 +123,18 @@ This package will provide following functionality.\n      ```\n \n   The second feature will slow down the `Error` performance, so `zone.js` provide a flag to let you be able to control the behavior.\n-  The flag is `__Zone_Error_BlacklistedStackFrames_policy`. And the available options is:\n+  The flag is `__Zone_Error_ZoneJsInternalStackFrames_policy`. And the available options is:\n \n     1. default: this is the default one, if you load `zone.js/dist/zone-error` without\n-     setting the flag, `default` will be used, and `BlackListStackFrames` will be available\n+     setting the flag, `default` will be used, and `ZoneJsInternalStackFrames` will be available\n      when `new Error()`, you can get a `error.stack`  which is `zone stack free`. But this\n      will slow down `new Error()` a little bit.\n \n-    2. disable: this will disable `BlackListZoneStackFrame` feature, and if you load\n+    2. disable: this will disable `ZoneJsInternalStackFrames` feature, and if you load\n      `zone.js/dist/zone-error`, you will only get a `wrapped Error` which can handle\n       `Error inherit` issue.\n \n-    3. lazy: this is a feature to let you be able to get `BlackListZoneStackFrame` feature,\n+    3. lazy: this is a feature to let you be able to get `ZoneJsInternalStackFrames` feature,\n      but not impact performance. But as a trade off, you can't get the `zone free stack\n      frames` by access `error.stack`. You can only get it by access `error.zoneAwareStack`.\n "
        },
        {
            "sha": "8f51b571ce0994bf345c51b2f9e33427cec8357f",
            "filename": "packages/zone.js/lib/common/error-rewrite.ts",
            "status": "modified",
            "additions": 25,
            "deletions": 26,
            "changes": 51,
            "blob_url": "https://github.com/angular/angular/blob/cb7164a236e6614d357680f1b3b6e93732a00645/packages%2Fzone.js%2Flib%2Fcommon%2Ferror-rewrite.ts",
            "raw_url": "https://github.com/angular/angular/raw/cb7164a236e6614d357680f1b3b6e93732a00645/packages%2Fzone.js%2Flib%2Fcommon%2Ferror-rewrite.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Flib%2Fcommon%2Ferror-rewrite.ts?ref=cb7164a236e6614d357680f1b3b6e93732a00645",
            "patch": "@@ -34,15 +34,15 @@ Zone.__load_patch('Error', (global: any, Zone: ZoneType, api: _ZonePrivate) => {\n \n   const enum FrameType {\n     /// Skip this frame when printing out stack\n-    blackList,\n+    zoneJsInternal,\n     /// This frame marks zone transition\n     transition\n   }\n \n-  const blacklistedStackFramesSymbol = api.symbol('blacklistedStackFrames');\n+  const zoneJsInternalStackFramesSymbol = api.symbol('zoneJsInternalStackFrames');\n   const NativeError = global[api.symbol('Error')] = global['Error'];\n   // Store the frames which should be removed from the stack frames\n-  const blackListedStackFrames: {[frame: string]: FrameType} = {};\n+  const zoneJsInternalStackFrames: {[frame: string]: FrameType} = {};\n   // We must find the frame where Error was created, otherwise we assume we don't understand stack\n   let zoneAwareFrame1: string;\n   let zoneAwareFrame2: string;\n@@ -53,9 +53,10 @@ Zone.__load_patch('Error', (global: any, Zone: ZoneType, api: _ZonePrivate) => {\n   global['Error'] = ZoneAwareError;\n   const stackRewrite = 'stackRewrite';\n \n-  type BlackListedStackFramesPolicy = 'default'|'disable'|'lazy';\n-  const blackListedStackFramesPolicy: BlackListedStackFramesPolicy =\n-      global['__Zone_Error_BlacklistedStackFrames_policy'] || 'default';\n+  type ZoneJsInternalStackFramesPolicy = 'default'|'disable'|'lazy';\n+  const zoneJsInternalStackFramesPolicy: ZoneJsInternalStackFramesPolicy =\n+      global['__Zone_Error_BlacklistedStackFrames_policy'] ||\n+      global['__Zone_Error_ZoneJsInternalStackFrames_policy'] || 'default';\n \n   interface ZoneFrameName {\n     zoneName: string;\n@@ -88,8 +89,8 @@ Zone.__load_patch('Error', (global: any, Zone: ZoneType, api: _ZonePrivate) => {\n     for (; i < frames.length && zoneFrame; i++) {\n       let frame = frames[i];\n       if (frame.trim()) {\n-        switch (blackListedStackFrames[frame]) {\n-          case FrameType.blackList:\n+        switch (zoneJsInternalStackFrames[frame]) {\n+          case FrameType.zoneJsInternal:\n             frames.splice(i, 1);\n             i--;\n             break;\n@@ -124,10 +125,10 @@ Zone.__load_patch('Error', (global: any, Zone: ZoneType, api: _ZonePrivate) => {\n     // Process the stack trace and rewrite the frames.\n     if ((ZoneAwareError as any)[stackRewrite] && originalStack) {\n       let zoneFrame = api.currentZoneFrame();\n-      if (blackListedStackFramesPolicy === 'lazy') {\n+      if (zoneJsInternalStackFramesPolicy === 'lazy') {\n         // don't handle stack trace now\n         (error as any)[api.symbol('zoneFrameNames')] = buildZoneFrameNames(zoneFrame);\n-      } else if (blackListedStackFramesPolicy === 'default') {\n+      } else if (zoneJsInternalStackFramesPolicy === 'default') {\n         try {\n           error.stack = error.zoneAwareStack = buildZoneAwareStackFrames(originalStack, zoneFrame);\n         } catch (e) {\n@@ -156,14 +157,13 @@ Zone.__load_patch('Error', (global: any, Zone: ZoneType, api: _ZonePrivate) => {\n \n   // Copy the prototype so that instanceof operator works as expected\n   ZoneAwareError.prototype = NativeError.prototype;\n-  (ZoneAwareError as any)[blacklistedStackFramesSymbol] = blackListedStackFrames;\n+  (ZoneAwareError as any)[zoneJsInternalStackFramesSymbol] = zoneJsInternalStackFrames;\n   (ZoneAwareError as any)[stackRewrite] = false;\n \n   const zoneAwareStackSymbol = api.symbol('zoneAwareStack');\n \n-  // try to define zoneAwareStack property when blackListed\n-  // policy is delay\n-  if (blackListedStackFramesPolicy === 'lazy') {\n+  // try to define zoneAwareStack property when zoneJsInternal frames policy is delay\n+  if (zoneJsInternalStackFramesPolicy === 'lazy') {\n     Object.defineProperty(ZoneAwareError.prototype, 'zoneAwareStack', {\n       configurable: true,\n       enumerable: true,\n@@ -253,12 +253,11 @@ Zone.__load_patch('Error', (global: any, Zone: ZoneType, api: _ZonePrivate) => {\n     }\n   });\n \n-  if (blackListedStackFramesPolicy === 'disable') {\n-    // don't need to run detectZone to populate\n-    // blacklisted stack frames\n+  if (zoneJsInternalStackFramesPolicy === 'disable') {\n+    // don't need to run detectZone to populate zoneJs internal stack frames\n     return;\n   }\n-  // Now we need to populate the `blacklistedStackFrames` as well as find the\n+  // Now we need to populate the `zoneJsInternalStackFrames` as well as find the\n   // run/runGuarded/runTask frames. This is done by creating a detect zone and then threading\n   // the execution through all of the above methods so that we can look at the stack trace and\n   // find the frames of interest.\n@@ -296,7 +295,7 @@ Zone.__load_patch('Error', (global: any, Zone: ZoneType, api: _ZonePrivate) => {\n                       frame.replace('ZoneAwareError', 'Error.ZoneAwareError');\n                 }\n               }\n-              blackListedStackFrames[zoneAwareFrame2] = FrameType.blackList;\n+              zoneJsInternalStackFrames[zoneAwareFrame2] = FrameType.zoneJsInternal;\n             }\n             if (fnName.indexOf('runGuarded') !== -1) {\n               runGuardedFrame = true;\n@@ -305,9 +304,9 @@ Zone.__load_patch('Error', (global: any, Zone: ZoneType, api: _ZonePrivate) => {\n             } else if (fnName.indexOf('run') !== -1) {\n               runFrame = true;\n             } else {\n-              frameType = FrameType.blackList;\n+              frameType = FrameType.zoneJsInternal;\n             }\n-            blackListedStackFrames[frame] = frameType;\n+            zoneJsInternalStackFrames[frame] = frameType;\n             // Once we find all of the frames we can stop looking.\n             if (runFrame && runGuardedFrame && runTaskFrame) {\n               (ZoneAwareError as any)[stackRewrite] = true;\n@@ -320,7 +319,7 @@ Zone.__load_patch('Error', (global: any, Zone: ZoneType, api: _ZonePrivate) => {\n     }\n   }) as Zone;\n   // carefully constructor a stack frame which contains all of the frames of interest which\n-  // need to be detected and blacklisted.\n+  // need to be detected and marked as an internal zoneJs frame.\n \n   const childDetectZone = detectZone.fork({\n     name: 'child',\n@@ -351,13 +350,13 @@ Zone.__load_patch('Error', (global: any, Zone: ZoneType, api: _ZonePrivate) => {\n     childDetectZone.runGuarded(() => {\n       const fakeTransitionTo = () => {};\n       childDetectZone.scheduleEventTask(\n-          blacklistedStackFramesSymbol,\n+          zoneJsInternalStackFramesSymbol,\n           () => {\n             childDetectZone.scheduleMacroTask(\n-                blacklistedStackFramesSymbol,\n+                zoneJsInternalStackFramesSymbol,\n                 () => {\n                   childDetectZone.scheduleMicroTask(\n-                      blacklistedStackFramesSymbol,\n+                      zoneJsInternalStackFramesSymbol,\n                       () => {\n                         throw new Error();\n                       },\n@@ -367,7 +366,7 @@ Zone.__load_patch('Error', (global: any, Zone: ZoneType, api: _ZonePrivate) => {\n                         t.invoke();\n                       });\n                   childDetectZone.scheduleMicroTask(\n-                      blacklistedStackFramesSymbol,\n+                      zoneJsInternalStackFramesSymbol,\n                       () => {\n                         throw Error();\n                       },"
        },
        {
            "sha": "2a9f29a55d182eb3ed2f3f8aea9e718a95d1ab46",
            "filename": "packages/zone.js/test/main.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/cb7164a236e6614d357680f1b3b6e93732a00645/packages%2Fzone.js%2Ftest%2Fmain.ts",
            "raw_url": "https://github.com/angular/angular/raw/cb7164a236e6614d357680f1b3b6e93732a00645/packages%2Fzone.js%2Ftest%2Fmain.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Ftest%2Fmain.ts?ref=cb7164a236e6614d357680f1b3b6e93732a00645",
            "patch": "@@ -19,13 +19,13 @@ __karma__.loaded = function() {};\n let entryPoint = 'browser_entry_point';\n \n if (typeof __karma__ !== 'undefined') {\n-  (window as any)['__Zone_Error_BlacklistedStackFrames_policy'] =\n+  (window as any)['__Zone_Error_ZoneJsInternalStackFrames_policy'] =\n       (__karma__ as any).config.errorpolicy;\n   if ((__karma__ as any).config.entrypoint) {\n     entryPoint = (__karma__ as any).config.entrypoint;\n   }\n } else if (typeof process !== 'undefined') {\n-  (window as any)['__Zone_Error_BlacklistedStackFrames_policy'] = process.env.errorpolicy;\n+  (window as any)['__Zone_Error_ZoneJsInternalStackFrames_policy'] = process.env.errorpolicy;\n   if (process.env.entrypoint) {\n     entryPoint = process.env.entrypoint;\n   }"
        },
        {
            "sha": "e11dfdd13ce4c85558fcb34126a6721d4d132bfd",
            "filename": "packages/zone.js/test/node_error_disable_policy_entry_point.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/cb7164a236e6614d357680f1b3b6e93732a00645/packages%2Fzone.js%2Ftest%2Fnode_error_disable_policy_entry_point.ts",
            "raw_url": "https://github.com/angular/angular/raw/cb7164a236e6614d357680f1b3b6e93732a00645/packages%2Fzone.js%2Ftest%2Fnode_error_disable_policy_entry_point.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Ftest%2Fnode_error_disable_policy_entry_point.ts?ref=cb7164a236e6614d357680f1b3b6e93732a00645",
            "patch": "@@ -6,6 +6,6 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-process.env['errorpolicy'] = (global as any)['__Zone_Error_BlacklistedStackFrames_policy'] =\n+process.env['errorpolicy'] = (global as any)['__Zone_Error_ZoneJsInternalStackFrames_policy'] =\n     'disable';\n import './node_error_entry_point';"
        },
        {
            "sha": "a3602d36b9caa4cc21a51117bd8ddae970e1c16d",
            "filename": "packages/zone.js/test/node_error_entry_point.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/cb7164a236e6614d357680f1b3b6e93732a00645/packages%2Fzone.js%2Ftest%2Fnode_error_entry_point.ts",
            "raw_url": "https://github.com/angular/angular/raw/cb7164a236e6614d357680f1b3b6e93732a00645/packages%2Fzone.js%2Ftest%2Fnode_error_entry_point.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Ftest%2Fnode_error_entry_point.ts?ref=cb7164a236e6614d357680f1b3b6e93732a00645",
            "patch": "@@ -14,7 +14,7 @@ import '../lib/zone';\n import '../lib/common/promise';\n import '../lib/common/to-string';\n \n-process.env['errorpolicy'] = (global as any)['__Zone_Error_BlacklistedStackFrames_policy'] =\n+process.env['errorpolicy'] = (global as any)['__Zone_Error_ZoneJsInternalStackFrames_policy'] =\n     'disable';\n // Setup test environment\n require('@bazel/jasmine').boot();"
        },
        {
            "sha": "acf37d60fa59c16d960b7e43a7135caedbc1dbe7",
            "filename": "packages/zone.js/test/node_error_lazy_policy_entry_point.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/cb7164a236e6614d357680f1b3b6e93732a00645/packages%2Fzone.js%2Ftest%2Fnode_error_lazy_policy_entry_point.ts",
            "raw_url": "https://github.com/angular/angular/raw/cb7164a236e6614d357680f1b3b6e93732a00645/packages%2Fzone.js%2Ftest%2Fnode_error_lazy_policy_entry_point.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Ftest%2Fnode_error_lazy_policy_entry_point.ts?ref=cb7164a236e6614d357680f1b3b6e93732a00645",
            "patch": "@@ -6,5 +6,6 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-process.env['errorpolicy'] = (global as any)['__Zone_Error_BlacklistedStackFrames_policy'] = 'lazy';\n+process.env['errorpolicy'] = (global as any)['__Zone_Error_ZoneJsInternalStackFrames_policy'] =\n+    'lazy';\n import './node_error_entry_point';"
        }
    ],
    "stats": {
        "total": 72,
        "additions": 36,
        "deletions": 36
    }
}