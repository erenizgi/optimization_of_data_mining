{
    "author": "AleksanderBodurri",
    "message": "feat(devtools): disable devtools for production applications",
    "sha": "73dff6f002db87eb44954ea8a1ec9146084be0f0",
    "files": [
        {
            "sha": "d2c98609a224289dbf7d399fbae5f5432ff9d2c9",
            "filename": "projects/ng-devtools-backend/src/lib/client-event-subscribers.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/73dff6f002db87eb44954ea8a1ec9146084be0f0/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fclient-event-subscribers.ts",
            "raw_url": "https://github.com/angular/angular/raw/73dff6f002db87eb44954ea8a1ec9146084be0f0/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fclient-event-subscribers.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fclient-event-subscribers.ts?ref=73dff6f002db87eb44954ea8a1ec9146084be0f0",
            "patch": "@@ -148,11 +148,11 @@ const getRoutes = (messageBus: MessageBus<Events>) => {\n   messageBus.emit('updateRouterTree', [routes]);\n };\n \n-const checkForAngular = (messageBus: MessageBus<Events>, attempt = 0): void => {\n+const checkForAngular = (messageBus: MessageBus<Events>): void => {\n   const ngVersion = getAngularVersion();\n   const appIsIvy = appIsAngularIvy();\n   if (!ngVersion) {\n-    setTimeout(() => checkForAngular(messageBus, attempt + 1), 500);\n+    setTimeout(() => checkForAngular(messageBus), 500);\n     return;\n   }\n   if (appIsIvy) {"
        },
        {
            "sha": "2831d7e2bb5546150445a4b418c5b9bcf2562fe8",
            "filename": "projects/ng-devtools/src/lib/devtools.component.html",
            "status": "modified",
            "additions": 14,
            "deletions": 9,
            "changes": 23,
            "blob_url": "https://github.com/angular/angular/blob/73dff6f002db87eb44954ea8a1ec9146084be0f0/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools.component.html",
            "raw_url": "https://github.com/angular/angular/raw/73dff6f002db87eb44954ea8a1ec9146084be0f0/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools.component.html",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools.component.html?ref=73dff6f002db87eb44954ea8a1ec9146084be0f0",
            "patch": "@@ -1,19 +1,24 @@\n <div class=\"mat-typography mat-app-background\" style=\"height: 100%;\">\n-  <ng-container *ngIf=\"angularExists === true; else errorOrLoad\">\n-    <ng-container *ngIf=\"supportedVersion; else notSupported\">\n-      <div class=\"devtools-wrapper noselect\" [@enterAnimation]>\n+  <ng-container *ngIf=\"angularExists === true; else errorOrLoading\">\n+    <ng-container *ngIf=\"angularIsInDevMode; else angularIsInProdMode\">\n+      <div *ngIf=\"supportedVersion; else notSupported\" class=\"devtools-wrapper noselect\" [@enterAnimation]>\n         <ng-devtools-tabs [angularVersion]=\"angularVersion\"></ng-devtools-tabs>\n       </div>\n+      <ng-template #notSupported>\n+        <p class=\"text-message\">\n+          Angular Devtools only supports Angular versions 9 and above with\n+          <a href=\"https://angular.io/guide/ivy\" target=\"_blank\">ivy</a> enabled.\n+        </p>\n+      </ng-template>\n     </ng-container>\n-    <ng-template #notSupported>\n+    <ng-template #angularIsInProdMode>\n       <p class=\"text-message\">\n-        Angular Devtools only supports Angular versions 9 and above with\n-        <a href=\"https://angular.io/guide/ivy\" target=\"_blank\">ivy</a> enabled.\n+        A production build of Angular was detected. Angular Devtools does not currently support production builds.\n       </p>\n     </ng-template>\n   </ng-container>\n-  <ng-template #errorOrLoad>\n-    <ng-container *ngIf=\"angularExists === false; else load\">\n+  <ng-template #errorOrLoading>\n+    <ng-container *ngIf=\"angularExists === false; else loading\">\n       <p class=\"text-message\">\n         Angular application not detected.\n         <span\n@@ -23,7 +28,7 @@\n         >\n       </p>\n     </ng-container>\n-    <ng-template #load>\n+    <ng-template #loading>\n       <div class=\"initializing\" *ngIf=\"angularExists === null\">\n         <div class=\"loading\"></div>\n       </div>"
        },
        {
            "sha": "d90c5fea7de17b7c1b6759892c4e50c4223328fd",
            "filename": "projects/ng-devtools/src/lib/devtools.component.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 9,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/73dff6f002db87eb44954ea8a1ec9146084be0f0/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/73dff6f002db87eb44954ea8a1ec9146084be0f0/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools.component.ts?ref=73dff6f002db87eb44954ea8a1ec9146084be0f0",
            "patch": "@@ -2,7 +2,7 @@ import { Component, OnInit, OnDestroy } from '@angular/core';\n import { MessageBus, Events } from 'protocol';\n import { interval } from 'rxjs';\n import { animate, style, transition, trigger } from '@angular/animations';\n-import { MatSnackBar } from '@angular/material/snack-bar';\n+import { ThemeService } from './theme-service';\n \n @Component({\n   selector: 'ng-devtools',\n@@ -18,9 +18,13 @@ import { MatSnackBar } from '@angular/material/snack-bar';\n export class DevToolsComponent implements OnInit, OnDestroy {\n   angularExists: boolean | null = null;\n   angularVersion: string | boolean | undefined = undefined;\n+  angularIsInDevMode: boolean = true;\n   ivy: boolean;\n \n-  constructor(private _messageBus: MessageBus<Events>, private _snackBar: MatSnackBar) {}\n+  constructor(\n+    private _messageBus: MessageBus<Events>,\n+    private _themeService: ThemeService // inject to initialize theme watcher\n+  ) {}\n \n   private _interval$ = interval(500).subscribe((attempt) => {\n     if (attempt === 10) {\n@@ -33,14 +37,8 @@ export class DevToolsComponent implements OnInit, OnDestroy {\n     this._messageBus.once('ngAvailability', ({ version, devMode, ivy }) => {\n       this.angularExists = !!version;\n       this.angularVersion = version;\n+      this.angularIsInDevMode = devMode;\n       this.ivy = ivy;\n-      if (!devMode) {\n-        this._snackBar.open(\n-          'Production mode detected. Angular DevTools has limited functionality in production mode.',\n-          '',\n-          { duration: 5000 }\n-        );\n-      }\n       this._interval$.unsubscribe();\n     });\n   }"
        }
    ],
    "stats": {
        "total": 43,
        "additions": 23,
        "deletions": 20
    }
}