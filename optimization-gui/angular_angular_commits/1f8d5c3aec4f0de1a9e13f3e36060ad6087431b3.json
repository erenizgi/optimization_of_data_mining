{
    "author": "josmar-crwdstffng",
    "message": "docs: update per feedback (#44009)\n\nUpdate content per feedback from previous PR.\n\nPR Close #44009",
    "sha": "1f8d5c3aec4f0de1a9e13f3e36060ad6087431b3",
    "files": [
        {
            "sha": "2568c65b31773080e22b89b37e71bea399fae31e",
            "filename": "aio/content/guide/update-to-latest-version.md",
            "status": "modified",
            "additions": 24,
            "deletions": 19,
            "changes": 43,
            "blob_url": "https://github.com/angular/angular/blob/1f8d5c3aec4f0de1a9e13f3e36060ad6087431b3/aio%2Fcontent%2Fguide%2Fupdate-to-latest-version.md",
            "raw_url": "https://github.com/angular/angular/raw/1f8d5c3aec4f0de1a9e13f3e36060ad6087431b3/aio%2Fcontent%2Fguide%2Fupdate-to-latest-version.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fupdate-to-latest-version.md?ref=1f8d5c3aec4f0de1a9e13f3e36060ad6087431b3",
            "patch": "@@ -17,6 +17,7 @@ For information about the deprecation and removal practices of Angular, see [Ang\n *   **Removal of View Engine**\n \n     Requires all applications and libraries to build using Ivy.\n+    See the [Upcoming improvements to Angular library distribution][AngularBlog76c02f782aa4] blog.\n \n *   **Modernization of the Angular Package Format \\(APF\\)**\n \n@@ -25,14 +26,12 @@ For information about the deprecation and removal practices of Angular, see [Ang\n *   **Removal of IE11 Support**\n \n     Removes all support for Microsoft Internet Explorer 11 \\(IE11\\).\n+    See [Issue&nbsp;#41840][GithubAngularAngularIssues41840].\n \n *   **Testbed module teardown**\n \n     Adds the option in `initTestEnvironment` to completely remove test environments from an application.\n-\n-*   **Factory-less `Component` and `NgModule` APIs**\n-\n-    Removes the need for the `ComponentFactoryResolver` API.\n+    See the [Improving Angular tests by enabling Angular testing module teardown][DevThisIsAngularImprovingAngularTestsByEnablingAngularTestingModuleTeardown38kh] article.\n \n *   **`$localize` tagged message strings**\n \n@@ -41,24 +40,24 @@ For information about the deprecation and removal practices of Angular, see [Ang\n *   **Disk Cache**\n \n     Enables the persistent build cache by default for all applications.\n-    See [PR&nbsp;#21545][GithubAngularAngularCliIssues21545].\n+    See [Issue&nbsp;#21545][GithubAngularAngularCliIssues21545].\n \n ### Breaking changes in Angular version 13\n \n {@a breaking-changes}\n \n-|                                                 | Details                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |\n-|:---                                             |:---                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |\n-| [PR&nbsp;#31187][GithubAngularAngularPull31187] | Previously, the default url serializer dropped everything after and including a question mark in query parameters. That is, for a navigation to `/path?q=hello?&other=123`, the query parameters parsed to just `{q: 'hello'}`. This is incorrect, because the URI spec allows for question mark characers in query data. This change now correctly parses the query parameters for `/path?q=hello?&other=123` as `{v: 'hello?', other: '123'}`.                                                                                                                                                                                                                                         |\n-| [PR&nbsp;#41730][GithubAngularAngularPull41730] | The behavior of the `SpyLocation` used by the `RouterTestingModule` has changed to match the behavior of browsers. It no longer emits a `popstate` event when `Location.go` is called. In addition, `simulateHashChange` now triggers *both* a `hashchange` event and a `popstate` event. Tests that use `location.go` and expect the changes to be picked up by the `Router` should migrate to `simulateHashChange`. Each test is different in what it attempts to assert, so there is no single change that works for all tests. Each test that uses the `SpyLocation` to simulate changes in the browser URL should be evaluated on a case-by-case basis.                             |\n-| [PR&nbsp;#42952][GithubAngularAngularPull42952] | A new type called `FormControlStatus` has been introduced, which is a union of all possible status strings for form controls. `AbstractControl.status` has been narrowed from `string` to `FormControlStatus`, and `statusChanges` has been narrowed from `Observable<any>` to `Observable<FormControlStatus>`. Most applications should consume the new types seamlessly. Any breakage caused by this change is likely due to one of the following two problems: <ol><li>The app is comparing <code>AbstractControl.status</code> against a string which is not a valid status.</li><li>The app is using `statusChanges` events as if they were something other than strings.</li></ol> |\n-| [PR&nbsp;#43087][GithubAngularAngularPull43087] | Previously ,`null` and `undefined` inputs for `routerLink` were equivalent to empty string and there was no way to disable the navigation of the link. In addition, the `href` is changed from a property `HostBinding()` to an attribute binding \\(`HostBinding('attr.href')`\\). The effect of this change is that `DebugElement.properties['href']` now returns the `href` value returned by the native element which is the full URL rather than the internal value of the `RouterLink` `href` property.                                                                                                                                                                              |\n-| [PR&nbsp;#43496][GithubAngularAngularPull43496] | The router no longer replaces the browser URL when a new navigation cancels an ongoing navigation. The replacement of the browser URL often caused URL flicker and was only in place to support some AngularJS hybrid applications. Hybrid applications which rely on the presence of `navigationId` on each initial navigation handled by the Angular router should instead subscribe to `NavigationCancel` events and manually perform the `location.replaceState` to add `navigationId` to the Router state.<br />In addition, tests that assert `urlChanges` on the `SpyLocation` should be adjusted to account for the lack of the `replaceState` trigger.                          |\n-| [PR&nbsp;#43507][GithubAngularAngularPull43507] | The `WrappedValue` class is no longer imported from `@angular/core`. This change may result in compile errors or failures at runtime, if outdated libraries are used that rely on `WrappedValue`. Dependancy on `WrappedValue` should be removed since no replacement is available.                                                                                                                                                                                                                                                                                                                                                                                                      |\n-| [PR&nbsp;#43591][GithubAngularAngularPull43591] | It is no longer possible to use `Route.loadChildren` with a string value. The following supporting classes were removed from `@angular/core`: <ul><li><code>NgModuleFactoryLoader</code></li><li><code>SystemJsNgModuleFactoryLoader</code></li></ul> The `@angular/router` package no longer exports the following symbols: <ul><li><code>SpyNgModuleFactoryLoader</code></li><li><code>DeprecatedLoadChildren</code></li></ul> The signature of the `setupTestingRouter` function from `@angular/core/testing` was changed to drop the `NgModuleFactoryLoader` parameter, since an value for that parameter can not be created.                                                        |\n-| [PR&nbsp;#43642][GithubAngularAngularPull43642] | TypeScript versions older than `4.4.2` are no longer supported.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n-| [PR&nbsp;#43668][GithubAngularAngularPull43668] | The return type of `SwUpdate#activateUpdate` and `SwUpdate#checkForUpdate` changed to `Promise<boolean>`.<br />Although unlikely, this change may cause TypeScript type-checking to fail in some cases. If necessary, update your types to account for the new return type.                                                                                                                                                                                                                                                                                                                                                                                                              |\n-| [PR&nbsp;#43740][GithubAngularAngularPull43740] | NodeJS versions older than `v12.20.0` are no longer supported. The Angular packages now use the NodeJS package exports feature with subpath patterns and requires a NodeJS version above `14.15.0` or `16.10.0`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |\n+|                                                     | Details                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |\n+|:---                                                 |:---                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |\n+| [**PR&nbsp;#43642**][GithubAngularAngularPull43642] | TypeScript versions older than `4.4.2` are no longer supported.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n+| [**PR&nbsp;#43740**][GithubAngularAngularPull43740] | NodeJS versions older than `v12.20.0` are no longer supported. The Angular packages now use the NodeJS package exports feature with subpath patterns and requires a NodeJS version above `14.15.0` or `16.10.0`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |\n+| [PR&nbsp;#31187][GithubAngularAngularPull31187]     | Previously, the default url serializer dropped everything after and including a question mark in query parameters. That is, for a navigation to `/path?q=hello?&other=123`, the query parameters parsed to just `{q: 'hello'}`. This is incorrect, because the URI spec allows for question mark characers in query data. This change now correctly parses the query parameters for `/path?q=hello?&other=123` as `{v: 'hello?', other: '123'}`.                                                                                                                                                                                                                                         |\n+| [PR&nbsp;#41730][GithubAngularAngularPull41730]     | The behavior of the `SpyLocation` used by the `RouterTestingModule` has changed to match the behavior of browsers. It no longer emits a `popstate` event when `Location.go` is called. In addition, `simulateHashChange` now triggers *both* a `hashchange` event and a `popstate` event. Tests that use `location.go` and expect the changes to be picked up by the `Router` should migrate to `simulateHashChange`. Each test is different in what it attempts to assert, so there is no single change that works for all tests. Each test that uses the `SpyLocation` to simulate changes in the browser URL should be evaluated on a case-by-case basis.                             |\n+| [PR&nbsp;#42952][GithubAngularAngularPull42952]     | A new type called `FormControlStatus` has been introduced, which is a union of all possible status strings for form controls. `AbstractControl.status` has been narrowed from `string` to `FormControlStatus`, and `statusChanges` has been narrowed from `Observable<any>` to `Observable<FormControlStatus>`. Most applications should consume the new types seamlessly. Any breakage caused by this change is likely due to one of the following two problems: <ol><li>The app is comparing <code>AbstractControl.status</code> against a string which is not a valid status.</li><li>The app is using `statusChanges` events as if they were something other than strings.</li></ol> |\n+| [PR&nbsp;#43087][GithubAngularAngularPull43087]     | Previously ,`null` and `undefined` inputs for `routerLink` were equivalent to empty string and there was no way to disable the navigation of the link. In addition, the `href` is changed from a property `HostBinding()` to an attribute binding \\(`HostBinding('attr.href')`\\). The effect of this change is that `DebugElement.properties['href']` now returns the `href` value returned by the native element which is the full URL rather than the internal value of the `RouterLink` `href` property.                                                                                                                                                                              |\n+| [PR&nbsp;#43496][GithubAngularAngularPull43496]     | The router no longer replaces the browser URL when a new navigation cancels an ongoing navigation. The replacement of the browser URL often caused URL flicker and was only in place to support some AngularJS hybrid applications. Hybrid applications which rely on the presence of `navigationId` on each initial navigation handled by the Angular router should instead subscribe to `NavigationCancel` events and manually perform the `location.replaceState` to add `navigationId` to the Router state.<br />In addition, tests that assert `urlChanges` on the `SpyLocation` should be adjusted to account for the lack of the `replaceState` trigger.                          |\n+| [PR&nbsp;#43507][GithubAngularAngularPull43507]     | The `WrappedValue` class is no longer imported from `@angular/core`. This change may result in compile errors or failures at runtime, if outdated libraries are used that rely on `WrappedValue`. Dependancy on `WrappedValue` should be removed since no replacement is available.                                                                                                                                                                                                                                                                                                                                                                                                      |\n+| [PR&nbsp;#43591][GithubAngularAngularPull43591]     | It is no longer possible to use `Route.loadChildren` with a string value. The following supporting classes were removed from `@angular/core`: <ul><li><code>NgModuleFactoryLoader</code></li><li><code>SystemJsNgModuleFactoryLoader</code></li></ul> The `@angular/router` package no longer exports the following symbols: <ul><li><code>SpyNgModuleFactoryLoader</code></li><li><code>DeprecatedLoadChildren</code></li></ul> The signature of the `setupTestingRouter` function from `@angular/core/testing` was changed to drop the `NgModuleFactoryLoader` parameter, since an value for that parameter can not be created.                                                        |\n+| [PR&nbsp;#43668][GithubAngularAngularPull43668]     | The return type of `SwUpdate#activateUpdate` and `SwUpdate#checkForUpdate` changed to `Promise<boolean>`.<br />Although unlikely, this change may cause TypeScript type-checking to fail in some cases. If necessary, update your types to account for the new return type.                                                                                                                                                                                                                                                                                                                                                                                                              |\n \n ### New deprecations\n \n@@ -113,7 +112,13 @@ For information about the deprecation and removal practices of Angular, see [Ang\n \n <!-- external links -->\n \n-[AngularUpdateMain]: https://update.angular.io \" Angular Update Guide | Angular\"\n+[AngularBlog76c02f782aa4]: https://blog.angular.io/76c02f782aa4 \"Upcoming improvements to Angular library distribution | Angular Blog\"\n+\n+[AngularUpdateMain]: https://update.angular.io \" Angular Update Guide\"\n+\n+[DevThisIsAngularImprovingAngularTestsByEnablingAngularTestingModuleTeardown38kh]: https://dev.to/this-is-angular/improving-angular-tests-by-enabling-angular-testing-module-teardown-38kh \"Improving Angular tests by enabling Angular testing module teardown | This is Angular | DEV Community\"\n+\n+[GithubAngularAngularIssues41840]: https://github.com/angular/angular/issues/41840 \"RFC: Internet Explorer 11 support deprecation and removal #41840 | angular/angular | GitHub\"\n \n [GithubAngularAngularPull31187]: https://github.com/angular/angular/pull/31187 \"fix(router): Allow question marks in query param values #31187 | angular/angular | GitHub\"\n [GithubAngularAngularPull41730]: https://github.com/angular/angular/pull/41730 \"fix(common): synchronise location mock behavior with the navigators #41730 | angular/angular | GitHub\"\n@@ -130,4 +135,4 @@ For information about the deprecation and removal practices of Angular, see [Ang\n \n <!-- end links -->\n \n-@reviewed 2021-10-28\n+@reviewed 2021-11-01"
        },
        {
            "sha": "208dbc6b2fa7def00cd9dc6ffb046a2e34b9d04a",
            "filename": "aio/content/guide/using-libraries.md",
            "status": "modified",
            "additions": 59,
            "deletions": 46,
            "changes": 105,
            "blob_url": "https://github.com/angular/angular/blob/1f8d5c3aec4f0de1a9e13f3e36060ad6087431b3/aio%2Fcontent%2Fguide%2Fusing-libraries.md",
            "raw_url": "https://github.com/angular/angular/raw/1f8d5c3aec4f0de1a9e13f3e36060ad6087431b3/aio%2Fcontent%2Fguide%2Fusing-libraries.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fusing-libraries.md?ref=1f8d5c3aec4f0de1a9e13f3e36060ad6087431b3",
            "patch": "@@ -1,17 +1,20 @@\n-# Use published libraries\n+# Usage of Angular libraries published to npm\n \n-When building Angular applications you can take advantage of sophisticated first-party libraries, such as [Angular Material][AngularMaterialMain], as well as rich ecosystem of third-party libraries.\n-See the [Angular Resources][AioResources] page for links to the most popular ones.\n+When you build your Angular application, take advantage of sophisticated first-party libraries, as well as rich ecosystem of third-party libraries.\n+[Angular Material][AngularMaterialMain] is an example of a sophisticated first-party library.\n+For links to the most popular libraries, see [Angular Resources][AioResources].\n \n ## Install libraries\n \n Libraries are published as [npm packages][AioGuideNpmPackages], usually together with schematics that integrate them with the Angular CLI.\n-To integrate reusable library code into an application, you need to install the package and import the provided functionality where you will use it.\n-For most published Angular libraries, use the Angular CLI `ng add <lib_name>` command.\n+To integrate reusable library code into an application, you need to install the package and import the provided functionality in the location you use it.\n+For most published Angular libraries, use the `ng add <lib_name>` Angular CLI command.\n \n-The `ng add` command uses a package manager such as [npm][NpmjsMain] or [yarn][YarnpkgMain] to install the library package, and invokes schematics that are included in the package to other scaffolding within the project code, such as adding import statements, fonts, and themes.\n+The `ng add` Angular CLI command uses a package manager to install the library package and invokes schematics that are included in the package to other scaffolding within the project code.\n+Examples of package managers include [npm][NpmjsMain] or [yarn][YarnpkgMain].\n+Additional scaffolding within the project code includes import statements, fonts, and themes.\n \n-A published library typically provides a README or other documentation on how to add that lib to your application.\n+A published library typically provides a `README` file or other documentation on how to add that library to your application.\n For an example, see the [Angular Material][AngularMaterialMain] documentation.\n \n ### Library typings\n@@ -29,12 +32,12 @@ npm install @types/d3 --save-dev\n </code-example>\n \n Types defined in a `@types/` package for a library installed into the workspace are automatically added to the TypeScript configuration for the project that uses that library.\n-TypeScript looks for types in the `node_modules/@types` folder by default, so you do not have to add each type package individually.\n+TypeScript looks for types in the `node_modules/@types` directory by default, so you do not have to add each type package individually.\n \n-If a library does not have typings available at `@types/`, you can still use it by manually adding typings for it.\n+If a library does not have typings available at `@types/`, you may use it by manually adding typings for it.\n To do this:\n \n-1.  Create a `typings.d.ts` file in your `src/` folder.\n+1.  Create a `typings.d.ts` file in your `src/` directory.\n     This file is automatically included as global type definition.\n \n 1.  Add the following code in `src/typings.d.ts`:\n@@ -62,14 +65,14 @@ To do this:\n \n     </code-example>\n \n-You can define more typings as needed.\n+Define more typings as needed.\n \n ## Updating libraries\n \n-Libraries can be updated by their publishers, and also have their own dependencies which need to be kept current.\n-To check for updates to your installed libraries, use the [`ng update` command][AioCliUpdate].\n+A library is able to be updated by the publisher, and also has individual dependencies which need to be kept current.\n+To check for updates to your installed libraries, use the [`ng update`][AioCliUpdate] Angular CLI command.\n \n-Use `ng update <lib_name>` to update individual library versions.\n+Use `ng update <lib_name>` Angular CLI command to update individual library versions.\n The Angular CLI checks the latest published release of the library, and if the latest version is newer than your installed version, downloads it and updates your `package.json` to match the latest version.\n \n When you update Angular to a new version, you need to make sure that any libraries you are using are current.\n@@ -78,56 +81,67 @@ See the [Angular Update Guide][AngularUpdateMain] for help.\n \n ## Adding a library to the runtime global scope\n \n-Legacy JavaScript libraries that are not imported into an application can be added to the runtime global scope and loaded as if they were in a script tag.\n-Configure the CLI to do this at build time using the \"scripts\" and \"styles\" options of the build target in the [CLI configuration file][AioGuideWorkspaceConfig], `angular.json`.\n+If a legacy JavaScript library is not imported into an application, you may add it to the runtime global scope and load it as if it was added in a script tag.\n+Configure the Angular CLI to do this at build time using the `scripts` and `styles` options of the build target in the [`angular.json`][AioGuideWorkspaceConfig] workspace build configuration file.\n \n-For example, to use the [Bootstrap 4][GetbootstrapDocs40GettingStartedIntroduction] library, first install the library and its dependencies using the npm package manager:\n+For example, to use the [Bootstrap 4][GetbootstrapDocs40GettingStartedIntroduction] library\n \n-<code-example format=\"shell\" language=\"shell\">\n+1.  Install the library and the associated dependencies using the npm package manager:\n \n-npm install jquery --save\n-npm install popper.js --save\n-npm install bootstrap --save\n+    <code-example format=\"shell\" language=\"shell\">\n \n-</code-example>\n+    npm install jquery --save\n+    npm install popper.js --save\n+    npm install bootstrap --save\n \n-In the `angular.json` configuration file, add the associated script files to the \"scripts\" array:\n+    </code-example>\n \n-<code-example format=\"json\" language=\"json\">\n+1.  In the `angular.json` configuration file, add the associated script files to the `scripts` array:\n \n-\"scripts\": [\n-  \"node_modules/jquery/dist/jquery.slim.js\",\n-  \"node_modules/popper.js/dist/umd/popper.js\",\n-  \"node_modules/bootstrap/dist/js/bootstrap.js\"\n-],\n+    <code-example format=\"json\" language=\"json\">\n \n-</code-example>\n+    \"scripts\": [\n+      \"node_modules/jquery/dist/jquery.slim.js\",\n+      \"node_modules/popper.js/dist/umd/popper.js\",\n+      \"node_modules/bootstrap/dist/js/bootstrap.js\"\n+    ],\n \n-Add the Bootstrap CSS file to the \"styles\" array:\n+    </code-example>\n \n-<code-example format=\"css\" language=\"css\">\n+1.  Add the `bootstrap.css` CSS file to the `styles` array:\n \n-\"styles\": [\n-  \"node_modules/bootstrap/dist/css/bootstrap.css\",\n-  \"src/styles.css\"\n-],\n+    <code-example format=\"css\" language=\"css\">\n \n-</code-example>\n+    \"styles\": [\n+      \"node_modules/bootstrap/dist/css/bootstrap.css\",\n+      \"src/styles.css\"\n+    ],\n+\n+    </code-example>\n \n-Run or restart `ng serve` to see Bootstrap 4 working in your application.\n+1.  Run or restart the `ng serve` Angular CLI command to see Bootstrap 4 work in your application.\n \n ### Using runtime-global libraries inside your app\n \n-Once you import a library using the \"scripts\" array, you should **not** import it using an import statement in your TypeScript code (such as `import * as $ from 'jquery';`).\n-If you do, you will end up with two different copies of the library: one imported as a global library, and one imported as a module.\n-This is especially bad for libraries with plugins, like JQuery, because each copy will have different plugins.\n+After you import a library using the \"scripts\" array, do **not** import it using an import statement in your TypeScript code.\n+The following code snippet is an example import statement.\n \n-Instead, download typings for your library (`npm install @types/jquery`) and follow the library installation steps.\n+<code-example format=\"typscript\" language=\"typescript\">\n+\n+import * as $ from 'jquery';\n+\n+</code-example>\n+\n+If you inport it using import statements, you have two different copies of the library: one imported as a global library, and one imported as a module.\n+This is especially bad for libraries with plugins, like JQuery, because each copy includes different plugins.\n+\n+Instead, run the `npm install @types/jquery` Angular CLI command to download typings for your library and then follow the library installation steps.\n This gives you access to the global variables exposed by that library.\n \n ### Defining typings for runtime-global libraries\n \n If the global library you need to use does not have global typings, you can declare them manually as `any` in `src/typings.d.ts`.\n+\n For example:\n \n <code-example format=\"typescript\" language=\"typescript\">\n@@ -138,7 +152,7 @@ declare var libraryName: any;\n \n Some scripts extend other libraries; for instance with JQuery plugins:\n \n-<code-example>\n+<code-example format=\"typescript\" language=\"typescript\">\n \n $('.test').myPlugin();\n \n@@ -157,7 +171,7 @@ interface JQuery {\n \n If you do not add the interface for the script-defined extension, your IDE shows an error:\n \n-<code-example>\n+<code-example format=\"none\" language=\"none\">\n \n [TS][Error] Property 'myPlugin' does not exist on type 'JQuery'\n \n@@ -168,7 +182,6 @@ If you do not add the interface for the script-defined extension, your IDE shows\n [AioCliUpdate]: cli/update \"ng update | CLI |Angular\"\n \n [AioGuideNpmPackages]: guide/npm-packages \"Workspace npm dependencies | Angular\"\n-\n [AioGuideWorkspaceConfig]: guide/workspace-config \"Angular workspace configuration | Angular\"\n \n [AioResources]: resources \"Explore Angular Resources | Angular\"\n@@ -187,4 +200,4 @@ If you do not add the interface for the script-defined extension, your IDE shows\n \n <!-- end links -->\n \n-@reviewed 2021-10-9\n+@reviewed 2021-11-01"
        }
    ],
    "stats": {
        "total": 148,
        "additions": 83,
        "deletions": 65
    }
}