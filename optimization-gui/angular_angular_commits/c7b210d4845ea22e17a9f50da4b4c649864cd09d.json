{
    "author": "iRealNirmal",
    "message": "refactor(forms): update email validator to inherit abstractValidator (#44545)\n\nModified email validator to inherit abstractValidator.\n\nFor every validato type different PR will be raised as discussed in #42378.\n\nCloses #42267\n\nPR Close #44545",
    "sha": "c7b210d4845ea22e17a9f50da4b4c649864cd09d",
    "files": [
        {
            "sha": "c4ac69d606b6977352e9f6140475ce8732a437bc",
            "filename": "goldens/public-api/forms/forms.md",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/c7b210d4845ea22e17a9f50da4b4c649864cd09d/goldens%2Fpublic-api%2Fforms%2Fforms.md",
            "raw_url": "https://github.com/angular/angular/raw/c7b210d4845ea22e17a9f50da4b4c649864cd09d/goldens%2Fpublic-api%2Fforms%2Fforms.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fforms%2Fforms.md?ref=c7b210d4845ea22e17a9f50da4b4c649864cd09d",
            "patch": "@@ -203,10 +203,12 @@ export class DefaultValueAccessor extends BaseControlValueAccessor implements Co\n }\n \n // @public\n-export class EmailValidator implements Validator {\n-    set email(value: boolean | string);\n-    registerOnValidatorChange(fn: () => void): void;\n-    validate(control: AbstractControl): ValidationErrors | null;\n+export class EmailValidator extends AbstractValidatorDirective {\n+    email: boolean | string;\n+\n+    // (undocumented)\n+    enabled(input: boolean): boolean;\n+    \n     // (undocumented)\n     static ɵdir: i0.ɵɵDirectiveDeclaration<EmailValidator, \"[email][formControlName],[email][formControl],[email][ngModel]\", never, { \"email\": \"email\"; }, {}, never>;\n     // (undocumented)"
        },
        {
            "sha": "dc65a34c08e52ce30b789b824c01ed5c84585b2d",
            "filename": "packages/forms/src/directives/validators.ts",
            "status": "modified",
            "additions": 17,
            "deletions": 23,
            "changes": 40,
            "blob_url": "https://github.com/angular/angular/blob/c7b210d4845ea22e17a9f50da4b4c649864cd09d/packages%2Fforms%2Fsrc%2Fdirectives%2Fvalidators.ts",
            "raw_url": "https://github.com/angular/angular/raw/c7b210d4845ea22e17a9f50da4b4c649864cd09d/packages%2Fforms%2Fsrc%2Fdirectives%2Fvalidators.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Fsrc%2Fdirectives%2Fvalidators.ts?ref=c7b210d4845ea22e17a9f50da4b4c649864cd09d",
            "patch": "@@ -470,35 +470,29 @@ export const EMAIL_VALIDATOR: any = {\n   selector: '[email][formControlName],[email][formControl],[email][ngModel]',\n   providers: [EMAIL_VALIDATOR]\n })\n-export class EmailValidator implements Validator {\n-  private _enabled = false;\n-  private _onChange?: () => void;\n-\n+export class EmailValidator extends AbstractValidatorDirective {\n   /**\n    * @description\n    * Tracks changes to the email attribute bound to this directive.\n    */\n-  @Input()\n-  set email(value: boolean|string) {\n-    this._enabled = value === '' || value === true || value === 'true';\n-    if (this._onChange) this._onChange();\n-  }\n+  @Input() email!: boolean|string;\n \n-  /**\n-   * Method that validates whether an email address is valid.\n-   * Returns the validation result if enabled, otherwise null.\n-   * @nodoc\n-   */\n-  validate(control: AbstractControl): ValidationErrors|null {\n-    return this._enabled ? emailValidator(control) : null;\n-  }\n+  /** @internal */\n+  override inputName = 'email';\n \n-  /**\n-   * Registers a callback function to call when the validator inputs change.\n-   * @nodoc\n-   */\n-  registerOnValidatorChange(fn: () => void): void {\n-    this._onChange = fn;\n+  /** @internal */\n+  override normalizeInput = (input: unknown): boolean =>\n+      // Avoid TSLint requirement to omit semicolon, see\n+      // https://github.com/palantir/tslint/issues/1476\n+      // tslint:disable-next-line:semicolon\n+      (input === '' || input === true || input === 'true');\n+\n+  /** @internal */\n+  override createValidator = (input: number): ValidatorFn => emailValidator;\n+\n+  /** @nodoc */\n+  override enabled(input: boolean): boolean {\n+    return input;\n   }\n }\n "
        }
    ],
    "stats": {
        "total": 50,
        "additions": 23,
        "deletions": 27
    }
}