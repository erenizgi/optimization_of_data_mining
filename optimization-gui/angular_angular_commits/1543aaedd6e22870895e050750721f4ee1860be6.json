{
    "author": "iRealNirmal",
    "message": "refactor(forms): update minlength/maxlength to inherit abstractValidator (#43998)\n\nModified minlength and maxlength validator to inherit abstractValidator\n\nFor every validator type different PR will be raised as discussed in #42378.\n\nCloses #42267\n\nPR Close #43998",
    "sha": "1543aaedd6e22870895e050750721f4ee1860be6",
    "files": [
        {
            "sha": "63773b6ec599a0a0c2f1cc757b9d20939de16bb4",
            "filename": "goldens/public-api/forms/forms.md",
            "status": "modified",
            "additions": 2,
            "deletions": 10,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/1543aaedd6e22870895e050750721f4ee1860be6/goldens%2Fpublic-api%2Fforms%2Fforms.md",
            "raw_url": "https://github.com/angular/angular/raw/1543aaedd6e22870895e050750721f4ee1860be6/goldens%2Fpublic-api%2Fforms%2Fforms.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fforms%2Fforms.md?ref=1543aaedd6e22870895e050750721f4ee1860be6",
            "patch": "@@ -454,14 +454,10 @@ export class FormsModule {\n }\n \n // @public\n-export class MaxLengthValidator implements Validator, OnChanges {\n-    // (undocumented)\n-    enabled(): boolean;\n+export class MaxLengthValidator extends AbstractValidatorDirective implements OnChanges {\n     maxlength: string | number | null;\n     // (undocumented)\n     ngOnChanges(changes: SimpleChanges): void;\n-    registerOnValidatorChange(fn: () => void): void;\n-    validate(control: AbstractControl): ValidationErrors | null;\n     // (undocumented)\n     static ɵdir: i0.ɵɵDirectiveDeclaration<MaxLengthValidator, \"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]\", never, { \"maxlength\": \"maxlength\"; }, {}, never>;\n     // (undocumented)\n@@ -479,14 +475,10 @@ export class MaxValidator extends AbstractValidatorDirective implements OnChange\n }\n \n // @public\n-export class MinLengthValidator implements Validator, OnChanges {\n-    // (undocumented)\n-    enabled(): boolean;\n+export class MinLengthValidator extends AbstractValidatorDirective implements OnChanges {\n     minlength: string | number | null;\n     // (undocumented)\n     ngOnChanges(changes: SimpleChanges): void;\n-    registerOnValidatorChange(fn: () => void): void;\n-    validate(control: AbstractControl): ValidationErrors | null;\n     // (undocumented)\n     static ɵdir: i0.ɵɵDirectiveDeclaration<MinLengthValidator, \"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]\", never, { \"minlength\": \"minlength\"; }, {}, never>;\n     // (undocumented)"
        },
        {
            "sha": "5a4cb229bb3a1a674d18189acc8b8acf179edc33",
            "filename": "packages/forms/src/directives/validators.ts",
            "status": "modified",
            "additions": 21,
            "deletions": 72,
            "changes": 93,
            "blob_url": "https://github.com/angular/angular/blob/1543aaedd6e22870895e050750721f4ee1860be6/packages%2Fforms%2Fsrc%2Fdirectives%2Fvalidators.ts",
            "raw_url": "https://github.com/angular/angular/raw/1543aaedd6e22870895e050750721f4ee1860be6/packages%2Fforms%2Fsrc%2Fdirectives%2Fvalidators.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Fsrc%2Fdirectives%2Fvalidators.ts?ref=1543aaedd6e22870895e050750721f4ee1860be6",
            "patch": "@@ -572,50 +572,24 @@ export const MIN_LENGTH_VALIDATOR: any = {\n   providers: [MIN_LENGTH_VALIDATOR],\n   host: {'[attr.minlength]': 'enabled() ? minlength : null'}\n })\n-export class MinLengthValidator implements Validator, OnChanges {\n-  private _validator: ValidatorFn = nullValidator;\n-  private _onChange?: () => void;\n-\n+export class MinLengthValidator extends AbstractValidatorDirective implements OnChanges {\n   /**\n    * @description\n    * Tracks changes to the minimum length bound to this directive.\n    */\n-  @Input()\n-  minlength!: string|number|null;  // This input is always defined, since the name matches selector.\n-\n-  /** @nodoc */\n-  ngOnChanges(changes: SimpleChanges): void {\n-    if ('minlength' in changes) {\n-      this._createValidator();\n-      if (this._onChange) this._onChange();\n-    }\n-  }\n-\n-  /**\n-   * Method that validates whether the value meets a minimum length requirement.\n-   * Returns the validation result if enabled, otherwise null.\n-   * @nodoc\n-   */\n-  validate(control: AbstractControl): ValidationErrors|null {\n-    return this.enabled() ? this._validator(control) : null;\n-  }\n+  @Input() minlength!: string|number|null;\n+  /** @internal */\n+  override inputName = 'minlength';\n \n-  /**\n-   * Registers a callback function to call when the validator inputs change.\n-   * @nodoc\n-   */\n-  registerOnValidatorChange(fn: () => void): void {\n-    this._onChange = fn;\n-  }\n+  /** @internal */\n+  override normalizeInput = (input: string|number): number => toInteger(input);\n \n-  private _createValidator(): void {\n-    this._validator =\n-        this.enabled() ? minLengthValidator(toInteger(this.minlength!)) : nullValidator;\n-  }\n+  /** @internal */\n+  override createValidator = (minlength: number): ValidatorFn => minLengthValidator(minlength);\n \n   /** @nodoc */\n-  enabled(): boolean {\n-    return this.minlength != null /* both `null` and `undefined` */;\n+  ngOnChanges(changes: SimpleChanges): void {\n+    this.handleChanges(changes);\n   }\n }\n \n@@ -655,49 +629,24 @@ export const MAX_LENGTH_VALIDATOR: any = {\n   providers: [MAX_LENGTH_VALIDATOR],\n   host: {'[attr.maxlength]': 'enabled() ? maxlength : null'}\n })\n-export class MaxLengthValidator implements Validator, OnChanges {\n-  private _validator: ValidatorFn = nullValidator;\n-  private _onChange?: () => void;\n-\n+export class MaxLengthValidator extends AbstractValidatorDirective implements OnChanges {\n   /**\n    * @description\n-   * Tracks changes to the maximum length bound to this directive.\n-   */\n-  @Input()\n-  maxlength!: string|number|null;  // This input is always defined, since the name matches selector.\n-\n-  /** @nodoc */\n-  ngOnChanges(changes: SimpleChanges): void {\n-    if ('maxlength' in changes) {\n-      this._createValidator();\n-      if (this._onChange) this._onChange();\n-    }\n-  }\n-\n-  /**\n-   * Method that validates whether the value exceeds the maximum length requirement.\n-   * @nodoc\n+   * Tracks changes to the minimum length bound to this directive.\n    */\n-  validate(control: AbstractControl): ValidationErrors|null {\n-    return this.enabled() ? this._validator(control) : null;\n-  }\n+  @Input() maxlength!: string|number|null;\n+  /** @internal */\n+  override inputName = 'maxlength';\n \n-  /**\n-   * Registers a callback function to call when the validator inputs change.\n-   * @nodoc\n-   */\n-  registerOnValidatorChange(fn: () => void): void {\n-    this._onChange = fn;\n-  }\n+  /** @internal */\n+  override normalizeInput = (input: string|number): number => toInteger(input);\n \n-  private _createValidator(): void {\n-    this._validator =\n-        this.enabled() ? maxLengthValidator(toInteger(this.maxlength!)) : nullValidator;\n-  }\n+  /** @internal */\n+  override createValidator = (maxlength: number): ValidatorFn => maxLengthValidator(maxlength);\n \n   /** @nodoc */\n-  enabled(): boolean {\n-    return this.maxlength != null /* both `null` and `undefined` */;\n+  ngOnChanges(changes: SimpleChanges): void {\n+    this.handleChanges(changes);\n   }\n }\n "
        }
    ],
    "stats": {
        "total": 105,
        "additions": 23,
        "deletions": 82
    }
}