{
    "author": "gkalpak",
    "message": "build: fix instructions and process for updating Chrome version (#40150)\n\nPreviously, the instructions and process for updating the version of\nChrome ued in tests assumed that there was always going to be a\nChromeDriver version that corresponded to a Chrome version. For example,\nif we wanted to use Chrome v87.0.4272.x, we assumed that there was going\nto be ChromeDriver v87.0.4272.x. It turns out that this is not always\nthe case.\n\nThis commit updates the instructions and process for updating the Chrome\nversion to ensure a valid version of ChromeDriver will be used as well.\n\nPR Close #40150",
    "sha": "de2f73c1317ee5f942a2023af1122953f653dc22",
    "files": [
        {
            "sha": "5e5f19d26e7e0f56d432b5afe23e3754b9b339a0",
            "filename": "dev-infra/browsers/README.md",
            "status": "modified",
            "additions": 15,
            "deletions": 6,
            "changes": 21,
            "blob_url": "https://github.com/angular/angular/blob/de2f73c1317ee5f942a2023af1122953f653dc22/dev-infra%2Fbrowsers%2FREADME.md",
            "raw_url": "https://github.com/angular/angular/raw/de2f73c1317ee5f942a2023af1122953f653dc22/dev-infra%2Fbrowsers%2FREADME.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fbrowsers%2FREADME.md?ref=de2f73c1317ee5f942a2023af1122953f653dc22",
            "patch": "@@ -43,14 +43,23 @@ The process of updating the Chrome or Firefox version is not straightforward, bu\n \n ## Puppeteer\n \n-Visit https://github.com/puppeteer/puppeteer/blob/master/docs/api.md to determine which version of puppeteer corresponds to the version of Chrome desired.\n-Then update `scripts/puppeteer-chrome-versions.js` and all of the puppeteer versions throughout the repo,\n+1. Visit https://github.com/puppeteer/puppeteer/blob/master/docs/api.md to determine which version of puppeteer corresponds to the version of Chrome desired.\n \n-* `package.json`\n-* `aio/package.json`\n-* `aio/tools/examples/shared/package.json`\n+2. Visit https://chromedriver.chromium.org/downloads to determine which version of ChromeDriver should be used for the version of Chrome desired.\n \n-and their corresponding `yarn.lock` files.\n+    > NOTE:\n+    > The version of Chrome does not necessarily correspond exactly with the version of ChromeDriver.\n+    > For example, you might have to use ChromeDriver v87.0.4280.x to drive Chrome v87.0.4272.x.\n+\n+3. Update `scripts/puppeteer-chromedriver-versions.js` to include and entry with the new version of puppeteer as key and the new version of ChromeDriver as value (as determined in the two previous steps).\n+\n+4. Update all of the puppeteer versions throughout the repo:\n+\n+    * `package.json`\n+    * `aio/package.json`\n+    * `aio/tools/examples/shared/package.json`\n+\n+    ...and their corresponding `yarn.lock` files.\n \n ## Firefox\n "
        },
        {
            "sha": "c1a69f58d4c559f3864bb5e8fde4c1cb0ae6573b",
            "filename": "scripts/puppeteer-chromedriver-versions.js",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/angular/angular/blob/de2f73c1317ee5f942a2023af1122953f653dc22/scripts%2Fpuppeteer-chromedriver-versions.js",
            "raw_url": "https://github.com/angular/angular/raw/de2f73c1317ee5f942a2023af1122953f653dc22/scripts%2Fpuppeteer-chromedriver-versions.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/scripts%2Fpuppeteer-chromedriver-versions.js?ref=de2f73c1317ee5f942a2023af1122953f653dc22",
            "previous_filename": "scripts/puppeteer-chrome-versions.js"
        },
        {
            "sha": "28031a5b123f8e7767e75234f17334c8a6686ada",
            "filename": "scripts/webdriver-manager-update.js",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/de2f73c1317ee5f942a2023af1122953f653dc22/scripts%2Fwebdriver-manager-update.js",
            "raw_url": "https://github.com/angular/angular/raw/de2f73c1317ee5f942a2023af1122953f653dc22/scripts%2Fwebdriver-manager-update.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/scripts%2Fwebdriver-manager-update.js?ref=de2f73c1317ee5f942a2023af1122953f653dc22",
            "patch": "@@ -11,13 +11,13 @@\n // where this will require /aio/node_modules/puppeteer\n const puppeteerPkgPath = require.resolve('puppeteer/package.json', {paths: [process.cwd()]});\n const puppeteerVersion = require(puppeteerPkgPath).version;\n-const chromeVersionMap = require('./puppeteer-chrome-versions');\n+const chromedriverVersionMap = require('./puppeteer-chromedriver-versions');\n const spawnSync = require('child_process').spawnSync;\n \n-const version = chromeVersionMap[puppeteerVersion];\n+const version = chromedriverVersionMap[puppeteerVersion];\n if (!version) {\n-  console.error(`[webdriver-manager-update.js] Error: Could not find Chrome version for Puppeteer version '${\n-      puppeteerVersion}' in Chrome/Puppeteer version map. Please update /scripts/puppeteer-chrome-versions.js.`);\n+  console.error(`[webdriver-manager-update.js] Error: Could not find ChromeDriver version for Puppeteer version '${\n+      puppeteerVersion}' in ChromeDriver/Puppeteer version map. Please update /scripts/puppeteer-chromedriver-versions.js.`);\n   process.exit(1);\n }\n "
        }
    ],
    "stats": {
        "total": 29,
        "additions": 19,
        "deletions": 10
    }
}