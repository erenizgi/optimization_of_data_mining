{
    "author": "atscott",
    "message": "test: Update test to not declare component in multiple modules (#44766)\n\nWhen running locally, these integration tests appear to fail because the\ncomponent is declared in many test modules.\n\nPR Close #44766",
    "sha": "37e5196d3882220a77c32ec56ce6ce7d7c512753",
    "files": [
        {
            "sha": "b2abe555cef3ee37d534e5d15018176a67cecabe",
            "filename": "packages/platform-server/test/integration_spec.ts",
            "status": "modified",
            "additions": 18,
            "deletions": 15,
            "changes": 33,
            "blob_url": "https://github.com/angular/angular/blob/37e5196d3882220a77c32ec56ce6ce7d7c512753/packages%2Fplatform-server%2Ftest%2Fintegration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/37e5196d3882220a77c32ec56ce6ce7d7c512753/packages%2Fplatform-server%2Ftest%2Fintegration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-server%2Ftest%2Fintegration_spec.ts?ref=37e5196d3882220a77c32ec56ce6ce7d7c512753",
            "patch": "@@ -10,7 +10,7 @@ import {animate, AnimationBuilder, state, style, transition, trigger} from '@ang\n import {DOCUMENT, isPlatformServer, PlatformLocation, ÉµgetDOM as getDOM} from '@angular/common';\n import {HTTP_INTERCEPTORS, HttpClient, HttpClientModule, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest} from '@angular/common/http';\n import {HttpClientTestingModule, HttpTestingController} from '@angular/common/http/testing';\n-import {ApplicationRef, CompilerFactory, Component, destroyPlatform, getPlatform, HostListener, Inject, Injectable, Input, NgModule, NgZone, PLATFORM_ID, PlatformRef, ViewEncapsulation} from '@angular/core';\n+import {ApplicationRef, CompilerFactory, Component, destroyPlatform, getPlatform, HostBinding, HostListener, Inject, Injectable, Input, NgModule, NgZone, OnInit, PLATFORM_ID, PlatformRef, ViewEncapsulation} from '@angular/core';\n import {inject, waitForAsync} from '@angular/core/testing';\n import {BrowserModule, makeStateKey, Title, TransferState} from '@angular/platform-browser';\n import {BEFORE_APP_SERIALIZED, INITIAL_CONFIG, platformDynamicServer, PlatformState, renderModule, renderModuleFactory, ServerModule, ServerTransferStateModule} from '@angular/platform-server';\n@@ -20,11 +20,16 @@ import {first} from 'rxjs/operators';\n @Component({selector: 'app', template: `Works!`})\n class MyServerApp {\n }\n+@NgModule({\n+  declarations: [MyServerApp],\n+  exports: [MyServerApp],\n+})\n+export class MyServerAppModule {\n+}\n \n @NgModule({\n   bootstrap: [MyServerApp],\n-  declarations: [MyServerApp],\n-  imports: [ServerModule],\n+  imports: [MyServerAppModule, ServerModule],\n })\n class ExampleModule {\n }\n@@ -73,8 +78,8 @@ function asyncRejectRenderHook() {\n \n @NgModule({\n   bootstrap: [MyServerApp],\n-  declarations: [MyServerApp],\n-  imports: [BrowserModule.withServerTransition({appId: 'render-hook'}), ServerModule],\n+  imports:\n+      [MyServerAppModule, BrowserModule.withServerTransition({appId: 'render-hook'}), ServerModule],\n   providers: [\n     {provide: BEFORE_APP_SERIALIZED, useFactory: getTitleRenderHook, multi: true, deps: [DOCUMENT]},\n   ]\n@@ -84,8 +89,8 @@ class RenderHookModule {\n \n @NgModule({\n   bootstrap: [MyServerApp],\n-  declarations: [MyServerApp],\n-  imports: [BrowserModule.withServerTransition({appId: 'render-hook'}), ServerModule],\n+  imports:\n+      [MyServerAppModule, BrowserModule.withServerTransition({appId: 'render-hook'}), ServerModule],\n   providers: [\n     {provide: BEFORE_APP_SERIALIZED, useFactory: getTitleRenderHook, multi: true, deps: [DOCUMENT]},\n     {provide: BEFORE_APP_SERIALIZED, useValue: exceptionRenderHook, multi: true},\n@@ -97,8 +102,8 @@ class MultiRenderHookModule {\n \n @NgModule({\n   bootstrap: [MyServerApp],\n-  declarations: [MyServerApp],\n-  imports: [BrowserModule.withServerTransition({appId: 'render-hook'}), ServerModule],\n+  imports:\n+      [MyServerAppModule, BrowserModule.withServerTransition({appId: 'render-hook'}), ServerModule],\n   providers: [\n     {\n       provide: BEFORE_APP_SERIALIZED,\n@@ -112,8 +117,8 @@ class AsyncRenderHookModule {\n }\n @NgModule({\n   bootstrap: [MyServerApp],\n-  declarations: [MyServerApp],\n-  imports: [BrowserModule.withServerTransition({appId: 'render-hook'}), ServerModule],\n+  imports:\n+      [MyServerAppModule, BrowserModule.withServerTransition({appId: 'render-hook'}), ServerModule],\n   providers: [\n     {provide: BEFORE_APP_SERIALIZED, useFactory: getMetaRenderHook, multi: true, deps: [DOCUMENT]},\n     {\n@@ -235,8 +240,7 @@ class ExampleStylesModule {\n \n @NgModule({\n   bootstrap: [MyServerApp],\n-  declarations: [MyServerApp],\n-  imports: [ServerModule, HttpClientModule, HttpClientTestingModule],\n+  imports: [MyServerAppModule, ServerModule, HttpClientModule, HttpClientTestingModule],\n })\n export class HttpClientExampleModule {\n }\n@@ -252,8 +256,7 @@ export class MyHttpInterceptor implements HttpInterceptor {\n \n @NgModule({\n   bootstrap: [MyServerApp],\n-  declarations: [MyServerApp],\n-  imports: [ServerModule, HttpClientModule, HttpClientTestingModule],\n+  imports: [MyServerAppModule, ServerModule, HttpClientModule, HttpClientTestingModule],\n   providers: [\n     {provide: HTTP_INTERCEPTORS, multi: true, useClass: MyHttpInterceptor},\n   ],"
        }
    ],
    "stats": {
        "total": 33,
        "additions": 18,
        "deletions": 15
    }
}