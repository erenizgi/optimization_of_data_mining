{
    "author": "josephperrott",
    "message": "fix(dev-infra): properly tag github releases as prerelease as appropriate (#40999)\n\nPreviously all github releases created by the release tooling tagged\nreleases as `latest`. Instead releases which are created for the `next`\ntag on NPM should be tagged as `prerelease` for github.\n\nPR Close #40999",
    "sha": "29043d9858f79bd872ce9905bb4b87706769eb89",
    "files": [
        {
            "sha": "2df105d26e0fcbe96501cd07d6796b5a9fb02eed",
            "filename": "dev-infra/ng-dev.js",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/29043d9858f79bd872ce9905bb4b87706769eb89/dev-infra%2Fng-dev.js",
            "raw_url": "https://github.com/angular/angular/raw/29043d9858f79bd872ce9905bb4b87706769eb89/dev-infra%2Fng-dev.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fng-dev.js?ref=29043d9858f79bd872ce9905bb4b87706769eb89",
            "patch": "@@ -5918,12 +5918,12 @@ class ReleaseAction {\n      * Creates a Github release for the specified version in the configured project.\n      * The release is created by tagging the specified commit SHA.\n      */\n-    _createGithubReleaseForVersion(newVersion, versionBumpCommitSha) {\n+    _createGithubReleaseForVersion(newVersion, versionBumpCommitSha, prerelease) {\n         return tslib.__awaiter(this, void 0, void 0, function* () {\n             const tagName = newVersion.format();\n             yield this.git.github.git.createRef(Object.assign(Object.assign({}, this.git.remoteParams), { ref: `refs/tags/${tagName}`, sha: versionBumpCommitSha }));\n             info(green(`  ✓   Tagged v${newVersion} release upstream.`));\n-            yield this.git.github.repos.createRelease(Object.assign(Object.assign({}, this.git.remoteParams), { name: `v${newVersion}`, tag_name: tagName }));\n+            yield this.git.github.repos.createRelease(Object.assign(Object.assign({}, this.git.remoteParams), { name: `v${newVersion}`, tag_name: tagName, prerelease }));\n             info(green(`  ✓   Created v${newVersion} release in Github.`));\n         });\n     }\n@@ -5955,7 +5955,7 @@ class ReleaseAction {\n             // Verify the packages built are the correct version.\n             yield this._verifyPackageVersions(newVersion, builtPackages);\n             // Create a Github release for the new version.\n-            yield this._createGithubReleaseForVersion(newVersion, versionBumpCommitSha);\n+            yield this._createGithubReleaseForVersion(newVersion, versionBumpCommitSha, npmDistTag === 'next');\n             // Walk through all built packages and publish them to NPM.\n             for (const builtPackage of builtPackages) {\n                 yield this._publishBuiltPackageToNpm(builtPackage, npmDistTag);"
        },
        {
            "sha": "af50f41a114d1bf857ceba93a4af17c3e20b9acb",
            "filename": "dev-infra/release/publish/actions.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 2,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/29043d9858f79bd872ce9905bb4b87706769eb89/dev-infra%2Frelease%2Fpublish%2Factions.ts",
            "raw_url": "https://github.com/angular/angular/raw/29043d9858f79bd872ce9905bb4b87706769eb89/dev-infra%2Frelease%2Fpublish%2Factions.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fpublish%2Factions.ts?ref=29043d9858f79bd872ce9905bb4b87706769eb89",
            "patch": "@@ -472,7 +472,7 @@ export abstract class ReleaseAction {\n    * The release is created by tagging the specified commit SHA.\n    */\n   private async _createGithubReleaseForVersion(\n-      newVersion: semver.SemVer, versionBumpCommitSha: string) {\n+      newVersion: semver.SemVer, versionBumpCommitSha: string, prerelease: boolean) {\n     const tagName = newVersion.format();\n     await this.git.github.git.createRef({\n       ...this.git.remoteParams,\n@@ -485,6 +485,8 @@ export abstract class ReleaseAction {\n       ...this.git.remoteParams,\n       name: `v${newVersion}`,\n       tag_name: tagName,\n+      prerelease,\n+\n     });\n     info(green(`  ✓   Created v${newVersion} release in Github.`));\n   }\n@@ -522,7 +524,8 @@ export abstract class ReleaseAction {\n     await this._verifyPackageVersions(newVersion, builtPackages);\n \n     // Create a Github release for the new version.\n-    await this._createGithubReleaseForVersion(newVersion, versionBumpCommitSha);\n+    await this._createGithubReleaseForVersion(\n+        newVersion, versionBumpCommitSha, npmDistTag === 'next');\n \n     // Walk through all built packages and publish them to NPM.\n     for (const builtPackage of builtPackages) {"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 8,
        "deletions": 5
    }
}