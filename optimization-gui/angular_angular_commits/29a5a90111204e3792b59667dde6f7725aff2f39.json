{
    "author": "danieltre23",
    "message": "refactor(compiler-cli): move `getSourceCodeForDiagnostic` to utils (#42984)\n\nExport `getSourceCodeForDiagnostic` from `ngtsc/testing` to make it\navailable for other packages. This will help confirm that the source\ncode is correct in other tests.\n\nRefs #42966\n\nPR Close #42984",
    "sha": "29a5a90111204e3792b59667dde6f7725aff2f39",
    "files": [
        {
            "sha": "fe72f5e67f78b0894d0b94fee20eeeaa3f0a8df0",
            "filename": "packages/compiler-cli/src/ngtsc/testing/src/utils.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/29a5a90111204e3792b59667dde6f7725aff2f39/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftesting%2Fsrc%2Futils.ts",
            "raw_url": "https://github.com/angular/angular/raw/29a5a90111204e3792b59667dde6f7725aff2f39/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftesting%2Fsrc%2Futils.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftesting%2Fsrc%2Futils.ts?ref=29a5a90111204e3792b59667dde6f7725aff2f39",
            "patch": "@@ -138,3 +138,12 @@ function bindingNameEquals(node: ts.BindingName, name: string): boolean {\n   }\n   return false;\n }\n+\n+export function getSourceCodeForDiagnostic(diag: ts.Diagnostic): string {\n+  if (diag.file === undefined || diag.start === undefined || diag.length === undefined) {\n+    throw new Error(\n+        `Unable to get source code for diagnostic. Provided diagnostic instance doesn't contain \"file\", \"start\" and/or \"length\" properties.`);\n+  }\n+  const text = diag.file.text;\n+  return text.substr(diag.start, diag.length);\n+}"
        },
        {
            "sha": "a6c5d449544d930634fec006b26951981aa4ffd9",
            "filename": "packages/compiler-cli/test/ngtsc/template_typecheck_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 6,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/29a5a90111204e3792b59667dde6f7725aff2f39/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Ftemplate_typecheck_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/29a5a90111204e3792b59667dde6f7725aff2f39/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Ftemplate_typecheck_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Ftemplate_typecheck_spec.ts?ref=29a5a90111204e3792b59667dde6f7725aff2f39",
            "patch": "@@ -11,7 +11,7 @@ import * as ts from 'typescript';\n import {ErrorCode, ngErrorCode} from '../../src/ngtsc/diagnostics';\n import {absoluteFrom as _, getFileSystem, getSourceFileOrError} from '../../src/ngtsc/file_system';\n import {runInEachFileSystem} from '../../src/ngtsc/file_system/testing';\n-import {expectCompleteReuse, loadStandardTestFiles} from '../../src/ngtsc/testing';\n+import {expectCompleteReuse, getSourceCodeForDiagnostic, loadStandardTestFiles} from '../../src/ngtsc/testing';\n \n import {NgtscTestEnvironment} from './env';\n \n@@ -2506,8 +2506,3 @@ export declare class AnimationEvent {\n     });\n   });\n });\n-\n-function getSourceCodeForDiagnostic(diag: ts.Diagnostic): string {\n-  const text = diag.file!.text;\n-  return text.substr(diag.start!, diag.length!);\n-}"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 10,
        "deletions": 6
    }
}