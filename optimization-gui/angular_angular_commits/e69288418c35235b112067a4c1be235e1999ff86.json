{
    "author": "JoostK",
    "message": "refactor(compiler-cli): reformat directive/pipe metadata extraction (#39961)\n\nThe prior usage of a ternary expression caused the code to be formatted\nin a weird way, so this commit replaces the ternary with an `if` statement.\n\nPR Close #39961",
    "sha": "e69288418c35235b112067a4c1be235e1999ff86",
    "files": [
        {
            "sha": "254107b7fab19a2c5770c61677e0ca5aea0dc0ee",
            "filename": "packages/compiler-cli/linker/src/file_linker/partial_linkers/partial_component_linker_1.ts",
            "status": "modified",
            "additions": 39,
            "deletions": 36,
            "changes": 75,
            "blob_url": "https://github.com/angular/angular/blob/e69288418c35235b112067a4c1be235e1999ff86/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Ffile_linker%2Fpartial_linkers%2Fpartial_component_linker_1.ts",
            "raw_url": "https://github.com/angular/angular/raw/e69288418c35235b112067a4c1be235e1999ff86/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Ffile_linker%2Fpartial_linkers%2Fpartial_component_linker_1.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Ffile_linker%2Fpartial_linkers%2Fpartial_component_linker_1.ts?ref=e69288418c35235b112067a4c1be235e1999ff86",
            "patch": "@@ -65,42 +65,45 @@ export function toR3ComponentMeta<TExpression>(\n \n   let wrapDirectivesAndPipesInClosure = false;\n \n-  const directives: R3UsedDirectiveMetadata[] = metaObj.has('directives') ?\n-      metaObj.getArray('directives').map(directive => {\n-        const directiveExpr = directive.getObject();\n-        const type = directiveExpr.getValue('type');\n-        const selector = directiveExpr.getString('selector');\n-\n-        let typeExpr = type.getOpaque();\n-        if (type.isFunction()) {\n-          typeExpr = type.getFunctionReturnValue().getOpaque();\n-          wrapDirectivesAndPipesInClosure = true;\n-        }\n-        return {\n-          type: typeExpr,\n-          selector: selector,\n-          inputs: directiveExpr.has('inputs') ?\n-              directiveExpr.getArray('inputs').map(input => input.getString()) :\n-              [],\n-          outputs: directiveExpr.has('outputs') ?\n-              directiveExpr.getArray('outputs').map(input => input.getString()) :\n-              [],\n-          exportAs: directiveExpr.has('exportAs') ?\n-              directiveExpr.getArray('exportAs').map(exportAs => exportAs.getString()) :\n-              null,\n-        };\n-      }) :\n-      [];\n-\n-  const pipes = metaObj.has('pipes') ? metaObj.getObject('pipes').toMap(value => {\n-    if (value.isFunction()) {\n-      wrapDirectivesAndPipesInClosure = true;\n-      return value.getFunctionReturnValue().getOpaque();\n-    } else {\n-      return value.getOpaque();\n-    }\n-  }) :\n-                                       new Map<string, o.Expression>();\n+  let directives: R3UsedDirectiveMetadata[] = [];\n+  if (metaObj.has('directives')) {\n+    directives = metaObj.getArray('directives').map(directive => {\n+      const directiveExpr = directive.getObject();\n+      const type = directiveExpr.getValue('type');\n+      const selector = directiveExpr.getString('selector');\n+\n+      let typeExpr = type.getOpaque();\n+      if (type.isFunction()) {\n+        typeExpr = type.getFunctionReturnValue().getOpaque();\n+        wrapDirectivesAndPipesInClosure = true;\n+      }\n+      return {\n+        type: typeExpr,\n+        selector: selector,\n+        inputs: directiveExpr.has('inputs') ?\n+            directiveExpr.getArray('inputs').map(input => input.getString()) :\n+            [],\n+        outputs: directiveExpr.has('outputs') ?\n+            directiveExpr.getArray('outputs').map(input => input.getString()) :\n+            [],\n+        exportAs: directiveExpr.has('exportAs') ?\n+            directiveExpr.getArray('exportAs').map(exportAs => exportAs.getString()) :\n+            null,\n+      };\n+    });\n+  }\n+\n+  let pipes = new Map<string, o.Expression>();\n+  if (metaObj.has('pipes')) {\n+    pipes = metaObj.getObject('pipes').toMap(value => {\n+      if (value.isFunction()) {\n+        wrapDirectivesAndPipesInClosure = true;\n+        return value.getFunctionReturnValue().getOpaque();\n+      } else {\n+        return value.getOpaque();\n+      }\n+    });\n+  }\n \n   return {\n     ...toR3DirectiveMeta(metaObj, code, sourceUrl),"
        }
    ],
    "stats": {
        "total": 75,
        "additions": 39,
        "deletions": 36
    }
}