{
    "author": "bjarkler",
    "message": "build: replace @types/trusted-types dep with minimal type defs (#39211)\n\nThe @types/trusted-types type definitions are currently imported in\ntypes.d.ts, which causes them to eventually be imported in core.d.ts.\nThis forces anyone compiling against @angular/core to provide the\n@types/trusted-types package in their compilation unit, which we don't\nwant.\n\nTo address this, get rid of the @types/trusted-types and instead import\na minimal version of the Trusted Types type definitions directly into\nAngular's codebase.\n\nUpdate the existing references to Trusted Types to point to the new\ndefinitions.\n\nPR Close #39211",
    "sha": "9bfb508b875ed6978669f2f3e310888166525f9a",
    "files": [
        {
            "sha": "4cba388bf5e661da5386d694d0598c07cd3334a6",
            "filename": "package.json",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/9bfb508b875ed6978669f2f3e310888166525f9a/package.json",
            "raw_url": "https://github.com/angular/angular/raw/9bfb508b875ed6978669f2f3e310888166525f9a/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=9bfb508b875ed6978669f2f3e310888166525f9a",
            "patch": "@@ -90,7 +90,6 @@\n     \"@types/semver\": \"^6.0.2\",\n     \"@types/shelljs\": \"^0.8.6\",\n     \"@types/systemjs\": \"0.19.32\",\n-    \"@types/trusted-types\": \"^1.0.6\",\n     \"@types/yaml\": \"^1.9.7\",\n     \"@types/yargs\": \"^15.0.5\",\n     \"@webcomponents/custom-elements\": \"^1.1.0\","
        },
        {
            "sha": "da0cac42282b7e734e8fa3e7db4d9115caa20e63",
            "filename": "packages/BUILD.bazel",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/9bfb508b875ed6978669f2f3e310888166525f9a/packages%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/9bfb508b875ed6978669f2f3e310888166525f9a/packages%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2FBUILD.bazel?ref=9bfb508b875ed6978669f2f3e310888166525f9a",
            "patch": "@@ -13,7 +13,6 @@ ts_library(\n     deps = [\n         \"//packages/zone.js/lib:zone_d_ts\",\n         \"@npm//@types/hammerjs\",\n-        \"@npm//@types/trusted-types\",\n     ],\n )\n "
        },
        {
            "sha": "4d99d7784c3708f7af591631b199acccccaf01bf",
            "filename": "packages/core/src/util/security/trusted_type_defs.ts",
            "status": "added",
            "additions": 50,
            "deletions": 0,
            "changes": 50,
            "blob_url": "https://github.com/angular/angular/blob/9bfb508b875ed6978669f2f3e310888166525f9a/packages%2Fcore%2Fsrc%2Futil%2Fsecurity%2Ftrusted_type_defs.ts",
            "raw_url": "https://github.com/angular/angular/raw/9bfb508b875ed6978669f2f3e310888166525f9a/packages%2Fcore%2Fsrc%2Futil%2Fsecurity%2Ftrusted_type_defs.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Futil%2Fsecurity%2Ftrusted_type_defs.ts?ref=9bfb508b875ed6978669f2f3e310888166525f9a",
            "patch": "@@ -0,0 +1,50 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+/**\n+ * @fileoverview\n+ * While Angular only uses Trusted Types internally for the time being,\n+ * references to Trusted Types could leak into our core.d.ts, which would force\n+ * anyone compiling against @angular/core to provide the @types/trusted-types\n+ * package in their compilation unit.\n+ *\n+ * Until https://github.com/microsoft/TypeScript/issues/30024 is resolved, we\n+ * will keep Angular's public API surface free of references to Trusted Types.\n+ * For internal and semi-private APIs that need to reference Trusted Types, the\n+ * minimal type definitions for the Trusted Types API provided by this module\n+ * should be used instead.\n+ *\n+ * Adapted from\n+ * https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/trusted-types/index.d.ts\n+ * but restricted to the API surface used within Angular.\n+ */\n+\n+export type TrustedHTML = {\n+  __brand__: 'TrustedHTML'\n+};\n+export type TrustedScript = {\n+  __brand__: 'TrustedScript'\n+};\n+export type TrustedScriptURL = {\n+  __brand__: 'TrustedScriptURL'\n+};\n+\n+export interface TrustedTypePolicyFactory {\n+  createPolicy(policyName: string, policyOptions: {\n+    createHTML?: (input: string) => string,\n+    createScript?: (input: string) => string,\n+    createScriptURL?: (input: string) => string,\n+  }): TrustedTypePolicy;\n+  getAttributeType(tagName: string, attribute: string): string|null;\n+}\n+\n+export interface TrustedTypePolicy {\n+  createHTML(input: string): TrustedHTML;\n+  createScript(input: string): TrustedScript;\n+  createScriptURL(input: string): TrustedScriptURL;\n+}"
        },
        {
            "sha": "59c45e4662beb668b4bea5e924ce11c955c76f33",
            "filename": "packages/core/src/util/security/trusted_types.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/9bfb508b875ed6978669f2f3e310888166525f9a/packages%2Fcore%2Fsrc%2Futil%2Fsecurity%2Ftrusted_types.ts",
            "raw_url": "https://github.com/angular/angular/raw/9bfb508b875ed6978669f2f3e310888166525f9a/packages%2Fcore%2Fsrc%2Futil%2Fsecurity%2Ftrusted_types.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Futil%2Fsecurity%2Ftrusted_types.ts?ref=9bfb508b875ed6978669f2f3e310888166525f9a",
            "patch": "@@ -17,6 +17,7 @@\n  */\n \n import {global} from '../global';\n+import {TrustedHTML, TrustedScript, TrustedScriptURL, TrustedTypePolicy, TrustedTypePolicyFactory} from './trusted_type_defs';\n \n /**\n  * The Trusted Types policy, or null if Trusted Types are not"
        },
        {
            "sha": "c10cd283d07ec09fe3d2b1c0fee82cd21b4f6cfc",
            "filename": "packages/types.d.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/9bfb508b875ed6978669f2f3e310888166525f9a/packages%2Ftypes.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/9bfb508b875ed6978669f2f3e310888166525f9a/packages%2Ftypes.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Ftypes.d.ts?ref=9bfb508b875ed6978669f2f3e310888166525f9a",
            "patch": "@@ -9,7 +9,6 @@\n // This file contains all ambient imports needed to compile the packages/ source code\n \n /// <reference types=\"hammerjs\" />\n-/// <reference types=\"trusted-types\" />\n /// <reference lib=\"es2015\" />\n /// <reference path=\"./goog.d.ts\" />\n /// <reference path=\"./system.d.ts\" />"
        },
        {
            "sha": "c8758d3a835fc829a3c69588dac82959c10949a8",
            "filename": "yarn.lock",
            "status": "modified",
            "additions": 0,
            "deletions": 5,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/9bfb508b875ed6978669f2f3e310888166525f9a/yarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/9bfb508b875ed6978669f2f3e310888166525f9a/yarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/yarn.lock?ref=9bfb508b875ed6978669f2f3e310888166525f9a",
            "patch": "@@ -2358,11 +2358,6 @@\n   dependencies:\n     \"@types/node\" \"*\"\n \n-\"@types/trusted-types@^1.0.6\":\n-  version \"1.0.6\"\n-  resolved \"https://registry.yarnpkg.com/@types/trusted-types/-/trusted-types-1.0.6.tgz#569b8a08121d3203398290d602d84d73c8dcf5da\"\n-  integrity sha512-230RC8sFeHoT6sSUlRO6a8cAnclO06eeiq1QDfiv2FGCLWFvvERWgwIQD4FWqD9A69BN7Lzee4OXwoMVnnsWDw==\n-\n \"@types/webpack-sources@^0.1.5\":\n   version \"0.1.7\"\n   resolved \"https://registry.yarnpkg.com/@types/webpack-sources/-/webpack-sources-0.1.7.tgz#0a330a9456113410c74a5d64180af0cbca007141\""
        }
    ],
    "stats": {
        "total": 59,
        "additions": 51,
        "deletions": 8
    }
}