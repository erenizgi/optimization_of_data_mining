{
    "author": "josephperrott",
    "message": "refactor(ngcc): update yargs and typings for yargs (#38470)\n\nUpdating yargs and typings for the updated yargs module.\n\nPR Close #38470",
    "sha": "e472f5f68804eaa85045779af43d4107385e286e",
    "files": [
        {
            "sha": "12f06df3b7447905c5b58f3eff2d28844191cae3",
            "filename": "packages/compiler-cli/ngcc/src/command_line_options.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 11,
            "changes": 26,
            "blob_url": "https://github.com/angular/angular/blob/e472f5f68804eaa85045779af43d4107385e286e/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fcommand_line_options.ts",
            "raw_url": "https://github.com/angular/angular/raw/e472f5f68804eaa85045779af43d4107385e286e/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fcommand_line_options.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fcommand_line_options.ts?ref=e472f5f68804eaa85045779af43d4107385e286e",
            "patch": "@@ -19,24 +19,27 @@ export function parseCommandLineOptions(args: string[]): NgccOptions {\n             alias: 'source',\n             describe:\n                 'A path (relative to the working directory) of the `node_modules` folder to process.',\n-            default: './node_modules'\n+            default: './node_modules',\n+            type: 'string',\n           })\n-          .option('f', {alias: 'formats', hidden: true, array: true})\n+          .option('f', {alias: 'formats', hidden: true, array: true, type: 'string'})\n           .option('p', {\n             alias: 'properties',\n             array: true,\n             describe:\n                 'An array of names of properties in package.json to compile (e.g. `module` or `main`)\\n' +\n                 'Each of these properties should hold the path to a bundle-format.\\n' +\n                 'If provided, only the specified properties are considered for processing.\\n' +\n-                'If not provided, all the supported format properties (e.g. fesm2015, fesm5, es2015, esm2015, esm5, main, module) in the package.json are considered.'\n+                'If not provided, all the supported format properties (e.g. fesm2015, fesm5, es2015, esm2015, esm5, main, module) in the package.json are considered.',\n+            type: 'string',\n           })\n           .option('t', {\n             alias: 'target',\n             describe:\n                 'A relative path (from the `source` path) to a single entry-point to process (plus its dependencies).\\n' +\n                 'If this property is provided then `error-on-failed-entry-point` is forced to true.\\n' +\n                 'This option overrides the `--use-program-dependencies` option.',\n+            type: 'string',\n           })\n           .option('use-program-dependencies', {\n             type: 'boolean',\n@@ -47,7 +50,7 @@ export function parseCommandLineOptions(args: string[]): NgccOptions {\n           .option('first-only', {\n             describe:\n                 'If specified then only the first matching package.json property will be compiled.',\n-            type: 'boolean'\n+            type: 'boolean',\n           })\n           .option('create-ivy-entry-points', {\n             describe:\n@@ -78,6 +81,7 @@ export function parseCommandLineOptions(args: string[]): NgccOptions {\n             alias: 'loglevel',\n             describe: 'The lowest severity logging message that should be output.',\n             choices: ['debug', 'info', 'warn', 'error'],\n+            type: 'string',\n           })\n           .option('invalidate-entry-point-manifest', {\n             describe:\n@@ -105,28 +109,28 @@ export function parseCommandLineOptions(args: string[]): NgccOptions {\n           .help()\n           .parse(args);\n \n-  if (options['f'] && options['f'].length) {\n+  if (options.f?.length) {\n     console.error(\n         'The formats option (-f/--formats) has been removed. Consider the properties option (-p/--properties) instead.');\n     process.exit(1);\n   }\n \n   setFileSystem(new NodeJSFileSystem());\n \n-  const baseSourcePath = resolve(options['s'] || './node_modules');\n-  const propertiesToConsider: string[] = options['p'];\n-  const targetEntryPointPath = options['t'] ? options['t'] : undefined;\n+  const baseSourcePath = resolve(options.s || './node_modules');\n+  const propertiesToConsider = options.p;\n+  const targetEntryPointPath = options.t;\n   const compileAllFormats = !options['first-only'];\n   const createNewEntryPointFormats = options['create-ivy-entry-points'];\n-  const logLevel = options['l'] as keyof typeof LogLevel | undefined;\n+  const logLevel = options.l as keyof typeof LogLevel | undefined;\n   const enableI18nLegacyMessageIdFormat = options['legacy-message-ids'];\n   const invalidateEntryPointManifest = options['invalidate-entry-point-manifest'];\n   const errorOnFailedEntryPoint = options['error-on-failed-entry-point'];\n   const findEntryPointsFromTsConfigProgram = options['use-program-dependencies'];\n   // yargs is not so great at mixed string+boolean types, so we have to test tsconfig against a\n   // string \"false\" to capture the `tsconfig=false` option.\n   // And we have to convert the option to a string to handle `no-tsconfig`, which will be `false`.\n-  const tsConfigPath = `${options['tsconfig']}` === 'false' ? null : options['tsconfig'];\n+  const tsConfigPath = `${options.tsconfig}` === 'false' ? null : options.tsconfig;\n \n   const logger = logLevel && new ConsoleLogger(LogLevel[logLevel]);\n \n@@ -138,7 +142,7 @@ export function parseCommandLineOptions(args: string[]): NgccOptions {\n     createNewEntryPointFormats,\n     logger,\n     enableI18nLegacyMessageIdFormat,\n-    async: options['async'],\n+    async: options.async,\n     invalidateEntryPointManifest,\n     errorOnFailedEntryPoint,\n     tsConfigPath,"
        }
    ],
    "stats": {
        "total": 26,
        "additions": 15,
        "deletions": 11
    }
}