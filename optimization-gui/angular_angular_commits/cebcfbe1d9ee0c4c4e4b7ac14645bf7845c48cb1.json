{
    "author": "devversion",
    "message": "refactor: update yargs to new API for ESM compatibility (#43431)\n\nGiven that we ship all of compiler-cli and localize in ESM\nmode now, we need to use a ESM compatible version of Yargs.\nThe latest version seems ESM compatible but with some small\nAPI changes. This commit updates Yargs and updates the command\nline option code to use the new API.\n\nPR Close #43431",
    "sha": "cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1",
    "files": [
        {
            "sha": "5bd4c0d87df78f7a1f2d6f36917ae0e0f108ca7c",
            "filename": "package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1/package.json",
            "raw_url": "https://github.com/angular/angular/raw/cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1",
            "patch": "@@ -97,7 +97,7 @@\n     \"@types/shelljs\": \"^0.8.6\",\n     \"@types/systemjs\": \"0.19.32\",\n     \"@types/uuid\": \"^8.3.1\",\n-    \"@types/yargs\": \"^16.0.1\",\n+    \"@types/yargs\": \"^17.0.3\",\n     \"@webcomponents/custom-elements\": \"^1.1.0\",\n     \"angular-1.5\": \"npm:angular@1.5\",\n     \"angular-1.6\": \"npm:angular@1.6\",\n@@ -161,7 +161,7 @@\n     \"tslint\": \"6.1.3\",\n     \"typescript\": \"~4.4.2\",\n     \"xhr2\": \"0.2.1\",\n-    \"yargs\": \"^17.0.0\"\n+    \"yargs\": \"^17.2.1\"\n   },\n   \"// 2\": \"devDependencies are not used under Bazel. Many can be removed after test.sh is deleted.\",\n   \"devDependencies\": {"
        },
        {
            "sha": "5c8cb4c6fed12bdc239c35895b451751052852e6",
            "filename": "packages/compiler-cli/ngcc/src/command_line_options.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fcommand_line_options.ts",
            "raw_url": "https://github.com/angular/angular/raw/cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fcommand_line_options.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fcommand_line_options.ts?ref=cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1",
            "patch": "@@ -14,7 +14,7 @@ import {NgccOptions} from './ngcc_options';\n \n export function parseCommandLineOptions(args: string[]): NgccOptions {\n   const options =\n-      yargs\n+      yargs(args)\n           .option('s', {\n             alias: 'source',\n             describe:\n@@ -114,7 +114,7 @@ export function parseCommandLineOptions(args: string[]): NgccOptions {\n           })\n           .strict()\n           .help()\n-          .parse(args);\n+          .parseSync();\n \n   if (options.f?.length) {\n     console.error("
        },
        {
            "sha": "3ba2282aac99327f0ea0f3f4b32ebff3ba8641b3",
            "filename": "packages/compiler-cli/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1/packages%2Fcompiler-cli%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1/packages%2Fcompiler-cli%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fpackage.json?ref=cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1",
            "patch": "@@ -61,7 +61,7 @@\n     \"source-map\": \"^0.6.1\",\n     \"sourcemap-codec\": \"^1.4.8\",\n     \"tslib\": \"^2.3.0\",\n-    \"yargs\": \"^17.0.0\"\n+    \"yargs\": \"^17.2.1\"\n   },\n   \"peerDependencies\": {\n     \"@angular/compiler\": \"0.0.0-PLACEHOLDER\","
        },
        {
            "sha": "87fdde531bb145dbab1d1eeff366a62776b8e958",
            "filename": "packages/localize/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1/packages%2Flocalize%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1/packages%2Flocalize%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fpackage.json?ref=cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1",
            "patch": "@@ -36,7 +36,7 @@\n   \"dependencies\": {\n     \"@babel/core\": \"7.8.6\",\n     \"glob\": \"7.2.0\",\n-    \"yargs\": \"^17.0.0\"\n+    \"yargs\": \"^17.2.1\"\n   },\n   \"peerDependencies\": {\n     \"@angular/compiler\": \"0.0.0-PLACEHOLDER\","
        },
        {
            "sha": "12235bef1f94136452fb9fab4abac6aa5c5ad2f5",
            "filename": "packages/localize/tools/src/extract/cli.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1/packages%2Flocalize%2Ftools%2Fsrc%2Fextract%2Fcli.ts",
            "raw_url": "https://github.com/angular/angular/raw/cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1/packages%2Flocalize%2Ftools%2Fsrc%2Fextract%2Fcli.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Ftools%2Fsrc%2Fextract%2Fcli.ts?ref=cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1",
            "patch": "@@ -18,7 +18,7 @@ import {extractTranslations} from './index';\n process.title = 'Angular Localization Message Extractor (localize-extract)';\n const args = process.argv.slice(2);\n const options =\n-    yargs\n+    yargs(args)\n         .option('l', {\n           alias: 'locale',\n           describe: 'The locale of the source being processed',\n@@ -88,7 +88,7 @@ const options =\n         })\n         .strict()\n         .help()\n-        .parse(args);\n+        .parseSync();\n \n const fileSystem = new NodeJSFileSystem();\n setFileSystem(fileSystem);"
        },
        {
            "sha": "cb94b448dad46568e904312774da1504950e8771",
            "filename": "packages/localize/tools/src/migrate/cli.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1/packages%2Flocalize%2Ftools%2Fsrc%2Fmigrate%2Fcli.ts",
            "raw_url": "https://github.com/angular/angular/raw/cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1/packages%2Flocalize%2Ftools%2Fsrc%2Fmigrate%2Fcli.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Ftools%2Fsrc%2Fmigrate%2Fcli.ts?ref=cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1",
            "patch": "@@ -14,7 +14,7 @@ import {migrateFiles} from './index';\n \n const args = process.argv.slice(2);\n const options =\n-    yargs\n+    yargs(args)\n         .option('r', {\n           alias: 'root',\n           default: '.',\n@@ -38,7 +38,7 @@ const options =\n         })\n         .strict()\n         .help()\n-        .parse(args);\n+        .parseSync();\n \n const fs = new NodeJSFileSystem();\n setFileSystem(fs);"
        },
        {
            "sha": "8e20bc77fea8613bd0a2ef30ebebaf6c087767dd",
            "filename": "packages/localize/tools/src/translate/cli.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1/packages%2Flocalize%2Ftools%2Fsrc%2Ftranslate%2Fcli.ts",
            "raw_url": "https://github.com/angular/angular/raw/cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1/packages%2Flocalize%2Ftools%2Fsrc%2Ftranslate%2Fcli.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Ftools%2Fsrc%2Ftranslate%2Fcli.ts?ref=cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1",
            "patch": "@@ -17,7 +17,7 @@ import {translateFiles} from './index';\n process.title = 'Angular Localization Message Translator (localize-translate)';\n const args = process.argv.slice(2);\n const options =\n-    yargs\n+    yargs(args)\n         .option('r', {\n           alias: 'root',\n           required: true,\n@@ -88,7 +88,7 @@ const options =\n \n         .strict()\n         .help()\n-        .parse(args);\n+        .parseSync();\n \n const fs = new NodeJSFileSystem();\n setFileSystem(fs);"
        },
        {
            "sha": "98970946f39e2e59996655cbc2eadbf7dcc4c9ab",
            "filename": "yarn.lock",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1/yarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1/yarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/yarn.lock?ref=cebcfbe1d9ee0c4c4e4b7ac14645bf7845c48cb1",
            "patch": "@@ -2331,10 +2331,10 @@\n   resolved \"https://registry.yarnpkg.com/@types/yargs-parser/-/yargs-parser-20.2.1.tgz#3b9ce2489919d9e4fea439b76916abc34b2df129\"\n   integrity sha512-7tFImggNeNBVMsn0vLrpn1H1uPrUBdnARPTpZoitY37ZrdJREzf7I16tMrlK3hen349gr1NYh8CmZQa7CTG6Aw==\n \n-\"@types/yargs@^16.0.1\":\n-  version \"16.0.4\"\n-  resolved \"https://registry.yarnpkg.com/@types/yargs/-/yargs-16.0.4.tgz#26aad98dd2c2a38e421086ea9ad42b9e51642977\"\n-  integrity sha512-T8Yc9wt/5LbJyCaLiHPReJa0kApcIgJ7Bn735GjItUfh08Z1pJvu8QZqb9s+mMvKV6WUQRV7K2R46YbjMXTTJw==\n+\"@types/yargs@^17.0.3\":\n+  version \"17.0.3\"\n+  resolved \"https://registry.yarnpkg.com/@types/yargs/-/yargs-17.0.3.tgz#e6c552aa3277b21a8e802019d03ee5e77894cf27\"\n+  integrity sha512-K7rm3Ke3ag/pAniBe80A6J6fjoqRibvCrl3dRmtXV9eCEt9h/pZwmHX9MzjQVUc/elneQTL4Ky7XKorC71Lmxw==\n   dependencies:\n     \"@types/yargs-parser\" \"*\"\n \n@@ -13948,7 +13948,7 @@ yargs@^16.0.0, yargs@^16.1.1, yargs@^16.2.0:\n     y18n \"^5.0.5\"\n     yargs-parser \"^20.2.2\"\n \n-yargs@^17.0.0:\n+yargs@^17.0.0, yargs@^17.2.1:\n   version \"17.2.1\"\n   resolved \"https://registry.yarnpkg.com/yargs/-/yargs-17.2.1.tgz#e2c95b9796a0e1f7f3bf4427863b42e0418191ea\"\n   integrity sha512-XfR8du6ua4K6uLGm5S6fA+FIJom/MdJcFNVY8geLlp2v8GYbOXD4EB1tPNZsRn4vBzKGMgb5DRZMeWuFc2GO8Q=="
        }
    ],
    "stats": {
        "total": 34,
        "additions": 17,
        "deletions": 17
    }
}