{
    "author": "petebacondarwin",
    "message": "refactor(compiler-cli): ngcc entry-point manifest hash is now configurable (#42582)\n\nThe hash algorithm for the entry-point manifest was hardcoded to `md5`.\nThis can now be configured by the `hashAlgorithm` property on the\nngcc.config.js project configuration.\n\nPR Close #42582",
    "sha": "b8ef83b10f7b521fd998376b0cb33c68cc49f388",
    "files": [
        {
            "sha": "033f1f77dd2bff31c69d7381a663f55f52d8b453",
            "filename": "packages/compiler-cli/ngcc/src/packages/configuration.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/b8ef83b10f7b521fd998376b0cb33c68cc49f388/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fpackages%2Fconfiguration.ts",
            "raw_url": "https://github.com/angular/angular/raw/b8ef83b10f7b521fd998376b0cb33c68cc49f388/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fpackages%2Fconfiguration.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fpackages%2Fconfiguration.ts?ref=b8ef83b10f7b521fd998376b0cb33c68cc49f388",
            "patch": "@@ -236,10 +236,12 @@ export class NgccConfiguration {\n   private projectConfig: PartiallyProcessedConfig;\n   private cache = new Map<string, VersionedPackageConfig>();\n   readonly hash: string;\n+  readonly hashAlgorithm: string;\n \n   constructor(private fs: ReadonlyFileSystem, baseDir: AbsoluteFsPath) {\n     this.defaultConfig = this.processProjectConfig(DEFAULT_NGCC_CONFIG);\n     this.projectConfig = this.processProjectConfig(this.loadProjectConfig(baseDir));\n+    this.hashAlgorithm = this.projectConfig.hashAlgorithm;\n     this.hash = this.computeHash();\n   }\n \n@@ -390,9 +392,7 @@ export class NgccConfiguration {\n   }\n \n   private computeHash(): string {\n-    return createHash(this.projectConfig.hashAlgorithm)\n-        .update(JSON.stringify(this.projectConfig))\n-        .digest('hex');\n+    return createHash(this.hashAlgorithm).update(JSON.stringify(this.projectConfig)).digest('hex');\n   }\n }\n "
        },
        {
            "sha": "e689c5e75676372e910b3ff9ca4aa5a826d5f223",
            "filename": "packages/compiler-cli/ngcc/src/packages/entry_point_manifest.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/b8ef83b10f7b521fd998376b0cb33c68cc49f388/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fpackages%2Fentry_point_manifest.ts",
            "raw_url": "https://github.com/angular/angular/raw/b8ef83b10f7b521fd998376b0cb33c68cc49f388/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fpackages%2Fentry_point_manifest.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fpackages%2Fentry_point_manifest.ts?ref=b8ef83b10f7b521fd998376b0cb33c68cc49f388",
            "patch": "@@ -159,7 +159,7 @@ export class EntryPointManifest {\n       const lockFilePath = this.fs.resolve(directory, lockFileName);\n       if (this.fs.exists(lockFilePath)) {\n         const lockFileContents = this.fs.readFile(lockFilePath);\n-        return createHash('md5').update(lockFileContents).digest('hex');\n+        return createHash(this.config.hashAlgorithm).update(lockFileContents).digest('hex');\n       }\n     }\n     return null;"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 4,
        "deletions": 4
    }
}