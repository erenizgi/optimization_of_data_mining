{
    "author": "petebacondarwin",
    "message": "docs(localize): add public api markers for CLI integration (#39006)\n\nThis commit marks the functions and classes that are\nused by the CLI.\n\nPR Close #39006",
    "sha": "23e21881922e0eb000457c8aa612015d091a5175",
    "files": [
        {
            "sha": "6861ca7311e9488c1210ef50b40752003a37219a",
            "filename": "packages/localize/src/tools/src/diagnostics.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fdiagnostics.ts",
            "raw_url": "https://github.com/angular/angular/raw/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fdiagnostics.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fdiagnostics.ts?ref=23e21881922e0eb000457c8aa612015d091a5175",
            "patch": "@@ -14,6 +14,8 @@ export type DiagnosticHandlingStrategy = 'error'|'warning'|'ignore';\n /**\n  * This class is used to collect and then report warnings and errors that occur during the execution\n  * of the tools.\n+ *\n+ * @publicApi used by CLI\n  */\n export class Diagnostics {\n   readonly messages: {type: 'warning'|'error', message: string}[] = [];"
        },
        {
            "sha": "9307a1090c605cdf1b022c0981f1c38fcee483e7",
            "filename": "packages/localize/src/tools/src/extract/extraction.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Fextraction.ts",
            "raw_url": "https://github.com/angular/angular/raw/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Fextraction.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Fextraction.ts?ref=23e21881922e0eb000457c8aa612015d091a5175",
            "patch": "@@ -23,6 +23,8 @@ export interface ExtractionOptions {\n /**\n  * Extracts parsed messages from file contents, by parsing the contents as JavaScript\n  * and looking for occurrences of `$localize` in the source code.\n+ *\n+ * @publicApi used by CLI\n  */\n export class MessageExtractor {\n   private basePath: AbsoluteFsPath;"
        },
        {
            "sha": "59b2b79b658bdaed0b13dda19cf489e90c7a5e7f",
            "filename": "packages/localize/src/tools/src/extract/translation_files/xliff1_translation_serializer.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Ftranslation_files%2Fxliff1_translation_serializer.ts",
            "raw_url": "https://github.com/angular/angular/raw/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Ftranslation_files%2Fxliff1_translation_serializer.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Ftranslation_files%2Fxliff1_translation_serializer.ts?ref=23e21881922e0eb000457c8aa612015d091a5175",
            "patch": "@@ -23,6 +23,7 @@ const LEGACY_XLIFF_MESSAGE_LENGTH = 40;\n  * http://docs.oasis-open.org/xliff/v1.2/xliff-profile-html/xliff-profile-html-1.2.html\n  *\n  * @see Xliff1TranslationParser\n+ * @publicApi used by CLI\n  */\n export class Xliff1TranslationSerializer implements TranslationSerializer {\n   constructor("
        },
        {
            "sha": "fc8bc82e21016262fb122cef07681aec2a822bf9",
            "filename": "packages/localize/src/tools/src/extract/translation_files/xliff2_translation_serializer.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Ftranslation_files%2Fxliff2_translation_serializer.ts",
            "raw_url": "https://github.com/angular/angular/raw/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Ftranslation_files%2Fxliff2_translation_serializer.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Ftranslation_files%2Fxliff2_translation_serializer.ts?ref=23e21881922e0eb000457c8aa612015d091a5175",
            "patch": "@@ -22,6 +22,7 @@ const MAX_LEGACY_XLIFF_2_MESSAGE_LENGTH = 20;\n  * http://docs.oasis-open.org/xliff/xliff-core/v2.0/os/xliff-core-v2.0-os.html\n  *\n  * @see Xliff2TranslationParser\n+ * @publicApi used by CLI\n  */\n export class Xliff2TranslationSerializer implements TranslationSerializer {\n   private currentPlaceholderId = 0;"
        },
        {
            "sha": "6f8238840e67ca36c7a82b60062faee409511cda",
            "filename": "packages/localize/src/tools/src/extract/translation_files/xmb_translation_serializer.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Ftranslation_files%2Fxmb_translation_serializer.ts",
            "raw_url": "https://github.com/angular/angular/raw/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Ftranslation_files%2Fxmb_translation_serializer.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fextract%2Ftranslation_files%2Fxmb_translation_serializer.ts?ref=23e21881922e0eb000457c8aa612015d091a5175",
            "patch": "@@ -18,6 +18,7 @@ import {XmlFile} from './xml_file';\n  * http://cldr.unicode.org/development/development-process/design-proposals/xmb\n  *\n  * @see XmbTranslationParser\n+ * @publicApi used by CLI\n  */\n export class XmbTranslationSerializer implements TranslationSerializer {\n   constructor(private basePath: AbsoluteFsPath, private useLegacyIds: boolean) {}"
        },
        {
            "sha": "4db7179a10173e606cab250b4fe8f6135aaec54e",
            "filename": "packages/localize/src/tools/src/source_file_utils.ts",
            "status": "modified",
            "additions": 20,
            "deletions": 8,
            "changes": 28,
            "blob_url": "https://github.com/angular/angular/blob/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fsource_file_utils.ts",
            "raw_url": "https://github.com/angular/angular/raw/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fsource_file_utils.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Fsource_file_utils.ts?ref=23e21881922e0eb000457c8aa612015d091a5175",
            "patch": "@@ -36,7 +36,9 @@ export function isNamedIdentifier(\n \n /**\n  * Is the given `identifier` declared globally.\n+ *\n  * @param identifier The identifier to check.\n+ * @publicApi used by CLI\n  */\n export function isGlobalIdentifier(identifier: NodePath<t.Identifier>) {\n   return !identifier.scope || !identifier.scope.hasBinding(identifier.node.name);\n@@ -46,6 +48,7 @@ export function isGlobalIdentifier(identifier: NodePath<t.Identifier>) {\n  * Build a translated expression to replace the call to `$localize`.\n  * @param messageParts The static parts of the message.\n  * @param substitutions The expressions to substitute into the message.\n+ * @publicApi used by CLI\n  */\n export function buildLocalizeReplacement(\n     messageParts: TemplateStringsArray, substitutions: readonly t.Expression[]): t.Expression {\n@@ -65,6 +68,7 @@ export function buildLocalizeReplacement(\n  * to a helper function like `__makeTemplateObject`.\n  *\n  * @param call The AST node of the call to process.\n+ * @publicApi used by CLI\n  */\n export function unwrapMessagePartsFromLocalizeCall(call: NodePath<t.CallExpression>):\n     [TemplateStringsArray, (ɵSourceLocation | undefined)[]] {\n@@ -142,9 +146,11 @@ export function unwrapMessagePartsFromLocalizeCall(call: NodePath<t.CallExpressi\n   return [ɵmakeTemplateObject(cookedStrings, rawStrings), rawLocations];\n }\n \n-\n-export function unwrapSubstitutionsFromLocalizeCall(call: NodePath<t.CallExpression>):\n-    [t.Expression[], (ɵSourceLocation | undefined)[]] {\n+/**\n+ * Parse the localize call expression to extract the arguments that hold the substition expressions.\n+ *\n+ * @publicApi used by CLI\n+ */\n   const expressions = call.get('arguments').splice(1);\n   if (!isArrayOfExpressions(expressions)) {\n     const badExpression = expressions.find(expression => !expression.isExpression())!;\n@@ -157,8 +163,11 @@ export function unwrapSubstitutionsFromLocalizeCall(call: NodePath<t.CallExpress\n   ];\n }\n \n-export function unwrapMessagePartsFromTemplateLiteral(elements: NodePath<t.TemplateElement>[]):\n-    [TemplateStringsArray, (ɵSourceLocation | undefined)[]] {\n+/**\n+ * Parse the tagged template literal to extract the message parts.\n+ *\n+ * @publicApi used by CLI\n+ */\n   const cooked = elements.map(q => {\n     if (q.node.value.cooked === undefined) {\n       throw new BabelParseError(\n@@ -172,9 +181,11 @@ export function unwrapMessagePartsFromTemplateLiteral(elements: NodePath<t.Templ\n   return [ɵmakeTemplateObject(cooked, raw), locations];\n }\n \n-export function unwrapExpressionsFromTemplateLiteral(quasi: NodePath<t.TemplateLiteral>):\n-    [t.Expression[], (ɵSourceLocation | undefined)[]] {\n-  return [quasi.node.expressions, quasi.get('expressions').map(e => getLocation(e))];\n+/**\n+ * Parse the tagged template literal to extract the interpolation expressions.\n+ *\n+ * @publicApi used by CLI\n+ */\n }\n \n /**\n@@ -321,6 +332,7 @@ export interface TranslatePluginOptions {\n  * Translate the text of the given message, using the given translations.\n  *\n  * Logs as warning if the translation is not available\n+ * @publicApi used by CLI\n  */\n export function translate(\n     diagnostics: Diagnostics, translations: Record<string, ɵParsedTranslation>,"
        },
        {
            "sha": "2dc764cfcf408351c7c6434012cb55c712b90acb",
            "filename": "packages/localize/src/tools/src/translate/source_files/es2015_translate_plugin.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Fsource_files%2Fes2015_translate_plugin.ts",
            "raw_url": "https://github.com/angular/angular/raw/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Fsource_files%2Fes2015_translate_plugin.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Fsource_files%2Fes2015_translate_plugin.ts?ref=23e21881922e0eb000457c8aa612015d091a5175",
            "patch": "@@ -13,6 +13,12 @@ import {Diagnostics} from '../../diagnostics';\n \n import {buildCodeFrameError, buildLocalizeReplacement, isBabelParseError, isLocalize, translate, TranslatePluginOptions, unwrapMessagePartsFromTemplateLiteral} from '../../source_file_utils';\n \n+/**\n+ * Create a Babel plugin that can be used to do compile-time translation of `$localize` tagged\n+ * messages.\n+ *\n+ * @publicApi used by CLI\n+ */\n export function makeEs2015TranslatePlugin(\n     diagnostics: Diagnostics, translations: Record<string, ɵParsedTranslation>,\n     {missingTranslation = 'error', localizeName = '$localize'}: TranslatePluginOptions = {}):"
        },
        {
            "sha": "8ba02962ef7281d6cb85f2ec2702ece9309162fe",
            "filename": "packages/localize/src/tools/src/translate/source_files/es5_translate_plugin.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Fsource_files%2Fes5_translate_plugin.ts",
            "raw_url": "https://github.com/angular/angular/raw/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Fsource_files%2Fes5_translate_plugin.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Fsource_files%2Fes5_translate_plugin.ts?ref=23e21881922e0eb000457c8aa612015d091a5175",
            "patch": "@@ -13,6 +13,12 @@ import {Diagnostics} from '../../diagnostics';\n \n import {buildCodeFrameError, buildLocalizeReplacement, isBabelParseError, isLocalize, translate, TranslatePluginOptions, unwrapMessagePartsFromLocalizeCall, unwrapSubstitutionsFromLocalizeCall} from '../../source_file_utils';\n \n+/**\n+ * Create a Babel plugin that can be used to do compile-time translation of `$localize` tagged\n+ * messages.\n+ *\n+ * @publicApi used by CLI\n+ */\n export function makeEs5TranslatePlugin(\n     diagnostics: Diagnostics, translations: Record<string, ɵParsedTranslation>,\n     {missingTranslation = 'error', localizeName = '$localize'}: TranslatePluginOptions = {}):"
        },
        {
            "sha": "ed695837a9f94131c33e30ed2bf99646c0b90452",
            "filename": "packages/localize/src/tools/src/translate/source_files/locale_plugin.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Fsource_files%2Flocale_plugin.ts",
            "raw_url": "https://github.com/angular/angular/raw/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Fsource_files%2Flocale_plugin.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Fsource_files%2Flocale_plugin.ts?ref=23e21881922e0eb000457c8aa612015d091a5175",
            "patch": "@@ -21,6 +21,7 @@ import {isLocalize, TranslatePluginOptions} from '../../source_file_utils';\n  *\n  * @param locale The name of the locale to inline into the code.\n  * @param options Additional options including the name of the `$localize` function.\n+ * @publicApi used by CLI\n  */\n export function makeLocalePlugin(\n     locale: string, {localizeName = '$localize'}: TranslatePluginOptions = {}): PluginObj {"
        },
        {
            "sha": "92cd6f1072559edff42f12103285ad60d34ec14d",
            "filename": "packages/localize/src/tools/src/translate/translation_files/translation_parsers/simple_json_translation_parser.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Ftranslation_files%2Ftranslation_parsers%2Fsimple_json_translation_parser.ts",
            "raw_url": "https://github.com/angular/angular/raw/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Ftranslation_files%2Ftranslation_parsers%2Fsimple_json_translation_parser.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Ftranslation_files%2Ftranslation_parsers%2Fsimple_json_translation_parser.ts?ref=23e21881922e0eb000457c8aa612015d091a5175",
            "patch": "@@ -25,6 +25,7 @@ import {ParseAnalysis, ParsedTranslationBundle, TranslationParser} from './trans\n  * ```\n  *\n  * @see SimpleJsonTranslationSerializer\n+ * @publicApi used by CLI\n  */\n export class SimpleJsonTranslationParser implements TranslationParser<Object> {\n   /**"
        },
        {
            "sha": "53ba0f2f25e510f200d751d64f4bb08387f0c1ef",
            "filename": "packages/localize/src/tools/src/translate/translation_files/translation_parsers/xliff1_translation_parser.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Ftranslation_files%2Ftranslation_parsers%2Fxliff1_translation_parser.ts",
            "raw_url": "https://github.com/angular/angular/raw/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Ftranslation_files%2Ftranslation_parsers%2Fxliff1_translation_parser.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Ftranslation_files%2Ftranslation_parsers%2Fxliff1_translation_parser.ts?ref=23e21881922e0eb000457c8aa612015d091a5175",
            "patch": "@@ -21,6 +21,7 @@ import {addErrorsToBundle, addParseDiagnostic, addParseError, canParseXml, getAt\n  * http://docs.oasis-open.org/xliff/v1.2/xliff-profile-html/xliff-profile-html-1.2.html\n  *\n  * @see Xliff1TranslationSerializer\n+ * @publicApi used by CLI\n  */\n export class Xliff1TranslationParser implements TranslationParser<XmlTranslationParserHint> {\n   /**"
        },
        {
            "sha": "3880c8e57c13af5a98f7c1b0a56086642a688d5a",
            "filename": "packages/localize/src/tools/src/translate/translation_files/translation_parsers/xliff2_translation_parser.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Ftranslation_files%2Ftranslation_parsers%2Fxliff2_translation_parser.ts",
            "raw_url": "https://github.com/angular/angular/raw/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Ftranslation_files%2Ftranslation_parsers%2Fxliff2_translation_parser.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Ftranslation_files%2Ftranslation_parsers%2Fxliff2_translation_parser.ts?ref=23e21881922e0eb000457c8aa612015d091a5175",
            "patch": "@@ -20,6 +20,7 @@ import {addErrorsToBundle, addParseDiagnostic, addParseError, canParseXml, getAt\n  * http://docs.oasis-open.org/xliff/xliff-core/v2.0/os/xliff-core-v2.0-os.html\n  *\n  * @see Xliff2TranslationSerializer\n+ * @publicApi used by CLI\n  */\n export class Xliff2TranslationParser implements TranslationParser<XmlTranslationParserHint> {\n   /**"
        },
        {
            "sha": "bb1370b62a5f13c50b4055e15cebfa5f4660aede",
            "filename": "packages/localize/src/tools/src/translate/translation_files/translation_parsers/xtb_translation_parser.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Ftranslation_files%2Ftranslation_parsers%2Fxtb_translation_parser.ts",
            "raw_url": "https://github.com/angular/angular/raw/23e21881922e0eb000457c8aa612015d091a5175/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Ftranslation_files%2Ftranslation_parsers%2Fxtb_translation_parser.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftools%2Fsrc%2Ftranslate%2Ftranslation_files%2Ftranslation_parsers%2Fxtb_translation_parser.ts?ref=23e21881922e0eb000457c8aa612015d091a5175",
            "patch": "@@ -22,6 +22,7 @@ import {addErrorsToBundle, addParseDiagnostic, addParseError, canParseXml, getAt\n  * http://cldr.unicode.org/development/development-process/design-proposals/xmb\n  *\n  * @see XmbTranslationSerializer\n+ * @publicApi used by CLI\n  */\n export class XtbTranslationParser implements TranslationParser<XmlTranslationParserHint> {\n   /**"
        }
    ],
    "stats": {
        "total": 52,
        "additions": 44,
        "deletions": 8
    }
}