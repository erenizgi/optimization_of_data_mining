{
    "author": "josephperrott",
    "message": "ci: setup windows from scratch (#39139)\n\nRather than setting up windows by relying on attaching the saved workspace\nfailes from the previous step, instead checkout and install the yarn items\nwithin the windows steps.  Additionally, since the bazel remote cache is\nused and relied on, saving the cached results of the bazel runs to be resumed\non subsequent runs does not provide enough value to make it worth the time\nconsumed.\n\nPR Close #39139",
    "sha": "0e5a945ed4c8017e754d519374d7e13bc1d5aee7",
    "files": [
        {
            "sha": "6189b6436b85c7347d6d161661f16e65e246c50d",
            "filename": ".circleci/config.yml",
            "status": "modified",
            "additions": 1,
            "deletions": 20,
            "changes": 21,
            "blob_url": "https://github.com/angular/angular/blob/0e5a945ed4c8017e754d519374d7e13bc1d5aee7/.circleci%2Fconfig.yml",
            "raw_url": "https://github.com/angular/angular/raw/0e5a945ed4c8017e754d519374d7e13bc1d5aee7/.circleci%2Fconfig.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.circleci%2Fconfig.yml?ref=0e5a945ed4c8017e754d519374d7e13bc1d5aee7",
            "patch": "@@ -27,8 +27,6 @@ var_3: &cache_key v7-angular-node-12-{{ checksum \".bazelversion\" }}-{{ checksum\n # folder will contain all previously used versions and ultimately cause the cache restoring to\n # be slower due to its growing size.\n var_4: &cache_key_fallback v7-angular-node-12-{{ checksum \".bazelversion\" }}\n-var_3_win: &cache_key_win v7-angular-win-node-12-{{ checksum \".bazelversion\" }}-{{ checksum \"yarn.lock\" }}-{{ checksum \"WORKSPACE\" }}-{{ checksum \"packages/bazel/package.bzl\" }}-{{ checksum \"aio/yarn.lock\" }}\n-var_4_win: &cache_key_win_fallback v7-angular-win-node-12-{{ checksum \".bazelversion\" }}\n \n # Cache key for the `components-repo-unit-tests` job. **Note** when updating the SHA in the\n # cache keys also update the SHA for the \"COMPONENTS_REPO_COMMIT\" environment variable.\n@@ -183,23 +181,12 @@ commands:\n   setup_win:\n     description: Setup windows node environment\n     steps:\n-      # Use the Linux workspace directly, as it already has checkout, rebased and node modules.\n-      - custom_attach_workspace\n+      - checkout\n       # Install Bazel pre-requisites that aren't in the preconfigured CircleCI Windows VM.\n       - run: ./.circleci/windows-env.ps1\n       - run: node --version\n       - run: yarn --version\n-      - restore_cache:\n-          keys:\n-            - *cache_key_win\n-            - *cache_key_win_fallback\n-      # Reinstall to get windows binaries.\n       - run: yarn install --frozen-lockfile --non-interactive\n-      # Install @bazel/bazelisk globally and use that for the first run.\n-      # Workaround for https://github.com/bazelbuild/rules_nodejs/issues/894\n-      # NB: the issue was for @bazel/bazel but the same problem applies to @bazel/bazelisk\n-      - run: yarn global add @bazel/bazelisk@$env:BAZELISK_VERSION\n-      - run: bazelisk info\n \n   notify_webhook_on_fail:\n     description: Notify a webhook about failure\n@@ -766,12 +753,6 @@ jobs:\n           # Probably a powershell command parsing thing. There's no problem using a yarn script though.\n           command: yarn circleci-win-ve\n           no_output_timeout: 45m\n-      # Save bazel repository cache to use on subsequent runs.\n-      # We don't save node_modules because it's faster to use the linux workspace and reinstall.\n-      - save_cache:\n-          key: *cache_key_win\n-          paths:\n-            - \"C:/Users/circleci/bazel_repository_cache\"\n \n   test_ivy_aot_win:\n     executor: windows-executor"
        }
    ],
    "stats": {
        "total": 21,
        "additions": 1,
        "deletions": 20
    }
}