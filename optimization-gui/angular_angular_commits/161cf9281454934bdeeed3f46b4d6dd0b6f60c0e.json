{
    "author": "josephperrott",
    "message": "refactor(compiler): reverse testing of ternary operator to ensure typescript properly narrows types (#44089)\n\nBy checking if the providedIn is a function instead of everything but a function, typescript properly\nnarrows the typings for creating the expressions.\n\nPR Close #44089",
    "sha": "161cf9281454934bdeeed3f46b4d6dd0b6f60c0e",
    "files": [
        {
            "sha": "f58de6742675a321977b62c14030e89c5f267e99",
            "filename": "packages/compiler/src/jit_compiler_facade.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 5,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/161cf9281454934bdeeed3f46b4d6dd0b6f60c0e/packages%2Fcompiler%2Fsrc%2Fjit_compiler_facade.ts",
            "raw_url": "https://github.com/angular/angular/raw/161cf9281454934bdeeed3f46b4d6dd0b6f60c0e/packages%2Fcompiler%2Fsrc%2Fjit_compiler_facade.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fjit_compiler_facade.ts?ref=161cf9281454934bdeeed3f46b4d6dd0b6f60c0e",
            "patch": "@@ -457,8 +457,7 @@ function parseJitTemplate(\n   const interpolationConfig =\n       interpolation ? InterpolationConfig.fromArray(interpolation) : DEFAULT_INTERPOLATION_CONFIG;\n   // Parse the template and check for errors.\n-  const parsed = parseTemplate(\n-      template, sourceMapUrl, {preserveWhitespaces: preserveWhitespaces, interpolationConfig});\n+  const parsed = parseTemplate(template, sourceMapUrl, {preserveWhitespaces, interpolationConfig});\n   if (parsed.errors !== null) {\n     const errors = parsed.errors.map(err => err.toString()).join(', ');\n     throw new Error(`Errors during JIT compilation of template for ${typeName}: ${errors}`);\n@@ -495,9 +494,8 @@ function wrapExpression(obj: any, property: string): WrappedNodeExpr<any>|undefi\n }\n \n function computeProvidedIn(providedIn: Function|string|null|undefined): R3ProviderExpression {\n-  const expression = (providedIn == null || typeof providedIn === 'string') ?\n-      new LiteralExpr(providedIn ?? null) :\n-      new WrappedNodeExpr(providedIn);\n+  const expression = typeof providedIn === 'function' ? new WrappedNodeExpr(providedIn) :\n+                                                        new LiteralExpr(providedIn ?? null);\n   // See `convertToProviderExpression()` for why `isForwardRef` is false.\n   return createR3ProviderExpression(expression, /* isForwardRef */ false);\n }"
        }
    ],
    "stats": {
        "total": 8,
        "additions": 3,
        "deletions": 5
    }
}