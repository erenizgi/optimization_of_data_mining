{
    "author": "AndrewKushnir",
    "message": "test: remove newlines to make a test more stable (#44616)\n\nOne of the tests was not taking into account newlines in the text content of an element, thus failing in some browsers. This commit makes the test more stable by removing newlines and comparing the output after that.\n\nPR Close #44616",
    "sha": "d4015f762ff6d76df4c7210263d694885c2ad6d9",
    "files": [
        {
            "sha": "5c1bb1fbcc4e569d2ecc225c23c6f86a39104318",
            "filename": "packages/core/test/acceptance/view_container_ref_spec.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/d4015f762ff6d76df4c7210263d694885c2ad6d9/packages%2Fcore%2Ftest%2Facceptance%2Fview_container_ref_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/d4015f762ff6d76df4c7210263d694885c2ad6d9/packages%2Fcore%2Ftest%2Facceptance%2Fview_container_ref_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fview_container_ref_spec.ts?ref=d4015f762ff6d76df4c7210263d694885c2ad6d9",
            "patch": "@@ -25,6 +25,15 @@ describe('ViewContainerRef', () => {\n         .replace(/\\sng-reflect-\\S*=\"[^\"]*\"/g, '');\n   }\n \n+  /**\n+   * Helper method to retrieve the text content of the given element. This method also strips all\n+   * leading and trailing whitespace and removes all newlines. This makes element content\n+   * comparisons easier and less verbose.\n+   */\n+  function getElementText(element: Element): string {\n+    return element.textContent!.trim().replace(/\\r?\\n/g, ' ');\n+  }\n+\n   beforeEach(() => {\n     TestBed.configureTestingModule({\n       declarations: [\n@@ -1480,7 +1489,7 @@ describe('ViewContainerRef', () => {\n \n           fixture.detectChanges();\n \n-          expect(fixture.nativeElement.parentNode.textContent.trim())\n+          expect(getElementText(fixture.nativeElement.parentNode))\n               .toContain(\n                   '[Child Component B] ' +\n                   '[Projectable Node] ' +"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 10,
        "deletions": 1
    }
}