{
    "author": "josephperrott",
    "message": "refactor(dev-infra): move the release notes into its own directory under release (#42225)\n\nMove the release notes tooling under its own directory under release rather than\nwithin publish, in preparation to have a release note generation command for ad-hoc\nrelease note generation.\n\nPR Close #42225",
    "sha": "a9584c929b07ef63485d16ef5c8b0217a5a03104",
    "files": [
        {
            "sha": "30f158ef72dbec176e94d8ae621c31eedb791ab2",
            "filename": "dev-infra/ng-dev.js",
            "status": "modified",
            "additions": 228,
            "deletions": 228,
            "changes": 456,
            "blob_url": "https://github.com/angular/angular/blob/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Fng-dev.js",
            "raw_url": "https://github.com/angular/angular/raw/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Fng-dev.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fng-dev.js?ref=a9584c929b07ef63485d16ef5c8b0217a5a03104",
            "patch": "@@ -5507,234 +5507,6 @@ function semverInc(version, release, identifier) {\n     return clone.inc(release, identifier);\n }\n \n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-/** Gets the commit message for a new release point in the project. */\n-function getCommitMessageForRelease(newVersion) {\n-    return `release: cut the v${newVersion} release`;\n-}\n-/**\n- * Gets the commit message for an exceptional version bump in the next branch. The next\n- * branch version will be bumped without the release being published in some situations.\n- * More details can be found in the `MoveNextIntoFeatureFreeze` release action and in:\n- * https://hackmd.io/2Le8leq0S6G_R5VEVTNK9A.\n- */\n-function getCommitMessageForExceptionalNextVersionBump(newVersion) {\n-    return `release: bump the next branch to v${newVersion}`;\n-}\n-/** Gets the commit message for a release notes cherry-pick commit */\n-function getReleaseNoteCherryPickCommitMessage(newVersion) {\n-    return `docs: release notes for the v${newVersion} release`;\n-}\n-\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-/** Project-relative path for the changelog file. */\n-const changelogPath = 'CHANGELOG.md';\n-/** Project-relative path for the \"package.json\" file. */\n-const packageJsonPath = 'package.json';\n-/** Default interval in milliseconds to check whether a pull request has been merged. */\n-const waitForPullRequestInterval = 10000;\n-\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-/*\n- * ###############################################################\n- *\n- * This file contains helpers for invoking external `ng-dev` commands. A subset of actions,\n- * like building release output or setting aν NPM dist tag for release packages, cannot be\n- * performed directly as part of the release tool and need to be delegated to external `ng-dev`\n- * commands that exist across arbitrary version branches.\n- *\n- * In a concrete example: Consider a new patch version is released and that a new release\n- * package has been added to the `next` branch. The patch branch will not contain the new\n- * release package, so we could not build the release output for it. To work around this, we\n- * call the ng-dev build command for the patch version branch and expect it to return a list\n- * of built packages that need to be released as part of this release train.\n- *\n- * ###############################################################\n- */\n-/**\n- * Invokes the `ng-dev release set-dist-tag` command in order to set the specified\n- * NPM dist tag for all packages in the checked out branch to the given version.\n- */\n-function invokeSetNpmDistCommand(npmDistTag, version) {\n-    return tslib.__awaiter(this, void 0, void 0, function* () {\n-        try {\n-            // Note: No progress indicator needed as that is the responsibility of the command.\n-            yield spawnWithDebugOutput('yarn', ['--silent', 'ng-dev', 'release', 'set-dist-tag', npmDistTag, version.format()]);\n-            info(green(`  ✓   Set \"${npmDistTag}\" NPM dist tag for all packages to v${version}.`));\n-        }\n-        catch (e) {\n-            error(e);\n-            error(red(`  ✘   An error occurred while setting the NPM dist tag for \"${npmDistTag}\".`));\n-            throw new FatalReleaseActionError();\n-        }\n-    });\n-}\n-/**\n- * Invokes the `ng-dev release build` command in order to build the release\n- * packages for the currently checked out branch.\n- */\n-function invokeReleaseBuildCommand() {\n-    return tslib.__awaiter(this, void 0, void 0, function* () {\n-        const spinner = ora.call(undefined).start('Building release output.');\n-        try {\n-            // Since we expect JSON to be printed from the `ng-dev release build` command,\n-            // we spawn the process in silent mode. We have set up an Ora progress spinner.\n-            const { stdout } = yield spawnWithDebugOutput('yarn', ['--silent', 'ng-dev', 'release', 'build', '--json'], { mode: 'silent' });\n-            spinner.stop();\n-            info(green('  ✓   Built release output for all packages.'));\n-            // The `ng-dev release build` command prints a JSON array to stdout\n-            // that represents the built release packages and their output paths.\n-            return JSON.parse(stdout.trim());\n-        }\n-        catch (e) {\n-            spinner.stop();\n-            error(e);\n-            error(red('  ✘   An error occurred while building the release packages.'));\n-            throw new FatalReleaseActionError();\n-        }\n-    });\n-}\n-/**\n- * Invokes the `yarn install` command in order to install dependencies for\n- * the configured project with the currently checked out revision.\n- */\n-function invokeYarnInstallCommand(projectDir) {\n-    return tslib.__awaiter(this, void 0, void 0, function* () {\n-        try {\n-            // Note: No progress indicator needed as that is the responsibility of the command.\n-            // TODO: Consider using an Ora spinner instead to ensure minimal console output.\n-            yield spawnWithDebugOutput('yarn', ['install', '--frozen-lockfile', '--non-interactive'], { cwd: projectDir });\n-            info(green('  ✓   Installed project dependencies.'));\n-        }\n-        catch (e) {\n-            error(e);\n-            error(red('  ✘   An error occurred while installing dependencies.'));\n-            throw new FatalReleaseActionError();\n-        }\n-    });\n-}\n-\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-/**\n- * Graphql Github API query that can be used to find forks of a given repository\n- * that are owned by the current viewer authenticated with the Github API.\n- */\n-const findOwnedForksOfRepoQuery = typedGraphqlify.params({\n-    $owner: 'String!',\n-    $name: 'String!',\n-}, {\n-    repository: typedGraphqlify.params({ owner: '$owner', name: '$name' }, {\n-        forks: typedGraphqlify.params({ affiliations: 'OWNER', first: 1 }, {\n-            nodes: [{\n-                    owner: {\n-                        login: typedGraphqlify.types.string,\n-                    },\n-                    name: typedGraphqlify.types.string,\n-                }],\n-        }),\n-    }),\n-});\n-\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-/** Thirty seconds in milliseconds. */\n-const THIRTY_SECONDS_IN_MS = 30000;\n-/** Gets whether a given pull request has been merged. */\n-function getPullRequestState(api, id) {\n-    return tslib.__awaiter(this, void 0, void 0, function* () {\n-        const { data } = yield api.github.pulls.get(Object.assign(Object.assign({}, api.remoteParams), { pull_number: id }));\n-        if (data.merged) {\n-            return 'merged';\n-        }\n-        // Check if the PR was closed more than 30 seconds ago, this extra time gives Github time to\n-        // update the closed pull request to be associated with the closing commit.\n-        // Note: a Date constructed with `null` creates an object at 0 time, which will never be greater\n-        // than the current date time.\n-        if (data.closed_at !== null &&\n-            (new Date(data.closed_at).getTime() < Date.now() - THIRTY_SECONDS_IN_MS)) {\n-            return (yield isPullRequestClosedWithAssociatedCommit(api, id)) ? 'merged' : 'closed';\n-        }\n-        return 'open';\n-    });\n-}\n-/**\n- * Whether the pull request has been closed with an associated commit. This is usually\n- * the case if a PR has been merged using the autosquash merge script strategy. Since\n- * the merge is not fast-forward, Github does not consider the PR as merged and instead\n- * shows the PR as closed. See for example: https://github.com/angular/angular/pull/37918.\n- */\n-function isPullRequestClosedWithAssociatedCommit(api, id) {\n-    return tslib.__awaiter(this, void 0, void 0, function* () {\n-        const request = api.github.issues.listEvents.endpoint.merge(Object.assign(Object.assign({}, api.remoteParams), { issue_number: id }));\n-        const events = yield api.github.paginate(request);\n-        // Iterate through the events of the pull request in reverse. We want to find the most\n-        // recent events and check if the PR has been closed with a commit associated with it.\n-        // If the PR has been closed through a commit, we assume that the PR has been merged\n-        // using the autosquash merge strategy. For more details. See the `AutosquashMergeStrategy`.\n-        for (let i = events.length - 1; i >= 0; i--) {\n-            const { event, commit_id } = events[i];\n-            // If we come across a \"reopened\" event, we abort looking for referenced commits. Any\n-            // commits that closed the PR before, are no longer relevant and did not close the PR.\n-            if (event === 'reopened') {\n-                return false;\n-            }\n-            // If a `closed` event is captured with a commit assigned, then we assume that\n-            // this PR has been merged properly.\n-            if (event === 'closed' && commit_id) {\n-                return true;\n-            }\n-            // If the PR has been referenced by a commit, check if the commit closes this pull\n-            // request. Note that this is needed besides checking `closed` as PRs could be merged\n-            // into any non-default branch where the `Closes <..>` keyword does not work and the PR\n-            // is simply closed without an associated `commit_id`. For more details see:\n-            // https://docs.github.com/en/enterprise/2.16/user/github/managing-your-work-on-github/closing-issues-using-keywords#:~:text=non-default.\n-            if (event === 'referenced' && commit_id &&\n-                (yield isCommitClosingPullRequest(api, commit_id, id))) {\n-                return true;\n-            }\n-        }\n-        return false;\n-    });\n-}\n-/** Checks whether the specified commit is closing the given pull request. */\n-function isCommitClosingPullRequest(api, sha, id) {\n-    return tslib.__awaiter(this, void 0, void 0, function* () {\n-        const { data } = yield api.github.repos.getCommit(Object.assign(Object.assign({}, api.remoteParams), { ref: sha }));\n-        // Matches the closing keyword supported in commit messages. See:\n-        // https://docs.github.com/en/enterprise/2.16/user/github/managing-your-work-on-github/closing-issues-using-keywords.\n-        return data.commit.message.match(new RegExp(`(?:close[sd]?|fix(?:e[sd]?)|resolve[sd]?):? #${id}(?!\\\\d)`, 'i'));\n-    });\n-}\n-\n /**\n  * @license\n  * Copyright Google LLC All Rights Reserved.\n@@ -6031,6 +5803,8 @@ _%>\n _%>\n `;\n \n+/** Project-relative path for the changelog file. */\n+const changelogPath = 'CHANGELOG.md';\n /** Gets the path for the changelog file in a given project. */\n function getLocalChangelogFilePath(projectDir) {\n     return path.join(projectDir, changelogPath);\n@@ -6110,6 +5884,232 @@ class ReleaseNotes {\n     }\n }\n \n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+/** Gets the commit message for a new release point in the project. */\n+function getCommitMessageForRelease(newVersion) {\n+    return `release: cut the v${newVersion} release`;\n+}\n+/**\n+ * Gets the commit message for an exceptional version bump in the next branch. The next\n+ * branch version will be bumped without the release being published in some situations.\n+ * More details can be found in the `MoveNextIntoFeatureFreeze` release action and in:\n+ * https://hackmd.io/2Le8leq0S6G_R5VEVTNK9A.\n+ */\n+function getCommitMessageForExceptionalNextVersionBump(newVersion) {\n+    return `release: bump the next branch to v${newVersion}`;\n+}\n+/** Gets the commit message for a release notes cherry-pick commit */\n+function getReleaseNoteCherryPickCommitMessage(newVersion) {\n+    return `docs: release notes for the v${newVersion} release`;\n+}\n+\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+/** Project-relative path for the \"package.json\" file. */\n+const packageJsonPath = 'package.json';\n+/** Default interval in milliseconds to check whether a pull request has been merged. */\n+const waitForPullRequestInterval = 10000;\n+\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+/*\n+ * ###############################################################\n+ *\n+ * This file contains helpers for invoking external `ng-dev` commands. A subset of actions,\n+ * like building release output or setting aν NPM dist tag for release packages, cannot be\n+ * performed directly as part of the release tool and need to be delegated to external `ng-dev`\n+ * commands that exist across arbitrary version branches.\n+ *\n+ * In a concrete example: Consider a new patch version is released and that a new release\n+ * package has been added to the `next` branch. The patch branch will not contain the new\n+ * release package, so we could not build the release output for it. To work around this, we\n+ * call the ng-dev build command for the patch version branch and expect it to return a list\n+ * of built packages that need to be released as part of this release train.\n+ *\n+ * ###############################################################\n+ */\n+/**\n+ * Invokes the `ng-dev release set-dist-tag` command in order to set the specified\n+ * NPM dist tag for all packages in the checked out branch to the given version.\n+ */\n+function invokeSetNpmDistCommand(npmDistTag, version) {\n+    return tslib.__awaiter(this, void 0, void 0, function* () {\n+        try {\n+            // Note: No progress indicator needed as that is the responsibility of the command.\n+            yield spawnWithDebugOutput('yarn', ['--silent', 'ng-dev', 'release', 'set-dist-tag', npmDistTag, version.format()]);\n+            info(green(`  ✓   Set \"${npmDistTag}\" NPM dist tag for all packages to v${version}.`));\n+        }\n+        catch (e) {\n+            error(e);\n+            error(red(`  ✘   An error occurred while setting the NPM dist tag for \"${npmDistTag}\".`));\n+            throw new FatalReleaseActionError();\n+        }\n+    });\n+}\n+/**\n+ * Invokes the `ng-dev release build` command in order to build the release\n+ * packages for the currently checked out branch.\n+ */\n+function invokeReleaseBuildCommand() {\n+    return tslib.__awaiter(this, void 0, void 0, function* () {\n+        const spinner = ora.call(undefined).start('Building release output.');\n+        try {\n+            // Since we expect JSON to be printed from the `ng-dev release build` command,\n+            // we spawn the process in silent mode. We have set up an Ora progress spinner.\n+            const { stdout } = yield spawnWithDebugOutput('yarn', ['--silent', 'ng-dev', 'release', 'build', '--json'], { mode: 'silent' });\n+            spinner.stop();\n+            info(green('  ✓   Built release output for all packages.'));\n+            // The `ng-dev release build` command prints a JSON array to stdout\n+            // that represents the built release packages and their output paths.\n+            return JSON.parse(stdout.trim());\n+        }\n+        catch (e) {\n+            spinner.stop();\n+            error(e);\n+            error(red('  ✘   An error occurred while building the release packages.'));\n+            throw new FatalReleaseActionError();\n+        }\n+    });\n+}\n+/**\n+ * Invokes the `yarn install` command in order to install dependencies for\n+ * the configured project with the currently checked out revision.\n+ */\n+function invokeYarnInstallCommand(projectDir) {\n+    return tslib.__awaiter(this, void 0, void 0, function* () {\n+        try {\n+            // Note: No progress indicator needed as that is the responsibility of the command.\n+            // TODO: Consider using an Ora spinner instead to ensure minimal console output.\n+            yield spawnWithDebugOutput('yarn', ['install', '--frozen-lockfile', '--non-interactive'], { cwd: projectDir });\n+            info(green('  ✓   Installed project dependencies.'));\n+        }\n+        catch (e) {\n+            error(e);\n+            error(red('  ✘   An error occurred while installing dependencies.'));\n+            throw new FatalReleaseActionError();\n+        }\n+    });\n+}\n+\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+/**\n+ * Graphql Github API query that can be used to find forks of a given repository\n+ * that are owned by the current viewer authenticated with the Github API.\n+ */\n+const findOwnedForksOfRepoQuery = typedGraphqlify.params({\n+    $owner: 'String!',\n+    $name: 'String!',\n+}, {\n+    repository: typedGraphqlify.params({ owner: '$owner', name: '$name' }, {\n+        forks: typedGraphqlify.params({ affiliations: 'OWNER', first: 1 }, {\n+            nodes: [{\n+                    owner: {\n+                        login: typedGraphqlify.types.string,\n+                    },\n+                    name: typedGraphqlify.types.string,\n+                }],\n+        }),\n+    }),\n+});\n+\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+/** Thirty seconds in milliseconds. */\n+const THIRTY_SECONDS_IN_MS = 30000;\n+/** Gets whether a given pull request has been merged. */\n+function getPullRequestState(api, id) {\n+    return tslib.__awaiter(this, void 0, void 0, function* () {\n+        const { data } = yield api.github.pulls.get(Object.assign(Object.assign({}, api.remoteParams), { pull_number: id }));\n+        if (data.merged) {\n+            return 'merged';\n+        }\n+        // Check if the PR was closed more than 30 seconds ago, this extra time gives Github time to\n+        // update the closed pull request to be associated with the closing commit.\n+        // Note: a Date constructed with `null` creates an object at 0 time, which will never be greater\n+        // than the current date time.\n+        if (data.closed_at !== null &&\n+            (new Date(data.closed_at).getTime() < Date.now() - THIRTY_SECONDS_IN_MS)) {\n+            return (yield isPullRequestClosedWithAssociatedCommit(api, id)) ? 'merged' : 'closed';\n+        }\n+        return 'open';\n+    });\n+}\n+/**\n+ * Whether the pull request has been closed with an associated commit. This is usually\n+ * the case if a PR has been merged using the autosquash merge script strategy. Since\n+ * the merge is not fast-forward, Github does not consider the PR as merged and instead\n+ * shows the PR as closed. See for example: https://github.com/angular/angular/pull/37918.\n+ */\n+function isPullRequestClosedWithAssociatedCommit(api, id) {\n+    return tslib.__awaiter(this, void 0, void 0, function* () {\n+        const request = api.github.issues.listEvents.endpoint.merge(Object.assign(Object.assign({}, api.remoteParams), { issue_number: id }));\n+        const events = yield api.github.paginate(request);\n+        // Iterate through the events of the pull request in reverse. We want to find the most\n+        // recent events and check if the PR has been closed with a commit associated with it.\n+        // If the PR has been closed through a commit, we assume that the PR has been merged\n+        // using the autosquash merge strategy. For more details. See the `AutosquashMergeStrategy`.\n+        for (let i = events.length - 1; i >= 0; i--) {\n+            const { event, commit_id } = events[i];\n+            // If we come across a \"reopened\" event, we abort looking for referenced commits. Any\n+            // commits that closed the PR before, are no longer relevant and did not close the PR.\n+            if (event === 'reopened') {\n+                return false;\n+            }\n+            // If a `closed` event is captured with a commit assigned, then we assume that\n+            // this PR has been merged properly.\n+            if (event === 'closed' && commit_id) {\n+                return true;\n+            }\n+            // If the PR has been referenced by a commit, check if the commit closes this pull\n+            // request. Note that this is needed besides checking `closed` as PRs could be merged\n+            // into any non-default branch where the `Closes <..>` keyword does not work and the PR\n+            // is simply closed without an associated `commit_id`. For more details see:\n+            // https://docs.github.com/en/enterprise/2.16/user/github/managing-your-work-on-github/closing-issues-using-keywords#:~:text=non-default.\n+            if (event === 'referenced' && commit_id &&\n+                (yield isCommitClosingPullRequest(api, commit_id, id))) {\n+                return true;\n+            }\n+        }\n+        return false;\n+    });\n+}\n+/** Checks whether the specified commit is closing the given pull request. */\n+function isCommitClosingPullRequest(api, sha, id) {\n+    return tslib.__awaiter(this, void 0, void 0, function* () {\n+        const { data } = yield api.github.repos.getCommit(Object.assign(Object.assign({}, api.remoteParams), { ref: sha }));\n+        // Matches the closing keyword supported in commit messages. See:\n+        // https://docs.github.com/en/enterprise/2.16/user/github/managing-your-work-on-github/closing-issues-using-keywords.\n+        return data.commit.message.match(new RegExp(`(?:close[sd]?|fix(?:e[sd]?)|resolve[sd]?):? #${id}(?!\\\\d)`, 'i'));\n+    });\n+}\n+\n /**\n  * @license\n  * Copyright Google LLC All Rights Reserved."
        },
        {
            "sha": "89bf53e15ea6b7793947f1307c9f0dc9eacd051c",
            "filename": "dev-infra/release/notes/BUILD.bazel",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/angular/angular/blob/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fnotes%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fnotes%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fnotes%2FBUILD.bazel?ref=a9584c929b07ef63485d16ef5c8b0217a5a03104",
            "patch": "@@ -0,0 +1,22 @@\n+load(\"@npm//@bazel/typescript:index.bzl\", \"ts_library\")\n+\n+ts_library(\n+    name = \"notes\",\n+    srcs = glob([\n+        \"**/*.ts\",\n+    ]),\n+    module_name = \"@angular/dev-infra-private/release/notes\",\n+    visibility = [\"//dev-infra:__subpackages__\"],\n+    deps = [\n+        \"//dev-infra/commit-message\",\n+        \"//dev-infra/release/config\",\n+        \"//dev-infra/release/versioning\",\n+        \"//dev-infra/utils\",\n+        \"@npm//@types/ejs\",\n+        \"@npm//@types/node\",\n+        \"@npm//@types/semver\",\n+        \"@npm//@types/yargs\",\n+        \"@npm//ejs\",\n+        \"@npm//semver\",\n+    ],\n+)"
        },
        {
            "sha": "ae7612df8570c9eac02ff122f379641c572e866e",
            "filename": "dev-infra/release/notes/context.ts",
            "status": "renamed",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fnotes%2Fcontext.ts",
            "raw_url": "https://github.com/angular/angular/raw/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fnotes%2Fcontext.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fnotes%2Fcontext.ts?ref=a9584c929b07ef63485d16ef5c8b0217a5a03104",
            "patch": "@@ -6,10 +6,10 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import {COMMIT_TYPES, ReleaseNotesLevel} from '../../../commit-message/config';\n-import {CommitFromGitLog} from '../../../commit-message/parse';\n-import {GithubConfig} from '../../../utils/config';\n-import {ReleaseNotesConfig} from '../../config/index';\n+import {COMMIT_TYPES, ReleaseNotesLevel} from '../../commit-message/config';\n+import {CommitFromGitLog} from '../../commit-message/parse';\n+import {GithubConfig} from '../../utils/config';\n+import {ReleaseNotesConfig} from '../config/index';\n \n \n /** List of types to be included in the release notes. */",
            "previous_filename": "dev-infra/release/publish/release-notes/context.ts"
        },
        {
            "sha": "68ab306f1fd687e871d5f5dfe9a4dec9196a2841",
            "filename": "dev-infra/release/notes/release-notes.ts",
            "status": "renamed",
            "additions": 5,
            "deletions": 12,
            "changes": 17,
            "blob_url": "https://github.com/angular/angular/blob/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fnotes%2Frelease-notes.ts",
            "raw_url": "https://github.com/angular/angular/raw/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fnotes%2Frelease-notes.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fnotes%2Frelease-notes.ts?ref=a9584c929b07ef63485d16ef5c8b0217a5a03104",
            "patch": "@@ -6,25 +6,18 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n import {render} from 'ejs';\n-import {join} from 'path';\n import * as semver from 'semver';\n-import {CommitFromGitLog} from '../../../commit-message/parse';\n+import {CommitFromGitLog} from '../../commit-message/parse';\n \n-import {getCommitsInRange} from '../../../commit-message/utils';\n-import {promptInput} from '../../../utils/console';\n-import {GitClient} from '../../../utils/git/index';\n-import {DevInfraReleaseConfig, getReleaseConfig, ReleaseNotesConfig} from '../../config/index';\n-import {changelogPath} from '../constants';\n+import {getCommitsInRange} from '../../commit-message/utils';\n+import {promptInput} from '../../utils/console';\n+import {GitClient} from '../../utils/git/index';\n+import {DevInfraReleaseConfig, getReleaseConfig, ReleaseNotesConfig} from '../config/index';\n import {RenderContext} from './context';\n \n import changelogTemplate from './templates/changelog';\n import githubReleaseTemplate from './templates/github-release';\n \n-/** Gets the path for the changelog file in a given project. */\n-export function getLocalChangelogFilePath(projectDir: string): string {\n-  return join(projectDir, changelogPath);\n-}\n-\n /** Release note generation. */\n export class ReleaseNotes {\n   static async fromRange(version: semver.SemVer, startingRef: string, endingRef: string) {",
            "previous_filename": "dev-infra/release/publish/release-notes/release-notes.ts"
        },
        {
            "sha": "8b96d62531e357acb31a578087a36f4255b05720",
            "filename": "dev-infra/release/notes/templates/changelog.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/angular/angular/blob/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fnotes%2Ftemplates%2Fchangelog.ts",
            "raw_url": "https://github.com/angular/angular/raw/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fnotes%2Ftemplates%2Fchangelog.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fnotes%2Ftemplates%2Fchangelog.ts?ref=a9584c929b07ef63485d16ef5c8b0217a5a03104",
            "previous_filename": "dev-infra/release/publish/release-notes/templates/changelog.ts"
        },
        {
            "sha": "8b96d62531e357acb31a578087a36f4255b05720",
            "filename": "dev-infra/release/notes/templates/github-release.ts",
            "status": "renamed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/angular/angular/blob/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fnotes%2Ftemplates%2Fgithub-release.ts",
            "raw_url": "https://github.com/angular/angular/raw/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fnotes%2Ftemplates%2Fgithub-release.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fnotes%2Ftemplates%2Fgithub-release.ts?ref=a9584c929b07ef63485d16ef5c8b0217a5a03104",
            "previous_filename": "dev-infra/release/publish/release-notes/templates/github-release.ts"
        },
        {
            "sha": "8a42cff68464a159f9564cf7bc9657a4c0923547",
            "filename": "dev-infra/release/publish/BUILD.bazel",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fpublish%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fpublish%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fpublish%2FBUILD.bazel?ref=a9584c929b07ef63485d16ef5c8b0217a5a03104",
            "patch": "@@ -11,6 +11,7 @@ ts_library(\n         \"//dev-infra/commit-message\",\n         \"//dev-infra/pr/merge\",\n         \"//dev-infra/release/config\",\n+        \"//dev-infra/release/notes\",\n         \"//dev-infra/release/versioning\",\n         \"//dev-infra/utils\",\n         \"@npm//@octokit/rest\","
        },
        {
            "sha": "121b64493db14b8ceebe5ccf6d82ab3e8854a656",
            "filename": "dev-infra/release/publish/actions.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fpublish%2Factions.ts",
            "raw_url": "https://github.com/angular/angular/raw/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fpublish%2Factions.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fpublish%2Factions.ts?ref=a9584c929b07ef63485d16ef5c8b0217a5a03104",
            "patch": "@@ -15,6 +15,7 @@ import {debug, error, green, info, promptConfirm, red, warn, yellow} from '../..\n import {getListCommitsInBranchUrl, getRepositoryGitUrl} from '../../utils/git/github-urls';\n import {GitClient} from '../../utils/git/index';\n import {BuiltPackage, ReleaseConfig} from '../config/index';\n+import {ReleaseNotes} from '../notes/release-notes';\n import {NpmDistTag} from '../versioning';\n import {ActiveReleaseTrains} from '../versioning/active-release-trains';\n import {runNpmPublish} from '../versioning/npm-publish';\n@@ -25,7 +26,6 @@ import {changelogPath, packageJsonPath, waitForPullRequestInterval} from './cons\n import {invokeReleaseBuildCommand, invokeYarnInstallCommand} from './external-commands';\n import {findOwnedForksOfRepoQuery} from './graphql-queries';\n import {getPullRequestState} from './pull-request-state';\n-import {getLocalChangelogFilePath, ReleaseNotes} from './release-notes/release-notes';\n \n /** Interface describing a Github repository. */\n export interface GithubRepo {\n@@ -320,7 +320,7 @@ export abstract class ReleaseAction {\n    * @returns A boolean indicating whether the release notes have been prepended.\n    */\n   protected async prependReleaseNotesToChangelog(releaseNotes: ReleaseNotes): Promise<void> {\n-    const localChangelogPath = getLocalChangelogFilePath(this.projectDir);\n+    const localChangelogPath = join(this.projectDir, changelogPath);\n     const localChangelog = await fs.readFile(localChangelogPath, 'utf8');\n     const releaseNotesEntry = await releaseNotes.getChangelogEntry();\n     await fs.writeFile(localChangelogPath, `${releaseNotesEntry}\\n\\n${localChangelog}`);"
        },
        {
            "sha": "02bd4badb355ae814037b880fbb7e101db5099eb",
            "filename": "dev-infra/release/publish/actions/move-next-into-feature-freeze.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fpublish%2Factions%2Fmove-next-into-feature-freeze.ts",
            "raw_url": "https://github.com/angular/angular/raw/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fpublish%2Factions%2Fmove-next-into-feature-freeze.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fpublish%2Factions%2Fmove-next-into-feature-freeze.ts?ref=a9584c929b07ef63485d16ef5c8b0217a5a03104",
            "patch": "@@ -9,12 +9,12 @@\n import * as semver from 'semver';\n \n import {green, info, yellow} from '../../../utils/console';\n+import {ReleaseNotes} from '../../notes/release-notes';\n import {ActiveReleaseTrains} from '../../versioning/active-release-trains';\n import {computeNewPrereleaseVersionForNext} from '../../versioning/next-prerelease-version';\n import {ReleaseAction} from '../actions';\n import {getCommitMessageForExceptionalNextVersionBump, getReleaseNoteCherryPickCommitMessage} from '../commit-message';\n import {changelogPath, packageJsonPath} from '../constants';\n-import {ReleaseNotes} from '../release-notes/release-notes';\n \n /**\n  * Release action that moves the next release-train into the feature-freeze phase. This means"
        },
        {
            "sha": "530c1b8c47f083baf26f4caa30dab4c0a0d85e90",
            "filename": "dev-infra/release/publish/constants.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fpublish%2Fconstants.ts",
            "raw_url": "https://github.com/angular/angular/raw/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fpublish%2Fconstants.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fpublish%2Fconstants.ts?ref=a9584c929b07ef63485d16ef5c8b0217a5a03104",
            "patch": "@@ -6,11 +6,11 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-/** Project-relative path for the changelog file. */\n-export const changelogPath = 'CHANGELOG.md';\n-\n /** Project-relative path for the \"package.json\" file. */\n export const packageJsonPath = 'package.json';\n \n+/** Project-relative path for the changelog file. */\n+export const changelogPath = 'CHANGELOG.md';\n+\n /** Default interval in milliseconds to check whether a pull request has been merged. */\n export const waitForPullRequestInterval = 10000;"
        },
        {
            "sha": "377a65cc7512921ec98be3d1f566f4f0fbb3e6d3",
            "filename": "dev-infra/release/publish/test/BUILD.bazel",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fpublish%2Ftest%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fpublish%2Ftest%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fpublish%2Ftest%2FBUILD.bazel?ref=a9584c929b07ef63485d16ef5c8b0217a5a03104",
            "patch": "@@ -10,6 +10,7 @@ ts_library(\n     deps = [\n         \"//dev-infra/commit-message\",\n         \"//dev-infra/release/config\",\n+        \"//dev-infra/release/notes\",\n         \"//dev-infra/release/publish\",\n         \"//dev-infra/release/versioning\",\n         \"//dev-infra/utils\","
        },
        {
            "sha": "fe167ada6f79bbd019b47095fa65aef7fe1ca29a",
            "filename": "dev-infra/release/publish/test/common.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fpublish%2Ftest%2Fcommon.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fpublish%2Ftest%2Fcommon.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fpublish%2Ftest%2Fcommon.spec.ts?ref=a9584c929b07ef63485d16ef5c8b0217a5a03104",
            "patch": "@@ -11,14 +11,13 @@ import {join} from 'path';\n import * as semver from 'semver';\n \n import {getBranchPushMatcher} from '../../../utils/testing';\n+import {changelogPath, ReleaseNotes} from '../../notes/release-notes';\n import {NpmDistTag} from '../../versioning';\n import {ActiveReleaseTrains} from '../../versioning/active-release-trains';\n import * as npm from '../../versioning/npm-publish';\n import {ReleaseTrain} from '../../versioning/release-trains';\n import {ReleaseAction} from '../actions';\n import {actions} from '../actions/index';\n-import {changelogPath} from '../constants';\n-import {ReleaseNotes} from '../release-notes/release-notes';\n \n import {fakeNpmPackageQueryRequest, getTestingMocksForReleaseAction, parse, setupReleaseActionForTesting, testTmpDir} from './test-utils';\n "
        },
        {
            "sha": "40553742cc3fa22f5b9d072797dcc082d25206b6",
            "filename": "dev-infra/release/publish/test/release-notes/context.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fpublish%2Ftest%2Frelease-notes%2Fcontext.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fpublish%2Ftest%2Frelease-notes%2Fcontext.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fpublish%2Ftest%2Frelease-notes%2Fcontext.spec.ts?ref=a9584c929b07ef63485d16ef5c8b0217a5a03104",
            "patch": "@@ -8,7 +8,7 @@\n \n import {CommitFromGitLog, parseCommitFromGitLog} from '../../../../commit-message/parse';\n import {commitMessageBuilder} from '../../../../commit-message/test-util';\n-import {RenderContext, RenderContextData,} from '../../release-notes/context';\n+import {RenderContext, RenderContextData,} from '../../../notes/context';\n \n const defaultContextData: RenderContextData = {\n   commits: [],"
        },
        {
            "sha": "49190cd7967daf3902c1532d4169247cbcc2072b",
            "filename": "dev-infra/release/publish/test/release-notes/release-notes-utils.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fpublish%2Ftest%2Frelease-notes%2Frelease-notes-utils.ts",
            "raw_url": "https://github.com/angular/angular/raw/a9584c929b07ef63485d16ef5c8b0217a5a03104/dev-infra%2Frelease%2Fpublish%2Ftest%2Frelease-notes%2Frelease-notes-utils.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fpublish%2Ftest%2Frelease-notes%2Frelease-notes-utils.ts?ref=a9584c929b07ef63485d16ef5c8b0217a5a03104",
            "patch": "@@ -9,7 +9,7 @@\n import * as semver from 'semver';\n \n import {DevInfraReleaseConfig, ReleaseConfig} from '../../../config';\n-import {ReleaseNotes} from '../../release-notes/release-notes';\n+import {ReleaseNotes} from '../../../notes/release-notes';\n \n /**\n  * Mock version of the ReleaseNotes for testing, preventing actual calls to git for commits and"
        }
    ],
    "stats": {
        "total": 524,
        "additions": 270,
        "deletions": 254
    }
}