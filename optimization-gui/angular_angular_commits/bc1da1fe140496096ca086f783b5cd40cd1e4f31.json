{
    "author": "josephperrott",
    "message": "feat(dev-infra): create caretaker handoff assistant to update github team membership (#42859)\n\nCreate a handoff assistant, currently only assists in updating github team membership\nfor caretaking team.\n\nPR Close #42859",
    "sha": "bc1da1fe140496096ca086f783b5cd40cd1e4f31",
    "files": [
        {
            "sha": "2939ff95384ea11cf33f0fcc898b80f945d9f579",
            "filename": "dev-infra/build-worker.js",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/bc1da1fe140496096ca086f783b5cd40cd1e4f31/dev-infra%2Fbuild-worker.js",
            "raw_url": "https://github.com/angular/angular/raw/bc1da1fe140496096ca086f783b5cd40cd1e4f31/dev-infra%2Fbuild-worker.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fbuild-worker.js?ref=bc1da1fe140496096ca086f783b5cd40cd1e4f31",
            "patch": "@@ -65,6 +65,7 @@ var GithubClient = /** @class */ (function () {\n         this.issues = this._octokit.issues;\n         this.git = this._octokit.git;\n         this.rateLimit = this._octokit.rateLimit;\n+        this.teams = this._octokit.teams;\n         // Note: These are properties from `Octokit` that are brought in by optional plugins.\n         // TypeScript requires us to provide an explicit type for these.\n         this.rest = this._octokit.rest;"
        },
        {
            "sha": "361b4c9ccec5579a0e9c846334d68c6f38f80e23",
            "filename": "dev-infra/caretaker/BUILD.bazel",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/bc1da1fe140496096ca086f783b5cd40cd1e4f31/dev-infra%2Fcaretaker%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/bc1da1fe140496096ca086f783b5cd40cd1e4f31/dev-infra%2Fcaretaker%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fcaretaker%2FBUILD.bazel?ref=bc1da1fe140496096ca086f783b5cd40cd1e4f31",
            "patch": "@@ -10,9 +10,11 @@ ts_library(\n     deps = [\n         \"//dev-infra/release/versioning\",\n         \"//dev-infra/utils\",\n+        \"@npm//@types/inquirer\",\n         \"@npm//@types/node\",\n         \"@npm//@types/node-fetch\",\n         \"@npm//@types/yargs\",\n+        \"@npm//inquirer\",\n         \"@npm//multimatch\",\n         \"@npm//node-fetch\",\n         \"@npm//typed-graphqlify\","
        },
        {
            "sha": "8a589c43db5a342091fdd745a445bd91be37e3c9",
            "filename": "dev-infra/caretaker/cli.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/bc1da1fe140496096ca086f783b5cd40cd1e4f31/dev-infra%2Fcaretaker%2Fcli.ts",
            "raw_url": "https://github.com/angular/angular/raw/bc1da1fe140496096ca086f783b5cd40cd1e4f31/dev-infra%2Fcaretaker%2Fcli.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fcaretaker%2Fcli.ts?ref=bc1da1fe140496096ca086f783b5cd40cd1e4f31",
            "patch": "@@ -8,9 +8,10 @@\n \n import {Argv} from 'yargs';\n import {CheckModule} from './check/cli';\n+import {HandoffModule} from './handoff/cli';\n \n \n /** Build the parser for the caretaker commands. */\n export function buildCaretakerParser(yargs: Argv) {\n-  return yargs.command(CheckModule);\n+  return yargs.command(CheckModule).command(HandoffModule);\n }"
        },
        {
            "sha": "027158e1e39a6abbb387065dc87fe41d9e2b726e",
            "filename": "dev-infra/caretaker/config.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/bc1da1fe140496096ca086f783b5cd40cd1e4f31/dev-infra%2Fcaretaker%2Fconfig.ts",
            "raw_url": "https://github.com/angular/angular/raw/bc1da1fe140496096ca086f783b5cd40cd1e4f31/dev-infra%2Fcaretaker%2Fconfig.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fcaretaker%2Fconfig.ts?ref=bc1da1fe140496096ca086f783b5cd40cd1e4f31",
            "patch": "@@ -9,7 +9,13 @@\n import {assertNoErrors, getConfig, NgDevConfig} from '../utils/config';\n \n export interface CaretakerConfig {\n+  /** Github queries showing a snapshot of pulls/issues caretakers need to monitor. */\n   githubQueries?: {name: string; query: string;}[];\n+  /**\n+   * The Github group used to track current caretakers. A second group is assumed to exist with the\n+   * name \"<group-name>-roster\" containing a list of all users eligible for the caretaker group.\n+   * */\n+  caretakerGroup?: string;\n }\n \n /** Retrieve and validate the config as `CaretakerConfig`. */"
        },
        {
            "sha": "a59fc824803efea2ce07b09455371628ab5c8a0b",
            "filename": "dev-infra/caretaker/handoff/cli.ts",
            "status": "added",
            "additions": 36,
            "deletions": 0,
            "changes": 36,
            "blob_url": "https://github.com/angular/angular/blob/bc1da1fe140496096ca086f783b5cd40cd1e4f31/dev-infra%2Fcaretaker%2Fhandoff%2Fcli.ts",
            "raw_url": "https://github.com/angular/angular/raw/bc1da1fe140496096ca086f783b5cd40cd1e4f31/dev-infra%2Fcaretaker%2Fhandoff%2Fcli.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fcaretaker%2Fhandoff%2Fcli.ts?ref=bc1da1fe140496096ca086f783b5cd40cd1e4f31",
            "patch": "@@ -0,0 +1,36 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+import {Argv, CommandModule} from 'yargs';\n+\n+import {addGithubTokenOption} from '../../utils/git/github-yargs';\n+\n+import {updateCaretakerTeamViaPrompt} from './update-github-team';\n+\n+\n+export interface CaretakerHandoffOptions {\n+  githubToken: string;\n+}\n+\n+/** Builds the command. */\n+function builder(yargs: Argv) {\n+  return addGithubTokenOption(yargs);\n+}\n+\n+/** Handles the command. */\n+async function handler() {\n+  await updateCaretakerTeamViaPrompt();\n+}\n+\n+/** yargs command module for assisting in handing off caretaker.  */\n+export const HandoffModule: CommandModule<{}, CaretakerHandoffOptions> = {\n+  handler,\n+  builder,\n+  command: 'handoff',\n+  describe: 'Run a handoff assistant to aide in moving to the next caretaker',\n+};"
        },
        {
            "sha": "337ff7d2583d63462958dca8f6f722a32cc8fb8e",
            "filename": "dev-infra/caretaker/handoff/update-github-team.ts",
            "status": "added",
            "additions": 132,
            "deletions": 0,
            "changes": 132,
            "blob_url": "https://github.com/angular/angular/blob/bc1da1fe140496096ca086f783b5cd40cd1e4f31/dev-infra%2Fcaretaker%2Fhandoff%2Fupdate-github-team.ts",
            "raw_url": "https://github.com/angular/angular/raw/bc1da1fe140496096ca086f783b5cd40cd1e4f31/dev-infra%2Fcaretaker%2Fhandoff%2Fupdate-github-team.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fcaretaker%2Fhandoff%2Fupdate-github-team.ts?ref=bc1da1fe140496096ca086f783b5cd40cd1e4f31",
            "patch": "@@ -0,0 +1,132 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+import {prompt} from 'inquirer';\n+\n+import {debug, green, info, red, yellow} from '../../utils/console';\n+import {AuthenticatedGitClient} from '../../utils/git/authenticated-git-client';\n+import {getCaretakerConfig} from '../config';\n+\n+/** Update the Github caretaker group, using a prompt to obtain the new caretaker group members.  */\n+export async function updateCaretakerTeamViaPrompt() {\n+  /** Caretaker specific configuration. */\n+  const caretakerConfig = getCaretakerConfig().caretaker;\n+\n+  if (caretakerConfig.caretakerGroup === undefined) {\n+    throw Error('`caretakerGroup` is not defined in the `caretaker` config');\n+  }\n+\n+  /** The list of current members in the group. */\n+  const current = await getGroupMembers(caretakerConfig.caretakerGroup);\n+  /** The list of members able to be added to the group as defined by a separate roster group. */\n+  const roster = await getGroupMembers(`${caretakerConfig.caretakerGroup}-roster`);\n+  const {\n+    /** The list of users selected to be members of the caretaker group. */\n+    selected,\n+    /** Whether the user positively confirmed the selected made. */\n+    confirm\n+  } =\n+      await prompt([\n+        {\n+          type: 'checkbox',\n+          choices: roster,\n+          message: 'Select 2 caretakers for the upcoming rotation:',\n+          default: current,\n+          name: 'selected',\n+          prefix: '',\n+          validate: (selected: string[]) => {\n+            if (selected.length !== 2) {\n+              return 'Please select exactly 2 caretakers for the upcoming rotation.';\n+            }\n+            return true;\n+          },\n+        },\n+        {\n+          type: 'confirm',\n+          default: true,\n+          prefix: '',\n+          message: 'Are you sure?',\n+          name: 'confirm',\n+        }\n+      ]);\n+\n+  if (confirm === false) {\n+    info(yellow('  ⚠  Skipping caretaker group update.'));\n+    return;\n+  }\n+\n+  if (JSON.stringify(selected) === JSON.stringify(current)) {\n+    info(green('  √  Caretaker group already up to date.'));\n+    return;\n+  }\n+\n+  try {\n+    await setCaretakerGroup(caretakerConfig.caretakerGroup, selected);\n+  } catch {\n+    info(red('  ✘  Failed to update caretaker group.'));\n+    return;\n+  }\n+  info(green('  √  Successfully updated caretaker group'));\n+}\n+\n+\n+/** Retrieve the current list of members for the provided group. */\n+async function getGroupMembers(group: string) {\n+  /** The authenticated GitClient instance. */\n+  const git = AuthenticatedGitClient.get();\n+\n+  return (await git.github.teams.listMembersInOrg({\n+           org: git.remoteConfig.owner,\n+           team_slug: group,\n+         }))\n+      .data.filter(_ => !!_)\n+      .map(member => member!.login);\n+}\n+\n+async function setCaretakerGroup(group: string, members: string[]) {\n+  /** The authenticated GitClient instance. */\n+  const git = AuthenticatedGitClient.get();\n+  /** The full name of the group <org>/<group name>. */\n+  const fullSlug = `${git.remoteConfig.owner}/${group}`;\n+  /** The list of current members of the group. */\n+  const current = await getGroupMembers(group);\n+  /** The list of users to be removed from the group. */\n+  const removed = current.filter(login => !members.includes(login));\n+  /** Add a user to the group. */\n+  const add = async (username: string) => {\n+    debug(`Adding ${username} to ${fullSlug}.`);\n+    await git.github.teams.addOrUpdateMembershipForUserInOrg({\n+      org: git.remoteConfig.owner,\n+      team_slug: group,\n+      username,\n+      role: 'maintainer',\n+    });\n+  };\n+  /** Remove a user from the group. */\n+  const remove = async (username: string) => {\n+    debug(`Removing ${username} from ${fullSlug}.`);\n+    await git.github.teams.removeMembershipForUserInOrg({\n+      org: git.remoteConfig.owner,\n+      team_slug: group,\n+      username,\n+    });\n+  };\n+\n+  debug.group(`Caretaker Group: ${fullSlug}`);\n+  debug(`Current Membership: ${current.join(', ')}`);\n+  debug(`New Membership:     ${members.join(', ')}`);\n+  debug(`Removed:            ${removed.join(', ')}`);\n+  debug.groupEnd();\n+\n+  // Add members before removing to prevent the account performing the action from removing their\n+  // permissions to change the group membership early.\n+  await Promise.all(members.map(add));\n+  await Promise.all(removed.map(remove));\n+\n+  debug(`Successfuly updated ${fullSlug}`);\n+}"
        },
        {
            "sha": "378a19f067fc8699e2b071d872dbcec5ce0eb7c5",
            "filename": "dev-infra/ng-dev.js",
            "status": "modified",
            "additions": 196,
            "deletions": 51,
            "changes": 247,
            "blob_url": "https://github.com/angular/angular/blob/bc1da1fe140496096ca086f783b5cd40cd1e4f31/dev-infra%2Fng-dev.js",
            "raw_url": "https://github.com/angular/angular/raw/bc1da1fe140496096ca086f783b5cd40cd1e4f31/dev-infra%2Fng-dev.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fng-dev.js?ref=bc1da1fe140496096ca086f783b5cd40cd1e4f31",
            "patch": "@@ -228,6 +228,7 @@ var GithubClient = /** @class */ (function () {\n         this.issues = this._octokit.issues;\n         this.git = this._octokit.git;\n         this.rateLimit = this._octokit.rateLimit;\n+        this.teams = this._octokit.teams;\n         // Note: These are properties from `Octokit` that are brought in by optional plugins.\n         // TypeScript requires us to provide an explicit type for these.\n         this.rest = this._octokit.rest;\n@@ -1578,6 +1579,150 @@ const CheckModule = {\n     describe: 'Check the status of information the caretaker manages for the repository',\n };\n \n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+/** Update the Github caretaker group, using a prompt to obtain the new caretaker group members.  */\n+function updateCaretakerTeamViaPrompt() {\n+    return tslib.__awaiter(this, void 0, void 0, function* () {\n+        /** Caretaker specific configuration. */\n+        const caretakerConfig = getCaretakerConfig().caretaker;\n+        if (caretakerConfig.caretakerGroup === undefined) {\n+            throw Error('`caretakerGroup` is not defined in the `caretaker` config');\n+        }\n+        /** The list of current members in the group. */\n+        const current = yield getGroupMembers(caretakerConfig.caretakerGroup);\n+        /** The list of members able to be added to the group as defined by a separate roster group. */\n+        const roster = yield getGroupMembers(`${caretakerConfig.caretakerGroup}-roster`);\n+        const { \n+        /** The list of users selected to be members of the caretaker group. */\n+        selected, \n+        /** Whether the user positively confirmed the selected made. */\n+        confirm } = yield inquirer.prompt([\n+            {\n+                type: 'checkbox',\n+                choices: roster,\n+                message: 'Select 2 caretakers for the upcoming rotation:',\n+                default: current,\n+                name: 'selected',\n+                prefix: '',\n+                validate: (selected) => {\n+                    if (selected.length !== 2) {\n+                        return 'Please select exactly 2 caretakers for the upcoming rotation.';\n+                    }\n+                    return true;\n+                },\n+            },\n+            {\n+                type: 'confirm',\n+                default: true,\n+                prefix: '',\n+                message: 'Are you sure?',\n+                name: 'confirm',\n+            }\n+        ]);\n+        if (confirm === false) {\n+            info(yellow('  ⚠  Skipping caretaker group update.'));\n+            return;\n+        }\n+        if (JSON.stringify(selected) === JSON.stringify(current)) {\n+            info(green('  √  Caretaker group already up to date.'));\n+            return;\n+        }\n+        try {\n+            yield setCaretakerGroup(caretakerConfig.caretakerGroup, selected);\n+        }\n+        catch (_a) {\n+            info(red('  ✘  Failed to update caretaker group.'));\n+            return;\n+        }\n+        info(green('  √  Successfully updated caretaker group'));\n+    });\n+}\n+/** Retrieve the current list of members for the provided group. */\n+function getGroupMembers(group) {\n+    return tslib.__awaiter(this, void 0, void 0, function* () {\n+        /** The authenticated GitClient instance. */\n+        const git = AuthenticatedGitClient.get();\n+        return (yield git.github.teams.listMembersInOrg({\n+            org: git.remoteConfig.owner,\n+            team_slug: group,\n+        }))\n+            .data.filter(_ => !!_)\n+            .map(member => member.login);\n+    });\n+}\n+function setCaretakerGroup(group, members) {\n+    return tslib.__awaiter(this, void 0, void 0, function* () {\n+        /** The authenticated GitClient instance. */\n+        const git = AuthenticatedGitClient.get();\n+        /** The full name of the group <org>/<group name>. */\n+        const fullSlug = `${git.remoteConfig.owner}/${group}`;\n+        /** The list of current members of the group. */\n+        const current = yield getGroupMembers(group);\n+        /** The list of users to be removed from the group. */\n+        const removed = current.filter(login => !members.includes(login));\n+        /** Add a user to the group. */\n+        const add = (username) => tslib.__awaiter(this, void 0, void 0, function* () {\n+            debug(`Adding ${username} to ${fullSlug}.`);\n+            yield git.github.teams.addOrUpdateMembershipForUserInOrg({\n+                org: git.remoteConfig.owner,\n+                team_slug: group,\n+                username,\n+                role: 'maintainer',\n+            });\n+        });\n+        /** Remove a user from the group. */\n+        const remove = (username) => tslib.__awaiter(this, void 0, void 0, function* () {\n+            debug(`Removing ${username} from ${fullSlug}.`);\n+            yield git.github.teams.removeMembershipForUserInOrg({\n+                org: git.remoteConfig.owner,\n+                team_slug: group,\n+                username,\n+            });\n+        });\n+        debug.group(`Caretaker Group: ${fullSlug}`);\n+        debug(`Current Membership: ${current.join(', ')}`);\n+        debug(`New Membership:     ${members.join(', ')}`);\n+        debug(`Removed:            ${removed.join(', ')}`);\n+        debug.groupEnd();\n+        // Add members before removing to prevent the account performing the action from removing their\n+        // permissions to change the group membership early.\n+        yield Promise.all(members.map(add));\n+        yield Promise.all(removed.map(remove));\n+        debug(`Successfuly updated ${fullSlug}`);\n+    });\n+}\n+\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+/** Builds the command. */\n+function builder$1(yargs) {\n+    return addGithubTokenOption(yargs);\n+}\n+/** Handles the command. */\n+function handler$1() {\n+    return tslib.__awaiter(this, void 0, void 0, function* () {\n+        yield updateCaretakerTeamViaPrompt();\n+    });\n+}\n+/** yargs command module for assisting in handing off caretaker.  */\n+const HandoffModule = {\n+    handler: handler$1,\n+    builder: builder$1,\n+    command: 'handoff',\n+    describe: 'Run a handoff assistant to aide in moving to the next caretaker',\n+};\n+\n /**\n  * @license\n  * Copyright Google LLC All Rights Reserved.\n@@ -1587,7 +1732,7 @@ const CheckModule = {\n  */\n /** Build the parser for the caretaker commands. */\n function buildCaretakerParser(yargs) {\n-    return yargs.command(CheckModule);\n+    return yargs.command(CheckModule).command(HandoffModule);\n }\n \n /**\n@@ -1666,7 +1811,7 @@ function restoreCommitMessage(filePath, source) {\n  * found in the LICENSE file at https://angular.io/license\n  */\n /** Builds the command. */\n-function builder$1(yargs) {\n+function builder$2(yargs) {\n     return yargs\n         .option('file-env-variable', {\n         type: 'string',\n@@ -1678,7 +1823,7 @@ function builder$1(yargs) {\n         .positional('source', { type: 'string' });\n }\n /** Handles the command. */\n-function handler$1({ fileEnvVariable, file, source }) {\n+function handler$2({ fileEnvVariable, file, source }) {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         // File and source are provided as command line parameters\n         if (file !== undefined) {\n@@ -1700,8 +1845,8 @@ function handler$1({ fileEnvVariable, file, source }) {\n }\n /** yargs command module describing the command. */\n const RestoreCommitMessageModule = {\n-    handler: handler$1,\n-    builder: builder$1,\n+    handler: handler$2,\n+    builder: builder$2,\n     command: 'restore-commit-message-draft [file] [source]',\n     // Description: Restore a commit message draft if one has been saved from a failed commit attempt.\n     // No describe is defiend to hide the command from the --help.\n@@ -2116,7 +2261,7 @@ function validateFile(filePath, isErrorMode) {\n  * found in the LICENSE file at https://angular.io/license\n  */\n /** Builds the command. */\n-function builder$2(yargs) {\n+function builder$3(yargs) {\n     var _a;\n     return yargs\n         .option('file', {\n@@ -2146,16 +2291,16 @@ function builder$2(yargs) {\n     });\n }\n /** Handles the command. */\n-function handler$2({ error, file, fileEnvVariable }) {\n+function handler$3({ error, file, fileEnvVariable }) {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         const filePath = file || fileEnvVariable || '.git/COMMIT_EDITMSG';\n         validateFile(filePath, error);\n     });\n }\n /** yargs command module describing the command. */\n const ValidateFileModule = {\n-    handler: handler$2,\n-    builder: builder$2,\n+    handler: handler$3,\n+    builder: builder$3,\n     command: 'pre-commit-validate',\n     describe: 'Validate the most recent commit message',\n };\n@@ -2240,7 +2385,7 @@ function validateCommitRange(from, to) {\n  * found in the LICENSE file at https://angular.io/license\n  */\n /** Builds the command. */\n-function builder$3(yargs) {\n+function builder$4(yargs) {\n     return yargs\n         .positional('startingRef', {\n         description: 'The first ref in the range to select',\n@@ -2254,7 +2399,7 @@ function builder$3(yargs) {\n     });\n }\n /** Handles the command. */\n-function handler$3({ startingRef, endingRef }) {\n+function handler$4({ startingRef, endingRef }) {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         // If on CI, and no pull request number is provided, assume the branch\n         // being run on is an upstream branch.\n@@ -2270,8 +2415,8 @@ function handler$3({ startingRef, endingRef }) {\n }\n /** yargs command module describing the command. */\n const ValidateRangeModule = {\n-    handler: handler$3,\n-    builder: builder$3,\n+    handler: handler$4,\n+    builder: builder$4,\n     command: 'validate-range <starting-ref> [ending-ref]',\n     describe: 'Validate a range of commit messages',\n };\n@@ -2982,23 +3127,23 @@ function printTargetBranchesForPr(prNumber) {\n  * found in the LICENSE file at https://angular.io/license\n  */\n /** Builds the command. */\n-function builder$4(yargs) {\n+function builder$5(yargs) {\n     return yargs.positional('pr', {\n         description: 'The pull request number',\n         type: 'number',\n         demandOption: true,\n     });\n }\n /** Handles the command. */\n-function handler$4({ pr }) {\n+function handler$5({ pr }) {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         yield printTargetBranchesForPr(pr);\n     });\n }\n /** yargs command module describing the command.  */\n const CheckTargetBranchesModule = {\n-    handler: handler$4,\n-    builder: builder$4,\n+    handler: handler$5,\n+    builder: builder$5,\n     command: 'check-target-branches <pr>',\n     describe: 'Check a PR to determine what branches it is currently targeting',\n };\n@@ -3203,20 +3348,20 @@ function checkOutPullRequestLocally(prNumber, githubToken, opts = {}) {\n  * found in the LICENSE file at https://angular.io/license\n  */\n /** Builds the checkout pull request command. */\n-function builder$5(yargs) {\n+function builder$6(yargs) {\n     return addGithubTokenOption(yargs).positional('prNumber', { type: 'number', demandOption: true });\n }\n /** Handles the checkout pull request command. */\n-function handler$5({ prNumber, githubToken }) {\n+function handler$6({ prNumber, githubToken }) {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         const prCheckoutOptions = { allowIfMaintainerCannotModify: true, branchName: `pr-${prNumber}` };\n         yield checkOutPullRequestLocally(prNumber, githubToken, prCheckoutOptions);\n     });\n }\n /** yargs command module for checking out a PR  */\n const CheckoutCommandModule = {\n-    handler: handler$5,\n-    builder: builder$5,\n+    handler: handler$6,\n+    builder: builder$6,\n     command: 'checkout <pr-number>',\n     describe: 'Checkout a PR from the upstream repo',\n };\n@@ -4534,7 +4679,7 @@ function createPullRequestMergeTask(flags) {\n  * found in the LICENSE file at https://angular.io/license\n  */\n /** Builds the command. */\n-function builder$6(yargs) {\n+function builder$7(yargs) {\n     return addGithubTokenOption(yargs)\n         .help()\n         .strict()\n@@ -4550,7 +4695,7 @@ function builder$6(yargs) {\n     });\n }\n /** Handles the command. */\n-function handler$6(_a) {\n+function handler$7(_a) {\n     var pr = _a.pr, branchPrompt = _a.branchPrompt;\n     return tslib.__awaiter(this, void 0, void 0, function () {\n         return tslib.__generator(this, function (_b) {\n@@ -4565,8 +4710,8 @@ function handler$6(_a) {\n }\n /** yargs command module describing the command. */\n var MergeCommandModule = {\n-    handler: handler$6,\n-    builder: builder$6,\n+    handler: handler$7,\n+    builder: builder$7,\n     command: 'merge <pr>',\n     describe: 'Merge a PR into its targeted branches.',\n };\n@@ -5217,15 +5362,15 @@ function buildReleaseOutput(stampForRelease = false) {\n  * found in the LICENSE file at https://angular.io/license\n  */\n /** Yargs command builder for configuring the `ng-dev release build` command. */\n-function builder$7(argv) {\n+function builder$8(argv) {\n     return argv.option('json', {\n         type: 'boolean',\n         description: 'Whether the built packages should be printed to stdout as JSON.',\n         default: false,\n     });\n }\n /** Yargs command handler for building a release. */\n-function handler$7(args) {\n+function handler$8(args) {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         const { npmPackages } = getReleaseConfig();\n         let builtPackages = yield buildReleaseOutput(true);\n@@ -5260,8 +5405,8 @@ function handler$7(args) {\n }\n /** CLI command module for building release output. */\n const ReleaseBuildCommandModule = {\n-    builder: builder$7,\n-    handler: handler$7,\n+    builder: builder$8,\n+    handler: handler$8,\n     command: 'build',\n     describe: 'Builds the release output for the current branch.',\n };\n@@ -5337,7 +5482,7 @@ function printActiveReleaseTrains(active, config) {\n  * found in the LICENSE file at https://angular.io/license\n  */\n /** Yargs command handler for printing release information. */\n-function handler$8() {\n+function handler$9() {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         const git = GitClient.get();\n         const gitRepoWithApi = Object.assign({ api: git.github }, git.remoteConfig);\n@@ -5348,7 +5493,7 @@ function handler$8() {\n }\n /** CLI command module for retrieving release information. */\n const ReleaseInfoCommandModule = {\n-    handler: handler$8,\n+    handler: handler$9,\n     command: 'info',\n     describe: 'Prints active release trains to the console.',\n };\n@@ -5758,7 +5903,7 @@ class ReleaseNotes {\n  * found in the LICENSE file at https://angular.io/license\n  */\n /** Yargs command builder for configuring the `ng-dev release build` command. */\n-function builder$8(argv) {\n+function builder$9(argv) {\n     return argv\n         .option('releaseVersion', { type: 'string', default: '0.0.0', coerce: (version) => new semver.SemVer(version) })\n         .option('from', {\n@@ -5784,7 +5929,7 @@ function builder$8(argv) {\n     });\n }\n /** Yargs command handler for generating release notes. */\n-function handler$9({ releaseVersion, from, to, outFile, type }) {\n+function handler$a({ releaseVersion, from, to, outFile, type }) {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         // Since `yargs` evaluates defaults even if a value as been provided, if no value is provided to\n         // the handler, the latest semver tag on the branch is used.\n@@ -5805,8 +5950,8 @@ function handler$9({ releaseVersion, from, to, outFile, type }) {\n }\n /** CLI command module for generating release notes. */\n const ReleaseNotesCommandModule = {\n-    builder: builder$8,\n-    handler: handler$9,\n+    builder: builder$9,\n+    handler: handler$a,\n     command: 'notes',\n     describe: 'Generate release notes',\n };\n@@ -7367,11 +7512,11 @@ class ReleaseTool {\n  * found in the LICENSE file at https://angular.io/license\n  */\n /** Yargs command builder for configuring the `ng-dev release publish` command. */\n-function builder$9(argv) {\n+function builder$a(argv) {\n     return addGithubTokenOption(argv);\n }\n /** Yargs command handler for staging a release. */\n-function handler$a() {\n+function handler$b() {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         const git = GitClient.get();\n         const config = getConfig();\n@@ -7396,8 +7541,8 @@ function handler$a() {\n }\n /** CLI command module for publishing a release. */\n const ReleasePublishCommandModule = {\n-    builder: builder$9,\n-    handler: handler$a,\n+    builder: builder$a,\n+    handler: handler$b,\n     command: 'publish',\n     describe: 'Publish new releases and configure version branches.',\n };\n@@ -7409,7 +7554,7 @@ const ReleasePublishCommandModule = {\n  * Use of this source code is governed by an MIT-style license that can be\n  * found in the LICENSE file at https://angular.io/license\n  */\n-function builder$a(args) {\n+function builder$b(args) {\n     return args\n         .positional('tagName', {\n         type: 'string',\n@@ -7423,7 +7568,7 @@ function builder$a(args) {\n     });\n }\n /** Yargs command handler for building a release. */\n-function handler$b(args) {\n+function handler$c(args) {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         const { targetVersion: rawVersion, tagName } = args;\n         const { npmPackages, publishRegistry } = getReleaseConfig();\n@@ -7455,8 +7600,8 @@ function handler$b(args) {\n }\n /** CLI command module for setting an NPM dist tag. */\n const ReleaseSetDistTagCommand = {\n-    builder: builder$a,\n-    handler: handler$b,\n+    builder: builder$b,\n+    handler: handler$c,\n     command: 'set-dist-tag <tag-name> <target-version>',\n     describe: 'Sets a given NPM dist tag for all release packages.',\n };\n@@ -7536,22 +7681,22 @@ function getCurrentGitUser() {\n  * Use of this source code is governed by an MIT-style license that can be\n  * found in the LICENSE file at https://angular.io/license\n  */\n-function builder$b(args) {\n+function builder$c(args) {\n     return args.option('mode', {\n         demandOption: true,\n         description: 'Whether the env-stamp should be built for a snapshot or release',\n         choices: ['snapshot', 'release']\n     });\n }\n-function handler$c({ mode }) {\n+function handler$d({ mode }) {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         buildEnvStamp(mode);\n     });\n }\n /** CLI command module for building the environment stamp. */\n const BuildEnvStampCommand = {\n-    builder: builder$b,\n-    handler: handler$c,\n+    builder: builder$c,\n+    handler: handler$d,\n     command: 'build-env-stamp',\n     describe: 'Build the environment stamping information',\n };\n@@ -7984,7 +8129,7 @@ function convertReferenceChainToString(chain) {\n  * found in the LICENSE file at https://angular.io/license\n  */\n /** Yargs command builder for the command. */\n-function builder$c(argv) {\n+function builder$d(argv) {\n     return argv.positional('projectRoot', {\n         type: 'string',\n         normalize: true,\n@@ -7993,7 +8138,7 @@ function builder$c(argv) {\n     });\n }\n /** Yargs command handler for the command. */\n-function handler$d({ projectRoot }) {\n+function handler$e({ projectRoot }) {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         try {\n             if (!fs.lstatSync(projectRoot).isDirectory()) {\n@@ -8020,8 +8165,8 @@ function handler$d({ projectRoot }) {\n }\n /** CLI command module. */\n const BuildAndLinkCommandModule = {\n-    builder: builder$c,\n-    handler: handler$d,\n+    builder: builder$d,\n+    handler: handler$e,\n     command: 'build-and-link <projectRoot>',\n     describe: 'Builds the release output, registers the outputs as linked, and links via yarn to the provided project',\n };"
        },
        {
            "sha": "3b0891d1c70d89b825da7707bd3414e8edd1d3a5",
            "filename": "dev-infra/utils/git/github.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/bc1da1fe140496096ca086f783b5cd40cd1e4f31/dev-infra%2Futils%2Fgit%2Fgithub.ts",
            "raw_url": "https://github.com/angular/angular/raw/bc1da1fe140496096ca086f783b5cd40cd1e4f31/dev-infra%2Futils%2Fgit%2Fgithub.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Futils%2Fgit%2Fgithub.ts?ref=bc1da1fe140496096ca086f783b5cd40cd1e4f31",
            "patch": "@@ -45,6 +45,7 @@ export class GithubClient {\n   readonly issues = this._octokit.issues;\n   readonly git = this._octokit.git;\n   readonly rateLimit = this._octokit.rateLimit;\n+  readonly teams = this._octokit.teams;\n \n   // Note: These are properties from `Octokit` that are brought in by optional plugins.\n   // TypeScript requires us to provide an explicit type for these."
        }
    ],
    "stats": {
        "total": 428,
        "additions": 376,
        "deletions": 52
    }
}