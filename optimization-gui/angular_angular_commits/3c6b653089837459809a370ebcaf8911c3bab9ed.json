{
    "author": "atscott",
    "message": "feat(router): Option to correctly restore history on failed navigation (#43289)\n\nExposes implementation from #38884 as a public opt-in option.\n\nFrom that commit:\n> We can’t determine whether the user actually meant the back or\n> the forward using the popstate event (triggered by a browser\n> back/forward)\n> so we instead need to store information on the state and compute the\n> distance the user is traveling withing the browser history.\n> So by using the History#go method,\n> we can bring the user back to the page where he is supposed to be after\n> performing the action.\n\nResolves #13586\n\nPR Close #43289",
    "sha": "3c6b653089837459809a370ebcaf8911c3bab9ed",
    "files": [
        {
            "sha": "41b1855ba483b1c0f789918c74343fa91c3d95ff",
            "filename": "goldens/public-api/router/router.md",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/3c6b653089837459809a370ebcaf8911c3bab9ed/goldens%2Fpublic-api%2Frouter%2Frouter.md",
            "raw_url": "https://github.com/angular/angular/raw/3c6b653089837459809a370ebcaf8911c3bab9ed/goldens%2Fpublic-api%2Frouter%2Frouter.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Frouter%2Frouter.md?ref=3c6b653089837459809a370ebcaf8911c3bab9ed",
            "patch": "@@ -467,6 +467,7 @@ export class RouteConfigLoadStart {\n // @public\n export class Router {\n     constructor(rootComponentType: Type<any> | null, urlSerializer: UrlSerializer, rootContexts: ChildrenOutletContexts, location: Location_2, injector: Injector, loader: NgModuleFactoryLoader, compiler: Compiler, config: Routes);\n+    canceledNavigationResolution: 'replace' | 'computed';\n     // (undocumented)\n     config: Routes;\n     createUrlTree(commands: any[], navigationExtras?: UrlCreationOptions): UrlTree;"
        },
        {
            "sha": "c087670acfa1820e06ddc73557da68b5f18aeaa1",
            "filename": "packages/router/src/router.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 9,
            "changes": 19,
            "blob_url": "https://github.com/angular/angular/blob/3c6b653089837459809a370ebcaf8911c3bab9ed/packages%2Frouter%2Fsrc%2Frouter.ts",
            "raw_url": "https://github.com/angular/angular/raw/3c6b653089837459809a370ebcaf8911c3bab9ed/packages%2Frouter%2Fsrc%2Frouter.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Frouter%2Fsrc%2Frouter.ts?ref=3c6b653089837459809a370ebcaf8911c3bab9ed",
            "patch": "@@ -535,19 +535,20 @@ export class Router {\n    * Configures how the Router attempts to restore state when a navigation is cancelled.\n    *\n    * 'replace' - Always uses `location.replaceState` to set the browser state to the state of the\n-   * router before the navigation started.\n+   * router before the navigation started. This means that if the URL of the browser is updated\n+   * _before_ the navigation is canceled, the Router will simply replace the item in history rather\n+   * than trying to restore to the previous location in the session history. This happens most\n+   * frequently with `urlUpdateStrategy: 'eager'` and navigations with the browser back/forward\n+   * buttons.\n    *\n-   * 'computed' - Will always return to the same state that corresponds to the actual Angular route\n-   * when the navigation gets cancelled right after triggering a `popstate` event.\n+   * 'computed' - Will attempt to return to the same index in the session history that corresponds\n+   * to the Angular route when the navigation gets cancelled. For example, if the browser back\n+   * button is clicked and the navigation is cancelled, the Router will trigger a forward navigation\n+   * and vice versa.\n    *\n-   * The default value is `replace`\n+   * The default value is `replace`.\n    *\n-   * @internal\n    */\n-  // TODO(atscott): Determine how/when/if to make this public API\n-  // This shouldn’t be an option at all but may need to be in order to allow migration without a\n-  // breaking change. We need to determine if it should be made into public api (or if we forgo\n-  // the option and release as a breaking change bug fix in a major version).\n   canceledNavigationResolution: 'replace'|'computed' = 'replace';\n \n   /**"
        }
    ],
    "stats": {
        "total": 20,
        "additions": 11,
        "deletions": 9
    }
}