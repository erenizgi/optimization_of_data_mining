{
    "author": "unknown",
    "message": "fix(service-worker): NPE if onActionClick is undefined (#43210)\n\nPreviously, it leads to fail if notification.data.onActionClick is undefined\n\nPR Close #43210",
    "sha": "6e924313c3bd93236227e92a5054fc8cc9b37644",
    "files": [
        {
            "sha": "43d4788f968276172e49e11f52d815c2ffcb6eb2",
            "filename": "packages/service-worker/worker/src/driver.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/6e924313c3bd93236227e92a5054fc8cc9b37644/packages%2Fservice-worker%2Fworker%2Fsrc%2Fdriver.ts",
            "raw_url": "https://github.com/angular/angular/raw/6e924313c3bd93236227e92a5054fc8cc9b37644/packages%2Fservice-worker%2Fworker%2Fsrc%2Fdriver.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fservice-worker%2Fworker%2Fsrc%2Fdriver.ts?ref=6e924313c3bd93236227e92a5054fc8cc9b37644",
            "patch": "@@ -354,7 +354,7 @@ export class Driver implements Debuggable, UpdateSource {\n \n     const notificationAction = action === '' || action === undefined ? 'default' : action;\n \n-    const onActionClick = notification?.data?.onActionClick[notificationAction];\n+    const onActionClick = notification?.data?.onActionClick?.[notificationAction];\n \n     const urlToOpen = new URL(onActionClick?.url ?? '', this.scope.registration.scope).href;\n "
        },
        {
            "sha": "ae4fc72884f149e16793c880a190430be768f520",
            "filename": "packages/service-worker/worker/test/happy_spec.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 0,
            "changes": 15,
            "blob_url": "https://github.com/angular/angular/blob/6e924313c3bd93236227e92a5054fc8cc9b37644/packages%2Fservice-worker%2Fworker%2Ftest%2Fhappy_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/6e924313c3bd93236227e92a5054fc8cc9b37644/packages%2Fservice-worker%2Fworker%2Ftest%2Fhappy_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fservice-worker%2Fworker%2Ftest%2Fhappy_spec.ts?ref=6e924313c3bd93236227e92a5054fc8cc9b37644",
            "patch": "@@ -1055,6 +1055,21 @@ describe('Driver', () => {\n         });\n       });\n \n+      describe('no onActionClick field', () => {\n+        it('has no client interaction', async () => {\n+          expect(await makeRequest(scope, '/foo.txt')).toEqual('this is foo');\n+          spyOn(scope.clients, 'openWindow');\n+\n+          await driver.initialized;\n+          await scope.handleClick(\n+              {title: 'This is a test without action', body: 'Test body without action', data: {}});\n+          await scope.handleClick(\n+              {title: 'This is a test with an action', body: 'Test body with an action', data: {}},\n+              'someAction');\n+          expect(scope.clients.openWindow).not.toHaveBeenCalled();\n+        });\n+      });\n+\n       describe('URL resolution', () => {\n         it('should resolve relative to service worker scope', async () => {\n           (scope.registration.scope as string) = 'http://localhost/foo/bar/';"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 16,
        "deletions": 1
    }
}