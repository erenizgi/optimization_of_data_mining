{
    "author": "ivanwonder",
    "message": "fix(language-service): can't provide the Input and Output custom binding property name (#41005)\n\nNow the language service always uses the name of the JavaScript property on the\ncomponent or directive instance for this input or output. This PR will use the right\nbinding property name.\n\nPR Close #41005",
    "sha": "8110cf0ed247e836a4d77bdbfe2ad7111c3fa847",
    "files": [
        {
            "sha": "275a494343385c7abf5f86e212e47f94e4eb1b57",
            "filename": "packages/language-service/ivy/attribute_completions.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8110cf0ed247e836a4d77bdbfe2ad7111c3fa847/packages%2Flanguage-service%2Fivy%2Fattribute_completions.ts",
            "raw_url": "https://github.com/angular/angular/raw/8110cf0ed247e836a4d77bdbfe2ad7111c3fa847/packages%2Flanguage-service%2Fivy%2Fattribute_completions.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flanguage-service%2Fivy%2Fattribute_completions.ts?ref=8110cf0ed247e836a4d77bdbfe2ad7111c3fa847",
            "patch": "@@ -203,7 +203,7 @@ export function buildAttributeCompletionTable(\n         continue;\n       }\n \n-      for (const [propertyName, classPropertyName] of meta.inputs) {\n+      for (const [classPropertyName, propertyName] of meta.inputs) {\n         if (table.has(propertyName)) {\n           continue;\n         }\n@@ -217,7 +217,7 @@ export function buildAttributeCompletionTable(\n         });\n       }\n \n-      for (const [propertyName, classPropertyName] of meta.outputs) {\n+      for (const [classPropertyName, propertyName] of meta.outputs) {\n         if (table.has(propertyName)) {\n           continue;\n         }"
        },
        {
            "sha": "2a555af61f723e35afee5ff13e434a951e453e3c",
            "filename": "packages/language-service/ivy/test/completions_spec.ts",
            "status": "modified",
            "additions": 38,
            "deletions": 0,
            "changes": 38,
            "blob_url": "https://github.com/angular/angular/blob/8110cf0ed247e836a4d77bdbfe2ad7111c3fa847/packages%2Flanguage-service%2Fivy%2Ftest%2Fcompletions_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8110cf0ed247e836a4d77bdbfe2ad7111c3fa847/packages%2Flanguage-service%2Fivy%2Ftest%2Fcompletions_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flanguage-service%2Fivy%2Ftest%2Fcompletions_spec.ts?ref=8110cf0ed247e836a4d77bdbfe2ad7111c3fa847",
            "patch": "@@ -52,6 +52,20 @@ const DIR_WITH_TWO_WAY_BINDING = {\n   `\n };\n \n+const DIR_WITH_BINDING_PROPERTY_NAME = {\n+  'Dir': `\n+    @Directive({\n+      selector: '[dir]',\n+      inputs: ['model: customModel'],\n+      outputs: ['update: customModelChange'],\n+    })\n+    export class Dir {\n+      model!: any;\n+      update!: any;\n+    }\n+  `\n+};\n+\n const NG_FOR_DIR = {\n   'NgFor': `\n     @Directive({\n@@ -563,6 +577,30 @@ describe('completions', () => {\n             completions, unsafeCastDisplayInfoKindToScriptElementKind(DisplayInfoKind.EVENT),\n             ['otherOutput']);\n       });\n+\n+      it('should return input completions for a binding property name', () => {\n+        const {templateFile} =\n+            setup(`<h1 dir [customModel]></h1>`, ``, DIR_WITH_BINDING_PROPERTY_NAME);\n+        templateFile.moveCursorToText('[customModel¦]');\n+        const completions = templateFile.getCompletionsAtPosition();\n+        expectReplacementText(completions, templateFile.contents, 'customModel');\n+\n+        expectContain(\n+            completions, unsafeCastDisplayInfoKindToScriptElementKind(DisplayInfoKind.PROPERTY),\n+            ['customModel']);\n+      });\n+\n+      it('should return output completions for a binding property name', () => {\n+        const {templateFile} =\n+            setup(`<h1 dir (customModel)></h1>`, ``, DIR_WITH_BINDING_PROPERTY_NAME);\n+        templateFile.moveCursorToText('(customModel¦)');\n+        const completions = templateFile.getCompletionsAtPosition();\n+        expectReplacementText(completions, templateFile.contents, 'customModel');\n+\n+        expectContain(\n+            completions, unsafeCastDisplayInfoKindToScriptElementKind(DisplayInfoKind.EVENT),\n+            ['customModelChange']);\n+      });\n     });\n   });\n "
        }
    ],
    "stats": {
        "total": 42,
        "additions": 40,
        "deletions": 2
    }
}