{
    "author": "petebacondarwin",
    "message": "build(docs-infra): ensure all overloads are shown in interfaces (#43734)\n\nIn the API docs, concrete classes do not list the \"implementation\" overload on a method, since this is not strictly part of its API.\n\nWe recently fixed the rendering of interfaces to display all the overloads, since there is no \"implementation\" overload.\n\nThis commit also fixes the rendering of \"pseudo-classes\", which are a combination of an interface\nand a constant.\n\nFixes #43001\n\nPR Close #43734",
    "sha": "fa6aa1be5561597e43bbde8ee14d5dbdcd910137",
    "files": [
        {
            "sha": "07d68a9d96911982d9d92b4f750ce12d5ada4739",
            "filename": "aio/tests/e2e/src/api-pages.e2e-spec.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/fa6aa1be5561597e43bbde8ee14d5dbdcd910137/aio%2Ftests%2Fe2e%2Fsrc%2Fapi-pages.e2e-spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/fa6aa1be5561597e43bbde8ee14d5dbdcd910137/aio%2Ftests%2Fe2e%2Fsrc%2Fapi-pages.e2e-spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftests%2Fe2e%2Fsrc%2Fapi-pages.e2e-spec.ts?ref=fa6aa1be5561597e43bbde8ee14d5dbdcd910137",
            "patch": "@@ -81,4 +81,9 @@ describe('Api pages', () => {\n     await page.navigateTo('api/core/testing/TestBedStatic');\n     expect(await (await page.getInstanceMethodOverloads('initTestEnvironment')).length).toEqual(2);\n   });\n+\n+  it('should show all overloads of pseudo-class methods', async () => {\n+    await page.navigateTo('api/core/testing/TestBed');\n+    expect(await (await page.getInstanceMethodOverloads('initTestEnvironment')).length).toEqual(2);\n+  });\n });"
        },
        {
            "sha": "8d8c2e9a9be09d6badec45d5ec062491a233bc72",
            "filename": "aio/tools/transforms/angular-api-package/processors/processPseudoClasses.js",
            "status": "modified",
            "additions": 18,
            "deletions": 2,
            "changes": 20,
            "blob_url": "https://github.com/angular/angular/blob/fa6aa1be5561597e43bbde8ee14d5dbdcd910137/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Fprocessors%2FprocessPseudoClasses.js",
            "raw_url": "https://github.com/angular/angular/raw/fa6aa1be5561597e43bbde8ee14d5dbdcd910137/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Fprocessors%2FprocessPseudoClasses.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Fprocessors%2FprocessPseudoClasses.js?ref=fa6aa1be5561597e43bbde8ee14d5dbdcd910137",
            "patch": "@@ -1,12 +1,28 @@\n+/**\n+ * @dgProcessor processPseudoClasses\n+ * @description\n+ * If an API element is declared both as a `const` and an `interface` then these are both merged\n+ * into a single `interface` document.\n+ *\n+ * We can identify such cases because the interface doc has one or more items in the\n+ * `additionalDeclarations` property.\n+ *\n+ * This processor will convert such interface docs to class docs and ensure that the content and\n+ * members are fixed up appropriately.\n+ *\n+ * Such pseudo classes should have overloaded members rendered similar to interfaces (i.e. all\n+ * overloads are rendered whereas in classes the \"implementation overload\" is not rendered) we\n+ * also mark the doc with the `isPseudoClass` property to be used in templates when rendering.\n+ */\n module.exports = function processPseudoClasses(tsHost) {\n   return {\n     $runAfter: ['readTypeScriptModules'],\n     $runBefore: ['parsing-tags'],\n     $process(docs) {\n       docs.forEach(doc => {\n-        if (doc.docType === 'interface' && doc.additionalDeclarations &&\n-            doc.additionalDeclarations.length > 0) {\n+        if (doc.docType === 'interface' && doc.additionalDeclarations?.length > 0) {\n           doc.docType = 'class';\n+          doc.isPseudoClass = true;\n           const additionalContent = tsHost.getContent(doc.additionalDeclarations[0]);\n           if (!doc.content || doc.content === '@publicApi' && additionalContent) {\n             doc.content = additionalContent;"
        },
        {
            "sha": "572ee52c97fc368e8a5ca01d04e0ac535e15e395",
            "filename": "aio/tools/transforms/angular-api-package/processors/processPseudoClasses.spec.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/fa6aa1be5561597e43bbde8ee14d5dbdcd910137/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Fprocessors%2FprocessPseudoClasses.spec.js",
            "raw_url": "https://github.com/angular/angular/raw/fa6aa1be5561597e43bbde8ee14d5dbdcd910137/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Fprocessors%2FprocessPseudoClasses.spec.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Fprocessors%2FprocessPseudoClasses.spec.js?ref=fa6aa1be5561597e43bbde8ee14d5dbdcd910137",
            "patch": "@@ -32,7 +32,7 @@ describe('processPseudoClasses processor', () => {\n       jasmine.objectContaining({docType: 'interface', id: 'd'}),\n \n       // This is the only one that changes\n-      jasmine.objectContaining({docType: 'class', id: 'e'}),\n+      jasmine.objectContaining({docType: 'class', id: 'e', isPseudoClass: true}),\n \n       jasmine.objectContaining({docType: 'const', id: 'f'}),\n       jasmine.objectContaining({docType: 'const', id: 'g'}),"
        },
        {
            "sha": "1f21eda635402178c6251cb64f17ba064494798e",
            "filename": "aio/tools/transforms/templates/api/lib/memberHelpers.html",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/fa6aa1be5561597e43bbde8ee14d5dbdcd910137/aio%2Ftools%2Ftransforms%2Ftemplates%2Fapi%2Flib%2FmemberHelpers.html",
            "raw_url": "https://github.com/angular/angular/raw/fa6aa1be5561597e43bbde8ee14d5dbdcd910137/aio%2Ftools%2Ftransforms%2Ftemplates%2Fapi%2Flib%2FmemberHelpers.html",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Ftemplates%2Fapi%2Flib%2FmemberHelpers.html?ref=fa6aa1be5561597e43bbde8ee14d5dbdcd910137",
            "patch": "@@ -123,7 +123,7 @@ <h3>\n       </td>\n     </tr>\n   {%- elseif method.overloads.length < 3 -%}\n-    {%- if method.isAbstract or method.containerDoc.docType === 'interface' %}\n+    {%- if method.isAbstract or method.containerDoc.docType === 'interface' or method.containerDoc.isPseudoClass %}\n     <tr>\n       <td>\n         {$ renderOverloadInfo(method, cssClass + '-overload', method) $}"
        }
    ],
    "stats": {
        "total": 29,
        "additions": 25,
        "deletions": 4
    }
}