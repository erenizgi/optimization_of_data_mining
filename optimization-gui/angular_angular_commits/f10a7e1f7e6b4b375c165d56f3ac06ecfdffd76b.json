{
    "author": "gkalpak",
    "message": "refactor(docs-infra): simplify regex in search WebWorker (#41693)\n\nThis commit simplifies a regex used in angular.io's search WebWorker. It\nalso updates some comments to add more context on what the code does.\n\nPR Close #41693",
    "sha": "f10a7e1f7e6b4b375c165d56f3ac06ecfdffd76b",
    "files": [
        {
            "sha": "f1c44bc30b2ad006441f9f0da58234445c43a70f",
            "filename": "aio/src/app/search/search.worker.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/f10a7e1f7e6b4b375c165d56f3ac06ecfdffd76b/aio%2Fsrc%2Fapp%2Fsearch%2Fsearch.worker.ts",
            "raw_url": "https://github.com/angular/angular/raw/f10a7e1f7e6b4b375c165d56f3ac06ecfdffd76b/aio%2Fsrc%2Fapp%2Fsearch%2Fsearch.worker.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fsearch%2Fsearch.worker.ts?ref=f10a7e1f7e6b4b375c165d56f3ac06ecfdffd76b",
            "patch": "@@ -119,7 +119,8 @@ function queryIndex(query: string): PageInfo[] {\n   try {\n     if (query.length) {\n       // First try a query where every term must be present\n-      const queryAll = query.replace(/(^|\\s)([^\\s]+)/g, '$1+$2');\n+      // (see https://lunrjs.com/guides/searching.html#term-presence)\n+      const queryAll = query.replace(/\\S+/g, '+$&');\n       let results = index.search(queryAll);\n \n       // If that was too restrictive just query for any term to be present\n@@ -129,7 +130,7 @@ function queryIndex(query: string): PageInfo[] {\n \n       // If that is still too restrictive then search in the title for the first word in the query\n       if (results.length === 0) {\n-        // E.g. if the search is \"ngCont guide\" then we search for \"ngCont guide title:ngCont*\"\n+        // E.g. if the search is \"ngCont guide\" then we search for \"ngCont guide title:*ngCont*\"\n         const titleQuery = 'title:*' + query.split(' ', 1)[0] + '*';\n         results = index.search(query + ' ' + titleQuery);\n       }"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 3,
        "deletions": 2
    }
}