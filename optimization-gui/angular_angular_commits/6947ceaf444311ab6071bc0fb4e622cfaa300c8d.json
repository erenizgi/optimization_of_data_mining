{
    "author": "gkalpak",
    "message": "refactor(dev-infra): several code style and typo fixes (#39135)\n\nThis commit addresses comments from [my review][1] on PR #38656 (which\nwas merged without comments addressed). The changes are mostly related\nto code style and typos.\n\n[1]: https://github.com/angular/angular/pull/38656#pullrequestreview-482129333\n\nPR Close #39135",
    "sha": "6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
    "files": [
        {
            "sha": "12f5b4a71c7b274efce31f4c7eef22ed6164511f",
            "filename": ".ng-dev/release.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/.ng-dev%2Frelease.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/.ng-dev%2Frelease.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.ng-dev%2Frelease.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -26,7 +26,7 @@ export const release: ReleaseConfig = {\n   ],\n   // TODO: Implement release package building here.\n   buildPackages: async () => [],\n-  // TODO: This can be removed once there is a org-wide tool for changelog generation.\n+  // TODO: This can be removed once there is an org-wide tool for changelog generation.\n   generateReleaseNotesForHead: async () => {\n     exec('yarn -s gulp changelog', {cwd: join(__dirname, '../')});\n   },"
        },
        {
            "sha": "57f01c166879b90cf2a47e0d37461d21d6682e81",
            "filename": "dev-infra/pr/merge/defaults/labels.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Fpr%2Fmerge%2Fdefaults%2Flabels.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Fpr%2Fmerge%2Fdefaults%2Flabels.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fpr%2Fmerge%2Fdefaults%2Flabels.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -41,8 +41,8 @@ export async function getDefaultTargetLabelConfiguration(\n         // allow merging of PRs with `target: major`.\n         if (!next.isMajor) {\n           throw new InvalidTargetLabelError(\n-              `Unable to merge pull request. The \"${nextBranchName}\" branch will be ` +\n-              `released as a minor version.`);\n+              `Unable to merge pull request. The \"${nextBranchName}\" branch will be released as ` +\n+              'a minor version.');\n         }\n         return [nextBranchName];\n       },"
        },
        {
            "sha": "f29fab26ea27a9840ffbf167a7be21886bf0ea6c",
            "filename": "dev-infra/pr/merge/defaults/lts-branch.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Fpr%2Fmerge%2Fdefaults%2Flts-branch.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Fpr%2Fmerge%2Fdefaults%2Flts-branch.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fpr%2Fmerge%2Fdefaults%2Flts-branch.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -30,8 +30,8 @@ export async function assertActiveLtsBranch(\n   const ltsNpmTag = getLtsNpmDistTagOfMajor(version.major);\n   const ltsVersion = semver.parse(distTags[ltsNpmTag]);\n \n-  // Ensure that there is a LTS version tagged for the given version-branch major. e.g.\n-  // if the version branch is `9.2.x` then we want to make sure that there is a LTS\n+  // Ensure that there is an LTS version tagged for the given version-branch major. e.g.\n+  // if the version branch is `9.2.x` then we want to make sure that there is an LTS\n   // version tagged in NPM for `v9`, following the `v{major}-lts` tag convention.\n   if (ltsVersion === null) {\n     throw new InvalidTargetBranchError(`No LTS version tagged for v${version.major} in NPM.`);"
        },
        {
            "sha": "d6d28a6619757f375e49d42e087af4722b0a8388",
            "filename": "dev-infra/pr/merge/index.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Fpr%2Fmerge%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Fpr%2Fmerge%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fpr%2Fmerge%2Findex.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -33,7 +33,7 @@ export async function mergePullRequest(\n     prNumber: number, githubToken: string, projectRoot: string = getRepoBaseDir(),\n     config?: MergeConfigWithRemote) {\n   // Set the environment variable to skip all git commit hooks triggered by husky. We are unable to\n-  // rely on `---no-verify` as some hooks still run, notably the `prepare-commit-msg` hook.\n+  // rely on `--no-verify` as some hooks still run, notably the `prepare-commit-msg` hook.\n   process.env['HUSKY_SKIP_HOOKS'] = '1';\n \n   const api = await createPullRequestMergeTask(githubToken, projectRoot, config);"
        },
        {
            "sha": "9f6ca0fb809a25ffc58f3e26692d9392bce137db",
            "filename": "dev-infra/release/build/build.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fbuild%2Fbuild.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fbuild%2Fbuild.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fbuild%2Fbuild.spec.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -60,7 +60,7 @@ describe('ng-dev release build', () => {\n   });\n \n   it('should error if package has not been built', async () => {\n-    // Set up a NPM package that is not built.\n+    // Set up an NPM package that is not built.\n     npmPackages.push('@angular/non-existent');\n \n     spyOn(console, 'error');"
        },
        {
            "sha": "2bfbbb44b96197c8df0dd4f2891d1960455db5de",
            "filename": "dev-infra/release/publish/actions.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 18,
            "changes": 33,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fpublish%2Factions.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fpublish%2Factions.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fpublish%2Factions.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import {promises as fs} from 'fs';\n-import * as Ora from 'ora';\n+import * as ora from 'ora';\n import {join} from 'path';\n import * as semver from 'semver';\n \n@@ -44,7 +44,7 @@ export interface PullRequest {\n   forkBranch: string;\n }\n \n-/** Constructor type for a instantiating a release action */\n+/** Constructor type for instantiating a release action */\n export interface ReleaseActionConstructor<T extends ReleaseAction = ReleaseAction> {\n   /** Whether the release action is currently active. */\n   isActive(active: ActiveReleaseTrains): Promise<boolean>;\n@@ -107,25 +107,22 @@ export abstract class ReleaseAction {\n     if (state === 'failure') {\n       error(\n           red(`  ✘   Cannot stage release. Commit \"${commitSha}\" does not pass all github ` +\n-              `status checks. Please make sure this commit passes all checks before re-running.`));\n+              'status checks. Please make sure this commit passes all checks before re-running.'));\n       error(`      Please have a look at: ${branchCommitsUrl}`);\n \n       if (await promptConfirm('Do you want to ignore the Github status and proceed?')) {\n         info(yellow(\n-            `  ⚠   Upstream commit is failing CI checks, but status has been ` +\n-            `forcibly ignored.`));\n+            '  ⚠   Upstream commit is failing CI checks, but status has been forcibly ignored.'));\n         return;\n       }\n       throw new UserAbortedReleaseActionError();\n     } else if (state === 'pending') {\n       error(\n           red(`  ✘   Commit \"${commitSha}\" still has pending github statuses that ` +\n-              `need to succeed before staging a release.`));\n+              'need to succeed before staging a release.'));\n       error(red(`      Please have a look at: ${branchCommitsUrl}`));\n       if (await promptConfirm('Do you want to ignore the Github status and proceed?')) {\n-        info(yellow(\n-            `  ⚠   Upstream commit is pending CI, but status has been ` +\n-            `forcibly ignored.`));\n+        info(yellow('  ⚠   Upstream commit is pending CI, but status has been forcibly ignored.'));\n         return;\n       }\n       throw new UserAbortedReleaseActionError();\n@@ -157,9 +154,9 @@ export abstract class ReleaseAction {\n    */\n   protected async waitForEditsAndCreateReleaseCommit(newVersion: semver.SemVer) {\n     info(yellow(\n-        `  ⚠   Please review the changelog and ensure that the log contains only changes ` +\n-        `that apply to the public API surface. Manual changes can be made. When done, please ` +\n-        `proceed with the prompt below.`));\n+        '  ⚠   Please review the changelog and ensure that the log contains only changes ' +\n+        'that apply to the public API surface. Manual changes can be made. When done, please ' +\n+        'proceed with the prompt below.'));\n \n     if (!await promptConfirm('Do you want to proceed and commit the changes?')) {\n       throw new UserAbortedReleaseActionError();\n@@ -188,7 +185,7 @@ export abstract class ReleaseAction {\n     const forks = result.repository.forks.nodes;\n \n     if (forks.length === 0) {\n-      error(red(`  ✘   Unable to find fork for currently authenticated user.`));\n+      error(red('  ✘   Unable to find fork for currently authenticated user.'));\n       error(red(`      Please ensure you created a fork of: ${owner}/${name}.`));\n       throw new FatalReleaseActionError();\n     }\n@@ -304,7 +301,7 @@ export abstract class ReleaseAction {\n     return new Promise((resolve, reject) => {\n       debug(`Waiting for pull request #${id} to be merged.`);\n \n-      const spinner = Ora().start(`Waiting for pull request #${id} to be merged.`);\n+      const spinner = ora().start(`Waiting for pull request #${id} to be merged.`);\n       const intervalId = setInterval(async () => {\n         const prState = await getPullRequestState(this.git, id);\n         if (prState === 'merged') {\n@@ -451,7 +448,7 @@ export abstract class ReleaseAction {\n \n     info(green(\n         `  ✓   Pull request for cherry-picking the changelog into \"${nextBranch}\" ` +\n-        `has been created.`));\n+        'has been created.'));\n     info(yellow(`      Please ask team members to review: ${url}.`));\n     return true;\n   }\n@@ -490,7 +487,7 @@ export abstract class ReleaseAction {\n \n     if (!await this._isCommitForVersionStaging(newVersion, versionBumpCommitSha)) {\n       error(red(`  ✘   Latest commit in \"${publishBranch}\" branch is not a staging commit.`));\n-      error(red(`      Please make sure the staging pull request has been merged.`));\n+      error(red('      Please make sure the staging pull request has been merged.'));\n       throw new FatalReleaseActionError();\n     }\n \n@@ -514,13 +511,13 @@ export abstract class ReleaseAction {\n       await this._publishBuiltPackageToNpm(builtPackage, npmDistTag);\n     }\n \n-    info(green(`  ✓   Published all packages successfully`));\n+    info(green('  ✓   Published all packages successfully'));\n   }\n \n   /** Publishes the given built package to NPM with the specified NPM dist tag. */\n   private async _publishBuiltPackageToNpm(pkg: BuiltPackage, npmDistTag: string) {\n     debug(`Starting publish of \"${pkg.name}\".`);\n-    const spinner = Ora().start(`Publishing \"${pkg.name}\"`);\n+    const spinner = ora().start(`Publishing \"${pkg.name}\"`);\n \n     try {\n       await runNpmPublish(pkg.outputPath, npmDistTag, this.config.publishRegistry);"
        },
        {
            "sha": "a3593f4929df82c46235e1fcf27635f6f7e73cdd",
            "filename": "dev-infra/release/publish/actions/cut-lts-patch.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fpublish%2Factions%2Fcut-lts-patch.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fpublish%2Factions%2Fcut-lts-patch.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fpublish%2Factions%2Fcut-lts-patch.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -65,14 +65,14 @@ export class CutLongTermSupportPatchAction extends ReleaseAction {\n           {\n             name: 'activeLtsBranch',\n             type: 'list',\n-            message: 'Please select a version for which you want to cut a LTS patch',\n+            message: 'Please select a version for which you want to cut an LTS patch',\n             choices: activeBranchChoices,\n           },\n           {\n             name: 'inactiveLtsBranch',\n             type: 'list',\n             when: o => o.activeLtsBranch === null,\n-            message: 'Please select an inactive LTS version for which you want to cut a LTS patch',\n+            message: 'Please select an inactive LTS version for which you want to cut an LTS patch',\n             choices: inactive.map(branch => this._getChoiceForLtsBranch(branch)),\n           }\n         ]);"
        },
        {
            "sha": "6a425af06a60d4274dce0c8e3c037b5f2ffb2b07",
            "filename": "dev-infra/release/publish/external-commands.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fpublish%2Fexternal-commands.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fpublish%2Fexternal-commands.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fpublish%2Fexternal-commands.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -6,7 +6,7 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import * as Ora from 'ora';\n+import * as ora from 'ora';\n import * as semver from 'semver';\n \n import {spawnWithDebugOutput} from '../../utils/child-process';\n@@ -19,11 +19,11 @@ import {FatalReleaseActionError} from './actions-error';\n  * ###############################################################\n  *\n  * This file contains helpers for invoking external `ng-dev` commands. A subset of actions,\n- * like building release output or setting a NPM dist tag for release packages, cannot be\n+ * like building release output or setting aν NPM dist tag for release packages, cannot be\n  * performed directly as part of the release tool and need to be delegated to external `ng-dev`\n  * commands that exist across arbitrary version branches.\n  *\n- * In an concrete example: Consider a new patch version is released and that a new release\n+ * In a concrete example: Consider a new patch version is released and that a new release\n  * package has been added to the `next` branch. The patch branch will not contain the new\n  * release package, so we could not build the release output for it. To work around this, we\n  * call the ng-dev build command for the patch version branch and expect it to return a list\n@@ -44,7 +44,7 @@ export async function invokeSetNpmDistCommand(npmDistTag: string, version: semve\n     info(green(`  ✓   Set \"${npmDistTag}\" NPM dist tag for all packages to v${version}.`));\n   } catch (e) {\n     error(e);\n-    error(red(`  ✘   An error occurred while setting the NPM dist tag for ${npmDistTag}.`));\n+    error(red('  ✘   An error occurred while setting the NPM dist tag for \"${npmDistTag}\".'));\n     throw new FatalReleaseActionError();\n   }\n }\n@@ -54,21 +54,21 @@ export async function invokeSetNpmDistCommand(npmDistTag: string, version: semve\n  * packages for the currently checked out branch.\n  */\n export async function invokeReleaseBuildCommand(): Promise<BuiltPackage[]> {\n-  const spinner = Ora().start('Building release output.');\n+  const spinner = ora().start('Building release output.');\n   try {\n     // Since we expect JSON to be printed from the `ng-dev release build` command,\n     // we spawn the process in silent mode. We have set up an Ora progress spinner.\n     const {stdout} = await spawnWithDebugOutput(\n         'yarn', ['--silent', 'ng-dev', 'release', 'build', '--json'], {mode: 'silent'});\n     spinner.stop();\n-    info(green(`  ✓   Built release output for all packages.`));\n+    info(green('  ✓   Built release output for all packages.'));\n     // The `ng-dev release build` command prints a JSON array to stdout\n     // that represents the built release packages and their output paths.\n     return JSON.parse(stdout.trim());\n   } catch (e) {\n     spinner.stop();\n     error(e);\n-    error(red(`  ✘   An error occurred while building the release packages.`));\n+    error(red('  ✘   An error occurred while building the release packages.'));\n     throw new FatalReleaseActionError();\n   }\n }\n@@ -83,10 +83,10 @@ export async function invokeYarnInstallCommand(projectDir: string): Promise<void\n     // TODO: Consider using an Ora spinner instead to ensure minimal console output.\n     await spawnWithDebugOutput(\n         'yarn', ['install', '--frozen-lockfile', '--non-interactive'], {cwd: projectDir});\n-    info(green(`  ✓   Installed project dependencies.`));\n+    info(green('  ✓   Installed project dependencies.'));\n   } catch (e) {\n     error(e);\n-    error(red(`  ✘   An error occurred while installing dependencies.`));\n+    error(red('  ✘   An error occurred while installing dependencies.'));\n     throw new FatalReleaseActionError();\n   }\n }"
        },
        {
            "sha": "99c999c1679dfcb3595096476b585dbb74e1a55d",
            "filename": "dev-infra/release/publish/index.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 7,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fpublish%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fpublish%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fpublish%2Findex.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -66,8 +66,7 @@ export class ReleaseTool {\n       // Only print the error message and stack if the error is not a known fatal release\n       // action error (for which we print the error gracefully to the console with colors).\n       if (!(e instanceof FatalReleaseActionError) && e instanceof Error) {\n-        console.error(e.message);\n-        console.error(e.stack);\n+        console.error(e);\n       }\n       return CompletionState.FATAL_ERROR;\n     } finally {\n@@ -90,7 +89,7 @@ export class ReleaseTool {\n       }\n     }\n \n-    info(`Please select the type of release you want to perform.`);\n+    info('Please select the type of release you want to perform.');\n \n     const {releaseAction} = await prompt<{releaseAction: ReleaseAction}>({\n       name: 'releaseAction',\n@@ -108,9 +107,7 @@ export class ReleaseTool {\n    */\n   private async _verifyNoUncommittedChanges(): Promise<boolean> {\n     if (this._git.hasUncommittedChanges()) {\n-      error(\n-          red(`  ✘   There are changes which are not committed and should be ` +\n-              `discarded.`));\n+      error(red('  ✘   There are changes which are not committed and should be discarded.'));\n       return false;\n     }\n     return true;\n@@ -126,7 +123,7 @@ export class ReleaseTool {\n         await this._git.github.repos.getBranch({...this._git.remoteParams, branch: nextBranchName});\n \n     if (headSha !== data.commit.sha) {\n-      error(red(`  ✘   Running release tool from an outdated local branch.`));\n+      error(red('  ✘   Running release tool from an outdated local branch.'));\n       error(red(`      Please make sure you are running from the \"${nextBranchName}\" branch.`));\n       return false;\n     }"
        },
        {
            "sha": "d27bbd60883d649aabc6e55e9da2fd7c7d282105",
            "filename": "dev-infra/release/publish/test/cut-lts-patch.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fpublish%2Ftest%2Fcut-lts-patch.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fpublish%2Ftest%2Fcut-lts-patch.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fpublish%2Ftest%2Fcut-lts-patch.spec.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -13,7 +13,7 @@ import {CutLongTermSupportPatchAction} from '../actions/cut-lts-patch';\n \n import {expectStagingAndPublishWithCherryPick, fakeNpmPackageQueryRequest, getTestingMocksForReleaseAction, parse, setupReleaseActionForTesting, testTmpDir} from './test-utils';\n \n-describe('cut a LTS patch action', () => {\n+describe('cut an LTS patch action', () => {\n   it('should be active', async () => {\n     expect(await CutLongTermSupportPatchAction.isActive({\n       releaseCandidate: null,"
        },
        {
            "sha": "29cc0f2dd263affbe011db14ecd6a34ee6a8fe1f",
            "filename": "dev-infra/release/set-dist-tag/cli.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fset-dist-tag%2Fcli.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fset-dist-tag%2Fcli.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fset-dist-tag%2Fcli.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -6,7 +6,7 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import * as Ora from 'ora';\n+import * as ora from 'ora';\n import * as semver from 'semver';\n import {Arguments, Argv, CommandModule} from 'yargs';\n \n@@ -15,7 +15,7 @@ import {getReleaseConfig} from '../config/index';\n import {setNpmTagForPackage} from '../versioning/npm-publish';\n \n \n-/** Command line options for setting a NPM dist tag. */\n+/** Command line options for setting an NPM dist tag. */\n export interface ReleaseSetDistTagOptions {\n   tagName: string;\n   targetVersion: string;\n@@ -42,11 +42,11 @@ async function handler(args: Arguments<ReleaseSetDistTagOptions>) {\n   const version = semver.parse(rawVersion);\n \n   if (version === null) {\n-    error(red(`Invalid version specified. Unable to set NPM dist tag.`));\n+    error(red(`Invalid version specified (${rawVersion}). Unable to set NPM dist tag.`));\n     process.exit(1);\n   }\n \n-  const spinner = Ora().start();\n+  const spinner = ora().start();\n   debug(`Setting \"${tagName}\" NPM dist tag for release packages to v${version}.`);\n \n   for (const pkgName of npmPackages) {\n@@ -69,7 +69,7 @@ async function handler(args: Arguments<ReleaseSetDistTagOptions>) {\n   info(green(`      ${bold(tagName)} will now point to ${bold(`v${version}`)}.`));\n }\n \n-/** CLI command module for setting a NPM dist tag. */\n+/** CLI command module for setting an NPM dist tag. */\n export const ReleaseSetDistTagCommand: CommandModule<{}, ReleaseSetDistTagOptions> = {\n   builder,\n   handler,"
        },
        {
            "sha": "f7c02b98536b39859a1989a1bd6f78b04865c279",
            "filename": "dev-infra/release/set-dist-tag/set-dist-tag.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fset-dist-tag%2Fset-dist-tag.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fset-dist-tag%2Fset-dist-tag.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fset-dist-tag%2Fset-dist-tag.spec.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -66,7 +66,7 @@ describe('ng-dev release set-dist-tag', () => {\n     await invokeCommand('latest', '10.0');\n \n     expect(console.error)\n-        .toHaveBeenCalledWith('Invalid version specified. Unable to set NPM dist tag.');\n+        .toHaveBeenCalledWith('Invalid version specified (10.0). Unable to set NPM dist tag.');\n     expect(process.exit).toHaveBeenCalledWith(1);\n     expect(process.exit).toHaveBeenCalledTimes(1);\n   });"
        },
        {
            "sha": "b428492b7f02e2703f96471b0d5dc508ff0d9e87",
            "filename": "dev-infra/release/versioning/README.md",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fversioning%2FREADME.md",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fversioning%2FREADME.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fversioning%2FREADME.md?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -1,5 +1,5 @@\n ## Versioning for the Angular organization\n \n The folder contains common tooling needed for implementing the versioning as proposed\n-by [this design document](https://docs.google.com/document/d/197kVillDwx-RZtSVOBtPb4BBIAw0E9RT3q3v6DZkykU/edit#heading=h.s3qlps8f4zq7).\n+by [this design document](https://docs.google.com/document/d/197kVillDwx-RZtSVOBtPb4BBIAw0E9RT3q3v6DZkykU).\n Primary tooling is the determination of _active_ release trains."
        },
        {
            "sha": "4ec1341bf3d1c5ee13f140890d8da05746ec3340",
            "filename": "dev-infra/release/versioning/active-release-trains.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fversioning%2Factive-release-trains.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fversioning%2Factive-release-trains.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fversioning%2Factive-release-trains.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -17,7 +17,7 @@ export interface ActiveReleaseTrains {\n   releaseCandidate: ReleaseTrain|null;\n   /** Release-train currently in the \"latest\" phase. */\n   latest: ReleaseTrain;\n-  /** Release-train in the `next` phase */\n+  /** Release-train in the `next` phase. */\n   next: ReleaseTrain;\n }\n "
        },
        {
            "sha": "308bd952abb633c538b0c31d140e55a5b160dd22",
            "filename": "dev-infra/release/versioning/long-term-support.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fversioning%2Flong-term-support.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fversioning%2Flong-term-support.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fversioning%2Flong-term-support.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -34,16 +34,16 @@ export interface LtsBranch {\n  * Number of months a major version in Angular is actively supported. See:\n  * https://angular.io/guide/releases#support-policy-and-schedule.\n  */\n-export const majorActiveSupportDuration = 6;\n+const majorActiveSupportDuration = 6;\n \n /**\n  * Number of months a major version has active long-term support. See:\n  * https://angular.io/guide/releases#support-policy-and-schedule.\n  */\n-export const majorActiveTermSupportDuration = 12;\n+const majorLongTermSupportDuration = 12;\n \n /** Regular expression that matches LTS NPM dist tags. */\n-export const ltsNpmDistTagRegex = /^v(\\d+)-lts$/;\n+const ltsNpmDistTagRegex = /^v(\\d+)-lts$/;\n \n /** Finds all long-term support release trains from the specified NPM package. */\n export async function fetchLongTermSupportBranchesFromNpm(config: ReleaseConfig):\n@@ -54,7 +54,7 @@ export async function fetchLongTermSupportBranchesFromNpm(config: ReleaseConfig)\n   const inactive: LtsBranch[] = [];\n \n   // Iterate through the NPM package information and determine active/inactive LTS versions with\n-  // their corresponding branches. We assume that a LTS tagged version in NPM belongs to the\n+  // their corresponding branches. We assume that an LTS tagged version in NPM belongs to the\n   // last-minor branch of a given major (i.e. we assume there are no outdated LTS NPM dist tags).\n   for (const npmDistTag in distTags) {\n     if (ltsNpmDistTagRegex.test(npmDistTag)) {\n@@ -64,7 +64,7 @@ export async function fetchLongTermSupportBranchesFromNpm(config: ReleaseConfig)\n       const ltsEndDate = computeLtsEndDateOfMajor(majorReleaseDate);\n       const ltsBranch: LtsBranch = {name: branchName, version, npmDistTag};\n       // Depending on whether the LTS phase is still active, add the branch\n-      // the list of active or inactive LTS branches.\n+      // to the list of active or inactive LTS branches.\n       if (today <= ltsEndDate) {\n         active.push(ltsBranch);\n       } else {\n@@ -87,7 +87,7 @@ export async function fetchLongTermSupportBranchesFromNpm(config: ReleaseConfig)\n export function computeLtsEndDateOfMajor(majorReleaseDate: Date): Date {\n   return new Date(\n       majorReleaseDate.getFullYear(),\n-      majorReleaseDate.getMonth() + majorActiveSupportDuration + majorActiveTermSupportDuration,\n+      majorReleaseDate.getMonth() + majorActiveSupportDuration + majorLongTermSupportDuration,\n       majorReleaseDate.getDate(), majorReleaseDate.getHours(), majorReleaseDate.getMinutes(),\n       majorReleaseDate.getSeconds(), majorReleaseDate.getMilliseconds());\n }"
        },
        {
            "sha": "2e0419ee695a8f72868ccd54972fa12790a63efe",
            "filename": "dev-infra/release/versioning/npm-registry.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fversioning%2Fnpm-registry.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fversioning%2Fnpm-registry.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fversioning%2Fnpm-registry.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -57,10 +57,9 @@ function getRepresentativeNpmPackage(config: ReleaseConfig) {\n \n /** Fetches the specified NPM package from the NPM registry. */\n async function fetchPackageInfoFromNpmRegistry(pkgName: string): Promise<NpmPackageInfo> {\n-  if (_npmPackageInfoCache[pkgName] !== undefined) {\n-    return await _npmPackageInfoCache[pkgName];\n+  if (_npmPackageInfoCache[pkgName] === undefined) {\n+    _npmPackageInfoCache[pkgName] =\n+        fetch(`https://registry.npmjs.org/${pkgName}`).then(r => r.json());\n   }\n-  const result = _npmPackageInfoCache[pkgName] =\n-      fetch(`https://registry.npmjs.org/${pkgName}`).then(r => r.json());\n-  return await result;\n+  return await _npmPackageInfoCache[pkgName];\n }"
        },
        {
            "sha": "b4314cea2e5dbd4d257a0698b6df8497a91210a5",
            "filename": "dev-infra/release/versioning/print-active-trains.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fversioning%2Fprint-active-trains.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fversioning%2Fprint-active-trains.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fversioning%2Fprint-active-trains.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -59,14 +59,14 @@ export async function printActiveReleaseTrains(\n         `published yet.`);\n   }\n \n-  // If no release-train in release-candidate of feature-freeze phase is active,\n+  // If no release-train in release-candidate or feature-freeze phase is active,\n   // we print a message as last bullet point to make this clear.\n   if (releaseCandidate === null) {\n-    info(` • No release-candidate or feature-freeze branch currently active.`);\n+    info(' • No release-candidate or feature-freeze branch currently active.');\n   }\n \n   info();\n-  info(blue(`Current active LTS version branches:`));\n+  info(blue('Current active LTS version branches:'));\n \n   // Print all active LTS branches (each branch as own bullet point).\n   if (ltsBranches.active.length !== 0) {"
        },
        {
            "sha": "7a934d3a761d38cd4d38d3a455630119bbcf2586",
            "filename": "dev-infra/release/versioning/version-branches.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fversioning%2Fversion-branches.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Frelease%2Fversioning%2Fversion-branches.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fversioning%2Fversion-branches.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -28,7 +28,7 @@ export interface VersionBranch {\n }\n \n /** Regular expression that matches version-branches. */\n-const versionBranchNameRegex = /(\\d+)\\.(\\d+)\\.x/;\n+const versionBranchNameRegex = /^(\\d+)\\.(\\d+)\\.x$/;\n \n /** Gets the version of a given branch by reading the `package.json` upstream. */\n export async function getVersionOfBranch(\n@@ -56,8 +56,6 @@ export function isVersionBranch(branchName: string): boolean {\n  * relevant but needed for parsing. SemVer does not allow `x` as patch digit.\n  */\n export function getVersionForVersionBranch(branchName: string): semver.SemVer|null {\n-  // Convert a given version-branch into a SemVer version that can be used\n-  // with the SemVer utilities. i.e. to determine semantic order.\n   return semver.parse(branchName.replace(versionBranchNameRegex, '$1.$2.0'));\n }\n "
        },
        {
            "sha": "b2a4c21df7358e2e9a31a1e62b466ba8bbbae15d",
            "filename": "dev-infra/utils/child-process.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Futils%2Fchild-process.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Futils%2Fchild-process.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Futils%2Fchild-process.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -48,7 +48,7 @@ export function spawnWithDebugOutput(\n     childProcess.stderr.on('data', message => {\n       logOutput += message;\n       // If console output is enabled, print the message directly to the stderr. Note that\n-      // we intentionally print all output to stderr as stderr should not be polluted.\n+      // we intentionally print all output to stderr as stdout should not be polluted.\n       if (outputMode === undefined || outputMode === 'enabled') {\n         process.stderr.write(message);\n       }\n@@ -57,7 +57,7 @@ export function spawnWithDebugOutput(\n       stdout += message;\n       logOutput += message;\n       // If console output is enabled, print the message directly to the stderr. Note that\n-      // we intentionally print all output to stderr as stderr should not be polluted.\n+      // we intentionally print all output to stderr as stdout should not be polluted.\n       if (outputMode === undefined || outputMode === 'enabled') {\n         process.stderr.write(message);\n       }\n@@ -67,7 +67,7 @@ export function spawnWithDebugOutput(\n       const exitDescription = status !== null ? `exit code \"${status}\"` : `signal \"${signal}\"`;\n       const printFn = outputMode === 'on-error' ? error : debug;\n \n-      printFn(`Command ${commandText} completed with ${exitDescription}.`);\n+      printFn(`Command \"${commandText}\" completed with ${exitDescription}.`);\n       printFn(`Process output: \\n${logOutput}`);\n \n       // On success, resolve the promise. Otherwise reject with the captured stderr"
        },
        {
            "sha": "ff4e04810f6717f99c7a154a004809cdaa84fa57",
            "filename": "dev-infra/utils/git/github-urls.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Futils%2Fgit%2Fgithub-urls.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Futils%2Fgit%2Fgithub-urls.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Futils%2Fgit%2Fgithub-urls.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -12,16 +12,16 @@ import {GithubConfig} from '../config';\n import {GitClient} from './index';\n \n /** URL to the Github page where personal access tokens can be managed. */\n-export const GITHUB_TOKEN_SETTINGS_URL = `https://github.com/settings/tokens`;\n+export const GITHUB_TOKEN_SETTINGS_URL = 'https://github.com/settings/tokens';\n \n /** URL to the Github page where personal access tokens can be generated. */\n-export const GITHUB_TOKEN_GENERATE_URL = `https://github.com/settings/tokens/new`;\n+export const GITHUB_TOKEN_GENERATE_URL = 'https://github.com/settings/tokens/new';\n \n /** Adds the provided token to the given Github HTTPs remote url. */\n export function addTokenToGitHttpsUrl(githubHttpsUrl: string, token: string) {\n   const url = new URL(githubHttpsUrl);\n   url.username = token;\n-  return url.toString();\n+  return url.href;\n }\n \n /** Gets the repository Git URL for the given github config. */\n@@ -36,7 +36,7 @@ export function getRepositoryGitUrl(config: GithubConfig, githubToken?: string):\n   return baseHttpUrl;\n }\n \n-/** Gets a Github URL that refers to a lists of recent commits within a specified branch. */\n+/** Gets a Github URL that refers to a list of recent commits within a specified branch. */\n export function getListCommitsInBranchUrl({remoteParams}: GitClient, branchName: string) {\n   return `https://github.com/${remoteParams.owner}/${remoteParams.repo}/commits/${branchName}`;\n }"
        },
        {
            "sha": "8a51ffc63f7dc0b1f860b324aa383208a00e6a99",
            "filename": "dev-infra/utils/git/index.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Futils%2Fgit%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Futils%2Fgit%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Futils%2Fgit%2Findex.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -88,8 +88,8 @@ export class GitClient {\n    */\n   runGraceful(args: string[], options: SpawnSyncOptions = {}): SpawnSyncReturns<string> {\n     // To improve the debugging experience in case something fails, we print all executed Git\n-    // commands unless the `stdio` is explicitly to `ignore` (which is equivalent to silent).\n-    // Note that we do not want to print the token if is contained in the command. It's common\n+    // commands unless the `stdio` is explicitly set to `ignore` (which is equivalent to silent).\n+    // Note that we do not want to print the token if it is contained in the command. It's common\n     // to share errors with others if the tool failed, and we do not want to leak tokens.\n     // TODO: Add support for configuring this on a per-client basis. Some tools do not want\n     // to print the Git command messages to the console at all (e.g. to maintain clean output).\n@@ -202,7 +202,7 @@ export class GitClient {\n   /**\n    * Retrieve the OAuth scopes for the loaded Github token.\n    **/\n-  private async getAuthScopesForToken() {\n+  private getAuthScopesForToken() {\n     // If the OAuth scopes have already been loaded, return the Promise containing them.\n     if (this._cachedOauthScopes !== null) {\n       return this._cachedOauthScopes;"
        },
        {
            "sha": "30052d6e230d46ecce2f3417d2ae8457a4125e83",
            "filename": "dev-infra/utils/testing/index.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Futils%2Ftesting%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Futils%2Ftesting%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Futils%2Ftesting%2Findex.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -6,6 +6,6 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n+export * from './semver-matchers';\n export * from './virtual-git-client';\n export * from './virtual-git-matchers';\n-export * from './semver-matchers';"
        },
        {
            "sha": "05d7f7d708db19466e31b618a72b9f171e52f9b3",
            "filename": "dev-infra/utils/testing/virtual-git-client.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Futils%2Ftesting%2Fvirtual-git-client.ts",
            "raw_url": "https://github.com/angular/angular/raw/6947ceaf444311ab6071bc0fb4e622cfaa300c8d/dev-infra%2Futils%2Ftesting%2Fvirtual-git-client.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Futils%2Ftesting%2Fvirtual-git-client.ts?ref=6947ceaf444311ab6071bc0fb4e622cfaa300c8d",
            "patch": "@@ -123,7 +123,7 @@ export class VirtualGitClient extends GitClient {\n       this.branches[ref.destination] = {\n         branch: ref.destination,\n         ref: this.fetchHeadRef,\n-        newCommits: []\n+        newCommits: [],\n       };\n     }\n   }\n@@ -141,7 +141,7 @@ export class VirtualGitClient extends GitClient {\n       }\n       this.head = {ref: this.fetchHeadRef, newCommits: []};\n     } else if (this.branches[target]) {\n-      this.head = {...this._cloneHead(this.branches[target], detached)};\n+      this.head = this._cloneHead(this.branches[target], detached);\n     } else if (createBranch) {\n       this.head = this.branches[target] = {branch: target, ...this._cloneHead(this.head, detached)};\n     } else {"
        }
    ],
    "stats": {
        "total": 155,
        "additions": 73,
        "deletions": 82
    }
}