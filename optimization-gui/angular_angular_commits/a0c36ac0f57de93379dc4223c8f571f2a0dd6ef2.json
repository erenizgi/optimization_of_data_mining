{
    "author": "JoostK",
    "message": "refactor(compiler): remove unused logic from `ConstantPool` (#44411)\n\nThe `ConstantPool.getDefinition` method is not being used anymore, so\nthis commit removes anything that is related to this method.\n\nPR Close #44411",
    "sha": "a0c36ac0f57de93379dc4223c8f571f2a0dd6ef2",
    "files": [
        {
            "sha": "06b6e08beae708773c428b920f4c12975f8ef216",
            "filename": "packages/compiler/src/constant_pool.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 65,
            "changes": 65,
            "blob_url": "https://github.com/angular/angular/blob/a0c36ac0f57de93379dc4223c8f571f2a0dd6ef2/packages%2Fcompiler%2Fsrc%2Fconstant_pool.ts",
            "raw_url": "https://github.com/angular/angular/raw/a0c36ac0f57de93379dc4223c8f571f2a0dd6ef2/packages%2Fcompiler%2Fsrc%2Fconstant_pool.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fconstant_pool.ts?ref=a0c36ac0f57de93379dc4223c8f571f2a0dd6ef2",
            "patch": "@@ -20,13 +20,6 @@ const CONSTANT_PREFIX = '_c';\n  */\n const UNKNOWN_VALUE_KEY = o.variable('<unknown>');\n \n-export const enum DefinitionKind {\n-  Injector,\n-  Directive,\n-  Component,\n-  Pipe\n-}\n-\n /**\n  * Context to use when producing a key.\n  *\n@@ -94,10 +87,6 @@ export class ConstantPool {\n   statements: o.Statement[] = [];\n   private literals = new Map<string, FixupExpression>();\n   private literalFactories = new Map<string, o.Expression>();\n-  private injectorDefinitions = new Map<any, FixupExpression>();\n-  private directiveDefinitions = new Map<any, FixupExpression>();\n-  private componentDefinitions = new Map<any, FixupExpression>();\n-  private pipeDefinitions = new Map<any, FixupExpression>();\n \n   private nextNameIndex = 0;\n \n@@ -160,27 +149,6 @@ export class ConstantPool {\n     return fixup;\n   }\n \n-  getDefinition(type: any, kind: DefinitionKind, ctx: OutputContext, forceShared: boolean = false):\n-      o.Expression {\n-    const definitions = this.definitionsOf(kind);\n-    let fixup = definitions.get(type);\n-    let newValue = false;\n-    if (!fixup) {\n-      const property = this.propertyNameOf(kind);\n-      fixup = new FixupExpression(ctx.importExpr(type).prop(property));\n-      definitions.set(type, fixup);\n-      newValue = true;\n-    }\n-\n-    if ((!newValue && !fixup.shared) || (newValue && forceShared)) {\n-      const name = this.freshName();\n-      this.statements.push(\n-          o.variable(name).set(fixup.resolved).toDeclStmt(o.INFERRED_TYPE, [o.StmtModifier.Final]));\n-      fixup.fixup(o.variable(name));\n-    }\n-    return fixup;\n-  }\n-\n   getLiteralFactory(literal: o.LiteralArrayExpr|o.LiteralMapExpr):\n       {literalFactory: o.Expression, literalFactoryArguments: o.Expression[]} {\n     // Create a pure function that builds an array of a mix of constant and variable expressions\n@@ -240,32 +208,6 @@ export class ConstantPool {\n     return `${prefix}${this.nextNameIndex++}`;\n   }\n \n-  private definitionsOf(kind: DefinitionKind): Map<any, FixupExpression> {\n-    switch (kind) {\n-      case DefinitionKind.Component:\n-        return this.componentDefinitions;\n-      case DefinitionKind.Directive:\n-        return this.directiveDefinitions;\n-      case DefinitionKind.Injector:\n-        return this.injectorDefinitions;\n-      case DefinitionKind.Pipe:\n-        return this.pipeDefinitions;\n-    }\n-  }\n-\n-  public propertyNameOf(kind: DefinitionKind): string {\n-    switch (kind) {\n-      case DefinitionKind.Component:\n-        return 'ɵcmp';\n-      case DefinitionKind.Directive:\n-        return 'ɵdir';\n-      case DefinitionKind.Injector:\n-        return 'ɵinj';\n-      case DefinitionKind.Pipe:\n-        return 'ɵpipe';\n-    }\n-  }\n-\n   private freshName(): string {\n     return this.uniqueName(CONSTANT_PREFIX);\n   }\n@@ -275,13 +217,6 @@ export class ConstantPool {\n   }\n }\n \n-export interface OutputContext {\n-  genFilePath: string;\n-  statements: o.Statement[];\n-  constantPool: ConstantPool;\n-  importExpr(reference: any, typeParams?: o.Type[]|null, useSummaries?: boolean): o.Expression;\n-}\n-\n /**\n  * Visitor used to determine if 2 expressions are equivalent and can be shared in the\n  * `ConstantPool`."
        }
    ],
    "stats": {
        "total": 65,
        "additions": 0,
        "deletions": 65
    }
}