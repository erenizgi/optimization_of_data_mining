{
    "author": "AleksanderBodurri",
    "message": "test(devtools): add breadcrumb scroll button tests",
    "sha": "daf2b614ca9b9726f8f34c5346f13b3c0b189b22",
    "files": [
        {
            "sha": "5d7dcee9bb1d83413d57e647da469b657209ad40",
            "filename": "cypress/integration/node-selection.e2e.js",
            "status": "modified",
            "additions": 74,
            "deletions": 0,
            "changes": 74,
            "blob_url": "https://github.com/angular/angular/blob/daf2b614ca9b9726f8f34c5346f13b3c0b189b22/cypress%2Fintegration%2Fnode-selection.e2e.js",
            "raw_url": "https://github.com/angular/angular/raw/daf2b614ca9b9726f8f34c5346f13b3c0b189b22/cypress%2Fintegration%2Fnode-selection.e2e.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/cypress%2Fintegration%2Fnode-selection.e2e.js?ref=daf2b614ca9b9726f8f34c5346f13b3c0b189b22",
            "patch": "@@ -44,4 +44,78 @@ describe('node selection', () => {\n       cy.get('ng-property-view').last().find('mat-tree-node:contains(\"Save the world\")').its('length').should('eq', 1);\n     });\n   });\n+\n+  describe('breadcrumb logic', () => {\n+    it('should overflow when breadcrumb list is long enough', () => {\n+      cy.get('.tree-wrapper')\n+        .find('.tree-node:contains(\"app-todo[TooltipDirective]\")')\n+        .last()\n+        .click({ force: true })\n+        .then(() => {\n+          cy.get('ng-breadcrumbs')\n+            .find('.breadcrumbs')\n+            .then((breadcrumbsContainer) => {\n+              const hasOverflowX = () => breadcrumbsContainer[0].scrollWidth > breadcrumbsContainer[0].clientWidth;\n+              expect(hasOverflowX()).to.be.true;\n+            });\n+        });\n+    });\n+\n+    it('should scroll right when right scroll button is clicked', () => {\n+      cy.get('.tree-wrapper')\n+        .find('.tree-node:contains(\"app-todo[TooltipDirective]\")')\n+        .last()\n+        .click({ force: true })\n+        .then(() => {\n+          cy.get('ng-breadcrumbs')\n+            .find('.breadcrumbs')\n+            .then((breadcrumbsContainer) => {\n+              const scrollLeft = () => breadcrumbsContainer[0].scrollLeft;\n+              expect(scrollLeft()).to.eql(0);\n+\n+              cy.get('ng-breadcrumbs')\n+                .find('.scroll-button')\n+                .last()\n+                .click()\n+                .wait(150) // wait for scroll animation to end\n+                .then(() => {\n+                  expect(scrollLeft()).to.eql(100);\n+                });\n+            });\n+        });\n+    });\n+\n+    it('should scroll left when left scroll button is clicked', () => {\n+      cy.get('.tree-wrapper')\n+        .find('.tree-node:contains(\"app-todo[TooltipDirective]\")')\n+        .last()\n+        .click({ force: true })\n+        .then(() => {\n+          cy.get('ng-breadcrumbs')\n+            .find('.breadcrumbs')\n+            .then((breadcrumbsContainer) => {\n+              const scrollLeft = () => breadcrumbsContainer[0].scrollLeft;\n+              expect(scrollLeft()).to.eql(0);\n+\n+              cy.get('ng-breadcrumbs')\n+                .find('.scroll-button')\n+                .last()\n+                .click()\n+                .wait(150) // wait for scroll animation to end\n+                .then(() => {\n+                  expect(scrollLeft()).to.eql(100);\n+\n+                  cy.get('ng-breadcrumbs')\n+                    .find('.scroll-button')\n+                    .first()\n+                    .click()\n+                    .wait(150) // wait for scroll animation to end\n+                    .then(() => {\n+                      expect(scrollLeft()).to.eql(0);\n+                    });\n+                });\n+            });\n+        });\n+    });\n+  });\n });"
        },
        {
            "sha": "be4aa722b2c904488e93c034558819a22f5e0073",
            "filename": "projects/ng-devtools/src/lib/devtools-tabs/directive-explorer/breadcrumbs/breadcrumbs.component.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 26,
            "changes": 30,
            "blob_url": "https://github.com/angular/angular/blob/daf2b614ca9b9726f8f34c5346f13b3c0b189b22/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdirective-explorer%2Fbreadcrumbs%2Fbreadcrumbs.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/daf2b614ca9b9726f8f34c5346f13b3c0b189b22/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdirective-explorer%2Fbreadcrumbs%2Fbreadcrumbs.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdirective-explorer%2Fbreadcrumbs%2Fbreadcrumbs.component.ts?ref=daf2b614ca9b9726f8f34c5346f13b3c0b189b22",
            "patch": "@@ -33,10 +33,7 @@ export class BreadcrumbsComponent implements OnInit, AfterViewInit, OnChanges {\n   updateScrollButtonVisibility$ = new Subject<void>();\n \n   ngOnInit(): void {\n-    this.updateScrollButtonVisibility$\n-      .asObservable()\n-      .pipe(debounceTime(100))\n-      .subscribe((_) => this._updateScrollButtonVisibility());\n+    this.updateScrollButtonVisibility$.pipe(debounceTime(100)).subscribe(() => this._updateScrollButtonVisibility());\n   }\n \n   ngAfterViewInit(): void {\n@@ -58,27 +55,8 @@ export class BreadcrumbsComponent implements OnInit, AfterViewInit, OnChanges {\n   }\n \n   private _updateScrollButtonVisibility(): void {\n-    const { clientWidth, scrollWidth } = this.breadcrumbsScrollContent.nativeElement;\n-    const hasOverflowX = scrollWidth > clientWidth;\n-\n-    if (hasOverflowX) {\n-      const scrollLeft = this.breadcrumbsScrollContent.nativeElement.scrollLeft;\n-\n-      if (scrollLeft > 0 && scrollLeft + clientWidth < scrollWidth) {\n-        this.showScrollLeftButton = true;\n-        this.showScrollRightButton = true;\n-      } else if (scrollLeft === 0) {\n-        this.showScrollLeftButton = false;\n-        this.showScrollRightButton = true;\n-      } else if (scrollLeft + clientWidth === scrollWidth) {\n-        this.showScrollLeftButton = true;\n-        this.showScrollRightButton = false;\n-      }\n-\n-      return;\n-    }\n-\n-    this.showScrollLeftButton = false;\n-    this.showScrollRightButton = false;\n+    const { clientWidth, scrollWidth, scrollLeft } = this.breadcrumbsScrollContent.nativeElement;\n+    this.showScrollLeftButton = scrollLeft > 0;\n+    this.showScrollRightButton = scrollLeft + clientWidth < scrollWidth;\n   }\n }"
        }
    ],
    "stats": {
        "total": 104,
        "additions": 78,
        "deletions": 26
    }
}