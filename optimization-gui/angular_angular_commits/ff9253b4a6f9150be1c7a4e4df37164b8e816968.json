{
    "author": "alan-agius4",
    "message": "ci: add cache for windows run (#41467)\n\nAdd CircleCI cache for windows runs\n\nPR Close #41467",
    "sha": "ff9253b4a6f9150be1c7a4e4df37164b8e816968",
    "files": [
        {
            "sha": "0afba28cf7af854dc5b2540db9bb18da2fecd650",
            "filename": ".circleci/config.yml",
            "status": "modified",
            "additions": 15,
            "deletions": 1,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/ff9253b4a6f9150be1c7a4e4df37164b8e816968/.circleci%2Fconfig.yml",
            "raw_url": "https://github.com/angular/angular/raw/ff9253b4a6f9150be1c7a4e4df37164b8e816968/.circleci%2Fconfig.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.circleci%2Fconfig.yml?ref=ff9253b4a6f9150be1c7a4e4df37164b8e816968",
            "patch": "@@ -28,6 +28,10 @@ var_3: &cache_key v4-angular-node-12-{{ checksum \".bazelversion\" }}-{{ checksum\n # be slower due to its growing size.\n var_4: &cache_key_fallback v4-angular-node-12-{{ checksum \".bazelversion\" }}\n \n+# Windows needs its own cache key because binaries in node_modules are different.\n+var_3_win: &cache_key_win v4-angular-win-node-12-{{ checksum \".bazelversion\" }}-{{ checksum \"yarn.lock\" }}-{{ checksum \"WORKSPACE\" }}-{{ checksum \"packages/bazel/package.bzl\" }}-{{ checksum \"aio/yarn.lock\" }}\n+var_4_win: &cache_key_win_fallback v4-angular-win-node-12-{{ checksum \".bazelversion\" }}\n+\n # Cache key for the `components-repo-unit-tests` job. **Note** when updating the SHA in the\n # cache keys also update the SHA for the \"COMPONENTS_REPO_COMMIT\" environment variable.\n var_5: &components_repo_unit_tests_cache_key v1-angular-components-09e68db8ed5b1253f2fe38ff954ef0df019fc25a\n@@ -187,7 +191,12 @@ commands:\n       - run: ./.circleci/windows-env.ps1\n       - run: node --version\n       - run: yarn --version\n-      - run: yarn install --frozen-lockfile --non-interactive\n+      - restore_cache:\n+          keys:\n+            - *cache_key_win\n+            - *cache_key_win_fallback\n+      # On Windows `~/` is not resolved when using as a CLI value. `../` results in the same path.\n+      - run: yarn install --frozen-lockfile --non-interactive --cache-folder ../.cache/yarn\n \n   notify_webhook_on_fail:\n     description: Notify a webhook about failure\n@@ -784,6 +793,11 @@ jobs:\n           name: Test all windows CI targets\n           command: yarn bazel test --config=ivy --build_tag_filters=-no-windows --test_tag_filters=\"-no-ivy-aot,-no-windows,-fixme-ivy-aot,-browser:chromium-local\" //packages/compiler-cli/... //tools/ts-api-guardian/... //packages/localize/...\n           no_output_timeout: 15m\n+      # Save dependencies to use on subsequent runs.\n+      - save_cache:\n+          key: *cache_key_win\n+          paths:\n+            - ~/.cache/yarn\n \n \n workflows:"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 15,
        "deletions": 1
    }
}