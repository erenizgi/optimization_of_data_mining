{
    "author": "markwhitfeld",
    "message": "fix(devtools): skip node if there is no associated TViewData (rangle/angular-devtools#804)\n\n* fix(backend): skip node if there is no associated TViewData\r\n\r\nThe code was assuming that the TViewData item at the same index as the node\r\nin LView would contain a data entry. This value can be `null` (which is the\r\ncase in our app), which causes a catastrophic failure in the dev tool. By\r\nchecking for null, the node is skipped because it cannot determine the\r\nassociated component or directive and the dev tool does not die.\r\n\r\nfixes issue rangle/angular-devtools#801\r\n\r\n* chore: style tweak - add early return to avoid nesting",
    "sha": "5bf180afb89b9a11fe8dd7bbbd7b5ca827d2719d",
    "files": [
        {
            "sha": "9889708a23f2652b6a7008448c2413b6b35430e6",
            "filename": "projects/ng-devtools-backend/src/lib/directive-forest/ltree.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/5bf180afb89b9a11fe8dd7bbbd7b5ca827d2719d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Fltree.ts",
            "raw_url": "https://github.com/angular/angular/raw/5bf180afb89b9a11fe8dd7bbbd7b5ca827d2719d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Fltree.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Fltree.ts?ref=5bf180afb89b9a11fe8dd7bbbd7b5ca827d2719d",
            "patch": "@@ -71,6 +71,15 @@ export class LTreeStrategy {\n     const tNode = data[idx];\n     const node = lView[idx][ELEMENT];\n     const element = (node.tagName || node.nodeName).toLowerCase();\n+    if (!tNode) {\n+      return {\n+        nativeElement: node,\n+        children: [],\n+        element,\n+        directives: [],\n+        component: null,\n+      };\n+    }\n     for (let i = tNode.directiveStart; i < tNode.directiveEnd; i++) {\n       const instance = lView[i];\n       const dirMeta = data[i];\n@@ -88,7 +97,7 @@ export class LTreeStrategy {\n       }\n     }\n     return {\n-      nativeElement: lView[idx][ELEMENT],\n+      nativeElement: node,\n       children: [],\n       element,\n       directives,"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 10,
        "deletions": 1
    }
}