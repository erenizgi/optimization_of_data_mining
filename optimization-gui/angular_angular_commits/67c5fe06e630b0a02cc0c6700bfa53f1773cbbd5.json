{
    "author": "cexbrayat",
    "message": "docs: improve FormBuilder.group deprecation message (#39946)\n\nThis expands the deprecation message that started to pop up in v11.0.3\nafter the landing of commit e148382bd0c6ba5c442fd6fa8c95f957205b5d01,\nthat deprecated the `{[key: string]: any}` type for the options property of the `FormBuilder.group` method.\n\nIt turns out that having a custom validator declared as\n`{ validators: (group: FormGroup) => ValidationErrors|null }` works in practice,\nbut is now inferred by TS as the deprecated version of `group`\n(because `FormGroup` is a subclass of `AbstractControl` that `ValidatorFn` expects).\nWe considered the possibility of tweaking the forms API to accept such validators,\nbut it turns out to generate too many changes in the framework or possible breaking changes for Angular users.\n\nWe settled for a more explicit deprecation message, elaborated with the help of @petebacondarwin.\nThis will hopefully help developers to understand why the deprecation warning is showing up\nwhen they think they are already using the non-deprecated overload.\n\nPR Close #39946",
    "sha": "67c5fe06e630b0a02cc0c6700bfa53f1773cbbd5",
    "files": [
        {
            "sha": "c64f4683b821353d30165e005a6998325cdc0df2",
            "filename": "packages/forms/src/form_builder.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/67c5fe06e630b0a02cc0c6700bfa53f1773cbbd5/packages%2Fforms%2Fsrc%2Fform_builder.ts",
            "raw_url": "https://github.com/angular/angular/raw/67c5fe06e630b0a02cc0c6700bfa53f1773cbbd5/packages%2Fforms%2Fsrc%2Fform_builder.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Fsrc%2Fform_builder.ts?ref=67c5fe06e630b0a02cc0c6700bfa53f1773cbbd5",
            "patch": "@@ -54,8 +54,14 @@ export class FormBuilder {\n    * @description\n    * Construct a new `FormGroup` instance.\n    *\n-   * @deprecated This api is not typesafe and can result in issues with Closure Compiler renaming.\n-   *  Use the `FormBuilder#group` overload with `AbstractControlOptions` instead.\n+   * @deprecated This API is not typesafe and can result in issues with Closure Compiler renaming.\n+   * Use the `FormBuilder#group` overload with `AbstractControlOptions` instead.\n+   * Note that `AbstractControlOptions` expects `validators` and `asyncValidators` to be valid\n+   * validators. If you have custom validators, make sure their validation function parameter is\n+   * `AbstractControl` and not a sub-class, such as `FormGroup`. These functions will be called with\n+   * an object of type `AbstractControl` and that cannot be automatically downcast to a subclass, so\n+   * TypeScript sees this as an error. For example, change the `(group: FormGroup) =>\n+   * ValidationErrors|null` signature to be `(group: AbstractControl) => ValidationErrors|null`.\n    *\n    * @param controlsConfig A collection of child controls. The key for each child is the name\n    * under which it is registered."
        }
    ],
    "stats": {
        "total": 10,
        "additions": 8,
        "deletions": 2
    }
}