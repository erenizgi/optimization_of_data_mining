{
    "author": "gkalpak",
    "message": "test(ngcc): use `main` property in test `package.json` files for UMD tests (#44245)\n\nPreviously, the mock packages created for `UmdDependencyHost`'s tests,\nspecified the entry-point as `esm2015`. This does not matter in tests,\nsince the packages are explicitly passed to the `UmdDependencyHost`\n(while in reality the appropriate host would be determined based on the\nname of the entry-point property - in this case, detecting the\nentry-point as ES2015 and not UMD).\n\nHowever, in order to avoid confusion, this commit updates the test\npackages to use `main` (the default property used for the UMD format in\n`package.json` files).\n\nPR Close #44245",
    "sha": "80776951675e2d55bae5159756ce793888ad986a",
    "files": [
        {
            "sha": "676d64a9634833ff50adbd6dbff2953364be64e4",
            "filename": "packages/compiler-cli/ngcc/test/dependencies/umd_dependency_host_spec.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 17,
            "changes": 28,
            "blob_url": "https://github.com/angular/angular/blob/80776951675e2d55bae5159756ce793888ad986a/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Fdependencies%2Fumd_dependency_host_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/80776951675e2d55bae5159756ce793888ad986a/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Fdependencies%2Fumd_dependency_host_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Fdependencies%2Fumd_dependency_host_spec.ts?ref=80776951675e2d55bae5159756ce793888ad986a",
            "patch": "@@ -165,10 +165,7 @@ runInEachFileSystem(() => {\n               name: _('/no/imports/or/re-exports/index.js'),\n               contents: '// some text but no import-like statements'\n             },\n-            {\n-              name: _('/no/imports/or/re-exports/package.json'),\n-              contents: '{\"esm2015\": \"./index.js\"}'\n-            },\n+            {name: _('/no/imports/or/re-exports/package.json'), contents: '{\"main\": \"./index.js\"}'},\n             {name: _('/no/imports/or/re-exports/index.metadata.json'), contents: 'MOCK METADATA'},\n             {\n               name: _('/no/imports/but/cannot/skip/index.js'),\n@@ -179,7 +176,7 @@ runInEachFileSystem(() => {\n             },\n             {\n               name: _('/no/imports/but/cannot/skip/package.json'),\n-              contents: '{\"esm2015\": \"./index.js\"}'\n+              contents: '{\"main\": \"./index.js\"}'\n             },\n             {name: _('/no/imports/but/cannot/skip/index.metadata.json'), contents: 'MOCK METADATA'},\n             {\n@@ -190,37 +187,34 @@ runInEachFileSystem(() => {\n                 }(this, function () {}));\n               `,\n             },\n-            {name: _('/invalid/format/package.json'), contents: '{\"esm2015\": \"./index.js\"}'},\n+            {name: _('/invalid/format/package.json'), contents: '{\"main\": \"./index.js\"}'},\n             {name: _('/invalid/format/index.metadata.json'), contents: 'MOCK METADATA'},\n             {\n               name: _('/external/imports/index.js'),\n               contents: umd('imports_index', ['lib_1', 'lib_1/sub_1'])\n             },\n-            {name: _('/external/imports/package.json'), contents: '{\"esm2015\": \"./index.js\"}'},\n+            {name: _('/external/imports/package.json'), contents: '{\"main\": \"./index.js\"}'},\n             {name: _('/external/imports/index.metadata.json'), contents: 'MOCK METADATA'},\n             {\n               name: _('/external/re-exports/index.js'),\n               contents: umd('imports_index', ['lib_1', 'lib_1/sub_1'], ['lib_1.X', 'lib_1sub_1.Y'])\n             },\n-            {name: _('/external/re-exports/package.json'), contents: '{\"esm2015\": \"./index.js\"}'},\n+            {name: _('/external/re-exports/package.json'), contents: '{\"main\": \"./index.js\"}'},\n             {name: _('/external/re-exports/index.metadata.json'), contents: 'MOCK METADATA'},\n             {\n               name: _('/external/imports-missing/index.js'),\n               contents: umd('imports_missing', ['lib_1', 'missing'])\n             },\n-            {\n-              name: _('/external/imports-missing/package.json'),\n-              contents: '{\"esm2015\": \"./index.js\"}'\n-            },\n+            {name: _('/external/imports-missing/package.json'), contents: '{\"main\": \"./index.js\"}'},\n             {name: _('/external/imports-missing/index.metadata.json'), contents: 'MOCK METADATA'},\n             {\n               name: _('/external/deep-import/index.js'),\n               contents: umd('deep_import', ['lib_1/deep/import'])\n             },\n-            {name: _('/external/deep-import/package.json'), contents: '{\"esm2015\": \"./index.js\"}'},\n+            {name: _('/external/deep-import/package.json'), contents: '{\"main\": \"./index.js\"}'},\n             {name: _('/external/deep-import/index.metadata.json'), contents: 'MOCK METADATA'},\n             {name: _('/internal/outer/index.js'), contents: umd('outer', ['../inner'])},\n-            {name: _('/internal/outer/package.json'), contents: '{\"esm2015\": \"./index.js\"}'},\n+            {name: _('/internal/outer/package.json'), contents: '{\"main\": \"./index.js\"}'},\n             {name: _('/internal/outer/index.metadata.json'), contents: 'MOCK METADATA'},\n             {name: _('/internal/inner/index.js'), contents: umd('inner', ['lib_1/sub_1'], ['X'])},\n             {\n@@ -231,17 +225,17 @@ runInEachFileSystem(() => {\n               name: _('/internal/circular_b/index.js'),\n               contents: umd('circular_b', ['../circular_a', 'lib_1'], ['X'])\n             },\n-            {name: _('/internal/circular_a/package.json'), contents: '{\"esm2015\": \"./index.js\"}'},\n+            {name: _('/internal/circular_a/package.json'), contents: '{\"main\": \"./index.js\"}'},\n             {name: _('/internal/circular_a/index.metadata.json'), contents: 'MOCK METADATA'},\n             {name: _('/re-directed/index.js'), contents: umd('re_directed', ['lib_1/sub_2'])},\n-            {name: _('/re-directed/package.json'), contents: '{\"esm2015\": \"./index.js\"}'},\n+            {name: _('/re-directed/package.json'), contents: '{\"main\": \"./index.js\"}'},\n             {name: _('/re-directed/index.metadata.json'), contents: 'MOCK METADATA'},\n             {\n               name: _('/path-alias/index.js'),\n               contents:\n                   umd('path_alias', ['@app/components', '@app/shared', '@lib/shared/test', 'lib_1'])\n             },\n-            {name: _('/path-alias/package.json'), contents: '{\"esm2015\": \"./index.js\"}'},\n+            {name: _('/path-alias/package.json'), contents: '{\"main\": \"./index.js\"}'},\n             {name: _('/path-alias/index.metadata.json'), contents: 'MOCK METADATA'},\n             {name: _('/node_modules/lib_1/index.d.ts'), contents: 'export declare class X {}'},\n             {"
        }
    ],
    "stats": {
        "total": 28,
        "additions": 11,
        "deletions": 17
    }
}