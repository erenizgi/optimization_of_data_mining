{
    "author": "AndrewKushnir",
    "message": "refactor(core): remove unused i18n placeholder for projection (#39172)\n\nRuntime i18n logic doesn't distinguish `<ng-content>` tag placeholders and regular element tag\nplaceholders in i18n messages, so there is no need to have a special marker for projection-based\nplaceholders and element markers can be used instead.\n\nPR Close #39172",
    "sha": "9186ad84ae2829fe3cb6f6a191896373d8895594",
    "files": [
        {
            "sha": "f740c939b0bd943247ab974d345aef3da84d6a6a",
            "filename": "packages/compiler/src/render3/view/i18n/context.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 8,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/9186ad84ae2829fe3cb6f6a191896373d8895594/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Fi18n%2Fcontext.ts",
            "raw_url": "https://github.com/angular/angular/raw/9186ad84ae2829fe3cb6f6a191896373d8895594/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Fi18n%2Fcontext.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Fi18n%2Fcontext.ts?ref=9186ad84ae2829fe3cb6f6a191896373d8895594",
            "patch": "@@ -15,7 +15,6 @@ import {assembleBoundTextPlaceholders, getSeqNumberGenerator, updatePlaceholderM\n enum TagType {\n   ELEMENT,\n   TEMPLATE,\n-  PROJECTION\n }\n \n /**\n@@ -105,10 +104,12 @@ export class I18nContext {\n     this.appendTag(TagType.ELEMENT, node as i18n.TagPlaceholder, index, closed);\n   }\n   appendProjection(node: i18n.I18nMeta, index: number) {\n-    // add open and close tags at the same time,\n-    // since we process projected content separately\n-    this.appendTag(TagType.PROJECTION, node as i18n.TagPlaceholder, index, false);\n-    this.appendTag(TagType.PROJECTION, node as i18n.TagPlaceholder, index, true);\n+    // Add open and close tags at the same time, since `<ng-content>` has no content,\n+    // so when we come across `<ng-content>` we can register both open and close tags.\n+    // Note: runtime i18n logic doesn't distinguish `<ng-content>` tag placeholders and\n+    // regular element tag placeholders, so we generate element placeholders for both types.\n+    this.appendTag(TagType.ELEMENT, node as i18n.TagPlaceholder, index, false);\n+    this.appendTag(TagType.ELEMENT, node as i18n.TagPlaceholder, index, true);\n   }\n \n   /**\n@@ -215,9 +216,6 @@ function serializePlaceholderValue(value: any): string {\n     case TagType.TEMPLATE:\n       return template(value, value.closed);\n \n-    case TagType.PROJECTION:\n-      return projection(value, value.closed);\n-\n     default:\n       return value;\n   }"
        },
        {
            "sha": "60584ad7331bbe3b108ca826b51556ac0f76512a",
            "filename": "packages/core/src/render3/i18n/i18n_parse.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/9186ad84ae2829fe3cb6f6a191896373d8895594/packages%2Fcore%2Fsrc%2Frender3%2Fi18n%2Fi18n_parse.ts",
            "raw_url": "https://github.com/angular/angular/raw/9186ad84ae2829fe3cb6f6a191896373d8895594/packages%2Fcore%2Fsrc%2Frender3%2Fi18n%2Fi18n_parse.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fi18n%2Fi18n_parse.ts?ref=9186ad84ae2829fe3cb6f6a191896373d8895594",
            "patch": "@@ -39,7 +39,7 @@ const ICU_BLOCK_REGEXP = /^\\s*(�\\d+:?\\d*�)\\s*,\\s*(select|plural)\\s*,/;\n \n const MARKER = `�`;\n const SUBTEMPLATE_REGEXP = /�\\/?\\*(\\d+:\\d+)�/gi;\n-const PH_REGEXP = /�(\\/?[#*!]\\d+):?\\d*�/gi;\n+const PH_REGEXP = /�(\\/?[#*]\\d+):?\\d*�/gi;\n \n /**\n  * Angular Dart introduced &ngsp; as a placeholder for non-removable space, see:\n@@ -120,7 +120,7 @@ export function i18nStartFirstCreatePass(\n       // At this point value is something like: '/#1:2' (originally coming from '�/#1:2�')\n       const isClosing = value.charCodeAt(0) === CharCode.SLASH;\n       const type = value.charCodeAt(isClosing ? 1 : 0);\n-      ngDevMode && assertOneOf(type, CharCode.STAR, CharCode.HASH, CharCode.EXCLAMATION);\n+      ngDevMode && assertOneOf(type, CharCode.STAR, CharCode.HASH);\n       const index = HEADER_OFFSET + Number.parseInt(value.substring((isClosing ? 2 : 1)));\n       if (isClosing) {\n         existingTNodeStack.shift();"
        },
        {
            "sha": "c14efdacbd9e39f515af0df26bb438355025f777",
            "filename": "packages/core/src/util/char_code.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/9186ad84ae2829fe3cb6f6a191896373d8895594/packages%2Fcore%2Fsrc%2Futil%2Fchar_code.ts",
            "raw_url": "https://github.com/angular/angular/raw/9186ad84ae2829fe3cb6f6a191896373d8895594/packages%2Fcore%2Fsrc%2Futil%2Fchar_code.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Futil%2Fchar_code.ts?ref=9186ad84ae2829fe3cb6f6a191896373d8895594",
            "patch": "@@ -12,7 +12,6 @@\n export const enum CharCode {\n   UPPER_CASE = ~32,   // & with this will make the char uppercase\n   SPACE = 32,         // \" \"\n-  EXCLAMATION = 33,   // \"!\"\n   DOUBLE_QUOTE = 34,  // \"\\\"\"\n   HASH = 35,          // \"#\"\n   SINGLE_QUOTE = 39,  // \"'\""
        }
    ],
    "stats": {
        "total": 19,
        "additions": 8,
        "deletions": 11
    }
}