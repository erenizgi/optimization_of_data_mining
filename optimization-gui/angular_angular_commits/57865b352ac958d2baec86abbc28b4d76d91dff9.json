{
    "author": "devversion",
    "message": "ci: do not update shared dev-infra package in components-repo-unit-tests job (#42268)\n\nThe shared dev-infra package from `HEAD` should not be installed\nwhen running the `components-repo-unit-tests` job. This is done\nbecause otherwise changes to the dev-infra package can result in\nbuild setup issues for the CI job (while the goal of the CI job\nis to test the framework)\n\nPR Close #42268",
    "sha": "57865b352ac958d2baec86abbc28b4d76d91dff9",
    "files": [
        {
            "sha": "b9ad76e0c1d850720c055a6caafab9a63dddfb0a",
            "filename": ".circleci/config.yml",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/57865b352ac958d2baec86abbc28b4d76d91dff9/.circleci%2Fconfig.yml",
            "raw_url": "https://github.com/angular/angular/raw/57865b352ac958d2baec86abbc28b4d76d91dff9/.circleci%2Fconfig.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.circleci%2Fconfig.yml?ref=57865b352ac958d2baec86abbc28b4d76d91dff9",
            "patch": "@@ -737,8 +737,8 @@ jobs:\n       - run:\n           # Updates the `angular/components` `package.json` file to refer to the release output\n           # inside the `packages-dist` directory.\n-          name: Setting up release packages.\n-          command: node scripts/ci/update-deps-to-dist-packages.js ${COMPONENTS_REPO_TMP_DIR}/package.json dist/packages-dist/\n+          name: Setting up framework release packages.\n+          command: node scripts/ci/update-framework-deps-to-dist-packages.js ${COMPONENTS_REPO_TMP_DIR}/package.json dist/packages-dist/\n       - run:\n           # Run `yarn install` again to install the Angular packages from `packages-dist/` and update the lockfile.\n           # NOTE: We cannot rely on Bazel to run `yarn install`, because it uses the `--frozen-lockfile` flag and fails."
        },
        {
            "sha": "ddad1a598d8108b3498138dabee172332c83bef9",
            "filename": "docs/DEBUG_COMPONENTS_REPO_IVY.md",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/57865b352ac958d2baec86abbc28b4d76d91dff9/docs%2FDEBUG_COMPONENTS_REPO_IVY.md",
            "raw_url": "https://github.com/angular/angular/raw/57865b352ac958d2baec86abbc28b4d76d91dff9/docs%2FDEBUG_COMPONENTS_REPO_IVY.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/docs%2FDEBUG_COMPONENTS_REPO_IVY.md?ref=57865b352ac958d2baec86abbc28b4d76d91dff9",
            "patch": "@@ -13,7 +13,7 @@ the `angular/angular` repo.\n command in the `angular/angular` repo:\n \n ```bash\n-node ./scripts/ci/update-deps-to-dist-packages.js {COMPONENTS_REPO}/package.json ./dist/packages-dist\n+node ./scripts/ci/update-framework-deps-to-dist-packages.js {COMPONENTS_REPO}/package.json ./dist/packages-dist\n ```\n \n 4\\) Switch into the `angular/components` repository and run the tests by using the"
        },
        {
            "sha": "6f96714d8b4f5c4af4a876342ff9860335ce3edf",
            "filename": "scripts/ci/update-framework-deps-to-dist-packages.js",
            "status": "renamed",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/57865b352ac958d2baec86abbc28b4d76d91dff9/scripts%2Fci%2Fupdate-framework-deps-to-dist-packages.js",
            "raw_url": "https://github.com/angular/angular/raw/57865b352ac958d2baec86abbc28b4d76d91dff9/scripts%2Fci%2Fupdate-framework-deps-to-dist-packages.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/scripts%2Fci%2Fupdate-framework-deps-to-dist-packages.js?ref=57865b352ac958d2baec86abbc28b4d76d91dff9",
            "patch": "@@ -29,8 +29,9 @@ const updated = [];\n const skipped = [];\n function updateDeps(dependencies) {\n   for (const packageName of Object.keys(dependencies)) {\n-    // We're only interested to update packages in the @angular scope\n-    if (!packageName.startsWith('@angular/')) {\n+    // We're only interested to update packages in the `@angular` scope. The shared dev-infra\n+    // package is not updated as it's not a package that is part of the Angular framework.\n+    if (!packageName.startsWith('@angular/') || packageName === '@angular/dev-infra-private') {\n       continue;\n     }\n ",
            "previous_filename": "scripts/ci/update-deps-to-dist-packages.js"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 6,
        "deletions": 5
    }
}