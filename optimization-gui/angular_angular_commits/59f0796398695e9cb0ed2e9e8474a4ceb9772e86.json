{
    "author": "devversion",
    "message": "build: update rules_nodejs version for bazel integration test (#43138)\n\nTo keep our integration tests aligned with the setup we use\nfor the Angular repo and Components repo, we should also update\nthe `rules_nodejs` version for our `bazel` integration test.\n\nPR Close #43138",
    "sha": "59f0796398695e9cb0ed2e9e8474a4ceb9772e86",
    "files": [
        {
            "sha": "e59ee64507829379815cdb09a353b6ca2041e9ba",
            "filename": "integration/bazel/WORKSPACE",
            "status": "modified",
            "additions": 12,
            "deletions": 3,
            "changes": 15,
            "blob_url": "https://github.com/angular/angular/blob/59f0796398695e9cb0ed2e9e8474a4ceb9772e86/integration%2Fbazel%2FWORKSPACE",
            "raw_url": "https://github.com/angular/angular/raw/59f0796398695e9cb0ed2e9e8474a4ceb9772e86/integration%2Fbazel%2FWORKSPACE",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/integration%2Fbazel%2FWORKSPACE?ref=59f0796398695e9cb0ed2e9e8474a4ceb9772e86",
            "patch": "@@ -5,8 +5,8 @@ load(\"@bazel_tools//tools/build_defs/repo:http.bzl\", \"http_archive\")\n # Fetch rules_nodejs so we can install our npm dependencies\n http_archive(\n     name = \"build_bazel_rules_nodejs\",\n-    sha256 = \"e79c08a488cc5ac40981987d862c7320cee8741122a2649e9b08e850b6f20442\",\n-    urls = [\"https://github.com/bazelbuild/rules_nodejs/releases/download/3.8.0/rules_nodejs-3.8.0.tar.gz\"],\n+    sha256 = \"659dfa20721ff324d5e9d198d8bf3d8c74ef6563a7223d9c4974a0ca1e66dbf0\",\n+    urls = [\"https://github.com/bazelbuild/rules_nodejs/releases/download/4.0.0-rc.0/rules_nodejs-4.0.0-rc.0.tar.gz\"],\n )\n \n # Fetch sass rules for compiling sass files\n@@ -63,4 +63,13 @@ browser_repositories(\n # Setup the rules_sass toolchain\n load(\"@io_bazel_rules_sass//:defs.bzl\", \"sass_repositories\")\n \n-sass_repositories()\n+# TODO(devversion): remove workaround once `rules_sass` supports v4 of the Bazel NodeJS rules.\n+# For now, we ust replicate the original `sass_repositories` call and manually add the\n+# `--ignore-scripts` Yarn argument to not run the postinstall version check of `@bazel/worker`\n+yarn_install(\n+    name = \"build_bazel_rules_sass_deps\",\n+    package_json = \"@io_bazel_rules_sass//sass:package.json\",\n+    yarn_lock = \"@io_bazel_rules_sass//sass:yarn.lock\",\n+    symlink_node_modules = False,\n+    args = [\"--ignore-scripts\"],\n+)"
        },
        {
            "sha": "de8507140975382c2ac8b2d6a68ba6142deb2d8b",
            "filename": "integration/bazel/package.json",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/59f0796398695e9cb0ed2e9e8474a4ceb9772e86/integration%2Fbazel%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/59f0796398695e9cb0ed2e9e8474a4ceb9772e86/integration%2Fbazel%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/integration%2Fbazel%2Fpackage.json?ref=59f0796398695e9cb0ed2e9e8474a4ceb9772e86",
            "patch": "@@ -23,11 +23,11 @@\n     \"@angular/compiler\": \"file:../../dist/packages-dist/compiler\",\n     \"@angular/compiler-cli\": \"file:../../dist/packages-dist/compiler-cli\",\n     \"@bazel/bazelisk\": \"file:../../node_modules/@bazel/bazelisk\",\n-    \"@bazel/protractor\": \"3.2.1\",\n-    \"@bazel/rollup\": \"3.2.1\",\n-    \"@bazel/concatjs\": \"3.2.1\",\n-    \"@bazel/terser\": \"3.2.1\",\n-    \"@bazel/typescript\": \"3.2.1\",\n+    \"@bazel/protractor\": \"4.0.0-rc.0\",\n+    \"@bazel/rollup\": \"4.0.0-rc.0\",\n+    \"@bazel/concatjs\": \"4.0.0-rc.0\",\n+    \"@bazel/terser\": \"4.0.0-rc.0\",\n+    \"@bazel/typescript\": \"4.0.0-rc.0\",\n     \"@types/jasmine\": \"2.8.8\",\n     \"@types/node\": \"^12.11.1\",\n     \"jasmine\": \"^3.5.0\","
        },
        {
            "sha": "14a4220345d9e9fa317631afeeaf14257dfbb1cc",
            "filename": "integration/bazel/yarn.lock",
            "status": "modified",
            "additions": 817,
            "deletions": 687,
            "changes": 1504,
            "blob_url": "https://github.com/angular/angular/blob/59f0796398695e9cb0ed2e9e8474a4ceb9772e86/integration%2Fbazel%2Fyarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/59f0796398695e9cb0ed2e9e8474a4ceb9772e86/integration%2Fbazel%2Fyarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/integration%2Fbazel%2Fyarn.lock?ref=59f0796398695e9cb0ed2e9e8474a4ceb9772e86"
        }
    ],
    "stats": {
        "total": 1529,
        "additions": 834,
        "deletions": 695
    }
}