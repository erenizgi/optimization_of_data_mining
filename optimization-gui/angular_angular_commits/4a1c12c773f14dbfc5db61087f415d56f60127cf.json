{
    "author": "crisbeto",
    "message": "feat(core): remove ViewEncapsulation.Native (#38882)\n\nRemoves `ViewEncapsulation.Native` which has been deprecated for several major versions.\n\nBREAKING CHANGES:\n* `ViewEncapsulation.Native` has been removed. Use `ViewEncapsulation.ShadowDom` instead. Existing\nusages will be updated automatically by `ng update`.\n\nPR Close #38882",
    "sha": "4a1c12c773f14dbfc5db61087f415d56f60127cf",
    "files": [
        {
            "sha": "6d7b580582da6b589f79032c77ab87645a9d0bae",
            "filename": "aio/content/examples/component-styles/src/app/quest-summary.component.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/aio%2Fcontent%2Fexamples%2Fcomponent-styles%2Fsrc%2Fapp%2Fquest-summary.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/aio%2Fcontent%2Fexamples%2Fcomponent-styles%2Fsrc%2Fapp%2Fquest-summary.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Fcomponent-styles%2Fsrc%2Fapp%2Fquest-summary.component.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -13,8 +13,8 @@ import { Component, ViewEncapsulation } from '@angular/core';\n export class QuestSummaryComponent { }\n // #enddocregion\n /*\n-  // #docregion encapsulation.native\n+  // #docregion encapsulation.shadow\n   // warning: few browsers support shadow DOM encapsulation at this time\n-  encapsulation: ViewEncapsulation.Native\n-  // #enddocregion encapsulation.native\n+  encapsulation: ViewEncapsulation.ShadowDom\n+  // #enddocregion encapsulation.shadow\n */"
        },
        {
            "sha": "a8879533b1e0ae5435af44362790404d8a515b8a",
            "filename": "aio/content/guide/deprecations.md",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/aio%2Fcontent%2Fguide%2Fdeprecations.md",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/aio%2Fcontent%2Fguide%2Fdeprecations.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fdeprecations.md?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -41,7 +41,6 @@ v9 - v12\n | `@angular/core`               | [`DefaultIterableDiffer`](#core)                                              | <!--v7--> v11 |\n | `@angular/core`               | [`ReflectiveKey`](#core)                                                      | <!--v8--> v11 |\n | `@angular/core`               | [`RenderComponentType`](#core)                                                | <!--v7--> v11 |\n-| `@angular/core`               | [`ViewEncapsulation.Native`](#core)                                           | <!--v6--> v11 |\n | `@angular/core`               | [`WrappedValue`](#core)                                                       | <!--v10--> v12 |\n | `@angular/forms`              | [`ngModel` with reactive forms](#ngmodel-reactive)                            | <!--v6--> v11 |\n | `@angular/router`             | [`preserveQueryParams`](#router)                                              | <!--v7--> v11 |\n@@ -89,7 +88,6 @@ Tip: In the [API reference section](api) of this doc site, deprecated APIs are i\n | [`DefaultIterableDiffer`](api/core/DefaultIterableDiffer) | n/a | v4 | Not part of public API. |\n | [`ReflectiveInjector`](api/core/ReflectiveInjector) | [`Injector.create`](api/core/Injector#create)  | v5 | See [`ReflectiveInjector`](#reflectiveinjector) |\n | [`ReflectiveKey`](api/core/ReflectiveKey) | none | v5 | none |\n-| [`ViewEncapsulation.Native`](api/core/ViewEncapsulation#Native) | [`ViewEncapsulation.ShadowDom`](api/core/ViewEncapsulation#ShadowDom) | v6 | Use the native encapsulation mechanism of the renderer. See [view.ts](https://github.com/angular/angular/blob/3e992e18ebf51d6036818f26c3d77b52d3ec48eb/packages/core/src/metadata/view.ts#L32).\n | [`defineInjectable`](api/core/defineInjectable) | `ɵɵdefineInjectable` | v8 | Used only in generated code. No source code should depend on this API. |\n | [`entryComponents`](api/core/NgModule#entryComponents) | none | v9 | See [`entryComponents`](#entryComponents) |\n | [`ANALYZE_FOR_ENTRY_COMPONENTS`](api/core/ANALYZE_FOR_ENTRY_COMPONENTS) | none | v9 | See [`ANALYZE_FOR_ENTRY_COMPONENTS`](#entryComponents) |"
        },
        {
            "sha": "b0e95d4eca4f6f4182bc8444e6dee72d9dbba724",
            "filename": "aio/content/guide/view-encapsulation.md",
            "status": "modified",
            "additions": 2,
            "deletions": 4,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/aio%2Fcontent%2Fguide%2Fview-encapsulation.md",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/aio%2Fcontent%2Fguide%2Fview-encapsulation.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fview-encapsulation.md?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -13,8 +13,6 @@ Choose from the following modes:\n   to attach a shadow DOM to the component's host element, and then puts the component\n   view inside that shadow DOM. The component's styles are included within the shadow DOM.\n \n-* `Native` view encapsulation uses a now deprecated version of the browser's native shadow DOM implementation - [learn about the changes](https://hayato.io/2016/shadowdomv1/).\n-\n * `Emulated` view encapsulation (the default) emulates the behavior of shadow DOM by preprocessing\n   (and renaming) the CSS code to effectively scope the CSS to the component's view.\n   For details, see [Inspecting generated CSS](guide/view-encapsulation#inspect-generated-css) below.\n@@ -26,7 +24,7 @@ Choose from the following modes:\n \n To set the components encapsulation mode, use the `encapsulation` property in the component metadata:\n \n-<code-example path=\"component-styles/src/app/quest-summary.component.ts\" region=\"encapsulation.native\" header=\"src/app/quest-summary.component.ts\"></code-example>\n+<code-example path=\"component-styles/src/app/quest-summary.component.ts\" region=\"encapsulation.shadow\" header=\"src/app/quest-summary.component.ts\"></code-example>\n \n `ShadowDom` view encapsulation only works on browsers that have native support\n for shadow DOM (see [Shadow DOM v1](https://caniuse.com/#feat=shadowdomv1) on the\n@@ -80,4 +78,4 @@ by the generated component styles, which are in the `<head>` section of the DOM:\n \n These styles are post-processed so that each selector is augmented\n with `_nghost` or `_ngcontent` attribute selectors.\n-These extra selectors enable the scoping rules described in this page.\n\\ No newline at end of file\n+These extra selectors enable the scoping rules described in this page."
        },
        {
            "sha": "0fce7f88cd431d40fa35d6f0a46f637b2ab734ab",
            "filename": "aio/src/app/layout/doc-viewer/doc-viewer.component.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/aio%2Fsrc%2Fapp%2Flayout%2Fdoc-viewer%2Fdoc-viewer.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/aio%2Fsrc%2Fapp%2Flayout%2Fdoc-viewer%2Fdoc-viewer.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Flayout%2Fdoc-viewer%2Fdoc-viewer.component.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -21,7 +21,7 @@ const initialDocViewerContent = initialDocViewerElement ? initialDocViewerElemen\n   selector: 'aio-doc-viewer',\n   template: ''\n   // TODO(robwormald): shadow DOM and emulated don't work here (?!)\n-  // encapsulation: ViewEncapsulation.Native\n+  // encapsulation: ViewEncapsulation.ShadowDom\n })\n export class DocViewerComponent implements OnDestroy {\n   // Enable/Disable view transition animations."
        },
        {
            "sha": "b128f9b3ae40c634ffa51d128a22df721a2c4429",
            "filename": "goldens/public-api/core/core.d.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/goldens%2Fpublic-api%2Fcore%2Fcore.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/goldens%2Fpublic-api%2Fcore%2Fcore.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fcore%2Fcore.d.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -1032,7 +1032,6 @@ export declare abstract class ViewContainerRef {\n \n export declare enum ViewEncapsulation {\n     Emulated = 0,\n-    Native = 1,\n     None = 2,\n     ShadowDom = 3\n }"
        },
        {
            "sha": "7155628916e3823dcf97d7ca287d7e81e9488064",
            "filename": "goldens/size-tracking/integration-payloads.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fsize-tracking%2Fintegration-payloads.json?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -30,7 +30,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime-es2015\": 1485,\n-        \"main-es2015\": 134891,\n+        \"main-es2015\": 135003,\n         \"polyfills-es2015\": 37248\n       }\n     }"
        },
        {
            "sha": "a734a45e27abd3b8e8d50b1fc20f3f036cabfb30",
            "filename": "packages/bazel/src/schematics/ng-new/schema.d.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fbazel%2Fsrc%2Fschematics%2Fng-new%2Fschema.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fbazel%2Fsrc%2Fschematics%2Fng-new%2Fschema.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fbazel%2Fsrc%2Fschematics%2Fng-new%2Fschema.d.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -107,7 +107,6 @@ export declare enum Style {\n  */\n export declare enum ViewEncapsulation {\n   Emulated = 'Emulated',\n-  Native = 'Native',\n   None = 'None',\n   ShadowDom = 'ShadowDom'\n }"
        },
        {
            "sha": "7fdd3a41326523ea171aec8310977a7e4cc0ded2",
            "filename": "packages/compiler-cli/test/compliance/r3_view_compiler_styling_spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Fr3_view_compiler_styling_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Fr3_view_compiler_styling_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Fr3_view_compiler_styling_spec.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -72,15 +72,15 @@ describe('compiler compliance: styling', () => {\n          expectEmit(result.source, template, 'Incorrect template');\n        });\n \n-    it('should pass in the component metadata styles into the component definition but skip shimming when style encapsulation is set to native',\n+    it('should pass in the component metadata styles into the component definition but skip shimming when style encapsulation is set to shadow dom',\n        () => {\n          const files = {\n            app: {\n              'spec.ts': `\n                 import {Component, NgModule, ViewEncapsulation} from '@angular/core';\n \n                 @Component({\n-                  encapsulation: ViewEncapsulation.Native,\n+                  encapsulation: ViewEncapsulation.ShadowDom,\n                   selector: \"my-component\",\n                   styles: [\"div.cool { color: blue; }\", \":host.nice p { color: gold; }\"],\n                   template: \"...\"\n@@ -98,7 +98,7 @@ describe('compiler compliance: styling', () => {\n          MyComponent.ɵcmp = $r3$.ɵɵdefineComponent({\n            …\n            styles: [\"div.cool { color: blue; }\", \":host.nice p { color: gold; }\"],\n-           encapsulation: 1\n+           encapsulation: 3\n          })\n          `;\n          const result = compile(files, angularFiles);"
        },
        {
            "sha": "4d9f8d3efb997a58d7dab4a33ad0700485dddabe",
            "filename": "packages/compiler-cli/test/ngtsc/fake_core/index.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Ffake_core%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Ffake_core%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Ffake_core%2Findex.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -77,7 +77,7 @@ export type ɵɵPipeDefWithMeta<PipeT, NameT> = any;\n \n export enum ViewEncapsulation {\n   Emulated = 0,\n-  Native = 1,\n+  // Historically the 1 value was for `Native` encapsulation which has been removed as of v11.\n   None = 2,\n   ShadowDom = 3\n }"
        },
        {
            "sha": "dc0253771c65427de01ba5a42856fd42f7c7c2dc",
            "filename": "packages/compiler/src/compiler_facade_interface.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcompiler%2Fsrc%2Fcompiler_facade_interface.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcompiler%2Fsrc%2Fcompiler_facade_interface.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fcompiler_facade_interface.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -173,7 +173,7 @@ export interface R3FactoryDefMetadataFacade {\n \n export enum ViewEncapsulation {\n   Emulated = 0,\n-  Native = 1,\n+  // Historically the 1 value was for `Native` encapsulation which has been removed as of v11.\n   None = 2,\n   ShadowDom = 3\n }"
        },
        {
            "sha": "d9360f45fab0af84d38b64db95e1badc1c7abbc0",
            "filename": "packages/compiler/src/core.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcompiler%2Fsrc%2Fcore.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcompiler%2Fsrc%2Fcore.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fcore.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -82,7 +82,7 @@ export interface Component extends Directive {\n }\n export enum ViewEncapsulation {\n   Emulated = 0,\n-  Native = 1,\n+  // Historically the 1 value was for `Native` encapsulation which has been removed as of v11.\n   None = 2,\n   ShadowDom = 3\n }"
        },
        {
            "sha": "162f74fdfa7bffaaa370542fa74c55eef1b9e11c",
            "filename": "packages/compiler/src/render3/view/api.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Fapi.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Fapi.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Fapi.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -163,8 +163,6 @@ export interface R3ComponentMetadata extends R3DirectiveMetadata {\n \n   /**\n    * An encapsulation policy for the template and CSS styles. One of:\n-   * - `ViewEncapsulation.Native`: Use shadow roots. This works only if natively available on the\n-   *   platform (note that this is marked the as the \"deprecated shadow DOM\" as of Angular v6.1.\n    * - `ViewEncapsulation.Emulated`: Use shimmed CSS that emulates the native behavior.\n    * - `ViewEncapsulation.None`: Use global CSS without any encapsulation.\n    * - `ViewEncapsulation.ShadowDom`: Use the latest ShadowDOM API to natively encapsulate styles"
        },
        {
            "sha": "94df9dcdb658f9d30fe4d6dfc5a8c356b0e434bc",
            "filename": "packages/compiler/test/directive_normalizer_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcompiler%2Ftest%2Fdirective_normalizer_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcompiler%2Ftest%2Fdirective_normalizer_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fdirective_normalizer_spec.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -226,7 +226,7 @@ function normalizeTemplate(normalizer: DirectiveNormalizer, o: {\n     describe('normalizeLoadedTemplate', () => {\n       it('should store the viewEncapsulation in the result',\n          inject([DirectiveNormalizer], (normalizer: DirectiveNormalizer) => {\n-           const viewEncapsulation = ViewEncapsulation.Native;\n+           const viewEncapsulation = ViewEncapsulation.ShadowDom;\n            const template = <CompileTemplateMetadata>normalizeTemplate(normalizer, {\n              encapsulation: viewEncapsulation,\n              template: '',"
        },
        {
            "sha": "dc0253771c65427de01ba5a42856fd42f7c7c2dc",
            "filename": "packages/core/src/compiler/compiler_facade_interface.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcore%2Fsrc%2Fcompiler%2Fcompiler_facade_interface.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcore%2Fsrc%2Fcompiler%2Fcompiler_facade_interface.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fcompiler%2Fcompiler_facade_interface.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -173,7 +173,7 @@ export interface R3FactoryDefMetadataFacade {\n \n export enum ViewEncapsulation {\n   Emulated = 0,\n-  Native = 1,\n+  // Historically the 1 value was for `Native` encapsulation which has been removed as of v11.\n   None = 2,\n   ShadowDom = 3\n }"
        },
        {
            "sha": "147a20e453ba9364f6bbf87646e48133193c8e4b",
            "filename": "packages/core/src/metadata/directives.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcore%2Fsrc%2Fmetadata%2Fdirectives.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcore%2Fsrc%2Fmetadata%2Fdirectives.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fmetadata%2Fdirectives.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -518,7 +518,6 @@ export interface Component extends Directive {\n \n   /**\n    * An encapsulation policy for the template and CSS styles. One of:\n-   * - `ViewEncapsulation.Native`: Deprecated. Use `ViewEncapsulation.ShadowDom` instead.\n    * - `ViewEncapsulation.Emulated`: Use shimmed CSS that\n    * emulates the native behavior.\n    * - `ViewEncapsulation.None`: Use global CSS without any"
        },
        {
            "sha": "d8295d2b1637aa1bf634dda375e1a6c5268f1e6c",
            "filename": "packages/core/src/metadata/view.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 9,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcore%2Fsrc%2Fmetadata%2Fview.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcore%2Fsrc%2Fmetadata%2Fview.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fmetadata%2Fview.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -28,15 +28,9 @@ export enum ViewEncapsulation {\n    * This is the default option.\n    */\n   Emulated = 0,\n-  /**\n-   * @deprecated v6.1.0 - use {ViewEncapsulation.ShadowDom} instead.\n-   * Use the native encapsulation mechanism of the renderer.\n-   *\n-   * For the DOM this means using the deprecated [Shadow DOM\n-   * v0](https://w3c.github.io/webcomponents/spec/shadow/) and\n-   * creating a ShadowRoot for Component's Host Element.\n-   */\n-  Native = 1,\n+\n+  // Historically the 1 value was for `Native` encapsulation which has been removed as of v11.\n+\n   /**\n    * Don't provide any template or style encapsulation.\n    */"
        },
        {
            "sha": "69b503a0d97bdb6180cb61d388072ef9e7723c0c",
            "filename": "packages/core/src/render3/node_manipulation.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcore%2Fsrc%2Frender3%2Fnode_manipulation.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcore%2Fsrc%2Frender3%2Fnode_manipulation.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fnode_manipulation.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -517,8 +517,8 @@ function getRenderParent(tView: TView, tNode: TNode, currentView: LView): REleme\n       // Since the projection would then move it to its final destination. Note that we can't\n       // make this assumption when using the Shadow DOM, because the native projection placeholders\n       // (<content> or <slot>) have to be in place as elements are being inserted.\n-      if (encapsulation !== ViewEncapsulation.ShadowDom &&\n-          encapsulation !== ViewEncapsulation.Native) {\n+      if (encapsulation === ViewEncapsulation.None ||\n+          encapsulation === ViewEncapsulation.Emulated) {\n         return null;\n       }\n     }"
        },
        {
            "sha": "2259808c106817201a30e304d538f01362b534fc",
            "filename": "packages/core/src/view/util.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcore%2Fsrc%2Fview%2Futil.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcore%2Fsrc%2Fview%2Futil.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fview%2Futil.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -230,7 +230,10 @@ export function getParentRenderElement(view: ViewData, renderHost: any, def: Nod\n     if ((renderParent.flags & NodeFlags.TypeElement) === 0 ||\n         (renderParent.flags & NodeFlags.ComponentView) === 0 ||\n         (renderParent.element!.componentRendererType &&\n-         renderParent.element!.componentRendererType!.encapsulation === ViewEncapsulation.Native)) {\n+         (renderParent.element!.componentRendererType!.encapsulation ===\n+              ViewEncapsulation.ShadowDom ||\n+          // TODO(FW-2290): remove the `encapsulation === 1` fallback logic in v12.\n+          renderParent.element!.componentRendererType!.encapsulation === 1))) {\n       // only children of non components, or children of components with native encapsulation should\n       // be attached.\n       return asElementData(view, def.renderParent!.nodeIndex).renderElement;"
        },
        {
            "sha": "d97673918f06d170ea1544e9c164832b1bd29271",
            "filename": "packages/core/test/linker/projection_integration_spec.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 15,
            "changes": 30,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcore%2Ftest%2Flinker%2Fprojection_integration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fcore%2Ftest%2Flinker%2Fprojection_integration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Flinker%2Fprojection_integration_spec.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -490,13 +490,13 @@ describe('projection', () => {\n     expect(main.nativeElement).toHaveText('TREE(0:TREE2(1:TREE(2:)))');\n   });\n \n-  if (supportsNativeShadowDOM()) {\n-    it('should support native content projection and isolate styles per component', () => {\n-      TestBed.configureTestingModule({declarations: [SimpleNative1, SimpleNative2]});\n+  if (supportsShadowDOM()) {\n+    it('should support shadow dom content projection and isolate styles per component', () => {\n+      TestBed.configureTestingModule({declarations: [SimpleShadowDom1, SimpleShadowDom2]});\n       TestBed.overrideComponent(MainComp, {\n         set: {\n-          template: '<simple-native1><div>A</div></simple-native1>' +\n-              '<simple-native2><div>B</div></simple-native2>'\n+          template: '<simple-shadow-dom1><div>A</div></simple-shadow-dom1>' +\n+              '<simple-shadow-dom2><div>B</div></simple-shadow-dom2>'\n         }\n       });\n       const main = TestBed.createComponent(MainComp);\n@@ -857,21 +857,21 @@ class Simple {\n }\n \n @Component({\n-  selector: 'simple-native1',\n-  template: 'SIMPLE1(<content></content>)',\n-  encapsulation: ViewEncapsulation.Native,\n+  selector: 'simple-shadow-dom1',\n+  template: 'SIMPLE1(<slot></slot>)',\n+  encapsulation: ViewEncapsulation.ShadowDom,\n   styles: ['div {color: red}']\n })\n-class SimpleNative1 {\n+class SimpleShadowDom1 {\n }\n \n @Component({\n-  selector: 'simple-native2',\n-  template: 'SIMPLE2(<content></content>)',\n-  encapsulation: ViewEncapsulation.Native,\n+  selector: 'simple-shadow-dom2',\n+  template: 'SIMPLE2(<slot></slot>)',\n+  encapsulation: ViewEncapsulation.ShadowDom,\n   styles: ['div {color: blue}']\n })\n-class SimpleNative2 {\n+class SimpleShadowDom2 {\n }\n \n @Component({selector: 'empty', template: ''})\n@@ -1043,6 +1043,6 @@ class CmpA1 {\n class CmpA2 {\n }\n \n-function supportsNativeShadowDOM(): boolean {\n-  return typeof (<any>document.body).createShadowRoot === 'function';\n+function supportsShadowDOM(): boolean {\n+  return typeof (<any>document.body).attachShadow !== 'undefined';\n }"
        },
        {
            "sha": "33d0bc67bcff8bd3d9a029acb5ab4d68e51b0db0",
            "filename": "packages/platform-browser/src/dom/dom_renderer.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 7,
            "changes": 20,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fplatform-browser%2Fsrc%2Fdom%2Fdom_renderer.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fplatform-browser%2Fsrc%2Fdom%2Fdom_renderer.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-browser%2Fsrc%2Fdom%2Fdom_renderer.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -74,6 +74,8 @@ function decoratePreventDefault(eventHandler: Function): Function {\n   };\n }\n \n+let hasLoggedNativeEncapsulationWarning = false;\n+\n @Injectable()\n export class DomRendererFactory2 implements RendererFactory2 {\n   private rendererByCompId = new Map<string, Renderer2>();\n@@ -100,8 +102,16 @@ export class DomRendererFactory2 implements RendererFactory2 {\n         (<EmulatedEncapsulationDomRenderer2>renderer).applyToHost(element);\n         return renderer;\n       }\n-      case ViewEncapsulation.Native:\n+      case 1:\n       case ViewEncapsulation.ShadowDom:\n+        // TODO(FW-2290): remove the `case 1:` fallback logic and the warning in v12.\n+        if ((typeof ngDevMode === 'undefined' || ngDevMode) &&\n+            !hasLoggedNativeEncapsulationWarning && type.encapsulation === 1) {\n+          hasLoggedNativeEncapsulationWarning = true;\n+          console.warn(\n+              'ViewEncapsulation.Native is no longer supported. Falling back to ViewEncapsulation.ShadowDom. The fallback will be removed in v12.');\n+        }\n+\n         return new ShadowDomRenderer(this.eventManager, this.sharedStylesHost, element, type);\n       default: {\n         if (!this.rendererByCompId.has(type.id)) {\n@@ -302,13 +312,9 @@ class ShadowDomRenderer extends DefaultDomRenderer2 {\n \n   constructor(\n       eventManager: EventManager, private sharedStylesHost: DomSharedStylesHost,\n-      private hostEl: any, private component: RendererType2) {\n+      private hostEl: any, component: RendererType2) {\n     super(eventManager);\n-    if (component.encapsulation === ViewEncapsulation.ShadowDom) {\n-      this.shadowRoot = (hostEl as any).attachShadow({mode: 'open'});\n-    } else {\n-      this.shadowRoot = (hostEl as any).createShadowRoot();\n-    }\n+    this.shadowRoot = (hostEl as any).attachShadow({mode: 'open'});\n     this.sharedStylesHost.addHost(this.shadowRoot);\n     const styles = flattenStyles(component.id, component.styles, []);\n     for (let i = 0; i < styles.length; i++) {"
        },
        {
            "sha": "1dfb5deeafaa358c8568eaaacf3d17d41f376b9d",
            "filename": "packages/platform-browser/test/dom/dom_renderer_spec.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 19,
            "changes": 27,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fplatform-browser%2Ftest%2Fdom%2Fdom_renderer_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fplatform-browser%2Ftest%2Fdom%2Fdom_renderer_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-browser%2Ftest%2Fdom%2Fdom_renderer_spec.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -20,8 +20,8 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n     beforeEach(() => {\n       TestBed.configureTestingModule({\n         declarations: [\n-          TestCmp, SomeApp, CmpEncapsulationEmulated, CmpEncapsulationNative, CmpEncapsulationNone,\n-          CmpEncapsulationNative\n+          TestCmp, SomeApp, CmpEncapsulationEmulated, CmpEncapsulationShadow, CmpEncapsulationNone,\n+          CmpEncapsulationShadow\n         ]\n       });\n       renderer = TestBed.createComponent(TestCmp).componentInstance.renderer;\n@@ -98,16 +98,14 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n       });\n     });\n \n-    if (browserDetection.supportsDeprecatedShadowDomV0) {\n+    if (browserDetection.supportsShadowDom) {\n       it('should allow to style components with emulated encapsulation and no encapsulation inside of components with shadow DOM',\n          () => {\n            const fixture = TestBed.createComponent(SomeApp);\n+           const cmp = fixture.debugElement.query(By.css('cmp-shadow')).nativeElement;\n+           const shadow = cmp.shadowRoot.querySelector('.shadow');\n \n-           const cmp = fixture.debugElement.query(By.css('cmp-native')).nativeElement;\n-\n-\n-           const native = cmp.shadowRoot.querySelector('.native');\n-           expect(window.getComputedStyle(native).color).toEqual('rgb(255, 0, 0)');\n+           expect(window.getComputedStyle(shadow).color).toEqual('rgb(255, 0, 0)');\n \n            const emulated = cmp.shadowRoot.querySelector('.emulated');\n            expect(window.getComputedStyle(emulated).color).toEqual('rgb(0, 0, 255)');\n@@ -119,15 +117,6 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n   });\n }\n \n-@Component({\n-  selector: 'cmp-native',\n-  template: `<div class=\"native\"></div><cmp-emulated></cmp-emulated><cmp-none></cmp-none>`,\n-  styles: [`.native { color: red; }`],\n-  encapsulation: ViewEncapsulation.Native\n-})\n-class CmpEncapsulationNative {\n-}\n-\n @Component({\n   selector: 'cmp-emulated',\n   template: `<div class=\"emulated\"></div>`,\n@@ -149,7 +138,7 @@ class CmpEncapsulationNone {\n @Component({\n   selector: 'cmp-shadow',\n   template: `<div class=\"shadow\"></div><cmp-emulated></cmp-emulated><cmp-none></cmp-none>`,\n-  styles: [`.native { color: red; }`],\n+  styles: [`.shadow { color: red; }`],\n   encapsulation: ViewEncapsulation.ShadowDom\n })\n class CmpEncapsulationShadow {\n@@ -158,7 +147,7 @@ class CmpEncapsulationShadow {\n @Component({\n   selector: 'some-app',\n   template: `\n-\t  <cmp-native></cmp-native>\n+\t  <cmp-shadow></cmp-shadow>\n \t  <cmp-emulated></cmp-emulated>\n \t  <cmp-none></cmp-none>\n   `,"
        },
        {
            "sha": "afb6d1f4623855b59b141c0bdc709878978fef09",
            "filename": "packages/platform-browser/test/dom/shadow_dom_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fplatform-browser%2Ftest%2Fdom%2Fshadow_dom_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fplatform-browser%2Ftest%2Fdom%2Fshadow_dom_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-browser%2Ftest%2Fdom%2Fshadow_dom_spec.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -15,13 +15,11 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n \n if (browserDetection.supportsShadowDom) {\n   describe('ShadowDOM Support', () => {\n-    let testContainer: HTMLDivElement;\n-\n     beforeEach(() => {\n       TestBed.configureTestingModule({imports: [TestModule]});\n     });\n \n-    it('should attach and use a shadowRoot when ViewEncapsulation.Native is set', () => {\n+    it('should attach and use a shadowRoot when ViewEncapsulation.ShadowDom is set', () => {\n       const compEl = TestBed.createComponent(ShadowComponent).nativeElement;\n       expect(compEl.shadowRoot!.textContent).toEqual('Hello World');\n     });"
        },
        {
            "sha": "ffdac7173990984c6b6a34674b6385897c26ff56",
            "filename": "packages/platform-browser/testing/src/matchers.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 2,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fplatform-browser%2Ftesting%2Fsrc%2Fmatchers.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fplatform-browser%2Ftesting%2Fsrc%2Fmatchers.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-browser%2Ftesting%2Fsrc%2Fmatchers.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -305,8 +305,14 @@ function elementText(n: any): string {\n     return '';\n   }\n \n-  if (getDOM().isElementNode(n) && (n as Element).tagName == 'CONTENT') {\n-    return elementText(Array.prototype.slice.apply((<any>n).getDistributedNodes()));\n+  if (getDOM().isElementNode(n)) {\n+    const tagName = (n as Element).tagName;\n+\n+    if (tagName === 'CONTENT') {\n+      return elementText(Array.prototype.slice.apply((<any>n).getDistributedNodes()));\n+    } else if (tagName === 'SLOT') {\n+      return elementText(Array.prototype.slice.apply((<any>n).assignedNodes()));\n+    }\n   }\n \n   if (hasShadowRoot(n)) {"
        },
        {
            "sha": "fb6334ad67274c3245527be29a5889bd3f4d2dbe",
            "filename": "packages/platform-server/src/server_renderer.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fplatform-server%2Fsrc%2Fserver_renderer.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fplatform-server%2Fsrc%2Fserver_renderer.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-server%2Fsrc%2Fserver_renderer.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -32,7 +32,6 @@ export class ServerRendererFactory2 implements RendererFactory2 {\n       return this.defaultRenderer;\n     }\n     switch (type.encapsulation) {\n-      case ViewEncapsulation.Native:\n       case ViewEncapsulation.Emulated: {\n         let renderer = this.rendererByCompId.get(type.id);\n         if (!renderer) {"
        },
        {
            "sha": "d345ab4afbe7ceadde9243a53fea33c1bd62578d",
            "filename": "packages/platform-server/test/integration_spec.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fplatform-server%2Ftest%2Fintegration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/4a1c12c773f14dbfc5db61087f415d56f60127cf/packages%2Fplatform-server%2Ftest%2Fintegration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-server%2Ftest%2Fintegration_spec.ts?ref=4a1c12c773f14dbfc5db61087f415d56f60127cf",
            "patch": "@@ -272,19 +272,19 @@ class ImageExampleModule {\n \n @Component({\n   selector: 'app',\n-  template: 'Native works',\n-  encapsulation: ViewEncapsulation.Native,\n+  template: 'Shadow DOM works',\n+  encapsulation: ViewEncapsulation.ShadowDom,\n   styles: [':host { color: red; }']\n })\n-class NativeEncapsulationApp {\n+class ShadowDomEncapsulationApp {\n }\n \n @NgModule({\n-  declarations: [NativeEncapsulationApp],\n+  declarations: [ShadowDomEncapsulationApp],\n   imports: [BrowserModule.withServerTransition({appId: 'test'}), ServerModule],\n-  bootstrap: [NativeEncapsulationApp]\n+  bootstrap: [ShadowDomEncapsulationApp]\n })\n-class NativeExampleModule {\n+class ShadowDomExampleModule {\n }\n \n @Component({selector: 'my-child', template: 'Works!'})\n@@ -666,8 +666,8 @@ describe('platform-server integration', () => {\n          });\n        }));\n \n-    it('should handle ViewEncapsulation.Native', waitForAsync(() => {\n-         renderModule(NativeExampleModule, {document: doc}).then(output => {\n+    it('should handle ViewEncapsulation.ShadowDom', waitForAsync(() => {\n+         renderModule(ShadowDomExampleModule, {document: doc}).then(output => {\n            expect(output).not.toBe('');\n            expect(output).toContain('color: red');\n            called = true;"
        }
    ],
    "stats": {
        "total": 168,
        "additions": 77,
        "deletions": 91
    }
}