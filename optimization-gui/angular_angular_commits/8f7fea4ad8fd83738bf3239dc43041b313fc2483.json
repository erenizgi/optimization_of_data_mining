{
    "author": "gkalpak",
    "message": "fix(docs-infra): clear unneeded DOM nodes in `CodeExample/TabsComponent` (#40802)\n\nBoth `CodeExampleComponent` and `CodeTabsComponent` components receive\nsome code via content projection, grab the projected content and pass it\nthrough to a `CodeComponent` instance for formatting and displaying.\n\nPreviously, the projected content was kept in the DOM (hidden). This\nunnecessarily increased the number of DOM nodes.\n\nThis commit fixes this by clearing the projected DOM nodes once their\ncontent has been captured.\n\nPR Close #40802",
    "sha": "8f7fea4ad8fd83738bf3239dc43041b313fc2483",
    "files": [
        {
            "sha": "91d6dc673d73e64b4984422bf73e96bb7cae902d",
            "filename": "aio/src/app/custom-elements/code/code-example.component.spec.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8f7fea4ad8fd83738bf3239dc43041b313fc2483/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode-example.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8f7fea4ad8fd83738bf3239dc43041b313fc2483/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode-example.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode-example.component.spec.ts?ref=8f7fea4ad8fd83738bf3239dc43041b313fc2483",
            "patch": "@@ -36,6 +36,10 @@ describe('CodeExampleComponent', () => {\n     expect(codeExampleComponent.aioCode.code.trim()).toBe(`const foo = \"bar\";`);\n   });\n \n+  it('should clean-up the projected code snippet once captured', () => {\n+    expect(codeExampleComponent.content.nativeElement.innerHTML).toBe('');\n+  });\n+\n   it('should change aio-code classes based on header presence', () => {\n     expect(codeExampleComponent.header).toBe('Great Example');\n     expect(fixture.nativeElement.querySelector('header')).toBeTruthy();"
        },
        {
            "sha": "c7219edac1fdd876d02705998ae3cbdb472a39d6",
            "filename": "aio/src/app/custom-elements/code/code-example.component.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/8f7fea4ad8fd83738bf3239dc43041b313fc2483/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode-example.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/8f7fea4ad8fd83738bf3239dc43041b313fc2483/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode-example.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode-example.component.ts?ref=8f7fea4ad8fd83738bf3239dc43041b313fc2483",
            "patch": "@@ -79,11 +79,13 @@ export class CodeExampleComponent implements AfterViewInit {\n \n   @HostBinding('class.avoidFile') isAvoid = false;\n \n-  @ViewChild('content', { static: true }) content: ElementRef;\n+  @ViewChild('content', { static: true }) content: ElementRef<HTMLDivElement>;\n \n   @ViewChild(CodeComponent, { static: true }) aioCode: CodeComponent;\n \n   ngAfterViewInit() {\n-    this.aioCode.code = this.content.nativeElement.innerHTML;\n+    const contentElem = this.content.nativeElement;\n+    this.aioCode.code = contentElem.innerHTML;\n+    contentElem.innerHTML = '';  // Remove DOM nodes that are no longer needed.\n   }\n }"
        },
        {
            "sha": "9778974b70f40ac9399824e3a13eeea98140ee40",
            "filename": "aio/src/app/custom-elements/code/code-tabs.component.spec.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8f7fea4ad8fd83738bf3239dc43041b313fc2483/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode-tabs.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8f7fea4ad8fd83738bf3239dc43041b313fc2483/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode-tabs.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode-tabs.component.spec.ts?ref=8f7fea4ad8fd83738bf3239dc43041b313fc2483",
            "patch": "@@ -70,6 +70,10 @@ describe('CodeTabsComponent', () => {\n     const codeContent = fixture.nativeElement.querySelector('aio-code').textContent;\n     expect(codeContent.indexOf('Code example 1') !== -1).toBeTruthy();\n   });\n+\n+  it('should clean-up the projected tabs content once captured', () => {\n+    expect(codeTabsComponent.content.nativeElement.innerHTML).toBe('');\n+  });\n });\n \n @Component({"
        },
        {
            "sha": "369216adbb4cbf67d58ddd23054906a040fbe183",
            "filename": "aio/src/app/custom-elements/code/code-tabs.component.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8f7fea4ad8fd83738bf3239dc43041b313fc2483/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode-tabs.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/8f7fea4ad8fd83738bf3239dc43041b313fc2483/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode-tabs.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode-tabs.component.ts?ref=8f7fea4ad8fd83738bf3239dc43041b313fc2483",
            "patch": "@@ -55,7 +55,9 @@ export class CodeTabsComponent implements OnInit, AfterViewInit {\n \n   ngOnInit() {\n     this.tabs = [];\n-    const codeExamples = Array.from(this.content.nativeElement.querySelectorAll('code-pane'));\n+    const contentElem = this.content.nativeElement;\n+    const codeExamples = Array.from(contentElem.querySelectorAll('code-pane'));\n+    contentElem.innerHTML = '';  // Remove DOM nodes that are no longer needed.\n \n     for (const tabContent of codeExamples) {\n       this.tabs.push(this.getTabInfo(tabContent));"
        }
    ],
    "stats": {
        "total": 18,
        "additions": 15,
        "deletions": 3
    }
}