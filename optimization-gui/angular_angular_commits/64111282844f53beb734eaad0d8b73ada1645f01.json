{
    "author": "alan-agius4",
    "message": "ci: update default circle ci image to `cimg/node:14.17.6` (#43810)\nWith this change we update Node.js version to 14.17 which is needed because of Eslint 8. Also, we replace the legacy images `circleci/node` with the new images `cimg/node`.\n\nSee: https://circleci.com/developer/images/image/cimg/node\n\nPR Close #43810",
    "sha": "64111282844f53beb734eaad0d8b73ada1645f01",
    "files": [
        {
            "sha": "6acf4e863f72aa586bc22becdc83a5cda753825a",
            "filename": ".circleci/config.yml",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/64111282844f53beb734eaad0d8b73ada1645f01/.circleci%2Fconfig.yml",
            "raw_url": "https://github.com/angular/angular/raw/64111282844f53beb734eaad0d8b73ada1645f01/.circleci%2Fconfig.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.circleci%2Fconfig.yml?ref=64111282844f53beb734eaad0d8b73ada1645f01",
            "patch": "@@ -24,15 +24,15 @@ version: 2.1\n # **NOTE 2 **: If you change the cache key prefix, also sync the cache_key_fallback to match.\n # **NOTE 3 **: Keep the static part of the cache key as prefix to enable correct fallbacks.\n # See https://circleci.com/docs/2.0/caching/#restoring-cache for how prefixes work in CircleCI.\n-var_3: &cache_key v5-angular-node-14-{{ checksum \"month.txt\" }}-{{ checksum \".bazelversion\" }}-{{ checksum \"yarn.lock\" }}-{{ checksum \"WORKSPACE\" }}-{{ checksum \"aio/yarn.lock\" }}\n+var_3: &cache_key v6-angular-node-14-{{ checksum \"month.txt\" }}-{{ checksum \".bazelversion\" }}-{{ checksum \"yarn.lock\" }}-{{ checksum \"WORKSPACE\" }}-{{ checksum \"aio/yarn.lock\" }}\n # We invalidate the cache if the Bazel version changes because otherwise the `bazelisk` cache\n # folder will contain all previously used versions and ultimately cause the cache restoring to\n # be slower due to its growing size.\n-var_4: &cache_key_fallback v5-angular-node-14-{{ checksum \"month.txt\" }}-{{ checksum \".bazelversion\" }}\n+var_4: &cache_key_fallback v6-angular-node-14-{{ checksum \"month.txt\" }}-{{ checksum \".bazelversion\" }}\n \n # Windows needs its own cache key because binaries in node_modules are different.\n-var_3_win: &cache_key_win v5-angular-win-node-14-{{ checksum \"month.txt\" }}-{{ checksum \".bazelversion\" }}-{{ checksum \"yarn.lock\" }}-{{ checksum \"WORKSPACE\" }}-{{ checksum \"aio/yarn.lock\" }}\n-var_4_win: &cache_key_win_fallback v5-angular-win-node-14-{{ checksum \"month.txt\" }}-{{ checksum \".bazelversion\" }}\n+var_3_win: &cache_key_win v6-angular-win-node-14-{{ checksum \"month.txt\" }}-{{ checksum \".bazelversion\" }}-{{ checksum \"yarn.lock\" }}-{{ checksum \"WORKSPACE\" }}-{{ checksum \"aio/yarn.lock\" }}\n+var_4_win: &cache_key_win_fallback v6-angular-win-node-14-{{ checksum \"month.txt\" }}-{{ checksum \".bazelversion\" }}\n \n # Cache key for the `components-repo-unit-tests` job. **Note** when updating the SHA in the\n # cache keys also update the SHA for the \"COMPONENTS_REPO_COMMIT\" environment variable.\n@@ -86,7 +86,7 @@ executors:\n         type: string\n         default: medium\n     docker:\n-      - image: circleci/node:14.16.1@sha256:951e12268fe692615bfd155c327bd910e10c99db98404badd03879f984c32b31\n+      - image: cimg/node:14.17.6@sha256:589b5e494173bfb48923fa8d29b010b4d17079ac98d08de95dd4a78e57f5aa0b\n     resource_class: << parameters.resource_class >>\n     working_directory: ~/ng\n \n@@ -131,7 +131,7 @@ commands:\n             # and network security service libraries (libnss3) & X11 Screen Saver extension library (libssx1)\n             # which are dependencies of chrome & needed for karma & protractor headless chrome tests.\n             # This is a very small install which takes around 7s in comparing to using the full\n-            # circleci/node:x.x.x-browsers image.\n+            # cimg/node:x.x.x-browsers image.\n             sudo apt-get -y install libgtk-3-0 libasound2 libnss3 libxss1\n \n   # Install java runtime which is required by some integration tests such as"
        },
        {
            "sha": "8e93ffd40099a5fa252795961fdf4830863a9671",
            "filename": ".circleci/windows-env.ps1",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/64111282844f53beb734eaad0d8b73ada1645f01/.circleci%2Fwindows-env.ps1",
            "raw_url": "https://github.com/angular/angular/raw/64111282844f53beb734eaad0d8b73ada1645f01/.circleci%2Fwindows-env.ps1",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.circleci%2Fwindows-env.ps1?ref=64111282844f53beb734eaad0d8b73ada1645f01",
            "patch": "@@ -41,8 +41,8 @@ copy .circleci\\bazel.windows.rc ${Env:USERPROFILE}\\.bazelrc\n ####################################################################################################\n # Install specific version of node.\n ####################################################################################################\n-nvm install 14.16.1\n-nvm use 14.16.1\n+nvm install 14.17.6\n+nvm use 14.17.6\n \n # These Bazel prereqs aren't needed because the CircleCI image already includes them.\n # choco install yarn --version 1.16.0 --no-progress"
        },
        {
            "sha": "e37725c43da41018abbfb64f4e1ba255452b9d21",
            "filename": ".devcontainer/recommended-Dockerfile",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/64111282844f53beb734eaad0d8b73ada1645f01/.devcontainer%2Frecommended-Dockerfile",
            "raw_url": "https://github.com/angular/angular/raw/64111282844f53beb734eaad0d8b73ada1645f01/.devcontainer%2Frecommended-Dockerfile",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.devcontainer%2Frecommended-Dockerfile?ref=64111282844f53beb734eaad0d8b73ada1645f01",
            "patch": "@@ -1,7 +1,7 @@\n # Image metadata and config.\n # Ideally, the Node.js version should match what we use on CI.\n # See `executors > default-executor` in `.circleci/config.yml`.\n-FROM circleci/node:14-browsers\n+FROM cimg/node:14-browsers\n \n \n LABEL name=\"Angular dev environment\" \\"
        },
        {
            "sha": "5595ae1aa9e4c9f82632a90f6631b5e60442bb88",
            "filename": ".nvmrc",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/64111282844f53beb734eaad0d8b73ada1645f01/.nvmrc",
            "raw_url": "https://github.com/angular/angular/raw/64111282844f53beb734eaad0d8b73ada1645f01/.nvmrc",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.nvmrc?ref=64111282844f53beb734eaad0d8b73ada1645f01",
            "patch": "@@ -1 +1 @@\n-14.16.1\n+14.17.6"
        },
        {
            "sha": "75a92089f2b76de7049ef383feaa33427508e13b",
            "filename": "WORKSPACE",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/64111282844f53beb734eaad0d8b73ada1645f01/WORKSPACE",
            "raw_url": "https://github.com/angular/angular/raw/64111282844f53beb734eaad0d8b73ada1645f01/WORKSPACE",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/WORKSPACE?ref=64111282844f53beb734eaad0d8b73ada1645f01",
            "patch": "@@ -32,7 +32,7 @@ check_rules_nodejs_version(minimum_version_string = \"2.2.0\")\n \n # Setup the Node.js toolchain\n node_repositories(\n-    node_version = \"14.16.1\",\n+    node_version = \"14.17.6\",\n     package_json = [\"//:package.json\"],\n )\n "
        },
        {
            "sha": "f9492124b3503137dfe64d3f21557bda3f54f8e8",
            "filename": "integration/bazel/WORKSPACE",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/64111282844f53beb734eaad0d8b73ada1645f01/integration%2Fbazel%2FWORKSPACE",
            "raw_url": "https://github.com/angular/angular/raw/64111282844f53beb734eaad0d8b73ada1645f01/integration%2Fbazel%2FWORKSPACE",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/integration%2Fbazel%2FWORKSPACE?ref=64111282844f53beb734eaad0d8b73ada1645f01",
            "patch": "@@ -26,7 +26,7 @@ load(\"@build_bazel_rules_nodejs//:index.bzl\", \"node_repositories\", \"yarn_install\n # Setup the Node.js toolchain\n node_repositories(\n     # Use same node version as root angular WORKSPACE since\n-    node_version = \"14.16.1\",\n+    node_version = \"14.17.6\",\n     yarn_version = \"1.12.1\",\n )\n "
        }
    ],
    "stats": {
        "total": 24,
        "additions": 12,
        "deletions": 12
    }
}