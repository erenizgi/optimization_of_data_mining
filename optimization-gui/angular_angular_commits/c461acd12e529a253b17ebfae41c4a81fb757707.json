{
    "author": "mhevery",
    "message": "refactor(core): Remove circular dependency on `ApplicationRef` (#39621)\n\n`ViewRef` and `ApplicationRef` had a circular reference. This change\nintroduces `ViewRefTracker` which is a subset of `ApplicationRef` for\nthis purpose.\n\nPR Close #39621",
    "sha": "c461acd12e529a253b17ebfae41c4a81fb757707",
    "files": [
        {
            "sha": "1b5b773a2c28bcb4b8c5bfb1cf2e2fb8ba54200a",
            "filename": "goldens/circular-deps/packages.json",
            "status": "modified",
            "additions": 28,
            "deletions": 331,
            "changes": 359,
            "blob_url": "https://github.com/angular/angular/blob/c461acd12e529a253b17ebfae41c4a81fb757707/goldens%2Fcircular-deps%2Fpackages.json",
            "raw_url": "https://github.com/angular/angular/raw/c461acd12e529a253b17ebfae41c4a81fb757707/goldens%2Fcircular-deps%2Fpackages.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fcircular-deps%2Fpackages.json?ref=c461acd12e529a253b17ebfae41c4a81fb757707",
            "patch": "@@ -112,383 +112,71 @@\n     \"packages/compiler/src/render3/view/styling_builder.ts\",\n     \"packages/compiler/src/render3/view/template.ts\"\n   ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/application_tokens.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/error_handler.ts\",\n-    \"packages/core/src/errors.ts\",\n-    \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n   [\n     \"packages/core/src/application_ref.ts\",\n     \"packages/core/src/linker/compiler.ts\",\n     \"packages/core/src/metadata.ts\",\n-    \"packages/core/src/metadata/directives.ts\",\n-    \"packages/core/src/render3/jit/directive.ts\",\n-    \"packages/core/src/render3/jit/environment.ts\",\n-    \"packages/core/src/render3/index.ts\",\n-    \"packages/core/src/render3/component.ts\",\n-    \"packages/core/src/render3/instructions/shared.ts\",\n-    \"packages/core/src/error_handler.ts\",\n-    \"packages/core/src/errors.ts\",\n-    \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/linker/component_factory_resolver.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n+    \"packages/core/src/metadata/do_boostrap.ts\"\n   ],\n   [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/render3/component.ts\",\n-    \"packages/core/src/render3/instructions/shared.ts\",\n-    \"packages/core/src/error_handler.ts\",\n-    \"packages/core/src/errors.ts\",\n-    \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n     \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n+    \"packages/core/src/render3/view_ref.ts\",\n+    \"packages/core/src/linker/view_container_ref.ts\",\n+    \"packages/core/src/linker/component_factory.ts\"\n   ],\n   [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/render3/instructions/shared.ts\",\n-    \"packages/core/src/error_handler.ts\",\n-    \"packages/core/src/errors.ts\",\n-    \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n     \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n+    \"packages/core/src/render3/view_ref.ts\",\n+    \"packages/core/src/linker/view_container_ref.ts\",\n+    \"packages/core/src/linker/ng_module_factory.ts\",\n+    \"packages/core/src/linker/component_factory_resolver.ts\",\n+    \"packages/core/src/linker/component_factory.ts\"\n   ],\n   [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n     \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/linker/template_ref.ts\",\n-    \"packages/core/src/linker/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/linker/template_ref.ts\",\n-    \"packages/core/src/linker/view_ref.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n+    \"packages/core/src/render3/view_ref.ts\",\n+    \"packages/core/src/linker/view_container_ref.ts\",\n     \"packages/core/src/linker/template_ref.ts\",\n     \"packages/core/src/render3/instructions/shared.ts\",\n     \"packages/core/src/error_handler.ts\",\n     \"packages/core/src/errors.ts\",\n     \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/linker/template_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n+    \"packages/core/src/linker/component_factory.ts\"\n   ],\n   [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/linker/view_container_ref.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n     \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n+    \"packages/core/src/render3/view_ref.ts\",\n     \"packages/core/src/linker/view_container_ref.ts\",\n     \"packages/core/src/render3/instructions/shared.ts\",\n     \"packages/core/src/error_handler.ts\",\n     \"packages/core/src/errors.ts\",\n     \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/linker/view_container_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/view/refs.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/view/refs.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/view/refs.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/view/refs.ts\",\n-    \"packages/core/src/view/ng_module.ts\",\n-    \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/view/refs.ts\",\n-    \"packages/core/src/view/ng_module.ts\",\n-    \"packages/core/src/view/util.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/view/refs.ts\",\n-    \"packages/core/src/view/ng_module.ts\",\n-    \"packages/core/src/view/util.ts\",\n-    \"packages/core/src/view/errors.ts\",\n-    \"packages/core/src/errors.ts\",\n-    \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/view/refs.ts\",\n-    \"packages/core/src/view/ng_module.ts\",\n-    \"packages/core/src/view/util.ts\",\n-    \"packages/core/src/view/errors.ts\",\n-    \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/view/refs.ts\",\n-    \"packages/core/src/view/ng_module.ts\",\n-    \"packages/core/src/view/util.ts\",\n-    \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/view/refs.ts\",\n-    \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/view/refs.ts\",\n-    \"packages/core/src/view/view_attach.ts\",\n-    \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n+    \"packages/core/src/linker/component_factory.ts\"\n   ],\n   [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n     \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n-  ],\n-  [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/render3/util/global_utils.ts\",\n-    \"packages/core/src/render3/util/change_detection_utils.ts\",\n-    \"packages/core/src/render3/instructions/change_detection.ts\",\n+    \"packages/core/src/render3/view_ref.ts\",\n     \"packages/core/src/render3/instructions/shared.ts\",\n     \"packages/core/src/error_handler.ts\",\n     \"packages/core/src/errors.ts\",\n     \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n+    \"packages/core/src/linker/component_factory.ts\"\n   ],\n   [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/render3/util/global_utils.ts\",\n-    \"packages/core/src/render3/util/change_detection_utils.ts\",\n-    \"packages/core/src/render3/util/discovery_utils.ts\",\n-    \"packages/core/src/render3/instructions/lview_debug.ts\",\n-    \"packages/core/src/core.ts\",\n-    \"packages/core/src/metadata.ts\",\n-    \"packages/core/src/metadata/directives.ts\",\n-    \"packages/core/src/render3/jit/directive.ts\",\n-    \"packages/core/src/render3/jit/environment.ts\",\n-    \"packages/core/src/render3/index.ts\",\n-    \"packages/core/src/render3/component.ts\",\n-    \"packages/core/src/render3/instructions/shared.ts\",\n-    \"packages/core/src/error_handler.ts\",\n-    \"packages/core/src/errors.ts\",\n-    \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n-    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\",\n-    \"packages/core/src/render3/instructions/shared.ts\",\n-    \"packages/core/src/error_handler.ts\",\n-    \"packages/core/src/errors.ts\",\n-    \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/component_factory.ts\"\n-  ],\n-  [\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n+    \"packages/core/src/linker/view_container_ref.ts\",\n+    \"packages/core/src/linker/template_ref.ts\",\n+    \"packages/core/src/linker/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/change_detection/differs/default_iterable_differ.ts\",\n@@ -607,6 +295,15 @@\n     \"packages/core/src/linker/component_factory_resolver.ts\",\n     \"packages/core/src/linker/ng_module_factory.ts\"\n   ],\n+  [\n+    \"packages/core/src/linker/template_ref.ts\",\n+    \"packages/core/src/render3/view_ref.ts\",\n+    \"packages/core/src/linker/view_container_ref.ts\"\n+  ],\n+  [\n+    \"packages/core/src/linker/view_container_ref.ts\",\n+    \"packages/core/src/render3/view_ref.ts\"\n+  ],\n   [\n     \"packages/core/src/metadata/directives.ts\",\n     \"packages/core/src/render3/jit/directive.ts\""
        },
        {
            "sha": "41202bc5408f49e35964fcb70ad2f9653db251a1",
            "filename": "packages/core/src/linker/view_container_ref.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/c461acd12e529a253b17ebfae41c4a81fb757707/packages%2Fcore%2Fsrc%2Flinker%2Fview_container_ref.ts",
            "raw_url": "https://github.com/angular/angular/raw/c461acd12e529a253b17ebfae41c4a81fb757707/packages%2Fcore%2Fsrc%2Flinker%2Fview_container_ref.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Flinker%2Fview_container_ref.ts?ref=c461acd12e529a253b17ebfae41c4a81fb757707",
            "patch": "@@ -364,11 +364,11 @@ const R3ViewContainerRef = class ViewContainerRef extends VE_ViewContainerRef {\n };\n \n function getViewRefs(lContainer: LContainer): ViewRef[]|null {\n-  return lContainer[VIEW_REFS];\n+  return lContainer[VIEW_REFS] as ViewRef[];\n }\n \n function getOrCreateViewRefs(lContainer: LContainer): ViewRef[] {\n-  return lContainer[VIEW_REFS] || (lContainer[VIEW_REFS] = []);\n+  return (lContainer[VIEW_REFS] || (lContainer[VIEW_REFS] = [])) as ViewRef[];\n }\n \n /**"
        },
        {
            "sha": "bafc35a4880eb75b156a8dc66a91e8bc16cc2a1d",
            "filename": "packages/core/src/linker/view_ref.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 2,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/c461acd12e529a253b17ebfae41c4a81fb757707/packages%2Fcore%2Fsrc%2Flinker%2Fview_ref.ts",
            "raw_url": "https://github.com/angular/angular/raw/c461acd12e529a253b17ebfae41c4a81fb757707/packages%2Fcore%2Fsrc%2Flinker%2Fview_ref.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Flinker%2Fview_ref.ts?ref=c461acd12e529a253b17ebfae41c4a81fb757707",
            "patch": "@@ -6,7 +6,6 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import {ApplicationRef} from '../application_ref';\n import {ChangeDetectorRef} from '../change_detection/change_detector_ref';\n \n /**\n@@ -104,5 +103,15 @@ export abstract class EmbeddedViewRef<C> extends ViewRef {\n \n export interface InternalViewRef extends ViewRef {\n   detachFromAppRef(): void;\n-  attachToAppRef(appRef: ApplicationRef): void;\n+  attachToAppRef(appRef: ViewRefTracker): void;\n+}\n+\n+/**\n+ * Interface for tracking root `ViewRef`s in `ApplicationRef`.\n+ *\n+ * NOTE: Importing `ApplicationRef` here directly creates circular dependency, which is why we have\n+ * a subset of the `ApplicationRef` interface `ViewRefTracker` here.\n+ */\n+export interface ViewRefTracker {\n+  detachView(viewRef: ViewRef): void;\n }"
        },
        {
            "sha": "05dc30600a8af15af20928423750fc9ef94e1b7f",
            "filename": "packages/core/src/render3/instructions/lview_debug.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/c461acd12e529a253b17ebfae41c4a81fb757707/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Flview_debug.ts",
            "raw_url": "https://github.com/angular/angular/raw/c461acd12e529a253b17ebfae41c4a81fb757707/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Flview_debug.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Flview_debug.ts?ref=c461acd12e529a253b17ebfae41c4a81fb757707",
            "patch": "@@ -6,7 +6,9 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import {Injector, SchemaMetadata, Type} from '../../core';\n+import {Injector} from '../../di/injector';\n+import {Type} from '../../interface/type';\n+import {SchemaMetadata} from '../../metadata/schema';\n import {Sanitizer} from '../../sanitization/sanitizer';\n import {KeyValueArray} from '../../util/array_utils';\n import {assertDefined} from '../../util/assert';"
        },
        {
            "sha": "161ccf21b329b2e4d265de70ab8f9960637f4731",
            "filename": "packages/core/src/render3/interfaces/container.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/c461acd12e529a253b17ebfae41c4a81fb757707/packages%2Fcore%2Fsrc%2Frender3%2Finterfaces%2Fcontainer.ts",
            "raw_url": "https://github.com/angular/angular/raw/c461acd12e529a253b17ebfae41c4a81fb757707/packages%2Fcore%2Fsrc%2Frender3%2Finterfaces%2Fcontainer.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Finterfaces%2Fcontainer.ts?ref=c461acd12e529a253b17ebfae41c4a81fb757707",
            "patch": "@@ -129,7 +129,7 @@ export interface LContainer extends Array<any> {\n    * NOTE: This is stored as `any[]` because render3 should really not be aware of `ViewRef` and\n    * doing so creates circular dependency.\n    */\n-  [VIEW_REFS]: any[]|null;\n+  [VIEW_REFS]: unknown[]|null;\n }\n \n // Note: This hack is necessary so we don't erroneously get a circular dependency"
        },
        {
            "sha": "ec2bfff716dcfbd6eda596fd4cb268cfb2508883",
            "filename": "packages/core/src/render3/view_ref.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/c461acd12e529a253b17ebfae41c4a81fb757707/packages%2Fcore%2Fsrc%2Frender3%2Fview_ref.ts",
            "raw_url": "https://github.com/angular/angular/raw/c461acd12e529a253b17ebfae41c4a81fb757707/packages%2Fcore%2Fsrc%2Frender3%2Fview_ref.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fview_ref.ts?ref=c461acd12e529a253b17ebfae41c4a81fb757707",
            "patch": "@@ -6,10 +6,9 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import {ApplicationRef} from '../application_ref';\n import {ChangeDetectorRef as viewEngine_ChangeDetectorRef} from '../change_detection/change_detector_ref';\n import {ViewContainerRef as viewEngine_ViewContainerRef} from '../linker/view_container_ref';\n-import {EmbeddedViewRef as viewEngine_EmbeddedViewRef, InternalViewRef as viewEngine_InternalViewRef} from '../linker/view_ref';\n+import {EmbeddedViewRef as viewEngine_EmbeddedViewRef, InternalViewRef as viewEngine_InternalViewRef, ViewRefTracker} from '../linker/view_ref';\n import {collectNativeNodes} from './collect_native_nodes';\n import {checkNoChangesInRootView, checkNoChangesInternal, detectChangesInRootView, detectChangesInternal, markViewDirty, storeCleanupWithContext} from './instructions/shared';\n import {CONTEXT, FLAGS, LView, LViewFlags, TVIEW} from './interfaces/view';\n@@ -24,7 +23,7 @@ export interface viewEngine_ChangeDetectorRef_interface extends viewEngine_Chang\n \n export class ViewRef<T> implements viewEngine_EmbeddedViewRef<T>, viewEngine_InternalViewRef,\n                                    viewEngine_ChangeDetectorRef_interface {\n-  private _appRef: ApplicationRef|null = null;\n+  private _appRef: ViewRefTracker|null = null;\n   private _viewContainerRef: viewEngine_ViewContainerRef|null = null;\n \n   get rootNodes(): any[] {\n@@ -284,7 +283,7 @@ export class ViewRef<T> implements viewEngine_EmbeddedViewRef<T>, viewEngine_Int\n     renderDetachView(this._lView[TVIEW], this._lView);\n   }\n \n-  attachToAppRef(appRef: ApplicationRef) {\n+  attachToAppRef(appRef: ViewRefTracker) {\n     if (this._viewContainerRef) {\n       throw new Error('This view is already attached to a ViewContainer!');\n     }"
        },
        {
            "sha": "7d219ace1c253c68c4116d47ade6a99a7eddf2dd",
            "filename": "packages/core/src/view/refs.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 5,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/c461acd12e529a253b17ebfae41c4a81fb757707/packages%2Fcore%2Fsrc%2Fview%2Frefs.ts",
            "raw_url": "https://github.com/angular/angular/raw/c461acd12e529a253b17ebfae41c4a81fb757707/packages%2Fcore%2Fsrc%2Fview%2Frefs.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fview%2Frefs.ts?ref=c461acd12e529a253b17ebfae41c4a81fb757707",
            "patch": "@@ -6,7 +6,6 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import {ApplicationRef} from '../application_ref';\n import {ChangeDetectorRef} from '../change_detection/change_detection';\n import {Injector} from '../di/injector';\n import {InjectFlags} from '../di/interface/injector';\n@@ -17,13 +16,13 @@ import {ElementRef} from '../linker/element_ref';\n import {InternalNgModuleRef, NgModuleRef} from '../linker/ng_module_factory';\n import {TemplateRef} from '../linker/template_ref';\n import {ViewContainerRef} from '../linker/view_container_ref';\n-import {EmbeddedViewRef, InternalViewRef, ViewRef} from '../linker/view_ref';\n+import {EmbeddedViewRef, InternalViewRef, ViewRef, ViewRefTracker} from '../linker/view_ref';\n import {stringify} from '../util/stringify';\n import {VERSION} from '../version';\n \n import {callNgModuleLifecycle, initNgModule, resolveNgModuleDep} from './ng_module';\n import {asElementData, asProviderData, asTextData, DepFlags, ElementData, NgModuleData, NgModuleDefinition, NodeDef, NodeFlags, Services, TemplateData, ViewContainerData, ViewData, ViewDefinitionFactory, ViewState} from './types';\n-import {markParentViewsForCheck, resolveDefinition, rootRenderNodes, splitNamespace, tokenKey, viewParentEl} from './util';\n+import {markParentViewsForCheck, resolveDefinition, rootRenderNodes, tokenKey, viewParentEl} from './util';\n import {attachEmbeddedView, detachEmbeddedView, moveEmbeddedView, renderDetachView} from './view_attach';\n \n const EMPTY_CONTEXT = {};\n@@ -249,7 +248,7 @@ export class ViewRef_ implements EmbeddedViewRef<any>, InternalViewRef {\n   /** @internal */\n   _view: ViewData;\n   private _viewContainerRef: ViewContainerRef|null;\n-  private _appRef: ApplicationRef|null;\n+  private _appRef: ViewRefTracker|null;\n \n   constructor(_view: ViewData) {\n     this._view = _view;\n@@ -317,7 +316,7 @@ export class ViewRef_ implements EmbeddedViewRef<any>, InternalViewRef {\n     Services.dirtyParentQueries(this._view);\n   }\n \n-  attachToAppRef(appRef: ApplicationRef) {\n+  attachToAppRef(appRef: ViewRefTracker) {\n     if (this._viewContainerRef) {\n       throw new Error('This view is already attached to a ViewContainer!');\n     }"
        }
    ],
    "stats": {
        "total": 398,
        "additions": 52,
        "deletions": 346
    }
}