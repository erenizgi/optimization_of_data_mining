{
    "author": "josephperrott",
    "message": "refactor(core): correct typing checks when registering destroy hooks (#44087)\n\nMaking the typing filtering more explicit allows typescript to properly recognize the presence of the\n`prototype` property on the provider within the `registerDestroyHooksIfSupported` method.\n\nPR Close #44087",
    "sha": "401b5bf2af500b7efd225c2ff26c94143464847d",
    "files": [
        {
            "sha": "62395d5c453f84265dac2f154ea8d7548a6923f0",
            "filename": "packages/core/src/render3/di_setup.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/401b5bf2af500b7efd225c2ff26c94143464847d/packages%2Fcore%2Fsrc%2Frender3%2Fdi_setup.ts",
            "raw_url": "https://github.com/angular/angular/raw/401b5bf2af500b7efd225c2ff26c94143464847d/packages%2Fcore%2Fsrc%2Frender3%2Fdi_setup.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fdi_setup.ts?ref=401b5bf2af500b7efd225c2ff26c94143464847d",
            "patch": "@@ -8,7 +8,7 @@\n \n \n import {resolveForwardRef} from '../di/forward_ref';\n-import {ClassProvider, Provider} from '../di/interface/provider';\n+import {ClassProvider, Provider, TypeProvider} from '../di/interface/provider';\n import {isClassProvider, isTypeProvider, providerToFactory} from '../di/r3_injector';\n import {assertDefined} from '../util/assert';\n \n@@ -192,7 +192,7 @@ function registerDestroyHooksIfSupported(\n     indexInFactory?: number) {\n   const providerIsTypeProvider = isTypeProvider(provider);\n   if (providerIsTypeProvider || isClassProvider(provider)) {\n-    const prototype = ((provider as ClassProvider).useClass || provider).prototype;\n+    const prototype = ((provider as ClassProvider).useClass || provider as TypeProvider).prototype;\n     const ngOnDestroy = prototype.ngOnDestroy;\n     if (ngOnDestroy) {\n       const hooks = tView.destroyHooks || (tView.destroyHooks = []);"
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}