{
    "author": "gkalpak",
    "message": "fix(docs-infra): fix placement of TOC hover/active markers (dots) (#40802)\n\nThis commit fixes the placement of the TOC hover/active markers (dots)\nso that they are horizontally in the middle of the marker \"rail\" and\nvertically in the middle of the item's first line.\n\nThis commit also refactors the `_toc.scss` to be more DRY (wrt styling\nthe TOC markers/marker rail) and uses Sass variables and mixins to\nensure that the styling is kept up-to-date wrt future typography changes\nto TOC items.\n\nBefore: ![toc marker before][1]\nAfter: ![toc marker after][2]\n\n[1]: https://user-images.githubusercontent.com/8604205/107270751-03e3f400-6a54-11eb-9d77-5b0a3cfb1c2b.png\n[2]: https://user-images.githubusercontent.com/8604205/107270758-047c8a80-6a54-11eb-82c0-98b832c109a3.png\n\nPR Close #40802",
    "sha": "fae0f1f21323a1e4bc58a5ed652aea0c2c37e969",
    "files": [
        {
            "sha": "2a8463b9c57949e474038eb84a5f6dc69a664014",
            "filename": "aio/src/styles/2-modules/_toc.scss",
            "status": "modified",
            "additions": 32,
            "deletions": 24,
            "changes": 56,
            "blob_url": "https://github.com/angular/angular/blob/fae0f1f21323a1e4bc58a5ed652aea0c2c37e969/aio%2Fsrc%2Fstyles%2F2-modules%2F_toc.scss",
            "raw_url": "https://github.com/angular/angular/raw/fae0f1f21323a1e4bc58a5ed652aea0c2c37e969/aio%2Fsrc%2Fstyles%2F2-modules%2F_toc.scss",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fstyles%2F2-modules%2F_toc.scss?ref=fae0f1f21323a1e4bc58a5ed652aea0c2c37e969",
            "patch": "@@ -1,3 +1,20 @@\n+$tocItemLineHeight: 24;\n+$tocItemTopPadding: 9;\n+$tocMarkerRailSize: 1;\n+$tocMarkerSize: 6;\n+\n+@mixin tocMarker($color) {\n+  background: $color;\n+  border-radius: 50%;\n+  content: '';\n+  height: #{$tocMarkerSize}px;\n+  left: -#{($tocMarkerSize - $tocMarkerRailSize) / 2}px;\n+  position: absolute;\n+  top: calc(#{$tocItemTopPadding}px + #{$tocItemLineHeight / 2}px - #{$tocMarkerSize / 2}px);\n+  top: calc(#{$tocItemTopPadding}px + #{$tocItemLineHeight / 2 / 10}rem - #{$tocMarkerSize / 2}px);\n+  width: #{$tocMarkerSize}px;\n+}\n+\n .toc-container {\n   width: 18%;\n   position: fixed;\n@@ -106,7 +123,8 @@ aio-toc {\n \n       li {\n         box-sizing: border-box;\n-        padding: 9px 0 9px 12px;\n+        @include line-height($tocItemLineHeight);\n+        padding: #{$tocItemTopPadding}px 0 #{$tocItemTopPadding}px 12px;\n         position: relative;\n         transition: all 0.3s ease-in-out;\n \n@@ -128,7 +146,7 @@ aio-toc {\n           color: lighten($darkgray, 10);\n           overflow: visible;\n           @include font-size(14);\n-          @include line-height(24);\n+          line-height: inherit;\n           display: table-cell;\n         }\n \n@@ -142,24 +160,17 @@ aio-toc {\n           * {\n             color: $blue;\n             font-weight: 500;\n+          }\n \n-            &:before {\n-              content: '';\n-              border-radius: 50%;\n-              left: -3px;\n-              top: 14px;\n-              background: $blue;\n-              position: absolute;\n-              width: 6px;\n-              height: 6px;\n-            }\n+          a:before {\n+            @include tocMarker($blue);\n           }\n         }\n       }\n \n       &:not(.embedded) li {\n         &:before {\n-          border-left: 1px solid $lightgray;\n+          border-left: #{$tocMarkerRailSize}px solid $lightgray;\n           bottom: 0;\n           content: '';\n           left: 0;\n@@ -168,22 +179,19 @@ aio-toc {\n         }\n \n         &:first-child:before {\n-          top: 15px;\n+          top: calc(#{$tocItemTopPadding}px + #{$tocItemLineHeight / 2}px - #{$tocMarkerSize / 2}px);\n+          top: calc(#{$tocItemTopPadding}px + #{$tocItemLineHeight / 2 / 10}rem - #{$tocMarkerSize / 2}px);\n         }\n \n         &:last-child:before {\n-          bottom: calc(100% - 15px);\n+          bottom: calc(100% - (#{$tocItemTopPadding}px + #{$tocItemLineHeight / 2}px + #{$tocMarkerSize / 2}px));\n+          bottom: calc(100% - (#{$tocItemTopPadding}px + #{$tocItemLineHeight / 2 / 10}rem + #{$tocMarkerSize / 2}px));\n         }\n \n-        &:not(.active):hover a:before {\n-          content: '';\n-          border-radius: 50%;\n-          left: -3px;\n-          top: 14px;\n-          background: $lightgray;\n-          position: absolute;\n-          width: 6px;\n-          height: 6px;\n+        &:not(.active):hover {\n+          a:before {\n+            @include tocMarker($lightgray);\n+          }\n         }\n       }\n     }"
        }
    ],
    "stats": {
        "total": 56,
        "additions": 32,
        "deletions": 24
    }
}