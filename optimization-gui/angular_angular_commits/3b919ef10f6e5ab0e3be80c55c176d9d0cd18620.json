{
    "author": "ranma42",
    "message": "fix(common): correct and simplify typing of I18nPluralPipe (#37447)\n\nI18nPluralPipe can actually accept `null` and `undefined` (which are\nconvenient for composing it with the async pipe), but it is currently\ntyped to only accept `number`.\n\nPR Close #37447",
    "sha": "3b919ef10f6e5ab0e3be80c55c176d9d0cd18620",
    "files": [
        {
            "sha": "df57950d36b1b539d3bac72ed48eb4fa8711f5d5",
            "filename": "goldens/public-api/common/common.d.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/3b919ef10f6e5ab0e3be80c55c176d9d0cd18620/goldens%2Fpublic-api%2Fcommon%2Fcommon.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/3b919ef10f6e5ab0e3be80c55c176d9d0cd18620/goldens%2Fpublic-api%2Fcommon%2Fcommon.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fcommon%2Fcommon.d.ts?ref=3b919ef10f6e5ab0e3be80c55c176d9d0cd18620",
            "patch": "@@ -110,7 +110,7 @@ export declare class HashLocationStrategy extends LocationStrategy {\n \n export declare class I18nPluralPipe implements PipeTransform {\n     constructor(_localization: NgLocalization);\n-    transform(value: number, pluralMap: {\n+    transform(value: number | null | undefined, pluralMap: {\n         [count: string]: string;\n     }, locale?: string): string;\n }"
        },
        {
            "sha": "252da96c3e82db1e82f1072be5b24f5cfcd61164",
            "filename": "packages/common/src/pipes/i18n_plural_pipe.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/3b919ef10f6e5ab0e3be80c55c176d9d0cd18620/packages%2Fcommon%2Fsrc%2Fpipes%2Fi18n_plural_pipe.ts",
            "raw_url": "https://github.com/angular/angular/raw/3b919ef10f6e5ab0e3be80c55c176d9d0cd18620/packages%2Fcommon%2Fsrc%2Fpipes%2Fi18n_plural_pipe.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Fsrc%2Fpipes%2Fi18n_plural_pipe.ts?ref=3b919ef10f6e5ab0e3be80c55c176d9d0cd18620",
            "patch": "@@ -39,7 +39,8 @@ export class I18nPluralPipe implements PipeTransform {\n    * @param locale a `string` defining the locale to use (uses the current {@link LOCALE_ID} by\n    * default).\n    */\n-  transform(value: number, pluralMap: {[count: string]: string}, locale?: string): string {\n+  transform(value: number|null|undefined, pluralMap: {[count: string]: string}, locale?: string):\n+      string {\n     if (value == null) return '';\n \n     if (typeof pluralMap !== 'object' || pluralMap === null) {"
        },
        {
            "sha": "19757f367d14c6a21327384b45574af4c5226096",
            "filename": "packages/common/test/pipes/i18n_plural_pipe_spec.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/3b919ef10f6e5ab0e3be80c55c176d9d0cd18620/packages%2Fcommon%2Ftest%2Fpipes%2Fi18n_plural_pipe_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/3b919ef10f6e5ab0e3be80c55c176d9d0cd18620/packages%2Fcommon%2Ftest%2Fpipes%2Fi18n_plural_pipe_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Ftest%2Fpipes%2Fi18n_plural_pipe_spec.ts?ref=3b919ef10f6e5ab0e3be80c55c176d9d0cd18620",
            "patch": "@@ -54,12 +54,17 @@ import {JitReflector} from '@angular/platform-browser-dynamic/src/compiler_refle\n       });\n \n       it('should use \"\" if value is undefined', () => {\n-        const val = pipe.transform(void (0) as any, mapping);\n+        const val = pipe.transform(undefined, mapping);\n+        expect(val).toEqual('');\n+      });\n+\n+      it('should use \"\" if value is null', () => {\n+        const val = pipe.transform(null, mapping);\n         expect(val).toEqual('');\n       });\n \n       it('should not support bad arguments', () => {\n-        expect(() => pipe.transform(0, <any>'hey')).toThrowError();\n+        expect(() => pipe.transform(0, 'hey' as any)).toThrowError();\n       });\n     });\n   });"
        },
        {
            "sha": "776c62131e4c0cd434653fc2a06bc37bb62944ca",
            "filename": "packages/common/test/pipes/i18n_select_pipe_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/3b919ef10f6e5ab0e3be80c55c176d9d0cd18620/packages%2Fcommon%2Ftest%2Fpipes%2Fi18n_select_pipe_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/3b919ef10f6e5ab0e3be80c55c176d9d0cd18620/packages%2Fcommon%2Ftest%2Fpipes%2Fi18n_select_pipe_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Ftest%2Fpipes%2Fi18n_select_pipe_spec.ts?ref=3b919ef10f6e5ab0e3be80c55c176d9d0cd18620",
            "patch": "@@ -40,7 +40,7 @@ import {JitReflector} from '@angular/platform-browser-dynamic/src/compiler_refle\n       });\n \n       it('should throw on bad arguments', () => {\n-        expect(() => pipe.transform('male', <any>'hey')).toThrowError();\n+        expect(() => pipe.transform('male', 'hey' as any)).toThrowError();\n       });\n     });\n   });"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 11,
        "deletions": 5
    }
}