{
    "author": "crisbeto",
    "message": "fix(compiler-cli): not evaluating new signature for __spreadArray (#43618)\n\nIn TypeScript 4.4 the `__spreadArray` function has three parameters, however we only allowed two which can result in an error.\n\nPR Close #43618",
    "sha": "8f7fdc59af7f1b0a51b07e69044368c223b9f186",
    "files": [
        {
            "sha": "f6cc035257bab5cf3ef69a815dc78c2d5b079939",
            "filename": "packages/compiler-cli/src/ngtsc/partial_evaluator/src/ts_helpers.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/8f7fdc59af7f1b0a51b07e69044368c223b9f186/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fpartial_evaluator%2Fsrc%2Fts_helpers.ts",
            "raw_url": "https://github.com/angular/angular/raw/8f7fdc59af7f1b0a51b07e69044368c223b9f186/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fpartial_evaluator%2Fsrc%2Fts_helpers.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fpartial_evaluator%2Fsrc%2Fts_helpers.ts?ref=8f7fdc59af7f1b0a51b07e69044368c223b9f186",
            "patch": "@@ -39,7 +39,7 @@ export class SpreadHelperFn extends KnownFn {\n // Used for `__spreadArray` TypeScript helper function.\n export class SpreadArrayHelperFn extends KnownFn {\n   override evaluate(node: ts.Node, args: ResolvedValueArray): ResolvedValue {\n-    if (args.length !== 2) {\n+    if (args.length !== 2 && args.length !== 3) {\n       return DynamicValue.fromUnknown(node);\n     }\n "
        },
        {
            "sha": "bf322d05cf5668a2e2575b0751e914e412f7b66d",
            "filename": "packages/compiler-cli/src/ngtsc/partial_evaluator/test/evaluator_spec.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 1,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/8f7fdc59af7f1b0a51b07e69044368c223b9f186/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fpartial_evaluator%2Ftest%2Fevaluator_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8f7fdc59af7f1b0a51b07e69044368c223b9f186/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fpartial_evaluator%2Ftest%2Fevaluator_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fpartial_evaluator%2Ftest%2Fevaluator_spec.ts?ref=8f7fdc59af7f1b0a51b07e69044368c223b9f186",
            "patch": "@@ -760,7 +760,7 @@ runInEachFileSystem(() => {\n               export declare function __assign(t: any, ...sources: any[]): any;\n               export declare function __spread(...args: any[][]): any[];\n               export declare function __spreadArrays(...args: any[][]): any[];\n-              export declare function __spreadArray(to: any[], from: any[]): any[];\n+              export declare function __spreadArray(to: any[], from: any[], pack?: boolean): any[];\n               export declare function __read(o: any, n?: number): any[];\n             `,\n           },\n@@ -874,6 +874,18 @@ runInEachFileSystem(() => {\n         expect(arr).toEqual([4, 5, 6]);\n       });\n \n+      it('should evaluate `__spreadArray()` with three arguments', () => {\n+        const arr: number[] = evaluateExpression(\n+            `\n+              import {__spreadArray} from 'tslib';\n+              const a = [4];\n+              const b = [5, 6];\n+            `,\n+            '__spreadArray(a, b, false)');\n+\n+        expect(arr).toEqual([4, 5, 6]);\n+      });\n+\n       it('should evaluate `__read()` (named import)', () => {\n         const arr: number[] = evaluateExpression(\n             `"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 14,
        "deletions": 2
    }
}