{
    "author": "devversion",
    "message": "test: fix test failure in saucelabs ivy ie10 (#37892)\n\nOne of the ivy acceptance tests currently fails in IE10. This\nis because we recently added a new test that asserts that injecting\n`ViewRef` results in a `NullInjectorError`.\n\nDue to limitations in TypeScript and in polyfills for `setPrototypeOf`,\nthe error cannot be thrown as `ViewRef` is always considered injectable.\nIn reality, `ViewRef` should not be injectable, as explicitly noted\nin https://github.com/angular/angular/commit/c00f4ab2ae703e8a3ee4a3850170c9bbf0f9bc42.\n\nThere seems no way to simulate the proper prototype chain in such\nbrowsers that do not natively support `__proto__`, so TypeScript\nand `core-js` polyfills simply break the prototype chain and\nassign inherited properties directly on `ViewRef`. i.e. so that\n`ViewRef.__NG_ELEMENT_ID__` exists and DI picks it up.\n\nThere is a way for TypeScript to theoretically generate proper\nprototype chain in ES5 output, but they intend to only bother\nabout the proper prototype chain in ES6 where `setPrototypeOf`\netc. are offically standarized. See the response:\n\nhttps://github.com/microsoft/TypeScript/issues/1601#issuecomment-94892833.\n\nPR Close #37892",
    "sha": "6b731a067ad293866ca4df08a2dd451dba6fe0d7",
    "files": [
        {
            "sha": "4541db80cb219951a4cbc199f7ae98707183be49",
            "filename": "packages/core/test/acceptance/di_spec.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/6b731a067ad293866ca4df08a2dd451dba6fe0d7/packages%2Fcore%2Ftest%2Facceptance%2Fdi_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/6b731a067ad293866ca4df08a2dd451dba6fe0d7/packages%2Fcore%2Ftest%2Facceptance%2Fdi_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fdi_spec.ts?ref=6b731a067ad293866ca4df08a2dd451dba6fe0d7",
            "patch": "@@ -2304,6 +2304,18 @@ describe('di', () => {\n   });\n \n   it('should not be able to inject ViewRef', () => {\n+    // If the current browser does not support `__proto__` natively, this test will never\n+    // result in an error as the `__NG_ELEMENT_ID__` from `ChangeDetectorRef` is directly\n+    // assigned to the `ViewRef` instance, due to TypeScript, and `setPrototypeOf` polyfills\n+    // not being able to simulate the prototype chain. This means that Angular's DI system\n+    // considers `ViewRef` as injectable due to it having a `__NG_ELEMENT_ID__` directly\n+    // assigned. We skip this test in such cases. This is currently the case in IE9 and\n+    // IE10 as those don't support `__proto__`. Related TypeScript issue:\n+    // https://github.com/microsoft/TypeScript/issues/1601#issuecomment-94892833.\n+    if (!('__proto__' in {})) {\n+      return;\n+    }\n+\n     @Component({template: ''})\n     class App {\n       constructor(_viewRef: ViewRef) {}"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 12,
        "deletions": 0
    }
}