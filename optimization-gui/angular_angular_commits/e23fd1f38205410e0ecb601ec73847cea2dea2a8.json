{
    "author": "JoostK",
    "message": "refactor(compiler-cli): emit `forwardRef` invocation for forward type references (#40117)\n\nThe types of directives and pipes that are used in a component's\ntemplate may be emitted into the partial declaration wrapped inside a\nclosure, which is needed when the type is declared later in the module.\nThis poses a problem for JIT compilation of partial declarations, as\nthis closure is indistinguishable from a class reference itself. To mark\nthe forward reference function as such, this commit changes the partial\ndeclaration codegen to emit a `forwardRef` invocation wrapped around\nthe closure, which ensures that the closure is properly tagged as a\nforward reference. This allows the forward reference to be treated as\nsuch during JIT compilation.\n\nPR Close #40117",
    "sha": "e23fd1f38205410e0ecb601ec73847cea2dea2a8",
    "files": [
        {
            "sha": "5f9426847a25a2fb5b0cd8b1e06d6eea9642d737",
            "filename": "packages/compiler-cli/linker/babel/src/ast/babel_ast_host.ts",
            "status": "modified",
            "additions": 27,
            "deletions": 0,
            "changes": 27,
            "blob_url": "https://github.com/angular/angular/blob/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Flinker%2Fbabel%2Fsrc%2Fast%2Fbabel_ast_host.ts",
            "raw_url": "https://github.com/angular/angular/raw/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Flinker%2Fbabel%2Fsrc%2Fast%2Fbabel_ast_host.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Flinker%2Fbabel%2Fsrc%2Fast%2Fbabel_ast_host.ts?ref=e23fd1f38205410e0ecb601ec73847cea2dea2a8",
            "patch": "@@ -100,6 +100,21 @@ export class BabelAstHost implements AstHost<t.Expression> {\n     return stmt.argument;\n   }\n \n+  isCallExpression = t.isCallExpression;\n+  parseCallee(call: t.Expression): t.Expression {\n+    assert(call, t.isCallExpression, 'a call expression');\n+    assert(call.callee, t.isExpression, 'an expression');\n+    return call.callee;\n+  }\n+  parseArguments(call: t.Expression): t.Expression[] {\n+    assert(call, t.isCallExpression, 'a call expression');\n+    return call.arguments.map(arg => {\n+      assert(arg, isNotSpreadArgument, 'argument not to use spread syntax');\n+      assert(arg, t.isExpression, 'argument to be an expression');\n+      return arg;\n+    });\n+  }\n+\n   getRange(node: t.Expression): Range {\n     if (node.loc == null || node.start === null || node.end === null) {\n       throw new FatalLinkerError(\n@@ -138,3 +153,15 @@ function isNotSpreadElement(e: t.Expression|t.SpreadElement): e is t.Expression\n function isPropertyName(e: t.Expression): e is t.Identifier|t.StringLiteral|t.NumericLiteral {\n   return t.isIdentifier(e) || t.isStringLiteral(e) || t.isNumericLiteral(e);\n }\n+\n+/**\n+ * The declared type of an argument to a call expression.\n+ */\n+type ArgumentType = t.CallExpression['arguments'][number];\n+\n+/**\n+ * Return true if the argument is not a spread element.\n+ */\n+function isNotSpreadArgument(arg: ArgumentType): arg is Exclude<ArgumentType, t.SpreadElement> {\n+  return !t.isSpreadElement(arg);\n+}"
        },
        {
            "sha": "81b4571e9311de5ceaab9572e51a78e53c89727b",
            "filename": "packages/compiler-cli/linker/babel/test/ast/babel_ast_host_spec.ts",
            "status": "modified",
            "additions": 49,
            "deletions": 0,
            "changes": 49,
            "blob_url": "https://github.com/angular/angular/blob/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Flinker%2Fbabel%2Ftest%2Fast%2Fbabel_ast_host_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Flinker%2Fbabel%2Ftest%2Fast%2Fbabel_ast_host_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Flinker%2Fbabel%2Ftest%2Fast%2Fbabel_ast_host_spec.ts?ref=e23fd1f38205410e0ecb601ec73847cea2dea2a8",
            "patch": "@@ -263,6 +263,55 @@ describe('BabelAstHost', () => {\n     });\n   });\n \n+  describe('isCallExpression()', () => {\n+    it('should return true if the expression is a call expression', () => {\n+      expect(host.isCallExpression(expr('foo()'))).toBe(true);\n+      expect(host.isCallExpression(expr('foo.bar()'))).toBe(true);\n+      expect(host.isCallExpression(expr('(foo)(1)'))).toBe(true);\n+    });\n+\n+    it('should return false if the expression is not a call expression', () => {\n+      expect(host.isCallExpression(expr('[]'))).toBe(false);\n+      expect(host.isCallExpression(expr('\"moo\"'))).toBe(false);\n+      expect(host.isCallExpression(expr('\\'moo\\''))).toBe(false);\n+      expect(host.isCallExpression(expr('someIdentifier'))).toBe(false);\n+      expect(host.isCallExpression(expr('42'))).toBe(false);\n+      expect(host.isCallExpression(expr('{}'))).toBe(false);\n+      expect(host.isCallExpression(expr('null'))).toBe(false);\n+      expect(host.isCallExpression(expr('\\'a\\' + \\'b\\''))).toBe(false);\n+      expect(host.isCallExpression(expr('\\`moo\\`'))).toBe(false);\n+    });\n+  });\n+\n+  describe('parseCallee()', () => {\n+    it('should return the callee expression', () => {\n+      expect(host.parseCallee(expr('foo()'))).toEqual(expr('foo'));\n+      expect(host.parseCallee(expr('foo.bar()'))).toEqual(expr('foo.bar'));\n+    });\n+\n+    it('should error if the node is not a call expression', () => {\n+      expect(() => host.parseCallee(expr('[]')))\n+          .toThrowError('Unsupported syntax, expected a call expression.');\n+    });\n+  });\n+\n+  describe('parseArguments()', () => {\n+    it('should return the arguments as an array of expressions', () => {\n+      expect(host.parseArguments(expr('foo(12, [])'))).toEqual([expr('12'), expr('[]')]);\n+      expect(host.parseArguments(expr('foo.bar()'))).toEqual([]);\n+    });\n+\n+    it('should error if the node is not a call expression', () => {\n+      expect(() => host.parseArguments(expr('[]')))\n+          .toThrowError('Unsupported syntax, expected a call expression.');\n+    });\n+\n+    it('should error if an argument uses spread syntax', () => {\n+      expect(() => host.parseArguments(expr('foo(1, ...[])')))\n+          .toThrowError('Unsupported syntax, expected argument not to use spread syntax.');\n+    });\n+  });\n+\n   describe('getRange()', () => {\n     it('should extract the range from the expression', () => {\n       const file = parse('// preamble\\nx = \\'moo\\';');"
        },
        {
            "sha": "11907f6115b38e2ae4888e65059976eae0872b9f",
            "filename": "packages/compiler-cli/linker/src/ast/ast_host.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 0,
            "changes": 15,
            "blob_url": "https://github.com/angular/angular/blob/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Fast%2Fast_host.ts",
            "raw_url": "https://github.com/angular/angular/raw/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Fast%2Fast_host.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Fast%2Fast_host.ts?ref=e23fd1f38205410e0ecb601ec73847cea2dea2a8",
            "patch": "@@ -74,6 +74,21 @@ export interface AstHost<TExpression> {\n    */\n   parseReturnValue(fn: TExpression): TExpression;\n \n+  /**\n+   * Return true if the given expression is a call expression, or false otherwise.\n+   */\n+  isCallExpression(node: TExpression): boolean;\n+  /**\n+   * Returns the expression that is called in the provided call expression, or throw if it is not\n+   * a call expression.\n+   */\n+  parseCallee(call: TExpression): TExpression;\n+  /**\n+   * Returns the argument expressions for the provided call expression, or throw if it is not\n+   * a call expression.\n+   */\n+  parseArguments(call: TExpression): TExpression[];\n+\n   /**\n    * Compute the location range of the expression in the source file, to be used for source-mapping.\n    */"
        },
        {
            "sha": "3e3de6943cdc39ea24fe07ece9cdf38031820c37",
            "filename": "packages/compiler-cli/linker/src/ast/ast_value.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Fast%2Fast_value.ts",
            "raw_url": "https://github.com/angular/angular/raw/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Fast%2Fast_value.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Fast%2Fast_value.ts?ref=e23fd1f38205410e0ecb601ec73847cea2dea2a8",
            "patch": "@@ -295,6 +295,19 @@ export class AstValue<T, TExpression> {\n     return new AstValue(this.host.parseReturnValue(this.expression), this.host);\n   }\n \n+  isCallExpression(): boolean {\n+    return this.host.isCallExpression(this.expression);\n+  }\n+\n+  getCallee(): AstValue<unknown, TExpression> {\n+    return new AstValue(this.host.parseCallee(this.expression), this.host);\n+  }\n+\n+  getArguments(): AstValue<unknown, TExpression>[] {\n+    const args = this.host.parseArguments(this.expression);\n+    return args.map(arg => new AstValue(arg, this.host));\n+  }\n+\n   /**\n    * Return the `TExpression` of this value wrapped in a `WrappedNodeExpr`.\n    */"
        },
        {
            "sha": "f23223d0b804b757c2412db8221648334f5067a7",
            "filename": "packages/compiler-cli/linker/src/ast/typescript/typescript_ast_host.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 0,
            "changes": 15,
            "blob_url": "https://github.com/angular/angular/blob/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Fast%2Ftypescript%2Ftypescript_ast_host.ts",
            "raw_url": "https://github.com/angular/angular/raw/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Fast%2Ftypescript%2Ftypescript_ast_host.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Fast%2Ftypescript%2Ftypescript_ast_host.ts?ref=e23fd1f38205410e0ecb601ec73847cea2dea2a8",
            "patch": "@@ -109,6 +109,21 @@ export class TypeScriptAstHost implements AstHost<ts.Expression> {\n     return stmt.expression;\n   }\n \n+  isCallExpression = ts.isCallExpression;\n+\n+  parseCallee(call: ts.Expression): ts.Expression {\n+    assert(call, ts.isCallExpression, 'a call expression');\n+    return call.expression;\n+  }\n+\n+  parseArguments(call: ts.Expression): ts.Expression[] {\n+    assert(call, ts.isCallExpression, 'a call expression');\n+    return call.arguments.map(arg => {\n+      assert(arg, isNotSpreadElement, 'argument not to use spread syntax');\n+      return arg;\n+    });\n+  }\n+\n   getRange(node: ts.Expression): Range {\n     const file = node.getSourceFile();\n     if (file === undefined) {"
        },
        {
            "sha": "83f9a5b183304f8ef45097c5c6fbadf471c0381b",
            "filename": "packages/compiler-cli/linker/src/file_linker/partial_linkers/partial_component_linker_1.ts",
            "status": "modified",
            "additions": 41,
            "deletions": 6,
            "changes": 47,
            "blob_url": "https://github.com/angular/angular/blob/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Ffile_linker%2Fpartial_linkers%2Fpartial_component_linker_1.ts",
            "raw_url": "https://github.com/angular/angular/raw/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Ffile_linker%2Fpartial_linkers%2Fpartial_component_linker_1.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Ffile_linker%2Fpartial_linkers%2Fpartial_component_linker_1.ts?ref=e23fd1f38205410e0ecb601ec73847cea2dea2a8",
            "patch": "@@ -73,10 +73,12 @@ export function toR3ComponentMeta<TExpression>(\n       const selector = directiveExpr.getString('selector');\n \n       let typeExpr = type.getOpaque();\n-      if (type.isFunction()) {\n-        typeExpr = type.getFunctionReturnValue().getOpaque();\n+      const forwardRefType = extractForwardRef(type);\n+      if (forwardRefType !== null) {\n+        typeExpr = forwardRefType;\n         wrapDirectivesAndPipesInClosure = true;\n       }\n+\n       return {\n         type: typeExpr,\n         selector: selector,\n@@ -95,12 +97,13 @@ export function toR3ComponentMeta<TExpression>(\n \n   let pipes = new Map<string, o.Expression>();\n   if (metaObj.has('pipes')) {\n-    pipes = metaObj.getObject('pipes').toMap(value => {\n-      if (value.isFunction()) {\n+    pipes = metaObj.getObject('pipes').toMap(pipe => {\n+      const forwardRefType = extractForwardRef(pipe);\n+      if (forwardRefType !== null) {\n         wrapDirectivesAndPipesInClosure = true;\n-        return value.getFunctionReturnValue().getOpaque();\n+        return forwardRefType;\n       } else {\n-        return value.getOpaque();\n+        return pipe.getOpaque();\n       }\n     });\n   }\n@@ -205,3 +208,35 @@ function getTemplateRange<TExpression>(\n     startCol: startCol + 1,\n   };\n }\n+\n+/**\n+ * Extract the type reference expression from a `forwardRef` function call. For example, the\n+ * expression `forwardRef(function() { return FooDir; })` returns `FooDir`. Note that this\n+ * expression is required to be wrapped in a closure, as otherwise the forward reference would be\n+ * resolved before initialization.\n+ */\n+function extractForwardRef<TExpression>(expr: AstValue<unknown, TExpression>):\n+    o.WrappedNodeExpr<TExpression>|null {\n+  if (!expr.isCallExpression()) {\n+    return null;\n+  }\n+\n+  const callee = expr.getCallee();\n+  if (callee.getSymbolName() !== 'forwardRef') {\n+    throw new FatalLinkerError(\n+        callee.expression, 'Unsupported directive type, expected forwardRef or a type reference');\n+  }\n+\n+  const args = expr.getArguments();\n+  if (args.length !== 1) {\n+    throw new FatalLinkerError(expr, 'Unsupported forwardRef call, expected a single argument');\n+  }\n+\n+  const wrapperFn = args[0] as AstValue<Function, TExpression>;\n+  if (!wrapperFn.isFunction()) {\n+    throw new FatalLinkerError(\n+        wrapperFn, 'Unsupported forwardRef call, expected a function argument');\n+  }\n+\n+  return wrapperFn.getFunctionReturnValue().getOpaque();\n+}"
        },
        {
            "sha": "08f11ac3a70d05d777056c9c52bdfcbca2f141b0",
            "filename": "packages/compiler-cli/linker/test/ast/ast_value_spec.ts",
            "status": "modified",
            "additions": 46,
            "deletions": 0,
            "changes": 46,
            "blob_url": "https://github.com/angular/angular/blob/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Flinker%2Ftest%2Fast%2Fast_value_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Flinker%2Ftest%2Fast%2Fast_value_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Flinker%2Ftest%2Fast%2Fast_value_spec.ts?ref=e23fd1f38205410e0ecb601ec73847cea2dea2a8",
            "patch": "@@ -359,6 +359,52 @@ describe('AstValue', () => {\n        });\n   });\n \n+  describe('isCallExpression', () => {\n+    it('should return true if the value represents a call expression', () => {\n+      const callExpr = factory.createCallExpression(factory.createIdentifier('foo'), [], false);\n+      expect(createAstValue<Function>(callExpr).isCallExpression()).toBe(true);\n+    });\n+\n+    it('should return false if the value does not represent a call expression', () => {\n+      const fooExpr = factory.createIdentifier('foo');\n+      expect(createAstValue<Function>(fooExpr).isCallExpression()).toBe(false);\n+    });\n+  });\n+\n+  describe('getCallee', () => {\n+    it('should return the callee expression as a value', () => {\n+      const callExpr = factory.createCallExpression(factory.createIdentifier('foo'), [], false);\n+      expect(createAstValue<Function>(callExpr).getCallee())\n+          .toEqual(createAstValue(factory.createIdentifier('foo')));\n+    });\n+\n+    it('should throw an error if the value is not a call expression', () => {\n+      expect(() => createAstValue<number>(factory.createLiteral(42)).getCallee())\n+          .toThrowError('Unsupported syntax, expected a call expression.');\n+    });\n+  });\n+\n+  describe('getArguments', () => {\n+    it('should return the arguments as an array of values', () => {\n+      const callExpr = factory.createCallExpression(\n+          factory.createIdentifier('foo'),\n+          [\n+            factory.createLiteral(1),\n+            factory.createLiteral(2),\n+          ],\n+          false);\n+      expect(createAstValue<Function>(callExpr).getArguments()).toEqual([\n+        createAstValue(factory.createLiteral(1)),\n+        createAstValue(factory.createLiteral(2)),\n+      ]);\n+    });\n+\n+    it('should throw an error if the value is not a call expression', () => {\n+      expect(() => createAstValue<number>(factory.createLiteral(42)).getArguments())\n+          .toThrowError('Unsupported syntax, expected a call expression.');\n+    });\n+  });\n+\n   describe('getOpaque()', () => {\n     it('should return the value wrapped in a `WrappedNodeExpr`', () => {\n       expect(createAstValue(factory.createLiteral(42)).getOpaque())"
        },
        {
            "sha": "c904b50a4c6fde53577b5229f39f1f6f5a717601",
            "filename": "packages/compiler-cli/linker/test/ast/typescript/typescript_ast_host_spec.ts",
            "status": "modified",
            "additions": 53,
            "deletions": 0,
            "changes": 53,
            "blob_url": "https://github.com/angular/angular/blob/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Flinker%2Ftest%2Fast%2Ftypescript%2Ftypescript_ast_host_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Flinker%2Ftest%2Fast%2Ftypescript%2Ftypescript_ast_host_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Flinker%2Ftest%2Fast%2Ftypescript%2Ftypescript_ast_host_spec.ts?ref=e23fd1f38205410e0ecb601ec73847cea2dea2a8",
            "patch": "@@ -257,6 +257,59 @@ describe('TypeScriptAstHost', () => {\n     });\n   });\n \n+  describe('isCallExpression()', () => {\n+    it('should return true if the expression is a call expression', () => {\n+      expect(host.isCallExpression(expr('foo()'))).toBe(true);\n+      expect(host.isCallExpression(expr('foo.bar()'))).toBe(true);\n+      expect(host.isCallExpression(expr('(foo)(1)'))).toBe(true);\n+    });\n+\n+    it('should return false if the expression is not a call expression', () => {\n+      expect(host.isCallExpression(expr('[]'))).toBe(false);\n+      expect(host.isCallExpression(expr('\"moo\"'))).toBe(false);\n+      expect(host.isCallExpression(expr('\\'moo\\''))).toBe(false);\n+      expect(host.isCallExpression(expr('someIdentifier'))).toBe(false);\n+      expect(host.isCallExpression(expr('42'))).toBe(false);\n+      expect(host.isCallExpression(rhs('x = {}'))).toBe(false);\n+      expect(host.isCallExpression(expr('null'))).toBe(false);\n+      expect(host.isCallExpression(expr('\\'a\\' + \\'b\\''))).toBe(false);\n+      expect(host.isCallExpression(expr('\\`moo\\`'))).toBe(false);\n+    });\n+  });\n+\n+  describe('parseCallee()', () => {\n+    it('should return the callee expression', () => {\n+      const foo = jasmine.objectContaining({text: 'foo', kind: ts.SyntaxKind.Identifier});\n+      const bar = jasmine.objectContaining({kind: ts.SyntaxKind.PropertyAccessExpression});\n+      expect(host.parseCallee(expr('foo()'))).toEqual(foo);\n+      expect(host.parseCallee(expr('foo.bar()'))).toEqual(bar);\n+    });\n+\n+    it('should error if the node is not a call expression', () => {\n+      expect(() => host.parseCallee(expr('[]')))\n+          .toThrowError('Unsupported syntax, expected a call expression.');\n+    });\n+  });\n+\n+  describe('parseArguments()', () => {\n+    it('should return the arguments as an array of expressions', () => {\n+      const arg1 = jasmine.objectContaining({text: '12', kind: ts.SyntaxKind.NumericLiteral});\n+      const arg2 = jasmine.objectContaining({kind: ts.SyntaxKind.ArrayLiteralExpression});\n+      expect(host.parseArguments(expr('foo(12, [])'))).toEqual([arg1, arg2]);\n+      expect(host.parseArguments(expr('foo.bar()'))).toEqual([]);\n+    });\n+\n+    it('should error if the node is not a call expression', () => {\n+      expect(() => host.parseArguments(expr('[]')))\n+          .toThrowError('Unsupported syntax, expected a call expression.');\n+    });\n+\n+    it('should error if an argument uses spread syntax', () => {\n+      expect(() => host.parseArguments(expr('foo(1, ...[])')))\n+          .toThrowError('Unsupported syntax, expected argument not to use spread syntax.');\n+    });\n+  });\n+\n   describe('getRange()', () => {\n     it('should extract the range from the expression', () => {\n       const moo = rhs('// preamble\\nx = \\'moo\\';');"
        },
        {
            "sha": "d964225342697e8cd8f5e8579c5e2a8acf37ae61",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/GOLDEN_PARTIAL.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2FGOLDEN_PARTIAL.js",
            "raw_url": "https://github.com/angular/angular/raw/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2FGOLDEN_PARTIAL.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2FGOLDEN_PARTIAL.js?ref=e23fd1f38205410e0ecb601ec73847cea2dea2a8",
            "patch": "@@ -8,7 +8,7 @@ export class HostBindingComp {\n HostBindingComp.ɵfac = function HostBindingComp_Factory(t) { return new (t || HostBindingComp)(); };\n HostBindingComp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: HostBindingComp, selector: \"host-binding-comp\", ngImport: i0, template: { source: `\n     <my-forward-directive></my-forward-directive>\n-  `, isInline: true }, directives: [{ type: function () { return MyForwardDirective; }, selector: \"my-forward-directive\" }] });\n+  `, isInline: true }, directives: [{ type: i0.forwardRef(function () { return MyForwardDirective; }), selector: \"my-forward-directive\" }] });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(HostBindingComp, [{\n         type: Component,\n         args: [{\n@@ -59,7 +59,7 @@ export class HostBindingComp {\n HostBindingComp.ɵfac = function HostBindingComp_Factory(t) { return new (t || HostBindingComp)(); };\n HostBindingComp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: HostBindingComp, selector: \"host-binding-comp\", ngImport: i0, template: { source: `\n     <div [attr.style]=\"{} | my_forward_pipe\">...</div>\n-  `, isInline: true }, pipes: { \"my_forward_pipe\": function () { return MyForwardPipe; } } });\n+  `, isInline: true }, pipes: { \"my_forward_pipe\": i0.forwardRef(function () { return MyForwardPipe; }) } });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(HostBindingComp, [{\n         type: Component,\n         args: [{"
        },
        {
            "sha": "01668bdf44b160657f850575f8dcaea258a47a9c",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/queries/GOLDEN_PARTIAL.js",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2FGOLDEN_PARTIAL.js",
            "raw_url": "https://github.com/angular/angular/raw/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2FGOLDEN_PARTIAL.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2FGOLDEN_PARTIAL.js?ref=e23fd1f38205410e0ecb601ec73847cea2dea2a8",
            "patch": "@@ -34,7 +34,7 @@ export class ViewQueryComponent {\n ViewQueryComponent.ɵfac = function ViewQueryComponent_Factory(t) { return new (t || ViewQueryComponent)(); };\n ViewQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ViewQueryComponent, selector: \"view-query-component\", viewQueries: [{ propertyName: \"someDir\", first: true, predicate: SomeDirective, descendants: true }, { propertyName: \"someDirs\", predicate: SomeDirective, descendants: true }], ngImport: i0, template: { source: `\n     <div someDir></div>\n-  `, isInline: true }, directives: [{ type: function () { return SomeDirective; }, selector: \"[someDir]\" }] });\n+  `, isInline: true }, directives: [{ type: i0.forwardRef(function () { return SomeDirective; }), selector: \"[someDir]\" }] });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ViewQueryComponent, [{\n         type: Component,\n         args: [{\n@@ -168,7 +168,7 @@ export class ViewQueryComponent {\n ViewQueryComponent.ɵfac = function ViewQueryComponent_Factory(t) { return new (t || ViewQueryComponent)(); };\n ViewQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ViewQueryComponent, selector: \"view-query-component\", viewQueries: [{ propertyName: \"someDir\", first: true, predicate: SomeDirective, descendants: true, static: true }, { propertyName: \"foo\", first: true, predicate: [\"foo\"], descendants: true }], ngImport: i0, template: { source: `\n     <div someDir></div>\n-  `, isInline: true }, directives: [{ type: function () { return SomeDirective; }, selector: \"[someDir]\" }] });\n+  `, isInline: true }, directives: [{ type: i0.forwardRef(function () { return SomeDirective; }), selector: \"[someDir]\" }] });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ViewQueryComponent, [{\n         type: Component,\n         args: [{\n@@ -361,7 +361,7 @@ MyApp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: My\n     <content-query-component>\n       <div someDir></div>\n     </content-query-component>\n-  `, isInline: true }, directives: [{ type: function () { return ContentQueryComponent; }, selector: \"content-query-component\" }, { type: function () { return SomeDirective; }, selector: \"[someDir]\" }] });\n+  `, isInline: true }, directives: [{ type: i0.forwardRef(function () { return ContentQueryComponent; }), selector: \"content-query-component\" }, { type: i0.forwardRef(function () { return SomeDirective; }), selector: \"[someDir]\" }] });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MyApp, [{\n         type: Component,\n         args: [{\n@@ -518,7 +518,7 @@ MyApp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: My\n     <content-query-component>\n       <div someDir></div>\n     </content-query-component>\n-  `, isInline: true }, directives: [{ type: function () { return ContentQueryComponent; }, selector: \"content-query-component\" }, { type: function () { return SomeDirective; }, selector: \"[someDir]\" }] });\n+  `, isInline: true }, directives: [{ type: i0.forwardRef(function () { return ContentQueryComponent; }), selector: \"content-query-component\" }, { type: i0.forwardRef(function () { return SomeDirective; }), selector: \"[someDir]\" }] });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MyApp, [{\n         type: Component,\n         args: [{"
        },
        {
            "sha": "944dbd1a924d06d4065435d44c601acb3c8eb486",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/template_variables/GOLDEN_PARTIAL.js",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Ftemplate_variables%2FGOLDEN_PARTIAL.js",
            "raw_url": "https://github.com/angular/angular/raw/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Ftemplate_variables%2FGOLDEN_PARTIAL.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Ftemplate_variables%2FGOLDEN_PARTIAL.js?ref=e23fd1f38205410e0ecb601ec73847cea2dea2a8",
            "patch": "@@ -53,7 +53,7 @@ export class MyComponent {\n     }\n }\n MyComponent.ɵfac = function MyComponent_Factory(t) { return new (t || MyComponent)(); };\n-MyComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: MyComponent, selector: \"my-component\", ngImport: i0, template: { source: `<svg><g *for=\"let item of items\"><circle></circle></g></svg>`, isInline: true }, directives: [{ type: function () { return ForOfDirective; }, selector: \"[forOf]\", inputs: [\"forOf\"] }] });\n+MyComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: MyComponent, selector: \"my-component\", ngImport: i0, template: { source: `<svg><g *for=\"let item of items\"><circle></circle></g></svg>`, isInline: true }, directives: [{ type: i0.forwardRef(function () { return ForOfDirective; }), selector: \"[forOf]\", inputs: [\"forOf\"] }] });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MyComponent, [{\n         type: Component,\n         args: [{\n@@ -143,7 +143,7 @@ export class MyComponent {\n     }\n }\n MyComponent.ɵfac = function MyComponent_Factory(t) { return new (t || MyComponent)(); };\n-MyComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: MyComponent, selector: \"my-component\", ngImport: i0, template: { source: `<ul><li *for=\"let item of items\">{{item.name}}</li></ul>`, isInline: true }, directives: [{ type: function () { return ForOfDirective; }, selector: \"[forOf]\", inputs: [\"forOf\"] }] });\n+MyComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: MyComponent, selector: \"my-component\", ngImport: i0, template: { source: `<ul><li *for=\"let item of items\">{{item.name}}</li></ul>`, isInline: true }, directives: [{ type: i0.forwardRef(function () { return ForOfDirective; }), selector: \"[forOf]\", inputs: [\"forOf\"] }] });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MyComponent, [{\n         type: Component,\n         args: [{\n@@ -246,7 +246,7 @@ MyComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", ty\n         </li>\n       </ul>\n     </li>\n-  </ul>`, isInline: true }, directives: [{ type: function () { return ForOfDirective; }, selector: \"[forOf]\", inputs: [\"forOf\"] }] });\n+  </ul>`, isInline: true }, directives: [{ type: i0.forwardRef(function () { return ForOfDirective; }), selector: \"[forOf]\", inputs: [\"forOf\"] }] });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MyComponent, [{\n         type: Component,\n         args: [{"
        },
        {
            "sha": "934c6604e8f36cde09559143b2b8cc9a70c2e51e",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler/GOLDEN_PARTIAL.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler%2FGOLDEN_PARTIAL.js",
            "raw_url": "https://github.com/angular/angular/raw/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler%2FGOLDEN_PARTIAL.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler%2FGOLDEN_PARTIAL.js?ref=e23fd1f38205410e0ecb601ec73847cea2dea2a8",
            "patch": "@@ -9,7 +9,7 @@ export class MyApp {\n     }\n }\n MyApp.ɵfac = function MyApp_Factory(t) { return new (t || MyApp)(); };\n-MyApp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: MyApp, selector: \"my-app\", ngImport: i0, template: { source: '<todo [data]=\"list\"></todo>', isInline: true }, directives: [{ type: function () { return TodoComponent; }, selector: \"todo\", inputs: [\"data\"] }] });\n+MyApp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: MyApp, selector: \"my-app\", ngImport: i0, template: { source: '<todo [data]=\"list\"></todo>', isInline: true }, directives: [{ type: i0.forwardRef(function () { return TodoComponent; }), selector: \"todo\", inputs: [\"data\"] }] });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MyApp, [{\n         type: Component,\n         args: [{ selector: 'my-app', template: '<todo [data]=\"list\"></todo>' }]"
        },
        {
            "sha": "19647943f6aa69fe780653b53cc38877386fd08a",
            "filename": "packages/compiler-cli/test/compliance/test_cases/source_mapping/inline_templates/GOLDEN_PARTIAL.js",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/angular/angular/blob/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fsource_mapping%2Finline_templates%2FGOLDEN_PARTIAL.js",
            "raw_url": "https://github.com/angular/angular/raw/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fsource_mapping%2Finline_templates%2FGOLDEN_PARTIAL.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fsource_mapping%2Finline_templates%2FGOLDEN_PARTIAL.js?ref=e23fd1f38205410e0ecb601ec73847cea2dea2a8",
            "patch": "@@ -334,7 +334,7 @@ import * as i0 from \"@angular/core\";\n export class TestCmp {\n }\n TestCmp.ɵfac = function TestCmp_Factory(t) { return new (t || TestCmp)(); };\n-TestCmp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: TestCmp, selector: \"test-cmp\", ngImport: i0, template: { source: '<div>{{200.3 | percent : 2 }}</div>', isInline: true }, pipes: { \"percent\": function () { return PercentPipe; } } });\n+TestCmp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: TestCmp, selector: \"test-cmp\", ngImport: i0, template: { source: '<div>{{200.3 | percent : 2 }}</div>', isInline: true }, pipes: { \"percent\": i0.forwardRef(function () { return PercentPipe; }) } });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TestCmp, [{\n         type: Component,\n         args: [{\n@@ -364,7 +364,7 @@ AppModule.ɵinj = i0.ɵɵdefineInjector({ factory: function AppModule_Factory(t)\n /****************************************************************************************************\n  * PARTIAL FILE: interpolation_with_pipe.js.map\n  ****************************************************************************************************/\n-{\"version\":3,\"file\":\"interpolation_with_pipe.js\",\"sourceRoot\":\"\",\"sources\":[\"../interpolation_with_pipe.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAC,SAAS,EAAE,QAAQ,EAAE,IAAI,EAAgB,MAAM,eAAe,CAAC;;AAMvE,MAAM,OAAO,OAAO;;8DAAP,OAAO;6EAAP,OAAO,0DAFR,qCAAqC,6DAMpC,WAAW;uFAJX,OAAO;cAJnB,SAAS;eAAC;gBACT,QAAQ,EAAE,UAAU;gBACpB,QAAQ,EAAE,qCAAqC;aAChD;;AAKD,MAAM,OAAO,WAAW;IACtB,SAAS,KAAI,CAAC;;sEADH,WAAW;6DAAX,WAAW;uFAAX,WAAW;cADvB,IAAI;eAAC,EAAC,IAAI,EAAE,SAAS,EAAC;;AAMvB,MAAM,OAAO,SAAS;;6CAAT,SAAS;iGAAT,SAAS;wFAAT,SAAS,mBATT,OAAO,EAIP,WAAW;uFAKX,SAAS;cADrB,QAAQ;eAAC,EAAC,YAAY,EAAE,CAAC,OAAO,EAAE,WAAW,CAAC,EAAC\"}\n+{\"version\":3,\"file\":\"interpolation_with_pipe.js\",\"sourceRoot\":\"\",\"sources\":[\"../interpolation_with_pipe.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAC,SAAS,EAAE,QAAQ,EAAE,IAAI,EAAgB,MAAM,eAAe,CAAC;;AAMvE,MAAM,OAAO,OAAO;;8DAAP,OAAO;6EAAP,OAAO,0DAFR,qCAAqC,2EAMpC,WAAW;uFAJX,OAAO;cAJnB,SAAS;eAAC;gBACT,QAAQ,EAAE,UAAU;gBACpB,QAAQ,EAAE,qCAAqC;aAChD;;AAKD,MAAM,OAAO,WAAW;IACtB,SAAS,KAAI,CAAC;;sEADH,WAAW;6DAAX,WAAW;uFAAX,WAAW;cADvB,IAAI;eAAC,EAAC,IAAI,EAAE,SAAS,EAAC;;AAMvB,MAAM,OAAO,SAAS;;6CAAT,SAAS;iGAAT,SAAS;wFAAT,SAAS,mBATT,OAAO,EAIP,WAAW;uFAKX,SAAS;cADrB,QAAQ;eAAC,EAAC,YAAY,EAAE,CAAC,OAAO,EAAE,WAAW,CAAC,EAAC\"}\n /****************************************************************************************************\n  * PARTIAL FILE: interpolation_with_pipe.d.ts\n  ****************************************************************************************************/\n@@ -392,7 +392,7 @@ import * as i0 from \"@angular/core\";\n export class TestCmp {\n }\n TestCmp.ɵfac = function TestCmp_Factory(t) { return new (t || TestCmp)(); };\n-TestCmp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: TestCmp, selector: \"test-cmp\", ngImport: i0, template: { source: '<div>{{200.3 | percent : 2 }}</div>', isInline: true }, pipes: { \"percent\": function () { return PercentPipe; } } });\n+TestCmp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: TestCmp, selector: \"test-cmp\", ngImport: i0, template: { source: '<div>{{200.3 | percent : 2 }}</div>', isInline: true }, pipes: { \"percent\": i0.forwardRef(function () { return PercentPipe; }) } });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TestCmp, [{\n         type: Component,\n         args: [{\n@@ -422,7 +422,7 @@ AppModule.ɵinj = i0.ɵɵdefineInjector({ factory: function AppModule_Factory(t)\n /****************************************************************************************************\n  * PARTIAL FILE: interpolation_with_pipe.js.map\n  ****************************************************************************************************/\n-{\"version\":3,\"file\":\"interpolation_with_pipe.js\",\"sourceRoot\":\"\",\"sources\":[\"../interpolation_with_pipe.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAC,SAAS,EAAE,QAAQ,EAAE,IAAI,EAAgB,MAAM,eAAe,CAAC;;AAMvE,MAAM,OAAO,OAAO;;8DAAP,OAAO;6EAAP,OAAO,0DAFR,qCAAqC,6DAMpC,WAAW;uFAJX,OAAO;cAJnB,SAAS;eAAC;gBACT,QAAQ,EAAE,UAAU;gBACpB,QAAQ,EAAE,qCAAqC;aAChD;;AAKD,MAAM,OAAO,WAAW;IACtB,SAAS,KAAI,CAAC;;sEADH,WAAW;6DAAX,WAAW;uFAAX,WAAW;cADvB,IAAI;eAAC,EAAC,IAAI,EAAE,SAAS,EAAC;;AAMvB,MAAM,OAAO,SAAS;;6CAAT,SAAS;iGAAT,SAAS;wFAAT,SAAS,mBATT,OAAO,EAIP,WAAW;uFAKX,SAAS;cADrB,QAAQ;eAAC,EAAC,YAAY,EAAE,CAAC,OAAO,EAAE,WAAW,CAAC,EAAC\"}\n+{\"version\":3,\"file\":\"interpolation_with_pipe.js\",\"sourceRoot\":\"\",\"sources\":[\"../interpolation_with_pipe.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAC,SAAS,EAAE,QAAQ,EAAE,IAAI,EAAgB,MAAM,eAAe,CAAC;;AAMvE,MAAM,OAAO,OAAO;;8DAAP,OAAO;6EAAP,OAAO,0DAFR,qCAAqC,2EAMpC,WAAW;uFAJX,OAAO;cAJnB,SAAS;eAAC;gBACT,QAAQ,EAAE,UAAU;gBACpB,QAAQ,EAAE,qCAAqC;aAChD;;AAKD,MAAM,OAAO,WAAW;IACtB,SAAS,KAAI,CAAC;;sEADH,WAAW;6DAAX,WAAW;uFAAX,WAAW;cADvB,IAAI;eAAC,EAAC,IAAI,EAAE,SAAS,EAAC;;AAMvB,MAAM,OAAO,SAAS;;6CAAT,SAAS;iGAAT,SAAS;wFAAT,SAAS,mBATT,OAAO,EAIP,WAAW;uFAKX,SAAS;cADrB,QAAQ;eAAC,EAAC,YAAY,EAAE,CAAC,OAAO,EAAE,WAAW,CAAC,EAAC\"}\n /****************************************************************************************************\n  * PARTIAL FILE: interpolation_with_pipe.d.ts\n  ****************************************************************************************************/\n@@ -857,7 +857,7 @@ export class TestCmp {\n     }\n }\n TestCmp.ɵfac = function TestCmp_Factory(t) { return new (t || TestCmp)(); };\n-TestCmp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: TestCmp, selector: \"test-cmp\", ngImport: i0, template: { source: 'Name: <input [(ngModel)]=\"name\">', isInline: true }, directives: [{ type: function () { return NgModelDirective; }, selector: \"[ngModel]\", inputs: [\"ngModel\"], outputs: [\"ngModelChanges\"] }] });\n+TestCmp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: TestCmp, selector: \"test-cmp\", ngImport: i0, template: { source: 'Name: <input [(ngModel)]=\"name\">', isInline: true }, directives: [{ type: i0.forwardRef(function () { return NgModelDirective; }), selector: \"[ngModel]\", inputs: [\"ngModel\"], outputs: [\"ngModelChanges\"] }] });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TestCmp, [{\n         type: Component,\n         args: [{\n@@ -894,7 +894,7 @@ AppModule.ɵinj = i0.ɵɵdefineInjector({ factory: function AppModule_Factory(t)\n /****************************************************************************************************\n  * PARTIAL FILE: two_way_binding_simple.js.map\n  ****************************************************************************************************/\n-{\"version\":3,\"file\":\"two_way_binding_simple.js\",\"sourceRoot\":\"\",\"sources\":[\"../two_way_binding_simple.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAC,SAAS,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAC,MAAM,eAAe,CAAC;;AAM1F,MAAM,OAAO,OAAO;IAJpB;QAKE,SAAI,GAAW,EAAE,CAAC;KACnB;;8DAFY,OAAO;6EAAP,OAAO,0DAFR,kCAAkC,8DAOjC,gBAAgB;uFALhB,OAAO;cAJnB,SAAS;eAAC;gBACT,QAAQ,EAAE,UAAU;gBACpB,QAAQ,EAAE,kCAAkC;aAC7C;;AAMD,MAAM,OAAO,gBAAgB;IAD7B;QAEW,YAAO,GAAW,EAAE,CAAC;QACpB,mBAAc,GAAyB,IAAI,YAAY,EAAE,CAAC;KACrE;;gFAHY,gBAAgB;sFAAhB,gBAAgB;uFAAhB,gBAAgB;cAD5B,SAAS;eAAC,EAAC,QAAQ,EAAE,WAAW,EAAC;gBAEvB,OAAO;kBAAf,KAAK;YACI,cAAc;kBAAvB,MAAM;;AAIT,MAAM,OAAO,SAAS;;6CAAT,SAAS;iGAAT,SAAS;wFAAT,SAAS,mBAXT,OAAO,EAKP,gBAAgB;uFAMhB,SAAS;cADrB,QAAQ;eAAC,EAAC,YAAY,EAAE,CAAC,OAAO,EAAE,gBAAgB,CAAC,EAAC\"}\n+{\"version\":3,\"file\":\"two_way_binding_simple.js\",\"sourceRoot\":\"\",\"sources\":[\"../two_way_binding_simple.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAC,SAAS,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAC,MAAM,eAAe,CAAC;;AAM1F,MAAM,OAAO,OAAO;IAJpB;QAKE,SAAI,GAAW,EAAE,CAAC;KACnB;;8DAFY,OAAO;6EAAP,OAAO,0DAFR,kCAAkC,4EAOjC,gBAAgB;uFALhB,OAAO;cAJnB,SAAS;eAAC;gBACT,QAAQ,EAAE,UAAU;gBACpB,QAAQ,EAAE,kCAAkC;aAC7C;;AAMD,MAAM,OAAO,gBAAgB;IAD7B;QAEW,YAAO,GAAW,EAAE,CAAC;QACpB,mBAAc,GAAyB,IAAI,YAAY,EAAE,CAAC;KACrE;;gFAHY,gBAAgB;sFAAhB,gBAAgB;uFAAhB,gBAAgB;cAD5B,SAAS;eAAC,EAAC,QAAQ,EAAE,WAAW,EAAC;gBAEvB,OAAO;kBAAf,KAAK;YACI,cAAc;kBAAvB,MAAM;;AAIT,MAAM,OAAO,SAAS;;6CAAT,SAAS;iGAAT,SAAS;wFAAT,SAAS,mBAXT,OAAO,EAKP,gBAAgB;uFAMhB,SAAS;cADrB,QAAQ;eAAC,EAAC,YAAY,EAAE,CAAC,OAAO,EAAE,gBAAgB,CAAC,EAAC\"}\n /****************************************************************************************************\n  * PARTIAL FILE: two_way_binding_simple.d.ts\n  ****************************************************************************************************/\n@@ -927,7 +927,7 @@ export class TestCmp {\n     }\n }\n TestCmp.ɵfac = function TestCmp_Factory(t) { return new (t || TestCmp)(); };\n-TestCmp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: TestCmp, selector: \"test-cmp\", ngImport: i0, template: { source: 'Name: <input [(ngModel)]=\"name\">', isInline: true }, directives: [{ type: function () { return NgModelDirective; }, selector: \"[ngModel]\", inputs: [\"ngModel\"], outputs: [\"ngModelChanges\"] }] });\n+TestCmp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: TestCmp, selector: \"test-cmp\", ngImport: i0, template: { source: 'Name: <input [(ngModel)]=\"name\">', isInline: true }, directives: [{ type: i0.forwardRef(function () { return NgModelDirective; }), selector: \"[ngModel]\", inputs: [\"ngModel\"], outputs: [\"ngModelChanges\"] }] });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TestCmp, [{\n         type: Component,\n         args: [{\n@@ -964,7 +964,7 @@ AppModule.ɵinj = i0.ɵɵdefineInjector({ factory: function AppModule_Factory(t)\n /****************************************************************************************************\n  * PARTIAL FILE: two_way_binding_simple.js.map\n  ****************************************************************************************************/\n-{\"version\":3,\"file\":\"two_way_binding_simple.js\",\"sourceRoot\":\"\",\"sources\":[\"../two_way_binding_simple.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAC,SAAS,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAC,MAAM,eAAe,CAAC;;AAM1F,MAAM,OAAO,OAAO;IAJpB;QAKE,SAAI,GAAW,EAAE,CAAC;KACnB;;8DAFY,OAAO;6EAAP,OAAO,0DAFR,kCAAkC,8DAOjC,gBAAgB;uFALhB,OAAO;cAJnB,SAAS;eAAC;gBACT,QAAQ,EAAE,UAAU;gBACpB,QAAQ,EAAE,kCAAkC;aAC7C;;AAMD,MAAM,OAAO,gBAAgB;IAD7B;QAEW,YAAO,GAAW,EAAE,CAAC;QACpB,mBAAc,GAAyB,IAAI,YAAY,EAAE,CAAC;KACrE;;gFAHY,gBAAgB;sFAAhB,gBAAgB;uFAAhB,gBAAgB;cAD5B,SAAS;eAAC,EAAC,QAAQ,EAAE,WAAW,EAAC;gBAEvB,OAAO;kBAAf,KAAK;YACI,cAAc;kBAAvB,MAAM;;AAIT,MAAM,OAAO,SAAS;;6CAAT,SAAS;iGAAT,SAAS;wFAAT,SAAS,mBAXT,OAAO,EAKP,gBAAgB;uFAMhB,SAAS;cADrB,QAAQ;eAAC,EAAC,YAAY,EAAE,CAAC,OAAO,EAAE,gBAAgB,CAAC,EAAC\"}\n+{\"version\":3,\"file\":\"two_way_binding_simple.js\",\"sourceRoot\":\"\",\"sources\":[\"../two_way_binding_simple.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAC,SAAS,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAC,MAAM,eAAe,CAAC;;AAM1F,MAAM,OAAO,OAAO;IAJpB;QAKE,SAAI,GAAW,EAAE,CAAC;KACnB;;8DAFY,OAAO;6EAAP,OAAO,0DAFR,kCAAkC,4EAOjC,gBAAgB;uFALhB,OAAO;cAJnB,SAAS;eAAC;gBACT,QAAQ,EAAE,UAAU;gBACpB,QAAQ,EAAE,kCAAkC;aAC7C;;AAMD,MAAM,OAAO,gBAAgB;IAD7B;QAEW,YAAO,GAAW,EAAE,CAAC;QACpB,mBAAc,GAAyB,IAAI,YAAY,EAAE,CAAC;KACrE;;gFAHY,gBAAgB;sFAAhB,gBAAgB;uFAAhB,gBAAgB;cAD5B,SAAS;eAAC,EAAC,QAAQ,EAAE,WAAW,EAAC;gBAEvB,OAAO;kBAAf,KAAK;YACI,cAAc;kBAAvB,MAAM;;AAIT,MAAM,OAAO,SAAS;;6CAAT,SAAS;iGAAT,SAAS;wFAAT,SAAS,mBAXT,OAAO,EAKP,gBAAgB;uFAMhB,SAAS;cADrB,QAAQ;eAAC,EAAC,YAAY,EAAE,CAAC,OAAO,EAAE,gBAAgB,CAAC,EAAC\"}\n /****************************************************************************************************\n  * PARTIAL FILE: two_way_binding_simple.d.ts\n  ****************************************************************************************************/\n@@ -997,7 +997,7 @@ export class TestCmp {\n     }\n }\n TestCmp.ɵfac = function TestCmp_Factory(t) { return new (t || TestCmp)(); };\n-TestCmp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: TestCmp, selector: \"test-cmp\", ngImport: i0, template: { source: 'Name: <input bindon-ngModel=\"name\">', isInline: true }, directives: [{ type: function () { return NgModelDirective; }, selector: \"[ngModel]\", inputs: [\"ngModel\"], outputs: [\"ngModelChanges\"] }] });\n+TestCmp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: TestCmp, selector: \"test-cmp\", ngImport: i0, template: { source: 'Name: <input bindon-ngModel=\"name\">', isInline: true }, directives: [{ type: i0.forwardRef(function () { return NgModelDirective; }), selector: \"[ngModel]\", inputs: [\"ngModel\"], outputs: [\"ngModelChanges\"] }] });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TestCmp, [{\n         type: Component,\n         args: [{\n@@ -1034,7 +1034,7 @@ AppModule.ɵinj = i0.ɵɵdefineInjector({ factory: function AppModule_Factory(t)\n /****************************************************************************************************\n  * PARTIAL FILE: two_way_binding_longhand.js.map\n  ****************************************************************************************************/\n-{\"version\":3,\"file\":\"two_way_binding_longhand.js\",\"sourceRoot\":\"\",\"sources\":[\"../two_way_binding_longhand.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAC,SAAS,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAC,MAAM,eAAe,CAAC;;AAM1F,MAAM,OAAO,OAAO;IAJpB;QAKE,SAAI,GAAW,EAAE,CAAC;KACnB;;8DAFY,OAAO;6EAAP,OAAO,0DAFR,qCAAqC,8DAOpC,gBAAgB;uFALhB,OAAO;cAJnB,SAAS;eAAC;gBACT,QAAQ,EAAE,UAAU;gBACpB,QAAQ,EAAE,qCAAqC;aAChD;;AAMD,MAAM,OAAO,gBAAgB;IAD7B;QAEW,YAAO,GAAW,EAAE,CAAC;QACpB,mBAAc,GAAyB,IAAI,YAAY,EAAE,CAAC;KACrE;;gFAHY,gBAAgB;sFAAhB,gBAAgB;uFAAhB,gBAAgB;cAD5B,SAAS;eAAC,EAAC,QAAQ,EAAE,WAAW,EAAC;gBAEvB,OAAO;kBAAf,KAAK;YACI,cAAc;kBAAvB,MAAM;;AAIT,MAAM,OAAO,SAAS;;6CAAT,SAAS;iGAAT,SAAS;wFAAT,SAAS,mBAXT,OAAO,EAKP,gBAAgB;uFAMhB,SAAS;cADrB,QAAQ;eAAC,EAAC,YAAY,EAAE,CAAC,OAAO,EAAE,gBAAgB,CAAC,EAAC\"}\n+{\"version\":3,\"file\":\"two_way_binding_longhand.js\",\"sourceRoot\":\"\",\"sources\":[\"../two_way_binding_longhand.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAC,SAAS,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAC,MAAM,eAAe,CAAC;;AAM1F,MAAM,OAAO,OAAO;IAJpB;QAKE,SAAI,GAAW,EAAE,CAAC;KACnB;;8DAFY,OAAO;6EAAP,OAAO,0DAFR,qCAAqC,4EAOpC,gBAAgB;uFALhB,OAAO;cAJnB,SAAS;eAAC;gBACT,QAAQ,EAAE,UAAU;gBACpB,QAAQ,EAAE,qCAAqC;aAChD;;AAMD,MAAM,OAAO,gBAAgB;IAD7B;QAEW,YAAO,GAAW,EAAE,CAAC;QACpB,mBAAc,GAAyB,IAAI,YAAY,EAAE,CAAC;KACrE;;gFAHY,gBAAgB;sFAAhB,gBAAgB;uFAAhB,gBAAgB;cAD5B,SAAS;eAAC,EAAC,QAAQ,EAAE,WAAW,EAAC;gBAEvB,OAAO;kBAAf,KAAK;YACI,cAAc;kBAAvB,MAAM;;AAIT,MAAM,OAAO,SAAS;;6CAAT,SAAS;iGAAT,SAAS;wFAAT,SAAS,mBAXT,OAAO,EAKP,gBAAgB;uFAMhB,SAAS;cADrB,QAAQ;eAAC,EAAC,YAAY,EAAE,CAAC,OAAO,EAAE,gBAAgB,CAAC,EAAC\"}\n /****************************************************************************************************\n  * PARTIAL FILE: two_way_binding_longhand.d.ts\n  ****************************************************************************************************/\n@@ -1067,7 +1067,7 @@ export class TestCmp {\n     }\n }\n TestCmp.ɵfac = function TestCmp_Factory(t) { return new (t || TestCmp)(); };\n-TestCmp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: TestCmp, selector: \"test-cmp\", ngImport: i0, template: { source: 'Name: <input bindon-ngModel=\"name\">', isInline: true }, directives: [{ type: function () { return NgModelDirective; }, selector: \"[ngModel]\", inputs: [\"ngModel\"], outputs: [\"ngModelChanges\"] }] });\n+TestCmp.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: TestCmp, selector: \"test-cmp\", ngImport: i0, template: { source: 'Name: <input bindon-ngModel=\"name\">', isInline: true }, directives: [{ type: i0.forwardRef(function () { return NgModelDirective; }), selector: \"[ngModel]\", inputs: [\"ngModel\"], outputs: [\"ngModelChanges\"] }] });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(TestCmp, [{\n         type: Component,\n         args: [{\n@@ -1104,7 +1104,7 @@ AppModule.ɵinj = i0.ɵɵdefineInjector({ factory: function AppModule_Factory(t)\n /****************************************************************************************************\n  * PARTIAL FILE: two_way_binding_longhand.js.map\n  ****************************************************************************************************/\n-{\"version\":3,\"file\":\"two_way_binding_longhand.js\",\"sourceRoot\":\"\",\"sources\":[\"../two_way_binding_longhand.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAC,SAAS,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAC,MAAM,eAAe,CAAC;;AAM1F,MAAM,OAAO,OAAO;IAJpB;QAKE,SAAI,GAAW,EAAE,CAAC;KACnB;;8DAFY,OAAO;6EAAP,OAAO,0DAFR,qCAAqC,8DAOpC,gBAAgB;uFALhB,OAAO;cAJnB,SAAS;eAAC;gBACT,QAAQ,EAAE,UAAU;gBACpB,QAAQ,EAAE,qCAAqC;aAChD;;AAMD,MAAM,OAAO,gBAAgB;IAD7B;QAEW,YAAO,GAAW,EAAE,CAAC;QACpB,mBAAc,GAAyB,IAAI,YAAY,EAAE,CAAC;KACrE;;gFAHY,gBAAgB;sFAAhB,gBAAgB;uFAAhB,gBAAgB;cAD5B,SAAS;eAAC,EAAC,QAAQ,EAAE,WAAW,EAAC;gBAEvB,OAAO;kBAAf,KAAK;YACI,cAAc;kBAAvB,MAAM;;AAIT,MAAM,OAAO,SAAS;;6CAAT,SAAS;iGAAT,SAAS;wFAAT,SAAS,mBAXT,OAAO,EAKP,gBAAgB;uFAMhB,SAAS;cADrB,QAAQ;eAAC,EAAC,YAAY,EAAE,CAAC,OAAO,EAAE,gBAAgB,CAAC,EAAC\"}\n+{\"version\":3,\"file\":\"two_way_binding_longhand.js\",\"sourceRoot\":\"\",\"sources\":[\"../two_way_binding_longhand.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAC,SAAS,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAC,MAAM,eAAe,CAAC;;AAM1F,MAAM,OAAO,OAAO;IAJpB;QAKE,SAAI,GAAW,EAAE,CAAC;KACnB;;8DAFY,OAAO;6EAAP,OAAO,0DAFR,qCAAqC,4EAOpC,gBAAgB;uFALhB,OAAO;cAJnB,SAAS;eAAC;gBACT,QAAQ,EAAE,UAAU;gBACpB,QAAQ,EAAE,qCAAqC;aAChD;;AAMD,MAAM,OAAO,gBAAgB;IAD7B;QAEW,YAAO,GAAW,EAAE,CAAC;QACpB,mBAAc,GAAyB,IAAI,YAAY,EAAE,CAAC;KACrE;;gFAHY,gBAAgB;sFAAhB,gBAAgB;uFAAhB,gBAAgB;cAD5B,SAAS;eAAC,EAAC,QAAQ,EAAE,WAAW,EAAC;gBAEvB,OAAO;kBAAf,KAAK;YACI,cAAc;kBAAvB,MAAM;;AAIT,MAAM,OAAO,SAAS;;6CAAT,SAAS;iGAAT,SAAS;wFAAT,SAAS,mBAXT,OAAO,EAKP,gBAAgB;uFAMhB,SAAS;cADrB,QAAQ;eAAC,EAAC,YAAY,EAAE,CAAC,OAAO,EAAE,gBAAgB,CAAC,EAAC\"}\n /****************************************************************************************************\n  * PARTIAL FILE: two_way_binding_longhand.d.ts\n  ****************************************************************************************************/"
        },
        {
            "sha": "836685b5918a31db97aff7358a89c8851b5caacf",
            "filename": "packages/compiler/src/render3/partial/api.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler%2Fsrc%2Frender3%2Fpartial%2Fapi.ts",
            "raw_url": "https://github.com/angular/angular/raw/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler%2Fsrc%2Frender3%2Fpartial%2Fapi.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Frender3%2Fpartial%2Fapi.ts?ref=e23fd1f38205410e0ecb601ec73847cea2dea2a8",
            "patch": "@@ -155,7 +155,8 @@ export interface R3DeclareComponentMetadata extends R3DeclareDirectiveMetadata {\n     selector: string;\n \n     /**\n-     * Reference to the directive class (possibly a forward reference).\n+     * Reference to the directive class (possibly a forward reference wrapped in a `forwardRef`\n+     * invocation).\n      */\n     type: o.Expression | (() => o.Expression);\n \n@@ -176,8 +177,8 @@ export interface R3DeclareComponentMetadata extends R3DeclareDirectiveMetadata {\n   }[];\n \n   /**\n-   * A map of pipe names to an expression referencing the pipe type (possibly a forward reference)\n-   * which are used in the template.\n+   * A map of pipe names to an expression referencing the pipe type (possibly a forward reference\n+   * wrapped in a `forwardRef` invocation) which are used in the template.\n    */\n   pipes?: {[pipeName: string]: o.Expression|(() => o.Expression)};\n "
        },
        {
            "sha": "271a836fa8249b7727995d732a0468048f390d40",
            "filename": "packages/compiler/src/render3/partial/component.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 6,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler%2Fsrc%2Frender3%2Fpartial%2Fcomponent.ts",
            "raw_url": "https://github.com/angular/angular/raw/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler%2Fsrc%2Frender3%2Fpartial%2Fcomponent.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Frender3%2Fpartial%2Fcomponent.ts?ref=e23fd1f38205410e0ecb601ec73847cea2dea2a8",
            "patch": "@@ -91,9 +91,8 @@ function compileTemplateDefinition(template: ParsedTemplate): o.LiteralMapExpr {\n  * individual directives. If the component does not use any directives, then null is returned.\n  */\n function compileUsedDirectiveMetadata(meta: R3ComponentMetadata): o.LiteralArrayExpr|null {\n-  const wrapType = meta.wrapDirectivesAndPipesInClosure ?\n-      (expr: o.Expression) => o.fn([], [new o.ReturnStatement(expr)]) :\n-      (expr: o.Expression) => expr;\n+  const wrapType =\n+      meta.wrapDirectivesAndPipesInClosure ? generateForwardRef : (expr: o.Expression) => expr;\n \n   return toOptionalLiteralArray(meta.directives, directive => {\n     const dirMeta = new DefinitionMap<R3UsedDirectiveMetadata>();\n@@ -116,13 +115,16 @@ function compileUsedPipeMetadata(meta: R3ComponentMetadata): o.LiteralMapExpr|nu\n     return null;\n   }\n \n-  const wrapType = meta.wrapDirectivesAndPipesInClosure ?\n-      (expr: o.Expression) => o.fn([], [new o.ReturnStatement(expr)]) :\n-      (expr: o.Expression) => expr;\n+  const wrapType =\n+      meta.wrapDirectivesAndPipesInClosure ? generateForwardRef : (expr: o.Expression) => expr;\n \n   const entries = [];\n   for (const [name, pipe] of meta.pipes) {\n     entries.push({key: name, value: wrapType(pipe), quoted: true});\n   }\n   return o.literalMap(entries);\n }\n+\n+function generateForwardRef(expr: o.Expression): o.Expression {\n+  return o.importExpr(R3.forwardRef).callFn([o.fn([], [new o.ReturnStatement(expr)])]);\n+}"
        },
        {
            "sha": "6e3d2f7ae25c920123519cda852b11cee5a81bbe",
            "filename": "packages/compiler/src/render3/r3_identifiers.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler%2Fsrc%2Frender3%2Fr3_identifiers.ts",
            "raw_url": "https://github.com/angular/angular/raw/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcompiler%2Fsrc%2Frender3%2Fr3_identifiers.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Frender3%2Fr3_identifiers.ts?ref=e23fd1f38205410e0ecb601ec73847cea2dea2a8",
            "patch": "@@ -229,6 +229,8 @@ export class Identifiers {\n   static templateRefExtractor:\n       o.ExternalReference = {name: 'ɵɵtemplateRefExtractor', moduleName: CORE};\n \n+  static forwardRef: o.ExternalReference = {name: 'forwardRef', moduleName: CORE};\n+\n   static resolveWindow: o.ExternalReference = {name: 'ɵɵresolveWindow', moduleName: CORE};\n   static resolveDocument: o.ExternalReference = {name: 'ɵɵresolveDocument', moduleName: CORE};\n   static resolveBody: o.ExternalReference = {name: 'ɵɵresolveBody', moduleName: CORE};"
        },
        {
            "sha": "4556e25dd8449e63a48b411a73752bcdf846ccbb",
            "filename": "packages/core/src/render3/jit/environment.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcore%2Fsrc%2Frender3%2Fjit%2Fenvironment.ts",
            "raw_url": "https://github.com/angular/angular/raw/e23fd1f38205410e0ecb601ec73847cea2dea2a8/packages%2Fcore%2Fsrc%2Frender3%2Fjit%2Fenvironment.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fjit%2Fenvironment.ts?ref=e23fd1f38205410e0ecb601ec73847cea2dea2a8",
            "patch": "@@ -6,6 +6,7 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n+import {forwardRef} from '../../di/forward_ref';\n import {ɵɵinject, ɵɵinvalidFactoryDep} from '../../di/injector_compatibility';\n import {ɵɵdefineInjectable, ɵɵdefineInjector} from '../../di/interface/defs';\n import * as sanitization from '../../sanitization/sanitization';\n@@ -167,4 +168,6 @@ export const angularCoreEnv: {[name: string]: Function} =\n        'ɵɵsanitizeUrlOrResourceUrl': sanitization.ɵɵsanitizeUrlOrResourceUrl,\n        'ɵɵtrustConstantHtml': sanitization.ɵɵtrustConstantHtml,\n        'ɵɵtrustConstantResourceUrl': sanitization.ɵɵtrustConstantResourceUrl,\n+\n+       'forwardRef': forwardRef,\n      }))();"
        }
    ],
    "stats": {
        "total": 335,
        "additions": 298,
        "deletions": 37
    }
}