{
    "author": "devversion",
    "message": "ci: invalidate cache for node modules to ensure latest CLI is used (#43431)\n\nInvalidate the cache for node modules so that the CLI builds from\nthe snapshot repositories are used. Due to a bug in Yarn, and the need\nof using the `github:<..>` syntax, the old artifacts from previous runs\nare incorrectly cached. This could have been prevented by using an actual\nfull Git ref URL, but unfortunately that does not work because the CLI\ndevkit snapshot dependencies set snapshot builds as deps as well. The URLs\nhere need to match as otherwise Yarn will conflict. e.g.\n\n```\n Pattern [\"@angular-devkit/core@github:angular/angular-devkit-core-builds#64b7e2b1d\"] is trying to unpack in the same destination \"/Users/paul/Library/Caches/Yarn/v6/npm-@angular-devkit-core-13.0.0-next.6/node_modules/@angular-devkit/core\" as pattern [\"@angular-devkit/core@github:angular/angular-devkit-core-builds#0e7277c63\"]. This could result in non-deterministic behavior, skipping.\n```\n\nPR Close #43431",
    "sha": "efcc72384627fd991c7d8021b9c671d26eb6e49c",
    "files": [
        {
            "sha": "cde9c3ea6cf174622fb577e23bc17cdee8abbf77",
            "filename": ".circleci/config.yml",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/efcc72384627fd991c7d8021b9c671d26eb6e49c/.circleci%2Fconfig.yml",
            "raw_url": "https://github.com/angular/angular/raw/efcc72384627fd991c7d8021b9c671d26eb6e49c/.circleci%2Fconfig.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.circleci%2Fconfig.yml?ref=efcc72384627fd991c7d8021b9c671d26eb6e49c",
            "patch": "@@ -24,15 +24,15 @@ version: 2.1\n # **NOTE 2 **: If you change the cache key prefix, also sync the cache_key_fallback to match.\n # **NOTE 3 **: Keep the static part of the cache key as prefix to enable correct fallbacks.\n # See https://circleci.com/docs/2.0/caching/#restoring-cache for how prefixes work in CircleCI.\n-var_3: &cache_key v1-angular-node-14-{{ checksum \"month.txt\" }}-{{ checksum \".bazelversion\" }}-{{ checksum \"yarn.lock\" }}-{{ checksum \"WORKSPACE\" }}-{{ checksum \"aio/yarn.lock\" }}\n+var_3: &cache_key v5-angular-node-14-{{ checksum \"month.txt\" }}-{{ checksum \".bazelversion\" }}-{{ checksum \"yarn.lock\" }}-{{ checksum \"WORKSPACE\" }}-{{ checksum \"aio/yarn.lock\" }}\n # We invalidate the cache if the Bazel version changes because otherwise the `bazelisk` cache\n # folder will contain all previously used versions and ultimately cause the cache restoring to\n # be slower due to its growing size.\n-var_4: &cache_key_fallback v1-angular-node-14-{{ checksum \"month.txt\" }}-{{ checksum \".bazelversion\" }}\n+var_4: &cache_key_fallback v5-angular-node-14-{{ checksum \"month.txt\" }}-{{ checksum \".bazelversion\" }}\n \n # Windows needs its own cache key because binaries in node_modules are different.\n-var_3_win: &cache_key_win v1-angular-win-node-14-{{ checksum \"month.txt\" }}-{{ checksum \".bazelversion\" }}-{{ checksum \"yarn.lock\" }}-{{ checksum \"WORKSPACE\" }}-{{ checksum \"aio/yarn.lock\" }}\n-var_4_win: &cache_key_win_fallback v1-angular-win-node-14-{{ checksum \"month.txt\" }}-{{ checksum \".bazelversion\" }}\n+var_3_win: &cache_key_win v5-angular-win-node-14-{{ checksum \"month.txt\" }}-{{ checksum \".bazelversion\" }}-{{ checksum \"yarn.lock\" }}-{{ checksum \"WORKSPACE\" }}-{{ checksum \"aio/yarn.lock\" }}\n+var_4_win: &cache_key_win_fallback v5-angular-win-node-14-{{ checksum \"month.txt\" }}-{{ checksum \".bazelversion\" }}\n \n # Cache key for the `components-repo-unit-tests` job. **Note** when updating the SHA in the\n # cache keys also update the SHA for the \"COMPONENTS_REPO_COMMIT\" environment variable."
        }
    ],
    "stats": {
        "total": 8,
        "additions": 4,
        "deletions": 4
    }
}