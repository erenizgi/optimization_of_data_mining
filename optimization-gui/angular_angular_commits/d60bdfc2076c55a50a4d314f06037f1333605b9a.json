{
    "author": "markwhitfeld",
    "message": "fix(devtools): don't access service prop unnecessarily\n\nThe code was requesting index 0 of each item in the LView before checking\nif it is an array. This causes issues with services that only allow calls to\nproperties that are defined on the service (backed by a strict ES6 proxy).\nA check if the type is Array first corrects this issue.\n\nfixes issue rangle/angular-devtools#802",
    "sha": "d60bdfc2076c55a50a4d314f06037f1333605b9a",
    "files": [
        {
            "sha": "90d4bddaf8aacff889849cfe87f32638e867486f",
            "filename": "projects/ng-devtools-backend/src/lib/directive-forest/ltree.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/d60bdfc2076c55a50a4d314f06037f1333605b9a/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Fltree.ts",
            "raw_url": "https://github.com/angular/angular/raw/d60bdfc2076c55a50a4d314f06037f1333605b9a/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Fltree.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Fltree.ts?ref=d60bdfc2076c55a50a4d314f06037f1333605b9a",
            "patch": "@@ -108,13 +108,14 @@ export class LTreeStrategy {\n     const lView = lViewOrLContainer;\n     const tView = lView[LVIEW_TVIEW];\n     for (let i = HEADER_OFFSET; i < lView.length; i++) {\n-      if (lView[i] && tView.data && lView[i][ELEMENT] instanceof Node) {\n+      const lViewItem = lView[i];\n+      if (tView.data && Array.isArray(lViewItem) && lViewItem[ELEMENT] instanceof Node) {\n         const node = this._getNode(lView, tView.data, i);\n \n         // TODO(mgechev): verify if this won't make us skip projected content.\n         if (node.component || node.directives.length) {\n           nodes.push(node);\n-          this._extract(lView[i], node.children);\n+          this._extract(lViewItem, node.children);\n         }\n       }\n     }"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 3,
        "deletions": 2
    }
}