{
    "author": "crisbeto",
    "message": "test(core): clean up tests relying on entryComponents (#44276)\n\nCleans up all the tests that had to declare a separate module in order to pass in `entryComponents` when creating components dynamically. This covers almost all of the `entryComponents` usages, except for a few which I've left for now, because they're testing some of the existing leftover `entryComponents` logic in core.\n\nPR Close #44276",
    "sha": "594bd12d5dba68b6073a4c42f0ccef2c6c8acb50",
    "files": [
        {
            "sha": "abbb7431443f52da74f09d90e92ebc0321066ebb",
            "filename": "packages/core/test/acceptance/change_detection_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 12,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Fchange_detection_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Fchange_detection_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fchange_detection_spec.ts?ref=594bd12d5dba68b6073a4c42f0ccef2c6c8acb50",
            "patch": "@@ -135,17 +135,7 @@ describe('change detection', () => {\n         noop() {}\n       }\n \n-      // We need to declare a module so that we can specify `entryComponents`\n-      // for when the test is run against ViewEngine.\n-      @NgModule({\n-        declarations: [App, ViewManipulation, DynamicComp],\n-        exports: [App, ViewManipulation, DynamicComp],\n-        entryComponents: [DynamicComp]\n-      })\n-      class AppModule {\n-      }\n-\n-      TestBed.configureTestingModule({imports: [AppModule]});\n+      TestBed.configureTestingModule({declarations: [App, ViewManipulation, DynamicComp]});\n       const fixture = TestBed.createComponent(App);\n       const vm: ViewManipulation = fixture.debugElement.childNodes[0].references['vm'];\n       const factory = TestBed.get(ComponentFactoryResolver).resolveComponentFactory(DynamicComp);\n@@ -201,7 +191,7 @@ describe('change detection', () => {\n       class DynamicCmpt {\n       }\n \n-      @NgModule({declarations: [DynamicCmpt], entryComponents: [DynamicCmpt]})\n+      @NgModule({declarations: [DynamicCmpt]})\n       class DynamicModule {\n       }\n "
        },
        {
            "sha": "c433e1a0ee26eeda9cf111bef758d4db98418e46",
            "filename": "packages/core/test/acceptance/component_spec.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 99,
            "changes": 107,
            "blob_url": "https://github.com/angular/angular/blob/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Fcomponent_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Fcomponent_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fcomponent_spec.ts?ref=594bd12d5dba68b6073a4c42f0ccef2c6c8acb50",
            "patch": "@@ -58,61 +58,12 @@ describe('component', () => {\n     });\n   });\n \n-  it('should support entry components from another module', () => {\n-    @Component({selector: 'other-component', template: `bar`})\n-    class OtherComponent {\n-    }\n-\n-    @NgModule({\n-      declarations: [OtherComponent],\n-      exports: [OtherComponent],\n-      entryComponents: [OtherComponent]\n-    })\n-    class OtherModule {\n-    }\n-\n-    @Component({\n-      selector: 'test_component',\n-      template: `foo|<ng-template #vc></ng-template>`,\n-      entryComponents: [OtherComponent]\n-    })\n-    class TestComponent {\n-      @ViewChild('vc', {read: ViewContainerRef, static: true}) vcref!: ViewContainerRef;\n-\n-      constructor(private _cfr: ComponentFactoryResolver) {}\n-\n-      createComponentView<T>(cmptType: Type<T>): ComponentRef<T> {\n-        const cf = this._cfr.resolveComponentFactory(cmptType);\n-        return this.vcref.createComponent(cf);\n-      }\n-    }\n-\n-    TestBed.configureTestingModule({declarations: [TestComponent], imports: [OtherModule]});\n-    const fixture = TestBed.createComponent(TestComponent);\n-    fixture.detectChanges();\n-\n-    fixture.componentInstance.createComponentView(OtherComponent);\n-    fixture.detectChanges();\n-    expect(fixture.nativeElement).toHaveText('foo|bar');\n-  });\n-\n   it('should be able to dynamically insert a component into a view container at the root of a component',\n      () => {\n        @Component({template: 'hello'})\n        class HelloComponent {\n        }\n \n-       // TODO: This module is only used to declare the `entryComponets` since\n-       //  `configureTestingModule` doesn't support it. The module can be removed\n-       // once ViewEngine is removed.\n-       @NgModule({\n-         declarations: [HelloComponent],\n-         exports: [HelloComponent],\n-         entryComponents: [HelloComponent]\n-       })\n-       class HelloModule {\n-       }\n-\n        @Component({selector: 'wrapper', template: '<ng-content></ng-content>'})\n        class Wrapper {\n        }\n@@ -129,7 +80,7 @@ describe('component', () => {\n          constructor(public componentFactoryResolver: ComponentFactoryResolver) {}\n        }\n \n-       TestBed.configureTestingModule({declarations: [App, Wrapper], imports: [HelloModule]});\n+       TestBed.configureTestingModule({declarations: [App, Wrapper, HelloComponent]});\n        const fixture = TestBed.createComponent(App);\n        fixture.detectChanges();\n \n@@ -246,13 +197,6 @@ describe('component', () => {\n          }\n        }\n \n-       @NgModule({\n-         declarations: [DynamicComponent],\n-         entryComponents: [DynamicComponent],  // needed only for ViewEngine\n-       })\n-       class TestModule {\n-       }\n-\n        @Component({\n          selector: 'button',\n          template: `\n@@ -280,7 +224,7 @@ describe('component', () => {\n          }\n        }\n \n-       TestBed.configureTestingModule({imports: [TestModule], declarations: [App]});\n+       TestBed.configureTestingModule({declarations: [App, DynamicComponent]});\n        const fixture = TestBed.createComponent(App);\n        fixture.detectChanges();\n \n@@ -326,13 +270,6 @@ describe('component', () => {\n            class DynamicComponent {\n            }\n \n-           @NgModule({\n-             declarations: [DynamicComponent],\n-             entryComponents: [DynamicComponent],  // needed only for ViewEngine\n-           })\n-           class TestModule {\n-           }\n-\n            @Component({\n              selector: 'button',\n              template: '<div id=\"app-root\" #anchor></div>',\n@@ -356,7 +293,7 @@ describe('component', () => {\n              }\n            }\n \n-           TestBed.configureTestingModule({imports: [TestModule], declarations: [App]});\n+           TestBed.configureTestingModule({declarations: [App, DynamicComponent]});\n            const fixture = TestBed.createComponent(App);\n            fixture.detectChanges();\n \n@@ -537,17 +474,11 @@ describe('component', () => {\n       }\n     }\n \n-    @NgModule({\n-      declarations: [CompA],\n-      entryComponents: [CompA],\n-    })\n+    @NgModule({declarations: [CompA]})\n     class MyModuleA {\n     }\n \n-    @NgModule({\n-      declarations: [CompB],\n-      entryComponents: [CompB],\n-    })\n+    @NgModule({declarations: [CompB]})\n     class MyModuleB {\n     }\n \n@@ -579,14 +510,7 @@ describe('component', () => {\n     class AttSelectorCmp {\n     }\n \n-    @NgModule({\n-      declarations: [AttSelectorCmp],\n-      entryComponents: [AttSelectorCmp],\n-    })\n-    class AppModule {\n-    }\n-\n-    TestBed.configureTestingModule({imports: [AppModule]});\n+    TestBed.configureTestingModule({declarations: [AttSelectorCmp]});\n     const cmpFactoryResolver = TestBed.inject(ComponentFactoryResolver);\n     const cmpFactory = cmpFactoryResolver.resolveComponentFactory(AttSelectorCmp);\n \n@@ -598,14 +522,7 @@ describe('component', () => {\n     class ComplexSelectorCmp {\n     }\n \n-    @NgModule({\n-      declarations: [ComplexSelectorCmp],\n-      entryComponents: [ComplexSelectorCmp],\n-    })\n-    class AppModule {\n-    }\n-\n-    TestBed.configureTestingModule({imports: [AppModule]});\n+    TestBed.configureTestingModule({declarations: [ComplexSelectorCmp]});\n     const cmpFactoryResolver = TestBed.inject(ComponentFactoryResolver);\n     const cmpFactory = cmpFactoryResolver.resolveComponentFactory(ComplexSelectorCmp);\n \n@@ -643,22 +560,14 @@ describe('component', () => {\n         }\n       }\n \n-      // View Engine requires DynamicComponent to be in entryComponents.\n-      @NgModule({\n-        declarations: [App, DynamicComponent],\n-        entryComponents: [App, DynamicComponent],\n-      })\n-      class AppModule {\n-      }\n-\n       function _document(): any {\n         // Tell Ivy about the global document\n         ÉµsetDocument(document);\n         return document;\n       }\n \n       TestBed.configureTestingModule({\n-        imports: [AppModule],\n+        declarations: [App, DynamicComponent],\n         providers: [\n           {provide: DOCUMENT, useFactory: _document, deps: []},\n           rendererProviders,"
        },
        {
            "sha": "2824bec4b6169320c2237d67cfbbd4d7fdf306fb",
            "filename": "packages/core/test/acceptance/di_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 11,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Fdi_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Fdi_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fdi_spec.ts?ref=594bd12d5dba68b6073a4c42f0ccef2c6c8acb50",
            "patch": "@@ -522,8 +522,7 @@ describe('di', () => {\n               <ng-container #childOrigin></ng-container>\n               <ng-container #childOriginWithDirB dirB></ng-container>\n             </div>\n-          </projector>`,\n-          entryComponents: [Child]\n+          </projector>`\n         })\n         class MyApp {\n           @ViewChild('childOrigin', {read: ViewContainerRef, static: true})\n@@ -2552,16 +2551,8 @@ describe('di', () => {\n           }\n         }\n \n-        // this module is needed, so that View Engine can generate factory for ChildComp\n-        @NgModule({\n-          declarations: [DirectiveA, RootComp, ChildComp],\n-          entryComponents: [RootComp, ChildComp],\n-        })\n-        class ModuleA {\n-        }\n-\n         TestBed.configureTestingModule({\n-          imports: [ModuleA],\n+          declarations: [DirectiveA, RootComp, ChildComp],\n           providers: [ServiceA],\n         });\n "
        },
        {
            "sha": "721da0deddc37a979a216c8daac32e71cb02124e",
            "filename": "packages/core/test/acceptance/host_binding_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 8,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Fhost_binding_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Fhost_binding_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fhost_binding_spec.ts?ref=594bd12d5dba68b6073a4c42f0ccef2c6c8acb50",
            "patch": "@@ -157,14 +157,7 @@ describe('host bindings', () => {\n         prop2 = 1;\n       }\n \n-      @NgModule({\n-        entryComponents: [ChildCmp],\n-        declarations: [ChildCmp],\n-      })\n-      class ChildCmpModule {\n-      }\n-\n-      TestBed.configureTestingModule({declarations: [App, ParentCmp], imports: [ChildCmpModule]});\n+      TestBed.configureTestingModule({declarations: [App, ParentCmp, ChildCmp]});\n       const fixture = TestBed.createComponent(App);\n       fixture.detectChanges();\n "
        },
        {
            "sha": "2f04f4abf5b4aa1e01cc00e3db4419c34cc295f3",
            "filename": "packages/core/test/acceptance/lifecycle_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 9,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Flifecycle_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Flifecycle_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Flifecycle_spec.ts?ref=594bd12d5dba68b6073a4c42f0ccef2c6c8acb50",
            "patch": "@@ -1569,15 +1569,7 @@ describe('onInit', () => {\n       }\n     }\n \n-    // View Engine requires that DynamicComp be in entryComponents.\n-    @NgModule({\n-      declarations: [App, MyComp, DynamicComp],\n-      entryComponents: [DynamicComp, App],\n-    })\n-    class AppModule {\n-    }\n-\n-    TestBed.configureTestingModule({imports: [AppModule]});\n+    TestBed.configureTestingModule({declarations: [App, MyComp, DynamicComp]});\n \n     const fixture = TestBed.createComponent(App);\n     fixture.detectChanges();"
        },
        {
            "sha": "032ed10a109cf3f123da32c83c2b69b41647cfbb",
            "filename": "packages/core/test/acceptance/styling_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 16,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Fstyling_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Fstyling_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fstyling_spec.ts?ref=594bd12d5dba68b6073a4c42f0ccef2c6c8acb50",
            "patch": "@@ -2651,14 +2651,7 @@ describe('styling', () => {\n          prop = 'a';\n        }\n \n-       @NgModule({\n-         entryComponents: [ChildCmp],\n-         declarations: [ChildCmp],\n-       })\n-       class ChildCmpModule {\n-       }\n-\n-       TestBed.configureTestingModule({declarations: [App, ParentCmp], imports: [ChildCmpModule]});\n+       TestBed.configureTestingModule({declarations: [App, ParentCmp, ChildCmp]});\n        const fixture = TestBed.createComponent(App);\n        fixture.detectChanges(false);\n \n@@ -2730,14 +2723,7 @@ describe('styling', () => {\n          @ViewChild('parent', {static: true}) public parent: ParentCmp|null = null;\n        }\n \n-       @NgModule({\n-         entryComponents: [ChildCmp],\n-         declarations: [ChildCmp],\n-       })\n-       class ChildCmpModule {\n-       }\n-\n-       TestBed.configureTestingModule({declarations: [App, ParentCmp], imports: [ChildCmpModule]});\n+       TestBed.configureTestingModule({declarations: [App, ParentCmp, ChildCmp]});\n        const fixture = TestBed.createComponent(App);\n        fixture.detectChanges(false);\n "
        },
        {
            "sha": "5b378502a4a2dedf7554656629cbe6a06db2ef75",
            "filename": "packages/core/test/acceptance/template_ref_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 11,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Ftemplate_ref_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Ftemplate_ref_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Ftemplate_ref_spec.ts?ref=594bd12d5dba68b6073a4c42f0ccef2c6c8acb50",
            "patch": "@@ -186,23 +186,13 @@ describe('TemplateRef', () => {\n         @ViewChild('templateRef', {static: true}) templateRef!: TemplateRef<any>;\n       }\n \n-      @NgModule({\n-        declarations: [DynamicCmp],\n-        entryComponents: [DynamicCmp],\n-      })\n-      class WithDynamicCmpModule {\n-      }\n-\n       @Component({selector: 'test', template: ''})\n       class TestCmp {\n         constructor(public cfr: ComponentFactoryResolver) {}\n       }\n \n       beforeEach(() => {\n-        TestBed.configureTestingModule({\n-          declarations: [TestCmp],\n-          imports: [WithDynamicCmpModule],\n-        });\n+        TestBed.configureTestingModule({declarations: [TestCmp, DynamicCmp]});\n       });\n \n       it('should return projectable nodes when provided', () => {"
        },
        {
            "sha": "673dc252a6f67689e9139d6614cb221301ef273c",
            "filename": "packages/core/test/acceptance/view_container_ref_spec.ts",
            "status": "modified",
            "additions": 18,
            "deletions": 102,
            "changes": 120,
            "blob_url": "https://github.com/angular/angular/blob/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Fview_container_ref_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Fview_container_ref_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fview_container_ref_spec.ts?ref=594bd12d5dba68b6073a4c42f0ccef2c6c8acb50",
            "patch": "@@ -74,10 +74,6 @@ describe('ViewContainerRef', () => {\n       class HelloComp {\n       }\n \n-      @NgModule({entryComponents: [HelloComp], declarations: [HelloComp]})\n-      class HelloCompModule {\n-      }\n-\n       @Component({\n         template: `\n           <ng-container vcref></ng-container>\n@@ -87,8 +83,7 @@ describe('ViewContainerRef', () => {\n         @ViewChild(VCRefDirective, {static: true}) vcRefDir!: VCRefDirective;\n       }\n \n-      TestBed.configureTestingModule(\n-          {declarations: [TestComp, VCRefDirective], imports: [HelloCompModule]});\n+      TestBed.configureTestingModule({declarations: [TestComp, VCRefDirective, HelloComp]});\n       const fixture = TestBed.createComponent(TestComp);\n       const {vcref, cfr, elementRef} = fixture.componentInstance.vcRefDir;\n       fixture.detectChanges();\n@@ -120,10 +115,6 @@ describe('ViewContainerRef', () => {\n       class HelloComp {\n       }\n \n-      @NgModule({entryComponents: [HelloComp], declarations: [HelloComp]})\n-      class HelloCompModule {\n-      }\n-\n       @Component({\n         template: `\n           <ng-container #container></ng-container>\n@@ -140,7 +131,7 @@ describe('ViewContainerRef', () => {\n         }\n       }\n \n-      TestBed.configureTestingModule({declarations: [TestComp], imports: [HelloCompModule]});\n+      TestBed.configureTestingModule({declarations: [TestComp, HelloComp]});\n       const fixture = TestBed.createComponent(TestComp);\n       fixture.detectChanges();\n       expect(fixture.debugElement.nativeElement.innerHTML).not.toContain('Hello');\n@@ -167,17 +158,6 @@ describe('ViewContainerRef', () => {\n           class MathMLComp {\n           }\n \n-          @NgModule({\n-            entryComponents: [SvgComp, MathMLComp],\n-            declarations: [SvgComp, MathMLComp],\n-            // View Engine doesn't have MathML tags listed in `DomElementSchemaRegistry`, thus\n-            // throwing \"unknown element\" error (':math:matrix' is not a known element). Ignore\n-            // these errors by adding `NO_ERRORS_SCHEMA` to this NgModule.\n-            schemas: [NO_ERRORS_SCHEMA],\n-          })\n-          class RootModule {\n-          }\n-\n           @Component({\n             template: `\n               <ng-container #svg></ng-container>\n@@ -206,8 +186,7 @@ describe('ViewContainerRef', () => {\n           }\n \n           TestBed.configureTestingModule({\n-            declarations: [TestComp],\n-            imports: [RootModule],\n+            declarations: [TestComp, SvgComp, MathMLComp],\n             providers: [\n               {provide: DOCUMENT, useFactory: _document, deps: []},\n               // TODO(FW-811): switch back to default server renderer (i.e. remove the line below)\n@@ -243,10 +222,6 @@ describe('ViewContainerRef', () => {\n       class HelloComp {\n       }\n \n-      @NgModule({entryComponents: [HelloComp], declarations: [HelloComp]})\n-      class HelloCompModule {\n-      }\n-\n       @Component({\n         template: `\n           <div id=\"factory\" attr-a=\"a-original\" class=\"class-original\"></div>\n@@ -271,7 +246,7 @@ describe('ViewContainerRef', () => {\n         }\n       }\n \n-      TestBed.configureTestingModule({declarations: [TestComp], imports: [HelloCompModule]});\n+      TestBed.configureTestingModule({declarations: [TestComp, HelloComp]});\n       const fixture = TestBed.createComponent(TestComp);\n       fixture.detectChanges();\n       fixture.componentInstance.createComponentViaVCRef();\n@@ -1144,14 +1119,8 @@ describe('ViewContainerRef', () => {\n         }\n       }\n \n-      @NgModule({entryComponents: [EmbeddedComponent], declarations: [EmbeddedComponent]})\n-      class EmbeddedComponentModule {\n-      }\n-\n-      TestBed.configureTestingModule({\n-        declarations: [EmbeddedViewInsertionComp, VCRefDirective],\n-        imports: [EmbeddedComponentModule]\n-      });\n+      TestBed.configureTestingModule(\n+          {declarations: [EmbeddedViewInsertionComp, VCRefDirective, EmbeddedComponent]});\n       const fixture = TestBed.createComponent(EmbeddedViewInsertionComp);\n       const vcRefDir =\n           fixture.debugElement.query(By.directive(VCRefDirective)).injector.get(VCRefDirective);\n@@ -1196,14 +1165,8 @@ describe('ViewContainerRef', () => {\n         }\n       }\n \n-      @NgModule({entryComponents: [EmbeddedComponent], declarations: [EmbeddedComponent]})\n-      class EmbeddedComponentModule {\n-      }\n-\n-      TestBed.configureTestingModule({\n-        declarations: [EmbeddedViewInsertionComp, VCRefDirective],\n-        imports: [EmbeddedComponentModule]\n-      });\n+      TestBed.configureTestingModule(\n+          {declarations: [EmbeddedViewInsertionComp, VCRefDirective, EmbeddedComponent]});\n \n       @NgModule({\n         providers: [\n@@ -1260,8 +1223,7 @@ describe('ViewContainerRef', () => {\n \n     it('should support projectable nodes', () => {\n       TestBed.configureTestingModule({\n-        declarations: [EmbeddedViewInsertionComp, VCRefDirective],\n-        imports: [EmbeddedComponentWithNgZoneModule]\n+        declarations: [EmbeddedViewInsertionComp, VCRefDirective, EmbeddedComponentWithNgContent],\n       });\n       const fixture = TestBed.createComponent(EmbeddedViewInsertionComp);\n       const vcRefDir =\n@@ -1296,17 +1258,10 @@ describe('ViewContainerRef', () => {\n       class Reprojector {\n       }\n \n-      @NgModule({\n-        exports: [Reprojector, EmbeddedComponentWithNgContent],\n-        declarations: [Reprojector, EmbeddedComponentWithNgContent],\n-        entryComponents: [Reprojector]\n-      })\n-      class ReprojectorModule {\n-      }\n-\n       TestBed.configureTestingModule({\n-        declarations: [EmbeddedViewInsertionComp, VCRefDirective],\n-        imports: [ReprojectorModule]\n+        declarations: [\n+          EmbeddedViewInsertionComp, VCRefDirective, Reprojector, EmbeddedComponentWithNgContent\n+        ],\n       });\n       const fixture = TestBed.createComponent(EmbeddedViewInsertionComp);\n       const vcRefDir =\n@@ -1332,8 +1287,7 @@ describe('ViewContainerRef', () => {\n \n     it('should support many projectable nodes with many slots', () => {\n       TestBed.configureTestingModule({\n-        declarations: [EmbeddedViewInsertionComp, VCRefDirective],\n-        imports: [EmbeddedComponentWithNgZoneModule]\n+        declarations: [EmbeddedViewInsertionComp, VCRefDirective, EmbeddedComponentWithNgContent]\n       });\n       const fixture = TestBed.createComponent(EmbeddedViewInsertionComp);\n       const vcRefDir =\n@@ -1385,12 +1339,7 @@ describe('ViewContainerRef', () => {\n       class DynamicComponent {\n       }\n \n-      @NgModule({declarations: [DynamicComponent], entryComponents: [DynamicComponent]})\n-      class DeclaresDynamicComponent {\n-      }\n-\n-      TestBed.configureTestingModule(\n-          {imports: [DeclaresDynamicComponent], declarations: [TestComp]});\n+      TestBed.configureTestingModule({declarations: [DynamicComponent]});\n       const fixture = TestBed.createComponent(TestComp);\n \n       // Note: it's important that we **don't** call `fixture.detectChanges` between here and\n@@ -1863,14 +1812,6 @@ describe('ViewContainerRef', () => {\n       }\n     }\n \n-    @NgModule({\n-      declarations: [ComponentWithHooks],\n-      exports: [ComponentWithHooks],\n-      entryComponents: [ComponentWithHooks]\n-    })\n-    class ComponentWithHooksModule {\n-    }\n-\n     it('should call all hooks in correct order when creating with createEmbeddedView', () => {\n       @Component({\n         template: `\n@@ -1969,7 +1910,7 @@ describe('ViewContainerRef', () => {\n       log.length = 0;\n \n       TestBed.configureTestingModule(\n-          {declarations: [SomeComponent, VCRefDirective], imports: [ComponentWithHooksModule]});\n+          {declarations: [SomeComponent, VCRefDirective, ComponentWithHooks]});\n       const fixture = TestBed.createComponent(SomeComponent);\n       const vcRefDir =\n           fixture.debugElement.query(By.directive(VCRefDirective)).injector.get(VCRefDirective);\n@@ -2053,12 +1994,8 @@ describe('ViewContainerRef', () => {\n         @ViewChild(VCRefDirective, {static: true}) vcRefDir!: VCRefDirective;\n       }\n \n-      @NgModule({declarations: [HostBindingCmpt], entryComponents: [HostBindingCmpt]})\n-      class TestModule {\n-      }\n-\n       TestBed.configureTestingModule(\n-          {declarations: [TestComponent, VCRefDirective], imports: [TestModule]});\n+          {declarations: [TestComponent, VCRefDirective, HostBindingCmpt]});\n       const fixture = TestBed.createComponent(TestComponent);\n       const {vcRefDir} = fixture.componentInstance;\n \n@@ -2358,15 +2295,9 @@ describe('ViewContainerRef', () => {\n         constructor(public vcRef: ViewContainerRef, public cfResolver: ComponentFactoryResolver) {}\n       }\n \n-      @NgModule(\n-          {entryComponents: [DynamicCompWithBindings], declarations: [DynamicCompWithBindings]})\n-      class DynamicCompWithBindingsModule {\n-      }\n-\n \n       TestBed.configureTestingModule({\n-        declarations: [TestComp],\n-        imports: [DynamicCompWithBindingsModule],\n+        declarations: [TestComp, DynamicCompWithBindings],\n         providers: [TEST_COMPONENT_RENDERER]\n       });\n       const fixture = TestBed.createComponent(TestComp);\n@@ -2405,16 +2336,9 @@ describe('ViewContainerRef', () => {\n       class DynamicCompWithChildren {\n       }\n \n-      @NgModule({\n-        entryComponents: [DynamicCompWithChildren],\n-        declarations: [DynamicCompWithChildren, Child]\n-      })\n-      class DynamicCompWithChildrenModule {\n-      }\n \n       TestBed.configureTestingModule({\n-        declarations: [TestComp],\n-        imports: [DynamicCompWithChildrenModule],\n+        declarations: [TestComp, DynamicCompWithChildren, Child],\n         providers: [TEST_COMPONENT_RENDERER]\n       });\n \n@@ -2480,14 +2404,6 @@ class VCRefDirective {\n class EmbeddedComponentWithNgContent {\n }\n \n-@NgModule({\n-  exports: [EmbeddedComponentWithNgContent],\n-  entryComponents: [EmbeddedComponentWithNgContent],\n-  declarations: [EmbeddedComponentWithNgContent],\n-})\n-class EmbeddedComponentWithNgZoneModule {\n-}\n-\n @Component({\n   selector: 'view-container-ref-comp',\n   template: `"
        },
        {
            "sha": "000644179cbcdeef4313900243953ff9216618fc",
            "filename": "packages/core/test/acceptance/view_insertion_spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 18,
            "changes": 21,
            "blob_url": "https://github.com/angular/angular/blob/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Fview_insertion_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Fview_insertion_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fview_insertion_spec.ts?ref=594bd12d5dba68b6073a4c42f0ccef2c6c8acb50",
            "patch": "@@ -504,15 +504,8 @@ describe('view insertion', () => {\n         }\n \n \n-        @NgModule({\n-          declarations: [TestCmpt, ViewInsertingDir, DynamicComponent],\n-          imports: [CommonModule],\n-          entryComponents: [DynamicComponent]\n-        })\n-        class TestModule {\n-        }\n-\n-        TestBed.configureTestingModule({imports: [TestModule]});\n+        TestBed.configureTestingModule(\n+            {declarations: [TestCmpt, ViewInsertingDir, DynamicComponent]});\n \n         const fixture = TestBed.createComponent(TestCmpt);\n         fixture.detectChanges();\n@@ -553,16 +546,8 @@ describe('view insertion', () => {\n            }\n          }\n \n-         @NgModule({\n-           declarations: [DynamicComponent],\n-           entryComponents: [DynamicComponent],\n-         })\n-         class TestModule {\n-         }\n-\n          TestBed.configureTestingModule({\n-           declarations: [AppComponent],\n-           imports: [TestModule],\n+           declarations: [AppComponent, DynamicComponent],\n          });\n          const fixture = TestBed.createComponent(AppComponent);\n          fixture.detectChanges();"
        },
        {
            "sha": "73acf1c45095b3e75566cba2a268ab0775613bbb",
            "filename": "packages/core/test/acceptance/view_ref_spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 15,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Fview_ref_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Facceptance%2Fview_ref_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fview_ref_spec.ts?ref=594bd12d5dba68b6073a4c42f0ccef2c6c8acb50",
            "patch": "@@ -37,11 +37,7 @@ describe('ViewRef', () => {\n       }\n     }\n \n-    @NgModule({declarations: [App, DynamicComponent], entryComponents: [DynamicComponent]})\n-    class MyTestModule {\n-    }\n-\n-    TestBed.configureTestingModule({imports: [MyTestModule]});\n+    TestBed.configureTestingModule({declarations: [App, DynamicComponent]});\n     const fixture = TestBed.createComponent(App);\n     fixture.detectChanges();\n \n@@ -96,11 +92,7 @@ describe('ViewRef', () => {\n       }\n     }\n \n-    @NgModule({declarations: [App, DynamicComponent], entryComponents: [DynamicComponent]})\n-    class MyTestModule {\n-    }\n-\n-    TestBed.configureTestingModule({imports: [MyTestModule]});\n+    TestBed.configureTestingModule({declarations: [App, DynamicComponent]});\n     const fixture = TestBed.createComponent(App);\n     fixture.detectChanges();\n     fixture.componentInstance.create();\n@@ -134,11 +126,7 @@ describe('ViewRef', () => {\n       }\n     }\n \n-    @NgModule({declarations: [App, DynamicComponent], entryComponents: [DynamicComponent]})\n-    class MyTestModule {\n-    }\n-\n-    TestBed.configureTestingModule({imports: [MyTestModule]});\n+    TestBed.configureTestingModule({declarations: [App, DynamicComponent]});\n     const fixture = TestBed.createComponent(App);\n     fixture.detectChanges();\n     fixture.componentInstance.create();"
        },
        {
            "sha": "3c12d00e7f27b3f7f3e07799839364220b8b41a4",
            "filename": "packages/core/test/application_ref_spec.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Fapplication_ref_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Fapplication_ref_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fapplication_ref_spec.ts?ref=594bd12d5dba68b6073a4c42f0ccef2c6c8acb50",
            "patch": "@@ -66,7 +66,6 @@ class SomeComponent {\n         providers: [{provide: ErrorHandler, useValue: errorHandler}, options.providers || []],\n         imports: [platformModule],\n         declarations: [options.component || SomeComponent],\n-        entryComponents: [options.component || SomeComponent],\n         bootstrap: options.bootstrap || []\n       })\n       class MyModule {\n@@ -92,7 +91,6 @@ class SomeComponent {\n              @NgModule({\n                providers: [{provide: helloToken, useValue: 'component'}],\n                declarations: [SomeComponent],\n-               entryComponents: [SomeComponent],\n              })\n              class SomeModule {\n              }\n@@ -123,7 +121,6 @@ class SomeComponent {\n              @NgModule({\n                providers: [{provide: helloToken, useValue: 'component'}],\n                declarations: [SomeComponent],\n-               entryComponents: [SomeComponent],\n              })\n              class SomeModule {\n              }"
        },
        {
            "sha": "657bede656e2e10c335e2bbae27e6bc069649d0a",
            "filename": "packages/core/test/linker/integration_spec.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 27,
            "changes": 32,
            "blob_url": "https://github.com/angular/angular/blob/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Flinker%2Fintegration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Flinker%2Fintegration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Flinker%2Fintegration_spec.ts?ref=594bd12d5dba68b6073a4c42f0ccef2c6c8acb50",
            "patch": "@@ -976,17 +976,8 @@ describe('integration tests', function() {\n \n     describe('ViewContainerRef', () => {\n       beforeEach(() => {\n-        // we need a module to declarate ChildCompUsingService as an entryComponent otherwise the\n-        // factory doesn't get created\n-        @NgModule({\n-          declarations: [MyComp, DynamicViewport, ChildCompUsingService],\n-          entryComponents: [ChildCompUsingService],\n-          schemas: [NO_ERRORS_SCHEMA],\n-        })\n-        class MyModule {\n-        }\n-\n-        TestBed.configureTestingModule({imports: [MyModule]});\n+        TestBed.configureTestingModule(\n+            {declarations: [MyComp, DynamicViewport, ChildCompUsingService]});\n         TestBed.overrideComponent(\n             MyComp, {add: {template: '<div><dynamic-vp #dynamic></dynamic-vp></div>'}});\n       });\n@@ -1069,7 +1060,6 @@ describe('integration tests', function() {\n \n           @NgModule({\n             declarations: [RootComp, MyComp],\n-            entryComponents: [MyComp],\n             providers: [{provide: 'someToken', useValue: 'someRootValue'}],\n           })\n           class RootModule {\n@@ -1115,7 +1105,6 @@ describe('integration tests', function() {\n \n           @NgModule({\n             declarations: [MyComp],\n-            entryComponents: [MyComp],\n             providers: [{provide: 'someToken', useValue: 'someValue'}],\n           })\n           class MyModule {\n@@ -1401,7 +1390,7 @@ describe('integration tests', function() {\n       class NoSelectorComponent {\n       }\n \n-      @Component({selector: 'some-comp', template: '', entryComponents: [NoSelectorComponent]})\n+      @Component({selector: 'some-comp', template: ''})\n       class SomeComponent {\n         constructor(componentFactoryResolver: ComponentFactoryResolver) {\n           // grab its own component factory\n@@ -1484,13 +1473,6 @@ describe('integration tests', function() {\n       itemContent!: string;\n     }\n \n-    @NgModule({\n-      declarations: [DynamicMenuItem],\n-      entryComponents: [DynamicMenuItem],\n-    })\n-    class DynamicMenuItemModule {\n-    }\n-\n     @Component({selector: 'test', template: `<ng-container #menuItemsContainer></ng-container>`})\n     class TestCmp {\n       constructor(public cfr: ComponentFactoryResolver) {}\n@@ -1499,10 +1481,7 @@ describe('integration tests', function() {\n     }\n \n     beforeEach(() => {\n-      TestBed.configureTestingModule({\n-        declarations: [TestCmp],\n-        imports: [DynamicMenuItemModule],\n-      });\n+      TestBed.configureTestingModule({declarations: [TestCmp, DynamicMenuItem]});\n     });\n \n     const createElWithContent = (content: string, tagName = 'span') => {\n@@ -1567,8 +1546,7 @@ describe('integration tests', function() {\n              DynamicMenuItem,\n              `<ng-template #templateRef><ng-content select=\"span\"></ng-content>{{itemContent}}<ng-content select=\"button\"></ng-content></ng-template>`);\n \n-         TestBed.configureTestingModule(\n-             {declarations: [TestCmp], imports: [DynamicMenuItemModule]});\n+         TestBed.configureTestingModule({declarations: [TestCmp, DynamicMenuItem]});\n \n          const fixture = TestBed.createComponent(TestCmp);\n          const menuItemsContainer = fixture.componentInstance.menuItemsContainer;"
        },
        {
            "sha": "edd08eb609db04af882e7b84c74306eea5895f50",
            "filename": "packages/core/test/linker/ng_module_integration_spec.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 37,
            "changes": 45,
            "blob_url": "https://github.com/angular/angular/blob/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Flinker%2Fng_module_integration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Flinker%2Fng_module_integration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Flinker%2Fng_module_integration_spec.ts?ref=594bd12d5dba68b6073a4c42f0ccef2c6c8acb50",
            "patch": "@@ -246,11 +246,6 @@ describe('NgModule', () => {\n          @NgModule({\n            schemas: [CUSTOM_ELEMENTS_SCHEMA],\n            declarations: [ComponentUsingInvalidProperty],\n-\n-           // Note that we need to add the component to `entryComponents`, because of the\n-           // `createComp` call below. In Ivy the property validation happens during the\n-           //  update phase so we need to create the component, in order for it to run.\n-           entryComponents: [ComponentUsingInvalidProperty]\n          })\n          class SomeModule {\n          }\n@@ -462,10 +457,7 @@ describe('NgModule', () => {\n   describe('directives and pipes', () => {\n     describe('declarations', () => {\n       it('should be supported in root modules', () => {\n-        @NgModule({\n-          declarations: [CompUsingModuleDirectiveAndPipe, SomeDirective, SomePipe],\n-          entryComponents: [CompUsingModuleDirectiveAndPipe]\n-        })\n+        @NgModule({declarations: [CompUsingModuleDirectiveAndPipe, SomeDirective, SomePipe]})\n         class SomeModule {\n         }\n \n@@ -477,10 +469,7 @@ describe('NgModule', () => {\n       });\n \n       it('should be supported in imported modules', () => {\n-        @NgModule({\n-          declarations: [CompUsingModuleDirectiveAndPipe, SomeDirective, SomePipe],\n-          entryComponents: [CompUsingModuleDirectiveAndPipe]\n-        })\n+        @NgModule({declarations: [CompUsingModuleDirectiveAndPipe, SomeDirective, SomePipe]})\n         class SomeImportedModule {\n         }\n \n@@ -507,8 +496,7 @@ describe('NgModule', () => {\n           declarations: [\n             ParentCompUsingModuleDirectiveAndPipe, CompUsingModuleDirectiveAndPipe, SomeDirective,\n             SomePipe\n-          ],\n-          entryComponents: [ParentCompUsingModuleDirectiveAndPipe]\n+          ]\n         })\n         class SomeModule {\n         }\n@@ -526,11 +514,7 @@ describe('NgModule', () => {\n         class SomeImportedModule {\n         }\n \n-        @NgModule({\n-          declarations: [CompUsingModuleDirectiveAndPipe],\n-          imports: [SomeImportedModule],\n-          entryComponents: [CompUsingModuleDirectiveAndPipe]\n-        })\n+        @NgModule({declarations: [CompUsingModuleDirectiveAndPipe], imports: [SomeImportedModule]})\n         class SomeModule {\n         }\n \n@@ -549,8 +533,7 @@ describe('NgModule', () => {\n \n            @NgModule({\n              declarations: [CompUsingModuleDirectiveAndPipe],\n-             imports: [{ngModule: SomeImportedModule}],\n-             entryComponents: [CompUsingModuleDirectiveAndPipe]\n+             imports: [{ngModule: SomeImportedModule}]\n            })\n            class SomeModule {\n            }\n@@ -571,11 +554,7 @@ describe('NgModule', () => {\n         class SomeImportedModule {\n         }\n \n-        @NgModule({\n-          declarations: [CompUsingModuleDirectiveAndPipe],\n-          imports: [SomeImportedModule],\n-          entryComponents: [CompUsingModuleDirectiveAndPipe]\n-        })\n+        @NgModule({declarations: [CompUsingModuleDirectiveAndPipe], imports: [SomeImportedModule]})\n         class SomeModule {\n         }\n \n@@ -594,11 +573,7 @@ describe('NgModule', () => {\n         class SomeImportedModule {\n         }\n \n-        @NgModule({\n-          declarations: [CompUsingModuleDirectiveAndPipe],\n-          imports: [SomeImportedModule],\n-          entryComponents: [CompUsingModuleDirectiveAndPipe]\n-        })\n+        @NgModule({declarations: [CompUsingModuleDirectiveAndPipe], imports: [SomeImportedModule]})\n         class SomeModule {\n         }\n \n@@ -615,11 +590,7 @@ describe('NgModule', () => {\n         class SomeImportedModule {\n         }\n \n-        @NgModule({\n-          declarations: [CompUsingModuleDirectiveAndPipe],\n-          imports: [SomeImportedModule],\n-          entryComponents: [CompUsingModuleDirectiveAndPipe]\n-        })\n+        @NgModule({declarations: [CompUsingModuleDirectiveAndPipe], imports: [SomeImportedModule]})\n         class SomeModule {\n         }\n "
        },
        {
            "sha": "dd1948f1f72330d1f6c051658a1893a76738d4a0",
            "filename": "packages/core/test/linker/projection_integration_spec.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 17,
            "changes": 22,
            "blob_url": "https://github.com/angular/angular/blob/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Flinker%2Fprojection_integration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Flinker%2Fprojection_integration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Flinker%2Fprojection_integration_spec.ts?ref=594bd12d5dba68b6073a4c42f0ccef2c6c8acb50",
            "patch": "@@ -117,15 +117,7 @@ describe('projection', () => {\n     class MultipleContentTagsComponent {\n     }\n \n-    @NgModule({\n-      declarations: [MultipleContentTagsComponent],\n-      entryComponents: [MultipleContentTagsComponent],\n-      schemas: [NO_ERRORS_SCHEMA],\n-    })\n-    class MyModule {\n-    }\n-\n-    TestBed.configureTestingModule({imports: [MyModule]});\n+    TestBed.configureTestingModule({declarations: [MultipleContentTagsComponent]});\n     const injector: Injector = TestBed.inject(Injector);\n \n     const componentFactoryResolver: ComponentFactoryResolver =\n@@ -710,18 +702,14 @@ describe('projection', () => {\n       }\n     }\n \n-    @NgModule({\n-      declarations: [WithContentCmpt, InsertTplRef, DelayedInsertTplRef, ReProjectCmpt],\n-      entryComponents: [WithContentCmpt]\n-    })\n-    class TestModule {\n-    }\n-\n     let fixture: ComponentFixture<TestComponent>;\n \n     function createCmptInstance(\n         tpl: string, projectableNodes: any[][]): ComponentRef<WithContentCmpt> {\n-      TestBed.configureTestingModule({declarations: [TestComponent], imports: [TestModule]});\n+      TestBed.configureTestingModule({\n+        declarations:\n+            [WithContentCmpt, InsertTplRef, DelayedInsertTplRef, ReProjectCmpt, TestComponent],\n+      });\n       TestBed.overrideTemplate(WithContentCmpt, tpl);\n \n       fixture = TestBed.createComponent(TestComponent);"
        },
        {
            "sha": "0e7822b135351f92069c5ba4b1cfd7e76b936209",
            "filename": "packages/core/test/linker/regression_integration_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 6,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Flinker%2Fregression_integration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Flinker%2Fregression_integration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Flinker%2Fregression_integration_spec.ts?ref=594bd12d5dba68b6073a4c42f0ccef2c6c8acb50",
            "patch": "@@ -347,12 +347,7 @@ describe('regressions', () => {\n     class App {\n     }\n \n-    @NgModule({declarations: [App], entryComponents: [App]})\n-    class MyModule {\n-    }\n-\n-    const modRef = TestBed.configureTestingModule({imports: [MyModule]}).get(NgModuleRef) as\n-        NgModuleRef<MyModule>;\n+    const modRef = TestBed.configureTestingModule({declarations: [App]}).inject(NgModuleRef);\n     const compRef =\n         modRef.componentFactoryResolver.resolveComponentFactory(App).create(Injector.NULL);\n "
        },
        {
            "sha": "d5d828d1605392f028f368bfe1f0fa339d81f3af",
            "filename": "packages/core/test/linker/view_injector_integration_spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 17,
            "changes": 20,
            "blob_url": "https://github.com/angular/angular/blob/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Flinker%2Fview_injector_integration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/594bd12d5dba68b6073a4c42f0ccef2c6c8acb50/packages%2Fcore%2Ftest%2Flinker%2Fview_injector_integration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Flinker%2Fview_injector_integration_spec.ts?ref=594bd12d5dba68b6073a4c42f0ccef2c6c8acb50",
            "patch": "@@ -854,20 +854,13 @@ describe('View injector', () => {\n         constructor(public vcr: ViewContainerRef) {}\n       }\n \n-      @NgModule({\n-        declarations: [TestComp],\n-        entryComponents: [TestComp],\n-      })\n-      class TestModule {\n-      }\n-\n       const testInjector = <Injector>{\n         get: (token: any, notFoundValue: any) =>\n             token === 'someToken' ? 'someNewValue' : notFoundValue\n       };\n \n-      const compFactory = TestBed.configureTestingModule({imports: [TestModule]})\n-                              .get(ComponentFactoryResolver)\n+      const compFactory = TestBed.configureTestingModule({declarations: [TestComp]})\n+                              .inject(ComponentFactoryResolver)\n                               .resolveComponentFactory(TestComp);\n       const component = compFactory.create(testInjector);\n       expect(component.instance.vcr.parentInjector.get('someToken')).toBe('someNewValue');\n@@ -946,18 +939,12 @@ describe('View injector', () => {\n     class SomeComponent {\n     }\n \n-    @NgModule(\n-        {declarations: [SomeComponent], exports: [SomeComponent], entryComponents: [SomeComponent]})\n-    class SomeModule {\n-    }\n-\n     @Component({selector: 'listener-and-on-destroy', template: ''})\n     class ComponentThatLoadsAnotherComponentThenMovesIt {\n       constructor(\n           private viewContainerRef: ViewContainerRef,\n           private componentFactoryResolver: ComponentFactoryResolver) {}\n \n-\n       ngOnInit() {\n         // Dynamically load some component.\n         const componentFactory =\n@@ -978,8 +965,7 @@ describe('View injector', () => {\n \n     it('should not error when destroying a component that has been moved in the DOM', () => {\n       TestBed.configureTestingModule({\n-        imports: [SomeModule],\n-        declarations: [ComponentThatLoadsAnotherComponentThenMovesIt],\n+        declarations: [ComponentThatLoadsAnotherComponentThenMovesIt, SomeComponent],\n       });\n       const fixture = createComponentFixture(`<listener-and-on-destroy></listener-and-on-destroy>`);\n       fixture.detectChanges();"
        }
    ],
    "stats": {
        "total": 471,
        "additions": 63,
        "deletions": 408
    }
}