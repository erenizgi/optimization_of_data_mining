{
    "author": "josephperrott",
    "message": "fix(dev-infra): build with stamping for release builds (#42354)\n\n`ng-dev release build` should always build with version stamping rather than\nsnapshot stamping.\n\nPR Close #42354",
    "sha": "acfa0647b7f04408c37654e1c8ee3675d620b849",
    "files": [
        {
            "sha": "2846b3f33c47f9c84e2492e0434dac9cf58aadf0",
            "filename": "dev-infra/ng-dev.js",
            "status": "modified",
            "additions": 2,
            "deletions": 8,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/acfa0647b7f04408c37654e1c8ee3675d620b849/dev-infra%2Fng-dev.js",
            "raw_url": "https://github.com/angular/angular/raw/acfa0647b7f04408c37654e1c8ee3675d620b849/dev-infra%2Fng-dev.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fng-dev.js?ref=acfa0647b7f04408c37654e1c8ee3675d620b849",
            "patch": "@@ -5180,23 +5180,17 @@ function buildReleaseOutput(stampForRelease = false) {\n  */\n /** Yargs command builder for configuring the `ng-dev release build` command. */\n function builder$7(argv) {\n-    return argv\n-        .option('json', {\n+    return argv.option('json', {\n         type: 'boolean',\n         description: 'Whether the built packages should be printed to stdout as JSON.',\n         default: false,\n-    })\n-        .option('stampForRelease', {\n-        type: 'boolean',\n-        description: 'Whether the built packages should be stamped for release.',\n-        default: false,\n     });\n }\n /** Yargs command handler for building a release. */\n function handler$7(args) {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         const { npmPackages } = getReleaseConfig();\n-        let builtPackages = yield buildReleaseOutput(args.stampForRelease);\n+        let builtPackages = yield buildReleaseOutput(true);\n         // If package building failed, print an error and exit with an error code.\n         if (builtPackages === null) {\n             error(red(`  âœ˜   Could not build release output. Please check output above.`));"
        },
        {
            "sha": "6125dad1a9eb340ebe5126f55d580b95142c76ab",
            "filename": "dev-infra/release/build/cli.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 13,
            "changes": 19,
            "blob_url": "https://github.com/angular/angular/blob/acfa0647b7f04408c37654e1c8ee3675d620b849/dev-infra%2Frelease%2Fbuild%2Fcli.ts",
            "raw_url": "https://github.com/angular/angular/raw/acfa0647b7f04408c37654e1c8ee3675d620b849/dev-infra%2Frelease%2Fbuild%2Fcli.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fbuild%2Fcli.ts?ref=acfa0647b7f04408c37654e1c8ee3675d620b849",
            "patch": "@@ -17,28 +17,21 @@ import {buildReleaseOutput} from './index';\n /** Command line options for building a release. */\n export interface ReleaseBuildOptions {\n   json: boolean;\n-  stampForRelease: boolean;\n }\n \n /** Yargs command builder for configuring the `ng-dev release build` command. */\n function builder(argv: Argv): Argv<ReleaseBuildOptions> {\n-  return argv\n-      .option('json', {\n-        type: 'boolean',\n-        description: 'Whether the built packages should be printed to stdout as JSON.',\n-        default: false,\n-      })\n-      .option('stampForRelease', {\n-        type: 'boolean',\n-        description: 'Whether the built packages should be stamped for release.',\n-        default: false,\n-      });\n+  return argv.option('json', {\n+    type: 'boolean',\n+    description: 'Whether the built packages should be printed to stdout as JSON.',\n+    default: false,\n+  });\n }\n \n /** Yargs command handler for building a release. */\n async function handler(args: Arguments<ReleaseBuildOptions>) {\n   const {npmPackages} = getReleaseConfig();\n-  let builtPackages = await buildReleaseOutput(args.stampForRelease);\n+  let builtPackages = await buildReleaseOutput(true);\n \n   // If package building failed, print an error and exit with an error code.\n   if (builtPackages === null) {"
        }
    ],
    "stats": {
        "total": 29,
        "additions": 8,
        "deletions": 21
    }
}