{
    "author": "AndrewKushnir",
    "message": "feat(core): add support for Types in ViewContainerRef.createComponent (#43022)\n\nWith Ivy it's possible to create a `ComponentFactory` instance based on the generated Component def, thus the `ViewContainerRef.createComponent` can accept a Component instance and create a factory inside, rather than requiring additional complexity of creating a ComponentFactory outside (by invoking `ComponentFactoryResolver`).\n\nThis should simplify the API that is used for creating components dynamically.\n\nDEPRECATION:\n\nAngular no longer requires component factories to dynamically create components. The factory-based signature of the `ViewContainerRef.createComponent` function is deprecated in favor of a different signature that allows passing component classes instead.\n\nPR Close #43022",
    "sha": "7dccbdd27be13eb7287f535f482b1de2c13fca74",
    "files": [
        {
            "sha": "f5a153d7556835603632d66287756de745195720",
            "filename": "aio/content/guide/deprecations.md",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/7dccbdd27be13eb7287f535f482b1de2c13fca74/aio%2Fcontent%2Fguide%2Fdeprecations.md",
            "raw_url": "https://github.com/angular/angular/raw/7dccbdd27be13eb7287f535f482b1de2c13fca74/aio%2Fcontent%2Fguide%2Fdeprecations.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fdeprecations.md?ref=7dccbdd27be13eb7287f535f482b1de2c13fca74",
            "patch": "@@ -54,6 +54,7 @@ v12 - v15\n | `@angular/core`         | [`defineInjectable`](#core)                                                                   | <!--v8--> v11         |\n | `@angular/core`         | [`entryComponents`](api/core/NgModule#entryComponents)                                        | <!--v9--> v11         |\n | `@angular/core`         | [`ANALYZE_FOR_ENTRY_COMPONENTS`](api/core/ANALYZE_FOR_ENTRY_COMPONENTS)                       | <!--v9--> v11         |\n+| `@angular/core`         | [Factory-based signature of `ViewContainerRef.createComponent`](api/core/ViewContainerRef#createComponent)                       | <!--v13--> v15         |\n | `@angular/router`       | [`loadChildren` string syntax](#loadChildren)                                                 | <!--v9--> v11         |\n | `@angular/core/testing` | [`TestBed.get`](#testing)                                                                     | <!--v9--> v12         |\n | `@angular/core/testing` | [`async`](#testing)                                                                           | <!--v9--> v12         |\n@@ -108,6 +109,7 @@ This section contains a complete list all of the currently-deprecated APIs, with\n | `ViewChildren.emitDistinctChangesOnly` / `ContentChildren.emitDistinctChangesOnly` | none (was part of [issue #40091](https://github.com/angular/angular/issues/40091)) |                       | This is a temporary flag introduced as part of bugfix of [issue #40091](https://github.com/angular/angular/issues/40091) and will be removed.                                                                                            |\n | Factory-based signature of [`ApplicationRef.bootstrap`](api/core/ApplicationRef#bootstrap)                          | Type-based signature of [`ApplicationRef.bootstrap`](api/core/ApplicationRef#bootstrap)                                                                                 | v13                    | With Ivy, there is no need to resolve Component factory and Component Type can be provided directly.                                                                                                                                                                                                                  |\n | [`PlatformRef.bootstrapModuleFactory`](api/core/PlatformRef#bootstrapModuleFactory)                          | [`PlatformRef.bootstrapModule`](api/core/PlatformRef#bootstrapModule)                                                                                 | v13                    | With Ivy, there is no need to resolve NgModule factory and NgModule Type can be provided directly.                                                                                                                                                                                                                  |\n+| [Factory-based signature of `ViewContainerRef.createComponent`](api/core/ViewContainerRef#createComponent)                                                  | [Type-based signature of `ViewContainerRef.createComponent`](api/core/ViewContainerRef#createComponent)                                    | v13                   | Angular no longer requires component factories to dynamically create components. Use different signature of the `createComponent` method, which allows passing Component class directly. |\n \n {@a testing}\n "
        },
        {
            "sha": "7d093f02940e8be5af7f579614efad78b023667b",
            "filename": "goldens/circular-deps/packages.json",
            "status": "modified",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/angular/angular/blob/7dccbdd27be13eb7287f535f482b1de2c13fca74/goldens%2Fcircular-deps%2Fpackages.json",
            "raw_url": "https://github.com/angular/angular/raw/7dccbdd27be13eb7287f535f482b1de2c13fca74/goldens%2Fcircular-deps%2Fpackages.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fcircular-deps%2Fpackages.json?ref=7dccbdd27be13eb7287f535f482b1de2c13fca74",
            "patch": "@@ -117,6 +117,23 @@\n     \"packages/core/src/linker/template_ref.ts\",\n     \"packages/core/src/render3/instructions/shared.ts\"\n   ],\n+  [\n+    \"packages/core/src/error_handler.ts\",\n+    \"packages/core/src/errors.ts\",\n+    \"packages/core/src/view/types.ts\",\n+    \"packages/core/src/linker/view_container_ref.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/render3/component.ts\",\n+    \"packages/core/src/render3/instructions/shared.ts\"\n+  ],\n+  [\n+    \"packages/core/src/error_handler.ts\",\n+    \"packages/core/src/errors.ts\",\n+    \"packages/core/src/view/types.ts\",\n+    \"packages/core/src/linker/view_container_ref.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/render3/instructions/shared.ts\"\n+  ],\n   [\n     \"packages/core/src/error_handler.ts\",\n     \"packages/core/src/errors.ts\","
        },
        {
            "sha": "45946e9b1b18ff7e3d3f70d8e564525b3b814458",
            "filename": "goldens/public-api/core/core.md",
            "status": "modified",
            "additions": 8,
            "deletions": 1,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/7dccbdd27be13eb7287f535f482b1de2c13fca74/goldens%2Fpublic-api%2Fcore%2Fcore.md",
            "raw_url": "https://github.com/angular/angular/raw/7dccbdd27be13eb7287f535f482b1de2c13fca74/goldens%2Fpublic-api%2Fcore%2Fcore.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fcore%2Fcore.md?ref=7dccbdd27be13eb7287f535f482b1de2c13fca74",
            "patch": "@@ -1358,7 +1358,14 @@ export interface ViewChildrenDecorator {\n // @public\n export abstract class ViewContainerRef {\n     abstract clear(): void;\n-    abstract createComponent<C>(componentFactory: ComponentFactory<C>, index?: number, injector?: Injector, projectableNodes?: any[][], ngModule?: NgModuleRef<any>): ComponentRef<C>;\n+    abstract createComponent<C>(componentType: Type<C>, options?: {\n+        index?: number;\n+        injector?: Injector;\n+        ngModuleRef?: NgModuleRef<unknown>;\n+        projectableNodes?: Node[][];\n+    }): ComponentRef<C>;\n+    // @deprecated\n+    abstract createComponent<C>(componentFactory: ComponentFactory<C>, index?: number, injector?: Injector, projectableNodes?: any[][], ngModuleRef?: NgModuleRef<any>): ComponentRef<C>;\n     abstract createEmbeddedView<C>(templateRef: TemplateRef<C>, context?: C, index?: number): EmbeddedViewRef<C>;\n     abstract detach(index?: number): ViewRef | null;\n     abstract get element(): ElementRef;"
        },
        {
            "sha": "de7f63cc86196f605ed1f26cab6f8558bdc4d39f",
            "filename": "goldens/size-tracking/aio-payloads.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/7dccbdd27be13eb7287f535f482b1de2c13fca74/goldens%2Fsize-tracking%2Faio-payloads.json",
            "raw_url": "https://github.com/angular/angular/raw/7dccbdd27be13eb7287f535f482b1de2c13fca74/goldens%2Fsize-tracking%2Faio-payloads.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fsize-tracking%2Faio-payloads.json?ref=7dccbdd27be13eb7287f535f482b1de2c13fca74",
            "patch": "@@ -15,7 +15,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime-es2017\": 4841,\n-        \"main-es2017\": 462493,\n+        \"main-es2017\": 463023,\n         \"polyfills-es2017\": 55373,\n         \"styles\": 69772,\n         \"light-theme\": 79025,"
        },
        {
            "sha": "4aef20588c7eb97509428cee562dfe8711cec460",
            "filename": "packages/core/src/core_private_export.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Fsrc%2Fcore_private_export.ts",
            "raw_url": "https://github.com/angular/angular/raw/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Fsrc%2Fcore_private_export.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fcore_private_export.ts?ref=7dccbdd27be13eb7287f535f482b1de2c13fca74",
            "patch": "@@ -33,4 +33,4 @@ export {global as ɵglobal} from './util/global';\n export {isObservable as ɵisObservable, isPromise as ɵisPromise, isSubscribable as ɵisSubscribable} from './util/lang';\n export {stringify as ɵstringify} from './util/stringify';\n export {clearOverrides as ɵclearOverrides, initServicesIfNeeded as ɵinitServicesIfNeeded, overrideComponentView as ɵoverrideComponentView, overrideProvider as ɵoverrideProvider} from './view/index';\n-export {NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR as ɵNOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR} from './view/provider';\n+export {NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR as ɵNOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR} from './view/provider_flags';"
        },
        {
            "sha": "223d2fddf63177c1021e97e184afd083672d6384",
            "filename": "packages/core/src/linker/view_container_ref.ts",
            "status": "modified",
            "additions": 105,
            "deletions": 6,
            "changes": 111,
            "blob_url": "https://github.com/angular/angular/blob/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Fsrc%2Flinker%2Fview_container_ref.ts",
            "raw_url": "https://github.com/angular/angular/raw/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Fsrc%2Flinker%2Fview_container_ref.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Flinker%2Fview_container_ref.ts?ref=7dccbdd27be13eb7287f535f482b1de2c13fca74",
            "patch": "@@ -7,7 +7,10 @@\n  */\n \n import {Injector} from '../di/injector';\n+import {isType, Type} from '../interface/type';\n import {assertNodeInjector} from '../render3/assert';\n+import {ComponentFactory as R3ComponentFactory} from '../render3/component_ref';\n+import {getComponentDef} from '../render3/definition';\n import {getParentInjectorLocation, NodeInjector} from '../render3/di';\n import {addToViewTree, createLContainer} from '../render3/instructions/shared';\n import {CONTAINER_HEADER_OFFSET, LContainer, NATIVE, VIEW_REFS} from '../render3/interfaces/container';\n@@ -23,8 +26,9 @@ import {getParentInjectorIndex, getParentInjectorView, hasParentInjector} from '\n import {getNativeByTNode, unwrapRNode, viewAttachedToContainer} from '../render3/util/view_utils';\n import {ViewRef as R3ViewRef} from '../render3/view_ref';\n import {addToArray, removeFromArray} from '../util/array_utils';\n-import {assertEqual, assertGreaterThan, assertLessThan} from '../util/assert';\n+import {assertDefined, assertEqual, assertGreaterThan, assertLessThan} from '../util/assert';\n import {noop} from '../util/noop';\n+\n import {ComponentFactory, ComponentRef} from './component_factory';\n import {createElementRef, ElementRef} from './element_ref';\n import {NgModuleRef} from './ng_module_factory';\n@@ -111,19 +115,47 @@ export abstract class ViewContainerRef {\n   /**\n    * Instantiates a single component and inserts its host view into this container.\n    *\n-   * @param componentFactory The factory to use.\n+   * @param componentType Component Type to use.\n+   * @param options An object that contains extra parameters:\n+   *  * index: the index at which to insert the new component's host view into this container.\n+   *           If not specified, appends the new view as the last entry.\n+   *  * injector: the injector to use as the parent for the new component.\n+   *  * ngModuleRef: an NgModuleRef of the component's NgModule, you should almost always provide\n+   *                 this to ensure that all expected providers are available for the component\n+   *                 instantiation.\n+   *  * projectableNodes: list of DOM nodes that should be projected through\n+   *                      [`<ng-content>`](api/core/ng-content) of the new component instance.\n+   *\n+   * @returns The new `ComponentRef` which contains the component instance and the host view.\n+   */\n+  abstract createComponent<C>(componentType: Type<C>, options?: {\n+    index?: number,\n+    injector?: Injector,\n+    ngModuleRef?: NgModuleRef<unknown>,\n+    projectableNodes?: Node[][],\n+  }): ComponentRef<C>;\n+\n+  /**\n+   * Instantiates a single component and inserts its host view into this container.\n+   *\n+   * @param componentFactory Component factory to use.\n    * @param index The index at which to insert the new component's host view into this container.\n    * If not specified, appends the new view as the last entry.\n    * @param injector The injector to use as the parent for the new component.\n-   * @param projectableNodes\n-   * @param ngModule\n+   * @param projectableNodes List of DOM nodes that should be projected through\n+   *     [`<ng-content>`](api/core/ng-content) of the new component instance.\n+   * @param ngModuleRef An instance of the NgModuleRef that represent an NgModule.\n+   * This information is used to retrieve corresponding NgModule injector.\n    *\n-   * @returns The new component instance, containing the host view.\n+   * @returns The new `ComponentRef` which contains the component instance and the host view.\n    *\n+   * @deprecated Angular no longer requires component factories to dynamically create components.\n+   *     Use different signature of the `createComponent` method, which allows passing\n+   *     Component class directly.\n    */\n   abstract createComponent<C>(\n       componentFactory: ComponentFactory<C>, index?: number, injector?: Injector,\n-      projectableNodes?: any[][], ngModule?: NgModuleRef<any>): ComponentRef<C>;\n+      projectableNodes?: any[][], ngModuleRef?: NgModuleRef<any>): ComponentRef<C>;\n \n   /**\n    * Inserts a view into this container.\n@@ -239,10 +271,77 @@ const R3ViewContainerRef = class ViewContainerRef extends VE_ViewContainerRef {\n     return viewRef;\n   }\n \n+  override createComponent<C>(componentType: Type<C>, options?: {\n+    index?: number,\n+    injector?: Injector,\n+    projectableNodes?: Node[][],\n+    ngModuleRef?: NgModuleRef<unknown>,\n+  }): ComponentRef<C>;\n+  /**\n+   * @deprecated Angular no longer requires component factories to dynamically create components.\n+   *     Use different signature of the `createComponent` method, which allows passing\n+   *     Component class directly.\n+   */\n   override createComponent<C>(\n       componentFactory: ComponentFactory<C>, index?: number|undefined,\n       injector?: Injector|undefined, projectableNodes?: any[][]|undefined,\n+      ngModuleRef?: NgModuleRef<any>|undefined): ComponentRef<C>;\n+  override createComponent<C>(\n+      componentFactoryOrType: ComponentFactory<C>|Type<C>, indexOrOptions?: number|undefined|{\n+        index?: number,\n+        injector?: Injector,\n+        ngModuleRef?: NgModuleRef<unknown>,\n+        projectableNodes?: Node[][],\n+      },\n+      injector?: Injector|undefined, projectableNodes?: any[][]|undefined,\n       ngModuleRef?: NgModuleRef<any>|undefined): ComponentRef<C> {\n+    const isComponentFactory = componentFactoryOrType && !isType(componentFactoryOrType);\n+    let index: number|undefined;\n+\n+    // This function supports 2 signatures and we need to handle options correctly for both:\n+    //   1. When first argument is a Component type. This signature also requires extra\n+    //      options to be provided as as object (more ergonomic option).\n+    //   2. First argument is a Component factory. In this case extra options are represented as\n+    //      positional arguments. This signature is less ergonomic and will be deprecated.\n+    if (isComponentFactory) {\n+      if (ngDevMode) {\n+        assertEqual(\n+            typeof indexOrOptions !== 'object', true,\n+            'It looks like Component factory was provided as the first argument ' +\n+                'and an options object as the second argument. This combination of arguments ' +\n+                'is incompatible. You can either change the first argument to provide Component ' +\n+                'type or change the second argument to be a number (representing an index at ' +\n+                'which to insert the new component\\'s host view into this container)');\n+      }\n+      index = indexOrOptions as number | undefined;\n+    } else {\n+      if (ngDevMode) {\n+        assertDefined(\n+            getComponentDef(componentFactoryOrType),\n+            `Provided Component class doesn't contain Component definition. ` +\n+                `Please check whether provided class has @Component decorator.`);\n+        assertEqual(\n+            typeof indexOrOptions !== 'number', true,\n+            'It looks like Component type was provided as the first argument ' +\n+                'and a number (representing an index at which to insert the new component\\'s ' +\n+                'host view into this container as the second argument. This combination of arguments ' +\n+                'is incompatible. Please use an object as the second argument instead.');\n+      }\n+      const options = (indexOrOptions || {}) as {\n+        index?: number,\n+        injector?: Injector,\n+        ngModuleRef?: NgModuleRef<unknown>,\n+        projectableNodes?: Node[][],\n+      };\n+      index = options.index;\n+      injector = options.injector;\n+      projectableNodes = options.projectableNodes;\n+      ngModuleRef = options.ngModuleRef;\n+    }\n+\n+    const componentFactory: ComponentFactory<C> = isComponentFactory ?\n+        componentFactoryOrType as ComponentFactory<C>:\n+        new R3ComponentFactory(getComponentDef(componentFactoryOrType)!);\n     const contextInjector = injector || this.parentInjector;\n     if (!ngModuleRef && (componentFactory as any).ngModule == null && contextInjector) {\n       // DO NOT REFACTOR. The code here used to have a `value || undefined` expression"
        },
        {
            "sha": "121ef3a847f40e538c1721d59acd63f6a6d33689",
            "filename": "packages/core/src/render3/component_ref.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Fsrc%2Frender3%2Fcomponent_ref.ts",
            "raw_url": "https://github.com/angular/angular/raw/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Fsrc%2Frender3%2Fcomponent_ref.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fcomponent_ref.ts?ref=7dccbdd27be13eb7287f535f482b1de2c13fca74",
            "patch": "@@ -19,7 +19,7 @@ import {NgModuleRef as viewEngine_NgModuleRef} from '../linker/ng_module_factory\n import {RendererFactory2} from '../render/api';\n import {Sanitizer} from '../sanitization/sanitizer';\n import {VERSION} from '../version';\n-import {NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR} from '../view/provider';\n+import {NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR} from '../view/provider_flags';\n import {assertComponentType} from './assert';\n import {createRootComponent, createRootComponentView, createRootContext, LifecycleHooksFeature} from './component';\n import {getComponentDef} from './definition';"
        },
        {
            "sha": "3ad181e1e0dd04effe07dcb5cbf2597d1387a575",
            "filename": "packages/core/src/render3/view_engine_compatibility_prebound.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Fsrc%2Frender3%2Fview_engine_compatibility_prebound.ts",
            "raw_url": "https://github.com/angular/angular/raw/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Fsrc%2Frender3%2Fview_engine_compatibility_prebound.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fview_engine_compatibility_prebound.ts?ref=7dccbdd27be13eb7287f535f482b1de2c13fca74",
            "patch": "@@ -7,10 +7,7 @@\n  */\n \n \n-import {ChangeDetectorRef, injectChangeDetectorRef} from '../change_detection/change_detector_ref';\n-import {InjectFlags} from '../di/interface/injector';\n import {createTemplateRef, TemplateRef} from '../linker/template_ref';\n-import {throwProviderNotFoundError} from './errors_di';\n import {TNode} from './interfaces/node';\n import {LView} from './interfaces/view';\n "
        },
        {
            "sha": "2a63193cdb81378d33a706a1fbf3694742e39c4f",
            "filename": "packages/core/src/view/provider.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 19,
            "changes": 20,
            "blob_url": "https://github.com/angular/angular/blob/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Fsrc%2Fview%2Fprovider.ts",
            "raw_url": "https://github.com/angular/angular/raw/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Fsrc%2Fview%2Fprovider.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fview%2Fprovider.ts?ref=7dccbdd27be13eb7287f535f482b1de2c13fca74",
            "patch": "@@ -15,6 +15,7 @@ import {Renderer2} from '../render/api';\n import {isObservable} from '../util/lang';\n import {stringify} from '../util/stringify';\n \n+import {NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR} from './provider_flags';\n import {createChangeDetectorRef, createInjector} from './refs';\n import {asElementData, asProviderData, BindingDef, BindingFlags, DepDef, DepFlags, NodeDef, NodeFlags, OutputDef, OutputType, ProviderData, QueryValueType, Services, shouldCallLifecycleInitHook, ViewData, ViewFlags, ViewState} from './types';\n import {calcBindingFlags, checkBinding, dispatchEvent, isComponentView, splitDepsDsl, splitMatchedQueriesDsl, tokenKey, viewParentEl} from './util';\n@@ -318,25 +319,6 @@ function callFactory(\n   }\n }\n \n-// This default value is when checking the hierarchy for a token.\n-//\n-// It means both:\n-// - the token is not provided by the current injector,\n-// - only the element injectors should be checked (ie do not check module injectors\n-//\n-//          mod1\n-//         /\n-//       el1   mod2\n-//         \\  /\n-//         el2\n-//\n-// When requesting el2.injector.get(token), we should check in the following order and return the\n-// first found value:\n-// - el2.injector.get(token, default)\n-// - el1.injector.get(token, NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR) -> do not check the module\n-// - mod2.injector.get(token, default)\n-export const NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR = {};\n-\n export function resolveDep(\n     view: ViewData, elDef: NodeDef, allowPrivateServices: boolean, depDef: DepDef,\n     notFoundValue: any = Injector.THROW_IF_NOT_FOUND): any {"
        },
        {
            "sha": "adfc254a6ca68ed44f5c32700b6b9e31cafb0c2b",
            "filename": "packages/core/src/view/provider_flags.ts",
            "status": "added",
            "additions": 26,
            "deletions": 0,
            "changes": 26,
            "blob_url": "https://github.com/angular/angular/blob/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Fsrc%2Fview%2Fprovider_flags.ts",
            "raw_url": "https://github.com/angular/angular/raw/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Fsrc%2Fview%2Fprovider_flags.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fview%2Fprovider_flags.ts?ref=7dccbdd27be13eb7287f535f482b1de2c13fca74",
            "patch": "@@ -0,0 +1,26 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+// This default value is when checking the hierarchy for a token.\n+//\n+// It means both:\n+// - the token is not provided by the current injector,\n+// - only the element injectors should be checked (ie do not check module injectors\n+//\n+//          mod1\n+//         /\n+//       el1   mod2\n+//         \\  /\n+//         el2\n+//\n+// When requesting el2.injector.get(token), we should check in the following order and return the\n+// first found value:\n+// - el2.injector.get(token, default)\n+// - el1.injector.get(token, NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR) -> do not check the module\n+// - mod2.injector.get(token, default)\n+export const NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR = {};"
        },
        {
            "sha": "5d393e1d2a9c00a275ff92666362bb44d8c51f48",
            "filename": "packages/core/src/view/refs.ts",
            "status": "modified",
            "additions": 14,
            "deletions": 2,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Fsrc%2Fview%2Frefs.ts",
            "raw_url": "https://github.com/angular/angular/raw/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Fsrc%2Fview%2Frefs.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fview%2Frefs.ts?ref=7dccbdd27be13eb7287f535f482b1de2c13fca74",
            "patch": "@@ -17,6 +17,7 @@ import {InternalNgModuleRef, NgModuleRef} from '../linker/ng_module_factory';\n import {TemplateRef} from '../linker/template_ref';\n import {ViewContainerRef} from '../linker/view_container_ref';\n import {EmbeddedViewRef, InternalViewRef, ViewRef, ViewRefTracker} from '../linker/view_ref';\n+import {assertEqual} from '../util/assert';\n import {stringify} from '../util/stringify';\n import {VERSION} from '../version';\n \n@@ -191,9 +192,20 @@ class ViewContainerRef_ implements ViewContainerData {\n   }\n \n   createComponent<C>(\n-      componentFactory: ComponentFactory<C>, index?: number, injector?: Injector,\n-      projectableNodes?: any[][], ngModuleRef?: NgModuleRef<any>): ComponentRef<C> {\n+      componentFactoryOrType: ComponentFactory<C>|Type<C>, indexOrOptions?: number|{},\n+      injector?: Injector, projectableNodes?: any[][],\n+      ngModuleRef?: NgModuleRef<any>): ComponentRef<C> {\n+    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n+      assertEqual(\n+          typeof componentFactoryOrType !== 'function', true,\n+          'ViewEngine does not support Type as an argument for \\'componentFactoryOrType\\'');\n+      assertEqual(\n+          typeof indexOrOptions !== 'object', true,\n+          'ViewEngine does not support options as an object provided via second argument');\n+    }\n+    const index = indexOrOptions as number | undefined;\n     const contextInjector = injector || this.parentInjector;\n+    const componentFactory = componentFactoryOrType as ComponentFactory<C>;\n     if (!ngModuleRef && !(componentFactory instanceof ComponentFactoryBoundToModule)) {\n       ngModuleRef = contextInjector.get(NgModuleRef);\n     }"
        },
        {
            "sha": "aeda6f263a590e12b97b2a0f9c30370cab6a30ce",
            "filename": "packages/core/test/acceptance/view_container_ref_spec.ts",
            "status": "modified",
            "additions": 119,
            "deletions": 2,
            "changes": 121,
            "blob_url": "https://github.com/angular/angular/blob/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Ftest%2Facceptance%2Fview_container_ref_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Ftest%2Facceptance%2Fview_container_ref_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fview_container_ref_spec.ts?ref=7dccbdd27be13eb7287f535f482b1de2c13fca74",
            "patch": "@@ -8,10 +8,10 @@\n \n import {CommonModule, DOCUMENT} from '@angular/common';\n import {computeMsgId} from '@angular/compiler';\n-import {Compiler, Component, ComponentFactoryResolver, Directive, DoCheck, ElementRef, EmbeddedViewRef, ErrorHandler, Injector, NgModule, NO_ERRORS_SCHEMA, OnDestroy, OnInit, Pipe, PipeTransform, QueryList, RendererFactory2, RendererType2, Sanitizer, TemplateRef, ViewChild, ViewChildren, ViewContainerRef, ɵsetDocument} from '@angular/core';\n+import {Compiler, Component, ComponentFactoryResolver, Directive, DoCheck, ElementRef, EmbeddedViewRef, ErrorHandler, InjectionToken, Injector, NgModule, NgModuleRef, NO_ERRORS_SCHEMA, OnDestroy, OnInit, Pipe, PipeTransform, QueryList, RendererFactory2, RendererType2, Sanitizer, TemplateRef, ViewChild, ViewChildren, ViewContainerRef, ɵsetDocument} from '@angular/core';\n import {Input} from '@angular/core/src/metadata';\n import {ngDevModeResetPerfCounters} from '@angular/core/src/util/ng_dev_mode';\n-import {TestBed, TestComponentRenderer} from '@angular/core/testing';\n+import {ComponentFixture, TestBed, TestComponentRenderer} from '@angular/core/testing';\n import {clearTranslations, loadTranslations} from '@angular/localize';\n import {By, DomSanitizer, ɵDomRendererFactory2 as DomRendererFactory2} from '@angular/platform-browser';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n@@ -1495,6 +1495,123 @@ describe('ViewContainerRef', () => {\n \n          expect(fixture.debugElement.nativeElement.innerHTML).toContain('Child Component');\n        });\n+\n+    describe('createComponent using Type', () => {\n+      const TOKEN_A = new InjectionToken('A');\n+      const TOKEN_B = new InjectionToken('B');\n+\n+      @Component({\n+        selector: 'child-a',\n+        template: `[Child Component A]`,\n+      })\n+      class ChildA {\n+      }\n+\n+      @Component({\n+        selector: 'child-b',\n+        template: `\n+          [Child Component B]\n+          <ng-content></ng-content>\n+          {{ tokenA }}\n+          {{ tokenB }}\n+        `,\n+      })\n+      class ChildB {\n+        constructor(private injector: Injector) {}\n+        get tokenA() {\n+          return this.injector.get(TOKEN_A);\n+        }\n+        get tokenB() {\n+          return this.injector.get(TOKEN_B);\n+        }\n+      }\n+\n+      @Component({\n+        selector: 'app',\n+        template: '',\n+        providers: [\n+          {provide: TOKEN_B, useValue: '[TokenValueB]'},\n+        ]\n+      })\n+      class App {\n+        constructor(\n+            public viewContainerRef: ViewContainerRef, public ngModuleRef: NgModuleRef<unknown>,\n+            public injector: Injector) {}\n+      }\n+\n+      @NgModule({\n+        declarations: [App, ChildA, ChildB],\n+        providers: [\n+          {provide: TOKEN_A, useValue: '[TokenValueA]'},\n+        ]\n+      })\n+      class AppModule {\n+      }\n+\n+      let fixture!: ComponentFixture<App>;\n+      beforeEach(() => {\n+        TestBed.configureTestingModule({imports: [AppModule]});\n+        fixture = TestBed.createComponent(App);\n+        fixture.detectChanges();\n+      });\n+\n+      it('should be able to create a component when Type is provided', () => {\n+        if (ivyEnabled) {\n+          fixture.componentInstance.viewContainerRef.createComponent(ChildA);\n+          expect(fixture.nativeElement.parentNode.textContent).toContain('[Child Component A]');\n+        } else {\n+          expect(() => {\n+            fixture.componentInstance.viewContainerRef.createComponent(ChildA);\n+          }).toThrowError(/ViewEngine does not support Type/);\n+        }\n+      });\n+\n+      it('should throw if class without @Component decorator is used as Component type', () => {\n+        class MyClassWithoutComponentDecorator {}\n+        const createComponent = () => {\n+          fixture.componentInstance.viewContainerRef.createComponent(\n+              MyClassWithoutComponentDecorator);\n+        };\n+        if (ivyEnabled) {\n+          expect(createComponent)\n+              .toThrowError(/Provided Component class doesn't contain Component definition./);\n+        } else {\n+          expect(createComponent).toThrowError(/ViewEngine does not support Type/);\n+        }\n+      });\n+\n+      onlyInIvy('Ivy-only checks for the `createComponent` API with `options` argument')\n+          .describe('`options` argument handling', () => {\n+            it('should work correctly when an empty object is provided', () => {\n+              fixture.componentInstance.viewContainerRef.createComponent(ChildA, {});\n+              expect(fixture.nativeElement.parentNode.textContent).toContain('[Child Component A]');\n+            });\n+\n+            it('should take provided `options` arguments into account', () => {\n+              const {viewContainerRef, ngModuleRef, injector} = fixture.componentInstance;\n+              viewContainerRef.createComponent(ChildA);\n+\n+              const projectableNode = document.createElement('div');\n+              const textNode = document.createTextNode('[Projectable Node]');\n+              projectableNode.appendChild(textNode);\n+              const projectableNodes = [[projectableNode]];\n+\n+              // Insert ChildB in front of ChildA (since index = 0)\n+              viewContainerRef.createComponent(\n+                  ChildB, {index: 0, injector, ngModuleRef, projectableNodes});\n+\n+              fixture.detectChanges();\n+\n+              expect(fixture.nativeElement.parentNode.textContent.trim())\n+                  .toContain(\n+                      '[Child Component B] ' +\n+                      '[Projectable Node] ' +\n+                      '[TokenValueA] ' +\n+                      '[TokenValueB] ' +\n+                      '[Child Component A]');\n+            });\n+          });\n+    });\n   });\n \n   describe('insertion points and declaration points', () => {"
        },
        {
            "sha": "71feee2c73378d5ecc14041ca2429d8a4be0eb2f",
            "filename": "packages/core/test/bundling/todo/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 60,
            "deletions": 0,
            "changes": 60,
            "blob_url": "https://github.com/angular/angular/blob/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/7dccbdd27be13eb7287f535f482b1de2c13fca74/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json?ref=7dccbdd27be13eb7287f535f482b1de2c13fca74",
            "patch": "@@ -5,6 +5,12 @@\n   {\n     \"name\": \"ChangeDetectionStrategy\"\n   },\n+  {\n+    \"name\": \"ComponentFactory\"\n+  },\n+  {\n+    \"name\": \"ComponentRef\"\n+  },\n   {\n     \"name\": \"DefaultIterableDiffer\"\n   },\n@@ -32,6 +38,9 @@\n   {\n     \"name\": \"IterableDiffers\"\n   },\n+  {\n+    \"name\": \"LifecycleHooksFeature\"\n+  },\n   {\n     \"name\": \"NG_COMP_DEF\"\n   },\n@@ -56,6 +65,9 @@\n   {\n     \"name\": \"NOT_FOUND\"\n   },\n+  {\n+    \"name\": \"NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR\"\n+  },\n   {\n     \"name\": \"NO_CHANGE\"\n   },\n@@ -92,6 +104,12 @@\n   {\n     \"name\": \"RecordViewTuple\"\n   },\n+  {\n+    \"name\": \"RendererFactory2\"\n+  },\n+  {\n+    \"name\": \"RootViewRef\"\n+  },\n   {\n     \"name\": \"RuntimeError\"\n   },\n@@ -104,6 +122,9 @@\n   {\n     \"name\": \"SWITCH_VIEW_CONTAINER_REF_FACTORY\"\n   },\n+  {\n+    \"name\": \"Sanitizer\"\n+  },\n   {\n     \"name\": \"SimpleChange\"\n   },\n@@ -137,9 +158,15 @@\n   {\n     \"name\": \"TodoStore\"\n   },\n+  {\n+    \"name\": \"VERSION\"\n+  },\n   {\n     \"name\": \"VE_ViewContainerRef\"\n   },\n+  {\n+    \"name\": \"Version\"\n+  },\n   {\n     \"name\": \"ViewContainerRef\"\n   },\n@@ -260,6 +287,9 @@\n   {\n     \"name\": \"createDirectivesInstances\"\n   },\n+  {\n+    \"name\": \"createElementNode\"\n+  },\n   {\n     \"name\": \"createElementRef\"\n   },\n@@ -275,6 +305,15 @@\n   {\n     \"name\": \"createNodeInjector\"\n   },\n+  {\n+    \"name\": \"createRootComponent\"\n+  },\n+  {\n+    \"name\": \"createRootComponentView\"\n+  },\n+  {\n+    \"name\": \"createRootContext\"\n+  },\n   {\n     \"name\": \"createTView\"\n   },\n@@ -296,6 +335,9 @@\n   {\n     \"name\": \"detachView\"\n   },\n+  {\n+    \"name\": \"detectChangesInRootView\"\n+  },\n   {\n     \"name\": \"detectChangesInternal\"\n   },\n@@ -443,6 +485,9 @@\n   {\n     \"name\": \"getSymbolIterator\"\n   },\n+  {\n+    \"name\": \"getTNode\"\n+  },\n   {\n     \"name\": \"getTStylingRangeNext\"\n   },\n@@ -563,6 +608,9 @@\n   {\n     \"name\": \"leaveViewLight\"\n   },\n+  {\n+    \"name\": \"locateHostElement\"\n+  },\n   {\n     \"name\": \"lookupTokenUsingModuleInjector\"\n   },\n@@ -581,6 +629,9 @@\n   {\n     \"name\": \"markViewDirty\"\n   },\n+  {\n+    \"name\": \"maybeWrapInNotSelector\"\n+  },\n   {\n     \"name\": \"mergeHostAttribute\"\n   },\n@@ -725,12 +776,21 @@\n   {\n     \"name\": \"stringify\"\n   },\n+  {\n+    \"name\": \"stringifyCSSSelector\"\n+  },\n   {\n     \"name\": \"stringifyForError\"\n   },\n   {\n     \"name\": \"throwProviderNotFoundError\"\n   },\n+  {\n+    \"name\": \"tickRootContext\"\n+  },\n+  {\n+    \"name\": \"toRefArray\"\n+  },\n   {\n     \"name\": \"toTStylingRange\"\n   },"
        }
    ],
    "stats": {
        "total": 391,
        "additions": 355,
        "deletions": 36
    }
}