{
    "author": "atscott",
    "message": "refactor(router): Remove TODO and slightly adjust eager browserUrlTree update (#43426)\n\nNo test was added for this case because I can't think of a test case to\nwrite that would work.\n\nThis change updates the code for a consistent mental model of setting\nthe `browserUrlTree`. It's only meant to track the `UrlTree` that the\n`UrlHandlingStrategy` is set to extract, not the full `rawUrl`. Notice\nthat everywhere else, the `browserUrlTree` is set to\n`urlAfterRedirects`, which is computed based on the extracted URL, _not_\nthe `rawUrl`.\n\nPR Close #43426",
    "sha": "3ec9ee65b983706ea9e1bd625918d8c28feeb8f0",
    "files": [
        {
            "sha": "8a2115c282144cbb55ad655f3287b1826772e583",
            "filename": "packages/router/src/router.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 8,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/3ec9ee65b983706ea9e1bd625918d8c28feeb8f0/packages%2Frouter%2Fsrc%2Frouter.ts",
            "raw_url": "https://github.com/angular/angular/raw/3ec9ee65b983706ea9e1bd625918d8c28feeb8f0/packages%2Frouter%2Fsrc%2Frouter.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Frouter%2Fsrc%2Frouter.ts?ref=3ec9ee65b983706ea9e1bd625918d8c28feeb8f0",
            "patch": "@@ -666,16 +666,13 @@ export class Router {\n                            (this.onSameUrlNavigation === 'reload' ? true : urlTransition) &&\n                            this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl);\n \n-                       // If the source of the navigation is from a browser event, the URL is\n-                       // already updated. We already need to sync the internal state.\n-                       if (isBrowserTriggeredNavigation(t.source)) {\n-                         // TODO(atscott): this should be `t.extractedUrl`. The `browserUrlTree`\n-                         // should only be the part of the URL that is handled by the router. In\n-                         // addition, this should only be done if we process the current url.\n-                         this.browserUrlTree = t.rawUrl;\n-                       }\n \n                        if (processCurrentUrl) {\n+                         // If the source of the navigation is from a browser event, the URL is\n+                         // already updated. We already need to sync the internal state.\n+                         if (isBrowserTriggeredNavigation(t.source)) {\n+                           this.browserUrlTree = t.extractedUrl;\n+                         }\n                          return of(t).pipe(\n                              // Fire NavigationStart event\n                              switchMap(t => {"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 5,
        "deletions": 8
    }
}