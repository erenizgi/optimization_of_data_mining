{
    "author": "sonukapoor",
    "message": "perf(core): use `ngDevMode` to tree-shake error messages (#38612)\n\nThis commit adds `ngDevMode` guard to throw some errors only in dev mode\n(similar to how things work in other parts of Ivy runtime code). The\n`ngDevMode` flag helps to tree-shake these error messages from production\nbuilds (in dev mode everything will work as it works right now) to decrease\nproduction bundle size.\n\nPR Close #38612",
    "sha": "11506491393d33ac808da78a3bbb3a8bc9fb5588",
    "files": [
        {
            "sha": "aa0f736430f09cb454d00a7931d82263cf70f854",
            "filename": "goldens/size-tracking/integration-payloads.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/11506491393d33ac808da78a3bbb3a8bc9fb5588/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "raw_url": "https://github.com/angular/angular/raw/11506491393d33ac808da78a3bbb3a8bc9fb5588/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fsize-tracking%2Fintegration-payloads.json?ref=11506491393d33ac808da78a3bbb3a8bc9fb5588",
            "patch": "@@ -21,7 +21,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime-es2015\": 1485,\n-        \"main-es2015\": 147573,\n+        \"main-es2015\": 146989,\n         \"polyfills-es2015\": 36571\n       }\n     }"
        },
        {
            "sha": "449f88f15daa7020b7f8080ff652bf439e6eac12",
            "filename": "packages/core/src/di/r3_injector.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/11506491393d33ac808da78a3bbb3a8bc9fb5588/packages%2Fcore%2Fsrc%2Fdi%2Fr3_injector.ts",
            "raw_url": "https://github.com/angular/angular/raw/11506491393d33ac808da78a3bbb3a8bc9fb5588/packages%2Fcore%2Fsrc%2Fdi%2Fr3_injector.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fdi%2Fr3_injector.ts?ref=11506491393d33ac808da78a3bbb3a8bc9fb5588",
            "patch": "@@ -384,7 +384,7 @@ export class R3Injector {\n       let multiRecord = this.records.get(token);\n       if (multiRecord) {\n         // It has. Throw a nice error if\n-        if (multiRecord.multi === undefined) {\n+        if (ngDevMode && multiRecord.multi === undefined) {\n           throwMixedMultiProviderError();\n         }\n       } else {\n@@ -396,15 +396,15 @@ export class R3Injector {\n       multiRecord.multi!.push(provider);\n     } else {\n       const existing = this.records.get(token);\n-      if (existing && existing.multi !== undefined) {\n+      if (ngDevMode && existing && existing.multi !== undefined) {\n         throwMixedMultiProviderError();\n       }\n     }\n     this.records.set(token, record);\n   }\n \n   private hydrate<T>(token: Type<T>|InjectionToken<T>, record: Record<T>): T {\n-    if (record.value === CIRCULAR) {\n+    if (ngDevMode && record.value === CIRCULAR) {\n       throwCyclicDependencyError(stringify(token));\n     } else if (record.value === NOT_YET) {\n       record.value = CIRCULAR;\n@@ -511,7 +511,7 @@ export function providerToFactory(\n       const classRef = resolveForwardRef(\n           provider &&\n           ((provider as StaticClassProvider | ClassProvider).useClass || provider.provide));\n-      if (!classRef) {\n+      if (ngDevMode && !classRef) {\n         throwInvalidProviderError(ngModuleType, providers, provider);\n       }\n       if (hasDeps(provider)) {"
        },
        {
            "sha": "5f1e6be5e08065623382a008e3187dc903cb57f9",
            "filename": "packages/core/src/render3/instructions/shared.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 7,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/11506491393d33ac808da78a3bbb3a8bc9fb5588/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fshared.ts",
            "raw_url": "https://github.com/angular/angular/raw/11506491393d33ac808da78a3bbb3a8bc9fb5588/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fshared.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fshared.ts?ref=11506491393d33ac808da78a3bbb3a8bc9fb5588",
            "patch": "@@ -1375,6 +1375,7 @@ function findDirectiveDefMatches(\n   ngDevMode &&\n       assertNodeOfPossibleTypes(\n           tNode, [TNodeType.Element, TNodeType.ElementContainer, TNodeType.Container]);\n+\n   const registry = tView.directiveRegistry;\n   let matches: any[]|null = null;\n   if (registry) {\n@@ -1385,13 +1386,14 @@ function findDirectiveDefMatches(\n         diPublicInInjector(getOrCreateNodeInjectorForNode(tNode, viewData), tView, def.type);\n \n         if (isComponentDef(def)) {\n-          ngDevMode &&\n-              assertNodeOfPossibleTypes(\n-                  tNode, [TNodeType.Element],\n-                  `\"${tNode.tagName}\" tags cannot be used as component hosts. ` +\n-                      `Please use a different tag to activate the ${\n-                          stringify(def.type)} component.`);\n-          if (tNode.flags & TNodeFlags.isComponentHost) throwMultipleComponentError(tNode);\n+          if (ngDevMode) {\n+            assertNodeOfPossibleTypes(\n+                tNode, [TNodeType.Element],\n+                `\"${tNode.tagName}\" tags cannot be used as component hosts. ` +\n+                    `Please use a different tag to activate the ${stringify(def.type)} component.`);\n+\n+            if (tNode.flags & TNodeFlags.isComponentHost) throwMultipleComponentError(tNode);\n+          }\n           markAsComponentHost(tView, tNode);\n           // The component is always stored first with directives after.\n           matches.unshift(def);"
        },
        {
            "sha": "8e89517914e92230b1a32e816e5bee3f2ff5e2fc",
            "filename": "packages/core/test/bundling/cyclic_import/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/11506491393d33ac808da78a3bbb3a8bc9fb5588/packages%2Fcore%2Ftest%2Fbundling%2Fcyclic_import%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/11506491393d33ac808da78a3bbb3a8bc9fb5588/packages%2Fcore%2Ftest%2Fbundling%2Fcyclic_import%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Fcyclic_import%2Fbundle.golden_symbols.json?ref=11506491393d33ac808da78a3bbb3a8bc9fb5588",
            "patch": "@@ -350,9 +350,6 @@\n   {\n     \"name\": \"setUpAttributes\"\n   },\n-  {\n-    \"name\": \"throwMultipleComponentError\"\n-  },\n   {\n     \"name\": \"unwrapRNode\"\n   },"
        },
        {
            "sha": "116250dea7fbe5b54ae36a1c4795fdd0c355425d",
            "filename": "packages/core/test/bundling/forms/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/11506491393d33ac808da78a3bbb3a8bc9fb5588/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/11506491393d33ac808da78a3bbb3a8bc9fb5588/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json?ref=11506491393d33ac808da78a3bbb3a8bc9fb5588",
            "patch": "@@ -1586,12 +1586,6 @@\n   {\n     \"name\": \"syncPendingControls\"\n   },\n-  {\n-    \"name\": \"throwMixedMultiProviderError\"\n-  },\n-  {\n-    \"name\": \"throwMultipleComponentError\"\n-  },\n   {\n     \"name\": \"toObservable\"\n   },"
        },
        {
            "sha": "4e26d5b4c991da84c33e4476a19b93ae8f304396",
            "filename": "packages/core/test/bundling/injection/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/11506491393d33ac808da78a3bbb3a8bc9fb5588/packages%2Fcore%2Ftest%2Fbundling%2Finjection%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/11506491393d33ac808da78a3bbb3a8bc9fb5588/packages%2Fcore%2Ftest%2Fbundling%2Finjection%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Finjection%2Fbundle.golden_symbols.json?ref=11506491393d33ac808da78a3bbb3a8bc9fb5588",
            "patch": "@@ -128,9 +128,6 @@\n   {\n     \"name\": \"stringify\"\n   },\n-  {\n-    \"name\": \"throwMixedMultiProviderError\"\n-  },\n   {\n     \"name\": \"ɵɵdefineInjectable\"\n   },"
        },
        {
            "sha": "bac2ef604c5b1090875dc2dfa507af29f47ca977",
            "filename": "packages/core/test/bundling/todo/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/11506491393d33ac808da78a3bbb3a8bc9fb5588/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/11506491393d33ac808da78a3bbb3a8bc9fb5588/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json?ref=11506491393d33ac808da78a3bbb3a8bc9fb5588",
            "patch": "@@ -713,9 +713,6 @@\n   {\n     \"name\": \"stringifyForError\"\n   },\n-  {\n-    \"name\": \"throwMultipleComponentError\"\n-  },\n   {\n     \"name\": \"toTStylingRange\"\n   },"
        }
    ],
    "stats": {
        "total": 41,
        "additions": 14,
        "deletions": 27
    }
}