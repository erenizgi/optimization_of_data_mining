{
    "author": "devversion",
    "message": "refactor(bazel): remove unused `modify_tsconfig.js` file (#43431)\n\nRemoves the unused `modify_tsconfig.js` file located in the\n`@angular/bazel` package. This file existed in the past for the\nESM5 compilation aspect relying on the TS compilation to be replayed.\n\nWe just forgot removing the file and associated `nodejs_binary`.\n\nPR Close #43431",
    "sha": "5b53e6122a9df54258313f439f2d741ae49c536e",
    "files": [
        {
            "sha": "3023ae53fcf68e06a5b63b46aa592afe19c02d97",
            "filename": "packages/bazel/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/5b53e6122a9df54258313f439f2d741ae49c536e/packages%2Fbazel%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/5b53e6122a9df54258313f439f2d741ae49c536e/packages%2Fbazel%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fbazel%2Fpackage.json?ref=5b53e6122a9df54258313f439f2d741ae49c536e",
            "patch": "@@ -11,8 +11,7 @@\n     \"api-extractor\": \"./src/api-extractor/index.js\",\n     \"ngc-wrapped\": \"./src/ngc-wrapped/index.js\",\n     \"packager\": \"./src/ng_package/packager.js\",\n-    \"xi18n\": \"./src/ngc-wrapped/extract_i18n.js\",\n-    \"modify_tsconfig\": \"./src/modify_tsconfig.js\"\n+    \"xi18n\": \"./src/ngc-wrapped/extract_i18n.js\"\n   },\n   \"typings\": \"./src/ngc-wrapped/index.d.ts\",\n   \"bazelBin\": {"
        },
        {
            "sha": "e1498ab4dc942a0ef4720fcd0712ac90258278a8",
            "filename": "packages/bazel/src/BUILD.bazel",
            "status": "modified",
            "additions": 0,
            "deletions": 10,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/5b53e6122a9df54258313f439f2d741ae49c536e/packages%2Fbazel%2Fsrc%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/5b53e6122a9df54258313f439f2d741ae49c536e/packages%2Fbazel%2Fsrc%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fbazel%2Fsrc%2FBUILD.bazel?ref=5b53e6122a9df54258313f439f2d741ae49c536e",
            "patch": "@@ -1,4 +1,3 @@\n-load(\"@build_bazel_rules_nodejs//:index.bzl\", \"nodejs_binary\")\n \n # BEGIN-DEV-ONLY\n package(default_visibility = [\"//packages/bazel:__subpackages__\"])\n@@ -7,13 +6,4 @@ filegroup(\n     name = \"package_assets\",\n     srcs = glob([\"*\"]),\n )\n-\n-nodejs_binary(\n-    name = \"modify_tsconfig\",\n-    data = [\n-        \"modify_tsconfig.js\",\n-    ],\n-    entry_point = \":modify_tsconfig.js\",\n-    visibility = [\"//visibility:public\"],\n-)\n # END-DEV-ONLY"
        },
        {
            "sha": "55d3c6a7cccf42090d5283fcaf7e941df6af9a6b",
            "filename": "packages/bazel/src/modify_tsconfig.js",
            "status": "removed",
            "additions": 0,
            "deletions": 54,
            "changes": 54,
            "blob_url": "https://github.com/angular/angular/blob/827a83e00f1c2d708adf105f9227803f5a95468f/packages%2Fbazel%2Fsrc%2Fmodify_tsconfig.js",
            "raw_url": "https://github.com/angular/angular/raw/827a83e00f1c2d708adf105f9227803f5a95468f/packages%2Fbazel%2Fsrc%2Fmodify_tsconfig.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fbazel%2Fsrc%2Fmodify_tsconfig.js?ref=827a83e00f1c2d708adf105f9227803f5a95468f",
            "patch": "@@ -1,54 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-/**\n- * @fileoverview Read a tsconfig.json file intended to produce production mode\n- * JS output, modify it to produce esm5 output instead, and write the result\n- * to disk.\n- */\n-const fs = require('fs');\n-const path = require('path');\n-\n-function main(args) {\n-  if (args.length < 3) {\n-    console.error('Usage: $0 input.tsconfig.json output.tsconfig.json newRoot binDir');\n-  }\n-\n-  const [input, output, newRoot, binDir] = args;\n-  const data = JSON.parse(fs.readFileSync(input, {encoding: 'utf-8'}));\n-  const {compilerOptions, bazelOptions} = data;\n-\n-  // Relative path to the execroot that refers to the directory for the ES5 output files.\n-  const newOutputBase = path.posix.join(binDir, newRoot);\n-\n-  // Update the compiler options to produce ES5 output. Also ensure that the new ES5 output\n-  // directory is used.\n-  compilerOptions['target'] = 'es5';\n-  compilerOptions['outDir'] = path.posix.join(compilerOptions['outDir'], newRoot);\n-\n-  bazelOptions['es5Mode'] = true;\n-  bazelOptions['tsickleExternsPath'] =\n-      bazelOptions['tsickleExternsPath'].replace(binDir, newOutputBase);\n-\n-  if (data['angularCompilerOptions']) {\n-    const {angularCompilerOptions} = data;\n-    // Don't enable tsickle's closure conversions\n-    angularCompilerOptions['annotateForClosureCompiler'] = false;\n-    // Note: It's important that the \"expectedOut\" is only modified in a way that still\n-    // keeps posix normalized paths. Otherwise this could cause unexpected behavior because\n-    // ngc-wrapped is expecting POSIX paths and the TypeScript Bazel rules by default only pass\n-    // POSIX paths as well.\n-    angularCompilerOptions['expectedOut'] = angularCompilerOptions['expectedOut'].map(\n-        f => f.replace(/\\.mjs$/, '.js').replace(binDir, newOutputBase));\n-  }\n-  fs.writeFileSync(output, JSON.stringify(data));\n-}\n-\n-if (require.main === module) {\n-  process.exitCode = main(process.argv.slice(2));\n-}"
        }
    ],
    "stats": {
        "total": 67,
        "additions": 1,
        "deletions": 66
    }
}