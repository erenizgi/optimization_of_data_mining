{
    "author": "josephperrott",
    "message": "test(dev-infra): fix test order failure in tests for the release command (#41023)\n\nDepending on test order, the `_npmPackageInfoCache` contains information\nwhich causes the prompt results to be slightly different text.\n\nPR Close #41023",
    "sha": "153e3a896034c294e46c0e548966afea89cd2c90",
    "files": [
        {
            "sha": "e16244879f426c892f1fbc43705695f6fdcf5d28",
            "filename": "dev-infra/release/publish/test/common.spec.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/153e3a896034c294e46c0e548966afea89cd2c90/dev-infra%2Frelease%2Fpublish%2Ftest%2Fcommon.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/153e3a896034c294e46c0e548966afea89cd2c90/dev-infra%2Frelease%2Fpublish%2Ftest%2Fcommon.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fpublish%2Ftest%2Fcommon.spec.ts?ref=153e3a896034c294e46c0e548966afea89cd2c90",
            "patch": "@@ -11,6 +11,7 @@ import {join} from 'path';\n import * as semver from 'semver';\n \n import {getBranchPushMatcher} from '../../../utils/testing';\n+import {_npmPackageInfoCache} from '../../versioning';\n import {ActiveReleaseTrains} from '../../versioning/active-release-trains';\n import * as npm from '../../versioning/npm-publish';\n import {ReleaseTrain} from '../../versioning/release-trains';\n@@ -35,6 +36,13 @@ describe('common release action logic', () => {\n     };\n \n     it('should not modify release train versions and cause invalid other actions', async () => {\n+      // The cached npm package information needs to be deleted as depending on the test order\n+      // their may or may not be packages in the cache, causing the number of active LTS branches\n+      // in this test to be 2 instead of 0.\n+      for (const packageName in _npmPackageInfoCache) {\n+        delete _npmPackageInfoCache[packageName];\n+      }\n+\n       const {releaseConfig, gitClient} = getTestingMocksForReleaseAction();\n       const descriptions: string[] = [];\n "
        }
    ],
    "stats": {
        "total": 8,
        "additions": 8,
        "deletions": 0
    }
}