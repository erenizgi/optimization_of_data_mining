{
    "author": "josephperrott",
    "message": "fix(bazel): update build tooling for latest changes in rules_nodejs (#40710)\n\nUpdate the build tooling to handle the changes in the latest version of rules_nodejs.\n\nPR Close #40710",
    "sha": "696f7bccfe0856a201df4b356420b7e842c3e4f9",
    "files": [
        {
            "sha": "a91cea38effa7e4836922e5a4a0f2bdd48be0cbc",
            "filename": "integration/bazel/.bazelrc",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/696f7bccfe0856a201df4b356420b7e842c3e4f9/integration%2Fbazel%2F.bazelrc",
            "raw_url": "https://github.com/angular/angular/raw/696f7bccfe0856a201df4b356420b7e842c3e4f9/integration%2Fbazel%2F.bazelrc",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/integration%2Fbazel%2F.bazelrc?ref=696f7bccfe0856a201df4b356420b7e842c3e4f9",
            "patch": "@@ -22,7 +22,3 @@ build --define=enable_legacy_rollup_rule=1\n \n # Don't create symlinks\n build --symlink_prefix=/\n-\n-# Turn on managed directories feature in Bazel\n-# This allows us to avoid installing a second copy of node_modules\n-# common --experimental_allow_incremental_repository_updates"
        },
        {
            "sha": "4b5587150a3c9b65b6c470bc8dbc5f115b4a0b52",
            "filename": "packages/bazel/src/BUILD.bazel",
            "status": "modified",
            "additions": 3,
            "deletions": 7,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/696f7bccfe0856a201df4b356420b7e842c3e4f9/packages%2Fbazel%2Fsrc%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/696f7bccfe0856a201df4b356420b7e842c3e4f9/packages%2Fbazel%2Fsrc%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fbazel%2Fsrc%2FBUILD.bazel?ref=696f7bccfe0856a201df4b356420b7e842c3e4f9",
            "patch": "@@ -11,16 +11,12 @@ exports_files(glob([\"*.bzl\"]))\n \n load(\"@build_bazel_rules_nodejs//:index.bzl\", \"nodejs_binary\")\n \n-filegroup(\n-    name = \"empty_node_modules\",\n-    srcs = [],\n-)\n-\n nodejs_binary(\n     name = \"modify_tsconfig\",\n-    data = [\"modify_tsconfig.js\"],\n+    data = [\n+        \"modify_tsconfig.js\",\n+    ],\n     entry_point = \":modify_tsconfig.js\",\n-    node_modules = \":empty_node_modules\",\n     visibility = [\"//visibility:public\"],\n )\n # END-DEV-ONLY"
        },
        {
            "sha": "53d57140fd23044e66f7bdea7daf61486994a096",
            "filename": "packages/bazel/src/ng_package/BUILD.bazel",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/696f7bccfe0856a201df4b356420b7e842c3e4f9/packages%2Fbazel%2Fsrc%2Fng_package%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/696f7bccfe0856a201df4b356420b7e842c3e4f9/packages%2Fbazel%2Fsrc%2Fng_package%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fbazel%2Fsrc%2Fng_package%2FBUILD.bazel?ref=696f7bccfe0856a201df4b356420b7e842c3e4f9",
            "patch": "@@ -49,7 +49,6 @@ load(\"@npm//@bazel/typescript:index.bzl\", \"ts_library\")\n ts_library(\n     name = \"lib\",\n     srcs = glob([\"*.ts\"]),\n-    node_modules = \"@npm//typescript:typescript__typings\",\n     tsconfig = \":tsconfig.json\",\n     deps = [\n         \"@npm//@types/node\","
        },
        {
            "sha": "41b26525a60312aded14bf90f5285295ac3e7dc3",
            "filename": "packages/bazel/src/ngc-wrapped/BUILD.bazel",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/696f7bccfe0856a201df4b356420b7e842c3e4f9/packages%2Fbazel%2Fsrc%2Fngc-wrapped%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/696f7bccfe0856a201df4b356420b7e842c3e4f9/packages%2Fbazel%2Fsrc%2Fngc-wrapped%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fbazel%2Fsrc%2Fngc-wrapped%2FBUILD.bazel?ref=696f7bccfe0856a201df4b356420b7e842c3e4f9",
            "patch": "@@ -9,7 +9,6 @@ ts_library(\n         \"index.ts\",\n     ],\n     module_name = \"@angular/bazel\",\n-    node_modules = \"@npm//typescript:typescript__typings\",\n     tsconfig = \":tsconfig.json\",\n     visibility = [\n         \"//packages/bazel:__pkg__\",\n@@ -21,6 +20,7 @@ ts_library(\n         \"@npm//@types/node\",\n         \"@npm//tsickle\",\n         \"@npm//typescript\",\n+        \"@npm//typescript:typescript__typings\",\n     ],\n )\n "
        }
    ],
    "stats": {
        "total": 17,
        "additions": 4,
        "deletions": 13
    }
}