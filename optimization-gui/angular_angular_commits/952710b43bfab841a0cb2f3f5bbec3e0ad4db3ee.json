{
    "author": "petebacondarwin",
    "message": "refactor(compiler-cli): ensure `isNamed....()` helpers check name is identity (#38959)\n\nPreviously the `node.name` property was only checked to ensure it was\ndefined. But that meant that it was a `ts.BindingName`, which also includes\n`ts.BindingPattern`, which we do not support. But these helper methods were\nforcefully casting the value to `ts.Identifier.\n\nNow we also check that the `node.name` is actually an `ts.Identifier`.\n\nPR Close #38959",
    "sha": "952710b43bfab841a0cb2f3f5bbec3e0ad4db3ee",
    "files": [
        {
            "sha": "8aaffc8b24f9b228b6005ae6bd0aca721b537fb1",
            "filename": "packages/compiler-cli/src/ngtsc/reflection/src/util.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 3,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/952710b43bfab841a0cb2f3f5bbec3e0ad4db3ee/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Freflection%2Fsrc%2Futil.ts",
            "raw_url": "https://github.com/angular/angular/raw/952710b43bfab841a0cb2f3f5bbec3e0ad4db3ee/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Freflection%2Fsrc%2Futil.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Freflection%2Fsrc%2Futil.ts?ref=952710b43bfab841a0cb2f3f5bbec3e0ad4db3ee",
            "patch": "@@ -11,15 +11,19 @@ import {ClassDeclaration} from './host';\n \n export function isNamedClassDeclaration(node: ts.Node):\n     node is ClassDeclaration<ts.ClassDeclaration> {\n-  return ts.isClassDeclaration(node) && (node.name !== undefined);\n+  return ts.isClassDeclaration(node) && isIdentifier(node.name);\n }\n \n export function isNamedFunctionDeclaration(node: ts.Node):\n     node is ClassDeclaration<ts.FunctionDeclaration> {\n-  return ts.isFunctionDeclaration(node) && (node.name !== undefined);\n+  return ts.isFunctionDeclaration(node) && isIdentifier(node.name);\n }\n \n export function isNamedVariableDeclaration(node: ts.Node):\n     node is ClassDeclaration<ts.VariableDeclaration> {\n-  return ts.isVariableDeclaration(node) && (node.name !== undefined);\n+  return ts.isVariableDeclaration(node) && isIdentifier(node.name);\n+}\n+\n+function isIdentifier(node: ts.Node|undefined): node is ts.Identifier {\n+  return node !== undefined && ts.isIdentifier(node);\n }"
        }
    ],
    "stats": {
        "total": 10,
        "additions": 7,
        "deletions": 3
    }
}