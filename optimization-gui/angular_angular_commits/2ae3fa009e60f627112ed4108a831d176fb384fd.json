{
    "author": "bjarkler",
    "message": "refactor(compiler): remove unnecessary trustConstantScript function (#39554)\n\nScript tags, inline event handlers and other script contexts are\nforbidden or stripped from Angular templates by the compiler. In the\ncontext of Trusted Types, this leaves no sinks that require use of a\nTrustedScript. This means that trustConstantScript is never used, and\ncan be removed.\n\nPR Close #39554",
    "sha": "2ae3fa009e60f627112ed4108a831d176fb384fd",
    "files": [
        {
            "sha": "22daaeb91cc6cb71a3ed88061f90271d6c54464b",
            "filename": "packages/compiler/src/render3/r3_identifiers.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/2ae3fa009e60f627112ed4108a831d176fb384fd/packages%2Fcompiler%2Fsrc%2Frender3%2Fr3_identifiers.ts",
            "raw_url": "https://github.com/angular/angular/raw/2ae3fa009e60f627112ed4108a831d176fb384fd/packages%2Fcompiler%2Fsrc%2Frender3%2Fr3_identifiers.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Frender3%2Fr3_identifiers.ts?ref=2ae3fa009e60f627112ed4108a831d176fb384fd",
            "patch": "@@ -321,8 +321,6 @@ export class Identifiers {\n   static sanitizeUrlOrResourceUrl:\n       o.ExternalReference = {name: 'ɵɵsanitizeUrlOrResourceUrl', moduleName: CORE};\n   static trustConstantHtml: o.ExternalReference = {name: 'ɵɵtrustConstantHtml', moduleName: CORE};\n-  static trustConstantScript:\n-      o.ExternalReference = {name: 'ɵɵtrustConstantScript', moduleName: CORE};\n   static trustConstantResourceUrl:\n       o.ExternalReference = {name: 'ɵɵtrustConstantResourceUrl', moduleName: CORE};\n }"
        },
        {
            "sha": "a8deb2dab21cf9fe240b002677f5268bf0569585",
            "filename": "packages/compiler/src/render3/view/template.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/2ae3fa009e60f627112ed4108a831d176fb384fd/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Ftemplate.ts",
            "raw_url": "https://github.com/angular/angular/raw/2ae3fa009e60f627112ed4108a831d176fb384fd/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Ftemplate.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Frender3%2Fview%2Ftemplate.ts?ref=2ae3fa009e60f627112ed4108a831d176fb384fd",
            "patch": "@@ -2156,8 +2156,7 @@ function trustedConstAttribute(tagName: string, attr: t.TextAttribute): o.Expres\n     switch (elementRegistry.securityContext(tagName, attr.name, /* isAttribute */ true)) {\n       case core.SecurityContext.HTML:\n         return o.importExpr(R3.trustConstantHtml).callFn([value], attr.valueSpan);\n-      case core.SecurityContext.SCRIPT:\n-        return o.importExpr(R3.trustConstantScript).callFn([value], attr.valueSpan);\n+      // NB: no SecurityContext.SCRIPT here, as the corresponding tags are stripped by the compiler.\n       case core.SecurityContext.RESOURCE_URL:\n         return o.importExpr(R3.trustConstantResourceUrl).callFn([value], attr.valueSpan);\n       default:"
        },
        {
            "sha": "30ccf1bb7e97d172c3fd62285edcc6e0738623a9",
            "filename": "packages/core/src/core_render3_private_export.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/2ae3fa009e60f627112ed4108a831d176fb384fd/packages%2Fcore%2Fsrc%2Fcore_render3_private_export.ts",
            "raw_url": "https://github.com/angular/angular/raw/2ae3fa009e60f627112ed4108a831d176fb384fd/packages%2Fcore%2Fsrc%2Fcore_render3_private_export.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fcore_render3_private_export.ts?ref=2ae3fa009e60f627112ed4108a831d176fb384fd",
            "patch": "@@ -296,7 +296,6 @@ export {\n   ɵɵsanitizeUrlOrResourceUrl,\n   ɵɵtrustConstantHtml,\n   ɵɵtrustConstantResourceUrl,\n-  ɵɵtrustConstantScript,\n } from './sanitization/sanitization';\n export {\n   noSideEffects as ɵnoSideEffects,"
        },
        {
            "sha": "fced9d7c560dd7d8484b4f9706e5627605ae6bbc",
            "filename": "packages/core/src/render3/jit/environment.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/2ae3fa009e60f627112ed4108a831d176fb384fd/packages%2Fcore%2Fsrc%2Frender3%2Fjit%2Fenvironment.ts",
            "raw_url": "https://github.com/angular/angular/raw/2ae3fa009e60f627112ed4108a831d176fb384fd/packages%2Fcore%2Fsrc%2Frender3%2Fjit%2Fenvironment.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fjit%2Fenvironment.ts?ref=2ae3fa009e60f627112ed4108a831d176fb384fd",
            "patch": "@@ -168,7 +168,6 @@ export const angularCoreEnv: {[name: string]: Function} =\n        'ɵɵsanitizeUrl': sanitization.ɵɵsanitizeUrl,\n        'ɵɵsanitizeUrlOrResourceUrl': sanitization.ɵɵsanitizeUrlOrResourceUrl,\n        'ɵɵtrustConstantHtml': sanitization.ɵɵtrustConstantHtml,\n-       'ɵɵtrustConstantScript': sanitization.ɵɵtrustConstantScript,\n        'ɵɵtrustConstantResourceUrl': sanitization.ɵɵtrustConstantResourceUrl,\n \n        'ɵɵngDeclareDirective': partial.ɵɵngDeclareDirective,"
        },
        {
            "sha": "f8050d39cf6201c8f6941d914bc6603b79b53de3",
            "filename": "packages/core/src/sanitization/sanitization.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 16,
            "changes": 17,
            "blob_url": "https://github.com/angular/angular/blob/2ae3fa009e60f627112ed4108a831d176fb384fd/packages%2Fcore%2Fsrc%2Fsanitization%2Fsanitization.ts",
            "raw_url": "https://github.com/angular/angular/raw/2ae3fa009e60f627112ed4108a831d176fb384fd/packages%2Fcore%2Fsrc%2Fsanitization%2Fsanitization.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fsanitization%2Fsanitization.ts?ref=2ae3fa009e60f627112ed4108a831d176fb384fd",
            "patch": "@@ -11,7 +11,7 @@ import {SANITIZER} from '../render3/interfaces/view';\n import {getLView} from '../render3/state';\n import {renderStringify} from '../render3/util/stringify_utils';\n import {TrustedHTML, TrustedScript, TrustedScriptURL} from '../util/security/trusted_type_defs';\n-import {trustedHTMLFromString, trustedScriptFromString, trustedScriptURLFromString} from '../util/security/trusted_types';\n+import {trustedHTMLFromString, trustedScriptURLFromString} from '../util/security/trusted_types';\n import {trustedHTMLFromStringBypass, trustedScriptFromStringBypass, trustedScriptURLFromStringBypass} from '../util/security/trusted_types_bypass';\n \n import {allowSanitizationBypassAndThrow, BypassType, unwrapSafeValue} from './bypass';\n@@ -159,21 +159,6 @@ export function ɵɵtrustConstantHtml(html: string): TrustedHTML|string {\n   return trustedHTMLFromString(html);\n }\n \n-/**\n- * Promotes the given constant string to a TrustedScript.\n- * @param script constant string containing a trusted script.\n- * @returns TrustedScript wrapping `script`.\n- *\n- * @security This is a security-sensitive function and should only be used to\n- * convert constant values of attributes and properties found in\n- * application-provided Angular templates to TrustedScript.\n- *\n- * @codeGenApi\n- */\n-export function ɵɵtrustConstantScript(script: string): TrustedScript|string {\n-  return trustedScriptFromString(script);\n-}\n-\n /**\n  * Promotes the given constant string to a TrustedScriptURL.\n  * @param url constant string containing a trusted script URL."
        }
    ],
    "stats": {
        "total": 24,
        "additions": 2,
        "deletions": 22
    }
}