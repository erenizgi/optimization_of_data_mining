{
    "author": "dario-piotrowicz",
    "message": "refactor(docs-infra): remove IE11 code (#44570)\n\nsince IE11 is no longer a supported browser, remove angular.io code\nimplemented specifically for IE11 support\n\nthis change reverts the following PRs:\n - #26059 (slightly)\n - #28188 (fully)\n - #32871 (fully)\n - #41183 (partially)\n\nPR Close #44570",
    "sha": "c57e22a21bd51a803baa465ec3a497306f3c8b24",
    "files": [
        {
            "sha": "48d0d947e3d27d2c3c1a66747bdc8f1b93abf752",
            "filename": "aio/src/app/custom-elements/code/code-tabs.component.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 7,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/c57e22a21bd51a803baa465ec3a497306f3c8b24/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode-tabs.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/c57e22a21bd51a803baa465ec3a497306f3c8b24/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode-tabs.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode-tabs.component.ts?ref=c57e22a21bd51a803baa465ec3a497306f3c8b24",
            "patch": "@@ -59,16 +59,12 @@ export class CodeTabsComponent implements OnInit, AfterViewInit {\n     const contentElem = this.content.nativeElement;\n     const codeExamples = Array.from(contentElem.querySelectorAll('code-pane'));\n \n+    // Remove DOM nodes that are no longer needed.\n+    contentElem.textContent = '';\n+\n     for (const tabContent of codeExamples) {\n       this.tabs.push(this.getTabInfo(tabContent));\n     }\n-\n-    // Remove DOM nodes that are no longer needed.\n-    //\n-    // NOTE:\n-    // In IE11, doing this also empties the `<code-pane>` nodes captured in `codeExamples` ¯\\_(ツ)_/¯\n-    // Only remove the unnecessary nodes after having captured the `<code-pane>` contents.\n-    contentElem.textContent = '';\n   }\n \n   ngAfterViewInit() {"
        },
        {
            "sha": "2adff61ff756fb6a8316b83b13427920113728bc",
            "filename": "aio/src/app/layout/doc-viewer/doc-viewer.component.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/c57e22a21bd51a803baa465ec3a497306f3c8b24/aio%2Fsrc%2Fapp%2Flayout%2Fdoc-viewer%2Fdoc-viewer.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/c57e22a21bd51a803baa465ec3a497306f3c8b24/aio%2Fsrc%2Fapp%2Flayout%2Fdoc-viewer%2Fdoc-viewer.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Flayout%2Fdoc-viewer%2Fdoc-viewer.component.ts?ref=c57e22a21bd51a803baa465ec3a497306f3c8b24",
            "patch": "@@ -103,10 +103,9 @@ export class DocViewerComponent implements OnDestroy {\n       const toc = document.createElement('aio-toc');\n       toc.className = 'embedded';\n       titleEl.parentNode.insertBefore(toc, titleEl.nextSibling);\n-    } else if (!needsToc && embeddedToc && embeddedToc.parentNode !== null) {\n+    } else if (!needsToc && embeddedToc) {\n       // Remove the embedded Toc if it's there and not needed.\n-      // We cannot use ChildNode.remove() because of IE11\n-      embeddedToc.parentNode.removeChild(embeddedToc);\n+      embeddedToc.remove();\n     }\n \n     return () => {"
        },
        {
            "sha": "e0b6fc526376e29a378bcc7b08ae27a8f497c802",
            "filename": "aio/src/app/shared/custom-icon-registry.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/c57e22a21bd51a803baa465ec3a497306f3c8b24/aio%2Fsrc%2Fapp%2Fshared%2Fcustom-icon-registry.ts",
            "raw_url": "https://github.com/angular/angular/raw/c57e22a21bd51a803baa465ec3a497306f3c8b24/aio%2Fsrc%2Fapp%2Fshared%2Fcustom-icon-registry.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fshared%2Fcustom-icon-registry.ts?ref=c57e22a21bd51a803baa465ec3a497306f3c8b24",
            "patch": "@@ -13,7 +13,7 @@ import { unwrapHtmlForSink } from 'safevalues';\n  * the following attributes:\n  *\n  * * `xmlns=\"http://www.w3.org/2000/svg\"`\n- * * `focusable=\"false\"` (disable IE11 default behavior to make SVGs focusable)\n+ * * `focusable=\"false\"` (the default)\n  * * `height=\"100%\"` (the default)\n  * * `width=\"100%\"` (the default)\n  * * `preserveAspectRatio=\"xMidYMid meet\"` (the default)"
        },
        {
            "sha": "3f787dc303bf4c80af92f501586731b2f3106e37",
            "filename": "aio/src/app/shared/toc.service.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 30,
            "changes": 35,
            "blob_url": "https://github.com/angular/angular/blob/c57e22a21bd51a803baa465ec3a497306f3c8b24/aio%2Fsrc%2Fapp%2Fshared%2Ftoc.service.ts",
            "raw_url": "https://github.com/angular/angular/raw/c57e22a21bd51a803baa465ec3a497306f3c8b24/aio%2Fsrc%2Fapp%2Fshared%2Ftoc.service.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fshared%2Ftoc.service.ts?ref=c57e22a21bd51a803baa465ec3a497306f3c8b24",
            "patch": "@@ -67,18 +67,18 @@ export class TocService {\n     div.innerHTML = unwrapHtmlForSink(fromInnerHTML(heading));\n \n     // Remove any `.github-links` or `.header-link` elements (along with their content).\n-    querySelectorAll(div, '.github-links, .header-link').forEach(removeNode);\n+    div.querySelectorAll('.github-links, .header-link').forEach(link => link.remove());\n \n     // Remove any remaining `a` elements (but keep their content).\n-    querySelectorAll(div, 'a').forEach(anchorLink => {\n+    div.querySelectorAll('a').forEach(anchorLink => {\n       // We want to keep the content of this anchor, so move it into its parent.\n       const parent = anchorLink.parentNode as Node;\n       while (anchorLink.childNodes.length) {\n         parent.insertBefore(anchorLink.childNodes[0], anchorLink);\n       }\n \n       // Now, remove the anchor.\n-      removeNode(anchorLink);\n+      anchorLink.remove();\n     });\n \n     return {\n@@ -90,11 +90,10 @@ export class TocService {\n   }\n \n   private findTocHeadings(docElement: Element): HTMLHeadingElement[] {\n-    // const headings = querySelectorAll(docElement, 'h1,h2,h3');\n-    const headings = querySelectorAll<HTMLHeadingElement>(docElement, 'h1,h2,h3');\n+    const headings = docElement.querySelectorAll<HTMLHeadingElement>('h1,h2,h3');\n     const skipNoTocHeadings = (heading: HTMLHeadingElement) => !/(?:no-toc|notoc)/i.test(heading.className);\n \n-    return headings.filter(skipNoTocHeadings);\n+    return Array.prototype.filter.call(headings, skipNoTocHeadings);\n   }\n \n   private resetScrollSpyInfo() {\n@@ -128,27 +127,3 @@ export class TocService {\n     }\n   }\n }\n-\n-// Helpers\n-function querySelectorAll<K extends keyof HTMLElementTagNameMap>(\n-  parent: Element,\n-  selector: K\n-): HTMLElementTagNameMap[K][];\n-function querySelectorAll<K extends keyof SVGElementTagNameMap>(\n-  parent: Element,\n-  selector: K\n-): SVGElementTagNameMap[K][];\n-function querySelectorAll<E extends Element = Element>(parent: Element, selector: string): E[];\n-function querySelectorAll(parent: Element, selector: string) {\n-  // Wrap the `NodeList` as a regular `Array` to have access to array methods.\n-  // NOTE: IE11 does not even support some methods of `NodeList`, such as\n-  //       [NodeList#forEach()](https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach).\n-  return Array.from(parent.querySelectorAll(selector));\n-}\n-\n-function removeNode(node: Node): void {\n-  if (node.parentNode !== null) {\n-    // We cannot use `Node.remove()` because of IE11.\n-    node.parentNode.removeChild(node);\n-  }\n-}"
        },
        {
            "sha": "1f42497c3ada847a7b42d4b74bcbec2e02eb41dd",
            "filename": "aio/src/styles/1-layouts/content-layout/_content-layout.scss",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/c57e22a21bd51a803baa465ec3a497306f3c8b24/aio%2Fsrc%2Fstyles%2F1-layouts%2Fcontent-layout%2F_content-layout.scss",
            "raw_url": "https://github.com/angular/angular/raw/c57e22a21bd51a803baa465ec3a497306f3c8b24/aio%2Fsrc%2Fstyles%2F1-layouts%2Fcontent-layout%2F_content-layout.scss",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fstyles%2F1-layouts%2Fcontent-layout%2F_content-layout.scss?ref=c57e22a21bd51a803baa465ec3a497306f3c8b24",
            "patch": "@@ -6,8 +6,6 @@\n }\n \n .sidenav-content {\n-  display: block;  // This is required for browsers that do not recognize `<main>` as a block\n-                   // element (such as IE11).\n   min-height: 100vh;\n   padding: 80px 3rem 2rem;\n   max-width: 50em;"
        },
        {
            "sha": "a56514c9bd51ffa2ce51d3a87f71c5846390960b",
            "filename": "aio/src/styles/2-modules/code/_code.scss",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/c57e22a21bd51a803baa465ec3a497306f3c8b24/aio%2Fsrc%2Fstyles%2F2-modules%2Fcode%2F_code.scss",
            "raw_url": "https://github.com/angular/angular/raw/c57e22a21bd51a803baa465ec3a497306f3c8b24/aio%2Fsrc%2Fstyles%2F2-modules%2Fcode%2F_code.scss",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fstyles%2F2-modules%2Fcode%2F_code.scss?ref=c57e22a21bd51a803baa465ec3a497306f3c8b24",
            "patch": "@@ -101,8 +101,6 @@ aio-code {\n       top: -7px;\n       right: -19px;\n       padding: 0;\n-      overflow: visible; // This is required for the button to be displayed correctly in IE11.\n-\n       background-color: transparent;\n       border: none;\n       cursor: pointer;"
        },
        {
            "sha": "67b67072fb6933ca16324828dd313920bd39e624",
            "filename": "aio/src/styles/2-modules/features/_features.scss",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/c57e22a21bd51a803baa465ec3a497306f3c8b24/aio%2Fsrc%2Fstyles%2F2-modules%2Ffeatures%2F_features.scss",
            "raw_url": "https://github.com/angular/angular/raw/c57e22a21bd51a803baa465ec3a497306f3c8b24/aio%2Fsrc%2Fstyles%2F2-modules%2Ffeatures%2F_features.scss",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fstyles%2F2-modules%2Ffeatures%2F_features.scss?ref=c57e22a21bd51a803baa465ec3a497306f3c8b24",
            "patch": "@@ -24,8 +24,6 @@\n   .feature-row {\n     display: flex;\n     flex-wrap: wrap;\n-    justify-content: space-around;  // This is required for browsers that do not support\n-                                    // `space-evenly` (such as IE11).\n     justify-content: space-evenly;\n \n     @media (max-width: 1057px) {"
        },
        {
            "sha": "8e296fe352f6851575e49e3f88450793c045fe74",
            "filename": "aio/src/testing/dom-utils.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 16,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/b184f0aa24c25b79ba401a416c8d754e65deefa1/aio%2Fsrc%2Ftesting%2Fdom-utils.ts",
            "raw_url": "https://github.com/angular/angular/raw/b184f0aa24c25b79ba401a416c8d754e65deefa1/aio%2Fsrc%2Ftesting%2Fdom-utils.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Ftesting%2Fdom-utils.ts?ref=b184f0aa24c25b79ba401a416c8d754e65deefa1",
            "patch": "@@ -1,16 +0,0 @@\n-/**\n- * Create a `CustomEvent` (even on browsers where `CustomEvent` is not a constructor).\n- */\n-export function createCustomEvent(doc: Document, name: string, detail: any): CustomEvent {\n-  const bubbles = false;\n-  const cancelable = false;\n-\n-  // On IE11, `CustomEvent` is not a constructor.\n-  if (typeof CustomEvent !== 'function') {\n-    const event = doc.createEvent('CustomEvent');\n-    event.initCustomEvent(name, bubbles, cancelable, detail);\n-    return event;\n-  }\n-\n-  return new CustomEvent(name, {bubbles, cancelable, detail});\n-}"
        }
    ],
    "stats": {
        "total": 74,
        "additions": 11,
        "deletions": 63
    }
}