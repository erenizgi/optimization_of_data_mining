{
    "author": "alan-agius4",
    "message": "test(dev-infra): remove chai from ts-api-guardian tests (#41503)\n\nRefactor ts-api-guardian tests to use jasmine instead of chai\n\nPR Close #41503",
    "sha": "8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a",
    "files": [
        {
            "sha": "8317637cb35bf624bc3d5f806d2a71bf598a7062",
            "filename": "package.json",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/package.json",
            "raw_url": "https://github.com/angular/angular/raw/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a",
            "patch": "@@ -81,7 +81,6 @@\n     \"@types/babel__traverse\": \"^7.0.9\",\n     \"@types/base64-js\": \"1.2.5\",\n     \"@types/bluebird\": \"^3.5.27\",\n-    \"@types/chai\": \"^4.1.2\",\n     \"@types/convert-source-map\": \"^1.5.1\",\n     \"@types/diff\": \"^3.5.1\",\n     \"@types/events\": \"3.0.0\",\n@@ -113,7 +112,6 @@\n     \"bluebird\": \"^3.7.2\",\n     \"brotli\": \"^1.3.2\",\n     \"canonical-path\": \"1.0.0\",\n-    \"chai\": \"4.2.0\",\n     \"chalk\": \"^2.3.1\",\n     \"chokidar\": \"^3.5.1\",\n     \"convert-source-map\": \"^1.5.1\","
        },
        {
            "sha": "bd23cfe028510c2f25d4b1d4fc41e3d730a6ecc3",
            "filename": "tools/ts-api-guardian/BUILD.bazel",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/tools%2Fts-api-guardian%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/tools%2Fts-api-guardian%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2FBUILD.bazel?ref=8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a",
            "patch": "@@ -61,10 +61,8 @@ ts_library(\n     tsconfig = \"//tools:tsconfig-test\",\n     deps = [\n         \":lib\",\n-        \"@npm//@types/chai\",\n         \"@npm//@types/jasmine\",\n         \"@npm//@types/node\",\n-        \"@npm//chai\",\n         \"@npm//jasmine\",\n         \"@npm//typescript\",\n     ],"
        },
        {
            "sha": "ca5ac5211650c32edbffe19a35bfab781f70e6d0",
            "filename": "tools/ts-api-guardian/lib/serializer.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/tools%2Fts-api-guardian%2Flib%2Fserializer.ts",
            "raw_url": "https://github.com/angular/angular/raw/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/tools%2Fts-api-guardian%2Flib%2Fserializer.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Flib%2Fserializer.ts?ref=8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a",
            "patch": "@@ -204,7 +204,7 @@ class ResolvedDeclarationEmitter {\n           }\n           throw new Error(\n               `Symbol \"${resolvedSymbol.name}\" was aliased as \"${s.name}\". ` +\n-              `Aliases are not supported.\"`);\n+              `Aliases are not supported.`);\n         }\n \n         return resolvedSymbol;"
        },
        {
            "sha": "4ffb3f9d3655e2bd3dba2d832f25f327a61bda0b",
            "filename": "tools/ts-api-guardian/package.json",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/tools%2Fts-api-guardian%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/tools%2Fts-api-guardian%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Fpackage.json?ref=8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a",
            "patch": "@@ -19,12 +19,10 @@\n     \"minimist\": \"^1.2.0\"\n   },\n   \"devDependencies\": {\n-    \"@types/chai\": \"^4.1.2\",\n     \"@types/diff\": \"^3.5.1\",\n     \"@types/jasmine\": \"^2.8.8\",\n     \"@types/minimist\": \"^1.2.0\",\n     \"@types/node\": \"^10.9.4\",\n-    \"chai\": \"^4.1.2\",\n     \"jasmine\": \"^3.1.0\",\n     \"source-map-support\": \"^0.5.9\",\n     \"typescript\": \"4.2.3\""
        },
        {
            "sha": "3b5ad0b91b0ecf2f51312d6294d5a1439d6199b0",
            "filename": "tools/ts-api-guardian/test/cli_e2e_test.ts",
            "status": "modified",
            "additions": 22,
            "deletions": 21,
            "changes": 43,
            "blob_url": "https://github.com/angular/angular/blob/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/tools%2Fts-api-guardian%2Ftest%2Fcli_e2e_test.ts",
            "raw_url": "https://github.com/angular/angular/raw/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/tools%2Fts-api-guardian%2Ftest%2Fcli_e2e_test.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Fcli_e2e_test.ts?ref=8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a",
            "patch": "@@ -6,11 +6,10 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import chai = require('chai');\n import * as child_process from 'child_process';\n import * as fs from 'fs';\n import * as path from 'path';\n-import {assertFileEqual, unlinkRecursively} from './helpers';\n+import {assertFileEqual} from './helpers';\n \n const BINARY_PATH = require.resolve('../ts-api-guardian/bin/ts-api-guardian');\n \n@@ -24,46 +23,46 @@ describe('cli: e2e test', () => {\n   });\n \n   afterEach(() => {\n-    unlinkRecursively(outDir);\n+    fs.rmdirSync(outDir, {recursive: true});\n   });\n \n   it('should print usage without any argument', () => {\n     const {stderr} = execute([]);\n-    chai.assert.match(stderr, /Usage/);\n+    expect(stderr).toMatch(/Usage/);\n   });\n \n   it('should show help message with --help', () => {\n     const {stdout} = execute(['--help']);\n-    chai.assert.match(stdout, /Usage/);\n+    expect(stdout).toMatch(/Usage/);\n   });\n \n   it('should generate golden file with --out', () => {\n     const simpleFile = path.join(outDir, 'simple.d.ts');\n     const {status, stderr} = execute(['--out', simpleFile, 'test/fixtures/simple.d.ts']);\n-    chai.assert.equal(status, 0, stderr);\n+    expect(status).toBe(0, stderr);\n     assertFileEqual(simpleFile, 'test/fixtures/simple_expected.d.ts');\n   });\n \n   it('should verify golden file with --verify and exit cleanly on no difference', () => {\n     const {stdout, status} =\n         execute(['--verify', 'test/fixtures/simple_expected.d.ts', 'test/fixtures/simple.d.ts']);\n-    chai.assert.equal(stdout, '');\n-    chai.assert.equal(status, 0);\n+    expect(stdout).toBe('');\n+    expect(status).toBe(0);\n   });\n \n   it('should verify golden file with --verify and exit with error on difference', () => {\n     const {stdout, status} = execute(\n         ['--verify', 'test/fixtures/verify_expected.d.ts', 'test/fixtures/verify_entrypoint.d.ts']);\n-    chai.assert.equal(stdout, fs.readFileSync('test/fixtures/verify.patch').toString());\n-    chai.assert.equal(status, 1);\n+    expect(stdout).toBe(fs.readFileSync('test/fixtures/verify.patch').toString());\n+    expect(status).toBe(1);\n   });\n \n   it('should generate multiple golden files with --outDir and --rootDir', () => {\n     const {status} = execute([\n       '--outDir', outDir, '--rootDir', 'test/fixtures', 'test/fixtures/simple.d.ts',\n       'test/fixtures/sorting.d.ts'\n     ]);\n-    chai.assert.equal(status, 0);\n+    expect(status).toBe(0);\n     assertFileEqual(path.join(outDir, 'simple.d.ts'), 'test/fixtures/simple_expected.d.ts');\n     assertFileEqual(path.join(outDir, 'sorting.d.ts'), 'test/fixtures/sorting_expected.d.ts');\n   });\n@@ -75,16 +74,17 @@ describe('cli: e2e test', () => {\n       '--verifyDir', outDir, '--rootDir', 'test/fixtures', 'test/fixtures/simple.d.ts',\n       'test/fixtures/sorting.d.ts'\n     ]);\n-    chai.assert.equal(stdout, '');\n-    chai.assert.equal(status, 0);\n+    expect(stdout).toBe('');\n+    expect(status).toBe(0);\n   });\n \n   it('should generate respecting --stripExportPattern', () => {\n     const {status} = execute([\n       '--out', path.join(outDir, 'underscored.d.ts'), '--stripExportPattern', '^__.*',\n       'test/fixtures/underscored.d.ts'\n     ]);\n-    chai.assert.equal(status, 0);\n+\n+    expect(status).toBe(0);\n     assertFileEqual(\n         path.join(outDir, 'underscored.d.ts'), 'test/fixtures/underscored_expected.d.ts');\n   });\n@@ -94,7 +94,7 @@ describe('cli: e2e test', () => {\n       '--out', path.join(outDir, 'stripped_alias.d.ts'), '--stripExportPattern', '^__.*',\n       'test/fixtures/stripped_alias.d.ts'\n     ]);\n-    chai.assert.equal(status, 0);\n+    expect(status).toBe(0);\n     assertFileEqual(\n         path.join(outDir, 'stripped_alias.d.ts'), 'test/fixtures/stripped_alias_expected.d.ts');\n   });\n@@ -104,17 +104,17 @@ describe('cli: e2e test', () => {\n       '--verify', 'test/fixtures/underscored_expected.d.ts', 'test/fixtures/underscored.d.ts',\n       '--stripExportPattern', '^__.*'\n     ]);\n-    chai.assert.equal(stdout, '');\n-    chai.assert.equal(status, 0);\n+    expect(stdout).toBe('');\n+    expect(status).toBe(0);\n   });\n \n   it('should respect --allowModuleIdentifiers', () => {\n     const {stdout, status} = execute([\n       '--verify', 'test/fixtures/module_identifier_expected.d.ts', '--allowModuleIdentifiers',\n       'foo', 'test/fixtures/module_identifier.d.ts'\n     ]);\n-    chai.assert.equal(stdout, '');\n-    chai.assert.equal(status, 0);\n+    expect(stdout).toBe('');\n+    expect(status).toBe(0);\n   });\n });\n \n@@ -136,8 +136,9 @@ function execute(args: string[]): {stdout: string, stderr: string, status: numbe\n       'NODE_PATH': nodePath,\n     }\n   });\n-  chai.assert(!output.error, 'Child process failed or timed out: ' + output.error);\n-  chai.assert(!output.signal, `Child process killed by signal ${output.signal}`);\n+\n+  expect(output.error).toBeFalsy(`Child process failed or timed out: ${output.error}`);\n+  expect(output.signal).toBeFalsy(`Child process killed by signal ${output.signal}`);\n \n   return {\n     stdout: output.stdout.toString(),"
        },
        {
            "sha": "d1eff0f96cadaa6e0efe06fce2c124b1c5a9cf58",
            "filename": "tools/ts-api-guardian/test/cli_unit_test.ts",
            "status": "modified",
            "additions": 25,
            "deletions": 27,
            "changes": 52,
            "blob_url": "https://github.com/angular/angular/blob/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/tools%2Fts-api-guardian%2Ftest%2Fcli_unit_test.ts",
            "raw_url": "https://github.com/angular/angular/raw/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/tools%2Fts-api-guardian%2Ftest%2Fcli_unit_test.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Fcli_unit_test.ts?ref=8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a",
            "patch": "@@ -6,78 +6,76 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import chai = require('chai');\n import {parseArguments} from '../lib/cli';\n \n describe('cli: parseArguments', () => {\n   it('should show usage with error when supplied with no arguments', () => {\n     const {mode, errors} = parseArguments([]);\n-    chai.assert.equal(mode, 'help');\n-    chai.assert.deepEqual(errors, ['No input file specified.']);\n+    expect(mode).toBe('help');\n+    expect(errors).toEqual(['No input file specified.']);\n   });\n \n   it('should show usage without error when supplied with --help', () => {\n     const {mode, errors} = parseArguments(['--help']);\n-    chai.assert.equal(mode, 'help');\n-    chai.assert.deepEqual(errors, []);\n+    expect(mode).toBe('help');\n+    expect(errors).toEqual([]);\n   });\n \n   it('should show usage with error when supplied with none of --out/verify[Dir]', () => {\n     const {mode, errors} = parseArguments(['input.d.ts']);\n-    chai.assert.equal(mode, 'help');\n-    chai.assert.deepEqual(errors, ['Specify either --out[Dir] or --verify[Dir]']);\n+    expect(mode).toBe('help');\n+    expect(errors).toEqual(['Specify either --out[Dir] or --verify[Dir]']);\n   });\n \n   it('should show usage with error when supplied with both of --out/verify[Dir]', () => {\n     const {mode, errors} =\n         parseArguments(['--out', 'out.d.ts', '--verifyDir', 'golden.d.ts', 'input.d.ts']);\n-    chai.assert.equal(mode, 'help');\n-    chai.assert.deepEqual(errors, ['Specify either --out[Dir] or --verify[Dir]']);\n+    expect(mode).toBe('help');\n+    expect(errors).toEqual(['Specify either --out[Dir] or --verify[Dir]']);\n   });\n \n   it('should show usage with error when supplied without input file', () => {\n     const {mode, errors} = parseArguments(['--out', 'output.d.ts']);\n-    chai.assert.equal(mode, 'help');\n-    chai.assert.deepEqual(errors, ['No input file specified.']);\n+    expect(mode).toBe('help');\n+    expect(errors).toEqual(['No input file specified.']);\n   });\n \n   it('should show usage with error when supplied without input file', () => {\n     const {mode, errors} = parseArguments(['--out', 'output.d.ts', 'first.d.ts', 'second.d.ts']);\n-    chai.assert.equal(mode, 'help');\n-    chai.assert.deepEqual(errors, ['More than one input specified. Use --outDir instead.']);\n+    expect(mode).toBe('help');\n+    expect(errors).toEqual(['More than one input specified. Use --outDir instead.']);\n   });\n \n   it('should use out mode when supplied with --out', () => {\n     const {argv, mode, errors} = parseArguments(['--out', 'out.d.ts', 'input.d.ts']);\n-    chai.assert.equal(argv['out'], 'out.d.ts');\n-    chai.assert.deepEqual(argv._, ['input.d.ts']);\n-    chai.assert.equal(mode, 'out');\n-    chai.assert.deepEqual(errors, []);\n+    expect(argv['out']).toBe('out.d.ts');\n+    expect(argv._).toEqual(['input.d.ts']);\n+    expect(mode).toBe('out');\n+    expect(errors).toEqual([]);\n   });\n \n   it('should use verify mode when supplied with --verify', () => {\n     const {argv, mode, errors} = parseArguments(['--verify', 'out.d.ts', 'input.d.ts']);\n-    chai.assert.equal(argv['verify'], 'out.d.ts');\n-    chai.assert.deepEqual(argv._, ['input.d.ts']);\n-    chai.assert.equal(mode, 'verify');\n-    chai.assert.deepEqual(errors, []);\n+    expect(argv['verify']).toBe('out.d.ts');\n+    expect(argv._).toEqual(['input.d.ts']);\n+    expect(mode).toBe('verify');\n+    expect(errors).toEqual([]);\n   });\n \n   it('should show usage with error when supplied with --autoDiscoverEntrypoints without --baseDir',\n      () => {\n        const {mode, errors} =\n            parseArguments(['--autoDiscoverEntrypoints', '--outDir', 'something']);\n-       chai.assert.equal(mode, 'help');\n-       chai.assert.deepEqual(\n-           errors, ['--rootDir must be provided with --autoDiscoverEntrypoints.']);\n+       expect(mode).toBe('help');\n+       expect(errors).toEqual(['--rootDir must be provided with --autoDiscoverEntrypoints.']);\n      });\n \n   it('should show usage with error when supplied with --autoDiscoverEntrypoints without --outDir/verifyDir',\n      () => {\n        const {mode, errors} =\n            parseArguments(['--autoDiscoverEntrypoints', '--rootDir', 'something']);\n-       chai.assert.equal(mode, 'help');\n-       chai.assert.deepEqual(\n-           errors, ['--outDir or --verifyDir must be used with --autoDiscoverEntrypoints.']);\n+       expect(mode).toBe('help');\n+       expect(errors).toEqual(\n+           ['--outDir or --verifyDir must be used with --autoDiscoverEntrypoints.']);\n      });\n });"
        },
        {
            "sha": "5079a45045da482de49e8c6594e97f976ad615d3",
            "filename": "tools/ts-api-guardian/test/helpers.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 16,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/tools%2Fts-api-guardian%2Ftest%2Fhelpers.ts",
            "raw_url": "https://github.com/angular/angular/raw/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/tools%2Fts-api-guardian%2Ftest%2Fhelpers.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Fhelpers.ts?ref=8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a",
            "patch": "@@ -6,22 +6,8 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import * as chai from 'chai';\n-import * as fs from 'fs';\n-import * as path from 'path';\n-\n-export function unlinkRecursively(file: string) {\n-  if (fs.statSync(file).isDirectory()) {\n-    for (const f of fs.readdirSync(file)) {\n-      unlinkRecursively(path.join(file, f));\n-    }\n-    fs.rmdirSync(file);\n-  } else {\n-    fs.unlinkSync(file);\n-  }\n-}\n+import {readFileSync} from 'fs';\n \n export function assertFileEqual(actualFile: string, expectedFile: string) {\n-  chai.assert.equal(\n-      fs.readFileSync(actualFile).toString(), fs.readFileSync(expectedFile).toString());\n+  expect(readFileSync(actualFile).toString()).toBe(readFileSync(expectedFile).toString());\n }"
        },
        {
            "sha": "e46881059b0864e16f7df02965ba087f9c222355",
            "filename": "tools/ts-api-guardian/test/integration_test.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 11,
            "changes": 22,
            "blob_url": "https://github.com/angular/angular/blob/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/tools%2Fts-api-guardian%2Ftest%2Fintegration_test.ts",
            "raw_url": "https://github.com/angular/angular/raw/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/tools%2Fts-api-guardian%2Ftest%2Fintegration_test.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Fintegration_test.ts?ref=8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a",
            "patch": "@@ -6,11 +6,12 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import * as chai from 'chai';\n import * as fs from 'fs';\n import * as path from 'path';\n+\n import * as main from '../lib/main';\n-import {assertFileEqual, unlinkRecursively} from './helpers';\n+\n+import {assertFileEqual} from './helpers';\n \n describe('integration test: public api', () => {\n   let _warn: any = null;\n@@ -61,7 +62,7 @@ describe('integration test: public api', () => {\n \n   it('should remove reexported external symbols', () => {\n     check('test/fixtures/reexported_extern.d.ts', 'test/fixtures/reexported_extern_expected.d.ts');\n-    chai.assert.deepEqual(warnings, [\n+    expect(warnings).toEqual([\n       'test/fixtures/reexported_extern.d.ts(5,1): error: No export declaration found for symbol \"CompilerHost\"'\n     ]);\n   });\n@@ -75,9 +76,8 @@ describe('integration test: public api', () => {\n   });\n \n   it('should throw on passing a .ts file as an input', () => {\n-    chai.assert.throws(() => {\n-      main.publicApi('test/fixtures/empty.ts');\n-    }, 'Source file \"test/fixtures/empty.ts\" is not a declaration file');\n+    expect(() => main.publicApi('test/fixtures/empty.ts'))\n+        .toThrowError('Source file \"test/fixtures/empty.ts\" is not a declaration file');\n   });\n \n   it('should respect serialization options', () => {\n@@ -99,7 +99,7 @@ describe('integration test: generateGoldenFile', () => {\n   });\n \n   afterEach(() => {\n-    unlinkRecursively(outDir);\n+    fs.rmdirSync(outDir, {recursive: true});\n   });\n \n \n@@ -129,23 +129,23 @@ describe('integration test: verifyAgainstGoldenFile', () => {\n   it('should check an entrypoint against a golden file on equal', () => {\n     const diff = main.verifyAgainstGoldenFile(\n         'test/fixtures/reexported_classes.d.ts', 'test/fixtures/reexported_classes_expected.d.ts');\n-    chai.assert.equal(diff, '');\n+    expect(diff).toBe('');\n   });\n \n   it('should check an entrypoint against a golden file with proper diff message', () => {\n     const diff = main.verifyAgainstGoldenFile(\n         'test/fixtures/verify_entrypoint.d.ts', 'test/fixtures/verify_expected.d.ts');\n-    chai.assert.equal(diff, fs.readFileSync('test/fixtures/verify.patch').toString());\n+    expect(diff).toBe(fs.readFileSync('test/fixtures/verify.patch').toString());\n   });\n \n   it('should respect serialization options', () => {\n     const diff = main.verifyAgainstGoldenFile(\n         'test/fixtures/underscored.d.ts', 'test/fixtures/underscored_expected.d.ts',\n         {stripExportPattern: /^__.*/});\n-    chai.assert.equal(diff, '');\n+    expect(diff).toBe('');\n   });\n });\n \n function check(sourceFile: string, expectedFile: string, options: main.SerializationOptions = {}) {\n-  chai.assert.equal(main.publicApi(sourceFile, options), fs.readFileSync(expectedFile).toString());\n+  expect(main.publicApi(sourceFile, options)).toBe(fs.readFileSync(expectedFile).toString());\n }"
        },
        {
            "sha": "c74205b7209ff2658aa23dc783a5a44cc593f48a",
            "filename": "tools/ts-api-guardian/test/unit_test.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 7,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/tools%2Fts-api-guardian%2Ftest%2Funit_test.ts",
            "raw_url": "https://github.com/angular/angular/raw/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/tools%2Fts-api-guardian%2Ftest%2Funit_test.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Ftest%2Funit_test.ts?ref=8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a",
            "patch": "@@ -6,7 +6,6 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import * as chai from 'chai';\n import * as ts from 'typescript';\n \n import {publicApiInternal, SerializationOptions} from '../lib/serializer';\n@@ -125,8 +124,8 @@ describe('unit test', () => {\n     const expected = `\n     `;\n     check({'classes_and_interfaces.d.ts': classesAndInterfaces, 'file.d.ts': input}, expected);\n-    chai.assert.deepEqual(\n-        warnings, ['file.d.ts(1,1): error: No export declaration found for symbol \"Foo\"']);\n+    expect(warnings).toEqual(\n+        ['file.d.ts(1,1): error: No export declaration found for symbol \"Foo\"']);\n   });\n \n   it('should sort exports', () => {\n@@ -634,14 +633,12 @@ function getMockHost(files: {[name: string]: string}): ts.CompilerHost {\n function check(\n     files: {[name: string]: string}, expected: string, options: SerializationOptions = {}) {\n   const actual = publicApiInternal(getMockHost(files), 'file.d.ts', {}, options);\n-  chai.assert.equal(actual.trim(), stripExtraIndentation(expected).trim());\n+  expect(actual.trim()).toBe(stripExtraIndentation(expected).trim());\n }\n \n function checkThrows(\n     files: {[name: string]: string}, error: string, options: SerializationOptions = {}) {\n-  chai.assert.throws(() => {\n-    publicApiInternal(getMockHost(files), 'file.d.ts', {}, options);\n-  }, error);\n+  expect(() => publicApiInternal(getMockHost(files), 'file.d.ts', {}, options)).toThrowError(error);\n }\n \n function stripExtraIndentation(text: string) {"
        },
        {
            "sha": "2c63b4553756c5aa0c3e8238c5af9dcae440e250",
            "filename": "yarn.lock",
            "status": "modified",
            "additions": 0,
            "deletions": 66,
            "changes": 66,
            "blob_url": "https://github.com/angular/angular/blob/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/yarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a/yarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/yarn.lock?ref=8b9d025b1392a8fe1bb0b3d14ef148e7e5c4105a",
            "patch": "@@ -2550,11 +2550,6 @@\n   resolved \"https://registry.yarnpkg.com/@types/bluebird/-/bluebird-3.5.33.tgz#d79c020f283bd50bd76101d7d300313c107325fc\"\n   integrity sha512-ndEo1xvnYeHxm7I/5sF6tBvnsA4Tdi3zj1keRKRs12SP+2ye2A27NDJ1B6PqkfMbGAcT+mqQVqbZRIrhfOp5PQ==\n \n-\"@types/chai@^4.1.2\":\n-  version \"4.2.11\"\n-  resolved \"https://registry.yarnpkg.com/@types/chai/-/chai-4.2.11.tgz#d3614d6c5f500142358e6ed24e1bf16657536c50\"\n-  integrity sha512-t7uW6eFafjO+qJ3BIV2gGUyZs27egcNRkUdalkud+Qa3+kg//f129iuOFivHDXQ+vnU3fDXuwgv0cqMCbcE8sw==\n-\n \"@types/cli-progress@^3.4.2\":\n   version \"3.4.2\"\n   resolved \"https://registry.yarnpkg.com/@types/cli-progress/-/cli-progress-3.4.2.tgz#03dfa3d507e9dda85ba4a14006c37e8b7094c605\"\n@@ -3610,11 +3605,6 @@ assert@^1.1.1:\n     object-assign \"^4.1.1\"\n     util \"0.10.3\"\n \n-assertion-error@^1.1.0:\n-  version \"1.1.0\"\n-  resolved \"https://registry.yarnpkg.com/assertion-error/-/assertion-error-1.1.0.tgz#e60b6b0e8f301bd97e5375215bda406c85118c0b\"\n-  integrity sha512-jgsaNduz+ndvGyFt3uSuWqvy4lCnIJiovtouQN5JZHOKCS2QuhEdbcQHFhVksz2N2U9hXJo8odG7ETyWlEeuDw==\n-\n assign-symbols@^1.0.0:\n   version \"1.0.0\"\n   resolved \"https://registry.yarnpkg.com/assign-symbols/-/assign-symbols-1.0.0.tgz#59667f41fadd4f20ccbc2bb96b8d4f7f78ec0367\"\n@@ -4469,30 +4459,6 @@ caseless@~0.12.0:\n   resolved \"https://registry.yarnpkg.com/caseless/-/caseless-0.12.0.tgz#1b681c21ff84033c826543090689420d187151dc\"\n   integrity sha1-G2gcIf+EAzyCZUMJBolCDRhxUdw=\n \n-chai@4.2.0:\n-  version \"4.2.0\"\n-  resolved \"https://registry.yarnpkg.com/chai/-/chai-4.2.0.tgz#760aa72cf20e3795e84b12877ce0e83737aa29e5\"\n-  integrity sha512-XQU3bhBukrOsQCuwZndwGcCVQHyZi53fQ6Ys1Fym7E4olpIqqZZhhoFJoaKVvV17lWQoXYwgWN2nF5crA8J2jw==\n-  dependencies:\n-    assertion-error \"^1.1.0\"\n-    check-error \"^1.0.2\"\n-    deep-eql \"^3.0.1\"\n-    get-func-name \"^2.0.0\"\n-    pathval \"^1.1.0\"\n-    type-detect \"^4.0.5\"\n-\n-chai@^4.1.2:\n-  version \"4.3.4\"\n-  resolved \"https://registry.yarnpkg.com/chai/-/chai-4.3.4.tgz#b55e655b31e1eac7099be4c08c21964fce2e6c49\"\n-  integrity sha512-yS5H68VYOCtN1cjfwumDSuzn/9c+yza4f3reKXlE5rUg7SFcCEy90gJvydNgOYtblyf4Zi6jIWRnXOgErta0KA==\n-  dependencies:\n-    assertion-error \"^1.1.0\"\n-    check-error \"^1.0.2\"\n-    deep-eql \"^3.0.1\"\n-    get-func-name \"^2.0.0\"\n-    pathval \"^1.1.1\"\n-    type-detect \"^4.0.5\"\n-\n \"chainsaw@>=0.0.7 <0.1\":\n   version \"0.0.9\"\n   resolved \"https://registry.yarnpkg.com/chainsaw/-/chainsaw-0.0.9.tgz#11a05102d1c4c785b6d0415d336d5a3a1612913e\"\n@@ -4553,11 +4519,6 @@ chardet@^0.7.0:\n   resolved \"https://registry.yarnpkg.com/chardet/-/chardet-0.7.0.tgz#90094849f0937f2eedc2425d0d28a9e5f0cbad9e\"\n   integrity sha512-mT8iDcrh03qDGRRmoA2hmBJnxpllMR+0/0qlzjqZES6NdiWDcZkCNAk4rPFZ9Q85r27unkiNNg8ZOiwZXBHwcA==\n \n-check-error@^1.0.2:\n-  version \"1.0.2\"\n-  resolved \"https://registry.yarnpkg.com/check-error/-/check-error-1.0.2.tgz#574d312edd88bb5dd8912e9286dd6c0aed4aac82\"\n-  integrity sha1-V00xLt2Iu13YkS6Sht1sCu1KrII=\n-\n check-side-effects@0.0.23:\n   version \"0.0.23\"\n   resolved \"https://registry.yarnpkg.com/check-side-effects/-/check-side-effects-0.0.23.tgz#0daa99d6c26be01467483f3ae0bdb3c4b22d59b2\"\n@@ -6036,13 +5997,6 @@ decomment@^0.9.2:\n   dependencies:\n     esprima \"4.0.1\"\n \n-deep-eql@^3.0.1:\n-  version \"3.0.1\"\n-  resolved \"https://registry.yarnpkg.com/deep-eql/-/deep-eql-3.0.1.tgz#dfc9404400ad1c8fe023e7da1df1c147c4b444df\"\n-  integrity sha512-+QeIQyN5ZuO+3Uk5DYh6/1eKO0m0YmJFGNmFHGACpf1ClL1nmlV/p4gNgbl2pJGxgXb4faqo6UE+M5ACEMyVcw==\n-  dependencies:\n-    type-detect \"^4.0.0\"\n-\n deep-equal@^1.0.1:\n   version \"1.1.1\"\n   resolved \"https://registry.yarnpkg.com/deep-equal/-/deep-equal-1.1.1.tgz#b5c98c942ceffaf7cb051e24e1434a25a2e6076a\"\n@@ -7708,11 +7662,6 @@ get-caller-file@^2.0.1, get-caller-file@^2.0.5:\n   resolved \"https://registry.yarnpkg.com/get-caller-file/-/get-caller-file-2.0.5.tgz#4f94412a82db32f36e3b0b9741f8a97feb031f7e\"\n   integrity sha512-DyFP3BM/3YHTQOCUL/w0OZHR0lpKeGrxotcHWcqNEdnltqFwXVfhEBQ94eIo34AfQpo0rGki4cyIiftY06h2Fg==\n \n-get-func-name@^2.0.0:\n-  version \"2.0.0\"\n-  resolved \"https://registry.yarnpkg.com/get-func-name/-/get-func-name-2.0.0.tgz#ead774abee72e20409433a066366023dd6887a41\"\n-  integrity sha1-6td0q+5y4gQJQzoGY2YCPdaIekE=\n-\n get-intrinsic@^1.0.2:\n   version \"1.1.1\"\n   resolved \"https://registry.yarnpkg.com/get-intrinsic/-/get-intrinsic-1.1.1.tgz#15f59f376f855c446963948f0d24cd3637b4abc6\"\n@@ -12151,16 +12100,6 @@ path-type@^4.0.0:\n   resolved \"https://registry.yarnpkg.com/path-type/-/path-type-4.0.0.tgz#84ed01c0a7ba380afe09d90a8c180dcd9d03043b\"\n   integrity sha512-gDKb8aZMDeD/tZWs9P6+q0J9Mwkdl6xMV8TjnGP3qJVJ06bdMgkbBlLU8IdfOsIsFz2BW1rNVT3XuNEl8zPAvw==\n \n-pathval@^1.1.0:\n-  version \"1.1.0\"\n-  resolved \"https://registry.yarnpkg.com/pathval/-/pathval-1.1.0.tgz#b942e6d4bde653005ef6b71361def8727d0645e0\"\n-  integrity sha1-uULm1L3mUwBe9rcTYd74cn0GReA=\n-\n-pathval@^1.1.1:\n-  version \"1.1.1\"\n-  resolved \"https://registry.yarnpkg.com/pathval/-/pathval-1.1.1.tgz#8534e77a77ce7ac5a2512ea21e0fdb8fcf6c3d8d\"\n-  integrity sha512-Dp6zGqpTdETdR63lehJYPeIOqpiNBNtc7BpWSLrOje7UaIsE5aY92r/AunQA7rsXvet3lrJ3JnZX29UPTKXyKQ==\n-\n pause-stream@0.0.11:\n   version \"0.0.11\"\n   resolved \"https://registry.yarnpkg.com/pause-stream/-/pause-stream-0.0.11.tgz#fe5a34b0cbce12b5aa6a2b403ee2e73b602f1445\"\n@@ -15549,11 +15488,6 @@ type-check@~0.3.2:\n   dependencies:\n     prelude-ls \"~1.1.2\"\n \n-type-detect@^4.0.0, type-detect@^4.0.5:\n-  version \"4.0.8\"\n-  resolved \"https://registry.yarnpkg.com/type-detect/-/type-detect-4.0.8.tgz#7646fb5f18871cfbb7749e69bd39a6388eb7450c\"\n-  integrity sha512-0fr/mIH1dlO+x7TlcMy+bIDqKPsw/70tVyeHW787goQjhmqaZe10uwLujubK9q9Lg6Fiho1KUKDYz0Z7k7g5/g==\n-\n type-fest@^0.11.0:\n   version \"0.11.0\"\n   resolved \"https://registry.yarnpkg.com/type-fest/-/type-fest-0.11.0.tgz#97abf0872310fed88a5c466b25681576145e33f1\""
        }
    ],
    "stats": {
        "total": 220,
        "additions": 65,
        "deletions": 155
    }
}