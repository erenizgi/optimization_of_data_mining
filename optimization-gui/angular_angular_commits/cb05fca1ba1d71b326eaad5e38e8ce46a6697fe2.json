{
    "author": "gkalpak",
    "message": "docs(dev-infra): add instructions for updating GeckoDriver in `browsers/README.md` (#40150)\n\nThis commit adds instructions in `dev-infra/browsers/README.md` on how\nto update the version of GeckoDriver (the WebDriver implementation for\nFirefox browsers).\n\nNOTE:\nThe gecko driver download URLs perform redirection, so the `curl`\ncommand needs to be run with the `-L/--location` option to follow\nredirects. I updated all `curl` commands (even those that are not used\non gecko driver download URLs) for consistency.\n\nPR Close #40150",
    "sha": "cb05fca1ba1d71b326eaad5e38e8ce46a6697fe2",
    "files": [
        {
            "sha": "0ecb57c0ed4eb413b78714e9742cd826f1134f63",
            "filename": "dev-infra/browsers/README.md",
            "status": "modified",
            "additions": 26,
            "deletions": 2,
            "changes": 28,
            "blob_url": "https://github.com/angular/angular/blob/cb05fca1ba1d71b326eaad5e38e8ce46a6697fe2/dev-infra%2Fbrowsers%2FREADME.md",
            "raw_url": "https://github.com/angular/angular/raw/cb05fca1ba1d71b326eaad5e38e8ce46a6697fe2/dev-infra%2Fbrowsers%2FREADME.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fbrowsers%2FREADME.md?ref=cb05fca1ba1d71b326eaad5e38e8ce46a6697fe2",
            "patch": "@@ -38,7 +38,7 @@ The process of updating the Chrome or Firefox version is not straightforward, bu\n \n     Here is an example with `curl` & `shasum`:\n     ``` bash\n-    curl https://commondatastorage.googleapis.com/chromium-browser-snapshots/Linux_x64/756066/chrome-linux.zip | shasum -a 256\n+    curl -L https://commondatastorage.googleapis.com/chromium-browser-snapshots/Linux_x64/756066/chrome-linux.zip | shasum -a 256\n     ```\n \n ## Puppeteer\n@@ -82,5 +82,29 @@ platform_http_file(\n 2. Update the `sha256` checksum of the browser archives.\n     You can do this by downloading the artifacts from the URLs you just updated, and then running `shasum` on those files:\n     ```sh\n-    curl <BROWSER_URL> | sha256 -a 256\n+    curl -L <BROWSER_URL> | shasum -a 256\n+    ```\n+\n+In the same file, you can also update the version of gecko driver (the WebDriver implementation for Firefox browsers).\n+\n+1. Go to https://firefox-source-docs.mozilla.org/testing/geckodriver/Support.html and find a version that is compatible with the used version of Firefox.\n+\n+2. Update the `geckodriver` repository URLs to the desired version:\n+\n+    ```bzl\n+    platform_http_file(\n+        name = \"org_mozilla_geckodriver_amd64\",\n+        licenses = [\"reciprocal\"],  # MPL 2.0\n+        sha256 = \"d59ca434d8e41ec1e30dd7707b0c95171dd6d16056fb6db9c978449ad8b93cc0\",\n+        # Geckodriver v0.26.0\n+        urls = [\"https://github.com/mozilla/geckodriver/releases/download/v0.26.0/geckodriver-v0.26.0-linux64.tar.gz\"],\n+    )\n+    ```\n+\n+    For example, replace all occurrences of `0.26.0` with the newer version.\n+\n+3. Update the `sha256` checksum of the driver archives.\n+    You can do this by downloading the artifacts from the URLs you just updated, and then running `shasum` on those files:\n+    ```sh\n+    curl -L <DRIVER_URL> | shasum -a 256\n     ```"
        }
    ],
    "stats": {
        "total": 28,
        "additions": 26,
        "deletions": 2
    }
}