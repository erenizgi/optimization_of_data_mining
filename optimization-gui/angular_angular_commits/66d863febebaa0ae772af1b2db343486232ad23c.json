{
    "author": "Serginho",
    "message": "fix(animations): getAnimationStyle causes exceptions in older browsers (#29709)\n\nPR #29709 getAnimationStyle causes exceptions in older browsers\n\nPR Close #29709",
    "sha": "66d863febebaa0ae772af1b2db343486232ad23c",
    "files": [
        {
            "sha": "352c7fe24791399935e64b84113bbb62514b57c0",
            "filename": "packages/animations/browser/src/render/css_keyframes/element_animation_style_handler.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/66d863febebaa0ae772af1b2db343486232ad23c/packages%2Fanimations%2Fbrowser%2Fsrc%2Frender%2Fcss_keyframes%2Felement_animation_style_handler.ts",
            "raw_url": "https://github.com/angular/angular/raw/66d863febebaa0ae772af1b2db343486232ad23c/packages%2Fanimations%2Fbrowser%2Fsrc%2Frender%2Fcss_keyframes%2Felement_animation_style_handler.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fanimations%2Fbrowser%2Fsrc%2Frender%2Fcss_keyframes%2Felement_animation_style_handler.ts?ref=66d863febebaa0ae772af1b2db343486232ad23c",
            "patch": "@@ -140,8 +140,8 @@ function setAnimationStyle(element: any, name: string, value: string, index?: nu\n   element.style[prop] = value;\n }\n \n-function getAnimationStyle(element: any, name: string) {\n-  return element.style[ANIMATION_PROP + name];\n+export function getAnimationStyle(element: any, name: string) {\n+  return element.style[ANIMATION_PROP + name] || '';\n }\n \n function countChars(value: string, char: string): number {"
        },
        {
            "sha": "bc2258d7b61c8449a4febeeca6bb65b7e7adcf6f",
            "filename": "packages/animations/browser/test/render/css_keyframes/element_animation_style_handler_spec.ts",
            "status": "modified",
            "additions": 19,
            "deletions": 2,
            "changes": 21,
            "blob_url": "https://github.com/angular/angular/blob/66d863febebaa0ae772af1b2db343486232ad23c/packages%2Fanimations%2Fbrowser%2Ftest%2Frender%2Fcss_keyframes%2Felement_animation_style_handler_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/66d863febebaa0ae772af1b2db343486232ad23c/packages%2Fanimations%2Fbrowser%2Ftest%2Frender%2Fcss_keyframes%2Felement_animation_style_handler_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fanimations%2Fbrowser%2Ftest%2Frender%2Fcss_keyframes%2Felement_animation_style_handler_spec.ts?ref=66d863febebaa0ae772af1b2db343486232ad23c",
            "patch": "@@ -5,9 +5,8 @@\n  * Use of this source code is governed by an MIT-style license that can be\n  * found in the LICENSE file at https://angular.io/license\n  */\n-import {ElementAnimationStyleHandler} from '../../../src/render/css_keyframes/element_animation_style_handler';\n+import {ElementAnimationStyleHandler, getAnimationStyle} from '../../../src/render/css_keyframes/element_animation_style_handler';\n import {computeStyle} from '../../../src/util';\n-\n import {assertStyle, createElement, makeAnimationEvent, supportsAnimationEventCreation} from './shared';\n \n const EMPTY_FN = () => {};\n@@ -227,5 +226,23 @@ const EMPTY_FN = () => {};\n       element.dispatchEvent(event);\n       expect(done).toBeTruthy();\n     });\n+\n+    // Issue: https://github.com/angular/angular/issues/24094\n+    it('should not break getAnimationStyle in old browsers', () => {\n+      // Old browsers like Chrome Android 34 returns null if element.style\n+      // is not found, modern browsers returns empty string.\n+      const fakeElement = {\n+        style: {\n+          'animationstyle1': 'value',\n+          'animationstyle2': null,\n+          'animationstyle3': '',\n+          'animation': null\n+        }\n+      };\n+      expect(getAnimationStyle(fakeElement, 'style1')).toBe('value');\n+      expect(getAnimationStyle(fakeElement, 'style2')).toBe('');\n+      expect(getAnimationStyle(fakeElement, 'style3')).toBe('');\n+      expect(getAnimationStyle(fakeElement, '')).toBe('');\n+    });\n   });\n }"
        }
    ],
    "stats": {
        "total": 25,
        "additions": 21,
        "deletions": 4
    }
}