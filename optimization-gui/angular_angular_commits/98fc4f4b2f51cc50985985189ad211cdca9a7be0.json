{
    "author": "martiansnoop",
    "message": "fix(upgrade): preserve $interval.flush when ngMocks is being used (#30229)\n\nAlso preserve any other properties that the user may have decorated\n$interval with.\n\nPR Close #30229",
    "sha": "98fc4f4b2f51cc50985985189ad211cdca9a7be0",
    "files": [
        {
            "sha": "24a87ae37e81487d7ad5496c393c31f6708beffc",
            "filename": "packages/upgrade/static/src/upgrade_module.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 2,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/98fc4f4b2f51cc50985985189ad211cdca9a7be0/packages%2Fupgrade%2Fstatic%2Fsrc%2Fupgrade_module.ts",
            "raw_url": "https://github.com/angular/angular/raw/98fc4f4b2f51cc50985985189ad211cdca9a7be0/packages%2Fupgrade%2Fstatic%2Fsrc%2Fupgrade_module.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fupgrade%2Fstatic%2Fsrc%2Fupgrade_module.ts?ref=98fc4f4b2f51cc50985985189ad211cdca9a7be0",
            "patch": "@@ -116,7 +116,7 @@ import {NgAdapterInjector} from './util';\n  *\n  * {@example upgrade/static/ts/full/module.ts region='bootstrap-ng1'}\n  *\n- * Finally, kick off the whole process, by bootstraping your top level Angular `NgModule`.\n+ * Finally, kick off the whole process, by bootstrapping your top level Angular `NgModule`.\n  *\n  * {@example upgrade/static/ts/full/module.ts region='bootstrap-ng2'}\n  *\n@@ -236,7 +236,17 @@ export class UpgradeModule {\n                         });\n                       };\n \n-                  (wrappedInterval as any)['cancel'] = intervalDelegate.cancel;\n+                  (Object.keys(intervalDelegate) as (keyof IIntervalService)[])\n+                      .forEach(prop => (wrappedInterval as any)[prop] = intervalDelegate[prop]);\n+\n+                  // the `flush` method will be present when ngMocks is used\n+                  if (intervalDelegate.hasOwnProperty('flush')) {\n+                    (wrappedInterval as any)['flush'] = () => {\n+                      (intervalDelegate as any)['flush']();\n+                      return wrappedInterval;\n+                    };\n+                  }\n+\n                   return wrappedInterval;\n                 }\n               ]);"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 12,
        "deletions": 2
    }
}