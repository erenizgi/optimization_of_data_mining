{
    "author": "dgp1130",
    "message": "docs: add extended diagnostics documentation (#44704)\n\nThis includes the initial documentation for extended diagnostics with a page for each of the two initial checks. They follow the same general formula, and hopefully in the future they can be properly generated from metadata rather than copy-pasted as they are currently.\n\nPR Close #44704",
    "sha": "33f23abe1d79c4309cca8dd852d1ebf82bc336a9",
    "files": [
        {
            "sha": "00c4a0ef0f91ad0932679f6b1b71878ac6d1dfc6",
            "filename": ".pullapprove.yml",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/33f23abe1d79c4309cca8dd852d1ebf82bc336a9/.pullapprove.yml",
            "raw_url": "https://github.com/angular/angular/raw/33f23abe1d79c4309cca8dd852d1ebf82bc336a9/.pullapprove.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.pullapprove.yml?ref=33f23abe1d79c4309cca8dd852d1ebf82bc336a9",
            "patch": "@@ -1271,6 +1271,7 @@ groups:\n           'docs/NAMING.md',\n           'aio/content/guide/angular-package-format.md',\n           'aio/content/errors/*.md',\n+          'aio/content/extended-diagnostics/*.md',\n           'aio/content/guide/glossary.md',\n           'aio/content/guide/styleguide.md',\n           'aio/content/examples/errors/**',"
        },
        {
            "sha": "67e109ec3267034b44042d9daa12d96adbcae589",
            "filename": "aio/content/extended-diagnostics/NG8101.md",
            "status": "added",
            "additions": 47,
            "deletions": 0,
            "changes": 47,
            "blob_url": "https://github.com/angular/angular/blob/33f23abe1d79c4309cca8dd852d1ebf82bc336a9/aio%2Fcontent%2Fextended-diagnostics%2FNG8101.md",
            "raw_url": "https://github.com/angular/angular/raw/33f23abe1d79c4309cca8dd852d1ebf82bc336a9/aio%2Fcontent%2Fextended-diagnostics%2FNG8101.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fextended-diagnostics%2FNG8101.md?ref=33f23abe1d79c4309cca8dd852d1ebf82bc336a9",
            "patch": "@@ -0,0 +1,47 @@\n+@name Invalid Banana-in-Box\n+\n+@description\n+\n+This diagnostic detects a backwards \"banana-in-box\" syntax for\n+[two-way bindings](guide/two-way-binding).\n+\n+```html\n+<div ([var])=\"otherVar\"></div>\n+```\n+\n+## What's wrong with that?\n+\n+As it stands, `([var])` is actually an [event binding](guide/event-binding) with\n+the name `[var]`. The author likely intended this as a two-way binding to a variable named\n+`var` but as written this binding has no effect.\n+\n+## What should I do instead?\n+\n+Fix the typo. As the name suggests, the banana `(` should go *inside* the box `[]`. In this case:\n+\n+```html\n+<div [(var)]=\"otherVar\"></div>\n+```\n+\n+## Configuration requirements\n+\n+[`strictTemplates`](/guide/template-typecheck#strict-mode) must be enabled for any extended\n+diagnostic to emit. `invalidBananaInBox` has no additional requirements beyond `strictTemplates`.\n+\n+## What if I can't avoid this?\n+\n+This diagnostic can be disabled by editing the project's `tsconfig.json` file:\n+\n+```json\n+{\n+  \"angularCompilerOptions\": {\n+    \"extendedDiagnostics\": {\n+      \"checks\": {\n+        \"invalidBananaInBox\": \"suppress\"\n+      }\n+    }\n+  }\n+}\n+```\n+\n+See [extended diagnostic configuration](extended-diagnostics#configuration) for more info."
        },
        {
            "sha": "9206a0b0215874d7aee583c2a16f92109685296d",
            "filename": "aio/content/extended-diagnostics/NG8102.md",
            "status": "added",
            "additions": 91,
            "deletions": 0,
            "changes": 91,
            "blob_url": "https://github.com/angular/angular/blob/33f23abe1d79c4309cca8dd852d1ebf82bc336a9/aio%2Fcontent%2Fextended-diagnostics%2FNG8102.md",
            "raw_url": "https://github.com/angular/angular/raw/33f23abe1d79c4309cca8dd852d1ebf82bc336a9/aio%2Fcontent%2Fextended-diagnostics%2FNG8102.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fextended-diagnostics%2FNG8102.md?ref=33f23abe1d79c4309cca8dd852d1ebf82bc336a9",
            "patch": "@@ -0,0 +1,91 @@\n+@name Nullish coalescing not nullable\n+\n+@description\n+\n+This diagnostic detects a useless nullish coalescing operator (`??`) in Angular templates.\n+Specifically, it looks for operations where the input is not \"nullable\", meaning its type does not\n+include `null` or `undefined`. For such values, the right side of the `??` will never be used.\n+\n+```typescript\n+import {Component} from '@angular/core';\n+\n+@Component({\n+  // Template displays `foo` if present, falls back to 'bar' if it is `null`\n+  // or `undefined`.\n+  template: `<div>{{ foo ?? 'bar' }}</div>`,\n+  // ...\n+})\n+class MyComponent {\n+  // `foo` is declared as a `string` which *cannot* be `null` or `undefined`.\n+  foo: string = 'test';\n+}\n+```\n+\n+## What's wrong with that?\n+\n+Using the nullish coalescing operator with a non-nullable input has no effect and is indicative of a\n+discrepancy between the allowed type of a value and how it is presented in the template. A developer\n+might reasonably assume that the right side of the nullish coalescing operator is displayed in some\n+case, but it will never actually be displayed. This can lead to confusion about the expected output\n+of the program.\n+\n+## What should I do instead?\n+\n+Update the template and declared type to be in sync. Double check the type of the input and confirm\n+whether it is actually expected to be nullable.\n+\n+If the input should be nullable, add `null` or `undefined` to its type to indicate this.\n+\n+```typescript\n+import {Component} from '@angular/core';\n+\n+@Component({\n+  template: `<div>{{ foo ?? 'bar' }}</div>`,\n+  // ...\n+})\n+class MyComponent {\n+  // `foo` is now nullable. If it is ever set to `null`, 'bar' will be displayed.\n+  foo: string | null = 'test';\n+}\n+```\n+\n+If the input should *not* be nullable, delete the `??` operator and its right operand, since the\n+value is guaranteed by TypeScript to always be non-nullable.\n+\n+```typescript\n+import {Component} from '@angular/core';\n+\n+@Component({\n+  // Template always displays `foo`, which is guaranteed to never be `null` or\n+  // `undefined`.\n+  template: `<div>{{ foo }}</div>`,\n+  // ...\n+})\n+class MyComponent {\n+  foo: string = 'test';\n+}\n+```\n+\n+## Configuration requirements\n+\n+[`strictTemplates`](/guide/template-typecheck#strict-mode) must be enabled for any extended\n+diagnostic to emit. [`strictNullChecks`](/guide/template-typecheck#strict-null-checks) must also be\n+enabled to emit any `nullishCoalescingNotNullable` diagnostics.\n+\n+## What if I can't avoid this?\n+\n+This diagnostic can be disabled by editing the project's `tsconfig.json` file:\n+\n+```json\n+{\n+  \"angularCompilerOptions\": {\n+    \"extendedDiagnostics\": {\n+      \"checks\": {\n+        \"nullishCoalescingNotNullable\": \"suppress\"\n+      }\n+    }\n+  }\n+}\n+```\n+\n+See [extended diagnostic configuration](extended-diagnostics#configuration) for more info."
        },
        {
            "sha": "be815ea724a3ad9e5bf8f32217cba7055086eee3",
            "filename": "aio/content/extended-diagnostics/index.md",
            "status": "added",
            "additions": 85,
            "deletions": 0,
            "changes": 85,
            "blob_url": "https://github.com/angular/angular/blob/33f23abe1d79c4309cca8dd852d1ebf82bc336a9/aio%2Fcontent%2Fextended-diagnostics%2Findex.md",
            "raw_url": "https://github.com/angular/angular/raw/33f23abe1d79c4309cca8dd852d1ebf82bc336a9/aio%2Fcontent%2Fextended-diagnostics%2Findex.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fextended-diagnostics%2Findex.md?ref=33f23abe1d79c4309cca8dd852d1ebf82bc336a9",
            "patch": "@@ -0,0 +1,85 @@\n+# Extended Diagnostics\n+\n+There are many coding patterns that are technically valid to the compiler or runtime, but which may\n+have complex nuances or caveats. These patterns may not have the intended effect expected by a\n+developer, which often leads to bugs. The Angular compiler includes \"extended diagnostics\" which\n+identify many of these patterns to warn developers about the potential issues and enforce common\n+best practices within a codebase.\n+\n+## Diagnostics\n+\n+Currently, Angular supports the following extended diagnostics:\n+\n+* [NG8101 - `invalidBananaInBox`](extended-diagnostics/NG8101)\n+* [NG8102 - `nullishCoalescingNotNullable`](extended-diagnostics/NG8102)\n+\n+## Configuration\n+\n+Extended diagnostics are warnings by default and do not block compilation. Each diagnostic can be\n+configured as either:\n+\n+* `warning` (default) - The compiler emits the diagnostic as a warning but does not block\n+  compilation. The compiler will still exit with status code 0, even if warnings are emitted.\n+* `error` - The compiler emits the diagnostic as an error and fails the compilation. The compiler\n+  will exit with a non-zero status code if one or more errors are emitted.\n+* `suppress` - The compiler does *not* emit the diagnostic at all.\n+\n+Check severity can be configured in the project's `tsconfig.json` file:\n+\n+```jsonc\n+{\n+  \"angularCompilerOptions\": {\n+    \"extendedDiagnostics\": {\n+      // The categories to use for specific diagnostics.\n+      \"checks\": {\n+        // Maps check name to its category.\n+        \"invalidBananaInBox\": \"suppress\"\n+      },\n+\n+      // The category to use for any diagnostics not listed in `checks` above.\n+      \"defaultCategory\": \"error\"\n+    }\n+  }\n+}\n+```\n+\n+The `checks` field maps the name of individual diagnostics to their associated category. See\n+[Diagnostics](#diagnostics) for a complete list of extended diagnostics and the name to use for\n+configuring them.\n+\n+The `defaultCategory` field is used for any diagnostics that are not explicitly listed under\n+`checks`. If not set, such diagnostics will be treated as `warning`.\n+\n+Extended diagnostics will emit when [`strictTemplates`](/guide/template-typecheck#strict-mode) is\n+enabled. This is required to allow the compiler to better understand Angular template types and\n+provide accurate and meaningful diagnostics.\n+\n+## Semantic Versioning\n+\n+The Angular team intends to add or enable new extended diagnostics in **minor** versions of Angular\n+(see [semver](https://docs.npmjs.com/about-semantic-versioning)). This means that upgrading Angular\n+may show new warnings in your existing codebase. This enables the team to deliver features more\n+quickly and to make extended diagnostics more accessible to developers.\n+\n+However, setting `\"defaultCategory\": \"error\"` will promote such warnings to hard errors. This can\n+cause a minor version upgrade to introduce compilation errors, which may be seen as a semver\n+non-compliant breaking change. Any new diagnostics can be suppressed or demoted to warnings via the\n+above [configuration](#configuration), so the impact of a new diagnostic should be minimal to\n+projects that treat extended diagnostics as errors by default. Defaulting to error is a very\n+powerful tool; just be aware of this semver caveat when deciding if `error` is the right default for\n+your project.\n+\n+## New Diagnostics\n+\n+The Angular team is always open to suggestions about new diagnostics that could be added. Extended\n+diagnostics should generally:\n+\n+* Detect a common, non-obvious developer mistake with Angular templates.\n+* Clearly articulate why this pattern can lead to bugs or unintended behavior.\n+* Suggest one or more clear solutions.\n+* Have a low (preferrably zero) false-positive rate.\n+* Apply to the vast majority of Angular applications (not specific to an unofficial library).\n+* Improve program correctness or performance (not style, that responsibility falls to a linter).\n+\n+If you have an idea for a compiler check which fits these criteria, consider filing a\n+[feature request](https://github.com/angular/angular/issues/new?template=2-feature-request.yaml)."
        },
        {
            "sha": "24692550fcd6e6b2f9dae851b6923a1b25454ad6",
            "filename": "aio/content/navigation.json",
            "status": "modified",
            "additions": 12,
            "deletions": 1,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/33f23abe1d79c4309cca8dd852d1ebf82bc336a9/aio%2Fcontent%2Fnavigation.json",
            "raw_url": "https://github.com/angular/angular/raw/33f23abe1d79c4309cca8dd852d1ebf82bc336a9/aio%2Fcontent%2Fnavigation.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fnavigation.json?ref=33f23abe1d79c4309cca8dd852d1ebf82bc336a9",
            "patch": "@@ -1055,6 +1055,17 @@\n             }\n           ]\n         },\n+        {\n+          \"title\": \"Extended Diagnostic Reference\",\n+          \"tooltip\": \"Details of extended diagnostics that can be emitted by the Angular compiler\",\n+          \"children\": [\n+            {\n+              \"url\": \"extended-diagnostics\",\n+              \"title\": \"Extended Diagnostics Overview\",\n+              \"tooltip\": \"Overview of extended diagnostics, what they are, and how to configure them.\"\n+            }\n+          ]\n+        },\n         {\n           \"title\": \"Example applications\",\n           \"tooltip\": \"List of all of the example applications in the Angular documentation.\",\n@@ -1247,4 +1258,4 @@\n       ]\n     }\n   ]\n-}\n\\ No newline at end of file\n+}"
        },
        {
            "sha": "cfde34c84696fbfebdf8bec51cdaf4a858db38f8",
            "filename": "goldens/size-tracking/aio-payloads.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/33f23abe1d79c4309cca8dd852d1ebf82bc336a9/goldens%2Fsize-tracking%2Faio-payloads.json",
            "raw_url": "https://github.com/angular/angular/raw/33f23abe1d79c4309cca8dd852d1ebf82bc336a9/goldens%2Fsize-tracking%2Faio-payloads.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fsize-tracking%2Faio-payloads.json?ref=33f23abe1d79c4309cca8dd852d1ebf82bc336a9",
            "patch": "@@ -5,7 +5,7 @@\n         \"runtime\": 4330,\n         \"main\": 458531,\n         \"polyfills\": 37123,\n-        \"styles\": 69863,\n+        \"styles\": 70394,\n         \"light-theme\": 77232,\n         \"dark-theme\": 77356\n       }\n@@ -17,7 +17,7 @@\n         \"runtime\": 4330,\n         \"main\": 457719,\n         \"polyfills\": 37271,\n-        \"styles\": 69863,\n+        \"styles\": 70394,\n         \"light-theme\": 77232,\n         \"dark-theme\": 77356\n       }"
        }
    ],
    "stats": {
        "total": 241,
        "additions": 238,
        "deletions": 3
    }
}