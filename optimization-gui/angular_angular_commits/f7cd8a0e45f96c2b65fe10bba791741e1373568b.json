{
    "author": "devversion",
    "message": "refactor(compiler-cli): expose code needed by Angular CLI (#43431)\n\nExposes code needed by the Angular CLI. Previously the CLI used\ndeep imports for most of these things, but now with bundling\nthe CLI, we no longer support deep imports.\n\nWe will expose the necessary dependencies for the linker as part\nof the primary entry-point (I think that is more maintable than\nre-exporting them as part of the linker). We also expose the ngcc\nentry-point for the CLI with a new constant that will point to the\nngcc command line entry-point (which the CLI relies on).\n\nPR Close #43431",
    "sha": "f7cd8a0e45f96c2b65fe10bba791741e1373568b",
    "files": [
        {
            "sha": "6fcdf482cf2e00de3f5b8c13a4a0ab94dc76dfcc",
            "filename": "packages/compiler-cli/index.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 2,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/f7cd8a0e45f96c2b65fe10bba791741e1373568b/packages%2Fcompiler-cli%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/f7cd8a0e45f96c2b65fe10bba791741e1373568b/packages%2Fcompiler-cli%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Findex.ts?ref=f7cd8a0e45f96c2b65fe10bba791741e1373568b",
            "patch": "@@ -21,12 +21,19 @@ export * from './src/perform_compile';\n export {CompilerOptions as AngularCompilerOptions} from './src/transformers/api';\n \n export {ngToTsDiagnostic} from './src/transformers/util';\n-export {NgTscPlugin} from './src/ngtsc/tsc_plugin';\n-export {NgtscProgram} from './src/ngtsc/program';\n \n // Internal exports needed for packages relying on the compiler-cli.\n // TODO: Consider moving into `@angular/compiler-cli/private`. This would\n // help with a consistent pattern for cross package imports for Angular.\n export * from './src/tooling';\n \n+// Exposed as they are needed for relying on the `linker`.\n+export * from './src/ngtsc/logging';\n+export * from './src/ngtsc/file_system';\n+\n+// Exports for dealing with the `ngtsc` program.\n+export {NgTscPlugin} from './src/ngtsc/tsc_plugin';\n+export {NgtscProgram} from './src/ngtsc/program';\n+export {OptimizeFor} from './src/ngtsc/typecheck/api';\n+\n setFileSystem(new NodeJSFileSystem());"
        },
        {
            "sha": "dc1ea3379531ad44d133c0863d439d60ad719878",
            "filename": "packages/compiler-cli/ngcc/index.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/f7cd8a0e45f96c2b65fe10bba791741e1373568b/packages%2Fcompiler-cli%2Fngcc%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/f7cd8a0e45f96c2b65fe10bba791741e1373568b/packages%2Fcompiler-cli%2Fngcc%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Findex.ts?ref=f7cd8a0e45f96c2b65fe10bba791741e1373568b",
            "patch": "@@ -5,6 +5,8 @@\n  * Use of this source code is governed by an MIT-style license that can be\n  * found in the LICENSE file at https://angular.io/license\n  */\n+\n+import {join} from 'path';\n import {NodeJSFileSystem, setFileSystem} from '../src/ngtsc/file_system';\n \n import {mainNgcc} from './src/main';\n@@ -20,3 +22,11 @@ export function process(options: AsyncNgccOptions|SyncNgccOptions): void|Promise\n   setFileSystem(new NodeJSFileSystem());\n   return mainNgcc(options);\n }\n+\n+/**\n+ * Absolute file path that points to the `ngcc` entry-point.\n+ *\n+ * This can be used by the Angular CLI to spawn a process running ngcc using\n+ * command line options.\n+ */\n+export const ngccMainFilePath = join(__dirname, './main-ngcc.js');"
        },
        {
            "sha": "c89b4bc3cb20e3d24ac5d19aec903e5e3fc5e460",
            "filename": "packages/compiler-cli/package.json",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/f7cd8a0e45f96c2b65fe10bba791741e1373568b/packages%2Fcompiler-cli%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/f7cd8a0e45f96c2b65fe10bba791741e1373568b/packages%2Fcompiler-cli%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fpackage.json?ref=f7cd8a0e45f96c2b65fe10bba791741e1373568b",
            "patch": "@@ -17,6 +17,10 @@\n     \"./package.json\": {\n       \"default\": \"./package.json\"\n     },\n+    \"./ngcc\": {\n+      \"types\": \"./ngcc/index.d.ts\",\n+      \"default\": \"./bundles/ngcc/index.js\"\n+    },\n     \"./linker\": {\n       \"types\": \"./linker/index.d.ts\",\n       \"default\": \"./bundles/linker/index.js\""
        }
    ],
    "stats": {
        "total": 25,
        "additions": 23,
        "deletions": 2
    }
}