{
    "author": "mhevery",
    "message": "fix(core): Switch `emitDistinctChangesOnlyDefaultValue` to true (#41121)\n\nBREAKING CHANGE:\n\nSwitching default of `emitDistinctChangesOnlyDefaultValue`\nwhich changes the default behavior and may cause some applications which\nrely on the incorrect behavior to fail.\n\n`emitDistinctChangesOnly` flag has also been deprecated and will be\nremoved in a future major release.\n\nThe previous implementation would fire changes `QueryList.changes.subscribe`\nwhenever the `QueryList` was recomputed. This resulted in an artificially\nhigh number of change notifications, as it is possible that recomputing\n`QueryList` results in the same list. When the `QueryList` gets recomputed\nis an implementation detail, and it should not be the thing that determines\nhow often change event should fire.\n\nUnfortunately, fixing the behavior outright caused too many existing\napplications to fail. For this reason, Angular considers this fix a\nbreaking fix and has introduced a flag in `@ContentChildren` and\n`@ViewChildren`, that controls the behavior.\n\n```\nexport class QueryCompWithStrictChangeEmitParent {\n  @ContentChildren('foo', {\n    // This option is the new default with this change.\n    emitDistinctChangesOnly: true,\n  })\n  foos!: QueryList<any>;\n}\n```\nFor backward compatibility before v12\n`emitDistinctChangesOnlyDefaultValue` was set to `false. This change\nchanges the default to `true`.\n\nPR Close #41121",
    "sha": "70962465b5795f0a192f745016b1c461e7c8790b",
    "files": [
        {
            "sha": "7ead16e1e520825d1c7c6d8f4c83fb555a46ae3b",
            "filename": "aio/content/guide/deprecations.md",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/aio%2Fcontent%2Fguide%2Fdeprecations.md",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/aio%2Fcontent%2Fguide%2Fdeprecations.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fdeprecations.md?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -95,6 +95,7 @@ Tip: In the [API reference section](api) of this doc site, deprecated APIs are i\n | [`ANALYZE_FOR_ENTRY_COMPONENTS`](api/core/ANALYZE_FOR_ENTRY_COMPONENTS) | none | v9 | See [`ANALYZE_FOR_ENTRY_COMPONENTS`](#entryComponents) |\n | [`WrappedValue`](api/core/WrappedValue) | none | v10 | See [removing `WrappedValue`](#wrapped-value) |\n | [`async`](api/core/testing/async) | [`waitForAsync`](api/core/testing/waitForAsync) | v11 | The `async` function from `@angular/core/testing` has been renamed to `waitForAsync` in order to avoid confusion with the native JavaScript `async` syntax. The existing function is deprecated and will be removed in a future version. |\n+[ `ViewChildren.emitDistinctChangesOnly` / `ContentChildren.emitDistinctChangesOnly` | none (was part of [issue #40091](https://github.com/angular/angular/issues/40091)) ] | This is a temporary flag introduced as part of bugfix of [issue #40091](https://github.com/angular/angular/issues/40091) and will be removed. | \n \n {@a testing}\n ### @angular/core/testing"
        },
        {
            "sha": "5ea2e0ce075866504ca6e452e36e14c7c75e9c30",
            "filename": "packages/compiler-cli/ngcc/test/rendering/renderer_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Frenderer_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Frenderer_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Frenderer_spec.ts?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -570,7 +570,7 @@ A.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: A, selectors: [[\"\",\n UndecoratedBase.ɵfac = function UndecoratedBase_Factory(t) { return new (t || UndecoratedBase)(); };\n // TRANSPILED\n UndecoratedBase.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: UndecoratedBase, viewQuery: function UndecoratedBase_Query(rf, ctx) { if (rf & 1) {\n-        ɵngcc0.ɵɵviewQuery(_c0, 3);\n+        ɵngcc0.ɵɵviewQuery(_c0, 7);\n     } if (rf & 2) {\n         let _t;\n         ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.test = _t.first);"
        },
        {
            "sha": "623935e23d37909b1b2dd08691670b8f5674c947",
            "filename": "packages/compiler-cli/src/ngtsc/annotations/src/directive.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Fsrc%2Fdirective.ts",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Fsrc%2Fdirective.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Fsrc%2Fdirective.ts?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -605,7 +605,7 @@ export function extractQueryMetadata(\n       if (typeof emitDistinctChangesOnlyValue !== 'boolean') {\n         throw createValueHasWrongTypeError(\n             emitDistinctChangesOnlyExpr, emitDistinctChangesOnlyValue,\n-            `@${name} options.emitDistinctChangesOnlys must be a boolean`);\n+            `@${name} options.emitDistinctChangesOnly must be a boolean`);\n       }\n       emitDistinctChangesOnly = emitDistinctChangesOnlyValue;\n     }"
        },
        {
            "sha": "8f49e5621a7c61fa20c86c01416bf4273f96ba0a",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/queries/GOLDEN_PARTIAL.js",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2FGOLDEN_PARTIAL.js",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2FGOLDEN_PARTIAL.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2FGOLDEN_PARTIAL.js?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -32,7 +32,7 @@ import * as i0 from \"@angular/core\";\n export class ViewQueryComponent {\n }\n ViewQueryComponent.ɵfac = function ViewQueryComponent_Factory(t) { return new (t || ViewQueryComponent)(); };\n-ViewQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ViewQueryComponent, selector: \"view-query-component\", viewQueries: [{ propertyName: \"someDir\", first: true, predicate: SomeDirective, emitDistinctChangesOnly: false, descendants: true }, { propertyName: \"someDirs\", predicate: SomeDirective, emitDistinctChangesOnly: false, descendants: true }], ngImport: i0, template: `\n+ViewQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ViewQueryComponent, selector: \"view-query-component\", viewQueries: [{ propertyName: \"someDir\", first: true, predicate: SomeDirective, descendants: true }, { propertyName: \"someDirs\", predicate: SomeDirective, descendants: true }], ngImport: i0, template: `\n     <div someDir></div>\n   `, isInline: true, directives: [{ type: i0.forwardRef(function () { return SomeDirective; }), selector: \"[someDir]\" }] });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ViewQueryComponent, [{\n@@ -88,7 +88,7 @@ import * as i0 from \"@angular/core\";\n export class ViewQueryComponent {\n }\n ViewQueryComponent.ɵfac = function ViewQueryComponent_Factory(t) { return new (t || ViewQueryComponent)(); };\n-ViewQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ViewQueryComponent, selector: \"view-query-component\", viewQueries: [{ propertyName: \"myRef\", first: true, predicate: [\"myRef\"], emitDistinctChangesOnly: false, descendants: true }, { propertyName: \"myRefs\", predicate: [\"myRef1, myRef2, myRef3\"], emitDistinctChangesOnly: false, descendants: true }], ngImport: i0, template: `\n+ViewQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ViewQueryComponent, selector: \"view-query-component\", viewQueries: [{ propertyName: \"myRef\", first: true, predicate: [\"myRef\"], descendants: true }, { propertyName: \"myRefs\", predicate: [\"myRef1, myRef2, myRef3\"], descendants: true }], ngImport: i0, template: `\n     <div #myRef></div>\n     <div #myRef1></div>\n   `, isInline: true });\n@@ -170,7 +170,7 @@ import * as i0 from \"@angular/core\";\n export class ViewQueryComponent {\n }\n ViewQueryComponent.ɵfac = function ViewQueryComponent_Factory(t) { return new (t || ViewQueryComponent)(); };\n-ViewQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ViewQueryComponent, selector: \"view-query-component\", viewQueries: [{ propertyName: \"someDir\", first: true, predicate: SomeDirective, emitDistinctChangesOnly: false, descendants: true, static: true }, { propertyName: \"foo\", first: true, predicate: [\"foo\"], emitDistinctChangesOnly: false, descendants: true }], ngImport: i0, template: `\n+ViewQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ViewQueryComponent, selector: \"view-query-component\", viewQueries: [{ propertyName: \"someDir\", first: true, predicate: SomeDirective, descendants: true, static: true }, { propertyName: \"foo\", first: true, predicate: [\"foo\"], descendants: true }], ngImport: i0, template: `\n     <div someDir></div>\n   `, isInline: true, directives: [{ type: i0.forwardRef(function () { return SomeDirective; }), selector: \"[someDir]\" }] });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ViewQueryComponent, [{\n@@ -252,7 +252,7 @@ import * as i0 from \"@angular/core\";\n export class ViewQueryComponent {\n }\n ViewQueryComponent.ɵfac = function ViewQueryComponent_Factory(t) { return new (t || ViewQueryComponent)(); };\n-ViewQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ViewQueryComponent, selector: \"view-query-component\", viewQueries: [{ propertyName: \"myRef\", first: true, predicate: [\"myRef\"], emitDistinctChangesOnly: false, descendants: true, read: TemplateRef }, { propertyName: \"someDir\", first: true, predicate: SomeDirective, emitDistinctChangesOnly: false, descendants: true, read: ElementRef }, { propertyName: \"myRefs\", predicate: [\"myRef1, myRef2, myRef3\"], emitDistinctChangesOnly: false, descendants: true, read: ElementRef }, { propertyName: \"someDirs\", predicate: SomeDirective, emitDistinctChangesOnly: false, descendants: true, read: TemplateRef }], ngImport: i0, template: `\n+ViewQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ViewQueryComponent, selector: \"view-query-component\", viewQueries: [{ propertyName: \"myRef\", first: true, predicate: [\"myRef\"], descendants: true, read: TemplateRef }, { propertyName: \"someDir\", first: true, predicate: SomeDirective, descendants: true, read: ElementRef }, { propertyName: \"myRefs\", predicate: [\"myRef1, myRef2, myRef3\"], descendants: true, read: ElementRef }, { propertyName: \"someDirs\", predicate: SomeDirective, descendants: true, read: TemplateRef }], ngImport: i0, template: `\n     <div someDir></div>\n     <div #myRef></div>\n     <div #myRef1></div>\n@@ -344,7 +344,7 @@ import * as i0 from \"@angular/core\";\n export class ContentQueryComponent {\n }\n ContentQueryComponent.ɵfac = function ContentQueryComponent_Factory(t) { return new (t || ContentQueryComponent)(); };\n-ContentQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ContentQueryComponent, selector: \"content-query-component\", queries: [{ propertyName: \"someDir\", first: true, predicate: SomeDirective, emitDistinctChangesOnly: false, descendants: true }, { propertyName: \"someDirList\", predicate: SomeDirective, emitDistinctChangesOnly: false }], ngImport: i0, template: `\n+ContentQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ContentQueryComponent, selector: \"content-query-component\", queries: [{ propertyName: \"someDir\", first: true, predicate: SomeDirective, descendants: true }, { propertyName: \"someDirList\", predicate: SomeDirective }], ngImport: i0, template: `\n     <div><ng-content></ng-content></div>\n   `, isInline: true });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ContentQueryComponent, [{\n@@ -423,7 +423,7 @@ import * as i0 from \"@angular/core\";\n export class ContentQueryComponent {\n }\n ContentQueryComponent.ɵfac = function ContentQueryComponent_Factory(t) { return new (t || ContentQueryComponent)(); };\n-ContentQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ContentQueryComponent, selector: \"content-query-component\", queries: [{ propertyName: \"myRef\", first: true, predicate: [\"myRef\"], emitDistinctChangesOnly: false, descendants: true }, { propertyName: \"myRefs\", predicate: [\"myRef1, myRef2, myRef3\"], emitDistinctChangesOnly: false }], ngImport: i0, template: `\n+ContentQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ContentQueryComponent, selector: \"content-query-component\", queries: [{ propertyName: \"myRef\", first: true, predicate: [\"myRef\"], descendants: true }, { propertyName: \"myRefs\", predicate: [\"myRef1, myRef2, myRef3\"] }], ngImport: i0, template: `\n     <div #myRef></div>\n     <div #myRef1></div>\n   `, isInline: true });\n@@ -505,7 +505,7 @@ import * as i0 from \"@angular/core\";\n export class ContentQueryComponent {\n }\n ContentQueryComponent.ɵfac = function ContentQueryComponent_Factory(t) { return new (t || ContentQueryComponent)(); };\n-ContentQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ContentQueryComponent, selector: \"content-query-component\", queries: [{ propertyName: \"someDir\", first: true, predicate: SomeDirective, emitDistinctChangesOnly: false, descendants: true, static: true }, { propertyName: \"foo\", first: true, predicate: [\"foo\"], emitDistinctChangesOnly: false, descendants: true }], ngImport: i0, template: `\n+ContentQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ContentQueryComponent, selector: \"content-query-component\", queries: [{ propertyName: \"someDir\", first: true, predicate: SomeDirective, descendants: true, static: true }, { propertyName: \"foo\", first: true, predicate: [\"foo\"], descendants: true }], ngImport: i0, template: `\n     <div><ng-content></ng-content></div>\n   `, isInline: true });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ContentQueryComponent, [{\n@@ -610,7 +610,7 @@ import * as i0 from \"@angular/core\";\n export class ContentQueryComponent {\n }\n ContentQueryComponent.ɵfac = function ContentQueryComponent_Factory(t) { return new (t || ContentQueryComponent)(); };\n-ContentQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ContentQueryComponent, selector: \"content-query-component\", queries: [{ propertyName: \"myRef\", first: true, predicate: [\"myRef\"], emitDistinctChangesOnly: false, descendants: true, read: TemplateRef }, { propertyName: \"someDir\", first: true, predicate: SomeDirective, emitDistinctChangesOnly: false, descendants: true, read: ElementRef }, { propertyName: \"myRefs\", predicate: [\"myRef1, myRef2, myRef3\"], emitDistinctChangesOnly: false, read: ElementRef }, { propertyName: \"someDirs\", predicate: SomeDirective, emitDistinctChangesOnly: false, read: TemplateRef }], ngImport: i0, template: `\n+ContentQueryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: ContentQueryComponent, selector: \"content-query-component\", queries: [{ propertyName: \"myRef\", first: true, predicate: [\"myRef\"], descendants: true, read: TemplateRef }, { propertyName: \"someDir\", first: true, predicate: SomeDirective, descendants: true, read: ElementRef }, { propertyName: \"myRefs\", predicate: [\"myRef1, myRef2, myRef3\"], read: ElementRef }, { propertyName: \"someDirs\", predicate: SomeDirective, read: TemplateRef }], ngImport: i0, template: `\n     <div someDir></div>\n     <div #myRef></div>\n     <div #myRef1></div>"
        },
        {
            "sha": "d0c83d79331695f271cecf7b1fa9ac79c14a6a4a",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/queries/content_query_for_directive.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fcontent_query_for_directive.js",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fcontent_query_for_directive.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fcontent_query_for_directive.js?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -3,8 +3,8 @@ ContentQueryComponent.ɵcmp = /*@__PURE__*/ $r3$.ɵɵdefineComponent({\n   selectors: [[\"content-query-component\"]],\n   contentQueries: function ContentQueryComponent_ContentQueries(rf, ctx, dirIndex) {\n     if (rf & 1) {\n-    $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 1);\n-    $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 0);\n+    $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 5);\n+    $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 4);\n     }\n     if (rf & 2) {\n     let $tmp$;"
        },
        {
            "sha": "3a78c30a1bd95d3ebc7ebf9293cfe22eb6e89c1a",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/queries/content_query_for_local_ref.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fcontent_query_for_local_ref.js",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fcontent_query_for_local_ref.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fcontent_query_for_local_ref.js?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -5,8 +5,8 @@ ContentQueryComponent.ɵcmp = /*@__PURE__*/ $r3$.ɵɵdefineComponent({\n   // ...\n   contentQueries: function ContentQueryComponent_ContentQueries(rf, ctx, dirIndex) {\n     if (rf & 1) {\n-    $r3$.ɵɵcontentQuery(dirIndex, $e0_attrs$, 1);\n-    $r3$.ɵɵcontentQuery(dirIndex, $e1_attrs$, 0);\n+    $r3$.ɵɵcontentQuery(dirIndex, $e0_attrs$, 5);\n+    $r3$.ɵɵcontentQuery(dirIndex, $e1_attrs$, 4);\n     }\n     if (rf & 2) {\n     let $tmp$;"
        },
        {
            "sha": "6de5bc94e3a515b1cc74f72f2130baa90057559e",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/queries/content_query_read_token.js",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fcontent_query_read_token.js",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fcontent_query_read_token.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fcontent_query_read_token.js?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -5,10 +5,10 @@ ContentQueryComponent.ɵcmp = /*@__PURE__*/ $r3$.ɵɵdefineComponent({\n   // ...\n   contentQueries: function ContentQueryComponent_ContentQueries(rf, ctx, dirIndex) {\n     if (rf & 1) {\n-      $r3$.ɵɵcontentQuery(dirIndex, $e0_attrs$, 1, TemplateRef);\n-    $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 1, ElementRef);\n-    $r3$.ɵɵcontentQuery(dirIndex, $e1_attrs$, 0, ElementRef);\n-    $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 0, TemplateRef);\n+      $r3$.ɵɵcontentQuery(dirIndex, $e0_attrs$, 5, TemplateRef);\n+    $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 5, ElementRef);\n+    $r3$.ɵɵcontentQuery(dirIndex, $e1_attrs$, 4, ElementRef);\n+    $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 4, TemplateRef);\n     }\n     if (rf & 2) {\n     let $tmp$;"
        },
        {
            "sha": "051d73112edf9dd92d79020f5942e515ecb7e204",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/queries/static_content_query.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fstatic_content_query.js",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fstatic_content_query.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fstatic_content_query.js?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -4,8 +4,8 @@ ContentQueryComponent.ɵcmp = /*@__PURE__*/ $r3$.ɵɵdefineComponent({\n   contentQueries: function ContentQueryComponent_ContentQueries(rf, ctx, dirIndex) {\n     if (rf & 1) {\n       $r3$.ɵɵcontentQuery(\n-          dirIndex, SomeDirective, __QueryFlags.isStatic__|__QueryFlags.descendants__);\n-      $r3$.ɵɵcontentQuery(dirIndex, $ref0$, 1);\n+          dirIndex, SomeDirective, __QueryFlags.isStatic__|__QueryFlags.descendants__|__QueryFlags.emitDistinctChangesOnly__);\n+      $r3$.ɵɵcontentQuery(dirIndex, $ref0$, 5);\n     }\n     if (rf & 2) {\n     let $tmp$;"
        },
        {
            "sha": "36c711854094db5d6738e35b960247528912a00f",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/queries/static_view_query.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fstatic_view_query.js",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fstatic_view_query.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fstatic_view_query.js?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -5,8 +5,8 @@ ViewQueryComponent.ɵcmp = /*@__PURE__*/ $r3$.ɵɵdefineComponent({\n   selectors: [[\"view-query-component\"]],\n   viewQuery: function ViewQueryComponent_Query(rf, ctx) {\n     if (rf & 1) {\n-      $r3$.ɵɵviewQuery(SomeDirective, __QueryFlags.isStatic__|__QueryFlags.descendants__);\n-      $r3$.ɵɵviewQuery($refs$, 1);\n+      $r3$.ɵɵviewQuery(SomeDirective, __QueryFlags.isStatic__|__QueryFlags.descendants__|__QueryFlags.emitDistinctChangesOnly__);\n+      $r3$.ɵɵviewQuery($refs$, 5);\n     }\n     if (rf & 2) {\n       let $tmp$;"
        },
        {
            "sha": "13502a9a5a3f35aa858089d7be5bdfbf9183163c",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/queries/view_query_for_directive.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fview_query_for_directive.js",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fview_query_for_directive.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fview_query_for_directive.js?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -3,8 +3,8 @@ ViewQueryComponent.ɵcmp = /*@__PURE__*/ $r3$.ɵɵdefineComponent({\n   selectors: [[\"view-query-component\"]],\n   viewQuery: function ViewQueryComponent_Query(rf, ctx) {\n     if (rf & 1) {\n-      $r3$.ɵɵviewQuery(SomeDirective, 1);\n-      $r3$.ɵɵviewQuery(SomeDirective, 1);\n+      $r3$.ɵɵviewQuery(SomeDirective, 5);\n+      $r3$.ɵɵviewQuery(SomeDirective, 5);\n     }\n     if (rf & 2) {\n       let $tmp$;"
        },
        {
            "sha": "d8770b0d9b8a3dc1a5159db15701f80b27ee1e9e",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/queries/view_query_for_local_ref.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fview_query_for_local_ref.js",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fview_query_for_local_ref.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fview_query_for_local_ref.js?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -5,8 +5,8 @@ ViewQueryComponent.ɵcmp = /*@__PURE__*/ $r3$.ɵɵdefineComponent({\n   // ...\n   viewQuery: function ViewQueryComponent_Query(rf, ctx) {\n     if (rf & 1) {\n-      $r3$.ɵɵviewQuery($e0_attrs$, 1);\n-      $r3$.ɵɵviewQuery($e1_attrs$, 1);\n+      $r3$.ɵɵviewQuery($e0_attrs$, 5);\n+      $r3$.ɵɵviewQuery($e1_attrs$, 5);\n     }\n     if (rf & 2) {\n       let $tmp$;"
        },
        {
            "sha": "247b2fd807b9ed2cd6e64648d65295cce1215944",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/queries/view_query_read_token.js",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fview_query_read_token.js",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fview_query_read_token.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fqueries%2Fview_query_read_token.js?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -5,10 +5,10 @@ ViewQueryComponent.ɵcmp = /*@__PURE__*/ $r3$.ɵɵdefineComponent({\n   // ...\n   viewQuery: function ViewQueryComponent_Query(rf, ctx) {\n     if (rf & 1) {\n-      $r3$.ɵɵviewQuery($e0_attrs$, 1, TemplateRef);\n-      $r3$.ɵɵviewQuery(SomeDirective, 1, ElementRef);\n-      $r3$.ɵɵviewQuery($e1_attrs$, 1, ElementRef);\n-      $r3$.ɵɵviewQuery(SomeDirective, 1, TemplateRef);\n+      $r3$.ɵɵviewQuery($e0_attrs$, 5, TemplateRef);\n+      $r3$.ɵɵviewQuery(SomeDirective, 5, ElementRef);\n+      $r3$.ɵɵviewQuery($e1_attrs$, 5, ElementRef);\n+      $r3$.ɵɵviewQuery(SomeDirective, 5, TemplateRef);\n     }\n     if (rf & 2) {\n       let $tmp$;"
        },
        {
            "sha": "c2d68d83d3d9907186eacf353eaae146ffb03a14",
            "filename": "packages/compiler-cli/test/compliance_old/r3_compiler_compliance_spec.ts",
            "status": "modified",
            "additions": 20,
            "deletions": 20,
            "changes": 40,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance_old%2Fr3_compiler_compliance_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fcompliance_old%2Fr3_compiler_compliance_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance_old%2Fr3_compiler_compliance_spec.ts?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -1636,8 +1636,8 @@ describe('compiler compliance', () => {\n             selectors: [[\"view-query-component\"]],\n             viewQuery: function ViewQueryComponent_Query(rf, ctx) {\n               if (rf & 1) {\n-                $r3$.ɵɵviewQuery(SomeDirective, 1);\n-                $r3$.ɵɵviewQuery(SomeDirective, 1);\n+                $r3$.ɵɵviewQuery(SomeDirective, 5);\n+                $r3$.ɵɵviewQuery(SomeDirective, 5);\n               }\n               if (rf & 2) {\n                 let $tmp$;\n@@ -1695,8 +1695,8 @@ describe('compiler compliance', () => {\n             …\n             viewQuery: function ViewQueryComponent_Query(rf, ctx) {\n               if (rf & 1) {\n-                $r3$.ɵɵviewQuery($e0_attrs$, 1);\n-                $r3$.ɵɵviewQuery($e1_attrs$, 1);\n+                $r3$.ɵɵviewQuery($e0_attrs$, 5);\n+                $r3$.ɵɵviewQuery($e1_attrs$, 5);\n               }\n               if (rf & 2) {\n                 let $tmp$;\n@@ -1746,8 +1746,8 @@ describe('compiler compliance', () => {\n             selectors: [[\"view-query-component\"]],\n             viewQuery: function ViewQueryComponent_Query(rf, ctx) {\n               if (rf & 1) {\n-                $r3$.ɵɵviewQuery(SomeDirective, 3);\n-                $r3$.ɵɵviewQuery($refs$, 1);\n+                $r3$.ɵɵviewQuery(SomeDirective, 7);\n+                $r3$.ɵɵviewQuery($refs$, 5);\n               }\n               if (rf & 2) {\n                 let $tmp$;\n@@ -1810,10 +1810,10 @@ describe('compiler compliance', () => {\n             …\n             viewQuery: function ViewQueryComponent_Query(rf, ctx) {\n               if (rf & 1) {\n-                $r3$.ɵɵviewQuery($e0_attrs$, 1, TemplateRef);\n-                $r3$.ɵɵviewQuery(SomeDirective, 1, ElementRef);\n-                $r3$.ɵɵviewQuery($e1_attrs$, 1, ElementRef);\n-                $r3$.ɵɵviewQuery(SomeDirective, 1, TemplateRef);\n+                $r3$.ɵɵviewQuery($e0_attrs$, 5, TemplateRef);\n+                $r3$.ɵɵviewQuery(SomeDirective, 5, ElementRef);\n+                $r3$.ɵɵviewQuery($e1_attrs$, 5, ElementRef);\n+                $r3$.ɵɵviewQuery(SomeDirective, 5, TemplateRef);\n               }\n               if (rf & 2) {\n                 let $tmp$;\n@@ -1873,8 +1873,8 @@ describe('compiler compliance', () => {\n             selectors: [[\"content-query-component\"]],\n             contentQueries: function ContentQueryComponent_ContentQueries(rf, ctx, dirIndex) {\n               if (rf & 1) {\n-              $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 1);\n-              $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 0);\n+              $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 5);\n+              $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 4);\n               }\n               if (rf & 2) {\n               let $tmp$;\n@@ -1933,8 +1933,8 @@ describe('compiler compliance', () => {\n             …\n             contentQueries: function ContentQueryComponent_ContentQueries(rf, ctx, dirIndex) {\n               if (rf & 1) {\n-              $r3$.ɵɵcontentQuery(dirIndex, $e0_attrs$, 1);\n-              $r3$.ɵɵcontentQuery(dirIndex, $e1_attrs$, 0);\n+              $r3$.ɵɵcontentQuery(dirIndex, $e0_attrs$, 5);\n+              $r3$.ɵɵcontentQuery(dirIndex, $e1_attrs$, 4);\n               }\n               if (rf & 2) {\n               let $tmp$;\n@@ -1992,8 +1992,8 @@ describe('compiler compliance', () => {\n             selectors: [[\"content-query-component\"]],\n             contentQueries: function ContentQueryComponent_ContentQueries(rf, ctx, dirIndex) {\n               if (rf & 1) {\n-              $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 3);\n-              $r3$.ɵɵcontentQuery(dirIndex, $ref0$, 1);\n+              $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 7);\n+              $r3$.ɵɵcontentQuery(dirIndex, $ref0$, 5);\n               }\n               if (rf & 2) {\n               let $tmp$;\n@@ -2057,10 +2057,10 @@ describe('compiler compliance', () => {\n             …\n             contentQueries: function ContentQueryComponent_ContentQueries(rf, ctx, dirIndex) {\n               if (rf & 1) {\n-                $r3$.ɵɵcontentQuery(dirIndex, $e0_attrs$, 1, TemplateRef);\n-              $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 1, ElementRef);\n-              $r3$.ɵɵcontentQuery(dirIndex, $e1_attrs$, 0, ElementRef);\n-              $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 0, TemplateRef);\n+                $r3$.ɵɵcontentQuery(dirIndex, $e0_attrs$, 5, TemplateRef);\n+              $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 5, ElementRef);\n+              $r3$.ɵɵcontentQuery(dirIndex, $e1_attrs$, 4, ElementRef);\n+              $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, 4, TemplateRef);\n               }\n               if (rf & 2) {\n               let $tmp$;"
        },
        {
            "sha": "9ad05bbc82528f855d0d9af856bf1f9c46a63157",
            "filename": "packages/compiler-cli/test/ngtsc/ngtsc_spec.ts",
            "status": "modified",
            "additions": 18,
            "deletions": 18,
            "changes": 36,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Fngtsc_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Fngtsc_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Fngtsc_spec.ts?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -3133,10 +3133,10 @@ function allTests(os: string) {\n       expect(jsContents).toMatch(varRegExp('test1'));\n       expect(jsContents).toMatch(varRegExp('test2'));\n       expect(jsContents).toMatch(varRegExp('accessor'));\n-      // match `i0.ɵɵcontentQuery(dirIndex, _c1, 1, TemplateRef)`\n-      expect(jsContents).toMatch(contentQueryRegExp('\\\\w+', 1, 'TemplateRef'));\n-      // match `i0.ɵɵviewQuery(_c2, 1, null)`\n-      expect(jsContents).toMatch(viewQueryRegExp('\\\\w+', 1));\n+      // match `i0.ɵɵcontentQuery(dirIndex, _c1, 5, TemplateRef)`\n+      expect(jsContents).toMatch(contentQueryRegExp('\\\\w+', 5, 'TemplateRef'));\n+      // match `i0.ɵɵviewQuery(_c2, 5, null)`\n+      expect(jsContents).toMatch(viewQueryRegExp('\\\\w+', 5));\n     });\n \n     it('should generate queries for directives', () => {\n@@ -3165,14 +3165,14 @@ function allTests(os: string) {\n       expect(jsContents).toMatch(varRegExp('test1'));\n       expect(jsContents).toMatch(varRegExp('test2'));\n       expect(jsContents).toMatch(varRegExp('accessor'));\n-      // match `i0.ɵɵcontentQuery(dirIndex, _c1, 1, TemplateRef)`\n-      expect(jsContents).toMatch(contentQueryRegExp('\\\\w+', 1, 'TemplateRef'));\n+      // match `i0.ɵɵcontentQuery(dirIndex, _c1, 5, TemplateRef)`\n+      expect(jsContents).toMatch(contentQueryRegExp('\\\\w+', 5, 'TemplateRef'));\n \n-      // match `i0.ɵɵviewQuery(_c2, 1)`\n+      // match `i0.ɵɵviewQuery(_c2, 5)`\n       // Note that while ViewQuery doesn't necessarily make sense on a directive,\n       // because it doesn't have a view, we still need to handle it because a component\n       // could extend the directive.\n-      expect(jsContents).toMatch(viewQueryRegExp('\\\\w+', 1));\n+      expect(jsContents).toMatch(viewQueryRegExp('\\\\w+', 5));\n     });\n \n     it('should handle queries that use forwardRef', () => {\n@@ -3194,13 +3194,13 @@ function allTests(os: string) {\n \n       env.driveMain();\n       const jsContents = env.getContents('test.js');\n-      // match `i0.ɵɵcontentQuery(dirIndex, TemplateRef, 1, null)`\n-      expect(jsContents).toMatch(contentQueryRegExp('TemplateRef', 1));\n-      // match `i0.ɵɵcontentQuery(dirIndex, ViewContainerRef, 1, null)`\n-      expect(jsContents).toMatch(contentQueryRegExp('ViewContainerRef', 1));\n-      // match `i0.ɵɵcontentQuery(dirIndex, _c0, 1, null)`\n+      // match `i0.ɵɵcontentQuery(dirIndex, TemplateRef, 5, null)`\n+      expect(jsContents).toMatch(contentQueryRegExp('TemplateRef', 5));\n+      // match `i0.ɵɵcontentQuery(dirIndex, ViewContainerRef, 5, null)`\n+      expect(jsContents).toMatch(contentQueryRegExp('ViewContainerRef', 5));\n+      // match `i0.ɵɵcontentQuery(dirIndex, _c0, 5, null)`\n       expect(jsContents).toContain('_c0 = [\"parens\"];');\n-      expect(jsContents).toMatch(contentQueryRegExp('_c0', 1));\n+      expect(jsContents).toMatch(contentQueryRegExp('_c0', 5));\n     });\n \n     it('should handle queries that use an InjectionToken', () => {\n@@ -3221,10 +3221,10 @@ function allTests(os: string) {\n \n       env.driveMain();\n       const jsContents = env.getContents('test.js');\n-      // match `i0.ɵɵviewQuery(TOKEN, 1, null)`\n-      expect(jsContents).toMatch(viewQueryRegExp('TOKEN', 1));\n-      // match `i0.ɵɵcontentQuery(dirIndex, TOKEN, 1, null)`\n-      expect(jsContents).toMatch(contentQueryRegExp('TOKEN', 1));\n+      // match `i0.ɵɵviewQuery(TOKEN, 5, null)`\n+      expect(jsContents).toMatch(viewQueryRegExp('TOKEN', 5));\n+      // match `i0.ɵɵcontentQuery(dirIndex, TOKEN, 5, null)`\n+      expect(jsContents).toMatch(contentQueryRegExp('TOKEN', 5));\n     });\n \n     it('should compile expressions that write keys', () => {"
        },
        {
            "sha": "a0b07718c3a833bdce4f2a47a72d4b39a3918bb5",
            "filename": "packages/compiler/src/core.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler%2Fsrc%2Fcore.ts",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler%2Fsrc%2Fcore.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fcore.ts?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -28,9 +28,8 @@ export const createAttribute =\n     makeMetadataFactory<Attribute>('Attribute', (attributeName: string) => ({attributeName}));\n \n // Stores the default value of `emitDistinctChangesOnly` when the `emitDistinctChangesOnly` is not\n-// explicitly set. This value will be changed to `true` in v12.\n-// TODO(misko): switch the default in v12 to `true`. See: packages/core/src/metadata/di.ts\n-export const emitDistinctChangesOnlyDefaultValue = false;\n+// explicitly set.\n+export const emitDistinctChangesOnlyDefaultValue = true;\n \n \n export interface Query {"
        },
        {
            "sha": "d64931985e6ffd1d569a29c807e9f3927b9bff14",
            "filename": "packages/compiler/src/render3/partial/api.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler%2Fsrc%2Frender3%2Fpartial%2Fapi.ts",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler%2Fsrc%2Frender3%2Fpartial%2Fapi.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Frender3%2Fpartial%2Fapi.ts?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -237,9 +237,6 @@ export interface R3DeclareQueryMetadata {\n   /**\n    * True to only fire changes if there are underlying changes to the query.\n    */\n-  // TODO(misko):  This will become `true` be default in v12. `QueryList.changes` would fire even if\n-  // no changes to the query list were detected. This is not ideal, as changes should only fire if\n-  // the `QueryList` actually materially changed.\n   emitDistinctChangesOnly?: boolean;\n \n   /**"
        },
        {
            "sha": "0947ca46cdffbac0c1ff8855fe1d2acb1355b765",
            "filename": "packages/compiler/src/render3/partial/directive.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler%2Fsrc%2Frender3%2Fpartial%2Fdirective.ts",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcompiler%2Fsrc%2Frender3%2Fpartial%2Fdirective.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Frender3%2Fpartial%2Fdirective.ts?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -87,9 +87,11 @@ function compileQuery(query: R3QueryMetadata): o.LiteralMapExpr {\n   meta.set(\n       'predicate', Array.isArray(query.predicate) ? asLiteral(query.predicate) : query.predicate);\n   if (!query.emitDistinctChangesOnly) {\n-    // `emitDistinctChangesOnly` is special because in future we expect it to be `true`. For this\n-    // reason the absence should be interpreted as `true`.\n+    // `emitDistinctChangesOnly` is special because we expect it to be `true`.\n+    // Therefore we explicitly emit the field, and explicitly place it only when it's `false`.\n     meta.set('emitDistinctChangesOnly', o.literal(false));\n+  } else {\n+    // The linker will assume that an absent `emitDistinctChangesOnly` flag is by default `true`.\n   }\n   if (query.descendants) {\n     meta.set('descendants', o.literal(true));"
        },
        {
            "sha": "26c12e5b241dfe00d9bfba137b1cf5f7e71a94ae",
            "filename": "packages/core/src/linker/query_list.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcore%2Fsrc%2Flinker%2Fquery_list.ts",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcore%2Fsrc%2Flinker%2Fquery_list.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Flinker%2Fquery_list.ts?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -62,8 +62,7 @@ export class QueryList<T> implements Iterable<T> {\n   /**\n    * @param emitDistinctChangesOnly Whether `QueryList.changes` should fire only when actual change\n    *     has occurred. Or if it should fire when query is recomputed. (recomputing could resolve in\n-   *     the same result) This is set to `false` for backwards compatibility but will be changed to\n-   *     true in v12.\n+   *     the same result)\n    */\n   constructor(private _emitDistinctChangesOnly: boolean = false) {\n     // This function should be declared on the prototype, but doing so there will cause the class"
        },
        {
            "sha": "1a793bbde4895405f2fd9182c0c381153fe75904",
            "filename": "packages/core/src/metadata/di.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 7,
            "changes": 17,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcore%2Fsrc%2Fmetadata%2Fdi.ts",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcore%2Fsrc%2Fmetadata%2Fdi.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fmetadata%2Fdi.ts?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -107,9 +107,8 @@ export interface Query {\n }\n \n // Stores the default value of `emitDistinctChangesOnly` when the `emitDistinctChangesOnly` is not\n-// explicitly set. This value will be changed to `true` in v12.\n-// TODO(misko): switch the default in v12 to `true`. See: packages/compiler/src/core.ts\n-export const emitDistinctChangesOnlyDefaultValue = false;\n+// explicitly set.\n+export const emitDistinctChangesOnlyDefaultValue = true;\n \n \n /**\n@@ -148,8 +147,10 @@ export interface ContentChildrenDecorator {\n    * * **selector** - The directive type or the name used for querying.\n    * * **descendants** - True to include all descendants, otherwise include only direct children.\n    * * **emitDistinctChangesOnly** - The ` QueryList#changes` observable will emit new values only\n-   *   if the QueryList result has changed. The default value will change from `false` to `true` in\n-   *   v12. When `false` the `changes` observable might emit even if the QueryList has not changed.\n+   *   if the QueryList result has changed. When `false` the `changes` observable might emit even\n+   *   if the QueryList has not changed.\n+   *   ** Note: *** This config option is **deprecated**, it will be permanently set to `true` and\n+   *   removed in future versions of Angular.\n    * * **read** - Used to read a different token from the queried elements.\n    *\n    * @usageNotes\n@@ -287,8 +288,10 @@ export interface ViewChildrenDecorator {\n    * * **selector** - The directive type or the name used for querying.\n    * * **read** - Used to read a different token from the queried elements.\n    * * **emitDistinctChangesOnly** - The ` QueryList#changes` observable will emit new values only\n-   *   if the QueryList result has changed. The default value will change from `false` to `true` in\n-   *   v12. When `false` the `changes` observable might emit even if the QueryList has not changed.\n+   *   if the QueryList result has changed. When `false` the `changes` observable might emit even\n+   *   if the QueryList has not changed.\n+   *   ** Note: *** This config option is **deprecated**, it will be permanently set to `true` and\n+   * removed in future versions of Angular.\n    *\n    * @usageNotes\n    *"
        },
        {
            "sha": "97de093d803ab9b1e77fd166c36ef35396afb55f",
            "filename": "packages/core/test/acceptance/query_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 5,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcore%2Ftest%2Facceptance%2Fquery_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/70962465b5795f0a192f745016b1c461e7c8790b/packages%2Fcore%2Ftest%2Facceptance%2Fquery_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fquery_spec.ts?ref=70962465b5795f0a192f745016b1c461e7c8790b",
            "patch": "@@ -1257,11 +1257,8 @@ describe('query logic', () => {\n        * - systematically detach and insert a view - this would result in unnecessary processing\n        * when the previous and new indexes for the move operation are the same;\n        * - detect the situation where the indexes are the same and do no processing in such case.\n-       *\n-       * This tests asserts on the implementation choices done by the VE (detach and insert) so we\n-       * can replicate the same behavior in ivy.\n        */\n-      it('should notify on changes when a given view is removed and re-inserted at the same index',\n+      it('should NOT notify on changes when a given view is removed and re-inserted at the same index',\n          () => {\n            @Component({\n              selector: 'test-comp',\n@@ -1298,7 +1295,7 @@ describe('query logic', () => {\n            vc.move(viewRef, 0);\n            fixture.detectChanges();\n            expect(queryList.length).toBe(1);\n-           expect(fixture.componentInstance.queryListNotificationCounter).toBe(2);\n+           expect(fixture.componentInstance.queryListNotificationCounter).toBe(1);\n          });\n \n       it('should support a mix of content queries from the declaration and embedded view', () => {"
        }
    ],
    "stats": {
        "total": 178,
        "additions": 88,
        "deletions": 90
    }
}