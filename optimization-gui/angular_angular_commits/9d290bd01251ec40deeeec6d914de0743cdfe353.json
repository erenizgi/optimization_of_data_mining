{
    "author": "gkalpak",
    "message": "ci: correctly handle commit message with carriage returns in `payload-size.sh` (#43569)\n\nPreviously, if a commit message contained a carriage return in its\nheader, the `payload-size.sh` script would fail to upload the payload\nsize data to Firebase, because the JSON payload would be messed up when\ntrying to concatenate the commit message headers. See an example\n[here][1].\n\nThis commit avoids this problem by replacing carriage returns before\nconcatenating the commit message headers with the JSON payload string.\n\n[1]: https://app.circleci.com/pipelines/github/angular/angular/37437/workflows/d0fa4adf-43bb-464e-a2fd-d87da15226dd\n\nPR Close #43569",
    "sha": "9d290bd01251ec40deeeec6d914de0743cdfe353",
    "files": [
        {
            "sha": "f036834c63bfc2c4d20085ff14c838dd8a415801",
            "filename": "scripts/ci/payload-size.sh",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/9d290bd01251ec40deeeec6d914de0743cdfe353/scripts%2Fci%2Fpayload-size.sh",
            "raw_url": "https://github.com/angular/angular/raw/9d290bd01251ec40deeeec6d914de0743cdfe353/scripts%2Fci%2Fpayload-size.sh",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/scripts%2Fci%2Fpayload-size.sh?ref=9d290bd01251ec40deeeec6d914de0743cdfe353",
            "patch": "@@ -96,7 +96,7 @@ addMessage() {\n   # because $CI_COMMIT_RANGE may contain the previous SHA which will not be in the\n   # force push or commit, hence we default to last commit.\n   message=$(git --git-dir ${PROJECT_ROOT}/.git log --oneline $commitRange -- || git --git-dir ${PROJECT_ROOT}/.git log --oneline -n1)\n-  message=$(echo $message | sed 's/\\\\/\\\\\\\\/g' | sed 's/\"/\\\\\"/g')\n+  message=$(echo $message | sed 's/\\r//g' | sed 's/\\\\/\\\\\\\\/g' | sed 's/\"/\\\\\"/g')\n   payloadData=\"$payloadData\\\"message\\\": \\\"$message\\\", \"\n }\n "
        }
    ],
    "stats": {
        "total": 2,
        "additions": 1,
        "deletions": 1
    }
}