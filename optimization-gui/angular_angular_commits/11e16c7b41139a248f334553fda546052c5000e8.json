{
    "author": "petebacondarwin",
    "message": "refactor(core): do not publish `ɵɵgetFactoryOf()` (#41040)\n\nPreviously, `ɵɵgetFactoryOf()` was \"privately\" published from\n`@angular/core` since in the past it was assumed that this\nmight be an instruction generated by the compiler.\n\nThis is not currently the case, so this commit removes it from\nthe private exports and renames it to indicate that it is a local\nhelper function.\n\nPR Close #41040",
    "sha": "11e16c7b41139a248f334553fda546052c5000e8",
    "files": [
        {
            "sha": "dd6525fd3433ce12ed3e1ea9c551043a9aaff5dc",
            "filename": "packages/core/src/core_render3_private_export.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/11e16c7b41139a248f334553fda546052c5000e8/packages%2Fcore%2Fsrc%2Fcore_render3_private_export.ts",
            "raw_url": "https://github.com/angular/angular/raw/11e16c7b41139a248f334553fda546052c5000e8/packages%2Fcore%2Fsrc%2Fcore_render3_private_export.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fcore_render3_private_export.ts?ref=11e16c7b41139a248f334553fda546052c5000e8",
            "patch": "@@ -145,7 +145,6 @@ export {\n   ɵɵenableBindings,\n   ɵɵFactoryDef,\n   ɵɵgetCurrentView,\n-  ɵɵgetFactoryOf,\n   ɵɵgetInheritedFactory,\n   ɵɵhostProperty,\n   ɵɵi18n,"
        },
        {
            "sha": "1f92458ef102e5a441b229bb2c9fa3ca08edc0fc",
            "filename": "packages/core/src/render3/di.ts",
            "status": "modified",
            "additions": 20,
            "deletions": 23,
            "changes": 43,
            "blob_url": "https://github.com/angular/angular/blob/11e16c7b41139a248f334553fda546052c5000e8/packages%2Fcore%2Fsrc%2Frender3%2Fdi.ts",
            "raw_url": "https://github.com/angular/angular/raw/11e16c7b41139a248f334553fda546052c5000e8/packages%2Fcore%2Fsrc%2Frender3%2Fdi.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fdi.ts?ref=11e16c7b41139a248f334553fda546052c5000e8",
            "patch": "@@ -698,40 +698,19 @@ export class NodeInjector implements Injector {\n   }\n }\n \n-/**\n- * @codeGenApi\n- */\n-export function ɵɵgetFactoryOf<T>(type: Type<any>): FactoryFn<T>|null {\n-  const typeAny = type as any;\n-\n-  if (isForwardRef(type)) {\n-    return (() => {\n-             const factory = ɵɵgetFactoryOf<T>(resolveForwardRef(typeAny));\n-             return factory ? factory() : null;\n-           }) as any;\n-  }\n-\n-  let factory = getFactoryDef<T>(typeAny);\n-  if (factory === null) {\n-    const injectorDef = getInjectorDef<T>(typeAny);\n-    factory = injectorDef && injectorDef.factory;\n-  }\n-  return factory || null;\n-}\n-\n /**\n  * @codeGenApi\n  */\n export function ɵɵgetInheritedFactory<T>(type: Type<any>): (type: Type<T>) => T {\n   return noSideEffects(() => {\n     const ownConstructor = type.prototype.constructor;\n-    const ownFactory = ownConstructor[NG_FACTORY_DEF] || ɵɵgetFactoryOf(ownConstructor);\n+    const ownFactory = ownConstructor[NG_FACTORY_DEF] || getFactoryOf(ownConstructor);\n     const objectPrototype = Object.prototype;\n     let parent = Object.getPrototypeOf(type.prototype).constructor;\n \n     // Go up the prototype until we hit `Object`.\n     while (parent && parent !== objectPrototype) {\n-      const factory = parent[NG_FACTORY_DEF] || ɵɵgetFactoryOf(parent);\n+      const factory = parent[NG_FACTORY_DEF] || getFactoryOf(parent);\n \n       // If we hit something that has a factory and the factory isn't the same as the type,\n       // we've found the inherited factory. Note the check that the factory isn't the type's\n@@ -752,3 +731,21 @@ export function ɵɵgetInheritedFactory<T>(type: Type<any>): (type: Type<T>) =>\n     return t => new t();\n   });\n }\n+\n+function getFactoryOf<T>(type: Type<any>): FactoryFn<T>|null {\n+  const typeAny = type as any;\n+\n+  if (isForwardRef(type)) {\n+    return (() => {\n+             const factory = getFactoryOf<T>(resolveForwardRef(typeAny));\n+             return factory ? factory() : null;\n+           }) as any;\n+  }\n+\n+  let factory = getFactoryDef<T>(typeAny);\n+  if (factory === null) {\n+    const injectorDef = getInjectorDef<T>(typeAny);\n+    factory = injectorDef && injectorDef.factory;\n+  }\n+  return factory || null;\n+}"
        },
        {
            "sha": "1d1322c36ebd988555507adbdd9c0c4ba04f5ca9",
            "filename": "packages/core/src/render3/index.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/11e16c7b41139a248f334553fda546052c5000e8/packages%2Fcore%2Fsrc%2Frender3%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/11e16c7b41139a248f334553fda546052c5000e8/packages%2Fcore%2Fsrc%2Frender3%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Findex.ts?ref=11e16c7b41139a248f334553fda546052c5000e8",
            "patch": "@@ -16,7 +16,7 @@ import {getComponent, getDirectives, getHostElement, getRenderedText} from './ut\n \n export {NgModuleType} from '../metadata/ng_module_def';\n export {ComponentFactory, ComponentFactoryResolver, ComponentRef, injectComponentFactoryResolver} from './component_ref';\n-export {ɵɵgetFactoryOf, ɵɵgetInheritedFactory} from './di';\n+export {ɵɵgetInheritedFactory} from './di';\n export {getLocaleId, setLocaleId} from './i18n/i18n_locale_id';\n // clang-format off\n export {"
        },
        {
            "sha": "b6ddd81b754707eadc41d1ba5c0466a27d060f1d",
            "filename": "packages/core/test/bundling/forms/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/11e16c7b41139a248f334553fda546052c5000e8/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/11e16c7b41139a248f334553fda546052c5000e8/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json?ref=11e16c7b41139a248f334553fda546052c5000e8",
            "patch": "@@ -1004,6 +1004,9 @@\n   {\n     \"name\": \"getFactoryDef\"\n   },\n+  {\n+    \"name\": \"getFactoryOf\"\n+  },\n   {\n     \"name\": \"getFirstLContainer\"\n   },\n@@ -1718,9 +1721,6 @@\n   {\n     \"name\": \"ɵɵelementStart\"\n   },\n-  {\n-    \"name\": \"ɵɵgetFactoryOf\"\n-  },\n   {\n     \"name\": \"ɵɵgetInheritedFactory\"\n   },"
        }
    ],
    "stats": {
        "total": 52,
        "additions": 24,
        "deletions": 28
    }
}