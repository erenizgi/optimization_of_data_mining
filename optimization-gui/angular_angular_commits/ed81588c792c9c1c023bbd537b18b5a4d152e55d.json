{
    "author": "petebacondarwin",
    "message": "refactor(compiler-cli): move map creation to avoid unnecessary work (#38959)\n\nIf the `symbol` for the given `node` does not exist then there is no\npoint in creating the `map`.\n\nPR Close #38959",
    "sha": "ed81588c792c9c1c023bbd537b18b5a4d152e55d",
    "files": [
        {
            "sha": "202a4c43b3d99188bc00093a2ac3ea9e9c83a21c",
            "filename": "packages/compiler-cli/src/ngtsc/reflection/src/typescript.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/ed81588c792c9c1c023bbd537b18b5a4d152e55d/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Freflection%2Fsrc%2Ftypescript.ts",
            "raw_url": "https://github.com/angular/angular/raw/ed81588c792c9c1c023bbd537b18b5a4d152e55d/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Freflection%2Fsrc%2Ftypescript.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Freflection%2Fsrc%2Ftypescript.ts?ref=ed81588c792c9c1c023bbd537b18b5a4d152e55d",
            "patch": "@@ -105,14 +105,15 @@ export class TypeScriptReflectionHost implements ReflectionHost {\n     if (!ts.isSourceFile(node)) {\n       throw new Error(`getExportsOfModule() called on non-SourceFile in TS code`);\n     }\n-    const map = new Map<string, Declaration>();\n \n     // Reflect the module to a Symbol, and use getExportsOfModule() to get a list of exported\n     // Symbols.\n     const symbol = this.checker.getSymbolAtLocation(node);\n     if (symbol === undefined) {\n       return null;\n     }\n+\n+    const map = new Map<string, Declaration>();\n     this.checker.getExportsOfModule(symbol).forEach(exportSymbol => {\n       // Map each exported Symbol to a Declaration and add it to the map.\n       const decl = this.getDeclarationOfSymbol(exportSymbol, null);"
        }
    ],
    "stats": {
        "total": 3,
        "additions": 2,
        "deletions": 1
    }
}