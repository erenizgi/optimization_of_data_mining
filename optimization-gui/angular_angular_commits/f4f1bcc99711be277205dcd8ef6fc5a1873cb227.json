{
    "author": "lazarljubenovic",
    "message": "fix(forms): include null in .parent of abstract control (#32671)\n\nIt's perfectly valid for an abstract control not to have a defined parent; yet previously the\ntypes were asserting that AbstractControl#parent is not a null value. This changes correctly\nreflects the run-time behavior through the types.\n\nBREAKING CHANGE: Type of AbstractFormControl.parent now includes null\n\n`null` is now included in the types of .parent. If you don't already have a check for this case,\nthe TypeScript compiler might compain. A v11 migration exists which adds the not-null assertion\noperator where necessary.\n\nIn an unlikely case your code was testing the parnet against undefined with sitrct equality,\nyou'll need to change this to `=== null` instead, since the parent is not explicily initialized\nwith `null` instead of being left `undefined`.\n\nFixes #16999\n\nPR Close #32671",
    "sha": "f4f1bcc99711be277205dcd8ef6fc5a1873cb227",
    "files": [
        {
            "sha": "e1d7c36544c6ec12fd4fdeaee19a2ed309217586",
            "filename": "goldens/public-api/forms/forms.d.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/f4f1bcc99711be277205dcd8ef6fc5a1873cb227/goldens%2Fpublic-api%2Fforms%2Fforms.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/f4f1bcc99711be277205dcd8ef6fc5a1873cb227/goldens%2Fpublic-api%2Fforms%2Fforms.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fforms%2Fforms.d.ts?ref=f4f1bcc99711be277205dcd8ef6fc5a1873cb227",
            "patch": "@@ -6,7 +6,7 @@ export declare abstract class AbstractControl {\n     get enabled(): boolean;\n     readonly errors: ValidationErrors | null;\n     get invalid(): boolean;\n-    get parent(): FormGroup | FormArray;\n+    get parent(): FormGroup | FormArray | null;\n     get pending(): boolean;\n     readonly pristine: boolean;\n     get root(): AbstractControl;"
        },
        {
            "sha": "e3356e57263f23634fa04ee3ca72204316b42ba7",
            "filename": "packages/forms/src/model.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/f4f1bcc99711be277205dcd8ef6fc5a1873cb227/packages%2Fforms%2Fsrc%2Fmodel.ts",
            "raw_url": "https://github.com/angular/angular/raw/f4f1bcc99711be277205dcd8ef6fc5a1873cb227/packages%2Fforms%2Fsrc%2Fmodel.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Fsrc%2Fmodel.ts?ref=f4f1bcc99711be277205dcd8ef6fc5a1873cb227",
            "patch": "@@ -173,8 +173,7 @@ export abstract class AbstractControl {\n   // TODO(issue/24571): remove '!'.\n   _updateOn!: FormHooks;\n \n-  // TODO(issue/24571): remove '!'.\n-  private _parent!: FormGroup|FormArray;\n+  private _parent: FormGroup|FormArray|null = null;\n   private _asyncValidationSubscription: any;\n \n   /**\n@@ -267,7 +266,7 @@ export abstract class AbstractControl {\n   /**\n    * The parent control.\n    */\n-  get parent(): FormGroup|FormArray {\n+  get parent(): FormGroup|FormArray|null {\n     return this._parent;\n   }\n \n@@ -1018,7 +1017,7 @@ export abstract class AbstractControl {\n    */\n   private _parentMarkedDirty(onlySelf?: boolean): boolean {\n     const parentDirty = this._parent && this._parent.dirty;\n-    return !onlySelf && parentDirty && !this._parent._anyControlsDirty();\n+    return !onlySelf && !!parentDirty && !this._parent!._anyControlsDirty();\n   }\n }\n "
        }
    ],
    "stats": {
        "total": 9,
        "additions": 4,
        "deletions": 5
    }
}