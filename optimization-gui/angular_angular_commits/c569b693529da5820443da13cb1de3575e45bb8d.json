{
    "author": "devversion",
    "message": "build: switch view engine language-service tests to v12.x packages (#43431)\n\nThe view engine language-service tests currently rely on the `npm_package` output\nthat is built locally. They rely on the package output mostly for\ncompiling test scenarios (with dependencies on e.g. forms), and for\nthe testing the metadata extraction (testing proper suggestions for VE).\n\nThe reliance on these packages becomes problematic with the new Angular\nPackage Format v13 where no metadata files are shipped. To continue\nbeing able to test View Engine language-service compatibility, we will\nuse the v12.x framework packages for some of the test scenarios.\n\nPR Close #43431",
    "sha": "c569b693529da5820443da13cb1de3575e45bb8d",
    "files": [
        {
            "sha": "c3b73b5a228f3c1d4a43e7c15fad5c6e1582f057",
            "filename": "packages/compiler-cli/test/test_support.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/c569b693529da5820443da13cb1de3575e45bb8d/packages%2Fcompiler-cli%2Ftest%2Ftest_support.ts",
            "raw_url": "https://github.com/angular/angular/raw/c569b693529da5820443da13cb1de3575e45bb8d/packages%2Fcompiler-cli%2Ftest%2Ftest_support.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Ftest_support.ts?ref=c569b693529da5820443da13cb1de3575e45bb8d",
            "patch": "@@ -147,6 +147,7 @@ export function setupBazelTo(tmpDirPath: string) {\n   linkNpmArtifact('@angular/core-12', '@angular/core');\n   linkNpmArtifact('@angular/common-12', '@angular/common');\n   linkNpmArtifact('@angular/router-12', '@angular/router');\n+  linkNpmArtifact('@angular/forms-12', '@angular/forms');\n   linkNpmArtifact('@angular/platform-browser-12', '@angular/platform-browser');\n \n   // Link typescript"
        },
        {
            "sha": "6986af063d4f95c6200e71307e5b0fb0517e39bd",
            "filename": "packages/language-service/test/BUILD.bazel",
            "status": "modified",
            "additions": 9,
            "deletions": 9,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/c569b693529da5820443da13cb1de3575e45bb8d/packages%2Flanguage-service%2Ftest%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/c569b693529da5820443da13cb1de3575e45bb8d/packages%2Flanguage-service%2Ftest%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flanguage-service%2Ftest%2FBUILD.bazel?ref=c569b693529da5820443da13cb1de3575e45bb8d",
            "patch": "@@ -72,9 +72,9 @@ filegroup(\n jasmine_node_test(\n     name = \"test\",\n     data = [\n-        \"//packages/common:npm_package\",\n-        \"//packages/core:npm_package\",\n-        \"//packages/forms:npm_package\",\n+        \"@npm//@angular/common-12\",\n+        \"@npm//@angular/core-12\",\n+        \"@npm//@angular/forms-12\",\n     ],\n     tags = [\n         # the language service is not yet compatible with Ivy\n@@ -88,9 +88,9 @@ jasmine_node_test(\n jasmine_node_test(\n     name = \"infra_test\",\n     data = [\n-        \"//packages/common:npm_package\",\n-        \"//packages/core:npm_package\",\n-        \"//packages/forms:npm_package\",\n+        \"@npm//@angular/common-12\",\n+        \"@npm//@angular/core-12\",\n+        \"@npm//@angular/forms-12\",\n     ],\n     tags = [\n         # the language service is not yet compatible with Ivy\n@@ -121,9 +121,9 @@ ts_library(\n jasmine_node_test(\n     name = \"diagnostics\",\n     data = [\n-        \"//packages/common:npm_package\",\n-        \"//packages/core:npm_package\",\n-        \"//packages/forms:npm_package\",\n+        \"@npm//@angular/common-12\",\n+        \"@npm//@angular/core-12\",\n+        \"@npm//@angular/forms-12\",\n     ],\n     tags = [\n         # Disabled as these tests pertain to diagnostics in the old ngc compiler. The Ivy ngtsc"
        }
    ],
    "stats": {
        "total": 19,
        "additions": 10,
        "deletions": 9
    }
}