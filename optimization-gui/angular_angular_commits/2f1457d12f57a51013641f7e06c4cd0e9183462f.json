{
    "author": "gkalpak",
    "message": "docs(service-worker): mention strategy-dependent caching behavior for opaque responses (#44723)\n\nUpdate the \"Service worker configuration\" guide to mention the different\ncaching behaviors used for opaque responses based on the data-group's\nconfigured strategy.\n\nRelated to #44246.\n\nPR Close #44723",
    "sha": "2f1457d12f57a51013641f7e06c4cd0e9183462f",
    "files": [
        {
            "sha": "7224bbb2a24fa863e151b2648580ab0af1068940",
            "filename": "aio/content/guide/service-worker-config.md",
            "status": "modified",
            "additions": 27,
            "deletions": 1,
            "changes": 28,
            "blob_url": "https://github.com/angular/angular/blob/2f1457d12f57a51013641f7e06c4cd0e9183462f/aio%2Fcontent%2Fguide%2Fservice-worker-config.md",
            "raw_url": "https://github.com/angular/angular/raw/2f1457d12f57a51013641f7e06c4cd0e9183462f/aio%2Fcontent%2Fguide%2Fservice-worker-config.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fservice-worker-config.md?ref=2f1457d12f57a51013641f7e06c4cd0e9183462f",
            "patch": "@@ -247,6 +247,28 @@ This essentially does the following:\n \n </div>\n \n+<div class=\"callout is-important\">\n+\n+  <header>Note on opaque responses</header>\n+\n+  [Opaque responses][opaque-response] are handled differently depending on the used strategy:\n+  Data-groups with the `freshness` strategy cache such responses normally.\n+  Data-groups with the `performance` strategy, however, do not cache opaque responses.\n+\n+  In case you are not familiar, an opaque response is a special type of response returned when requesting a resource that is on a different origin which doesn't return CORS headers.\n+  One of the characteristics of an opaque response is that the service worker is not allowed to read its status, meaning it can't check if the request was successful or not.\n+  See [Introduction to fetch()][response-types] for more details.\n+\n+  For data-groups with the `freshness` strategy, it doesn't matter if the service worker caches an error response.\n+  The data will be requested anew every time, only falling back to the cached response when offline or on a slow network.\n+\n+  For data-groups with the `performance` strategy on the other hand, caching an error response would be quite problematic.\n+  The service worker would continue to serve the error response until `maxAge` expired, even if the error was due to a temporary network or server issue.\n+\n+  If you are not able to implement CORS&mdash;for example, if you don't control the origin&mdash;prefer using the `freshness` strategy for resources that result in opaque responses.\n+\n+</div>\n+\n ### `cacheQueryOptions`\n \n See [assetGroups](#assetgroups) for details.\n@@ -320,4 +342,8 @@ Possible values:\n The `freshness` strategy usually results in more requests sent to the server, which can increase response latency.\n It is recommended that you use the default performance strategy whenever possible.\n \n-</div>\n\\ No newline at end of file\n+</div>\n+\n+\n+[opaque-response]: https://fetch.spec.whatwg.org/#concept-filtered-response-opaque\n+[response-types]: https://developers.google.com/web/updates/2015/03/introduction-to-fetch#response_types"
        }
    ],
    "stats": {
        "total": 28,
        "additions": 27,
        "deletions": 1
    }
}