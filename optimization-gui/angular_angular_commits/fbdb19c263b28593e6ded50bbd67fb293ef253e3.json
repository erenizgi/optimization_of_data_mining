{
    "author": "petebacondarwin",
    "message": "docs(localize): expose documentation for the `@angular/localize` package (#40317)\n\nPR Close #40317",
    "sha": "fbdb19c263b28593e6ded50bbd67fb293ef253e3",
    "files": [
        {
            "sha": "79eef899963746ca7845ac4da2e7dc551c90e2b5",
            "filename": "aio/tools/transforms/angular-api-package/index.js",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/fbdb19c263b28593e6ded50bbd67fb293ef253e3/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Findex.js",
            "raw_url": "https://github.com/angular/angular/raw/fbdb19c263b28593e6ded50bbd67fb293ef253e3/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Findex.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-api-package%2Findex.js?ref=fbdb19c263b28593e6ded50bbd67fb293ef253e3",
            "patch": "@@ -86,7 +86,7 @@ module.exports =\n           readTypeScriptModules.ignoreExportsMatching = [/^_|^ɵɵ|^VERSION$/];\n           readTypeScriptModules.hidePrivateMembers = true;\n \n-          // NOTE: This list should be in sync with tools/public_api_guard/BUILD.bazel\n+          // NOTE: This list should be in sync with the folders/files in `goldens/public-api`.\n           readTypeScriptModules.sourceFiles = [\n             'animations/index.ts',\n             'animations/browser/index.ts',\n@@ -101,6 +101,8 @@ module.exports =\n             'core/testing/index.ts',\n             'elements/index.ts',\n             'forms/index.ts',\n+            'localize/index.ts',\n+            'localize/init/index.ts',\n             'platform-browser/index.ts',\n             'platform-browser/animations/index.ts',\n             'platform-browser/testing/index.ts',"
        },
        {
            "sha": "a08e9ec12122644dc6a269f6d04be438c98d9ee5",
            "filename": "packages/localize/PACKAGE.md",
            "status": "added",
            "additions": 56,
            "deletions": 0,
            "changes": 56,
            "blob_url": "https://github.com/angular/angular/blob/fbdb19c263b28593e6ded50bbd67fb293ef253e3/packages%2Flocalize%2FPACKAGE.md",
            "raw_url": "https://github.com/angular/angular/raw/fbdb19c263b28593e6ded50bbd67fb293ef253e3/packages%2Flocalize%2FPACKAGE.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2FPACKAGE.md?ref=fbdb19c263b28593e6ded50bbd67fb293ef253e3",
            "patch": "@@ -0,0 +1,56 @@\n+The `@angular/localize` package contains helpers and tools for localizing your application.\n+\n+You should install this package using `ng add @angular/localize` if you need to tag text in your\n+application that you want to be translatable.\n+\n+The approach is based around the concept of tagging strings in code with a [template literal tag handler][tagged-templates]\n+called `$localize`. The idea is that strings that need to be translated are “marked” using this tag:\n+\n+```ts\n+const message = $localize`Hello, World!`;\n+```\n+\n+---\n+\n+This `$localize` identifier can be a real function that can do the translation at runtime, in the browser.\n+But, significantly, it is also a global identifier that survives minification.\n+This means it can act simply as a marker in the code that a static post-processing tool can use to replace\n+the original text with translated text before the code is deployed.\n+\n+For example, the following code:\n+\n+```ts\n+warning = $localize`${this.process} is not right`;\n+```\n+\n+could be replaced with:\n+\n+```ts\n+warning = \"\" + this.process + \", ce n'est pas bon.\";\n+```\n+\n+The result is that all references to `$localize` are removed, and there is **zero runtime cost** to rendering\n+the translated text.\n+\n+---\n+\n+The Angular template compiler also generates `$localize` tagged strings rather than doing the translation itself.\n+For example, the following template:\n+\n+```html\n+<h1 i18n>Hello, World!</h1>\n+```\n+\n+would be compiled to something like:\n+\n+```ts\n+ɵɵelementStart(0, \"h1\"); //  <h1>\n+ɵɵi18n(1, $localize`Hello, World!`); //  Hello, World!\n+ɵɵelementEnd(); //  </h1>\n+```\n+\n+This means that after the Angular compiler has completed its work, all the template text marked with `i18n`\n+attributes have been converted to `$localize` tagged strings, which can be processed just like any other\n+tagged string.\n+\n+[tagged-templates]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#Tagged_templates"
        },
        {
            "sha": "581750ff4dc77c6d4bd379766de8bf7c122a098b",
            "filename": "packages/localize/init/PACKAGE.md",
            "status": "added",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/fbdb19c263b28593e6ded50bbd67fb293ef253e3/packages%2Flocalize%2Finit%2FPACKAGE.md",
            "raw_url": "https://github.com/angular/angular/raw/fbdb19c263b28593e6ded50bbd67fb293ef253e3/packages%2Flocalize%2Finit%2FPACKAGE.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Finit%2FPACKAGE.md?ref=fbdb19c263b28593e6ded50bbd67fb293ef253e3",
            "patch": "@@ -0,0 +1,2 @@\n+The `@angular/localize` package exposes the `$localize` function in the global namespace, which can\n+be used to tag i18n messages in your code that needs to be translated."
        },
        {
            "sha": "e29960f8f3d4cb4916c3b0f76e275e6b2727821f",
            "filename": "packages/localize/init/index.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/fbdb19c263b28593e6ded50bbd67fb293ef253e3/packages%2Flocalize%2Finit%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/fbdb19c263b28593e6ded50bbd67fb293ef253e3/packages%2Flocalize%2Finit%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Finit%2Findex.ts?ref=fbdb19c263b28593e6ded50bbd67fb293ef253e3",
            "patch": "@@ -7,7 +7,7 @@\n  */\n import {$localize, _global, LocalizeFn} from '../src/localize';\n \n-export {LocalizeFn, TranslateFn} from '../src/localize';\n+export {$localize, LocalizeFn, TranslateFn} from '../src/localize';\n \n // Attach $localize to the global context, as a side-effect of this module.\n _global.$localize = $localize;\n@@ -37,7 +37,7 @@ declare global {\n    * ```\n    *\n    * This format is the same as that used for `i18n` markers in Angular templates. See the\n-   * [Angular 18n guide](guide/i18n#template-translations).\n+   * [Angular 18n guide](guide/i18n#mark-text-for-translations).\n    *\n    * **Naming placeholders**\n    *"
        },
        {
            "sha": "e6bb9ab66d4e474358574fe475c7bfe852c12610",
            "filename": "packages/localize/src/localize/src/localize.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 1,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/fbdb19c263b28593e6ded50bbd67fb293ef253e3/packages%2Flocalize%2Fsrc%2Flocalize%2Fsrc%2Flocalize.ts",
            "raw_url": "https://github.com/angular/angular/raw/fbdb19c263b28593e6ded50bbd67fb293ef253e3/packages%2Flocalize%2Fsrc%2Flocalize%2Fsrc%2Flocalize.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Flocalize%2Fsrc%2Flocalize.ts?ref=fbdb19c263b28593e6ded50bbd67fb293ef253e3",
            "patch": "@@ -6,6 +6,7 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n+/** @nodoc */\n export interface LocalizeFn {\n   (messageParts: TemplateStringsArray, ...expressions: readonly any[]): string;\n \n@@ -38,6 +39,7 @@ export interface LocalizeFn {\n   locale?: string;\n }\n \n+/** @nodoc */\n export interface TranslateFn {\n   (messageParts: TemplateStringsArray,\n    expressions: readonly any[]): [TemplateStringsArray, readonly any[]];\n@@ -66,7 +68,7 @@ export interface TranslateFn {\n  * ```\n  *\n  * This format is the same as that used for `i18n` markers in Angular templates. See the\n- * [Angular 18n guide](guide/i18n#template-translations).\n+ * [Angular 18n guide](guide/i18n#mark-text-for-translations).\n  *\n  * **Naming placeholders**\n  *\n@@ -130,9 +132,13 @@ export interface TranslateFn {\n  * the original template literal string without applying any translations to the parts. This\n  * version is used during development or where there is no need to translate the localized\n  * template literals.\n+ *\n  * @param messageParts a collection of the static parts of the template string.\n  * @param expressions a collection of the values of each placeholder in the template string.\n  * @returns the translated string, with the `messageParts` and `expressions` interleaved together.\n+ *\n+ * @globalApi\n+ * @publicApi\n  */\n export const $localize: LocalizeFn = function(\n     messageParts: TemplateStringsArray, ...expressions: readonly any[]) {"
        },
        {
            "sha": "838df1aeddec3519f848eb3921d1d6a28aa3a5eb",
            "filename": "packages/localize/src/translate.ts",
            "status": "modified",
            "additions": 38,
            "deletions": 11,
            "changes": 49,
            "blob_url": "https://github.com/angular/angular/blob/fbdb19c263b28593e6ded50bbd67fb293ef253e3/packages%2Flocalize%2Fsrc%2Ftranslate.ts",
            "raw_url": "https://github.com/angular/angular/raw/fbdb19c263b28593e6ded50bbd67fb293ef253e3/packages%2Flocalize%2Fsrc%2Ftranslate.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Ftranslate.ts?ref=fbdb19c263b28593e6ded50bbd67fb293ef253e3",
            "patch": "@@ -17,21 +17,43 @@ import {MessageId, ParsedTranslation, parseTranslation, TargetMessage, translate\n declare const $localize: LocalizeFn&{TRANSLATIONS: Record<MessageId, ParsedTranslation>};\n \n /**\n- * Load translations for `$localize`.\n+ * Load translations for use by `$localize`, if doing runtime translation.\n  *\n- * The given `translations` are processed and added to a lookup based on their `MessageId`.\n- * A new translation will overwrite a previous translation if it has the same `MessageId`.\n+ * If the `$localize` tagged strings are not going to be replaced at compiled time, it is possible\n+ * to load a set of translations that will be applied to the `$localize` tagged strings at runtime,\n+ * in the browser.\n  *\n- * * If a message is generated by the Angular compiler from an `i18n` marker in a template, the\n- *   `MessageId` is passed through to the `$localize` call as a custom `MessageId`. The `MessageId`\n- *   will match what is extracted into translation files.\n+ * Loading a new translation will overwrite a previous translation if it has the same `MessageId`.\n  *\n- * * If the translation is from a call to `$localize` in application code, and no custom `MessageId`\n- *   is provided, then the `MessageId` can be generated by passing the tagged string message-parts\n- *   to the `parseMessage()` function (not currently public API).\n+ * Note that `$localize` messages are only processed once, when the tagged string is first\n+ * encountered, and does not provide dynamic language changing without refreshing the browser.\n+ * Loading new translations later in the application life-cycle will not change the translated text\n+ * of messages that have already been translated.\n  *\n- * @publicApi\n+ * The message IDs and translations are in the same format as that rendered to \"simple JSON\"\n+ * translation files when extracting messages. In particular, placeholders in messages are rendered\n+ * using the `{$PLACEHOLDER_NAME}` syntax. For example the message from the following template:\n+ *\n+ * ```html\n+ * <div i18n>pre<span>inner-pre<b>bold</b>inner-post</span>post</div>\n+ * ```\n+ *\n+ * would have the following form in the `translations` map:\n+ *\n+ * ```ts\n+ * {\n+ *   \"2932901491976224757\":\n+ *      \"pre{$START_TAG_SPAN}inner-pre{$START_BOLD_TEXT}bold{$CLOSE_BOLD_TEXT}inner-post{$CLOSE_TAG_SPAN}post\"\n+ * }\n+ * ```\n+ *\n+ * @param translations A map from message ID to translated message.\n  *\n+ * These messages are processed and added to a lookup based on their `MessageId`.\n+ *\n+ * @see `clearTranslations()` for removing translations loaded using this function.\n+ * @see `$localize` for tagging messages as needing to be translated.\n+ * @publicApi\n  */\n export function loadTranslations(translations: Record<MessageId, TargetMessage>) {\n   // Ensure the translate function exists\n@@ -47,7 +69,12 @@ export function loadTranslations(translations: Record<MessageId, TargetMessage>)\n }\n \n /**\n- * Remove all translations for `$localize`.\n+ * Remove all translations for `$localize`, if doing runtime translation.\n+ *\n+ * All translations that had been loading into memory using `loadTranslations()` will be removed.\n+ *\n+ * @see `loadTranslations()` for loading translations at runtime.\n+ * @see `$localize` for tagging messages as needing to be translated.\n  *\n  * @publicApi\n  */"
        }
    ],
    "stats": {
        "total": 123,
        "additions": 108,
        "deletions": 15
    }
}