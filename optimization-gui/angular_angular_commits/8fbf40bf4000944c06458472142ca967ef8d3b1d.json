{
    "author": "JiaLiPassion",
    "message": "feat(core): update reference and doc to change `async` to `waitAsync`. (#37583)\n\nThe last commit change `async` to `waitForAsync`.\nThis commit update all usages in the code and also update aio doc.\n\nPR Close #37583",
    "sha": "8fbf40bf4000944c06458472142ca967ef8d3b1d",
    "files": [
        {
            "sha": "81488e7bc678e381f87bd5516a377d38007b191b",
            "filename": "aio/content/examples/forms-overview/src/app/app.component.spec.ts",
            "status": "modified",
            "additions": 21,
            "deletions": 21,
            "changes": 42,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fforms-overview%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fforms-overview%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Fforms-overview%2Fsrc%2Fapp%2Fapp.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,31 +1,31 @@\n-import { TestBed, async } from '@angular/core/testing';\n+import { TestBed, waitForAsync } from '@angular/core/testing';\n+\n import { AppComponent } from './app.component';\n-import { TemplateModule } from './template/template.module';\n import { ReactiveModule } from './reactive/reactive.module';\n+import { TemplateModule } from './template/template.module';\n \n describe('AppComponent', () => {\n-\n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      imports: [ReactiveModule, TemplateModule],\n-      declarations: [\n-        AppComponent\n-      ],\n-    }).compileComponents();\n+  beforeEach(waitForAsync(() => {\n+    TestBed\n+        .configureTestingModule({\n+          imports: [ReactiveModule, TemplateModule],\n+          declarations: [AppComponent],\n+        })\n+        .compileComponents();\n   }));\n \n-  it('should create the app', async(() => {\n-    const fixture = TestBed.createComponent(AppComponent);\n-    const app = fixture.componentInstance;\n+  it('should create the app', waitForAsync(() => {\n+       const fixture = TestBed.createComponent(AppComponent);\n+       const app = fixture.componentInstance;\n \n-    expect(app).toBeTruthy();\n-  }));\n+       expect(app).toBeTruthy();\n+     }));\n \n-  it('should render title', async(() => {\n-    const fixture = TestBed.createComponent(AppComponent);\n-    fixture.detectChanges();\n+  it('should render title', waitForAsync(() => {\n+       const fixture = TestBed.createComponent(AppComponent);\n+       fixture.detectChanges();\n \n-    const compiled = fixture.debugElement.nativeElement;\n-    expect(compiled.querySelector('h1').textContent).toContain('Forms Overview');\n-  }));\n+       const compiled = fixture.debugElement.nativeElement;\n+       expect(compiled.querySelector('h1').textContent).toContain('Forms Overview');\n+     }));\n });"
        },
        {
            "sha": "47e7549501f67d3c594394e456aeeffb4fb18433",
            "filename": "aio/content/examples/forms-overview/src/app/reactive/favorite-color/favorite-color.component.spec.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 8,
            "changes": 15,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fforms-overview%2Fsrc%2Fapp%2Freactive%2Ffavorite-color%2Ffavorite-color.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fforms-overview%2Fsrc%2Fapp%2Freactive%2Ffavorite-color%2Ffavorite-color.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Fforms-overview%2Fsrc%2Fapp%2Freactive%2Ffavorite-color%2Ffavorite-color.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,19 +1,18 @@\n-import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { ComponentFixture, TestBed, waitForAsync } from '@angular/core/testing';\n import { ReactiveFormsModule } from '@angular/forms';\n \n-import { FavoriteColorComponent } from './favorite-color.component';\n import { createNewEvent } from '../../shared/utils';\n+import { FavoriteColorComponent } from './favorite-color.component';\n \n describe('Favorite Color Component', () => {\n   let component: FavoriteColorComponent;\n   let fixture: ComponentFixture<FavoriteColorComponent>;\n \n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      imports: [ ReactiveFormsModule ],\n-      declarations: [ FavoriteColorComponent ]\n-    })\n-    .compileComponents();\n+  beforeEach(waitForAsync(() => {\n+    TestBed\n+        .configureTestingModule(\n+            {imports: [ReactiveFormsModule], declarations: [FavoriteColorComponent]})\n+        .compileComponents();\n   }));\n \n   beforeEach(() => {"
        },
        {
            "sha": "0a00898167bfb39ce32da66a89a5b19e6c9d1032",
            "filename": "aio/content/examples/forms-overview/src/app/template/favorite-color/favorite-color.component.spec.ts",
            "status": "modified",
            "additions": 18,
            "deletions": 21,
            "changes": 39,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fforms-overview%2Fsrc%2Fapp%2Ftemplate%2Ffavorite-color%2Ffavorite-color.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fforms-overview%2Fsrc%2Fapp%2Ftemplate%2Ffavorite-color%2Ffavorite-color.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Fforms-overview%2Fsrc%2Fapp%2Ftemplate%2Ffavorite-color%2Ffavorite-color.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,19 +1,16 @@\n-import { async, ComponentFixture, TestBed, tick, fakeAsync } from '@angular/core/testing';\n+import { ComponentFixture, fakeAsync, TestBed, tick, waitForAsync } from '@angular/core/testing';\n import { FormsModule } from '@angular/forms';\n \n-import { FavoriteColorComponent } from './favorite-color.component';\n import { createNewEvent } from '../../shared/utils';\n+import { FavoriteColorComponent } from './favorite-color.component';\n \n describe('FavoriteColorComponent', () => {\n   let component: FavoriteColorComponent;\n   let fixture: ComponentFixture<FavoriteColorComponent>;\n \n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      imports: [ FormsModule ],\n-      declarations: [ FavoriteColorComponent ]\n-    })\n-    .compileComponents();\n+  beforeEach(waitForAsync(() => {\n+    TestBed.configureTestingModule({imports: [FormsModule], declarations: [FavoriteColorComponent]})\n+        .compileComponents();\n   }));\n \n   beforeEach(() => {\n@@ -28,29 +25,29 @@ describe('FavoriteColorComponent', () => {\n \n   // #docregion model-to-view\n   it('should update the favorite color on the input field', fakeAsync(() => {\n-    component.favoriteColor = 'Blue';\n+       component.favoriteColor = 'Blue';\n \n-    fixture.detectChanges();\n+       fixture.detectChanges();\n \n-    tick();\n+       tick();\n \n-    const input = fixture.nativeElement.querySelector('input');\n+       const input = fixture.nativeElement.querySelector('input');\n \n-    expect(input.value).toBe('Blue');\n-  }));\n+       expect(input.value).toBe('Blue');\n+     }));\n   // #enddocregion model-to-view\n \n   // #docregion view-to-model\n   it('should update the favorite color in the component', fakeAsync(() => {\n-    const input = fixture.nativeElement.querySelector('input');\n-    const event = createNewEvent('input');\n+       const input = fixture.nativeElement.querySelector('input');\n+       const event = createNewEvent('input');\n \n-    input.value = 'Red';\n-    input.dispatchEvent(event);\n+       input.value = 'Red';\n+       input.dispatchEvent(event);\n \n-    fixture.detectChanges();\n+       fixture.detectChanges();\n \n-    expect(component.favoriteColor).toEqual('Red');\n-  }));\n+       expect(component.favoriteColor).toEqual('Red');\n+     }));\n   // #enddocregion view-to-model\n });"
        },
        {
            "sha": "ca72b617a9e9af3af1ac1d2eb7e7bd19ac5cd0ea",
            "filename": "aio/content/examples/schematics-for-libraries/projects/my-lib/src/lib/my-lib.component.spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 6,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fschematics-for-libraries%2Fprojects%2Fmy-lib%2Fsrc%2Flib%2Fmy-lib.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fschematics-for-libraries%2Fprojects%2Fmy-lib%2Fsrc%2Flib%2Fmy-lib.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Fschematics-for-libraries%2Fprojects%2Fmy-lib%2Fsrc%2Flib%2Fmy-lib.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,16 +1,13 @@\n-import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { ComponentFixture, TestBed, waitForAsync } from '@angular/core/testing';\n \n import { MyLibComponent } from './my-lib.component';\n \n describe('MyLibComponent', () => {\n   let component: MyLibComponent;\n   let fixture: ComponentFixture<MyLibComponent>;\n \n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      declarations: [ MyLibComponent ]\n-    })\n-    .compileComponents();\n+  beforeEach(waitForAsync(() => {\n+    TestBed.configureTestingModule({declarations: [MyLibComponent]}).compileComponents();\n   }));\n \n   beforeEach(() => {"
        },
        {
            "sha": "36ded934371d2a652b651071e149b759b8d10ecc",
            "filename": "aio/content/examples/setup/src/app/app.component.spec.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 12,
            "changes": 20,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fsetup%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fsetup%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Fsetup%2Fsrc%2Fapp%2Fapp.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,19 +1,16 @@\n-import { AppComponent } from './app.component';\n-\n-import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n-import { By } from '@angular/platform-browser';\n import { DebugElement } from '@angular/core';\n+import { ComponentFixture, TestBed, waitForAsync } from '@angular/core/testing';\n+import { By } from '@angular/platform-browser';\n+\n+import { AppComponent } from './app.component';\n \n describe('AppComponent', () => {\n   let de: DebugElement;\n   let comp: AppComponent;\n   let fixture: ComponentFixture<AppComponent>;\n \n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      declarations: [ AppComponent ]\n-    })\n-    .compileComponents();\n+  beforeEach(waitForAsync(() => {\n+    TestBed.configureTestingModule({declarations: [AppComponent]}).compileComponents();\n   }));\n \n   beforeEach(() => {\n@@ -22,12 +19,11 @@ describe('AppComponent', () => {\n     de = fixture.debugElement.query(By.css('h1'));\n   });\n \n-  it('should create component', () => expect(comp).toBeDefined() );\n+  it('should create component', () => expect(comp).toBeDefined());\n \n   it('should have expected <h1> text', () => {\n     fixture.detectChanges();\n     const h1 = de.nativeElement;\n-    expect(h1.textContent).toMatch(/angular/i,\n-      '<h1> should say something about \"Angular\"');\n+    expect(h1.textContent).toMatch(/angular/i, '<h1> should say something about \"Angular\"');\n   });\n });"
        },
        {
            "sha": "66e1858c94aa4f461cb5e0a730df4965841ebc39",
            "filename": "aio/content/examples/testing/src/app/app-initial.component.spec.ts",
            "status": "modified",
            "additions": 25,
            "deletions": 29,
            "changes": 54,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fapp-initial.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fapp-initial.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fapp-initial.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,6 +1,6 @@\n // #docplaster\n // #docregion\n-import { TestBed, async } from '@angular/core/testing';\n+import { TestBed, waitForAsync } from '@angular/core/testing';\n // #enddocregion\n import { AppComponent } from './app-initial.component';\n /*\n@@ -12,29 +12,29 @@ describe('AppComponent', () => {\n */\n describe('AppComponent (initial CLI version)', () => {\n   // #docregion\n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      declarations: [\n-        AppComponent\n-      ],\n-    }).compileComponents();\n-  }));\n-  it('should create the app', async(() => {\n-    const fixture = TestBed.createComponent(AppComponent);\n-    const app = fixture.componentInstance;\n-    expect(app).toBeTruthy();\n-  }));\n-  it(`should have as title 'app'`, async(() => {\n-    const fixture = TestBed.createComponent(AppComponent);\n-    const app = fixture.componentInstance;\n-    expect(app.title).toEqual('app');\n-  }));\n-  it('should render title', async(() => {\n-    const fixture = TestBed.createComponent(AppComponent);\n-    fixture.detectChanges();\n-    const compiled = fixture.nativeElement;\n-    expect(compiled.querySelector('h1').textContent).toContain('Welcome to app!');\n+  beforeEach(waitForAsync(() => {\n+    TestBed\n+        .configureTestingModule({\n+          declarations: [AppComponent],\n+        })\n+        .compileComponents();\n   }));\n+  it('should create the app', waitForAsync(() => {\n+       const fixture = TestBed.createComponent(AppComponent);\n+       const app = fixture.componentInstance;\n+       expect(app).toBeTruthy();\n+     }));\n+  it(`should have as title 'app'`, waitForAsync(() => {\n+       const fixture = TestBed.createComponent(AppComponent);\n+       const app = fixture.componentInstance;\n+       expect(app.title).toEqual('app');\n+     }));\n+  it('should render title', waitForAsync(() => {\n+       const fixture = TestBed.createComponent(AppComponent);\n+       fixture.detectChanges();\n+       const compiled = fixture.nativeElement;\n+       expect(compiled.querySelector('h1').textContent).toContain('Welcome to app!');\n+     }));\n });\n // #enddocregion\n \n@@ -43,16 +43,13 @@ import { DebugElement } from '@angular/core';\n import { ComponentFixture } from '@angular/core/testing';\n \n describe('AppComponent (initial CLI version - as it should be)', () => {\n-\n   let app: AppComponent;\n   let de: DebugElement;\n   let fixture: ComponentFixture<AppComponent>;\n \n   beforeEach(() => {\n     TestBed.configureTestingModule({\n-      declarations: [\n-        AppComponent\n-      ],\n+      declarations: [AppComponent],\n     });\n \n     fixture = TestBed.createComponent(AppComponent);\n@@ -70,7 +67,6 @@ describe('AppComponent (initial CLI version - as it should be)', () => {\n \n   it('should render title in an h1 tag', () => {\n     fixture.detectChanges();\n-    expect(de.nativeElement.querySelector('h1').textContent)\n-      .toContain('Welcome to app!');\n+    expect(de.nativeElement.querySelector('h1').textContent).toContain('Welcome to app!');\n   });\n });"
        },
        {
            "sha": "d094c0fef9fc8caa4daf95d42183dad9c51f2ed6",
            "filename": "aio/content/examples/testing/src/app/app.component.router.spec.ts",
            "status": "modified",
            "additions": 66,
            "deletions": 69,
            "changes": 135,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fapp.component.router.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fapp.component.router.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fapp.component.router.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,7 +1,7 @@\n // For more examples:\n //   https://github.com/angular/angular/blob/master/modules/@angular/router/test/integration.spec.ts\n \n-import { async, ComponentFixture, fakeAsync, TestBed, tick } from '@angular/core/testing';\n+import { waitForAsync, ComponentFixture, fakeAsync, TestBed, tick } from '@angular/core/testing';\n \n import { asyncData } from '../testing';\n \n@@ -21,9 +21,9 @@ import { AppModule } from './app.module';\n import { AppComponent } from './app.component';\n import { AboutComponent } from './about/about.component';\n import { DashboardComponent } from './dashboard/dashboard.component';\n-import { TwainService } from './twain/twain.service';\n \n import { HeroService, TestHeroService } from './model/testing/test-hero.service';\n+import { TwainService } from './twain/twain.service';\n \n let comp: AppComponent;\n let fixture: ComponentFixture<AppComponent>;\n@@ -32,54 +32,51 @@ let router: Router;\n let location: SpyLocation;\n \n describe('AppComponent & RouterTestingModule', () => {\n-\n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      imports: [\n-        AppModule,\n-        RouterTestingModule.withRoutes(routes),\n-      ],\n-      providers: [\n-        { provide: HeroService, useClass: TestHeroService }\n-      ]\n-    })\n-    .compileComponents();\n+  beforeEach(waitForAsync(() => {\n+    TestBed\n+        .configureTestingModule({\n+          imports: [\n+            AppModule,\n+            RouterTestingModule.withRoutes(routes),\n+          ],\n+          providers: [{provide: HeroService, useClass: TestHeroService}]\n+        })\n+        .compileComponents();\n   }));\n \n   it('should navigate to \"Dashboard\" immediately', fakeAsync(() => {\n-    createComponent();\n-    tick(); // wait for async data to arrive\n-    expectPathToBe('/dashboard', 'after initialNavigation()');\n-    expectElementOf(DashboardComponent);\n-  }));\n+       createComponent();\n+       tick();  // wait for async data to arrive\n+       expectPathToBe('/dashboard', 'after initialNavigation()');\n+       expectElementOf(DashboardComponent);\n+     }));\n \n   it('should navigate to \"About\" on click', fakeAsync(() => {\n-    createComponent();\n-    click(page.aboutLinkDe);\n-    // page.aboutLinkDe.nativeElement.click(); // ok but fails in phantom\n+       createComponent();\n+       click(page.aboutLinkDe);\n+       // page.aboutLinkDe.nativeElement.click(); // ok but fails in phantom\n \n-    advance();\n-    expectPathToBe('/about');\n-    expectElementOf(AboutComponent);\n-  }));\n+       advance();\n+       expectPathToBe('/about');\n+       expectElementOf(AboutComponent);\n+     }));\n \n   it('should navigate to \"About\" w/ browser location URL change', fakeAsync(() => {\n-    createComponent();\n-    location.simulateHashChange('/about');\n-    // location.go('/about'); // also works ... except, perhaps, in Stackblitz\n-    advance();\n-    expectPathToBe('/about');\n-    expectElementOf(AboutComponent);\n-  }));\n+       createComponent();\n+       location.simulateHashChange('/about');\n+       // location.go('/about'); // also works ... except, perhaps, in Stackblitz\n+       advance();\n+       expectPathToBe('/about');\n+       expectElementOf(AboutComponent);\n+     }));\n \n   // Can't navigate to lazy loaded modules with this technique\n   xit('should navigate to \"Heroes\" on click (not working yet)', fakeAsync(() => {\n-    createComponent();\n-    page.heroesLinkDe.nativeElement.click();\n-    advance();\n-    expectPathToBe('/heroes');\n-  }));\n-\n+        createComponent();\n+        page.heroesLinkDe.nativeElement.click();\n+        advance();\n+        expectPathToBe('/heroes');\n+      }));\n });\n \n \n@@ -94,37 +91,37 @@ let loader: SpyNgModuleFactoryLoader;\n \n ///////// Can't get lazy loaded Heroes to work yet\n xdescribe('AppComponent & Lazy Loading (not working yet)', () => {\n-\n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      imports: [\n-        AppModule,\n-        RouterTestingModule.withRoutes(routes),\n-      ],\n-    })\n-    .compileComponents();\n+  beforeEach(waitForAsync(() => {\n+    TestBed\n+        .configureTestingModule({\n+          imports: [\n+            AppModule,\n+            RouterTestingModule.withRoutes(routes),\n+          ],\n+        })\n+        .compileComponents();\n   }));\n \n   beforeEach(fakeAsync(() => {\n     createComponent();\n     loader = TestBed.inject(NgModuleFactoryLoader) as SpyNgModuleFactoryLoader;\n-    loader.stubbedModules = { expected: HeroModule };\n+    loader.stubbedModules = {expected: HeroModule};\n     router.resetConfig([{path: 'heroes', loadChildren: 'expected'}]);\n   }));\n \n-  it('should navigate to \"Heroes\" on click', async(() => {\n-    page.heroesLinkDe.nativeElement.click();\n-    advance();\n-    expectPathToBe('/heroes');\n-    expectElementOf(HeroListComponent);\n-  }));\n+  it('should navigate to \"Heroes\" on click', waitForAsync(() => {\n+       page.heroesLinkDe.nativeElement.click();\n+       advance();\n+       expectPathToBe('/heroes');\n+       expectElementOf(HeroListComponent);\n+     }));\n \n   it('can navigate to \"Heroes\" w/ browser location URL change', fakeAsync(() => {\n-    location.go('/heroes');\n-    advance();\n-    expectPathToBe('/heroes');\n-    expectElementOf(HeroListComponent);\n-  }));\n+       location.go('/heroes');\n+       advance();\n+       expectPathToBe('/heroes');\n+       expectElementOf(HeroListComponent);\n+     }));\n });\n \n ////// Helpers /////////\n@@ -134,9 +131,9 @@ xdescribe('AppComponent & Lazy Loading (not working yet)', () => {\n  * Wait a tick, then detect changes, and tick again\n  */\n function advance(): void {\n-  tick(); // wait while navigating\n-  fixture.detectChanges(); // update view\n-  tick(); // wait for async data to arrive\n+  tick();                   // wait while navigating\n+  fixture.detectChanges();  // update view\n+  tick();                   // wait for async data to arrive\n }\n \n function createComponent() {\n@@ -148,8 +145,8 @@ function createComponent() {\n   router = injector.get(Router);\n   router.initialNavigation();\n   spyOn(injector.get(TwainService), 'getQuote')\n-    // fake fast async observable\n-    .and.returnValue(asyncData('Test Quote'));\n+      // fake fast async observable\n+      .and.returnValue(asyncData('Test Quote'));\n   advance();\n \n   page = new Page();\n@@ -168,14 +165,14 @@ class Page {\n \n   constructor() {\n     const links = fixture.debugElement.queryAll(By.directive(RouterLinkWithHref));\n-    this.aboutLinkDe     = links[2];\n+    this.aboutLinkDe = links[2];\n     this.dashboardLinkDe = links[0];\n-    this.heroesLinkDe    = links[1];\n+    this.heroesLinkDe = links[1];\n \n     // for debugging\n-    this.comp    = comp;\n+    this.comp = comp;\n     this.fixture = fixture;\n-    this.router  = router;\n+    this.router = router;\n   }\n }\n "
        },
        {
            "sha": "2c0971b2c928280a9db3485860a136e0cadd693e",
            "filename": "aio/content/examples/testing/src/app/app.component.spec.ts",
            "status": "modified",
            "additions": 62,
            "deletions": 66,
            "changes": 128,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fapp.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,66 +1,70 @@\n // #docplaster\n-import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n-\n import { Component, DebugElement, NO_ERRORS_SCHEMA } from '@angular/core';\n+import { ComponentFixture, TestBed, waitForAsync } from '@angular/core/testing';\n import { By } from '@angular/platform-browser';\n \n-import { AppComponent } from './app.component';\n import { RouterLinkDirectiveStub } from '../testing';\n \n+import { AppComponent } from './app.component';\n+\n // #docregion component-stubs\n @Component({selector: 'app-banner', template: ''})\n-class BannerStubComponent {}\n+class BannerStubComponent {\n+}\n \n @Component({selector: 'router-outlet', template: ''})\n-class RouterOutletStubComponent { }\n+class RouterOutletStubComponent {\n+}\n \n @Component({selector: 'app-welcome', template: ''})\n-class WelcomeStubComponent {}\n+class WelcomeStubComponent {\n+}\n // #enddocregion component-stubs\n \n let comp: AppComponent;\n let fixture: ComponentFixture<AppComponent>;\n \n describe('AppComponent & TestModule', () => {\n-  beforeEach(async(() => {\n+  beforeEach(waitForAsync(() => {\n     // #docregion testbed-stubs\n-    TestBed.configureTestingModule({\n-      declarations: [\n-        AppComponent,\n-        RouterLinkDirectiveStub,\n-        BannerStubComponent,\n-        RouterOutletStubComponent,\n-        WelcomeStubComponent\n-      ]\n-    })\n-    // #enddocregion testbed-stubs\n-    .compileComponents().then(() => {\n-      fixture = TestBed.createComponent(AppComponent);\n-      comp    = fixture.componentInstance;\n-    });\n+    TestBed\n+        .configureTestingModule({\n+          declarations: [\n+            AppComponent, RouterLinkDirectiveStub, BannerStubComponent, RouterOutletStubComponent,\n+            WelcomeStubComponent\n+          ]\n+        })\n+        // #enddocregion testbed-stubs\n+        .compileComponents()\n+        .then(() => {\n+          fixture = TestBed.createComponent(AppComponent);\n+          comp = fixture.componentInstance;\n+        });\n   }));\n   tests();\n });\n \n //////// Testing w/ NO_ERRORS_SCHEMA //////\n describe('AppComponent & NO_ERRORS_SCHEMA', () => {\n-  beforeEach(async(() => {\n+  beforeEach(waitForAsync(() => {\n     // #docregion no-errors-schema, mixed-setup\n-    TestBed.configureTestingModule({\n-      declarations: [\n-        AppComponent,\n-        // #enddocregion no-errors-schema\n-        BannerStubComponent,\n-        // #docregion no-errors-schema\n-        RouterLinkDirectiveStub\n-      ],\n-      schemas: [ NO_ERRORS_SCHEMA ]\n-    })\n-    // #enddocregion no-errors-schema, mixed-setup\n-    .compileComponents().then(() => {\n-      fixture = TestBed.createComponent(AppComponent);\n-      comp    = fixture.componentInstance;\n-    });\n+    TestBed\n+        .configureTestingModule({\n+          declarations: [\n+            AppComponent,\n+            // #enddocregion no-errors-schema\n+            BannerStubComponent,\n+            // #docregion no-errors-schema\n+            RouterLinkDirectiveStub\n+          ],\n+          schemas: [NO_ERRORS_SCHEMA]\n+        })\n+        // #enddocregion no-errors-schema, mixed-setup\n+        .compileComponents()\n+        .then(() => {\n+          fixture = TestBed.createComponent(AppComponent);\n+          comp = fixture.componentInstance;\n+        });\n   }));\n   tests();\n });\n@@ -72,30 +76,23 @@ import { AppModule } from './app.module';\n import { AppRoutingModule } from './app-routing.module';\n \n describe('AppComponent & AppModule', () => {\n-\n-  beforeEach(async(() => {\n-\n-    TestBed.configureTestingModule({\n-      imports: [ AppModule ]\n-    })\n-\n-    // Get rid of app's Router configuration otherwise many failures.\n-    // Doing so removes Router declarations; add the Router stubs\n-    .overrideModule(AppModule, {\n-      remove: {\n-        imports: [ AppRoutingModule ]\n-      },\n-      add: {\n-        declarations: [ RouterLinkDirectiveStub, RouterOutletStubComponent ]\n-      }\n-    })\n-\n-    .compileComponents()\n-\n-    .then(() => {\n-      fixture = TestBed.createComponent(AppComponent);\n-      comp    = fixture.componentInstance;\n-    });\n+  beforeEach(waitForAsync(() => {\n+    TestBed\n+        .configureTestingModule({imports: [AppModule]})\n+\n+        // Get rid of app's Router configuration otherwise many failures.\n+        // Doing so removes Router declarations; add the Router stubs\n+        .overrideModule(AppModule, {\n+          remove: {imports: [AppRoutingModule]},\n+          add: {declarations: [RouterLinkDirectiveStub, RouterOutletStubComponent]}\n+        })\n+\n+        .compileComponents()\n+\n+        .then(() => {\n+          fixture = TestBed.createComponent(AppComponent);\n+          comp = fixture.componentInstance;\n+        });\n   }));\n \n   tests();\n@@ -107,11 +104,10 @@ function tests() {\n \n   // #docregion test-setup\n   beforeEach(() => {\n-    fixture.detectChanges(); // trigger initial data binding\n+    fixture.detectChanges();  // trigger initial data binding\n \n     // find DebugElements with an attached RouterLinkStubDirective\n-    linkDes = fixture.debugElement\n-      .queryAll(By.directive(RouterLinkDirectiveStub));\n+    linkDes = fixture.debugElement.queryAll(By.directive(RouterLinkDirectiveStub));\n \n     // get attached link directive instances\n     // using each DebugElement's injector\n@@ -132,8 +128,8 @@ function tests() {\n   });\n \n   it('can click Heroes link in template', () => {\n-    const heroesLinkDe = linkDes[1];   // heroes link DebugElement\n-    const heroesLink = routerLinks[1]; // heroes link directive\n+    const heroesLinkDe = linkDes[1];    // heroes link DebugElement\n+    const heroesLink = routerLinks[1];  // heroes link directive\n \n     expect(heroesLink.navigatedTo).toBeNull('should not have navigated yet');\n "
        },
        {
            "sha": "b52039a05949682ac372dabedfcf617c5f75cad1",
            "filename": "aio/content/examples/testing/src/app/banner/banner-external.component.spec.ts",
            "status": "modified",
            "additions": 19,
            "deletions": 18,
            "changes": 37,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fbanner%2Fbanner-external.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fbanner%2Fbanner-external.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fbanner%2Fbanner-external.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,6 +1,6 @@\n // #docplaster\n // #docregion import-async\n-import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { ComponentFixture, TestBed, waitForAsync } from '@angular/core/testing';\n // #enddocregion import-async\n import { By } from '@angular/platform-browser';\n import { DebugElement } from '@angular/core';\n@@ -14,19 +14,20 @@ describe('BannerComponent (external files)', () => {\n \n   describe('Two beforeEach', () => {\n     // #docregion async-before-each\n-    beforeEach(async(() => {\n-      TestBed.configureTestingModule({\n-        declarations: [ BannerComponent ],\n-      })\n-      .compileComponents();  // compile template and css\n+    beforeEach(waitForAsync(() => {\n+      TestBed\n+          .configureTestingModule({\n+            declarations: [BannerComponent],\n+          })\n+          .compileComponents();  // compile template and css\n     }));\n     // #enddocregion async-before-each\n \n     // synchronous beforeEach\n     // #docregion sync-before-each\n     beforeEach(() => {\n       fixture = TestBed.createComponent(BannerComponent);\n-      component = fixture.componentInstance; // BannerComponent test instance\n+      component = fixture.componentInstance;  // BannerComponent test instance\n       h1 = fixture.nativeElement.querySelector('h1');\n     });\n     // #enddocregion sync-before-each\n@@ -36,16 +37,17 @@ describe('BannerComponent (external files)', () => {\n \n   describe('One beforeEach', () => {\n     // #docregion one-before-each\n-    beforeEach(async(() => {\n-      TestBed.configureTestingModule({\n-        declarations: [ BannerComponent ],\n-      })\n-      .compileComponents()\n-      .then(() => {\n-        fixture = TestBed.createComponent(BannerComponent);\n-        component = fixture.componentInstance;\n-        h1 = fixture.nativeElement.querySelector('h1');\n-      });\n+    beforeEach(waitForAsync(() => {\n+      TestBed\n+          .configureTestingModule({\n+            declarations: [BannerComponent],\n+          })\n+          .compileComponents()\n+          .then(() => {\n+            fixture = TestBed.createComponent(BannerComponent);\n+            component = fixture.componentInstance;\n+            h1 = fixture.nativeElement.querySelector('h1');\n+          });\n     }));\n     // #enddocregion one-before-each\n \n@@ -69,4 +71,3 @@ describe('BannerComponent (external files)', () => {\n     });\n   }\n });\n-"
        },
        {
            "sha": "8e52947d4e8dc8b43974d79c4403499417e82dd3",
            "filename": "aio/content/examples/testing/src/app/banner/banner-initial.component.spec.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 14,
            "changes": 23,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fbanner%2Fbanner-initial.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fbanner%2Fbanner-initial.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fbanner%2Fbanner-initial.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,14 +1,16 @@\n // #docplaster\n // #docregion import-by\n-import { By } from '@angular/platform-browser';\n // #enddocregion import-by\n // #docregion import-debug-element\n import { DebugElement } from '@angular/core';\n // #enddocregion import-debug-element\n // #docregion v1\n-import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n+import { ComponentFixture, TestBed, waitForAsync } from '@angular/core/testing';\n+import { By } from '@angular/platform-browser';\n+\n // #enddocregion v1\n import { BannerComponent } from './banner-initial.component';\n+\n /*\n // #docregion v1\n import { BannerComponent } from './banner.component';\n@@ -17,15 +19,12 @@ describe('BannerComponent', () => {\n // #enddocregion v1\n */\n describe('BannerComponent (initial CLI generated)', () => {\n-// #docregion v1\n+  // #docregion v1\n   let component: BannerComponent;\n   let fixture: ComponentFixture<BannerComponent>;\n \n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      declarations: [ BannerComponent ]\n-    })\n-    .compileComponents();\n+  beforeEach(waitForAsync(() => {\n+    TestBed.configureTestingModule({declarations: [BannerComponent]}).compileComponents();\n   }));\n \n   beforeEach(() => {\n@@ -44,9 +43,7 @@ describe('BannerComponent (initial CLI generated)', () => {\n describe('BannerComponent (minimal)', () => {\n   it('should create', () => {\n     // #docregion configureTestingModule\n-    TestBed.configureTestingModule({\n-      declarations: [ BannerComponent ]\n-    });\n+    TestBed.configureTestingModule({declarations: [BannerComponent]});\n     // #enddocregion configureTestingModule\n     // #docregion createComponent\n     const fixture = TestBed.createComponent(BannerComponent);\n@@ -65,9 +62,7 @@ describe('BannerComponent (with beforeEach)', () => {\n   let fixture: ComponentFixture<BannerComponent>;\n \n   beforeEach(() => {\n-    TestBed.configureTestingModule({\n-      declarations: [ BannerComponent ]\n-    });\n+    TestBed.configureTestingModule({declarations: [BannerComponent]});\n     fixture = TestBed.createComponent(BannerComponent);\n     component = fixture.componentInstance;\n   });"
        },
        {
            "sha": "9eae3ede14fd4bac41f366e62b5f8930405aa911",
            "filename": "aio/content/examples/testing/src/app/dashboard/dashboard-hero.component.spec.ts",
            "status": "modified",
            "additions": 27,
            "deletions": 29,
            "changes": 56,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fdashboard%2Fdashboard-hero.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fdashboard%2Fdashboard-hero.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fdashboard%2Fdashboard-hero.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,22 +1,21 @@\n \n // #docplaster\n-import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n-\n-import { By } from '@angular/platform-browser';\n import { DebugElement } from '@angular/core';\n+import { ComponentFixture, TestBed, waitForAsync } from '@angular/core/testing';\n+import { By } from '@angular/platform-browser';\n \n import { addMatchers, click } from '../../testing';\n-\n import { Hero } from '../model/hero';\n+\n import { DashboardHeroComponent } from './dashboard-hero.component';\n \n-beforeEach( addMatchers );\n+beforeEach(addMatchers);\n \n describe('DashboardHeroComponent class only', () => {\n   // #docregion class-only\n   it('raises the selected event when clicked', () => {\n     const comp = new DashboardHeroComponent();\n-    const hero: Hero = { id: 42, name: 'Test' };\n+    const hero: Hero = {id: 42, name: 'Test'};\n     comp.hero = hero;\n \n     comp.selected.subscribe((selectedHero: Hero) => expect(selectedHero).toBe(hero));\n@@ -26,33 +25,31 @@ describe('DashboardHeroComponent class only', () => {\n });\n \n describe('DashboardHeroComponent when tested directly', () => {\n-\n   let comp: DashboardHeroComponent;\n   let expectedHero: Hero;\n   let fixture: ComponentFixture<DashboardHeroComponent>;\n   let heroDe: DebugElement;\n   let heroEl: HTMLElement;\n \n-  beforeEach(async(() => {\n+  beforeEach(waitForAsync(() => {\n     // #docregion setup, config-testbed\n-    TestBed.configureTestingModule({\n-      declarations: [ DashboardHeroComponent ]\n-    })\n-    // #enddocregion setup, config-testbed\n-    .compileComponents();\n+    TestBed\n+        .configureTestingModule({declarations: [DashboardHeroComponent]})\n+        // #enddocregion setup, config-testbed\n+        .compileComponents();\n   }));\n \n   beforeEach(() => {\n     // #docregion setup\n     fixture = TestBed.createComponent(DashboardHeroComponent);\n-    comp    = fixture.componentInstance;\n+    comp = fixture.componentInstance;\n \n     // find the hero's DebugElement and element\n-    heroDe  = fixture.debugElement.query(By.css('.hero'));\n+    heroDe = fixture.debugElement.query(By.css('.hero'));\n     heroEl = heroDe.nativeElement;\n \n     // mock the hero supplied by the parent component\n-    expectedHero = { id: 42, name: 'Test Name' };\n+    expectedHero = {id: 42, name: 'Test Name'};\n \n     // simulate the parent setting the input property with that hero\n     comp.hero = expectedHero;\n@@ -96,8 +93,8 @@ describe('DashboardHeroComponent when tested directly', () => {\n     let selectedHero: Hero;\n     comp.selected.subscribe((hero: Hero) => selectedHero = hero);\n \n-    click(heroDe); // click helper with DebugElement\n-    click(heroEl); // click helper with native element\n+    click(heroDe);  // click helper with DebugElement\n+    click(heroEl);  // click helper with native element\n \n     expect(selectedHero).toBe(expectedHero);\n   });\n@@ -111,22 +108,21 @@ describe('DashboardHeroComponent when inside a test host', () => {\n   let fixture: ComponentFixture<TestHostComponent>;\n   let heroEl: HTMLElement;\n \n-  beforeEach(async(() => {\n+  beforeEach(waitForAsync(() => {\n     // #docregion test-host-setup\n-    TestBed.configureTestingModule({\n-      declarations: [ DashboardHeroComponent, TestHostComponent ]\n-    })\n-    // #enddocregion test-host-setup\n-    .compileComponents();\n+    TestBed\n+        .configureTestingModule({declarations: [DashboardHeroComponent, TestHostComponent]})\n+        // #enddocregion test-host-setup\n+        .compileComponents();\n   }));\n \n   beforeEach(() => {\n     // #docregion test-host-setup\n     // create TestHostComponent instead of DashboardHeroComponent\n-    fixture  = TestBed.createComponent(TestHostComponent);\n+    fixture = TestBed.createComponent(TestHostComponent);\n     testHost = fixture.componentInstance;\n-    heroEl   = fixture.nativeElement.querySelector('.hero');\n-    fixture.detectChanges(); // trigger initial data binding\n+    heroEl = fixture.nativeElement.querySelector('.hero');\n+    fixture.detectChanges();  // trigger initial data binding\n     // #enddocregion test-host-setup\n   });\n \n@@ -155,8 +151,10 @@ import { Component } from '@angular/core';\n     </dashboard-hero>`\n })\n class TestHostComponent {\n-  hero: Hero = {id: 42, name: 'Test Name' };\n+  hero: Hero = {id: 42, name: 'Test Name'};\n   selectedHero: Hero;\n-  onSelected(hero: Hero) { this.selectedHero = hero; }\n+  onSelected(hero: Hero) {\n+    this.selectedHero = hero;\n+  }\n }\n // #enddocregion test-host"
        },
        {
            "sha": "0714a463b9d9150289e75ffaa72f1b3f3978ace2",
            "filename": "aio/content/examples/testing/src/app/dashboard/dashboard.component.spec.ts",
            "status": "modified",
            "additions": 29,
            "deletions": 39,
            "changes": 68,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fdashboard%2Fdashboard.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fdashboard%2Fdashboard.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fdashboard%2Fdashboard.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,6 +1,5 @@\n // #docplaster\n-import { async, inject, ComponentFixture, TestBed\n-} from '@angular/core/testing';\n+import { ComponentFixture, inject, TestBed, waitForAsync } from '@angular/core/testing';\n \n import { addMatchers, asyncData, click } from '../../testing';\n import { HeroService } from '../model/hero.service';\n@@ -12,7 +11,7 @@ import { Router } from '@angular/router';\n import { DashboardComponent } from './dashboard.component';\n import { DashboardModule } from './dashboard.module';\n \n-beforeEach ( addMatchers );\n+beforeEach(addMatchers);\n \n let comp: DashboardComponent;\n let fixture: ComponentFixture<DashboardComponent>;\n@@ -21,9 +20,7 @@ let fixture: ComponentFixture<DashboardComponent>;\n \n describe('DashboardComponent (deep)', () => {\n   beforeEach(() => {\n-    TestBed.configureTestingModule({\n-      imports: [ DashboardModule ]\n-    });\n+    TestBed.configureTestingModule({imports: [DashboardModule]});\n   });\n \n   compileAndCreate();\n@@ -43,10 +40,8 @@ import { NO_ERRORS_SCHEMA } from '@angular/core';\n \n describe('DashboardComponent (shallow)', () => {\n   beforeEach(() => {\n-    TestBed.configureTestingModule({\n-      declarations: [ DashboardComponent ],\n-      schemas:      [NO_ERRORS_SCHEMA]\n-    });\n+    TestBed.configureTestingModule(\n+        {declarations: [DashboardComponent], schemas: [NO_ERRORS_SCHEMA]});\n   });\n \n   compileAndCreate();\n@@ -63,25 +58,26 @@ describe('DashboardComponent (shallow)', () => {\n /** Add TestBed providers, compile, and create DashboardComponent */\n function compileAndCreate() {\n   // #docregion compile-and-create-body\n-  beforeEach(async(() => {\n+  beforeEach(waitForAsync(() => {\n     // #docregion router-spy\n     const routerSpy = jasmine.createSpyObj('Router', ['navigateByUrl']);\n     const heroServiceSpy = jasmine.createSpyObj('HeroService', ['getHeroes']);\n \n-    TestBed.configureTestingModule({\n-      providers: [\n-        { provide: HeroService, useValue: heroServiceSpy },\n-        { provide: Router,      useValue: routerSpy }\n-      ]\n-    })\n-    // #enddocregion router-spy\n-    .compileComponents().then(() => {\n-      fixture = TestBed.createComponent(DashboardComponent);\n-      comp = fixture.componentInstance;\n-\n-      // getHeroes spy returns observable of test heroes\n-      heroServiceSpy.getHeroes.and.returnValue(asyncData(getTestHeroes()));\n-    });\n+    TestBed\n+        .configureTestingModule({\n+          providers: [\n+            {provide: HeroService, useValue: heroServiceSpy}, {provide: Router, useValue: routerSpy}\n+          ]\n+        })\n+        // #enddocregion router-spy\n+        .compileComponents()\n+        .then(() => {\n+          fixture = TestBed.createComponent(DashboardComponent);\n+          comp = fixture.componentInstance;\n+\n+          // getHeroes spy returns observable of test heroes\n+          heroServiceSpy.getHeroes.and.returnValue(asyncData(getTestHeroes()));\n+        });\n     // #enddocregion compile-and-create-body\n   }));\n }\n@@ -93,32 +89,29 @@ function compileAndCreate() {\n function tests(heroClick: () => void) {\n \n   it('should NOT have heroes before ngOnInit', () => {\n-    expect(comp.heroes.length).toBe(0,\n-      'should not have heroes before ngOnInit');\n+    expect(comp.heroes.length).toBe(0, 'should not have heroes before ngOnInit');\n   });\n \n   it('should NOT have heroes immediately after ngOnInit', () => {\n-    fixture.detectChanges(); // runs initial lifecycle hooks\n+    fixture.detectChanges();  // runs initial lifecycle hooks\n \n-    expect(comp.heroes.length).toBe(0,\n-      'should not have heroes until service promise resolves');\n+    expect(comp.heroes.length).toBe(0, 'should not have heroes until service promise resolves');\n   });\n \n   describe('after get dashboard heroes', () => {\n-\n     let router: Router;\n \n      // Trigger component so it gets heroes and binds to them\n-    beforeEach(async(() => {\n+    beforeEach(waitForAsync(() => {\n       router = fixture.debugElement.injector.get(Router);\n       fixture.detectChanges(); // runs ngOnInit -> getHeroes\n       fixture.whenStable() // No need for the `lastPromise` hack!\n         .then(() => fixture.detectChanges()); // bind to heroes\n     }));\n \n     it('should HAVE heroes', () => {\n-      expect(comp.heroes.length).toBeGreaterThan(0,\n-        'should have heroes after service promise resolves');\n+      expect(comp.heroes.length)\n+          .toBeGreaterThan(0, 'should have heroes after service promise resolves');\n     });\n \n     it('should DISPLAY heroes', () => {\n@@ -130,19 +123,16 @@ function tests(heroClick: () => void) {\n \n     // #docregion navigate-test\n     it('should tell ROUTER to navigate when hero clicked', () => {\n-\n-      heroClick(); // trigger click on first inner <div class=\"hero\">\n+      heroClick();  // trigger click on first inner <div class=\"hero\">\n \n       // args passed to router.navigateByUrl() spy\n       const spy = router.navigateByUrl as jasmine.Spy;\n       const navArgs = spy.calls.first().args[0];\n \n       // expecting to navigate to id of the component's first hero\n       const id = comp.heroes[0].id;\n-      expect(navArgs).toBe('/heroes/' + id,\n-        'should nav to HeroDetail for first hero');\n+      expect(navArgs).toBe('/heroes/' + id, 'should nav to HeroDetail for first hero');\n     });\n     // #enddocregion navigate-test\n   });\n }\n-"
        },
        {
            "sha": "18a793d1a6af7421b09d7f0314dcec05018015cd",
            "filename": "aio/content/examples/testing/src/app/demo/async-helper.spec.ts",
            "status": "modified",
            "additions": 56,
            "deletions": 27,
            "changes": 83,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fdemo%2Fasync-helper.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fdemo%2Fasync-helper.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fdemo%2Fasync-helper.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,18 +1,23 @@\n // tslint:disable-next-line:no-unused-variable\n-import { async, fakeAsync, tick } from '@angular/core/testing';\n+import { fakeAsync, tick, waitForAsync } from '@angular/core/testing';\n import { interval, of } from 'rxjs';\n import { delay, take } from 'rxjs/operators';\n \n describe('Angular async helper', () => {\n-\n   describe('async', () => {\n     let actuallyDone = false;\n \n-    beforeEach(() => { actuallyDone = false; });\n+    beforeEach(() => {\n+      actuallyDone = false;\n+    });\n \n-    afterEach(() => { expect(actuallyDone).toBe(true, 'actuallyDone should be true'); });\n+    afterEach(() => {\n+      expect(actuallyDone).toBe(true, 'actuallyDone should be true');\n+    });\n \n-    it('should run normal test', () => { actuallyDone = true; });\n+    it('should run normal test', () => {\n+      actuallyDone = true;\n+    });\n \n     it('should run normal async test', (done: DoneFn) => {\n       setTimeout(() => {\n@@ -21,39 +26,50 @@ describe('Angular async helper', () => {\n       }, 0);\n     });\n \n-    it('should run async test with task',\n-       async(() => { setTimeout(() => { actuallyDone = true; }, 0); }));\n+    it('should run async test with task', waitForAsync(() => {\n+         setTimeout(() => {\n+           actuallyDone = true;\n+         }, 0);\n+       }));\n \n-    it('should run async test with task', async(() => {\n+    it('should run async test with task', waitForAsync(() => {\n          const id = setInterval(() => {\n            actuallyDone = true;\n            clearInterval(id);\n          }, 100);\n        }));\n \n-    it('should run async test with successful promise', async(() => {\n-         const p = new Promise(resolve => { setTimeout(resolve, 10); });\n-         p.then(() => { actuallyDone = true; });\n+    it('should run async test with successful promise', waitForAsync(() => {\n+         const p = new Promise(resolve => {\n+           setTimeout(resolve, 10);\n+         });\n+         p.then(() => {\n+           actuallyDone = true;\n+         });\n        }));\n \n-    it('should run async test with failed promise', async(() => {\n-         const p = new Promise((resolve, reject) => { setTimeout(reject, 10); });\n-         p.catch(() => { actuallyDone = true; });\n+    it('should run async test with failed promise', waitForAsync(() => {\n+         const p = new Promise((resolve, reject) => {\n+           setTimeout(reject, 10);\n+         });\n+         p.catch(() => {\n+           actuallyDone = true;\n+         });\n        }));\n \n     // Use done. Can also use async or fakeAsync.\n     it('should run async test with successful delayed Observable', (done: DoneFn) => {\n-      const source = of (true).pipe(delay(10));\n+      const source = of(true).pipe(delay(10));\n       source.subscribe(val => actuallyDone = true, err => fail(err), done);\n     });\n \n-    it('should run async test with successful delayed Observable', async(() => {\n-         const source = of (true).pipe(delay(10));\n+    it('should run async test with successful delayed Observable', waitForAsync(() => {\n+         const source = of(true).pipe(delay(10));\n          source.subscribe(val => actuallyDone = true, err => fail(err));\n        }));\n \n     it('should run async test with successful delayed Observable', fakeAsync(() => {\n-         const source = of (true).pipe(delay(10));\n+         const source = of(true).pipe(delay(10));\n          source.subscribe(val => actuallyDone = true, err => fail(err));\n \n          tick(10);\n@@ -64,7 +80,9 @@ describe('Angular async helper', () => {\n     // #docregion fake-async-test-tick\n     it('should run timeout callback with delay after call tick with millis', fakeAsync(() => {\n          let called = false;\n-         setTimeout(() => { called = true; }, 100);\n+         setTimeout(() => {\n+           called = true;\n+         }, 100);\n          tick(100);\n          expect(called).toBe(true);\n        }));\n@@ -73,7 +91,9 @@ describe('Angular async helper', () => {\n     // #docregion fake-async-test-tick-new-macro-task-sync\n     it('should run new macro task callback with delay after call tick with millis',\n        fakeAsync(() => {\n-         function nestedTimer(cb: () => any): void { setTimeout(() => setTimeout(() => cb())); }\n+         function nestedTimer(cb: () => any): void {\n+           setTimeout(() => setTimeout(() => cb()));\n+         }\n          const callback = jasmine.createSpy('callback');\n          nestedTimer(callback);\n          expect(callback).not.toHaveBeenCalled();\n@@ -86,7 +106,9 @@ describe('Angular async helper', () => {\n     // #docregion fake-async-test-tick-new-macro-task-async\n     it('should not run new macro task callback with delay after call tick with millis',\n        fakeAsync(() => {\n-         function nestedTimer(cb: () => any): void { setTimeout(() => setTimeout(() => cb())); }\n+         function nestedTimer(cb: () => any): void {\n+           setTimeout(() => setTimeout(() => cb()));\n+         }\n          const callback = jasmine.createSpy('callback');\n          nestedTimer(callback);\n          expect(callback).not.toHaveBeenCalled();\n@@ -112,7 +134,9 @@ describe('Angular async helper', () => {\n          // need to add `import 'zone.js/dist/zone-patch-rxjs-fake-async'\n          // to patch rxjs scheduler\n          let result = null;\n-         of ('hello').pipe(delay(1000)).subscribe(v => { result = v; });\n+         of('hello').pipe(delay(1000)).subscribe(v => {\n+           result = v;\n+         });\n          expect(result).toBeNull();\n          tick(1000);\n          expect(result).toBe('hello');\n@@ -133,12 +157,18 @@ describe('Angular async helper', () => {\n   describe('use jasmine.clock()', () => {\n     // need to config __zone_symbol__fakeAsyncPatchLock flag\n     // before loading zone.js/dist/zone-testing\n-    beforeEach(() => { jasmine.clock().install(); });\n-    afterEach(() => { jasmine.clock().uninstall(); });\n+    beforeEach(() => {\n+      jasmine.clock().install();\n+    });\n+    afterEach(() => {\n+      jasmine.clock().uninstall();\n+    });\n     it('should auto enter fakeAsync', () => {\n       // is in fakeAsync now, don't need to call fakeAsync(testFn)\n       let called = false;\n-      setTimeout(() => { called = true; }, 100);\n+      setTimeout(() => {\n+        called = true;\n+      }, 100);\n       jasmine.clock().tick(100);\n       expect(called).toBe(true);\n     });\n@@ -152,7 +182,7 @@ describe('Angular async helper', () => {\n     }\n     // need to config __zone_symbol__supportWaitUnResolvedChainedPromise flag\n     // before loading zone.js/dist/zone-testing\n-    it('should wait until promise.then is called', async(() => {\n+    it('should wait until promise.then is called', waitForAsync(() => {\n          let finished = false;\n          new Promise((res, rej) => {\n            jsonp('localhost:8080/jsonp', () => {\n@@ -168,5 +198,4 @@ describe('Angular async helper', () => {\n        }));\n   });\n   // #enddocregion async-test-promise-then\n-\n });"
        },
        {
            "sha": "a6bbd1aafc03051c52887af44d87766ef6fbeec2",
            "filename": "aio/content/examples/testing/src/app/demo/demo.testbed.spec.ts",
            "status": "modified",
            "additions": 63,
            "deletions": 62,
            "changes": 125,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fdemo%2Fdemo.testbed.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fdemo%2Fdemo.testbed.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fdemo%2Fdemo.testbed.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -24,17 +24,18 @@ import { FormsModule } from '@angular/forms';\n // Forms symbols imported only for a specific test below\n import { NgModel, NgControl } from '@angular/forms';\n \n-import { async, ComponentFixture, fakeAsync, inject, TestBed, tick\n+import {\n+  ComponentFixture, fakeAsync, inject, TestBed, tick, waitForAsync\n } from '@angular/core/testing';\n \n import { addMatchers, newEvent, click } from '../../testing';\n \n-export class NotProvided extends ValueService { /* example below */}\n-beforeEach( addMatchers );\n+export class NotProvided extends ValueService { /* example below */ }\n+beforeEach(addMatchers);\n \n describe('demo (with TestBed):', () => {\n \n-////////  Service Tests  /////////////\n+  ////////  Service Tests  /////////////\n \n   // #docregion ValueService\n   describe('ValueService', () => {\n@@ -64,13 +65,13 @@ describe('demo (with TestBed):', () => {\n       // #enddocregion testbed-get-w-null\n     });\n \n-    it('test should wait for ValueService.getPromiseValue', async(() => {\n+    it('test should wait for ValueService.getPromiseValue', waitForAsync(() => {\n       service.getPromiseValue().then(\n         value => expect(value).toBe('promise value')\n       );\n     }));\n \n-    it('test should wait for ValueService.getObservableValue', async(() => {\n+    it('test should wait for ValueService.getObservableValue', waitForAsync(() => {\n       service.getObservableValue().subscribe(\n         value => expect(value).toBe('observable value')\n       );\n@@ -150,7 +151,7 @@ describe('demo (with TestBed):', () => {\n       TestBed.configureTestingModule({ providers: [ValueService] });\n     });\n \n-    beforeEach(async(inject([ValueService], (service: ValueService) => {\n+    beforeEach(waitForAsync(inject([ValueService], (service: ValueService) => {\n       service.getPromiseValue().then(value => serviceValue = value);\n     })));\n \n@@ -159,11 +160,11 @@ describe('demo (with TestBed):', () => {\n     });\n   });\n \n-/////////// Component Tests //////////////////\n+  /////////// Component Tests //////////////////\n \n   describe('TestBed component tests', () => {\n \n-    beforeEach(async(() => {\n+    beforeEach(waitForAsync(() => {\n       TestBed\n         .configureTestingModule({\n           imports: [DemoModule],\n@@ -235,7 +236,7 @@ describe('demo (with TestBed):', () => {\n     // #docregion ButtonComp\n     it('should support clicking a button', () => {\n       const fixture = TestBed.createComponent(LightswitchComponent);\n-      const btn  = fixture.debugElement.query(By.css('button'));\n+      const btn = fixture.debugElement.query(By.css('button'));\n       const span = fixture.debugElement.query(By.css('span')).nativeElement;\n \n       fixture.detectChanges();\n@@ -248,7 +249,7 @@ describe('demo (with TestBed):', () => {\n     // #enddocregion ButtonComp\n \n     // ngModel is async so we must wait for it with promise-based `whenStable`\n-    it('should support entering text in input box (ngModel)', async(() => {\n+    it('should support entering text in input box (ngModel)', waitForAsync(() => {\n       const expectedOrigName = 'John';\n       const expectedNewName = 'Sally';\n \n@@ -278,10 +279,10 @@ describe('demo (with TestBed):', () => {\n         input.dispatchEvent(newEvent('input'));\n         return fixture.whenStable();\n       })\n-      .then(() => {\n-        expect(comp.name).toBe(expectedNewName,\n-          `After ngModel updates the model, comp.name should be ${expectedNewName} `);\n-      });\n+        .then(() => {\n+          expect(comp.name).toBe(expectedNewName,\n+            `After ngModel updates the model, comp.name should be ${expectedNewName} `);\n+        });\n     }));\n \n     // fakeAsync version of ngModel input test enables sync test style\n@@ -327,9 +328,9 @@ describe('demo (with TestBed):', () => {\n       const fixture = TestBed.createComponent(ReversePipeComponent);\n       fixture.detectChanges();\n \n-      const comp =  fixture.componentInstance;\n+      const comp = fixture.componentInstance;\n       const input = fixture.debugElement.query(By.css('input')).nativeElement as HTMLInputElement;\n-      const span =  fixture.debugElement.query(By.css('span')).nativeElement  as HTMLElement;\n+      const span = fixture.debugElement.query(By.css('span')).nativeElement as HTMLElement;\n \n       // simulate user entering new name in input\n       input.value = inputText;\n@@ -381,12 +382,12 @@ describe('demo (with TestBed):', () => {\n \n       expect(el.styles.color).toBe(comp.color, 'color style');\n       expect(el.styles.width).toBe(comp.width + 'px', 'width style');\n-    // #enddocregion dom-attributes\n+      // #enddocregion dom-attributes\n \n       // Removed on 12/02/2016 when ceased public discussion of the `Renderer`. Revive in future?\n       // expect(el.properties['customProperty']).toBe(true, 'customProperty');\n \n-    // #docregion dom-attributes\n+      // #docregion dom-attributes\n     });\n     // #enddocregion dom-attributes\n \n@@ -400,10 +401,10 @@ describe('demo (with TestBed):', () => {\n       const fixture = TestBed.configureTestingModule({\n         declarations: [Child1Component],\n       })\n-      .overrideComponent(Child1Component, {\n-        set: { template: '<span>Fake</span>' }\n-      })\n-      .createComponent(Child1Component);\n+        .overrideComponent(Child1Component, {\n+          set: { template: '<span>Fake</span>' }\n+        })\n+        .createComponent(Child1Component);\n \n       fixture.detectChanges();\n       expect(fixture).toHaveText('Fake');\n@@ -413,14 +414,14 @@ describe('demo (with TestBed):', () => {\n       const fixture = TestBed.configureTestingModule({\n         declarations: [TestProvidersComponent],\n       })\n-      .overrideComponent(TestProvidersComponent, {\n-        remove: { providers: [ValueService]},\n-        add:    { providers: [{ provide: ValueService, useClass: FakeValueService }] },\n+        .overrideComponent(TestProvidersComponent, {\n+          remove: { providers: [ValueService] },\n+          add: { providers: [{ provide: ValueService, useClass: FakeValueService }] },\n \n-        // Or replace them all (this component has only one provider)\n-        // set:    { providers: [{ provide: ValueService, useClass: FakeValueService }] },\n-      })\n-      .createComponent(TestProvidersComponent);\n+          // Or replace them all (this component has only one provider)\n+          // set:    { providers: [{ provide: ValueService, useClass: FakeValueService }] },\n+        })\n+        .createComponent(TestProvidersComponent);\n \n       fixture.detectChanges();\n       expect(fixture).toHaveText('injected value: faked value', 'text');\n@@ -436,14 +437,14 @@ describe('demo (with TestBed):', () => {\n       const fixture = TestBed.configureTestingModule({\n         declarations: [TestViewProvidersComponent],\n       })\n-      .overrideComponent(TestViewProvidersComponent, {\n-        // remove: { viewProviders: [ValueService]},\n-        // add:    { viewProviders: [{ provide: ValueService, useClass: FakeValueService }] },\n+        .overrideComponent(TestViewProvidersComponent, {\n+          // remove: { viewProviders: [ValueService]},\n+          // add:    { viewProviders: [{ provide: ValueService, useClass: FakeValueService }] },\n \n-        // Or replace them all (this component has only one viewProvider)\n-        set:    { viewProviders: [{ provide: ValueService, useClass: FakeValueService }] },\n-      })\n-      .createComponent(TestViewProvidersComponent);\n+          // Or replace them all (this component has only one viewProvider)\n+          set: { viewProviders: [{ provide: ValueService, useClass: FakeValueService }] },\n+        })\n+        .createComponent(TestViewProvidersComponent);\n \n       fixture.detectChanges();\n       expect(fixture).toHaveText('injected value: faked value');\n@@ -453,20 +454,20 @@ describe('demo (with TestBed):', () => {\n \n       // TestComponent is parent of TestProvidersComponent\n       @Component({ template: '<my-service-comp></my-service-comp>' })\n-      class TestComponent {}\n+      class TestComponent { }\n \n       // 3 levels of ValueService provider: module, TestCompomponent, TestProvidersComponent\n       const fixture = TestBed.configureTestingModule({\n         declarations: [TestComponent, TestProvidersComponent],\n-        providers:    [ValueService]\n-      })\n-      .overrideComponent(TestComponent, {\n-        set: { providers: [{ provide: ValueService, useValue: {} }] }\n+        providers: [ValueService]\n       })\n-      .overrideComponent(TestProvidersComponent, {\n-        set: { providers: [{ provide: ValueService, useClass: FakeValueService }] }\n-      })\n-      .createComponent(TestComponent);\n+        .overrideComponent(TestComponent, {\n+          set: { providers: [{ provide: ValueService, useValue: {} }] }\n+        })\n+        .overrideComponent(TestProvidersComponent, {\n+          set: { providers: [{ provide: ValueService, useClass: FakeValueService }] }\n+        })\n+        .createComponent(TestComponent);\n \n       let testBedProvider: ValueService;\n       let tcProvider: ValueService;\n@@ -489,10 +490,10 @@ describe('demo (with TestBed):', () => {\n       const fixture = TestBed.configureTestingModule({\n         declarations: [ShellComponent, NeedsContentComponent, Child1Component, Child2Component, Child3Component],\n       })\n-      .overrideComponent(ShellComponent, {\n-        set: {\n-          selector: 'test-shell',\n-          template: `\n+        .overrideComponent(ShellComponent, {\n+          set: {\n+            selector: 'test-shell',\n+            template: `\n           <needs-content #nc>\n             <child-1 #content text=\"My\"></child-1>\n             <child-2 #content text=\"dog\"></child-2>\n@@ -501,9 +502,9 @@ describe('demo (with TestBed):', () => {\n             <div #content>!</div>\n           </needs-content>\n           `\n-        }\n-      })\n-      .createComponent(ShellComponent);\n+          }\n+        })\n+        .createComponent(ShellComponent);\n \n       fixture.detectChanges();\n \n@@ -615,7 +616,7 @@ describe('demo (with TestBed):', () => {\n     });\n \n     // must be async test to see child flow to parent\n-    it('changed child value flows to parent', async(() => {\n+    it('changed child value flows to parent', waitForAsync(() => {\n       fixture.detectChanges();\n       getChild();\n \n@@ -625,14 +626,14 @@ describe('demo (with TestBed):', () => {\n         // Wait one JS engine turn!\n         setTimeout(() => resolve(), 0);\n       })\n-      .then(() => {\n-        fixture.detectChanges();\n-\n-        expect(child.ngOnChangesCounter).toBe(2,\n-          'expected 2 changes: initial value and changed value');\n-        expect(parent.parentValue).toBe('bar',\n-          'parentValue should eq changed parent value');\n-      });\n+        .then(() => {\n+          fixture.detectChanges();\n+\n+          expect(child.ngOnChangesCounter).toBe(2,\n+            'expected 2 changes: initial value and changed value');\n+          expect(parent.parentValue).toBe('bar',\n+            'parentValue should eq changed parent value');\n+        });\n \n     }));\n "
        },
        {
            "sha": "0015c96d5225e18887899a601bdf1af03103bd0a",
            "filename": "aio/content/examples/testing/src/app/hero/hero-detail.component.spec.ts",
            "status": "modified",
            "additions": 130,
            "deletions": 127,
            "changes": 257,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fhero%2Fhero-detail.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fhero%2Fhero-detail.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fhero%2Fhero-detail.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,8 +1,5 @@\n // #docplaster\n-import {\n-  async, ComponentFixture, fakeAsync, inject, TestBed, tick\n-} from '@angular/core/testing';\n-\n+import { ComponentFixture, fakeAsync, inject, TestBed, tick, waitForAsync } from '@angular/core/testing';\n import { Router } from '@angular/router';\n \n import {\n@@ -36,59 +33,54 @@ describe('HeroDetailComponent', () => {\n function overrideSetup() {\n   // #docregion hds-spy\n   class HeroDetailServiceSpy {\n-    testHero: Hero = {id: 42, name: 'Test Hero' };\n+    testHero: Hero = {id: 42, name: 'Test Hero'};\n \n     /* emit cloned test hero */\n     getHero = jasmine.createSpy('getHero').and.callFake(\n-      () => asyncData(Object.assign({}, this.testHero))\n-    );\n+        () => asyncData(Object.assign({}, this.testHero)));\n \n     /* emit clone of test hero, with changes merged in */\n-    saveHero = jasmine.createSpy('saveHero').and.callFake(\n-      (hero: Hero) => asyncData(Object.assign(this.testHero, hero))\n-    );\n+    saveHero = jasmine.createSpy('saveHero')\n+                   .and.callFake((hero: Hero) => asyncData(Object.assign(this.testHero, hero)));\n   }\n \n   // #enddocregion hds-spy\n \n   // the `id` value is irrelevant because ignored by service stub\n-  beforeEach(() => activatedRoute.setParamMap({ id: 99999 }));\n+  beforeEach(() => activatedRoute.setParamMap({id: 99999}));\n \n   // #docregion setup-override\n-  beforeEach(async(() => {\n+  beforeEach(waitForAsync(() => {\n     const routerSpy = createRouterSpy();\n \n-    TestBed.configureTestingModule({\n-      imports:   [ HeroModule ],\n-      providers: [\n-        { provide: ActivatedRoute, useValue: activatedRoute },\n-        { provide: Router,         useValue: routerSpy},\n+    TestBed\n+        .configureTestingModule({\n+          imports: [HeroModule],\n+          providers: [\n+            {provide: ActivatedRoute, useValue: activatedRoute},\n+            {provide: Router, useValue: routerSpy},\n   // #enddocregion setup-override\n-        // HeroDetailService at this level is IRRELEVANT!\n-        { provide: HeroDetailService, useValue: {} }\n+            // HeroDetailService at this level is IRRELEVANT!\n+            {provide: HeroDetailService, useValue: {}}\n   // #docregion setup-override\n-      ]\n-    })\n-\n-    // Override component's own provider\n-    // #docregion override-component-method\n-    .overrideComponent(HeroDetailComponent, {\n-      set: {\n-        providers: [\n-          { provide: HeroDetailService, useClass: HeroDetailServiceSpy }\n-        ]\n-      }\n-    })\n-    // #enddocregion override-component-method\n-\n-    .compileComponents();\n+          ]\n+        })\n+\n+        // Override component's own provider\n+        // #docregion override-component-method\n+        .overrideComponent(\n+            HeroDetailComponent,\n+            {set: {providers: [{provide: HeroDetailService, useClass: HeroDetailServiceSpy}]}})\n+        // #enddocregion override-component-method\n+\n+        .compileComponents();\n   }));\n   // #enddocregion setup-override\n \n   // #docregion override-tests\n   let hdsSpy: HeroDetailServiceSpy;\n \n-  beforeEach(async(() => {\n+  beforeEach(waitForAsync(() => {\n     createComponent();\n     // get the component's injected HeroDetailServiceSpy\n     hdsSpy = fixture.debugElement.injector.get(HeroDetailService) as any;\n@@ -103,33 +95,32 @@ function overrideSetup() {\n   });\n \n   it('should save stub hero change', fakeAsync(() => {\n-    const origName = hdsSpy.testHero.name;\n-    const newName = 'New Name';\n+       const origName = hdsSpy.testHero.name;\n+       const newName = 'New Name';\n \n-    page.nameInput.value = newName;\n-    page.nameInput.dispatchEvent(newEvent('input')); // tell Angular\n+       page.nameInput.value = newName;\n+       page.nameInput.dispatchEvent(newEvent('input'));  // tell Angular\n \n-    expect(component.hero.name).toBe(newName, 'component hero has new name');\n-    expect(hdsSpy.testHero.name).toBe(origName, 'service hero unchanged before save');\n+       expect(component.hero.name).toBe(newName, 'component hero has new name');\n+       expect(hdsSpy.testHero.name).toBe(origName, 'service hero unchanged before save');\n \n-    click(page.saveBtn);\n-    expect(hdsSpy.saveHero.calls.count()).toBe(1, 'saveHero called once');\n+       click(page.saveBtn);\n+       expect(hdsSpy.saveHero.calls.count()).toBe(1, 'saveHero called once');\n \n-    tick(); // wait for async save to complete\n-    expect(hdsSpy.testHero.name).toBe(newName, 'service hero has new name after save');\n-    expect(page.navigateSpy.calls.any()).toBe(true, 'router.navigate called');\n-  }));\n+       tick();  // wait for async save to complete\n+       expect(hdsSpy.testHero.name).toBe(newName, 'service hero has new name after save');\n+       expect(page.navigateSpy.calls.any()).toBe(true, 'router.navigate called');\n+     }));\n   // #enddocregion override-tests\n \n   it('fixture injected service is not the component injected service',\n-    // inject gets the service from the fixture\n-    inject([HeroDetailService], (fixtureService: HeroDetailService) => {\n-\n-    // use `fixture.debugElement.injector` to get service from component\n-    const componentService = fixture.debugElement.injector.get(HeroDetailService);\n+     // inject gets the service from the fixture\n+     inject([HeroDetailService], (fixtureService: HeroDetailService) => {\n+       // use `fixture.debugElement.injector` to get service from component\n+       const componentService = fixture.debugElement.injector.get(HeroDetailService);\n \n-    expect(fixtureService).not.toBe(componentService, 'service injected from fixture');\n-  }));\n+       expect(fixtureService).not.toBe(componentService, 'service injected from fixture');\n+     }));\n }\n \n ////////////////////\n@@ -139,39 +130,40 @@ const firstHero = getTestHeroes()[0];\n \n function heroModuleSetup() {\n   // #docregion setup-hero-module\n-  beforeEach(async(() => {\n+  beforeEach(waitForAsync(() => {\n     const routerSpy = createRouterSpy();\n \n-    TestBed.configureTestingModule({\n-      imports:   [ HeroModule ],\n-  // #enddocregion setup-hero-module\n-  //  declarations: [ HeroDetailComponent ], // NO!  DOUBLE DECLARATION\n-  // #docregion setup-hero-module\n-      providers: [\n-        { provide: ActivatedRoute, useValue: activatedRoute },\n-        { provide: HeroService,    useClass: TestHeroService },\n-        { provide: Router,         useValue: routerSpy},\n-      ]\n-    })\n-    .compileComponents();\n+    TestBed\n+        .configureTestingModule({\n+          imports: [HeroModule],\n+          // #enddocregion setup-hero-module\n+          //  declarations: [ HeroDetailComponent ], // NO!  DOUBLE DECLARATION\n+          // #docregion setup-hero-module\n+          providers: [\n+            {provide: ActivatedRoute, useValue: activatedRoute},\n+            {provide: HeroService, useClass: TestHeroService},\n+            {provide: Router, useValue: routerSpy},\n+          ]\n+        })\n+        .compileComponents();\n   }));\n   // #enddocregion setup-hero-module\n \n   // #docregion route-good-id\n   describe('when navigate to existing hero', () => {\n     let expectedHero: Hero;\n \n-    beforeEach(async(() => {\n+    beforeEach(waitForAsync(() => {\n       expectedHero = firstHero;\n-      activatedRoute.setParamMap({ id: expectedHero.id });\n+      activatedRoute.setParamMap({id: expectedHero.id});\n       createComponent();\n     }));\n \n-  // #docregion selected-tests\n+    // #docregion selected-tests\n     it('should display that hero\\'s name', () => {\n       expect(page.nameDisplay.textContent).toBe(expectedHero.name);\n     });\n-  // #enddocregion route-good-id\n+    // #enddocregion route-good-id\n \n     it('should navigate when click cancel', () => {\n       click(page.cancelBtn);\n@@ -190,10 +182,10 @@ function heroModuleSetup() {\n     });\n \n     it('should navigate when click save and save resolves', fakeAsync(() => {\n-      click(page.saveBtn);\n-      tick(); // wait for async save to complete\n-      expect(page.navigateSpy.calls.any()).toBe(true, 'router.navigate called');\n-    }));\n+         click(page.saveBtn);\n+         tick();  // wait for async save to complete\n+         expect(page.navigateSpy.calls.any()).toBe(true, 'router.navigate called');\n+       }));\n \n     // #docregion title-case-pipe\n     it('should convert hero name to Title Case', () => {\n@@ -215,14 +207,14 @@ function heroModuleSetup() {\n       expect(nameDisplay.textContent).toBe('Quick Brown  Fox');\n     });\n     // #enddocregion title-case-pipe\n-  // #enddocregion selected-tests\n-  // #docregion route-good-id\n+    // #enddocregion selected-tests\n+    // #docregion route-good-id\n   });\n   // #enddocregion route-good-id\n \n   // #docregion route-no-id\n   describe('when navigate with no hero id', () => {\n-    beforeEach(async( createComponent ));\n+    beforeEach(waitForAsync(createComponent));\n \n     it('should have hero.id === 0', () => {\n       expect(component.hero.id).toBe(0);\n@@ -236,8 +228,8 @@ function heroModuleSetup() {\n \n   // #docregion route-bad-id\n   describe('when navigate to non-existent hero id', () => {\n-    beforeEach(async(() => {\n-      activatedRoute.setParamMap({ id: 99999 });\n+    beforeEach(waitForAsync(() => {\n+      activatedRoute.setParamMap({id: 99999});\n       createComponent();\n     }));\n \n@@ -253,11 +245,10 @@ function heroModuleSetup() {\n     let service: HeroDetailService;\n     fixture = TestBed.createComponent(HeroDetailComponent);\n     expect(\n-      // Throws because `inject` only has access to TestBed's injector\n-      // which is an ancestor of the component's injector\n-      inject([HeroDetailService], (hds: HeroDetailService) =>  service = hds )\n-    )\n-    .toThrowError(/No provider for HeroDetailService/);\n+        // Throws because `inject` only has access to TestBed's injector\n+        // which is an ancestor of the component's injector\n+        inject([HeroDetailService], (hds: HeroDetailService) => service = hds))\n+        .toThrowError(/No provider for HeroDetailService/);\n \n     // get `HeroDetailService` with component's own injector\n     service = fixture.debugElement.injector.get(HeroDetailService);\n@@ -270,60 +261,62 @@ import { FormsModule } from '@angular/forms';\n import { TitleCasePipe } from '../shared/title-case.pipe';\n \n function formsModuleSetup() {\n- // #docregion setup-forms-module\n-  beforeEach(async(() => {\n+  // #docregion setup-forms-module\n+  beforeEach(waitForAsync(() => {\n     const routerSpy = createRouterSpy();\n \n-    TestBed.configureTestingModule({\n-      imports:      [ FormsModule ],\n-      declarations: [ HeroDetailComponent, TitleCasePipe ],\n-      providers: [\n-        { provide: ActivatedRoute, useValue: activatedRoute },\n-        { provide: HeroService,    useClass: TestHeroService },\n-        { provide: Router,         useValue: routerSpy},\n-      ]\n-    })\n-    .compileComponents();\n+    TestBed\n+        .configureTestingModule({\n+          imports: [FormsModule],\n+          declarations: [HeroDetailComponent, TitleCasePipe],\n+          providers: [\n+            {provide: ActivatedRoute, useValue: activatedRoute},\n+            {provide: HeroService, useClass: TestHeroService},\n+            {provide: Router, useValue: routerSpy},\n+          ]\n+        })\n+        .compileComponents();\n   }));\n   // #enddocregion setup-forms-module\n \n-  it('should display 1st hero\\'s name', async(() => {\n-    const expectedHero = firstHero;\n-    activatedRoute.setParamMap({ id: expectedHero.id });\n-    createComponent().then(() => {\n-      expect(page.nameDisplay.textContent).toBe(expectedHero.name);\n-    });\n-  }));\n+  it('should display 1st hero\\'s name', waitForAsync(() => {\n+       const expectedHero = firstHero;\n+       activatedRoute.setParamMap({id: expectedHero.id});\n+       createComponent().then(() => {\n+         expect(page.nameDisplay.textContent).toBe(expectedHero.name);\n+       });\n+     }));\n }\n \n ///////////////////////\n import { SharedModule } from '../shared/shared.module';\n \n function sharedModuleSetup() {\n   // #docregion setup-shared-module\n-  beforeEach(async(() => {\n+  beforeEach(waitForAsync(() => {\n     const routerSpy = createRouterSpy();\n \n-    TestBed.configureTestingModule({\n-      imports:      [ SharedModule ],\n-      declarations: [ HeroDetailComponent ],\n-      providers: [\n-        { provide: ActivatedRoute, useValue: activatedRoute },\n-        { provide: HeroService,    useClass: TestHeroService },\n-        { provide: Router,         useValue: routerSpy},\n-      ]\n-    })\n-    .compileComponents();\n+    TestBed\n+        .configureTestingModule({\n+          imports: [SharedModule],\n+          declarations: [HeroDetailComponent],\n+          providers: [\n+            {provide: ActivatedRoute, useValue: activatedRoute},\n+            {provide: HeroService, useClass: TestHeroService},\n+            {provide: Router, useValue: routerSpy},\n+          ]\n+        })\n+        .compileComponents();\n   }));\n   // #enddocregion setup-shared-module\n \n-  it('should display 1st hero\\'s name', async(() => {\n-    const expectedHero = firstHero;\n-    activatedRoute.setParamMap({ id: expectedHero.id });\n-    createComponent().then(() => {\n-      expect(page.nameDisplay.textContent).toBe(expectedHero.name);\n-    });\n-  }));\n+  it('should display 1st hero\\'s name', waitForAsync(() => {\n+       const expectedHero = firstHero;\n+       activatedRoute.setParamMap({id: expectedHero.id});\n+       createComponent().then(() => {\n+         expect(page.nameDisplay.textContent).toBe(expectedHero.name);\n+       });\n+     }));\n }\n \n /////////// Helpers /////\n@@ -347,11 +340,21 @@ function createComponent() {\n // #docregion page\n class Page {\n   // getter properties wait to query the DOM until called.\n-  get buttons()     { return this.queryAll<HTMLButtonElement>('button'); }\n-  get saveBtn()     { return this.buttons[0]; }\n-  get cancelBtn()   { return this.buttons[1]; }\n-  get nameDisplay() { return this.query<HTMLElement>('span'); }\n-  get nameInput()   { return this.query<HTMLInputElement>('input'); }\n+  get buttons() {\n+    return this.queryAll<HTMLButtonElement>('button');\n+  }\n+  get saveBtn() {\n+    return this.buttons[0];\n+  }\n+  get cancelBtn() {\n+    return this.buttons[1];\n+  }\n+  get nameDisplay() {\n+    return this.query<HTMLElement>('span');\n+  }\n+  get nameInput() {\n+    return this.query<HTMLInputElement>('input');\n+  }\n \n   gotoListSpy: jasmine.Spy;\n   navigateSpy: jasmine.Spy;"
        },
        {
            "sha": "b8c0278bf6428807ff5702b072226bb4328dbfe1",
            "filename": "aio/content/examples/testing/src/app/hero/hero-list.component.spec.ts",
            "status": "modified",
            "additions": 36,
            "deletions": 38,
            "changes": 74,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fhero%2Fhero-list.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fhero%2Fhero-list.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fhero%2Fhero-list.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,4 +1,4 @@\n-import { async, ComponentFixture, fakeAsync, TestBed, tick\n+import { ComponentFixture, fakeAsync, TestBed, tick, waitForAsync\n } from '@angular/core/testing';\n \n import { By } from '@angular/platform-browser';\n@@ -7,13 +7,12 @@ import { DebugElement } from '@angular/core';\n import { Router } from '@angular/router';\n \n import { addMatchers, newEvent } from '../../testing';\n-\n+import { HeroService } from '../model/hero.service';\n import { getTestHeroes, TestHeroService } from '../model/testing/test-hero.service';\n \n import { HeroModule } from './hero.module';\n import { HeroListComponent } from './hero-list.component';\n import { HighlightDirective } from '../shared/highlight.directive';\n-import { HeroService } from '../model/hero.service';\n \n const HEROES = getTestHeroes();\n \n@@ -24,20 +23,20 @@ let page: Page;\n /////// Tests //////\n \n describe('HeroListComponent', () => {\n-\n-  beforeEach(async(() => {\n+  beforeEach(waitForAsync(() => {\n     addMatchers();\n     const routerSpy = jasmine.createSpyObj('Router', ['navigate']);\n \n-    TestBed.configureTestingModule({\n-      imports: [HeroModule],\n-      providers: [\n-        { provide: HeroService, useClass: TestHeroService },\n-        { provide: Router,      useValue: routerSpy}\n-      ]\n-    })\n-    .compileComponents()\n-    .then(createComponent);\n+    TestBed\n+        .configureTestingModule({\n+          imports: [HeroModule],\n+          providers: [\n+            {provide: HeroService, useClass: TestHeroService},\n+            {provide: Router, useValue: routerSpy}\n+          ]\n+        })\n+        .compileComponents()\n+        .then(createComponent);\n   }));\n \n   it('should display heroes', () => {\n@@ -52,36 +51,35 @@ describe('HeroListComponent', () => {\n   });\n \n   it('should select hero on click', fakeAsync(() => {\n-    const expectedHero = HEROES[1];\n-    const li = page.heroRows[1];\n-    li.dispatchEvent(newEvent('click'));\n-    tick();\n-    // `.toEqual` because selectedHero is clone of expectedHero; see FakeHeroService\n-    expect(comp.selectedHero).toEqual(expectedHero);\n-  }));\n+       const expectedHero = HEROES[1];\n+       const li = page.heroRows[1];\n+       li.dispatchEvent(newEvent('click'));\n+       tick();\n+       // `.toEqual` because selectedHero is clone of expectedHero; see FakeHeroService\n+       expect(comp.selectedHero).toEqual(expectedHero);\n+     }));\n \n   it('should navigate to selected hero detail on click', fakeAsync(() => {\n-    const expectedHero = HEROES[1];\n-    const li = page.heroRows[1];\n-    li.dispatchEvent(newEvent('click'));\n-    tick();\n-\n-    // should have navigated\n-    expect(page.navSpy.calls.any()).toBe(true, 'navigate called');\n-\n-    // composed hero detail will be URL like 'heroes/42'\n-    // expect link array with the route path and hero id\n-    // first argument to router.navigate is link array\n-    const navArgs = page.navSpy.calls.first().args[0];\n-    expect(navArgs[0]).toContain('heroes', 'nav to heroes detail URL');\n-    expect(navArgs[1]).toBe(expectedHero.id, 'expected hero.id');\n-\n-  }));\n+       const expectedHero = HEROES[1];\n+       const li = page.heroRows[1];\n+       li.dispatchEvent(newEvent('click'));\n+       tick();\n+\n+       // should have navigated\n+       expect(page.navSpy.calls.any()).toBe(true, 'navigate called');\n+\n+       // composed hero detail will be URL like 'heroes/42'\n+       // expect link array with the route path and hero id\n+       // first argument to router.navigate is link array\n+       const navArgs = page.navSpy.calls.first().args[0];\n+       expect(navArgs[0]).toContain('heroes', 'nav to heroes detail URL');\n+       expect(navArgs[1]).toBe(expectedHero.id, 'expected hero.id');\n+     }));\n \n   it('should find `HighlightDirective` with `By.directive', () => {\n     // #docregion by\n     // Can find DebugElement either by css selector or by directive\n-    const h2        = fixture.debugElement.query(By.css('h2'));\n+    const h2 = fixture.debugElement.query(By.css('h2'));\n     const directive = fixture.debugElement.query(By.directive(HighlightDirective));\n     // #enddocregion by\n     expect(h2).toBe(directive);"
        },
        {
            "sha": "1c30c7dc6a2d5ffdfea4949321bef14075c6b7ac",
            "filename": "aio/content/examples/testing/src/app/shared/canvas.component.spec.ts",
            "status": "modified",
            "additions": 16,
            "deletions": 15,
            "changes": 31,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fshared%2Fcanvas.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fshared%2Fcanvas.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fshared%2Fcanvas.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,6 +1,7 @@\n // #docplaster\n // #docregion without-toBlob-macrotask\n-import { TestBed, async, tick, fakeAsync } from '@angular/core/testing';\n+import { fakeAsync, TestBed, tick, waitForAsync } from '@angular/core/testing';\n+\n import { CanvasComponent } from './canvas.component';\n \n describe('CanvasComponent', () => {\n@@ -10,29 +11,29 @@ describe('CanvasComponent', () => {\n     (window as any).__zone_symbol__FakeAsyncTestMacroTask = [\n       {\n         source: 'HTMLCanvasElement.toBlob',\n-        callbackArgs: [{ size: 200 }],\n+        callbackArgs: [{size: 200}],\n       },\n     ];\n   });\n   // #enddocregion enable-toBlob-macrotask\n   // #docregion without-toBlob-macrotask\n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      declarations: [\n-        CanvasComponent\n-      ],\n-    }).compileComponents();\n+  beforeEach(waitForAsync(() => {\n+    TestBed\n+        .configureTestingModule({\n+          declarations: [CanvasComponent],\n+        })\n+        .compileComponents();\n   }));\n \n   it('should be able to generate blob data from canvas', fakeAsync(() => {\n-    const fixture = TestBed.createComponent(CanvasComponent);\n-    const canvasComp = fixture.componentInstance;\n+       const fixture = TestBed.createComponent(CanvasComponent);\n+       const canvasComp = fixture.componentInstance;\n \n-    fixture.detectChanges();\n-    expect(canvasComp.blobSize).toBe(0);\n+       fixture.detectChanges();\n+       expect(canvasComp.blobSize).toBe(0);\n \n-    tick();\n-    expect(canvasComp.blobSize).toBeGreaterThan(0);\n-  }));\n+       tick();\n+       expect(canvasComp.blobSize).toBeGreaterThan(0);\n+     }));\n });\n // #enddocregion without-toBlob-macrotask"
        },
        {
            "sha": "629b6a4d5bc2fcbc7dcf1b4fe731109713cd7003",
            "filename": "aio/content/examples/testing/src/app/twain/twain.component.spec.ts",
            "status": "modified",
            "additions": 43,
            "deletions": 47,
            "changes": 90,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Ftwain%2Ftwain.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Ftwain%2Ftwain.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Ftwain%2Ftwain.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,14 +1,13 @@\n // #docplaster\n-import { async, fakeAsync, ComponentFixture, TestBed, tick } from '@angular/core/testing';\n+import { fakeAsync, ComponentFixture, TestBed, tick, waitForAsync } from '@angular/core/testing';\n \n import { asyncData, asyncError } from '../../testing';\n \n import { of, throwError } from 'rxjs';\n-\n import { last } from 'rxjs/operators';\n \n-import { TwainService } from './twain.service';\n import { TwainComponent } from './twain.component';\n+import { TwainService } from './twain.service';\n \n describe('TwainComponent', () => {\n   let component: TwainComponent;\n@@ -32,14 +31,12 @@ describe('TwainComponent', () => {\n     // Create a fake TwainService object with a `getQuote()` spy\n     const twainService = jasmine.createSpyObj('TwainService', ['getQuote']);\n     // Make the spy return a synchronous Observable with the test data\n-    getQuoteSpy = twainService.getQuote.and.returnValue( of(testQuote) );\n+    getQuoteSpy = twainService.getQuote.and.returnValue(of(testQuote));\n     // #enddocregion spy\n \n     TestBed.configureTestingModule({\n-      declarations: [ TwainComponent ],\n-      providers:    [\n-        { provide: TwainService, useValue: twainService }\n-      ]\n+      declarations: [TwainComponent],\n+      providers: [{provide: TwainService, useValue: twainService}]\n     });\n \n     fixture = TestBed.createComponent(TwainComponent);\n@@ -58,7 +55,7 @@ describe('TwainComponent', () => {\n     // The quote would not be immediately available if the service were truly async.\n     // #docregion sync-test\n     it('should show quote after component initialized', () => {\n-      fixture.detectChanges(); // onInit()\n+      fixture.detectChanges();  // onInit()\n \n       // sync spy result shows testQuote immediately after init\n       expect(quoteEl.textContent).toBe(testQuote);\n@@ -71,20 +68,19 @@ describe('TwainComponent', () => {\n     // Use `fakeAsync` because the component error calls `setTimeout`\n     // #docregion error-test\n     it('should display error when TwainService fails', fakeAsync(() => {\n-      // tell spy to return an error observable\n-      getQuoteSpy.and.returnValue(\n-        throwError('TwainService test failure'));\n+         // tell spy to return an error observable\n+         getQuoteSpy.and.returnValue(throwError('TwainService test failure'));\n \n-      fixture.detectChanges(); // onInit()\n-      // sync spy errors immediately after init\n+         fixture.detectChanges();  // onInit()\n+         // sync spy errors immediately after init\n \n-      tick(); // flush the component's setTimeout()\n+         tick();  // flush the component's setTimeout()\n \n-      fixture.detectChanges(); // update errorMessage within setTimeout()\n+         fixture.detectChanges();  // update errorMessage within setTimeout()\n \n-      expect(errorMessage()).toMatch(/test failure/, 'should display error');\n-      expect(quoteEl.textContent).toBe('...', 'should show placeholder');\n-    }));\n+         expect(errorMessage()).toMatch(/test failure/, 'should display error');\n+         expect(quoteEl.textContent).toBe('...', 'should show placeholder');\n+       }));\n     // #enddocregion error-test\n   });\n \n@@ -113,37 +109,37 @@ describe('TwainComponent', () => {\n \n     // #docregion fake-async-test\n     it('should show quote after getQuote (fakeAsync)', fakeAsync(() => {\n-      fixture.detectChanges(); // ngOnInit()\n-      expect(quoteEl.textContent).toBe('...', 'should show placeholder');\n+         fixture.detectChanges();  // ngOnInit()\n+         expect(quoteEl.textContent).toBe('...', 'should show placeholder');\n \n-      tick(); // flush the observable to get the quote\n-      fixture.detectChanges(); // update view\n+         tick();                   // flush the observable to get the quote\n+         fixture.detectChanges();  // update view\n \n-      expect(quoteEl.textContent).toBe(testQuote, 'should show quote');\n-      expect(errorMessage()).toBeNull('should not show error');\n-    }));\n+         expect(quoteEl.textContent).toBe(testQuote, 'should show quote');\n+         expect(errorMessage()).toBeNull('should not show error');\n+       }));\n     // #enddocregion fake-async-test\n \n     // #docregion async-test\n-    it('should show quote after getQuote (async)', async(() => {\n-      fixture.detectChanges(); // ngOnInit()\n-      expect(quoteEl.textContent).toBe('...', 'should show placeholder');\n-\n-      fixture.whenStable().then(() => { // wait for async getQuote\n-        fixture.detectChanges();        // update view with quote\n-        expect(quoteEl.textContent).toBe(testQuote);\n-        expect(errorMessage()).toBeNull('should not show error');\n-      });\n-    }));\n+    it('should show quote after getQuote (async)', waitForAsync(() => {\n+         fixture.detectChanges();  // ngOnInit()\n+         expect(quoteEl.textContent).toBe('...', 'should show placeholder');\n+\n+         fixture.whenStable().then(() => {  // wait for async getQuote\n+           fixture.detectChanges();         // update view with quote\n+           expect(quoteEl.textContent).toBe(testQuote);\n+           expect(errorMessage()).toBeNull('should not show error');\n+         });\n+       }));\n     // #enddocregion async-test\n \n \n     // #docregion quote-done-test\n     it('should show last quote (quote done)', (done: DoneFn) => {\n       fixture.detectChanges();\n \n-      component.quote.pipe( last() ).subscribe(() => {\n-        fixture.detectChanges(); // update view with quote\n+      component.quote.pipe(last()).subscribe(() => {\n+        fixture.detectChanges();  // update view with quote\n         expect(quoteEl.textContent).toBe(testQuote);\n         expect(errorMessage()).toBeNull('should not show error');\n         done();\n@@ -157,7 +153,7 @@ describe('TwainComponent', () => {\n \n       // the spy's most recent call returns the observable with the test quote\n       getQuoteSpy.calls.mostRecent().returnValue.subscribe(() => {\n-        fixture.detectChanges(); // update view with quote\n+        fixture.detectChanges();  // update view with quote\n         expect(quoteEl.textContent).toBe(testQuote);\n         expect(errorMessage()).toBeNull('should not show error');\n         done();\n@@ -167,16 +163,16 @@ describe('TwainComponent', () => {\n \n     // #docregion async-error-test\n     it('should display error when TwainService fails', fakeAsync(() => {\n-      // tell spy to return an async error observable\n-      getQuoteSpy.and.returnValue(asyncError<string>('TwainService test failure'));\n+         // tell spy to return an async error observable\n+         getQuoteSpy.and.returnValue(asyncError<string>('TwainService test failure'));\n \n-      fixture.detectChanges();\n-      tick();                  // component shows error after a setTimeout()\n-      fixture.detectChanges(); // update error message\n+         fixture.detectChanges();\n+         tick();                   // component shows error after a setTimeout()\n+         fixture.detectChanges();  // update error message\n \n-      expect(errorMessage()).toMatch(/test failure/, 'should display error');\n-      expect(quoteEl.textContent).toBe('...', 'should show placeholder');\n-    }));\n+         expect(errorMessage()).toMatch(/test failure/, 'should display error');\n+         expect(quoteEl.textContent).toBe('...', 'should show placeholder');\n+       }));\n     // #enddocregion async-error-test\n   });\n });"
        },
        {
            "sha": "224f5db3ceeebb28800b1ba9277a287b2232f0ba",
            "filename": "aio/content/examples/toh-pt6/src/app/dashboard/dashboard.component.spec.ts",
            "status": "modified",
            "additions": 21,
            "deletions": 29,
            "changes": 50,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftoh-pt6%2Fsrc%2Fapp%2Fdashboard%2Fdashboard.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Ftoh-pt6%2Fsrc%2Fapp%2Fdashboard%2Fdashboard.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Ftoh-pt6%2Fsrc%2Fapp%2Fdashboard%2Fdashboard.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,36 +1,29 @@\n-import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n-\n-import { DashboardComponent } from './dashboard.component';\n-import { HeroSearchComponent } from '../hero-search/hero-search.component';\n-\n+import { ComponentFixture, TestBed, waitForAsync } from '@angular/core/testing';\n import { RouterTestingModule } from '@angular/router/testing';\n import { of } from 'rxjs';\n-import { HEROES } from '../mock-heroes';\n+\n+import { HeroSearchComponent } from '../hero-search/hero-search.component';\n import { HeroService } from '../hero.service';\n+import { HEROES } from '../mock-heroes';\n+\n+import { DashboardComponent } from './dashboard.component';\n \n describe('DashboardComponent', () => {\n   let component: DashboardComponent;\n   let fixture: ComponentFixture<DashboardComponent>;\n   let heroService;\n   let getHeroesSpy;\n \n-  beforeEach(async(() => {\n+  beforeEach(waitForAsync(() => {\n     heroService = jasmine.createSpyObj('HeroService', ['getHeroes']);\n-    getHeroesSpy = heroService.getHeroes.and.returnValue( of(HEROES) );\n-    TestBed.configureTestingModule({\n-      declarations: [\n-        DashboardComponent,\n-        HeroSearchComponent\n-      ],\n-      imports: [\n-        RouterTestingModule.withRoutes([])\n-      ],\n-      providers: [\n-        { provide: HeroService, useValue: heroService }\n-      ]\n-    })\n-    .compileComponents();\n-\n+    getHeroesSpy = heroService.getHeroes.and.returnValue(of(HEROES));\n+    TestBed\n+        .configureTestingModule({\n+          declarations: [DashboardComponent, HeroSearchComponent],\n+          imports: [RouterTestingModule.withRoutes([])],\n+          providers: [{provide: HeroService, useValue: heroService}]\n+        })\n+        .compileComponents();\n   }));\n \n   beforeEach(() => {\n@@ -47,12 +40,11 @@ describe('DashboardComponent', () => {\n     expect(fixture.nativeElement.querySelector('h3').textContent).toEqual('Top Heroes');\n   });\n \n-  it('should call heroService', async(() => {\n-    expect(getHeroesSpy.calls.any()).toBe(true);\n-    }));\n-\n-  it('should display 4 links', async(() => {\n-    expect(fixture.nativeElement.querySelectorAll('a').length).toEqual(4);\n-  }));\n+  it('should call heroService', waitForAsync(() => {\n+       expect(getHeroesSpy.calls.any()).toBe(true);\n+     }));\n \n+  it('should display 4 links', waitForAsync(() => {\n+       expect(fixture.nativeElement.querySelectorAll('a').length).toEqual(4);\n+     }));\n });"
        },
        {
            "sha": "4ebfdd344e51e01558355aad1c7924b941dd5d69",
            "filename": "aio/content/examples/upgrade-phonecat-2-hybrid/app/phone-detail/phone-detail.component.spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 11,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fupgrade-phonecat-2-hybrid%2Fapp%2Fphone-detail%2Fphone-detail.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fupgrade-phonecat-2-hybrid%2Fapp%2Fphone-detail%2Fphone-detail.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Fupgrade-phonecat-2-hybrid%2Fapp%2Fphone-detail%2Fphone-detail.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,22 +1,16 @@\n // #docregion\n // #docregion activatedroute\n+import { TestBed, waitForAsync } from '@angular/core/testing';\n import { ActivatedRoute } from '@angular/router';\n-\n // #enddocregion activatedroute\n import { Observable, of } from 'rxjs';\n \n-import { async, TestBed } from '@angular/core/testing';\n-\n import { PhoneDetailComponent} from './phone-detail.component';\n import { Phone, PhoneData } from '../core/phone/phone.service';\n import { CheckmarkPipe } from '../core/checkmark/checkmark.pipe';\n \n function xyzPhoneData(): PhoneData {\n-  return {\n-    name: 'phone xyz',\n-    snippet: '',\n-    images: ['image/url1.png', 'image/url2.png']\n-  };\n+  return {name: 'phone xyz', snippet: '', images: ['image/url1.png', 'image/url2.png']};\n }\n \n class MockPhone {\n@@ -34,10 +28,9 @@ class ActivatedRouteMock {\n // #enddocregion activatedroute\n \n describe('PhoneDetailComponent', () => {\n-\n   // #docregion activatedroute\n \n-  beforeEach(async(() => {\n+  beforeEach(waitForAsync(() => {\n     TestBed.configureTestingModule({\n       declarations: [ CheckmarkPipe, PhoneDetailComponent ],\n       providers: [\n@@ -55,5 +48,4 @@ describe('PhoneDetailComponent', () => {\n     const compiled = fixture.debugElement.nativeElement;\n     expect(compiled.querySelector('h1').textContent).toContain(xyzPhoneData().name);\n   });\n-\n });"
        },
        {
            "sha": "443fc6517898e4e5d513fa826593ed5e6038433d",
            "filename": "aio/content/examples/upgrade-phonecat-2-hybrid/app/phone-list/phone-list.component.spec.ts",
            "status": "modified",
            "additions": 26,
            "deletions": 31,
            "changes": 57,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fupgrade-phonecat-2-hybrid%2Fapp%2Fphone-list%2Fphone-list.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fupgrade-phonecat-2-hybrid%2Fapp%2Fphone-list%2Fphone-list.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Fupgrade-phonecat-2-hybrid%2Fapp%2Fphone-list%2Fphone-list.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,13 +1,14 @@\n /* tslint:disable */\n // #docregion\n-import { NO_ERRORS_SCHEMA } from '@angular/core';\n-import { ActivatedRoute } from '@angular/router';\n-import { Observable, of } from 'rxjs';\n-import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n-import { SpyLocation } from '@angular/common/testing';\n+import {SpyLocation} from '@angular/common/testing';\n+import {NO_ERRORS_SCHEMA} from '@angular/core';\n+import {ComponentFixture, TestBed, waitForAsync} from '@angular/core/testing';\n+import {ActivatedRoute} from '@angular/router';\n+import {Observable, of} from 'rxjs';\n \n-import { PhoneListComponent } from './phone-list.component';\n-import { Phone, PhoneData } from '../core/phone/phone.service';\n+import {Phone, PhoneData} from '../core/phone/phone.service';\n+\n+import {PhoneListComponent} from './phone-list.component';\n \n class ActivatedRouteMock {\n   constructor(public snapshot: any) {}\n@@ -16,27 +17,26 @@ class ActivatedRouteMock {\n class MockPhone {\n   query(): Observable<PhoneData[]> {\n     return of([\n-      {name: 'Nexus S', snippet: '', images: []},\n-      {name: 'Motorola DROID', snippet: '', images: []}\n+      {name: 'Nexus S', snippet: '', images: []}, {name: 'Motorola DROID', snippet: '', images: []}\n     ]);\n   }\n }\n \n let fixture: ComponentFixture<PhoneListComponent>;\n \n describe('PhoneList', () => {\n-\n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      declarations: [ PhoneListComponent ],\n-      providers: [\n-        { provide: ActivatedRoute, useValue: new ActivatedRouteMock({ params: { 'phoneId': 1 } }) },\n-        { provide: Location, useClass: SpyLocation },\n-        { provide: Phone, useClass: MockPhone },\n-      ],\n-      schemas: [ NO_ERRORS_SCHEMA ]\n-    })\n-    .compileComponents();\n+  beforeEach(waitForAsync(() => {\n+    TestBed\n+        .configureTestingModule({\n+          declarations: [PhoneListComponent],\n+          providers: [\n+            {provide: ActivatedRoute, useValue: new ActivatedRouteMock({params: {'phoneId': 1}})},\n+            {provide: Location, useClass: SpyLocation},\n+            {provide: Phone, useClass: MockPhone},\n+          ],\n+          schemas: [NO_ERRORS_SCHEMA]\n+        })\n+        .compileComponents();\n   }));\n \n   beforeEach(() => {\n@@ -47,20 +47,15 @@ describe('PhoneList', () => {\n     fixture.detectChanges();\n     let compiled = fixture.debugElement.nativeElement;\n     expect(compiled.querySelectorAll('.phone-list-item').length).toBe(2);\n-    expect(\n-      compiled.querySelector('.phone-list-item:nth-child(1)').textContent\n-    ).toContain('Motorola DROID');\n-    expect(\n-      compiled.querySelector('.phone-list-item:nth-child(2)').textContent\n-    ).toContain('Nexus S');\n+    expect(compiled.querySelector('.phone-list-item:nth-child(1)').textContent)\n+        .toContain('Motorola DROID');\n+    expect(compiled.querySelector('.phone-list-item:nth-child(2)').textContent)\n+        .toContain('Nexus S');\n   });\n \n   xit('should set the default value of orderProp model', () => {\n     fixture.detectChanges();\n     let compiled = fixture.debugElement.nativeElement;\n-    expect(\n-      compiled.querySelector('select option:last-child').selected\n-    ).toBe(true);\n+    expect(compiled.querySelector('select option:last-child').selected).toBe(true);\n   });\n-\n });"
        },
        {
            "sha": "4ebfdd344e51e01558355aad1c7924b941dd5d69",
            "filename": "aio/content/examples/upgrade-phonecat-3-final/app/phone-detail/phone-detail.component.spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 11,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fupgrade-phonecat-3-final%2Fapp%2Fphone-detail%2Fphone-detail.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fupgrade-phonecat-3-final%2Fapp%2Fphone-detail%2Fphone-detail.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Fupgrade-phonecat-3-final%2Fapp%2Fphone-detail%2Fphone-detail.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,22 +1,16 @@\n // #docregion\n // #docregion activatedroute\n+import { TestBed, waitForAsync } from '@angular/core/testing';\n import { ActivatedRoute } from '@angular/router';\n-\n // #enddocregion activatedroute\n import { Observable, of } from 'rxjs';\n \n-import { async, TestBed } from '@angular/core/testing';\n-\n import { PhoneDetailComponent} from './phone-detail.component';\n import { Phone, PhoneData } from '../core/phone/phone.service';\n import { CheckmarkPipe } from '../core/checkmark/checkmark.pipe';\n \n function xyzPhoneData(): PhoneData {\n-  return {\n-    name: 'phone xyz',\n-    snippet: '',\n-    images: ['image/url1.png', 'image/url2.png']\n-  };\n+  return {name: 'phone xyz', snippet: '', images: ['image/url1.png', 'image/url2.png']};\n }\n \n class MockPhone {\n@@ -34,10 +28,9 @@ class ActivatedRouteMock {\n // #enddocregion activatedroute\n \n describe('PhoneDetailComponent', () => {\n-\n   // #docregion activatedroute\n \n-  beforeEach(async(() => {\n+  beforeEach(waitForAsync(() => {\n     TestBed.configureTestingModule({\n       declarations: [ CheckmarkPipe, PhoneDetailComponent ],\n       providers: [\n@@ -55,5 +48,4 @@ describe('PhoneDetailComponent', () => {\n     const compiled = fixture.debugElement.nativeElement;\n     expect(compiled.querySelector('h1').textContent).toContain(xyzPhoneData().name);\n   });\n-\n });"
        },
        {
            "sha": "cb5dd53084394361f2e5e802f55feca44ba2a228",
            "filename": "aio/content/examples/upgrade-phonecat-3-final/app/phone-list/phone-list.component.spec.ts",
            "status": "modified",
            "additions": 26,
            "deletions": 31,
            "changes": 57,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fupgrade-phonecat-3-final%2Fapp%2Fphone-list%2Fphone-list.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fexamples%2Fupgrade-phonecat-3-final%2Fapp%2Fphone-list%2Fphone-list.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Fupgrade-phonecat-3-final%2Fapp%2Fphone-list%2Fphone-list.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,13 +1,14 @@\n /* tslint:disable */\n // #docregion routestuff\n-import { NO_ERRORS_SCHEMA } from '@angular/core';\n-import { ActivatedRoute } from '@angular/router';\n-import { Observable, of } from 'rxjs';\n-import { async, ComponentFixture, TestBed } from '@angular/core/testing';\n-import { SpyLocation } from '@angular/common/testing';\n+import {SpyLocation} from '@angular/common/testing';\n+import {NO_ERRORS_SCHEMA} from '@angular/core';\n+import {ComponentFixture, TestBed, waitForAsync} from '@angular/core/testing';\n+import {ActivatedRoute} from '@angular/router';\n+import {Observable, of} from 'rxjs';\n \n-import { PhoneListComponent } from './phone-list.component';\n-import { Phone, PhoneData } from '../core/phone/phone.service';\n+import {Phone, PhoneData} from '../core/phone/phone.service';\n+\n+import {PhoneListComponent} from './phone-list.component';\n \n // #enddocregion routestuff\n \n@@ -18,29 +19,28 @@ class ActivatedRouteMock {\n class MockPhone {\n   query(): Observable<PhoneData[]> {\n     return of([\n-      {name: 'Nexus S', snippet: '', images: []},\n-      {name: 'Motorola DROID', snippet: '', images: []}\n+      {name: 'Nexus S', snippet: '', images: []}, {name: 'Motorola DROID', snippet: '', images: []}\n     ]);\n   }\n }\n \n let fixture: ComponentFixture<PhoneListComponent>;\n \n describe('PhoneList', () => {\n-\n   // #docregion routestuff\n \n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      declarations: [ PhoneListComponent ],\n-      providers: [\n-        { provide: ActivatedRoute, useValue: new ActivatedRouteMock({ params: { 'phoneId': 1 } }) },\n-        { provide: Location, useClass: SpyLocation },\n-        { provide: Phone, useClass: MockPhone },\n-      ],\n-      schemas: [ NO_ERRORS_SCHEMA ]\n-    })\n-    .compileComponents();\n+  beforeEach(waitForAsync(() => {\n+    TestBed\n+        .configureTestingModule({\n+          declarations: [PhoneListComponent],\n+          providers: [\n+            {provide: ActivatedRoute, useValue: new ActivatedRouteMock({params: {'phoneId': 1}})},\n+            {provide: Location, useClass: SpyLocation},\n+            {provide: Phone, useClass: MockPhone},\n+          ],\n+          schemas: [NO_ERRORS_SCHEMA]\n+        })\n+        .compileComponents();\n   }));\n \n   beforeEach(() => {\n@@ -52,20 +52,15 @@ describe('PhoneList', () => {\n     fixture.detectChanges();\n     let compiled = fixture.debugElement.nativeElement;\n     expect(compiled.querySelectorAll('.phone-list-item').length).toBe(2);\n-    expect(\n-      compiled.querySelector('.phone-list-item:nth-child(1)').textContent\n-    ).toContain('Motorola DROID');\n-    expect(\n-      compiled.querySelector('.phone-list-item:nth-child(2)').textContent\n-    ).toContain('Nexus S');\n+    expect(compiled.querySelector('.phone-list-item:nth-child(1)').textContent)\n+        .toContain('Motorola DROID');\n+    expect(compiled.querySelector('.phone-list-item:nth-child(2)').textContent)\n+        .toContain('Nexus S');\n   });\n \n   xit('should set the default value of orderProp model', () => {\n     fixture.detectChanges();\n     let compiled = fixture.debugElement.nativeElement;\n-    expect(\n-      compiled.querySelector('select option:last-child').selected\n-    ).toBe(true);\n+    expect(compiled.querySelector('select option:last-child').selected).toBe(true);\n   });\n-\n });"
        },
        {
            "sha": "d4e2320411bfb71a26dc64753e9800b88df58fd6",
            "filename": "aio/content/guide/deprecations.md",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fguide%2Fdeprecations.md",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fguide%2Fdeprecations.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fdeprecations.md?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -58,6 +58,7 @@ v9 - v12\n | `@angular/core`               | [`ANALYZE_FOR_ENTRY_COMPONENTS`](api/core/ANALYZE_FOR_ENTRY_COMPONENTS)       | <!--v9--> v11 |\n | `@angular/router`             | [`loadChildren` string syntax](#loadChildren)                                 | <!--v9--> v11 |\n | `@angular/core/testing`       | [`TestBed.get`](#testing)                                                     | <!--v9--> v12 |\n+| `@angular/core/testing`       | [`async`](#testing)                                                     | <!--v9--> v12 |\n | `@angular/router`             | [`ActivatedRoute` params and `queryParams` properties](#activatedroute-props) | unspecified |\n | template syntax               | [`/deep/`, `>>>`, and `::ng-deep`](#deep-component-style-selector)            | <!--v7--> unspecified |\n | browser support               | [`IE 9 and 10, IE mobile`](#ie-9-10-and-mobile)                               | <!--v10--> v11 |\n@@ -108,6 +109,7 @@ Tip: In the [API reference section](api) of this doc site, deprecated APIs are i\n | API | Replacement | Deprecation announced | Notes |\n | --- | ----------- | --------------------- | ----- |\n | [`TestBed.get`](api/core/testing/TestBed#get) | [`TestBed.inject`](api/core/testing/TestBed#inject) | v9 | Same behavior, but type safe. |\n+| [`async`](api/core/testing/async) | [`waitForAsync`](api/core/testing/waitForAsync) | v10 | Same behavior, but rename to avoid confusion. |\n \n \n {@a forms}\n@@ -477,7 +479,7 @@ The final decision was made on three key points:\n \n \n {@a wrapped-value}\n-###  `WrappedValue` \n+###  `WrappedValue`\n \n The purpose of `WrappedValue` is to allow the same object instance to be treated as different for the purposes of change detection.\n It is commonly used with the `async` pipe in the case where the `Observable` produces the same instance of the value.\n@@ -487,7 +489,7 @@ No replacement is planned for this deprecation.\n \n If you rely on the behavior that the same object instance should cause change detection, you have two options:\n - Clone the resulting value so that it has a new identity.\n-- Explicitly call [`ChangeDetectorRef.detectChanges()`](api/core/ChangeDetectorRef#detectchanges) to force the update. \n+- Explicitly call [`ChangeDetectorRef.detectChanges()`](api/core/ChangeDetectorRef#detectchanges) to force the update.\n \n {@a deprecated-cli-flags}\n ## Deprecated CLI APIs and Options"
        },
        {
            "sha": "ca70d13559529ba8427fe3fd01faddd1a4523f7f",
            "filename": "aio/content/guide/testing-components-basics.md",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fguide%2Ftesting-components-basics.md",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fguide%2Ftesting-components-basics.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Ftesting-components-basics.md?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -159,10 +159,10 @@ It also generates an initial test file for the component, `banner-external.compo\n <div class=\"alert is-helpful\">\n \n Because `compileComponents` is asynchronous, it uses\n-the [`async`](api/core/testing/async) utility\n+the [`waitForAsync`](api/core/testing/waitForAsync) utility\n function imported from `@angular/core/testing`.\n \n-Please refer to the [async](guide/testing-components-scenarios#async) section for more details.\n+Please refer to the [waitForAsync](guide/testing-components-scenarios#waitForAsync) section for more details.\n \n </div>\n "
        },
        {
            "sha": "fb0ec07f9ee00e3bffdb74fdd95d442ec3e4258b",
            "filename": "aio/content/guide/testing-components-scenarios.md",
            "status": "modified",
            "additions": 16,
            "deletions": 16,
            "changes": 32,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fguide%2Ftesting-components-scenarios.md",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fguide%2Ftesting-components-scenarios.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Ftesting-components-scenarios.md?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -402,7 +402,7 @@ There is no nested syntax (like a `Promise.then()`) to disrupt the flow of contr\n <div class=\"alert is-helpful\">\n \n Limitation: The `fakeAsync()` function won't work if the test body makes an `XMLHttpRequest` (XHR) call.\n-XHR calls within a test are rare, but if you need to call XHR, see [`async()`](#async), below.\n+XHR calls within a test are rare, but if you need to call XHR, see [`waitForAsync()`](#waitForAsync), below.\n \n </div>\n \n@@ -587,41 +587,41 @@ Then call `detectChanges()` to tell Angular to update the screen.\n \n Then you can assert that the quote element displays the expected text.\n \n-{@a async}\n+{@a waitForAsync}\n \n-#### Async test with _async()_\n+#### Async test with _waitForAsync()_\n \n-To use `async()` functionality, you must import `zone.js/dist/zone-testing` in your test setup file.\n+To use `waitForAsync()` functionality, you must import `zone.js/dist/zone-testing` in your test setup file.\n If you created your project with the Angular CLI, `zone-testing` is already imported in `src/test.ts`.\n \n The `fakeAsync()` utility function has a few limitations.\n In particular, it won't work if the test body makes an `XMLHttpRequest` (XHR) call.\n XHR calls within a test are rare so you can generally stick with [`fakeAsync()`](#fake-async).\n-But if you ever do need to call `XMLHttpRequest`, you'll want to know about `async()`.\n+But if you ever do need to call `XMLHttpRequest`, you'll want to know about `waitForAsync()`.\n \n <div class=\"alert is-helpful\">\n \n The `TestBed.compileComponents()` method (see [below](#compile-components)) calls `XHR`\n to read external template and css files during \"just-in-time\" compilation.\n-Write tests that call `compileComponents()` with the `async()` utility.\n+Write tests that call `compileComponents()` with the `waitForAsync()` utility.\n \n </div>\n \n-Here's the previous `fakeAsync()` test, re-written with the `async()` utility.\n+Here's the previous `fakeAsync()` test, re-written with the `waitForAsync()` utility.\n \n <code-example\n   path=\"testing/src/app/twain/twain.component.spec.ts\"\n   region=\"async-test\">\n </code-example>\n \n-The `async()` utility hides some asynchronous boilerplate by arranging for the tester's code\n+The `waitForAsync()` utility hides some asynchronous boilerplate by arranging for the tester's code\n to run in a special _async test zone_.\n You don't need to pass Jasmine's `done()` into the test and call `done()` because it is `undefined` in promise or observable callbacks.\n \n But the test's asynchronous nature is revealed by the call to `fixture.whenStable()`,\n which breaks the linear flow of control.\n \n-When using an `intervalTimer()` such as `setInterval()` in `async()`, remember to cancel the timer with `clearInterval()` after the test, otherwise the `async()` never ends.\n+When using an `intervalTimer()` such as `setInterval()` in `waitForAsync()`, remember to cancel the timer with `clearInterval()` after the test, otherwise the `waitForAsync()` never ends.\n \n {@a when-stable}\n \n@@ -641,18 +641,18 @@ update the quote element with the expected text.\n \n #### Jasmine _done()_\n \n-While the `async()` and `fakeAsync()` functions greatly\n+While the `waitForAsync()` and `fakeAsync()` functions greatly\n simplify Angular asynchronous testing,\n you can still fall back to the traditional technique\n and pass `it` a function that takes a\n [`done` callback](https://jasmine.github.io/2.0/introduction.html#section-Asynchronous_Support).\n \n-You can't call `done()` in `async()` or `fakeAsync()` functions, because the `done parameter`\n+You can't call `done()` in `waitForAsync()` or `fakeAsync()` functions, because the `done parameter`\n is `undefined`.\n \n Now you are responsible for chaining promises, handling errors, and calling `done()` at the appropriate moments.\n \n-Writing test functions with `done()`, is more cumbersome than `async()`and `fakeAsync()`, but it is occasionally necessary when code involves the `intervalTimer()` like `setInterval`.\n+Writing test functions with `done()`, is more cumbersome than `waitForAsync()`and `fakeAsync()`, but it is occasionally necessary when code involves the `intervalTimer()` like `setInterval`.\n \n Here are two more versions of the previous test, written with `done()`.\n The first one subscribes to the `Observable` exposed to the template by the component's `quote` property.\n@@ -738,7 +738,7 @@ you tell the `TestScheduler` to _flush_ its queue of prepared tasks like this.\n   region=\"test-scheduler-flush\"></code-example>\n \n This step serves a purpose analogous to [tick()](api/core/testing/tick) and `whenStable()` in the\n-earlier `fakeAsync()` and `async()` examples.\n+earlier `fakeAsync()` and `waitForAsync()` examples.\n The balance of the test is the same as those examples.\n \n #### Marble error testing\n@@ -1535,7 +1535,7 @@ You must call `compileComponents()` within an asynchronous test function.\n <div class=\"alert is-critical\">\n \n If you neglect to make the test function async\n-(e.g., forget to use `async()` as described below),\n+(e.g., forget to use `waitForAsync()` as described below),\n you'll see this error message\n \n <code-example language=\"sh\" class=\"code-shell\" hideCopy>\n@@ -1549,7 +1549,7 @@ A typical approach is to divide the setup logic into two separate `beforeEach()`\n 1.  An async `beforeEach()` that compiles the components\n 1.  A synchronous `beforeEach()` that performs the remaining setup.\n \n-To follow this pattern, import the `async()` helper with the other testing symbols.\n+To follow this pattern, import the `waitForAsync()` helper with the other testing symbols.\n \n <code-example\n   path=\"testing/src/app/banner/banner-external.component.spec.ts\"\n@@ -1565,7 +1565,7 @@ Write the first async `beforeEach` like this.\n   region=\"async-before-each\"\n   header=\"app/banner/banner-external.component.spec.ts (async beforeEach)\"></code-example>\n \n-The `async()` helper function takes a parameterless function with the body of the setup.\n+The `waitForAsync()` helper function takes a parameterless function with the body of the setup.\n \n The `TestBed.configureTestingModule()` method returns the `TestBed` class so you can chain\n calls to other `TestBed` static methods such as `compileComponents()`."
        },
        {
            "sha": "0c1b6ddd12925b327e619b5471db521ad316b580",
            "filename": "aio/content/guide/testing-utility-apis.md",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fguide%2Ftesting-utility-apis.md",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fguide%2Ftesting-utility-apis.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Ftesting-utility-apis.md?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -25,7 +25,7 @@ Here's a summary of the stand-alone functions, in order of likely utility:\n     <td>\n \n       Runs the body of a test (`it`) or setup (`beforeEach`) function within a special _async test zone_.\n-      See [discussion above](guide/testing-components-scenarios#async).\n+      See [discussion above](guide/testing-components-scenarios#waitForAsync).\n \n     </td>\n   </tr>"
        },
        {
            "sha": "bf1e9da49ec48fd6aafca64637714b0948f1aa0c",
            "filename": "aio/content/guide/upgrade-setup.md",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fguide%2Fupgrade-setup.md",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/aio%2Fcontent%2Fguide%2Fupgrade-setup.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fupgrade-setup.md?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -306,9 +306,9 @@ If you develop angular locally with `ng serve`, a `websocket` connection is set\n In Windows, by default, one application can only have 6 websocket connections, <a href=\"https://msdn.microsoft.com/library/ee330736%28v=vs.85%29.aspx?f=255&MSPPError=-2147217396#websocket_maxconn\" title=\"MSDN WebSocket settings\">MSDN WebSocket Settings</a>.\n So when IE is refreshed (manually or automatically by `ng serve`), sometimes the websocket does not close properly. When websocket connections exceed the limitations, a `SecurityError` will be thrown. This error will not affect the angular application, you can just restart IE to clear this error, or modify the windows registry to update the limitations.\n \n-## Appendix: Test using `fakeAsync()/async()`\n+## Appendix: Test using `fakeAsync()/waitForAsync()`\n \n-If you use the `fakeAsync()/async()` helper function to run unit tests (for details, read the [Testing guide](guide/testing-components-scenarios#fake-async)), you need to import `zone.js/dist/zone-testing` in your test setup file.\n+If you use the `fakeAsync()/waitForAsync()` helper function to run unit tests (for details, read the [Testing guide](guide/testing-components-scenarios#fake-async)), you need to import `zone.js/dist/zone-testing` in your test setup file.\n \n <div class=\"alert is-important\">\n If you create project with `Angular/CLI`, it is already imported in `src/test.ts`."
        },
        {
            "sha": "8144bc5d303c87ee2756252526f11b16e2eaa11c",
            "filename": "goldens/public-api/core/testing/testing.d.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/goldens%2Fpublic-api%2Fcore%2Ftesting%2Ftesting.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/goldens%2Fpublic-api%2Fcore%2Ftesting%2Ftesting.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fcore%2Ftesting%2Ftesting.d.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,6 +1,7 @@\n /** @codeGenApi */\n export declare const __core_private_testing_placeholder__ = \"\";\n \n+/** @deprecated */\n export declare function async(fn: Function): (done: any) => any;\n \n export declare class ComponentFixture<T> {\n@@ -141,5 +142,7 @@ export declare function tick(millis?: number, tickOptions?: {\n     processNewMacroTasksSynchronously: boolean;\n }): void;\n \n+export declare function waitForAsync(fn: Function): (done: any) => any;\n+\n export declare function withModule(moduleDef: TestModuleMetadata): InjectSetupWrapper;\n export declare function withModule(moduleDef: TestModuleMetadata, fn: Function): () => any;"
        },
        {
            "sha": "bde049e345b64f854c6b2851fc40d2915dbfce10",
            "filename": "integration/cli-hello-world-ivy-compat/src/app/app.component.spec.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 9,
            "changes": 19,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/integration%2Fcli-hello-world-ivy-compat%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/integration%2Fcli-hello-world-ivy-compat%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/integration%2Fcli-hello-world-ivy-compat%2Fsrc%2Fapp%2Fapp.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,13 +1,13 @@\n-import { TestBed, async } from '@angular/core/testing';\n-import { AppComponent } from './app.component';\n+import {TestBed, waitForAsync} from '@angular/core/testing';\n+import {AppComponent} from './app.component';\n \n describe('AppComponent', () => {\n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      declarations: [\n-        AppComponent\n-      ],\n-    }).compileComponents();\n+  beforeEach(waitForAsync(() => {\n+    TestBed\n+        .configureTestingModule({\n+          declarations: [AppComponent],\n+        })\n+        .compileComponents();\n   }));\n \n   it('should create the app', () => {\n@@ -26,6 +26,7 @@ describe('AppComponent', () => {\n     const fixture = TestBed.createComponent(AppComponent);\n     fixture.detectChanges();\n     const compiled = fixture.debugElement.nativeElement;\n-    expect(compiled.querySelector('.content span').textContent).toContain('cli-hello-world-ivy-compat app is running!');\n+    expect(compiled.querySelector('.content span').textContent)\n+        .toContain('cli-hello-world-ivy-compat app is running!');\n   });\n });"
        },
        {
            "sha": "0efa90fe2063cd9a6cb9cbfed80e9a6210742c8a",
            "filename": "integration/cli-hello-world-ivy-minimal/src/app/app.component.spec.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/integration%2Fcli-hello-world-ivy-minimal%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/integration%2Fcli-hello-world-ivy-minimal%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/integration%2Fcli-hello-world-ivy-minimal%2Fsrc%2Fapp%2Fapp.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,13 +1,13 @@\n-import { TestBed, async } from '@angular/core/testing';\n-import { AppComponent } from './app.component';\n+import {TestBed, waitForAsync} from '@angular/core/testing';\n+import {AppComponent} from './app.component';\n \n describe('AppComponent', () => {\n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      declarations: [\n-        AppComponent\n-      ],\n-    }).compileComponents();\n+  beforeEach(waitForAsync(() => {\n+    TestBed\n+        .configureTestingModule({\n+          declarations: [AppComponent],\n+        })\n+        .compileComponents();\n   }));\n \n   it('should create the app', () => {"
        },
        {
            "sha": "3275ebecc72a3cf004b8ab17055ea734f356f4ec",
            "filename": "integration/cli-hello-world-lazy-rollup/src/app/app.component.spec.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 13,
            "changes": 25,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/integration%2Fcli-hello-world-lazy-rollup%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/integration%2Fcli-hello-world-lazy-rollup%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/integration%2Fcli-hello-world-lazy-rollup%2Fsrc%2Fapp%2Fapp.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,17 +1,15 @@\n-import { TestBed, async } from '@angular/core/testing';\n-import { RouterTestingModule } from '@angular/router/testing';\n-import { AppComponent } from './app.component';\n+import {TestBed, waitForAsync} from '@angular/core/testing';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {AppComponent} from './app.component';\n \n describe('AppComponent', () => {\n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      imports: [\n-        RouterTestingModule\n-      ],\n-      declarations: [\n-        AppComponent\n-      ],\n-    }).compileComponents();\n+  beforeEach(waitForAsync(() => {\n+    TestBed\n+        .configureTestingModule({\n+          imports: [RouterTestingModule],\n+          declarations: [AppComponent],\n+        })\n+        .compileComponents();\n   }));\n \n   it('should create the app', () => {\n@@ -30,6 +28,7 @@ describe('AppComponent', () => {\n     const fixture = TestBed.createComponent(AppComponent);\n     fixture.detectChanges();\n     const compiled = fixture.debugElement.nativeElement;\n-    expect(compiled.querySelector('.content span').textContent).toContain('cli-hello-world-lazy-rollup app is running!');\n+    expect(compiled.querySelector('.content span').textContent)\n+        .toContain('cli-hello-world-lazy-rollup app is running!');\n   });\n });"
        },
        {
            "sha": "0bbc645160e24215f03dc00f67ed0802ba14cdfd",
            "filename": "integration/cli-hello-world-lazy/src/app/app.component.spec.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 13,
            "changes": 25,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/integration%2Fcli-hello-world-lazy%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/integration%2Fcli-hello-world-lazy%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/integration%2Fcli-hello-world-lazy%2Fsrc%2Fapp%2Fapp.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,17 +1,15 @@\n-import { TestBed, async } from '@angular/core/testing';\n-import { RouterTestingModule } from '@angular/router/testing';\n-import { AppComponent } from './app.component';\n+import {TestBed, waitForAsync} from '@angular/core/testing';\n+import {RouterTestingModule} from '@angular/router/testing';\n+import {AppComponent} from './app.component';\n \n describe('AppComponent', () => {\n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      imports: [\n-        RouterTestingModule\n-      ],\n-      declarations: [\n-        AppComponent\n-      ],\n-    }).compileComponents();\n+  beforeEach(waitForAsync(() => {\n+    TestBed\n+        .configureTestingModule({\n+          imports: [RouterTestingModule],\n+          declarations: [AppComponent],\n+        })\n+        .compileComponents();\n   }));\n \n   it('should create the app', () => {\n@@ -30,6 +28,7 @@ describe('AppComponent', () => {\n     const fixture = TestBed.createComponent(AppComponent);\n     fixture.detectChanges();\n     const compiled = fixture.debugElement.nativeElement;\n-    expect(compiled.querySelector('.content span').textContent).toContain('cli-hello-world-lazy app is running!');\n+    expect(compiled.querySelector('.content span').textContent)\n+        .toContain('cli-hello-world-lazy app is running!');\n   });\n });"
        },
        {
            "sha": "103a5b5c5b7fd5ae84d792c465bd1bb3012ff3ab",
            "filename": "integration/cli-hello-world/src/app/app.component.spec.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 9,
            "changes": 19,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/integration%2Fcli-hello-world%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/integration%2Fcli-hello-world%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/integration%2Fcli-hello-world%2Fsrc%2Fapp%2Fapp.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,13 +1,13 @@\n-import { TestBed, async } from '@angular/core/testing';\n-import { AppComponent } from './app.component';\n+import {TestBed, waitForAsync} from '@angular/core/testing';\n+import {AppComponent} from './app.component';\n \n describe('AppComponent', () => {\n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      declarations: [\n-        AppComponent\n-      ],\n-    }).compileComponents();\n+  beforeEach(waitForAsync(() => {\n+    TestBed\n+        .configureTestingModule({\n+          declarations: [AppComponent],\n+        })\n+        .compileComponents();\n   }));\n \n   it('should create the app', () => {\n@@ -26,6 +26,7 @@ describe('AppComponent', () => {\n     const fixture = TestBed.createComponent(AppComponent);\n     fixture.detectChanges();\n     const compiled = fixture.debugElement.nativeElement;\n-    expect(compiled.querySelector('.content span').textContent).toContain('cli-hello-world app is running!');\n+    expect(compiled.querySelector('.content span').textContent)\n+        .toContain('cli-hello-world app is running!');\n   });\n });"
        },
        {
            "sha": "1d9ff930df5a70b9911c02619ce1a322f2fa1c90",
            "filename": "integration/ng_update_migrations/src/app/app.component.spec.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/integration%2Fng_update_migrations%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/integration%2Fng_update_migrations%2Fsrc%2Fapp%2Fapp.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/integration%2Fng_update_migrations%2Fsrc%2Fapp%2Fapp.component.spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -1,13 +1,13 @@\n-import { TestBed, async } from '@angular/core/testing';\n-import { AppComponent } from './app.component';\n+import {TestBed, waitForAsync} from '@angular/core/testing';\n+import {AppComponent} from './app.component';\n \n describe('AppComponent', () => {\n-  beforeEach(async(() => {\n-    TestBed.configureTestingModule({\n-      declarations: [\n-        AppComponent\n-      ],\n-    }).compileComponents();\n+  beforeEach(waitForAsync(() => {\n+    TestBed\n+        .configureTestingModule({\n+          declarations: [AppComponent],\n+        })\n+        .compileComponents();\n   }));\n \n   it('should create the app', () => {"
        },
        {
            "sha": "66bd7b93dfe7c5ce276b338b307ee6ee9f8fb1dd",
            "filename": "packages/common/test/directives/ng_class_spec.ts",
            "status": "modified",
            "additions": 31,
            "deletions": 29,
            "changes": 60,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_class_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_class_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_class_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import {Component} from '@angular/core';\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n+import {ComponentFixture, TestBed, waitForAsync} from '@angular/core/testing';\n \n {\n   describe('binding to CSS class list', () => {\n@@ -37,7 +37,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n       });\n     });\n \n-    it('should clean up when the directive is destroyed', async(() => {\n+    it('should clean up when the directive is destroyed', waitForAsync(() => {\n          fixture = createTestComponent('<div *ngFor=\"let item of items\" [ngClass]=\"item\"></div>');\n \n          getComponent().items = [['0']];\n@@ -47,21 +47,22 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n        }));\n \n     describe('expressions evaluating to objects', () => {\n-      it('should add classes specified in an object literal', async(() => {\n+      it('should add classes specified in an object literal', waitForAsync(() => {\n            fixture = createTestComponent('<div [ngClass]=\"{foo: true, bar: false}\"></div>');\n \n            detectChangesAndExpectClassName('foo');\n          }));\n \n       it('should add classes specified in an object literal without change in class names',\n-         async(() => {\n+         waitForAsync(() => {\n            fixture =\n                createTestComponent(`<div [ngClass]=\"{'foo-bar': true, 'fooBar': true}\"></div>`);\n \n            detectChangesAndExpectClassName('foo-bar fooBar');\n          }));\n \n-      it('should add and remove classes based on changes in object literal values', async(() => {\n+      it('should add and remove classes based on changes in object literal values',\n+         waitForAsync(() => {\n            fixture =\n                createTestComponent('<div [ngClass]=\"{foo: condition, bar: !condition}\"></div>');\n \n@@ -71,7 +72,8 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n            detectChangesAndExpectClassName('bar');\n          }));\n \n-      it('should add and remove classes based on changes to the expression object', async(() => {\n+      it('should add and remove classes based on changes to the expression object',\n+         waitForAsync(() => {\n            fixture = createTestComponent('<div [ngClass]=\"objExpr\"></div>');\n            const objExpr = getComponent().objExpr;\n \n@@ -88,7 +90,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n          }));\n \n       it('should add and remove classes based on reference changes to the expression object',\n-         async(() => {\n+         waitForAsync(() => {\n            fixture = createTestComponent('<div [ngClass]=\"objExpr\"></div>');\n \n            detectChangesAndExpectClassName('foo');\n@@ -100,7 +102,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n            detectChangesAndExpectClassName('baz');\n          }));\n \n-      it('should remove active classes when expression evaluates to null', async(() => {\n+      it('should remove active classes when expression evaluates to null', waitForAsync(() => {\n            fixture = createTestComponent('<div [ngClass]=\"objExpr\"></div>');\n \n            detectChangesAndExpectClassName('foo');\n@@ -113,7 +115,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n          }));\n \n \n-      it('should allow multiple classes per expression', async(() => {\n+      it('should allow multiple classes per expression', waitForAsync(() => {\n            fixture = createTestComponent('<div [ngClass]=\"objExpr\"></div>');\n \n            getComponent().objExpr = {'bar baz': true, 'bar1 baz1': true};\n@@ -123,7 +125,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n            detectChangesAndExpectClassName('bar1 baz1');\n          }));\n \n-      it('should split by one or more spaces between classes', async(() => {\n+      it('should split by one or more spaces between classes', waitForAsync(() => {\n            fixture = createTestComponent('<div [ngClass]=\"objExpr\"></div>');\n \n            getComponent().objExpr = {'foo bar     baz': true};\n@@ -132,14 +134,14 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n     });\n \n     describe('expressions evaluating to lists', () => {\n-      it('should add classes specified in a list literal', async(() => {\n+      it('should add classes specified in a list literal', waitForAsync(() => {\n            fixture =\n                createTestComponent(`<div [ngClass]=\"['foo', 'bar', 'foo-bar', 'fooBar']\"></div>`);\n \n            detectChangesAndExpectClassName('foo bar foo-bar fooBar');\n          }));\n \n-      it('should add and remove classes based on changes to the expression', async(() => {\n+      it('should add and remove classes based on changes to the expression', waitForAsync(() => {\n            fixture = createTestComponent('<div [ngClass]=\"arrExpr\"></div>');\n            const arrExpr = getComponent().arrExpr;\n            detectChangesAndExpectClassName('foo');\n@@ -154,37 +156,37 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n            detectChangesAndExpectClassName('foo');\n          }));\n \n-      it('should add and remove classes when a reference changes', async(() => {\n+      it('should add and remove classes when a reference changes', waitForAsync(() => {\n            fixture = createTestComponent('<div [ngClass]=\"arrExpr\"></div>');\n            detectChangesAndExpectClassName('foo');\n \n            getComponent().arrExpr = ['bar'];\n            detectChangesAndExpectClassName('bar');\n          }));\n \n-      it('should take initial classes into account when a reference changes', async(() => {\n+      it('should take initial classes into account when a reference changes', waitForAsync(() => {\n            fixture = createTestComponent('<div class=\"foo\" [ngClass]=\"arrExpr\"></div>');\n            detectChangesAndExpectClassName('foo');\n \n            getComponent().arrExpr = ['bar'];\n            detectChangesAndExpectClassName('foo bar');\n          }));\n \n-      it('should ignore empty or blank class names', async(() => {\n+      it('should ignore empty or blank class names', waitForAsync(() => {\n            fixture = createTestComponent('<div class=\"foo\" [ngClass]=\"arrExpr\"></div>');\n            getComponent().arrExpr = ['', '  '];\n            detectChangesAndExpectClassName('foo');\n          }));\n \n-      it('should trim blanks from class names', async(() => {\n+      it('should trim blanks from class names', waitForAsync(() => {\n            fixture = createTestComponent('<div class=\"foo\" [ngClass]=\"arrExpr\"></div>');\n \n            getComponent().arrExpr = [' bar  '];\n            detectChangesAndExpectClassName('foo bar');\n          }));\n \n \n-      it('should allow multiple classes per item in arrays', async(() => {\n+      it('should allow multiple classes per item in arrays', waitForAsync(() => {\n            fixture = createTestComponent('<div [ngClass]=\"arrExpr\"></div>');\n \n            getComponent().arrExpr = ['foo bar baz', 'foo1 bar1   baz1'];\n@@ -203,7 +205,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n     });\n \n     describe('expressions evaluating to sets', () => {\n-      it('should add and remove classes if the set instance changed', async(() => {\n+      it('should add and remove classes if the set instance changed', waitForAsync(() => {\n            fixture = createTestComponent('<div [ngClass]=\"setExpr\"></div>');\n            let setExpr = new Set<string>();\n            setExpr.add('bar');\n@@ -218,12 +220,12 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n     });\n \n     describe('expressions evaluating to string', () => {\n-      it('should add classes specified in a string literal', async(() => {\n+      it('should add classes specified in a string literal', waitForAsync(() => {\n            fixture = createTestComponent(`<div [ngClass]=\"'foo bar foo-bar fooBar'\"></div>`);\n            detectChangesAndExpectClassName('foo bar foo-bar fooBar');\n          }));\n \n-      it('should add and remove classes based on changes to the expression', async(() => {\n+      it('should add and remove classes based on changes to the expression', waitForAsync(() => {\n            fixture = createTestComponent('<div [ngClass]=\"strExpr\"></div>');\n            detectChangesAndExpectClassName('foo');\n \n@@ -235,7 +237,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n            detectChangesAndExpectClassName('baz');\n          }));\n \n-      it('should remove active classes when switching from string to null', async(() => {\n+      it('should remove active classes when switching from string to null', waitForAsync(() => {\n            fixture = createTestComponent(`<div [ngClass]=\"strExpr\"></div>`);\n            detectChangesAndExpectClassName('foo');\n \n@@ -244,23 +246,23 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n          }));\n \n       it('should take initial classes into account when switching from string to null',\n-         async(() => {\n+         waitForAsync(() => {\n            fixture = createTestComponent(`<div class=\"foo\" [ngClass]=\"strExpr\"></div>`);\n            detectChangesAndExpectClassName('foo');\n \n            getComponent().strExpr = null;\n            detectChangesAndExpectClassName('foo');\n          }));\n \n-      it('should ignore empty and blank strings', async(() => {\n+      it('should ignore empty and blank strings', waitForAsync(() => {\n            fixture = createTestComponent(`<div class=\"foo\" [ngClass]=\"strExpr\"></div>`);\n            getComponent().strExpr = '';\n            detectChangesAndExpectClassName('foo');\n          }));\n     });\n \n     describe('cooperation with other class-changing constructs', () => {\n-      it('should co-operate with the class attribute', async(() => {\n+      it('should co-operate with the class attribute', waitForAsync(() => {\n            fixture = createTestComponent('<div [ngClass]=\"objExpr\" class=\"init foo\"></div>');\n            const objExpr = getComponent().objExpr;\n \n@@ -274,7 +276,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n            detectChangesAndExpectClassName('init foo');\n          }));\n \n-      it('should co-operate with the interpolated class attribute', async(() => {\n+      it('should co-operate with the interpolated class attribute', waitForAsync(() => {\n            fixture = createTestComponent(`<div [ngClass]=\"objExpr\" class=\"{{'init foo'}}\"></div>`);\n            const objExpr = getComponent().objExpr;\n \n@@ -289,7 +291,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n          }));\n \n       it('should co-operate with the interpolated class attribute when interpolation changes',\n-         async(() => {\n+         waitForAsync(() => {\n            fixture = createTestComponent(\n                `<div [ngClass]=\"{large: false, small: true}\" class=\"{{strExpr}}\"></div>`);\n \n@@ -299,7 +301,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n            detectChangesAndExpectClassName(`bar small`);\n          }));\n \n-      it('should co-operate with the class attribute and binding to it', async(() => {\n+      it('should co-operate with the class attribute and binding to it', waitForAsync(() => {\n            fixture =\n                createTestComponent(`<div [ngClass]=\"objExpr\" class=\"init\" [class]=\"'foo'\"></div>`);\n            const objExpr = getComponent().objExpr;\n@@ -314,7 +316,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n            detectChangesAndExpectClassName(`init foo`);\n          }));\n \n-      it('should co-operate with the class attribute and class.name binding', async(() => {\n+      it('should co-operate with the class attribute and class.name binding', waitForAsync(() => {\n            const template =\n                '<div class=\"init foo\" [ngClass]=\"objExpr\" [class.baz]=\"condition\"></div>';\n            fixture = createTestComponent(template);\n@@ -333,7 +335,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n          }));\n \n       it('should co-operate with initial class and class attribute binding when binding changes',\n-         async(() => {\n+         waitForAsync(() => {\n            const template = '<div class=\"init\" [ngClass]=\"objExpr\" [class]=\"strExpr\"></div>';\n            fixture = createTestComponent(template);\n            const cmp = getComponent();"
        },
        {
            "sha": "c611247823e6a4bf19519184c17f11216ad11f4d",
            "filename": "packages/common/test/directives/ng_component_outlet_spec.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 13,
            "changes": 26,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_component_outlet_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_component_outlet_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_component_outlet_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -9,15 +9,15 @@\n import {CommonModule} from '@angular/common';\n import {NgComponentOutlet} from '@angular/common/src/directives/ng_component_outlet';\n import {Compiler, Component, ComponentRef, Inject, InjectionToken, Injector, NgModule, NgModuleFactory, NO_ERRORS_SCHEMA, Optional, QueryList, TemplateRef, Type, ViewChild, ViewChildren, ViewContainerRef} from '@angular/core';\n-import {async, TestBed} from '@angular/core/testing';\n+import {TestBed, waitForAsync} from '@angular/core/testing';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n \n describe('insert/remove', () => {\n   beforeEach(() => {\n     TestBed.configureTestingModule({imports: [TestModule]});\n   });\n \n-  it('should do nothing if component is null', async(() => {\n+  it('should do nothing if component is null', waitForAsync(() => {\n        const template = `<ng-template *ngComponentOutlet=\"currentComponent\"></ng-template>`;\n        TestBed.overrideComponent(TestComponent, {set: {template: template}});\n        let fixture = TestBed.createComponent(TestComponent);\n@@ -28,7 +28,7 @@ describe('insert/remove', () => {\n        expect(fixture.nativeElement).toHaveText('');\n      }));\n \n-  it('should insert content specified by a component', async(() => {\n+  it('should insert content specified by a component', waitForAsync(() => {\n        let fixture = TestBed.createComponent(TestComponent);\n \n        fixture.detectChanges();\n@@ -40,7 +40,7 @@ describe('insert/remove', () => {\n        expect(fixture.nativeElement).toHaveText('foo');\n      }));\n \n-  it('should emit a ComponentRef once a component was created', async(() => {\n+  it('should emit a ComponentRef once a component was created', waitForAsync(() => {\n        let fixture = TestBed.createComponent(TestComponent);\n \n        fixture.detectChanges();\n@@ -56,7 +56,7 @@ describe('insert/remove', () => {\n      }));\n \n \n-  it('should clear view if component becomes null', async(() => {\n+  it('should clear view if component becomes null', waitForAsync(() => {\n        let fixture = TestBed.createComponent(TestComponent);\n \n        fixture.detectChanges();\n@@ -74,7 +74,7 @@ describe('insert/remove', () => {\n      }));\n \n \n-  it('should swap content if component changes', async(() => {\n+  it('should swap content if component changes', waitForAsync(() => {\n        let fixture = TestBed.createComponent(TestComponent);\n \n        fixture.detectChanges();\n@@ -91,7 +91,7 @@ describe('insert/remove', () => {\n        expect(fixture.nativeElement).toHaveText('bar');\n      }));\n \n-  it('should use the injector, if one supplied', async(() => {\n+  it('should use the injector, if one supplied', waitForAsync(() => {\n        let fixture = TestBed.createComponent(TestComponent);\n \n        const uniqueValue = {};\n@@ -107,7 +107,7 @@ describe('insert/remove', () => {\n      }));\n \n \n-  it('should resolve with an injector', async(() => {\n+  it('should resolve with an injector', waitForAsync(() => {\n        let fixture = TestBed.createComponent(TestComponent);\n \n        // We are accessing a ViewChild (ngComponentOutlet) before change detection has run\n@@ -120,7 +120,7 @@ describe('insert/remove', () => {\n        expect(cmpRef.instance.testToken).toBeNull();\n      }));\n \n-  it('should render projectable nodes, if supplied', async(() => {\n+  it('should render projectable nodes, if supplied', waitForAsync(() => {\n        const template = `<ng-template>projected foo</ng-template>${TEST_CMP_TEMPLATE}`;\n        TestBed.overrideComponent(TestComponent, {set: {template: template}})\n            .configureTestingModule({schemas: [NO_ERRORS_SCHEMA]});\n@@ -144,7 +144,7 @@ describe('insert/remove', () => {\n        expect(fixture.nativeElement).toHaveText('projected foo');\n      }));\n \n-  it('should resolve components from other modules, if supplied', async(() => {\n+  it('should resolve components from other modules, if supplied', waitForAsync(() => {\n        const compiler = TestBed.inject(Compiler);\n        let fixture = TestBed.createComponent(TestComponent);\n \n@@ -158,7 +158,7 @@ describe('insert/remove', () => {\n        expect(fixture.nativeElement).toHaveText('baz');\n      }));\n \n-  it('should clean up moduleRef, if supplied', async(() => {\n+  it('should clean up moduleRef, if supplied', waitForAsync(() => {\n        let destroyed = false;\n        const compiler = TestBed.inject(Compiler);\n        const fixture = TestBed.createComponent(TestComponent);\n@@ -174,7 +174,7 @@ describe('insert/remove', () => {\n        expect(moduleRef.destroy).toHaveBeenCalled();\n      }));\n \n-  it('should not re-create moduleRef when it didn\\'t actually change', async(() => {\n+  it('should not re-create moduleRef when it didn\\'t actually change', waitForAsync(() => {\n        const compiler = TestBed.inject(Compiler);\n        const fixture = TestBed.createComponent(TestComponent);\n \n@@ -191,7 +191,7 @@ describe('insert/remove', () => {\n        expect(moduleRef).toBe(fixture.componentInstance.ngComponentOutlet['_moduleRef']);\n      }));\n \n-  it('should re-create moduleRef when changed', async(() => {\n+  it('should re-create moduleRef when changed', waitForAsync(() => {\n        const compiler = TestBed.inject(Compiler);\n        const fixture = TestBed.createComponent(TestComponent);\n        fixture.componentInstance.module = compiler.compileModuleSync(TestModule2);"
        },
        {
            "sha": "549010ff8aee80d7b6a2ce05944fc6d25398b9ee",
            "filename": "packages/common/test/directives/ng_for_spec.ts",
            "status": "modified",
            "additions": 35,
            "deletions": 32,
            "changes": 67,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_for_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_for_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_for_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -8,7 +8,7 @@\n \n import {CommonModule} from '@angular/common';\n import {Component} from '@angular/core';\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n+import {ComponentFixture, TestBed, waitForAsync} from '@angular/core/testing';\n import {By} from '@angular/platform-browser/src/dom/debug/by';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n \n@@ -38,35 +38,35 @@ let thisArg: any;\n       });\n     });\n \n-    it('should reflect initial elements', async(() => {\n+    it('should reflect initial elements', waitForAsync(() => {\n          fixture = createTestComponent();\n \n          detectChangesAndExpectText('1;2;');\n        }));\n \n-    it('should reflect added elements', async(() => {\n+    it('should reflect added elements', waitForAsync(() => {\n          fixture = createTestComponent();\n          fixture.detectChanges();\n          getComponent().items.push(3);\n          detectChangesAndExpectText('1;2;3;');\n        }));\n \n-    it('should reflect removed elements', async(() => {\n+    it('should reflect removed elements', waitForAsync(() => {\n          fixture = createTestComponent();\n          fixture.detectChanges();\n          getComponent().items.splice(1, 1);\n          detectChangesAndExpectText('1;');\n        }));\n \n-    it('should reflect moved elements', async(() => {\n+    it('should reflect moved elements', waitForAsync(() => {\n          fixture = createTestComponent();\n          fixture.detectChanges();\n          getComponent().items.splice(0, 1);\n          getComponent().items.push(1);\n          detectChangesAndExpectText('2;1;');\n        }));\n \n-    it('should reflect a mix of all changes (additions/removals/moves)', async(() => {\n+    it('should reflect a mix of all changes (additions/removals/moves)', waitForAsync(() => {\n          fixture = createTestComponent();\n \n          getComponent().items = [0, 1, 2, 3, 4, 5];\n@@ -77,7 +77,7 @@ let thisArg: any;\n          detectChangesAndExpectText('6;2;7;0;4;8;');\n        }));\n \n-    it('should iterate over an array of objects', async(() => {\n+    it('should iterate over an array of objects', waitForAsync(() => {\n          const template = '<ul><li *ngFor=\"let item of items\">{{item[\"name\"]}};</li></ul>';\n          fixture = createTestComponent(template);\n \n@@ -95,14 +95,14 @@ let thisArg: any;\n          detectChangesAndExpectText('shyam;');\n        }));\n \n-    it('should gracefully handle nulls', async(() => {\n+    it('should gracefully handle nulls', waitForAsync(() => {\n          const template = '<ul><li *ngFor=\"let item of null\">{{item}};</li></ul>';\n          fixture = createTestComponent(template);\n \n          detectChangesAndExpectText('');\n        }));\n \n-    it('should gracefully handle ref changing to null and back', async(() => {\n+    it('should gracefully handle ref changing to null and back', waitForAsync(() => {\n          fixture = createTestComponent();\n \n          detectChangesAndExpectText('1;2;');\n@@ -114,7 +114,7 @@ let thisArg: any;\n          detectChangesAndExpectText('1;2;3;');\n        }));\n \n-    it('should throw on non-iterable ref and suggest using an array', async(() => {\n+    it('should throw on non-iterable ref and suggest using an array', waitForAsync(() => {\n          fixture = createTestComponent();\n \n          getComponent().items = <any>'whaaa';\n@@ -123,7 +123,7 @@ let thisArg: any;\n                  /Cannot find a differ supporting object 'whaaa' of type 'string'. NgFor only supports binding to Iterables such as Arrays/);\n        }));\n \n-    it('should throw on ref changing to string', async(() => {\n+    it('should throw on ref changing to string', waitForAsync(() => {\n          fixture = createTestComponent();\n \n          detectChangesAndExpectText('1;2;');\n@@ -132,15 +132,15 @@ let thisArg: any;\n          expect(() => fixture.detectChanges()).toThrowError();\n        }));\n \n-    it('should works with duplicates', async(() => {\n+    it('should works with duplicates', waitForAsync(() => {\n          fixture = createTestComponent();\n \n          const a = new Foo();\n          getComponent().items = [a, a];\n          detectChangesAndExpectText('foo;foo;');\n        }));\n \n-    it('should repeat over nested arrays', async(() => {\n+    it('should repeat over nested arrays', waitForAsync(() => {\n          const template = '<div *ngFor=\"let item of items\">' +\n              '<div *ngFor=\"let subitem of item\">{{subitem}}-{{item.length}};</div>|' +\n              '</div>';\n@@ -153,7 +153,7 @@ let thisArg: any;\n          detectChangesAndExpectText('e-1;|f-2;g-2;|');\n        }));\n \n-    it('should repeat over nested arrays with no intermediate element', async(() => {\n+    it('should repeat over nested arrays with no intermediate element', waitForAsync(() => {\n          const template = '<div *ngFor=\"let item of items\">' +\n              '<div *ngFor=\"let subitem of item\">{{subitem}}-{{item.length}};</div>' +\n              '</div>';\n@@ -166,7 +166,8 @@ let thisArg: any;\n          detectChangesAndExpectText('e-1;f-2;g-2;');\n        }));\n \n-    it('should repeat over nested ngIf that are the last node in the ngFor template', async(() => {\n+    it('should repeat over nested ngIf that are the last node in the ngFor template',\n+       waitForAsync(() => {\n          const template = `<div *ngFor=\"let item of items; let i=index\">` +\n              `<div>{{i}}|</div>` +\n              `<div *ngIf=\"i % 2 == 0\">even|</div>` +\n@@ -185,7 +186,7 @@ let thisArg: any;\n          detectChangesAndExpectText('0|even|1|2|even|');\n        }));\n \n-    it('should allow of saving the collection', async(() => {\n+    it('should allow of saving the collection', waitForAsync(() => {\n          const template =\n              '<ul><li *ngFor=\"let item of items as collection; index as i\">{{i}}/{{collection.length}} - {{item}};</li></ul>';\n          fixture = createTestComponent(template);\n@@ -196,7 +197,7 @@ let thisArg: any;\n          detectChangesAndExpectText('0/3 - 1;1/3 - 2;2/3 - 3;');\n        }));\n \n-    it('should display indices correctly', async(() => {\n+    it('should display indices correctly', waitForAsync(() => {\n          const template = '<span *ngFor =\"let item of items; let i=index\">{{i.toString()}}</span>';\n          fixture = createTestComponent(template);\n \n@@ -207,7 +208,7 @@ let thisArg: any;\n          detectChangesAndExpectText('0123456789');\n        }));\n \n-    it('should display count correctly', async(() => {\n+    it('should display count correctly', waitForAsync(() => {\n          const template = '<span *ngFor=\"let item of items; let len=count\">{{len}}</span>';\n          fixture = createTestComponent(template);\n \n@@ -218,7 +219,7 @@ let thisArg: any;\n          detectChangesAndExpectText('666666');\n        }));\n \n-    it('should display first item correctly', async(() => {\n+    it('should display first item correctly', waitForAsync(() => {\n          const template =\n              '<span *ngFor=\"let item of items; let isFirst=first\">{{isFirst.toString()}}</span>';\n          fixture = createTestComponent(template);\n@@ -230,7 +231,7 @@ let thisArg: any;\n          detectChangesAndExpectText('truefalse');\n        }));\n \n-    it('should display last item correctly', async(() => {\n+    it('should display last item correctly', waitForAsync(() => {\n          const template =\n              '<span *ngFor=\"let item of items; let isLast=last\">{{isLast.toString()}}</span>';\n          fixture = createTestComponent(template);\n@@ -242,7 +243,7 @@ let thisArg: any;\n          detectChangesAndExpectText('falsetrue');\n        }));\n \n-    it('should display even items correctly', async(() => {\n+    it('should display even items correctly', waitForAsync(() => {\n          const template =\n              '<span *ngFor=\"let item of items; let isEven=even\">{{isEven.toString()}}</span>';\n          fixture = createTestComponent(template);\n@@ -254,7 +255,7 @@ let thisArg: any;\n          detectChangesAndExpectText('truefalse');\n        }));\n \n-    it('should display odd items correctly', async(() => {\n+    it('should display odd items correctly', waitForAsync(() => {\n          const template =\n              '<span *ngFor=\"let item of items; let isOdd=odd\">{{isOdd.toString()}}</span>';\n          fixture = createTestComponent(template);\n@@ -266,7 +267,7 @@ let thisArg: any;\n          detectChangesAndExpectText('falsetrue');\n        }));\n \n-    it('should allow to use a custom template', async(() => {\n+    it('should allow to use a custom template', waitForAsync(() => {\n          const template =\n              '<ng-container *ngFor=\"let item of items; template: tpl\"></ng-container>' +\n              '<ng-template let-item let-i=\"index\" #tpl><p>{{i}}: {{item}};</p></ng-template>';\n@@ -276,7 +277,7 @@ let thisArg: any;\n          detectChangesAndExpectText('0: a;1: b;2: c;');\n        }));\n \n-    it('should use a default template if a custom one is null', async(() => {\n+    it('should use a default template if a custom one is null', waitForAsync(() => {\n          const template =\n              `<ul><ng-container *ngFor=\"let item of items; template: null; let i=index\">{{i}}: {{item}};</ng-container></ul>`;\n          fixture = createTestComponent(template);\n@@ -285,7 +286,8 @@ let thisArg: any;\n          detectChangesAndExpectText('0: a;1: b;2: c;');\n        }));\n \n-    it('should use a custom template when both default and a custom one are present', async(() => {\n+    it('should use a custom template when both default and a custom one are present',\n+       waitForAsync(() => {\n          const template =\n              '<ng-container *ngFor=\"let item of items; template: tpl\">{{i}};</ng-container>' +\n              '<ng-template let-item let-i=\"index\" #tpl>{{i}}: {{item}};</ng-template>';\n@@ -296,15 +298,15 @@ let thisArg: any;\n        }));\n \n     describe('track by', () => {\n-      it('should console.warn if trackBy is not a function', async(() => {\n+      it('should console.warn if trackBy is not a function', waitForAsync(() => {\n            // TODO(vicb): expect a warning message when we have a proper log service\n            const template = `<p *ngFor=\"let item of items; trackBy: value\"></p>`;\n            fixture = createTestComponent(template);\n            fixture.componentInstance.value = 0;\n            fixture.detectChanges();\n          }));\n \n-      it('should track by identity when trackBy is to `null` or `undefined`', async(() => {\n+      it('should track by identity when trackBy is to `null` or `undefined`', waitForAsync(() => {\n            // TODO(vicb): expect no warning message when we have a proper log service\n            const template = `<p *ngFor=\"let item of items; trackBy: value\">{{ item }}</p>`;\n            fixture = createTestComponent(template);\n@@ -315,7 +317,7 @@ let thisArg: any;\n            detectChangesAndExpectText('abc');\n          }));\n \n-      it('should set the context to the component instance', async(() => {\n+      it('should set the context to the component instance', waitForAsync(() => {\n            const template =\n                `<p *ngFor=\"let item of items; trackBy: trackByContext.bind(this)\"></p>`;\n            fixture = createTestComponent(template);\n@@ -325,7 +327,7 @@ let thisArg: any;\n            expect(thisArg).toBe(getComponent());\n          }));\n \n-      it('should not replace tracked items', async(() => {\n+      it('should not replace tracked items', waitForAsync(() => {\n            const template =\n                `<p *ngFor=\"let item of items; trackBy: trackById; let i=index\">{{items[i]}}</p>`;\n            fixture = createTestComponent(template);\n@@ -341,7 +343,7 @@ let thisArg: any;\n            expect(finalP.nativeElement).toBe(firstP.nativeElement);\n          }));\n \n-      it('should update implicit local variable on view', async(() => {\n+      it('should update implicit local variable on view', waitForAsync(() => {\n            const template =\n                `<div *ngFor=\"let item of items; trackBy: trackById\">{{item['color']}}</div>`;\n            fixture = createTestComponent(template);\n@@ -353,7 +355,7 @@ let thisArg: any;\n            detectChangesAndExpectText('red');\n          }));\n \n-      it('should move items around and keep them updated ', async(() => {\n+      it('should move items around and keep them updated ', waitForAsync(() => {\n            const template =\n                `<div *ngFor=\"let item of items; trackBy: trackById\">{{item['color']}}</div>`;\n            fixture = createTestComponent(template);\n@@ -365,7 +367,8 @@ let thisArg: any;\n            detectChangesAndExpectText('orangered');\n          }));\n \n-      it('should handle added and removed items properly when tracking by index', async(() => {\n+      it('should handle added and removed items properly when tracking by index',\n+         waitForAsync(() => {\n            const template = `<div *ngFor=\"let item of items; trackBy: trackByIndex\">{{item}}</div>`;\n            fixture = createTestComponent(template);\n "
        },
        {
            "sha": "01f5d1e5a198f17726525035796de248c9d72036",
            "filename": "packages/common/test/directives/ng_if_spec.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 14,
            "changes": 29,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_if_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_if_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_if_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -8,7 +8,7 @@\n \n import {CommonModule, getDOM as getDOM} from '@angular/common';\n import {Component} from '@angular/core';\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n+import {ComponentFixture, TestBed, waitForAsync} from '@angular/core/testing';\n import {By} from '@angular/platform-browser/src/dom/debug/by';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n \n@@ -31,22 +31,22 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n       });\n     });\n \n-    it('should work in a template attribute', async(() => {\n+    it('should work in a template attribute', waitForAsync(() => {\n          const template = '<span *ngIf=\"booleanCondition\">hello</span>';\n          fixture = createTestComponent(template);\n          fixture.detectChanges();\n          expect(fixture.debugElement.queryAll(By.css('span')).length).toEqual(1);\n          expect(fixture.nativeElement).toHaveText('hello');\n        }));\n \n-    it('should work on a template element', async(() => {\n+    it('should work on a template element', waitForAsync(() => {\n          const template = '<ng-template [ngIf]=\"booleanCondition\">hello2</ng-template>';\n          fixture = createTestComponent(template);\n          fixture.detectChanges();\n          expect(fixture.nativeElement).toHaveText('hello2');\n        }));\n \n-    it('should toggle node when condition changes', async(() => {\n+    it('should toggle node when condition changes', waitForAsync(() => {\n          const template = '<span *ngIf=\"booleanCondition\">hello</span>';\n          fixture = createTestComponent(template);\n          getComponent().booleanCondition = false;\n@@ -65,7 +65,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n          expect(fixture.nativeElement).toHaveText('');\n        }));\n \n-    it('should handle nested if correctly', async(() => {\n+    it('should handle nested if correctly', waitForAsync(() => {\n          const template =\n              '<div *ngIf=\"booleanCondition\"><span *ngIf=\"nestedBooleanCondition\">hello</span></div>';\n \n@@ -97,7 +97,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n          expect(fixture.nativeElement).toHaveText('');\n        }));\n \n-    it('should update several nodes with if', async(() => {\n+    it('should update several nodes with if', waitForAsync(() => {\n          const template = '<span *ngIf=\"numberCondition + 1 >= 2\">helloNumber</span>' +\n              '<span *ngIf=\"stringCondition == \\'foo\\'\">helloString</span>' +\n              '<span *ngIf=\"functionCondition(stringCondition, numberCondition)\">helloFunction</span>';\n@@ -120,7 +120,8 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n          expect(fixture.nativeElement).toHaveText('helloNumber');\n        }));\n \n-    it('should not add the element twice if the condition goes from truthy to truthy', async(() => {\n+    it('should not add the element twice if the condition goes from truthy to truthy',\n+       waitForAsync(() => {\n          const template = '<span *ngIf=\"numberCondition\">hello</span>';\n \n          fixture = createTestComponent(template);\n@@ -141,7 +142,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n        }));\n \n     describe('then/else templates', () => {\n-      it('should support else', async(() => {\n+      it('should support else', waitForAsync(() => {\n            const template = '<span *ngIf=\"booleanCondition; else elseBlock\">TRUE</span>' +\n                '<ng-template #elseBlock>FALSE</ng-template>';\n \n@@ -155,7 +156,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n            expect(fixture.nativeElement).toHaveText('FALSE');\n          }));\n \n-      it('should support then and else', async(() => {\n+      it('should support then and else', waitForAsync(() => {\n            const template =\n                '<span *ngIf=\"booleanCondition; then thenBlock; else elseBlock\">IGNORE</span>' +\n                '<ng-template #thenBlock>THEN</ng-template>' +\n@@ -202,7 +203,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n         expect(fixture.nativeElement).toHaveText('');\n       });\n \n-      it('should support dynamic else', async(() => {\n+      it('should support dynamic else', waitForAsync(() => {\n            const template =\n                '<span *ngIf=\"booleanCondition; else nestedBooleanCondition ? b1 : b2\">TRUE</span>' +\n                '<ng-template #b1>FALSE1</ng-template>' +\n@@ -222,7 +223,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n            expect(fixture.nativeElement).toHaveText('FALSE2');\n          }));\n \n-      it('should support binding to variable using let', async(() => {\n+      it('should support binding to variable using let', waitForAsync(() => {\n            const template = '<span *ngIf=\"booleanCondition; else elseBlock; let v\">{{v}}</span>' +\n                '<ng-template #elseBlock let-v>{{v}}</ng-template>';\n \n@@ -236,7 +237,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n            expect(fixture.nativeElement).toHaveText('false');\n          }));\n \n-      it('should support binding to variable using as', async(() => {\n+      it('should support binding to variable using as', waitForAsync(() => {\n            const template = '<span *ngIf=\"booleanCondition as v; else elseBlock\">{{v}}</span>' +\n                '<ng-template #elseBlock let-v>{{v}}</ng-template>';\n \n@@ -252,7 +253,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n     });\n \n     describe('Type guarding', () => {\n-      it('should throw when then block is not template', async(() => {\n+      it('should throw when then block is not template', waitForAsync(() => {\n            const template = '<span *ngIf=\"booleanCondition; then thenBlock\">IGNORE</span>' +\n                '<div #thenBlock>THEN</div>';\n \n@@ -262,7 +263,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n                .toThrowError(/ngIfThen must be a TemplateRef, but received/);\n          }));\n \n-      it('should throw when else block is not template', async(() => {\n+      it('should throw when else block is not template', waitForAsync(() => {\n            const template = '<span *ngIf=\"booleanCondition; else elseBlock\">IGNORE</span>' +\n                '<div #elseBlock>ELSE</div>';\n "
        },
        {
            "sha": "7d6ab992950357633e604e23075541e5c6841126",
            "filename": "packages/common/test/directives/ng_plural_spec.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_plural_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_plural_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_plural_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -8,7 +8,7 @@\n \n import {CommonModule, NgLocalization} from '@angular/common';\n import {Component, Injectable} from '@angular/core';\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n+import {ComponentFixture, TestBed, waitForAsync} from '@angular/core/testing';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n \n {\n@@ -36,7 +36,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n       });\n     });\n \n-    it('should display the template according to the exact value', async(() => {\n+    it('should display the template according to the exact value', waitForAsync(() => {\n          const template = '<ul [ngPlural]=\"switchValue\">' +\n              '<ng-template ngPluralCase=\"=0\"><li>you have no messages.</li></ng-template>' +\n              '<ng-template ngPluralCase=\"=1\"><li>you have one message.</li></ng-template>' +\n@@ -51,7 +51,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n          detectChangesAndExpectText('you have one message.');\n        }));\n \n-    it('should display the template according to the exact numeric value', async(() => {\n+    it('should display the template according to the exact numeric value', waitForAsync(() => {\n          const template = '<div>' +\n              '<ul [ngPlural]=\"switchValue\">' +\n              '<ng-template ngPluralCase=\"0\"><li>you have no messages.</li></ng-template>' +\n@@ -69,7 +69,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n \n     // https://github.com/angular/angular/issues/9868\n     // https://github.com/angular/angular/issues/9882\n-    it('should not throw when ngPluralCase contains expressions', async(() => {\n+    it('should not throw when ngPluralCase contains expressions', waitForAsync(() => {\n          const template = '<ul [ngPlural]=\"switchValue\">' +\n              '<ng-template ngPluralCase=\"=0\"><li>{{ switchValue }}</li></ng-template>' +\n              '</ul>';\n@@ -81,7 +81,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n        }));\n \n \n-    it('should be applicable to <ng-container> elements', async(() => {\n+    it('should be applicable to <ng-container> elements', waitForAsync(() => {\n          const template = '<ng-container [ngPlural]=\"switchValue\">' +\n              '<ng-template ngPluralCase=\"=0\">you have no messages.</ng-template>' +\n              '<ng-template ngPluralCase=\"=1\">you have one message.</ng-template>' +\n@@ -96,7 +96,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n          detectChangesAndExpectText('you have one message.');\n        }));\n \n-    it('should display the template according to the category', async(() => {\n+    it('should display the template according to the category', waitForAsync(() => {\n          const template = '<ul [ngPlural]=\"switchValue\">' +\n              '<ng-template ngPluralCase=\"few\"><li>you have a few messages.</li></ng-template>' +\n              '<ng-template ngPluralCase=\"many\"><li>you have many messages.</li></ng-template>' +\n@@ -111,7 +111,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n          detectChangesAndExpectText('you have many messages.');\n        }));\n \n-    it('should default to other when no matches are found', async(() => {\n+    it('should default to other when no matches are found', waitForAsync(() => {\n          const template = '<ul [ngPlural]=\"switchValue\">' +\n              '<ng-template ngPluralCase=\"few\"><li>you have a few messages.</li></ng-template>' +\n              '<ng-template ngPluralCase=\"other\"><li>default message.</li></ng-template>' +\n@@ -123,7 +123,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n          detectChangesAndExpectText('default message.');\n        }));\n \n-    it('should prioritize value matches over category matches', async(() => {\n+    it('should prioritize value matches over category matches', waitForAsync(() => {\n          const template = '<ul [ngPlural]=\"switchValue\">' +\n              '<ng-template ngPluralCase=\"few\"><li>you have a few messages.</li></ng-template>' +\n              '<ng-template ngPluralCase=\"=2\">you have two messages.</ng-template>' +"
        },
        {
            "sha": "e9fd9fee8c87af2b2e9946d5344ecc15c17d8d00",
            "filename": "packages/common/test/directives/ng_style_spec.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 10,
            "changes": 20,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_style_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_style_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_style_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -8,7 +8,7 @@\n \n import {CommonModule} from '@angular/common';\n import {Component} from '@angular/core';\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n+import {ComponentFixture, TestBed, waitForAsync} from '@angular/core/testing';\n \n {\n   describe('NgStyle', () => {\n@@ -30,14 +30,14 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n       TestBed.configureTestingModule({declarations: [TestComponent], imports: [CommonModule]});\n     });\n \n-    it('should add styles specified in an object literal', async(() => {\n+    it('should add styles specified in an object literal', waitForAsync(() => {\n          const template = `<div [ngStyle]=\"{'max-width': '40px'}\"></div>`;\n          fixture = createTestComponent(template);\n          fixture.detectChanges();\n          expectNativeEl(fixture).toHaveCssStyle({'max-width': '40px'});\n        }));\n \n-    it('should add and change styles specified in an object expression', async(() => {\n+    it('should add and change styles specified in an object expression', waitForAsync(() => {\n          const template = `<div [ngStyle]=\"expr\"></div>`;\n          fixture = createTestComponent(template);\n \n@@ -51,7 +51,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n          expectNativeEl(fixture).toHaveCssStyle({'max-width': '30%'});\n        }));\n \n-    it('should add and remove styles specified using style.unit notation', async(() => {\n+    it('should add and remove styles specified using style.unit notation', waitForAsync(() => {\n          const template = `<div [ngStyle]=\"{'max-width.px': expr}\"></div>`;\n \n          fixture = createTestComponent(template);\n@@ -66,7 +66,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n        }));\n \n     // https://github.com/angular/angular/issues/21064\n-    it('should add and remove styles which names are not dash-cased', async(() => {\n+    it('should add and remove styles which names are not dash-cased', waitForAsync(() => {\n          fixture = createTestComponent(`<div [ngStyle]=\"{'color': expr}\"></div>`);\n \n          getComponent().expr = 'green';\n@@ -78,7 +78,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n          expectNativeEl(fixture).not.toHaveCssStyle('color');\n        }));\n \n-    it('should update styles using style.unit notation when unit changes', async(() => {\n+    it('should update styles using style.unit notation when unit changes', waitForAsync(() => {\n          const template = `<div [ngStyle]=\"expr\"></div>`;\n \n          fixture = createTestComponent(template);\n@@ -93,7 +93,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n        }));\n \n     // keyValueDiffer is sensitive to key order #9115\n-    it('should change styles specified in an object expression', async(() => {\n+    it('should change styles specified in an object expression', waitForAsync(() => {\n          const template = `<div [ngStyle]=\"expr\"></div>`;\n \n          fixture = createTestComponent(template);\n@@ -117,7 +117,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n          expectNativeEl(fixture).toHaveCssStyle({'height': '5px', 'width': '5px'});\n        }));\n \n-    it('should remove styles when deleting a key in an object expression', async(() => {\n+    it('should remove styles when deleting a key in an object expression', waitForAsync(() => {\n          const template = `<div [ngStyle]=\"expr\"></div>`;\n \n          fixture = createTestComponent(template);\n@@ -131,7 +131,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n          expectNativeEl(fixture).not.toHaveCssStyle('max-width');\n        }));\n \n-    it('should co-operate with the style attribute', async(() => {\n+    it('should co-operate with the style attribute', waitForAsync(() => {\n          const template = `<div style=\"font-size: 12px\" [ngStyle]=\"expr\"></div>`;\n \n          fixture = createTestComponent(template);\n@@ -147,7 +147,7 @@ import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n        }));\n \n     it('should co-operate with the style.[styleName]=\"expr\" special-case in the compiler',\n-       async(() => {\n+       waitForAsync(() => {\n          const template = `<div [style.font-size.px]=\"12\" [ngStyle]=\"expr\"></div>`;\n \n          fixture = createTestComponent(template);"
        },
        {
            "sha": "865f8c40daf242f71354a19f73807de83b9c7263",
            "filename": "packages/common/test/directives/ng_template_outlet_spec.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 11,
            "changes": 23,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_template_outlet_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_template_outlet_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Ftest%2Fdirectives%2Fng_template_outlet_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -8,7 +8,7 @@\n \n import {CommonModule} from '@angular/common';\n import {Component, ContentChildren, Directive, Injectable, NO_ERRORS_SCHEMA, OnDestroy, QueryList, TemplateRef} from '@angular/core';\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n+import {ComponentFixture, TestBed, waitForAsync} from '@angular/core/testing';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n \n describe('NgTemplateOutlet', () => {\n@@ -36,28 +36,28 @@ describe('NgTemplateOutlet', () => {\n   });\n \n   // https://github.com/angular/angular/issues/14778\n-  it('should accept the component as the context', async(() => {\n+  it('should accept the component as the context', waitForAsync(() => {\n        const template = `<ng-container *ngTemplateOutlet=\"tpl; context: this\"></ng-container>` +\n            `<ng-template #tpl>{{context.foo}}</ng-template>`;\n \n        fixture = createTestComponent(template);\n        detectChangesAndExpectText('bar');\n      }));\n \n-  it('should do nothing if templateRef is `null`', async(() => {\n+  it('should do nothing if templateRef is `null`', waitForAsync(() => {\n        const template = `<ng-container [ngTemplateOutlet]=\"null\"></ng-container>`;\n        fixture = createTestComponent(template);\n        detectChangesAndExpectText('');\n      }));\n \n-  it('should insert content specified by TemplateRef', async(() => {\n+  it('should insert content specified by TemplateRef', waitForAsync(() => {\n        const template = `<ng-template #tpl>foo</ng-template>` +\n            `<ng-container [ngTemplateOutlet]=\"tpl\"></ng-container>`;\n        fixture = createTestComponent(template);\n        detectChangesAndExpectText('foo');\n      }));\n \n-  it('should clear content if TemplateRef becomes `null`', async(() => {\n+  it('should clear content if TemplateRef becomes `null`', waitForAsync(() => {\n        const template = `<tpl-refs #refs=\"tplRefs\"><ng-template>foo</ng-template></tpl-refs>` +\n            `<ng-container [ngTemplateOutlet]=\"currentTplRef\"></ng-container>`;\n        fixture = createTestComponent(template);\n@@ -71,7 +71,7 @@ describe('NgTemplateOutlet', () => {\n        detectChangesAndExpectText('');\n      }));\n \n-  it('should swap content if TemplateRef changes', async(() => {\n+  it('should swap content if TemplateRef changes', waitForAsync(() => {\n        const template =\n            `<tpl-refs #refs=\"tplRefs\"><ng-template>foo</ng-template><ng-template>bar</ng-template></tpl-refs>` +\n            `<ng-container [ngTemplateOutlet]=\"currentTplRef\"></ng-container>`;\n@@ -87,14 +87,14 @@ describe('NgTemplateOutlet', () => {\n        detectChangesAndExpectText('bar');\n      }));\n \n-  it('should display template if context is `null`', async(() => {\n+  it('should display template if context is `null`', waitForAsync(() => {\n        const template = `<ng-template #tpl>foo</ng-template>` +\n            `<ng-container *ngTemplateOutlet=\"tpl; context: null\"></ng-container>`;\n        fixture = createTestComponent(template);\n        detectChangesAndExpectText('foo');\n      }));\n \n-  it('should reflect initial context and changes', async(() => {\n+  it('should reflect initial context and changes', waitForAsync(() => {\n        const template = `<ng-template let-foo=\"foo\" #tpl>{{foo}}</ng-template>` +\n            `<ng-container *ngTemplateOutlet=\"tpl; context: context\"></ng-container>`;\n        fixture = createTestComponent(template);\n@@ -106,15 +106,15 @@ describe('NgTemplateOutlet', () => {\n        detectChangesAndExpectText('alter-bar');\n      }));\n \n-  it('should reflect user defined `$implicit` property in the context', async(() => {\n+  it('should reflect user defined `$implicit` property in the context', waitForAsync(() => {\n        const template = `<ng-template let-ctx #tpl>{{ctx.foo}}</ng-template>` +\n            `<ng-container *ngTemplateOutlet=\"tpl; context: context\"></ng-container>`;\n        fixture = createTestComponent(template);\n        fixture.componentInstance.context = {$implicit: {foo: 'bra'}};\n        detectChangesAndExpectText('bra');\n      }));\n \n-  it('should reflect context re-binding', async(() => {\n+  it('should reflect context re-binding', waitForAsync(() => {\n        const template = `<ng-template let-shawshank=\"shawshank\" #tpl>{{shawshank}}</ng-template>` +\n            `<ng-container *ngTemplateOutlet=\"tpl; context: context\"></ng-container>`;\n        fixture = createTestComponent(template);\n@@ -222,7 +222,8 @@ describe('NgTemplateOutlet', () => {\n     }).not.toThrow();\n   });\n \n-  it('should not throw when switching from template to null and back to template', async(() => {\n+  it('should not throw when switching from template to null and back to template',\n+     waitForAsync(() => {\n        const template = `<tpl-refs #refs=\"tplRefs\"><ng-template>foo</ng-template></tpl-refs>` +\n            `<ng-container [ngTemplateOutlet]=\"currentTplRef\"></ng-container>`;\n        fixture = createTestComponent(template);"
        },
        {
            "sha": "34ee43177ab4cb3053b2eacdb88f078d85e78731",
            "filename": "packages/common/test/directives/non_bindable_spec.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fdirectives%2Fnon_bindable_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fdirectives%2Fnon_bindable_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Ftest%2Fdirectives%2Fnon_bindable_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -9,7 +9,7 @@\n import {getDOM as getDOM} from '@angular/common';\n import {Component, Directive} from '@angular/core';\n import {ElementRef} from '@angular/core/src/linker/element_ref';\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n+import {ComponentFixture, TestBed, waitForAsync} from '@angular/core/testing';\n import {hasClass} from '@angular/platform-browser/testing/src/browser_util';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n \n@@ -21,15 +21,15 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n       });\n     });\n \n-    it('should not interpolate children', async(() => {\n+    it('should not interpolate children', waitForAsync(() => {\n          const template = '<div>{{text}}<span ngNonBindable>{{text}}</span></div>';\n          const fixture = createTestComponent(template);\n \n          fixture.detectChanges();\n          expect(fixture.nativeElement).toHaveText('foo{{text}}');\n        }));\n \n-    it('should ignore directives on child nodes', async(() => {\n+    it('should ignore directives on child nodes', waitForAsync(() => {\n          const template = '<div ngNonBindable><span id=child test-dec>{{text}}</span></div>';\n          const fixture = createTestComponent(template);\n          fixture.detectChanges();\n@@ -40,7 +40,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n          expect(hasClass(span, 'compiled')).toBeFalsy();\n        }));\n \n-    it('should trigger directives on the same node', async(() => {\n+    it('should trigger directives on the same node', waitForAsync(() => {\n          const template = '<div><span id=child ngNonBindable test-dec>{{text}}</span></div>';\n          const fixture = createTestComponent(template);\n          fixture.detectChanges();"
        },
        {
            "sha": "f557cca87855c3d9fcf90484c9ff8381b5c54571",
            "filename": "packages/common/test/pipes/json_pipe_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fpipes%2Fjson_pipe_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fpipes%2Fjson_pipe_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Ftest%2Fpipes%2Fjson_pipe_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -8,7 +8,7 @@\n \n import {CommonModule, JsonPipe} from '@angular/common';\n import {Component} from '@angular/core';\n-import {async, TestBed} from '@angular/core/testing';\n+import {TestBed, waitForAsync} from '@angular/core/testing';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n \n {\n@@ -64,7 +64,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n         TestBed.configureTestingModule({declarations: [TestComp], imports: [CommonModule]});\n       });\n \n-      it('should work with mutable objects', async(() => {\n+      it('should work with mutable objects', waitForAsync(() => {\n            const fixture = TestBed.createComponent(TestComp);\n            const mutable: number[] = [1];\n            fixture.componentInstance.data = mutable;"
        },
        {
            "sha": "1ab7398c4db9fe8d8ab63478b0c7560e14da53a9",
            "filename": "packages/common/test/pipes/slice_pipe_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fpipes%2Fslice_pipe_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcommon%2Ftest%2Fpipes%2Fslice_pipe_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Ftest%2Fpipes%2Fslice_pipe_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -8,7 +8,7 @@\n \n import {CommonModule, SlicePipe} from '@angular/common';\n import {Component} from '@angular/core';\n-import {async, TestBed} from '@angular/core/testing';\n+import {TestBed, waitForAsync} from '@angular/core/testing';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n \n {\n@@ -105,7 +105,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n         TestBed.configureTestingModule({declarations: [TestComp], imports: [CommonModule]});\n       });\n \n-      it('should work with mutable arrays', async(() => {\n+      it('should work with mutable arrays', waitForAsync(() => {\n            const fixture = TestBed.createComponent(TestComp);\n            const mutable: number[] = [1, 2];\n            fixture.componentInstance.data = mutable;"
        },
        {
            "sha": "9258a4e19e79b71af9fa7b568837926ebe0a812b",
            "filename": "packages/compiler/test/i18n/integration_xliff2_spec.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcompiler%2Ftest%2Fi18n%2Fintegration_xliff2_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcompiler%2Ftest%2Fi18n%2Fintegration_xliff2_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fi18n%2Fintegration_xliff2_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -7,15 +7,15 @@\n  */\n \n import {Xliff2} from '@angular/compiler/src/i18n/serializers/xliff2';\n-import {async} from '@angular/core/testing';\n+import {waitForAsync} from '@angular/core/testing';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n \n import {configureCompiler, createComponent, HTML, serializeTranslations, validateHtml} from './integration_common';\n \n describe('i18n XLIFF integration spec', () => {\n   describe('(with LF line endings)', () => {\n-    beforeEach(\n-        async(() => configureCompiler(XLIFF2_TOMERGE + LF_LINE_ENDING_XLIFF2_TOMERGE, 'xlf2')));\n+    beforeEach(waitForAsync(\n+        () => configureCompiler(XLIFF2_TOMERGE + LF_LINE_ENDING_XLIFF2_TOMERGE, 'xlf2')));\n \n     it('should extract from templates', () => {\n       const serializer = new Xliff2();\n@@ -34,8 +34,8 @@ describe('i18n XLIFF integration spec', () => {\n   });\n \n   describe('(with CRLF line endings', () => {\n-    beforeEach(\n-        async(() => configureCompiler(XLIFF2_TOMERGE + CRLF_LINE_ENDING_XLIFF2_TOMERGE, 'xlf2')));\n+    beforeEach(waitForAsync(\n+        () => configureCompiler(XLIFF2_TOMERGE + CRLF_LINE_ENDING_XLIFF2_TOMERGE, 'xlf2')));\n \n     it('should extract from templates (with CRLF line endings)', () => {\n       const serializer = new Xliff2();"
        },
        {
            "sha": "a7b5d9be22a8c7e36bb0f90b985b11a5482e37ec",
            "filename": "packages/compiler/test/i18n/integration_xliff_spec.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcompiler%2Ftest%2Fi18n%2Fintegration_xliff_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcompiler%2Ftest%2Fi18n%2Fintegration_xliff_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fi18n%2Fintegration_xliff_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -7,14 +7,15 @@\n  */\n \n import {Xliff} from '@angular/compiler/src/i18n/serializers/xliff';\n-import {async} from '@angular/core/testing';\n+import {waitForAsync} from '@angular/core/testing';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n \n import {configureCompiler, createComponent, HTML, serializeTranslations, validateHtml} from './integration_common';\n \n describe('i18n XLIFF integration spec', () => {\n   describe('(with LF line endings)', () => {\n-    beforeEach(async(() => configureCompiler(XLIFF_TOMERGE + LF_LINE_ENDING_XLIFF_TOMERGE, 'xlf')));\n+    beforeEach(\n+        waitForAsync(() => configureCompiler(XLIFF_TOMERGE + LF_LINE_ENDING_XLIFF_TOMERGE, 'xlf')));\n \n     it('should extract from templates', () => {\n       const serializer = new Xliff();\n@@ -33,8 +34,8 @@ describe('i18n XLIFF integration spec', () => {\n   });\n \n   describe('(with CRLF line endings', () => {\n-    beforeEach(\n-        async(() => configureCompiler(XLIFF_TOMERGE + CRLF_LINE_ENDING_XLIFF_TOMERGE, 'xlf')));\n+    beforeEach(waitForAsync(\n+        () => configureCompiler(XLIFF_TOMERGE + CRLF_LINE_ENDING_XLIFF_TOMERGE, 'xlf')));\n \n     it('should extract from templates (with CRLF line endings)', () => {\n       const serializer = new Xliff();"
        },
        {
            "sha": "a214cc55add0188cf4f118cebb1d8c081b4a872b",
            "filename": "packages/compiler/test/i18n/integration_xmb_xtb_spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcompiler%2Ftest%2Fi18n%2Fintegration_xmb_xtb_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcompiler%2Ftest%2Fi18n%2Fintegration_xmb_xtb_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fi18n%2Fintegration_xmb_xtb_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -7,14 +7,14 @@\n  */\n \n import {Xmb} from '@angular/compiler/src/i18n/serializers/xmb';\n-import {async} from '@angular/core/testing';\n+import {waitForAsync} from '@angular/core/testing';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n \n import {configureCompiler, createComponent, HTML, serializeTranslations, validateHtml} from './integration_common';\n \n describe('i18n XMB/XTB integration spec', () => {\n   describe('(with LF line endings)', () => {\n-    beforeEach(async(() => configureCompiler(XTB + LF_LINE_ENDING_XTB, 'xtb')));\n+    beforeEach(waitForAsync(() => configureCompiler(XTB + LF_LINE_ENDING_XTB, 'xtb')));\n \n     it('should extract from templates', () => {\n       const serializer = new Xmb();\n@@ -33,7 +33,7 @@ describe('i18n XMB/XTB integration spec', () => {\n   });\n \n   describe('(with CRLF line endings', () => {\n-    beforeEach(async(() => configureCompiler(XTB + CRLF_LINE_ENDING_XTB, 'xtb')));\n+    beforeEach(waitForAsync(() => configureCompiler(XTB + CRLF_LINE_ENDING_XTB, 'xtb')));\n \n     it('should extract from templates (with CRLF line endings)', () => {\n       const serializer = new Xmb();"
        },
        {
            "sha": "ef5ddcb69c4057644e86929ad3e68a0f2566fc96",
            "filename": "packages/compiler/test/integration_spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcompiler%2Ftest%2Fintegration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcompiler%2Ftest%2Fintegration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fintegration_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import {Component, Directive, Input} from '@angular/core';\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n+import {ComponentFixture, TestBed, waitForAsync} from '@angular/core/testing';\n import {By} from '@angular/platform-browser/src/dom/debug/by';\n import {browserDetection} from '@angular/platform-browser/testing/src/browser_util';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n@@ -17,7 +17,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n     let fixture: ComponentFixture<TestComponent>;\n \n     describe('directives', () => {\n-      it('should support dotted selectors', async(() => {\n+      it('should support dotted selectors', waitForAsync(() => {\n            @Directive({selector: '[dot.name]'})\n            class MyDir {\n              // TODO(issue/24571): remove '!'.\n@@ -41,7 +41,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n \n     describe('ng-container', () => {\n       if (browserDetection.isChromeDesktop) {\n-        it('should work regardless the namespace', async(() => {\n+        it('should work regardless the namespace', waitForAsync(() => {\n              @Component({\n                selector: 'comp',\n                template:"
        },
        {
            "sha": "040d075b4c250bb02862126daab8e6441f6f24c5",
            "filename": "packages/compiler/test/metadata_resolver_spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcompiler%2Ftest%2Fmetadata_resolver_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcompiler%2Ftest%2Fmetadata_resolver_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fmetadata_resolver_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -8,7 +8,7 @@\n \n import {LIFECYCLE_HOOKS_VALUES, LifecycleHooks} from '@angular/compiler/src/lifecycle_reflector';\n import {AfterContentChecked, AfterContentInit, AfterViewChecked, AfterViewInit, ChangeDetectionStrategy, Component, Directive, DoCheck, Injectable, NgModule, OnChanges, OnDestroy, OnInit, Pipe, SimpleChanges, ViewEncapsulation, stringify as stringify} from '@angular/core';\n-import {async, inject, TestBed} from '@angular/core/testing';\n+import {inject, TestBed, waitForAsync} from '@angular/core/testing';\n \n import {CompileDiDependencyMetadata, identifierName} from '../src/compile_metadata';\n import {CompileMetadataResolver} from '../src/metadata_resolver';\n@@ -77,7 +77,7 @@ import {TEST_COMPILER_PROVIDERS} from './test_bindings';\n        }));\n \n     it('should read external metadata when sync=false',\n-       async(inject(\n+       waitForAsync(inject(\n            [CompileMetadataResolver, ResourceLoader],\n            (resolver: CompileMetadataResolver, resourceLoader: MockResourceLoader) => {\n              @NgModule({declarations: [ComponentWithExternalResources]})\n@@ -96,7 +96,7 @@ import {TEST_COMPILER_PROVIDERS} from './test_bindings';\n            })));\n \n     it('should use `./` as base url for templates during runtime compilation if no moduleId is given',\n-       async(inject([CompileMetadataResolver], (resolver: CompileMetadataResolver) => {\n+       waitForAsync(inject([CompileMetadataResolver], (resolver: CompileMetadataResolver) => {\n          @Component({selector: 'someComponent', templateUrl: 'someUrl'})\n          class ComponentWithoutModuleId {\n          }"
        },
        {
            "sha": "ce37f36e9fae674bb98d60709dbb9592aa046399",
            "filename": "packages/compiler/test/runtime_compiler_spec.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 3,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcompiler%2Ftest%2Fruntime_compiler_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcompiler%2Ftest%2Fruntime_compiler_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fruntime_compiler_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -8,7 +8,7 @@\n \n import {DirectiveResolver, ResourceLoader} from '@angular/compiler';\n import {Compiler, Component, Injector, NgModule, NgModuleFactory, stringify as stringify} from '@angular/core';\n-import {async, fakeAsync, inject, TestBed, tick} from '@angular/core/testing';\n+import {fakeAsync, inject, TestBed, tick, waitForAsync} from '@angular/core/testing';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n \n import {MockDirectiveResolver} from '../testing';\n@@ -42,7 +42,8 @@ class SomeCompWithUrlTemplate {\n               {providers: [{provide: ResourceLoader, useClass: StubResourceLoader, deps: []}]});\n         });\n \n-        it('should throw when using a templateUrl that has not been compiled before', async(() => {\n+        it('should throw when using a templateUrl that has not been compiled before',\n+           waitForAsync(() => {\n              TestBed.configureTestingModule({declarations: [SomeCompWithUrlTemplate]});\n              TestBed.compileComponents().then(() => {\n                expect(() => TestBed.createComponent(SomeCompWithUrlTemplate))\n@@ -76,7 +77,8 @@ class SomeCompWithUrlTemplate {\n               {providers: [{provide: ResourceLoader, useClass: StubResourceLoader, deps: []}]});\n         });\n \n-        it('should allow to use templateUrl components that have been loaded before', async(() => {\n+        it('should allow to use templateUrl components that have been loaded before',\n+           waitForAsync(() => {\n              TestBed.configureTestingModule({declarations: [SomeCompWithUrlTemplate]});\n              TestBed.compileComponents().then(() => {\n                const fixture = TestBed.createComponent(SomeCompWithUrlTemplate);"
        },
        {
            "sha": "ec0be8cf2e38f1c1516ddebdb4e70d48f243f6b8",
            "filename": "packages/core/test/acceptance/providers_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Facceptance%2Fproviders_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Facceptance%2Fproviders_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fproviders_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -8,7 +8,7 @@\n \n import {CommonModule} from '@angular/common';\n import {Component, Directive, forwardRef, Inject, Injectable, InjectionToken, Injector, NgModule, Optional} from '@angular/core';\n-import {async, inject, TestBed} from '@angular/core/testing';\n+import {inject, TestBed, waitForAsync} from '@angular/core/testing';\n import {By} from '@angular/platform-browser';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n import {modifiedInIvy, onlyInIvy} from '@angular/private/testing';\n@@ -603,7 +603,7 @@ describe('providers', () => {\n       });\n \n       it('should support injecting without bootstrapping',\n-         async(inject([MyComp, MyService], (comp: MyComp, service: MyService) => {\n+         waitForAsync(inject([MyComp, MyService], (comp: MyComp, service: MyService) => {\n            expect(comp.svc.value).toEqual('some value');\n          })));\n     });"
        },
        {
            "sha": "ee078a606ea0f4d3e9958ddbbb46ef4886d2aaa9",
            "filename": "packages/core/test/application_init_spec.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Fapplication_init_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Fapplication_init_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fapplication_init_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -8,19 +8,19 @@\n import {Injector} from '@angular/core';\n import {APP_INITIALIZER, ApplicationInitStatus} from '@angular/core/src/application_init';\n \n-import {async, inject, TestBed} from '../testing';\n+import {inject, TestBed, waitForAsync} from '../testing';\n \n {\n   describe('ApplicationInitStatus', () => {\n     describe('no initializers', () => {\n       it('should return true for `done`',\n-         async(inject([ApplicationInitStatus], (status: ApplicationInitStatus) => {\n+         waitForAsync(inject([ApplicationInitStatus], (status: ApplicationInitStatus) => {\n            (status as any).runInitializers();\n            expect(status.done).toBe(true);\n          })));\n \n       it('should return a promise that resolves immediately for `donePromise`',\n-         async(inject([ApplicationInitStatus], (status: ApplicationInitStatus) => {\n+         waitForAsync(inject([ApplicationInitStatus], (status: ApplicationInitStatus) => {\n            (status as any).runInitializers();\n            status.donePromise.then(() => {\n              expect(status.done).toBe(true);\n@@ -58,7 +58,7 @@ import {async, inject, TestBed} from '../testing';\n       });\n \n       it('should update the status once all async initializers are done',\n-         async(inject([ApplicationInitStatus], (status: ApplicationInitStatus) => {\n+         waitForAsync(inject([ApplicationInitStatus], (status: ApplicationInitStatus) => {\n            (status as any).runInitializers();\n \n            setTimeout(() => {"
        },
        {
            "sha": "2f97e917451bb4753ac2b1043cb716f88f2b7c49",
            "filename": "packages/core/test/application_ref_spec.ts",
            "status": "modified",
            "additions": 79,
            "deletions": 73,
            "changes": 152,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Fapplication_ref_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Fapplication_ref_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fapplication_ref_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -19,7 +19,7 @@ import {expect} from '@angular/platform-browser/testing/src/matchers';\n import {onlyInIvy} from '@angular/private/testing';\n \n import {NoopNgZone} from '../src/zone/ng_zone';\n-import {async, ComponentFixtureNoNgZone, inject, TestBed, withModule} from '../testing';\n+import {ComponentFixtureNoNgZone, inject, TestBed, waitForAsync, withModule} from '../testing';\n \n @Component({selector: 'bootstrap-app', template: 'hello'})\n class SomeComponent {\n@@ -79,62 +79,66 @@ class SomeComponent {\n     }\n \n     it('should bootstrap a component from a child module',\n-       async(inject([ApplicationRef, Compiler], (app: ApplicationRef, compiler: Compiler) => {\n-         @Component({\n-           selector: 'bootstrap-app',\n-           template: '',\n-         })\n-         class SomeComponent {\n-         }\n-\n-         const helloToken = new InjectionToken<string>('hello');\n-\n-         @NgModule({\n-           providers: [{provide: helloToken, useValue: 'component'}],\n-           declarations: [SomeComponent],\n-           entryComponents: [SomeComponent],\n-         })\n-         class SomeModule {\n-         }\n-\n-         createRootEl();\n-         const modFactory = compiler.compileModuleSync(SomeModule);\n-         const module = modFactory.create(TestBed);\n-         const cmpFactory = module.componentFactoryResolver.resolveComponentFactory(SomeComponent)!;\n-         const component = app.bootstrap(cmpFactory);\n-\n-         // The component should see the child module providers\n-         expect(component.injector.get(helloToken)).toEqual('component');\n-       })));\n+       waitForAsync(\n+           inject([ApplicationRef, Compiler], (app: ApplicationRef, compiler: Compiler) => {\n+             @Component({\n+               selector: 'bootstrap-app',\n+               template: '',\n+             })\n+             class SomeComponent {\n+             }\n+\n+             const helloToken = new InjectionToken<string>('hello');\n+\n+             @NgModule({\n+               providers: [{provide: helloToken, useValue: 'component'}],\n+               declarations: [SomeComponent],\n+               entryComponents: [SomeComponent],\n+             })\n+             class SomeModule {\n+             }\n+\n+             createRootEl();\n+             const modFactory = compiler.compileModuleSync(SomeModule);\n+             const module = modFactory.create(TestBed);\n+             const cmpFactory =\n+                 module.componentFactoryResolver.resolveComponentFactory(SomeComponent)!;\n+             const component = app.bootstrap(cmpFactory);\n+\n+             // The component should see the child module providers\n+             expect(component.injector.get(helloToken)).toEqual('component');\n+           })));\n \n     it('should bootstrap a component with a custom selector',\n-       async(inject([ApplicationRef, Compiler], (app: ApplicationRef, compiler: Compiler) => {\n-         @Component({\n-           selector: 'bootstrap-app',\n-           template: '',\n-         })\n-         class SomeComponent {\n-         }\n-\n-         const helloToken = new InjectionToken<string>('hello');\n-\n-         @NgModule({\n-           providers: [{provide: helloToken, useValue: 'component'}],\n-           declarations: [SomeComponent],\n-           entryComponents: [SomeComponent],\n-         })\n-         class SomeModule {\n-         }\n-\n-         createRootEl('custom-selector');\n-         const modFactory = compiler.compileModuleSync(SomeModule);\n-         const module = modFactory.create(TestBed);\n-         const cmpFactory = module.componentFactoryResolver.resolveComponentFactory(SomeComponent)!;\n-         const component = app.bootstrap(cmpFactory, 'custom-selector');\n-\n-         // The component should see the child module providers\n-         expect(component.injector.get(helloToken)).toEqual('component');\n-       })));\n+       waitForAsync(\n+           inject([ApplicationRef, Compiler], (app: ApplicationRef, compiler: Compiler) => {\n+             @Component({\n+               selector: 'bootstrap-app',\n+               template: '',\n+             })\n+             class SomeComponent {\n+             }\n+\n+             const helloToken = new InjectionToken<string>('hello');\n+\n+             @NgModule({\n+               providers: [{provide: helloToken, useValue: 'component'}],\n+               declarations: [SomeComponent],\n+               entryComponents: [SomeComponent],\n+             })\n+             class SomeModule {\n+             }\n+\n+             createRootEl('custom-selector');\n+             const modFactory = compiler.compileModuleSync(SomeModule);\n+             const module = modFactory.create(TestBed);\n+             const cmpFactory =\n+                 module.componentFactoryResolver.resolveComponentFactory(SomeComponent)!;\n+             const component = app.bootstrap(cmpFactory, 'custom-selector');\n+\n+             // The component should see the child module providers\n+             expect(component.injector.get(helloToken)).toEqual('component');\n+           })));\n \n     describe('ApplicationRef', () => {\n       beforeEach(() => {\n@@ -216,7 +220,7 @@ class SomeComponent {\n         defaultPlatform = _platform;\n       }));\n \n-      it('should wait for asynchronous app initializers', async(() => {\n+      it('should wait for asynchronous app initializers', waitForAsync(() => {\n            let resolve: (result: any) => void;\n            const promise: Promise<any> = new Promise((res) => {\n              resolve = res;\n@@ -235,7 +239,8 @@ class SomeComponent {\n                });\n          }));\n \n-      it('should rethrow sync errors even if the exceptionHandler is not rethrowing', async(() => {\n+      it('should rethrow sync errors even if the exceptionHandler is not rethrowing',\n+         waitForAsync(() => {\n            defaultPlatform\n                .bootstrapModule(createModule([{\n                  provide: APP_INITIALIZER,\n@@ -253,7 +258,7 @@ class SomeComponent {\n          }));\n \n       it('should rethrow promise errors even if the exceptionHandler is not rethrowing',\n-         async(() => {\n+         waitForAsync(() => {\n            defaultPlatform\n                .bootstrapModule(createModule([\n                  {provide: APP_INITIALIZER, useValue: () => Promise.reject('Test'), multi: true}\n@@ -264,7 +269,7 @@ class SomeComponent {\n                });\n          }));\n \n-      it('should throw useful error when ApplicationRef is not configured', async(() => {\n+      it('should throw useful error when ApplicationRef is not configured', waitForAsync(() => {\n            @NgModule()\n            class EmptyModule {\n            }\n@@ -277,7 +282,7 @@ class SomeComponent {\n          }));\n \n       it('should call the `ngDoBootstrap` method with `ApplicationRef` on the main module',\n-         async(() => {\n+         waitForAsync(() => {\n            const ngDoBootstrap = jasmine.createSpy('ngDoBootstrap');\n            defaultPlatform.bootstrapModule(createModule({ngDoBootstrap: ngDoBootstrap}))\n                .then((moduleRef) => {\n@@ -286,7 +291,7 @@ class SomeComponent {\n                });\n          }));\n \n-      it('should auto bootstrap components listed in @NgModule.bootstrap', async(() => {\n+      it('should auto bootstrap components listed in @NgModule.bootstrap', waitForAsync(() => {\n            defaultPlatform.bootstrapModule(createModule({bootstrap: [SomeComponent]}))\n                .then((moduleRef) => {\n                  const appRef: ApplicationRef = moduleRef.injector.get(ApplicationRef);\n@@ -295,7 +300,7 @@ class SomeComponent {\n          }));\n \n       it('should error if neither `ngDoBootstrap` nor @NgModule.bootstrap was specified',\n-         async(() => {\n+         waitForAsync(() => {\n            defaultPlatform.bootstrapModule(createModule({ngDoBootstrap: false}))\n                .then(() => expect(false).toBe(true), (e) => {\n                  const expectedErrMsg =\n@@ -305,12 +310,12 @@ class SomeComponent {\n                });\n          }));\n \n-      it('should add bootstrapped module into platform modules list', async(() => {\n+      it('should add bootstrapped module into platform modules list', waitForAsync(() => {\n            defaultPlatform.bootstrapModule(createModule({bootstrap: [SomeComponent]}))\n                .then(module => expect((<any>defaultPlatform)._modules).toContain(module));\n          }));\n \n-      it('should bootstrap with NoopNgZone', async(() => {\n+      it('should bootstrap with NoopNgZone', waitForAsync(() => {\n            defaultPlatform\n                .bootstrapModule(createModule({bootstrap: [SomeComponent]}), {ngZone: 'noop'})\n                .then((module) => {\n@@ -376,7 +381,7 @@ class SomeComponent {\n         createRootEl();\n         defaultPlatform = _platform;\n       }));\n-      it('should wait for asynchronous app initializers', async(() => {\n+      it('should wait for asynchronous app initializers', waitForAsync(() => {\n            let resolve: (result: any) => void;\n            const promise: Promise<any> = new Promise((res) => {\n              resolve = res;\n@@ -396,7 +401,8 @@ class SomeComponent {\n            });\n          }));\n \n-      it('should rethrow sync errors even if the exceptionHandler is not rethrowing', async(() => {\n+      it('should rethrow sync errors even if the exceptionHandler is not rethrowing',\n+         waitForAsync(() => {\n            const compilerFactory: CompilerFactory =\n                defaultPlatform.injector.get(CompilerFactory, null)!;\n            const moduleFactory = compilerFactory.createCompiler().compileModuleSync(createModule([{\n@@ -413,7 +419,7 @@ class SomeComponent {\n          }));\n \n       it('should rethrow promise errors even if the exceptionHandler is not rethrowing',\n-         async(() => {\n+         waitForAsync(() => {\n            const compilerFactory: CompilerFactory =\n                defaultPlatform.injector.get(CompilerFactory, null)!;\n            const moduleFactory = compilerFactory.createCompiler().compileModuleSync(createModule(\n@@ -623,25 +629,25 @@ class SomeComponent {\n       });\n     }\n \n-    it('isStable should fire on synchronous component loading', async(() => {\n+    it('isStable should fire on synchronous component loading', waitForAsync(() => {\n          expectStableTexts(SyncComp, ['1']);\n        }));\n \n-    it('isStable should fire after a microtask on init is completed', async(() => {\n+    it('isStable should fire after a microtask on init is completed', waitForAsync(() => {\n          expectStableTexts(MicroTaskComp, ['11']);\n        }));\n \n-    it('isStable should fire after a macrotask on init is completed', async(() => {\n+    it('isStable should fire after a macrotask on init is completed', waitForAsync(() => {\n          expectStableTexts(MacroTaskComp, ['11']);\n        }));\n \n     it('isStable should fire only after chain of micro and macrotasks on init are completed',\n-       async(() => {\n+       waitForAsync(() => {\n          expectStableTexts(MicroMacroTaskComp, ['111']);\n        }));\n \n     it('isStable should fire only after chain of macro and microtasks on init are completed',\n-       async(() => {\n+       waitForAsync(() => {\n          expectStableTexts(MacroMicroTaskComp, ['111']);\n        }));\n \n@@ -665,7 +671,7 @@ class SomeComponent {\n         });\n       }\n \n-      it('should be fired after app becomes unstable', async(() => {\n+      it('should be fired after app becomes unstable', waitForAsync(() => {\n            const fixture = TestBed.createComponent(ClickComp);\n            const appRef: ApplicationRef = TestBed.inject(ApplicationRef);\n            const zone: NgZone = TestBed.inject(NgZone);"
        },
        {
            "sha": "41b398b6d12826f06b4b3458381adc2167c404b3",
            "filename": "packages/core/test/component_fixture_spec.ts",
            "status": "modified",
            "additions": 14,
            "deletions": 12,
            "changes": 26,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Fcomponent_fixture_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Fcomponent_fixture_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fcomponent_fixture_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import {Component, Injectable, Input} from '@angular/core';\n-import {async, ComponentFixtureAutoDetect, ComponentFixtureNoNgZone, TestBed, withModule} from '@angular/core/testing';\n+import {ComponentFixtureAutoDetect, ComponentFixtureNoNgZone, TestBed, waitForAsync, withModule} from '@angular/core/testing';\n import {dispatchEvent} from '@angular/platform-browser/testing/src/browser_util';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n \n@@ -100,7 +100,7 @@ class NestedAsyncTimeoutComp {\n \n {\n   describe('ComponentFixture', () => {\n-    beforeEach(async(() => {\n+    beforeEach(waitForAsync(() => {\n       TestBed.configureTestingModule({\n         declarations: [\n           AutoDetectComp, AsyncComp, AsyncTimeoutComp, NestedAsyncTimeoutComp, AsyncChangeComp,\n@@ -134,7 +134,7 @@ class NestedAsyncTimeoutComp {\n        }));\n \n     it('should signal through whenStable when the fixture is stable (autoDetectChanges)',\n-       async(() => {\n+       waitForAsync(() => {\n          const componentFixture = TestBed.createComponent(AsyncComp);\n          componentFixture.autoDetectChanges();\n          expect(componentFixture.nativeElement).toHaveText('1');\n@@ -153,7 +153,7 @@ class NestedAsyncTimeoutComp {\n        }));\n \n     it('should signal through isStable when the fixture is stable (no autoDetectChanges)',\n-       async(() => {\n+       waitForAsync(() => {\n          const componentFixture = TestBed.createComponent(AsyncComp);\n \n          componentFixture.detectChanges();\n@@ -174,7 +174,7 @@ class NestedAsyncTimeoutComp {\n \n     it('should wait for macroTask(setTimeout) while checking for whenStable ' +\n            '(autoDetectChanges)',\n-       async(() => {\n+       waitForAsync(() => {\n          const componentFixture = TestBed.createComponent(AsyncTimeoutComp);\n          componentFixture.autoDetectChanges();\n          expect(componentFixture.nativeElement).toHaveText('1');\n@@ -194,7 +194,7 @@ class NestedAsyncTimeoutComp {\n \n     it('should wait for macroTask(setTimeout) while checking for whenStable ' +\n            '(no autoDetectChanges)',\n-       async(() => {\n+       waitForAsync(() => {\n          const componentFixture = TestBed.createComponent(AsyncTimeoutComp);\n          componentFixture.detectChanges();\n          expect(componentFixture.nativeElement).toHaveText('1');\n@@ -215,7 +215,7 @@ class NestedAsyncTimeoutComp {\n \n     it('should wait for nested macroTasks(setTimeout) while checking for whenStable ' +\n            '(autoDetectChanges)',\n-       async(() => {\n+       waitForAsync(() => {\n          const componentFixture = TestBed.createComponent(NestedAsyncTimeoutComp);\n \n          componentFixture.autoDetectChanges();\n@@ -236,7 +236,7 @@ class NestedAsyncTimeoutComp {\n \n     it('should wait for nested macroTasks(setTimeout) while checking for whenStable ' +\n            '(no autoDetectChanges)',\n-       async(() => {\n+       waitForAsync(() => {\n          const componentFixture = TestBed.createComponent(NestedAsyncTimeoutComp);\n          componentFixture.detectChanges();\n          expect(componentFixture.nativeElement).toHaveText('1');\n@@ -255,7 +255,8 @@ class NestedAsyncTimeoutComp {\n          });\n        }));\n \n-    it('should stabilize after async task in change detection (autoDetectChanges)', async(() => {\n+    it('should stabilize after async task in change detection (autoDetectChanges)',\n+       waitForAsync(() => {\n          const componentFixture = TestBed.createComponent(AsyncChangeComp);\n \n          componentFixture.autoDetectChanges();\n@@ -271,7 +272,8 @@ class NestedAsyncTimeoutComp {\n          });\n        }));\n \n-    it('should stabilize after async task in change detection(no autoDetectChanges)', async(() => {\n+    it('should stabilize after async task in change detection(no autoDetectChanges)',\n+       waitForAsync(() => {\n          const componentFixture = TestBed.createComponent(AsyncChangeComp);\n          componentFixture.detectChanges();\n          componentFixture.whenStable().then((_) => {\n@@ -306,15 +308,15 @@ class NestedAsyncTimeoutComp {\n         }).toThrowError(/Cannot call autoDetectChanges when ComponentFixtureNoNgZone is set/);\n       });\n \n-      it('should instantiate a component with valid DOM', async(() => {\n+      it('should instantiate a component with valid DOM', waitForAsync(() => {\n            const componentFixture = TestBed.createComponent(SimpleComp);\n \n            expect(componentFixture.ngZone).toBeNull();\n            componentFixture.detectChanges();\n            expect(componentFixture.nativeElement).toHaveText('Original Simple');\n          }));\n \n-      it('should allow changing members of the component', async(() => {\n+      it('should allow changing members of the component', waitForAsync(() => {\n            const componentFixture = TestBed.createComponent(MyIfComp);\n \n            componentFixture.detectChanges();"
        },
        {
            "sha": "af6ffc07170b8ca16e665dfa8dad3981fcb79b94",
            "filename": "packages/core/test/debug/debug_node_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Fdebug%2Fdebug_node_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Fdebug%2Fdebug_node_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fdebug%2Fdebug_node_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -10,7 +10,7 @@\n import {CommonModule, NgIfContext, getDOM as getDOM} from '@angular/common';\n import {Component, DebugElement, DebugNode, Directive, ElementRef, EmbeddedViewRef, EventEmitter, HostBinding, Injectable, Input, NO_ERRORS_SCHEMA, OnInit, Output, Renderer2, TemplateRef, ViewChild, ViewContainerRef} from '@angular/core';\n import {NgZone} from '@angular/core/src/zone';\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n+import {ComponentFixture, TestBed, waitForAsync} from '@angular/core/testing';\n import {By} from '@angular/platform-browser/src/dom/debug/by';\n import {createMouseEvent, hasClass} from '@angular/platform-browser/testing/src/browser_util';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n@@ -264,7 +264,7 @@ class TestCmptWithPropInterpolation {\n   describe('debug element', () => {\n     let fixture: ComponentFixture<any>;\n \n-    beforeEach(async(() => {\n+    beforeEach(waitForAsync(() => {\n       TestBed.configureTestingModule({\n         declarations: [\n           ChildComp,"
        },
        {
            "sha": "46fd11e60f8efbfba8721d309b825620e97dc0fd",
            "filename": "packages/core/test/linker/integration_spec.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 11,
            "changes": 23,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Flinker%2Fintegration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Flinker%2Fintegration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Flinker%2Fintegration_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -17,7 +17,7 @@ import {TemplateRef} from '@angular/core/src/linker/template_ref';\n import {ViewContainerRef} from '@angular/core/src/linker/view_container_ref';\n import {EmbeddedViewRef} from '@angular/core/src/linker/view_ref';\n import {Attribute, Component, ContentChildren, Directive, HostBinding, HostListener, Input, Output, Pipe} from '@angular/core/src/metadata';\n-import {async, fakeAsync, getTestBed, TestBed, tick} from '@angular/core/testing';\n+import {fakeAsync, getTestBed, TestBed, tick, waitForAsync} from '@angular/core/testing';\n import {createMouseEvent, dispatchEvent, el, isCommentNode} from '@angular/platform-browser/testing/src/browser_util';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n import {modifiedInIvy, obsoleteInIvy, onlyInIvy} from '@angular/private/testing';\n@@ -757,7 +757,7 @@ function declareTests(config?: {useJit: boolean}) {\n         expect(childComponent.myHost).toBeAnInstanceOf(SomeDirective);\n       });\n \n-      it('should support events via EventEmitter on regular elements', async(() => {\n+      it('should support events via EventEmitter on regular elements', waitForAsync(() => {\n            TestBed.configureTestingModule(\n                {declarations: [MyComp, DirectiveEmittingEvent, DirectiveListeningEvent]});\n            const template = '<div emitter listener></div>';\n@@ -787,7 +787,7 @@ function declareTests(config?: {useJit: boolean}) {\n            emitter.fireEvent('fired !');\n          }));\n \n-      it('should support events via EventEmitter on template elements', async(() => {\n+      it('should support events via EventEmitter on template elements', waitForAsync(() => {\n            const fixture =\n                TestBed\n                    .configureTestingModule(\n@@ -819,7 +819,7 @@ function declareTests(config?: {useJit: boolean}) {\n            emitter.fireEvent('fired !');\n          }));\n \n-      it('should support [()] syntax', async(() => {\n+      it('should support [()] syntax', waitForAsync(() => {\n            TestBed.configureTestingModule({declarations: [MyComp, DirectiveWithTwoWayBinding]});\n            const template = '<div [(control)]=\"ctxProp\" two-way></div>';\n            TestBed.overrideComponent(MyComp, {set: {template}});\n@@ -1072,7 +1072,7 @@ function declareTests(config?: {useJit: boolean}) {\n         });\n \n         describe('.createComponent', () => {\n-          it('should allow to create a component at any bound location', async(() => {\n+          it('should allow to create a component at any bound location', waitForAsync(() => {\n                const fixture = TestBed.configureTestingModule({schemas: [NO_ERRORS_SCHEMA]})\n                                    .createComponent(MyComp);\n                const tc = fixture.debugElement.children[0].children[0];\n@@ -1083,7 +1083,7 @@ function declareTests(config?: {useJit: boolean}) {\n                    .toHaveText('dynamic greet');\n              }));\n \n-          it('should allow to create multiple components at a location', async(() => {\n+          it('should allow to create multiple components at a location', waitForAsync(() => {\n                const fixture = TestBed.configureTestingModule({schemas: [NO_ERRORS_SCHEMA]})\n                                    .createComponent(MyComp);\n                const tc = fixture.debugElement.children[0].children[0];\n@@ -1219,7 +1219,7 @@ function declareTests(config?: {useJit: boolean}) {\n         });\n \n         describe('.insert', () => {\n-          it('should throw with destroyed views', async(() => {\n+          it('should throw with destroyed views', waitForAsync(() => {\n                const fixture = TestBed.configureTestingModule({schemas: [NO_ERRORS_SCHEMA]})\n                                    .createComponent(MyComp);\n                const tc = fixture.debugElement.children[0].children[0];\n@@ -1235,7 +1235,7 @@ function declareTests(config?: {useJit: boolean}) {\n         });\n \n         describe('.move', () => {\n-          it('should throw with destroyed views', async(() => {\n+          it('should throw with destroyed views', waitForAsync(() => {\n                const fixture = TestBed.configureTestingModule({schemas: [NO_ERRORS_SCHEMA]})\n                                    .createComponent(MyComp);\n                const tc = fixture.debugElement.children[0].children[0];\n@@ -2001,7 +2001,7 @@ function declareTests(config?: {useJit: boolean}) {\n     });\n \n     describe('whitespaces in templates', () => {\n-      it('should not remove whitespaces by default', async(() => {\n+      it('should not remove whitespaces by default', waitForAsync(() => {\n            @Component({\n              selector: 'comp',\n              template: '<span>foo</span>  <span>bar</span>',\n@@ -2015,7 +2015,8 @@ function declareTests(config?: {useJit: boolean}) {\n            expect(f.nativeElement.childNodes.length).toBe(2);\n          }));\n \n-      it('should not remove whitespaces when explicitly requested not to do so', async(() => {\n+      it('should not remove whitespaces when explicitly requested not to do so',\n+         waitForAsync(() => {\n            @Component({\n              selector: 'comp',\n              template: '<span>foo</span>  <span>bar</span>',\n@@ -2030,7 +2031,7 @@ function declareTests(config?: {useJit: boolean}) {\n            expect(f.nativeElement.childNodes.length).toBe(3);\n          }));\n \n-      it('should remove whitespaces when explicitly requested to do so', async(() => {\n+      it('should remove whitespaces when explicitly requested to do so', waitForAsync(() => {\n            @Component({\n              selector: 'comp',\n              template: '<span>foo</span>  <span>bar</span>',"
        },
        {
            "sha": "5c4f18b967c4c3af84c729a76db2fda2bf355723",
            "filename": "packages/core/test/linker/jit_summaries_integration_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Flinker%2Fjit_summaries_integration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Flinker%2Fjit_summaries_integration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Flinker%2Fjit_summaries_integration_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -10,7 +10,7 @@ import {ResourceLoader} from '@angular/compiler';\n import {CompileMetadataResolver} from '@angular/compiler/src/metadata_resolver';\n import {MockResourceLoader} from '@angular/compiler/testing/src/resource_loader_mock';\n import {Component, Directive, Injectable, NgModule, OnDestroy, Pipe} from '@angular/core';\n-import {async, getTestBed, TestBed} from '@angular/core/testing';\n+import {getTestBed, TestBed, waitForAsync} from '@angular/core/testing';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n import {obsoleteInIvy} from '@angular/private/testing';\n \n@@ -135,7 +135,7 @@ import {obsoleteInIvy} from '@angular/private/testing';\n           SomeService.annotations = [];\n         }\n \n-        beforeEach(async(() => {\n+        beforeEach(waitForAsync(() => {\n           instances = new Map<any, any>();\n           createSummaries().then(s => summaries = s);\n         }));"
        },
        {
            "sha": "fe5ced8f36e0c43144e5fd431b8c3a7ea7423bba",
            "filename": "packages/core/test/linker/query_integration_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Flinker%2Fquery_integration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Flinker%2Fquery_integration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Flinker%2Fquery_integration_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -8,7 +8,7 @@\n \n import {AfterContentChecked, AfterContentInit, AfterViewChecked, AfterViewInit, asNativeElements, Component, ContentChild, ContentChildren, Directive, QueryList, TemplateRef, Type, ViewChild, ViewChildren, ViewContainerRef} from '@angular/core';\n import {ElementRef} from '@angular/core/src/core';\n-import {async, ComponentFixture, TestBed} from '@angular/core/testing';\n+import {ComponentFixture, TestBed, waitForAsync} from '@angular/core/testing';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n import {ivyEnabled, modifiedInIvy, onlyInIvy} from '@angular/private/testing';\n import {Subject} from 'rxjs';\n@@ -414,7 +414,7 @@ describe('Query API', () => {\n   });\n \n   describe('changes', () => {\n-    it('should notify query on change', async(() => {\n+    it('should notify query on change', waitForAsync(() => {\n          const template = '<needs-query #q>' +\n              '<div text=\"1\"></div>' +\n              '<div *ngIf=\"shouldShow\" text=\"2\"></div>' +"
        },
        {
            "sha": "a3b780e03825d74ee07ecd270e805894199bc01a",
            "filename": "packages/core/test/linker/system_ng_module_factory_loader_spec.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Flinker%2Fsystem_ng_module_factory_loader_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Flinker%2Fsystem_ng_module_factory_loader_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Flinker%2Fsystem_ng_module_factory_loader_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -8,7 +8,7 @@\n \n import {Compiler, SystemJsNgModuleLoader} from '@angular/core';\n import {global} from '@angular/core/src/util/global';\n-import {async} from '@angular/core/testing';\n+import {waitForAsync} from '@angular/core/testing';\n import {afterEach, beforeEach, describe, expect, it} from '@angular/core/testing/src/testing_internal';\n import {modifiedInIvy, onlyInIvy} from '@angular/private/testing';\n \n@@ -36,19 +36,19 @@ describe('SystemJsNgModuleLoader', () => {\n       global['System'] = oldSystem;\n     });\n \n-    it('loads a default factory by appending the factory suffix', async(() => {\n+    it('loads a default factory by appending the factory suffix', waitForAsync(() => {\n          const loader = new SystemJsNgModuleLoader(new Compiler());\n          loader.load('test').then(contents => {\n            expect(contents).toBe('test module factory' as any);\n          });\n        }));\n-    it('loads a named factory by appending the factory suffix', async(() => {\n+    it('loads a named factory by appending the factory suffix', waitForAsync(() => {\n          const loader = new SystemJsNgModuleLoader(new Compiler());\n          loader.load('test#Named').then(contents => {\n            expect(contents).toBe('test NamedNgFactory' as any);\n          });\n        }));\n-    it('loads a named factory with a configured prefix and suffix', async(() => {\n+    it('loads a named factory with a configured prefix and suffix', waitForAsync(() => {\n          const loader = new SystemJsNgModuleLoader(new Compiler(), {\n            factoryPathPrefix: 'prefixed/',\n            factoryPathSuffix: '/suffixed',\n@@ -70,13 +70,13 @@ describe('SystemJsNgModuleLoader', () => {\n       global['System'] = oldSystem;\n     });\n \n-    it('loads a default module', async(() => {\n+    it('loads a default module', waitForAsync(() => {\n          const loader = new SystemJsNgModuleLoader(new Compiler());\n          loader.load('test').then(contents => {\n            expect(contents.moduleType).toBe('test module' as any);\n          });\n        }));\n-    it('loads a named module', async(() => {\n+    it('loads a named module', waitForAsync(() => {\n          const loader = new SystemJsNgModuleLoader(new Compiler());\n          loader.load('test#NamedModule').then(contents => {\n            expect(contents.moduleType).toBe('test NamedModule' as any);"
        },
        {
            "sha": "d3415a85e890a62119bbc7caf53b2bea3b0810f1",
            "filename": "packages/core/test/testability/testability_spec.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 10,
            "changes": 22,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Ftestability%2Ftestability_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Ftestability%2Ftestability_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Ftestability%2Ftestability_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -10,7 +10,7 @@ import {EventEmitter} from '@angular/core';\n import {Injectable} from '@angular/core/src/di';\n import {PendingMacrotask, Testability, TestabilityRegistry} from '@angular/core/src/testability/testability';\n import {NgZone} from '@angular/core/src/zone/ng_zone';\n-import {async, fakeAsync, flush, tick} from '@angular/core/testing';\n+import {fakeAsync, flush, tick, waitForAsync} from '@angular/core/testing';\n import {beforeEach, describe, expect, it, SpyObject} from '@angular/core/testing/src/testing_internal';\n \n import {scheduleMicroTask} from '../../src/util/microtask';\n@@ -55,7 +55,7 @@ class MockNgZone extends NgZone {\n     let updateCallback: any;\n     let ngZone: MockNgZone;\n \n-    beforeEach(async(() => {\n+    beforeEach(waitForAsync(() => {\n       ngZone = new MockNgZone();\n       testability = new Testability(ngZone);\n       execute = new SpyObject().spy('execute');\n@@ -68,7 +68,7 @@ class MockNgZone extends NgZone {\n         expect(testability.getPendingRequestCount()).toEqual(0);\n       });\n \n-      it('should fire whenstable callbacks if pending count is 0', async(() => {\n+      it('should fire whenstable callbacks if pending count is 0', waitForAsync(() => {\n            testability.whenStable(execute);\n \n            microTask(() => {\n@@ -81,7 +81,7 @@ class MockNgZone extends NgZone {\n         expect(execute).not.toHaveBeenCalled();\n       });\n \n-      it('should not call whenstable callbacks when there are pending counts', async(() => {\n+      it('should not call whenstable callbacks when there are pending counts', waitForAsync(() => {\n            testability.increasePendingRequestCount();\n            testability.increasePendingRequestCount();\n            testability.whenStable(execute);\n@@ -96,7 +96,7 @@ class MockNgZone extends NgZone {\n            });\n          }));\n \n-      it('should fire whenstable callbacks when pending drops to 0', async(() => {\n+      it('should fire whenstable callbacks when pending drops to 0', waitForAsync(() => {\n            testability.increasePendingRequestCount();\n            testability.whenStable(execute);\n \n@@ -110,15 +110,16 @@ class MockNgZone extends NgZone {\n            });\n          }));\n \n-      it('should not fire whenstable callbacks synchronously when pending drops to 0', async(() => {\n+      it('should not fire whenstable callbacks synchronously when pending drops to 0',\n+         waitForAsync(() => {\n            testability.increasePendingRequestCount();\n            testability.whenStable(execute);\n            testability.decreasePendingRequestCount();\n \n            expect(execute).not.toHaveBeenCalled();\n          }));\n \n-      it('should fire whenstable callbacks with didWork if pending count is 0', async(() => {\n+      it('should fire whenstable callbacks with didWork if pending count is 0', waitForAsync(() => {\n            microTask(() => {\n              testability.whenStable(execute);\n \n@@ -128,7 +129,8 @@ class MockNgZone extends NgZone {\n            });\n          }));\n \n-      it('should fire whenstable callbacks with didWork when pending drops to 0', async(() => {\n+      it('should fire whenstable callbacks with didWork when pending drops to 0',\n+         waitForAsync(() => {\n            testability.increasePendingRequestCount();\n            testability.whenStable(execute);\n \n@@ -165,7 +167,7 @@ class MockNgZone extends NgZone {\n              clearTimeout(id);\n            }));\n \n-        it('should fire if Angular is already stable', async(() => {\n+        it('should fire if Angular is already stable', waitForAsync(() => {\n              testability.whenStable(execute, 200);\n \n              microTask(() => {\n@@ -363,7 +365,7 @@ class MockNgZone extends NgZone {\n     let registry: TestabilityRegistry;\n     let ngZone: MockNgZone;\n \n-    beforeEach(async(() => {\n+    beforeEach(waitForAsync(() => {\n       ngZone = new MockNgZone();\n       testability1 = new Testability(ngZone);\n       testability2 = new Testability(ngZone);"
        },
        {
            "sha": "fef986e01f6d3aff306175b2f8583d633a91ad00",
            "filename": "packages/core/test/zone/ng_zone_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Fzone%2Fng_zone_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fcore%2Ftest%2Fzone%2Fng_zone_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fzone%2Fng_zone_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import {EventEmitter, NgZone} from '@angular/core';\n-import {async, fakeAsync, flushMicrotasks} from '@angular/core/testing';\n+import {fakeAsync, flushMicrotasks, waitForAsync} from '@angular/core/testing';\n import {AsyncTestCompleter, beforeEach, describe, expect, inject, it, Log, xit} from '@angular/core/testing/src/testing_internal';\n import {browserDetection} from '@angular/platform-browser/testing/src/browser_util';\n \n@@ -914,7 +914,7 @@ function commonTests() {\n           asyncResult = null!;\n         });\n \n-        it('should async even if the NgZone was created outside.', async(() => {\n+        it('should async even if the NgZone was created outside.', waitForAsync(() => {\n              // try to escape the current async zone by using NgZone which was created outside.\n              ngZone.run(() => {\n                setTimeout(() => {"
        },
        {
            "sha": "316a3c86a82b7f3c3f2d09f2cfae3ff5e864c8a9",
            "filename": "packages/forms/test/form_group_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fforms%2Ftest%2Fform_group_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fforms%2Ftest%2Fform_group_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Ftest%2Fform_group_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -6,7 +6,7 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import {async, fakeAsync, tick} from '@angular/core/testing';\n+import {fakeAsync, tick, waitForAsync} from '@angular/core/testing';\n import {AsyncTestCompleter, beforeEach, describe, inject, it} from '@angular/core/testing/src/testing_internal';\n import {AbstractControl, FormArray, FormControl, FormGroup, ValidationErrors, Validators} from '@angular/forms';\n import {of} from 'rxjs';\n@@ -726,7 +726,7 @@ describe('FormGroup', () => {\n     let control: FormControl;\n     let group: FormGroup;\n \n-    beforeEach(async(() => {\n+    beforeEach(waitForAsync(() => {\n       control = new FormControl('', asyncValidatorReturningObservable);\n       group = new FormGroup({'one': control});\n     }));"
        },
        {
            "sha": "6f77c5698f4f18d24168422dc8bbeeef2a46b612",
            "filename": "packages/forms/test/template_integration_spec.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fforms%2Ftest%2Ftemplate_integration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fforms%2Ftest%2Ftemplate_integration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Ftest%2Ftemplate_integration_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -8,7 +8,7 @@\n \n import {getDOM as getDOM} from '@angular/common';\n import {Component, Directive, forwardRef, Type} from '@angular/core';\n-import {async, ComponentFixture, fakeAsync, TestBed, tick} from '@angular/core/testing';\n+import {ComponentFixture, fakeAsync, TestBed, tick, waitForAsync} from '@angular/core/testing';\n import {AbstractControl, AsyncValidator, COMPOSITION_BUFFER_MODE, FormControl, FormsModule, NG_ASYNC_VALIDATORS, NgForm, NgModel} from '@angular/forms';\n import {By} from '@angular/platform-browser/src/dom/debug/by';\n import {dispatchEvent, sortedClassList} from '@angular/platform-browser/testing/src/browser_util';\n@@ -168,7 +168,7 @@ import {NgModelCustomComp, NgModelCustomWrapper} from './value_accessor_integrat\n            expect(form.value).toEqual({});\n          }));\n \n-      it('should set status classes with ngModel', async(() => {\n+      it('should set status classes with ngModel', waitForAsync(() => {\n            const fixture = initTest(NgModelForm);\n            fixture.componentInstance.name = 'aa';\n            fixture.detectChanges();\n@@ -212,7 +212,7 @@ import {NgModelCustomComp, NgModelCustomWrapper} from './value_accessor_integrat\n            });\n          }));\n \n-      it('should set status classes with ngModelGroup and ngForm', async(() => {\n+      it('should set status classes with ngModelGroup and ngForm', waitForAsync(() => {\n            const fixture = initTest(NgModelGroupForm);\n            fixture.componentInstance.first = '';\n            fixture.detectChanges();\n@@ -1179,7 +1179,7 @@ import {NgModelCustomComp, NgModelCustomWrapper} from './value_accessor_integrat\n            expect(input.nativeElement.disabled).toBe(true);\n          }));\n \n-      it('should disable a custom control if disabled attr is added', async(() => {\n+      it('should disable a custom control if disabled attr is added', waitForAsync(() => {\n            const fixture = initTest(NgModelCustomWrapper, NgModelCustomComp);\n            fixture.componentInstance.name = 'Nancy';\n            fixture.componentInstance.isDisabled = true;"
        },
        {
            "sha": "23e1e23f8f5155aa77a567add6be6db6f315b80a",
            "filename": "packages/forms/test/value_accessor_integration_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fforms%2Ftest%2Fvalue_accessor_integration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fforms%2Ftest%2Fvalue_accessor_integration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Ftest%2Fvalue_accessor_integration_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import {Component, Directive, EventEmitter, Input, Output, Type, ViewChild} from '@angular/core';\n-import {async, ComponentFixture, fakeAsync, TestBed, tick} from '@angular/core/testing';\n+import {ComponentFixture, fakeAsync, TestBed, tick, waitForAsync} from '@angular/core/testing';\n import {AbstractControl, ControlValueAccessor, FormControl, FormGroup, FormsModule, NG_VALIDATORS, NG_VALUE_ACCESSOR, NgControl, NgForm, NgModel, ReactiveFormsModule, Validators} from '@angular/forms';\n import {By} from '@angular/platform-browser/src/dom/debug/by';\n import {dispatchEvent} from '@angular/platform-browser/testing/src/browser_util';\n@@ -1078,7 +1078,7 @@ import {dispatchEvent} from '@angular/platform-browser/testing/src/browser_util'\n       });\n \n       describe('in template-driven forms', () => {\n-        it('should support standard writing to view and model', async(() => {\n+        it('should support standard writing to view and model', waitForAsync(() => {\n              const fixture = initTest(NgModelCustomWrapper, NgModelCustomComp);\n              fixture.componentInstance.name = 'Nancy';\n              fixture.detectChanges();"
        },
        {
            "sha": "9f727b0c16fb0525a7c2d53e93bd0ddb04ef0803",
            "filename": "packages/misc/angular-in-memory-web-api/test/http-client-backend-service_spec.ts",
            "status": "modified",
            "additions": 48,
            "deletions": 45,
            "changes": 93,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fmisc%2Fangular-in-memory-web-api%2Ftest%2Fhttp-client-backend-service_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fmisc%2Fangular-in-memory-web-api%2Ftest%2Fhttp-client-backend-service_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fmisc%2Fangular-in-memory-web-api%2Ftest%2Fhttp-client-backend-service_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -10,7 +10,7 @@\n \n import {HTTP_INTERCEPTORS, HttpBackend, HttpClient, HttpClientModule, HttpEvent, HttpEventType, HttpHandler, HttpInterceptor, HttpRequest, HttpResponse} from '@angular/common/http';\n import {Injectable} from '@angular/core';\n-import {async, TestBed} from '@angular/core/testing';\n+import {TestBed, waitForAsync} from '@angular/core/testing';\n import {HttpClientBackendService, HttpClientInMemoryWebApiModule} from 'angular-in-memory-web-api';\n import {Observable, zip} from 'rxjs';\n import {concatMap, map, tap} from 'rxjs/operators';\n@@ -37,14 +37,14 @@ describe('HttpClient Backend Service', () => {\n       http = TestBed.get(HttpClient);\n     });\n \n-    it('can get heroes', async(() => {\n+    it('can get heroes', waitForAsync(() => {\n          http.get<Hero[]>('api/heroes')\n              .subscribe(\n                  heroes => expect(heroes.length).toBeGreaterThan(0, 'should have heroes'),\n                  failRequest);\n        }));\n \n-    it('GET should be a \"cold\" observable', async(() => {\n+    it('GET should be a \"cold\" observable', waitForAsync(() => {\n          const httpBackend = TestBed.get(HttpBackend);\n          const spy = spyOn(httpBackend, 'collectionHandler').and.callThrough();\n          const get$ = http.get<Hero[]>('api/heroes');\n@@ -58,7 +58,7 @@ describe('HttpClient Backend Service', () => {\n          }, failRequest);\n        }));\n \n-    it('GET should wait until after delay to respond', async(() => {\n+    it('GET should wait until after delay to respond', waitForAsync(() => {\n          // to make test fail, set `delay=0` above\n          let gotResponse = false;\n \n@@ -70,7 +70,7 @@ describe('HttpClient Backend Service', () => {\n          expect(gotResponse).toBe(false, 'should delay before response');\n        }));\n \n-    it('Should only initialize the db once', async(() => {\n+    it('Should only initialize the db once', waitForAsync(() => {\n          const httpBackend = TestBed.get(HttpBackend);\n          const spy = spyOn(httpBackend, 'resetDb').and.callThrough();\n \n@@ -86,13 +86,13 @@ describe('HttpClient Backend Service', () => {\n          expect(spy.calls.count()).toBe(1);\n        }));\n \n-    it('can get heroes (w/ a different base path)', async(() => {\n+    it('can get heroes (w/ a different base path)', waitForAsync(() => {\n          http.get<Hero[]>('some-base-path/heroes').subscribe(heroes => {\n            expect(heroes.length).toBeGreaterThan(0, 'should have heroes');\n          }, failRequest);\n        }));\n \n-    it('should 404 when GET unknown collection (after delay)', async(() => {\n+    it('should 404 when GET unknown collection (after delay)', waitForAsync(() => {\n          let gotError = false;\n          const url = 'api/unknown-collection';\n          http.get<Hero[]>(url).subscribe(\n@@ -104,60 +104,60 @@ describe('HttpClient Backend Service', () => {\n          expect(gotError).toBe(false, 'should not get error until after delay');\n        }));\n \n-    it('should return the hero w/id=1 for GET app/heroes/1', async(() => {\n+    it('should return the hero w/id=1 for GET app/heroes/1', waitForAsync(() => {\n          http.get<Hero>('api/heroes/1')\n              .subscribe(\n                  hero => expect(hero).toBeDefined('should find hero with id=1'), failRequest);\n        }));\n \n     // test where id is string that looks like a number\n-    it('should return the stringer w/id=\"10\" for GET app/stringers/10', async(() => {\n+    it('should return the stringer w/id=\"10\" for GET app/stringers/10', waitForAsync(() => {\n          http.get<Hero>('api/stringers/10')\n              .subscribe(\n                  hero => expect(hero).toBeDefined('should find string with id=\"10\"'), failRequest);\n        }));\n \n-    it('should return 1-item array for GET app/heroes/?id=1', async(() => {\n+    it('should return 1-item array for GET app/heroes/?id=1', waitForAsync(() => {\n          http.get<Hero[]>('api/heroes/?id=1')\n              .subscribe(\n                  heroes => expect(heroes.length).toBe(1, 'should find one hero w/id=1'),\n                  failRequest);\n        }));\n \n-    it('should return 1-item array for GET app/heroes?id=1', async(() => {\n+    it('should return 1-item array for GET app/heroes?id=1', waitForAsync(() => {\n          http.get<Hero[]>('api/heroes?id=1')\n              .subscribe(\n                  heroes => expect(heroes.length).toBe(1, 'should find one hero w/id=1'),\n                  failRequest);\n        }));\n \n-    it('should return undefined for GET app/heroes?id=not-found-id', async(() => {\n+    it('should return undefined for GET app/heroes?id=not-found-id', waitForAsync(() => {\n          http.get<Hero[]>('api/heroes?id=123456')\n              .subscribe(heroes => expect(heroes.length).toBe(0), failRequest);\n        }));\n \n-    it('should return 404 for GET app/heroes/not-found-id', async(() => {\n+    it('should return 404 for GET app/heroes/not-found-id', waitForAsync(() => {\n          const url = 'api/heroes/123456';\n          http.get<Hero[]>(url).subscribe(\n              () => fail(`should not have found data for '${url}'`),\n              err => expect(err.status).toBe(404, 'should have 404 status'));\n        }));\n \n-    it('can generate the id when add a hero with no id', async(() => {\n+    it('can generate the id when add a hero with no id', waitForAsync(() => {\n          const hero = new Hero(undefined, 'SuperDooper');\n          http.post<Hero>('api/heroes', hero).subscribe(replyHero => {\n            expect(replyHero.id).toBeDefined('added hero should have an id');\n            expect(replyHero).not.toBe(hero, 'reply hero should not be the request hero');\n          }, failRequest);\n        }));\n \n-    it('can get nobodies (empty collection)', async(() => {\n+    it('can get nobodies (empty collection)', waitForAsync(() => {\n          http.get<Hero[]>('api/nobodies').subscribe(nobodies => {\n            expect(nobodies.length).toBe(0, 'should have no nobodies');\n          }, failRequest);\n        }));\n \n-    it('can add a nobody with an id to empty nobodies collection', async(() => {\n+    it('can add a nobody with an id to empty nobodies collection', waitForAsync(() => {\n          const id = 'g-u-i-d';\n \n          http.post('api/nobodies', {id, name: 'Noman'})\n@@ -169,7 +169,8 @@ describe('HttpClient Backend Service', () => {\n              }, failRequest);\n        }));\n \n-    it('should fail when add a nobody without an id to empty nobodies collection', async(() => {\n+    it('should fail when add a nobody without an id to empty nobodies collection',\n+       waitForAsync(() => {\n          http.post('api/nobodies', {name: 'Noman'})\n              .subscribe(\n                  () => fail(`should not have been able to add 'Norman' to 'nobodies'`), err => {\n@@ -179,11 +180,11 @@ describe('HttpClient Backend Service', () => {\n        }));\n \n     describe('can reset the database', () => {\n-      it('to empty (object db)', async(() => resetDatabaseTest('object')));\n+      it('to empty (object db)', waitForAsync(() => resetDatabaseTest('object')));\n \n-      it('to empty (observable db)', async(() => resetDatabaseTest('observable')));\n+      it('to empty (observable db)', waitForAsync(() => resetDatabaseTest('observable')));\n \n-      it('to empty (promise db)', async(() => resetDatabaseTest('promise')));\n+      it('to empty (promise db)', waitForAsync(() => resetDatabaseTest('promise')));\n \n       function resetDatabaseTest(returnType: string) {\n         // Observable of the number of heroes and nobodies\n@@ -223,43 +224,44 @@ describe('HttpClient Backend Service', () => {\n       http = TestBed.get(HttpClient);\n     });\n \n-    it('can get heroes', async(() => {\n+    it('can get heroes', waitForAsync(() => {\n          http.get<Hero[]>('api/heroes')\n              .subscribe(\n                  heroes => expect(heroes.length).toBeGreaterThan(0, 'should have heroes'),\n                  failRequest);\n        }));\n \n-    it('can translate `foo/heroes` to `heroes` via `parsedRequestUrl` override', async(() => {\n+    it('can translate `foo/heroes` to `heroes` via `parsedRequestUrl` override',\n+       waitForAsync(() => {\n          http.get<Hero[]>('api/foo/heroes')\n              .subscribe(\n                  heroes => expect(heroes.length).toBeGreaterThan(0, 'should have heroes'),\n                  failRequest);\n        }));\n \n-    it('can get villains', async(() => {\n+    it('can get villains', waitForAsync(() => {\n          http.get<Hero[]>('api/villains')\n              .subscribe(\n                  villains => expect(villains.length).toBeGreaterThan(0, 'should have villains'),\n                  failRequest);\n        }));\n \n-    it('should 404 when POST to villains', async(() => {\n+    it('should 404 when POST to villains', waitForAsync(() => {\n          const url = 'api/villains';\n          http.post<Hero[]>(url, {id: 42, name: 'Dr. Evil'})\n              .subscribe(\n                  () => fail(`should not have POSTed data for '${url}'`),\n                  err => expect(err.status).toBe(404, 'should have 404 status'));\n        }));\n \n-    it('should 404 when GET unknown collection', async(() => {\n+    it('should 404 when GET unknown collection', waitForAsync(() => {\n          const url = 'api/unknown-collection';\n          http.get<Hero[]>(url).subscribe(\n              () => fail(`should not have found data for '${url}'`),\n              err => expect(err.status).toBe(404, 'should have 404 status'));\n        }));\n \n-    it('should use genId override to add new hero, \"Maxinius\"', async(() => {\n+    it('should use genId override to add new hero, \"Maxinius\"', waitForAsync(() => {\n          http.post('api/heroes', {name: 'Maxinius'})\n              .pipe(concatMap(() => http.get<Hero[]>('api/heroes?name=Maxi')))\n              .subscribe(heroes => {\n@@ -269,7 +271,8 @@ describe('HttpClient Backend Service', () => {\n              }, failRequest);\n        }));\n \n-    it('should use genId override guid generator for a new nobody without an id', async(() => {\n+    it('should use genId override guid generator for a new nobody without an id',\n+       waitForAsync(() => {\n          http.post('api/nobodies', {name: 'Noman'})\n              .pipe(concatMap(() => http.get<{id: string; name: string}[]>('api/nobodies')))\n              .subscribe(nobodies => {\n@@ -280,11 +283,11 @@ describe('HttpClient Backend Service', () => {\n        }));\n \n     describe('can reset the database', () => {\n-      it('to empty (object db)', async(() => resetDatabaseTest('object')));\n+      it('to empty (object db)', waitForAsync(() => resetDatabaseTest('object')));\n \n-      it('to empty (observable db)', async(() => resetDatabaseTest('observable')));\n+      it('to empty (observable db)', waitForAsync(() => resetDatabaseTest('observable')));\n \n-      it('to empty (promise db)', async(() => resetDatabaseTest('promise')));\n+      it('to empty (promise db)', waitForAsync(() => resetDatabaseTest('promise')));\n \n       function resetDatabaseTest(returnType: string) {\n         // Observable of the number of heroes, nobodies and villains\n@@ -331,27 +334,27 @@ describe('HttpClient Backend Service', () => {\n         heroService = TestBed.get(HeroService);\n       });\n \n-      it('can get heroes', async(() => {\n+      it('can get heroes', waitForAsync(() => {\n            heroService.getHeroes().subscribe(heroes => {\n              expect(heroes.length).toBeGreaterThan(0, 'should have heroes');\n            }, failRequest);\n          }));\n \n-      it('can get hero w/ id=1', async(() => {\n+      it('can get hero w/ id=1', waitForAsync(() => {\n            heroService.getHero(1).subscribe(hero => {\n              expect(hero.name).toBe('Windstorm');\n            }, () => fail('getHero failed'));\n          }));\n \n-      it('should 404 when hero id not found', async(() => {\n+      it('should 404 when hero id not found', waitForAsync(() => {\n            const id = 123456;\n            heroService.getHero(id).subscribe(\n                () => fail(`should not have found hero for id='${id}'`), err => {\n                  expect(err.status).toBe(404, 'should have 404 status');\n                });\n          }));\n \n-      it('can add a hero', async(() => {\n+      it('can add a hero', waitForAsync(() => {\n            heroService.addHero('FunkyBob')\n                .pipe(\n                    tap(hero => expect(hero.name).toBe('FunkyBob')),\n@@ -363,23 +366,23 @@ describe('HttpClient Backend Service', () => {\n          }),\n          10000);\n \n-      it('can delete a hero', async(() => {\n+      it('can delete a hero', waitForAsync(() => {\n            const id = 1;\n            heroService.deleteHero(id).subscribe((_: {}) => expect(_).toBeDefined(), failRequest);\n          }));\n \n-      it('should allow delete of non-existent hero', async(() => {\n+      it('should allow delete of non-existent hero', waitForAsync(() => {\n            const id = 123456;\n            heroService.deleteHero(id).subscribe((_: {}) => expect(_).toBeDefined(), failRequest);\n          }));\n \n-      it('can search for heroes by name containing \"a\"', async(() => {\n+      it('can search for heroes by name containing \"a\"', waitForAsync(() => {\n            heroService.searchHeroes('a').subscribe((heroes: Hero[]) => {\n              expect(heroes.length).toBe(3, 'should find 3 heroes with letter \"a\"');\n            }, failRequest);\n          }));\n \n-      it('can update existing hero', async(() => {\n+      it('can update existing hero', waitForAsync(() => {\n            const id = 1;\n            heroService.getHero(id)\n                .pipe(\n@@ -394,7 +397,7 @@ describe('HttpClient Backend Service', () => {\n          }),\n          10000);\n \n-      it('should create new hero when try to update non-existent hero', async(() => {\n+      it('should create new hero when try to update non-existent hero', waitForAsync(() => {\n            const falseHero = new Hero(12321, 'DryMan');\n            heroService.updateHero(falseHero).subscribe(\n                hero => expect(hero.name).toBe(falseHero.name), failRequest);\n@@ -446,7 +449,7 @@ describe('HttpClient Backend Service', () => {\n       expect(ti).toBeDefined();\n     });\n \n-    it('should have GET request header from test interceptor', async(() => {\n+    it('should have GET request header from test interceptor', waitForAsync(() => {\n          const handle = spyOn(httpBackend, 'handle').and.callThrough();\n \n          http.get<Hero[]>('api/heroes').subscribe(heroes => {\n@@ -459,7 +462,7 @@ describe('HttpClient Backend Service', () => {\n          }, failRequest);\n        }));\n \n-    it('should have GET response header from test interceptor', async(() => {\n+    it('should have GET response header from test interceptor', waitForAsync(() => {\n          let gotResponse = false;\n          const req = new HttpRequest<any>('GET', 'api/heroes');\n          http.request<Hero[]>(req).subscribe(event => {\n@@ -503,7 +506,7 @@ describe('HttpClient Backend Service', () => {\n       jasmine.Ajax.uninstall();\n     });\n \n-    it('can get heroes (no passthru)', async(() => {\n+    it('can get heroes (no passthru)', waitForAsync(() => {\n          http.get<Hero[]>('api/heroes').subscribe(heroes => {\n            expect(createPassThruBackend).not.toHaveBeenCalled();\n            expect(heroes.length).toBeGreaterThan(0, 'should have heroes');\n@@ -513,7 +516,7 @@ describe('HttpClient Backend Service', () => {\n     // `passthru` is NOT a collection in the data store\n     // so requests for it should pass thru to the \"real\" server\n \n-    it('can GET passthru', async(() => {\n+    it('can GET passthru', waitForAsync(() => {\n          jasmine.Ajax.stubRequest('api/passthru').andReturn({\n            'status': 200,\n            'contentType': 'application/json',\n@@ -525,7 +528,7 @@ describe('HttpClient Backend Service', () => {\n          }, failRequest);\n        }));\n \n-    it('can ADD to passthru', async(() => {\n+    it('can ADD to passthru', waitForAsync(() => {\n          jasmine.Ajax.stubRequest('api/passthru').andReturn({\n            'status': 200,\n            'contentType': 'application/json',\n@@ -554,7 +557,7 @@ describe('HttpClient Backend Service', () => {\n       http = TestBed.get(HttpClient);\n     });\n \n-    it('can get heroes (encapsulated)', async(() => {\n+    it('can get heroes (encapsulated)', waitForAsync(() => {\n          http.get<{data: any}>('api/heroes')\n              .pipe(map(data => data.data as Hero[]))\n              .subscribe("
        },
        {
            "sha": "9953fa5af8a43bf83bc61f90f58dff22d7628e2a",
            "filename": "packages/platform-browser-dynamic/test/resource_loader/resource_loader_cache_spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fplatform-browser-dynamic%2Ftest%2Fresource_loader%2Fresource_loader_cache_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fplatform-browser-dynamic%2Ftest%2Fresource_loader%2Fresource_loader_cache_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-browser-dynamic%2Ftest%2Fresource_loader%2Fresource_loader_cache_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -8,7 +8,7 @@\n \n import {ResourceLoader, UrlResolver} from '@angular/compiler';\n import {Component} from '@angular/core';\n-import {async, fakeAsync, TestBed, tick} from '@angular/core/testing';\n+import {fakeAsync, TestBed, tick, waitForAsync} from '@angular/core/testing';\n import {CachedResourceLoader} from '@angular/platform-browser-dynamic/src/resource_loader/resource_loader_cache';\n import {setTemplateCache} from '@angular/platform-browser-dynamic/test/resource_loader/resource_loader_cache_setter';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n@@ -29,14 +29,14 @@ if (isBrowser) {\n       }).toThrowError('CachedResourceLoader: Template cache was not found in $templateCache.');\n     });\n \n-    it('should resolve the Promise with the cached file content on success', async(() => {\n+    it('should resolve the Promise with the cached file content on success', waitForAsync(() => {\n          resourceLoader = createCachedResourceLoader();\n          resourceLoader.get('test.html').then((text) => {\n            expect(text).toBe('<div>Hello</div>');\n          });\n        }));\n \n-    it('should reject the Promise on failure', async(() => {\n+    it('should reject the Promise on failure', waitForAsync(() => {\n          resourceLoader = createCachedResourceLoader();\n          resourceLoader.get('unknown.html').then(() => {\n            throw new Error('Not expected to succeed.');"
        },
        {
            "sha": "d8b51bea028109f70eacb89c01c0dd3ef95532bf",
            "filename": "packages/platform-browser-dynamic/test/testing_public_browser_spec.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fplatform-browser-dynamic%2Ftest%2Ftesting_public_browser_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fplatform-browser-dynamic%2Ftest%2Ftesting_public_browser_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-browser-dynamic%2Ftest%2Ftesting_public_browser_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -8,7 +8,7 @@\n \n import {ResourceLoader} from '@angular/compiler';\n import {Compiler, Component, NgModule} from '@angular/core';\n-import {async, fakeAsync, inject, TestBed, tick} from '@angular/core/testing';\n+import {fakeAsync, inject, TestBed, tick, waitForAsync} from '@angular/core/testing';\n import {ResourceLoaderImpl} from '@angular/platform-browser-dynamic/src/resource_loader/resource_loader_impl';\n \n \n@@ -54,7 +54,7 @@ if (isBrowser) {\n         expect(actuallyDone).toEqual(true);\n       });\n \n-      it('should run async tests with ResourceLoaders', async(() => {\n+      it('should run async tests with ResourceLoaders', waitForAsync(() => {\n            const resourceLoader = new ResourceLoaderImpl();\n            resourceLoader\n                .get('/base/angular/packages/platform-browser/test/static_assets/test.html')\n@@ -132,7 +132,7 @@ if (isBrowser) {\n       it('should fail when an ResourceLoader fails', done => {\n         const itPromise = patchJasmineIt();\n \n-        it('should fail with an error from a promise', async(() => {\n+        it('should fail with an error from a promise', waitForAsync(() => {\n              TestBed.configureTestingModule({declarations: [BadTemplateUrl]});\n              TestBed.compileComponents();\n            }));\n@@ -151,7 +151,7 @@ if (isBrowser) {\n     });\n \n     describe('TestBed createComponent', function() {\n-      it('should allow an external templateUrl', async(() => {\n+      it('should allow an external templateUrl', waitForAsync(() => {\n            TestBed.configureTestingModule({declarations: [ExternalTemplateComp]});\n            TestBed.compileComponents().then(() => {\n              const componentFixture = TestBed.createComponent(ExternalTemplateComp);"
        },
        {
            "sha": "073592ac46ca31ce7b1c74c10e56066525376871",
            "filename": "packages/platform-browser/test/testing_public_spec.ts",
            "status": "modified",
            "additions": 17,
            "deletions": 17,
            "changes": 34,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fplatform-browser%2Ftest%2Ftesting_public_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fplatform-browser%2Ftest%2Ftesting_public_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-browser%2Ftest%2Ftesting_public_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -8,7 +8,7 @@\n \n import {CompilerConfig, ResourceLoader} from '@angular/compiler';\n import {Compiler, Component, ComponentFactoryResolver, CUSTOM_ELEMENTS_SCHEMA, Directive, Inject, Injectable, InjectionToken, Injector, Input, NgModule, Optional, Pipe, SkipSelf, stringify as stringify} from '@angular/core';\n-import {async, fakeAsync, getTestBed, inject, TestBed, tick, withModule} from '@angular/core/testing';\n+import {fakeAsync, getTestBed, inject, TestBed, tick, waitForAsync, withModule} from '@angular/core/testing';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n import {ivyEnabled, modifiedInIvy, obsoleteInIvy, onlyInIvy} from '@angular/private/testing';\n \n@@ -146,11 +146,11 @@ const bTok = new InjectionToken<string>('b');\n         }, 0);\n       });\n \n-      it('should run async tests with tasks', async(function(this: TestContext) {\n+      it('should run async tests with tasks', waitForAsync(function(this: TestContext) {\n            setTimeout(() => this.actuallyDone = true, 0);\n          }));\n \n-      it('should run async tests with promises', async(function(this: TestContext) {\n+      it('should run async tests with promises', waitForAsync(function(this: TestContext) {\n            const p = new Promise((resolve, reject) => setTimeout(resolve, 10));\n            p.then(() => this.actuallyDone = true);\n          }));\n@@ -192,7 +192,7 @@ const bTok = new InjectionToken<string>('b');\n              }));\n \n       it('should preserve context when async and inject helpers are combined',\n-         async(inject([], function(this: TestContext) {\n+         waitForAsync(inject([], function(this: TestContext) {\n            setTimeout(() => this.contextModified = true, 0);\n          })));\n \n@@ -214,7 +214,7 @@ const bTok = new InjectionToken<string>('b');\n              }));\n \n           it('should wait until returned promises',\n-             async(inject([FancyService], (service: FancyService) => {\n+             waitForAsync(inject([FancyService], (service: FancyService) => {\n                service.getAsyncValue().then((value) => expect(value).toEqual('async value'));\n                service.getTimeoutValue().then((value) => expect(value).toEqual('timeout value'));\n              })));\n@@ -251,7 +251,7 @@ const bTok = new InjectionToken<string>('b');\n           });\n \n           describe('using async beforeEach', () => {\n-            beforeEach(async(inject([FancyService], (service: FancyService) => {\n+            beforeEach(waitForAsync(inject([FancyService], (service: FancyService) => {\n               service.getAsyncValue().then((value) => service.value = value);\n             })));\n \n@@ -335,7 +335,7 @@ const bTok = new InjectionToken<string>('b');\n       });\n \n       describe('components with template url', () => {\n-        beforeEach(async(() => {\n+        beforeEach(waitForAsync(() => {\n           TestBed.configureTestingModule({declarations: [CompWithUrlTemplate]});\n           TestBed.compileComponents();\n         }));\n@@ -892,9 +892,9 @@ const bTok = new InjectionToken<string>('b');\n         const itPromise = patchJasmineIt();\n         const barError = new Error('bar');\n \n-        it('throws an async error', async(inject([], () => setTimeout(() => {\n-                                                       throw barError;\n-                                                     }, 0))));\n+        it('throws an async error', waitForAsync(inject([], () => setTimeout(() => {\n+                                                              throw barError;\n+                                                            }, 0))));\n \n         itPromise.then(() => done.fail('Expected test to fail, but it did not'), (err) => {\n           expect(err).toEqual(barError);\n@@ -906,7 +906,7 @@ const bTok = new InjectionToken<string>('b');\n       it('should fail when a returned promise is rejected', (done) => {\n         const itPromise = patchJasmineIt();\n \n-        it('should fail with an error from a promise', async(inject([], () => {\n+        it('should fail with an error from a promise', waitForAsync(inject([], () => {\n              let reject: (error: any) => void = undefined!;\n              const promise = new Promise((_, rej) => reject = rej);\n              const p = promise.then(() => expect(1).toEqual(2));\n@@ -1011,14 +1011,14 @@ Did you run and wait for 'resolveComponentResources()'?` :\n         });\n       });\n \n-      it('should instantiate a component with valid DOM', async(() => {\n+      it('should instantiate a component with valid DOM', waitForAsync(() => {\n            const fixture = TestBed.createComponent(ChildComp);\n            fixture.detectChanges();\n \n            expect(fixture.nativeElement).toHaveText('Original Child');\n          }));\n \n-      it('should allow changing members of the component', async(() => {\n+      it('should allow changing members of the component', waitForAsync(() => {\n            const componentFixture = TestBed.createComponent(MyIfComp);\n            componentFixture.detectChanges();\n            expect(componentFixture.nativeElement).toHaveText('MyIf()');\n@@ -1028,14 +1028,14 @@ Did you run and wait for 'resolveComponentResources()'?` :\n            expect(componentFixture.nativeElement).toHaveText('MyIf(More)');\n          }));\n \n-      it('should override a template', async(() => {\n+      it('should override a template', waitForAsync(() => {\n            TestBed.overrideComponent(ChildComp, {set: {template: '<span>Mock</span>'}});\n            const componentFixture = TestBed.createComponent(ChildComp);\n            componentFixture.detectChanges();\n            expect(componentFixture.nativeElement).toHaveText('Mock');\n          }));\n \n-      it('should override a provider', async(() => {\n+      it('should override a provider', waitForAsync(() => {\n            TestBed.overrideComponent(\n                TestProvidersComp,\n                {set: {providers: [{provide: FancyService, useClass: MockFancyService}]}});\n@@ -1045,7 +1045,7 @@ Did you run and wait for 'resolveComponentResources()'?` :\n          }));\n \n \n-      it('should override a viewProvider', async(() => {\n+      it('should override a viewProvider', waitForAsync(() => {\n            TestBed.overrideComponent(\n                TestViewProvidersComp,\n                {set: {viewProviders: [{provide: FancyService, useClass: MockFancyService}]}});\n@@ -1065,7 +1065,7 @@ Did you run and wait for 'resolveComponentResources()'?` :\n         });\n       });\n \n-      it('should override component dependencies', async(() => {\n+      it('should override component dependencies', waitForAsync(() => {\n            const componentFixture = TestBed.createComponent(ParentComp);\n            componentFixture.detectChanges();\n            expect(componentFixture.nativeElement).toHaveText('Parent(Mock)');"
        },
        {
            "sha": "8fc8c91325e887f7ad0b75852244cc1a22cbd58c",
            "filename": "packages/platform-server/test/integration_spec.ts",
            "status": "modified",
            "additions": 31,
            "deletions": 31,
            "changes": 62,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fplatform-server%2Ftest%2Fintegration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fplatform-server%2Ftest%2Fintegration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-server%2Ftest%2Fintegration_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -11,7 +11,7 @@ import {DOCUMENT, isPlatformServer, PlatformLocation, getDOM as getDOM} from '\n import {HTTP_INTERCEPTORS, HttpClient, HttpClientModule, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest} from '@angular/common/http';\n import {HttpClientTestingModule, HttpTestingController} from '@angular/common/http/testing';\n import {ApplicationRef, CompilerFactory, Component, destroyPlatform, getPlatform, HostListener, Inject, Injectable, Input, NgModule, NgZone, PLATFORM_ID, PlatformRef, ViewEncapsulation} from '@angular/core';\n-import {async, inject} from '@angular/core/testing';\n+import {inject, waitForAsync} from '@angular/core/testing';\n import {BrowserModule, makeStateKey, Title, TransferState} from '@angular/platform-browser';\n import {BEFORE_APP_SERIALIZED, INITIAL_CONFIG, platformDynamicServer, PlatformState, renderModule, renderModuleFactory, ServerModule, ServerTransferStateModule} from '@angular/platform-server';\n import {ivyEnabled, modifiedInIvy} from '@angular/private/testing';\n@@ -409,7 +409,7 @@ describe('platform-server integration', () => {\n     if (getPlatform()) destroyPlatform();\n   });\n \n-  it('should bootstrap', async(() => {\n+  it('should bootstrap', waitForAsync(() => {\n        const platform =\n            platformDynamicServer([{provide: INITIAL_CONFIG, useValue: {document: '<app></app>'}}]);\n \n@@ -426,7 +426,7 @@ describe('platform-server integration', () => {\n        });\n      }));\n \n-  it('should allow multiple platform instances', async(() => {\n+  it('should allow multiple platform instances', waitForAsync(() => {\n        const platform =\n            platformDynamicServer([{provide: INITIAL_CONFIG, useValue: {document: '<app></app>'}}]);\n \n@@ -447,7 +447,7 @@ describe('platform-server integration', () => {\n        });\n      }));\n \n-  it('adds title to the document using Title service', async(() => {\n+  it('adds title to the document using Title service', waitForAsync(() => {\n        const platform = platformDynamicServer([{\n          provide: INITIAL_CONFIG,\n          useValue: {document: '<html><head><title></title></head><body><app></app></body></html>'}\n@@ -461,7 +461,7 @@ describe('platform-server integration', () => {\n        });\n      }));\n \n-  it('should get base href from document', async(() => {\n+  it('should get base href from document', waitForAsync(() => {\n        const platform = platformDynamicServer([{\n          provide: INITIAL_CONFIG,\n          useValue: {document: '<html><head><base href=\"/\"></head><body><app></app></body></html>'}\n@@ -473,7 +473,7 @@ describe('platform-server integration', () => {\n        });\n      }));\n \n-  it('adds styles with ng-transition attribute', async(() => {\n+  it('adds styles with ng-transition attribute', waitForAsync(() => {\n        const platform = platformDynamicServer([{\n          provide: INITIAL_CONFIG,\n          useValue: {document: '<html><head></head><body><app></app></body></html>'}\n@@ -488,7 +488,7 @@ describe('platform-server integration', () => {\n        });\n      }));\n \n-  it('copies known properties to attributes', async(() => {\n+  it('copies known properties to attributes', waitForAsync(() => {\n        const platform =\n            platformDynamicServer([{provide: INITIAL_CONFIG, useValue: {document: '<app></app>'}}]);\n        platform.bootstrapModule(ImageExampleModule).then(ref => {\n@@ -500,7 +500,7 @@ describe('platform-server integration', () => {\n      }));\n \n   describe('PlatformLocation', () => {\n-    it('is injectable', async(() => {\n+    it('is injectable', waitForAsync(() => {\n          const platform = platformDynamicServer(\n              [{provide: INITIAL_CONFIG, useValue: {document: '<app></app>'}}]);\n          platform.bootstrapModule(ExampleModule).then(appRef => {\n@@ -551,7 +551,7 @@ describe('platform-server integration', () => {\n             expect(location.hash).toBe('');\n           });\n     });\n-    it('pushState causes the URL to update', async(() => {\n+    it('pushState causes the URL to update', waitForAsync(() => {\n          const platform = platformDynamicServer(\n              [{provide: INITIAL_CONFIG, useValue: {document: '<app></app>'}}]);\n          platform.bootstrapModule(ExampleModule).then(appRef => {\n@@ -601,7 +601,7 @@ describe('platform-server integration', () => {\n       expect(called).toBe(true);\n     });\n \n-    it('using long form should work', async(() => {\n+    it('using long form should work', waitForAsync(() => {\n          const platform =\n              platformDynamicServer([{provide: INITIAL_CONFIG, useValue: {document: doc}}]);\n \n@@ -618,15 +618,15 @@ describe('platform-server integration', () => {\n              });\n        }));\n \n-    it('using renderModule should work', async(() => {\n+    it('using renderModule should work', waitForAsync(() => {\n          renderModule(AsyncServerModule, {document: doc}).then(output => {\n            expect(output).toBe(expectedOutput);\n            called = true;\n          });\n        }));\n \n     modifiedInIvy('Will not support binding to innerText in Ivy since domino does not')\n-        .it('should support binding to innerText', async(() => {\n+        .it('should support binding to innerText', waitForAsync(() => {\n               renderModule(InnerTextModule, {document: doc}).then(output => {\n                 expect(output).toBe(\n                     '<html><head></head><body><app ng-version=\"0.0.0-PLACEHOLDER\"><div innertext=\"Some text\">Some text</div></app></body></html>');\n@@ -635,7 +635,7 @@ describe('platform-server integration', () => {\n             }));\n \n     it('using renderModuleFactory should work',\n-       async(inject([PlatformRef], (defaultPlatform: PlatformRef) => {\n+       waitForAsync(inject([PlatformRef], (defaultPlatform: PlatformRef) => {\n          const compilerFactory: CompilerFactory =\n              defaultPlatform.injector.get(CompilerFactory, null)!;\n          const moduleFactory =\n@@ -646,7 +646,7 @@ describe('platform-server integration', () => {\n          });\n        })));\n \n-    it('works with SVG elements', async(() => {\n+    it('works with SVG elements', waitForAsync(() => {\n          renderModule(SVGServerModule, {document: doc}).then(output => {\n            expect(output).toBe(\n                '<html><head></head><body><app ng-version=\"0.0.0-PLACEHOLDER\">' +\n@@ -655,7 +655,7 @@ describe('platform-server integration', () => {\n          });\n        }));\n \n-    it('works with animation', async(() => {\n+    it('works with animation', waitForAsync(() => {\n          renderModule(AnimationServerModule, {document: doc}).then(output => {\n            expect(output).toContain('Works!');\n            expect(output).toContain('ng-trigger-myAnimation');\n@@ -666,7 +666,7 @@ describe('platform-server integration', () => {\n          });\n        }));\n \n-    it('should handle ViewEncapsulation.Native', async(() => {\n+    it('should handle ViewEncapsulation.Native', waitForAsync(() => {\n          renderModule(NativeExampleModule, {document: doc}).then(output => {\n            expect(output).not.toBe('');\n            expect(output).toContain('color: red');\n@@ -675,15 +675,15 @@ describe('platform-server integration', () => {\n        }));\n \n \n-    it('sets a prefix for the _nghost and _ngcontent attributes', async(() => {\n+    it('sets a prefix for the _nghost and _ngcontent attributes', waitForAsync(() => {\n          renderModule(ExampleStylesModule, {document: doc}).then(output => {\n            expect(output).toMatch(\n                /<html><head><style ng-transition=\"example-styles\">div\\[_ngcontent-sc\\d+\\] {color: blue; } \\[_nghost-sc\\d+\\] { color: red; }<\\/style><\\/head><body><app _nghost-sc\\d+=\"\" ng-version=\"0.0.0-PLACEHOLDER\"><div _ngcontent-sc\\d+=\"\">Works!<\\/div><\\/app><\\/body><\\/html>/);\n            called = true;\n          });\n        }));\n \n-    it('should handle false values on attributes', async(() => {\n+    it('should handle false values on attributes', waitForAsync(() => {\n          renderModule(FalseAttributesModule, {document: doc}).then(output => {\n            expect(output).toBe(\n                '<html><head></head><body><app ng-version=\"0.0.0-PLACEHOLDER\">' +\n@@ -692,7 +692,7 @@ describe('platform-server integration', () => {\n          });\n        }));\n \n-    it('should handle element property \"name\"', async(() => {\n+    it('should handle element property \"name\"', waitForAsync(() => {\n          renderModule(NameModule, {document: doc}).then(output => {\n            expect(output).toBe(\n                '<html><head></head><body><app ng-version=\"0.0.0-PLACEHOLDER\">' +\n@@ -701,7 +701,7 @@ describe('platform-server integration', () => {\n          });\n        }));\n \n-    it('should work with sanitizer to handle \"innerHTML\"', async(() => {\n+    it('should work with sanitizer to handle \"innerHTML\"', waitForAsync(() => {\n          // Clear out any global states. These should be set when platform-server\n          // is initialized.\n          (global as any).Node = undefined;\n@@ -714,7 +714,7 @@ describe('platform-server integration', () => {\n          });\n        }));\n \n-    it('should handle element property \"hidden\"', async(() => {\n+    it('should handle element property \"hidden\"', waitForAsync(() => {\n          renderModule(HiddenModule, {document: doc}).then(output => {\n            expect(output).toBe(\n                '<html><head></head><body><app ng-version=\"0.0.0-PLACEHOLDER\">' +\n@@ -723,7 +723,7 @@ describe('platform-server integration', () => {\n          });\n        }));\n \n-    it('should call render hook', async(() => {\n+    it('should call render hook', waitForAsync(() => {\n          renderModule(RenderHookModule, {document: doc}).then(output => {\n            // title should be added by the render hook.\n            expect(output).toBe(\n@@ -733,7 +733,7 @@ describe('platform-server integration', () => {\n          });\n        }));\n \n-    it('should call multiple render hooks', async(() => {\n+    it('should call multiple render hooks', waitForAsync(() => {\n          const consoleSpy = spyOn(console, 'warn');\n          renderModule(MultiRenderHookModule, {document: doc}).then(output => {\n            // title should be added by the render hook.\n@@ -745,7 +745,7 @@ describe('platform-server integration', () => {\n          });\n        }));\n \n-    it('should call async render hooks', async(() => {\n+    it('should call async render hooks', waitForAsync(() => {\n          renderModule(AsyncRenderHookModule, {document: doc}).then(output => {\n            // title should be added by the render hook.\n            expect(output).toBe(\n@@ -755,7 +755,7 @@ describe('platform-server integration', () => {\n          });\n        }));\n \n-    it('should call multiple async and sync render hooks', async(() => {\n+    it('should call multiple async and sync render hooks', waitForAsync(() => {\n          const consoleSpy = spyOn(console, 'warn');\n          renderModule(AsyncMultiRenderHookModule, {document: doc}).then(output => {\n            // title should be added by the render hook.\n@@ -769,15 +769,15 @@ describe('platform-server integration', () => {\n   });\n \n   describe('HttpClient', () => {\n-    it('can inject HttpClient', async(() => {\n+    it('can inject HttpClient', waitForAsync(() => {\n          const platform = platformDynamicServer(\n              [{provide: INITIAL_CONFIG, useValue: {document: '<app></app>'}}]);\n          platform.bootstrapModule(HttpClientExampleModule).then(ref => {\n            expect(ref.injector.get(HttpClient) instanceof HttpClient).toBeTruthy();\n          });\n        }));\n \n-    it('can make HttpClient requests', async(() => {\n+    it('can make HttpClient requests', waitForAsync(() => {\n          const platform = platformDynamicServer(\n              [{provide: INITIAL_CONFIG, useValue: {document: '<app></app>'}}]);\n          platform.bootstrapModule(HttpClientExampleModule).then(ref => {\n@@ -938,7 +938,7 @@ describe('platform-server integration', () => {\n          });\n     });\n \n-    it('requests are macrotasks', async(() => {\n+    it('requests are macrotasks', waitForAsync(() => {\n          const platform = platformDynamicServer(\n              [{provide: INITIAL_CONFIG, useValue: {document: '<app></app>'}}]);\n          platform.bootstrapModule(HttpClientExampleModule).then(ref => {\n@@ -984,15 +984,15 @@ describe('platform-server integration', () => {\n       expect(called).toBe(true);\n     });\n \n-    it('adds transfer script tag when using renderModule', async(() => {\n+    it('adds transfer script tag when using renderModule', waitForAsync(() => {\n          renderModule(TransferStoreModule, {document: '<app></app>'}).then(output => {\n            expect(output).toBe(defaultExpectedOutput);\n            called = true;\n          });\n        }));\n \n     it('adds transfer script tag when using renderModuleFactory',\n-       async(inject([PlatformRef], (defaultPlatform: PlatformRef) => {\n+       waitForAsync(inject([PlatformRef], (defaultPlatform: PlatformRef) => {\n          const compilerFactory: CompilerFactory =\n              defaultPlatform.injector.get(CompilerFactory, null)!;\n          const moduleFactory =\n@@ -1003,7 +1003,7 @@ describe('platform-server integration', () => {\n          });\n        })));\n \n-    it('cannot break out of <script> tag in serialized output', async(() => {\n+    it('cannot break out of <script> tag in serialized output', waitForAsync(() => {\n          renderModule(EscapedTransferStoreModule, {\n            document: '<esc-app></esc-app>'\n          }).then(output => {"
        },
        {
            "sha": "aee46319fcab866a1cdd3ef1403ad9f2bffcb627",
            "filename": "packages/upgrade/src/dynamic/test/upgrade_spec.ts",
            "status": "modified",
            "additions": 63,
            "deletions": 59,
            "changes": 122,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fupgrade%2Fsrc%2Fdynamic%2Ftest%2Fupgrade_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fupgrade%2Fsrc%2Fdynamic%2Ftest%2Fupgrade_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fupgrade%2Fsrc%2Fdynamic%2Ftest%2Fupgrade_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import {ChangeDetectorRef, Component, destroyPlatform, EventEmitter, forwardRef, Input, NgModule, NgModuleFactory, NgZone, NO_ERRORS_SCHEMA, OnChanges, OnDestroy, Output, SimpleChange, SimpleChanges, Testability} from '@angular/core';\n-import {async, fakeAsync, flushMicrotasks, tick} from '@angular/core/testing';\n+import {fakeAsync, flushMicrotasks, tick, waitForAsync} from '@angular/core/testing';\n import {BrowserModule} from '@angular/platform-browser';\n import {platformBrowserDynamic} from '@angular/platform-browser-dynamic';\n \n@@ -30,7 +30,7 @@ withEachNg1Version(() => {\n       it('should have AngularJS loaded',\n          () => expect(angular.getAngularJSGlobal().version.major).toBe(1));\n \n-      it('should instantiate ng2 in ng1 template and project content', async(() => {\n+      it('should instantiate ng2 in ng1 template and project content', waitForAsync(() => {\n            const ng1Module = angular.module_('ng1', []);\n \n            @Component({\n@@ -55,7 +55,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should instantiate ng1 in ng2 template and project content', async(() => {\n+      it('should instantiate ng1 in ng2 template and project content', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n \n@@ -86,7 +86,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('supports the compilerOptions argument', async(() => {\n+      it('supports the compilerOptions argument', waitForAsync(() => {\n            const platformRef = platformBrowserDynamic();\n            spyOn(platformRef, 'bootstrapModule').and.callThrough();\n            spyOn(platformRef, 'bootstrapModuleFactory').and.callThrough();\n@@ -170,7 +170,7 @@ withEachNg1Version(() => {\n     });\n \n     describe('change-detection', () => {\n-      it('should not break if a $digest is already in progress', async(() => {\n+      it('should not break if a $digest is already in progress', waitForAsync(() => {\n            @Component({selector: 'my-app', template: ''})\n            class AppComponent {\n            }\n@@ -209,7 +209,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should interleave scope and component expressions', async(() => {\n+      it('should interleave scope and component expressions', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n            const log: string[] = [];\n@@ -256,7 +256,8 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should propagate changes to a downgraded component inside the ngZone', async(() => {\n+      it('should propagate changes to a downgraded component inside the ngZone',\n+         waitForAsync(() => {\n            let appComponent: AppComponent;\n            let upgradeRef: UpgradeAdapterRef;\n \n@@ -342,7 +343,7 @@ withEachNg1Version(() => {\n     });\n \n     describe('downgrade ng2 component', () => {\n-      it('should allow non-element selectors for downgraded components', async(() => {\n+      it('should allow non-element selectors for downgraded components', waitForAsync(() => {\n            @Component({selector: '[itWorks]', template: 'It works'})\n            class WorksComponent {\n            }\n@@ -361,7 +362,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should bind properties, events', async(() => {\n+      it('should bind properties, events', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []).value($EXCEPTION_HANDLER, (err: any) => {\n              throw err;\n@@ -483,7 +484,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support two-way binding and event listener', async(() => {\n+      it('should support two-way binding and event listener', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const listenerSpy = jasmine.createSpy('$rootScope.listener');\n            const ng1Module = angular.module_('ng1', []).run(($rootScope: angular.IScope) => {\n@@ -532,7 +533,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should initialize inputs in time for `ngOnChanges`', async(() => {\n+      it('should initialize inputs in time for `ngOnChanges`', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n \n            @Component({\n@@ -591,7 +592,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should bind to ng-model', async(() => {\n+      it('should bind to ng-model', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n \n@@ -661,7 +662,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should properly run cleanup when ng1 directive is destroyed', async(() => {\n+      it('should properly run cleanup when ng1 directive is destroyed', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n            const onDestroyed: EventEmitter<string> = new EventEmitter<string>();\n@@ -700,7 +701,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should properly run cleanup with multiple levels of nesting', async(() => {\n+      it('should properly run cleanup with multiple levels of nesting', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            let destroyed = false;\n \n@@ -745,7 +746,8 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should fallback to the root ng2.injector when compiled outside the dom', async(() => {\n+      it('should fallback to the root ng2.injector when compiled outside the dom',\n+         waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n \n@@ -781,7 +783,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support multi-slot projection', async(() => {\n+      it('should support multi-slot projection', waitForAsync(() => {\n            const ng1Module = angular.module_('ng1', []);\n \n            @Component({\n@@ -810,7 +812,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should correctly project structural directives', async(() => {\n+      it('should correctly project structural directives', waitForAsync(() => {\n            @Component({selector: 'ng2', template: 'ng2-{{ itemId }}(<ng-content></ng-content>)'})\n            class Ng2Component {\n              // TODO(issue/24571): remove '!'.\n@@ -844,7 +846,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should allow attribute selectors for components in ng2', async(() => {\n+      it('should allow attribute selectors for components in ng2', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => MyNg2Module));\n            const ng1Module = angular.module_('myExample', []);\n \n@@ -1123,7 +1125,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should bind properties, events', async(() => {\n+      it('should bind properties, events', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n \n@@ -1181,7 +1183,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should bind optional properties', async(() => {\n+      it('should bind optional properties', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n \n@@ -1226,7 +1228,7 @@ withEachNg1Version(() => {\n          }));\n \n       it('should bind properties, events in controller when bindToController is not used',\n-         async(() => {\n+         waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n \n@@ -1272,7 +1274,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should bind properties, events in link function', async(() => {\n+      it('should bind properties, events in link function', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n \n@@ -1318,7 +1320,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support templateUrl fetched from $httpBackend', async(() => {\n+      it('should support templateUrl fetched from $httpBackend', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n            ng1Module.value(\n@@ -1349,7 +1351,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support templateUrl as a function', async(() => {\n+      it('should support templateUrl as a function', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n            ng1Module.value(\n@@ -1384,7 +1386,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support empty template', async(() => {\n+      it('should support empty template', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n \n@@ -1412,7 +1414,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support template as a function', async(() => {\n+      it('should support template as a function', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n \n@@ -1444,7 +1446,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support templateUrl fetched from $templateCache', async(() => {\n+      it('should support templateUrl fetched from $templateCache', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n            ng1Module.run(($templateCache: any) => $templateCache.put('url.html', 'WORKS'));\n@@ -1473,7 +1475,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support controller with controllerAs', async(() => {\n+      it('should support controller with controllerAs', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n \n@@ -1524,7 +1526,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support bindToController', async(() => {\n+      it('should support bindToController', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n \n@@ -1558,7 +1560,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support bindToController with bindings', async(() => {\n+      it('should support bindToController with bindings', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n \n@@ -1592,7 +1594,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support single require in linking fn', async(() => {\n+      it('should support single require in linking fn', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n \n@@ -1635,7 +1637,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support array require in linking fn', async(() => {\n+      it('should support array require in linking fn', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n \n@@ -1688,7 +1690,7 @@ withEachNg1Version(() => {\n          }));\n \n       describe('with life-cycle hooks', () => {\n-        it('should call `$onInit()` on controller', async(() => {\n+        it('should call `$onInit()` on controller', waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              const $onInitSpyA = jasmine.createSpy('$onInitA');\n              const $onInitSpyB = jasmine.createSpy('$onInitB');\n@@ -1739,7 +1741,7 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should not call `$onInit()` on scope', async(() => {\n+        it('should not call `$onInit()` on scope', waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              const $onInitSpy = jasmine.createSpy('$onInit');\n \n@@ -1785,7 +1787,7 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should call `$doCheck()` on controller', async(() => {\n+        it('should call `$doCheck()` on controller', waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              const $doCheckSpyA = jasmine.createSpy('$doCheckA');\n              const $doCheckSpyB = jasmine.createSpy('$doCheckB');\n@@ -1847,7 +1849,7 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should not call `$doCheck()` on scope', async(() => {\n+        it('should not call `$doCheck()` on scope', waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              const $doCheckSpyA = jasmine.createSpy('$doCheckA');\n              const $doCheckSpyB = jasmine.createSpy('$doCheckB');\n@@ -1904,7 +1906,7 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should call `$postLink()` on controller', async(() => {\n+        it('should call `$postLink()` on controller', waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              const $postLinkSpyA = jasmine.createSpy('$postLinkA');\n              const $postLinkSpyB = jasmine.createSpy('$postLinkB');\n@@ -1955,7 +1957,7 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should not call `$postLink()` on scope', async(() => {\n+        it('should not call `$postLink()` on scope', waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              const $postLinkSpy = jasmine.createSpy('$postLink');\n \n@@ -2520,7 +2522,7 @@ withEachNg1Version(() => {\n       });\n \n       describe('linking', () => {\n-        it('should run the pre-linking after instantiating the controller', async(() => {\n+        it('should run the pre-linking after instantiating the controller', waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              const log: string[] = [];\n \n@@ -2561,7 +2563,7 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should run the pre-linking function before linking', async(() => {\n+        it('should run the pre-linking function before linking', waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              const log: string[] = [];\n \n@@ -2601,7 +2603,7 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should run the post-linking function after linking (link: object)', async(() => {\n+        it('should run the post-linking function after linking (link: object)', waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              const log: string[] = [];\n \n@@ -2641,7 +2643,8 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should run the post-linking function after linking (link: function)', async(() => {\n+        it('should run the post-linking function after linking (link: function)',\n+           waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              const log: string[] = [];\n \n@@ -2681,7 +2684,7 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should run the post-linking function before `$postLink`', async(() => {\n+        it('should run the post-linking function before `$postLink`', waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              const log: string[] = [];\n \n@@ -2724,7 +2727,7 @@ withEachNg1Version(() => {\n       });\n \n       describe('transclusion', () => {\n-        it('should support single-slot transclusion', async(() => {\n+        it('should support single-slot transclusion', waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              let ng2ComponentAInstance: Ng2ComponentA;\n              let ng2ComponentBInstance: Ng2ComponentB;\n@@ -2788,7 +2791,7 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should support single-slot transclusion with fallback content', async(() => {\n+        it('should support single-slot transclusion with fallback content', waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              let ng1ControllerInstances: any[] = [];\n              let ng2ComponentInstance: Ng2Component;\n@@ -2854,7 +2857,7 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should support multi-slot transclusion', async(() => {\n+        it('should support multi-slot transclusion', waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              let ng2ComponentInstance: Ng2Component;\n \n@@ -2916,7 +2919,7 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should support default slot (with fallback content)', async(() => {\n+        it('should support default slot (with fallback content)', waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              let ng1ControllerInstances: any[] = [];\n              let ng2ComponentInstance: Ng2Component;\n@@ -2999,7 +3002,8 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should support optional transclusion slots (with fallback content)', async(() => {\n+        it('should support optional transclusion slots (with fallback content)',\n+           waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              let ng1ControllerInstances: any[] = [];\n              let ng2ComponentInstance: Ng2Component;\n@@ -3072,7 +3076,7 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should throw if a non-optional slot is not filled', async(() => {\n+        it('should throw if a non-optional slot is not filled', waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              let errorMessage: string;\n \n@@ -3111,7 +3115,7 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should support structural directives in transcluded content', async(() => {\n+        it('should support structural directives in transcluded content', waitForAsync(() => {\n              const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n              let ng2ComponentInstance: Ng2Component;\n \n@@ -3179,7 +3183,7 @@ withEachNg1Version(() => {\n            }));\n       });\n \n-      it('should bind input properties (<) of components', async(() => {\n+      it('should bind input properties (<) of components', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n \n@@ -3211,7 +3215,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support ng2 > ng1 > ng2', async(() => {\n+      it('should support ng2 > ng1 > ng2', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const ng1Module = angular.module_('ng1', []);\n \n@@ -3247,7 +3251,7 @@ withEachNg1Version(() => {\n     describe('injection', () => {\n       function SomeToken() {}\n \n-      it('should export ng2 instance to ng1', async(() => {\n+      it('should export ng2 instance to ng1', waitForAsync(() => {\n            @NgModule({\n              providers: [{provide: SomeToken, useValue: 'correct_value'}],\n              imports: [BrowserModule],\n@@ -3264,7 +3268,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should export ng1 instance to ng2', async(() => {\n+      it('should export ng1 instance to ng2', waitForAsync(() => {\n            @NgModule({imports: [BrowserModule]})\n            class MyNg2Module {\n            }\n@@ -3283,7 +3287,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should respect hierarchical dependency injection for ng2', async(() => {\n+      it('should respect hierarchical dependency injection for ng2', waitForAsync(() => {\n            const ng1Module = angular.module_('ng1', []);\n \n            @Component({selector: 'ng2-parent', template: `ng2-parent(<ng-content></ng-content>)`})\n@@ -3311,7 +3315,7 @@ withEachNg1Version(() => {\n     });\n \n     describe('testability', () => {\n-      it('should handle deferred bootstrap', async(() => {\n+      it('should handle deferred bootstrap', waitForAsync(() => {\n            @NgModule({imports: [BrowserModule]})\n            class MyNg2Module {\n            }\n@@ -3362,7 +3366,7 @@ withEachNg1Version(() => {\n            expect(value).toBe(a1Injector);\n          }));\n \n-      it('should wait for ng2 testability', async(() => {\n+      it('should wait for ng2 testability', waitForAsync(() => {\n            @NgModule({imports: [BrowserModule]})\n            class MyNg2Module {\n            }\n@@ -3389,7 +3393,7 @@ withEachNg1Version(() => {\n     });\n \n     describe('examples', () => {\n-      it('should verify UpgradeAdapter example', async(() => {\n+      it('should verify UpgradeAdapter example', waitForAsync(() => {\n            const adapter: UpgradeAdapter = new UpgradeAdapter(forwardRef(() => Ng2Module));\n            const module = angular.module_('myExample', []);\n \n@@ -3461,7 +3465,7 @@ withEachNg1Version(() => {\n         });\n       });\n \n-      it('should be able to test ng1 components that use ng2 components', async(() => {\n+      it('should be able to test ng1 components that use ng2 components', waitForAsync(() => {\n            upgradeAdapterRef.ready(() => {\n              const element = $compile('<ng2></ng2>')($rootScope);\n              $rootScope.$digest();"
        },
        {
            "sha": "1e53b1b83f5fa27d27f14581bf896bbc59b76278",
            "filename": "packages/upgrade/static/test/integration/change_detection_spec.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fchange_detection_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fchange_detection_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fchange_detection_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import {Component, destroyPlatform, Directive, ElementRef, Injector, Input, NgModule, NgZone, SimpleChanges} from '@angular/core';\n-import {async} from '@angular/core/testing';\n+import {waitForAsync} from '@angular/core/testing';\n import {BrowserModule} from '@angular/platform-browser';\n import {platformBrowserDynamic} from '@angular/platform-browser-dynamic';\n import {downgradeComponent, UpgradeComponent, UpgradeModule} from '@angular/upgrade/static';\n@@ -22,7 +22,7 @@ withEachNg1Version(() => {\n     beforeEach(() => destroyPlatform());\n     afterEach(() => destroyPlatform());\n \n-    it('should not break if a $digest is already in progress', async(() => {\n+    it('should not break if a $digest is already in progress', waitForAsync(() => {\n          const element = html('<my-app></my-app>');\n \n          @Component({selector: 'my-app', template: ''})\n@@ -77,7 +77,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should interleave scope and component expressions', async(() => {\n+    it('should interleave scope and component expressions', waitForAsync(() => {\n          const log: string[] = [];\n          const l = (value: string) => {\n            log.push(value);\n@@ -132,7 +132,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should propagate changes to a downgraded component inside the ngZone', async(() => {\n+    it('should propagate changes to a downgraded component inside the ngZone', waitForAsync(() => {\n          const element = html('<my-app></my-app>');\n          let appComponent: AppComponent;\n "
        },
        {
            "sha": "4478fcfd1f41d6c00affb3f1a19d9045c921d4c9",
            "filename": "packages/upgrade/static/test/integration/content_projection_spec.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fcontent_projection_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fcontent_projection_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fcontent_projection_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import {Component, destroyPlatform, Directive, ElementRef, Injector, Input, NgModule} from '@angular/core';\n-import {async} from '@angular/core/testing';\n+import {waitForAsync} from '@angular/core/testing';\n import {BrowserModule} from '@angular/platform-browser';\n import {platformBrowserDynamic} from '@angular/platform-browser-dynamic';\n import {downgradeComponent, UpgradeComponent, UpgradeModule} from '@angular/upgrade/static';\n@@ -22,7 +22,7 @@ withEachNg1Version(() => {\n     beforeEach(() => destroyPlatform());\n     afterEach(() => destroyPlatform());\n \n-    it('should instantiate ng2 in ng1 template and project content', async(() => {\n+    it('should instantiate ng2 in ng1 template and project content', waitForAsync(() => {\n          // the ng2 component that will be used in ng1 (downgraded)\n          @Component({selector: 'ng2', template: `{{ prop }}(<ng-content></ng-content>)`})\n          class Ng2Component {\n@@ -57,7 +57,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should correctly project structural directives', async(() => {\n+    it('should correctly project structural directives', waitForAsync(() => {\n          @Component({selector: 'ng2', template: 'ng2-{{ itemId }}(<ng-content></ng-content>)'})\n          class Ng2Component {\n            // TODO(issue/24571): remove '!'.\n@@ -94,7 +94,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should instantiate ng1 in ng2 template and project content', async(() => {\n+    it('should instantiate ng1 in ng2 template and project content', waitForAsync(() => {\n          @Component({\n            selector: 'ng2',\n            template: `{{ 'ng2(' }}<ng1>{{ transclude }}</ng1>{{ ')' }}`,\n@@ -139,7 +139,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should support multi-slot projection', async(() => {\n+    it('should support multi-slot projection', waitForAsync(() => {\n          @Component({\n            selector: 'ng2',\n            template: '2a(<ng-content select=\".ng1a\"></ng-content>)' +"
        },
        {
            "sha": "e5ad0978b4f46ae13c42d0cb61991b90c25ec861",
            "filename": "packages/upgrade/static/test/integration/downgrade_component_spec.ts",
            "status": "modified",
            "additions": 17,
            "deletions": 17,
            "changes": 34,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fdowngrade_component_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fdowngrade_component_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fdowngrade_component_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import {ChangeDetectionStrategy, Compiler, Component, destroyPlatform, Directive, ElementRef, EventEmitter, Injector, Input, NgModule, NgModuleRef, OnChanges, OnDestroy, Output, SimpleChanges} from '@angular/core';\n-import {async, fakeAsync, tick} from '@angular/core/testing';\n+import {fakeAsync, tick, waitForAsync} from '@angular/core/testing';\n import {BrowserModule} from '@angular/platform-browser';\n import {platformBrowserDynamic} from '@angular/platform-browser-dynamic';\n import {downgradeComponent, UpgradeComponent, UpgradeModule} from '@angular/upgrade/static';\n@@ -22,7 +22,7 @@ withEachNg1Version(() => {\n     beforeEach(() => destroyPlatform());\n     afterEach(() => destroyPlatform());\n \n-    it('should bind properties, events', async(() => {\n+    it('should bind properties, events', waitForAsync(() => {\n          const ng1Module = angular.module_('ng1', []).run(($rootScope: angular.IScope) => {\n            $rootScope['name'] = 'world';\n            $rootScope['dataA'] = 'A';\n@@ -146,7 +146,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should bind properties to onpush components', async(() => {\n+    it('should bind properties to onpush components', waitForAsync(() => {\n          const ng1Module = angular.module_('ng1', []).run(($rootScope: angular.IScope) => {\n            $rootScope['dataB'] = 'B';\n          });\n@@ -188,7 +188,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should support two-way binding and event listener', async(() => {\n+    it('should support two-way binding and event listener', waitForAsync(() => {\n          const listenerSpy = jasmine.createSpy('$rootScope.listener');\n          const ng1Module = angular.module_('ng1', []).run(($rootScope: angular.IScope) => {\n            $rootScope['value'] = 'world';\n@@ -240,7 +240,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should run change-detection on every digest (by default)', async(() => {\n+    it('should run change-detection on every digest (by default)', waitForAsync(() => {\n          let ng2Component: Ng2Component;\n \n          @Component({selector: 'ng2', template: '{{ value1 }} | {{ value2 }}'})\n@@ -305,7 +305,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should not run change-detection on every digest when opted out', async(() => {\n+    it('should not run change-detection on every digest when opted out', waitForAsync(() => {\n          let ng2Component: Ng2Component;\n \n          @Component({selector: 'ng2', template: '{{ value1 }} | {{ value2 }}'})\n@@ -408,7 +408,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should initialize inputs in time for `ngOnChanges`', async(() => {\n+    it('should initialize inputs in time for `ngOnChanges`', waitForAsync(() => {\n          @Component({\n            selector: 'ng2',\n            template: `\n@@ -468,7 +468,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should bind to ng-model', async(() => {\n+    it('should bind to ng-model', waitForAsync(() => {\n          const ng1Module = angular.module_('ng1', []).run(($rootScope: angular.IScope) => {\n            $rootScope['modelA'] = 'A';\n          });\n@@ -534,7 +534,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should properly run cleanup when ng1 directive is destroyed', async(() => {\n+    it('should properly run cleanup when ng1 directive is destroyed', waitForAsync(() => {\n          let destroyed = false;\n          @Component({selector: 'ng2', template: 'test'})\n          class Ng2Component implements OnDestroy {\n@@ -574,7 +574,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should properly run cleanup with multiple levels of nesting', async(() => {\n+    it('should properly run cleanup with multiple levels of nesting', waitForAsync(() => {\n          let destroyed = false;\n \n          @Component({\n@@ -628,7 +628,7 @@ withEachNg1Version(() => {\n        }));\n \n     it('should work when compiled outside the dom (by fallback to the root ng2.injector)',\n-       async(() => {\n+       waitForAsync(() => {\n          @Component({selector: 'ng2', template: 'test'})\n          class Ng2Component {\n          }\n@@ -674,7 +674,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should allow attribute selectors for downgraded components', async(() => {\n+    it('should allow attribute selectors for downgraded components', waitForAsync(() => {\n          @Component({selector: '[itWorks]', template: 'It works'})\n          class WorksComponent {\n          }\n@@ -698,7 +698,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should allow attribute selectors for components in ng2', async(() => {\n+    it('should allow attribute selectors for components in ng2', waitForAsync(() => {\n          @Component({selector: '[itWorks]', template: 'It works'})\n          class WorksComponent {\n          }\n@@ -726,7 +726,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should respect hierarchical dependency injection for ng2', async(() => {\n+    it('should respect hierarchical dependency injection for ng2', waitForAsync(() => {\n          @Component({selector: 'parent', template: 'parent(<ng-content></ng-content>)'})\n          class ParentComponent {\n          }\n@@ -757,7 +757,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should be compiled synchronously, if possible', async(() => {\n+    it('should be compiled synchronously, if possible', waitForAsync(() => {\n          @Component({selector: 'ng2A', template: '<ng-content></ng-content>'})\n          class Ng2ComponentA {\n          }\n@@ -786,7 +786,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should work with ng2 lazy loaded components', async(() => {\n+    it('should work with ng2 lazy loaded components', waitForAsync(() => {\n          let componentInjector: Injector;\n \n          @Component({selector: 'ng2', template: ''})\n@@ -836,7 +836,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should throw if `downgradedModule` is specified', async(() => {\n+    it('should throw if `downgradedModule` is specified', waitForAsync(() => {\n          @Component({selector: 'ng2', template: ''})\n          class Ng2Component {\n          }"
        },
        {
            "sha": "020081077fea787751c353a09c75048647b958b5",
            "filename": "packages/upgrade/static/test/integration/downgrade_module_spec.ts",
            "status": "modified",
            "additions": 23,
            "deletions": 20,
            "changes": 43,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fdowngrade_module_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fdowngrade_module_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fdowngrade_module_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import {AfterContentChecked, AfterContentInit, AfterViewChecked, AfterViewInit, ApplicationRef, Compiler, Component, destroyPlatform, Directive, DoCheck, ElementRef, getPlatform, Inject, Injectable, Injector, Input, NgModule, NgZone, OnChanges, OnDestroy, OnInit, StaticProvider, Type, ViewRef} from '@angular/core';\n-import {async, fakeAsync, tick} from '@angular/core/testing';\n+import {fakeAsync, tick, waitForAsync} from '@angular/core/testing';\n import {BrowserModule} from '@angular/platform-browser';\n import {platformBrowserDynamic} from '@angular/platform-browser-dynamic';\n import {browserDetection} from '@angular/platform-browser/testing/src/browser_util';\n@@ -26,7 +26,7 @@ withEachNg1Version(() => {\n       beforeEach(() => destroyPlatform());\n       afterEach(() => destroyPlatform());\n \n-      it('should support multiple downgraded modules', async(() => {\n+      it('should support multiple downgraded modules', waitForAsync(() => {\n            @Component({selector: 'ng2A', template: 'a'})\n            class Ng2ComponentA {\n            }\n@@ -80,7 +80,7 @@ withEachNg1Version(() => {\n            setTimeout(() => expect(element.textContent).toBe('a | b'));\n          }));\n \n-      it('should support nesting components from different downgraded modules', async(() => {\n+      it('should support nesting components from different downgraded modules', waitForAsync(() => {\n            @Directive({selector: 'ng1A'})\n            class Ng1ComponentA extends UpgradeComponent {\n              constructor(elementRef: ElementRef, injector: Injector) {\n@@ -163,7 +163,7 @@ withEachNg1Version(() => {\n          }));\n \n       it('should support nesting components from different downgraded modules (via projection)',\n-         async(() => {\n+         waitForAsync(() => {\n            @Component({\n              selector: 'ng2A',\n              template: 'ng2A(<ng-content></ng-content>)',\n@@ -336,7 +336,8 @@ withEachNg1Version(() => {\n            expect(multiTrim(element.children[1].textContent)).toBe('Counter:1');\n          }));\n \n-      it('should correctly traverse the injector tree of downgraded components', async(() => {\n+      it('should correctly traverse the injector tree of downgraded components',\n+         waitForAsync(() => {\n            @Component({\n              selector: 'ng2A',\n              template: 'ng2A(<ng-content></ng-content>)',\n@@ -423,7 +424,7 @@ withEachNg1Version(() => {\n          }));\n \n       it('should correctly traverse the injector tree of downgraded components (from different modules)',\n-         async(() => {\n+         waitForAsync(() => {\n            @Component({\n              selector: 'ng2A',\n              template: 'ng2A(<ng-content></ng-content>)',\n@@ -544,7 +545,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support downgrading a component and propagate inputs', async(() => {\n+      it('should support downgrading a component and propagate inputs', waitForAsync(() => {\n            @Component(\n                {selector: 'ng2A', template: 'a({{ value }}) | <ng2B [value]=\"value\"></ng2B>'})\n            class Ng2AComponent {\n@@ -598,7 +599,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support using an upgraded service', async(() => {\n+      it('should support using an upgraded service', waitForAsync(() => {\n            @Injectable()\n            class Ng2Service {\n              constructor(@Inject('ng1Value') private ng1Value: string) {}\n@@ -658,7 +659,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should create components inside the Angular zone', async(() => {\n+      it('should create components inside the Angular zone', waitForAsync(() => {\n            @Component({selector: 'ng2', template: 'In the zone: {{ inTheZone }}'})\n            class Ng2Component {\n              private inTheZone = false;\n@@ -694,7 +695,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should destroy components inside the Angular zone', async(() => {\n+      it('should destroy components inside the Angular zone', waitForAsync(() => {\n            let destroyedInTheZone = false;\n \n            @Component({selector: 'ng2', template: ''})\n@@ -732,7 +733,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should propagate input changes inside the Angular zone', async(() => {\n+      it('should propagate input changes inside the Angular zone', waitForAsync(() => {\n            let ng2Component: Ng2Component;\n \n            @Component({selector: 'ng2', template: ''})\n@@ -793,7 +794,7 @@ withEachNg1Version(() => {\n          }));\n \n       it('should create and destroy nested, asynchronously instantiated components inside the Angular zone',\n-         async(() => {\n+         waitForAsync(() => {\n            let createdInTheZone = false;\n            let destroyedInTheZone = false;\n \n@@ -858,7 +859,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should wire up the component for change detection', async(() => {\n+      it('should wire up the component for change detection', waitForAsync(() => {\n            @Component(\n                {selector: 'ng2', template: '{{ count }}<button (click)=\"increment()\"></button>'})\n            class Ng2Component {\n@@ -903,7 +904,7 @@ withEachNg1Version(() => {\n          }));\n \n       it('should wire up nested, asynchronously instantiated components for change detection',\n-         async(() => {\n+         waitForAsync(() => {\n            @Component(\n                {selector: 'test', template: '{{ count }}<button (click)=\"increment()\"></button>'})\n            class TestComponent {\n@@ -961,7 +962,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should run the lifecycle hooks in the correct order', async(() => {\n+      it('should run the lifecycle hooks in the correct order', waitForAsync(() => {\n            const logs: string[] = [];\n            let rootScope: angular.IRootScopeService;\n \n@@ -1138,7 +1139,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should detach hostViews from the ApplicationRef once destroyed', async(() => {\n+      it('should detach hostViews from the ApplicationRef once destroyed', waitForAsync(() => {\n            let ng2Component: Ng2Component;\n \n            @Component({selector: 'ng2', template: ''})\n@@ -1253,7 +1254,8 @@ withEachNg1Version(() => {\n            $rootScope.$destroy();\n          }));\n \n-      it('should give access to both injectors in the Angular module\\'s constructor', async(() => {\n+      it('should give access to both injectors in the Angular module\\'s constructor',\n+         waitForAsync(() => {\n            let $injectorFromNg2: angular.IInjectorService|null = null;\n \n            @Component({selector: 'ng2', template: ''})\n@@ -1341,7 +1343,7 @@ withEachNg1Version(() => {\n         // Explicitly clean up after each test to prevent that.\n         afterEach(() => setTempInjectorRef(null!));\n \n-        it('should throw if no downgraded module is included', async(() => {\n+        it('should throw if no downgraded module is included', waitForAsync(() => {\n              const ng1Module = angular.module_('ng1', [])\n                                    .value($EXCEPTION_HANDLER, errorSpy)\n                                    .directive('ng2A', downgradeComponent({\n@@ -1374,7 +1376,8 @@ withEachNg1Version(() => {\n                  '<ng2-b>');\n            }));\n \n-        it('should throw if the corresponding downgraded module is not included', async(() => {\n+        it('should throw if the corresponding downgraded module is not included',\n+           waitForAsync(() => {\n              const ng1Module = angular.module_('ng1', [downModA])\n                                    .value($EXCEPTION_HANDLER, errorSpy)\n                                    .directive('ng2A', downgradeComponent({\n@@ -1402,7 +1405,7 @@ withEachNg1Version(() => {\n            }));\n \n         it('should throw if `downgradedModule` is not specified and there are multiple downgraded modules',\n-           async(() => {\n+           waitForAsync(() => {\n              const ng1Module = angular.module_('ng1', [downModA, downModB])\n                                    .value($EXCEPTION_HANDLER, errorSpy)\n                                    .directive('ng2A', downgradeComponent({"
        },
        {
            "sha": "4048177ad5036ed5b5e63f0a5079f04f5724dd2a",
            "filename": "packages/upgrade/static/test/integration/examples_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fexamples_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fexamples_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fexamples_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import {Component, destroyPlatform, Directive, ElementRef, Injector, Input, NgModule} from '@angular/core';\n-import {async} from '@angular/core/testing';\n+import {waitForAsync} from '@angular/core/testing';\n import {BrowserModule} from '@angular/platform-browser';\n import {platformBrowserDynamic} from '@angular/platform-browser-dynamic';\n import {downgradeComponent, UpgradeComponent, UpgradeModule} from '@angular/upgrade/static';\n@@ -25,7 +25,7 @@ withEachNg1Version(() => {\n     it('should have AngularJS loaded',\n        () => expect(angular.getAngularJSGlobal().version.major).toBe(1));\n \n-    it('should verify UpgradeAdapter example', async(() => {\n+    it('should verify UpgradeAdapter example', waitForAsync(() => {\n          // This is wrapping (upgrading) an AngularJS component to be used in an Angular\n          // component\n          @Directive({selector: 'ng1'})"
        },
        {
            "sha": "955629fe393649d6e20bd2ec0817e864c2bdbbe4",
            "filename": "packages/upgrade/static/test/integration/injection_spec.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Finjection_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Finjection_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Finjection_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import {destroyPlatform, InjectionToken, Injector, NgModule} from '@angular/core';\n-import {async} from '@angular/core/testing';\n+import {waitForAsync} from '@angular/core/testing';\n import {BrowserModule} from '@angular/platform-browser';\n import {platformBrowserDynamic} from '@angular/platform-browser-dynamic';\n \n@@ -23,7 +23,7 @@ withEachNg1Version(() => {\n     beforeEach(() => destroyPlatform());\n     afterEach(() => destroyPlatform());\n \n-    it('should downgrade ng2 service to ng1', async(() => {\n+    it('should downgrade ng2 service to ng1', waitForAsync(() => {\n          // Tokens used in ng2 to identify services\n          const Ng2Service = new InjectionToken('ng2-service');\n \n@@ -49,7 +49,7 @@ withEachNg1Version(() => {\n              });\n        }));\n \n-    it('should upgrade ng1 service to ng2', async(() => {\n+    it('should upgrade ng1 service to ng2', waitForAsync(() => {\n          // Tokens used in ng2 to identify services\n          const Ng1Service = new InjectionToken('ng1-service');\n \n@@ -81,7 +81,7 @@ withEachNg1Version(() => {\n        }));\n \n     it('should initialize the upgraded injector before application run blocks are executed',\n-       async(() => {\n+       waitForAsync(() => {\n          let runBlockTriggered = false;\n \n          const ng1Module = angular.module_('ng1Module', []).run([\n@@ -102,7 +102,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should allow resetting angular at runtime', async(() => {\n+    it('should allow resetting angular at runtime', waitForAsync(() => {\n          let wrappedBootstrapCalled = false;\n \n          const n: any = getAngularJSGlobal();"
        },
        {
            "sha": "7f43701b3638025838614349a95e0fe6f47fad34",
            "filename": "packages/upgrade/static/test/integration/upgrade_component_spec.ts",
            "status": "modified",
            "additions": 53,
            "deletions": 50,
            "changes": 103,
            "blob_url": "https://github.com/angular/angular/blob/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fupgrade_component_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8fbf40bf4000944c06458472142ca967ef8d3b1d/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fupgrade_component_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fupgrade_component_spec.ts?ref=8fbf40bf4000944c06458472142ca967ef8d3b1d",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import {Component, destroyPlatform, Directive, ElementRef, EventEmitter, Inject, Injector, Input, NgModule, NO_ERRORS_SCHEMA, Output, SimpleChanges} from '@angular/core';\n-import {async, fakeAsync, tick} from '@angular/core/testing';\n+import {fakeAsync, tick, waitForAsync} from '@angular/core/testing';\n import {BrowserModule} from '@angular/platform-browser';\n import {platformBrowserDynamic} from '@angular/platform-browser-dynamic';\n \n@@ -25,7 +25,7 @@ withEachNg1Version(() => {\n     afterEach(() => destroyPlatform());\n \n     describe('template/templateUrl', () => {\n-      it('should support `template` (string)', async(() => {\n+      it('should support `template` (string)', waitForAsync(() => {\n            // Define `ng1Component`\n            const ng1Component: angular.IComponent = {template: 'Hello, Angular!'};\n \n@@ -65,7 +65,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support `template` (function)', async(() => {\n+      it('should support `template` (function)', waitForAsync(() => {\n            // Define `ng1Component`\n            const ng1Component: angular.IComponent = {template: () => 'Hello, Angular!'};\n \n@@ -105,7 +105,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should pass $element to `template` function and not $attrs', async(() => {\n+      it('should pass $element to `template` function and not $attrs', waitForAsync(() => {\n            // Define `ng1Component`\n            const ng1Component: angular.IComponent = {\n              template: ($attrs: angular.IAttributes, $element: angular.IAugmentedJQuery) => {\n@@ -152,7 +152,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support `templateUrl` (string) fetched from `$templateCache`', async(() => {\n+      it('should support `templateUrl` (string) fetched from `$templateCache`', waitForAsync(() => {\n            // Define `ng1Component`\n            const ng1Component: angular.IComponent = {templateUrl: 'ng1.component.html'};\n \n@@ -196,7 +196,8 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support `templateUrl` (function) fetched from `$templateCache`', async(() => {\n+      it('should support `templateUrl` (function) fetched from `$templateCache`',\n+         waitForAsync(() => {\n            // Define `ng1Component`\n            const ng1Component: angular.IComponent = {templateUrl: () => 'ng1.component.html'};\n \n@@ -240,7 +241,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should pass $element to `templateUrl` function and not $attrs', async(() => {\n+      it('should pass $element to `templateUrl` function and not $attrs', waitForAsync(() => {\n            // Define `ng1Component`\n            const ng1Component: angular.IComponent = {\n              templateUrl: ($attrs: angular.IAttributes, $element: angular.IAugmentedJQuery) => {\n@@ -393,7 +394,7 @@ withEachNg1Version(() => {\n             });\n           }));\n \n-      it('should support empty templates', async(() => {\n+      it('should support empty templates', waitForAsync(() => {\n            // Define `ng1Component`s\n            const ng1ComponentA: angular.IComponent = {template: ''};\n            const ng1ComponentB: angular.IComponent = {template: () => ''};\n@@ -1063,7 +1064,7 @@ withEachNg1Version(() => {\n     });\n \n     describe('compiling', () => {\n-      it('should compile the ng1 template in the correct DOM context', async(() => {\n+      it('should compile the ng1 template in the correct DOM context', waitForAsync(() => {\n            let grandParentNodeName: string;\n \n            // Define `ng1Component`\n@@ -1114,7 +1115,7 @@ withEachNg1Version(() => {\n     });\n \n     describe('linking', () => {\n-      it('should run the pre-linking after instantiating the controller', async(() => {\n+      it('should run the pre-linking after instantiating the controller', waitForAsync(() => {\n            const log: string[] = [];\n \n            // Define `ng1Directive`\n@@ -1164,7 +1165,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should run the pre-linking function before linking', async(() => {\n+      it('should run the pre-linking function before linking', waitForAsync(() => {\n            const log: string[] = [];\n \n            // Define `ng1Directive`\n@@ -1212,7 +1213,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should run the post-linking function after linking (link: object)', async(() => {\n+      it('should run the post-linking function after linking (link: object)', waitForAsync(() => {\n            const log: string[] = [];\n \n            // Define `ng1Directive`\n@@ -1260,7 +1261,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should run the post-linking function after linking (link: function)', async(() => {\n+      it('should run the post-linking function after linking (link: function)', waitForAsync(() => {\n            const log: string[] = [];\n \n            // Define `ng1Directive`\n@@ -1308,7 +1309,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should run the post-linking function before `$postLink`', async(() => {\n+      it('should run the post-linking function before `$postLink`', waitForAsync(() => {\n            const log: string[] = [];\n \n            // Define `ng1Directive`\n@@ -1360,7 +1361,7 @@ withEachNg1Version(() => {\n     });\n \n     describe('controller', () => {\n-      it('should support `controllerAs`', async(() => {\n+      it('should support `controllerAs`', waitForAsync(() => {\n            // Define `ng1Directive`\n            const ng1Directive: angular.IDirective = {\n              template:\n@@ -1425,7 +1426,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support `bindToController` (boolean)', async(() => {\n+      it('should support `bindToController` (boolean)', waitForAsync(() => {\n            // Define `ng1Directive`\n            const ng1DirectiveA: angular.IDirective = {\n              template: 'Scope: {{ title }}; Controller: {{ $ctrl.title }}',\n@@ -1501,7 +1502,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support `bindToController` (object)', async(() => {\n+      it('should support `bindToController` (object)', waitForAsync(() => {\n            // Define `ng1Directive`\n            const ng1Directive: angular.IDirective = {\n              template: '{{ $ctrl.title }}',\n@@ -1552,7 +1553,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support `controller` as string', async(() => {\n+      it('should support `controller` as string', waitForAsync(() => {\n            // Define `ng1Directive`\n            const ng1Directive: angular.IDirective = {\n              template: '{{ $ctrl.title }} {{ $ctrl.text }}',\n@@ -1605,7 +1606,8 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should insert the compiled content before instantiating the controller', async(() => {\n+      it('should insert the compiled content before instantiating the controller',\n+         waitForAsync(() => {\n            let compiledContent: string;\n            let getCurrentContent: () => string;\n \n@@ -1663,7 +1665,7 @@ withEachNg1Version(() => {\n     describe('require', () => {\n       // NOT YET SUPPORTED\n       xdescribe('in pre-/post-link', () => {\n-        it('should resolve to its own controller if falsy', async(() => {\n+        it('should resolve to its own controller if falsy', waitForAsync(() => {\n              // Define `ng1Directive`\n              const ng1Directive: angular.IDirective = {\n                template: 'Pre: {{ pre }} | Post: {{ post }}',\n@@ -1720,7 +1722,7 @@ withEachNg1Version(() => {\n       });\n \n       describe('in controller', () => {\n-        it('should be available to children', async(() => {\n+        it('should be available to children', waitForAsync(() => {\n              // Define `ng1Component`\n              const ng1ComponentA: angular.IComponent = {\n                template: '<ng1-b></ng1-b>',\n@@ -1771,7 +1773,7 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should throw if required controller cannot be found', async(() => {\n+        it('should throw if required controller cannot be found', waitForAsync(() => {\n              // Define `ng1Component`\n              const ng1ComponentA: angular.IComponent = {require: {foo: 'iDoNotExist'}};\n              const ng1ComponentB: angular.IComponent = {require: {foo: '^iDoNotExist'}};\n@@ -1861,7 +1863,7 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should not throw if missing required controller is optional', async(() => {\n+        it('should not throw if missing required controller is optional', waitForAsync(() => {\n              // Define `ng1Component`\n              const ng1Component: angular.IComponent = {\n                require: {\n@@ -1910,7 +1912,7 @@ withEachNg1Version(() => {\n            }));\n \n         it('should assign resolved values to the controller instance (if `require` is not object)',\n-           async(() => {\n+           waitForAsync(() => {\n              // Define `ng1Component`\n              const ng1ComponentA: angular.IComponent = {\n                template: 'ng1A(<div><ng2></ng2></div>)',\n@@ -1988,7 +1990,7 @@ withEachNg1Version(() => {\n            }));\n \n         it('should assign resolved values to the controller instance (if `require` is object)',\n-           async(() => {\n+           waitForAsync(() => {\n              // Define `ng1Component`\n              const ng1ComponentA: angular.IComponent = {\n                template: 'ng1A(<div><ng2></ng2></div>)',\n@@ -2058,7 +2060,7 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should assign to controller before calling `$onInit()`', async(() => {\n+        it('should assign to controller before calling `$onInit()`', waitForAsync(() => {\n              // Define `ng1Component`\n              const ng1ComponentA: angular.IComponent = {\n                template: '<ng2></ng2>',\n@@ -2115,7 +2117,8 @@ withEachNg1Version(() => {\n              });\n            }));\n \n-        it('should use the key as name if the required controller name is omitted', async(() => {\n+        it('should use the key as name if the required controller name is omitted',\n+           waitForAsync(() => {\n              // Define `ng1Component`\n              const ng1ComponentA: angular.IComponent = {\n                template: '<ng1-b></ng1-b>',\n@@ -2185,7 +2188,7 @@ withEachNg1Version(() => {\n     });\n \n     describe('transclusion', () => {\n-      it('should support single-slot transclusion', async(() => {\n+      it('should support single-slot transclusion', waitForAsync(() => {\n            let ng2ComponentAInstance: Ng2ComponentA;\n            let ng2ComponentBInstance: Ng2ComponentB;\n \n@@ -2256,7 +2259,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support single-slot transclusion with fallback content', async(() => {\n+      it('should support single-slot transclusion with fallback content', waitForAsync(() => {\n            let ng1ControllerInstances: any[] = [];\n            let ng2ComponentInstance: Ng2Component;\n \n@@ -2318,7 +2321,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support multi-slot transclusion', async(() => {\n+      it('should support multi-slot transclusion', waitForAsync(() => {\n            let ng2ComponentInstance: Ng2Component;\n \n            // Define `ng1Component`\n@@ -2387,7 +2390,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support default slot (with fallback content)', async(() => {\n+      it('should support default slot (with fallback content)', waitForAsync(() => {\n            let ng1ControllerInstances: any[] = [];\n            let ng2ComponentInstance: Ng2Component;\n \n@@ -2471,7 +2474,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support optional transclusion slots (with fallback content)', async(() => {\n+      it('should support optional transclusion slots (with fallback content)', waitForAsync(() => {\n            let ng1ControllerInstances: any[] = [];\n            let ng2ComponentInstance: Ng2Component;\n \n@@ -2553,7 +2556,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should throw if a non-optional slot is not filled', async(() => {\n+      it('should throw if a non-optional slot is not filled', waitForAsync(() => {\n            let errorMessage: string;\n \n            // Define `ng1Component`\n@@ -2601,7 +2604,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should support structural directives in transcluded content', async(() => {\n+      it('should support structural directives in transcluded content', waitForAsync(() => {\n            let ng2ComponentInstance: Ng2Component;\n \n            // Define `ng1Component`\n@@ -2984,7 +2987,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should call `$onInit()` on controller', async(() => {\n+      it('should call `$onInit()` on controller', waitForAsync(() => {\n            // Define `ng1Directive`\n            const ng1DirectiveA: angular.IDirective = {\n              template: 'Called: {{ called }}',\n@@ -3055,7 +3058,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should not call `$onInit()` on scope', async(() => {\n+      it('should not call `$onInit()` on scope', waitForAsync(() => {\n            // Define `ng1Directive`\n            const ng1DirectiveA: angular.IDirective = {\n              template: 'Called: {{ called }}',\n@@ -3125,7 +3128,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should call `$postLink()` on controller', async(() => {\n+      it('should call `$postLink()` on controller', waitForAsync(() => {\n            // Define `ng1Directive`\n            const ng1DirectiveA: angular.IDirective = {\n              template: 'Called: {{ called }}',\n@@ -3196,7 +3199,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should not call `$postLink()` on scope', async(() => {\n+      it('should not call `$postLink()` on scope', waitForAsync(() => {\n            // Define `ng1Directive`\n            const ng1DirectiveA: angular.IDirective = {\n              template: 'Called: {{ called }}',\n@@ -3267,7 +3270,7 @@ withEachNg1Version(() => {\n          }));\n \n \n-      it('should call `$doCheck()` on controller', async(() => {\n+      it('should call `$doCheck()` on controller', waitForAsync(() => {\n            const controllerDoCheckA = jasmine.createSpy('controllerDoCheckA');\n            const controllerDoCheckB = jasmine.createSpy('controllerDoCheckB');\n \n@@ -3354,7 +3357,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should not call `$doCheck()` on scope', async(() => {\n+      it('should not call `$doCheck()` on scope', waitForAsync(() => {\n            const scopeDoCheck = jasmine.createSpy('scopeDoCheck');\n \n            // Define `ng1Directive`\n@@ -3432,7 +3435,7 @@ withEachNg1Version(() => {\n          }));\n \n \n-      it('should call `$onDestroy()` on controller', async(() => {\n+      it('should call `$onDestroy()` on controller', waitForAsync(() => {\n            const controllerOnDestroyA = jasmine.createSpy('controllerOnDestroyA');\n            const controllerOnDestroyB = jasmine.createSpy('controllerOnDestroyB');\n \n@@ -3532,7 +3535,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should not call `$onDestroy()` on scope', async(() => {\n+      it('should not call `$onDestroy()` on scope', waitForAsync(() => {\n            const scopeOnDestroy = jasmine.createSpy('scopeOnDestroy');\n \n            // Define `ng1Directive`\n@@ -3628,7 +3631,7 @@ withEachNg1Version(() => {\n          }));\n \n       it('should be called in order `$onChanges()` > `$onInit()` > `$doCheck()` > `$postLink()`',\n-         async(() => {\n+         waitForAsync(() => {\n            // Define `ng1Component`\n            const ng1Component: angular.IComponent = {\n              // `$doCheck()` will keep getting called as long as the interpolated value keeps\n@@ -3697,7 +3700,7 @@ withEachNg1Version(() => {\n     });\n \n     describe('destroying the upgraded component', () => {\n-      it('should destroy `$componentScope`', async(() => {\n+      it('should destroy `$componentScope`', waitForAsync(() => {\n            const scopeDestroyListener = jasmine.createSpy('scopeDestroyListener');\n            let ng2ComponentAInstance: Ng2ComponentA;\n \n@@ -3760,7 +3763,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should emit `$destroy` on `$element` and descendants', async(() => {\n+      it('should emit `$destroy` on `$element` and descendants', waitForAsync(() => {\n            const elementDestroyListener = jasmine.createSpy('elementDestroyListener');\n            const descendantDestroyListener = jasmine.createSpy('descendantDestroyListener');\n            let ng2ComponentAInstance: Ng2ComponentA;\n@@ -3828,7 +3831,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should clear data on `$element` and descendants`', async(() => {\n+      it('should clear data on `$element` and descendants`', waitForAsync(() => {\n            let ng1ComponentElement: angular.IAugmentedJQuery;\n            let ng2ComponentAInstance: Ng2ComponentA;\n \n@@ -3897,7 +3900,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should clear dom listeners on `$element` and descendants`', async(() => {\n+      it('should clear dom listeners on `$element` and descendants`', waitForAsync(() => {\n            const elementClickListener = jasmine.createSpy('elementClickListener');\n            const descendantClickListener = jasmine.createSpy('descendantClickListener');\n            let ng1DescendantElement: angular.IAugmentedJQuery;\n@@ -3970,7 +3973,7 @@ withEachNg1Version(() => {\n            });\n          }));\n \n-      it('should clean up `$doCheck()` watchers from the parent scope', async(() => {\n+      it('should clean up `$doCheck()` watchers from the parent scope', waitForAsync(() => {\n            let ng2Component: Ng2Component;\n \n            // Define `ng1Component`\n@@ -4041,7 +4044,7 @@ withEachNg1Version(() => {\n          }));\n     });\n \n-    it('should support ng2 > ng1 > ng2 (no inputs/outputs)', async(() => {\n+    it('should support ng2 > ng1 > ng2 (no inputs/outputs)', waitForAsync(() => {\n          // Define `ng1Component`\n          const ng1Component: angular.IComponent = {template: 'ng1X(<ng2-b></ng2-b>)'};\n \n@@ -4283,7 +4286,7 @@ withEachNg1Version(() => {\n          });\n        }));\n \n-    it('should support ng2 > ng1 > ng2 > ng1 (with `require`)', async(() => {\n+    it('should support ng2 > ng1 > ng2 > ng1 (with `require`)', waitForAsync(() => {\n          // Define `ng1Component`\n          const ng1ComponentA: angular.IComponent = {\n            template: 'ng1A(<ng2-b></ng2-b>)',"
        }
    ],
    "stats": {
        "total": 2767,
        "additions": 1381,
        "deletions": 1386
    }
}