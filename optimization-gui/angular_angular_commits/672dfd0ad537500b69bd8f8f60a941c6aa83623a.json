{
    "author": "bjarkler",
    "message": "build(docs-infra): enable tsec security checker (#42800)\n\ntsec is a TypeScript compiler wrapper for restricting use of\nsecurity-sensitive DOM APIs, in particular those that could lead to XSS\nor Trusted Types violations. Add it as a linter to aio to prevent future\nTrusted Types regressions on angular.io.\n\nAlso introduces security_exemptions.json, which lists the known,\nsecurity-reviewed tsec security violations. New entries can only be\nadded to this file after a security review, in particular making sure\nthat the corresponding code does not cause XSS vulnerabilities or\nTrusted Types violations.\n\nPR Close #42800",
    "sha": "672dfd0ad537500b69bd8f8f60a941c6aa83623a",
    "files": [
        {
            "sha": "1a7afe909141dd4d564f65afc574c53c84cb7520",
            "filename": "aio/package.json",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/672dfd0ad537500b69bd8f8f60a941c6aa83623a/aio%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/672dfd0ad537500b69bd8f8f60a941c6aa83623a/aio%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fpackage.json?ref=672dfd0ad537500b69bd8f8f60a941c6aa83623a",
            "patch": "@@ -19,7 +19,7 @@\n     \"prebuild-local-ci\": \"yarn setup-local-ci\",\n     \"build-local-ci\": \"yarn ~~build --progress=false\",\n     \"extract-cli-command-docs\": \"node tools/transforms/cli-docs-package/extract-cli-commands.js 2621e1d39\",\n-    \"lint\": \"yarn check-env && yarn docs-lint && ng lint && yarn example-lint && yarn tools-lint\",\n+    \"lint\": \"yarn check-env && yarn docs-lint && ng lint && yarn example-lint && yarn tools-lint && yarn security-lint\",\n     \"test\": \"yarn check-env && ng test\",\n     \"pree2e\": \"yarn check-env && yarn update-webdriver\",\n     \"e2e\": \"ng e2e --no-webdriver-update\",\n@@ -68,6 +68,7 @@\n     \"create-example\": \"node ./tools/examples/create-example.js\",\n     \"build-404-page\": \"node scripts/build-404-page\",\n     \"update-webdriver\": \"node ../scripts/webdriver-manager-update.js\",\n+    \"security-lint\": \"tsec -p tsconfig.app.json\",\n     \"~~audit-web-app\": \"node scripts/audit-web-app\",\n     \"~~check-env\": \"node scripts/check-environment\",\n     \"~~clean-generated\": \"node --eval \\\"require('shelljs').rm('-rf', 'src/generated')\\\"\",\n@@ -178,6 +179,7 @@\n     \"timezone-mock\": \"^1.1.3\",\n     \"tree-kill\": \"^1.1.0\",\n     \"ts-node\": \"^10.0.0\",\n+    \"tsec\": \"^0.1.5\",\n     \"tslint\": \"~6.1.3\",\n     \"typescript\": \"~4.3.4\",\n     \"uglify-js\": \"^3.13.3\","
        },
        {
            "sha": "5c16fc3a45c9ec0b74776a2a0d7266219adef5a9",
            "filename": "aio/security-exemptions.json",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/672dfd0ad537500b69bd8f8f60a941c6aa83623a/aio%2Fsecurity-exemptions.json",
            "raw_url": "https://github.com/angular/angular/raw/672dfd0ad537500b69bd8f8f60a941c6aa83623a/aio%2Fsecurity-exemptions.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsecurity-exemptions.json?ref=672dfd0ad537500b69bd8f8f60a941c6aa83623a",
            "patch": "@@ -0,0 +1,11 @@\n+{\n+  \"ban-reviewed-conversions\": [\n+    \"src/app/custom-elements/code/code.component.ts\",\n+    \"src/app/custom-elements/code/pretty-printer.service.ts\",\n+    \"src/app/documents/document.service.ts\",\n+    \"src/app/shared/security.ts\"\n+  ],\n+  \"ban-worker-calls\": [\n+    \"src/app/search/search.service.ts\"\n+  ]\n+}"
        },
        {
            "sha": "6cf6e7d7cee6e623bc054954103393b4dd0ea41f",
            "filename": "aio/tsconfig.app.json",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/672dfd0ad537500b69bd8f8f60a941c6aa83623a/aio%2Ftsconfig.app.json",
            "raw_url": "https://github.com/angular/angular/raw/672dfd0ad537500b69bd8f8f60a941c6aa83623a/aio%2Ftsconfig.app.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftsconfig.app.json?ref=672dfd0ad537500b69bd8f8f60a941c6aa83623a",
            "patch": "@@ -4,6 +4,12 @@\n     \"outDir\": \"./out-tsc/app\",\n     \"types\": [\n       \"trusted-types\"\n+    ],\n+    \"plugins\": [\n+      {\n+        \"name\": \"tsec\",\n+        \"exemptionConfig\": \"./security-exemptions.json\"\n+      }\n     ]\n   },\n   \"files\": ["
        },
        {
            "sha": "7a0ab452e3321dccd4592085f15ab3cc3858bd38",
            "filename": "aio/yarn.lock",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/672dfd0ad537500b69bd8f8f60a941c6aa83623a/aio%2Fyarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/672dfd0ad537500b69bd8f8f60a941c6aa83623a/aio%2Fyarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fyarn.lock?ref=672dfd0ad537500b69bd8f8f60a941c6aa83623a",
            "patch": "@@ -12711,6 +12711,14 @@ tsconfig-paths@^3.9.0:\n     minimist \"^1.2.0\"\n     strip-bom \"^3.0.0\"\n \n+tsec@^0.1.5:\n+  version \"0.1.5\"\n+  resolved \"https://registry.yarnpkg.com/tsec/-/tsec-0.1.5.tgz#ef8fc0e06af40de43b3774806ca0b994123cc33c\"\n+  integrity sha512-mJ8yN/8uyJ4H0cFKshjWrfIeI3mI6Bz/TCX5pvgnuHPZvHjMCDUf2z923gFzqTpXjKMZWZO+zSdD8JoLT/o6OQ==\n+  dependencies:\n+    glob \"^7.1.1\"\n+    minimatch \"^3.0.3\"\n+\n tslib@2.3.0:\n   version \"2.3.0\"\n   resolved \"https://registry.yarnpkg.com/tslib/-/tslib-2.3.0.tgz#803b8cdab3e12ba581a4ca41c8839bbb0dacb09e\""
        }
    ],
    "stats": {
        "total": 29,
        "additions": 28,
        "deletions": 1
    }
}