{
    "author": "petebacondarwin",
    "message": "test(compiler): add a test for parsing multiline expressions in attributes (#43132)\n\nThis tests a scenario that was failing in an internal project.\n\nPR Close #43132",
    "sha": "e55d05213323ef2c96610bfd6031f4a3b5c5b019",
    "files": [
        {
            "sha": "a7b103b5073befd4b03dc39ce0923db63af70f2b",
            "filename": "packages/compiler/test/ml_parser/html_parser_spec.ts",
            "status": "modified",
            "additions": 27,
            "deletions": 0,
            "changes": 27,
            "blob_url": "https://github.com/angular/angular/blob/e55d05213323ef2c96610bfd6031f4a3b5c5b019/packages%2Fcompiler%2Ftest%2Fml_parser%2Fhtml_parser_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/e55d05213323ef2c96610bfd6031f4a3b5c5b019/packages%2Fcompiler%2Ftest%2Fml_parser%2Fhtml_parser_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fml_parser%2Fhtml_parser_spec.ts?ref=e55d05213323ef2c96610bfd6031f4a3b5c5b019",
            "patch": "@@ -274,6 +274,33 @@ import {humanizeDom, humanizeDomSourceSpans, humanizeLineColumn, humanizeNodes}\n           ]);\n         });\n \n+        it('should parse attributes containing unquoted interpolation', () => {\n+          expect(humanizeDom(parser.parse('<div foo={{message}}></div>', 'TestComp'))).toEqual([\n+            [html.Element, 'div', 0],\n+            [html.Attribute, 'foo', '{{message}}', [''], ['{{', 'message', '}}'], ['']]\n+          ]);\n+        });\n+\n+        it('should parse bound inputs with expressions containing newlines', () => {\n+          expect(humanizeDom(parser.parse(\n+                     `<app-component\n+                        [attr]=\"[\n+                        {text: 'some text',url:'//www.google.com'},\n+                        {text:'other text',url:'//www.google.com'}]\"></app-component>`,\n+                     'TestComp')))\n+              .toEqual([\n+                [html.Element, 'app-component', 0],\n+                [\n+                  html.Attribute, '[attr]', `[\n+                        {text: 'some text',url:'//www.google.com'},\n+                        {text:'other text',url:'//www.google.com'}]`,\n+                  [`[\n+                        {text: 'some text',url:'//www.google.com'},\n+                        {text:'other text',url:'//www.google.com'}]`]\n+                ],\n+              ]);\n+        });\n+\n         it('should parse attributes containing encoded entities', () => {\n           expect(humanizeDom(parser.parse('<div foo=\"&amp;\"></div>', 'TestComp'))).toEqual([\n             [html.Element, 'div', 0],"
        },
        {
            "sha": "c1b73cc19d54c19cb2d4199db83b19c1a82ccc61",
            "filename": "packages/compiler/test/ml_parser/lexer_spec.ts",
            "status": "modified",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/angular/angular/blob/e55d05213323ef2c96610bfd6031f4a3b5c5b019/packages%2Fcompiler%2Ftest%2Fml_parser%2Flexer_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/e55d05213323ef2c96610bfd6031f4a3b5c5b019/packages%2Fcompiler%2Ftest%2Fml_parser%2Flexer_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fml_parser%2Flexer_spec.ts?ref=e55d05213323ef2c96610bfd6031f4a3b5c5b019",
            "patch": "@@ -407,6 +407,27 @@ import {ParseLocation, ParseSourceFile, ParseSourceSpan} from '../../src/parse_u\n         ]);\n       });\n \n+      it('should parse bound inputs with expressions containing newlines', () => {\n+        expect(tokenizeAndHumanizeParts(`<app-component\n+        [attr]=\"[\n+        {text: 'some text',url:'//www.google.com'},\n+        {text:'other text',url:'//www.google.com'}]\">`))\n+            .toEqual([\n+              [TokenType.TAG_OPEN_START, '', 'app-component'],\n+              [TokenType.ATTR_NAME, '', '[attr]'],\n+              [TokenType.ATTR_QUOTE, '\"'],\n+              [\n+                TokenType.ATTR_VALUE_TEXT,\n+                '[\\n' +\n+                    '        {text: \\'some text\\',url:\\'//www.google.com\\'},\\n' +\n+                    '        {text:\\'other text\\',url:\\'//www.google.com\\'}]'\n+              ],\n+              [TokenType.ATTR_QUOTE, '\"'],\n+              [TokenType.TAG_OPEN_END],\n+              [TokenType.EOF],\n+            ]);\n+      });\n+\n       it('should parse attributes with empty quoted value', () => {\n         expect(tokenizeAndHumanizeParts('<t a=\"\">')).toEqual([\n           [TokenType.TAG_OPEN_START, '', 't'],"
        }
    ],
    "stats": {
        "total": 48,
        "additions": 48,
        "deletions": 0
    }
}