{
    "author": "devversion",
    "message": "refactor(bazel): no longer generate VE shims for other workspaces by default (#43431)\n\nWe should no longer generate VE shims for workspaces which are not named\n`angular`. The default is Ivy compilation and this should be opt-in. The\ncomponents repository for example does not need any shims as it is using\nIvy for the common development workflows.\n\nPR Close #43431",
    "sha": "b616e74ceb3fbff6874a8aa97a5f381f5f53f9d5",
    "files": [
        {
            "sha": "b268c3503a7c4e4cdab4ac4162a4359592f3b0fb",
            "filename": "packages/bazel/src/ng_module/ng_module.bzl",
            "status": "modified",
            "additions": 1,
            "deletions": 5,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/b616e74ceb3fbff6874a8aa97a5f381f5f53f9d5/packages%2Fbazel%2Fsrc%2Fng_module%2Fng_module.bzl",
            "raw_url": "https://github.com/angular/angular/raw/b616e74ceb3fbff6874a8aa97a5f381f5f53f9d5/packages%2Fbazel%2Fsrc%2Fng_module%2Fng_module.bzl",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fbazel%2Fsrc%2Fng_module%2Fng_module.bzl?ref=b616e74ceb3fbff6874a8aa97a5f381f5f53f9d5",
            "patch": "@@ -307,12 +307,8 @@ def _expected_outs(ctx):\n \n # Determines if we need to generate View Engine shims (.ngfactory and .ngsummary files)\n def _generate_ve_shims(ctx):\n-    # we are checking the workspace name here, because otherwise this would be a breaking change\n-    # (the shims used to be on by default)\n-    # we can remove this check once angular/components and angular/angular-cli repos no longer depend\n-    # on the presence of shims, or if they explicitly opt-in to their generation via ng_modules' generate_ve_shims attr\n     return _is_bazel() and _is_view_engine_enabled(ctx) or (\n-        getattr(ctx.attr, \"generate_ve_shims\", False) == True or ctx.workspace_name != \"angular\"\n+        getattr(ctx.attr, \"generate_ve_shims\", False) == True\n     )\n \n def _ngc_tsconfig(ctx, files, srcs, **kwargs):"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 1,
        "deletions": 5
    }
}