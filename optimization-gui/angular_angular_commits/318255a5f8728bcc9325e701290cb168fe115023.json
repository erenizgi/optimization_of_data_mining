{
    "author": "clydin",
    "message": "build: support building with TypeScript 4.1 (#39571)\n\nTypeScript 4.1 is now used to build and test within the repository.\n\nPR Close #39571",
    "sha": "318255a5f8728bcc9325e701290cb168fe115023",
    "files": [
        {
            "sha": "f9a7a54bd47fd6b285590eb12c7720e962087422",
            "filename": "aio/aio-builds-setup/dockerbuild/scripts-js/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/aio%2Faio-builds-setup%2Fdockerbuild%2Fscripts-js%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/aio%2Faio-builds-setup%2Fdockerbuild%2Fscripts-js%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Faio-builds-setup%2Fdockerbuild%2Fscripts-js%2Fpackage.json?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -49,6 +49,6 @@\n     \"supertest\": \"^4.0.2\",\n     \"tslint\": \"^6.1.3\",\n     \"tslint-jasmine-noSkipOrFocus\": \"^1.0.9\",\n-    \"typescript\": \"^4.0.2\"\n+    \"typescript\": \"^4.1.2\"\n   }\n }"
        },
        {
            "sha": "f148e6b9a3c337a7d98053d2668b603c54180d33",
            "filename": "aio/aio-builds-setup/dockerbuild/scripts-js/yarn.lock",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/aio%2Faio-builds-setup%2Fdockerbuild%2Fscripts-js%2Fyarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/aio%2Faio-builds-setup%2Fdockerbuild%2Fscripts-js%2Fyarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Faio-builds-setup%2Fdockerbuild%2Fscripts-js%2Fyarn.lock?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -2563,10 +2563,10 @@ typedarray-to-buffer@^3.1.5:\n   dependencies:\n     is-typedarray \"^1.0.0\"\n \n-typescript@^4.0.2:\n-  version \"4.0.2\"\n-  resolved \"https://registry.yarnpkg.com/typescript/-/typescript-4.0.2.tgz#7ea7c88777c723c681e33bf7988be5d008d05ac2\"\n-  integrity sha512-e4ERvRV2wb+rRZ/IQeb3jm2VxBsirQLpQhdxplZ2MEzGvDkkMmPglecnNDfSUBivMjP93vRbngYYDQqQ/78bcQ==\n+typescript@^4.1.2:\n+  version \"4.1.2\"\n+  resolved \"https://registry.yarnpkg.com/typescript/-/typescript-4.1.2.tgz#6369ef22516fe5e10304aae5a5c4862db55380e9\"\n+  integrity sha512-thGloWsGH3SOxv1SoY7QojKi0tc+8FnOmiarEGMbd/lar7QOEd3hvlx3Fp5y6FlDUGl9L+pd4n2e+oToGMmhRQ==\n \n undefsafe@^2.0.2:\n   version \"2.0.2\""
        },
        {
            "sha": "bdc0e5cc203e1b80b99d637635c92426f927cb0a",
            "filename": "aio/src/app/custom-elements/elements-loader.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/aio%2Fsrc%2Fapp%2Fcustom-elements%2Felements-loader.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/aio%2Fsrc%2Fapp%2Fcustom-elements%2Felements-loader.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fcustom-elements%2Felements-loader.spec.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -304,6 +304,6 @@ class FakeModuleFactory extends NgModuleFactory<any> {\n \n function returnPromisesFromSpy(spy: jasmine.Spy): Deferred[] {\n   const deferreds: Deferred[] = [];\n-  spy.and.callFake(() => new Promise((resolve, reject) => deferreds.push({resolve, reject})));\n+  spy.and.callFake(() => new Promise<void>((resolve, reject) => deferreds.push({resolve, reject})));\n   return deferreds;\n }"
        },
        {
            "sha": "4c64e7f8685a9b49ad04b0ad7c78c7a8a8e8164f",
            "filename": "aio/yarn.lock",
            "status": "modified",
            "additions": 1,
            "deletions": 6,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/aio%2Fyarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/aio%2Fyarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fyarn.lock?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -13658,7 +13658,7 @@ typedarray@^0.0.6:\n   resolved \"https://registry.yarnpkg.com/typedarray/-/typedarray-0.0.6.tgz#867ac74e3864187b1d3d47d996a78ec5c8830777\"\n   integrity sha1-hnrHTjhkGHsdPUfZlqeOxciDB3c=\n \n-typescript@4.0.5:\n+typescript@4.0.5, typescript@~4.0.2:\n   version \"4.0.5\"\n   resolved \"https://registry.yarnpkg.com/typescript/-/typescript-4.0.5.tgz#ae9dddfd1069f1cb5beb3ef3b2170dd7c1332389\"\n   integrity sha512-ywmr/VrTVCmNTJ6iV2LwIrfG1P+lv6luD8sUJs+2eI9NLGigaN+nUQc13iHqisq7bra9lnmUSYqbJvegraBOPQ==\n@@ -13668,11 +13668,6 @@ typescript@^3.2.2:\n   resolved \"https://registry.yarnpkg.com/typescript/-/typescript-3.7.5.tgz#0692e21f65fd4108b9330238aac11dd2e177a1ae\"\n   integrity sha512-/P5lkRXkWHNAbcJIiHPfRoKqyd7bsyCma1hZNUGfn20qm64T6ZBlrzprymeu918H+mB/0rIg2gGK/BXkhhYgBw==\n \n-typescript@~4.0.2:\n-  version \"4.0.3\"\n-  resolved \"https://registry.yarnpkg.com/typescript/-/typescript-4.0.3.tgz#153bbd468ef07725c1df9c77e8b453f8d36abba5\"\n-  integrity sha512-tEu6DGxGgRJPb/mVPIZ48e69xCn2yRmCgYmDugAVwmJ6o+0u1RI18eO7E7WBTLYLaEVVOhwQmcdhQHweux/WPg==\n-\n ua-parser-js@0.7.21:\n   version \"0.7.21\"\n   resolved \"https://registry.yarnpkg.com/ua-parser-js/-/ua-parser-js-0.7.21.tgz#853cf9ce93f642f67174273cc34565ae6f308777\""
        },
        {
            "sha": "746c15ceadd96f5100fb1d029b2cfdb572c16df1",
            "filename": "dev-infra/caretaker/check/base.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/dev-infra%2Fcaretaker%2Fcheck%2Fbase.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/dev-infra%2Fcaretaker%2Fcheck%2Fbase.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fcaretaker%2Fcheck%2Fbase.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -18,8 +18,8 @@ export abstract class BaseModule<Data> {\n       protected git: GitClient, protected config: NgDevConfig<{caretaker: CaretakerConfig}>) {}\n \n   /** Asyncronously retrieve data for the module. */\n-  protected abstract async retrieveData(): Promise<Data>;\n+  protected abstract retrieveData(): Promise<Data>;\n \n   /** Print the information discovered for the module to the terminal. */\n-  abstract async printToTerminal(): Promise<void>;\n+  abstract printToTerminal(): Promise<void>;\n }"
        },
        {
            "sha": "d1194447e58ff7743c9d3ec365c50bf3b476d13a",
            "filename": "modules/benchmarks/src/expanding_rows/benchmark.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/modules%2Fbenchmarks%2Fsrc%2Fexpanding_rows%2Fbenchmark.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/modules%2Fbenchmarks%2Fsrc%2Fexpanding_rows%2Fbenchmark.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/modules%2Fbenchmarks%2Fsrc%2Fexpanding_rows%2Fbenchmark.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -83,7 +83,7 @@ export async function execTimed(description: string, func: () => Promise<void>)\n }\n \n export async function nextTick(delay = 1) {\n-  return new Promise((res, rej) => {\n+  return new Promise<void>((res, rej) => {\n     setTimeout(() => {\n       res();\n     }, delay);"
        },
        {
            "sha": "4c4fe0ef19b16a175158a84e4ebbaf8d1302db38",
            "filename": "package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/package.json",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -150,7 +150,7 @@\n     \"tsickle\": \"0.38.1\",\n     \"tslib\": \"^2.0.0\",\n     \"tslint\": \"6.1.3\",\n-    \"typescript\": \"~4.0.2\",\n+    \"typescript\": \"~4.1.2\",\n     \"xhr2\": \"0.2.0\",\n     \"yaml\": \"^1.10.0\",\n     \"yargs\": \"^16.1.1\""
        },
        {
            "sha": "79703bc23487f4e8b00330424cb009b8fb573144",
            "filename": "packages/animations/browser/src/render/transition_animation_engine.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fanimations%2Fbrowser%2Fsrc%2Frender%2Ftransition_animation_engine.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fanimations%2Fbrowser%2Fsrc%2Frender%2Ftransition_animation_engine.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fanimations%2Fbrowser%2Fsrc%2Frender%2Ftransition_animation_engine.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -810,7 +810,7 @@ export class TransitionAnimationEngine {\n   }\n \n   whenRenderingDone(): Promise<any> {\n-    return new Promise(resolve => {\n+    return new Promise<void>(resolve => {\n       if (this.players.length) {\n         return optimizeGroupPlayer(this.players).onDone(() => resolve());\n       } else {"
        },
        {
            "sha": "aa65c45fadebba72a5340eff5d1a69c721f7a8a7",
            "filename": "packages/bazel/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fbazel%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fbazel%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fbazel%2Fpackage.json?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -28,7 +28,7 @@\n     \"@angular/compiler-cli\": \"0.0.0-PLACEHOLDER\",\n     \"@bazel/typescript\": \">=1.0.0\",\n     \"terser\": \"^4.3.1\",\n-    \"typescript\": \">=4.0 <4.1\",\n+    \"typescript\": \">=4.0 <4.2\",\n     \"rollup\": \">=1.20.0\",\n     \"rollup-plugin-commonjs\": \">=9.0.0\",\n     \"rollup-plugin-node-resolve\": \">=4.2.0\","
        },
        {
            "sha": "1186b5edea46f59bc5b5030923221425e8eb0808",
            "filename": "packages/benchpress/src/common_options.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fbenchpress%2Fsrc%2Fcommon_options.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fbenchpress%2Fsrc%2Fcommon_options.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fbenchpress%2Fsrc%2Fcommon_options.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -43,7 +43,7 @@ export class Options {\n }\n \n function writeFile(filename: string, content: string): Promise<any> {\n-  return new Promise(function(resolve, reject) {\n+  return new Promise<void>(function(resolve, reject) {\n     fs.writeFile(filename, content, (error) => {\n       if (error) {\n         reject(error);"
        },
        {
            "sha": "2f20337b5e4e45cf142b2768ca77688a66ef23a9",
            "filename": "packages/compiler-cli/ngcc/src/host/commonjs_umd_utils.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fhost%2Fcommonjs_umd_utils.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fhost%2Fcommonjs_umd_utils.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fhost%2Fcommonjs_umd_utils.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -78,7 +78,7 @@ export function findNamespaceOfIdentifier(id: ts.Identifier): ts.Identifier|null\n export function findRequireCallReference(id: ts.Identifier, checker: ts.TypeChecker): RequireCall|\n     null {\n   const symbol = checker.getSymbolAtLocation(id) || null;\n-  const declaration = symbol && symbol.valueDeclaration;\n+  const declaration = symbol?.valueDeclaration ?? symbol?.declarations?.[0];\n   const initializer =\n       declaration && ts.isVariableDeclaration(declaration) && declaration.initializer || null;\n   return initializer && isRequireCall(initializer) ? initializer : null;"
        },
        {
            "sha": "d47c5f2da59927f74c877e56e7afb937dfbf9f39",
            "filename": "packages/compiler-cli/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fpackage.json?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -29,7 +29,7 @@\n   },\n   \"peerDependencies\": {\n     \"@angular/compiler\": \"0.0.0-PLACEHOLDER\",\n-    \"typescript\": \">=4.0 <4.1\"\n+    \"typescript\": \">=4.0 <4.2\"\n   },\n   \"engines\": {\n     \"node\": \">=10.0\""
        },
        {
            "sha": "13fe87a560e0c004110762762f6a809afd235fd5",
            "filename": "packages/compiler-cli/src/ngtsc/testing/src/utils.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftesting%2Fsrc%2Futils.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftesting%2Fsrc%2Futils.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftesting%2Fsrc%2Futils.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -126,9 +126,9 @@ enum TsStructureIsReused {\n   Completely = 2,\n }\n \n-export function expectCompleteReuse(oldProgram: ts.Program): void {\n+export function expectCompleteReuse(program: ts.Program): void {\n   // Assert complete reuse using TypeScript's private API.\n-  expect((oldProgram as any).structureIsReused)\n+  expect((program as any).structureIsReused)\n       .toBe(TsStructureIsReused.Completely, COMPLETE_REUSE_FAILURE_MESSAGE);\n }\n "
        },
        {
            "sha": "e1ae444dc21c3e02a59da05f484b252335c1ebaa",
            "filename": "packages/compiler-cli/src/ngtsc/typecheck/test/program_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Ftest%2Fprogram_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Ftest%2Fprogram_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Ftest%2Fprogram_spec.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -44,7 +44,7 @@ runInEachFileSystem(() => {\n       programStrategy.updateFiles(\n           new Map([[typecheckPath, 'export const VERSION = 2;']]), UpdateMode.Complete);\n \n-      expectCompleteReuse(program);\n+      expectCompleteReuse(programStrategy.getProgram());\n     });\n \n     it('should have complete reuse if no structural changes are made to input files', () => {\n@@ -56,7 +56,7 @@ runInEachFileSystem(() => {\n       programStrategy.updateFiles(\n           new Map([[mainPath, 'export const STILL_NOT_A_COMPONENT = true;']]), UpdateMode.Complete);\n \n-      expectCompleteReuse(program);\n+      expectCompleteReuse(programStrategy.getProgram());\n     });\n   });\n });"
        },
        {
            "sha": "7002bbe59a8dfcc053213f9c324a25e09fab11f0",
            "filename": "packages/compiler-cli/src/perform_watch.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Fsrc%2Fperform_watch.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Fsrc%2Fperform_watch.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fperform_watch.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -127,7 +127,7 @@ export function performWatchCompilation(host: PerformWatchHost):\n \n   // Watch basePath, ignoring .dotfiles\n   let resolveReadyPromise: () => void;\n-  const readyPromise = new Promise(resolve => resolveReadyPromise = resolve);\n+  const readyPromise = new Promise<void>(resolve => resolveReadyPromise = resolve);\n   // Note: ! is ok as options are filled after the first compilation\n   // Note: ! is ok as resolvedReadyPromise is filled by the previous call\n   const fileWatcher ="
        },
        {
            "sha": "f82477b43a74beec45f21d5837c9013e74570dea",
            "filename": "packages/compiler-cli/src/transformers/program.ts",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fprogram.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fprogram.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Ftransformers%2Fprogram.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -48,6 +48,17 @@ const LOWER_FIELDS = ['useValue', 'useFactory', 'data', 'id', 'loadChildren'];\n  */\n const R3_LOWER_FIELDS = [...LOWER_FIELDS, 'providers', 'imports', 'exports'];\n \n+/**\n+ * Installs a handler for testing purposes to allow inspection of the temporary program.\n+ */\n+let tempProgramHandlerForTest: ((program: ts.Program) => void)|null = null;\n+export function setTempProgramHandlerForTest(handler: (program: ts.Program) => void): void {\n+  tempProgramHandlerForTest = handler;\n+}\n+export function resetTempProgramHandlerForTest(): void {\n+  tempProgramHandlerForTest = null;\n+}\n+\n const emptyModules: NgAnalyzedModules = {\n   ngModules: [],\n   ngModuleByPipeOrDirective: new Map(),\n@@ -618,6 +629,9 @@ class AngularCompilerProgram implements Program {\n     }\n \n     const tmpProgram = ts.createProgram(rootNames, this.options, this.hostAdapter, oldTsProgram);\n+    if (tempProgramHandlerForTest !== null) {\n+      tempProgramHandlerForTest(tmpProgram);\n+    }\n     const sourceFiles: string[] = [];\n     const tsFiles: string[] = [];\n     tmpProgram.getSourceFiles().forEach(sf => {"
        },
        {
            "sha": "0f8cd65c1a7f7ec7457002536b33e409934b99c5",
            "filename": "packages/compiler-cli/test/ngc_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Ftest%2Fngc_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Ftest%2Fngc_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fngc_spec.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -1671,7 +1671,7 @@ describe('ngc transformer command-line', () => {\n         const config = readCommandLineAndConfiguration(['-p', basePath]);\n         const compile = watchMode(config.project, config.options, errorSpy);\n \n-        return new Promise(resolve => {\n+        return new Promise<void>(resolve => {\n           compile.ready(() => {\n             cb();\n "
        },
        {
            "sha": "2125d0940942982018dd9814b472a7a313271287",
            "filename": "packages/compiler-cli/test/ngtsc/template_typecheck_spec.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 14,
            "changes": 29,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Ftemplate_typecheck_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Ftemplate_typecheck_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Ftemplate_typecheck_spec.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -358,7 +358,7 @@ export declare class AnimationEvent {\n \n           @Component({\n             selector: 'test',\n-            template: '<div dir [foo]=\"invalid && 1\"></div>',\n+            template: '<div dir [foo]=\"!!invalid\"></div>',\n           })\n           class TestCmp {}\n \n@@ -379,7 +379,7 @@ export declare class AnimationEvent {\n \n         const diags = env.driveDiagnostics();\n         expect(diags.length).toBe(2);\n-        expect(diags[0].messageText).toEqual(`Type 'number' is not assignable to type 'string'.`);\n+        expect(diags[0].messageText).toEqual(`Type 'boolean' is not assignable to type 'string'.`);\n         expect(diags[1].messageText)\n             .toEqual(`Property 'invalid' does not exist on type 'TestCmp'.`);\n       });\n@@ -389,7 +389,7 @@ export declare class AnimationEvent {\n \n         const diags = env.driveDiagnostics();\n         expect(diags.length).toBe(2);\n-        expect(diags[0].messageText).toEqual(`Type 'number' is not assignable to type 'string'.`);\n+        expect(diags[0].messageText).toEqual(`Type 'boolean' is not assignable to type 'string'.`);\n         expect(diags[1].messageText)\n             .toEqual(`Property 'invalid' does not exist on type 'TestCmp'.`);\n       });\n@@ -411,15 +411,15 @@ export declare class AnimationEvent {\n \n           @Component({\n             selector: 'test',\n-            template: '<div dir [foo]=\"invalid && nullable\"></div>',\n+            template: '<div dir [foo]=\"!!invalid && nullable\"></div>',\n           })\n           class TestCmp {\n-            nullable: string | null | undefined;\n+            nullable: boolean | null | undefined;\n           }\n \n           @Directive({selector: '[dir]'})\n           class TestDir {\n-            @Input() foo: string;\n+            @Input() foo: boolean;\n           }\n \n           @NgModule({\n@@ -436,7 +436,7 @@ export declare class AnimationEvent {\n         const diags = env.driveDiagnostics();\n         expect(diags.length).toBe(2);\n         expect((diags[0].messageText as ts.DiagnosticMessageChain).messageText)\n-            .toEqual(`Type 'string | null | undefined' is not assignable to type 'string'.`);\n+            .toEqual(`Type 'boolean | null | undefined' is not assignable to type 'boolean'.`);\n         expect(diags[1].messageText)\n             .toEqual(`Property 'invalid' does not exist on type 'TestCmp'.`);\n       });\n@@ -448,7 +448,7 @@ export declare class AnimationEvent {\n            const diags = env.driveDiagnostics();\n            expect(diags.length).toBe(2);\n            expect((diags[0].messageText as ts.DiagnosticMessageChain).messageText)\n-               .toEqual(`Type 'string | null | undefined' is not assignable to type 'string'.`);\n+               .toEqual(`Type 'boolean | null | undefined' is not assignable to type 'boolean'.`);\n            expect(diags[1].messageText)\n                .toEqual(`Property 'invalid' does not exist on type 'TestCmp'.`);\n          });\n@@ -470,15 +470,15 @@ export declare class AnimationEvent {\n \n           @Component({\n             selector: 'test',\n-            template: '<div dir [foo]=\"invalid && user?.name\"></div>',\n+            template: '<div dir [foo]=\"!!invalid && user?.isMember\"></div>',\n           })\n           class TestCmp {\n-            user?: {name: string};\n+            user?: {isMember: boolean};\n           }\n \n           @Directive({selector: '[dir]'})\n           class TestDir {\n-            @Input() foo: string;\n+            @Input() foo: boolean;\n           }\n \n           @NgModule({\n@@ -499,7 +499,7 @@ export declare class AnimationEvent {\n         const diags = env.driveDiagnostics();\n         expect(diags.length).toBe(2);\n         expect((diags[0].messageText as ts.DiagnosticMessageChain).messageText)\n-            .toEqual(`Type 'string | undefined' is not assignable to type 'string'.`);\n+            .toEqual(`Type 'boolean | undefined' is not assignable to type 'boolean'.`);\n         expect(diags[1].messageText)\n             .toEqual(`Property 'invalid' does not exist on type 'TestCmp'.`);\n       });\n@@ -511,7 +511,7 @@ export declare class AnimationEvent {\n            const diags = env.driveDiagnostics();\n            expect(diags.length).toBe(2);\n            expect((diags[0].messageText as ts.DiagnosticMessageChain).messageText)\n-               .toEqual(`Type 'string | undefined' is not assignable to type 'string'.`);\n+               .toEqual(`Type 'boolean | undefined' is not assignable to type 'boolean'.`);\n            expect(diags[1].messageText)\n                .toEqual(`Property 'invalid' does not exist on type 'TestCmp'.`);\n          });\n@@ -2325,7 +2325,8 @@ export declare class AnimationEvent {\n         env.write('other.ts', `export const VERSION = 2;`);\n         env.driveMain();\n \n-        expectCompleteReuse(firstProgram);\n+        expectCompleteReuse(env.getTsProgram());\n+        expectCompleteReuse(env.getReuseTsProgram());\n       });\n     });\n   });"
        },
        {
            "sha": "c2f4588b176d7dcdc66b8d03953f1cb43999d935",
            "filename": "packages/compiler-cli/test/transformers/program_spec.ts",
            "status": "modified",
            "additions": 21,
            "deletions": 7,
            "changes": 28,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Ftest%2Ftransformers%2Fprogram_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler-cli%2Ftest%2Ftransformers%2Fprogram_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Ftransformers%2Fprogram_spec.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -13,7 +13,7 @@ import * as ts from 'typescript';\n \n import {formatDiagnostics} from '../../src/perform_compile';\n import {CompilerHost, EmitFlags, LazyRoute} from '../../src/transformers/api';\n-import {createSrcToOutPathMapper} from '../../src/transformers/program';\n+import {createSrcToOutPathMapper, resetTempProgramHandlerForTest, setTempProgramHandlerForTest} from '../../src/transformers/program';\n import {StructureIsReused, tsStructureIsReused} from '../../src/transformers/util';\n import {expectNoDiagnosticsInProgram, setup, stripAnsi, TestSupport} from '../test_support';\n \n@@ -297,15 +297,27 @@ describe('ng program', () => {\n     describe(\n         'verify that program structure is reused within tsc in order to speed up incremental compilation',\n         () => {\n+          afterEach(resetTempProgramHandlerForTest);\n+\n+          function captureStructureReuse(compile: () => void): StructureIsReused|null {\n+            let structureReuse: StructureIsReused|null = null;\n+            setTempProgramHandlerForTest(program => {\n+              structureReuse = tsStructureIsReused(program);\n+            });\n+            compile();\n+            return structureReuse;\n+          }\n+\n           it('should reuse the old ts program completely if nothing changed', () => {\n             testSupport.writeFiles({'src/index.ts': createModuleAndCompSource('main')});\n             const host = createWatchModeHost();\n             // Note: the second compile drops factories for library files,\n             // and therefore changes the structure again\n             const p1 = compile(undefined, undefined, undefined, host).program;\n             const p2 = compile(p1, undefined, undefined, host).program;\n-            compile(p2, undefined, undefined, host);\n-            expect(tsStructureIsReused(p2.getTsProgram())).toBe(StructureIsReused.Completely);\n+            const structureReuse =\n+                captureStructureReuse(() => compile(p2, undefined, undefined, host));\n+            expect(structureReuse).toBe(StructureIsReused.Completely);\n           });\n \n           it('should reuse the old ts program completely if a template or a ts file changed',\n@@ -328,8 +340,9 @@ describe('ng program', () => {\n                  'src/main.html': `Another template`,\n                  'src/util.ts': `export const x = 2`,\n                });\n-               compile(p2, undefined, undefined, host);\n-               expect(tsStructureIsReused(p2.getTsProgram())).toBe(StructureIsReused.Completely);\n+               const structureReuse =\n+                   captureStructureReuse(() => compile(p2, undefined, undefined, host));\n+               expect(structureReuse).toBe(StructureIsReused.Completely);\n              });\n \n           it('should not reuse the old ts program if an import changed', () => {\n@@ -348,8 +361,9 @@ describe('ng program', () => {\n             const p2 = compile(p1, undefined, undefined, host).program;\n             testSupport.writeFiles(\n                 {'src/util.ts': `import {Injectable} from '@angular/core'; export const x = 1;`});\n-            compile(p2, undefined, undefined, host);\n-            expect(tsStructureIsReused(p2.getTsProgram())).toBe(StructureIsReused.SafeModules);\n+            const structureReuse =\n+                captureStructureReuse(() => compile(p2, undefined, undefined, host));\n+            expect(structureReuse).toBe(StructureIsReused.SafeModules);\n           });\n         });\n   });"
        },
        {
            "sha": "52db2963805cc66e7f611ab7109c174af0e29215",
            "filename": "packages/compiler/test/expression_parser/parser_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler%2Ftest%2Fexpression_parser%2Fparser_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fcompiler%2Ftest%2Fexpression_parser%2Fparser_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fexpression_parser%2Fparser_spec.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -1048,7 +1048,7 @@ function expectParseTemplateBindingsError(attribute: string, error: string) {\n function _parseTemplateBindings(attribute: string, templateUrl: string) {\n   const match = attribute.match(/^\\*(.+)=\"(.*)\"$/);\n   expect(match).toBeTruthy(`failed to extract key and value from ${attribute}`);\n-  const [_, key, value] = match;\n+  const [_, key, value] = match!;\n   const absKeyOffset = 1;  // skip the * prefix\n   const absValueOffset = attribute.indexOf('=') + '=\"'.length;\n   const parser = createParser();"
        },
        {
            "sha": "11245bf6cb76ebbffeb6eb7cbf29319422878fef",
            "filename": "packages/platform-server/test/integration_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fplatform-server%2Ftest%2Fintegration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fplatform-server%2Ftest%2Fintegration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-server%2Ftest%2Fintegration_spec.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -53,7 +53,7 @@ function getMetaRenderHook(doc: any) {\n function getAsyncTitleRenderHook(doc: any) {\n   return () => {\n     // Async set the title as part of the render hook.\n-    return new Promise(resolve => {\n+    return new Promise<void>(resolve => {\n       setTimeout(() => {\n         doc.title = 'AsyncRenderHook';\n         resolve();\n@@ -64,7 +64,7 @@ function getAsyncTitleRenderHook(doc: any) {\n \n function asyncRejectRenderHook() {\n   return () => {\n-    return new Promise((_resolve, reject) => {\n+    return new Promise<void>((_resolve, reject) => {\n       setTimeout(() => {\n         reject('reject');\n       });"
        },
        {
            "sha": "1c772f9bb42135ae2bc3f3b91e72885622cc800a",
            "filename": "packages/upgrade/src/common/src/util.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fupgrade%2Fsrc%2Fcommon%2Fsrc%2Futil.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fupgrade%2Fsrc%2Fcommon%2Fsrc%2Futil.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fupgrade%2Fsrc%2Fcommon%2Fsrc%2Futil.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -97,7 +97,7 @@ export function validateInjectionKey(\n export class Deferred<R> {\n   promise: Promise<R>;\n   // TODO(issue/24571): remove '!'.\n-  resolve!: (value?: R|PromiseLike<R>) => void;\n+  resolve!: (value: R|PromiseLike<R>) => void;\n   // TODO(issue/24571): remove '!'.\n   reject!: (error?: any) => void;\n "
        },
        {
            "sha": "bbb304e494c001dee6cff048f30b6c5c625ad07e",
            "filename": "packages/upgrade/src/dynamic/src/upgrade_adapter.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fupgrade%2Fsrc%2Fdynamic%2Fsrc%2Fupgrade_adapter.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fupgrade%2Fsrc%2Fdynamic%2Fsrc%2Fupgrade_adapter.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fupgrade%2Fsrc%2Fdynamic%2Fsrc%2Fupgrade_adapter.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -396,7 +396,7 @@ export class UpgradeAdapter {\n     this.ngZone.run(() => {\n       bootstrap(element, [this.ng1Module.name], config!);\n     });\n-    const ng1BootstrapPromise = new Promise((resolve) => {\n+    const ng1BootstrapPromise = new Promise<void>((resolve) => {\n       if (windowAngular.resumeBootstrap) {\n         const originalResumeBootstrap: () => void = windowAngular.resumeBootstrap;\n         windowAngular.resumeBootstrap = function() {"
        },
        {
            "sha": "960360682e2da7e525b73c95c5a37446104d8dc8",
            "filename": "packages/zone.js/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fzone.js%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fzone.js%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Fpackage.json?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -19,7 +19,7 @@\n     \"mocha\": \"^3.1.2\",\n     \"mock-require\": \"3.0.3\",\n     \"promises-aplus-tests\": \"^2.1.2\",\n-    \"typescript\": \"4.0.2\"\n+    \"typescript\": \"4.1.2\"\n   },\n   \"scripts\": {\n     \"closuretest\": \"./scripts/closure/closure_compiler.sh\","
        },
        {
            "sha": "6091f7a50eedb7d1376a82624d17d7c533440764",
            "filename": "packages/zone.js/test/jasmine-patch.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fzone.js%2Ftest%2Fjasmine-patch.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fzone.js%2Ftest%2Fjasmine-patch.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Ftest%2Fjasmine-patch.spec.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -65,7 +65,7 @@ ifEnvSupports(supportJasmineSpec, () => {\n     });\n \n     it('should wait for promise to resolve', () => {\n-      return new Promise((res, _) => {\n+      return new Promise<void>((res, _) => {\n         setTimeout(() => {\n           log.push('resolved');\n           res();"
        },
        {
            "sha": "9c32a61fca355f30ee7002f616f7440e0a355f4e",
            "filename": "packages/zone.js/test/mocha-patch.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fzone.js%2Ftest%2Fmocha-patch.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fzone.js%2Ftest%2Fmocha-patch.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Ftest%2Fmocha-patch.spec.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -103,7 +103,7 @@ ifEnvSupports('Mocha', function() {\n     });\n \n     it('should wait for promise to resolve', () => {\n-      return new Promise((res, _) => {\n+      return new Promise<void>((res, _) => {\n         setTimeout(() => {\n           log.push('resolved');\n           res();"
        },
        {
            "sha": "76163fbb1891ce53c5c28dffdcf78540cdf4cee5",
            "filename": "packages/zone.js/test/typings/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fzone.js%2Ftest%2Ftypings%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fzone.js%2Ftest%2Ftypings%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Ftest%2Ftypings%2Fpackage.json?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -14,6 +14,6 @@\n     \"zone.js\": \"file:../../../../dist/bin/packages/zone.js/npm_package\"\n   },\n   \"devDependencies\": {\n-    \"typescript\": \"~4.0.2\"\n+    \"typescript\": \"~4.1.2\"\n   }\n }"
        },
        {
            "sha": "90e8be4980703570ab6ccb123311d4b1b388ec32",
            "filename": "packages/zone.js/test/zone-spec/async-test.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fzone.js%2Ftest%2Fzone-spec%2Fasync-test.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fzone.js%2Ftest%2Fzone-spec%2Fasync-test.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Ftest%2Fzone-spec%2Fasync-test.spec.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -98,7 +98,7 @@ describe('AsyncTestZoneSpec', function() {\n     const atz = Zone.current.fork(testZoneSpec);\n \n     atz.run(function() {\n-      new Promise((resolve) => {\n+      new Promise<void>((resolve) => {\n         setTimeout(() => {\n           resolve();\n         }, 10);"
        },
        {
            "sha": "22724223a2af29135bc8ac2cd0718124f41e6845",
            "filename": "packages/zone.js/test/zone-spec/fake-async-test.spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fzone.js%2Ftest%2Fzone-spec%2Ffake-async-test.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fzone.js%2Ftest%2Fzone-spec%2Ffake-async-test.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Ftest%2Fzone-spec%2Ffake-async-test.spec.ts?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -942,7 +942,7 @@ describe('FakeAsyncTestZoneSpec', () => {\n     });\n \n     it('should wait for promise to resolve', () => {\n-      return new Promise((res, _) => {\n+      return new Promise<void>((res, _) => {\n         setTimeout(() => {\n           log.push('resolved');\n           res();"
        },
        {
            "sha": "8ef92115992feff55d31f0ab1cecf1fec5937153",
            "filename": "packages/zone.js/yarn.lock",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fzone.js%2Fyarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/packages%2Fzone.js%2Fyarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Fyarn.lock?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -3786,10 +3786,10 @@ typedarray-to-buffer@^3.1.5:\n   dependencies:\n     is-typedarray \"^1.0.0\"\n \n-typescript@4.0.2:\n-  version \"4.0.2\"\n-  resolved \"https://registry.yarnpkg.com/typescript/-/typescript-4.0.2.tgz#7ea7c88777c723c681e33bf7988be5d008d05ac2\"\n-  integrity sha512-e4ERvRV2wb+rRZ/IQeb3jm2VxBsirQLpQhdxplZ2MEzGvDkkMmPglecnNDfSUBivMjP93vRbngYYDQqQ/78bcQ==\n+typescript@4.1.2:\n+  version \"4.1.2\"\n+  resolved \"https://registry.yarnpkg.com/typescript/-/typescript-4.1.2.tgz#6369ef22516fe5e10304aae5a5c4862db55380e9\"\n+  integrity sha512-thGloWsGH3SOxv1SoY7QojKi0tc+8FnOmiarEGMbd/lar7QOEd3hvlx3Fp5y6FlDUGl9L+pd4n2e+oToGMmhRQ==\n \n underscore@~1.8.3:\n   version \"1.8.3\""
        },
        {
            "sha": "236d90b55099fa0c9e85d98f988c4637d2a14652",
            "filename": "tools/ts-api-guardian/package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/tools%2Fts-api-guardian%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/tools%2Fts-api-guardian%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fts-api-guardian%2Fpackage.json?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -33,7 +33,7 @@\n     \"chai\": \"^4.1.2\",\n     \"jasmine\": \"^3.1.0\",\n     \"source-map-support\": \"^0.5.9\",\n-    \"typescript\": \"4.0.2\"\n+    \"typescript\": \"4.1.2\"\n   },\n   \"repository\": {},\n   \"keywords\": [\n@@ -51,4 +51,4 @@\n     \"url\": \"https://github.com/angular/angular/issues\"\n   },\n   \"homepage\": \"https://github.com/angular/angular/tools/ts-api-guardian\"\n-}\n\\ No newline at end of file\n+}"
        },
        {
            "sha": "be08369a4f25ea15c68a458965084f6eb7dabb97",
            "filename": "yarn.lock",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/318255a5f8728bcc9325e701290cb168fe115023/yarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/318255a5f8728bcc9325e701290cb168fe115023/yarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/yarn.lock?ref=318255a5f8728bcc9325e701290cb168fe115023",
            "patch": "@@ -15621,10 +15621,10 @@ typescript@~3.7.2:\n   resolved \"https://registry.yarnpkg.com/typescript/-/typescript-3.7.5.tgz#0692e21f65fd4108b9330238aac11dd2e177a1ae\"\n   integrity sha512-/P5lkRXkWHNAbcJIiHPfRoKqyd7bsyCma1hZNUGfn20qm64T6ZBlrzprymeu918H+mB/0rIg2gGK/BXkhhYgBw==\n \n-typescript@~4.0.2:\n-  version \"4.0.2\"\n-  resolved \"https://registry.yarnpkg.com/typescript/-/typescript-4.0.2.tgz#7ea7c88777c723c681e33bf7988be5d008d05ac2\"\n-  integrity sha512-e4ERvRV2wb+rRZ/IQeb3jm2VxBsirQLpQhdxplZ2MEzGvDkkMmPglecnNDfSUBivMjP93vRbngYYDQqQ/78bcQ==\n+typescript@~4.1.2:\n+  version \"4.1.2\"\n+  resolved \"https://registry.yarnpkg.com/typescript/-/typescript-4.1.2.tgz#6369ef22516fe5e10304aae5a5c4862db55380e9\"\n+  integrity sha512-thGloWsGH3SOxv1SoY7QojKi0tc+8FnOmiarEGMbd/lar7QOEd3hvlx3Fp5y6FlDUGl9L+pd4n2e+oToGMmhRQ==\n \n uglify-js@^1.3.3:\n   version \"1.3.5\""
        }
    ],
    "stats": {
        "total": 162,
        "additions": 93,
        "deletions": 69
    }
}