{
    "author": "devversion",
    "message": "build: use new labeling and branching in merge script (#38428)\n\nWe introduced a new shared configuration for merge script\nlabels that follow the proposal of:\nhttps://docs.google.com/document/d/197kVillDwx-RZtSVOBtPb4BBIAw0E9RT3q3v6DZkykU\n\nThese label semantics and the branching are set up for the Angular\nframework with this commit. The goal is that labeling and merging\nis consistent between all Angular projects and that clear rules\nare defined for branching. This was previously not the case.\n\nPR Close #38428",
    "sha": "7723bfd9ba058507dce3a1602aa334176a356c5d",
    "files": [
        {
            "sha": "79e4f3039adeb88d263549affd1f297a5fd3fcc2",
            "filename": ".ng-dev/merge.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 19,
            "changes": 25,
            "blob_url": "https://github.com/angular/angular/blob/7723bfd9ba058507dce3a1602aa334176a356c5d/.ng-dev%2Fmerge.ts",
            "raw_url": "https://github.com/angular/angular/raw/7723bfd9ba058507dce3a1602aa334176a356c5d/.ng-dev%2Fmerge.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.ng-dev%2Fmerge.ts?ref=7723bfd9ba058507dce3a1602aa334176a356c5d",
            "patch": "@@ -1,38 +1,25 @@\n-import {MergeConfig} from '../dev-infra/pr/merge/config';\n+import {DevInfraMergeConfig} from '../dev-infra/pr/merge/config';\n+import {getDefaultTargetLabelConfiguration} from '../dev-infra/pr/merge/defaults';\n+import {github} from './github';\n \n /**\n  * Configuration for the merge tool in `ng-dev`. This sets up the labels which\n  * are respected by the merge script (e.g. the target labels).\n  */\n-export const merge = (): MergeConfig => {\n-  // TODO: resume dynamically determining patch branch\n-  const patch = '10.0.x';\n+export const merge: DevInfraMergeConfig['merge'] = async api => {\n   return {\n     githubApiMerge: false,\n     claSignedLabel: 'cla: yes',\n     mergeReadyLabel: /^PR action: merge(-assistance)?/,\n     caretakerNoteLabel: 'PR action: merge-assistance',\n     commitMessageFixupLabel: 'commit message fixup',\n-    labels: [\n-      {\n-        pattern: 'PR target: master-only',\n-        branches: ['master'],\n-      },\n-      {\n-        pattern: 'PR target: patch-only',\n-        branches: [patch],\n-      },\n-      {\n-        pattern: 'PR target: master & patch',\n-        branches: ['master', patch],\n-      },\n-    ],\n+    labels: await getDefaultTargetLabelConfiguration(api, github, '@angular/core'),\n     requiredBaseCommits: {\n       // PRs that target either `master` or the patch branch, need to be rebased\n       // on top of the latest commit message validation fix.\n       // These SHAs are the commits that update the required license text in the header.\n       'master': '5aeb9a4124922d8ac08eb73b8f322905a32b0b3a',\n-      [patch]: '27b95ba64a5d99757f4042073fd1860e20e3ed24'\n+      '10.0.x': '27b95ba64a5d99757f4042073fd1860e20e3ed24'\n     },\n   };\n };"
        }
    ],
    "stats": {
        "total": 25,
        "additions": 6,
        "deletions": 19
    }
}