{
    "author": "petebacondarwin",
    "message": "fix(localize): include the last placeholder in parsed translation text (#38452)\n\nWhen creating a `ParsedTranslation` from a set of message parts and\nplaceholder names a textual representation of the message is computed.\nPreviously the last placeholder and text segment were missing from this\ncomputed message string.\n\nPR Close #38452",
    "sha": "8cd4099db93742d17264eebcc3ba1999b9f3db7c",
    "files": [
        {
            "sha": "fb0e7aeaaec8a9a61600eb89a4172cb6f04ca02e",
            "filename": "packages/localize/src/utils/src/translations.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/8cd4099db93742d17264eebcc3ba1999b9f3db7c/packages%2Flocalize%2Fsrc%2Futils%2Fsrc%2Ftranslations.ts",
            "raw_url": "https://github.com/angular/angular/raw/8cd4099db93742d17264eebcc3ba1999b9f3db7c/packages%2Flocalize%2Fsrc%2Futils%2Fsrc%2Ftranslations.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Futils%2Fsrc%2Ftranslations.ts?ref=8cd4099db93742d17264eebcc3ba1999b9f3db7c",
            "patch": "@@ -113,7 +113,7 @@ export function parseTranslation(messageString: TargetMessage): ParsedTranslatio\n export function makeParsedTranslation(\n     messageParts: string[], placeholderNames: string[] = []): ParsedTranslation {\n   let messageString = messageParts[0];\n-  for (let i = 0; i < placeholderNames.length - 1; i++) {\n+  for (let i = 0; i < placeholderNames.length; i++) {\n     messageString += `{$${placeholderNames[i]}}${messageParts[i + 1]}`;\n   }\n   return {"
        },
        {
            "sha": "3ec4a5da01ca06f5a01d6321c53b52c9d13d6405",
            "filename": "packages/localize/src/utils/test/translations_spec.ts",
            "status": "modified",
            "additions": 19,
            "deletions": 1,
            "changes": 20,
            "blob_url": "https://github.com/angular/angular/blob/8cd4099db93742d17264eebcc3ba1999b9f3db7c/packages%2Flocalize%2Fsrc%2Futils%2Ftest%2Ftranslations_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8cd4099db93742d17264eebcc3ba1999b9f3db7c/packages%2Flocalize%2Fsrc%2Futils%2Ftest%2Ftranslations_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flocalize%2Fsrc%2Futils%2Ftest%2Ftranslations_spec.ts?ref=8cd4099db93742d17264eebcc3ba1999b9f3db7c",
            "patch": "@@ -5,7 +5,7 @@\n  * Use of this source code is governed by an MIT-style license that can be\n  * found in the LICENSE file at https://angular.io/license\n  */\n-import {computeMsgId, makeTemplateObject, ParsedTranslation, parseTranslation, TargetMessage, translate} from '..';\n+import {computeMsgId, makeParsedTranslation, makeTemplateObject, ParsedTranslation, parseTranslation, TargetMessage, translate} from '..';\n \n describe('utils', () => {\n   describe('makeTemplateObject', () => {\n@@ -22,6 +22,24 @@ describe('utils', () => {\n     });\n   });\n \n+  describe('makeParsedTranslation()', () => {\n+    it('should compute a template object from the parts', () => {\n+      expect(makeParsedTranslation(['a', 'b', 'c'], ['ph1', 'ph2']).messageParts)\n+          .toEqual(makeTemplateObject(['a', 'b', 'c'], ['a', 'b', 'c']));\n+    });\n+\n+    it('should include the placeholder names', () => {\n+      expect(makeParsedTranslation(['a', 'b', 'c'], ['ph1', 'ph2']).placeholderNames).toEqual([\n+        'ph1', 'ph2'\n+      ]);\n+    });\n+\n+    it('should compute the message string from the parts and placeholder names', () => {\n+      expect(makeParsedTranslation(['a', 'b', 'c'], ['ph1', 'ph2']).text)\n+          .toEqual('a{$ph1}b{$ph2}c');\n+    });\n+  });\n+\n   describe('parseTranslation', () => {\n     it('should extract the messageParts as a TemplateStringsArray', () => {\n       const translation = parseTranslation('a{$one}b{$two}c');"
        }
    ],
    "stats": {
        "total": 22,
        "additions": 20,
        "deletions": 2
    }
}