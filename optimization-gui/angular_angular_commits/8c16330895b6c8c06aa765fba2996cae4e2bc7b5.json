{
    "author": "petebacondarwin",
    "message": "test(compiler-cli): make typescript_ast_factory_spec tests resilient to line-endings (#38866)\n\nThe tests were assuming that newlines were `\\n` characters but this is not\nthe case on Windows. This was fixed in #38925, but a better solution is to\nconfigure the TS printer to always use `\\n` characters for newlines.\n\nPR Close #38866",
    "sha": "8c16330895b6c8c06aa765fba2996cae4e2bc7b5",
    "files": [
        {
            "sha": "a341535f602253f708006d5ff72bae16850c5033",
            "filename": "packages/compiler-cli/src/ngtsc/translator/test/typescript_ast_factory_spec.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 6,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/8c16330895b6c8c06aa765fba2996cae4e2bc7b5/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftranslator%2Ftest%2Ftypescript_ast_factory_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/8c16330895b6c8c06aa765fba2996cae4e2bc7b5/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftranslator%2Ftest%2Ftypescript_ast_factory_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftranslator%2Ftest%2Ftypescript_ast_factory_spec.ts?ref=8c16330895b6c8c06aa765fba2996cae4e2bc7b5",
            "patch": "@@ -6,7 +6,6 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n import {leadingComment} from '@angular/compiler';\n-import {EOL} from 'os';\n import * as ts from 'typescript';\n \n import {TypeScriptAstFactory} from '../src/typescript_ast_factory';\n@@ -25,7 +24,7 @@ describe('TypeScriptAstFactory', () => {\n         '/* comment 1 */',\n         '//comment 2',\n         'x = 10;',\n-      ].join(EOL));\n+      ].join('\\n'));\n     });\n   });\n \n@@ -62,7 +61,7 @@ describe('TypeScriptAstFactory', () => {\n         '    x = 10;',\n         '    y = 20;',\n         '}',\n-      ].join(EOL));\n+      ].join('\\n'));\n     });\n   });\n \n@@ -153,7 +152,7 @@ describe('TypeScriptAstFactory', () => {\n         '    x = 10;',\n         'else',\n         '    x = 42;',\n-      ].join(EOL));\n+      ].join('\\n'));\n     });\n \n     it('should create an if statement if the else expression is null', () => {\n@@ -163,7 +162,7 @@ describe('TypeScriptAstFactory', () => {\n       expect(generate(ifStmt)).toEqual([\n         'if (!test)',\n         '    x = 10;',\n-      ].join(EOL));\n+      ].join('\\n'));\n     });\n   });\n \n@@ -363,7 +362,7 @@ describe('TypeScriptAstFactory', () => {\n  * work via the returned `generate()` function.\n  */\n function setupStatements(stmts: string = ''): SetupResult<ts.Statement> {\n-  const printer = ts.createPrinter();\n+  const printer = ts.createPrinter({newLine: ts.NewLineKind.LineFeed});\n   const sf = ts.createSourceFile('test.ts', stmts, ts.ScriptTarget.ES2015, true);\n   return {\n     items: Array.from(sf.statements),"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 5,
        "deletions": 6
    }
}