{
    "author": "atscott",
    "message": "refactor(dev-infra): create anchors/aliases for excluded always active groups (#37798)\n\nglobal-approvers, global-docs-approvers, and required-minimum-review groups are always active. It's useful\nto have aliases for getting groups that are active/pending/rejected while excluding these few.\n\nPR Close #37798",
    "sha": "c91cdea0cd682a801d996010ba783458ef950e88",
    "files": [
        {
            "sha": "6eea6693f84b7c8a86674a08cfe492c24e5d5804",
            "filename": ".pullapprove.yml",
            "status": "modified",
            "additions": 18,
            "deletions": 8,
            "changes": 26,
            "blob_url": "https://github.com/angular/angular/blob/c91cdea0cd682a801d996010ba783458ef950e88/.pullapprove.yml",
            "raw_url": "https://github.com/angular/angular/raw/c91cdea0cd682a801d996010ba783458ef950e88/.pullapprove.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.pullapprove.yml?ref=c91cdea0cd682a801d996010ba783458ef950e88",
            "patch": "@@ -67,6 +67,23 @@ version: 3\n # Meta field that goes unused by PullApprove to allow for defining aliases to be\n # used throughout the config.\n meta:\n+  # The following groups have no file based conditions and will be initially `active` on all PRs\n+  # - `global-approvers`\n+  # - `global-docs-approvers`\n+  # - `required-minimum-review`\n+  #\n+  # By checking the number of active/pending/rejected groups when these are excluded, we can determine\n+  # if any other groups are matched.\n+  #\n+  # Also note that the ordering of groups matters in this file. The only groups visible to the current\n+  # one are those that appear above it.\n+  no-groups-above-this-pending: &no-groups-above-this-pending\n+    len(groups.pending.exclude(\"required-minimum-review\").exclude(\"global-approvers\").exclude(\"global-docs-approvers\")) == 0\n+  no-groups-above-this-rejected: &no-groups-above-this-rejected\n+    len(groups.rejected.exclude(\"required-minimum-review\").exclude(\"global-approvers\").exclude(\"global-docs-approvers\")) == 0\n+  no-groups-above-this-active: &no-groups-above-this-active\n+    len(groups.active.exclude(\"required-minimum-review\").exclude(\"global-approvers\").exclude(\"global-docs-approvers\")) == 0\n+\n   can-be-global-approved: &can-be-global-approved \"\\\"global-approvers\\\" not in groups.approved\"\n   can-be-global-docs-approved: &can-be-global-docs-approved \"\\\"global-docs-approvers\\\" not in groups.approved\"\n   defaults: &defaults\n@@ -1258,14 +1275,7 @@ groups:\n     # `global-approvers` can still approve PRs that match this `fallback` rule,\n     # but that should be an exception and not an expectation.\n     conditions:\n-      # The following groups have no file based conditions and will be initially `active` on all PRs\n-      # - `global-approvers`\n-      # - `global-docs-approvers`\n-      # - `required-minimum-review`\n-      #\n-      # By checking the number of active groups when these are excluded, we can determine\n-      # if any other groups are matched.\n-      - len(groups.active.exclude(\"required-minimum-review\").exclude(\"global-approvers\").exclude(\"global-docs-approvers\")) == 0\n+      - *no-groups-above-this-active\n       # When any of the `global-*` groups is approved, they cause other groups to deactivate.\n       # In those cases, the condition above would evaluate to `true` while in reality, only a global\n       # approval has been provided. To ensure we don't activate the fallback group in such cases,"
        }
    ],
    "stats": {
        "total": 26,
        "additions": 18,
        "deletions": 8
    }
}