{
    "author": "sonukapoor",
    "message": "test(docs-infra): remove deprecated `ReflectiveInjector` (#38408)\n\nThis commit replaces the old and slow `ReflectiveInjector` that was\ndeprecated in v5 with the new `Injector`. Note: This change was only\ndone in the spec files inside the `aio` folder.\n\nWhile changing this, it was not possible to directly use `Injector.get`\nto get the correct typing for the mocked classes. For example:\n\n```typescript\nlocationService = injector.get<TestLocationService>(LocationService);\n```\n\nFails with:\n\n> Argument of type 'typeof LocationService' is not assignable to parameter\nof type 'Type<TestLocationService> | InjectionToken<TestLocationService> |\nAbstractType<TestLocationService>'.\n  Type 'typeof LocationService' is not assignable to type 'Type<TestLocationService>'.\n    Property 'searchResult' is missing in type 'LocationService' but required in type\n    'TestLocationService'.\n\nTherefore, it was necessary to first convert to `unknown` and then to\n`TestLocationService`.\n\n```typescript\nlocationService = injector.get(LocationService) as unknown as TestLocationService;\n```\n\nPR Close #38408",
    "sha": "175c79d1d831b6c1278914250da016bde184b735",
    "files": [
        {
            "sha": "72f110ce2990d51fab920963480e3e153fc7305a",
            "filename": "aio/src/app/custom-elements/contributor/contributor-list.component.spec.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 10,
            "changes": 22,
            "blob_url": "https://github.com/angular/angular/blob/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcontributor%2Fcontributor-list.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcontributor%2Fcontributor-list.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcontributor%2Fcontributor-list.component.spec.ts?ref=175c79d1d831b6c1278914250da016bde184b735",
            "patch": "@@ -1,4 +1,4 @@\n-import { ReflectiveInjector } from '@angular/core';\n+import { Injector } from '@angular/core';\n \n import { of } from 'rxjs';\n \n@@ -12,20 +12,22 @@ import { LocationService } from 'app/shared/location.service';\n describe('ContributorListComponent', () => {\n \n   let component: ContributorListComponent;\n-  let injector: ReflectiveInjector;\n+  let injector: Injector;\n   let contributorService: TestContributorService;\n   let locationService: TestLocationService;\n   let contributorGroups: ContributorGroup[];\n \n   beforeEach(() => {\n-    injector = ReflectiveInjector.resolveAndCreate([\n-      ContributorListComponent,\n-      {provide: ContributorService, useClass: TestContributorService },\n-      {provide: LocationService, useClass: TestLocationService }\n-    ]);\n-\n-    locationService = injector.get(LocationService);\n-    contributorService = injector.get(ContributorService);\n+    injector = Injector.create({\n+      providers: [\n+        {provide: ContributorListComponent, deps: [ContributorService, LocationService] },\n+        {provide: ContributorService, useClass: TestContributorService, deps: [] },\n+        {provide: LocationService, useClass: TestLocationService, deps: [] }\n+      ]\n+    });\n+\n+    locationService = injector.get(LocationService) as unknown as TestLocationService;\n+    contributorService = injector.get(ContributorService) as unknown as TestContributorService;\n     contributorGroups = contributorService.testContributors;\n   });\n "
        },
        {
            "sha": "cfc2bbf5548a3c13dd6f57f986d9bbccd8973ec9",
            "filename": "aio/src/app/custom-elements/resource/resource-list.component.spec.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 10,
            "changes": 22,
            "blob_url": "https://github.com/angular/angular/blob/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fresource%2Fresource-list.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fresource%2Fresource-list.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fresource%2Fresource-list.component.spec.ts?ref=175c79d1d831b6c1278914250da016bde184b735",
            "patch": "@@ -1,4 +1,4 @@\n-import { ReflectiveInjector } from '@angular/core';\n+import { Injector } from '@angular/core';\n \n import { of } from 'rxjs';\n \n@@ -12,20 +12,22 @@ import { Category } from './resource.model';\n describe('ResourceListComponent', () => {\n \n   let component: ResourceListComponent;\n-  let injector: ReflectiveInjector;\n+  let injector: Injector;\n   let resourceService: TestResourceService;\n   let locationService: TestLocationService;\n   let categories: Category[];\n \n   beforeEach(() => {\n-    injector = ReflectiveInjector.resolveAndCreate([\n-      ResourceListComponent,\n-      {provide: ResourceService, useClass: TestResourceService },\n-      {provide: LocationService, useClass: TestLocationService }\n-    ]);\n-\n-    locationService = injector.get(LocationService);\n-    resourceService = injector.get(ResourceService);\n+    injector = Injector.create({\n+      providers: [\n+        {provide: ResourceListComponent, deps: [ResourceService, LocationService] },\n+        {provide: ResourceService, useClass: TestResourceService, deps: [] },\n+        {provide: LocationService, useClass: TestLocationService, deps: [] }\n+      ]\n+    });\n+\n+    locationService = injector.get(LocationService) as unknown as TestLocationService;\n+    resourceService = injector.get(ResourceService) as unknown as TestResourceService;\n     categories = resourceService.testCategories;\n   });\n "
        },
        {
            "sha": "906236f16178ce8f2f696682b2ec0bd3427d8e04",
            "filename": "aio/src/app/search/search.service.spec.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 6,
            "changes": 15,
            "blob_url": "https://github.com/angular/angular/blob/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fsearch%2Fsearch.service.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fsearch%2Fsearch.service.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fsearch%2Fsearch.service.spec.ts?ref=175c79d1d831b6c1278914250da016bde184b735",
            "patch": "@@ -1,12 +1,12 @@\n-import { ReflectiveInjector, NgZone } from '@angular/core';\n+import { Injector, NgZone } from '@angular/core';\n import { fakeAsync, tick } from '@angular/core/testing';\n import { of } from 'rxjs';\n import { SearchService } from './search.service';\n import { WebWorkerClient } from 'app/shared/web-worker';\n \n describe('SearchService', () => {\n \n-  let injector: ReflectiveInjector;\n+  let injector: Injector;\n   let service: SearchService;\n   let sendMessageSpy: jasmine.Spy;\n   let mockWorker: WebWorkerClient;\n@@ -16,10 +16,13 @@ describe('SearchService', () => {\n     mockWorker = { sendMessage: sendMessageSpy } as any;\n     spyOn(WebWorkerClient, 'create').and.returnValue(mockWorker);\n \n-    injector = ReflectiveInjector.resolveAndCreate([\n-        SearchService,\n-        { provide: NgZone, useFactory: () => new NgZone({ enableLongStackTrace: false }) }\n-    ]);\n+    injector = Injector.create({\n+      providers: [\n+        { provide: SearchService, deps: [NgZone]},\n+        { provide: NgZone, useFactory: () => new NgZone({ enableLongStackTrace: false }), deps: [] }\n+      ]\n+    });\n+\n     service = injector.get(SearchService);\n   });\n "
        },
        {
            "sha": "5c19ee20164a37e5372627752064383ba8dad63c",
            "filename": "aio/src/app/shared/deployment.service.spec.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 6,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fshared%2Fdeployment.service.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fshared%2Fdeployment.service.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fshared%2Fdeployment.service.spec.ts?ref=175c79d1d831b6c1278914250da016bde184b735",
            "patch": "@@ -1,4 +1,4 @@\n-import { ReflectiveInjector } from '@angular/core';\n+import { Injector } from '@angular/core';\n import { environment } from 'environments/environment';\n import { LocationService } from 'app/shared/location.service';\n import { MockLocationService } from 'testing/location.service';\n@@ -15,7 +15,7 @@ describe('Deployment service', () => {\n     it('should get the mode from the `mode` query parameter if available', () => {\n       const injector = getInjector();\n \n-      const locationService: MockLocationService = injector.get(LocationService);\n+      const locationService = injector.get(LocationService) as unknown as MockLocationService;\n       locationService.search.and.returnValue({ mode: 'bar' });\n \n       const deployment = injector.get(Deployment);\n@@ -25,8 +25,8 @@ describe('Deployment service', () => {\n });\n \n function getInjector() {\n-  return ReflectiveInjector.resolveAndCreate([\n-    Deployment,\n-    { provide: LocationService, useFactory: () => new MockLocationService('') }\n-  ]);\n+  return Injector.create({providers: [\n+    { provide: Deployment, deps: [LocationService] },\n+    { provide: LocationService, useFactory: () => new MockLocationService(''), deps: [] }\n+  ]});\n }"
        },
        {
            "sha": "507b23e71376b8d76f3c7d3bd23bacc6b058b310",
            "filename": "aio/src/app/shared/ga.service.spec.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 3,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fshared%2Fga.service.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fshared%2Fga.service.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fshared%2Fga.service.spec.ts?ref=175c79d1d831b6c1278914250da016bde184b735",
            "patch": "@@ -1,18 +1,23 @@\n-import { ReflectiveInjector } from '@angular/core';\n+import { Injector } from '@angular/core';\n \n import { GaService } from 'app/shared/ga.service';\n import { WindowToken } from 'app/shared/window';\n \n describe('GaService', () => {\n   let gaService: GaService;\n-  let injector: ReflectiveInjector;\n+  let injector: Injector;\n   let gaSpy: jasmine.Spy;\n   let mockWindow: any;\n \n   beforeEach(() => {\n     gaSpy = jasmine.createSpy('ga');\n     mockWindow = { ga: gaSpy };\n-    injector = ReflectiveInjector.resolveAndCreate([GaService, { provide: WindowToken, useFactory: () => mockWindow }]);\n+    injector = Injector.create({\n+      providers: [\n+        { provide: GaService, deps: [WindowToken] },\n+        { provide: WindowToken, useFactory: () => mockWindow, deps: [] }\n+      ]});\n+\n     gaService = injector.get(GaService);\n   });\n "
        },
        {
            "sha": "96617584932a8d6d8daecbe473f148632c792afa",
            "filename": "aio/src/app/shared/location.service.spec.ts",
            "status": "modified",
            "additions": 19,
            "deletions": 17,
            "changes": 36,
            "blob_url": "https://github.com/angular/angular/blob/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fshared%2Flocation.service.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fshared%2Flocation.service.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fshared%2Flocation.service.spec.ts?ref=175c79d1d831b6c1278914250da016bde184b735",
            "patch": "@@ -1,4 +1,4 @@\n-import { ReflectiveInjector } from '@angular/core';\n+import { Injector } from '@angular/core';\n import { Location, LocationStrategy, PlatformLocation } from '@angular/common';\n import { MockLocationStrategy } from '@angular/common/testing';\n import { Subject } from 'rxjs';\n@@ -9,26 +9,28 @@ import { LocationService } from './location.service';\n import { ScrollService } from './scroll.service';\n \n describe('LocationService', () => {\n-  let injector: ReflectiveInjector;\n+  let injector: Injector;\n   let location: MockLocationStrategy;\n   let service: LocationService;\n   let swUpdates: MockSwUpdatesService;\n   let scrollService: MockScrollService;\n \n   beforeEach(() => {\n-    injector = ReflectiveInjector.resolveAndCreate([\n-        LocationService,\n-        Location,\n-        { provide: GaService, useClass: TestGaService },\n-        { provide: LocationStrategy, useClass: MockLocationStrategy },\n-        { provide: PlatformLocation, useClass: MockPlatformLocation },\n-        { provide: SwUpdatesService, useClass: MockSwUpdatesService },\n-        { provide: ScrollService, useClass: MockScrollService }\n-    ]);\n-\n-    location  = injector.get(LocationStrategy);\n-    service  = injector.get(LocationService);\n-    swUpdates  = injector.get(SwUpdatesService);\n+    injector = Injector.create({\n+      providers: [\n+        { provide: LocationService, deps: [GaService, Location, ScrollService, PlatformLocation, SwUpdatesService] },\n+        { provide: Location, deps: [LocationStrategy, PlatformLocation] },\n+        { provide: GaService, useClass: TestGaService, deps: [] },\n+        { provide: LocationStrategy, useClass: MockLocationStrategy, deps: [] },\n+        { provide: PlatformLocation, useClass: MockPlatformLocation, deps: [] },\n+        { provide: SwUpdatesService, useClass: MockSwUpdatesService, deps: [] },\n+        { provide: ScrollService, useClass: MockScrollService, deps: [] }\n+      ]\n+    });\n+\n+    location = injector.get(LocationStrategy) as unknown as MockLocationStrategy;\n+    service = injector.get(LocationService);\n+    swUpdates = injector.get(SwUpdatesService) as unknown as MockSwUpdatesService;\n     scrollService = injector.get(ScrollService);\n   });\n \n@@ -380,7 +382,7 @@ describe('LocationService', () => {\n     let platformLocation: MockPlatformLocation;\n \n     beforeEach(() => {\n-      platformLocation = injector.get(PlatformLocation);\n+      platformLocation = injector.get(PlatformLocation) as unknown as MockPlatformLocation;\n     });\n \n     it('should call replaceState on PlatformLocation', () => {\n@@ -577,7 +579,7 @@ describe('LocationService', () => {\n     let gaLocationChanged: jasmine.Spy;\n \n     beforeEach(() => {\n-      const gaService = injector.get(GaService);\n+      const gaService = injector.get(GaService) as unknown as TestGaService;\n       gaLocationChanged = gaService.locationChanged;\n       // execute currentPath observable so that gaLocationChanged is called\n       service.currentPath.subscribe();"
        },
        {
            "sha": "2dedb6e228db66792c92645d8e1666609851cec4",
            "filename": "aio/src/app/shared/logger.service.spec.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fshared%2Flogger.service.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fshared%2Flogger.service.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fshared%2Flogger.service.spec.ts?ref=175c79d1d831b6c1278914250da016bde184b735",
            "patch": "@@ -1,4 +1,4 @@\n-import { ErrorHandler, ReflectiveInjector } from '@angular/core';\n+import { ErrorHandler, Injector } from '@angular/core';\n import { Logger } from './logger.service';\n \n describe('logger service', () => {\n@@ -10,10 +10,10 @@ describe('logger service', () => {\n   beforeEach(() => {\n     logSpy = spyOn(console, 'log');\n     warnSpy = spyOn(console, 'warn');\n-    const injector = ReflectiveInjector.resolveAndCreate([\n-      Logger,\n-      { provide: ErrorHandler, useClass: MockErrorHandler }\n-    ]);\n+    const injector = Injector.create({providers: [\n+      { provide: Logger, deps: [ErrorHandler] },\n+      { provide: ErrorHandler, useClass: MockErrorHandler, deps: [] }\n+    ]});\n     logger = injector.get(Logger);\n     errorHandler = injector.get(ErrorHandler);\n   });"
        },
        {
            "sha": "39fb790e30645934f623c8ed51b905c828de4695",
            "filename": "aio/src/app/shared/reporting-error-handler.spec.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fshared%2Freporting-error-handler.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fshared%2Freporting-error-handler.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fshared%2Freporting-error-handler.spec.ts?ref=175c79d1d831b6c1278914250da016bde184b735",
            "patch": "@@ -1,4 +1,4 @@\n-import { ErrorHandler, ReflectiveInjector } from '@angular/core';\n+import { ErrorHandler, Injector } from '@angular/core';\n import { TestBed } from '@angular/core/testing';\n import { WindowToken } from 'app/shared/window';\n import { AppModule } from 'app/app.module';\n@@ -14,11 +14,12 @@ describe('ReportingErrorHandler service', () => {\n     onerrorSpy = jasmine.createSpy('onerror');\n     superHandler = spyOn(ErrorHandler.prototype, 'handleError');\n \n-    const injector = ReflectiveInjector.resolveAndCreate([\n-      { provide: ErrorHandler, useClass: ReportingErrorHandler },\n-      { provide: WindowToken, useFactory: () => ({ onerror: onerrorSpy }) }\n-    ]);\n-    handler = injector.get(ErrorHandler);\n+    const injector = Injector.create({providers: [\n+      { provide: ErrorHandler, useClass: ReportingErrorHandler, deps: [WindowToken] },\n+      { provide: WindowToken, useFactory: () => ({ onerror: onerrorSpy }), deps: [] }\n+    ]});\n+\n+    handler = injector.get(ErrorHandler) as unknown as ReportingErrorHandler;\n   });\n \n   it('should be registered on the AppModule', () => {"
        },
        {
            "sha": "9184839fa564e2d3e1f8346ddf4202881090d00d",
            "filename": "aio/src/app/shared/scroll-spy.service.spec.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fshared%2Fscroll-spy.service.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fshared%2Fscroll-spy.service.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fshared%2Fscroll-spy.service.spec.ts?ref=175c79d1d831b6c1278914250da016bde184b735",
            "patch": "@@ -1,4 +1,4 @@\n-import { Injector, ReflectiveInjector } from '@angular/core';\n+import { Injector } from '@angular/core';\n import { fakeAsync, tick } from '@angular/core/testing';\n import { DOCUMENT } from '@angular/common';\n \n@@ -151,11 +151,11 @@ describe('ScrollSpyService', () => {\n   let scrollSpyService: ScrollSpyService;\n \n   beforeEach(() => {\n-    injector = ReflectiveInjector.resolveAndCreate([\n+    injector = Injector.create({providers: [\n       { provide: DOCUMENT, useValue: { body: {} } },\n       { provide: ScrollService, useValue: { topOffset: 50 } },\n-      ScrollSpyService\n-    ]);\n+      { provide: ScrollSpyService, deps: [DOCUMENT, ScrollService] }\n+    ]});\n \n     scrollSpyService = injector.get(ScrollSpyService);\n   });"
        },
        {
            "sha": "51cbfb490c6f95325d0694d39f9012767efcb072",
            "filename": "aio/src/app/shared/scroll.service.spec.ts",
            "status": "modified",
            "additions": 19,
            "deletions": 15,
            "changes": 34,
            "blob_url": "https://github.com/angular/angular/blob/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fshared%2Fscroll.service.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fshared%2Fscroll.service.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fshared%2Fscroll.service.spec.ts?ref=175c79d1d831b6c1278914250da016bde184b735",
            "patch": "@@ -1,7 +1,7 @@\n import {Location, LocationStrategy, PlatformLocation, ViewportScroller} from '@angular/common';\n import {DOCUMENT} from '@angular/common';\n import {MockLocationStrategy, SpyLocation} from '@angular/common/testing';\n-import {ReflectiveInjector} from '@angular/core';\n+import {Injector} from '@angular/core';\n import {fakeAsync, tick} from '@angular/core/testing';\n \n import {ScrollService, topMargin} from './scroll.service';\n@@ -15,7 +15,7 @@ describe('ScrollService', () => {\n   };\n \n   const topOfPageElem = {} as Element;\n-  let injector: ReflectiveInjector;\n+  let injector: Injector;\n   let document: MockDocument;\n   let platformLocation: MockPlatformLocation;\n   let scrollService: ScrollService;\n@@ -41,21 +41,25 @@ describe('ScrollService', () => {\n       jasmine.createSpyObj('viewportScroller', ['getScrollPosition', 'scrollToPosition']);\n \n   beforeEach(() => {\n-    injector = ReflectiveInjector.resolveAndCreate([\n-      {\n-        provide: ScrollService,\n-        useFactory: createScrollService,\n-        deps: [DOCUMENT, PlatformLocation, ViewportScroller, Location],\n-      },\n-      {provide: Location, useClass: SpyLocation}, {provide: DOCUMENT, useClass: MockDocument},\n-      {provide: PlatformLocation, useClass: MockPlatformLocation},\n-      {provide: ViewportScroller, useValue: viewportScrollerStub},\n-      {provide: LocationStrategy, useClass: MockLocationStrategy}\n-    ]);\n+    injector = Injector.create( {\n+      providers: [\n+        {\n+          provide: ScrollService,\n+          useFactory: createScrollService,\n+          deps: [DOCUMENT, PlatformLocation, ViewportScroller, Location],\n+        },\n+        {provide: Location, useClass: SpyLocation, deps: [] },\n+        {provide: DOCUMENT, useClass: MockDocument, deps: []},\n+        {provide: PlatformLocation, useClass: MockPlatformLocation, deps: []},\n+        {provide: ViewportScroller, useValue: viewportScrollerStub},\n+        {provide: LocationStrategy, useClass: MockLocationStrategy, deps: []}\n+      ]\n+    });\n+\n     platformLocation = injector.get(PlatformLocation);\n-    document = injector.get(DOCUMENT);\n+    document = injector.get(DOCUMENT) as unknown as MockDocument;\n     scrollService = injector.get(ScrollService);\n-    location = injector.get(Location);\n+    location = injector.get(Location) as unknown as SpyLocation;\n \n     spyOn(window, 'scrollBy');\n   });"
        },
        {
            "sha": "be5cd36fe5977860563ec2b7ba34e58e4b2e39b1",
            "filename": "aio/src/app/shared/toc.service.spec.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 9,
            "changes": 19,
            "blob_url": "https://github.com/angular/angular/blob/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fshared%2Ftoc.service.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fshared%2Ftoc.service.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fshared%2Ftoc.service.spec.ts?ref=175c79d1d831b6c1278914250da016bde184b735",
            "patch": "@@ -1,13 +1,13 @@\n import { DOCUMENT } from '@angular/common';\n-import { ReflectiveInjector } from '@angular/core';\n+import { Injector } from '@angular/core';\n import { DomSanitizer, SafeHtml } from '@angular/platform-browser';\n import { Subject } from 'rxjs';\n \n import { ScrollItem, ScrollSpyInfo, ScrollSpyService } from 'app/shared/scroll-spy.service';\n import { TocItem, TocService } from './toc.service';\n \n describe('TocService', () => {\n-  let injector: ReflectiveInjector;\n+  let injector: Injector;\n   let scrollSpyService: MockScrollSpyService;\n   let tocService: TocService;\n   let lastTocList: TocItem[];\n@@ -21,13 +21,14 @@ describe('TocService', () => {\n   }\n \n   beforeEach(() => {\n-    injector = ReflectiveInjector.resolveAndCreate([\n-      { provide: DomSanitizer, useClass: TestDomSanitizer },\n+    injector = Injector.create({providers: [\n+      { provide: DomSanitizer, useClass: TestDomSanitizer, deps: [] },\n       { provide: DOCUMENT, useValue: document },\n-      { provide: ScrollSpyService, useClass: MockScrollSpyService },\n-      TocService,\n-    ]);\n-    scrollSpyService = injector.get(ScrollSpyService);\n+      { provide: ScrollSpyService, useClass: MockScrollSpyService, deps: [] },\n+      { provide: TocService, deps: [DOCUMENT, DomSanitizer, ScrollSpyService] },\n+    ]});\n+\n+    scrollSpyService = injector.get(ScrollSpyService) as unknown as MockScrollSpyService;\n     tocService = injector.get(TocService);\n     tocService.tocList.subscribe(tocList => lastTocList = tocList);\n   });\n@@ -330,7 +331,7 @@ describe('TocService', () => {\n     });\n \n     it('should have bypassed HTML sanitizing of heading\\'s innerHTML ', () => {\n-      const domSanitizer: TestDomSanitizer = injector.get(DomSanitizer);\n+      const domSanitizer: TestDomSanitizer = injector.get(DomSanitizer) as unknown as TestDomSanitizer;\n       expect(domSanitizer.bypassSecurityTrustHtml)\n         .toHaveBeenCalledWith('Setup to develop <i>locally</i>.');\n     });"
        },
        {
            "sha": "fa35b19931e6002e982546097e5cbb4f33f7d171",
            "filename": "aio/src/app/sw-updates/sw-updates.service.spec.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 11,
            "changes": 22,
            "blob_url": "https://github.com/angular/angular/blob/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fsw-updates%2Fsw-updates.service.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/175c79d1d831b6c1278914250da016bde184b735/aio%2Fsrc%2Fapp%2Fsw-updates%2Fsw-updates.service.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fsw-updates%2Fsw-updates.service.spec.ts?ref=175c79d1d831b6c1278914250da016bde184b735",
            "patch": "@@ -1,4 +1,4 @@\n-import { ApplicationRef, ReflectiveInjector } from '@angular/core';\n+import { ApplicationRef, Injector } from '@angular/core';\n import { discardPeriodicTasks, fakeAsync, tick } from '@angular/core/testing';\n import { SwUpdate } from '@angular/service-worker';\n import { Subject } from 'rxjs';\n@@ -8,7 +8,7 @@ import { SwUpdatesService } from './sw-updates.service';\n \n \n describe('SwUpdatesService', () => {\n-  let injector: ReflectiveInjector;\n+  let injector: Injector;\n   let appRef: MockApplicationRef;\n   let service: SwUpdatesService;\n   let swu: MockSwUpdate;\n@@ -21,16 +21,16 @@ describe('SwUpdatesService', () => {\n   //   run `setup()`/`tearDown()` in `beforeEach()`/`afterEach()` blocks. We use the `run()` helper\n   //   to call them inside each test's zone.\n   const setup = (isSwUpdateEnabled: boolean) => {\n-    injector = ReflectiveInjector.resolveAndCreate([\n-      { provide: ApplicationRef, useClass: MockApplicationRef },\n-      { provide: Logger, useClass: MockLogger },\n-      { provide: SwUpdate, useFactory: () => new MockSwUpdate(isSwUpdateEnabled) },\n-      SwUpdatesService\n-    ]);\n-\n-    appRef = injector.get(ApplicationRef);\n+    injector = Injector.create({providers: [\n+      { provide: ApplicationRef, useClass: MockApplicationRef, deps: [] },\n+      { provide: Logger, useClass: MockLogger, deps: [] },\n+      { provide: SwUpdate, useFactory: () => new MockSwUpdate(isSwUpdateEnabled), deps: [] },\n+      { provide: SwUpdatesService, deps: [ApplicationRef, Logger, SwUpdate] }\n+    ]});\n+\n+    appRef = injector.get(ApplicationRef) as unknown as MockApplicationRef;\n     service = injector.get(SwUpdatesService);\n-    swu = injector.get(SwUpdate);\n+    swu = injector.get(SwUpdate) as unknown as MockSwUpdate;\n     checkInterval = (service as any).checkInterval;\n   };\n   const tearDown = () => service.ngOnDestroy();"
        }
    ],
    "stats": {
        "total": 224,
        "additions": 122,
        "deletions": 102
    }
}