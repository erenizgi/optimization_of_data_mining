{
    "author": "JoostK",
    "message": "refactor(compiler): remove unused `AstPath` (#44411)\n\nThis code is no longer used now that ViewEngine has been removed.\n\nPR Close #44411",
    "sha": "26eee35dc260417d436999ecf26ae7c46f6d388e",
    "files": [
        {
            "sha": "532ed3bc22948635201981851bd28a3a29f3b094",
            "filename": "packages/compiler/src/ast_path.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 60,
            "changes": 60,
            "blob_url": "https://github.com/angular/angular/blob/a0c36ac0f57de93379dc4223c8f571f2a0dd6ef2/packages%2Fcompiler%2Fsrc%2Fast_path.ts",
            "raw_url": "https://github.com/angular/angular/raw/a0c36ac0f57de93379dc4223c8f571f2a0dd6ef2/packages%2Fcompiler%2Fsrc%2Fast_path.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fast_path.ts?ref=a0c36ac0f57de93379dc4223c8f571f2a0dd6ef2",
            "patch": "@@ -1,60 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-/**\n- * A path is an ordered set of elements. Typically a path is to  a\n- * particular offset in a source file. The head of the list is the top\n- * most node. The tail is the node that contains the offset directly.\n- *\n- * For example, the expression `a + b + c` might have an ast that looks\n- * like:\n- *     +\n- *    / \\\n- *   a   +\n- *      / \\\n- *     b   c\n- *\n- * The path to the node at offset 9 would be `['+' at 1-10, '+' at 7-10,\n- * 'c' at 9-10]` and the path the node at offset 1 would be\n- * `['+' at 1-10, 'a' at 1-2]`.\n- */\n-export class AstPath<T> {\n-  constructor(private path: T[], public position: number = -1) {}\n-\n-  get empty(): boolean {\n-    return !this.path || !this.path.length;\n-  }\n-  get head(): T|undefined {\n-    return this.path[0];\n-  }\n-  get tail(): T|undefined {\n-    return this.path[this.path.length - 1];\n-  }\n-\n-  parentOf(node: T|undefined): T|undefined {\n-    return node && this.path[this.path.indexOf(node) - 1];\n-  }\n-  childOf(node: T): T|undefined {\n-    return this.path[this.path.indexOf(node) + 1];\n-  }\n-\n-  first<N extends T>(ctor: {new(...args: any[]): N}): N|undefined {\n-    for (let i = this.path.length - 1; i >= 0; i--) {\n-      let item = this.path[i];\n-      if (item instanceof ctor) return <N>item;\n-    }\n-  }\n-\n-  push(node: T) {\n-    this.path.push(node);\n-  }\n-\n-  pop(): T {\n-    return this.path.pop()!;\n-  }\n-}"
        },
        {
            "sha": "b434de7f92cf7458dc86f6ead7828ff684f65958",
            "filename": "packages/compiler/src/compiler.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/26eee35dc260417d436999ecf26ae7c46f6d388e/packages%2Fcompiler%2Fsrc%2Fcompiler.ts",
            "raw_url": "https://github.com/angular/angular/raw/26eee35dc260417d436999ecf26ae7c46f6d388e/packages%2Fcompiler%2Fsrc%2Fcompiler.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fcompiler.ts?ref=26eee35dc260417d436999ecf26ae7c46f6d388e",
            "patch": "@@ -36,7 +36,6 @@ export {core};\n \n export * from './version';\n export {CompilerConfig, preserveWhitespacesDefault} from './config';\n-export * from './ast_path';\n export {Identifiers} from './identifiers';\n export * from './resource_loader';\n export {ConstantPool} from './constant_pool';"
        },
        {
            "sha": "806fb79414f769d567d551f29cff7dffb9d5c651",
            "filename": "packages/compiler/src/ml_parser/ast.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 36,
            "changes": 37,
            "blob_url": "https://github.com/angular/angular/blob/26eee35dc260417d436999ecf26ae7c46f6d388e/packages%2Fcompiler%2Fsrc%2Fml_parser%2Fast.ts",
            "raw_url": "https://github.com/angular/angular/raw/26eee35dc260417d436999ecf26ae7c46f6d388e/packages%2Fcompiler%2Fsrc%2Fml_parser%2Fast.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fml_parser%2Fast.ts?ref=26eee35dc260417d436999ecf26ae7c46f6d388e",
            "patch": "@@ -6,9 +6,9 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import {AstPath} from '../ast_path';\n import {I18nMeta} from '../i18n/i18n_ast';\n import {ParseSourceSpan} from '../parse_util';\n+\n import {InterpolatedAttributeToken, InterpolatedTextToken} from './tokens';\n \n interface BaseNode {\n@@ -147,38 +147,3 @@ export class RecursiveVisitor implements Visitor {\n     return Array.prototype.concat.apply([], results);\n   }\n }\n-\n-export type HtmlAstPath = AstPath<Node>;\n-\n-function spanOf(ast: Node) {\n-  const start = ast.sourceSpan.start.offset;\n-  let end = ast.sourceSpan.end.offset;\n-  if (ast instanceof Element) {\n-    if (ast.endSourceSpan) {\n-      end = ast.endSourceSpan.end.offset;\n-    } else if (ast.children && ast.children.length) {\n-      end = spanOf(ast.children[ast.children.length - 1]).end;\n-    }\n-  }\n-  return {start, end};\n-}\n-\n-export function findNode(nodes: Node[], position: number): HtmlAstPath {\n-  const path: Node[] = [];\n-\n-  const visitor = new class extends RecursiveVisitor {\n-    visit(ast: Node, context: any): any {\n-      const span = spanOf(ast);\n-      if (span.start <= position && position < span.end) {\n-        path.push(ast);\n-      } else {\n-        // Returning a value here will result in the children being skipped.\n-        return true;\n-      }\n-    }\n-  };\n-\n-  visitAll(visitor, nodes);\n-\n-  return new AstPath<Node>(path, position);\n-}"
        }
    ],
    "stats": {
        "total": 98,
        "additions": 1,
        "deletions": 97
    }
}