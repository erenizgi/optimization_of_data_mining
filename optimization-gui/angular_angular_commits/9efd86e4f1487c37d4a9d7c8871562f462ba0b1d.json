{
    "author": "AleksanderBodurri",
    "message": "build(devtools): migrate ng-devtools-backend to bazel\n\nAllows the ng-devtools-backend to be built with bazel. Allows ng-devtools-backend to be used as a dependency in other bazel build rules.",
    "sha": "9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
    "files": [
        {
            "sha": "8316e4b72717113b2fee2eef25c3e927733ef4da",
            "filename": "package.json",
            "status": "modified",
            "additions": 5,
            "deletions": 7,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/package.json",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -7,24 +7,22 @@\n     \"cypress:verify\": \"cypress verify\",\n     \"start\": \"ibazel run src:devserver\",\n     \"start-no-animations\": \"bazel run src:devserver-e2e\",\n-    \"build\": \"ng build\",\n     \"build:chrome\": \"bazel build projects/shell-chrome/src:prodapp\",\n     \"build:chrome:watch\": \"ibazel build projects/shell-chrome/src:prodapp\",\n-    \"release\": \"node projects/shell-chrome/set-version.js && cross-env LATEST_SHA=`git rev-parse --short HEAD` ng build shell-chrome --configuration production\",\n+    \"release\": \"node projects/shell-chrome/set-version.js && cross-env LATEST_SHA=`git rev-parse --short HEAD` build:chrome\",\n     \"test\": \"ng test\",\n     \"lint\": \"tslint -p tsconfig.json -c tslint.json\",\n     \"lint:fix\": \"tslint -p tsconfig.json -c tslint.json --fix\",\n-    \"e2e\": \"npm run cy:run\",\n-    \"cy:verify\": \"$(npm bin)/cypress verify\",\n-    \"cy:version\": \"$(npm bin)/cypress version\",\n+    \"e2e\": \"yarn cy:run\",\n+    \"cy:verify\": \"$(yarn bin)/cypress verify\",\n+    \"cy:version\": \"$(yarn bin)/cypress version\",\n     \"cy:run\": \"$(yarn bin)/cypress run\",\n     \"cy:open\": \"$(yarn bin)/cypress open\",\n     \"cy:ci\": \"start-server-and-test start-no-animations http-get://localhost:4200 cy:run\",\n     \"cy:watch\": \"start-server-and-test start-no-animations http-get://localhost:4200 cy:open\",\n     \"test:ci\": \"bazel test projects/shared-utils/... projects/protocol/... projects/ng-devtools/... projects/ng-devtools-backend/...\",\n     \"prettier\": \"prettier --write \\\"{,!(node_modules|dist|build|coverage)/**/}*.{js,jsx,ts,tsx,json}\\\"\",\n-    \"prettier:fix\": \"pretty-quick --staged\",\n-    \"bazel:build\": \"yarn bazel:build:protocol && yarn bazel:build:ng-devtools-backend && yarn bazel:build:shared-utils && yarn bazel:build:ng-devtools\"\n+    \"prettier:fix\": \"pretty-quick --staged\"\n   },\n   \"husky\": {\n     \"hooks\": {"
        },
        {
            "sha": "43fdc2f1e04d326a48724a83190030d43d6795a6",
            "filename": "projects/ng-devtools-backend/BUILD.bazel",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2FBUILD.bazel?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -0,0 +1,21 @@\n+load(\"//tools:angular_ts_library.bzl\", \"ng_ts_library\")\n+load(\"@npm//@bazel/typescript:index.bzl\", \"ts_config\", \"ts_library\")\n+load(\"@npm//@bazel/concatjs:index.bzl\", \"karma_web_test_suite\")\n+\n+package(default_visibility = [\"//visibility:public\"])\n+\n+ts_config(\n+    name = \"tsconfig-lib\",\n+    src = \"tsconfig.lib.json\",\n+    deps = [\"//:tsconfig.json\"],\n+)\n+\n+ng_ts_library(\n+    name = \"ng-devtools-backend\",\n+    srcs = [\"index.ts\"],\n+    deps = [\n+        \"//projects/ng-devtools-backend/src\",\n+    ],\n+    module_name = \"ng-devtools-backend\",\n+    tsconfig = \":tsconfig-lib\"\n+)"
        },
        {
            "sha": "1875d3f9bfee2790658615e4baec56b83e0b6dcb",
            "filename": "projects/ng-devtools-backend/index.ts",
            "status": "added",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Findex.ts?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -0,0 +1 @@\n+export * from './src/public-api';"
        },
        {
            "sha": "3d6ccbc854d2a6b7cdcc2214e8a1e6b9cc6c2cc3",
            "filename": "projects/ng-devtools-backend/src/BUILD.bazel",
            "status": "added",
            "additions": 15,
            "deletions": 0,
            "changes": 15,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2FBUILD.bazel?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -0,0 +1,15 @@\n+load(\"//tools:angular_ts_library.bzl\", \"ng_ts_library\")\n+\n+package(default_visibility = [\"//visibility:public\"])\n+\n+ng_ts_library(\n+    name = \"src\",\n+    srcs = [\"public-api.ts\"],\n+    deps = [\n+        \"//projects/ng-devtools-backend/src/lib\",\n+        \"//projects/ng-devtools-backend/src/lib:component-tree\",\n+    ],\n+    tsconfig = \"//projects/ng-devtools-backend:tsconfig-lib\"\n+)\n+\n+"
        },
        {
            "sha": "e6dc284ff5955339dc7981c3ebf00a29b00d3a33",
            "filename": "projects/ng-devtools-backend/src/lib/BUILD.bazel",
            "status": "added",
            "additions": 185,
            "deletions": 0,
            "changes": 185,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2FBUILD.bazel?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -0,0 +1,185 @@\n+load(\"//tools:angular_ts_library.bzl\", \"ng_ts_library\")\n+load(\"@npm//@bazel/typescript:index.bzl\", \"ts_library\")\n+load(\"@npm//@bazel/concatjs:index.bzl\", \"karma_web_test_suite\")\n+\n+package(default_visibility = [\"//visibility:public\"])\n+\n+ng_ts_library(\n+    name = \"lib\",\n+    srcs = [\"index.ts\"],\n+    deps = [\n+        \"//projects/protocol\",\n+        \"//projects/ng-devtools-backend/src/lib/hooks\",\n+        \"//projects/ng-devtools-backend/src/lib/directive-forest\",\n+        \"//projects/ng-devtools-backend/src/lib/component-inspector\",\n+        \"//projects/ng-devtools-backend/src/lib/state-serializer\",\n+        \":client-event-subscribers\"\n+    ],\n+    tsconfig = \"//projects/ng-devtools-backend:tsconfig-lib\"\n+)\n+\n+karma_web_test_suite(\n+    name = \"highlighter-test\",\n+    browsers = [\n+        \"@io_bazel_rules_webtesting//browsers:chromium-local\",\n+    ],\n+    tags = [\"native\"],\n+    deps = [\n+        \":highlighter-test-lib\",\n+    ],\n+)\n+\n+ts_library(\n+    name = \"highlighter-test-lib\",\n+    testonly = True,\n+    srcs = [\n+        \"highlighter.spec.ts\"\n+    ],\n+    deps = [\n+        \":highlighter\",\n+        \"@npm//@angular/core\",\n+        \"@npm//@angular/platform-browser-dynamic\",\n+        \"@npm//@types\",\n+        \"@npm//@types/jasmine\",\n+    ],\n+)\n+\n+ng_ts_library(\n+    name = \"highlighter\",\n+    srcs = [\"highlighter.ts\"],\n+    deps = [\n+        \"@npm//@angular/core\"\n+    ],\n+    tsconfig = \"//projects/ng-devtools-backend:tsconfig-lib\"\n+)\n+\n+ng_ts_library(\n+    name = \"interfaces\",\n+    srcs = [\"interfaces.ts\"],\n+    deps = [\n+        \"//projects/protocol\"\n+    ],\n+    tsconfig = \"//projects/ng-devtools-backend:tsconfig-lib\"\n+)\n+\n+karma_web_test_suite(\n+    name = \"router-tree-test\",\n+    browsers = [\n+        \"@io_bazel_rules_webtesting//browsers:chromium-local\",\n+    ],\n+    tags = [\"native\"],\n+    deps = [\n+        \":router-tree-test-lib\",\n+    ],\n+)\n+\n+ts_library(\n+    name = \"router-tree-test-lib\",\n+    srcs = [\n+        \"router-tree.spec.ts\"\n+    ],\n+    deps = [\n+        \":router-tree\",\n+        \"//projects/protocol\",\n+        \"@npm//@angular/core\",\n+        \"@npm//@angular/router\",\n+        \"@npm//@angular/platform-browser-dynamic\",\n+        \"@npm//@types\",\n+        \"@npm//@types/jasmine\",\n+    ],\n+)\n+\n+ng_ts_library(\n+    name = \"router-tree\",\n+    srcs = [\"router-tree.ts\"],\n+    deps = [\n+        \"//projects/protocol\",\n+        \"@npm//@angular/router\",\n+    ],\n+    tsconfig = \"//projects/ng-devtools-backend:tsconfig-lib\"\n+)\n+\n+ng_ts_library(\n+    name = \"set-console-reference\",\n+    srcs = [\"set-console-reference.ts\"],\n+    deps = [\n+        \"//projects/shared-utils\",\n+        \"//projects/protocol\",\n+        \":interfaces\"\n+    ],\n+    tsconfig = \"//projects/ng-devtools-backend:tsconfig-lib\"\n+)\n+\n+ng_ts_library(\n+    name = \"utils\",\n+    srcs = [\"utils.ts\"],\n+    tsconfig = \"//projects/ng-devtools-backend:tsconfig-lib\"\n+)\n+\n+ng_ts_library(\n+    name = \"version\",\n+    srcs = [\"version.ts\"],\n+    tsconfig = \"//projects/ng-devtools-backend:tsconfig-lib\"\n+)\n+\n+ng_ts_library(\n+    name = \"client-event-subscribers\",\n+    srcs = [\"client-event-subscribers.ts\"],\n+    deps = [\n+        \"//projects/protocol\",\n+        \"//projects/ng-devtools-backend/src/lib/hooks\",\n+        \"//projects/ng-devtools-backend/src/lib/component-inspector\",\n+        \"//projects/ng-devtools-backend/src/lib/state-serializer\",\n+        \":component-tree\",\n+        \":set-console-reference\",\n+        \":angular-check\",\n+        \":interfaces\",\n+        \":highlighter\",\n+        \":utils\",\n+        \"@npm//rxjs\"\n+    ],\n+    tsconfig = \"//projects/ng-devtools-backend:tsconfig-lib\"\n+)\n+\n+ng_ts_library(\n+    name = \"component-tree\",\n+    srcs = [\"component-tree.ts\"],\n+    deps = [\n+        \"//projects/protocol\",\n+        \"//projects/ng-devtools-backend/src/lib/state-serializer\",\n+        \"//projects/ng-devtools-backend/src/lib/directive-forest\",\n+        \"@npm//@angular/core\",\n+        \":interfaces\"\n+    ],\n+    tsconfig = \"//projects/ng-devtools-backend:tsconfig-lib\"\n+)\n+\n+karma_web_test_suite(\n+    name = \"angular-check-test\",\n+    browsers = [\n+        \"@io_bazel_rules_webtesting//browsers:chromium-local\",\n+    ],\n+    tags = [\"native\"],\n+    deps = [\n+        \":angular-check-test-lib\",\n+    ],\n+)\n+\n+ts_library(\n+    name = \"angular-check-test-lib\",\n+    testonly = True,\n+    srcs = [\n+        \"angular-check.spec.ts\"\n+    ],\n+    deps = [\n+        \":angular-check\",\n+        \"@npm//@types\",\n+        \"@npm//@types/jasmine\",\n+    ],\n+)\n+\n+ng_ts_library(\n+    name = \"angular-check\",\n+    srcs = [\"angular-check.ts\"],\n+    tsconfig = \"//projects/ng-devtools-backend:tsconfig-lib\"\n+)"
        },
        {
            "sha": "529e26ead76ba50c6d508aef343d2d18153db466",
            "filename": "projects/ng-devtools-backend/src/lib/client-event-subscribers.ts",
            "status": "modified",
            "additions": 39,
            "deletions": 41,
            "changes": 80,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fclient-event-subscribers.ts",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fclient-event-subscribers.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fclient-event-subscribers.ts?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -9,7 +9,8 @@ import {\n   ProfilerFrame,\n   ComponentExplorerViewQuery,\n } from 'protocol';\n-import { ComponentTreeNode, getLatestComponentState, queryDirectiveForest, updateState } from './component-tree';\n+import { ComponentTreeNode } from './interfaces';\n+import { getLatestComponentState, queryDirectiveForest, updateState } from './component-tree';\n import { start as startProfiling, stop as stopProfiling } from './hooks/capture';\n import { serializeDirectiveState } from './state-serializer/state-serializer';\n import { ComponentInspector } from './component-inspector/component-inspector';\n@@ -67,29 +68,28 @@ const shutdownCallback = (messageBus: MessageBus<Events>) => () => {\n   messageBus.destroy();\n };\n \n-const getLatestComponentExplorerViewCallback = (messageBus: MessageBus<Events>) => (\n-  query?: ComponentExplorerViewQuery\n-) => {\n-  // We want to force re-indexing of the component tree.\n-  // Pressing the refresh button means the user saw stuck UI.\n+const getLatestComponentExplorerViewCallback =\n+  (messageBus: MessageBus<Events>) => (query?: ComponentExplorerViewQuery) => {\n+    // We want to force re-indexing of the component tree.\n+    // Pressing the refresh button means the user saw stuck UI.\n \n-  initializeOrGetDirectiveForestHooks().indexForest();\n+    initializeOrGetDirectiveForestHooks().indexForest();\n \n-  if (!query) {\n+    if (!query) {\n+      messageBus.emit('latestComponentExplorerView', [\n+        {\n+          forest: prepareForestForSerialization(initializeOrGetDirectiveForestHooks().getIndexedDirectiveForest()),\n+        },\n+      ]);\n+      return;\n+    }\n     messageBus.emit('latestComponentExplorerView', [\n       {\n         forest: prepareForestForSerialization(initializeOrGetDirectiveForestHooks().getIndexedDirectiveForest()),\n+        properties: getLatestComponentState(query, initializeOrGetDirectiveForestHooks().getDirectiveForest()),\n       },\n     ]);\n-    return;\n-  }\n-  messageBus.emit('latestComponentExplorerView', [\n-    {\n-      forest: prepareForestForSerialization(initializeOrGetDirectiveForestHooks().getIndexedDirectiveForest()),\n-      properties: getLatestComponentState(query, initializeOrGetDirectiveForestHooks().getDirectiveForest()),\n-    },\n-  ]);\n-};\n+  };\n \n const checkForAngularCallback = (messageBus: MessageBus<Events>) => () => checkForAngular(messageBus);\n const getRoutesCallback = (messageBus: MessageBus<Events>) => () => getRoutes(messageBus);\n@@ -108,31 +108,29 @@ const selectedComponentCallback = (position: ElementPosition) => {\n   setConsoleReference({ node, position });\n };\n \n-const getNestedPropertiesCallback = (messageBus: MessageBus<Events>) => (\n-  position: DirectivePosition,\n-  propPath: string[]\n-) => {\n-  const emitEmpty = () => messageBus.emit('nestedProperties', [position, { props: {} }, propPath]);\n-  const node = queryDirectiveForest(\n-    position.element,\n-    initializeOrGetDirectiveForestHooks().getIndexedDirectiveForest()\n-  );\n-  if (!node) {\n-    return emitEmpty();\n-  }\n-  const current = position.directive === undefined ? node.component : node.directives[position.directive];\n-  if (!current) {\n-    return emitEmpty();\n-  }\n-  let data = current.instance;\n-  for (const prop of propPath) {\n-    data = data[prop];\n-    if (!data) {\n-      console.error('Cannot access the properties', propPath, 'of', node);\n+const getNestedPropertiesCallback =\n+  (messageBus: MessageBus<Events>) => (position: DirectivePosition, propPath: string[]) => {\n+    const emitEmpty = () => messageBus.emit('nestedProperties', [position, { props: {} }, propPath]);\n+    const node = queryDirectiveForest(\n+      position.element,\n+      initializeOrGetDirectiveForestHooks().getIndexedDirectiveForest()\n+    );\n+    if (!node) {\n+      return emitEmpty();\n     }\n-  }\n-  messageBus.emit('nestedProperties', [position, { props: serializeDirectiveState(data) }, propPath]);\n-};\n+    const current = position.directive === undefined ? node.component : node.directives[position.directive];\n+    if (!current) {\n+      return emitEmpty();\n+    }\n+    let data = current.instance;\n+    for (const prop of propPath) {\n+      data = data[prop];\n+      if (!data) {\n+        console.error('Cannot access the properties', propPath, 'of', node);\n+      }\n+    }\n+    messageBus.emit('nestedProperties', [position, { props: serializeDirectiveState(data) }, propPath]);\n+  };\n \n //\n // Subscribe Helpers"
        },
        {
            "sha": "5fed3eed8b1c966d7cfd60992f858737b9b0f91e",
            "filename": "projects/ng-devtools-backend/src/lib/component-inspector/BUILD.bazel",
            "status": "added",
            "additions": 53,
            "deletions": 0,
            "changes": 53,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fcomponent-inspector%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fcomponent-inspector%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fcomponent-inspector%2FBUILD.bazel?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -0,0 +1,53 @@\n+load(\"//tools:angular_ts_library.bzl\", \"ng_ts_library\")\n+load(\"@npm//@bazel/typescript:index.bzl\", \"ts_library\")\n+load(\"@npm//@bazel/concatjs:index.bzl\", \"karma_web_test_suite\")\n+\n+package(default_visibility = [\"//visibility:public\"])\n+\n+ng_ts_library(\n+    name = \"component-inspector\",\n+    srcs = [\"component-inspector.ts\"],\n+    deps = [\n+        \"//projects/protocol\",\n+        \"//projects/ng-devtools-backend/src/lib:highlighter\",\n+        \"//projects/ng-devtools-backend/src/lib:component-tree\",\n+        \"//projects/ng-devtools-backend/src/lib:interfaces\",\n+        \"//projects/ng-devtools-backend/src/lib/hooks\",\n+        \"@npm//rxjs\",\n+        \"@npm//@angular/core\"\n+    ],\n+    tsconfig = \"//projects/ng-devtools-backend:tsconfig-lib\"\n+)\n+\n+karma_web_test_suite(\n+    name = \"test\",\n+    browsers = [\n+        \"@io_bazel_rules_webtesting//browsers:chromium-local\",\n+    ],\n+    tags = [\"native\"],\n+    deps = [\n+        \":test-lib\",\n+        \"@npm//:node_modules/tslib/tslib.js\",\n+        \"//src:rxjs_umd_modules\",\n+    ],\n+)\n+\n+ts_library(\n+    name = \"test-lib\",\n+    testonly = True,\n+    srcs = [\n+        \"component-inspector.spec.ts\",\n+    ],\n+    deps = [\n+        \":component-inspector\",\n+        \"//projects/protocol\",\n+        \"//projects/ng-devtools-backend/src/lib:component-tree\",\n+        \"//projects/ng-devtools-backend/src/lib/hooks\",\n+        \"//projects/ng-devtools-backend/src/lib:highlighter\",\n+        \"@npm//@angular/core\",\n+        \"@npm//@types\",\n+        \"@npm//@types/jasmine\",\n+        \"//projects/ng-devtools-backend/src/lib:interfaces\",\n+        \"//projects/ng-devtools-backend/src/lib:utils\",\n+    ],\n+)\n\\ No newline at end of file"
        },
        {
            "sha": "e98d9fe961cac2794cc361305a68f80caaf69504",
            "filename": "projects/ng-devtools-backend/src/lib/component-inspector/component-inspector.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fcomponent-inspector%2Fcomponent-inspector.ts",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fcomponent-inspector%2Fcomponent-inspector.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fcomponent-inspector%2Fcomponent-inspector.ts?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -1,6 +1,7 @@\n import { unHighlight, highlight, findComponentAndHost } from '../highlighter';\n import { Type } from '@angular/core';\n-import { ComponentTreeNode, findNodeInForest } from '../component-tree';\n+import { findNodeInForest } from '../component-tree';\n+import { ComponentTreeNode } from '../interfaces';\n import { ElementPosition } from 'protocol';\n import { initializeOrGetDirectiveForestHooks } from '../hooks';\n "
        },
        {
            "sha": "1856b6467315bb689f48d130a6fe101bec5a4be4",
            "filename": "projects/ng-devtools-backend/src/lib/component-tree.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 17,
            "changes": 20,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fcomponent-tree.ts",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fcomponent-tree.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fcomponent-tree.ts?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -2,14 +2,13 @@ import { deeplySerializeSelectedProperties, serializeDirectiveState } from './st\n \n import {\n   ComponentExplorerViewQuery,\n-  DevToolsNode,\n   DirectiveMetadata,\n   DirectivesProperties,\n   ElementPosition,\n   PropertyQueryTypes,\n   UpdatedStateData,\n } from 'protocol';\n-import { buildDirectiveTree, getLViewFromDirectiveOrElementInstance } from './directive-forest';\n+import { buildDirectiveTree, getLViewFromDirectiveOrElementInstance } from './directive-forest/index';\n \n // Need to be kept in sync with Angular framework\n // We can't directly import it from framework now\n@@ -20,22 +19,9 @@ enum ChangeDetectionStrategy {\n   Default = 1,\n }\n \n-const ngDebug = () => (window as any).ng;\n-\n-export interface DirectiveInstanceType {\n-  instance: any;\n-  name: string;\n-}\n+import { ComponentTreeNode, DirectiveInstanceType, ComponentInstanceType } from './interfaces';\n \n-export interface ComponentInstanceType {\n-  instance: any;\n-  name: string;\n-  isElement: boolean;\n-}\n-\n-export interface ComponentTreeNode extends DevToolsNode<DirectiveInstanceType, ComponentInstanceType> {\n-  children: ComponentTreeNode[];\n-}\n+const ngDebug = () => (window as any).ng;\n \n export const getLatestComponentState = (\n   query: ComponentExplorerViewQuery,"
        },
        {
            "sha": "99d911942e6a1f70ba1b0c4f87f92e8eb32a298f",
            "filename": "projects/ng-devtools-backend/src/lib/directive-forest/BUILD.bazel",
            "status": "added",
            "additions": 47,
            "deletions": 0,
            "changes": 47,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2FBUILD.bazel?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -0,0 +1,47 @@\n+load(\"//tools:angular_ts_library.bzl\", \"ng_ts_library\")\n+load(\"@npm//@bazel/typescript:index.bzl\", \"ts_library\")\n+load(\"@npm//@bazel/concatjs:index.bzl\", \"karma_web_test_suite\")\n+\n+package(default_visibility = [\"//visibility:public\"])\n+\n+ng_ts_library(\n+    name = \"directive-forest\",\n+    srcs = glob(\n+        include = [\"*.ts\"],\n+        exclude = [\"*.spec.ts\"]\n+    ),\n+    deps = [\n+        \"//projects/ng-devtools-backend/src/lib:interfaces\",\n+        \"//projects/ng-devtools-backend/src/lib:utils\",\n+        \"//projects/ng-devtools-backend/src/lib:highlighter\",\n+        \"//projects/ng-devtools-backend/src/lib:version\",\n+        \"@npm//semver-dsl\"\n+    ],\n+    tsconfig = \"//projects/ng-devtools-backend:tsconfig-lib\"\n+)\n+\n+karma_web_test_suite(\n+    name = \"test\",\n+    browsers = [\n+        \"@io_bazel_rules_webtesting//browsers:chromium-local\",\n+    ],\n+    tags = [\"native\"],\n+    deps = [\n+        \":test-lib\",\n+    ],\n+)\n+\n+ts_library(\n+    name = \"test-lib\",\n+    testonly = True,\n+    srcs = [\n+        \"render-tree.spec.ts\",\n+    ],\n+    deps = [\n+        \":directive-forest\",\n+        \"@npm//@types\",\n+        \"@npm//@types/jasmine\",\n+        \"//projects/ng-devtools-backend/src/lib:interfaces\",\n+        \"//projects/ng-devtools-backend/src/lib:utils\",\n+    ],\n+)\n\\ No newline at end of file"
        },
        {
            "sha": "8e95acf20949e2be07789d9e6130f1643abe71d0",
            "filename": "projects/ng-devtools-backend/src/lib/directive-forest/ltree.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Fltree.ts",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Fltree.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Fltree.ts?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -1,4 +1,4 @@\n-import { ComponentTreeNode, ComponentInstanceType, DirectiveInstanceType } from '../component-tree';\n+import { ComponentTreeNode, DirectiveInstanceType, ComponentInstanceType } from '../interfaces';\n import { isCustomElement } from '../utils';\n import { getDirectiveName } from '../highlighter';\n import { SemVerDSL } from 'semver-dsl';"
        },
        {
            "sha": "bb9a0a60d44932b455d80986cd59037952864735",
            "filename": "projects/ng-devtools-backend/src/lib/directive-forest/render-tree.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Frender-tree.ts",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Frender-tree.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Frender-tree.ts?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -1,4 +1,4 @@\n-import { ComponentTreeNode } from '../component-tree';\n+import { ComponentTreeNode } from '../interfaces';\n import { isCustomElement } from '../utils';\n \n const extractViewTree = ("
        },
        {
            "sha": "e5a69809e02386cf4ee01d81f36b6508f98c869b",
            "filename": "projects/ng-devtools-backend/src/lib/hooks/BUILD.bazel",
            "status": "added",
            "additions": 34,
            "deletions": 0,
            "changes": 34,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2FBUILD.bazel?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -0,0 +1,34 @@\n+load(\"//tools:angular_ts_library.bzl\", \"ng_ts_library\")\n+\n+package(default_visibility = [\"//visibility:public\"])\n+\n+ng_ts_library(\n+    name = \"hooks\",\n+    srcs = glob(\n+        include = [\"*.ts\"],\n+        exclude = [\"*.spec.ts\", \"identity-tracker.ts\"]\n+    ),\n+    deps = [\n+        \"//projects/protocol\",\n+        \"//projects/ng-devtools-backend/src/lib/hooks/profiler\",\n+        \"//projects/ng-devtools-backend/src/lib:interfaces\",\n+        \"//projects/ng-devtools-backend/src/lib:highlighter\",\n+        \"//projects/ng-devtools-backend/src/lib:utils\",\n+        \":identity-tracker\"\n+    ],\n+    tsconfig = \"//projects/ng-devtools-backend:tsconfig-lib\"\n+)\n+\n+\n+ng_ts_library(\n+    name = \"identity-tracker\",\n+    srcs = [\"identity-tracker.ts\"],\n+    deps = [\n+        \"//projects/protocol\",\n+        \"//projects/ng-devtools-backend/src/lib:component-tree\",\n+        \"//projects/ng-devtools-backend/src/lib:interfaces\",\n+        \"@npm//@angular/core\"\n+    ],\n+    tsconfig = \"//projects/ng-devtools-backend:tsconfig-lib\"\n+)\n+"
        },
        {
            "sha": "1d62e359793fc4cc565cc2d92587f582ae726873",
            "filename": "projects/ng-devtools-backend/src/lib/hooks/capture.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2Fcapture.ts",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2Fcapture.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2Fcapture.ts?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -2,7 +2,7 @@ import { DirectiveForestHooks } from './hooks';\n import { ElementPosition, ProfilerFrame, ElementProfile, DirectiveProfile, LifecycleProfile } from 'protocol';\n import { runOutsideAngular, isCustomElement } from '../utils';\n import { getDirectiveName } from '../highlighter';\n-import { ComponentTreeNode } from '../component-tree';\n+import { ComponentTreeNode } from '../interfaces';\n import { initializeOrGetDirectiveForestHooks } from '.';\n import { Hooks } from './profiler';\n "
        },
        {
            "sha": "fc1ef3789684fa80018195e0637596880c134bb4",
            "filename": "projects/ng-devtools-backend/src/lib/hooks/hooks.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2Fhooks.ts",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2Fhooks.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2Fhooks.ts?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -1,4 +1,4 @@\n-import { ComponentTreeNode } from './../component-tree';\n+import { ComponentTreeNode } from '../interfaces';\n import { ElementPosition } from 'protocol';\n import { IdentityTracker, IndexedNode } from './identity-tracker';\n import { Profiler, selectProfilerStrategy } from './profiler';"
        },
        {
            "sha": "5442955f34dce0c8670a43ad05ea487de49b8eff",
            "filename": "projects/ng-devtools-backend/src/lib/hooks/identity-tracker.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2Fidentity-tracker.ts",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2Fidentity-tracker.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2Fidentity-tracker.ts?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -1,6 +1,6 @@\n-import { ComponentTreeNode } from './../component-tree';\n+import { ComponentTreeNode, DirectiveInstanceType, ComponentInstanceType } from '../interfaces';\n import { ElementPosition, DevToolsNode } from 'protocol';\n-import { buildDirectiveForest, DirectiveInstanceType, ComponentInstanceType } from '../component-tree';\n+import { buildDirectiveForest } from '../component-tree';\n import { Type } from '@angular/core';\n \n interface TreeNode {"
        },
        {
            "sha": "dbee4682980e409b906f564d8cae7507e7aef446",
            "filename": "projects/ng-devtools-backend/src/lib/hooks/profiler/BUILD.bazel",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2Fprofiler%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2Fprofiler%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2Fprofiler%2FBUILD.bazel?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -0,0 +1,22 @@\n+load(\"//tools:angular_ts_library.bzl\", \"ng_ts_library\")\n+\n+package(default_visibility = [\"//visibility:public\"])\n+\n+ng_ts_library(\n+    name = \"profiler\",\n+    srcs = glob(\n+        include = [\"*.ts\"],\n+        exclude = [\"*.spec.ts\"]\n+    ),\n+    deps = [\n+        \"//projects/protocol\",\n+        \"//projects/ng-devtools-backend/src/lib:utils\",\n+        \"//projects/ng-devtools-backend/src/lib/hooks:identity-tracker\",\n+        \"//projects/ng-devtools-backend/src/lib/directive-forest\",\n+        \"@npm//rxjs\",\n+        \"@npm//@angular/core\"\n+    ],\n+    tsconfig = \"//projects/ng-devtools-backend:tsconfig-lib\"\n+)\n+\n+"
        },
        {
            "sha": "d3063f23dad8d1777143d45fe397f295f2758888",
            "filename": "projects/ng-devtools-backend/src/lib/interfaces.ts",
            "status": "modified",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Finterfaces.ts",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Finterfaces.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Finterfaces.ts?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -1,5 +1,21 @@\n+import { DevToolsNode } from 'protocol';\n+\n export interface DebuggingAPI {\n   getComponent(node: Node): any;\n   getDirectives(node: Node): any[];\n   getHostElement(cmp: any): HTMLElement;\n }\n+export interface DirectiveInstanceType {\n+  instance: any;\n+  name: string;\n+}\n+\n+export interface ComponentInstanceType {\n+  instance: any;\n+  name: string;\n+  isElement: boolean;\n+}\n+\n+export interface ComponentTreeNode extends DevToolsNode<DirectiveInstanceType, ComponentInstanceType> {\n+  children: ComponentTreeNode[];\n+}"
        },
        {
            "sha": "e21438b919ec27a418e775286d4ebcaea36f64f3",
            "filename": "projects/ng-devtools-backend/src/lib/set-console-reference.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fset-console-reference.ts",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fset-console-reference.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fset-console-reference.ts?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -1,6 +1,6 @@\n import { arrayEquals } from 'shared-utils';\n import { ElementPosition } from 'protocol';\n-import { ComponentTreeNode } from './component-tree';\n+import { ComponentTreeNode } from './interfaces';\n \n interface ConsoleReferenceNode {\n   node: ComponentTreeNode | null;"
        },
        {
            "sha": "4bfe8fb93e1a1adb6d3a5c6a73bc704b597b955d",
            "filename": "projects/ng-devtools-backend/src/lib/state-serializer/BUILD.bazel",
            "status": "added",
            "additions": 44,
            "deletions": 0,
            "changes": 44,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fstate-serializer%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fstate-serializer%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fstate-serializer%2FBUILD.bazel?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -0,0 +1,44 @@\n+load(\"//tools:angular_ts_library.bzl\", \"ng_ts_library\")\n+load(\"@npm//@bazel/typescript:index.bzl\", \"ts_library\")\n+load(\"@npm//@bazel/concatjs:index.bzl\", \"karma_web_test_suite\")\n+\n+package(default_visibility = [\"//visibility:public\"])\n+\n+ng_ts_library(\n+    name = \"state-serializer\",\n+    srcs = glob(\n+        include = [\"*.ts\"],\n+        exclude = [\"*.spec.ts\"]\n+    ),\n+    deps = [\n+        \"//projects/protocol\",\n+        \"//projects/ng-devtools-backend/src/lib/directive-forest\",\n+    ],\n+    tsconfig = \"//projects/ng-devtools-backend:tsconfig-lib\"\n+)\n+\n+karma_web_test_suite(\n+    name = \"test\",\n+    browsers = [\n+        \"@io_bazel_rules_webtesting//browsers:chromium-local\",\n+    ],\n+    tags = [\"native\"],\n+    deps = [\n+        \"@npm//:node_modules/tslib/tslib.js\",\n+        \":test-lib\"\n+    ],\n+)\n+\n+ts_library(\n+    name = \"test-lib\",\n+    testonly = True,\n+    srcs = [\n+        \"state-serializer.spec.ts\",\n+    ],\n+    deps = [\n+        \":state-serializer\",\n+        \"//projects/protocol\",\n+        \"@npm//@types\",\n+        \"@npm//@types/jasmine\",\n+    ],\n+)\n\\ No newline at end of file"
        },
        {
            "sha": "7792fe9cb69813681b367e86a45f5d230eef365a",
            "filename": "projects/ng-devtools-backend/src/lib/state-serializer/serialized-descriptor-factory.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fstate-serializer%2Fserialized-descriptor-factory.ts",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fstate-serializer%2Fserialized-descriptor-factory.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fstate-serializer%2Fserialized-descriptor-factory.ts?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -1,7 +1,9 @@\n import { Descriptor, NestedProp, PropType } from 'protocol';\n-import { METADATA_PROPERTY_NAME } from '../directive-forest';\n import { getKeys } from './object-utils';\n \n+// todo(aleksanderbodurri) pull this out of this file\n+const METADATA_PROPERTY_NAME = '__ngContext__';\n+\n export interface CompositeType {\n   type: Extract<PropType, PropType.Array | PropType.Object>;\n   prop: any;"
        },
        {
            "sha": "65fd008b05fe9dd228e4ee8d1ec53fec575468ca",
            "filename": "projects/ng-devtools-backend/src/lib/state-serializer/state-serializer.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 13,
            "changes": 25,
            "blob_url": "https://github.com/angular/angular/blob/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fstate-serializer%2Fstate-serializer.ts",
            "raw_url": "https://github.com/angular/angular/raw/9efd86e4f1487c37d4a9d7c8871562f462ba0b1d/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fstate-serializer%2Fstate-serializer.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fstate-serializer%2Fstate-serializer.ts?ref=9efd86e4f1487c37d4a9d7c8871562f462ba0b1d",
            "patch": "@@ -5,9 +5,11 @@ import {\n   createShallowSerializedDescriptor,\n   PropertyData,\n } from './serialized-descriptor-factory';\n-import { METADATA_PROPERTY_NAME } from '../directive-forest';\n import { getKeys } from './object-utils';\n \n+// todo(aleksanderbodurri) pull this out of this file\n+const METADATA_PROPERTY_NAME = '__ngContext__';\n+\n const ignoreList = new Set([METADATA_PROPERTY_NAME, '__ngSimpleChanges__']);\n \n const commonTypes = {\n@@ -79,18 +81,15 @@ const nestedSerializer = (\n   }\n };\n \n-const nestedSerializerContinuation = (nodes: NestedProp[], level: number) => (\n-  instance: any,\n-  propName: string,\n-  nestedLevel: number\n-) => {\n-  const idx = nodes.findIndex((v) => v.name === propName);\n-  if (idx < 0) {\n-    // The property is not specified in the query.\n-    return nestedSerializer(instance, propName, [], nestedLevel, level);\n-  }\n-  return nestedSerializer(instance, propName, nodes[idx].children, nestedLevel, level);\n-};\n+const nestedSerializerContinuation =\n+  (nodes: NestedProp[], level: number) => (instance: any, propName: string, nestedLevel: number) => {\n+    const idx = nodes.findIndex((v) => v.name === propName);\n+    if (idx < 0) {\n+      // The property is not specified in the query.\n+      return nestedSerializer(instance, propName, [], nestedLevel, level);\n+    }\n+    return nestedSerializer(instance, propName, nodes[idx].children, nestedLevel, level);\n+  };\n \n const levelSerializer = (\n   instance: any,"
        }
    ],
    "stats": {
        "total": 596,
        "additions": 509,
        "deletions": 87
    }
}