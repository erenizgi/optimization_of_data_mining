{
    "author": "petebacondarwin",
    "message": "refactor(core): remove the need for `ɵɵinjectPipeChangeDetectorRef()` (#41231)\n\nThis instruction was created to work around a problem with injecting a\n`ChangeDetectorRef` into a pipe. See #31438. This fix required special\nmetadata for when the thing being injected was a `ChangeDetectorRef`.\n\nNow this is handled by adding a flag `InjectorFlags.ForPipe` to the\n`ɵɵdirectiveInject()` call, which avoids the need to special test_cases\n`ChangeDetectorRef` in the generated code.\n\nPR Close #41231",
    "sha": "857dfaa1e7b5c502abc095818db934b989783868",
    "files": [
        {
            "sha": "e5ed21e911b14d30be1a0bfefebb0f58aac2bed0",
            "filename": "goldens/public-api/core/core.d.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/goldens%2Fpublic-api%2Fcore%2Fcore.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/goldens%2Fpublic-api%2Fcore%2Fcore.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fcore%2Fcore.d.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -694,9 +694,6 @@ export declare interface ɵɵInjectableDef<T> {\n /** @codeGenApi */\n export declare function ɵɵinjectAttribute(attrNameToInject: string): string | null;\n \n-/** @codeGenApi */\n-export declare function ɵɵinjectPipeChangeDetectorRef(flags?: InjectFlags): ChangeDetectorRef | null;\n-\n export declare const PACKAGE_ROOT_URL: InjectionToken<string>;\n \n export declare interface Pipe {"
        },
        {
            "sha": "b8d341e40e2babdea701dac74767c93c429cba5c",
            "filename": "goldens/size-tracking/aio-payloads.json",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/goldens%2Fsize-tracking%2Faio-payloads.json",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/goldens%2Fsize-tracking%2Faio-payloads.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fsize-tracking%2Faio-payloads.json?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -12,8 +12,8 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime-es2015\": 3033,\n-        \"main-es2015\": 452165,\n-        \"polyfills-es2015\": 52493\n+        \"main-es2015\": 451600,\n+        \"polyfills-es2015\": 52215\n       }\n     }\n   },\n@@ -26,4 +26,4 @@\n       }\n     }\n   }\n-}\n\\ No newline at end of file\n+}"
        },
        {
            "sha": "3788df438dc365c00d1cf945a1a78a97890e2965",
            "filename": "packages/compiler-cli/ngcc/test/integration/ngcc_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Fintegration%2Fngcc_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Fintegration%2Fngcc_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Fintegration%2Fngcc_spec.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -823,7 +823,7 @@ runInEachFileSystem(() => {\n       expect(jsContents)\n           .toContain(\n               `TestClass.ɵfac = function TestClass_Factory(t) { ` +\n-              `return new (t || TestClass)(ɵngcc0.ɵɵinjectPipeChangeDetectorRef()); };`);\n+              `return new (t || TestClass)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef, 16)); };`);\n     });\n \n     it('should use the correct type name in typings files when an export has a different name in source files',"
        },
        {
            "sha": "2adc004ca6f0f8a197fceed15038bc45f217809f",
            "filename": "packages/compiler-cli/src/ngtsc/annotations/src/util.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Fsrc%2Futil.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Fsrc%2Futil.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fannotations%2Fsrc%2Futil.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -86,10 +86,6 @@ export function getConstructorDependencies(\n       }\n     });\n \n-    if (token instanceof ExternalExpr && token.value.name === 'ChangeDetectorRef' &&\n-        token.value.moduleName === '@angular/core') {\n-      resolved = R3ResolvedDependencyType.ChangeDetectorRef;\n-    }\n     if (token === null) {\n       if (param.typeValueReference.kind !== TypeValueReferenceKind.UNAVAILABLE) {\n         throw new Error("
        },
        {
            "sha": "4746dbfb8fe43d8b8ad54fa3f85369dcd16a84ae",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/pipes/GOLDEN_PARTIAL.js",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fpipes%2FGOLDEN_PARTIAL.js",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fpipes%2FGOLDEN_PARTIAL.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fpipes%2FGOLDEN_PARTIAL.js?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -156,7 +156,7 @@ export class MyPipe {\n         return value;\n     }\n }\n-MyPipe.ɵfac = i0.ɵɵngDeclareFactory({ version: \"0.0.0-PLACEHOLDER\", ngImport: i0, type: MyPipe, deps: [{ token: i0.ChangeDetectorRef, resolved: i0.ɵɵResolvedDependencyType.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Pipe });\n+MyPipe.ɵfac = i0.ɵɵngDeclareFactory({ version: \"0.0.0-PLACEHOLDER\", ngImport: i0, type: MyPipe, deps: [{ token: i0.ChangeDetectorRef, resolved: i0.ɵɵResolvedDependencyType.Token }], target: i0.ɵɵFactoryTarget.Pipe });\n MyPipe.ɵpipe = i0.ɵɵngDeclarePipe({ version: \"0.0.0-PLACEHOLDER\", ngImport: i0, type: MyPipe, name: \"myPipe\" });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MyPipe, [{\n         type: Pipe,\n@@ -168,7 +168,7 @@ export class MyOtherPipe {\n         return value;\n     }\n }\n-MyOtherPipe.ɵfac = i0.ɵɵngDeclareFactory({ version: \"0.0.0-PLACEHOLDER\", ngImport: i0, type: MyOtherPipe, deps: [{ token: i0.ChangeDetectorRef, resolved: i0.ɵɵResolvedDependencyType.ChangeDetectorRef, optional: true }], target: i0.ɵɵFactoryTarget.Pipe });\n+MyOtherPipe.ɵfac = i0.ɵɵngDeclareFactory({ version: \"0.0.0-PLACEHOLDER\", ngImport: i0, type: MyOtherPipe, deps: [{ token: i0.ChangeDetectorRef, resolved: i0.ɵɵResolvedDependencyType.Token, optional: true }], target: i0.ɵɵFactoryTarget.Pipe });\n MyOtherPipe.ɵpipe = i0.ɵɵngDeclarePipe({ version: \"0.0.0-PLACEHOLDER\", ngImport: i0, type: MyOtherPipe, name: \"myOtherPipe\" });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MyOtherPipe, [{\n         type: Pipe,"
        },
        {
            "sha": "44ed9267f76c8cc693c7d74df3b6c9db36652fc7",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/pipes/pipe_di_change_detector_ref_my_other_pipe_fac.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fpipes%2Fpipe_di_change_detector_ref_my_other_pipe_fac.js",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fpipes%2Fpipe_di_change_detector_ref_my_other_pipe_fac.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fpipes%2Fpipe_di_change_detector_ref_my_other_pipe_fac.js?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -1 +1 @@\n-MyOtherPipe.ɵfac = function MyOtherPipe_Factory(t) { return new (t || MyOtherPipe)($r3$.ɵɵinjectPipeChangeDetectorRef(8)); };\n+MyOtherPipe.ɵfac = function MyOtherPipe_Factory(t) { return new (t || MyOtherPipe)($i0$.ɵɵdirectiveInject($i0$.ChangeDetectorRef, 24)); };"
        },
        {
            "sha": "141e8128d86bd1cbfa2e990c791a73f9648cfa5f",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/pipes/pipe_di_change_detector_ref_my_pipe_fac.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fpipes%2Fpipe_di_change_detector_ref_my_pipe_fac.js",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fpipes%2Fpipe_di_change_detector_ref_my_pipe_fac.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fpipes%2Fpipe_di_change_detector_ref_my_pipe_fac.js?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -1 +1 @@\n-MyPipe.ɵfac = function MyPipe_Factory(t) { return new (t || MyPipe)($r3$.ɵɵinjectPipeChangeDetectorRef()); };\n+MyPipe.ɵfac = function MyPipe_Factory(t) { return new (t || MyPipe)($i0$.ɵɵdirectiveInject($i0$.ChangeDetectorRef, 16)); };"
        },
        {
            "sha": "ee31a555558399659614aa68b62720878904cc45",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_compiler_compliance/components_and_directives/value_composition/GOLDEN_PARTIAL.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fvalue_composition%2FGOLDEN_PARTIAL.js",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fvalue_composition%2FGOLDEN_PARTIAL.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_compiler_compliance%2Fcomponents_and_directives%2Fvalue_composition%2FGOLDEN_PARTIAL.js?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -206,7 +206,7 @@ export class MyComponent {\n         this.cdr = cdr;\n     }\n }\n-MyComponent.ɵfac = i0.ɵɵngDeclareFactory({ version: \"0.0.0-PLACEHOLDER\", ngImport: i0, type: MyComponent, deps: [{ token: i0.ElementRef, resolved: i0.ɵɵResolvedDependencyType.Token }, { token: i0.ViewContainerRef, resolved: i0.ɵɵResolvedDependencyType.Token }, { token: i0.ChangeDetectorRef, resolved: i0.ɵɵResolvedDependencyType.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });\n+MyComponent.ɵfac = i0.ɵɵngDeclareFactory({ version: \"0.0.0-PLACEHOLDER\", ngImport: i0, type: MyComponent, deps: [{ token: i0.ElementRef, resolved: i0.ɵɵResolvedDependencyType.Token }, { token: i0.ViewContainerRef, resolved: i0.ɵɵResolvedDependencyType.Token }, { token: i0.ChangeDetectorRef, resolved: i0.ɵɵResolvedDependencyType.Token }], target: i0.ɵɵFactoryTarget.Component });\n MyComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: \"0.0.0-PLACEHOLDER\", type: MyComponent, selector: \"my-component\", ngImport: i0, template: '', isInline: true });\n (function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MyComponent, [{\n         type: Component,"
        },
        {
            "sha": "f9807ae2abd2aa1409d5e833b7a1225448f605d3",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/pipe_and_injectable_pipe_first.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fpipe_and_injectable_pipe_first.js",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fpipe_and_injectable_pipe_first.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fpipe_and_injectable_pipe_first.js?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -1,4 +1,4 @@\n // NOTE The prov definition must be last so MyOtherPipe.fac is defined\n-MyOtherPipe.ɵfac = function MyOtherPipe_Factory(t) { return new (t || MyOtherPipe)($r3$.ɵɵdirectiveInject(Service)); };\n+MyOtherPipe.ɵfac = function MyOtherPipe_Factory(t) { return new (t || MyOtherPipe)($r3$.ɵɵdirectiveInject(Service, 16)); };\n MyOtherPipe.ɵpipe = /*@__PURE__*/ i0.ɵɵdefinePipe({ name: \"myOtherPipe\", type: MyOtherPipe, pure: true });\n MyOtherPipe.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: MyOtherPipe, factory: MyOtherPipe.ɵfac });"
        },
        {
            "sha": "5a32cb4a0b41fddbf447631f3b7952747205c4c0",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/pipe_and_injectable_pipe_last.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fpipe_and_injectable_pipe_last.js",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fpipe_and_injectable_pipe_last.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fpipe_and_injectable_pipe_last.js?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -1,4 +1,4 @@\n // NOTE The prov definition must be last so MyPipe.fac is defined\n-MyPipe.ɵfac = function MyPipe_Factory(t) { return new (t || MyPipe)(i0.ɵɵdirectiveInject(Service)); };\n+MyPipe.ɵfac = function MyPipe_Factory(t) { return new (t || MyPipe)(i0.ɵɵdirectiveInject(Service, 16)); };\n MyPipe.ɵpipe = /*@__PURE__*/ i0.ɵɵdefinePipe({ name: \"myPipe\", type: MyPipe, pure: true });\n MyPipe.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: MyPipe, factory: MyPipe.ɵfac });"
        },
        {
            "sha": "8b99bf37ada22173c166669dce8f8b5812e3a272",
            "filename": "packages/compiler-cli/test/compliance_old/r3_compiler_compliance_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fcompliance_old%2Fr3_compiler_compliance_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fcompliance_old%2Fr3_compiler_compliance_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance_old%2Fr3_compiler_compliance_spec.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -2294,7 +2294,7 @@ describe('compiler compliance', () => {\n             `;\n \n            const MyPipeFactory = `\n-              MyPipe.ɵfac = function MyPipe_Factory(t) { return new (t || MyPipe)($r3$.ɵɵinjectPipeChangeDetectorRef()); };\n+              MyPipe.ɵfac = function MyPipe_Factory(t) { return new (t || MyPipe)($i0$.ɵɵdirectiveInject($i0$.ChangeDetectorRef, 16)); };\n             `;\n \n            const MyOtherPipeDefinition = `\n@@ -2305,7 +2305,7 @@ describe('compiler compliance', () => {\n               });`;\n \n            const MyOtherPipeFactory = `\n-              MyOtherPipe.ɵfac = function MyOtherPipe_Factory(t) { return new (t || MyOtherPipe)($r3$.ɵɵinjectPipeChangeDetectorRef(8)); };\n+              MyOtherPipe.ɵfac = function MyOtherPipe_Factory(t) { return new (t || MyOtherPipe)($i0$.ɵɵdirectiveInject($i0$.ChangeDetectorRef, 24)); };\n             `;\n \n            const result = compile(files, angularFiles);"
        },
        {
            "sha": "94437eca40ae4447921104cfc750b2033bd0dd14",
            "filename": "packages/compiler-cli/test/compliance_old/r3_view_compiler_di_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fcompliance_old%2Fr3_view_compiler_di_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fcompliance_old%2Fr3_view_compiler_di_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance_old%2Fr3_view_compiler_di_spec.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -372,14 +372,14 @@ describe('compiler compliance: dependency injection', () => {\n \n        // The prov definition must be last so MyPipe.fac is defined\n        const MyPipeDefs = `\n-        MyPipe.ɵfac = function MyPipe_Factory(t) { return new (t || MyPipe)(i0.ɵɵdirectiveInject(Service)); };\n+        MyPipe.ɵfac = function MyPipe_Factory(t) { return new (t || MyPipe)(i0.ɵɵdirectiveInject(Service, 16)); };\n         MyPipe.ɵpipe = /*@__PURE__*/ i0.ɵɵdefinePipe({ name: \"myPipe\", type: MyPipe, pure: true });\n         MyPipe.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: MyPipe, factory: MyPipe.ɵfac });\n       `;\n \n        // The prov definition must be last so MyOtherPipe.fac is defined\n        const MyOtherPipeDefs = `\n-        MyOtherPipe.ɵfac = function MyOtherPipe_Factory(t) { return new (t || MyOtherPipe)($r3$.ɵɵdirectiveInject(Service)); };\n+        MyOtherPipe.ɵfac = function MyOtherPipe_Factory(t) { return new (t || MyOtherPipe)($r3$.ɵɵdirectiveInject(Service, 16)); };\n         MyOtherPipe.ɵpipe = /*@__PURE__*/ i0.ɵɵdefinePipe({ name: \"myOtherPipe\", type: MyOtherPipe, pure: true });\n         MyOtherPipe.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: MyOtherPipe, factory: MyOtherPipe.ɵfac });\n       `;"
        },
        {
            "sha": "34da420eff26692000a63e18ba4eb7fd95985d6d",
            "filename": "packages/compiler-cli/test/ngtsc/ngtsc_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Fngtsc_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Fngtsc_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fngtsc%2Fngtsc_spec.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -1565,7 +1565,7 @@ function allTests(os: string) {\n       env.driveMain();\n \n       const jsContents = env.getContents('test.js');\n-      expect(jsContents).toContain('return new (t || TestPipe)(i0.ɵɵdirectiveInject(Dep));');\n+      expect(jsContents).toContain('return new (t || TestPipe)(i0.ɵɵdirectiveInject(Dep, 16));');\n     });\n \n     it('should compile Pipes with generic types', () => {"
        },
        {
            "sha": "6ce8a1d3cec0aea349ae7bbaa272b8ffd8acb55a",
            "filename": "packages/compiler/src/compiler_facade_interface.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler%2Fsrc%2Fcompiler_facade_interface.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler%2Fsrc%2Fcompiler_facade_interface.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fcompiler_facade_interface.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -86,8 +86,7 @@ export type Provider = any;\n export enum R3ResolvedDependencyType {\n   Token = 0,\n   Attribute = 1,\n-  ChangeDetectorRef = 2,\n-  Invalid = 3,\n+  Invalid = 2,\n }\n \n export enum R3FactoryTarget {"
        },
        {
            "sha": "dc19a925aeb72b82be51d477d665c5c6bf12b94b",
            "filename": "packages/compiler/src/core.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler%2Fsrc%2Fcore.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler%2Fsrc%2Fcore.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fcore.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -272,6 +272,11 @@ export const enum InjectFlags {\n   SkipSelf = 1 << 2,\n   /** Inject `defaultValue` instead if token not found. */\n   Optional = 1 << 3,\n+  /**\n+   * This token is being injected into a pipe.\n+   * @internal\n+   */\n+  ForPipe = 1 << 4,\n }\n \n export const enum ArgumentType {"
        },
        {
            "sha": "283c48d7347a8a6e4e8a77de424c5a05977673f0",
            "filename": "packages/compiler/src/render3/partial/api.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 6,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler%2Fsrc%2Frender3%2Fpartial%2Fapi.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler%2Fsrc%2Frender3%2Fpartial%2Fapi.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Frender3%2Fpartial%2Fapi.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -432,13 +432,8 @@ export enum R3ResolvedDependencyType {\n    */\n   Attribute = 1,\n \n-  /**\n-   * Injecting the `ChangeDetectorRef` token. Needs special handling when injected into a pipe.\n-   */\n-  ChangeDetectorRef = 2,\n-\n   /**\n    * An invalid dependency (no token could be determined). An error should be thrown at runtime.\n    */\n-  Invalid = 3,\n+  Invalid = 2,\n }"
        },
        {
            "sha": "4afb2a94be06f2c6c4ddc70058183e012342100c",
            "filename": "packages/compiler/src/render3/r3_factory.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 15,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler%2Fsrc%2Frender3%2Fr3_factory.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler%2Fsrc%2Frender3%2Fr3_factory.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Frender3%2Fr3_factory.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -109,15 +109,10 @@ export enum R3ResolvedDependencyType {\n    */\n   Attribute = 1,\n \n-  /**\n-   * Injecting the `ChangeDetectorRef` token. Needs special handling when injected into a pipe.\n-   */\n-  ChangeDetectorRef = 2,\n-\n   /**\n    * An invalid dependency (no token could be determined). An error should be thrown at runtime.\n    */\n-  Invalid = 3,\n+  Invalid = 2,\n }\n \n /**\n@@ -270,28 +265,21 @@ function injectDependencies(deps: R3DependencyMetadata[], target: R3FactoryTarge\n \n function compileInjectDependency(\n     dep: R3DependencyMetadata, target: R3FactoryTarget, index: number): o.Expression {\n-  const isPipe = target === R3FactoryTarget.Pipe;\n-\n   // Interpret the dependency according to its resolved type.\n   switch (dep.resolved) {\n     case R3ResolvedDependencyType.Token:\n-    case R3ResolvedDependencyType.ChangeDetectorRef:\n       // Build up the injection flags according to the metadata.\n       const flags = InjectFlags.Default | (dep.self ? InjectFlags.Self : 0) |\n           (dep.skipSelf ? InjectFlags.SkipSelf : 0) | (dep.host ? InjectFlags.Host : 0) |\n-          (dep.optional ? InjectFlags.Optional : 0);\n+          (dep.optional ? InjectFlags.Optional : 0) |\n+          (target === R3FactoryTarget.Pipe ? InjectFlags.ForPipe : 0);\n \n       // If this dependency is optional or otherwise has non-default flags, then additional\n       // parameters describing how to inject the dependency must be passed to the inject function\n       // that's being used.\n       let flagsParam: o.LiteralExpr|null =\n           (flags !== InjectFlags.Default || dep.optional) ? o.literal(flags) : null;\n \n-      // We have a separate instruction for injecting ChangeDetectorRef into a pipe.\n-      if (isPipe && dep.resolved === R3ResolvedDependencyType.ChangeDetectorRef) {\n-        return o.importExpr(R3.injectPipeChangeDetectorRef).callFn(flagsParam ? [flagsParam] : []);\n-      }\n-\n       // Build up the arguments to the injectFn call.\n       const injectArgs = [dep.token];\n       if (flagsParam) {"
        },
        {
            "sha": "4c10ec3e58d93178b67d5e2cc2172823909318fb",
            "filename": "packages/compiler/src/render3/r3_identifiers.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler%2Fsrc%2Frender3%2Fr3_identifiers.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler%2Fsrc%2Frender3%2Fr3_identifiers.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Frender3%2Fr3_identifiers.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -219,9 +219,6 @@ export class Identifiers {\n \n   static injectAttribute: o.ExternalReference = {name: 'ɵɵinjectAttribute', moduleName: CORE};\n \n-  static injectPipeChangeDetectorRef:\n-      o.ExternalReference = {name: 'ɵɵinjectPipeChangeDetectorRef', moduleName: CORE};\n-\n   static directiveInject: o.ExternalReference = {name: 'ɵɵdirectiveInject', moduleName: CORE};\n   static invalidFactory: o.ExternalReference = {name: 'ɵɵinvalidFactory', moduleName: CORE};\n   static invalidFactoryDep: o.ExternalReference = {name: 'ɵɵinvalidFactoryDep', moduleName: CORE};"
        },
        {
            "sha": "6e98b952c4d583be803ab78af025614259024173",
            "filename": "packages/compiler/test/core_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler%2Ftest%2Fcore_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcompiler%2Ftest%2Fcore_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fcore_spec.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -153,7 +153,8 @@ import * as core from '@angular/core';\n       expectToBe(compilerCore.InjectFlags.Default, core.InjectFlags.Default);\n       expectToBe(compilerCore.InjectFlags.SkipSelf, core.InjectFlags.SkipSelf);\n       expectToBe(compilerCore.InjectFlags.Self, core.InjectFlags.Self);\n-\n+      expectToBe(compilerCore.InjectFlags.Host, core.InjectFlags.Host);\n+      expectToBe(compilerCore.InjectFlags.Optional, core.InjectFlags.Optional);\n \n       expectToBe(compilerCore.ArgumentType.Inline, core.ɵArgumentType.Inline);\n       expectToBe(compilerCore.ArgumentType.Dynamic, core.ɵArgumentType.Dynamic);"
        },
        {
            "sha": "ad805d24840beb18011f955d322596cfe6444893",
            "filename": "packages/core/src/change_detection/change_detector_ref.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 16,
            "changes": 26,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Fchange_detection%2Fchange_detector_ref.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Fchange_detection%2Fchange_detector_ref.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fchange_detection%2Fchange_detector_ref.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -6,6 +6,8 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n+import {InjectFlags} from '../di';\n+import {InternalInjectFlags} from '../di/interface/injector';\n import {TNode, TNodeType} from '../render3/interfaces/node';\n import {isComponentHost} from '../render3/interfaces/type_checks';\n import {DECLARATION_COMPONENT_VIEW, LView} from '../render3/interfaces/view';\n@@ -125,22 +127,17 @@ export abstract class ChangeDetectorRef {\n    * @internal\n    * @nocollapse\n    */\n-  static __NG_ELEMENT_ID__: () => ChangeDetectorRef = SWITCH_CHANGE_DETECTOR_REF_FACTORY;\n-\n-  /**\n-   * This marker is need so that the JIT compiler can correctly identify this class as special.\n-   *\n-   * @internal\n-   * @nocollapse\n-   */\n-  static __ChangeDetectorRef__ = true;\n+  static __NG_ELEMENT_ID__:\n+      (flags: InjectFlags) => ChangeDetectorRef = SWITCH_CHANGE_DETECTOR_REF_FACTORY;\n }\n \n \n \n /** Returns a ChangeDetectorRef (a.k.a. a ViewRef) */\n-export function injectChangeDetectorRef(isPipe = false): ChangeDetectorRef {\n-  return createViewRef(getCurrentTNode()!, getLView(), isPipe);\n+export function injectChangeDetectorRef(flags: InjectFlags): ChangeDetectorRef {\n+  return createViewRef(\n+      getCurrentTNode()!, getLView(),\n+      (flags & InternalInjectFlags.ForPipe) === InternalInjectFlags.ForPipe);\n }\n \n /**\n@@ -152,10 +149,7 @@ export function injectChangeDetectorRef(isPipe = false): ChangeDetectorRef {\n  * @returns The ChangeDetectorRef to use\n  */\n function createViewRef(tNode: TNode, lView: LView, isPipe: boolean): ChangeDetectorRef {\n-  // `isComponentView` will be true for Component and Directives (but not for Pipes).\n-  // See https://github.com/angular/angular/pull/33072 for proper fix\n-  const isComponentView = !isPipe && isComponentHost(tNode);\n-  if (isComponentView) {\n+  if (isComponentHost(tNode) && !isPipe) {\n     // The LView represents the location where the component is declared.\n     // Instead we want the LView for the component View and so we need to look it up.\n     const componentView = getComponentLViewByIndex(tNode.index, lView);  // look down\n@@ -167,4 +161,4 @@ function createViewRef(tNode: TNode, lView: LView, isPipe: boolean): ChangeDetec\n     return new R3_ViewRef(hostComponentView, lView);\n   }\n   return null!;\n-}\n\\ No newline at end of file\n+}"
        },
        {
            "sha": "6ce8a1d3cec0aea349ae7bbaa272b8ffd8acb55a",
            "filename": "packages/core/src/compiler/compiler_facade_interface.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Fcompiler%2Fcompiler_facade_interface.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Fcompiler%2Fcompiler_facade_interface.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fcompiler%2Fcompiler_facade_interface.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -86,8 +86,7 @@ export type Provider = any;\n export enum R3ResolvedDependencyType {\n   Token = 0,\n   Attribute = 1,\n-  ChangeDetectorRef = 2,\n-  Invalid = 3,\n+  Invalid = 2,\n }\n \n export enum R3FactoryTarget {"
        },
        {
            "sha": "393f16c16d8e802b85075b2037da7d0dd0b3b2b9",
            "filename": "packages/core/src/core_render3_private_export.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Fcore_render3_private_export.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Fcore_render3_private_export.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fcore_render3_private_export.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -154,7 +154,6 @@ export {\n   ɵɵInheritDefinitionFeature,\n   ɵɵinjectAttribute,\n   ɵɵInjectorDeclaration,\n-  ɵɵinjectPipeChangeDetectorRef,\n   ɵɵinvalidFactory,\n   ɵɵlistener,\n   ɵɵloadQuery,"
        },
        {
            "sha": "276e116c2d4aaed328a8d8caa16f7c6dc00ab9fa",
            "filename": "packages/core/src/di/interface/injector.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 1,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Fdi%2Finterface%2Finjector.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Fdi%2Finterface%2Finjector.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fdi%2Finterface%2Finjector.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -70,4 +70,9 @@ export const enum InternalInjectFlags {\n \n   /** Inject `defaultValue` instead if token not found. */\n   Optional = 0b1000,\n-}\n\\ No newline at end of file\n+\n+  /**\n+   * This token is being injected into a pipe.\n+   */\n+  ForPipe = 0b10000,\n+}"
        },
        {
            "sha": "06f44565de2a8b33fb147873ca25b7cbb3afc2eb",
            "filename": "packages/core/src/di/jit/util.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Fdi%2Fjit%2Futil.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Fdi%2Fjit%2Futil.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fdi%2Fjit%2Futil.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -68,9 +68,6 @@ function reflectDependency(compiler: CompilerFacade, dep: any|any[]): R3Dependen\n         }\n         meta.token = param.attributeName;\n         meta.resolved = compiler.R3ResolvedDependencyType.Attribute;\n-      } else if (param.__ChangeDetectorRef__ === true) {\n-        meta.token = param;\n-        meta.resolved = compiler.R3ResolvedDependencyType.ChangeDetectorRef;\n       } else {\n         setTokenAndResolvedType(param);\n       }"
        },
        {
            "sha": "0a634787bd4bd7549c60ad26299d2e7464a31c45",
            "filename": "packages/core/src/render3/di.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Frender3%2Fdi.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Frender3%2Fdi.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fdi.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -421,7 +421,7 @@ export function getOrCreateInjectable<T>(\n             lookupTokenUsingModuleInjector<T>(lView, token, flags, notFoundValue);\n       }\n       try {\n-        const value = bloomHash();\n+        const value = bloomHash(flags);\n         if (value == null && !(flags & InjectFlags.Optional)) {\n           throwProviderNotFoundError(token);\n         } else {"
        },
        {
            "sha": "aa8b010bcecdc8cb2c4ac83d11713f025f352a7c",
            "filename": "packages/core/src/render3/index.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Frender3%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Frender3%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Findex.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -172,7 +172,7 @@ export {\n } from './state';\n export {NO_CHANGE} from './tokens';\n export { ɵɵresolveBody, ɵɵresolveDocument,ɵɵresolveWindow} from './util/misc_utils';\n-export { ɵɵinjectPipeChangeDetectorRef,ɵɵtemplateRefExtractor} from './view_engine_compatibility_prebound';\n+export { ɵɵtemplateRefExtractor} from './view_engine_compatibility_prebound';\n // clang-format on\n \n export {"
        },
        {
            "sha": "697c090c1558f8cef8a20fda46d72d7cd1373a71",
            "filename": "packages/core/src/render3/jit/environment.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Frender3%2Fjit%2Fenvironment.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Frender3%2Fjit%2Fenvironment.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fjit%2Fenvironment.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -42,7 +42,6 @@ export const angularCoreEnv: {[name: string]: Function} =\n        'ɵɵinjectAttribute': r3.ɵɵinjectAttribute,\n        'ɵɵinvalidFactory': r3.ɵɵinvalidFactory,\n        'ɵɵinvalidFactoryDep': ɵɵinvalidFactoryDep,\n-       'ɵɵinjectPipeChangeDetectorRef': r3.ɵɵinjectPipeChangeDetectorRef,\n        'ɵɵtemplateRefExtractor': r3.ɵɵtemplateRefExtractor,\n        'ɵɵNgOnChangesFeature': r3.ɵɵNgOnChangesFeature,\n        'ɵɵProvidersFeature': r3.ɵɵProvidersFeature,"
        },
        {
            "sha": "9e9f5bf6572eed8281a13ef2276d45ef216441d6",
            "filename": "packages/core/src/render3/view_engine_compatibility_prebound.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 15,
            "changes": 15,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Frender3%2Fview_engine_compatibility_prebound.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Fsrc%2Frender3%2Fview_engine_compatibility_prebound.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fview_engine_compatibility_prebound.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -24,18 +24,3 @@ import {LView} from './interfaces/view';\n export function ɵɵtemplateRefExtractor(tNode: TNode, lView: LView): TemplateRef<any>|null {\n   return createTemplateRef(tNode, lView);\n }\n-\n-\n-/**\n- * Returns the appropriate `ChangeDetectorRef` for a pipe.\n- *\n- * @codeGenApi\n- */\n-export function ɵɵinjectPipeChangeDetectorRef(flags = InjectFlags.Default): ChangeDetectorRef|null {\n-  const value = injectChangeDetectorRef(true);\n-  if (value == null && !(flags & InjectFlags.Optional)) {\n-    throwProviderNotFoundError('ChangeDetectorRef');\n-  } else {\n-    return value;\n-  }\n-}"
        },
        {
            "sha": "3c9d467393c7a3c6fa3fd9ba54165ece299737b9",
            "filename": "packages/core/test/render3/render_util.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Ftest%2Frender3%2Frender_util.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Ftest%2Frender3%2Frender_util.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Frender_util.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -8,6 +8,7 @@\n \n import {RendererStyleFlags2, RendererType2} from '@angular/core';\n import {ChangeDetectorRef} from '@angular/core/src/change_detection/change_detector_ref';\n+import {InjectFlags} from '@angular/core/src/di';\n import {Provider} from '@angular/core/src/di/interface/provider';\n import {ElementRef} from '@angular/core/src/linker/element_ref';\n import {TemplateRef} from '@angular/core/src/linker/template_ref';\n@@ -459,7 +460,8 @@ export function enableIvyInjectableFactories() {\n   (ElementRef as any)[NG_ELEMENT_ID] = () => R3_ELEMENT_REF_FACTORY();\n   (TemplateRef as any)[NG_ELEMENT_ID] = () => R3_TEMPLATE_REF_FACTORY();\n   (ViewContainerRef as any)[NG_ELEMENT_ID] = () => R3_VIEW_CONTAINER_REF_FACTORY();\n-  (ChangeDetectorRef as any)[NG_ELEMENT_ID] = () => R3_CHANGE_DETECTOR_REF_FACTORY();\n+  (ChangeDetectorRef as any)[NG_ELEMENT_ID] = (flags: InjectFlags) =>\n+      R3_CHANGE_DETECTOR_REF_FACTORY(flags);\n   (Renderer2 as any)[NG_ELEMENT_ID] = () => R3_RENDERER2_FACTORY();\n }\n "
        },
        {
            "sha": "3031801161195fbba23aa652a8d4819704bda059",
            "filename": "packages/core/test/test_bed_spec.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Ftest%2Ftest_bed_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/857dfaa1e7b5c502abc095818db934b989783868/packages%2Fcore%2Ftest%2Ftest_bed_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Ftest_bed_spec.ts?ref=857dfaa1e7b5c502abc095818db934b989783868",
            "patch": "@@ -627,12 +627,6 @@ describe('TestBed', () => {\n      });\n \n   it('should handle overrides for a provider that has `ChangeDetectorRef` as a dependency', () => {\n-    // Note: we specifically check an @Injectable with `ChangeDetectorRef` here due to the fact that\n-    // in Ivy there is a special instruction that injects `ChangeDetectorRef` token for Pipes\n-    // (ɵɵinjectPipeChangeDetectorRef) and using that function for other types causes problems,\n-    // for example when we try to override an @Injectable. The test below captures a use-case that\n-    // triggers a problem in case incompatible function is used to inject `ChangeDetectorRef` as a\n-    // dependency.\n     @Injectable({providedIn: 'root'})\n     class MyService {\n       token = 'original';"
        }
    ],
    "stats": {
        "total": 148,
        "additions": 50,
        "deletions": 98
    }
}