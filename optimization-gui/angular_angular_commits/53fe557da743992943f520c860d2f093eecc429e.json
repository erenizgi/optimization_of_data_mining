{
    "author": "gkalpak",
    "message": "feat(service-worker): include ServiceWorker version in debug info (#42622)\n\nThis commit includes the ServiceWorker version in the debug info shown\nat `/ngsw/state` to make it easier to know what version of the\nServiceWorker script is controlling the page.\n\nPR Close #42622",
    "sha": "53fe557da743992943f520c860d2f093eecc429e",
    "files": [
        {
            "sha": "d9f5d73968f564e62d2586d6affb50047db6631c",
            "filename": "aio/content/guide/service-worker-devops.md",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/53fe557da743992943f520c860d2f093eecc429e/aio%2Fcontent%2Fguide%2Fservice-worker-devops.md",
            "raw_url": "https://github.com/angular/angular/raw/53fe557da743992943f520c860d2f093eecc429e/aio%2Fcontent%2Fguide%2Fservice-worker-devops.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fservice-worker-devops.md?ref=53fe557da743992943f520c860d2f093eecc429e",
            "patch": "@@ -171,6 +171,7 @@ is `ngsw/state`. Here is an example of this debug page's contents:\n ```\n NGSW Debug Info:\n \n+Driver version: 13.3.7\n Driver state: NORMAL ((nominal))\n Latest manifest hash: eea7f5f464f90789b621170af5a569d6be077e5c\n Last update check: never"
        },
        {
            "sha": "80b4b575fd6e4e30fee0a7008f292a973dcc4ea7",
            "filename": "packages/service-worker/worker/src/debug.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/53fe557da743992943f520c860d2f093eecc429e/packages%2Fservice-worker%2Fworker%2Fsrc%2Fdebug.ts",
            "raw_url": "https://github.com/angular/angular/raw/53fe557da743992943f520c860d2f093eecc429e/packages%2Fservice-worker%2Fworker%2Fsrc%2Fdebug.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fservice-worker%2Fworker%2Fsrc%2Fdebug.ts?ref=53fe557da743992943f520c860d2f093eecc429e",
            "patch": "@@ -9,6 +9,7 @@\n import {Adapter} from './adapter';\n import {Debuggable, DebugLogger} from './api';\n \n+const SW_VERSION = '0.0.0-PLACEHOLDER';\n const DEBUG_LOG_BUFFER_SIZE = 100;\n \n interface DebugMessage {\n@@ -37,6 +38,7 @@ export class DebugHandler implements DebugLogger {\n \n     const msgState = `NGSW Debug Info:\n \n+Driver version: ${SW_VERSION}\n Driver state: ${state.state} (${state.why})\n Latest manifest hash: ${state.latestHash || 'none'}\n Last update check: ${this.since(state.lastUpdateCheck)}`;"
        },
        {
            "sha": "881f7159f78a49880607ef4b4b7c81def84a7a65",
            "filename": "packages/service-worker/worker/test/happy_spec.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/53fe557da743992943f520c860d2f093eecc429e/packages%2Fservice-worker%2Fworker%2Ftest%2Fhappy_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/53fe557da743992943f520c860d2f093eecc429e/packages%2Fservice-worker%2Fworker%2Ftest%2Fhappy_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fservice-worker%2Fworker%2Ftest%2Fhappy_spec.ts?ref=53fe557da743992943f520c860d2f093eecc429e",
            "patch": "@@ -1237,19 +1237,19 @@ describe('Driver', () => {\n   describe('serving ngsw/state', () => {\n     it('should show debug info (when in NORMAL state)', async () => {\n       expect(await makeRequest(scope, '/ngsw/state'))\n-          .toMatch(/^NGSW Debug Info:\\n\\nDriver state: NORMAL/);\n+          .toMatch(/^NGSW Debug Info:\\n\\nDriver version: .+\\nDriver state: NORMAL/);\n     });\n \n     it('should show debug info (when in EXISTING_CLIENTS_ONLY state)', async () => {\n       driver.state = DriverReadyState.EXISTING_CLIENTS_ONLY;\n       expect(await makeRequest(scope, '/ngsw/state'))\n-          .toMatch(/^NGSW Debug Info:\\n\\nDriver state: EXISTING_CLIENTS_ONLY/);\n+          .toMatch(/^NGSW Debug Info:\\n\\nDriver version: .+\\nDriver state: EXISTING_CLIENTS_ONLY/);\n     });\n \n     it('should show debug info (when in SAFE_MODE state)', async () => {\n       driver.state = DriverReadyState.SAFE_MODE;\n       expect(await makeRequest(scope, '/ngsw/state'))\n-          .toMatch(/^NGSW Debug Info:\\n\\nDriver state: SAFE_MODE/);\n+          .toMatch(/^NGSW Debug Info:\\n\\nDriver version: .+\\nDriver state: SAFE_MODE/);\n     });\n \n     it('should show debug info when the scope is not root', async () => {\n@@ -1258,7 +1258,7 @@ describe('Driver', () => {\n       new Driver(newScope, newScope, new CacheDatabase(newScope, newScope));\n \n       expect(await makeRequest(newScope, '/foo/bar/ngsw/state'))\n-          .toMatch(/^NGSW Debug Info:\\n\\nDriver state: NORMAL/);\n+          .toMatch(/^NGSW Debug Info:\\n\\nDriver version: .+\\nDriver state: NORMAL/);\n     });\n   });\n "
        }
    ],
    "stats": {
        "total": 11,
        "additions": 7,
        "deletions": 4
    }
}