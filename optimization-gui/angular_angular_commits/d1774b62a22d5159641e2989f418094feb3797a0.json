{
    "author": "devversion",
    "message": "refactor(compiler): fix rollup bundle issues due to re-export conflicts (#43431)\n\nAfter updating to a more recent version of rollup, rollup started to\ncomplain because the `TreeParseResult` class is being re-exported\ntwice in the `index.ts -> public-api.ts -> compiler.ts` entry-point.\n\nRollup threw errors like:\n\n```\nError: \"ParseTreeResult\" cannot be exported from\n<..>/ml_parser/parser.mjs as it is a re-export that references itself.\n```\n\nIt seems like Rollup ideally would not throw here, similar to TypeScript\nwhich detects that these exports are the same and just dedupes them, but\nit's low-effort fixing this for now and actually is a good opportunity\nto make the public API a little more easy understand (when looking at\nthe `compiler.ts` file).\n\nPR Close #43431",
    "sha": "d1774b62a22d5159641e2989f418094feb3797a0",
    "files": [
        {
            "sha": "4e5b9fff98d308a8ba54552a20755c550abf7492",
            "filename": "packages/compiler/src/compiler.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/d1774b62a22d5159641e2989f418094feb3797a0/packages%2Fcompiler%2Fsrc%2Fcompiler.ts",
            "raw_url": "https://github.com/angular/angular/raw/d1774b62a22d5159641e2989f418094feb3797a0/packages%2Fcompiler%2Fsrc%2Fcompiler.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fcompiler.ts?ref=d1774b62a22d5159641e2989f418094feb3797a0",
            "patch": "@@ -74,6 +74,7 @@ export * from './ml_parser/html_parser';\n export * from './ml_parser/html_tags';\n export * from './ml_parser/interpolation_config';\n export * from './ml_parser/tags';\n+export {ParseTreeResult, TreeError} from './ml_parser/parser';\n export {LexerRange} from './ml_parser/lexer';\n export * from './ml_parser/xml_parser';\n export {NgModuleCompiler} from './ng_module_compiler';"
        },
        {
            "sha": "2b2edf094095bce9c8149588113348971f40d423",
            "filename": "packages/compiler/src/ml_parser/html_parser.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/d1774b62a22d5159641e2989f418094feb3797a0/packages%2Fcompiler%2Fsrc%2Fml_parser%2Fhtml_parser.ts",
            "raw_url": "https://github.com/angular/angular/raw/d1774b62a22d5159641e2989f418094feb3797a0/packages%2Fcompiler%2Fsrc%2Fml_parser%2Fhtml_parser.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fml_parser%2Fhtml_parser.ts?ref=d1774b62a22d5159641e2989f418094feb3797a0",
            "patch": "@@ -10,8 +10,6 @@ import {getHtmlTagDefinition} from './html_tags';\n import {TokenizeOptions} from './lexer';\n import {Parser, ParseTreeResult} from './parser';\n \n-export {ParseTreeResult, TreeError} from './parser';\n-\n export class HtmlParser extends Parser {\n   constructor() {\n     super(getHtmlTagDefinition);"
        },
        {
            "sha": "18f6d3454ac5430f67a6c08eb1bed60a68febdc1",
            "filename": "packages/compiler/src/ml_parser/xml_parser.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/d1774b62a22d5159641e2989f418094feb3797a0/packages%2Fcompiler%2Fsrc%2Fml_parser%2Fxml_parser.ts",
            "raw_url": "https://github.com/angular/angular/raw/d1774b62a22d5159641e2989f418094feb3797a0/packages%2Fcompiler%2Fsrc%2Fml_parser%2Fxml_parser.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fml_parser%2Fxml_parser.ts?ref=d1774b62a22d5159641e2989f418094feb3797a0",
            "patch": "@@ -10,8 +10,6 @@ import {TokenizeOptions} from './lexer';\n import {Parser, ParseTreeResult} from './parser';\n import {getXmlTagDefinition} from './xml_tags';\n \n-export {ParseTreeResult, TreeError} from './parser';\n-\n export class XmlParser extends Parser {\n   constructor() {\n     super(getXmlTagDefinition);"
        },
        {
            "sha": "d680c90def5bb8df2ed02aec0d176d11c6bce111",
            "filename": "packages/compiler/src/template_parser/template_parser.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/d1774b62a22d5159641e2989f418094feb3797a0/packages%2Fcompiler%2Fsrc%2Ftemplate_parser%2Ftemplate_parser.ts",
            "raw_url": "https://github.com/angular/angular/raw/d1774b62a22d5159641e2989f418094feb3797a0/packages%2Fcompiler%2Fsrc%2Ftemplate_parser%2Ftemplate_parser.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Ftemplate_parser%2Ftemplate_parser.ts?ref=d1774b62a22d5159641e2989f418094feb3797a0",
            "patch": "@@ -14,10 +14,11 @@ import {AST, ASTWithSource, EmptyExpr, ParsedEvent, ParsedProperty, ParsedVariab\n import {Parser} from '../expression_parser/parser';\n import {createTokenForExternalReference, createTokenForReference, Identifiers} from '../identifiers';\n import * as html from '../ml_parser/ast';\n-import {HtmlParser, ParseTreeResult} from '../ml_parser/html_parser';\n+import {HtmlParser} from '../ml_parser/html_parser';\n import {removeWhitespaces, replaceNgsp} from '../ml_parser/html_whitespaces';\n import {expandNodes} from '../ml_parser/icu_ast_expander';\n import {InterpolationConfig} from '../ml_parser/interpolation_config';\n+import {ParseTreeResult} from '../ml_parser/parser';\n import {isNgTemplate, splitNsName} from '../ml_parser/tags';\n import {identifierName, ParseError, ParseErrorLevel, ParseSourceSpan, syntaxError} from '../parse_util';\n import {ProviderElementContext, ProviderViewContext} from '../provider_analyzer';"
        },
        {
            "sha": "e1e1bc15fec2118c51cdbe5d07aa4900768adc9f",
            "filename": "packages/compiler/test/ml_parser/ast_spec_utils.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/d1774b62a22d5159641e2989f418094feb3797a0/packages%2Fcompiler%2Ftest%2Fml_parser%2Fast_spec_utils.ts",
            "raw_url": "https://github.com/angular/angular/raw/d1774b62a22d5159641e2989f418094feb3797a0/packages%2Fcompiler%2Ftest%2Fml_parser%2Fast_spec_utils.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fml_parser%2Fast_spec_utils.ts?ref=d1774b62a22d5159641e2989f418094feb3797a0",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import * as html from '../../src/ml_parser/ast';\n-import {ParseTreeResult} from '../../src/ml_parser/html_parser';\n+import {ParseTreeResult} from '../../src/ml_parser/parser';\n import {ParseLocation} from '../../src/parse_util';\n \n export function humanizeDom(parseResult: ParseTreeResult, addSourceSpan: boolean = false): any[] {"
        },
        {
            "sha": "b2f57592730fb6fc3309eb6871f40ac8fa90fb37",
            "filename": "packages/compiler/test/ml_parser/html_parser_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/d1774b62a22d5159641e2989f418094feb3797a0/packages%2Fcompiler%2Ftest%2Fml_parser%2Fhtml_parser_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/d1774b62a22d5159641e2989f418094feb3797a0/packages%2Fcompiler%2Ftest%2Fml_parser%2Fhtml_parser_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Fml_parser%2Fhtml_parser_spec.ts?ref=d1774b62a22d5159641e2989f418094feb3797a0",
            "patch": "@@ -7,7 +7,8 @@\n  */\n \n import * as html from '../../src/ml_parser/ast';\n-import {HtmlParser, ParseTreeResult, TreeError} from '../../src/ml_parser/html_parser';\n+import {HtmlParser} from '../../src/ml_parser/html_parser';\n+import {ParseTreeResult, TreeError} from '../../src/ml_parser/parser';\n import {TokenType} from '../../src/ml_parser/tokens';\n import {ParseError} from '../../src/parse_util';\n "
        },
        {
            "sha": "3db8e17622d95c7ebaddbb035380e09a29a05641",
            "filename": "packages/compiler/test/render3/view/util.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/d1774b62a22d5159641e2989f418094feb3797a0/packages%2Fcompiler%2Ftest%2Frender3%2Fview%2Futil.ts",
            "raw_url": "https://github.com/angular/angular/raw/d1774b62a22d5159641e2989f418094feb3797a0/packages%2Fcompiler%2Ftest%2Frender3%2Fview%2Futil.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Ftest%2Frender3%2Fview%2Futil.ts?ref=d1774b62a22d5159641e2989f418094feb3797a0",
            "patch": "@@ -10,9 +10,10 @@ import * as e from '../../../src/expression_parser/ast';\n import {Lexer} from '../../../src/expression_parser/lexer';\n import {Parser} from '../../../src/expression_parser/parser';\n import * as html from '../../../src/ml_parser/ast';\n-import {HtmlParser, ParseTreeResult} from '../../../src/ml_parser/html_parser';\n+import {HtmlParser} from '../../../src/ml_parser/html_parser';\n import {WhitespaceVisitor} from '../../../src/ml_parser/html_whitespaces';\n import {DEFAULT_INTERPOLATION_CONFIG, InterpolationConfig} from '../../../src/ml_parser/interpolation_config';\n+import {ParseTreeResult} from '../../../src/ml_parser/parser';\n import * as a from '../../../src/render3/r3_ast';\n import {htmlAstToRender3Ast, Render3ParseResult} from '../../../src/render3/r3_template_transform';\n import {I18nMetaVisitor} from '../../../src/render3/view/i18n/meta';"
        }
    ],
    "stats": {
        "total": 16,
        "additions": 8,
        "deletions": 8
    }
}