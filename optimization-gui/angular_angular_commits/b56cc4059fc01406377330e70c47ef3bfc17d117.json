{
    "author": "AndrewKushnir",
    "message": "refactor(core): remove expandoStartIndex workaround (#39416)\n\nThis commit removes a workaround to calculate the `expandoStartIndex` value. That workaround was needed\nbecause the `expandoStartIndex` was updated previously, so it pointed at the wrong location. The problem\nwas fixed in PR #39301 and the workaround is no longer needed.\n\nPR Close #39416",
    "sha": "b56cc4059fc01406377330e70c47ef3bfc17d117",
    "files": [
        {
            "sha": "2c14b2be03d7f6af2774d3932f5c4440c7d4ca73",
            "filename": "packages/core/src/render3/assert.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/b56cc4059fc01406377330e70c47ef3bfc17d117/packages%2Fcore%2Fsrc%2Frender3%2Fassert.ts",
            "raw_url": "https://github.com/angular/angular/raw/b56cc4059fc01406377330e70c47ef3bfc17d117/packages%2Fcore%2Fsrc%2Frender3%2Fassert.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fassert.ts?ref=b56cc4059fc01406377330e70c47ef3bfc17d117",
            "patch": "@@ -121,16 +121,12 @@ export function assertIndexInDeclRange(lView: LView, index: number) {\n \n export function assertIndexInVarsRange(lView: LView, index: number) {\n   const tView = lView[1];\n-  assertBetween(\n-      tView.bindingStartIndex,\n-      (tView as any as {originalExpandoStartIndex: number}).originalExpandoStartIndex, index);\n+  assertBetween(tView.bindingStartIndex, tView.expandoStartIndex, index);\n }\n \n export function assertIndexInExpandoRange(lView: LView, index: number) {\n   const tView = lView[1];\n-  assertBetween(\n-      (tView as any as {originalExpandoStartIndex: number}).originalExpandoStartIndex, lView.length,\n-      index);\n+  assertBetween(tView.expandoStartIndex, lView.length, index);\n }\n \n export function assertBetween(lower: number, upper: number, index: number) {"
        },
        {
            "sha": "ae0599e003f2fed9183a52ce3da6105b58a2f22a",
            "filename": "packages/core/src/render3/instructions/lview_debug.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 17,
            "changes": 19,
            "blob_url": "https://github.com/angular/angular/blob/b56cc4059fc01406377330e70c47ef3bfc17d117/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Flview_debug.ts",
            "raw_url": "https://github.com/angular/angular/raw/b56cc4059fc01406377330e70c47ef3bfc17d117/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Flview_debug.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Flview_debug.ts?ref=b56cc4059fc01406377330e70c47ef3bfc17d117",
            "patch": "@@ -159,16 +159,6 @@ export const TViewConstructor = class TView implements ITView {\n   get type_(): string {\n     return TViewTypeAsString[this.type] || `TViewType.?${this.type}?`;\n   }\n-\n-  /**\n-   * Returns initial value of `expandoStartIndex`.\n-   */\n-  // FIXME(misko): `originalExpandoStartIndex` should not be needed because it should be the same as\n-  // `expandoStartIndex`. However `expandoStartIndex` is misnamed as it changes as more items get\n-  // allocated in expando.\n-  get originalExpandoStartIndex(): number {\n-    return HEADER_OFFSET + this._decls + this._vars;\n-  }\n };\n \n class TNode implements ITNode {\n@@ -515,18 +505,13 @@ export class LViewDebug implements ILViewDebug {\n   }\n \n   get vars(): LViewDebugRange {\n-    const tView = this.tView;\n     return toLViewRange(\n-        tView, this._raw_lView, tView.bindingStartIndex,\n-        (tView as any as {originalExpandoStartIndex: number}).originalExpandoStartIndex);\n+        this.tView, this._raw_lView, this.tView.bindingStartIndex, this.tView.expandoStartIndex);\n   }\n \n   get expando(): LViewDebugRange {\n-    const tView = this.tView as any as {_decls: number, _vars: number};\n     return toLViewRange(\n-        this.tView, this._raw_lView,\n-        (tView as any as {originalExpandoStartIndex: number}).originalExpandoStartIndex,\n-        this._raw_lView.length);\n+        this.tView, this._raw_lView, this.tView.expandoStartIndex, this._raw_lView.length);\n   }\n \n   /**"
        }
    ],
    "stats": {
        "total": 27,
        "additions": 4,
        "deletions": 23
    }
}