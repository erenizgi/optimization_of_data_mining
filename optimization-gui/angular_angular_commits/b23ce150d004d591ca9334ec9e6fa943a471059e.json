{
    "author": "devversion",
    "message": "build: bundle spec files for saucelabs legacy job (#44281)\n\nBundle spec files similar to how it is done within the Angular\nComponents repo. This should simplify the setup and also speed\nup the Saucelab job as only a single spec bundle would need to be\ndownloaded, compared to having to load hundreds of files through the\nSaucelabs tunnel.\n\nAlso makes a couple of tests more robust with the emulators/and accounts\nfor ES2015 test runner changes. The tests should be less reluctant to\nsuch build process changes.\n\nNote for reviewers: Some imports have been simplified here. This work\ncame from Joey's original WIP for this. It's unclear to me whether this\nis still needed, but it sounded like this was necessary for the ESBuild\nbundling to work. I have robusted the module resolution plugin though,\nso I doubt it's still needed. At the same time though: Not worth\nreverting/trying as these changes are nice to have anyway!\n\nCo-Authored-By: Joey Perrott <josephperrott@gmail.com>\nCo-Authored-By: Paul Gschwendtner <paulgschwendtner@gmail.com>\n\nPR Close #44281",
    "sha": "b23ce150d004d591ca9334ec9e6fa943a471059e",
    "files": [
        {
            "sha": "8645548431c20a05459eb54162d54f98d1786070",
            "filename": ".circleci/config.yml",
            "status": "modified",
            "additions": 6,
            "deletions": 8,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/.circleci%2Fconfig.yml",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/.circleci%2Fconfig.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.circleci%2Fconfig.yml?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -614,30 +614,28 @@ jobs:\n                 //packages/common/locales\n \n             # Needed for the ES5 downlevel reflector test in `packages/core/test/reflection`.\n-            mkdir -p dist/all/@angular/core/test/reflection/\n+            mkdir -p dist/legacy-test-out/core/test/reflection/\n             cp dist/bin/packages/core/test/reflection/es5_downleveled_inheritance_fixture.js \\\n-              dist/all/@angular/core/test/reflection/es5_downleveled_inheritance_fixture.js\n+              dist/legacy-test-out/core/test/reflection/es5_downleveled_inheritance_fixture.js\n             # Locale files are needed for i18n tests running within Saucelabs. These are added\n             # directly as sources so that the TypeScript compilation of `/packages/tsconfig.json`\n             # can succeed. Note that the base locale and currencies files are checked-in, so\n             # we do not need to re-generate those through Bazel.\n             mkdir -p packages/common/locales/extra\n             cp dist/bin/packages/common/locales/*.ts packages/common/locales\n             cp dist/bin/packages/common/locales/extra/*.ts packages/common/locales/extra\n-      # add module umd tsc compile option so the test can work\n-      # properly in the legacy browsers\n-      - run: yarn tsc -p packages/tsconfig-legacy-saucelabs.json --module UMD\n-      - run: yarn tsc -p modules --module UMD\n+      # Build ZoneJS so that it can be loaded globally in the Karma tests.\n       - run: yarn bazel build //packages/zone.js:npm_package\n+      # Build the bundle for all tests to run within Saucelabs\n+      - run: node tools/legacy-saucelabs/build-saucelabs-test-bundle.mjs\n       - run:\n           # Waiting on ready ensures that we don't run tests too early without Saucelabs not being ready.\n           name: Waiting for Saucelabs tunnel to connect\n           command: ./tools/saucelabs/sauce-service.sh ready-wait\n       - run:\n           name: Running tests on Saucelabs.\n           command: |\n-            browsers=$(node -e 'console.log(require(\"./browser-providers.conf\").sauceAliases.CI_REQUIRED.join(\",\"))')\n-            yarn karma start ./karma-js.conf.js --single-run --browsers=${browsers}\n+            KARMA_WEB_TEST_MODE=SL_REQUIRED yarn karma start ./karma-js.conf.js --single-run\n       - run:\n           name: Stop Saucelabs tunnel service\n           command: ./tools/saucelabs/sauce-service.sh stop"
        },
        {
            "sha": "55498a1847fa4568d609f97c71b70d27ae4548e5",
            "filename": ".pullapprove.yml",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/.pullapprove.yml",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/.pullapprove.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.pullapprove.yml?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -1196,6 +1196,7 @@ groups:\n           'tools/circular_dependency_test/**',\n           'tools/contributing-stats/**',\n           'tools/gulp-tasks/**',\n+          'tools/legacy-saucelabs/**',\n           'tools/npm/**',\n           'tools/npm_integration_test/**',\n           'tools/rxjs/**',"
        },
        {
            "sha": "98588131ce58232b6988ca9bf6264c11d8c82fa0",
            "filename": "karma-js.conf.js",
            "status": "modified",
            "additions": 5,
            "deletions": 53,
            "changes": 58,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/karma-js.conf.js",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/karma-js.conf.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/karma-js.conf.js?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -23,10 +23,6 @@ module.exports = function(config) {\n     },\n \n     files: [\n-      // Sources and specs.\n-      // Loaded through the System loader, in `test-main.js`.\n-      {pattern: 'dist/all/@angular/**/*.js', included: false, watched: true},\n-\n       // Serve AngularJS for `ngUpgrade` testing.\n       {pattern: 'node_modules/angular-1.5/angular?(.min).js', included: false, watched: false},\n       {pattern: 'node_modules/angular-mocks-1.5/angular-mocks.js', included: false, watched: false},\n@@ -46,10 +42,9 @@ module.exports = function(config) {\n       'dist/bin/packages/zone.js/npm_package/bundles/zone-testing.umd.js',\n       'dist/bin/packages/zone.js/npm_package/bundles/task-tracking.umd.js',\n \n-      // Including systemjs because it defines `__eval`, which produces correct stack traces.\n-      'test-events.js',\n-      'third_party/shims_for_internal_tests.js',\n-      'node_modules/systemjs/dist/system.src.js',\n+      // Static test assets.\n+      {pattern: 'packages/platform-browser/test/static_assets/**/*', included: false},\n+      {pattern: 'packages/platform-browser/test/browser/static_assets/**/*', included: false},\n \n       // Serve polyfills necessary for testing the `elements` package.\n       {\n@@ -58,42 +53,9 @@ module.exports = function(config) {\n         watched: false\n       },\n \n-      {pattern: 'node_modules/rxjs/**', included: false, watched: false, served: true},\n       'node_modules/reflect-metadata/Reflect.js',\n-      'tools/build/file2modulename.js',\n-      'test-main.js',\n-      {pattern: 'dist/all/@angular/empty.*', included: false, watched: false},\n-      {pattern: 'packages/platform-browser/test/static_assets/**', included: false, watched: false},\n-      {\n-        pattern: 'packages/platform-browser/test/browser/static_assets/**',\n-        included: false,\n-        watched: false,\n-      },\n-    ],\n \n-    exclude: [\n-      'dist/all/@angular/_testing_init/**',\n-      'dist/all/@angular/**/e2e_test/**',\n-      'dist/all/@angular/**/*node_only_spec.js',\n-      'dist/all/@angular/benchpress/**',\n-      'dist/all/@angular/compiler-cli/**',\n-      'dist/all/@angular/compiler-cli/src/ngtsc/**',\n-      'dist/all/@angular/compiler-cli/test/compliance/**',\n-      'dist/all/@angular/compiler-cli/test/ngtsc/**',\n-      'dist/all/@angular/compiler/test/aot/**',\n-      'dist/all/@angular/compiler/test/render3/**',\n-      'dist/all/@angular/core/test/bundling/**',\n-      'dist/all/@angular/core/test/render3/ivy/**',\n-      'dist/all/@angular/core/test/render3/jit/**',\n-      'dist/all/@angular/core/test/render3/perf/**',\n-      'dist/all/@angular/elements/schematics/**',\n-      'dist/all/@angular/examples/**/e2e_test/*',\n-      'dist/all/@angular/language-service/**',\n-      'dist/all/@angular/localize/**/test/**',\n-      'dist/all/@angular/localize/schematics/**',\n-      'dist/all/@angular/router/**/test/**',\n-      'dist/all/@angular/platform-browser/testing/e2e_util.js',\n-      'dist/examples/**/e2e_test/**',\n+      'dist/legacy-test-bundle.spec.js',\n     ],\n \n     customLaunchers: browserProvidersConf.customLaunchers,\n@@ -149,15 +111,6 @@ module.exports = function(config) {\n     set: () => {},\n   });\n \n-  if (process.env.CIRCLECI) {\n-    conf.frameworks.unshift('parallel');\n-    conf.plugins.unshift(require('karma-parallel'));\n-    conf.parallelOptions = {\n-      executors: 2,\n-      shardStrategy: 'round-robin',\n-    };\n-  }\n-\n   if (process.env['SAUCE_TUNNEL_IDENTIFIER']) {\n     console.log(`SAUCE_TUNNEL_IDENTIFIER: ${process.env.SAUCE_TUNNEL_IDENTIFIER}`);\n \n@@ -171,8 +124,7 @@ module.exports = function(config) {\n     // the test logs from upstream and tries re-uploading them with the Karma enhanced details.\n     // This slows-down tests/browser restarting and can decrease stability.\n     // https://github.com/karma-runner/karma-sauce-launcher/blob/59b0c5c877448e064ad56449cd906743721c6b62/src/launcher/launcher.ts#L72-L79.\n-    require('saucelabs').default.prototype.downloadJobAsset =\n-        () => Promise.resolve('<FAKE-LOGS>');\n+    require('saucelabs').default.prototype.downloadJobAsset = () => Promise.resolve('<FAKE-LOGS>');\n   }\n \n   // For SauceLabs jobs, we set up a domain which resolves to the machine which launched"
        },
        {
            "sha": "4f57f7aa4b4aa830e1e847d95322e7c633f98e1d",
            "filename": "modules/benchmarks/src/old/compiler/compiler_benchmark.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/modules%2Fbenchmarks%2Fsrc%2Fold%2Fcompiler%2Fcompiler_benchmark.ts",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/modules%2Fbenchmarks%2Fsrc%2Fold%2Fcompiler%2Fcompiler_benchmark.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/modules%2Fbenchmarks%2Fsrc%2Fold%2Fcompiler%2Fcompiler_benchmark.ts?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -8,7 +8,7 @@\n \n import {CompilerConfig, DirectiveResolver} from '@angular/compiler';\n import {Component, ComponentResolver, Directive, ViewContainerRef,} from '@angular/core';\n-import {ViewMetadata} from '@angular/core/src/metadata/view';\n+import {ViewMetadata} from '@angular/core/view';\n import {PromiseWrapper} from '@angular/facade/src/async';\n import {print, Type} from '@angular/facade/src/lang';\n import {bootstrap} from '@angular/platform-browser';"
        },
        {
            "sha": "d72555bf16a8881bda55f3e0926fc3a39019c4e2",
            "filename": "package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/package.json",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -176,9 +176,9 @@\n     \"gulp-conventional-changelog\": \"^2.0.35\",\n     \"husky\": \"7.0.4\",\n     \"inquirer\": \"^8.0.0\",\n-    \"karma-parallel\": \"^0.3.1\",\n     \"karma-sauce-launcher\": \"^4.3.6\",\n     \"madge\": \"^5.0.0\",\n+    \"multimatch\": \"^6.0.0\",\n     \"sauce-connect\": \"https://saucelabs.com/downloads/sc-4.7.1-linux.tar.gz\",\n     \"semver\": \"^7.3.5\",\n     \"ts-node\": \"^10.0.0\","
        },
        {
            "sha": "2b264f4b40502f009eb6a322f303395c64d6c10a",
            "filename": "packages/core/test/acceptance/content_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 3,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Facceptance%2Fcontent_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Facceptance%2Fcontent_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fcontent_spec.ts?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -7,8 +7,7 @@\n  */\n \n import {CommonModule} from '@angular/common';\n-import {ChangeDetectorRef, Component, Directive, TemplateRef, ViewChild, ViewContainerRef} from '@angular/core';\n-import {Input} from '@angular/core/src/metadata';\n+import {ChangeDetectorRef, Component, Directive, Input, TemplateRef, ViewChild, ViewContainerRef} from '@angular/core';\n import {TestBed} from '@angular/core/testing';\n import {By} from '@angular/platform-browser';\n import {expect} from '@angular/platform-browser/testing/src/matchers';\n@@ -322,7 +321,7 @@ describe('projection', () => {\n        @Component(\n            {selector: 'comp', template: `<ng-template><ng-content></ng-content></ng-template>`})\n        class Comp {\n-         @ViewChild(TemplateRef, {static: true}) template !: TemplateRef<any>;\n+         @ViewChild(TemplateRef, {static: true}) template!: TemplateRef<any>;\n        }\n \n        @Directive({selector: '[trigger]'})"
        },
        {
            "sha": "b2dce9f024198cce8ef786379717367f767e98af",
            "filename": "packages/core/test/acceptance/directive_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Facceptance%2Fdirective_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Facceptance%2Fdirective_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fdirective_spec.ts?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -7,8 +7,7 @@\n  */\n \n import {CommonModule} from '@angular/common';\n-import {Component, Directive, ElementRef, EventEmitter, NgModule, Output, TemplateRef, ViewChild, ViewContainerRef} from '@angular/core';\n-import {Input} from '@angular/core/src/metadata';\n+import {Component, Directive, ElementRef, EventEmitter, Input, NgModule, Output, TemplateRef, ViewChild, ViewContainerRef} from '@angular/core';\n import {TestBed} from '@angular/core/testing';\n import {By} from '@angular/platform-browser';\n "
        },
        {
            "sha": "6ce5b4b81a32ed9f3befcfb39da0bb75d06fba3f",
            "filename": "packages/core/test/acceptance/discover_utils_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Facceptance%2Fdiscover_utils_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Facceptance%2Fdiscover_utils_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fdiscover_utils_spec.ts?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -6,10 +6,8 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n import {CommonModule} from '@angular/common';\n-import {Component, Directive, HostBinding, InjectionToken, ViewChild} from '@angular/core';\n-import {ChangeDetectionStrategy} from '@angular/core/src/change_detection';\n+import {ChangeDetectionStrategy, Component, Directive, HostBinding, InjectionToken, Input, Output, ViewChild, ViewEncapsulation} from '@angular/core';\n import {EventEmitter} from '@angular/core/src/event_emitter';\n-import {Input, Output, ViewEncapsulation} from '@angular/core/src/metadata';\n import {isLView} from '@angular/core/src/render3/interfaces/type_checks';\n import {CONTEXT} from '@angular/core/src/render3/interfaces/view';\n import {ComponentFixture, TestBed} from '@angular/core/testing';"
        },
        {
            "sha": "c08efd47a5e1dead31d0ec230d45858585286d42",
            "filename": "packages/core/test/acceptance/text_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Facceptance%2Ftext_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Facceptance%2Ftext_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Ftext_spec.ts?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -127,7 +127,8 @@ describe('text instructions', () => {\n     fixture.detectChanges();\n     const div = fixture.nativeElement.querySelector('div');\n \n-    expect(div.innerHTML).toBe('function foo() { }');\n+    expect(div.innerHTML).toBe(fixture.componentInstance.test.toString());\n+    expect(div.innerHTML).toContain('foo');\n   });\n \n   it('should stringify an object using its toString method', () => {"
        },
        {
            "sha": "4a2a52e77a5a9312d0945da57eee86953197083b",
            "filename": "packages/core/test/acceptance/view_container_ref_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Facceptance%2Fview_container_ref_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Facceptance%2Fview_container_ref_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Facceptance%2Fview_container_ref_spec.ts?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -8,8 +8,7 @@\n \n import {CommonModule, DOCUMENT} from '@angular/common';\n import {computeMsgId} from '@angular/compiler';\n-import {Compiler, Component, ComponentFactoryResolver, Directive, DoCheck, ElementRef, EmbeddedViewRef, ErrorHandler, InjectionToken, Injector, NgModule, NgModuleRef, NO_ERRORS_SCHEMA, OnDestroy, OnInit, Pipe, PipeTransform, QueryList, RendererFactory2, RendererType2, Sanitizer, TemplateRef, ViewChild, ViewChildren, ViewContainerRef, ɵsetDocument} from '@angular/core';\n-import {Input} from '@angular/core/src/metadata';\n+import {Compiler, Component, ComponentFactoryResolver, Directive, DoCheck, ElementRef, EmbeddedViewRef, ErrorHandler, InjectionToken, Injector, Input, NgModule, NgModuleRef, NO_ERRORS_SCHEMA, OnDestroy, OnInit, Pipe, PipeTransform, QueryList, RendererFactory2, RendererType2, Sanitizer, TemplateRef, ViewChild, ViewChildren, ViewContainerRef, ɵsetDocument} from '@angular/core';\n import {ngDevModeResetPerfCounters} from '@angular/core/src/util/ng_dev_mode';\n import {ComponentFixture, TestBed, TestComponentRenderer} from '@angular/core/testing';\n import {clearTranslations, loadTranslations} from '@angular/localize';"
        },
        {
            "sha": "c38ae02d3a69ab3cce74863a16393b1e4956d52f",
            "filename": "packages/core/test/animation/animations_with_web_animations_integration_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Fanimation%2Fanimations_with_web_animations_integration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Fanimation%2Fanimations_with_web_animations_integration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fanimation%2Fanimations_with_web_animations_integration_spec.ts?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -249,7 +249,8 @@ describe('animation integration tests using web animations', function() {\n                 overflow:hidden;\n               }\n               .list .inner {\n-                line-height:50px;\n+                box-sizing: border-box;\n+                height: 50px;\n               }\n             `],\n           template: `"
        },
        {
            "sha": "41360e75a6ce6567a27849e68922686996f0f631",
            "filename": "packages/core/test/debug/debug_node_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Fdebug%2Fdebug_node_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Fdebug%2Fdebug_node_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fdebug%2Fdebug_node_spec.ts?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -8,8 +8,7 @@\n \n \n import {CommonModule, NgIfContext, ɵgetDOM as getDOM} from '@angular/common';\n-import {Component, DebugElement, DebugNode, Directive, ElementRef, EmbeddedViewRef, EventEmitter, HostBinding, Injectable, Input, NO_ERRORS_SCHEMA, OnInit, Output, Renderer2, TemplateRef, ViewChild, ViewContainerRef} from '@angular/core';\n-import {NgZone} from '@angular/core/src/zone';\n+import {Component, DebugElement, DebugNode, Directive, ElementRef, EmbeddedViewRef, EventEmitter, HostBinding, Injectable, Input, NgZone, NO_ERRORS_SCHEMA, OnInit, Output, Renderer2, TemplateRef, ViewChild, ViewContainerRef} from '@angular/core';\n import {ComponentFixture, TestBed, waitForAsync} from '@angular/core/testing';\n import {By} from '@angular/platform-browser/src/dom/debug/by';\n import {createMouseEvent, hasClass} from '@angular/platform-browser/testing/src/browser_util';"
        },
        {
            "sha": "b9408fae4ef2d091bef7178c25b63ed08278aeb0",
            "filename": "packages/core/test/directive_lifecycle_integration_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Fdirective_lifecycle_integration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Fdirective_lifecycle_integration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fdirective_lifecycle_integration_spec.ts?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -6,8 +6,7 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import {AfterContentChecked, AfterContentInit, AfterViewChecked, AfterViewInit, DoCheck, OnChanges, OnInit} from '@angular/core';\n-import {Component, Directive} from '@angular/core/src/metadata';\n+import {AfterContentChecked, AfterContentInit, AfterViewChecked, AfterViewInit, Component, Directive, DoCheck, OnChanges, OnInit} from '@angular/core';\n import {inject, TestBed} from '@angular/core/testing';\n import {Log} from '@angular/core/testing/src/testing_internal';\n "
        },
        {
            "sha": "a348d7bf8432aa54e7188890bb1d2c7dc4cb932a",
            "filename": "packages/core/test/linker/integration_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Flinker%2Fintegration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Flinker%2Fintegration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Flinker%2Fintegration_spec.ts?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -7,15 +7,14 @@\n  */\n \n import {CommonModule, DOCUMENT, ɵgetDOM as getDOM} from '@angular/common';\n-import {Compiler, ComponentFactory, ComponentRef, EventEmitter, Host, Inject, Injectable, InjectionToken, Injector, NgModule, NgModuleRef, NO_ERRORS_SCHEMA, OnDestroy, SkipSelf, ViewChild, ViewRef} from '@angular/core';\n+import {Attribute, Compiler, Component, ComponentFactory, ComponentRef, ContentChildren, Directive, EventEmitter, Host, HostBinding, HostListener, Inject, Injectable, InjectionToken, Injector, Input, NgModule, NgModuleRef, NO_ERRORS_SCHEMA, OnDestroy, Output, Pipe, SkipSelf, ViewChild, ViewRef} from '@angular/core';\n import {ChangeDetectionStrategy, ChangeDetectorRef, PipeTransform} from '@angular/core/src/change_detection/change_detection';\n import {ComponentFactoryResolver} from '@angular/core/src/linker/component_factory_resolver';\n import {ElementRef} from '@angular/core/src/linker/element_ref';\n import {QueryList} from '@angular/core/src/linker/query_list';\n import {TemplateRef} from '@angular/core/src/linker/template_ref';\n import {ViewContainerRef} from '@angular/core/src/linker/view_container_ref';\n import {EmbeddedViewRef} from '@angular/core/src/linker/view_ref';\n-import {Attribute, Component, ContentChildren, Directive, HostBinding, HostListener, Input, Output, Pipe} from '@angular/core/src/metadata';\n import {fakeAsync, getTestBed, TestBed, tick, waitForAsync} from '@angular/core/testing';\n import {createMouseEvent, dispatchEvent, el, isCommentNode} from '@angular/platform-browser/testing/src/browser_util';\n import {expect} from '@angular/platform-browser/testing/src/matchers';"
        },
        {
            "sha": "5ddcf7151fdc8e7b506c08467090b0ad242e676e",
            "filename": "packages/core/test/render3/i18n_debug_spec.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 2,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Frender3%2Fi18n_debug_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Frender3%2Fi18n_debug_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Fi18n_debug_spec.ts?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -29,6 +29,13 @@ describe('i18n debug', () => {\n     });\n \n     it('should print Attribute opCode', () => {\n+      // The `sanitizeFn` is written as actual function, compared to it being an arrow function.\n+      // This is done to make this test less reluctant to build process changes where e.g. an\n+      // arrow function might be transformed to a function declaration in ES5.\n+      const sanitizeFn = function(v: any) {\n+        return v;\n+      };\n+\n       expect(i18nUpdateOpCodesToString([\n         0b01,    8,\n         'pre ',  -4,\n@@ -39,11 +46,12 @@ describe('i18n debug', () => {\n         'pre ',  -4,\n         ' in ',  -3,\n         ' post', 1 << I18nUpdateOpCode.SHIFT_REF | I18nUpdateOpCode.Attr,\n-        'title', (v: any) => v,\n+        'title', sanitizeFn,\n       ] as unknown as I18nUpdateOpCodes))\n           .toEqual([\n             'if (mask & 0b1) { (lView[1] as Element).setAttribute(\\'title\\', `pre ${lView[i-4]} in ${lView[i-3]} post`); }',\n-            'if (mask & 0b10) { (lView[1] as Element).setAttribute(\\'title\\', (function (v) { return v; })(`pre ${lView[i-4]} in ${lView[i-3]} post`)); }'\n+            `if (mask & 0b10) { (lView[1] as Element).setAttribute('title', (${\n+                sanitizeFn.toString()})(\\`pre $\\{lView[i-4]} in $\\{lView[i-3]} post\\`)); }`\n           ]);\n     });\n "
        },
        {
            "sha": "d1a0bfd6f7d58bd85135bf8342b0b4801e51ddd6",
            "filename": "packages/core/test/render3/ivy/jit_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 5,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Frender3%2Fivy%2Fjit_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fcore%2Ftest%2Frender3%2Fivy%2Fjit_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Fivy%2Fjit_spec.ts?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -7,14 +7,10 @@\n  */\n import 'reflect-metadata';\n \n-import {ElementRef, QueryList} from '@angular/core';\n+import {Component, ContentChild, ContentChildren, Directive, ElementRef, HostBinding, HostListener, Input, NgModule, Pipe, QueryList, ViewChild, ViewChildren, ɵNgModuleDef as NgModuleDef} from '@angular/core';\n import {Injectable} from '@angular/core/src/di/injectable';\n import {setCurrentInjector, ɵɵinject} from '@angular/core/src/di/injector_compatibility';\n import {ɵɵdefineInjectable, ɵɵInjectorDef} from '@angular/core/src/di/interface/defs';\n-import {ContentChild, ContentChildren, ViewChild, ViewChildren} from '@angular/core/src/metadata/di';\n-import {Component, Directive, HostBinding, HostListener, Input, Pipe} from '@angular/core/src/metadata/directives';\n-import {NgModule} from '@angular/core/src/metadata/ng_module';\n-import {NgModuleDef} from '@angular/core/src/metadata/ng_module_def';\n import {FactoryFn} from '@angular/core/src/render3/definition_factory';\n import {ComponentDef, PipeDef} from '@angular/core/src/render3/interfaces/definition';\n "
        },
        {
            "sha": "03dc0c2f6ab77c358769ccdc656f2f462fcd984c",
            "filename": "packages/router/test/router_preloader.spec.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Frouter%2Ftest%2Frouter_preloader.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Frouter%2Ftest%2Frouter_preloader.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Frouter%2Ftest%2Frouter_preloader.spec.ts?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -7,7 +7,6 @@\n  */\n \n import {Compiler, Component, Injector, NgModule, NgModuleFactory, NgModuleRef, Type} from '@angular/core';\n-import {resolveComponentResources} from '@angular/core/src/metadata/resource_loading';\n import {fakeAsync, inject, TestBed, tick} from '@angular/core/testing';\n import {PreloadAllModules, PreloadingStrategy, RouterPreloader} from '@angular/router';\n import {BehaviorSubject, Observable, of, throwError} from 'rxjs';"
        },
        {
            "sha": "7d73f05d065d18bfbe44cca955d4a93badde938e",
            "filename": "packages/tsconfig-legacy-saucelabs.json",
            "status": "modified",
            "additions": 28,
            "deletions": 4,
            "changes": 32,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Ftsconfig-legacy-saucelabs.json",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Ftsconfig-legacy-saucelabs.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Ftsconfig-legacy-saucelabs.json?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -1,13 +1,37 @@\n {\n   \"extends\": \"./tsconfig.json\",\n   \"compilerOptions\": {\n-    \"target\": \"ES5\",\n-    \"module\": \"commonjs\",\n+    \"outDir\": \"../dist/legacy-test-out\",\n+    \"target\": \"ES2015\",\n+    \"module\": \"ES2020\",\n+    \"importHelpers\": true,\n     // The project uses Bazel for TypeScript compilation. Unlike with Bazel, we build all\n     // sources as part of a single TypeScript compilation. This results in `@internal`\n     // declarations not being omitted between the logical as defined per the Bazel targets.\n     // This can cause issues where the `override` keyword is needed for the legacy TS\n     // compilation, but not within Bazel where the overridden member has `@internal`.\n-    \"noImplicitOverride\": false\n-  }\n+    \"noImplicitOverride\": false,\n+    // We run the decorator downlevel transform when compiling the sources and tests.\n+    // Given that is the case, we do not need additional `design` metadata being emitted.\n+    // The default TS decorator metadata would also not work with ES2015 JIT.\n+    // https://github.com/angular/angular/issues/30106.\n+    \"emitDecoratorMetadata\": false\n+  },\n+  \"exclude\": [\n+    // Exclusions from the parent `tsconfig` need to be merged manually here.\n+    \"bazel\",\n+    \"common/locales\",\n+    \"compiler-cli/integrationtest\",\n+    \"compiler-cli/test/compliance\",\n+    \"core/schematics\",\n+    \"elements/schematics\",\n+    \"examples/**\",\n+    \"http/**\",\n+    \"platform-server/integrationtest\",\n+    \"router/test/aot_ngsummary_test\",\n+\n+    // Additional exclusion since tests for the language-service never run within the\n+    // Saucelabs job and the package is not compatible with ESM TS compilation anyway.\n+    \"language-service/**\",\n+  ]\n }"
        },
        {
            "sha": "e930b3a357dd066a44286a5c1ba238c76821c3ea",
            "filename": "packages/upgrade/static/test/integration/downgrade_module_spec.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 5,
            "changes": 15,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fdowngrade_module_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fdowngrade_module_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fupgrade%2Fstatic%2Ftest%2Fintegration%2Fdowngrade_module_spec.ts?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -622,7 +622,9 @@ withEachNg1Version(() => {\n                angular.module_('ng1', [lazyModuleName])\n                    .directive(\n                        'ng2', downgradeComponent({component: Ng2AComponent, propagateDigest}))\n-                   .run(($rootScope: angular.IRootScopeService) => $rootScope.value = 0);\n+                   .run([\n+                     '$rootScope', ($rootScope: angular.IRootScopeService) => $rootScope.value = 0\n+                   ]);\n \n            const element = html('<div><ng2 [value]=\"value\" ng-if=\"loadNg2\"></ng2></div>');\n            const $injector = angular.bootstrap(element, [ng1Module.name]);\n@@ -811,10 +813,13 @@ withEachNg1Version(() => {\n            const ng1Module =\n                angular.module_('ng1', [lazyModuleName])\n                    .directive('ng2', downgradeComponent({component: Ng2Component, propagateDigest}))\n-                   .run(($rootScope: angular.IRootScopeService) => {\n-                     $rootScope.attrVal = 'bar';\n-                     $rootScope.propVal = 'bar';\n-                   });\n+                   .run([\n+                     '$rootScope',\n+                     ($rootScope: angular.IRootScopeService) => {\n+                       $rootScope.attrVal = 'bar';\n+                       $rootScope.propVal = 'bar';\n+                     }\n+                   ]);\n \n            const element = html('<ng2 attr-input=\"{{ attrVal }}\" [prop-input]=\"propVal\"></ng2>');\n            const $injector = angular.bootstrap(element, [ng1Module.name]);"
        },
        {
            "sha": "6e8ca29aa7dc7dba1a7ffd21396f7dbec1d04bb3",
            "filename": "test-main.js",
            "status": "removed",
            "additions": 0,
            "deletions": 213,
            "changes": 213,
            "blob_url": "https://github.com/angular/angular/blob/61e023488e8ceee92977e85e5fe9e98f8bcfdfa1/test-main.js",
            "raw_url": "https://github.com/angular/angular/raw/61e023488e8ceee92977e85e5fe9e98f8bcfdfa1/test-main.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/test-main.js?ref=61e023488e8ceee92977e85e5fe9e98f8bcfdfa1",
            "patch": "@@ -1,213 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-// Tun on full stack traces in errors to help debugging\n-Error.stackTraceLimit = Infinity;\n-\n-jasmine.DEFAULT_TIMEOUT_INTERVAL = 15000;\n-\n-// Cancel Karma's synchronous start,\n-// we will call `__karma__.start()` later, once all the specs are loaded.\n-__karma__.loaded = function() {};\n-\n-window.isNode = false;\n-window.isBrowser = true;\n-\n-System.config({\n-  baseURL: '/base',\n-  defaultJSExtensions: true,\n-  map: {\n-    'benchpress/*': 'dist/js/dev/es5/benchpress/*.js',\n-    '@angular': 'dist/all/@angular',\n-    'domino': 'dist/all/@angular/empty.js',\n-    'url': 'dist/all/@angular/empty.js',\n-    'xhr2': 'dist/all/@angular/empty.js',\n-    '@angular/platform-server/src/domino_adapter': 'dist/all/@angular/empty.js',\n-    'angular-in-memory-web-api': 'dist/all/@angular/misc/angular-in-memory-web-api',\n-    'rxjs': 'node_modules/rxjs',\n-  },\n-  packages: {\n-    '@angular/core/src/render3': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/core/testing': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/core': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/animations/browser/testing': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/animations/browser': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/animations/testing': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/animations': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/compiler/testing': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/compiler': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/common/testing': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/common/http/testing': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/common/http': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/common': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/forms': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/misc/angular-in-memory-web-api': {main: 'index.js', defaultExtension: 'js'},\n-    // remove after all tests imports are fixed\n-    '@angular/facade': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/router/testing': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/router': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/localize/src/utils': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/localize/src/localize': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/localize/init': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/localize': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/upgrade/static/testing': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/upgrade/static': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/upgrade': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/platform-browser/animations/testing': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/platform-browser/animations': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/platform-browser/testing': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/platform-browser': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/platform-browser-dynamic/testing': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/platform-browser-dynamic': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/platform-server/init': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/platform-server/testing': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/platform-server': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/private/testing': {main: 'index.js', defaultExtension: 'js'},\n-    '@angular/elements': {main: 'index.js', defaultExtension: 'js'},\n-    'rxjs/ajax': {main: 'index.js', defaultExtension: 'js'},\n-    'rxjs/operators': {main: 'index.js', defaultExtension: 'js'},\n-    'rxjs/testing': {main: 'index.js', defaultExtension: 'js'},\n-    'rxjs/websocket': {main: 'index.js', defaultExtension: 'js'},\n-    'rxjs': {main: 'index.js', defaultExtension: 'js'},\n-  }\n-});\n-\n-\n-// Load browser-specific CustomElement polyfills, set up the test injector, import all the specs,\n-// execute their `main()` method and kick off Karma (Jasmine).\n-Promise\n-    .resolve()\n-\n-    // Load browser-specific polyfills for custom elements.\n-    .then(function() {\n-      return loadCustomElementsPolyfills();\n-    })\n-\n-    // Load necessary testing packages.\n-    .then(function() {\n-      return Promise.all([\n-        System.import('@angular/core/testing'),\n-        System.import('@angular/platform-browser-dynamic/testing'),\n-        System.import('@angular/platform-browser/animations')\n-      ]);\n-    })\n-\n-    // Set up the test injector.\n-    .then(function(mods) {\n-      var coreTesting = mods[0];\n-      var pbdTesting = mods[1];\n-      var pbAnimations = mods[2];\n-\n-      coreTesting.TestBed.initTestEnvironment(\n-          [pbdTesting.BrowserDynamicTestingModule, pbAnimations.NoopAnimationsModule],\n-          pbdTesting.platformBrowserDynamicTesting());\n-    })\n-\n-    // Import all the specs and execute their `main()` method.\n-    .then(function() {\n-      return Promise.all(Object\n-                             .keys(window.__karma__.files)  // All files served by Karma.\n-                             .filter(onlySpecFiles)\n-                             .map(window.file2moduleName)  // Normalize paths to module names.\n-                             .map(function(path) {\n-                               return System.import(path).then(function(module) {\n-                                 if (module.hasOwnProperty('main')) {\n-                                   throw new Error('main() in specs are no longer supported');\n-                                 }\n-                               });\n-                             }));\n-    })\n-\n-    // Kick off karma (Jasmine).\n-    .then(\n-        function() {\n-          __karma__.start();\n-        },\n-        function(error) {\n-          console.error(error);\n-        });\n-\n-\n-function loadCustomElementsPolyfills() {\n-  // The custom elements polyfill will patch properties and methods on `(HTML)Element` and `Node`\n-  // (among others), including `(HTML)Element#innerHTML` and `Node#removeChild()`:\n-  // https://github.com/webcomponents/custom-elements/blob/4f7072c0dbda4beb505d16967acfffd33337b325/src/Patch/Element.js#L28-L73\n-  // https://github.com/webcomponents/custom-elements/blob/4f7072c0dbda4beb505d16967acfffd33337b325/src/Patch/Node.js#L105-L120\n-  // The patched `innerHTML` setter and `removeChild()` method will try to traverse the DOM (via\n-  // `nextSibling` and `parentNode` respectively), which leads to infinite loops when testing\n-  // `HtmlSanitizer` with cloberred elements on browsers that do not support the `<template>`\n-  // element:\n-  // https://github.com/angular/angular/blob/213baa37b0b71e72d00ad7b606ebfc2ade06b934/packages/platform-browser/src/security/html_sanitizer.ts#L29-L38\n-  // To avoid that, we \"unpatch\" these properties/methods and apply the patch only for the relevant\n-  // `@angular/elements` tests.\n-  var patchConfig = {'innerHTML': ['Element', 'HTMLElement'], 'removeChild': ['Node']};\n-  var patchTargets = {};\n-  var originalDescriptors = {};\n-  if (!window.customElements) {\n-    Object.keys(patchConfig).forEach(function(prop) {\n-      patchConfig[prop]\n-          .map(function(name) {\n-            return window[name].prototype;\n-          })\n-          .some(function(candidatePatchTarget) {\n-            var candidateOriginalDescriptor =\n-                Object.getOwnPropertyDescriptor(candidatePatchTarget, prop);\n-\n-            if (candidateOriginalDescriptor) {\n-              patchTargets[prop] = candidatePatchTarget;\n-              originalDescriptors[prop] = candidateOriginalDescriptor;\n-              return true;\n-            }\n-          });\n-    });\n-  }\n-\n-  var polyfillPath = !window.customElements ?\n-      // Load custom elements polyfill.\n-      'node_modules/@webcomponents/custom-elements/custom-elements.min.js' :\n-      // Allow ES5 functions as custom element constructors.\n-      'node_modules/@webcomponents/custom-elements/src/native-shim.js';\n-\n-  return System.import(polyfillPath).then(function() {\n-    // `packages/compiler/test/schema/schema_extractor.ts` relies on\n-    // `HTMLElement.name`, but custom element polyfills will replace\n-    // `HTMLElement` with an anonymous function.\n-    Object.defineProperty(HTMLElement, 'name', {value: 'HTMLElement'});\n-\n-    // Create helper functions on `window` for patching/restoring\n-    // properties/methods.\n-    Object.keys(patchConfig).forEach(function(prop) {\n-      var patchMethod = '$$patch_' + prop;\n-      var restoreMethod = '$$restore_' + prop;\n-\n-      if (!patchTargets[prop]) {\n-        // No patching detected. Create no-op functions.\n-        window[patchMethod] = window[restoreMethod] = function() {};\n-      } else {\n-        var patchTarget = patchTargets[prop];\n-        var originalDescriptor = originalDescriptors[prop];\n-        var patchedDescriptor = Object.getOwnPropertyDescriptor(patchTarget, prop);\n-\n-        window[patchMethod] = function() {\n-          Object.defineProperty(patchTarget, prop, patchedDescriptor);\n-        };\n-        window[restoreMethod] = function() {\n-          Object.defineProperty(patchTarget, prop, originalDescriptor);\n-        };\n-\n-        // Restore `prop`. The patch will be manually applied only during the\n-        // `@angular/elements` tests that need it.\n-        window[restoreMethod]();\n-      }\n-    });\n-  });\n-}\n-\n-function onlySpecFiles(path) {\n-  return /_spec\\.js$/.test(path);\n-}"
        },
        {
            "sha": "e26741c23531349ba8d84a743386c6b666af0ef6",
            "filename": "tools/legacy-saucelabs/build-saucelabs-test-bundle.mjs",
            "status": "added",
            "additions": 267,
            "deletions": 0,
            "changes": 267,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/tools%2Flegacy-saucelabs%2Fbuild-saucelabs-test-bundle.mjs",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/tools%2Flegacy-saucelabs%2Fbuild-saucelabs-test-bundle.mjs",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Flegacy-saucelabs%2Fbuild-saucelabs-test-bundle.mjs?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -0,0 +1,267 @@\n+#!/usr/bin/env node\n+\n+import multimatch from 'multimatch';\n+import esbuild from 'esbuild';\n+import fs from 'fs';\n+import glob from 'glob';\n+import {dirname, join, isAbsolute, relative} from 'path';\n+import url from 'url';\n+import ts from 'typescript';\n+\n+const containingDir = dirname(url.fileURLToPath(import.meta.url));\n+const projectDir = join(containingDir, '../../');\n+\n+const distDir = join(projectDir, 'dist/');\n+const packagesDir = join(projectDir, 'packages/');\n+\n+const legacyTsconfigPath = join(packagesDir, 'tsconfig-legacy-saucelabs.json');\n+const legacyOutputDir = join(distDir, 'legacy-test-out');\n+\n+const outFile = join(distDir, 'legacy-test-bundle.spec.js');\n+const decoratorDownlevelOutFile = join(distDir, 'legacy-decorator-downlevel-bundle.mjs');\n+\n+/**\n+ * This script builds the whole library in `angular/angular` together with its\n+ * spec files into a single IIFE bundle.\n+ *\n+ * The bundle can then be used in the legacy Saucelabs or Browserstack tests. Bundling\n+ * helps with avoiding unnecessary complexity with maintaining module resolution at\n+ * runtime through e.g. SystemJS, and it increases test stability by serving significantly\n+ * less files through the remote browser service tunnels.\n+ */\n+async function main() {\n+  await transpileDecoratorDownlevelTransform();\n+  await compileProjectWithTsc();\n+\n+  const specEntryPointFile = await createEntryPointSpecFile();\n+  const esbuildResolvePlugin = await createResolveEsbuildPlugin();\n+\n+  const result = await esbuild.build({\n+    bundle: true,\n+    keepNames: true,\n+    treeShaking: false,\n+    sourceRoot: projectDir,\n+    platform: 'browser',\n+    target: 'es2015',\n+    format: 'iife',\n+    outfile: outFile,\n+    sourcemap: true,\n+    plugins: [esbuildResolvePlugin],\n+    stdin: {contents: specEntryPointFile, resolveDir: projectDir},\n+  });\n+\n+  if (result.errors.length) {\n+    throw Error('Could not build legacy test bundle. See errors above.');\n+  }\n+}\n+\n+/**\n+ * Finds spec files that should be built, bundled and tested as\n+ * part of the legacy Saucelabs test job.\n+ */\n+async function findSpecFiles() {\n+  const baseTestFiles = glob.sync('**/*_spec.js', {absolute: true, cwd: legacyOutputDir});\n+\n+  return multimatch(\n+    baseTestFiles,\n+    [\n+      '**/*',\n+      `!${legacyOutputDir}/_testing_init/**`,\n+      `!${legacyOutputDir}/**/e2e_test/**`,\n+      `!${legacyOutputDir}/**/*node_only_spec.js`,\n+      `!${legacyOutputDir}/benchpress/**`,\n+      `!${legacyOutputDir}/compiler-cli/**`,\n+      `!${legacyOutputDir}/compiler-cli/src/ngtsc/**`,\n+      `!${legacyOutputDir}/compiler-cli/test/compliance/**`,\n+      `!${legacyOutputDir}/compiler-cli/test/ngtsc/**`,\n+      `!${legacyOutputDir}/compiler/test/aot/**`,\n+      `!${legacyOutputDir}/compiler/test/render3/**`,\n+      `!${legacyOutputDir}/core/test/bundling/**`,\n+      `!${legacyOutputDir}/core/schematics/test/**`,\n+      `!${legacyOutputDir}/core/test/render3/ivy/**`,\n+      `!${legacyOutputDir}/core/test/render3/jit/**`,\n+      `!${legacyOutputDir}/core/test/render3/perf/**`,\n+      `!${legacyOutputDir}/elements/schematics/**`,\n+      `!${legacyOutputDir}/examples/**/e2e_test/*`,\n+      `!${legacyOutputDir}/language-service/**`,\n+      `!${legacyOutputDir}/localize/**/test/**`,\n+      `!${legacyOutputDir}/localize/schematics/**`,\n+      `!${legacyOutputDir}/router/**/test/**`,\n+      `!${legacyOutputDir}/zone.js/**/test/**`,\n+      `!${legacyOutputDir}/platform-browser/testing/e2e_util.js`,\n+\n+    ]\n+  );\n+}\n+\n+/**\n+ * Queries for all spec files in the built output and creates a single\n+ * ESM entry-point file which imports all the spec files.\n+ *\n+ * This spec file can then be used as entry-point for ESBuild in order\n+ * to bundle all specs in an IIFE file.\n+ */\n+async function createEntryPointSpecFile() {\n+  const testFiles = await findSpecFiles();\n+\n+  let specEntryPointFile = `import './tools/testing/init_browser_spec.ts';`;\n+  let i = 0;\n+  const testNamespaces = [];\n+\n+  for (const file of testFiles) {\n+    const relativePath = relative(projectDir, file);\n+    const specifier = `./${relativePath.replace(/\\\\/g, '/')}`;\n+    const testNamespace = `__${i++}`;\n+\n+    testNamespaces.push(testNamespace);\n+    specEntryPointFile += `import * as ${testNamespace} from '${specifier}';\\n`;\n+  }\n+\n+  for (const namespaceId of testNamespaces) {\n+    // We generate a side-effect invocation that references the test import. This\n+    // is necessary to trick `ESBuild` in preserving the imports. Unfortunately the\n+    // test files would be dead-code eliminated otherwise because the specs are part\n+    // of folders with `package.json` files setting the `\"sideEffects: false\"` field.\n+    specEntryPointFile += `new Function('x', 'return x')(${namespaceId});\\n`;\n+  }\n+\n+  return specEntryPointFile;\n+}\n+\n+/**\n+ * Creates an ESBuild plugin which maps `@angular/<..>` module names to their\n+ * locally-built output (for the packages which are built as part of this repo).\n+ */\n+async function createResolveEsbuildPlugin() {\n+  const resolveMappings = new Map([\n+    [/@angular\\//, `${legacyOutputDir}/`],\n+    [/^angular-in-memory-web-api$/, join(legacyOutputDir, 'misc/angular-in-memory-web-api')],\n+  ]);\n+\n+  return {\n+    name: 'ng-resolve-esbuild', setup: (build) => {\n+      build.onResolve({filter: /(@angular\\/|angular-in-memory-web-api)/}, async (args) => {\n+        const matchedPattern = Array.from(resolveMappings.keys()).find(\n+            pattern => args.path.match(pattern));\n+\n+        if (matchedPattern === undefined) {\n+          return undefined;\n+        }\n+\n+        let resolvedPath = args.path.replace(matchedPattern, resolveMappings.get(matchedPattern));\n+        let stats = await statGraceful(resolvedPath);\n+\n+        // If the resolved path points to a directory, resolve the contained `index.js` file\n+        if (stats && stats.isDirectory()) {\n+          resolvedPath = join(resolvedPath, 'index.js');\n+          stats = await statGraceful(resolvedPath);\n+        }\n+        // If the resolved path does not exist, check with an explicit JS extension.\n+        else if (stats === null) {\n+          resolvedPath += '.js';\n+          stats = await statGraceful(resolvedPath);\n+        }\n+\n+        return stats !== null ? {path: resolvedPath} : undefined;\n+      });\n+    }\n+  }\n+}\n+\n+/**\n+ * Creates an ESM bundle for the downlevel decorator transform. The decorator\n+ * downlevel transform can then be used later when we compile the sources and tests.\n+ *\n+ * Note: This layer of indirection needs to exist since we cannot load TS directly\n+ * from an ES module. Running ESBuild first allows us to also transpile the TS fast.\n+ */\n+async function transpileDecoratorDownlevelTransform() {\n+  const result = await esbuild.build({\n+    bundle: true,\n+    sourceRoot: projectDir,\n+    platform: 'node',\n+    target: 'es2020',\n+    format: 'esm',\n+    outfile: decoratorDownlevelOutFile,\n+    external: ['typescript'],\n+    sourcemap: true,\n+    entryPoints: [join(containingDir, 'downlevel_decorator_transform.ts')],\n+  });\n+\n+  if (result.errors.length) {\n+    throw Error('Could not build decorator downlevel bundle. See errors above.');\n+  }\n+}\n+\n+/**\n+ * Compiles the project using the TypeScript compiler in order to produce\n+ * JS output of the packages and tests.\n+ */\n+ async function compileProjectWithTsc() {\n+  const {legacyCompilationDownlevelDecoratorTransform} = await import(\n+      url.pathToFileURL(decoratorDownlevelOutFile));\n+  const config = parseTsconfigFile(legacyTsconfigPath, dirname(legacyTsconfigPath));\n+  const program = ts.createProgram(config.fileNames, config.options);\n+\n+  const result = program.emit(undefined, undefined, undefined, undefined, {\n+    // We need to downlevel constructor parameters to make ES2015 JIT work. More details\n+    // here: https://github.com/angular/angular/pull/37382.\n+    before: [legacyCompilationDownlevelDecoratorTransform(program)],\n+  });\n+\n+  const diagnostics = [\n+    ...result.diagnostics,\n+    ...program.getSyntacticDiagnostics(),\n+    ...program.getSemanticDiagnostics()\n+  ];\n+\n+  if (diagnostics.length) {\n+    console.error(ts.formatDiagnosticsWithColorAndContext(diagnostics, {\n+      getCanonicalFileName: fileName => fileName,\n+      getCurrentDirectory: () => program.getCurrentDirectory(),\n+      getNewLine: () => '\\n',\n+    }));\n+\n+    throw new Error('Compilation failed. See errors above.');\n+  }\n+\n+  console.info('Built packages and specs using TypeScript.');\n+  console.info('The constructor parameters have been downleveled.');\n+}\n+\n+function parseTsconfigFile(tsconfigPath, basePath) {\n+  const {config} = ts.readConfigFile(tsconfigPath, ts.sys.readFile);\n+  const parseConfigHost = {\n+    useCaseSensitiveFileNames: ts.sys.useCaseSensitiveFileNames,\n+    fileExists: ts.sys.fileExists,\n+    readDirectory: ts.sys.readDirectory,\n+    readFile: ts.sys.readFile,\n+  };\n+\n+  // Throw if incorrect arguments are passed to this function. Passing relative base paths\n+  // results in root directories not being resolved and in later type checking runtime errors.\n+  // More details can be found here: https://github.com/microsoft/TypeScript/issues/37731.\n+  if (!isAbsolute(basePath)) {\n+    throw Error('Unexpected relative base path has been specified.');\n+  }\n+\n+  return ts.parseJsonConfigFileContent(config, parseConfigHost, basePath, {});\n+}\n+\n+\n+/**\n+ * Retrieves the `fs.Stats` results for the given path gracefully.\n+ * If the file does not exist, returns `null`.\n+ */\n+async function statGraceful(path) {\n+  try {\n+    return await fs.promises.stat(path);\n+  } catch {\n+    return null;\n+  }\n+}\n+\n+main().catch(e => {\n+  console.error(e);\n+  process.exitCode = 1;\n+});"
        },
        {
            "sha": "e675dff608bf1c7111515e338de9e3e49450af68",
            "filename": "tools/legacy-saucelabs/downlevel_decorator_transform.ts",
            "status": "added",
            "additions": 27,
            "deletions": 0,
            "changes": 27,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/tools%2Flegacy-saucelabs%2Fdownlevel_decorator_transform.ts",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/tools%2Flegacy-saucelabs%2Fdownlevel_decorator_transform.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Flegacy-saucelabs%2Fdownlevel_decorator_transform.ts?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -0,0 +1,27 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+import ts from 'typescript';\n+\n+import {TypeScriptReflectionHost} from '../../packages/compiler-cli/src/ngtsc/reflection/src/typescript';\n+import {getDownlevelDecoratorsTransform} from '../../packages/compiler-cli/src/transformers/downlevel_decorators_transform/index';\n+\n+/**\n+ * Transform for downleveling Angular decorators and Angular-decorated class\n+ * constructor parameters for dependency injection.\n+ * See https://github.com/angular/angular-cli/pull/14473 for more details.\n+ */\n+export function legacyCompilationDownlevelDecoratorTransform(program: ts.Program):\n+    ts.TransformerFactory<ts.SourceFile> {\n+  const typeChecker = program.getTypeChecker();\n+  const reflectionHost = new TypeScriptReflectionHost(typeChecker);\n+  // Note: `isCore` is set to `true` since we also process the core package.\n+  return getDownlevelDecoratorsTransform(\n+      typeChecker, reflectionHost, [], /* isCore */ true,\n+      /* enableClosureCompiler */ false, /* skipClassDecorators */ true);\n+}"
        },
        {
            "sha": "0cb5809262fa9798faaa3196d9d0a249f09b961a",
            "filename": "tools/legacy-saucelabs/tsconfig.json",
            "status": "added",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/tools%2Flegacy-saucelabs%2Ftsconfig.json",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/tools%2Flegacy-saucelabs%2Ftsconfig.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Flegacy-saucelabs%2Ftsconfig.json?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -0,0 +1,10 @@\n+{\n+    \"compilerOptions\": {\n+        \"target\": \"ES2020\",\n+        \"module\": \"ES2020\",\n+        \"baseUrl\": \".\",\n+        \"esModuleInterop\": true,\n+        \"moduleResolution\": \"Node\",\n+        \"rootDirs\": [\"./\", \"../../\"]\n+    }\n+}"
        },
        {
            "sha": "a60bf2a93b02c314ba4219ad0480b9a96d667e7f",
            "filename": "yarn.lock",
            "status": "modified",
            "additions": 9,
            "deletions": 111,
            "changes": 120,
            "blob_url": "https://github.com/angular/angular/blob/b23ce150d004d591ca9334ec9e6fa943a471059e/yarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/b23ce150d004d591ca9334ec9e6fa943a471059e/yarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/yarn.lock?ref=b23ce150d004d591ca9334ec9e6fa943a471059e",
            "patch": "@@ -2603,11 +2603,6 @@ abbrev@1:\n   resolved \"https://registry.yarnpkg.com/abbrev/-/abbrev-1.1.1.tgz#f8f2c887ad10bf67f634f005b6987fed3179aac8\"\n   integrity sha512-nne9/IiQ/hzIhY6pdDnbBtz7DjPTKrY00P/zvPSm5pOFkl6xuGrGnXn/VtTNNfNtAfZ9/1RtehkszU9qcTii0Q==\n \n-abbrev@1.0.x:\n-  version \"1.0.9\"\n-  resolved \"https://registry.yarnpkg.com/abbrev/-/abbrev-1.0.9.tgz#91b4792588a7738c25f35dd6f63752a2f8776135\"\n-  integrity sha1-kbR5JYinc4wl813W9jdSovh3YTU=\n-\n abort-controller@^3.0.0:\n   version \"3.0.0\"\n   resolved \"https://registry.yarnpkg.com/abort-controller/-/abort-controller-3.0.0.tgz#eaf54d53b62bae4138e809ca225c8439a6efb392\"\n@@ -2727,11 +2722,6 @@ ajv@^8.0.0:\n     require-from-string \"^2.0.2\"\n     uri-js \"^4.2.2\"\n \n-amdefine@>=0.0.4:\n-  version \"1.0.1\"\n-  resolved \"https://registry.yarnpkg.com/amdefine/-/amdefine-1.0.1.tgz#4a5282ac164729e93619bcfd3ad151f817ce91f5\"\n-  integrity sha1-SlKCrBZHKek2Gbz9OtFR+BfOkfU=\n-\n \"angular-1.5@npm:angular@1.5\":\n   version \"1.5.11\"\n   resolved \"https://registry.yarnpkg.com/angular/-/angular-1.5.11.tgz#8c5ba7386f15965c9acf3429f6881553aada30d6\"\n@@ -3173,7 +3163,7 @@ async@0.9.x:\n   resolved \"https://registry.yarnpkg.com/async/-/async-0.9.2.tgz#aea74d5e61c1f899613bf64bda66d4c78f2fd17d\"\n   integrity sha1-rqdNXmHB+JlhO/ZL2mbUx48v0X0=\n \n-async@1.x, async@^1.3.0, async@^1.5.2:\n+async@^1.3.0, async@^1.5.2:\n   version \"1.5.2\"\n   resolved \"https://registry.yarnpkg.com/async/-/async-1.5.2.tgz#ec6a61ae56480c0c3cb241c95618e20892f9672a\"\n   integrity sha1-7GphrlZIDAw8skHJVhjiCJL5Zyo=\n@@ -5893,18 +5883,6 @@ escape-string-regexp@^4.0.0:\n   resolved \"https://registry.yarnpkg.com/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz#14ba83a5d373e3d311e5afca29cf5bfad965bf34\"\n   integrity sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==\n \n-escodegen@1.8.x:\n-  version \"1.8.1\"\n-  resolved \"https://registry.yarnpkg.com/escodegen/-/escodegen-1.8.1.tgz#5a5b53af4693110bebb0867aa3430dd3b70a1018\"\n-  integrity sha1-WltTr0aTEQvrsIZ6o0MN07cKEBg=\n-  dependencies:\n-    esprima \"^2.7.1\"\n-    estraverse \"^1.9.1\"\n-    esutils \"^2.0.2\"\n-    optionator \"^0.8.1\"\n-  optionalDependencies:\n-    source-map \"~0.2.0\"\n-\n escodegen@^1.8.1:\n   version \"1.14.3\"\n   resolved \"https://registry.yarnpkg.com/escodegen/-/escodegen-1.14.3.tgz#4e7b81fba61581dc97582ed78cab7f0e8d63f503\"\n@@ -5942,11 +5920,6 @@ eslint-visitor-keys@^2.0.0:\n   resolved \"https://registry.yarnpkg.com/eslint-visitor-keys/-/eslint-visitor-keys-2.1.0.tgz#f65328259305927392c938ed44eb0a5c9b2bd303\"\n   integrity sha512-0rSmRBzXgDzIsD6mGdJgevzgezI534Cer5L/vyMX0kHzT/jiB43jRhd9YUlMGYLQy2zprNmoT8qasCGtY+QaKw==\n \n-esprima@2.7.x, esprima@^2.7.1:\n-  version \"2.7.3\"\n-  resolved \"https://registry.yarnpkg.com/esprima/-/esprima-2.7.3.tgz#96e3b70d5779f6ad49cd032673d1c312767ba581\"\n-  integrity sha1-luO3DVd59q1JzQMmc9HDEnZ7pYE=\n-\n esprima@4.0.1, esprima@^4.0.0, esprima@^4.0.1, esprima@~4.0.0:\n   version \"4.0.1\"\n   resolved \"https://registry.yarnpkg.com/esprima/-/esprima-4.0.1.tgz#13b04cdb3e6c5d19df91ab6987a8695619b0aa71\"\n@@ -5959,11 +5932,6 @@ esrecurse@^4.3.0:\n   dependencies:\n     estraverse \"^5.2.0\"\n \n-estraverse@^1.9.1:\n-  version \"1.9.3\"\n-  resolved \"https://registry.yarnpkg.com/estraverse/-/estraverse-1.9.3.tgz#af67f2dc922582415950926091a4005d29c9bb44\"\n-  integrity sha1-r2fy3JIlgkFZUJJgkaQAXSnJu0Q=\n-\n estraverse@^4.1.1, estraverse@^4.2.0:\n   version \"4.3.0\"\n   resolved \"https://registry.yarnpkg.com/estraverse/-/estraverse-4.3.0.tgz#398ad3f3c5a24948be7725e83d11a7de28cdbd1d\"\n@@ -7119,17 +7087,6 @@ glob@7.2.0, glob@^7.0.0, glob@^7.0.3, glob@^7.0.6, glob@^7.1.1, glob@^7.1.2, glo\n     once \"^1.3.0\"\n     path-is-absolute \"^1.0.0\"\n \n-glob@^5.0.15:\n-  version \"5.0.15\"\n-  resolved \"https://registry.yarnpkg.com/glob/-/glob-5.0.15.tgz#1bc936b9e02f4a603fcc222ecf7633d30b8b93b1\"\n-  integrity sha1-G8k2ueAvSmA/zCIuz3Yz0wuLk7E=\n-  dependencies:\n-    inflight \"^1.0.4\"\n-    inherits \"2\"\n-    minimatch \"2 || 3\"\n-    once \"^1.3.0\"\n-    path-is-absolute \"^1.0.0\"\n-\n global-agent@^2.1.12:\n   version \"2.2.0\"\n   resolved \"https://registry.yarnpkg.com/global-agent/-/global-agent-2.2.0.tgz#566331b0646e6bf79429a16877685c4a1fbf76dc\"\n@@ -7470,7 +7427,7 @@ handle-thing@^2.0.0:\n   resolved \"https://registry.yarnpkg.com/handle-thing/-/handle-thing-2.0.1.tgz#857f79ce359580c340d43081cc648970d0bb234e\"\n   integrity sha512-9Qn4yBxelxoh2Ow62nP+Ka/kMnOXRi8BXnRaUwezLNhqelnN49xKz4F/dPP8OYLxLxq6JDtZb2i9XznUQbNPTg==\n \n-handlebars@^4.0.1, handlebars@^4.7.6:\n+handlebars@^4.7.6:\n   version \"4.7.7\"\n   resolved \"https://registry.yarnpkg.com/handlebars/-/handlebars-4.7.7.tgz#9ce33416aad02dbd6c8fafa8240d5d98004945a1\"\n   integrity sha512-aAcXm5OAfE/8IXkcZvCepKU3VzW1/39Fb5ZuqMtgI/hT8X2YgoMvBY5dLhq/cpOvw7Lk1nK/UF71aLG/ZnVYRA==\n@@ -7507,11 +7464,6 @@ has-ansi@^2.0.0:\n   dependencies:\n     ansi-regex \"^2.0.0\"\n \n-has-flag@^1.0.0:\n-  version \"1.0.0\"\n-  resolved \"https://registry.yarnpkg.com/has-flag/-/has-flag-1.0.0.tgz#9d9e793165ce017a00f00418c43f942a7b1d11fa\"\n-  integrity sha1-nZ55MWXOAXoA8AQYxD+UKnsdEfo=\n-\n has-flag@^2.0.0:\n   version \"2.0.0\"\n   resolved \"https://registry.yarnpkg.com/has-flag/-/has-flag-2.0.0.tgz#e8207af1cc7b30d446cc70b734b5e8be18f88d51\"\n@@ -8573,26 +8525,6 @@ istanbul-reports@^3.0.2:\n     html-escaper \"^2.0.0\"\n     istanbul-lib-report \"^3.0.0\"\n \n-istanbul@^0.4.5:\n-  version \"0.4.5\"\n-  resolved \"https://registry.yarnpkg.com/istanbul/-/istanbul-0.4.5.tgz#65c7d73d4c4da84d4f3ac310b918fb0b8033733b\"\n-  integrity sha1-ZcfXPUxNqE1POsMQuRj7C4Azczs=\n-  dependencies:\n-    abbrev \"1.0.x\"\n-    async \"1.x\"\n-    escodegen \"1.8.x\"\n-    esprima \"2.7.x\"\n-    glob \"^5.0.15\"\n-    handlebars \"^4.0.1\"\n-    js-yaml \"3.x\"\n-    mkdirp \"0.5.x\"\n-    nopt \"3.x\"\n-    once \"1.x\"\n-    resolve \"1.1.x\"\n-    supports-color \"^3.1.0\"\n-    which \"^1.1.1\"\n-    wordwrap \"^1.0.0\"\n-\n isurl@^1.0.0-alpha5:\n   version \"1.0.0\"\n   resolved \"https://registry.yarnpkg.com/isurl/-/isurl-1.0.0.tgz#b27f4f49f3cdaa3ea44a0a5b7f3462e6edc39d67\"\n@@ -8703,7 +8635,7 @@ js-levenshtein@^1.1.6:\n   resolved \"https://registry.yarnpkg.com/js-tokens/-/js-tokens-4.0.0.tgz#19203fb59991df98e3a287050d4647cdeaf32499\"\n   integrity sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==\n \n-js-yaml@3.x, js-yaml@^3.13.1:\n+js-yaml@^3.13.1:\n   version \"3.14.1\"\n   resolved \"https://registry.yarnpkg.com/js-yaml/-/js-yaml-3.14.1.tgz#dae812fdb3825fa306609a8717383c50c36a0537\"\n   integrity sha512-okMH7OXXJ7YrN9Ok3/SXrnu4iX9yOk+25nqX4imS2npuvTYDmo/QEZoqwZkYaIDk3jVvBOTOIEgEhaLOynBS9g==\n@@ -8936,14 +8868,6 @@ karma-jasmine@^4.0.1:\n   dependencies:\n     jasmine-core \"^3.6.0\"\n \n-karma-parallel@^0.3.1:\n-  version \"0.3.1\"\n-  resolved \"https://registry.yarnpkg.com/karma-parallel/-/karma-parallel-0.3.1.tgz#781876e5992b2781619e762f3e04dcbf85f47fa1\"\n-  integrity sha512-64jxNYamYi/9Y67h4+FfViSYhwDgod3rLuq+ZdZ0c3XeZFp/3q3v3HVkd8b5Czp3hCB+LLF8DIv4zlR4xFqbRw==\n-  dependencies:\n-    istanbul \"^0.4.5\"\n-    lodash \"^4.17.11\"\n-\n karma-requirejs@^1.1.0:\n   version \"1.1.0\"\n   resolved \"https://registry.yarnpkg.com/karma-requirejs/-/karma-requirejs-1.1.0.tgz#fddae2cb87d7ebc16fb0222893564d7fee578798\"\n@@ -9858,7 +9782,7 @@ minimalistic-assert@^1.0.0, minimalistic-assert@^1.0.1:\n   resolved \"https://registry.yarnpkg.com/minimalistic-assert/-/minimalistic-assert-1.0.1.tgz#2e194de044626d4a10e7f7fbc00ce73e83e4d5c7\"\n   integrity sha512-UtJcAD4yEaGtjPezWuO9wC4nwUnVH/8/Im3yEHQP4b67cXlD/Qr9hdITCU1xDbSEXg2XKNaP8jsReV7vQd00/A==\n \n-\"minimatch@2 || 3\", minimatch@3.0.4, minimatch@^3.0.3, minimatch@^3.0.4:\n+minimatch@3.0.4, minimatch@^3.0.3, minimatch@^3.0.4:\n   version \"3.0.4\"\n   resolved \"https://registry.yarnpkg.com/minimatch/-/minimatch-3.0.4.tgz#5166e286457f03306064be5497e8dbb0c3d32083\"\n   integrity sha512-yJHVQEhyqPLUTgt9B83PXu6W3rx4MvvHvSUvToogpwoGDOUQ+yDrR0HRot+yOCdCO7u4hX3pWft6kWBBcqh0UA==\n@@ -9969,7 +9893,7 @@ mkdirp-classic@^0.5.2:\n   resolved \"https://registry.yarnpkg.com/mkdirp-classic/-/mkdirp-classic-0.5.3.tgz#fa10c9115cc6d8865be221ba47ee9bed78601113\"\n   integrity sha512-gKLcREMhtuZRwRAfqP3RFW+TK4JqApVBtOIftVgjuABpAtpxhPGaDcfvbhNvD0B8iD1oUr/txX35NjcaY6Ns/A==\n \n-mkdirp@0.5.x, \"mkdirp@>=0.5 0\", mkdirp@^0.5.1, mkdirp@^0.5.3, mkdirp@^0.5.5:\n+\"mkdirp@>=0.5 0\", mkdirp@^0.5.1, mkdirp@^0.5.3, mkdirp@^0.5.5:\n   version \"0.5.5\"\n   resolved \"https://registry.yarnpkg.com/mkdirp/-/mkdirp-0.5.5.tgz#d91cefd62d1436ca0f41620e251288d420099def\"\n   integrity sha512-NKmAlESf6jMGym1++R0Ra7wvhV+wFW63FaSOFPwRahvea0gMUcGUhVeAg/0BC0wiv9ih5NYPB1Wn1UEI1/L+xQ==\n@@ -10049,7 +9973,7 @@ multicast-dns@^6.0.1:\n     dns-packet \"^1.3.1\"\n     thunky \"^1.0.2\"\n \n-multimatch@*:\n+multimatch@*, multimatch@^6.0.0:\n   version \"6.0.0\"\n   resolved \"https://registry.yarnpkg.com/multimatch/-/multimatch-6.0.0.tgz#c72a9bddbc94baa4727efd613b5d22a1fe4d6ee3\"\n   integrity sha512-I7tSVxHGPlmPN/enE3mS1aOSo6bWBfls+3HmuEeCUBCE7gWnm3cBXCBkpurzFjVRwC6Kld8lLaZ1Iv5vOcjvcQ==\n@@ -10254,13 +10178,6 @@ nodejs-websocket@^1.7.2:\n   resolved \"https://registry.yarnpkg.com/nodejs-websocket/-/nodejs-websocket-1.7.2.tgz#94abd1e248f57d4d1c663dec3831015c6dad98a6\"\n   integrity sha512-PFX6ypJcCNDs7obRellR0DGTebfUhw1SXGKe2zpB+Ng1DQJhdzbzx1ob+AvJCLzy2TJF4r8cCDqMQqei1CZdPQ==\n \n-nopt@3.x:\n-  version \"3.0.6\"\n-  resolved \"https://registry.yarnpkg.com/nopt/-/nopt-3.0.6.tgz#c6465dbf08abcd4db359317f79ac68a646b28ff9\"\n-  integrity sha1-xkZdvwirzU2zWTF/eaxopkayj/k=\n-  dependencies:\n-    abbrev \"1\"\n-\n nopt@^5.0.0:\n   version \"5.0.0\"\n   resolved \"https://registry.yarnpkg.com/nopt/-/nopt-5.0.0.tgz#530942bb58a512fccafe53fe210f13a25355dc88\"\n@@ -10549,7 +10466,7 @@ on-headers@^1.0.0, on-headers@~1.0.2:\n   resolved \"https://registry.yarnpkg.com/on-headers/-/on-headers-1.0.2.tgz#772b0ae6aaa525c399e489adfad90c403eb3c28f\"\n   integrity sha512-pZAE+FJLoyITytdqK0U5s+FIpjN0JP3OzFi/u8Rx+EV5/W+JTWGXG8xFzevE7AjBfDqHv/8vL8qQsIhHnqRkrA==\n \n-once@1.x, once@^1.3.0, once@^1.3.1, once@^1.3.2, once@^1.4.0:\n+once@^1.3.0, once@^1.3.1, once@^1.3.2, once@^1.4.0:\n   version \"1.4.0\"\n   resolved \"https://registry.yarnpkg.com/once/-/once-1.4.0.tgz#583b1aa775961d4b113ac17d9c50baef9dd76bd1\"\n   integrity sha1-WDsap3WWHUsROsF9nFC6753Xa9E=\n@@ -12362,11 +12279,6 @@ resolve-url@^0.2.1:\n   resolved \"https://registry.yarnpkg.com/resolve-url/-/resolve-url-0.2.1.tgz#2c637fe77c893afd2a663fe21aa9080068e2052a\"\n   integrity sha1-LGN/53yJOv0qZj/iGqkIAGjiBSo=\n \n-resolve@1.1.x:\n-  version \"1.1.7\"\n-  resolved \"https://registry.yarnpkg.com/resolve/-/resolve-1.1.7.tgz#203114d82ad2c5ed9e8e0411b3932875e889e97b\"\n-  integrity sha1-IDEU2CrSxe2ejgQRs5ModeiJ6Xs=\n-\n resolve@1.20.0, resolve@^1.1.6, resolve@^1.1.7, resolve@^1.10.0, resolve@^1.14.2, resolve@^1.17.0, resolve@^1.19.0, resolve@^1.3.2, resolve@^1.4.0:\n   version \"1.20.0\"\n   resolved \"https://registry.yarnpkg.com/resolve/-/resolve-1.20.0.tgz#629a013fb3f70755d6f0b7935cc1c2c5378b1975\"\n@@ -12644,7 +12556,7 @@ sass@1.43.4:\n \n \"sauce-connect@https://saucelabs.com/downloads/sc-4.7.1-linux.tar.gz\":\n   version \"0.0.0\"\n-  resolved \"https://saucelabs.com/downloads/sc-4.7.1-linux.tar.gz#e5d7f82ad98251a653d1b0537f1103e49eda5e11\"\n+  resolved \"https://saucelabs.com/downloads/sc-4.6.2-linux.tar.gz#7b7f35433af9c3380758e048894d7b9aecf3754e\"\n \n saucelabs@4.7.8, saucelabs@^1.5.0, saucelabs@^4.6.3:\n   version \"4.7.8\"\n@@ -13201,13 +13113,6 @@ source-map@^0.5.0, source-map@^0.5.1, source-map@^0.5.6:\n   resolved \"https://registry.yarnpkg.com/source-map/-/source-map-0.5.7.tgz#8a039d2d1021d22d1ea14c80d8ea468ba2ef3fcc\"\n   integrity sha1-igOdLRAh0i0eoUyA2OpGi6LvP8w=\n \n-source-map@~0.2.0:\n-  version \"0.2.0\"\n-  resolved \"https://registry.yarnpkg.com/source-map/-/source-map-0.2.0.tgz#dab73fbcfc2ba819b4de03bd6f6eaa48164b3f9d\"\n-  integrity sha1-2rc/vPwrqBm03gO9b26qSBZLP50=\n-  dependencies:\n-    amdefine \">=0.0.4\"\n-\n sourcemap-codec@1.4.8, sourcemap-codec@^1.4.4, sourcemap-codec@^1.4.8:\n   version \"1.4.8\"\n   resolved \"https://registry.yarnpkg.com/sourcemap-codec/-/sourcemap-codec-1.4.8.tgz#ea804bd94857402e6992d05a38ef1ae35a9ab4c4\"\n@@ -13584,13 +13489,6 @@ supports-color@^2.0.0:\n   resolved \"https://registry.yarnpkg.com/supports-color/-/supports-color-2.0.0.tgz#535d045ce6b6363fa40117084629995e9df324c7\"\n   integrity sha1-U10EXOa2Nj+kARcIRimZXp3zJMc=\n \n-supports-color@^3.1.0:\n-  version \"3.2.3\"\n-  resolved \"https://registry.yarnpkg.com/supports-color/-/supports-color-3.2.3.tgz#65ac0504b3954171d8a64946b2ae3cbb8a5f54f6\"\n-  integrity sha1-ZawFBLOVQXHYpklGsq48u4pfVPY=\n-  dependencies:\n-    has-flag \"^1.0.0\"\n-\n supports-color@^5.0.0, supports-color@^5.3.0:\n   version \"5.5.0\"\n   resolved \"https://registry.yarnpkg.com/supports-color/-/supports-color-5.5.0.tgz#e2e69a44ac8772f78a1ec0b35b689df6530efc8f\"\n@@ -14900,7 +14798,7 @@ which-module@^2.0.0:\n   resolved \"https://registry.yarnpkg.com/which-module/-/which-module-2.0.0.tgz#d9ef07dce77b9902b8a3a8fa4b31c3e3f7e6e87a\"\n   integrity sha1-2e8H3Od7mQK4o6j6SzHD4/fm6Ho=\n \n-which@^1.1.1, which@^1.2.1, which@^1.2.14, which@^1.2.9:\n+which@^1.2.1, which@^1.2.14, which@^1.2.9:\n   version \"1.3.1\"\n   resolved \"https://registry.yarnpkg.com/which/-/which-1.3.1.tgz#a45043d54f5805316da8d62f9f50918d3da70b0a\"\n   integrity sha512-HxJdYWq1MTIQbJ3nw0cqssHoTNU267KlrDuGZ1WYlxDStUtKUhOaJmh112/TZmHxxUfuJqPXSOm7tDyas0OSIQ=="
        }
    ],
    "stats": {
        "total": 810,
        "additions": 388,
        "deletions": 422
    }
}