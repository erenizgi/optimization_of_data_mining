{
    "author": "JoostK",
    "message": "refactor(compiler-cli): extract parsing of interpolation config (#39961)\n\nPrior to this change the interpolation config value was cast to\n`[string, string]` without checking whether there really were two\nstring values available. This commit extracts the logic of parsing the\ninterpolation config into a separate function and adds a check that\nthe array contains exactly two strings.\n\nPR Close #39961",
    "sha": "dd8a31838c8e7ac9bd175140b4058cb6f93eec54",
    "files": [
        {
            "sha": "6f5c9fa4b0d60226af3f3754ad2d92c27097b0a7",
            "filename": "packages/compiler-cli/linker/src/file_linker/partial_linkers/partial_component_linker_1.ts",
            "status": "modified",
            "additions": 20,
            "deletions": 5,
            "changes": 25,
            "blob_url": "https://github.com/angular/angular/blob/dd8a31838c8e7ac9bd175140b4058cb6f93eec54/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Ffile_linker%2Fpartial_linkers%2Fpartial_component_linker_1.ts",
            "raw_url": "https://github.com/angular/angular/raw/dd8a31838c8e7ac9bd175140b4058cb6f93eec54/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Ffile_linker%2Fpartial_linkers%2Fpartial_component_linker_1.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Flinker%2Fsrc%2Ffile_linker%2Fpartial_linkers%2Fpartial_component_linker_1.ts?ref=dd8a31838c8e7ac9bd175140b4058cb6f93eec54",
            "patch": "@@ -38,11 +38,7 @@ export class PartialComponentLinkerVersion1<TExpression> implements PartialLinke\n export function toR3ComponentMeta<TExpression>(\n     metaObj: AstObject<R3DeclareComponentMetadata, TExpression>, code: string, sourceUrl: string,\n     options: LinkerOptions): R3ComponentMetadata {\n-  let interpolation = DEFAULT_INTERPOLATION_CONFIG;\n-  if (metaObj.has('interpolation')) {\n-    interpolation = InterpolationConfig.fromArray(\n-        metaObj.getArray('interpolation').map(entry => entry.getString()) as [string, string]);\n-  }\n+  const interpolation = parseInterpolationConfig(metaObj);\n   const templateObj = metaObj.getObject('template');\n   const templateSource = templateObj.getValue('source');\n   const range = getTemplateRange(templateSource, code);\n@@ -130,6 +126,25 @@ export function toR3ComponentMeta<TExpression>(\n   };\n }\n \n+/**\n+ * Extract an `InterpolationConfig` from the component declaration.\n+ */\n+function parseInterpolationConfig<TExpression>(\n+    metaObj: AstObject<R3DeclareComponentMetadata, TExpression>): InterpolationConfig {\n+  if (!metaObj.has('interpolation')) {\n+    return DEFAULT_INTERPOLATION_CONFIG;\n+  }\n+\n+  const interpolationExpr = metaObj.getValue('interpolation');\n+  const values = interpolationExpr.getArray().map(entry => entry.getString());\n+  if (values.length !== 2) {\n+    throw new FatalLinkerError(\n+        interpolationExpr.expression,\n+        'Unsupported interpolation config, expected an array containing exactly two strings');\n+  }\n+  return InterpolationConfig.fromArray(values as [string, string]);\n+}\n+\n /**\n  * Determines the `ViewEncapsulation` mode from the AST value's symbol name.\n  */"
        }
    ],
    "stats": {
        "total": 25,
        "additions": 20,
        "deletions": 5
    }
}