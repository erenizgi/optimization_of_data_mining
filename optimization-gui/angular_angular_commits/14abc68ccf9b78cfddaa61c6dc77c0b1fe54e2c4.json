{
    "author": "IgorMinar",
    "message": "docs(common): rewrite docs for NgForOf#ngForTrackBy (#42329)\n\nClarify the prupose of the tracking function and document how to create a good one.\n\nFixes #40461\n\nPR Close #42329",
    "sha": "14abc68ccf9b78cfddaa61c6dc77c0b1fe54e2c4",
    "files": [
        {
            "sha": "34dc3783cf8ebf74cb96c8ac00ac251feafa53b2",
            "filename": "packages/common/src/directives/ng_for_of.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 12,
            "changes": 25,
            "blob_url": "https://github.com/angular/angular/blob/14abc68ccf9b78cfddaa61c6dc77c0b1fe54e2c4/packages%2Fcommon%2Fsrc%2Fdirectives%2Fng_for_of.ts",
            "raw_url": "https://github.com/angular/angular/raw/14abc68ccf9b78cfddaa61c6dc77c0b1fe54e2c4/packages%2Fcommon%2Fsrc%2Fdirectives%2Fng_for_of.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Fsrc%2Fdirectives%2Fng_for_of.ts?ref=14abc68ccf9b78cfddaa61c6dc77c0b1fe54e2c4",
            "patch": "@@ -141,21 +141,22 @@ export class NgForOf<T, U extends NgIterable<T> = NgIterable<T>> implements DoCh\n     this._ngForOfDirty = true;\n   }\n   /**\n-   * A function that defines how to track changes for items in the iterable.\n+   * Specifies a custom `TrackByFunction` to compute the identity of items in an iterable.\n    *\n-   * When items are added, moved, or removed in the iterable,\n-   * the directive must re-render the appropriate DOM nodes.\n-   * To minimize churn in the DOM, only nodes that have changed\n-   * are re-rendered.\n+   * If a custom `TrackByFunction` is not provided, `NgForOf` will use the item's [object\n+   * identity](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is)\n+   * as the key.\n    *\n-   * By default, the change detector assumes that\n-   * the object instance identifies the node in the iterable.\n-   * When this function is supplied, the directive uses\n-   * the result of calling this function to identify the item node,\n-   * rather than the identity of the object itself.\n+   * `NgForOf` uses the computed key to associate items in an iterable with DOM elements\n+   * it produces for these items.\n    *\n-   * The function receives two inputs,\n-   * the iteration index and the associated node data.\n+   * A custom `TrackByFunction` is useful to provide good user experience in cases when items in an\n+   * iterable rendered using `NgForOf` have a natural identifier (for example, custom ID or a\n+   * primary key), and this iterable could be updated with new object instances that still\n+   * represent the same underlying entity (for example, when data is re-fetched from the server,\n+   * and the iterable is recreated and re-rendered, but most of the data is still the same).\n+   *\n+   * @see `TrackByFunction`\n    */\n   @Input()\n   set ngForTrackBy(fn: TrackByFunction<T>) {"
        },
        {
            "sha": "e05f94cd56eaa760fce4bca5447231c41c61202a",
            "filename": "packages/core/src/change_detection/differs/iterable_differs.ts",
            "status": "modified",
            "additions": 42,
            "deletions": 4,
            "changes": 46,
            "blob_url": "https://github.com/angular/angular/blob/14abc68ccf9b78cfddaa61c6dc77c0b1fe54e2c4/packages%2Fcore%2Fsrc%2Fchange_detection%2Fdiffers%2Fiterable_differs.ts",
            "raw_url": "https://github.com/angular/angular/raw/14abc68ccf9b78cfddaa61c6dc77c0b1fe54e2c4/packages%2Fcore%2Fsrc%2Fchange_detection%2Fdiffers%2Fiterable_differs.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fchange_detection%2Fdiffers%2Fiterable_differs.ts?ref=14abc68ccf9b78cfddaa61c6dc77c0b1fe54e2c4",
            "patch": "@@ -113,14 +113,52 @@ export interface IterableChangeRecord<V> {\n }\n \n /**\n- * An optional function passed into the `NgForOf` directive that defines how to track\n- * changes for items in an iterable.\n- * The function takes the iteration index and item ID.\n- * When supplied, Angular tracks changes by the return value of the function.\n+ * A function optionally passed into the `NgForOf` directive to customize how `NgForOf` uniquely\n+ * identifies items in an iterable.\n  *\n+ * `NgForOf` needs to uniquely identify items in the iterable to correctly perform DOM updates\n+ * when items in the iterable are reordered, new items are added, or existing items are removed.\n+ *\n+ *\n+ * In all of these scenarios it is usually desirable to only update the DOM elements associated\n+ * with the items affected by the change. This behavior is important to:\n+ *\n+ * - preserve any DOM-specific UI state (like cursor position, focus, text selection) when the\n+ *   iterable is modified\n+ * - enable animation of item addition, removal, and iterable reordering\n+ *\n+ * A common use for custom `trackBy` functions is when the model that `NgForOf` iterates over\n+ * contains a property with a unique identifier. For example, given a model:\n+ *\n+ * ```ts\n+ * class User {\n+ *   id: number;\n+ *   name: string;\n+ *   ...\n+ * }\n+ * ```\n+ * a custom `trackBy` function could look like the following:\n+ * ```ts\n+ * function userTrackBy(index, user) {\n+ *   return user.id;\n+ * }\n+ * ```\n+ *\n+ * A custom `trackBy` function must have several properties:\n+ *\n+ * - be [idempotent](https://en.wikipedia.org/wiki/Idempotence) (be without side effects, and always\n+ * return the same value for a given input)\n+ * - return unique value for all unique inputs\n+ * - be fast\n+ *\n+ * @see [`NgForOf#ngForTrackBy`](api/common/NgForOf#ngForTrackBy)\n  * @publicApi\n  */\n export interface TrackByFunction<T> {\n+  /**\n+   * @param index The index of the item within the iterable.\n+   * @param item The item in the iterable.\n+   */\n   (index: number, item: T): any;\n }\n "
        }
    ],
    "stats": {
        "total": 71,
        "additions": 55,
        "deletions": 16
    }
}