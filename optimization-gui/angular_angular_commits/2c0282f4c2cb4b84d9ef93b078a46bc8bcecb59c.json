{
    "author": "petebacondarwin",
    "message": "test(ngcc): use `isNamedFunctionDeclaration()` in UMD tests (#38959)\n\nThis makes these tests more resilient to changes in the test code\nstructure. For example switching from\n\n```\nvar SomeClass = <implementation>;\nexports.SomeClass = SomeClass;\n```\n\nto\n\n```\nexports.SomeClass = <implementation>;\n```\n\nPR Close #38959",
    "sha": "2c0282f4c2cb4b84d9ef93b078a46bc8bcecb59c",
    "files": [
        {
            "sha": "e66053060c3875ab7b364b93b8ce6cdaa29aa5d5",
            "filename": "packages/compiler-cli/ngcc/test/host/umd_host_spec.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 12,
            "changes": 24,
            "blob_url": "https://github.com/angular/angular/blob/2c0282f4c2cb4b84d9ef93b078a46bc8bcecb59c/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Fhost%2Fumd_host_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/2c0282f4c2cb4b84d9ef93b078a46bc8bcecb59c/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Fhost%2Fumd_host_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Fhost%2Fumd_host_spec.ts?ref=2c0282f4c2cb4b84d9ef93b078a46bc8bcecb59c",
            "patch": "@@ -971,7 +971,7 @@ runInEachFileSystem(() => {\n         const bundle = makeTestBundleProgram(SOME_DIRECTIVE_FILE.name);\n         const host = createHost(bundle, new UmdReflectionHost(new MockLogger(), false, bundle));\n         const classNode = getDeclaration(\n-            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedVariableDeclaration);\n+            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedFunctionDeclaration);\n         const decorators = host.getDecoratorsOfDeclaration(classNode)!;\n \n         expect(decorators).toBeDefined();\n@@ -1081,7 +1081,7 @@ runInEachFileSystem(() => {\n         const host = createHost(bundle, new UmdReflectionHost(new MockLogger(), false, bundle));\n \n         const classNode = getDeclaration(\n-            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedVariableDeclaration);\n+            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedFunctionDeclaration);\n         const decorators = host.getDecoratorsOfDeclaration(classNode)!;\n \n         expect(decorators.length).toEqual(1);\n@@ -1159,7 +1159,7 @@ runInEachFileSystem(() => {\n         const bundle = makeTestBundleProgram(SOME_DIRECTIVE_FILE.name);\n         const host = createHost(bundle, new UmdReflectionHost(new MockLogger(), false, bundle));\n         const classNode = getDeclaration(\n-            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedVariableDeclaration);\n+            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedFunctionDeclaration);\n         const members = host.getMembersOfClass(classNode);\n \n         const input1 = members.find(member => member.name === 'input1')!;\n@@ -1178,7 +1178,7 @@ runInEachFileSystem(() => {\n         const bundle = makeTestBundleProgram(SOME_DIRECTIVE_FILE.name);\n         const host = createHost(bundle, new UmdReflectionHost(new MockLogger(), false, bundle));\n         const classNode = getDeclaration(\n-            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedVariableDeclaration);\n+            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedFunctionDeclaration);\n         const members = host.getMembersOfClass(classNode);\n \n         const instanceProperty = members.find(member => member.name === 'instanceProperty')!;\n@@ -1193,7 +1193,7 @@ runInEachFileSystem(() => {\n         const bundle = makeTestBundleProgram(SOME_DIRECTIVE_FILE.name);\n         const host = createHost(bundle, new UmdReflectionHost(new MockLogger(), false, bundle));\n         const classNode = getDeclaration(\n-            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedVariableDeclaration);\n+            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedFunctionDeclaration);\n         const members = host.getMembersOfClass(classNode);\n \n         const staticMethod = members.find(member => member.name === 'staticMethod')!;\n@@ -1207,7 +1207,7 @@ runInEachFileSystem(() => {\n         const bundle = makeTestBundleProgram(SOME_DIRECTIVE_FILE.name);\n         const host = createHost(bundle, new UmdReflectionHost(new MockLogger(), false, bundle));\n         const classNode = getDeclaration(\n-            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedVariableDeclaration);\n+            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedFunctionDeclaration);\n         const members = host.getMembersOfClass(classNode);\n \n         const staticProperty = members.find(member => member.name === 'staticProperty')!;\n@@ -1304,7 +1304,7 @@ runInEachFileSystem(() => {\n       const host = createHost(bundle, new UmdReflectionHost(new MockLogger(), false, bundle));\n \n       const classNode = getDeclaration(\n-          bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedVariableDeclaration);\n+          bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedFunctionDeclaration);\n       const decorators = host.getDecoratorsOfDeclaration(classNode)!;\n \n       expect(decorators.length).toEqual(1);\n@@ -1425,7 +1425,7 @@ runInEachFileSystem(() => {\n            const bundle = makeTestBundleProgram(_('/main.js'));\n            const host = createHost(bundle, new UmdReflectionHost(new MockLogger(), false, bundle));\n            const classNode = getDeclaration(\n-               bundle.program, _('/main.js'), 'SomeClass', isNamedVariableDeclaration);\n+               bundle.program, _('/main.js'), 'SomeClass', isNamedFunctionDeclaration);\n \n            const parameters = host.getConstructorParameters(classNode)!;\n \n@@ -1439,7 +1439,7 @@ runInEachFileSystem(() => {\n         const bundle = makeTestBundleProgram(SOME_DIRECTIVE_FILE.name);\n         const host = createHost(bundle, new UmdReflectionHost(new MockLogger(), false, bundle));\n         const classNode = getDeclaration(\n-            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedVariableDeclaration);\n+            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedFunctionDeclaration);\n         const parameters = host.getConstructorParameters(classNode);\n \n         expect(parameters).toBeDefined();\n@@ -1604,7 +1604,7 @@ runInEachFileSystem(() => {\n           const host = createHost(bundle, new UmdReflectionHost(new MockLogger(), false, bundle));\n           const classNode = getDeclaration(\n               bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective',\n-              isNamedVariableDeclaration);\n+              isNamedFunctionDeclaration);\n           const mockImportInfo: Import = {from: '@angular/core', name: 'Directive'};\n           const spy = spyOn(UmdReflectionHost.prototype, 'getImportOfIdentifier')\n                           .and.returnValue(mockImportInfo);\n@@ -2033,7 +2033,7 @@ runInEachFileSystem(() => {\n         const bundle = makeTestBundleProgram(SOME_DIRECTIVE_FILE.name);\n         const host = createHost(bundle, new UmdReflectionHost(new MockLogger(), false, bundle));\n         const classNode = getDeclaration(\n-            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedVariableDeclaration);\n+            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedFunctionDeclaration);\n         const ctrDecorators = host.getConstructorParameters(classNode)!;\n         const identifierOfViewContainerRef = (ctrDecorators[0].typeValueReference! as {\n                                                kind: TypeValueReferenceKind.LOCAL,\n@@ -2092,7 +2092,7 @@ runInEachFileSystem(() => {\n         const bundle = makeTestBundleProgram(SOME_DIRECTIVE_FILE.name);\n         const host = createHost(bundle, new UmdReflectionHost(new MockLogger(), false, bundle));\n         const classNode = getDeclaration(\n-            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedVariableDeclaration);\n+            bundle.program, SOME_DIRECTIVE_FILE.name, 'SomeDirective', isNamedFunctionDeclaration);\n         const classDecorators = host.getDecoratorsOfDeclaration(classNode)!;\n         const identifierOfDirective =\n             (((classDecorators[0].node as ts.ObjectLiteralExpression).properties[0] as"
        }
    ],
    "stats": {
        "total": 24,
        "additions": 12,
        "deletions": 12
    }
}