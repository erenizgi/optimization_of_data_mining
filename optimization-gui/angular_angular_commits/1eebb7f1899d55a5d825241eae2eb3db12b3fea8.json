{
    "author": "AndrewKushnir",
    "message": "test(compiler-cli): disable one TypeChecker test on Windows due to path sensitivity issue (#38294)\n\nThis commit disables one TypeChecker test (added as a part of\nhttps://github.com/angular/angular/pull/38105) which make assertions about the filename while\nrunning on Windows.\n\nSuch assertions are currently suffering from a case sensitivity issue.\n\nPR Close #38294",
    "sha": "1eebb7f1899d55a5d825241eae2eb3db12b3fea8",
    "files": [
        {
            "sha": "432a1b8dd0e652b7f2bef411dc648da91d2526dc",
            "filename": "packages/compiler-cli/src/ngtsc/typecheck/test/type_checker_spec.ts",
            "status": "modified",
            "additions": 42,
            "deletions": 36,
            "changes": 78,
            "blob_url": "https://github.com/angular/angular/blob/1eebb7f1899d55a5d825241eae2eb3db12b3fea8/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Ftest%2Ftype_checker_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eebb7f1899d55a5d825241eae2eb3db12b3fea8/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Ftest%2Ftype_checker_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Ftest%2Ftype_checker_spec.ts?ref=1eebb7f1899d55a5d825241eae2eb3db12b3fea8",
            "patch": "@@ -6,14 +6,16 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n+import {platform} from 'os';\n+\n import {ErrorCode, ngErrorCode} from '../../diagnostics';\n import {absoluteFrom, absoluteFromSourceFile, getSourceFileOrError} from '../../file_system';\n import {runInEachFileSystem} from '../../file_system/testing';\n import {OptimizeFor} from '../api';\n \n import {getClass, setup, TestDeclaration} from './test_utils';\n \n-runInEachFileSystem(() => {\n+runInEachFileSystem(os => {\n   describe('TemplateTypeChecker', () => {\n     it('should batch diagnostic operations when requested in WholeProgram mode', () => {\n       const file1 = absoluteFrom('/file1.ts');\n@@ -169,45 +171,49 @@ runInEachFileSystem(() => {\n         expect(diags[0].code).toBe(ngErrorCode(ErrorCode.INLINE_TCB_REQUIRED));\n       });\n \n-      it('should produce errors for components that require type constructor inlining', () => {\n-        const fileName = absoluteFrom('/main.ts');\n-        const dirFile = absoluteFrom('/dir.ts');\n-        const {program, templateTypeChecker} = setup(\n-            [\n-              {\n-                fileName,\n-                source: `export class Cmp {}`,\n-                templates: {'Cmp': '<div dir></div>'},\n-                declarations: [{\n-                  name: 'TestDir',\n-                  selector: '[dir]',\n-                  file: dirFile,\n-                  type: 'directive',\n-                }]\n-              },\n-              {\n-                fileName: dirFile,\n-                source: `\n+      // These tests are currently disabled when running in Windows mode as the assertions involving\n+      // the filename attached to the diagnostic are suffering from a case-sensitivity issue.\n+      if (os !== 'Windows' && platform() !== 'win32') {\n+        it('should produce errors for components that require type constructor inlining', () => {\n+          const fileName = absoluteFrom('/main.ts');\n+          const dirFile = absoluteFrom('/dir.ts');\n+          const {program, templateTypeChecker} = setup(\n+              [\n+                {\n+                  fileName,\n+                  source: `export class Cmp {}`,\n+                  templates: {'Cmp': '<div dir></div>'},\n+                  declarations: [{\n+                    name: 'TestDir',\n+                    selector: '[dir]',\n+                    file: dirFile,\n+                    type: 'directive',\n+                  }]\n+                },\n+                {\n+                  fileName: dirFile,\n+                  source: `\n                   // A non-exported interface used as a type bound for a generic directive causes\n                   // an inline type constructor to be required.\n                   interface NotExported {}\n                   export class TestDir<T extends NotExported> {}`,\n-                templates: {},\n-              }\n-            ],\n-            {inlining: false});\n-        const sf = getSourceFileOrError(program, fileName);\n-        const diags = templateTypeChecker.getDiagnosticsForFile(sf, OptimizeFor.WholeProgram);\n-        expect(diags.length).toBe(1);\n-        expect(diags[0].code).toBe(ngErrorCode(ErrorCode.INLINE_TYPE_CTOR_REQUIRED));\n-\n-        // The relatedInformation of the diagnostic should point to the directive which required the\n-        // inline type constructor.\n-        expect(diags[0].relatedInformation).not.toBeUndefined();\n-        expect(diags[0].relatedInformation!.length).toBe(1);\n-        expect(diags[0].relatedInformation![0].file).not.toBeUndefined();\n-        expect(absoluteFromSourceFile(diags[0].relatedInformation![0].file!)).toBe(dirFile);\n-      });\n+                  templates: {},\n+                }\n+              ],\n+              {inlining: false});\n+          const sf = getSourceFileOrError(program, fileName);\n+          const diags = templateTypeChecker.getDiagnosticsForFile(sf, OptimizeFor.WholeProgram);\n+          expect(diags.length).toBe(1);\n+          expect(diags[0].code).toBe(ngErrorCode(ErrorCode.INLINE_TYPE_CTOR_REQUIRED));\n+\n+          // The relatedInformation of the diagnostic should point to the directive which required\n+          // the inline type constructor.\n+          expect(diags[0].relatedInformation).not.toBeUndefined();\n+          expect(diags[0].relatedInformation!.length).toBe(1);\n+          expect(diags[0].relatedInformation![0].file).not.toBeUndefined();\n+          expect(absoluteFromSourceFile(diags[0].relatedInformation![0].file!)).toBe(dirFile);\n+        });\n+      }\n     });\n \n     describe('template overrides', () => {"
        }
    ],
    "stats": {
        "total": 78,
        "additions": 42,
        "deletions": 36
    }
}