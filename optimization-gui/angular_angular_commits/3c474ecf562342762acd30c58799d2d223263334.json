{
    "author": "ajitsinghkaler",
    "message": "fix(common): add boolean to valid json for testing (#37893)\n\nboolean is a valid json but at present we cannot test Http request using boolean added support for boolean requests\n\nFixes #20690\n\nPR Close #37893",
    "sha": "3c474ecf562342762acd30c58799d2d223263334",
    "files": [
        {
            "sha": "8143ffd6a0347998c9987fda0b19140d81226b52",
            "filename": "goldens/public-api/common/http/testing/testing.d.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/3c474ecf562342762acd30c58799d2d223263334/goldens%2Fpublic-api%2Fcommon%2Fhttp%2Ftesting%2Ftesting.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/3c474ecf562342762acd30c58799d2d223263334/goldens%2Fpublic-api%2Fcommon%2Fhttp%2Ftesting%2Ftesting.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fcommon%2Fhttp%2Ftesting%2Ftesting.d.ts?ref=3c474ecf562342762acd30c58799d2d223263334",
            "patch": "@@ -33,7 +33,7 @@ export declare class TestRequest {\n         statusText?: string;\n     }): void;\n     event(event: HttpEvent<any>): void;\n-    flush(body: ArrayBuffer | Blob | string | number | Object | (string | number | Object | null)[] | null, opts?: {\n+    flush(body: ArrayBuffer | Blob | boolean | string | number | Object | (boolean | string | number | Object | null)[] | null, opts?: {\n         headers?: HttpHeaders | {\n             [name: string]: string | string[];\n         };"
        },
        {
            "sha": "f76c1a238929a88695809ad28861cd729ed8740a",
            "filename": "packages/common/http/test/client_spec.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/3c474ecf562342762acd30c58799d2d223263334/packages%2Fcommon%2Fhttp%2Ftest%2Fclient_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/3c474ecf562342762acd30c58799d2d223263334/packages%2Fcommon%2Fhttp%2Ftest%2Fclient_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Fhttp%2Ftest%2Fclient_spec.ts?ref=3c474ecf562342762acd30c58799d2d223263334",
            "patch": "@@ -31,6 +31,13 @@ import {toArray} from 'rxjs/operators';\n         });\n         backend.expectOne('/test').flush({'data': 'hello world'});\n       });\n+      it('should allow flushing requests with a boolean value', (done: DoneFn) => {\n+        client.get('/test').subscribe(res => {\n+          expect((res as any)).toEqual(true);\n+          done();\n+        });\n+        backend.expectOne('/test').flush(true);\n+      });\n       it('for text data', done => {\n         client.get('/test', {responseType: 'text'}).subscribe(res => {\n           expect(res).toEqual('hello world');"
        },
        {
            "sha": "bdd9121784687d452811374977d5a0b3554d28ba",
            "filename": "packages/common/http/testing/src/request.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 7,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/3c474ecf562342762acd30c58799d2d223263334/packages%2Fcommon%2Fhttp%2Ftesting%2Fsrc%2Frequest.ts",
            "raw_url": "https://github.com/angular/angular/raw/3c474ecf562342762acd30c58799d2d223263334/packages%2Fcommon%2Fhttp%2Ftesting%2Fsrc%2Frequest.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Fhttp%2Ftesting%2Fsrc%2Frequest.ts?ref=3c474ecf562342762acd30c58799d2d223263334",
            "patch": "@@ -40,11 +40,14 @@ export class TestRequest {\n    *\n    * Both successful and unsuccessful responses can be delivered via `flush()`.\n    */\n-  flush(body: ArrayBuffer|Blob|string|number|Object|(string|number|Object|null)[]|null, opts: {\n-    headers?: HttpHeaders|{[name: string]: string | string[]},\n-    status?: number,\n-    statusText?: string,\n-  } = {}): void {\n+  flush(\n+      body: ArrayBuffer|Blob|boolean|string|number|Object|(boolean|string|number|Object|null)[]|\n+      null,\n+      opts: {\n+        headers?: HttpHeaders|{[name: string]: string | string[]},\n+        status?: number,\n+        statusText?: string,\n+      } = {}): void {\n     if (this.cancelled) {\n       throw new Error(`Cannot flush a cancelled request.`);\n     }\n@@ -146,7 +149,8 @@ function _toBlob(body: ArrayBuffer|Blob|string|number|Object|\n  * Helper function to convert a response body to JSON data.\n  */\n function _toJsonBody(\n-    body: ArrayBuffer|Blob|string|number|Object|(string | number | Object | null)[],\n+    body: ArrayBuffer|Blob|boolean|string|number|Object|\n+    (boolean | string | number | Object | null)[],\n     format: string = 'JSON'): Object|string|number|(Object | string | number)[] {\n   if (typeof ArrayBuffer !== 'undefined' && body instanceof ArrayBuffer) {\n     throw new Error(`Automatic conversion to ${format} is not supported for ArrayBuffers.`);\n@@ -155,7 +159,7 @@ function _toJsonBody(\n     throw new Error(`Automatic conversion to ${format} is not supported for Blobs.`);\n   }\n   if (typeof body === 'string' || typeof body === 'number' || typeof body === 'object' ||\n-      Array.isArray(body)) {\n+      typeof body === 'boolean' || Array.isArray(body)) {\n     return body;\n   }\n   throw new Error(`Automatic conversion to ${format} is not supported for response type.`);"
        }
    ],
    "stats": {
        "total": 27,
        "additions": 19,
        "deletions": 8
    }
}