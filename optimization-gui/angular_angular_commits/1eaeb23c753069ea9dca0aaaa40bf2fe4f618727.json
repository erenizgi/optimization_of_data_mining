{
    "author": "devversion",
    "message": "build: convert CLDR locale extraction from Gulp to Bazel tool (#42230)\n\nConverts the CLDR locale extraction script to a Bazel tool.\nThis allows us to generate locale files within Bazel, so that\nlocales don't need to live as sources within the repo. Also\nit allows us to get rid of the legacy Gulp tooling.\n\nThe migration of the Gulp script to a Bazel tool involved the\nfollowing things:\n\n  1. Basic conversion of the `extract.js` script to TypeScript.\n     This mostly was about adding explicit types. e.g. adding `locale:\n     string` or `localeData: CldrStatic`.\n\n  2. Split-up into separate files. Instead of keeping the large\n     `extract.js` file, the tool has been split into separate files.\n     The logic remains the same, just that code is more readable and\n     maintainable.\n\n  3. Introduction of a new `index.ts` file that is the entry-point\n     for the Bazel tool. Previously the Gulp tool just generated\n     all locale files, the default locale and base currency files\n     at once. The new entry-point accepts a mode to be passed as\n     first process argument. based on that argument, either locales\n     are generated into a specified directory, or the default locale,\n     base currencies or closure file is generated.\n\n     This allows us to generate files with a Bazel genrule where\n     we simply run the tool and specify the outputs. Note: It's\n     necessary to have multiple modes because files live in separate\n     locations. e.g. the default locale in `@angular/core`, but the\n     rest in `@angular/common`.\n\n  4. Removal of the `cldr-data-downloader` and custom CLDR resolution\n     logic. Within Bazel we cannot run a downloader using network.\n\n     We switch this to something more Bazel idiomatic with better\n     caching. For this a new repository rule is introduced that\n     downloads the CLDR JSON repository and extracts it. Within\n     that rule we determine the supported locales so that they\n     can be used to pre-declare outputs (for the locales) within\n     Bazel analysis phase. This allows us to add the generated locale\n     files to a `ts_library` (which we want to have for better testing,\n     and consistent JS transpilation).\n\n     Note that the removal of `cldr-data-downloader` also requires us to\n     add logic for detecting locales without data. The CLDR data\n     downloader overwrote the `availableLocales.json` file with a file\n     that only lists locales that CLDR provides data for. We use the\n     official `availableLocales` file CLDR provides, but filter out\n     locales for which no data is available. This is needed until we\n     update to CLDR 39 where data is available for all such locales\n     listed in `availableLocales.json`.\n\nPR Close #42230",
    "sha": "1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
    "files": [
        {
            "sha": "140aed39fc01421672128804f255656450c8774f",
            "filename": ".gitignore",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/.gitignore",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/.gitignore",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.gitignore?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -50,8 +50,5 @@ baseline.json\n # Ignore .history for the xyz.local-history VSCode extension\n .history\n \n-# CLDR data\n-tools/gulp-tasks/cldr/cldr-data/\n-\n # Husky\n .husky/_"
        },
        {
            "sha": "d95a9d3b42543f2c5117471bc029733e01b51343",
            "filename": "WORKSPACE",
            "status": "modified",
            "additions": 15,
            "deletions": 0,
            "changes": 15,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/WORKSPACE",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/WORKSPACE",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/WORKSPACE?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -62,3 +62,18 @@ sass_repositories()\n load(\"@io_bazel_skydoc//skylark:skylark.bzl\", \"skydoc_repositories\")\n \n skydoc_repositories()\n+\n+load(\"//packages/common/locales/generate-locales-tool:cldr-data.bzl\", \"cldr_data_repository\")\n+\n+cldr_data_repository(\n+    name = \"cldr_data\",\n+    # Since we use the Github archives for CLDR 37, we need to specify a path\n+    # to the available locales. This wouldn't be needed with CLDR 39 as that\n+    # comes with an official JSON archive not containing a version suffix.\n+    available_locales_path = \"cldr-core-37.0.0/availableLocales.json\",\n+    urls = {\n+        \"https://github.com/unicode-cldr/cldr-core/archive/37.0.0.zip\": \"32b5c49c3874aa342b90412c207b42e7aefb2435295891fb714c34ce58b3c706\",\n+        \"https://github.com/unicode-cldr/cldr-dates-full/archive/37.0.0.zip\": \"e1c410dd8ad7d75df4a5393efaf5d28f0d56c0fa126c5d66e171a3f21a988a1e\",\n+        \"https://github.com/unicode-cldr/cldr-numbers-full/archive/37.0.0.zip\": \"a921b90cf7f436e63fbdd55880f96e39a203acd9e174b0ceafa20a02c242a12e\",\n+    },\n+)"
        },
        {
            "sha": "96c7d95b922605c8d25c2072a97a027bbb8b3c54",
            "filename": "gulpfile.js",
            "status": "modified",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/gulpfile.js",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/gulpfile.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/gulpfile.js?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -20,6 +20,3 @@ function loadTask(fileName, taskName) {\n \n gulp.task('source-map-test', loadTask('source-map-test'));\n gulp.task('changelog:zonejs', loadTask('changelog-zonejs'));\n-gulp.task('cldr:extract', loadTask('cldr', 'extract'));\n-gulp.task('cldr:download', loadTask('cldr', 'download'));\n-gulp.task('cldr:gen-closure-locale', loadTask('cldr', 'closure'));"
        },
        {
            "sha": "bb2926d08105eaf8817230efe9294d8124b21aa1",
            "filename": "package.json",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/package.json",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -164,6 +164,7 @@\n     \"@bazel/buildifier\": \"^4.0.1\",\n     \"@bazel/ibazel\": \"^0.15.8\",\n     \"@octokit/graphql\": \"^4.6.1\",\n+    \"@types/cldrjs\": \"^0.4.22\",\n     \"@types/cli-progress\": \"^3.4.2\",\n     \"@types/conventional-commits-parser\": \"^3.0.1\",\n     \"@types/ejs\": \"^3.0.6\",\n@@ -173,8 +174,7 @@\n     \"browserstacktunnel-wrapper\": \"^2.0.4\",\n     \"check-side-effects\": \"0.0.23\",\n     \"clang-format\": \"^1.4.0\",\n-    \"cldr\": \"7.0.0\",\n-    \"cldr-data-downloader\": \"^0.3.5\",\n+    \"cldr\": \"5.7.0\",\n     \"cldrjs\": \"0.5.5\",\n     \"cli-progress\": \"^3.7.0\",\n     \"conventional-changelog\": \"^3.1.24\",\n@@ -218,6 +218,5 @@\n     \"@babel/template\": \"7.8.6\",\n     \"@babel/traverse\": \"7.8.6\",\n     \"@babel/types\": \"7.8.6\"\n-  },\n-  \"cldr-data-coverage\": \"full\"\n+  }\n }"
        },
        {
            "sha": "c795b94d5aded08d2b3f870ad9ac8c4994632a0c",
            "filename": "packages/common/locales/generate-locales-tool/BUILD.bazel",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2FBUILD.bazel?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,17 @@\n+load(\"//tools:defaults.bzl\", \"ts_library\")\n+\n+package(default_visibility = [\"//visibility:public\"])\n+\n+ts_library(\n+    name = \"generate-locales-tool\",\n+    srcs = glob([\"*.ts\"]),\n+    deps = [\n+        \"@npm//@bazel/runfiles\",\n+        \"@npm//@types/cldrjs\",\n+        \"@npm//@types/glob\",\n+        \"@npm//@types/node\",\n+        \"@npm//cldr\",\n+        \"@npm//cldrjs\",\n+        \"@npm//glob\",\n+    ],\n+)"
        },
        {
            "sha": "03a7cb4b43e39aa69e6e88d54c4559cb1cc6b466",
            "filename": "packages/common/locales/generate-locales-tool/array-deduplication.ts",
            "status": "added",
            "additions": 35,
            "deletions": 0,
            "changes": 35,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Farray-deduplication.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Farray-deduplication.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Farray-deduplication.ts?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,35 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+/**\n+ * To create smaller locale files, we remove duplicated data.\n+ * To make this work we store the data in arrays, where `undefined` indicates that the\n+ * value is a duplicate of the previous value in the array.\n+ * e.g. consider an array like: [x, y, undefined, z, undefined, undefined]\n+ * The first `undefined` is equivalent to y, the second and third are equivalent to z\n+ * Note that the first value in an array is always defined.\n+ *\n+ * Also since we need to know which data is assumed similar, it is important that we store those\n+ * similar data in arrays to mark the delimitation between values that have different meanings\n+ * (e.g. months and days).\n+ *\n+ * For further size improvements, \"undefined\" values will be replaced by a constant in the arrays\n+ * as the last step of the file generation (in generateLocale and generateLocaleExtra).\n+ * e.g.: [x, y, undefined, z, undefined, undefined] will be [x, y, u, z, u, u]\n+ */\n+export function removeDuplicates(data: unknown[]) {\n+  const dedup = [data[0]];\n+  for (let i = 1; i < data.length; i++) {\n+    if (JSON.stringify(data[i]) !== JSON.stringify(data[i - 1])) {\n+      dedup.push(data[i]);\n+    } else {\n+      dedup.push(undefined);\n+    }\n+  }\n+  return dedup;\n+}"
        },
        {
            "sha": "302190b3f1c60b8a7c1d820c69c11261ffa3aede",
            "filename": "packages/common/locales/generate-locales-tool/bin/BUILD.bazel",
            "status": "added",
            "additions": 33,
            "deletions": 0,
            "changes": 33,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2FBUILD.bazel?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,33 @@\n+load(\"@build_bazel_rules_nodejs//:index.bzl\", \"nodejs_binary\")\n+load(\"//tools:defaults.bzl\", \"ts_library\")\n+\n+package(default_visibility = [\"//visibility:public\"])\n+\n+BIN_ENTRYPOINTS = [\n+    \"get-base-currencies-file\",\n+    \"get-base-locale-file\",\n+    \"get-closure-locale-file\",\n+    \"write-locale-files-to-dist\",\n+]\n+\n+ts_library(\n+    name = \"bin\",\n+    srcs = glob([\"*.ts\"]),\n+    deps = [\n+        \"//packages/common/locales/generate-locales-tool\",\n+        \"@npm//@types/node\",\n+    ],\n+)\n+\n+[nodejs_binary(\n+    name = entrypoint,\n+    data = [\n+        \":bin\",\n+        \"@cldr_data//:all_json\",\n+    ],\n+    entry_point = \":%s.ts\" % entrypoint,\n+    # We need to patch the NodeJS module resolution as this binary runs as\n+    # part of a genrule where the linker does not work as expected.\n+    # See: https://github.com/bazelbuild/rules_nodejs/issues/2600.\n+    templated_args = [\"--bazel_patch_module_resolver\"],\n+) for entrypoint in BIN_ENTRYPOINTS]"
        },
        {
            "sha": "8398497afcf223427425aad2149a892c9ee604bc",
            "filename": "packages/common/locales/generate-locales-tool/bin/base-locale.ts",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2Fbase-locale.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2Fbase-locale.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2Fbase-locale.ts?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,17 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+\n+/**\n+ * Base locale used as foundation for other locales. For example: A base locale allows\n+ * generation of a file containing all currencies with their corresponding symbols. If we\n+ * generate other locales, they can override currency symbols which are different in the base\n+ * locale. This means that we do not need re-generate all currencies w/ symbols multiple times,\n+ * and allows us to reduce the locale data payload as the base locale is always included.\n+ * */\n+export const BASE_LOCALE = 'en';"
        },
        {
            "sha": "94aa782ada81bfb91fc05a39f39683a5c589bd39",
            "filename": "packages/common/locales/generate-locales-tool/bin/get-base-currencies-file.ts",
            "status": "added",
            "additions": 23,
            "deletions": 0,
            "changes": 23,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2Fget-base-currencies-file.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2Fget-base-currencies-file.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2Fget-base-currencies-file.ts?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,23 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+import {CldrData} from '../cldr-data';\n+import {generateBaseCurrenciesFile} from '../locale-base-currencies';\n+\n+import {BASE_LOCALE} from './base-locale';\n+\n+/** Generates the base currencies file and prints it to the stdout. */\n+function main() {\n+  const cldrData = new CldrData();\n+  const baseLocaleData = cldrData.getLocaleData(BASE_LOCALE)!;\n+\n+  process.stdout.write(generateBaseCurrenciesFile(baseLocaleData));\n+}\n+\n+if (require.main === module) {\n+  main();\n+}"
        },
        {
            "sha": "97089a509be697d22f1c59ec26742629e2d49eb2",
            "filename": "packages/common/locales/generate-locales-tool/bin/get-base-locale-file.ts",
            "status": "added",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2Fget-base-locale-file.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2Fget-base-locale-file.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2Fget-base-locale-file.ts?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,25 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+import {CldrData} from '../cldr-data';\n+import {generateBaseCurrencies} from '../locale-base-currencies';\n+import {generateLocale} from '../locale-file';\n+\n+import {BASE_LOCALE} from './base-locale';\n+\n+/** Generates the base locale file and prints it to the stdout. */\n+function main() {\n+  const cldrData = new CldrData();\n+  const baseLocaleData = cldrData.getLocaleData(BASE_LOCALE)!;\n+  const baseCurrencies = generateBaseCurrencies(baseLocaleData);\n+\n+  process.stdout.write(generateLocale(BASE_LOCALE, baseLocaleData, baseCurrencies));\n+}\n+\n+if (require.main === module) {\n+  main();\n+}"
        },
        {
            "sha": "0f597fd8916b593d9f8bf8f5e4a377746782d58e",
            "filename": "packages/common/locales/generate-locales-tool/bin/get-closure-locale-file.ts",
            "status": "added",
            "additions": 25,
            "deletions": 0,
            "changes": 25,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2Fget-closure-locale-file.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2Fget-closure-locale-file.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2Fget-closure-locale-file.ts?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,25 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+import {CldrData} from '../cldr-data';\n+import {generateClosureLocaleFile} from '../closure-locale-file';\n+import {generateBaseCurrencies} from '../locale-base-currencies';\n+\n+import {BASE_LOCALE} from './base-locale';\n+\n+/** Generates the Google3 closure-locale file and prints it to the stdout. */\n+function main() {\n+  const cldrData = new CldrData();\n+  const baseLocaleData = cldrData.getLocaleData(BASE_LOCALE)!;\n+  const baseCurrencies = generateBaseCurrencies(baseLocaleData);\n+\n+  process.stdout.write(generateClosureLocaleFile(cldrData, baseCurrencies));\n+}\n+\n+if (require.main === module) {\n+  main();\n+}"
        },
        {
            "sha": "2d40023cf6b85b36942798afb49df1ddff422829",
            "filename": "packages/common/locales/generate-locales-tool/bin/write-locale-files-to-dist.ts",
            "status": "added",
            "additions": 71,
            "deletions": 0,
            "changes": 71,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2Fwrite-locale-files-to-dist.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2Fwrite-locale-files-to-dist.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fbin%2Fwrite-locale-files-to-dist.ts?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,71 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+import {writeFileSync} from 'fs';\n+import {join} from 'path';\n+\n+import {CldrData} from '../cldr-data';\n+import {generateBaseCurrencies} from '../locale-base-currencies';\n+import {generateLocaleExtra} from '../locale-extra-file';\n+import {generateLocale} from '../locale-file';\n+import {generateLocaleGlobalFile} from '../locale-global-file';\n+\n+import {BASE_LOCALE} from './base-locale';\n+\n+/**\n+ * Generates locale files for each available CLDR locale and writes it to the\n+ * specified directory.\n+ */\n+function main(outputDir: string) {\n+  const cldrData = new CldrData();\n+  const baseLocaleData = cldrData.getLocaleData(BASE_LOCALE)!;\n+  const baseCurrencies = generateBaseCurrencies(baseLocaleData);\n+  const extraLocaleDir = join(outputDir, 'extra');\n+  const globalLocaleDir = join(outputDir, 'global');\n+\n+  console.info(`Writing locales to: ${outputDir}`);\n+\n+  // Generate locale files for all locales we have data for.\n+  cldrData.availableLocales.forEach((locale: string) => {\n+    const localeData = cldrData.getLocaleData(locale);\n+\n+    // If `cldrjs` is unable to resolve a `bundle` for the current locale, then there is no data\n+    // for this locale, and it should not be generated. This can happen as with older versions of\n+    // CLDR where `availableLocales.json` specifies locales for which no data is available\n+    // (even within the `full` tier packages). See:\n+    // http://cldr.unicode.org/development/development-process/design-proposals/json-packaging.\n+    // TODO(devversion): Remove if we update to CLDR v39 where this seems fixed. Note that this\n+    //  worked before in the Gulp tooling without such a check because the `cldr-data-downloader`\n+    //  overwrote the `availableLocales` to only capture locales with data.\n+    if (localeData && !(localeData.attributes as any).bundle) {\n+      console.info(`Skipping generation of ${locale} as there is no data.`);\n+      return;\n+    }\n+\n+    const localeFile = generateLocale(locale, localeData, baseCurrencies);\n+    const localeExtraFile = generateLocaleExtra(locale, localeData);\n+    const localeGlobalFile = generateLocaleGlobalFile(locale, localeData, baseCurrencies);\n+\n+    writeFileSync(join(outputDir, `${locale}.ts`), localeFile);\n+    writeFileSync(join(extraLocaleDir, `${locale}.ts`), localeExtraFile);\n+    writeFileSync(join(globalLocaleDir, `${locale}.js`), localeGlobalFile);\n+  });\n+}\n+\n+\n+if (require.main === module) {\n+  // The first argument is expected to be a path resolving to a directory\n+  // where all locales should be generated into.\n+  const outputDir = process.argv[2];\n+\n+  if (outputDir === undefined) {\n+    throw Error('No output directory specified.');\n+  }\n+\n+  main(outputDir);\n+}"
        },
        {
            "sha": "3346c118d84531ae5cdb5ee1174d8fc1cda4feea",
            "filename": "packages/common/locales/generate-locales-tool/cldr-data.bzl",
            "status": "added",
            "additions": 48,
            "deletions": 0,
            "changes": 48,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fcldr-data.bzl",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fcldr-data.bzl",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fcldr-data.bzl?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,48 @@\n+def _cldr_data_repository_impl(ctx):\n+    for url, sha256 in ctx.attr.urls.items():\n+        ctx.report_progress(\"Downloading CLDR data from: %s\" % url)\n+        ctx.download_and_extract(\n+            url = url,\n+            sha256 = sha256,\n+        )\n+\n+    ctx.report_progress(\"Extracting available locales from: %s\" % ctx.attr.available_locales_path)\n+    locales_json = ctx.read(ctx.attr.available_locales_path)\n+    locales = json.decode(locales_json)[\"availableLocales\"][\"full\"]\n+    ctx.report_progress(\"Extracted %s locales from CLDR\" % len(locales))\n+\n+    ctx.file(\"index.bzl\", content = \"\"\"\n+LOCALES=%s\n+  \"\"\" % locales)\n+\n+    ctx.file(\"BUILD.bazel\", content = \"\"\"\n+filegroup(\n+  name = \"all_json\",\n+  srcs = glob([\"**/*.json\"]),\n+  visibility = [\"//visibility:public\"],\n+)\n+  \"\"\")\n+\n+\"\"\"\n+  Repository rule that downloads CLDR data from the specified repository and generates a\n+  `BUILD.bazel` file that exposes all data files. Additionally, an `index.bzl` file is generated\n+  that exposes a constant for all locales the repository contains data for. This can be used to\n+  generate pre-declared outputs.\n+\"\"\"\n+cldr_data_repository = repository_rule(\n+    implementation = _cldr_data_repository_impl,\n+    attrs = {\n+        \"urls\": attr.string_dict(doc = \"\"\"\n+           Dictionary of URLs that resolve to archives containing CLDR JSON data. These archives\n+           will be downloaded and extracted at root of the repository. Each key can specify\n+           a SHA256 checksum for hermetic builds.\n+        \"\"\", mandatory = True),\n+        \"available_locales_path\": attr.string(\n+            doc = \"\"\"\n+              Relative path to the JSON data file describing all available locales.\n+              This file usually resides within the `cldr-core` package\n+            \"\"\",\n+            default = \"cldr-core/availableLocales.json\",\n+        ),\n+    },\n+)"
        },
        {
            "sha": "ea11843301a37370d4d3b46744f4fd27f0dbf43a",
            "filename": "packages/common/locales/generate-locales-tool/cldr-data.ts",
            "status": "added",
            "additions": 140,
            "deletions": 0,
            "changes": 140,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fcldr-data.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fcldr-data.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fcldr-data.ts?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,140 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+import {runfiles} from '@bazel/runfiles';\n+import {CldrStatic} from 'cldrjs';\n+import {sync as globSync} from 'glob';\n+\n+// TypeScript doesn't allow us to import the default export without the `esModuleInterop`. We use\n+// the NodeJS require function instead as specifying a custom tsconfig complicates the setup\n+// unnecessarily.\n+// TODO: See if we can improve this by having better types for `cldrjs`.\n+const cldrjs: typeof import('cldrjs') = require('cldrjs');\n+\n+/**\n+ * Globs that match CLDR JSON data files that should be fetched. We limit these intentionally\n+ * as loading unused data results in significant slow-down of the generation\n+ * (noticeable in local development if locale data is re-generated).\n+ */\n+const CLDR_DATA_GLOBS = [\n+  'cldr-core-37.0.0/scriptMetadata.json',\n+  'cldr-core-37.0.0/supplemental/**/*.json',\n+  'cldr-dates-full-37.0.0/main/**/*.json',\n+  'cldr-numbers-full-37.0.0/main/**/*.json',\n+];\n+\n+/** Path to the CLDR available locales file. */\n+const CLDR_AVAILABLE_LOCALES_PATH = 'cldr-core-37.0.0/availableLocales.json';\n+\n+/**\n+ * Instance providing access to a locale's CLDR data. This type extends the `cldrjs`\n+ * instance type with the missing `bundle` attribute property.\n+ */\n+export type CldrLocaleData = CldrStatic&{\n+  attributes: {\n+    /**\n+     * Resolved bundle name for the locale.\n+     * More details: http://www.unicode.org/reports/tr35/#Bundle_vs_Item_Lookup\n+     */\n+    bundle: string;\n+  }\n+};\n+\n+/**\n+ * Class that provides access to the CLDR data downloaded as part of\n+ * the `@cldr_data` Bazel repository.\n+ */\n+export class CldrData {\n+  /** Path to the CLDR data Bazel repository. i.e. `@cldr_data//`. */\n+  readonly cldrDataDir = runfiles.resolve('cldr_data');\n+\n+  /** List of all available locales CLDR provides data for. */\n+  readonly availableLocales: readonly CldrLocaleData[];\n+\n+  constructor() {\n+    this._loadAndPopulateCldrData();\n+    this.availableLocales = this._getAvailableLocales();\n+  }\n+\n+  /** Gets the CLDR data for the specified locale. */\n+  getLocaleData(localeName: string): CldrLocaleData|null {\n+    // Cast to `CldrLocaleData` because the default `cldrjs` types from `DefinitelyTyped`\n+    // are outdated and do not capture the `bundle` attribute. See:\n+    // https://github.com/rxaviers/cldrjs#instantiate-a-locale-and-get-it-normalized.\n+    const localeData = new cldrjs(localeName) as CldrLocaleData;\n+\n+    // In case a locale has been requested for which no data is available, we return\n+    // `null` immediately instead of returning an empty `CldrStatic` instance.\n+    if (localeData.attributes.bundle === null) {\n+      return null;\n+    }\n+\n+    return localeData;\n+  }\n+\n+  /** Gets a list of all locales CLDR provides data for. */\n+  private _getAvailableLocales(): CldrLocaleData[] {\n+    const allLocales =\n+        require(`${this.cldrDataDir}/${CLDR_AVAILABLE_LOCALES_PATH}`).availableLocales.full;\n+    const localesWithData: CldrLocaleData[] = [];\n+\n+    for (const localeName of allLocales) {\n+      const localeData = this.getLocaleData(localeName);\n+\n+      // If `cldrjs` is unable to resolve a `bundle` for the current locale, then there is no data\n+      // for this locale, and it should not be generated. This can happen as with older versions of\n+      // CLDR where `availableLocales.json` specifies locales for which no data is available\n+      // (even within the `full` tier packages). See:\n+      // http://cldr.unicode.org/development/development-process/design-proposals/json-packaging.\n+      // TODO(devversion): Remove if we update to CLDR v39 where this seems fixed. Note that this\n+      //  worked before in the Gulp tooling without such a check because the `cldr-data-downloader`\n+      //  overwrote the `availableLocales` to only capture locales with data.\n+      if (localeData !== null) {\n+        localesWithData.push(localeData);\n+      }\n+    }\n+\n+    return localesWithData;\n+  }\n+\n+  /** Loads the CLDR data and populates the `cldrjs` library with it. */\n+  private _loadAndPopulateCldrData() {\n+    const localeData = this._readCldrDataFromRepository();\n+\n+    if (localeData.length === 0) {\n+      throw Error('No CLDR data could be found.');\n+    }\n+\n+    // Populate the `cldrjs` library with the locale data. Note that we need this type cast\n+    // to satisfy the first `cldrjs.load` parameter which cannot be undefined.\n+    cldrjs.load(...localeData as [object, ...object[]]);\n+  }\n+\n+  /**\n+   * Reads the CLDR JSON data from the Bazel repository.\n+   * @returns a list of read JSON objects representing the CLDR data.\n+   */\n+  private _readCldrDataFromRepository(): object[] {\n+    const jsonFiles =\n+        CLDR_DATA_GLOBS.map(pattern => globSync(pattern, {cwd: this.cldrDataDir, absolute: true}))\n+            .reduce((acc, dataFiles) => [...acc, ...dataFiles], []);\n+\n+    // Read the JSON for all determined CLDR json files.\n+    return jsonFiles.map(filePath => {\n+      const parsed = require(filePath);\n+\n+      // Guards against cases where non-CLDR data files are accidentally picked up\n+      // by the glob above and would throw-off the bundle lookup in `cldrjs`.\n+      if (parsed.main !== undefined && typeof parsed.main !== 'object') {\n+        throw Error('Unexpected CLDR json file with \"main\" field which is not an object.');\n+      }\n+\n+      return parsed;\n+    });\n+  }\n+}"
        },
        {
            "sha": "810b960a6fc693579a533e2186ea813ebbeef318",
            "filename": "packages/common/locales/generate-locales-tool/closure-locale-file.ts",
            "status": "added",
            "additions": 153,
            "deletions": 0,
            "changes": 153,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fclosure-locale-file.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fclosure-locale-file.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fclosure-locale-file.ts?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,153 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+import {CldrData} from './cldr-data';\n+import {fileHeader} from './file-header';\n+import {BaseCurrencies} from './locale-base-currencies';\n+import {generateLocale} from './locale-file';\n+\n+/**\n+ * List of locales used by Closure. These locales will be incorporated in the generated\n+ * closure locale file. See:\n+ * https://github.com/google/closure-library/blob/master/closure/goog/i18n/datetimepatterns.js#L2450\n+ */\n+const GOOG_LOCALES = [\n+  'af',    'am',    'ar',    'ar-DZ', 'az',    'be',    'bg',    'bn',     'br',    'bs',\n+  'ca',    'chr',   'cs',    'cy',    'da',    'de',    'de-AT', 'de-CH',  'el',    'en-AU',\n+  'en-CA', 'en-GB', 'en-IE', 'en-IN', 'en-SG', 'en-ZA', 'es',    'es-419', 'es-MX', 'es-US',\n+  'et',    'eu',    'fa',    'fi',    'fr',    'fr-CA', 'ga',    'gl',     'gsw',   'gu',\n+  'haw',   'hi',    'hr',    'hu',    'hy',    'in',    'is',    'it',     'iw',    'ja',\n+  'ka',    'kk',    'km',    'kn',    'ko',    'ky',    'ln',    'lo',     'lt',    'lv',\n+  'mk',    'ml',    'mn',    'mo',    'mr',    'ms',    'mt',    'my',     'ne',    'nl',\n+  'no',    'or',    'pa',    'pl',    'pt',    'pt-PT', 'ro',    'ru',     'sh',    'si',\n+  'sk',    'sl',    'sq',    'sr',    'sv',    'sw',    'ta',    'te',     'th',    'tl',\n+  'tr',    'uk',    'ur',    'uz',    'vi',    'zh',    'zh-CN', 'zh-HK',  'zh-TW', 'zu'\n+];\n+\n+export function generateClosureLocaleFile(\n+    cldrData: CldrData, baseCurrencies: BaseCurrencies): string {\n+  // locale id aliases to support deprecated locale ids used by closure\n+  // it maps deprecated ids --> new ids\n+  // manually extracted from ./cldr-data/supplemental/aliases.json\n+  // TODO: Consider extracting directly from the CLDR data instead.\n+  const aliases = {\n+    'in': 'id',\n+    'iw': 'he',\n+    'mo': 'ro-MD',\n+    'no': 'nb',\n+    'nb': 'no-NO',\n+    'sh': 'sr-Latn',\n+    'tl': 'fil',\n+    'pt': 'pt-BR',\n+    'zh-CN': 'zh-Hans-CN',\n+    'zh-Hans-CN': 'zh-Hans',\n+    'zh-HK': 'zh-Hant-HK',\n+    'zh-TW': 'zh-Hant-TW',\n+    'zh-Hant-TW': 'zh-Hant',\n+  };\n+\n+  return generateAllLocalesFile(cldrData, GOOG_LOCALES, aliases, baseCurrencies);\n+}\n+\n+/**\n+ * Generate a file that contains all locale to import for closure.\n+ * Tree shaking will only keep the data for the `goog.LOCALE` locale.\n+ */\n+function generateAllLocalesFile(\n+    cldrData: CldrData, locales: string[], aliases: {[name: string]: string},\n+    baseCurrencies: BaseCurrencies) {\n+  const existingLocalesAliases: {[locale: string]: Set<string>} = {};\n+  const existingLocalesData: {[locale: string]: string} = {};\n+\n+  // for each locale, get the data and the list of equivalent locales\n+  locales.forEach(locale => {\n+    const eqLocales = new Set<string>();\n+    eqLocales.add(locale);\n+    if (locale.match(/-/)) {\n+      eqLocales.add(locale.replace(/-/g, '_'));\n+    }\n+\n+    // check for aliases\n+    const alias = aliases[locale];\n+    if (alias) {\n+      eqLocales.add(alias);\n+\n+      if (alias.match(/-/)) {\n+        eqLocales.add(alias.replace(/-/g, '_'));\n+      }\n+\n+      // to avoid duplicated \"case\" we regroup all locales in the same \"case\"\n+      // the simplest way to do that is to have alias aliases\n+      // e.g. 'no' --> 'nb', 'nb' --> 'no-NO'\n+      // which means that we'll have 'no', 'nb' and 'no-NO' in the same \"case\"\n+      const aliasKeys = Object.keys(aliases);\n+      for (let i = 0; i < aliasKeys.length; i++) {\n+        const aliasValue = aliases[alias];\n+        if (aliasKeys.indexOf(alias) !== -1 && !eqLocales.has(aliasValue)) {\n+          eqLocales.add(aliasValue);\n+\n+          if (aliasValue.match(/-/)) {\n+            eqLocales.add(aliasValue.replace(/-/g, '_'));\n+          }\n+        }\n+      }\n+    }\n+\n+    const localeNameForData = aliases[locale] ?? locale;\n+    const localeData = cldrData.getLocaleData(localeNameForData);\n+    const localeName = formatLocale(locale);\n+    existingLocalesData[locale] =\n+        generateLocale(localeNameForData, localeData, baseCurrencies)\n+            .replace(`${fileHeader}\\n`, '')\n+            .replace('export default ', `export const locale_${localeName} = `)\n+            .replace('function plural', `function plural_${localeName}`)\n+            .replace(/,\\s+plural/, `, plural_${localeName}`)\n+            .replace(/\\s*const u = undefined;\\s*/, '');\n+\n+    existingLocalesAliases[locale] = eqLocales;\n+  });\n+\n+  function generateCases(locale: string) {\n+    let str = '';\n+    let locales: string[] = [];\n+    const eqLocales = existingLocalesAliases[locale];\n+    eqLocales.forEach(l => {\n+      str += `case '${l}':\\n`;\n+      locales.push(`'${l}'`);\n+    });\n+    let localesStr = '[' + locales.join(',') + ']';\n+\n+    str += `  l = locale_${formatLocale(locale)};\n+    locales = ${localesStr};\n+    break;\\n`;\n+    return str;\n+  }\n+\n+  return `${fileHeader}\n+\n+import {registerLocaleData} from '../src/i18n/locale_data';\n+\n+const u = undefined;\n+\n+${locales.map(locale => `${existingLocalesData[locale]}`).join('\\n')}\n+\n+let l: any;\n+let locales: string[] = [];\n+\n+switch (goog.LOCALE) {\n+${locales.map(locale => generateCases(locale)).join('')}}\n+\n+if(l) {\n+  locales.forEach(locale => registerLocaleData(l, locale));\n+}\n+`;\n+}\n+\n+function formatLocale(locale: string): string {\n+  return locale.replace(/-/g, '_');\n+}"
        },
        {
            "sha": "f2c9a1df070e3a115db3dfabb915aed27d16f7d2",
            "filename": "packages/common/locales/generate-locales-tool/day-periods.ts",
            "status": "added",
            "additions": 75,
            "deletions": 0,
            "changes": 75,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fday-periods.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fday-periods.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fday-periods.ts?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,75 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+import {CldrLocaleData} from './cldr-data';\n+\n+/**\n+ * Returns data for the chosen day periods\n+ */\n+export function getDayPeriods(localeData: CldrLocaleData, dayPeriodsList: string[]): {\n+  format: {narrow: string[], abbreviated: string[], wide: string[]},\n+  'stand-alone': {narrow: string[], abbreviated: string[], wide: string[]}\n+} {\n+  const dayPeriods = localeData.main(`dates/calendars/gregorian/dayPeriods`);\n+  const result: any = {};\n+  // cleaning up unused keys\n+  Object.keys(dayPeriods).forEach(key1 => {  // format / stand-alone\n+    result[key1] = {};\n+    Object.keys(dayPeriods[key1]).forEach(key2 => {  // narrow / abbreviated / wide\n+      result[key1][key2] = {};\n+      Object.keys(dayPeriods[key1][key2]).forEach(key3 => {\n+        if (dayPeriodsList.indexOf(key3) !== -1) {\n+          result[key1][key2][key3] = dayPeriods[key1][key2][key3];\n+        }\n+      });\n+    });\n+  });\n+\n+  return result as any;\n+}\n+\n+\n+/**\n+ * Returns day period rules for a locale\n+ * @returns string[]\n+ */\n+export function getDayPeriodRules(localeData: CldrLocaleData): {[key: string]: []} {\n+  const dayPeriodRules =\n+      localeData.get(`supplemental/dayPeriodRuleSet/${localeData.attributes.language}`);\n+  const rules: any = {};\n+\n+  if (dayPeriodRules) {\n+    Object.keys(dayPeriodRules).forEach(key => {\n+      if (dayPeriodRules[key]._at) {\n+        rules[key] = dayPeriodRules[key]._at;\n+      } else {\n+        rules[key] = [dayPeriodRules[key]._from, dayPeriodRules[key]._before];\n+      }\n+    });\n+  }\n+\n+  return rules;\n+}\n+\n+\n+/**\n+ * Returns the basic day periods (am/pm)\n+ */\n+export function getDayPeriodsAmPm(localeData: CldrLocaleData) {\n+  return getDayPeriods(localeData, ['am', 'pm']);\n+}\n+\n+/**\n+ * Returns the extra day periods (without am/pm)\n+ */\n+export function getDayPeriodsNoAmPm(localeData: CldrLocaleData) {\n+  return getDayPeriods(localeData, [\n+    'noon', 'midnight', 'morning1', 'morning2', 'afternoon1', 'afternoon2', 'evening1', 'evening2',\n+    'night1', 'night2'\n+  ]);\n+}"
        },
        {
            "sha": "a631cb1cf07b372c3932a4946e9e8103c789bb1a",
            "filename": "packages/common/locales/generate-locales-tool/file-header.ts",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Ffile-header.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Ffile-header.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Ffile-header.ts?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,17 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+export const fileHeader = `/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+// THIS CODE IS GENERATED - DO NOT MODIFY.`;"
        },
        {
            "sha": "fc3cc19dac9f67686f2b8410ee72dd485b96412e",
            "filename": "packages/common/locales/generate-locales-tool/locale-base-currencies.ts",
            "status": "added",
            "additions": 74,
            "deletions": 0,
            "changes": 74,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Flocale-base-currencies.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Flocale-base-currencies.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Flocale-base-currencies.ts?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,74 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+import {CldrLocaleData} from './cldr-data';\n+import {fileHeader} from './file-header';\n+import {stringify} from './object-stringify';\n+\n+export type BaseCurrencySymbols = [\n+  string\n+]|[string | undefined, string]|[string, undefined, number]|[string | undefined, string, number];\n+\n+export type BaseCurrencies = {\n+  [code: string]: BaseCurrencySymbols|undefined;\n+};\n+\n+/**\n+ * Generate a file that contains the list of currencies, their symbols and digits.\n+ */\n+export function generateBaseCurrenciesFile(baseLocaleData: CldrLocaleData) {\n+  const baseCurrencies = generateBaseCurrencies(baseLocaleData);\n+\n+  return `${fileHeader}\n+export type CurrenciesSymbols = [string] | [string | undefined, string];\n+\n+/** @internal */\n+export const CURRENCIES_EN: {[code: string]: CurrenciesSymbols | [string | undefined, string | undefined, number]} = ${\n+      stringify(baseCurrencies)};\n+`;\n+}\n+\n+/**\n+ * Generate a list of currencies to be used as a base for other currencies\n+ * e.g.: {'ARS': [, '$'], 'AUD': ['A$', '$'], ...}\n+ */\n+export function generateBaseCurrencies(localeData: CldrLocaleData) {\n+  const currenciesData = localeData.main('numbers/currencies');\n+  const fractions = localeData.get(`supplemental/currencyData/fractions`);\n+  const currencies: BaseCurrencies = {};\n+\n+  Object.keys(currenciesData).forEach(key => {\n+    let symbolsArray = [];\n+    const symbol = currenciesData[key].symbol;\n+    const symbolNarrow = currenciesData[key]['symbol-alt-narrow'];\n+    if (symbol && symbol !== key) {\n+      symbolsArray.push(symbol);\n+    }\n+    if (symbolNarrow && symbolNarrow !== symbol) {\n+      if (symbolsArray.length > 0) {\n+        symbolsArray.push(symbolNarrow);\n+      } else {\n+        symbolsArray = [undefined, symbolNarrow];\n+      }\n+    }\n+    if (fractions[key] && fractions[key]['_digits']) {\n+      const digits = parseInt(fractions[key]['_digits'], 10);\n+      if (symbolsArray.length === 2) {\n+        symbolsArray.push(digits);\n+      } else if (symbolsArray.length === 1) {\n+        symbolsArray = [...symbolsArray, undefined, digits];\n+      } else {\n+        symbolsArray = [undefined, undefined, digits];\n+      }\n+    }\n+    if (symbolsArray.length > 0) {\n+      currencies[key] = symbolsArray as BaseCurrencySymbols;\n+    }\n+  });\n+  return currencies;\n+}"
        },
        {
            "sha": "34fbae370b7ab3f14961276b5d161c53f27a0401",
            "filename": "packages/common/locales/generate-locales-tool/locale-currencies.ts",
            "status": "added",
            "additions": 87,
            "deletions": 0,
            "changes": 87,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Flocale-currencies.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Flocale-currencies.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Flocale-currencies.ts?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,87 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+import {CldrLocaleData} from './cldr-data';\n+import {BaseCurrencies} from './locale-base-currencies';\n+\n+/**\n+ * To minimize the file even more, we only output the differences compared to the base currency\n+ */\n+export function generateLocaleCurrencies(\n+    localeData: CldrLocaleData, baseCurrencies: BaseCurrencies) {\n+  const currenciesData = localeData.main('numbers/currencies');\n+  const currencies: any = {};\n+\n+  Object.keys(currenciesData).forEach(code => {\n+    let symbolsArray = [];\n+    const symbol = currenciesData[code].symbol;\n+    const symbolNarrow = currenciesData[code]['symbol-alt-narrow'];\n+    if (symbol && symbol !== code) {\n+      symbolsArray.push(symbol);\n+    }\n+    if (symbolNarrow && symbolNarrow !== symbol) {\n+      if (symbolsArray.length > 0) {\n+        symbolsArray.push(symbolNarrow);\n+      } else {\n+        symbolsArray = [undefined, symbolNarrow];\n+      }\n+    }\n+\n+    const baseCurrencySymbols = baseCurrencies[code] || [];\n+\n+    // Jf locale data is equal to the one in the base currencies, skip this currency to\n+    // avoid unnecessary locale data that could be inferred from the base currency.\n+    if (baseCurrencySymbols && baseCurrencySymbols[0] === symbolsArray[0] &&\n+        baseCurrencySymbols[1] === symbolsArray[1]) {\n+      return;\n+    }\n+\n+    currencies[code] = symbolsArray;\n+  });\n+  return currencies;\n+}\n+\n+/**\n+ * Returns the currency code, symbol and name for a locale\n+ */\n+export function getCurrencySettings(localeName: string, localeData: CldrLocaleData) {\n+  const currencyInfo = localeData.main(`numbers/currencies`);\n+  let currentCurrency = '';\n+\n+  // find the currency currently used in this country\n+  const currencies: any[] =\n+      localeData.get(`supplemental/currencyData/region/${localeData.attributes.territory}`) ||\n+      localeData.get(\n+          `supplemental/currencyData/region/${localeData.attributes.language.toUpperCase()}`);\n+\n+  if (currencies) {\n+    currencies.some(currency => {\n+      const keys = Object.keys(currency);\n+      return keys.some(key => {\n+        if (currency[key]._from && !currency[key]._to) {\n+          return currentCurrency = key;\n+        }\n+      });\n+    });\n+\n+    if (!currentCurrency) {\n+      throw new Error(`Unable to find currency for locale \"${localeName}\"`);\n+    }\n+  }\n+\n+  let currencySettings = [undefined, undefined, undefined];\n+\n+  if (currentCurrency) {\n+    currencySettings = [\n+      currentCurrency, currencyInfo[currentCurrency].symbol,\n+      currencyInfo[currentCurrency].displayName\n+    ];\n+  }\n+\n+  return currencySettings;\n+}"
        },
        {
            "sha": "48f2b20091e58c864bfecf01fe6ffc96da0aa253",
            "filename": "packages/common/locales/generate-locales-tool/locale-extra-file.ts",
            "status": "added",
            "additions": 57,
            "deletions": 0,
            "changes": 57,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Flocale-extra-file.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Flocale-extra-file.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Flocale-extra-file.ts?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,57 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+import {removeDuplicates} from './array-deduplication';\n+import {CldrLocaleData} from './cldr-data';\n+import {getDayPeriodRules, getDayPeriodsNoAmPm} from './day-periods';\n+import {fileHeader} from './file-header';\n+import {stringify} from './object-stringify';\n+\n+/**\n+ * Generate the contents for the extra data file\n+ */\n+export function generateLocaleExtra(locale: string, localeData: CldrLocaleData) {\n+  return `${fileHeader}\n+const u = undefined;\n+\n+export default ${generateDayPeriodsSupplementalString(locale, localeData)};\n+`;\n+}\n+\n+\n+/**\n+ * Collect up the day period rules, and extended day period data.\n+ */\n+export function generateDayPeriodsSupplementalString(locale: string, localeData: CldrLocaleData) {\n+  const dayPeriods = getDayPeriodsNoAmPm(localeData);\n+  const dayPeriodRules = getDayPeriodRules(localeData);\n+\n+  let dayPeriodsSupplemental: any[] = [];\n+  if (Object.keys(dayPeriods.format.narrow).length) {\n+    const keys = Object.keys(dayPeriods.format.narrow);\n+\n+    if (keys.length !== Object.keys(dayPeriodRules).length) {\n+      throw new Error(`Error: locale ${locale} has not the correct number of day period rules`);\n+    }\n+\n+    const dayPeriodsFormat = removeDuplicates([\n+      Object.values(dayPeriods.format.narrow), Object.values(dayPeriods.format.abbreviated),\n+      Object.values(dayPeriods.format.wide)\n+    ]);\n+\n+    const dayPeriodsStandalone = removeDuplicates([\n+      Object.values(dayPeriods['stand-alone'].narrow),\n+      Object.values(dayPeriods['stand-alone'].abbreviated),\n+      Object.values(dayPeriods['stand-alone'].wide)\n+    ]);\n+\n+    const rules = keys.map(key => dayPeriodRules[key]);\n+    dayPeriodsSupplemental = [...removeDuplicates([dayPeriodsFormat, dayPeriodsStandalone]), rules];\n+  }\n+  return stringify(dayPeriodsSupplemental).replace(/undefined/g, 'u');\n+}"
        },
        {
            "sha": "9fd8cf7e0863e58cd226b81190707e357731fb4a",
            "filename": "packages/common/locales/generate-locales-tool/locale-file.ts",
            "status": "added",
            "additions": 225,
            "deletions": 0,
            "changes": 225,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Flocale-file.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Flocale-file.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Flocale-file.ts?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,225 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+import {removeDuplicates} from './array-deduplication';\n+import {CldrLocaleData} from './cldr-data';\n+import {getDayPeriodsAmPm} from './day-periods';\n+import {fileHeader} from './file-header';\n+import {BaseCurrencies} from './locale-base-currencies';\n+import {generateLocaleCurrencies, getCurrencySettings} from './locale-currencies';\n+import {stringify} from './object-stringify';\n+import {getPluralFunction} from './plural-function';\n+\n+const WEEK_DAYS = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\n+\n+/** Generate contents for the basic locale data file */\n+export function generateLocale(\n+    locale: string, localeData: CldrLocaleData, baseCurrencies: BaseCurrencies) {\n+  return `${fileHeader}\n+const u = undefined;\n+\n+${getPluralFunction(locale)}\n+\n+export default ${generateBasicLocaleString(locale, localeData, baseCurrencies)};\n+`;\n+}\n+\n+\n+/**\n+ * Collect up the basic locale data [ localeId, dateTime, number, currency, directionality,\n+ * pluralCase ].\n+ */\n+export function generateBasicLocaleString(\n+    locale: string, localeData: CldrLocaleData, baseCurrencies: BaseCurrencies) {\n+  let data = stringify([\n+               locale,\n+               ...getDateTimeTranslations(localeData),\n+               ...getDateTimeSettings(localeData),\n+               ...getNumberSettings(localeData),\n+               ...getCurrencySettings(locale, localeData),\n+               generateLocaleCurrencies(localeData, baseCurrencies),\n+               getDirectionality(localeData),\n+             ])\n+                 // We remove \"undefined\" added by spreading arrays when there is no value\n+                 .replace(/undefined/g, 'u');\n+\n+  // adding plural function after, because we don't want it as a string. The function named `plural`\n+  // is expected to be available in the file. See `generateLocale` above.\n+  data = data.replace(/\\]$/, ', plural]');\n+  return data;\n+}\n+\n+/**\n+ * Returns the writing direction for a locale\n+ * @returns 'rtl' | 'ltr'\n+ */\n+function getDirectionality(localeData: CldrLocaleData): 'rtl'|'ltr' {\n+  const rtl = localeData.get('scriptMetadata/{script}/rtl');\n+  return rtl === 'YES' ? 'rtl' : 'ltr';\n+}\n+\n+\n+/**\n+ * Returns dateTime data for a locale\n+ * @returns [ firstDayOfWeek, weekendRange, formats ]\n+ */\n+function getDateTimeSettings(localeData: CldrLocaleData) {\n+  return [\n+    getFirstDayOfWeek(localeData), getWeekendRange(localeData), ...getDateTimeFormats(localeData)\n+  ];\n+}\n+\n+\n+\n+/**\n+ * Returns the number symbols and formats for a locale\n+ * @returns [ symbols, formats ]\n+ * symbols: [ decimal, group, list, percentSign, plusSign, minusSign, exponential,\n+ * superscriptingExponent, perMille, infinity, nan, timeSeparator, currencyDecimal?, currencyGroup?\n+ * ]\n+ * formats: [ currency, decimal, percent, scientific ]\n+ */\n+function getNumberSettings(localeData: CldrLocaleData) {\n+  const decimalFormat = localeData.main('numbers/decimalFormats-numberSystem-latn/standard');\n+  const percentFormat = localeData.main('numbers/percentFormats-numberSystem-latn/standard');\n+  const scientificFormat = localeData.main('numbers/scientificFormats-numberSystem-latn/standard');\n+  const currencyFormat = localeData.main('numbers/currencyFormats-numberSystem-latn/standard');\n+  const symbols = localeData.main('numbers/symbols-numberSystem-latn');\n+  const symbolValues = [\n+    symbols.decimal,\n+    symbols.group,\n+    symbols.list,\n+    symbols.percentSign,\n+    symbols.plusSign,\n+    symbols.minusSign,\n+    symbols.exponential,\n+    symbols.superscriptingExponent,\n+    symbols.perMille,\n+    symbols.infinity,\n+    symbols.nan,\n+    symbols.timeSeparator,\n+  ];\n+\n+  if (symbols.currencyDecimal || symbols.currencyGroup) {\n+    symbolValues.push(symbols.currencyDecimal);\n+  }\n+\n+  if (symbols.currencyGroup) {\n+    symbolValues.push(symbols.currencyGroup);\n+  }\n+\n+  return [symbolValues, [decimalFormat, percentFormat, currencyFormat, scientificFormat]];\n+}\n+\n+/**\n+ * Returns week-end range for a locale, based on US week days\n+ * @returns [number, number]\n+ */\n+function getWeekendRange(localeData: CldrLocaleData) {\n+  const startDay =\n+      localeData.get(`supplemental/weekData/weekendStart/${localeData.attributes.territory}`) ||\n+      localeData.get('supplemental/weekData/weekendStart/001');\n+  const endDay =\n+      localeData.get(`supplemental/weekData/weekendEnd/${localeData.attributes.territory}`) ||\n+      localeData.get('supplemental/weekData/weekendEnd/001');\n+  return [WEEK_DAYS.indexOf(startDay), WEEK_DAYS.indexOf(endDay)];\n+}\n+\n+\n+\n+/**\n+ * Returns date-related translations for a locale\n+ * @returns [ dayPeriodsFormat, dayPeriodsStandalone, daysFormat, dayStandalone, monthsFormat,\n+ * monthsStandalone, eras ]\n+ * each value: [ narrow, abbreviated, wide, short? ]\n+ */\n+function getDateTimeTranslations(localeData: CldrLocaleData) {\n+  const dayNames = localeData.main(`dates/calendars/gregorian/days`);\n+  const monthNames = localeData.main(`dates/calendars/gregorian/months`);\n+  const erasNames = localeData.main(`dates/calendars/gregorian/eras`);\n+  const dayPeriods = getDayPeriodsAmPm(localeData);\n+\n+  const dayPeriodsFormat = removeDuplicates([\n+    Object.values(dayPeriods.format.narrow), Object.values(dayPeriods.format.abbreviated),\n+    Object.values(dayPeriods.format.wide)\n+  ]);\n+\n+  const dayPeriodsStandalone = removeDuplicates([\n+    Object.values(dayPeriods['stand-alone'].narrow),\n+    Object.values(dayPeriods['stand-alone'].abbreviated),\n+    Object.values(dayPeriods['stand-alone'].wide)\n+  ]);\n+\n+  const daysFormat = removeDuplicates([\n+    Object.values(dayNames.format.narrow), Object.values(dayNames.format.abbreviated),\n+    Object.values(dayNames.format.wide), Object.values(dayNames.format.short)\n+  ]);\n+\n+  const daysStandalone = removeDuplicates([\n+    Object.values(dayNames['stand-alone'].narrow),\n+    Object.values(dayNames['stand-alone'].abbreviated), Object.values(dayNames['stand-alone'].wide),\n+    Object.values(dayNames['stand-alone'].short)\n+  ]);\n+\n+  const monthsFormat = removeDuplicates([\n+    Object.values(monthNames.format.narrow), Object.values(monthNames.format.abbreviated),\n+    Object.values(monthNames.format.wide)\n+  ]);\n+\n+  const monthsStandalone = removeDuplicates([\n+    Object.values(monthNames['stand-alone'].narrow),\n+    Object.values(monthNames['stand-alone'].abbreviated),\n+    Object.values(monthNames['stand-alone'].wide)\n+  ]);\n+\n+  const eras = removeDuplicates([\n+    [erasNames.eraNarrow['0'], erasNames.eraNarrow['1']],\n+    [erasNames.eraAbbr['0'], erasNames.eraAbbr['1']],\n+    [erasNames.eraNames['0'], erasNames.eraNames['1']]\n+  ]);\n+\n+  const dateTimeTranslations = [\n+    ...removeDuplicates([dayPeriodsFormat, dayPeriodsStandalone]),\n+    ...removeDuplicates([daysFormat, daysStandalone]),\n+    ...removeDuplicates([monthsFormat, monthsStandalone]), eras\n+  ];\n+\n+  return dateTimeTranslations;\n+}\n+\n+\n+/**\n+ * Returns date, time and dateTime formats for a locale\n+ * @returns [dateFormats, timeFormats, dateTimeFormats]\n+ * each format: [ short, medium, long, full ]\n+ */\n+function getDateTimeFormats(localeData: CldrLocaleData) {\n+  function getFormats(data: any) {\n+    return removeDuplicates([\n+      data.short._value || data.short, data.medium._value || data.medium,\n+      data.long._value || data.long, data.full._value || data.full\n+    ]);\n+  }\n+\n+  const dateFormats = localeData.main('dates/calendars/gregorian/dateFormats');\n+  const timeFormats = localeData.main('dates/calendars/gregorian/timeFormats');\n+  const dateTimeFormats = localeData.main('dates/calendars/gregorian/dateTimeFormats');\n+\n+  return [getFormats(dateFormats), getFormats(timeFormats), getFormats(dateTimeFormats)];\n+}\n+\n+\n+/**\n+ * Returns the first day of the week, based on US week days\n+ * @returns number\n+ */\n+function getFirstDayOfWeek(localeData: CldrLocaleData) {\n+  // The `cldrjs` package does not provide proper types for `supplemental`. The\n+  // types are part of the package but embedded incorrectly and not usable.\n+  return WEEK_DAYS.indexOf((localeData as any).supplemental.weekData.firstDay());\n+}"
        },
        {
            "sha": "656c095f8a64b72523c8bb56e6034e3887bd7839",
            "filename": "packages/common/locales/generate-locales-tool/locale-global-file.ts",
            "status": "added",
            "additions": 42,
            "deletions": 0,
            "changes": 42,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Flocale-global-file.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Flocale-global-file.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Flocale-global-file.ts?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,42 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+import {CldrLocaleData} from './cldr-data';\n+import {fileHeader} from './file-header';\n+import {BaseCurrencies} from './locale-base-currencies';\n+import {generateDayPeriodsSupplementalString} from './locale-extra-file';\n+import {generateBasicLocaleString} from './locale-file';\n+import {getPluralFunction} from './plural-function';\n+\n+/**\n+ * Generated the contents for the global locale file\n+ */\n+export function generateLocaleGlobalFile(\n+    locale: string, localeData: CldrLocaleData, baseCurrencies: BaseCurrencies) {\n+  const basicLocaleData = generateBasicLocaleString(locale, localeData, baseCurrencies);\n+  const extraLocaleData = generateDayPeriodsSupplementalString(locale, localeData);\n+  const data = basicLocaleData.replace(/\\]$/, `, ${extraLocaleData}]`);\n+  return `${fileHeader}\n+  (function(global) {\n+    global.ng = global.ng || {};\n+    global.ng.common = global.ng.common || {};\n+    global.ng.common.locales = global.ng.common.locales || {};\n+    const u = undefined;\n+    ${getPluralFunction(locale, false)}\n+    global.ng.common.locales['${normalizeLocale(locale)}'] = ${data};\n+  })(typeof globalThis !== 'undefined' && globalThis || typeof global !== 'undefined' && global || typeof window !== 'undefined' && window);\n+    `;\n+}\n+\n+\n+/**\n+ * In Angular the locale is referenced by a \"normalized\" form.\n+ */\n+function normalizeLocale(locale: string): string {\n+  return locale.toLowerCase().replace(/_/g, '-');\n+}"
        },
        {
            "sha": "2dcc9fc39456c0cb211269f42c3a6584f264993a",
            "filename": "packages/common/locales/generate-locales-tool/object-stringify.ts",
            "status": "added",
            "additions": 30,
            "deletions": 0,
            "changes": 30,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fobject-stringify.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fobject-stringify.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fobject-stringify.ts?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,30 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+const UNDEFINED_PLACEHOLDER = `UNDEFINED_PLACEHOLDER_JSON`;\n+const UNDEFINED_PLACEHOLDER_REGEX = new RegExp(`[\"']${UNDEFINED_PLACEHOLDER}[\"']`, 'g');\n+\n+/**\n+ * Stringifies the given object while preserving `undefined` values which would usually\n+ * be transformed into `null` with JSON5. We want to preserve `undefined` because in generated\n+ * JavaScript, the `undefined` values are separate from `null`, and `undefined` can be minified\n+ * more efficiently. For example in arrays: `[, , someValue]`.\n+ *\n+ * Note that we do not use `JSON5` or similar formats where properties are not explicitly\n+ * wrapped in quotes. Quotes are necessary so that Closure compiler does not accidentally\n+ * rename properties. See an example where the currency symbols will be incorrect:\n+ * https://closure-compiler.appspot.com/home#code%3D%252F%252F%2520%253D%253DClosureCompiler%253D%253D%250A%252F%252F%2520%2540output_file_name%2520default.js%250A%252F%252F%2520%2540compilation_level%2520ADVANCED_OPTIMIZATIONS%250A%252F%252F%2520%253D%253D%252FClosureCompiler%253D%253D%250A%250Aconst%2520base_currencies%2520%253D%2520%257B%250A%2520%2520ABC%253A%2520'd'%252C%250A%2509USD%253A%2520'x'%252C%250A%257D%253B%250A%250Aconst%2520current_locale_currencies%2520%253D%2520%257B%257D%250A%250Afunction%2520getCurrencySymbol(l)%2520%257B%250A%2520%2520return%2520current_locale_currencies%255Bl%255D%2520%257C%257C%2520base_currencies%255Bl%255D%2520%257C%257C%2520l%250A%257D%250A%250Aconsole.log(getCurrencySymbol('de'))%253B\n+ */\n+export function stringify(value: any) {\n+  const result =\n+      JSON.stringify(value, ((_, value) => value === undefined ? UNDEFINED_PLACEHOLDER : value));\n+\n+  UNDEFINED_PLACEHOLDER_REGEX.lastIndex = 0;\n+\n+  return result.replace(UNDEFINED_PLACEHOLDER_REGEX, 'undefined');\n+}"
        },
        {
            "sha": "9cda1d629467871c91d8749e2e109152e2d0ae9d",
            "filename": "packages/common/locales/generate-locales-tool/plural-function.ts",
            "status": "added",
            "additions": 36,
            "deletions": 0,
            "changes": 36,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fplural-function.ts",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fplural-function.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Flocales%2Fgenerate-locales-tool%2Fplural-function.ts?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -0,0 +1,36 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+// There are no types available for `cldr`.\n+const cldr = require('cldr');\n+\n+/**\n+ * Returns the plural function for a locale\n+ * TODO(ocombe): replace \"cldr\" extractPluralRuleFunction with our own extraction using \"CldrJS\"\n+ * because the 2 libs can become out of sync if they use different versions of the cldr database\n+ */\n+export function getPluralFunction(locale: string, withTypes = true) {\n+  let fn = cldr.extractPluralRuleFunction(locale).toString();\n+\n+  const numberType = withTypes ? ': number' : '';\n+  fn =\n+      fn.replace(/function anonymous\\(n[^}]+{/g, `function plural(n${numberType})${numberType} {`)\n+          // Since our generated plural functions only take numbers, we can eliminate some of\n+          // the logic generated by the `cldr` package (to reduce payload size).\n+          .replace(/var/g, /let/)\n+          .replace(/if\\s+\\(typeof\\s+n\\s+===\\s+[\"']string[\"']\\)\\s+n\\s+=\\s+parseInt\\(n,\\s+10\\);/, '');\n+\n+  // The replacement values must match the `Plural` enum from common.\n+  // We do not use the enum directly to avoid depending on that package.\n+  return fn.replace(/[\"']zero[\"']/, '0')\n+      .replace(/[\"']one[\"']/, '1')\n+      .replace(/[\"']two[\"']/, '2')\n+      .replace(/[\"']few[\"']/, '3')\n+      .replace(/[\"']many[\"']/, '4')\n+      .replace(/[\"']other[\"']/, '5');\n+}"
        },
        {
            "sha": "5d1ce7802f5628b8c6422e12817e5458eaaa1cd1",
            "filename": "tools/gulp-tasks/cldr.js",
            "status": "removed",
            "additions": 0,
            "deletions": 43,
            "changes": 43,
            "blob_url": "https://github.com/angular/angular/blob/5822771946d6c72f8b4daa8959da368effe86d37/tools%2Fgulp-tasks%2Fcldr.js",
            "raw_url": "https://github.com/angular/angular/raw/5822771946d6c72f8b4daa8959da368effe86d37/tools%2Fgulp-tasks%2Fcldr.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fgulp-tasks%2Fcldr.js?ref=5822771946d6c72f8b4daa8959da368effe86d37",
            "patch": "@@ -1,43 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-const path = require('path');\n-const fs = require('fs');\n-\n-module.exports = {\n-  extract: gulp => done => {\n-    if (!fs.existsSync(path.join(__dirname, 'cldr/cldr-data'))) {\n-      throw new Error(`You must run \"gulp cldr:download\" before you can extract the data`);\n-    }\n-    const extract = require('./cldr/extract');\n-    return extract(gulp, done);\n-  },\n-\n-  download: gulp => done => {\n-    const cldrDownloader = require('cldr-data-downloader');\n-    const cldrDataFolder = path.join(__dirname, 'cldr/cldr-data');\n-    if (fs.existsSync(cldrDataFolder)) {\n-      fs.rmdirSync(cldrDataFolder, {recursive: true});\n-    } else {\n-      fs.mkdirSync(cldrDataFolder);\n-    }\n-    cldrDownloader(path.join(__dirname, 'cldr/cldr-urls.json'), cldrDataFolder, {}, done);\n-  },\n-\n-  closure: gulp => done => {\n-    const {RELATIVE_I18N_DATA_FOLDER} = require('./cldr/extract');\n-    // tslint:disable-next-line:no-console\n-    console.log(RELATIVE_I18N_DATA_FOLDER, fs.existsSync(RELATIVE_I18N_DATA_FOLDER));\n-    if (!fs.existsSync(RELATIVE_I18N_DATA_FOLDER)) {\n-      throw new Error(\n-          `You must run \"gulp cldr:extract\" before you can create the closure-locale.ts file`);\n-    }\n-    const localeAll = require('./cldr/closure');\n-    return localeAll(gulp, done);\n-  },\n-};"
        },
        {
            "sha": "dc68ab210dd9405f305f951c7ff037f2a1778756",
            "filename": "tools/gulp-tasks/cldr/cldr-data.js",
            "status": "removed",
            "additions": 0,
            "deletions": 86,
            "changes": 86,
            "blob_url": "https://github.com/angular/angular/blob/5822771946d6c72f8b4daa8959da368effe86d37/tools%2Fgulp-tasks%2Fcldr%2Fcldr-data.js",
            "raw_url": "https://github.com/angular/angular/raw/5822771946d6c72f8b4daa8959da368effe86d37/tools%2Fgulp-tasks%2Fcldr%2Fcldr-data.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fgulp-tasks%2Fcldr%2Fcldr-data.js?ref=5822771946d6c72f8b4daa8959da368effe86d37",
            "patch": "@@ -1,86 +0,0 @@\n-// tslint:disable:file-header\n-\n-/**\n- * Npm module for Unicode CLDR JSON data\n- *\n- * @license\n- * Copyright 2013 Rafael Xavier de Souza\n- * Released under the MIT license\n- * https://github.com/rxaviers/cldr-data-npm/blob/master/LICENSE-MIT\n- */\n-\n-'use strict';\n-\n-const JSON_EXTENSION = /^(.*)\\.json$/;\n-\n-const assert = require('assert');\n-const _fs = require('fs');\n-const _path = require('path');\n-\n-function argsToArray(arg) {\n-  return [].slice.call(arg, 0);\n-}\n-\n-function jsonFiles(dirName) {\n-  const fileList = _fs.readdirSync(_path.join(__dirname, 'cldr-data', dirName));\n-\n-  return fileList.reduce(function(sum, file) {\n-    if (JSON_EXTENSION.test(file)) {\n-      return sum.concat(file.match(JSON_EXTENSION)[1]);\n-    }\n-  }, []);\n-}\n-\n-function cldrData(path /*, ...*/) {\n-  assert(\n-      typeof path === 'string',\n-      'must include path (e.g., \"main/en/numbers\" or \"supplemental/likelySubtags\")');\n-\n-  if (arguments.length > 1) {\n-    return argsToArray(arguments).reduce(function(sum, path) {\n-      sum.push(cldrData(path));\n-      return sum;\n-    }, []);\n-  }\n-  return require('./cldr-data/' + path);\n-}\n-\n-function mainPathsFor(locales) {\n-  return locales.reduce(function(sum, locale) {\n-    const mainFiles = jsonFiles(_path.join('main', locale));\n-    mainFiles.forEach(function(mainFile) {\n-      sum.push(_path.join('main', locale, mainFile));\n-    });\n-    return sum;\n-  }, []);\n-}\n-\n-function supplementalPaths() {\n-  const supplementalFiles = jsonFiles('supplemental');\n-\n-  return supplementalFiles.map(function(supplementalFile) {\n-    return _path.join('supplemental', supplementalFile);\n-  });\n-}\n-\n-Object.defineProperty(cldrData, 'availableLocales', {\n-  get: function() {\n-    return cldrData('availableLocales').availableLocales;\n-  }\n-});\n-\n-cldrData.all = function() {\n-  const paths = supplementalPaths().concat(mainPathsFor(this.availableLocales));\n-  return cldrData.apply({}, paths);\n-};\n-\n-cldrData.entireMainFor = function(locale /*, ...*/) {\n-  assert(typeof locale === 'string', 'must include locale (e.g., \"en\")');\n-  return cldrData.apply({}, mainPathsFor(argsToArray(arguments)));\n-};\n-\n-cldrData.entireSupplemental = function() {\n-  return cldrData.apply({}, supplementalPaths());\n-};\n-\n-module.exports = cldrData;"
        },
        {
            "sha": "bec583e83ba087435887447146c058fb7e6681ce",
            "filename": "tools/gulp-tasks/cldr/cldr-urls.json",
            "status": "removed",
            "additions": 0,
            "deletions": 22,
            "changes": 22,
            "blob_url": "https://github.com/angular/angular/blob/5822771946d6c72f8b4daa8959da368effe86d37/tools%2Fgulp-tasks%2Fcldr%2Fcldr-urls.json",
            "raw_url": "https://github.com/angular/angular/raw/5822771946d6c72f8b4daa8959da368effe86d37/tools%2Fgulp-tasks%2Fcldr%2Fcldr-urls.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fgulp-tasks%2Fcldr%2Fcldr-urls.json?ref=5822771946d6c72f8b4daa8959da368effe86d37",
            "patch": "@@ -1,22 +0,0 @@\n-{\n-  \"core\": [\n-    \"https://github.com/unicode-cldr/cldr-core/archive/37.0.0.zip\",\n-    \"https://github.com/unicode-cldr/cldr-segments-modern/archive/37.0.0.zip\",\n-    \"https://github.com/unicode-cldr/cldr-dates-full/archive/37.0.0.zip\",\n-    \"https://github.com/unicode-cldr/cldr-cal-buddhist-full/archive/37.0.0.zip\",\n-    \"https://github.com/unicode-cldr/cldr-cal-chinese-full/archive/37.0.0.zip\",\n-    \"https://github.com/unicode-cldr/cldr-cal-coptic-full/archive/37.0.0.zip\",\n-    \"https://github.com/unicode-cldr/cldr-cal-dangi-full/archive/37.0.0.zip\",\n-    \"https://github.com/unicode-cldr/cldr-cal-ethiopic-full/archive/37.0.0.zip\",\n-    \"https://github.com/unicode-cldr/cldr-cal-hebrew-full/archive/37.0.0.zip\",\n-    \"https://github.com/unicode-cldr/cldr-cal-indian-full/archive/37.0.0.zip\",\n-    \"https://github.com/unicode-cldr/cldr-cal-islamic-full/archive/37.0.0.zip\",\n-    \"https://github.com/unicode-cldr/cldr-cal-japanese-full/archive/37.0.0.zip\",\n-    \"https://github.com/unicode-cldr/cldr-cal-persian-full/archive/37.0.0.zip\",\n-    \"https://github.com/unicode-cldr/cldr-cal-roc-full/archive/37.0.0.zip\",\n-    \"https://github.com/unicode-cldr/cldr-localenames-full/archive/37.0.0.zip\",\n-    \"https://github.com/unicode-cldr/cldr-misc-full/archive/37.0.0.zip\",\n-    \"https://github.com/unicode-cldr/cldr-numbers-full/archive/37.0.0.zip\",\n-    \"https://github.com/unicode-cldr/cldr-units-full/archive/37.0.0.zip\"\n-  ]\n-}"
        },
        {
            "sha": "631d045a3da575df71abdd6ddd23815b00040461",
            "filename": "tools/gulp-tasks/cldr/closure.js",
            "status": "removed",
            "additions": 0,
            "deletions": 163,
            "changes": 163,
            "blob_url": "https://github.com/angular/angular/blob/5822771946d6c72f8b4daa8959da368effe86d37/tools%2Fgulp-tasks%2Fcldr%2Fclosure.js",
            "raw_url": "https://github.com/angular/angular/raw/5822771946d6c72f8b4daa8959da368effe86d37/tools%2Fgulp-tasks%2Fcldr%2Fclosure.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fgulp-tasks%2Fcldr%2Fclosure.js?ref=5822771946d6c72f8b4daa8959da368effe86d37",
            "patch": "@@ -1,163 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-const fs = require('fs');\n-const yargs = require('yargs').argv;\n-const shelljs = require('shelljs');\n-const {I18N_DATA_FOLDER, RELATIVE_I18N_DATA_FOLDER, HEADER} = require('./extract');\n-const OUTPUT_NAME = `closure-locale.ts`;\n-\n-// tslint:disable:no-console\n-module.exports = (gulp, done) => {\n-  // the locales used by closure that will be used to generate the closure-locale file\n-  // extracted from:\n-  // https://github.com/google/closure-library/blob/master/closure/goog/i18n/datetimepatterns.js#L2136\n-  let GOOG_LOCALES = [\n-    'af',    'am',    'ar',    'ar-DZ', 'az',    'be',    'bg',    'bn',     'br',    'bs',\n-    'ca',    'chr',   'cs',    'cy',    'da',    'de',    'de-AT', 'de-CH',  'el',    'en-AU',\n-    'en-CA', 'en-GB', 'en-IE', 'en-IN', 'en-SG', 'en-ZA', 'es',    'es-419', 'es-MX', 'es-US',\n-    'et',    'eu',    'fa',    'fi',    'fr',    'fr-CA', 'ga',    'gl',     'gsw',   'gu',\n-    'haw',   'hi',    'hr',    'hu',    'hy',    'in',    'is',    'it',     'iw',    'ja',\n-    'ka',    'kk',    'km',    'kn',    'ko',    'ky',    'ln',    'lo',     'lt',    'lv',\n-    'mk',    'ml',    'mn',    'mo',    'mr',    'ms',    'mt',    'my',     'ne',    'nl',\n-    'no',    'or',    'pa',    'pl',    'pt',    'pt-PT', 'ro',    'ru',     'sh',    'si',\n-    'sk',    'sl',    'sq',    'sr',    'sv',    'sw',    'ta',    'te',     'th',    'tl',\n-    'tr',    'uk',    'ur',    'uz',    'vi',    'zh',    'zh-CN', 'zh-HK',  'zh-TW', 'zu'\n-  ];\n-\n-  // locale id aliases to support deprecated locale ids used by closure\n-  // it maps deprecated ids --> new ids\n-  // manually extracted from ./cldr-data/supplemental/aliases.json\n-  const ALIASES = {\n-    'in': 'id',\n-    'iw': 'he',\n-    'mo': 'ro-MD',\n-    'no': 'nb',\n-    'nb': 'no-NO',\n-    'sh': 'sr-Latn',\n-    'tl': 'fil',\n-    'pt': 'pt-BR',\n-    'zh-CN': 'zh-Hans-CN',\n-    'zh-Hans-CN': 'zh-Hans',\n-    'zh-HK': 'zh-Hant-HK',\n-    'zh-TW': 'zh-Hant-TW',\n-    'zh-Hant-TW': 'zh-Hant',\n-  };\n-\n-  if (yargs.locales) {\n-    GOOG_LOCALES = yargs.locales.split(',');\n-  }\n-\n-  console.log(`Writing file ${I18N_DATA_FOLDER}/${OUTPUT_NAME}`);\n-  fs.writeFileSync(\n-      `${RELATIVE_I18N_DATA_FOLDER}/${OUTPUT_NAME}`, generateAllLocalesFile(GOOG_LOCALES, ALIASES));\n-\n-  console.log(`Formatting ${I18N_DATA_FOLDER}/${OUTPUT_NAME}...\"`);\n-  shelljs.exec(`yarn clang-format -i ${I18N_DATA_FOLDER}/${OUTPUT_NAME}`, {silent: true});\n-  done();\n-};\n-\n-/**\n- * Generate a file that contains all locale to import for closure.\n- * Tree shaking will only keep the data for the `goog.LOCALE` locale.\n- */\n-function generateAllLocalesFile(LOCALES, ALIASES) {\n-  const existingLocalesAliases = {};\n-  const existingLocalesData = {};\n-\n-  // for each locale, get the data and the list of equivalent locales\n-  LOCALES.forEach(locale => {\n-    const eqLocales = new Set();\n-    eqLocales.add(locale);\n-    if (locale.match(/-/)) {\n-      eqLocales.add(locale.replace(/-/g, '_'));\n-    }\n-\n-    // check for aliases\n-    const alias = ALIASES[locale];\n-    if (alias) {\n-      eqLocales.add(alias);\n-\n-      if (alias.match(/-/)) {\n-        eqLocales.add(alias.replace(/-/g, '_'));\n-      }\n-\n-      // to avoid duplicated \"case\" we regroup all locales in the same \"case\"\n-      // the simplest way to do that is to have alias aliases\n-      // e.g. 'no' --> 'nb', 'nb' --> 'no-NO'\n-      // which means that we'll have 'no', 'nb' and 'no-NO' in the same \"case\"\n-      const aliasKeys = Object.keys(ALIASES);\n-      for (let i = 0; i < aliasKeys.length; i++) {\n-        const aliasValue = ALIASES[alias];\n-        if (aliasKeys.indexOf(alias) !== -1 && !eqLocales.has(aliasValue)) {\n-          eqLocales.add(aliasValue);\n-\n-          if (aliasValue.match(/-/)) {\n-            eqLocales.add(aliasValue.replace(/-/g, '_'));\n-          }\n-        }\n-      }\n-    }\n-\n-    for (let l of eqLocales) {\n-      // find the existing content file\n-      const path = `${RELATIVE_I18N_DATA_FOLDER}/${l}.ts`;\n-      if (fs.existsSync(`${RELATIVE_I18N_DATA_FOLDER}/${l}.ts`)) {\n-        const localeName = formatLocale(locale);\n-        existingLocalesData[locale] =\n-            fs.readFileSync(path, 'utf8')\n-                .replace(`${HEADER}\\n`, '')\n-                .replace('export default ', `export const locale_${localeName} = `)\n-                .replace('function plural', `function plural_${localeName}`)\n-                .replace(/,(\\n  | )plural/, `, plural_${localeName}`)\n-                .replace('const u = undefined;\\n\\n', '');\n-      }\n-    }\n-\n-    existingLocalesAliases[locale] = eqLocales;\n-  });\n-\n-  function generateCases(locale) {\n-    let str = '';\n-    let locales = [];\n-    const eqLocales = existingLocalesAliases[locale];\n-    for (let l of eqLocales) {\n-      str += `case '${l}':\\n`;\n-      locales.push(`'${l}'`);\n-    }\n-    let localesStr = '[' + locales.join(',') + ']';\n-\n-    str += `  l = locale_${formatLocale(locale)};\n-    locales = ${localesStr};\n-    break;\\n`;\n-    return str;\n-  }\n-\n-  function formatLocale(locale) {\n-    return locale.replace(/-/g, '_');\n-  }\n-  // clang-format off\n-  return `${HEADER}\n-import {registerLocaleData} from '../src/i18n/locale_data';\n-\n-const u = undefined;\n-\n-${LOCALES.map(locale => `${existingLocalesData[locale]}`).join('\\n')}\n-\n-let l: any;\n-let locales: string[] = [];\n-\n-switch (goog.LOCALE) {\n-${LOCALES.map(locale => generateCases(locale)).join('')}}\n-\n-if(l) {\n-  locales.forEach(locale => registerLocaleData(l, locale));\n-}\n-`;\n-  // clang-format on\n-}"
        },
        {
            "sha": "aef0ac0001db38d968f3ae5712421396e05546ad",
            "filename": "tools/gulp-tasks/cldr/extract.js",
            "status": "removed",
            "additions": 0,
            "deletions": 632,
            "changes": 632,
            "blob_url": "https://github.com/angular/angular/blob/5822771946d6c72f8b4daa8959da368effe86d37/tools%2Fgulp-tasks%2Fcldr%2Fextract.js",
            "raw_url": "https://github.com/angular/angular/raw/5822771946d6c72f8b4daa8959da368effe86d37/tools%2Fgulp-tasks%2Fcldr%2Fextract.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fgulp-tasks%2Fcldr%2Fextract.js?ref=5822771946d6c72f8b4daa8959da368effe86d37",
            "patch": "@@ -1,632 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-const fs = require('fs');\n-const path = require('path');\n-const stringify = require('./util').stringify;\n-// used to extract plural rules\n-const cldr = require('cldr');\n-// used to extract all other cldr data\n-const cldrJs = require('cldrjs');\n-// used to call to clang-format\n-const shelljs = require('shelljs');\n-\n-const COMMON_PACKAGE = 'packages/common';\n-const CORE_PACKAGE = 'packages/core';\n-const I18N_FOLDER = `${COMMON_PACKAGE}/src/i18n`;\n-const I18N_CORE_FOLDER = `${CORE_PACKAGE}/src/i18n`;\n-const I18N_DATA_FOLDER = `${COMMON_PACKAGE}/locales`;\n-const I18N_DATA_EXTRA_FOLDER = `${I18N_DATA_FOLDER}/extra`;\n-const I18N_GLOBAL_FOLDER = `${I18N_DATA_FOLDER}/global`;\n-const RELATIVE_I18N_FOLDER = path.resolve(__dirname, `../../../${I18N_FOLDER}`);\n-const RELATIVE_I18N_CORE_FOLDER = path.resolve(__dirname, `../../../${I18N_CORE_FOLDER}`);\n-const RELATIVE_I18N_DATA_FOLDER = path.resolve(__dirname, `../../../${I18N_DATA_FOLDER}`);\n-const RELATIVE_I18N_DATA_EXTRA_FOLDER =\n-    path.resolve(__dirname, `../../../${I18N_DATA_EXTRA_FOLDER}`);\n-const RELATIVE_I18N_GLOBAL_FOLDER = path.resolve(__dirname, `../../../${I18N_GLOBAL_FOLDER}`);\n-const DEFAULT_RULE = 'function anonymous(n) {\\nreturn\"other\"\\n}';\n-const EMPTY_RULE = 'function anonymous(n) {\\n\\n}';\n-const WEEK_DAYS = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\n-const HEADER = `/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-// THIS CODE IS GENERATED - DO NOT MODIFY\n-// See angular/tools/gulp-tasks/cldr/extract.js\n-`;\n-\n-// tslint:disable:no-console\n-module.exports = (gulp, done) => {\n-  const cldrData = require('./cldr-data');\n-  const LOCALES = cldrData.availableLocales;\n-\n-  console.log(`Loading CLDR data...`);\n-  cldrJs.load(cldrData.all().concat(cldrData('scriptMetadata')));\n-\n-  console.log(`Writing locale files`);\n-  if (!fs.existsSync(RELATIVE_I18N_FOLDER)) {\n-    fs.mkdirSync(RELATIVE_I18N_FOLDER);\n-  }\n-  if (!fs.existsSync(RELATIVE_I18N_DATA_FOLDER)) {\n-    fs.mkdirSync(RELATIVE_I18N_DATA_FOLDER);\n-  }\n-  if (!fs.existsSync(RELATIVE_I18N_DATA_EXTRA_FOLDER)) {\n-    fs.mkdirSync(RELATIVE_I18N_DATA_EXTRA_FOLDER);\n-  }\n-  if (!fs.existsSync(RELATIVE_I18N_GLOBAL_FOLDER)) {\n-    fs.mkdirSync(RELATIVE_I18N_GLOBAL_FOLDER);\n-  }\n-\n-  console.log(`Writing file ${I18N_FOLDER}/currencies.ts`);\n-  fs.writeFileSync(`${RELATIVE_I18N_FOLDER}/currencies.ts`, generateCurrenciesFile());\n-\n-  const baseCurrencies = generateBaseCurrencies(new cldrJs('en'));\n-  // additional \"en\" file that will be included in common\n-  console.log(`Writing file ${I18N_CORE_FOLDER}/locale_en.ts`);\n-  const localeEnFile = generateLocale('en', new cldrJs('en'), baseCurrencies);\n-  fs.writeFileSync(`${RELATIVE_I18N_CORE_FOLDER}/locale_en.ts`, localeEnFile);\n-\n-  LOCALES.forEach((locale, index) => {\n-    const localeData = new cldrJs(locale);\n-\n-    console.log(`${index + 1}/${LOCALES.length}`);\n-    console.log(`\\t${I18N_DATA_FOLDER}/${locale}.ts`);\n-    fs.writeFileSync(\n-        `${RELATIVE_I18N_DATA_FOLDER}/${locale}.ts`,\n-        locale === 'en' ? localeEnFile : generateLocale(locale, localeData, baseCurrencies));\n-    console.log(`\\t${I18N_DATA_EXTRA_FOLDER}/${locale}.ts`);\n-    fs.writeFileSync(\n-        `${RELATIVE_I18N_DATA_EXTRA_FOLDER}/${locale}.ts`, generateLocaleExtra(locale, localeData));\n-    console.log(`\\t${I18N_GLOBAL_FOLDER}/${locale}.js`);\n-    fs.writeFileSync(\n-        `${RELATIVE_I18N_GLOBAL_FOLDER}/${locale}.js`,\n-        generateGlobalLocale(\n-            locale, locale === 'en' ? new cldrJs('en') : localeData, baseCurrencies));\n-  });\n-  console.log(`${LOCALES.length} locale files generated.`);\n-\n-  console.log(`All i18n cldr files have been generated, formatting files...\"`);\n-  shelljs.exec(\n-      `yarn clang-format -i ${I18N_DATA_FOLDER}/**/*.ts ${I18N_DATA_FOLDER}/*.ts ${\n-          I18N_FOLDER}/currencies.ts ${I18N_CORE_FOLDER}/locale_en.ts ${I18N_GLOBAL_FOLDER}/*.js`,\n-      {silent: true});\n-  done();\n-};\n-\n-/**\n- * Generate contents for the basic locale data file\n- */\n-function generateLocale(locale, localeData, baseCurrencies) {\n-  return `${HEADER}\n-const u = undefined;\n-\n-${getPluralFunction(locale)}\n-\n-export default ${generateBasicLocaleString(locale, localeData, baseCurrencies)};\n-`;\n-}\n-\n-/**\n- * Generate the contents for the extra data file\n- */\n-function generateLocaleExtra(locale, localeData) {\n-  return `${HEADER}\n-const u = undefined;\n-\n-export default ${generateDayPeriodsSupplementalString(locale, localeData)};\n-`;\n-}\n-\n-/**\n- * Generated the contents for the global locale file\n- */\n-function generateGlobalLocale(locale, localeData, baseCurrencies) {\n-  const basicLocaleData = generateBasicLocaleString(locale, localeData, baseCurrencies);\n-  const extraLocaleData = generateDayPeriodsSupplementalString(locale, localeData);\n-  const data = basicLocaleData.replace(/\\]$/, `, ${extraLocaleData}]`);\n-  return `${HEADER}\n-(function(global) {\n-  global.ng = global.ng || {};\n-  global.ng.common = global.ng.common || {};\n-  global.ng.common.locales = global.ng.common.locales || {};\n-  const u = undefined;\n-  ${getPluralFunction(locale, false)}\n-  global.ng.common.locales['${normalizeLocale(locale)}'] = ${data};\n-})(typeof globalThis !== 'undefined' && globalThis || typeof global !== 'undefined' && global || typeof window !== 'undefined' && window);\n-  `;\n-}\n-\n-/**\n- * Collect up the basic locale data [ localeId, dateTime, number, currency, pluralCase ].\n- */\n-function generateBasicLocaleString(locale, localeData, baseCurrencies) {\n-  let data = stringify(\n-                 [\n-                   locale,\n-                   ...getDateTimeTranslations(localeData),\n-                   ...getDateTimeSettings(localeData),\n-                   ...getNumberSettings(localeData),\n-                   ...getCurrencySettings(locale, localeData),\n-                   generateLocaleCurrencies(localeData, baseCurrencies),\n-                   getDirectionality(localeData),\n-                 ],\n-                 true)\n-                 // We remove \"undefined\" added by spreading arrays when there is no value\n-                 .replace(/undefined/g, 'u');\n-\n-  // adding plural function after, because we don't want it as a string\n-  data = data.replace(/\\]$/, ', plural]');\n-  return data;\n-}\n-\n-/**\n- * Collect up the day period rules, and extended day period data.\n- */\n-function generateDayPeriodsSupplementalString(locale, localeData) {\n-  const dayPeriods = getDayPeriodsNoAmPm(localeData);\n-  const dayPeriodRules = getDayPeriodRules(localeData);\n-\n-  let dayPeriodsSupplemental = [];\n-  if (Object.keys(dayPeriods.format.narrow).length) {\n-    const keys = Object.keys(dayPeriods.format.narrow);\n-\n-    if (keys.length !== Object.keys(dayPeriodRules).length) {\n-      throw new Error(`Error: locale ${locale} has not the correct number of day period rules`);\n-    }\n-\n-    const dayPeriodsFormat = removeDuplicates([\n-      objectValues(dayPeriods.format.narrow), objectValues(dayPeriods.format.abbreviated),\n-      objectValues(dayPeriods.format.wide)\n-    ]);\n-\n-    const dayPeriodsStandalone = removeDuplicates([\n-      objectValues(dayPeriods['stand-alone'].narrow),\n-      objectValues(dayPeriods['stand-alone'].abbreviated),\n-      objectValues(dayPeriods['stand-alone'].wide)\n-    ]);\n-\n-    const rules = keys.map(key => dayPeriodRules[key]);\n-    dayPeriodsSupplemental = [...removeDuplicates([dayPeriodsFormat, dayPeriodsStandalone]), rules];\n-  }\n-  return stringify(dayPeriodsSupplemental).replace(/undefined/g, 'u');\n-}\n-\n-/**\n- * Generate a list of currencies to be used as a based for other currencies\n- * e.g.: {'ARS': [, '$'], 'AUD': ['A$', '$'], ...}\n- */\n-function generateBaseCurrencies(localeData, addDigits) {\n-  const currenciesData = localeData.main('numbers/currencies');\n-  const fractions = new cldrJs('en').get(`supplemental/currencyData/fractions`);\n-  const currencies = {};\n-  Object.keys(currenciesData).forEach(key => {\n-    let symbolsArray = [];\n-    const symbol = currenciesData[key].symbol;\n-    const symbolNarrow = currenciesData[key]['symbol-alt-narrow'];\n-    if (symbol && symbol !== key) {\n-      symbolsArray.push(symbol);\n-    }\n-    if (symbolNarrow && symbolNarrow !== symbol) {\n-      if (symbolsArray.length > 0) {\n-        symbolsArray.push(symbolNarrow);\n-      } else {\n-        symbolsArray = [undefined, symbolNarrow];\n-      }\n-    }\n-    if (addDigits && fractions[key] && fractions[key]['_digits']) {\n-      const digits = parseInt(fractions[key]['_digits'], 10);\n-      if (symbolsArray.length === 2) {\n-        symbolsArray.push(digits);\n-      } else if (symbolsArray.length === 1) {\n-        symbolsArray = [...symbolsArray, undefined, digits];\n-      } else {\n-        symbolsArray = [undefined, undefined, digits];\n-      }\n-    }\n-    if (symbolsArray.length > 0) {\n-      currencies[key] = symbolsArray;\n-    }\n-  });\n-  return currencies;\n-}\n-\n-/**\n- * To minimize the file even more, we only output the differences compared to the base currency\n- */\n-function generateLocaleCurrencies(localeData, baseCurrencies) {\n-  const currenciesData = localeData.main('numbers/currencies');\n-  const currencies = {};\n-  Object.keys(currenciesData).forEach(code => {\n-    let symbolsArray = [];\n-    const symbol = currenciesData[code].symbol;\n-    const symbolNarrow = currenciesData[code]['symbol-alt-narrow'];\n-    if (symbol && symbol !== code) {\n-      symbolsArray.push(symbol);\n-    }\n-    if (symbolNarrow && symbolNarrow !== symbol) {\n-      if (symbolsArray.length > 0) {\n-        symbolsArray.push(symbolNarrow);\n-      } else {\n-        symbolsArray = [undefined, symbolNarrow];\n-      }\n-    }\n-\n-    // if locale data are different, set the value\n-    if ((baseCurrencies[code] || []).toString() !== symbolsArray.toString()) {\n-      currencies[code] = symbolsArray;\n-    }\n-  });\n-  return currencies;\n-}\n-\n-/**\n- * Generate a file that contains the list of currencies and their symbols\n- */\n-function generateCurrenciesFile() {\n-  const baseCurrencies = generateBaseCurrencies(new cldrJs('en'), true);\n-\n-  return `${HEADER}\n-export type CurrenciesSymbols = [string] | [string | undefined, string];\n-\n-/** @internal */\n-export const CURRENCIES_EN: {[code: string]: CurrenciesSymbols | [string | undefined, string | undefined, number]} = ${\n-      stringify(baseCurrencies, true)};\n-`;\n-}\n-\n-/**\n- * Returns data for the chosen day periods\n- * @returns {\n- *   format: {narrow / abbreviated / wide: [...]},\n- *   stand-alone: {narrow / abbreviated / wide: [...]}\n- * }\n- */\n-function getDayPeriods(localeData, dayPeriodsList) {\n-  const dayPeriods = localeData.main(`dates/calendars/gregorian/dayPeriods`);\n-  const result = {};\n-  // cleaning up unused keys\n-  Object.keys(dayPeriods).forEach(key1 => {  // format / stand-alone\n-    result[key1] = {};\n-    Object.keys(dayPeriods[key1]).forEach(key2 => {  // narrow / abbreviated / wide\n-      result[key1][key2] = {};\n-      Object.keys(dayPeriods[key1][key2]).forEach(key3 => {\n-        if (dayPeriodsList.indexOf(key3) !== -1) {\n-          result[key1][key2][key3] = dayPeriods[key1][key2][key3];\n-        }\n-      });\n-    });\n-  });\n-\n-  return result;\n-}\n-\n-/**\n- * Returns the basic day periods (am/pm)\n- */\n-function getDayPeriodsAmPm(localeData) {\n-  return getDayPeriods(localeData, ['am', 'pm']);\n-}\n-\n-/**\n- * Returns the extra day periods (without am/pm)\n- */\n-function getDayPeriodsNoAmPm(localeData) {\n-  return getDayPeriods(localeData, [\n-    'noon', 'midnight', 'morning1', 'morning2', 'afternoon1', 'afternoon2', 'evening1', 'evening2',\n-    'night1', 'night2'\n-  ]);\n-}\n-\n-/**\n- * Returns date-related translations for a locale\n- * @returns [ dayPeriodsFormat, dayPeriodsStandalone, daysFormat, dayStandalone, monthsFormat,\n- * monthsStandalone, eras ]\n- * each value: [ narrow, abbreviated, wide, short? ]\n- */\n-function getDateTimeTranslations(localeData) {\n-  const dayNames = localeData.main(`dates/calendars/gregorian/days`);\n-  const monthNames = localeData.main(`dates/calendars/gregorian/months`);\n-  const erasNames = localeData.main(`dates/calendars/gregorian/eras`);\n-  const dayPeriods = getDayPeriodsAmPm(localeData);\n-\n-  const dayPeriodsFormat = removeDuplicates([\n-    objectValues(dayPeriods.format.narrow), objectValues(dayPeriods.format.abbreviated),\n-    objectValues(dayPeriods.format.wide)\n-  ]);\n-\n-  const dayPeriodsStandalone = removeDuplicates([\n-    objectValues(dayPeriods['stand-alone'].narrow),\n-    objectValues(dayPeriods['stand-alone'].abbreviated),\n-    objectValues(dayPeriods['stand-alone'].wide)\n-  ]);\n-\n-  const daysFormat = removeDuplicates([\n-    objectValues(dayNames.format.narrow), objectValues(dayNames.format.abbreviated),\n-    objectValues(dayNames.format.wide), objectValues(dayNames.format.short)\n-  ]);\n-\n-  const daysStandalone = removeDuplicates([\n-    objectValues(dayNames['stand-alone'].narrow), objectValues(dayNames['stand-alone'].abbreviated),\n-    objectValues(dayNames['stand-alone'].wide), objectValues(dayNames['stand-alone'].short)\n-  ]);\n-\n-  const monthsFormat = removeDuplicates([\n-    objectValues(monthNames.format.narrow), objectValues(monthNames.format.abbreviated),\n-    objectValues(monthNames.format.wide)\n-  ]);\n-\n-  const monthsStandalone = removeDuplicates([\n-    objectValues(monthNames['stand-alone'].narrow),\n-    objectValues(monthNames['stand-alone'].abbreviated),\n-    objectValues(monthNames['stand-alone'].wide)\n-  ]);\n-\n-  const eras = removeDuplicates([\n-    [erasNames.eraNarrow['0'], erasNames.eraNarrow['1']],\n-    [erasNames.eraAbbr['0'], erasNames.eraAbbr['1']],\n-    [erasNames.eraNames['0'], erasNames.eraNames['1']]\n-  ]);\n-\n-  const dateTimeTranslations = [\n-    ...removeDuplicates([dayPeriodsFormat, dayPeriodsStandalone]),\n-    ...removeDuplicates([daysFormat, daysStandalone]),\n-    ...removeDuplicates([monthsFormat, monthsStandalone]), eras\n-  ];\n-\n-  return dateTimeTranslations;\n-}\n-\n-/**\n- * Returns date, time and dateTime formats for a locale\n- * @returns [dateFormats, timeFormats, dateTimeFormats]\n- * each format: [ short, medium, long, full ]\n- */\n-function getDateTimeFormats(localeData) {\n-  function getFormats(data) {\n-    return removeDuplicates([\n-      data.short._value || data.short, data.medium._value || data.medium,\n-      data.long._value || data.long, data.full._value || data.full\n-    ]);\n-  }\n-\n-  const dateFormats = localeData.main('dates/calendars/gregorian/dateFormats');\n-  const timeFormats = localeData.main('dates/calendars/gregorian/timeFormats');\n-  const dateTimeFormats = localeData.main('dates/calendars/gregorian/dateTimeFormats');\n-\n-  return [getFormats(dateFormats), getFormats(timeFormats), getFormats(dateTimeFormats)];\n-}\n-\n-/**\n- * Returns day period rules for a locale\n- * @returns string[]\n- */\n-function getDayPeriodRules(localeData) {\n-  const dayPeriodRules =\n-      localeData.get(`supplemental/dayPeriodRuleSet/${localeData.attributes.language}`);\n-  const rules = {};\n-  if (dayPeriodRules) {\n-    Object.keys(dayPeriodRules).forEach(key => {\n-      if (dayPeriodRules[key]._at) {\n-        rules[key] = dayPeriodRules[key]._at;\n-      } else {\n-        rules[key] = [dayPeriodRules[key]._from, dayPeriodRules[key]._before];\n-      }\n-    });\n-  }\n-\n-  return rules;\n-}\n-\n-/**\n- * Returns the first day of the week, based on US week days\n- * @returns number\n- */\n-function getFirstDayOfWeek(localeData) {\n-  return WEEK_DAYS.indexOf(localeData.supplemental.weekData.firstDay());\n-}\n-\n-/**\n- * Returns week-end range for a locale, based on US week days\n- * @returns [number, number]\n- */\n-function getWeekendRange(localeData) {\n-  const startDay =\n-      localeData.get(`supplemental/weekData/weekendStart/${localeData.attributes.territory}`) ||\n-      localeData.get('supplemental/weekData/weekendStart/001');\n-  const endDay =\n-      localeData.get(`supplemental/weekData/weekendEnd/${localeData.attributes.territory}`) ||\n-      localeData.get('supplemental/weekData/weekendEnd/001');\n-  return [WEEK_DAYS.indexOf(startDay), WEEK_DAYS.indexOf(endDay)];\n-}\n-\n-/**\n- * Returns dateTime data for a locale\n- * @returns [ firstDayOfWeek, weekendRange, formats ]\n- */\n-function getDateTimeSettings(localeData) {\n-  return [\n-    getFirstDayOfWeek(localeData), getWeekendRange(localeData), ...getDateTimeFormats(localeData)\n-  ];\n-}\n-\n-/**\n- * Returns the number symbols and formats for a locale\n- * @returns [ symbols, formats ]\n- * symbols: [ decimal, group, list, percentSign, plusSign, minusSign, exponential,\n- * superscriptingExponent, perMille, infinity, nan, timeSeparator, currencyDecimal?, currencyGroup?\n- * ]\n- * formats: [ currency, decimal, percent, scientific ]\n- */\n-function getNumberSettings(localeData) {\n-  const decimalFormat = localeData.main('numbers/decimalFormats-numberSystem-latn/standard');\n-  const percentFormat = localeData.main('numbers/percentFormats-numberSystem-latn/standard');\n-  const scientificFormat = localeData.main('numbers/scientificFormats-numberSystem-latn/standard');\n-  const currencyFormat = localeData.main('numbers/currencyFormats-numberSystem-latn/standard');\n-  const symbols = localeData.main('numbers/symbols-numberSystem-latn');\n-  const symbolValues = [\n-    symbols.decimal,\n-    symbols.group,\n-    symbols.list,\n-    symbols.percentSign,\n-    symbols.plusSign,\n-    symbols.minusSign,\n-    symbols.exponential,\n-    symbols.superscriptingExponent,\n-    symbols.perMille,\n-    symbols.infinity,\n-    symbols.nan,\n-    symbols.timeSeparator,\n-  ];\n-\n-  if (symbols.currencyDecimal || symbols.currencyGroup) {\n-    symbolValues.push(symbols.currencyDecimal);\n-  }\n-\n-  if (symbols.currencyGroup) {\n-    symbolValues.push(symbols.currencyGroup);\n-  }\n-\n-  return [symbolValues, [decimalFormat, percentFormat, currencyFormat, scientificFormat]];\n-}\n-\n-/**\n- * Returns the currency code, symbol and name for a locale\n- * @returns [ code, symbol, name ]\n- */\n-function getCurrencySettings(locale, localeData) {\n-  const currencyInfo = localeData.main(`numbers/currencies`);\n-  let currentCurrency = '';\n-\n-  // find the currency currently used in this country\n-  const currencies =\n-      localeData.get(`supplemental/currencyData/region/${localeData.attributes.territory}`) ||\n-      localeData.get(\n-          `supplemental/currencyData/region/${localeData.attributes.language.toUpperCase()}`);\n-\n-  if (currencies) {\n-    currencies.some(currency => {\n-      const keys = Object.keys(currency);\n-      return keys.some(key => {\n-        if (currency[key]._from && !currency[key]._to) {\n-          return currentCurrency = key;\n-        }\n-      });\n-    });\n-\n-    if (!currentCurrency) {\n-      throw new Error(`Unable to find currency for locale \"${locale}\"`);\n-    }\n-  }\n-\n-  let currencySettings = [undefined, undefined, undefined];\n-\n-  if (currentCurrency) {\n-    currencySettings = [\n-      currentCurrency, currencyInfo[currentCurrency].symbol,\n-      currencyInfo[currentCurrency].displayName\n-    ];\n-  }\n-\n-  return currencySettings;\n-}\n-\n-/**\n- * Returns the writing direction for a locale\n- * @returns 'rtl' | 'ltr'\n- */\n-function getDirectionality(localeData) {\n-  const rtl = localeData.get('scriptMetadata/{script}/rtl');\n-  return rtl === 'YES' ? 'rtl' : 'ltr';\n-}\n-\n-/**\n- * Transforms a string into a regexp\n- */\n-function toRegExp(s) {\n-  return new RegExp(s.replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1'), 'g');\n-}\n-\n-/**\n- * Returns the plural function for a locale\n- * todo(ocombe): replace \"cldr\" extractPluralRuleFunction with our own extraction using \"CldrJS\"\n- * because the 2 libs can become out of sync if they use different versions of the cldr database\n- */\n-function getPluralFunction(locale, withTypes = true) {\n-  let fn = cldr.extractPluralRuleFunction(locale).toString();\n-\n-  if (fn === EMPTY_RULE) {\n-    fn = DEFAULT_RULE;\n-  }\n-\n-  const numberType = withTypes ? ': number' : '';\n-  fn = fn.replace(/function anonymous\\(n[^}]+{/g, `function plural(n${numberType})${numberType} {`)\n-           .replace(toRegExp('var'), 'let')\n-           .replace(toRegExp('if(typeof n===\"string\")n=parseInt(n,10);'), '')\n-           .replace(toRegExp('\\n}'), ';\\n}');\n-\n-  // The replacement values must match the `Plural` enum from common.\n-  // We do not use the enum directly to avoid depending on that package.\n-  return fn.replace(toRegExp('\"zero\"'), ' 0')\n-      .replace(toRegExp('\"one\"'), ' 1')\n-      .replace(toRegExp('\"two\"'), ' 2')\n-      .replace(toRegExp('\"few\"'), ' 3')\n-      .replace(toRegExp('\"many\"'), ' 4')\n-      .replace(toRegExp('\"other\"'), ' 5');\n-}\n-\n-/**\n- * Return an array of values from an object\n- */\n-function objectValues(obj) {\n-  return Object.keys(obj).map(key => obj[key]);\n-}\n-\n-/**\n- * To create smaller locale files, we remove duplicated data.\n- * To be make this work we need to store similar data in arrays, if some value in an array\n- * is undefined, we can take the previous defined value instead, because it means that it has\n- * been deduplicated.\n- * e.g.: [x, y, undefined, z, undefined, undefined]\n- * The first undefined is equivalent to y, the second and third are equivalent to z\n- * Note that the first value in an array is always defined.\n- *\n- * Also since we need to know which data is assumed similar, it is important that we store those\n- * similar data in arrays to mark the delimitation between values that have different meanings\n- * (e.g. months and days).\n- *\n- * For further size improvements, \"undefined\" values will be replaced by a constant in the arrays\n- * as the last step of the file generation (in generateLocale and generateLocaleExtra).\n- * e.g.: [x, y, undefined, z, undefined, undefined] will be [x, y, u, z, u, u]\n- */\n-function removeDuplicates(data) {\n-  const dedup = [data[0]];\n-  for (let i = 1; i < data.length; i++) {\n-    if (stringify(data[i]) !== stringify(data[i - 1])) {\n-      dedup.push(data[i]);\n-    } else {\n-      dedup.push(undefined);\n-    }\n-  }\n-  return dedup;\n-}\n-\n-/**\n- * In Angular the locale is referenced by a \"normalized\" form.\n- */\n-function normalizeLocale(locale) {\n-  return locale.toLowerCase().replace(/_/g, '-');\n-}\n-\n-module.exports.I18N_FOLDER = I18N_FOLDER;\n-module.exports.I18N_DATA_FOLDER = I18N_DATA_FOLDER;\n-module.exports.RELATIVE_I18N_DATA_FOLDER = RELATIVE_I18N_DATA_FOLDER;\n-module.exports.HEADER = HEADER;"
        },
        {
            "sha": "4b6c005f73bce5f4d8f5211550a0c6c9153cc643",
            "filename": "tools/gulp-tasks/cldr/util.js",
            "status": "removed",
            "additions": 0,
            "deletions": 182,
            "changes": 182,
            "blob_url": "https://github.com/angular/angular/blob/5822771946d6c72f8b4daa8959da368effe86d37/tools%2Fgulp-tasks%2Fcldr%2Futil.js",
            "raw_url": "https://github.com/angular/angular/raw/5822771946d6c72f8b4daa8959da368effe86d37/tools%2Fgulp-tasks%2Fcldr%2Futil.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fgulp-tasks%2Fcldr%2Futil.js?ref=5822771946d6c72f8b4daa8959da368effe86d37",
            "patch": "@@ -1,182 +0,0 @@\n-// tslint:disable:file-header\n-\n-/**\n- * Like JSON.stringify, but without double quotes around keys, and without null instead of undefined\n- * values\n- * Based on https://github.com/json5/json5/blob/master/lib/json5.js\n- * Use option \"quoteKeys\" to preserve quotes for keys\n- */\n-module.exports.stringify = function(obj, quoteKeys) {\n-  var getReplacedValueOrUndefined = function(holder, key) {\n-    var value = holder[key];\n-\n-    // Replace the value with its toJSON value first, if possible\n-    if (value && value.toJSON && typeof value.toJSON === 'function') {\n-      value = value.toJSON();\n-    }\n-\n-    return value;\n-  };\n-\n-  function isWordChar(c) {\n-    return (c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') || (c >= '0' && c <= '9') ||\n-        c === '_' || c === '$';\n-  }\n-\n-  function isWordStart(c) {\n-    return (c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') || c === '_' || c === '$';\n-  }\n-\n-  function isWord(key) {\n-    if (typeof key !== 'string') {\n-      return false;\n-    }\n-    if (!isWordStart(key[0])) {\n-      return false;\n-    }\n-    var i = 1, length = key.length;\n-    while (i < length) {\n-      if (!isWordChar(key[i])) {\n-        return false;\n-      }\n-      i++;\n-    }\n-    return true;\n-  }\n-\n-  // polyfills\n-  function isArray(obj) {\n-    if (Array.isArray) {\n-      return Array.isArray(obj);\n-    } else {\n-      return Object.prototype.toString.call(obj) === '[object Array]';\n-    }\n-  }\n-\n-  function isDate(obj) {\n-    return Object.prototype.toString.call(obj) === '[object Date]';\n-  }\n-\n-  var objStack = [];\n-  function checkForCircular(obj) {\n-    for (var i = 0; i < objStack.length; i++) {\n-      if (objStack[i] === obj) {\n-        throw new TypeError('Converting circular structure to JSON');\n-      }\n-    }\n-  }\n-\n-  // Copied from Crokford's implementation of JSON\n-  // See\n-  // https://github.com/douglascrockford/JSON-js/blob/e39db4b7e6249f04a195e7dd0840e610cc9e941e/json2.js#L195\n-  // Begin\n-  var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n-    escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n-    meta = { // table of character substitutions\n-      '\\b': '\\\\b',\n-      '\\t': '\\\\t',\n-      '\\n': '\\\\n',\n-      '\\f': '\\\\f',\n-      '\\r': '\\\\r',\n-      '\"' : '\\\\\"',\n-      '\\\\': '\\\\\\\\'\n-    };\n-  function escapeString(str, keepQuotes) {\n-    // If the string contains no control characters, no quote characters, and no\n-    // backslash characters, then we can safely slap some quotes around it.\n-    // Otherwise we must also replace the offending characters with safe escape\n-    // sequences.\n-    escapable.lastIndex = 0;\n-    return escapable.test(str) && !keepQuotes ? '\"' + str.replace(escapable, function(a) {\n-      var c = meta[a];\n-      return typeof c === 'string' ? c : '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n-    }) + '\"' : '\"' + str + '\"';\n-  }\n-  // End\n-\n-  function internalStringify(holder, key) {\n-    var buffer, res;\n-\n-    // Replace the value, if necessary\n-    var obj_part = getReplacedValueOrUndefined(holder, key);\n-\n-    if (obj_part && !isDate(obj_part)) {\n-      // unbox objects\n-      // don't unbox dates, since will turn it into number\n-      obj_part = obj_part.valueOf();\n-    }\n-    switch (typeof obj_part) {\n-      case 'boolean':\n-        return obj_part.toString();\n-\n-      case 'number':\n-        if (isNaN(obj_part) || !isFinite(obj_part)) {\n-          return 'null';\n-        }\n-        return obj_part.toString();\n-\n-      case 'string':\n-        return escapeString(obj_part.toString());\n-\n-      case 'object':\n-        if (obj_part === null) {\n-          return 'null';\n-        } else if (isArray(obj_part)) {\n-          checkForCircular(obj_part);\n-          buffer = '[';\n-          objStack.push(obj_part);\n-\n-          for (var i = 0; i < obj_part.length; i++) {\n-            res = internalStringify(obj_part, i);\n-            if (res === null) {\n-              buffer += 'null';\n-            } /* else if (typeof res === 'undefined') {  // modified to support empty array values\n-              buffer += '';\n-            }*/\n-            else {\n-              buffer += res;\n-            }\n-            if (i < obj_part.length - 1) {\n-              buffer += ',';\n-            }\n-          }\n-          objStack.pop();\n-          buffer += ']';\n-        } else {\n-          checkForCircular(obj_part);\n-          buffer = '{';\n-          var nonEmpty = false;\n-          objStack.push(obj_part);\n-          for (var prop in obj_part) {\n-            if (obj_part.hasOwnProperty(prop)) {\n-              var value = internalStringify(obj_part, prop);\n-              if (typeof value !== 'undefined' && value !== null) {\n-                nonEmpty = true;\n-                key = isWord(prop) && !quoteKeys ? prop : escapeString(prop, quoteKeys);\n-                buffer += key + ':' + value + ',';\n-              }\n-            }\n-          }\n-          objStack.pop();\n-          if (nonEmpty) {\n-            buffer = buffer.substring(0, buffer.length - 1) + '}';\n-          } else {\n-            buffer = '{}';\n-          }\n-        }\n-        return buffer;\n-      default:\n-        // functions and undefined should be ignored\n-        return undefined;\n-    }\n-  }\n-\n-  // special case...when undefined is used inside of\n-  // a compound object/array, return null.\n-  // but when top-level, return undefined\n-  var topLevelHolder = {'': obj};\n-  if (obj === undefined) {\n-    return getReplacedValueOrUndefined(topLevelHolder, '');\n-  }\n-  return internalStringify(topLevelHolder, '');\n-};"
        },
        {
            "sha": "2c21b76aa5be0b2597f2112dc6574a9e2d6ccd3b",
            "filename": "yarn.lock",
            "status": "modified",
            "additions": 30,
            "deletions": 156,
            "changes": 186,
            "blob_url": "https://github.com/angular/angular/blob/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/yarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/1eaeb23c753069ea9dca0aaaa40bf2fe4f618727/yarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/yarn.lock?ref=1eaeb23c753069ea9dca0aaaa40bf2fe4f618727",
            "patch": "@@ -1620,6 +1620,11 @@\n   resolved \"https://registry.yarnpkg.com/@types/bluebird/-/bluebird-3.5.35.tgz#3964c48372bf62d60616d8673dd77a9719ebac9b\"\n   integrity sha512-2WeeXK7BuQo7yPI4WGOBum90SzF/f8rqlvpaXx4rjeTmNssGRDHWf7fgDUH90xMB3sUOu716fUK5d+OVx0+ncQ==\n \n+\"@types/cldrjs@^0.4.22\":\n+  version \"0.4.22\"\n+  resolved \"https://registry.yarnpkg.com/@types/cldrjs/-/cldrjs-0.4.22.tgz#24e31cdf15a4ea806ca0a774b024150d1066fea1\"\n+  integrity sha512-YyzxXZ5s9xwPWznXnI3++X14JGnomDdDAlin7kWZvxX/MzirC9BNFcDSQ0yR8YG2M/xNMn0nXsCGkgbFVyXjGw==\n+\n \"@types/cli-progress@^3.4.2\":\n   version \"3.9.1\"\n   resolved \"https://registry.yarnpkg.com/@types/cli-progress/-/cli-progress-3.9.1.tgz#285e7fbdad6e7baf072d163ae1c3b23b7b219130\"\n@@ -2132,11 +2137,6 @@ adjust-sourcemap-loader@^4.0.0:\n     loader-utils \"^2.0.0\"\n     regex-parser \"^2.2.11\"\n \n-adm-zip@0.4.11:\n-  version \"0.4.11\"\n-  resolved \"https://registry.yarnpkg.com/adm-zip/-/adm-zip-0.4.11.tgz#2aa54c84c4b01a9d0fb89bb11982a51f13e3d62a\"\n-  integrity sha512-L8vcjDTCOIJk7wFvmlEUN7AsSb8T+2JrdP7KINBjzr24TJ5Mwj590sLu3BC7zNZowvJWa/JtPmD8eJCzdtDWjA==\n-\n adm-zip@^0.4.9, adm-zip@~0.4.3:\n   version \"0.4.16\"\n   resolved \"https://registry.yarnpkg.com/adm-zip/-/adm-zip-0.4.16.tgz#cf4c508fdffab02c269cbc7f471a875f05570365\"\n@@ -2210,16 +2210,6 @@ ajv@8.2.0:\n     require-from-string \"^2.0.2\"\n     uri-js \"^4.2.2\"\n \n-ajv@^5.1.0:\n-  version \"5.5.2\"\n-  resolved \"https://registry.yarnpkg.com/ajv/-/ajv-5.5.2.tgz#73b5eeca3fab653e3d3f9422b341ad42205dc965\"\n-  integrity sha1-c7Xuyj+rZT49P5Qis0GtQiBdyWU=\n-  dependencies:\n-    co \"^4.6.0\"\n-    fast-deep-equal \"^1.0.0\"\n-    fast-json-stable-stringify \"^2.0.0\"\n-    json-schema-traverse \"^0.3.0\"\n-\n ajv@^6.1.0, ajv@^6.12.2, ajv@^6.12.3, ajv@^6.12.4, ajv@^6.12.5:\n   version \"6.12.6\"\n   resolved \"https://registry.yarnpkg.com/ajv/-/ajv-6.12.6.tgz#baf5a62e802b07d977034586f8c3baf5adf26df4\"\n@@ -2724,7 +2714,7 @@ aws-sign2@~0.7.0:\n   resolved \"https://registry.yarnpkg.com/aws-sign2/-/aws-sign2-0.7.0.tgz#b46e890934a9591f2d2f6f86d7e6a9f1b3fe76a8\"\n   integrity sha1-tG6JCTSpWR8tL2+G1+ap8bP+dqg=\n \n-aws4@^1.6.0, aws4@^1.8.0:\n+aws4@^1.8.0:\n   version \"1.11.0\"\n   resolved \"https://registry.yarnpkg.com/aws4/-/aws4-1.11.0.tgz#d61f46d83b2519250e2784daf5b09479a8b41c59\"\n   integrity sha512-xh1Rl34h6Fi1DC2WWKfxUTVqRsNnr6LsKz2+hfwDxQJWmrx8+c7ylaqBMcHfl1U1r2dsifOvKX3LQuLNZ+XSvA==\n@@ -3511,33 +3501,20 @@ class-utils@^0.3.5:\n     isobject \"^3.0.0\"\n     static-extend \"^0.1.1\"\n \n-cldr-data-downloader@^0.3.5:\n-  version \"0.3.5\"\n-  resolved \"https://registry.yarnpkg.com/cldr-data-downloader/-/cldr-data-downloader-0.3.5.tgz#f5445cb9d222bf7fa8426c62e0ae9d7d4897b243\"\n-  integrity sha512-uyIMa1K98DAp/PE7dYpq2COIrkWn681Atjng1GgEzeJzYb1jANtugtp9wre6+voE+qzVC8jtWv6E/xZ1GTJdlw==\n-  dependencies:\n-    adm-zip \"0.4.11\"\n-    mkdirp \"0.5.0\"\n-    nopt \"3.0.x\"\n-    progress \"1.1.8\"\n-    q \"1.0.1\"\n-    request \"~2.87.0\"\n-    request-progress \"0.3.1\"\n-\n-cldr@7.0.0:\n-  version \"7.0.0\"\n-  resolved \"https://registry.yarnpkg.com/cldr/-/cldr-7.0.0.tgz#8e0f42acc21b5762842cf23a747120be898447fe\"\n-  integrity sha512-BmD93+RhHGkdVRO9LYL6kd7IA9ANxnpH1A+OM6FdhKVYXqRgBaDmt9P83VaQB6gMBaFvOl4IozW/g3ViLn9LeQ==\n+cldr@5.7.0:\n+  version \"5.7.0\"\n+  resolved \"https://registry.yarnpkg.com/cldr/-/cldr-5.7.0.tgz#8c466bdc2500fd293462029631011adcd55bc5ae\"\n+  integrity sha512-Pyoh0kwXJIUvbAvQoQqKIr0pKWwWfkcYCIDKWmVIxJ9HftSsg57AqyfW1EzWRcP4nJj40WX4vB/lXQ+Uw4NbNA==\n   dependencies:\n-    escodegen \"^2.0.0\"\n+    escodegen \"^1.12.0\"\n     esprima \"^4.0.1\"\n     memoizeasync \"^1.1.0\"\n     passerror \"^1.1.1\"\n     pegjs \"^0.10.0\"\n     seq \"^0.3.5\"\n     unicoderegexp \"^0.4.1\"\n-    xmldom \"^0.6.0\"\n-    xpath \"^0.0.32\"\n+    xmldom \"^0.3.0\"\n+    xpath \"^0.0.27\"\n \n cldrjs@0.5.5:\n   version \"0.5.5\"\n@@ -3691,11 +3668,6 @@ cloneable-readable@^1.0.0:\n     process-nextick-args \"^2.0.0\"\n     readable-stream \"^2.3.5\"\n \n-co@^4.6.0:\n-  version \"4.6.0\"\n-  resolved \"https://registry.yarnpkg.com/co/-/co-4.6.0.tgz#6ea6bdf3d853ae54ccb8e47bfa0bf3f9031fb184\"\n-  integrity sha1-bqa989hTrlTMuOR7+gvz+QMfsYQ=\n-\n code-point-at@^1.0.0:\n   version \"1.1.0\"\n   resolved \"https://registry.yarnpkg.com/code-point-at/-/code-point-at-1.1.0.tgz#0d070b4d043a5bea33a2f1a40e2edb3d9a4ccf77\"\n@@ -3796,7 +3768,7 @@ colorspace@1.1.x:\n     color \"3.0.x\"\n     text-hex \"1.0.x\"\n \n-combined-stream@^1.0.6, combined-stream@^1.0.8, combined-stream@~1.0.5, combined-stream@~1.0.6:\n+combined-stream@^1.0.6, combined-stream@^1.0.8, combined-stream@~1.0.6:\n   version \"1.0.8\"\n   resolved \"https://registry.yarnpkg.com/combined-stream/-/combined-stream-1.0.8.tgz#c3d45a8b34fd730631a110a8a2520682b31d5a7f\"\n   integrity sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==\n@@ -5263,7 +5235,7 @@ escape-string-regexp@^1.0.2, escape-string-regexp@^1.0.5:\n   resolved \"https://registry.yarnpkg.com/escape-string-regexp/-/escape-string-regexp-1.0.5.tgz#1b61c0562190a8dff6ae3bb2cf0200ca130b86d4\"\n   integrity sha1-G2HAViGQqN/2rjuyzwIAyhMLhtQ=\n \n-escodegen@^1.8.1:\n+escodegen@^1.12.0, escodegen@^1.8.1:\n   version \"1.14.3\"\n   resolved \"https://registry.yarnpkg.com/escodegen/-/escodegen-1.14.3.tgz#4e7b81fba61581dc97582ed78cab7f0e8d63f503\"\n   integrity sha512-qFcX0XJkdg+PB3xjZZG/wKSuT1PnQWx57+TVSjIMmILd2yC/6ByYElPwJnslDsuWuSAp4AwJGumarAAmJch5Kw==\n@@ -5530,7 +5502,7 @@ extend-shallow@^3.0.0, extend-shallow@^3.0.2:\n     assign-symbols \"^1.0.0\"\n     is-extendable \"^1.0.1\"\n \n-extend@^3.0.0, extend@^3.0.2, extend@~3.0.1, extend@~3.0.2:\n+extend@^3.0.0, extend@^3.0.2, extend@~3.0.2:\n   version \"3.0.2\"\n   resolved \"https://registry.yarnpkg.com/extend/-/extend-3.0.2.tgz#f8b1136b4071fbd8eb140aff858b1019ec2915fa\"\n   integrity sha512-fjquC59cD7CyW6urNXK0FBufkZcoiGG80wTuPujX590cB5Ttln20E2UB4S/WARVqhXffZl2LNgS+gQdPIIim/g==\n@@ -5589,11 +5561,6 @@ fancy-log@^1.3.2:\n     parse-node-version \"^1.0.0\"\n     time-stamp \"^1.0.0\"\n \n-fast-deep-equal@^1.0.0:\n-  version \"1.1.0\"\n-  resolved \"https://registry.yarnpkg.com/fast-deep-equal/-/fast-deep-equal-1.1.0.tgz#c053477817c86b51daa853c81e059b733d023614\"\n-  integrity sha1-wFNHeBfIa1HaqFPIHgWbcz0CNhQ=\n-\n fast-deep-equal@^3.1.1:\n   version \"3.1.3\"\n   resolved \"https://registry.yarnpkg.com/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz#3a7d56b559d6cbc3eb512325244e619a65c6c525\"\n@@ -5972,7 +5939,7 @@ form-data@^3.0.0:\n     combined-stream \"^1.0.8\"\n     mime-types \"^2.1.12\"\n \n-form-data@~2.3.1, form-data@~2.3.2:\n+form-data@~2.3.2:\n   version \"2.3.3\"\n   resolved \"https://registry.yarnpkg.com/form-data/-/form-data-2.3.3.tgz#dcce52c05f644f298c6a7ab936bd724ceffbf3a6\"\n   integrity sha512-1lLKB2Mu3aGP1Q/2eCOx0fNbRMe7XdwktwOruhfqqd0rIJWwN4Dh+E3hrPSlDCXnSR7UtZ1N38rVXm+6+MEhJQ==\n@@ -6651,14 +6618,6 @@ har-schema@^2.0.0:\n   resolved \"https://registry.yarnpkg.com/har-schema/-/har-schema-2.0.0.tgz#a94c2224ebcac04782a0d9035521f24735b7ec92\"\n   integrity sha1-qUwiJOvKwEeCoNkDVSHyRzW37JI=\n \n-har-validator@~5.0.3:\n-  version \"5.0.3\"\n-  resolved \"https://registry.yarnpkg.com/har-validator/-/har-validator-5.0.3.tgz#ba402c266194f15956ef15e0fcf242993f6a7dfd\"\n-  integrity sha1-ukAsJmGU8VlW7xXg/PJCmT9qff0=\n-  dependencies:\n-    ajv \"^5.1.0\"\n-    har-schema \"^2.0.0\"\n-\n har-validator@~5.1.3:\n   version \"5.1.5\"\n   resolved \"https://registry.yarnpkg.com/har-validator/-/har-validator-5.1.5.tgz#1f0803b9f8cb20c0fa13822df1ecddb36bde1efd\"\n@@ -7902,11 +7861,6 @@ json-ptr@^2.2.0:\n   dependencies:\n     tslib \"^2.2.0\"\n \n-json-schema-traverse@^0.3.0:\n-  version \"0.3.1\"\n-  resolved \"https://registry.yarnpkg.com/json-schema-traverse/-/json-schema-traverse-0.3.1.tgz#349a6d44c53a51de89b40805c5d5e59b417d3340\"\n-  integrity sha1-NJptRMU6Ud6JtAgFxdXlm0F9M0A=\n-\n json-schema-traverse@^0.4.1:\n   version \"0.4.1\"\n   resolved \"https://registry.yarnpkg.com/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz#69f6a87d9513ab8bb8fe63bdb0979c448e684660\"\n@@ -9033,11 +8987,6 @@ minimist-options@4.1.0:\n     is-plain-obj \"^1.1.0\"\n     kind-of \"^6.0.3\"\n \n-minimist@0.0.8:\n-  version \"0.0.8\"\n-  resolved \"https://registry.yarnpkg.com/minimist/-/minimist-0.0.8.tgz#857fcabfc3397d2625b8228262e86aa7a011b05d\"\n-  integrity sha1-hX/Kv8M5fSYluCKCYuhqp6ARsF0=\n-\n minimist@1.x, minimist@^1.1.0, minimist@^1.1.3, minimist@^1.2.0, minimist@^1.2.5:\n   version \"1.2.5\"\n   resolved \"https://registry.yarnpkg.com/minimist/-/minimist-1.2.5.tgz#67d66014b66a6a8aaa0c083c5fd58df4e4e97602\"\n@@ -9138,13 +9087,6 @@ mkdirp-classic@^0.5.2:\n   resolved \"https://registry.yarnpkg.com/mkdirp-classic/-/mkdirp-classic-0.5.3.tgz#fa10c9115cc6d8865be221ba47ee9bed78601113\"\n   integrity sha512-gKLcREMhtuZRwRAfqP3RFW+TK4JqApVBtOIftVgjuABpAtpxhPGaDcfvbhNvD0B8iD1oUr/txX35NjcaY6Ns/A==\n \n-mkdirp@0.5.0:\n-  version \"0.5.0\"\n-  resolved \"https://registry.yarnpkg.com/mkdirp/-/mkdirp-0.5.0.tgz#1d73076a6df986cd9344e15e71fcc05a4c9abf12\"\n-  integrity sha1-HXMHam35hs2TROFecfzAWkyavxI=\n-  dependencies:\n-    minimist \"0.0.8\"\n-\n \"mkdirp@>=0.5 0\", mkdirp@^0.5.0, mkdirp@^0.5.1, mkdirp@^0.5.3, mkdirp@^0.5.5:\n   version \"0.5.5\"\n   resolved \"https://registry.yarnpkg.com/mkdirp/-/mkdirp-0.5.5.tgz#d91cefd62d1436ca0f41620e251288d420099def\"\n@@ -9413,13 +9355,6 @@ nodejs-websocket@^1.7.2:\n   resolved \"https://registry.yarnpkg.com/nodejs-websocket/-/nodejs-websocket-1.7.2.tgz#94abd1e248f57d4d1c663dec3831015c6dad98a6\"\n   integrity sha512-PFX6ypJcCNDs7obRellR0DGTebfUhw1SXGKe2zpB+Ng1DQJhdzbzx1ob+AvJCLzy2TJF4r8cCDqMQqei1CZdPQ==\n \n-nopt@3.0.x:\n-  version \"3.0.6\"\n-  resolved \"https://registry.yarnpkg.com/nopt/-/nopt-3.0.6.tgz#c6465dbf08abcd4db359317f79ac68a646b28ff9\"\n-  integrity sha1-xkZdvwirzU2zWTF/eaxopkayj/k=\n-  dependencies:\n-    abbrev \"1\"\n-\n nopt@^5.0.0:\n   version \"5.0.0\"\n   resolved \"https://registry.yarnpkg.com/nopt/-/nopt-5.0.0.tgz#530942bb58a512fccafe53fe210f13a25355dc88\"\n@@ -9580,11 +9515,6 @@ number-is-nan@^1.0.0:\n   resolved \"https://registry.yarnpkg.com/number-is-nan/-/number-is-nan-1.0.1.tgz#097b602b53422a522c1afb8790318336941a011d\"\n   integrity sha1-CXtgK1NCKlIsGvuHkDGDNpQaAR0=\n \n-oauth-sign@~0.8.2:\n-  version \"0.8.2\"\n-  resolved \"https://registry.yarnpkg.com/oauth-sign/-/oauth-sign-0.8.2.tgz#46a6ab7f0aead8deae9ec0565780b7d4efeb9d43\"\n-  integrity sha1-Rqarfwrq2N6unsBWV4C31O/rnUM=\n-\n oauth-sign@~0.9.0:\n   version \"0.9.0\"\n   resolved \"https://registry.yarnpkg.com/oauth-sign/-/oauth-sign-0.9.0.tgz#47a7b016baa68b5fa0ecf3dee08a85c679ac6455\"\n@@ -10970,11 +10900,6 @@ process-nextick-args@~1.0.6:\n   resolved \"https://registry.yarnpkg.com/process-nextick-args/-/process-nextick-args-1.0.7.tgz#150e20b756590ad3f91093f25a4f2ad8bff30ba3\"\n   integrity sha1-FQ4gt1ZZCtP5EJPyWk8q2L/zC6M=\n \n-progress@1.1.8:\n-  version \"1.1.8\"\n-  resolved \"https://registry.yarnpkg.com/progress/-/progress-1.1.8.tgz#e260c78f6161cdd9b0e56cc3e0a85de17c7a57be\"\n-  integrity sha1-4mDHj2Fhzdmw5WzD4Khd4Xx6V74=\n-\n progress@^2.0.1, progress@^2.0.3:\n   version \"2.0.3\"\n   resolved \"https://registry.yarnpkg.com/progress/-/progress-2.0.3.tgz#7e8cf8d8f5b8f239c1bc68beb4eb78567d572ef8\"\n@@ -11141,7 +11066,7 @@ punycode@1.3.2:\n   resolved \"https://registry.yarnpkg.com/punycode/-/punycode-1.3.2.tgz#9653a036fb7c1ee42342f2325cceefea3926c48d\"\n   integrity sha1-llOgNvt8HuQjQvIyXM7v6jkmxI0=\n \n-punycode@^1.3.2, punycode@^1.4.1:\n+punycode@^1.3.2:\n   version \"1.4.1\"\n   resolved \"https://registry.yarnpkg.com/punycode/-/punycode-1.4.1.tgz#c0d5a63b2718800ad8e1eb0fa5269c84dd41845e\"\n   integrity sha1-wNWmOycYgArY4esPpSachN1BhF4=\n@@ -11176,11 +11101,6 @@ puppeteer@5.4.1:\n     unbzip2-stream \"^1.3.3\"\n     ws \"^7.2.3\"\n \n-q@1.0.1:\n-  version \"1.0.1\"\n-  resolved \"https://registry.yarnpkg.com/q/-/q-1.0.1.tgz#11872aeedee89268110b10a718448ffb10112a14\"\n-  integrity sha1-EYcq7t7okmgRCxCnGESP+xARKhQ=\n-\n q@1.4.1:\n   version \"1.4.1\"\n   resolved \"https://registry.yarnpkg.com/q/-/q-1.4.1.tgz#55705bcd93c5f3673530c2c2cbc0c2b3addc286e\"\n@@ -11208,7 +11128,7 @@ qs@^6.4.0, qs@^6.6.0:\n   dependencies:\n     side-channel \"^1.0.4\"\n \n-qs@~6.5.1, qs@~6.5.2:\n+qs@~6.5.2:\n   version \"6.5.2\"\n   resolved \"https://registry.yarnpkg.com/qs/-/qs-6.5.2.tgz#cb3ae806e8740444584ef154ce8ee98d403f3e36\"\n   integrity sha512-N5ZAX4/LxJmF+7wN74pUD6qAh9/wnvdQcjq9TZjevvXzSUo7bfmw91saqMjzGS2xq91/odN2dW/WOl7qQHNDGA==\n@@ -11598,13 +11518,6 @@ replace-homedir@^1.0.0:\n     is-absolute \"^1.0.0\"\n     remove-trailing-separator \"^1.1.0\"\n \n-request-progress@0.3.1:\n-  version \"0.3.1\"\n-  resolved \"https://registry.yarnpkg.com/request-progress/-/request-progress-0.3.1.tgz#0721c105d8a96ac6b2ce8b2c89ae2d5ecfcf6b3a\"\n-  integrity sha1-ByHBBdipasayzossia4tXs/Pazo=\n-  dependencies:\n-    throttleit \"~0.0.2\"\n-\n request@^2.87.0, request@^2.88.2:\n   version \"2.88.2\"\n   resolved \"https://registry.yarnpkg.com/request/-/request-2.88.2.tgz#d73c918731cb5a87da047e207234146f664d12b3\"\n@@ -11631,32 +11544,6 @@ request@^2.87.0, request@^2.88.2:\n     tunnel-agent \"^0.6.0\"\n     uuid \"^3.3.2\"\n \n-request@~2.87.0:\n-  version \"2.87.0\"\n-  resolved \"https://registry.yarnpkg.com/request/-/request-2.87.0.tgz#32f00235cd08d482b4d0d68db93a829c0ed5756e\"\n-  integrity sha512-fcogkm7Az5bsS6Sl0sibkbhcKsnyon/jV1kF3ajGmF0c8HrttdKTPRT9hieOaQHA5HEq6r8OyWOo/o781C1tNw==\n-  dependencies:\n-    aws-sign2 \"~0.7.0\"\n-    aws4 \"^1.6.0\"\n-    caseless \"~0.12.0\"\n-    combined-stream \"~1.0.5\"\n-    extend \"~3.0.1\"\n-    forever-agent \"~0.6.1\"\n-    form-data \"~2.3.1\"\n-    har-validator \"~5.0.3\"\n-    http-signature \"~1.2.0\"\n-    is-typedarray \"~1.0.0\"\n-    isstream \"~0.1.2\"\n-    json-stringify-safe \"~5.0.1\"\n-    mime-types \"~2.1.17\"\n-    oauth-sign \"~0.8.2\"\n-    performance-now \"^2.1.0\"\n-    qs \"~6.5.1\"\n-    safe-buffer \"^5.1.1\"\n-    tough-cookie \"~2.3.3\"\n-    tunnel-agent \"^0.6.0\"\n-    uuid \"^3.1.0\"\n-\n require-directory@^2.1.1:\n   version \"2.1.1\"\n   resolved \"https://registry.yarnpkg.com/require-directory/-/require-directory-2.1.1.tgz#8c64ad5fd30dab1c976e2344ffe7f792a6a6df42\"\n@@ -11966,7 +11853,7 @@ safe-buffer@5.1.2, safe-buffer@~5.1.0, safe-buffer@~5.1.1:\n   resolved \"https://registry.yarnpkg.com/safe-buffer/-/safe-buffer-5.1.2.tgz#991ec69d296e0313747d59bdfd2b745c35f8828d\"\n   integrity sha512-Gd2UZBJDkXlY7GbJxfsE8/nvKkUEU1G38c1siN6QP6a9PT9MmHB8GnpscSmMJSoF8LOIrt8ud/wPtojys4G6+g==\n \n-safe-buffer@>=5.1.0, safe-buffer@^5.0.1, safe-buffer@^5.1.0, safe-buffer@^5.1.1, safe-buffer@^5.1.2, safe-buffer@~5.2.0:\n+safe-buffer@>=5.1.0, safe-buffer@^5.0.1, safe-buffer@^5.1.0, safe-buffer@^5.1.2, safe-buffer@~5.2.0:\n   version \"5.2.1\"\n   resolved \"https://registry.yarnpkg.com/safe-buffer/-/safe-buffer-5.2.1.tgz#1eaf9fa9bdb1fdd4ec75f58f9cdb4e6b7827eec6\"\n   integrity sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==\n@@ -12018,7 +11905,6 @@ sauce-connect-launcher@^1.2.4:\n \n \"sauce-connect@https://saucelabs.com/downloads/sc-4.6.2-linux.tar.gz\":\n   version \"0.0.0\"\n-  uid \"7b7f35433af9c3380758e048894d7b9aecf3754e\"\n   resolved \"https://saucelabs.com/downloads/sc-4.6.2-linux.tar.gz#7b7f35433af9c3380758e048894d7b9aecf3754e\"\n \n saucelabs@^1.5.0:\n@@ -13128,11 +13014,6 @@ text-table@0.2.0:\n   resolved \"https://registry.yarnpkg.com/text-table/-/text-table-0.2.0.tgz#7f5ee823ae805207c00af2df4a84ec3fcfa570b4\"\n   integrity sha1-f17oI66AUgfACvLfSoTsP8+lcLQ=\n \n-throttleit@~0.0.2:\n-  version \"0.0.2\"\n-  resolved \"https://registry.yarnpkg.com/throttleit/-/throttleit-0.0.2.tgz#cfedf88e60c00dd9697b61fdd2a8343a9b680eaf\"\n-  integrity sha1-z+34jmDADdlpe2H90qg0OptoDq8=\n-\n through2-filter@^3.0.0:\n   version \"3.0.0\"\n   resolved \"https://registry.yarnpkg.com/through2-filter/-/through2-filter-3.0.0.tgz#700e786df2367c2c88cd8aa5be4cf9c1e7831254\"\n@@ -13280,13 +13161,6 @@ toidentifier@1.0.0:\n   resolved \"https://registry.yarnpkg.com/toidentifier/-/toidentifier-1.0.0.tgz#7e1be3470f1e77948bc43d94a3c8f4d7752ba553\"\n   integrity sha512-yaOH/Pk/VEhBWWTlhI+qXxDFXlejDGcQipMlyxda9nthulaxLZUNcUqFxokp0vcYnvteJln5FNQDRrxj3YcbVw==\n \n-tough-cookie@~2.3.3:\n-  version \"2.3.4\"\n-  resolved \"https://registry.yarnpkg.com/tough-cookie/-/tough-cookie-2.3.4.tgz#ec60cee38ac675063ffc97a5c18970578ee83655\"\n-  integrity sha512-TZ6TTfI5NtZnuyy/Kecv+CnoROnyXn2DN97LontgQpCwsX2XyLYCC0ENhYkehSOwAp8rTQKc/NUIF7BkQ5rKLA==\n-  dependencies:\n-    punycode \"^1.4.1\"\n-\n tough-cookie@~2.5.0:\n   version \"2.5.0\"\n   resolved \"https://registry.yarnpkg.com/tough-cookie/-/tough-cookie-2.5.0.tgz#cd9fb2a0aa1d5a12b473bd9fb96fa3dcff65ade2\"\n@@ -13859,7 +13733,7 @@ uuid@8.3.2:\n   resolved \"https://registry.yarnpkg.com/uuid/-/uuid-8.3.2.tgz#80d5b5ced271bb9af6c445f21a1a04c606cefbe2\"\n   integrity sha512-+NYs2QeMWy+GWFOEm9xnn6HCDp0l7QBD7ml8zLUmJ+93Q5NF0NocErnwkTkXVFNiX3/fpC6afS8Dhb/gz7R7eg==\n \n-uuid@^3.0.0, uuid@^3.1.0, uuid@^3.3.2, uuid@^3.4.0:\n+uuid@^3.0.0, uuid@^3.3.2, uuid@^3.4.0:\n   version \"3.4.0\"\n   resolved \"https://registry.yarnpkg.com/uuid/-/uuid-3.4.0.tgz#b23e4358afa8a202fe7a100af1f5f883f02007ee\"\n   integrity sha512-HjSDRw6gZE5JMggctHBcjVak08+KEVhSIiDzFnT9S9aegmp85S/bReBVTb4QTFaRNptJ9kuYaNhnbNEOkbKb/A==\n@@ -14395,25 +14269,25 @@ xmlbuilder@~11.0.0:\n   resolved \"https://registry.yarnpkg.com/xmlbuilder/-/xmlbuilder-11.0.1.tgz#be9bae1c8a046e76b31127726347d0ad7002beb3\"\n   integrity sha512-fDlsI/kFEx7gLvbecc0/ohLG50fugQp8ryHzMTuW9vSa1GJ0XYWKnhsUx7oie3G98+r56aTQIUB4kht42R3JvA==\n \n+xmldom@^0.3.0:\n+  version \"0.3.0\"\n+  resolved \"https://registry.yarnpkg.com/xmldom/-/xmldom-0.3.0.tgz#e625457f4300b5df9c2e1ecb776147ece47f3e5a\"\n+  integrity sha512-z9s6k3wxE+aZHgXYxSTpGDo7BYOUfJsIRyoZiX6HTjwpwfS2wpQBQKa2fD+ShLyPkqDYo5ud7KitmLZ2Cd6r0g==\n+\n xmldom@^0.5.0:\n   version \"0.5.0\"\n   resolved \"https://registry.yarnpkg.com/xmldom/-/xmldom-0.5.0.tgz#193cb96b84aa3486127ea6272c4596354cb4962e\"\n   integrity sha512-Foaj5FXVzgn7xFzsKeNIde9g6aFBxTPi37iwsno8QvApmtg7KYrr+OPyRHcJF7dud2a5nGRBXK3n0dL62Gf7PA==\n \n-xmldom@^0.6.0:\n-  version \"0.6.0\"\n-  resolved \"https://registry.yarnpkg.com/xmldom/-/xmldom-0.6.0.tgz#43a96ecb8beece991cef382c08397d82d4d0c46f\"\n-  integrity sha512-iAcin401y58LckRZ0TkI4k0VSM1Qg0KGSc3i8rU+xrxe19A/BN1zHyVSJY7uoutVlaTSzYyk/v5AmkewAP7jtg==\n-\n xmlhttprequest-ssl@~1.5.4:\n   version \"1.5.5\"\n   resolved \"https://registry.yarnpkg.com/xmlhttprequest-ssl/-/xmlhttprequest-ssl-1.5.5.tgz#c2876b06168aadc40e57d97e81191ac8f4398b3e\"\n   integrity sha1-wodrBhaKrcQOV9l+gRkayPQ5iz4=\n \n-xpath@^0.0.32:\n-  version \"0.0.32\"\n-  resolved \"https://registry.yarnpkg.com/xpath/-/xpath-0.0.32.tgz#1b73d3351af736e17ec078d6da4b8175405c48af\"\n-  integrity sha512-rxMJhSIoiO8vXcWvSifKqhvV96GjiD5wYb8/QHdoRyQvraTpp4IEv944nhGausZZ3u7dhQXteZuZbaqfpB7uYw==\n+xpath@^0.0.27:\n+  version \"0.0.27\"\n+  resolved \"https://registry.yarnpkg.com/xpath/-/xpath-0.0.27.tgz#dd3421fbdcc5646ac32c48531b4d7e9d0c2cfa92\"\n+  integrity sha512-fg03WRxtkCV6ohClePNAECYsmpKKTv5L8y/X3Dn1hQrec3POx2jHZ/0P2qQ6HvsrU1BmeqXcof3NGGueG6LxwQ==\n \n xregexp@2.0.0:\n   version \"2.0.0\""
        }
    ],
    "stats": {
        "total": 2572,
        "additions": 1278,
        "deletions": 1294
    }
}