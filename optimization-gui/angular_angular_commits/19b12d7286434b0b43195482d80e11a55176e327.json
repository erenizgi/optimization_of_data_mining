{
    "author": "devversion",
    "message": "refactor(dev-infra): switch away from deprecated platform execution properties (#41941)\n\nBazel no longer recommends the use of `remote_execution_properties`\nwithin `platform` definitions. Bazel intends to replace this attribute\nwith an object literal based attribute called `exec_properties`.\n\nThis simplifies the platform configuration and makes it more\nreadable. Additionally this make inheritance and overriding easier.\n\nPR Close #41941",
    "sha": "19b12d7286434b0b43195482d80e11a55176e327",
    "files": [
        {
            "sha": "718894068c207abc6fa028b2640638c6a9d0620c",
            "filename": "dev-infra/bazel/remote-execution/BUILD.bazel",
            "status": "modified",
            "additions": 18,
            "deletions": 20,
            "changes": 38,
            "blob_url": "https://github.com/angular/angular/blob/19b12d7286434b0b43195482d80e11a55176e327/dev-infra%2Fbazel%2Fremote-execution%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/19b12d7286434b0b43195482d80e11a55176e327/dev-infra%2Fbazel%2Fremote-execution%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fbazel%2Fremote-execution%2FBUILD.bazel?ref=19b12d7286434b0b43195482d80e11a55176e327",
            "patch": "@@ -7,26 +7,24 @@ platform(\n         \"@bazel_tools//platforms:x86_64\",\n         \"@bazel_tools//tools/cpp:clang\",\n     ],\n-    # We use a basic docker image from the Google Cloud container registry that supports\n-    # browser tests. Note that we usually do not use any of the local browsers, but the image\n-    # guarantees that necessary dependencies for launching browsers are installed. Since we\n-    # do not rely on many binaries/tools from the image, the image doesn't need to be updated\n-    # frequently. There are rare cases where it needs to be updated. e.g. for a more recent Bash\n-    # version, or new system settings that are required for launching browsers. In order to do that,\n-    # we need to either see if the `rbe-ubuntu16-04-webtest` image can be updated, or if we need to\n-    # build and publish our own image to the Google cloud image registry. Additionally, we set the\n-    # `SYS_ADMIN` capability so that browsers can be launched with sandbox mode enabled. Related\n-    # information: https://developers.google.com/web/tools/puppeteer/troubleshooting#running_puppeteer_in_docker\n-    remote_execution_properties = \"\"\"\n-        properties: {\n-          name: \"container-image\"\n-          value:\"docker://gcr.io/cloud-marketplace/google/rbe-ubuntu16-04-webtest@sha256:886a12dc4726f5b991b46386292afa8d943b6703a5496c8a1e07cfde778d9044\"\n-        }\n-        properties: {\n-          name: \"dockerAddCapabilities\"\n-          value: \"SYS_ADMIN\"\n-        }\n-        \"\"\",\n+    exec_properties = {\n+        # We use a basic docker image from the Google Cloud container registry that supports\n+        # browser tests. Note that we usually do not use any of the local browsers, but the image\n+        # guarantees that necessary dependencies for launching browsers are installed. Since we\n+        # do not rely on many binaries/tools from the image, the image doesn't need to be updated\n+        # frequently. There are rare cases where it needs to be updated. e.g. for a more recent Bash\n+        # version, or new system settings that are required for launching browsers. In order to do that,\n+        # we need to either see if the `rbe-ubuntu16-04-webtest` image can be updated, or if we need to\n+        # build and publish our own image to the Google cloud image registry.\n+        \"container-image\": \"docker://gcr.io/cloud-marketplace/google/rbe-ubuntu16-04-webtest@sha256:886a12dc4726f5b991b46386292afa8d943b6703a5496c8a1e07cfde778d9044\",\n+        # The `SYS_ADMIN` capability is added so that browsers can be launched with sandbox mode enabled. Related\n+        # # information: https://developers.google.com/web/tools/puppeteer/troubleshooting#running_puppeteer_in_docker\n+        \"dockerAddCapabilities\": \"SYS_ADMIN\",\n+        # By default in Google Cloud Remote build execution, network access is disabled. We explicitly set the\n+        # property in the platform again in case the default ever changes. Network access is not desirable in\n+        # Bazel builds as it is potential source of flaky tests and therefore also breaks hermeticity.\n+        \"dockerNetwork\": \"off\",\n+    },\n )\n \n filegroup("
        }
    ],
    "stats": {
        "total": 38,
        "additions": 18,
        "deletions": 20
    }
}