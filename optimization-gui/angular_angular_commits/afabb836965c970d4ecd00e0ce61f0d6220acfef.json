{
    "author": "twerske",
    "message": "refactor(core): add links to top compiler errors (#40326)\n\nadd links to 5 compiler error messages\nnavigate user to AIO new /errors pages for debugging\n\nPR Close #40326",
    "sha": "afabb836965c970d4ecd00e0ce61f0d6220acfef",
    "files": [
        {
            "sha": "127d7253ad07ea82298988cce361c87025c4b343",
            "filename": "packages/compiler-cli/src/ngtsc/core/src/compiler.ts",
            "status": "modified",
            "additions": 21,
            "deletions": 4,
            "changes": 25,
            "blob_url": "https://github.com/angular/angular/blob/afabb836965c970d4ecd00e0ce61f0d6220acfef/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fcompiler.ts",
            "raw_url": "https://github.com/angular/angular/raw/afabb836965c970d4ecd00e0ce61f0d6220acfef/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fcompiler.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fcompiler.ts?ref=afabb836965c970d4ecd00e0ce61f0d6220acfef",
            "patch": "@@ -11,7 +11,7 @@ import * as ts from 'typescript';\n \n import {ComponentDecoratorHandler, DirectiveDecoratorHandler, InjectableDecoratorHandler, NgModuleDecoratorHandler, NoopReferencesRegistry, PipeDecoratorHandler, ReferencesRegistry} from '../../annotations';\n import {CycleAnalyzer, ImportGraph} from '../../cycles';\n-import {ErrorCode, ngErrorCode} from '../../diagnostics';\n+import {COMPILER_ERRORS_WITH_GUIDES, ERROR_DETAILS_PAGE_BASE_URL, ErrorCode, ngErrorCode} from '../../diagnostics';\n import {checkForPrivateExports, ReferenceGraph} from '../../entry_point';\n import {LogicalFileSystem, resolve} from '../../file_system';\n import {AbsoluteModuleStrategy, AliasingHost, AliasStrategy, DefaultImportTracker, ImportRewriter, LocalIdentifierStrategy, LogicalProjectStrategy, ModuleResolver, NoopImportRewriter, PrivateExportAliasingHost, R3SymbolsImportRewriter, Reference, ReferenceEmitStrategy, ReferenceEmitter, RelativePathStrategy, UnifiedModulesAliasingHost, UnifiedModulesStrategy} from '../../imports';\n@@ -179,7 +179,8 @@ export class NgCompiler {\n    * Get all Angular-related diagnostics for this compilation.\n    */\n   getDiagnostics(): ts.Diagnostic[] {\n-    return [...this.getNonTemplateDiagnostics(), ...this.getTemplateDiagnostics()];\n+    return this.addMessageTextDetails(\n+        [...this.getNonTemplateDiagnostics(), ...this.getTemplateDiagnostics()]);\n   }\n \n   /**\n@@ -188,10 +189,26 @@ export class NgCompiler {\n    * If a `ts.SourceFile` is passed, only diagnostics related to that file are returned.\n    */\n   getDiagnosticsForFile(file: ts.SourceFile, optimizeFor: OptimizeFor): ts.Diagnostic[] {\n-    return [\n+    return this.addMessageTextDetails([\n       ...this.getNonTemplateDiagnostics().filter(diag => diag.file === file),\n       ...this.getTemplateDiagnosticsForFile(file, optimizeFor)\n-    ];\n+    ]);\n+  }\n+\n+  /**\n+   * Add Angular.io error guide links to diagnostics for this compilation.\n+   */\n+  private addMessageTextDetails(diagnostics: ts.Diagnostic[]): ts.Diagnostic[] {\n+    return diagnostics.map(diag => {\n+      if (diag.code && COMPILER_ERRORS_WITH_GUIDES.has(ngErrorCode(diag.code))) {\n+        return {\n+          ...diag,\n+          messageText: diag.messageText +\n+              `. Find more at ${ERROR_DETAILS_PAGE_BASE_URL}/NG${ngErrorCode(diag.code)}`\n+        };\n+      }\n+      return diag;\n+    });\n   }\n \n   /**"
        },
        {
            "sha": "fcd7f120989303248161742eb5d47f75b68058bb",
            "filename": "packages/compiler-cli/src/ngtsc/diagnostics/index.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/afabb836965c970d4ecd00e0ce61f0d6220acfef/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fdiagnostics%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/afabb836965c970d4ecd00e0ce61f0d6220acfef/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fdiagnostics%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fdiagnostics%2Findex.ts?ref=afabb836965c970d4ecd00e0ce61f0d6220acfef",
            "patch": "@@ -7,5 +7,5 @@\n  */\n \n export {FatalDiagnosticError, isFatalDiagnosticError, makeDiagnostic, makeRelatedInformation} from './src/error';\n-export {ErrorCode, ngErrorCode} from './src/error_code';\n+export {COMPILER_ERRORS_WITH_GUIDES, ERROR_DETAILS_PAGE_BASE_URL, ErrorCode, ngErrorCode} from './src/error_code';\n export {replaceTsWithNgInErrors} from './src/util';"
        },
        {
            "sha": "ac7930e3da4442b8e0db55c60eb2aeffa709b8d3",
            "filename": "packages/compiler-cli/src/ngtsc/diagnostics/src/error_code.ts",
            "status": "modified",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/angular/angular/blob/afabb836965c970d4ecd00e0ce61f0d6220acfef/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fdiagnostics%2Fsrc%2Ferror_code.ts",
            "raw_url": "https://github.com/angular/angular/raw/afabb836965c970d4ecd00e0ce61f0d6220acfef/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fdiagnostics%2Fsrc%2Ferror_code.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fdiagnostics%2Fsrc%2Ferror_code.ts?ref=afabb836965c970d4ecd00e0ce61f0d6220acfef",
            "patch": "@@ -161,6 +161,27 @@ export enum ErrorCode {\n   INJECTABLE_DUPLICATE_PROV = 9001,\n }\n \n+/**\n+ * @internal\n+ * Base URL for the error details page.\n+ * Keep this value in sync with a similar const in\n+ * `packages/core/src/render3/error_code.ts`.\n+ */\n+export const ERROR_DETAILS_PAGE_BASE_URL = 'https://angular.io/errors';\n+\n+/**\n+ * @internal\n+ * Contains a set of error messages that have detailed guides at angular.io.\n+ * Full list of available error guides can be found at https://angular.io/errors\n+ */\n+export const COMPILER_ERRORS_WITH_GUIDES = new Set([\n+  ErrorCode.DECORATOR_ARG_NOT_LITERAL,\n+  ErrorCode.PARAM_MISSING_TOKEN,\n+  ErrorCode.SCHEMA_INVALID_ELEMENT,\n+  ErrorCode.SCHEMA_INVALID_ATTRIBUTE,\n+  ErrorCode.MISSING_REFERENCE_TARGET,\n+]);\n+\n /**\n  * @internal\n  */"
        }
    ],
    "stats": {
        "total": 48,
        "additions": 43,
        "deletions": 5
    }
}