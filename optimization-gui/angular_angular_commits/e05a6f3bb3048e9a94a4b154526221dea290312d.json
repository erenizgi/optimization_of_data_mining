{
    "author": "aahmedayed",
    "message": "feat(common): add `historyGo` method to `Location` service (#38890)\n\nAdd new method `historyGo`, that will let\nthe user navigate to a specific page from session history identified by its\nrelative position to the current page.\n\nWe add some tests to `location_spec.ts` to validate the behavior of the\n`historyGo` and `forward` methods.\n\nAdd more tests for `location_spec` to test `location.historyGo(0)`, `location.historyGo()`,\n`location.historyGo(100)` and `location.historyGo(-100)`. We also add new tests for\n`Integration` spec to validate the navigation when we using\n`location#historyGo`.\n\nUpdate the `historyGo` function docs\n\nNote that this was made an optional function in the abstract classes to\navoid a breaking change. Because our location classes use `implements PlatformLocation`\nrather than `extends PlatformLocation`, simply adding a default\nimplementation was not sufficient to make this a non-breaking change.\nWhile we could fix the classes internal to Angular, this would still have been\na breaking change for any external developers who may have followed our\nimplementations as an example.\n\nPR Close #38890",
    "sha": "e05a6f3bb3048e9a94a4b154526221dea290312d",
    "files": [
        {
            "sha": "4d3601fd08786b0d03db02309c2faed868250474",
            "filename": "goldens/public-api/common/common.d.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/e05a6f3bb3048e9a94a4b154526221dea290312d/goldens%2Fpublic-api%2Fcommon%2Fcommon.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/e05a6f3bb3048e9a94a4b154526221dea290312d/goldens%2Fpublic-api%2Fcommon%2Fcommon.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fcommon%2Fcommon.d.ts?ref=e05a6f3bb3048e9a94a4b154526221dea290312d",
            "patch": "@@ -101,6 +101,7 @@ export declare class HashLocationStrategy extends LocationStrategy implements On\n     back(): void;\n     forward(): void;\n     getBaseHref(): string;\n+    historyGo(relativePosition?: number): void;\n     ngOnDestroy(): void;\n     onPopState(fn: LocationChangeListener): void;\n     path(includeHash?: boolean): string;\n@@ -156,6 +157,7 @@ export declare class Location {\n     forward(): void;\n     getState(): unknown;\n     go(path: string, query?: string, state?: any): void;\n+    historyGo(relativePosition?: number): void;\n     isCurrentPathEqualTo(path: string, query?: string): boolean;\n     normalize(url: string): string;\n     onUrlChange(fn: (url: string, state: unknown) => void): void;\n@@ -183,6 +185,7 @@ export declare abstract class LocationStrategy {\n     abstract back(): void;\n     abstract forward(): void;\n     abstract getBaseHref(): string;\n+    historyGo?(relativePosition: number): void;\n     abstract onPopState(fn: LocationChangeListener): void;\n     abstract path(includeHash?: boolean): string;\n     abstract prepareExternalUrl(internal: string): string;\n@@ -330,6 +333,7 @@ export declare class PathLocationStrategy extends LocationStrategy implements On\n     back(): void;\n     forward(): void;\n     getBaseHref(): string;\n+    historyGo(relativePosition?: number): void;\n     ngOnDestroy(): void;\n     onPopState(fn: LocationChangeListener): void;\n     path(includeHash?: boolean): string;\n@@ -357,6 +361,7 @@ export declare abstract class PlatformLocation {\n     abstract forward(): void;\n     abstract getBaseHrefFromDOM(): string;\n     abstract getState(): unknown;\n+    historyGo?(relativePosition: number): void;\n     abstract onHashChange(fn: LocationChangeListener): VoidFunction;\n     abstract onPopState(fn: LocationChangeListener): VoidFunction;\n     abstract pushState(state: any, title: string, url: string): void;"
        },
        {
            "sha": "5d4b193bb46dcc8c1adf72694615c7ae0d55b5ea",
            "filename": "goldens/public-api/common/testing/testing.d.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/e05a6f3bb3048e9a94a4b154526221dea290312d/goldens%2Fpublic-api%2Fcommon%2Ftesting%2Ftesting.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/e05a6f3bb3048e9a94a4b154526221dea290312d/goldens%2Fpublic-api%2Fcommon%2Ftesting%2Ftesting.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fcommon%2Ftesting%2Ftesting.d.ts?ref=e05a6f3bb3048e9a94a4b154526221dea290312d",
            "patch": "@@ -33,6 +33,7 @@ export declare class MockPlatformLocation implements PlatformLocation {\n     forward(): void;\n     getBaseHrefFromDOM(): string;\n     getState(): unknown;\n+    historyGo(relativePosition?: number): void;\n     onHashChange(fn: LocationChangeListener): VoidFunction;\n     onPopState(fn: LocationChangeListener): VoidFunction;\n     pushState(state: any, title: string, newUrl: string): void;\n@@ -50,6 +51,7 @@ export declare class SpyLocation implements Location {\n     forward(): void;\n     getState(): unknown;\n     go(path: string, query?: string, state?: any): void;\n+    historyGo(relativePosition?: number): void;\n     isCurrentPathEqualTo(path: string, query?: string): boolean;\n     normalize(url: string): string;\n     onUrlChange(fn: (url: string, state: unknown) => void): void;"
        },
        {
            "sha": "7346cbb3626fa6e5237ad15232ebe8ee21360079",
            "filename": "goldens/size-tracking/integration-payloads.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/e05a6f3bb3048e9a94a4b154526221dea290312d/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "raw_url": "https://github.com/angular/angular/raw/e05a6f3bb3048e9a94a4b154526221dea290312d/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fsize-tracking%2Fintegration-payloads.json?ref=e05a6f3bb3048e9a94a4b154526221dea290312d",
            "patch": "@@ -49,7 +49,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime-es2015\": 2289,\n-        \"main-es2015\": 216267,\n+        \"main-es2015\": 216935,\n         \"polyfills-es2015\": 36723,\n         \"5-es2015\": 781\n       }"
        },
        {
            "sha": "91a2368415353727d3522576fb1e63d9a3763bdc",
            "filename": "packages/common/src/location/hash_location_strategy.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/e05a6f3bb3048e9a94a4b154526221dea290312d/packages%2Fcommon%2Fsrc%2Flocation%2Fhash_location_strategy.ts",
            "raw_url": "https://github.com/angular/angular/raw/e05a6f3bb3048e9a94a4b154526221dea290312d/packages%2Fcommon%2Fsrc%2Flocation%2Fhash_location_strategy.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Fsrc%2Flocation%2Fhash_location_strategy.ts?ref=e05a6f3bb3048e9a94a4b154526221dea290312d",
            "patch": "@@ -98,4 +98,8 @@ export class HashLocationStrategy extends LocationStrategy implements OnDestroy\n   back(): void {\n     this._platformLocation.back();\n   }\n+\n+  historyGo(relativePosition: number = 0): void {\n+    this._platformLocation.historyGo?.(relativePosition);\n+  }\n }"
        },
        {
            "sha": "f531104c3c9c0fe0c9bda471f2d6ef3e42389cdb",
            "filename": "packages/common/src/location/location.ts",
            "status": "modified",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/e05a6f3bb3048e9a94a4b154526221dea290312d/packages%2Fcommon%2Fsrc%2Flocation%2Flocation.ts",
            "raw_url": "https://github.com/angular/angular/raw/e05a6f3bb3048e9a94a4b154526221dea290312d/packages%2Fcommon%2Fsrc%2Flocation%2Flocation.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Fsrc%2Flocation%2Flocation.ts?ref=e05a6f3bb3048e9a94a4b154526221dea290312d",
            "patch": "@@ -188,6 +188,22 @@ export class Location {\n     this._platformStrategy.back();\n   }\n \n+  /**\n+   * Navigate to a specific page from session history, identified by its relative position to the\n+   * current page.\n+   *\n+   * @param relativePosition  Position of the target page in the history relative to the current\n+   *     page.\n+   * A negative value moves backwards, a positive value moves forwards, e.g. `location.historyGo(2)`\n+   * moves forward two pages and `location.historyGo(-2)` moves back two pages. When we try to go\n+   * beyond what's stored in the history session, we stay in the current page. Same behaviour occurs\n+   * when `relativePosition` equals 0.\n+   * @see https://developer.mozilla.org/en-US/docs/Web/API/History_API#Moving_to_a_specific_point_in_history\n+   */\n+  historyGo(relativePosition: number = 0): void {\n+    this._platformStrategy.historyGo?.(relativePosition);\n+  }\n+\n   /**\n    * Registers a URL change listener. Use to catch updates performed by the Angular\n    * framework that are not detectible through \"popstate\" or \"hashchange\" events."
        },
        {
            "sha": "8deebd06a84a279ed0ead98a491dfa4eb88701b2",
            "filename": "packages/common/src/location/location_strategy.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/e05a6f3bb3048e9a94a4b154526221dea290312d/packages%2Fcommon%2Fsrc%2Flocation%2Flocation_strategy.ts",
            "raw_url": "https://github.com/angular/angular/raw/e05a6f3bb3048e9a94a4b154526221dea290312d/packages%2Fcommon%2Fsrc%2Flocation%2Flocation_strategy.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Fsrc%2Flocation%2Flocation_strategy.ts?ref=e05a6f3bb3048e9a94a4b154526221dea290312d",
            "patch": "@@ -36,6 +36,9 @@ export abstract class LocationStrategy {\n   abstract replaceState(state: any, title: string, url: string, queryParams: string): void;\n   abstract forward(): void;\n   abstract back(): void;\n+  historyGo?(relativePosition: number): void {\n+    throw new Error('Not implemented');\n+  }\n   abstract onPopState(fn: LocationChangeListener): void;\n   abstract getBaseHref(): string;\n }\n@@ -169,4 +172,8 @@ export class PathLocationStrategy extends LocationStrategy implements OnDestroy\n   back(): void {\n     this._platformLocation.back();\n   }\n+\n+  historyGo(relativePosition: number = 0): void {\n+    this._platformLocation.historyGo?.(relativePosition);\n+  }\n }"
        },
        {
            "sha": "4b85a61aea40c3d7b9cd8e5d25b0ed0adc77b500",
            "filename": "packages/common/src/location/platform_location.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/e05a6f3bb3048e9a94a4b154526221dea290312d/packages%2Fcommon%2Fsrc%2Flocation%2Fplatform_location.ts",
            "raw_url": "https://github.com/angular/angular/raw/e05a6f3bb3048e9a94a4b154526221dea290312d/packages%2Fcommon%2Fsrc%2Flocation%2Fplatform_location.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Fsrc%2Flocation%2Fplatform_location.ts?ref=e05a6f3bb3048e9a94a4b154526221dea290312d",
            "patch": "@@ -64,6 +64,10 @@ export abstract class PlatformLocation {\n   abstract forward(): void;\n \n   abstract back(): void;\n+\n+  historyGo?(relativePosition: number): void {\n+    throw new Error('Not implemented');\n+  }\n }\n \n export function useBrowserPlatformLocation() {\n@@ -189,6 +193,10 @@ export class BrowserPlatformLocation extends PlatformLocation {\n     this._history.back();\n   }\n \n+  historyGo(relativePosition: number = 0): void {\n+    this._history.go(relativePosition);\n+  }\n+\n   getState(): unknown {\n     return this._history.state;\n   }"
        },
        {
            "sha": "aad99be5ded1f40233a454a1cf486870d9f90db9",
            "filename": "packages/common/test/location/location_spec.ts",
            "status": "modified",
            "additions": 48,
            "deletions": 0,
            "changes": 48,
            "blob_url": "https://github.com/angular/angular/blob/e05a6f3bb3048e9a94a4b154526221dea290312d/packages%2Fcommon%2Ftest%2Flocation%2Flocation_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/e05a6f3bb3048e9a94a4b154526221dea290312d/packages%2Fcommon%2Ftest%2Flocation%2Flocation_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Ftest%2Flocation%2Flocation_spec.ts?ref=e05a6f3bb3048e9a94a4b154526221dea290312d",
            "patch": "@@ -81,6 +81,54 @@ describe('Location Class', () => {\n \n       expect(location.getState()).toEqual({url: 'test1'});\n     });\n+\n+    it('should work after using forward button', () => {\n+      expect(location.getState()).toBe(null);\n+\n+      location.go('/test1', '', {url: 'test1'});\n+      location.go('/test2', '', {url: 'test2'});\n+      expect(location.getState()).toEqual({url: 'test2'});\n+\n+      location.back();\n+      expect(location.getState()).toEqual({url: 'test1'});\n+\n+      location.forward();\n+      expect(location.getState()).toEqual({url: 'test2'});\n+    });\n+\n+    it('should work after using location.historyGo()', () => {\n+      expect(location.getState()).toBe(null);\n+\n+      location.go('/test1', '', {url: 'test1'});\n+      location.go('/test2', '', {url: 'test2'});\n+      location.go('/test3', '', {url: 'test3'});\n+      expect(location.getState()).toEqual({url: 'test3'});\n+\n+      location.historyGo(-2);\n+      expect(location.getState()).toEqual({url: 'test1'});\n+\n+      location.historyGo(2);\n+      expect(location.getState()).toEqual({url: 'test3'});\n+\n+      location.go('/test3', '', {url: 'test4'});\n+      location.historyGo(0);\n+      expect(location.getState()).toEqual({url: 'test4'});\n+\n+      location.historyGo();\n+      expect(location.getState()).toEqual({url: 'test4'});\n+\n+      // we are testing the behaviour of the `historyGo` method  at the moment when the value of\n+      // the relativePosition goes out of bounds.\n+      // The result should be that the locationState does not change.\n+      location.historyGo(100);\n+      expect(location.getState()).toEqual({url: 'test4'});\n+\n+      location.historyGo(-100);\n+      expect(location.getState()).toEqual({url: 'test4'});\n+\n+      location.back();\n+      expect(location.getState()).toEqual({url: 'test3'});\n+    });\n   });\n \n   describe('location.onUrlChange()', () => {"
        },
        {
            "sha": "41f722ed66c88f26787ca8a793af418baf93558e",
            "filename": "packages/common/testing/src/location_mock.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/e05a6f3bb3048e9a94a4b154526221dea290312d/packages%2Fcommon%2Ftesting%2Fsrc%2Flocation_mock.ts",
            "raw_url": "https://github.com/angular/angular/raw/e05a6f3bb3048e9a94a4b154526221dea290312d/packages%2Fcommon%2Ftesting%2Fsrc%2Flocation_mock.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Ftesting%2Fsrc%2Flocation_mock.ts?ref=e05a6f3bb3048e9a94a4b154526221dea290312d",
            "patch": "@@ -123,6 +123,16 @@ export class SpyLocation implements Location {\n       this._subject.emit({'url': this.path(), 'state': this.getState(), 'pop': true});\n     }\n   }\n+\n+  historyGo(relativePosition: number = 0): void {\n+    const nextPageIndex = this._historyIndex + relativePosition;\n+    if (nextPageIndex >= 0 && nextPageIndex < this._history.length) {\n+      this._historyIndex = nextPageIndex;\n+      this._subject.emit(\n+          {'url': this.path(), 'state': this.getState(), 'pop': true, 'type': 'popstate'});\n+    }\n+  }\n+\n   onUrlChange(fn: (url: string, state: unknown) => void) {\n     this._urlChangeListeners.push(fn);\n "
        },
        {
            "sha": "7a2ed4dbba592b98c754daffe65ac956533cf533",
            "filename": "packages/common/testing/src/mock_platform_location.ts",
            "status": "modified",
            "additions": 42,
            "deletions": 16,
            "changes": 58,
            "blob_url": "https://github.com/angular/angular/blob/e05a6f3bb3048e9a94a4b154526221dea290312d/packages%2Fcommon%2Ftesting%2Fsrc%2Fmock_platform_location.ts",
            "raw_url": "https://github.com/angular/angular/raw/e05a6f3bb3048e9a94a4b154526221dea290312d/packages%2Fcommon%2Ftesting%2Fsrc%2Fmock_platform_location.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Ftesting%2Fsrc%2Fmock_platform_location.ts?ref=e05a6f3bb3048e9a94a4b154526221dea290312d",
            "patch": "@@ -105,6 +105,7 @@ export const MOCK_PLATFORM_LOCATION_CONFIG =\n export class MockPlatformLocation implements PlatformLocation {\n   private baseHref: string = '';\n   private hashUpdate = new Subject<LocationChangeEvent>();\n+  private urlChangeIndex: number = 0;\n   private urlChanges: {\n     hostname: string,\n     protocol: string,\n@@ -127,25 +128,25 @@ export class MockPlatformLocation implements PlatformLocation {\n   }\n \n   get hostname() {\n-    return this.urlChanges[0].hostname;\n+    return this.urlChanges[this.urlChangeIndex].hostname;\n   }\n   get protocol() {\n-    return this.urlChanges[0].protocol;\n+    return this.urlChanges[this.urlChangeIndex].protocol;\n   }\n   get port() {\n-    return this.urlChanges[0].port;\n+    return this.urlChanges[this.urlChangeIndex].port;\n   }\n   get pathname() {\n-    return this.urlChanges[0].pathname;\n+    return this.urlChanges[this.urlChangeIndex].pathname;\n   }\n   get search() {\n-    return this.urlChanges[0].search;\n+    return this.urlChanges[this.urlChangeIndex].search;\n   }\n   get hash() {\n-    return this.urlChanges[0].hash;\n+    return this.urlChanges[this.urlChangeIndex].hash;\n   }\n   get state() {\n-    return this.urlChanges[0].state;\n+    return this.urlChanges[this.urlChangeIndex].state;\n   }\n \n \n@@ -183,34 +184,59 @@ export class MockPlatformLocation implements PlatformLocation {\n   replaceState(state: any, title: string, newUrl: string): void {\n     const {pathname, search, state: parsedState, hash} = this.parseChanges(state, newUrl);\n \n-    this.urlChanges[0] = {...this.urlChanges[0], pathname, search, hash, state: parsedState};\n+    this.urlChanges[this.urlChangeIndex] =\n+        {...this.urlChanges[this.urlChangeIndex], pathname, search, hash, state: parsedState};\n   }\n \n   pushState(state: any, title: string, newUrl: string): void {\n     const {pathname, search, state: parsedState, hash} = this.parseChanges(state, newUrl);\n-    this.urlChanges.unshift({...this.urlChanges[0], pathname, search, hash, state: parsedState});\n+    if (this.urlChangeIndex > 0) {\n+      this.urlChanges.splice(this.urlChangeIndex + 1);\n+    }\n+    this.urlChanges.push(\n+        {...this.urlChanges[this.urlChangeIndex], pathname, search, hash, state: parsedState});\n+    this.urlChangeIndex = this.urlChanges.length - 1;\n   }\n \n   forward(): void {\n-    throw new Error('Not implemented');\n+    const oldUrl = this.url;\n+    const oldHash = this.hash;\n+    if (this.urlChangeIndex < this.urlChanges.length) {\n+      this.urlChangeIndex++;\n+    }\n+    this.scheduleHashUpdate(oldHash, oldUrl);\n   }\n \n   back(): void {\n     const oldUrl = this.url;\n     const oldHash = this.hash;\n-    this.urlChanges.shift();\n-    const newHash = this.hash;\n+    if (this.urlChangeIndex > 0) {\n+      this.urlChangeIndex--;\n+    }\n+    this.scheduleHashUpdate(oldHash, oldUrl);\n+  }\n \n-    if (oldHash !== newHash) {\n-      scheduleMicroTask(\n-          () => this.hashUpdate.next(\n-              {type: 'hashchange', state: null, oldUrl, newUrl: this.url} as LocationChangeEvent));\n+  historyGo(relativePosition: number = 0): void {\n+    const oldUrl = this.url;\n+    const oldHash = this.hash;\n+    const nextPageIndex = this.urlChangeIndex + relativePosition;\n+    if (nextPageIndex >= 0 && nextPageIndex < this.urlChanges.length) {\n+      this.urlChangeIndex = nextPageIndex;\n     }\n+    this.scheduleHashUpdate(oldHash, oldUrl);\n   }\n \n   getState(): unknown {\n     return this.state;\n   }\n+\n+  private scheduleHashUpdate(oldHash: string, oldUrl: string) {\n+    if (oldHash !== this.hash) {\n+      scheduleMicroTask(\n+          () => this.hashUpdate.next(\n+              {type: 'hashchange', state: null, oldUrl, newUrl: this.url} as LocationChangeEvent));\n+    }\n+  }\n }\n \n export function scheduleMicroTask(cb: () => any) {"
        },
        {
            "sha": "ca5b677f542a3810de269680e969bbbf45d90b30",
            "filename": "packages/router/test/integration.spec.ts",
            "status": "modified",
            "additions": 41,
            "deletions": 0,
            "changes": 41,
            "blob_url": "https://github.com/angular/angular/blob/e05a6f3bb3048e9a94a4b154526221dea290312d/packages%2Frouter%2Ftest%2Fintegration.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/e05a6f3bb3048e9a94a4b154526221dea290312d/packages%2Frouter%2Ftest%2Fintegration.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Frouter%2Ftest%2Fintegration.spec.ts?ref=e05a6f3bb3048e9a94a4b154526221dea290312d",
            "patch": "@@ -187,6 +187,47 @@ describe('Integration', () => {\n          expect(navigation.extras.state).toEqual(state);\n        })));\n \n+    it('should navigate correctly when using `Location#historyGo',\n+       fakeAsync(inject([Router, Location], (router: Router, location: SpyLocation) => {\n+         router.resetConfig([\n+           {path: 'first', component: SimpleCmp},\n+           {path: 'second', component: SimpleCmp},\n+\n+         ]);\n+\n+         createRoot(router, RootCmp);\n+\n+         router.navigateByUrl('/first');\n+         tick();\n+         router.navigateByUrl('/second');\n+         tick();\n+         expect(router.url).toEqual('/second');\n+\n+         location.historyGo(-1);\n+         tick();\n+         expect(router.url).toEqual('/first');\n+\n+         location.historyGo(1);\n+         tick();\n+         expect(router.url).toEqual('/second');\n+\n+         location.historyGo(-100);\n+         tick();\n+         expect(router.url).toEqual('/second');\n+\n+         location.historyGo(100);\n+         tick();\n+         expect(router.url).toEqual('/second');\n+\n+         location.historyGo(0);\n+         tick();\n+         expect(router.url).toEqual('/second');\n+\n+         location.historyGo();\n+         tick();\n+         expect(router.url).toEqual('/second');\n+       })));\n+\n     it('should not error if state is not {[key: string]: any}',\n        fakeAsync(inject([Router, Location], (router: Router, location: SpyLocation) => {\n          router.resetConfig(["
        }
    ],
    "stats": {
        "total": 201,
        "additions": 184,
        "deletions": 17
    }
}