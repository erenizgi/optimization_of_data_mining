{
    "author": "devversion",
    "message": "build: check .ng-dev tool configuration in CI (#43322)\n\nChecks the `.ng-dev` tool configuration in CI, compared\nto doing it locally when the caretaker intends to perform\na merge and then realizes the config is broken.\n\nPR Close #43322",
    "sha": "5472c28fa1ddc002a93803a14ed5c6c865ca4dd8",
    "files": [
        {
            "sha": "d3d454d09852266a43ad50ec0e978c476066f897",
            "filename": ".circleci/config.yml",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/5472c28fa1ddc002a93803a14ed5c6c865ca4dd8/.circleci%2Fconfig.yml",
            "raw_url": "https://github.com/angular/angular/raw/5472c28fa1ddc002a93803a14ed5c6c865ca4dd8/.circleci%2Fconfig.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.circleci%2Fconfig.yml?ref=5472c28fa1ddc002a93803a14ed5c6c865ca4dd8",
            "patch": "@@ -291,6 +291,7 @@ jobs:\n       - run: yarn -s ng-dev pullapprove verify\n       - run: yarn -s ng-dev ngbot verify\n       - run: yarn -s ng-dev commit-message validate-range $CI_GIT_BASE_REVISION $CI_GIT_REVISION\n+      - run: yarn -s check-tooling-setup\n \n   test:\n     executor:"
        },
        {
            "sha": "5d62f3ad82c67711338f18d1d1f41d2b558c4216",
            "filename": ".ng-dev/merge.ts",
            "status": "modified",
            "additions": 18,
            "deletions": 27,
            "changes": 45,
            "blob_url": "https://github.com/angular/angular/blob/5472c28fa1ddc002a93803a14ed5c6c865ca4dd8/.ng-dev%2Fmerge.ts",
            "raw_url": "https://github.com/angular/angular/raw/5472c28fa1ddc002a93803a14ed5c6c865ca4dd8/.ng-dev%2Fmerge.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.ng-dev%2Fmerge.ts?ref=5472c28fa1ddc002a93803a14ed5c6c865ca4dd8",
            "patch": "@@ -1,33 +1,24 @@\n-import {DevInfraMergeConfig} from '@angular/dev-infra-private/ng-dev/pr/merge/config';\n-import {getDefaultTargetLabelConfiguration} from '@angular/dev-infra-private/ng-dev/pr/merge/defaults';\n-import {github} from './github';\n-import {release} from './release';\n+import {MergeConfig} from '@angular/dev-infra-private/ng-dev/pr/merge/config';\n \n /**\n  * Configuration for the merge tool in `ng-dev`. This sets up the labels which\n  * are respected by the merge script (e.g. the target labels).\n  */\n-export const merge: DevInfraMergeConfig['merge'] = async api => {\n-  return {\n-    githubApiMerge: false,\n-    claSignedLabel: 'cla: yes',\n-    mergeReadyLabel: /^action: merge(-assistance)?/,\n-    caretakerNoteLabel: /^(action: merge-assistance)|(PullApprove: disable)/,\n-    commitMessageFixupLabel: 'commit message fixup',\n-    breakingChangeLabel: 'flag: breaking change',\n-    // We can pick any of the NPM packages as we are in a monorepo where all packages are\n-    // published together with the same version and branching.\n-    labels: await getDefaultTargetLabelConfiguration(api, github, release),\n-    requiredBaseCommits: {\n-      // PRs that target either `master` or the patch branch, need to be rebased\n-      // on top of the latest commit message validation fix.\n-      // These SHAs are the commits that update the required license text in the header.\n-      'master': '5aeb9a4124922d8ac08eb73b8f322905a32b0b3a',\n-      '10.0.x': '27b95ba64a5d99757f4042073fd1860e20e3ed24',\n-    },\n-    // `dev-infra` and `docs-infra` are not affecting the public NPM packages. Similarly,\n-    // the `bazel` package is not considered part of the public API so that features\n-    // can land in patch branches.\n-    targetLabelExemptScopes: ['dev-infra', 'docs-infra', 'bazel']\n-  };\n+export const merge: MergeConfig = {\n+  githubApiMerge: false,\n+  claSignedLabel: 'cla: yes',\n+  mergeReadyLabel: /^action: merge(-assistance)?/,\n+  caretakerNoteLabel: /^(action: merge-assistance)|(PullApprove: disable)/,\n+  commitMessageFixupLabel: 'commit message fixup',\n+  requiredBaseCommits: {\n+    // PRs that target either `master` or the patch branch, need to be rebased\n+    // on top of the latest commit message validation fix.\n+    // These SHAs are the commits that update the required license text in the header.\n+    'master': '5aeb9a4124922d8ac08eb73b8f322905a32b0b3a',\n+    '10.0.x': '27b95ba64a5d99757f4042073fd1860e20e3ed24',\n+  },\n+  // `dev-infra` and `docs-infra` are not affecting the public NPM packages. Similarly,\n+  // the `bazel` package is not considered part of the public API so that features\n+  // can land in patch branches.\n+  targetLabelExemptScopes: ['dev-infra', 'docs-infra', 'bazel']\n };"
        },
        {
            "sha": "e6442a92403eeaaf0582fdf79de7dd2f9c47da6f",
            "filename": ".ng-dev/release.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/5472c28fa1ddc002a93803a14ed5c6c865ca4dd8/.ng-dev%2Frelease.ts",
            "raw_url": "https://github.com/angular/angular/raw/5472c28fa1ddc002a93803a14ed5c6c865ca4dd8/.ng-dev%2Frelease.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.ng-dev%2Frelease.ts?ref=5472c28fa1ddc002a93803a14ed5c6c865ca4dd8",
            "patch": "@@ -22,7 +22,7 @@ export const release: ReleaseConfig = {\n     '@angular/service-worker',\n     '@angular/upgrade',\n   ],\n-  buildPackages: async (stampForRelease: boolean) => {\n+  buildPackages: async (stampForRelease: boolean|undefined) => {\n     // The buildTargetPackages function is loaded at runtime as the loading the script causes an\n     // invocation of bazel.\n     const {buildTargetPackages} = require(join(__dirname, '../scripts/build/package-builder'));"
        },
        {
            "sha": "9e9c1b746523a69e977dec25f0b8812da7267b8c",
            "filename": ".ng-dev/tsconfig.json",
            "status": "added",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/5472c28fa1ddc002a93803a14ed5c6c865ca4dd8/.ng-dev%2Ftsconfig.json",
            "raw_url": "https://github.com/angular/angular/raw/5472c28fa1ddc002a93803a14ed5c6c865ca4dd8/.ng-dev%2Ftsconfig.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.ng-dev%2Ftsconfig.json?ref=5472c28fa1ddc002a93803a14ed5c6c865ca4dd8",
            "patch": "@@ -0,0 +1,10 @@\n+{\n+  \"compilerOptions\": {\n+    \"strict\": true,\n+    \"target\": \"es2015\",\n+    \"module\": \"commonjs\",\n+    \"noEmit\": true,\n+    \"skipLibCheck\": true,\n+    \"types\": []\n+  },\n+}"
        },
        {
            "sha": "13bb805cd514ba724b0a41959c3b0df748fa9330",
            "filename": "package.json",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/5472c28fa1ddc002a93803a14ed5c6c865ca4dd8/package.json",
            "raw_url": "https://github.com/angular/angular/raw/5472c28fa1ddc002a93803a14ed5c6c865ca4dd8/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=5472c28fa1ddc002a93803a14ed5c6c865ca4dd8",
            "patch": "@@ -35,7 +35,8 @@\n     \"symbol-extractor:check\": \"node tools/symbol-extractor/run_all_symbols_extractor_tests.js test\",\n     \"symbol-extractor:update\": \"node tools/symbol-extractor/run_all_symbols_extractor_tests.js accept\",\n     \"ts-circular-deps:check\": \"yarn -s ng-dev ts-circular-deps check --config ./packages/circular-deps-test.conf.js\",\n-    \"ts-circular-deps:approve\": \"yarn -s ng-dev ts-circular-deps approve --config ./packages/circular-deps-test.conf.js\"\n+    \"ts-circular-deps:approve\": \"yarn -s ng-dev ts-circular-deps approve --config ./packages/circular-deps-test.conf.js\",\n+    \"check-tooling-setup\": \"yarn tsc --project .ng-dev/tsconfig.json\"\n   },\n   \"// 1\": \"dependencies are used locally and by bazel\",\n   \"dependencies\": {"
        }
    ],
    "stats": {
        "total": 61,
        "additions": 32,
        "deletions": 29
    }
}