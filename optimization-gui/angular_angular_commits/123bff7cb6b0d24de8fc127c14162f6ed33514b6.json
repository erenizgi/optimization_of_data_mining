{
    "author": "petebacondarwin",
    "message": "fix(compiler-cli): generate `let` statements in ES2015+ mode (#38775)\n\nWhen the target of the compiler is ES2015 or newer then we should\nbe generating `let` and `const` variable declarations rather than `var`.\n\nPR Close #38775",
    "sha": "123bff7cb6b0d24de8fc127c14162f6ed33514b6",
    "files": [
        {
            "sha": "b34c9a40799fc621c0d8dd15b7fd2366d8765d1b",
            "filename": "packages/compiler-cli/ngcc/test/rendering/esm_rendering_formatter_spec.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/123bff7cb6b0d24de8fc127c14162f6ed33514b6/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Fesm_rendering_formatter_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/123bff7cb6b0d24de8fc127c14162f6ed33514b6/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Fesm_rendering_formatter_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Fesm_rendering_formatter_spec.ts?ref=123bff7cb6b0d24de8fc127c14162f6ed33514b6",
            "patch": "@@ -69,7 +69,7 @@ B.decorators = [\n   { type: OtherB },\n   { type: Directive, args: [{ selector: '[b]' }] }\n ];\n-var C_1;\n+let C_1;\n let C = C_1 = class C {};\n C.decorators = [\n   { type: Directive, args: [{ selector: '[c]' }] },\n@@ -111,7 +111,7 @@ B.decorators = [\n ];\n return B;\n })();\n-var C_1;\n+let C_1;\n let C = C_1 = /** @class */ (() => {\n class C {}\n C.decorators = [\n@@ -432,7 +432,7 @@ A.decorators = [\n             name: _('/node_modules/test-package/some/file.js'),\n             contents: `\n import * as tslib_1 from \"tslib\";\n-var D_1;\n+let D_1;\n /* A copyright notice */\n import { Directive } from '@angular/core';\n const OtherA = () => (node) => { };\n@@ -681,9 +681,9 @@ export { D };\n           const stmt3 = new DeclareVarStmt('baz', new LiteralExpr('qux'), undefined, []);\n \n           expect(renderer.printStatement(stmt1, sourceFile, importManager)).toBe('const foo = 42;');\n-          expect(renderer.printStatement(stmt2, sourceFile, importManager)).toBe('var bar = true;');\n+          expect(renderer.printStatement(stmt2, sourceFile, importManager)).toBe('let bar = true;');\n           expect(renderer.printStatement(stmt3, sourceFile, importManager))\n-              .toBe('var baz = \"qux\";');\n+              .toBe('let baz = \"qux\";');\n         });\n       });\n     });"
        },
        {
            "sha": "6d3e87e44ec975e000996f26fd22aa2de8e4e7f8",
            "filename": "packages/compiler-cli/ngcc/test/rendering/renderer_spec.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 3,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/123bff7cb6b0d24de8fc127c14162f6ed33514b6/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Frenderer_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/123bff7cb6b0d24de8fc127c14162f6ed33514b6/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Frenderer_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Frendering%2Frenderer_spec.ts?ref=123bff7cb6b0d24de8fc127c14162f6ed33514b6",
            "patch": "@@ -32,6 +32,8 @@ import {getRootFiles, makeTestEntryPointBundle} from '../helpers/utils';\n class TestRenderingFormatter implements RenderingFormatter {\n   private printer = ts.createPrinter({newLine: ts.NewLineKind.LineFeed});\n \n+  constructor(private isEs5: boolean) {}\n+\n   addImports(output: MagicString, imports: Import[], sf: ts.SourceFile) {\n     output.prepend('\\n// ADD IMPORTS\\n');\n   }\n@@ -63,7 +65,8 @@ class TestRenderingFormatter implements RenderingFormatter {\n   }\n   printStatement(stmt: Statement, sourceFile: ts.SourceFile, importManager: ImportManager): string {\n     const node = translateStatement(\n-        stmt, importManager, NOOP_DEFAULT_IMPORT_RECORDER, ts.ScriptTarget.ES2015);\n+        stmt, importManager, NOOP_DEFAULT_IMPORT_RECORDER,\n+        this.isEs5 ? ts.ScriptTarget.ES5 : ts.ScriptTarget.ES2015);\n     const code = this.printer.printNode(ts.EmitHint.Unspecified, node, sourceFile);\n \n     return `// TRANSPILED\\n${code}`;\n@@ -94,7 +97,7 @@ function createTestRenderer(\n                                    .analyzeProgram(bundle.src.program);\n   const privateDeclarationsAnalyses =\n       new PrivateDeclarationsAnalyzer(host, referencesRegistry).analyzeProgram(bundle.src.program);\n-  const testFormatter = new TestRenderingFormatter();\n+  const testFormatter = new TestRenderingFormatter(isEs5);\n   spyOn(testFormatter, 'addExports').and.callThrough();\n   spyOn(testFormatter, 'addImports').and.callThrough();\n   spyOn(testFormatter, 'addDefinitions').and.callThrough();\n@@ -569,7 +572,7 @@ UndecoratedBase.ɵfac = function UndecoratedBase_Factory(t) { return new (t || U\n UndecoratedBase.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: UndecoratedBase, viewQuery: function UndecoratedBase_Query(rf, ctx) { if (rf & 1) {\n         ɵngcc0.ɵɵstaticViewQuery(_c0, true);\n     } if (rf & 2) {\n-        var _t;\n+        let _t;\n         ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.test = _t.first);\n     } } });`);\n         });"
        },
        {
            "sha": "f4465c697463a2625df68e2de800f0cacb2d0308",
            "filename": "packages/compiler-cli/src/ngtsc/translator/src/translator.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 3,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/123bff7cb6b0d24de8fc127c14162f6ed33514b6/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftranslator%2Fsrc%2Ftranslator.ts",
            "raw_url": "https://github.com/angular/angular/raw/123bff7cb6b0d24de8fc127c14162f6ed33514b6/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftranslator%2Fsrc%2Ftranslator.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftranslator%2Fsrc%2Ftranslator.ts?ref=123bff7cb6b0d24de8fc127c14162f6ed33514b6",
            "patch": "@@ -134,15 +134,16 @@ class ExpressionTranslatorVisitor implements ExpressionVisitor, StatementVisitor\n       private scriptTarget: Exclude<ts.ScriptTarget, ts.ScriptTarget.JSON>) {}\n \n   visitDeclareVarStmt(stmt: DeclareVarStmt, context: Context): ts.VariableStatement {\n-    const isConst =\n-        this.scriptTarget >= ts.ScriptTarget.ES2015 && stmt.hasModifier(StmtModifier.Final);\n+    const varType = this.scriptTarget < ts.ScriptTarget.ES2015 ?\n+        ts.NodeFlags.None :\n+        stmt.hasModifier(StmtModifier.Final) ? ts.NodeFlags.Const : ts.NodeFlags.Let;\n     const varDeclaration = ts.createVariableDeclaration(\n         /* name */ stmt.name,\n         /* type */ undefined,\n         /* initializer */ stmt.value?.visitExpression(this, context.withExpressionMode));\n     const declarationList = ts.createVariableDeclarationList(\n         /* declarations */[varDeclaration],\n-        /* flags */ isConst ? ts.NodeFlags.Const : ts.NodeFlags.None);\n+        /* flags */ varType);\n     const varStatement = ts.createVariableStatement(undefined, declarationList);\n     return attachComments(varStatement, stmt.leadingComments);\n   }"
        },
        {
            "sha": "4042a056da1565ce0912cd6dedd7fe06cad9d21c",
            "filename": "packages/compiler-cli/test/compliance/r3_compiler_compliance_spec.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 8,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/123bff7cb6b0d24de8fc127c14162f6ed33514b6/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Fr3_compiler_compliance_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/123bff7cb6b0d24de8fc127c14162f6ed33514b6/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Fr3_compiler_compliance_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Fr3_compiler_compliance_spec.ts?ref=123bff7cb6b0d24de8fc127c14162f6ed33514b6",
            "patch": "@@ -1638,7 +1638,7 @@ describe('compiler compliance', () => {\n                 $r3$.ɵɵviewQuery(SomeDirective, true);\n               }\n               if (rf & 2) {\n-                var $tmp$;\n+                let $tmp$;\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.someDir = $tmp$.first);\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.someDirs = $tmp$);\n               }\n@@ -1697,7 +1697,7 @@ describe('compiler compliance', () => {\n                 $r3$.ɵɵviewQuery($e1_attrs$, true);\n               }\n               if (rf & 2) {\n-                var $tmp$;\n+                let $tmp$;\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.myRef = $tmp$.first);\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.myRefs = $tmp$);\n               }\n@@ -1748,7 +1748,7 @@ describe('compiler compliance', () => {\n                 $r3$.ɵɵviewQuery($refs$, true);\n               }\n               if (rf & 2) {\n-                var $tmp$;\n+                let $tmp$;\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.someDir = $tmp$.first);\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.foo = $tmp$.first);\n               }\n@@ -1814,7 +1814,7 @@ describe('compiler compliance', () => {\n                 $r3$.ɵɵviewQuery(SomeDirective, true, TemplateRef);\n               }\n               if (rf & 2) {\n-                var $tmp$;\n+                let $tmp$;\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.myRef = $tmp$.first);\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.someDir = $tmp$.first);\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.myRefs = $tmp$);\n@@ -1875,7 +1875,7 @@ describe('compiler compliance', () => {\n               $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, false);\n               }\n               if (rf & 2) {\n-              var $tmp$;\n+              let $tmp$;\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.someDir = $tmp$.first);\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.someDirList = $tmp$);\n               }\n@@ -1935,7 +1935,7 @@ describe('compiler compliance', () => {\n               $r3$.ɵɵcontentQuery(dirIndex, $e1_attrs$, false);\n               }\n               if (rf & 2) {\n-              var $tmp$;\n+              let $tmp$;\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.myRef = $tmp$.first);\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.myRefs = $tmp$);\n               }\n@@ -1994,7 +1994,7 @@ describe('compiler compliance', () => {\n               $r3$.ɵɵcontentQuery(dirIndex, $ref0$, true);\n               }\n               if (rf & 2) {\n-              var $tmp$;\n+              let $tmp$;\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.someDir = $tmp$.first);\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.foo = $tmp$.first);\n               }\n@@ -2061,7 +2061,7 @@ describe('compiler compliance', () => {\n               $r3$.ɵɵcontentQuery(dirIndex, SomeDirective, false, TemplateRef);\n               }\n               if (rf & 2) {\n-              var $tmp$;\n+              let $tmp$;\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.myRef = $tmp$.first);\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.someDir = $tmp$.first);\n                 $r3$.ɵɵqueryRefresh($tmp$ = $r3$.ɵɵloadQuery()) && (ctx.myRefs = $tmp$);"
        },
        {
            "sha": "213718ceb697d19f769e172632b959b58c1c0c02",
            "filename": "packages/compiler-cli/test/compliance/r3_view_compiler_binding_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/123bff7cb6b0d24de8fc127c14162f6ed33514b6/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Fr3_view_compiler_binding_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/123bff7cb6b0d24de8fc127c14162f6ed33514b6/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Fr3_view_compiler_binding_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Fr3_view_compiler_binding_spec.ts?ref=123bff7cb6b0d24de8fc127c14162f6ed33514b6",
            "patch": "@@ -209,7 +209,7 @@ describe('compiler compliance: bindings', () => {\n           template: function MyComponent_Template(rf, ctx) {\n             …\n             if (rf & 2) {\n-              var $tmp0$ = null;\n+              let $tmp0$ = null;\n               $r3$.ɵɵproperty(\"title\", ctx.myTitle)(\"id\", ($tmp0$ = $r3$.ɵɵpipeBind1(1, 3, ($tmp0$ = ctx.auth()) == null ? null : $tmp0$.identity())) == null ? null : $tmp0$.id)(\"tabindex\", 1);\n             }\n           }\n@@ -750,7 +750,7 @@ describe('compiler compliance: bindings', () => {\n           hostVars: 1,\n           hostBindings: function HostBindingDir_HostBindings(rf, ctx) {\n             if (rf & 2) {\n-              var $tmp0$ = null;\n+              let $tmp0$ = null;\n               $r3$.ɵɵhostProperty(\"id\", ($tmp0$ = ctx.getData()) == null ? null : $tmp0$.id);\n             }\n           }"
        },
        {
            "sha": "3c299e8f2c512849a2accd924ad3eed88a153940",
            "filename": "packages/compiler-cli/test/compliance/r3_view_compiler_di_spec.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/123bff7cb6b0d24de8fc127c14162f6ed33514b6/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Fr3_view_compiler_di_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/123bff7cb6b0d24de8fc127c14162f6ed33514b6/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Fr3_view_compiler_di_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Fr3_view_compiler_di_spec.ts?ref=123bff7cb6b0d24de8fc127c14162f6ed33514b6",
            "patch": "@@ -212,7 +212,7 @@ describe('compiler compliance: dependency injection', () => {\n           MyService.ɵprov = $r3$.ɵɵdefineInjectable({\n             token: MyService,\n             factory: function MyService_Factory(t) {\n-              var r = null;\n+              let r = null;\n               if (t) {\n                 r = new t();\n               } else {\n@@ -285,7 +285,7 @@ describe('compiler compliance: dependency injection', () => {\n           MyService.ɵprov = $r3$.ɵɵdefineInjectable({\n             token: MyService,\n             factory: function MyService_Factory(t) {\n-              var r = null;\n+              let r = null;\n               if (t) {\n                 r = new t();\n               } else {"
        },
        {
            "sha": "1de26927d04b301e389d17be0889c9aff9f5a4ce",
            "filename": "packages/compiler-cli/test/compliance/r3_view_compiler_i18n_spec.ts",
            "status": "modified",
            "additions": 21,
            "deletions": 21,
            "changes": 42,
            "blob_url": "https://github.com/angular/angular/blob/123bff7cb6b0d24de8fc127c14162f6ed33514b6/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Fr3_view_compiler_i18n_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/123bff7cb6b0d24de8fc127c14162f6ed33514b6/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Fr3_view_compiler_i18n_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Fr3_view_compiler_i18n_spec.ts?ref=123bff7cb6b0d24de8fc127c14162f6ed33514b6",
            "patch": "@@ -251,7 +251,7 @@ const i18nMsg = (message: string, placeholders: Placeholder[] = [], meta?: Meta)\n   const closurePlaceholders = i18nPlaceholdersToString(placeholders);\n   const locMessageWithPlaceholders = i18nMsgInsertLocalizePlaceholders(message, placeholders);\n   return String.raw`\n-    var ${varName};\n+    let ${varName};\n     if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n         ${i18nMsgClosureMeta(meta)}\n         const $MSG_EXTERNAL_${msgIndex}$ = goog.getMsg(\"${message}\"${closurePlaceholders});\n@@ -304,7 +304,7 @@ describe('i18n support in the template compiler', () => {\n \n       // Keeping this block as a raw string, since it checks escaping of special chars.\n       const i18n_6 = String.raw`\n-        var $i18n_23$;\n+        let $i18n_23$;\n         if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n           /**\n            * @desc [BACKUP_$` +\n@@ -321,7 +321,7 @@ describe('i18n support in the template compiler', () => {\n \n       // Keeping this block as a raw string, since it checks escaping of special chars.\n       const i18n_7 = String.raw`\n-        var $i18n_7$;\n+        let $i18n_7$;\n         if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n           /**\n            * @desc Some text \\' [BACKUP_MESSAGE_ID: xxx]\n@@ -780,7 +780,7 @@ describe('i18n support in the template compiler', () => {\n             $r3$.ɵɵelementEnd();\n           }\n           if (rf & 2) {\n-              var $tmp_0_0$ = null;\n+              let $tmp_0_0$ = null;\n               $r3$.ɵɵi18nExp(($tmp_0_0$ = ctx.valueA.getRawValue()) == null ? null : $tmp_0_0$.getTitle());\n               $r3$.ɵɵi18nApply(1);\n           }\n@@ -942,7 +942,7 @@ describe('i18n support in the template compiler', () => {\n       verify(input, output);\n     });\n \n-    it('should sanitize ids and generate proper var names', () => {\n+    it('should sanitize ids and generate proper variable names', () => {\n       const input = `\n         <div i18n=\"@@ID.WITH.INVALID.CHARS.2\" i18n-title=\"@@ID.WITH.INVALID.CHARS\" title=\"Element title\">\n           Some content\n@@ -951,7 +951,7 @@ describe('i18n support in the template compiler', () => {\n \n       // Keeping raw content (avoiding `i18nMsg`) to illustrate message id sanitization.\n       const output = String.raw`\n-        var $I18N_0$;\n+        let $I18N_0$;\n         if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n             const $MSG_EXTERNAL_ID_WITH_INVALID_CHARS$$APP_SPEC_TS_1$ = goog.getMsg(\"Element title\");\n             $I18N_0$ = $MSG_EXTERNAL_ID_WITH_INVALID_CHARS$$APP_SPEC_TS_1$;\n@@ -960,7 +960,7 @@ describe('i18n support in the template compiler', () => {\n             $I18N_0$ = $localize \\`:@@ID.WITH.INVALID.CHARS:Element title\\`;\n         }\n         …\n-        var $I18N_2$;\n+        let $I18N_2$;\n         if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n             const $MSG_EXTERNAL_ID_WITH_INVALID_CHARS_2$$APP_SPEC_TS_4$ = goog.getMsg(\" Some content \");\n             $I18N_2$ = $MSG_EXTERNAL_ID_WITH_INVALID_CHARS_2$$APP_SPEC_TS_4$;\n@@ -1018,7 +1018,7 @@ describe('i18n support in the template compiler', () => {\n \n       // Keeping raw content (avoiding `i18nMsg`) to illustrate quotes escaping.\n       const output = String.raw`\n-        var $I18N_0$;\n+        let $I18N_0$;\n         if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n             const $MSG_EXTERNAL_4924931801512133405$$APP_SPEC_TS_0$ = goog.getMsg(\"Some text 'with single quotes', \\\"with double quotes\\\", ` +\n           '`with backticks`' + String.raw` and without quotes.\");\n@@ -1036,7 +1036,7 @@ describe('i18n support in the template compiler', () => {\n       const input = '<div i18n>`{{ count }}`</div>';\n       // Keeping raw content (avoiding `i18nMsg`) to illustrate backticks escaping.\n       const output = String.raw`\n-      var $I18N_0$;\n+      let $I18N_0$;\n       if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n           const $MSG_APP_SPEC_TS_1$ = goog.getMsg(\"` +\n           '`{$interpolation}`' + String.raw`\", { \"interpolation\": \"\\uFFFD0\\uFFFD\" });\n@@ -1108,7 +1108,7 @@ describe('i18n support in the template compiler', () => {\n       // Keeping raw content (avoiding `i18nMsg`) to illustrate how named interpolations are\n       // generated.\n       const i18n_0 = String.raw`\n-        var $I18N_0$;\n+        let $I18N_0$;\n         if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n             const $MSG_EXTERNAL_7597881511811528589$$APP_SPEC_TS_0$ = goog.getMsg(\" Named interpolation: {$phA} Named interpolation with spaces: {$phB} \", {\n               \"phA\": \"\\uFFFD0\\uFFFD\",\n@@ -1209,7 +1209,7 @@ describe('i18n support in the template compiler', () => {\n             $r3$.ɵɵelementEnd();\n           }\n           if (rf & 2) {\n-            var $tmp_2_0$ = null;\n+            let $tmp_2_0$ = null;\n             $r3$.ɵɵadvance(2);\n             $r3$.ɵɵi18nExp($r3$.ɵɵpipeBind1(2, 3, ctx.valueA))\n                           (ctx.valueA == null ? null : ctx.valueA.a == null ? null : ctx.valueA.a.b)\n@@ -2487,7 +2487,7 @@ describe('i18n support in the template compiler', () => {\n       // Keeping raw content (avoiding `i18nMsg`) to illustrate message layout\n       // in case of whitespace preserving mode.\n       const i18n_0 = String.raw`\n-        var $I18N_0$;\n+        let $I18N_0$;\n         if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n             const $MSG_EXTERNAL_963542717423364282$$APP_SPEC_TS_0$ = goog.getMsg(\"\\n          Some text\\n          {$startTagSpan}Text inside span{$closeTagSpan}\\n        \", {\n               \"startTagSpan\": \"\\uFFFD#3\\uFFFD\",\n@@ -2571,7 +2571,7 @@ describe('i18n support in the template compiler', () => {\n       `;\n \n       const output = String.raw`\n-        var $I18N_0$;\n+        let $I18N_0$;\n         if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n             const $MSG_EXTERNAL_4166854826696768832$$APP_SPEC_TS_0$ = goog.getMsg(\"{VAR_SELECT, select, single {'single quotes'} double {\\\"double quotes\\\"} other {other}}\");\n             $I18N_0$ = $MSG_EXTERNAL_4166854826696768832$$APP_SPEC_TS_0$;\n@@ -2914,7 +2914,7 @@ describe('i18n support in the template compiler', () => {\n       // Keeping raw content here to illustrate the difference in placeholders generated for\n       // goog.getMsg and $localize calls (see last i18n block).\n       const i18n_0 = String.raw`\n-        var $I18N_1$;\n+        let $I18N_1$;\n         if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n             const $MSG_APP_SPEC_TS_1$ = goog.getMsg(\"{VAR_SELECT, select, male {male} female {female} other {other}}\");\n             $I18N_1$ = $MSG_APP_SPEC_TS_1$;\n@@ -2925,7 +2925,7 @@ describe('i18n support in the template compiler', () => {\n         $I18N_1$ = $r3$.ɵɵi18nPostprocess($I18N_1$, {\n           \"VAR_SELECT\": \"\\uFFFD0\\uFFFD\"\n         });\n-        var $I18N_2$;\n+        let $I18N_2$;\n         if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n             const $MSG_APP_SPEC_TS_2$ = goog.getMsg(\"{VAR_SELECT, select, male {male} female {female} other {other}}\");\n             $I18N_2$ = $MSG_APP_SPEC_TS_2$;\n@@ -2936,7 +2936,7 @@ describe('i18n support in the template compiler', () => {\n         $I18N_2$ = $r3$.ɵɵi18nPostprocess($I18N_2$, {\n           \"VAR_SELECT\": \"\\uFFFD1\\uFFFD\"\n         });\n-        var $I18N_4$;\n+        let $I18N_4$;\n         if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n             const $MSG_APP_SPEC_TS__4$ = goog.getMsg(\"{VAR_SELECT, select, male {male} female {female} other {other}}\");\n             $I18N_4$ = $MSG_APP_SPEC_TS__4$;\n@@ -2947,7 +2947,7 @@ describe('i18n support in the template compiler', () => {\n         $I18N_4$ = $r3$.ɵɵi18nPostprocess($I18N_4$, {\n           \"VAR_SELECT\": \"\\uFFFD0:1\\uFFFD\"\n         });\n-        var $I18N_0$;\n+        let $I18N_0$;\n         if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n             const $MSG_APP_SPEC_TS_0$ = goog.getMsg(\" {$icu} {$startTagDiv} {$icu} {$closeTagDiv}{$startTagDiv_1} {$icu} {$closeTagDiv}\", {\n               \"startTagDiv\": \"\\uFFFD#2\\uFFFD\",\n@@ -3345,7 +3345,7 @@ describe('i18n support in the template compiler', () => {\n       const input = `<div i18n>Some Message</div>`;\n \n       const output = String.raw`\n-        var $I18N_0$;\n+        let $I18N_0$;\n         if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) { … }\n         else {\n             $I18N_0$ = $localize \\`:␟ec93160d6d6a8822214060dd7938bf821c22b226␟6795333002533525253:Some Message\\`;\n@@ -3360,7 +3360,7 @@ describe('i18n support in the template compiler', () => {\n       const input = `<div i18n>Some Message</div>`;\n \n       const output = String.raw`\n-        var $I18N_0$;\n+        let $I18N_0$;\n         if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) { … }\n         else {\n             $I18N_0$ = $localize \\`:␟ec93160d6d6a8822214060dd7938bf821c22b226␟6795333002533525253:Some Message\\`;\n@@ -3523,7 +3523,7 @@ $` + String.raw`{$I18N_4$}:ICU:\\`;\n       `;\n \n       const i18n_0 = String.raw`\n-        var $I18N_0$;\n+        let $I18N_0$;\n         if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n           const $MSG_EXTERNAL_7128002169381370313$$APP_SPEC_TS_1$ = goog.getMsg(\"{$startTagXhtmlDiv} Count: {$startTagXhtmlSpan}5{$closeTagXhtmlSpan}{$closeTagXhtmlDiv}\", {\n             \"startTagXhtmlDiv\": \"\\uFFFD#3\\uFFFD\",\n@@ -3584,7 +3584,7 @@ $` + String.raw`{$I18N_4$}:ICU:\\`;\n       `;\n \n       const i18n_0 = String.raw`\n-        var $I18N_0$;\n+        let $I18N_0$;\n         if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n           const $MSG_EXTERNAL_7428861019045796010$$APP_SPEC_TS_1$ = goog.getMsg(\" Count: {$startTagXhtmlSpan}5{$closeTagXhtmlSpan}\", {\n             \"startTagXhtmlSpan\": \"\\uFFFD#4\\uFFFD\","
        }
    ],
    "stats": {
        "total": 92,
        "additions": 48,
        "deletions": 44
    }
}