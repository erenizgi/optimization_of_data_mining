{
    "author": "petebacondarwin",
    "message": "build(docs-infra): move docs-watch settings to a base package (#40479)\n\nThis new `base-authoring-package` captures all the settings, which\nturns of potentially fatal checks, in one place. This new package is\nthen used as a base for all the docs-watch related packages, rather\nthan dotting the settings in a variety of different packages. This also\nhas the benefit that the standard configuration for doc-gen is fatal\non failed checks by default.\n\nPR Close #40479",
    "sha": "9491318c26f2e2609001b0593b7e6fd2b01e77e0",
    "files": [
        {
            "sha": "e62f4373fb74e565e949def03a05b677e56ceb31",
            "filename": "aio/tools/transforms/angular-base-package/index.js",
            "status": "modified",
            "additions": 27,
            "deletions": 12,
            "changes": 39,
            "blob_url": "https://github.com/angular/angular/blob/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Findex.js",
            "raw_url": "https://github.com/angular/angular/raw/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Findex.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-base-package%2Findex.js?ref=9491318c26f2e2609001b0593b7e6fd2b01e77e0",
            "patch": "@@ -5,17 +5,21 @@\n  * Use of this source code is governed by an MIT-style license that can be\n  * found in the LICENSE file at https://angular.io/license\n  */\n+const { extname, resolve } = require('canonical-path');\n+const { existsSync } = require('fs');\n const path = require('path');\n-const Package = require('dgeni').Package;\n \n+const Package = require('dgeni').Package;\n const gitPackage = require('dgeni-packages/git');\n const jsdocPackage = require('dgeni-packages/jsdoc');\n const nunjucksPackage = require('dgeni-packages/nunjucks');\n-const linksPackage = require('../links-package');\n+const postProcessPackage = require('dgeni-packages/post-process-html');\n+\n+const { SRC_PATH } = require('../config');\n const examplesPackage = require('../examples-package');\n-const targetPackage = require('../target-package');\n+const linksPackage = require('../links-package');\n const remarkPackage = require('../remark-package');\n-const postProcessPackage = require('dgeni-packages/post-process-html');\n+const targetPackage = require('../target-package');\n \n const { PROJECT_ROOT, CONTENTS_PATH, OUTPUT_PATH, DOCS_OUTPUT_PATH, TEMPLATES_PATH, AIO_PATH, requireFolder } = require('../config');\n \n@@ -53,13 +57,6 @@ module.exports = new Package('angular-base', [\n     inlineTagProcessor.inlineTagDefinitions.push(require('./inline-tag-defs/custom-search-defs/'));\n   })\n \n-  .config(function(checkAnchorLinksProcessor, checkForUnusedExampleRegions) {\n-    // These are disabled here to prevent false negatives for the `docs-watch` task.\n-    // It is re-enabled in the main `angular.io-package`\n-    checkAnchorLinksProcessor.$enabled = false;\n-    checkForUnusedExampleRegions.$enabled = false;\n-  })\n-\n   // Where do we get the source files?\n   .config(function(readFilesProcessor, collectExamples, generateKeywordsProcessor, jsonFileReader) {\n \n@@ -125,7 +122,25 @@ module.exports = new Package('angular-base', [\n     getLinkInfo.useFirstAmbiguousLink = false;\n   })\n \n-\n+  .config(function(checkAnchorLinksProcessor) {\n+    // since we encode the HTML to JSON we need to ensure that this processor runs before that encoding happens.\n+    checkAnchorLinksProcessor.$runBefore = ['convertToJsonProcessor'];\n+    checkAnchorLinksProcessor.$runAfter = ['fixInternalDocumentLinks'];\n+    // We only want to check docs that are going to be output as JSON docs.\n+    checkAnchorLinksProcessor.checkDoc = (doc) => doc.path && doc.outputPath && extname(doc.outputPath) === '.json' && doc.docType !== 'json-doc';\n+    // Since we have a `base[href=\"/\"]` arrangement all links are relative to that and not relative to the source document's path\n+    checkAnchorLinksProcessor.base = '/';\n+    // Ignore links to local assets\n+    // (This is not optimal in terms of performance without making changes to dgeni-packages there is no other way.\n+    //  That being said do this only add 500ms onto the ~30sec doc-gen run - so not a huge issue)\n+    checkAnchorLinksProcessor.ignoredLinks.push({\n+      test(url) {\n+        return (existsSync(resolve(SRC_PATH, url)));\n+      }\n+    });\n+    checkAnchorLinksProcessor.pathVariants = ['', '/', '.html', '/index.html', '#top-of-page'];\n+    checkAnchorLinksProcessor.errorOnUnmatchedLinks = true;\n+  })\n \n   .config(function(computePathsProcessor, generateKeywordsProcessor) {\n "
        },
        {
            "sha": "37b8ce8c5c3e0efbc52f6415aba48f558050edc4",
            "filename": "aio/tools/transforms/angular-content-package/index.js",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fangular-content-package%2Findex.js",
            "raw_url": "https://github.com/angular/angular/raw/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fangular-content-package%2Findex.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular-content-package%2Findex.js?ref=9491318c26f2e2609001b0593b7e6fd2b01e77e0",
            "patch": "@@ -18,7 +18,7 @@ const { CONTENTS_PATH, GUIDE_EXAMPLES_PATH } = require('../config');\n module.exports = new Package('angular-content', [basePackage, contentPackage])\n \n   // Where do we get the source files?\n-  .config(function(readFilesProcessor, collectExamples, renderExamples) {\n+  .config(function(readFilesProcessor, collectExamples) {\n \n     const gitignoreFilePath = path.resolve(GUIDE_EXAMPLES_PATH, '.gitignore');\n     const gitignoreFile = fs.readFileSync(gitignoreFilePath, 'utf8');\n@@ -91,8 +91,6 @@ module.exports = new Package('angular-content', [basePackage, contentPackage])\n \n     collectExamples.exampleFolders.push('examples');\n     collectExamples.registerIgnoredExamples(ignoredExamplePaths, gitignoreFilePath);\n-\n-    renderExamples.ignoreBrokenExamples = true;\n   })\n \n "
        },
        {
            "sha": "f891ab05cb947ab6a6455f078b7e2447019155c9",
            "filename": "aio/tools/transforms/angular.io-package/index.js",
            "status": "modified",
            "additions": 0,
            "deletions": 38,
            "changes": 38,
            "blob_url": "https://github.com/angular/angular/blob/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fangular.io-package%2Findex.js",
            "raw_url": "https://github.com/angular/angular/raw/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fangular.io-package%2Findex.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fangular.io-package%2Findex.js?ref=9491318c26f2e2609001b0593b7e6fd2b01e77e0",
            "patch": "@@ -11,9 +11,6 @@ const apiPackage = require('../angular-api-package');\n const contentPackage = require('../angular-content-package');\n const errorsPackage = require('../angular-errors-package');\n const cliDocsPackage = require('../cli-docs-package');\n-const { extname, resolve } = require('canonical-path');\n-const { existsSync } = require('fs');\n-const { SRC_PATH } = require('../config');\n \n module.exports = new Package('angular.io', [gitPackage, apiPackage, contentPackage, cliDocsPackage, errorsPackage])\n \n@@ -29,41 +26,6 @@ module.exports = new Package('angular.io', [gitPackage, apiPackage, contentPacka\n     renderDocsProcessor.extraData.versionInfo = versionInfo;\n   })\n \n-  .config(function(checkForUnusedExampleRegions) {\n-    // Re-enable this processor that was disabled in the `angular-base` package to\n-    // avoid running it during `serve-and-sync` runs.\n-    checkForUnusedExampleRegions.$enabled = true;\n-  })\n-\n-  .config(function(checkAnchorLinksProcessor, linkInlineTagDef, renderExamples) {\n-\n-    // Fail the processing if there is an invalid link\n-    linkInlineTagDef.failOnBadLink = true;\n-\n-    checkAnchorLinksProcessor.$enabled = true;\n-    // since we encode the HTML to JSON we need to ensure that this processor runs before that encoding happens.\n-    checkAnchorLinksProcessor.$runBefore = ['convertToJsonProcessor'];\n-    checkAnchorLinksProcessor.$runAfter = ['fixInternalDocumentLinks'];\n-    // We only want to check docs that are going to be output as JSON docs.\n-    checkAnchorLinksProcessor.checkDoc = (doc) => doc.path && doc.outputPath && extname(doc.outputPath) === '.json' && doc.docType !== 'json-doc';\n-    // Since we have a `base[href=\"/\"]` arrangement all links are relative to that and not relative to the source document's path\n-    checkAnchorLinksProcessor.base = '/';\n-    // Ignore links to local assets\n-    // (This is not optimal in terms of performance without making changes to dgeni-packages there is no other way.\n-    //  That being said do this only add 500ms onto the ~30sec doc-gen run - so not a huge issue)\n-    checkAnchorLinksProcessor.ignoredLinks.push({\n-      test(url) {\n-        return (existsSync(resolve(SRC_PATH, url)));\n-      }\n-    });\n-    checkAnchorLinksProcessor.pathVariants = ['', '/', '.html', '/index.html', '#top-of-page'];\n-    checkAnchorLinksProcessor.errorOnUnmatchedLinks = true;\n-\n-    // Make sure we fail if the examples are not right\n-    renderExamples.ignoreBrokenExamples = false;\n-\n-  })\n-\n   .config(function(renderLinkInfo, postProcessHtml) {\n     renderLinkInfo.docTypes = postProcessHtml.docTypes;\n   });"
        },
        {
            "sha": "cc235004360d3ef1f25e0e9b8453887c3eba52df",
            "filename": "aio/tools/transforms/authors-package/api-package.js",
            "status": "modified",
            "additions": 14,
            "deletions": 13,
            "changes": 27,
            "blob_url": "https://github.com/angular/angular/blob/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fapi-package.js",
            "raw_url": "https://github.com/angular/angular/raw/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fapi-package.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fapi-package.js?ref=9491318c26f2e2609001b0593b7e6fd2b01e77e0",
            "patch": "@@ -8,6 +8,7 @@\n const Package = require('dgeni').Package;\n const apiPackage = require('../angular-api-package');\n const { API_SOURCE_PATH } = require('../config');\n+const baseAuthoringPackage = require('./base-authoring-package');\n \n const packageMap = {\n   animations: ['animations/index.ts', 'animations/browser/index.ts', 'animations/browser/testing/index.ts'],\n@@ -26,19 +27,19 @@ const packageMap = {\n \n function createPackage(packageName) {\n \n-  return new Package('author-api', [apiPackage])\n-    .config(function(readTypeScriptModules) {\n-      readTypeScriptModules.sourceFiles = packageMap[packageName];\n-    })\n-    .config(function(readFilesProcessor) {\n-      readFilesProcessor.sourceFiles = [\n-        {\n-          basePath: API_SOURCE_PATH,\n-          include: `${API_SOURCE_PATH}/examples/${packageName}/**/*`,\n-          fileReader: 'exampleFileReader'\n-        }\n-      ];\n-    });\n+  return new Package('author-api', [baseAuthoringPackage, apiPackage])\n+      .config(function(readTypeScriptModules) {\n+        readTypeScriptModules.sourceFiles = packageMap[packageName];\n+      })\n+      .config(function(readFilesProcessor) {\n+        readFilesProcessor.sourceFiles = [\n+          {\n+            basePath: API_SOURCE_PATH,\n+            include: `${API_SOURCE_PATH}/examples/${packageName}/**/*`,\n+            fileReader: 'exampleFileReader'\n+          }\n+        ];\n+      });\n }\n \n "
        },
        {
            "sha": "3dbfd6cb46a65698ed9c90f1c3066ebce87b4c59",
            "filename": "aio/tools/transforms/authors-package/base-authoring-package.js",
            "status": "added",
            "additions": 36,
            "deletions": 0,
            "changes": 36,
            "blob_url": "https://github.com/angular/angular/blob/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fbase-authoring-package.js",
            "raw_url": "https://github.com/angular/angular/raw/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fbase-authoring-package.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fbase-authoring-package.js?ref=9491318c26f2e2609001b0593b7e6fd2b01e77e0",
            "patch": "@@ -0,0 +1,36 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+const Package = require('dgeni').Package;\n+const basePackage = require('../angular-base-package');\n+\n+/**\n+ * A base package used by all the authoring packages in this folder.\n+ *\n+ * This package turns off lots of the potentially fatal checks to allow\n+ * doc-gen to complete when authors are using the `docs-watch` or `serve-and-sync`\n+ * jobs.\n+ */\n+const baseAuthoringPackage = new Package('base-authoring', [basePackage]);\n+baseAuthoringPackage\n+    .config(function(checkAnchorLinksProcessor, checkForUnusedExampleRegions) {\n+      // These are disabled here to prevent false negatives for the `docs-watch` task.\n+      checkAnchorLinksProcessor.$enabled = false;\n+      checkForUnusedExampleRegions.$enabled = false;\n+    })\n+\n+    .config(function(linkInlineTagDef) {\n+      // Do not fail the processing if there is an invalid link\n+      linkInlineTagDef.failOnBadLink = false;\n+    })\n+\n+    .config(function(renderExamples) {\n+      // Do not fail the processing if there is a broken example\n+      renderExamples.ignoreBrokenExamples = true;\n+    });\n+\n+module.exports = baseAuthoringPackage;"
        },
        {
            "sha": "a94af77fa45f9592fefca922b790a8b1424d1bdb",
            "filename": "aio/tools/transforms/authors-package/getting-started-package.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fgetting-started-package.js",
            "raw_url": "https://github.com/angular/angular/raw/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fgetting-started-package.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fgetting-started-package.js?ref=9491318c26f2e2609001b0593b7e6fd2b01e77e0",
            "patch": "@@ -12,6 +12,7 @@ const {readFileSync} = require('fs');\n \n const contentPackage = require('../angular-content-package');\n const {CONTENTS_PATH} = require('../config');\n+const baseAuthoringPackage = require('./base-authoring-package');\n const {codeExampleMatcher} = require('./utils');\n \n /* eslint no-console: \"off\" */\n@@ -27,7 +28,7 @@ function createPackage(tutorialName) {\n     console.log(examples.map(example => ' - ' + example).join('\\n'));\n   }\n \n-  return new Package('author-getting-started', [contentPackage])\n+  return new Package('author-getting-started', [baseAuthoringPackage, contentPackage])\n       .config(function(readFilesProcessor) {\n         readFilesProcessor.sourceFiles = [\n           {basePath: CONTENTS_PATH, include: tutorialFilePath, fileReader: 'contentFileReader'}, {"
        },
        {
            "sha": "e7cffffb077b2dc79fe8b548a6095d470436e568",
            "filename": "aio/tools/transforms/authors-package/guide-package.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fguide-package.js",
            "raw_url": "https://github.com/angular/angular/raw/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fguide-package.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fguide-package.js?ref=9491318c26f2e2609001b0593b7e6fd2b01e77e0",
            "patch": "@@ -14,6 +14,7 @@ const {readFileSync} = require('fs');\n \n const contentPackage = require('../angular-content-package');\n const {CONTENTS_PATH} = require('../config');\n+const baseAuthoringPackage = require('./base-authoring-package');\n const {codeExampleMatcher} = require('./utils');\n \n function createPackage(guideName) {\n@@ -27,7 +28,7 @@ function createPackage(guideName) {\n     console.log(examples.map(example => ' - ' + example).join('\\n'));\n   }\n \n-  return new Package('author-guide', [contentPackage]).config(function(readFilesProcessor) {\n+  return new Package('author-guide', [baseAuthoringPackage, contentPackage]).config(function(readFilesProcessor) {\n     readFilesProcessor.sourceFiles = [\n       {basePath: CONTENTS_PATH, include: guideFilePath, fileReader: 'contentFileReader'}, {\n         basePath: CONTENTS_PATH,"
        },
        {
            "sha": "8a51250fe868874b4a508f1801766d576959ea22",
            "filename": "aio/tools/transforms/authors-package/marketing-package.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fmarketing-package.js",
            "raw_url": "https://github.com/angular/angular/raw/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fmarketing-package.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fmarketing-package.js?ref=9491318c26f2e2609001b0593b7e6fd2b01e77e0",
            "patch": "@@ -7,10 +7,11 @@\n  */\n const Package = require('dgeni').Package;\n const contentPackage = require('../angular-content-package');\n-const { CONTENTS_PATH } = require('../config');\n+const {CONTENTS_PATH} = require('../config');\n+const baseAuthoringPackage = require('./base-authoring-package');\n \n function createPackage() {\n-  return new Package('author-marketing', [contentPackage])\n+  return new Package('author-marketing', [baseAuthoringPackage, contentPackage])\n     .config(function(readFilesProcessor) {\n       readFilesProcessor.sourceFiles = [\n         {"
        },
        {
            "sha": "020deb08fb156e0f11d52dcd5db5c20f5cabf2d8",
            "filename": "aio/tools/transforms/authors-package/tutorial-package.js",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fauthors-package%2Ftutorial-package.js",
            "raw_url": "https://github.com/angular/angular/raw/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fauthors-package%2Ftutorial-package.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fauthors-package%2Ftutorial-package.js?ref=9491318c26f2e2609001b0593b7e6fd2b01e77e0",
            "patch": "@@ -12,6 +12,7 @@ const {readFileSync} = require('fs');\n \n const contentPackage = require('../angular-content-package');\n const {CONTENTS_PATH} = require('../config');\n+const baseAuthoringPackage = require('./base-authoring-package');\n const {codeExampleMatcher} = require('./utils');\n \n /* eslint no-console: \"off\" */\n@@ -27,7 +28,7 @@ function createPackage(tutorialName) {\n     console.log(examples.map(example => ' - ' + example).join('\\n'));\n   }\n \n-  return new Package('author-tutorial', [contentPackage]).config(function(readFilesProcessor) {\n+  return new Package('author-tutorial', [baseAuthoringPackage, contentPackage]).config(function(readFilesProcessor) {\n     readFilesProcessor.sourceFiles = [\n       {basePath: CONTENTS_PATH, include: tutorialFilePath, fileReader: 'contentFileReader'}, {\n         basePath: CONTENTS_PATH,"
        },
        {
            "sha": "d9cf254ef31c212bd83bde6f31c47df01426614b",
            "filename": "aio/tools/transforms/authors-package/watchr.js",
            "status": "modified",
            "additions": 5,
            "deletions": 9,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fwatchr.js",
            "raw_url": "https://github.com/angular/angular/raw/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fwatchr.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Fauthors-package%2Fwatchr.js?ref=9491318c26f2e2609001b0593b7e6fd2b01e77e0",
            "patch": "@@ -29,15 +29,11 @@ if (process.argv.indexOf('--watch-only') === -1) {\n   console.log('Skip the full doc-gen by running: `yarn docs-watch --watch-only`');\n   console.log('================================================================');\n   const {Dgeni} = require('dgeni');\n-  const dgeni = new Dgeni([require('../angular.io-package')]);\n-\n-  // Turn off all the potential failures for this doc-gen one-off run.\n-  // This enables authors to run `docs-watch` while the docs are still in an unstable state.\n-  const injector = dgeni.configureInjector();\n-  injector.get('linkInlineTagDef').failOnBadLink = false;\n-  injector.get('checkAnchorLinksProcessor').$enabled = false;\n-  injector.get('renderExamples').ignoreBrokenExamples = true;\n-\n+  const dgeni = new Dgeni([\n+    // The base-authoring-package will turn off potential failures for this doc-gen one-off run.\n+    // This enables authors to run `docs-watch` while the docs are still in an unstable state.\n+    require('./base-authoring-package'),\n+    require('../angular.io-package')]);\n   p = dgeni.generate();\n }\n "
        },
        {
            "sha": "ff671bae5f624c536f25d0958cc7c7ca68f452e1",
            "filename": "aio/tools/transforms/links-package/inline-tag-defs/link.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Flinks-package%2Finline-tag-defs%2Flink.js",
            "raw_url": "https://github.com/angular/angular/raw/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Flinks-package%2Finline-tag-defs%2Flink.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Flinks-package%2Finline-tag-defs%2Flink.js?ref=9491318c26f2e2609001b0593b7e6fd2b01e77e0",
            "patch": "@@ -14,7 +14,7 @@ var INLINE_LINK = /(\\S+)(?:\\s+([\\s\\S]+))?/;\n module.exports = function linkInlineTagDef(getLinkInfo, createDocMessage, log) {\n   return {\n     name: 'link',\n-    failOnBadLink: false,\n+    failOnBadLink: true,\n     description:\n         'Process inline link tags (of the form {@link some/uri Some Title}), replacing them with HTML anchors',\n     handler(doc, tagName, tagDescription) {"
        },
        {
            "sha": "878ab04859d36c73e9e2b42e1c7ea16aa4563d06",
            "filename": "aio/tools/transforms/links-package/inline-tag-defs/link.spec.js",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Flinks-package%2Finline-tag-defs%2Flink.spec.js",
            "raw_url": "https://github.com/angular/angular/raw/9491318c26f2e2609001b0593b7e6fd2b01e77e0/aio%2Ftools%2Ftransforms%2Flinks-package%2Finline-tag-defs%2Flink.spec.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Ftransforms%2Flinks-package%2Finline-tag-defs%2Flink.spec.js?ref=9491318c26f2e2609001b0593b7e6fd2b01e77e0",
            "patch": "@@ -25,7 +25,7 @@ describe('link inline-tag-def', function() {\n     const doc = {};\n     const tagName = 'link';\n     const tagDescription = 'doc-id link text';\n-    getLinkInfo.and.returnValue({ url: 'url/to/doc', title: 'link text' });\n+    getLinkInfo.and.returnValue({ url: 'url/to/doc', title: 'link text', valid: true });\n     tag.handler(doc, tagName, tagDescription);\n     expect(getLinkInfo).toHaveBeenCalledWith('doc-id', 'link text', doc);\n   });\n@@ -34,7 +34,7 @@ describe('link inline-tag-def', function() {\n     const doc = {};\n     const tagName = 'link';\n     const tagDescription = 'doc-id link text';\n-    getLinkInfo.and.returnValue({ url: 'url/to/doc', title: 'link text' });\n+    getLinkInfo.and.returnValue({ url: 'url/to/doc', title: 'link text', valid: true });\n     const result = tag.handler(doc, tagName, tagDescription);\n     expect(result).toEqual('<a href=\\'url/to/doc\\'>link text</a>');\n   });\n@@ -43,6 +43,7 @@ describe('link inline-tag-def', function() {\n     const doc = {};\n     const tagName = 'link';\n     const tagDescription = 'doc-id link text';\n+    tag.failOnBadLink = false;\n     getLinkInfo.and.returnValue({ valid: false, error: 'Error message', errorType: 'error' });\n     expect(() => tag.handler(doc, tagName, tagDescription)).not.toThrow();\n     expect(log.warn).toHaveBeenCalledWith('Error in {@link doc-id link text} - Error message - doc');"
        }
    ],
    "stats": {
        "total": 179,
        "additions": 96,
        "deletions": 83
    }
}