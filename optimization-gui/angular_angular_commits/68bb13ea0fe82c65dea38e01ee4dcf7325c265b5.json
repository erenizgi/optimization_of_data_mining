{
    "author": "danieltre23",
    "message": "refactor(compiler-cli): move `getDiagnosticsForComponent` to compiler (#43134)\n\nChange the language service to call `getDiagnosticsForComponent` from\nthe compiler instead of the `TemplateTypeChecker`.\n\nRefs #42966\n\nPR Close #43134",
    "sha": "68bb13ea0fe82c65dea38e01ee4dcf7325c265b5",
    "files": [
        {
            "sha": "a7c9344b2b6fce7c83918bc39e42f2592b9910dd",
            "filename": "packages/compiler-cli/src/ngtsc/core/src/compiler.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/68bb13ea0fe82c65dea38e01ee4dcf7325c265b5/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fcompiler.ts",
            "raw_url": "https://github.com/angular/angular/raw/68bb13ea0fe82c65dea38e01ee4dcf7325c265b5/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fcompiler.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fcompiler.ts?ref=68bb13ea0fe82c65dea38e01ee4dcf7325c265b5",
            "patch": "@@ -459,6 +459,15 @@ export class NgCompiler {\n     return this.addMessageTextDetails(diagnostics);\n   }\n \n+  /**\n+   * Get all `ts.Diagnostic`s currently available that pertain to the given component.\n+   */\n+  getDiagnosticsForComponent(component: ts.ClassDeclaration): ts.Diagnostic[] {\n+    const compilation = this.ensureAnalyzed();\n+    const ttc = compilation.templateTypeChecker;\n+    return this.addMessageTextDetails(ttc.getDiagnosticsForComponent(component));\n+  }\n+\n   /**\n    * Add Angular.io error guide links to diagnostics for this compilation.\n    */"
        },
        {
            "sha": "e1fce16bb4613425a4068ddb17e416960ca8a601",
            "filename": "packages/language-service/ivy/language_service.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/68bb13ea0fe82c65dea38e01ee4dcf7325c265b5/packages%2Flanguage-service%2Fivy%2Flanguage_service.ts",
            "raw_url": "https://github.com/angular/angular/raw/68bb13ea0fe82c65dea38e01ee4dcf7325c265b5/packages%2Flanguage-service%2Fivy%2Flanguage_service.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flanguage-service%2Fivy%2Flanguage_service.ts?ref=68bb13ea0fe82c65dea38e01ee4dcf7325c265b5",
            "patch": "@@ -68,7 +68,6 @@ export class LanguageService {\n \n   getSemanticDiagnostics(fileName: string): ts.Diagnostic[] {\n     return this.withCompilerAndPerfTracing(PerfPhase.LsDiagnostics, (compiler) => {\n-      const ttc = compiler.getTemplateTypeChecker();\n       const diagnostics: ts.Diagnostic[] = [];\n       if (isTypeScriptFile(fileName)) {\n         const program = compiler.getCurrentProgram();\n@@ -104,7 +103,7 @@ export class LanguageService {\n         const components = compiler.getComponentsWithTemplateFile(fileName);\n         for (const component of components) {\n           if (ts.isClassDeclaration(component)) {\n-            diagnostics.push(...ttc.getDiagnosticsForComponent(component));\n+            diagnostics.push(...compiler.getDiagnosticsForComponent(component));\n           }\n         }\n       }"
        }
    ],
    "stats": {
        "total": 12,
        "additions": 10,
        "deletions": 2
    }
}