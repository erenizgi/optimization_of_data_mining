{
    "author": "devversion",
    "message": "test(compiler-cli): fix integration test failing on windows due to missing runfile symlinking (#43431)\n\nCurrently, some tests in the `compiler-cli/integrationtest` package fail\non Windows because there are spec files which are not Bazel-generated.\n\nWhen Bazel runs these tests on Windows, the spec file is resolved to\nthe actual source file (since there is no runfile symlinking/sandboxing).\nThis breaks the execution of the CJS spec file since it resides in th\n`packages/compiler-cli` source folder which has a `package.json` set to\n`type: module`.\n\nWe fix this by adding a `package.json` file for the integration test\nfolder and setting `module` to `commonjs`.\n\nPR Close #43431",
    "sha": "8cc74b608b9ba0b2b343ec45749cdf45e803eed4",
    "files": [
        {
            "sha": "8ed68d7f2a17f7ede904cf444b7c1cea3bbc4d3b",
            "filename": "packages/compiler-cli/integrationtest/package.json",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/8cc74b608b9ba0b2b343ec45749cdf45e803eed4/packages%2Fcompiler-cli%2Fintegrationtest%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/8cc74b608b9ba0b2b343ec45749cdf45e803eed4/packages%2Fcompiler-cli%2Fintegrationtest%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fintegrationtest%2Fpackage.json?ref=8cc74b608b9ba0b2b343ec45749cdf45e803eed4",
            "patch": "@@ -0,0 +1,7 @@\n+{\n+  \"#1\": \"We maintain a `package.json` file so that all scripts for the integration test are not\",\n+  \"#2\": \"accidentally treated as ESM when tests run on Windows. On Windows, the scripts are\",\n+  \"#3\": \"not symlinked into a runfile tree/sandbox, so they accidentally get the `type`: `module`\",\n+  \"#4\": \"from the compiler-cli package.json file.\",\n+  \"type\": \"commonjs\"\n+}"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 7,
        "deletions": 0
    }
}