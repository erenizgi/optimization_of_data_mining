{
    "author": "kapunahelewong",
    "message": "feat(docs-infra): add support for unformatted code-snippets (#41335)\n\nThis commit adds support for skipping formatting in `<aio-code>`\nelements (which are used by `<code-example>` and `<code-pane>` elements\nunder the hood) by specifying the `language` option as `'root'`.\n\nThis is useful for code-snippets that include plain text.\n\nPR Close #41335",
    "sha": "a4e3ea03112e60dee23cbf809c69e1b3e9d21259",
    "files": [
        {
            "sha": "ef8f38484112f49f5f90f2c0996f4b0f3b543861",
            "filename": "aio/src/app/custom-elements/code/code.component.spec.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/a4e3ea03112e60dee23cbf809c69e1b3e9d21259/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/a4e3ea03112e60dee23cbf809c69e1b3e9d21259/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode.component.spec.ts?ref=a4e3ea03112e60dee23cbf809c69e1b3e9d21259",
            "patch": "@@ -117,6 +117,15 @@ describe('CodeComponent', () => {\n       expect(getFormattedCode()).toBe(\n           `Formatted code (language: auto, linenums: true): ${bigMultiLineCode}`);\n     });\n+\n+    it('should skip prettify if language is `\\'none\\'`', () => {\n+      hostComponent.setCode(bigMultiLineCode);\n+      hostComponent.language = 'none';\n+\n+      fixture.detectChanges();\n+\n+      expect(getFormattedCode()).toBe(bigMultiLineCode);\n+    });\n   });\n \n   describe('whitespace handling', () => {"
        },
        {
            "sha": "a3b40df5aecd7eac6d1b04cfbfb5c0e3426d03a5",
            "filename": "aio/src/app/custom-elements/code/code.component.ts",
            "status": "modified",
            "additions": 13,
            "deletions": 5,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/a4e3ea03112e60dee23cbf809c69e1b3e9d21259/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/a4e3ea03112e60dee23cbf809c69e1b3e9d21259/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fcode%2Fcode.component.ts?ref=a4e3ea03112e60dee23cbf809c69e1b3e9d21259",
            "patch": "@@ -3,6 +3,7 @@ import { Clipboard } from '@angular/cdk/clipboard';\n import { Logger } from 'app/shared/logger.service';\n import { PrettyPrinter } from './pretty-printer.service';\n import { MatSnackBar } from '@angular/material/snack-bar';\n+import { Observable, of } from 'rxjs';\n import { tap } from 'rxjs/operators';\n \n /**\n@@ -108,15 +109,22 @@ export class CodeComponent implements OnChanges {\n   }\n \n   private formatDisplayedCode() {\n+    const linenums = this.getLinenums();\n     const leftAlignedCode = leftAlign(this.code);\n     this.setCodeHtml(leftAlignedCode); // start with unformatted code\n     this.codeText = this.getCodeText(); // store the unformatted code as text (for copying)\n \n-    this.pretty\n-        .formatCode(leftAlignedCode, this.language, this.getLinenums())\n-        .pipe(tap(() => this.codeFormatted.emit()))\n-        .subscribe(c => this.setCodeHtml(c), () => { /* ignore failure to format */ }\n-    );\n+    const skipPrettify = of(undefined);\n+    const prettifyCode = this.pretty\n+        .formatCode(leftAlignedCode, this.language, linenums)\n+        .pipe(tap(formattedCode => this.setCodeHtml(formattedCode)));\n+\n+    if (linenums !== false && this.language === 'none') {\n+      this.logger.warn(`Using 'linenums' with 'language: none' is currently not supported.`);\n+    }\n+\n+    ((this.language === 'none' ? skipPrettify : prettifyCode) as Observable<unknown>)\n+        .subscribe(() => this.codeFormatted.emit(), () => { /* ignore failure to format */ });\n   }\n \n   /** Sets the message showing that the code could not be found. */"
        }
    ],
    "stats": {
        "total": 27,
        "additions": 22,
        "deletions": 5
    }
}