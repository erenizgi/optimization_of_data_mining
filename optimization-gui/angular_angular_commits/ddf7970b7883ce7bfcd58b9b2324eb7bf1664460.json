{
    "author": "alxhub",
    "message": "refactor(compiler-cli): separate out constant target of g3 patch (#40950)\n\nThis commit moves a constant which is affected by a g3 sync patch into a\nseparate file. This way, changes to the rest of the compiler codebase have\nno chance of conflicting with the patched code.\n\nPR Close #40950",
    "sha": "ddf7970b7883ce7bfcd58b9b2324eb7bf1664460",
    "files": [
        {
            "sha": "83e2e61e81aef75bde10316035b6eebe59ce7fe8",
            "filename": "packages/compiler-cli/src/ngtsc/core/src/compiler.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/ddf7970b7883ce7bfcd58b9b2324eb7bf1664460/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fcompiler.ts",
            "raw_url": "https://github.com/angular/angular/raw/ddf7970b7883ce7bfcd58b9b2324eb7bf1664460/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fcompiler.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fcompiler.ts?ref=ddf7970b7883ce7bfcd58b9b2324eb7bf1664460",
            "patch": "@@ -33,6 +33,8 @@ import {OptimizeFor, TemplateTypeChecker, TypeCheckingConfig, TypeCheckingProgra\n import {getSourceFileOrNull, isDtsPath, resolveModuleName} from '../../util/src/typescript';\n import {LazyRoute, NgCompilerAdapter, NgCompilerOptions} from '../api';\n \n+import {compileUndecoratedClassesWithAngularFeatures} from './config';\n+\n /**\n  * State information about a compilation which is only generated once some data is requested from\n  * the `NgCompiler` (for example, by calling `getDiagnostics`).\n@@ -1012,10 +1014,7 @@ export class NgCompiler {\n         new DirectiveDecoratorHandler(\n             reflector, evaluator, metaRegistry, scopeRegistry, metaReader,\n             defaultImportTracker, injectableRegistry, isCore, this.closureCompilerEnabled,\n-            // In ngtsc we no longer want to compile undecorated classes with Angular features.\n-            // Migrations for these patterns ran as part of `ng update` and we want to ensure\n-            // that projects do not regress. See https://hackmd.io/@alx/ryfYYuvzH for more details.\n-            /* compileUndecoratedClassesWithAngularFeatures */ false\n+            compileUndecoratedClassesWithAngularFeatures,\n         ) as Readonly<DecoratorHandler<unknown, unknown, unknown>>,\n       // clang-format on\n       // Pipe handler must be before injectable handler in list so pipe factories are printed"
        },
        {
            "sha": "e59c7c80ac6d348e55fffdd2adda7122f70734c1",
            "filename": "packages/compiler-cli/src/ngtsc/core/src/config.ts",
            "status": "added",
            "additions": 16,
            "deletions": 0,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/ddf7970b7883ce7bfcd58b9b2324eb7bf1664460/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fconfig.ts",
            "raw_url": "https://github.com/angular/angular/raw/ddf7970b7883ce7bfcd58b9b2324eb7bf1664460/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fconfig.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Fcore%2Fsrc%2Fconfig.ts?ref=ddf7970b7883ce7bfcd58b9b2324eb7bf1664460",
            "patch": "@@ -0,0 +1,16 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+// This file exists as a target for g3 patches which change the Angular compiler's behavior.\n+// Separating the patched code in a separate file eliminates the possibility of conflicts with the\n+// patch diffs when making changes to the rest of the compiler codebase.\n+\n+// In ngtsc we no longer want to compile undecorated classes with Angular features.\n+// Migrations for these patterns ran as part of `ng update` and we want to ensure\n+// that projects do not regress. See https://hackmd.io/@alx/ryfYYuvzH for more details.\n+export const compileUndecoratedClassesWithAngularFeatures = false;"
        }
    ],
    "stats": {
        "total": 23,
        "additions": 19,
        "deletions": 4
    }
}