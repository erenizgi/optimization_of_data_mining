{
    "author": "AleksanderBodurri",
    "message": "build(devtools): migrate demo-no-zone to be built with bazel and allow it to be served with concatjs_devserver\n\nAllows the demo-no-zone application to be built with bazel and a devserver run with `bazel run projects/demo-no-zone/src:devserver`",
    "sha": "bd6d18d4b55e83035b0db72c21dc1e93aab6deee",
    "files": [
        {
            "sha": "69243751958e20d1a686fee713761f187e359d20",
            "filename": "projects/demo-no-zone/.bazelignore",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/bd6d18d4b55e83035b0db72c21dc1e93aab6deee/projects%2Fdemo-no-zone%2F.bazelignore",
            "raw_url": "https://github.com/angular/angular/raw/bd6d18d4b55e83035b0db72c21dc1e93aab6deee/projects%2Fdemo-no-zone%2F.bazelignore",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fdemo-no-zone%2F.bazelignore?ref=bd6d18d4b55e83035b0db72c21dc1e93aab6deee",
            "patch": "@@ -0,0 +1,3 @@\n+node_modules\n+dist\n+bazel-out"
        },
        {
            "sha": "6341e1f4f1c0a7d7da64db402cb8b5fe3af202d7",
            "filename": "projects/demo-no-zone/.bazelrc",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/bd6d18d4b55e83035b0db72c21dc1e93aab6deee/projects%2Fdemo-no-zone%2F.bazelrc",
            "raw_url": "https://github.com/angular/angular/raw/bd6d18d4b55e83035b0db72c21dc1e93aab6deee/projects%2Fdemo-no-zone%2F.bazelrc",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fdemo-no-zone%2F.bazelrc?ref=bd6d18d4b55e83035b0db72c21dc1e93aab6deee",
            "patch": "@@ -0,0 +1,4 @@\n+import %workspace%/../../common.bazelrc\n+# Use the Angular Ivy compiler\n+# See https://github.com/angular/angular/blob/master/docs/BAZEL.md#various-flags-used-for-tests\n+build --define=angular_ivy_enabled=True"
        },
        {
            "sha": "17d4ba0c9723761058e0a480d9480e14887e8ea6",
            "filename": "projects/demo-no-zone/src/BUILD.bazel",
            "status": "added",
            "additions": 63,
            "deletions": 0,
            "changes": 63,
            "blob_url": "https://github.com/angular/angular/blob/bd6d18d4b55e83035b0db72c21dc1e93aab6deee/projects%2Fdemo-no-zone%2Fsrc%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/bd6d18d4b55e83035b0db72c21dc1e93aab6deee/projects%2Fdemo-no-zone%2Fsrc%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fdemo-no-zone%2Fsrc%2FBUILD.bazel?ref=bd6d18d4b55e83035b0db72c21dc1e93aab6deee",
            "patch": "@@ -0,0 +1,63 @@\n+load(\"@npm//@bazel/concatjs:index.bzl\", \"concatjs_devserver\")\n+load(\"@npm//html-insert-assets:index.bzl\", \"html_insert_assets\")\n+load(\"//tools:angular_ts_library.bzl\", \"ng_ts_library\")\n+\n+package(default_visibility = [\"//:__subpackages__\"])\n+\n+_ASSETS = [\n+    \":styles.css\",\n+    \"@npm//:node_modules/zone.js/dist/zone.min.js\",\n+]\n+\n+html_insert_assets(\n+    name = \"inject_scripts_for_dev\",\n+    outs = [\"index.html\"],\n+    args = [\n+        \"--html=$(execpath //projects/demo-no-zone/src:_index.html)\",\n+        \"--out=$@\",\n+        \"--roots=. $(RULEDIR)\",\n+        \"--assets\",\n+    ] + [\"$(execpath %s)\" % s for s in _ASSETS] + [\n+        # This file doesn't exist during the build, but will be served by concatjs_devserver\n+        \"./_/ts_scripts.js\",\n+    ],\n+    data = [\"//projects/demo-no-zone/src:_index.html\"] + _ASSETS,\n+)\n+\n+ng_ts_library(\n+    name = \"src\",\n+    srcs = [\"main.ts\"],\n+    deps = [\n+        \"//projects/demo-no-zone/src/app\",\n+        \"@npm//@angular/core\",\n+        \"@npm//@angular/common\",\n+        \"@npm//@angular/platform-browser-dynamic\",\n+        \"@npm//@angular/platform-browser\",\n+        \"@npm//rxjs\",\n+        \"@npm//@types\",\n+    ],\n+    module_name = \"demo-no-zone\",\n+)\n+\n+filegroup(\n+    name = \"rxjs_umd_modules\",\n+    srcs = [\n+        \":rxjs_shims.js\",\n+        \"@npm//:node_modules/rxjs/bundles/rxjs.umd.js\",\n+    ],\n+)\n+\n+concatjs_devserver(\n+    name = \"devserver\",\n+    entry_module = \"demo-no-zone/main\",\n+    scripts = [\n+        \"@npm//:node_modules/tslib/tslib.js\",\n+        \":rxjs_umd_modules\",\n+    ],\n+    static_files = _ASSETS + [\n+        \"//projects/demo-no-zone/src:src\",\n+        \":inject_scripts_for_dev\",\n+    ],\n+    deps = [\"//projects/demo-no-zone/src\"],\n+    port = 4200\n+)"
        },
        {
            "sha": "d2f40dc8c160316ec991ffe0aefc86a389a219be",
            "filename": "projects/demo-no-zone/src/_index.html",
            "status": "renamed",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/bd6d18d4b55e83035b0db72c21dc1e93aab6deee/projects%2Fdemo-no-zone%2Fsrc%2F_index.html",
            "raw_url": "https://github.com/angular/angular/raw/bd6d18d4b55e83035b0db72c21dc1e93aab6deee/projects%2Fdemo-no-zone%2Fsrc%2F_index.html",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fdemo-no-zone%2Fsrc%2F_index.html?ref=bd6d18d4b55e83035b0db72c21dc1e93aab6deee",
            "patch": "@@ -2,11 +2,10 @@\n <html lang=\"en\">\n   <head>\n     <meta charset=\"utf-8\" />\n-    <title>DemoNoZone</title>\n+    <title>Demo No Zone</title>\n     <base href=\"/\" />\n \n     <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n-    <link rel=\"icon\" type=\"image/x-icon\" href=\"assets/icon16.png\" />\n   </head>\n   <body>\n     <app-root></app-root>",
            "previous_filename": "projects/demo-no-zone/src/index.html"
        },
        {
            "sha": "c3718925dbd3e6b81efe5fa36ce14fd66978008c",
            "filename": "projects/demo-no-zone/src/app/BUILD.bazel",
            "status": "added",
            "additions": 17,
            "deletions": 0,
            "changes": 17,
            "blob_url": "https://github.com/angular/angular/blob/bd6d18d4b55e83035b0db72c21dc1e93aab6deee/projects%2Fdemo-no-zone%2Fsrc%2Fapp%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/bd6d18d4b55e83035b0db72c21dc1e93aab6deee/projects%2Fdemo-no-zone%2Fsrc%2Fapp%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fdemo-no-zone%2Fsrc%2Fapp%2FBUILD.bazel?ref=bd6d18d4b55e83035b0db72c21dc1e93aab6deee",
            "patch": "@@ -0,0 +1,17 @@\n+load(\"//tools:angular_ts_library.bzl\", \"ng_ts_library\")\n+\n+package(default_visibility = [\"//visibility:public\"])\n+\n+ng_ts_library(\n+    name = \"app\",\n+    srcs = glob(\n+        include = [\"*.ts\"],\n+    ),\n+    angular_assets = [\"app.component.html\"],\n+    deps = [\n+        \"@npm//@angular/core\",\n+        \"@npm//@angular/common\",\n+        \"@npm//@angular/platform-browser\",\n+        \"@npm//rxjs\",\n+    ],\n+)"
        },
        {
            "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
            "filename": "projects/demo-no-zone/src/app/app.component.css",
            "status": "removed",
            "additions": 0,
            "deletions": 0,
            "changes": 0,
            "blob_url": "https://github.com/angular/angular/blob/3556129afe1ad9aa36bfd80d78a83ca6d4e5cbb1/projects%2Fdemo-no-zone%2Fsrc%2Fapp%2Fapp.component.css",
            "raw_url": "https://github.com/angular/angular/raw/3556129afe1ad9aa36bfd80d78a83ca6d4e5cbb1/projects%2Fdemo-no-zone%2Fsrc%2Fapp%2Fapp.component.css",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fdemo-no-zone%2Fsrc%2Fapp%2Fapp.component.css?ref=3556129afe1ad9aa36bfd80d78a83ca6d4e5cbb1"
        },
        {
            "sha": "6ec2d214cdbe65ab4b28ffc593fb9a3b522d8761",
            "filename": "projects/demo-no-zone/src/app/app.component.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 2,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/bd6d18d4b55e83035b0db72c21dc1e93aab6deee/projects%2Fdemo-no-zone%2Fsrc%2Fapp%2Fapp.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/bd6d18d4b55e83035b0db72c21dc1e93aab6deee/projects%2Fdemo-no-zone%2Fsrc%2Fapp%2Fapp.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fdemo-no-zone%2Fsrc%2Fapp%2Fapp.component.ts?ref=bd6d18d4b55e83035b0db72c21dc1e93aab6deee",
            "patch": "@@ -3,12 +3,13 @@ import { Component, ChangeDetectorRef } from '@angular/core';\n @Component({\n   selector: 'app-root',\n   templateUrl: './app.component.html',\n-  styleUrls: ['./app.component.css'],\n })\n export class AppComponent {\n   counter = 0;\n \n-  constructor(private _cd: ChangeDetectorRef) {}\n+  constructor(private _cd: ChangeDetectorRef) {\n+    console.log((window as any).ng);\n+  }\n \n   increment(): void {\n     this.counter++;"
        },
        {
            "sha": "c9669790be176ac85a5d8c11278875c2f52dc507",
            "filename": "projects/demo-no-zone/src/environments/environment.prod.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 3,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/3556129afe1ad9aa36bfd80d78a83ca6d4e5cbb1/projects%2Fdemo-no-zone%2Fsrc%2Fenvironments%2Fenvironment.prod.ts",
            "raw_url": "https://github.com/angular/angular/raw/3556129afe1ad9aa36bfd80d78a83ca6d4e5cbb1/projects%2Fdemo-no-zone%2Fsrc%2Fenvironments%2Fenvironment.prod.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fdemo-no-zone%2Fsrc%2Fenvironments%2Fenvironment.prod.ts?ref=3556129afe1ad9aa36bfd80d78a83ca6d4e5cbb1",
            "patch": "@@ -1,3 +0,0 @@\n-export const environment = {\n-  production: true,\n-};"
        },
        {
            "sha": "99c3763cad6f4ae7808a34e2aa4e5b90232c67fc",
            "filename": "projects/demo-no-zone/src/environments/environment.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 16,
            "changes": 16,
            "blob_url": "https://github.com/angular/angular/blob/3556129afe1ad9aa36bfd80d78a83ca6d4e5cbb1/projects%2Fdemo-no-zone%2Fsrc%2Fenvironments%2Fenvironment.ts",
            "raw_url": "https://github.com/angular/angular/raw/3556129afe1ad9aa36bfd80d78a83ca6d4e5cbb1/projects%2Fdemo-no-zone%2Fsrc%2Fenvironments%2Fenvironment.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fdemo-no-zone%2Fsrc%2Fenvironments%2Fenvironment.ts?ref=3556129afe1ad9aa36bfd80d78a83ca6d4e5cbb1",
            "patch": "@@ -1,16 +0,0 @@\n-// This file can be replaced during build by using the `fileReplacements` array.\n-// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n-// The list of file replacements can be found in `angular.json`.\n-\n-export const environment = {\n-  production: false,\n-};\n-\n-/*\n- * For easier debugging in development mode, you can import the following file\n- * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n- *\n- * This import should be commented out in production mode because it will have a negative impact\n- * on performance if an error is thrown.\n- */\n-// import 'zone.js/dist/zone-error';  // Included with Angular CLI."
        },
        {
            "sha": "e4546fb592bd93bc1a438a015a1d4a9db0c860c3",
            "filename": "projects/demo-no-zone/src/main.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 6,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/bd6d18d4b55e83035b0db72c21dc1e93aab6deee/projects%2Fdemo-no-zone%2Fsrc%2Fmain.ts",
            "raw_url": "https://github.com/angular/angular/raw/bd6d18d4b55e83035b0db72c21dc1e93aab6deee/projects%2Fdemo-no-zone%2Fsrc%2Fmain.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fdemo-no-zone%2Fsrc%2Fmain.ts?ref=bd6d18d4b55e83035b0db72c21dc1e93aab6deee",
            "patch": "@@ -1,12 +1,6 @@\n-import { enableProdMode } from '@angular/core';\n import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n \n import { AppModule } from './app/app.module';\n-import { environment } from './environments/environment';\n-\n-if (environment.production) {\n-  enableProdMode();\n-}\n \n platformBrowserDynamic()\n   .bootstrapModule(AppModule, {"
        },
        {
            "sha": "37af4d578c647d311246cf3f9d7468667a4e7c09",
            "filename": "projects/demo-no-zone/src/rxjs_shims.js",
            "status": "added",
            "additions": 44,
            "deletions": 0,
            "changes": 44,
            "blob_url": "https://github.com/angular/angular/blob/bd6d18d4b55e83035b0db72c21dc1e93aab6deee/projects%2Fdemo-no-zone%2Fsrc%2Frxjs_shims.js",
            "raw_url": "https://github.com/angular/angular/raw/bd6d18d4b55e83035b0db72c21dc1e93aab6deee/projects%2Fdemo-no-zone%2Fsrc%2Frxjs_shims.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fdemo-no-zone%2Fsrc%2Frxjs_shims.js?ref=bd6d18d4b55e83035b0db72c21dc1e93aab6deee",
            "patch": "@@ -0,0 +1,44 @@\n+/**\n+ * @license\n+ * Copyright Google Inc. All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+/**\n+ * @fileoverview these provide named UMD modules so that we can bundle\n+ * the application along with rxjs using the concatjs bundler.\n+ */\n+\n+// rxjs/operators\n+(function (factory) {\n+  if (typeof module === 'object' && typeof module.exports === 'object') {\n+    var v = factory(require, exports);\n+    if (v !== undefined) module.exports = v;\n+  } else if (typeof define === 'function' && define.amd) {\n+    define('rxjs/operators', ['exports', 'rxjs'], factory);\n+  }\n+})(function (exports, rxjs) {\n+  'use strict';\n+  Object.keys(rxjs.operators).forEach(function (key) {\n+    exports[key] = rxjs.operators[key];\n+  });\n+  Object.defineProperty(exports, '__esModule', { value: true });\n+});\n+\n+// rxjs/testing\n+(function (factory) {\n+  if (typeof module === 'object' && typeof module.exports === 'object') {\n+    var v = factory(require, exports);\n+    if (v !== undefined) module.exports = v;\n+  } else if (typeof define === 'function' && define.amd) {\n+    define('rxjs/testing', ['exports', 'rxjs'], factory);\n+  }\n+})(function (exports, rxjs) {\n+  'use strict';\n+  Object.keys(rxjs.testing).forEach(function (key) {\n+    exports[key] = rxjs.testing[key];\n+  });\n+  Object.defineProperty(exports, '__esModule', { value: true });\n+});"
        }
    ],
    "stats": {
        "total": 164,
        "additions": 135,
        "deletions": 29
    }
}