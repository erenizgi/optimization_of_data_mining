{
    "author": "mhevery",
    "message": "refactor(core): Remove `TViewNode` as it is no longer used. (#38707)\n\nPrevious commit change the logic to not rely on the `TViewNode` this\nchange removes it entirely.\n\nPR Close #38707",
    "sha": "5db84d72213fbb58228239ff3e55c734e3845e07",
    "files": [
        {
            "sha": "7b1a63b4d1ad06fef8282f72f5263e5035e91ad9",
            "filename": "goldens/size-tracking/integration-payloads.json",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fsize-tracking%2Fintegration-payloads.json?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -3,7 +3,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime-es2015\": 1485,\n-        \"main-es2015\": 141711,\n+        \"main-es2015\": 140709,\n         \"polyfills-es2015\": 36571\n       }\n     }\n@@ -12,7 +12,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime-es2015\": 1485,\n-        \"main-es2015\": 17362,\n+        \"main-es2015\": 16650,\n         \"polyfills-es2015\": 36657\n       }\n     }\n@@ -30,7 +30,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime-es2015\": 1485,\n-        \"main-es2015\": 136168,\n+        \"main-es2015\": 134891,\n         \"polyfills-es2015\": 37248\n       }\n     }"
        },
        {
            "sha": "a12fe44d465015f7cf19a6d25a0f5592414aa5ae",
            "filename": "packages/core/src/render3/component_ref.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Fcomponent_ref.ts",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Fcomponent_ref.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fcomponent_ref.ts?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -218,10 +218,9 @@ export class ComponentFactory<T> extends viewEngine_ComponentFactory<T> {\n       leaveView();\n     }\n \n-    const componentRef = new ComponentRef(\n+    return new ComponentRef(\n         this.componentType, component,\n         createElementRef(viewEngine_ElementRef, tElementNode, rootLView), rootLView, tElementNode);\n-    return componentRef;\n   }\n }\n "
        },
        {
            "sha": "0bab24b511eef6ddcbef26c7599130b2a3d37233",
            "filename": "packages/core/src/render3/instructions/shared.ts",
            "status": "modified",
            "additions": 23,
            "deletions": 11,
            "changes": 34,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fshared.ts",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fshared.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fshared.ts?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -26,7 +26,7 @@ import {executeCheckHooks, executeInitAndCheckHooks, incrementInitPhaseFlags} fr\n import {CONTAINER_HEADER_OFFSET, HAS_TRANSPLANTED_VIEWS, LContainer, MOVED_VIEWS} from '../interfaces/container';\n import {ComponentDef, ComponentTemplate, DirectiveDef, DirectiveDefListOrFactory, PipeDefListOrFactory, RenderFlags, ViewQueriesFunction} from '../interfaces/definition';\n import {INJECTOR_BLOOM_PARENT_SIZE, NodeInjectorFactory} from '../interfaces/injector';\n-import {AttributeMarker, InitialInputData, InitialInputs, LocalRefExtractor, PropertyAliases, PropertyAliasValue, TAttributes, TConstantsOrFactory, TContainerNode, TDirectiveHostNode, TElementContainerNode, TElementNode, TIcuContainerNode, TNode, TNodeFlags, TNodeProviderIndexes, TNodeType, TProjectionNode, TViewNode} from '../interfaces/node';\n+import {AttributeMarker, InitialInputData, InitialInputs, LocalRefExtractor, PropertyAliases, PropertyAliasValue, TAttributes, TConstantsOrFactory, TContainerNode, TDirectiveHostNode, TElementContainerNode, TElementNode, TIcuContainerNode, TNode, TNodeFlags, TNodeProviderIndexes, TNodeType, TProjectionNode} from '../interfaces/node';\n import {isProceduralRenderer, RComment, RElement, Renderer3, RendererFactory3, RNode, RText} from '../interfaces/renderer';\n import {SanitizerFn} from '../interfaces/sanitization';\n import {isComponentDef, isComponentHost, isContentQueryHost, isLContainer, isRootView} from '../interfaces/type_checks';\n@@ -233,8 +233,8 @@ export function getOrCreateTNode(\n   const tNode = tView.data[adjustedIndex] as TNode ||\n       createTNodeAtIndex(tView, adjustedIndex, type, name, attrs);\n   setPreviousOrParentTNode(tNode, true);\n-  return tNode as TElementNode & TViewNode & TContainerNode & TElementContainerNode &\n-      TProjectionNode & TIcuContainerNode;\n+  return tNode as TElementNode & TContainerNode & TElementContainerNode & TProjectionNode &\n+      TIcuContainerNode;\n }\n \n function createTNodeAtIndex(\n@@ -244,12 +244,7 @@ function createTNodeAtIndex(\n   const isParent = getIsParent();\n   const parent =\n       isParent ? previousOrParentTNode : previousOrParentTNode && previousOrParentTNode.parent;\n-  // Parents cannot cross component boundaries because components will be used in multiple places,\n-  // so it's only set if the view is the same.\n-  // FIXME(misko): This check for `TNodeType.View` should not be needed. But removing it breaks DI,\n-  // so more investigation is needed.\n-  const parentInSameView = parent !== null && parent.type !== TNodeType.View;\n-  const tParentNode = parentInSameView ? parent as TElementNode | TContainerNode : null;\n+  // Parents cannot cross component boundaries because components will be used in multiple places.\n   const tNode = tView.data[adjustedIndex] =\n       createTNode(tView, parent as TElementNode | TContainerNode, type, adjustedIndex, name, attrs);\n   // Assign a pointer to the first child node of a given view. The first node is not always the one\n@@ -259,8 +254,7 @@ function createTNodeAtIndex(\n     tView.firstChild = tNode;\n   }\n   if (previousOrParentTNode) {\n-    if (isParent && previousOrParentTNode.child == null &&\n-        (tNode.parent !== null || previousOrParentTNode.type === TNodeType.View)) {\n+    if (isParent && previousOrParentTNode.child == null && tNode.parent !== null) {\n       // We are in the same view, which means we are adding content node to the parent view.\n       previousOrParentTNode.child = tNode;\n     } else if (!isParent) {\n@@ -806,6 +800,24 @@ export function storeCleanupWithContext(\n  * @param tViews Any TViews attached to this node\n  * @returns the TNode object\n  */\n+export function createTNode(\n+    tView: TView, tParent: TElementNode|TContainerNode|null, type: TNodeType.Container,\n+    adjustedIndex: number, tagName: string|null, attrs: TAttributes|null): TContainerNode;\n+export function createTNode(\n+    tView: TView, tParent: TElementNode|TContainerNode|null, type: TNodeType.Element,\n+    adjustedIndex: number, tagName: string|null, attrs: TAttributes|null): TElementNode;\n+export function createTNode(\n+    tView: TView, tParent: TElementNode|TContainerNode|null, type: TNodeType.ElementContainer,\n+    adjustedIndex: number, tagName: string|null, attrs: TAttributes|null): TElementContainerNode;\n+export function createTNode(\n+    tView: TView, tParent: TElementNode|TContainerNode|null, type: TNodeType.IcuContainer,\n+    adjustedIndex: number, tagName: string|null, attrs: TAttributes|null): TIcuContainerNode;\n+export function createTNode(\n+    tView: TView, tParent: TElementNode|TContainerNode|null, type: TNodeType.Projection,\n+    adjustedIndex: number, tagName: string|null, attrs: TAttributes|null): TProjectionNode;\n+export function createTNode(\n+    tView: TView, tParent: TElementNode|TContainerNode|null, type: TNodeType, adjustedIndex: number,\n+    tagName: string|null, attrs: TAttributes|null): TNode;\n export function createTNode(\n     tView: TView, tParent: TElementNode|TContainerNode|null, type: TNodeType, adjustedIndex: number,\n     tagName: string|null, attrs: TAttributes|null): TNode {"
        },
        {
            "sha": "6ac37b5ff08c23d9ed23a2e0a4e8ce579cabe008",
            "filename": "packages/core/src/render3/instructions/template.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Ftemplate.ts",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Ftemplate.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Ftemplate.ts?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -9,14 +9,14 @@ import {assertFirstCreatePass} from '../assert';\n import {attachPatchData} from '../context_discovery';\n import {registerPostOrderHooks} from '../hooks';\n import {ComponentTemplate} from '../interfaces/definition';\n-import {LocalRefExtractor, TAttributes, TContainerNode, TNodeType, TViewNode} from '../interfaces/node';\n+import {LocalRefExtractor, TAttributes, TContainerNode, TNodeType} from '../interfaces/node';\n import {isDirectiveHost} from '../interfaces/type_checks';\n-import {HEADER_OFFSET, LView, RENDERER, T_HOST, TView, TViewType} from '../interfaces/view';\n+import {HEADER_OFFSET, LView, RENDERER, TView, TViewType} from '../interfaces/view';\n import {appendChild} from '../node_manipulation';\n import {getLView, getTView, setPreviousOrParentTNode} from '../state';\n import {getConstant} from '../util/view_utils';\n+import {addToViewTree, createDirectivesInstances, createLContainer, createTView, getOrCreateTNode, resolveDirectives, saveResolvedLocalsInData} from './shared';\n \n-import {addToViewTree, createDirectivesInstances, createLContainer, createTNode, createTView, getOrCreateTNode, resolveDirectives, saveResolvedLocalsInData} from './shared';\n \n \n function templateFirstCreatePass("
        },
        {
            "sha": "67b6efd2291de5d9b6b248d937de578cb0d357ce",
            "filename": "packages/core/src/render3/interfaces/node.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 21,
            "changes": 27,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Finterfaces%2Fnode.ts",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Finterfaces%2Fnode.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Finterfaces%2Fnode.ts?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -24,22 +24,18 @@ export const enum TNodeType {\n    * The TNode contains information about an `<ng-content>` projection\n    */\n   Projection = 1,\n-  /**\n-   * The TNode contains information about an {@link LView}\n-   */\n-  View = 2,\n   /**\n    * The TNode contains information about a DOM element aka {@link RNode}.\n    */\n-  Element = 3,\n+  Element = 2,\n   /**\n    * The TNode contains information about an `<ng-container>` element {@link RNode}.\n    */\n-  ElementContainer = 4,\n+  ElementContainer = 3,\n   /**\n    * The TNode contains information about an ICU comment used in `i18n`.\n    */\n-  IcuContainer = 5,\n+  IcuContainer = 4,\n }\n \n /**\n@@ -49,10 +45,9 @@ export const enum TNodeType {\n export const TNodeTypeAsString = [\n   'Container',         // 0\n   'Projection',        // 1\n-  'View',              // 2\n-  'Element',           // 3\n-  'ElementContainer',  // 4\n-  'IcuContainer'       // 5\n+  'Element',           // 2\n+  'ElementContainer',  // 3\n+  'IcuContainer'       // 4\n ] as const;\n \n \n@@ -726,16 +721,6 @@ export interface TIcuContainerNode extends TNode {\n   projection: null;\n }\n \n-/** Static data for a view  */\n-export interface TViewNode extends TNode {\n-  /** If -1, it's a dynamically created view. Otherwise, it is the view block ID. */\n-  index: number;\n-  child: TElementNode|TTextNode|TElementContainerNode|TContainerNode|TProjectionNode|null;\n-  parent: TContainerNode|null;\n-  tViews: null;\n-  projection: null;\n-}\n-\n /** Static data for an LProjectionNode  */\n export interface TProjectionNode extends TNode {\n   /** Index in the data[] array */"
        },
        {
            "sha": "b6369284b5d0fcacbc5766b61681e5d23a721e86",
            "filename": "packages/core/src/render3/interfaces/view.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Finterfaces%2Fview.ts",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Finterfaces%2Fview.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Finterfaces%2Fview.ts?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -15,7 +15,7 @@ import {Sanitizer} from '../../sanitization/sanitizer';\n import {LContainer} from './container';\n import {ComponentDef, ComponentTemplate, DirectiveDef, DirectiveDefList, HostBindingsFunction, PipeDef, PipeDefList, ViewQueriesFunction} from './definition';\n import {I18nUpdateOpCodes, TI18n} from './i18n';\n-import {TConstants, TElementNode, TNode, TNodeTypeAsString, TViewNode} from './node';\n+import {TConstants, TNode, TNodeTypeAsString} from './node';\n import {PlayerHandler} from './player';\n import {LQueries, TQueries} from './query';\n import {RComment, RElement, Renderer3, RendererFactory3} from './renderer';"
        },
        {
            "sha": "9c64ee6a61dce9df92783c738dbf45867f57bbf5",
            "filename": "packages/core/src/render3/node_assert.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 9,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Fnode_assert.ts",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Fnode_assert.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fnode_assert.ts?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -8,7 +8,7 @@\n \n import {assertDefined, assertEqual} from '../util/assert';\n \n-import {TContainerNode, TElementContainerNode, TElementNode, TIcuContainerNode, TNode, TNodeType, TProjectionNode} from './interfaces/node';\n+import {TContainerNode, TElementContainerNode, TElementNode, TIcuContainerNode, TNode, TNodeType, TNodeTypeAsString, TProjectionNode} from './interfaces/node';\n \n export function assertNodeType(\n     tNode: TNode, type: TNodeType.Container): asserts tNode is TContainerNode;\n@@ -20,7 +20,6 @@ export function assertNodeType(\n     tNode: TNode, type: TNodeType.IcuContainer): asserts tNode is TIcuContainerNode;\n export function assertNodeType(\n     tNode: TNode, type: TNodeType.Projection): asserts tNode is TProjectionNode;\n-export function assertNodeType(tNode: TNode, type: TNodeType.View): asserts tNode is TContainerNode;\n export function assertNodeType(tNode: TNode, type: TNodeType): asserts tNode is TNode {\n   assertDefined(tNode, 'should be called with a TNode');\n   assertEqual(tNode.type, type, `should be a ${typeName(type)}`);\n@@ -46,11 +45,5 @@ export function assertNodeNotOfTypes(tNode: TNode, types: TNodeType[], message?:\n }\n \n function typeName(type: TNodeType): string {\n-  if (type == TNodeType.Projection) return 'Projection';\n-  if (type == TNodeType.Container) return 'Container';\n-  if (type == TNodeType.IcuContainer) return 'IcuContainer';\n-  if (type == TNodeType.View) return 'View';\n-  if (type == TNodeType.Element) return 'Element';\n-  if (type == TNodeType.ElementContainer) return 'ElementContainer';\n-  return '<unknown>';\n+  return TNodeTypeAsString[type] || '<unknown>';\n }"
        },
        {
            "sha": "44fe80c781c1f7502dd791fbd32b42be3685ca9f",
            "filename": "packages/core/src/render3/node_manipulation.ts",
            "status": "modified",
            "additions": 17,
            "deletions": 81,
            "changes": 98,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Fnode_manipulation.ts",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Fnode_manipulation.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fnode_manipulation.ts?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -9,48 +9,24 @@\n import {ViewEncapsulation} from '../metadata/view';\n import {Renderer2} from '../render/api';\n import {addToArray, removeFromArray} from '../util/array_utils';\n-import {assertDefined, assertDomNode, assertEqual, assertSame, assertString} from '../util/assert';\n+import {assertDefined, assertDomNode, assertEqual, assertString} from '../util/assert';\n \n import {assertLContainer, assertLView, assertTNodeForLView} from './assert';\n import {attachPatchData} from './context_discovery';\n import {CONTAINER_HEADER_OFFSET, HAS_TRANSPLANTED_VIEWS, LContainer, MOVED_VIEWS, NATIVE, unusedValueExportToPlacateAjd as unused1} from './interfaces/container';\n import {ComponentDef} from './interfaces/definition';\n import {NodeInjectorFactory} from './interfaces/injector';\n-import {TElementNode, TNode, TNodeFlags, TNodeType, TProjectionNode, TViewNode, unusedValueExportToPlacateAjd as unused2} from './interfaces/node';\n+import {TElementNode, TNode, TNodeFlags, TNodeType, TProjectionNode, unusedValueExportToPlacateAjd as unused2} from './interfaces/node';\n import {unusedValueExportToPlacateAjd as unused3} from './interfaces/projection';\n import {isProceduralRenderer, ProceduralRenderer3, RElement, Renderer3, RNode, RText, unusedValueExportToPlacateAjd as unused4} from './interfaces/renderer';\n import {isLContainer, isLView} from './interfaces/type_checks';\n import {CHILD_HEAD, CLEANUP, DECLARATION_COMPONENT_VIEW, DECLARATION_LCONTAINER, DestroyHookData, FLAGS, HookData, HookFn, HOST, LView, LViewFlags, NEXT, PARENT, QUERIES, RENDERER, T_HOST, TVIEW, TView, TViewType, unusedValueExportToPlacateAjd as unused5} from './interfaces/view';\n import {assertNodeOfPossibleTypes, assertNodeType} from './node_assert';\n import {getLViewParent} from './util/view_traversal_utils';\n-import {getNativeByTNode, getNonViewFirstChild, unwrapRNode, updateTransplantedViewCount} from './util/view_utils';\n+import {getNativeByTNode, unwrapRNode, updateTransplantedViewCount} from './util/view_utils';\n \n const unusedValueToPlacateAjd = unused1 + unused2 + unused3 + unused4 + unused5;\n \n-export function getLContainer(tNode: TViewNode, embeddedView: LView): LContainer|null {\n-  ngDevMode && assertLView(embeddedView);\n-  const container = embeddedView[PARENT] as LContainer;\n-  if (tNode.index === -1) {\n-    // This is a dynamically created view inside a dynamic container.\n-    // The parent isn't an LContainer if the embedded view hasn't been attached yet.\n-    return isLContainer(container) ? container : null;\n-  } else {\n-    ngDevMode && assertLContainer(container);\n-    // This is a inline view node (e.g. embeddedViewStart)\n-    return container;\n-  }\n-}\n-\n-\n-/**\n- * Retrieves render parent for a given view.\n- * Might be null if a view is not yet attached to any container.\n- */\n-export function getContainerRenderParent(tViewNode: TViewNode, view: LView): RElement|null {\n-  const container = getLContainer(tViewNode, view);\n-  return container ? nativeParentNode(view[RENDERER], container[NATIVE]) : null;\n-}\n-\n const enum WalkTNodeTreeAction {\n   /** node create in the native environment. Run on initial creation. */\n   Create = 0,\n@@ -211,11 +187,15 @@ export function destroyViewTree(rootView: LView): void {\n       // Only clean up view when moving to the side or up, as destroy hooks\n       // should be called in order from the bottom up.\n       while (lViewOrLContainer && !lViewOrLContainer![NEXT] && lViewOrLContainer !== rootView) {\n-        isLView(lViewOrLContainer) && cleanUpView(lViewOrLContainer[TVIEW], lViewOrLContainer);\n-        lViewOrLContainer = getParentState(lViewOrLContainer, rootView);\n+        if (isLView(lViewOrLContainer)) {\n+          cleanUpView(lViewOrLContainer[TVIEW], lViewOrLContainer);\n+        }\n+        lViewOrLContainer = lViewOrLContainer[PARENT];\n       }\n       if (lViewOrLContainer === null) lViewOrLContainer = rootView;\n-      isLView(lViewOrLContainer) && cleanUpView(lViewOrLContainer[TVIEW], lViewOrLContainer);\n+      if (isLView(lViewOrLContainer)) {\n+        cleanUpView(lViewOrLContainer[TVIEW], lViewOrLContainer);\n+      }\n       next = lViewOrLContainer && lViewOrLContainer![NEXT];\n     }\n     lViewOrLContainer = next;\n@@ -381,32 +361,6 @@ export function destroyLView(tView: TView, lView: LView) {\n   }\n }\n \n-/**\n- * Determines which LViewOrLContainer to jump to when traversing back up the\n- * tree in destroyViewTree.\n- *\n- * Normally, the view's parent LView should be checked, but in the case of\n- * embedded views, the container (which is the view node's parent, but not the\n- * LView's parent) needs to be checked for a possible next property.\n- *\n- * @param lViewOrLContainer The LViewOrLContainer for which we need a parent state\n- * @param rootView The rootView, so we don't propagate too far up the view tree\n- * @returns The correct parent LViewOrLContainer\n- */\n-export function getParentState(lViewOrLContainer: LView|LContainer, rootView: LView): LView|\n-    LContainer|null {\n-  let tNode;\n-  if (isLView(lViewOrLContainer) && (tNode = lViewOrLContainer[T_HOST]) &&\n-      tNode.type === TNodeType.View) {\n-    // if it's an embedded view, the state needs to go up to the container, in case the\n-    // container has a next\n-    return getLContainer(tNode as TViewNode, lViewOrLContainer);\n-  } else {\n-    // otherwise, use parent view for containers or component views\n-    return lViewOrLContainer[PARENT] === rootView ? null : lViewOrLContainer[PARENT];\n-  }\n-}\n-\n /**\n  * Calls onDestroys hooks for all directives and pipes in a given view and then removes all\n  * listeners. Listeners are removed as the last step so events delivered in the onDestroys hooks\n@@ -531,30 +485,18 @@ function getRenderParent(tView: TView, tNode: TNode, currentView: LView): REleme\n   // can't be used as a render parent.\n   let parentTNode = tNode.parent;\n   while (parentTNode != null &&\n-         (parentTNode.type === TNodeType.ElementContainer || parentTNode.type === TNodeType.View ||\n+         (parentTNode.type === TNodeType.ElementContainer ||\n           parentTNode.type === TNodeType.IcuContainer)) {\n     tNode = parentTNode;\n     parentTNode = tNode.parent;\n   }\n \n   // If the parent tNode is null, then we are inserting across views: either into an embedded view\n   // or a component view.\n-  if (parentTNode == null) {\n-    const hostTNode = currentView[T_HOST]!;\n-    if (hostTNode && hostTNode.type === TNodeType.View) {\n-      // We are inserting a root element of an embedded view We might delay insertion of children\n-      // for a given view if it is disconnected. This might happen for 2 main reasons:\n-      // - view is not inserted into any container(view was created but not inserted yet)\n-      // - view is inserted into a container but the container itself is not inserted into the DOM\n-      // (container might be part of projection or child of a view that is not inserted yet).\n-      // In other words we can insert children of a given view if this view was inserted into a\n-      // container and the container itself has its render parent determined.\n-      return getContainerRenderParent(hostTNode as TViewNode, currentView);\n-    } else {\n-      // We are inserting a root element of the component view into the component host element and\n-      // it should always be eager.\n-      return currentView[HOST];\n-    }\n+  if (parentTNode === null) {\n+    // We are inserting a root element of the component view into the component host element and\n+    // it should always be eager.\n+    return currentView[HOST];\n   } else {\n     const isIcuCase = tNode && tNode.type === TNodeType.IcuContainer;\n     // If the parent of this node is an ICU container, then it is represented by comment node and we\n@@ -650,13 +592,7 @@ export function nativeNextSibling(renderer: Renderer3, node: RNode): RNode|null\n  * @param lView\n  */\n function getNativeAnchorNode(parentTNode: TNode, lView: LView): RNode|null {\n-  if (parentTNode.type === TNodeType.View) {\n-    const lContainer = getLContainer(parentTNode as TViewNode, lView);\n-    if (lContainer === null) return null;\n-    const index = lContainer.indexOf(lView, CONTAINER_HEADER_OFFSET) - CONTAINER_HEADER_OFFSET;\n-    return getBeforeNodeForView(index, lContainer);\n-  } else if (\n-      parentTNode.type === TNodeType.ElementContainer ||\n+  if (parentTNode.type === TNodeType.ElementContainer ||\n       parentTNode.type === TNodeType.IcuContainer) {\n     return getNativeByTNode(parentTNode, lView);\n   }\n@@ -743,7 +679,7 @@ export function getBeforeNodeForView(viewIndexInContainer: number, lContainer: L\n   const nextViewIndex = CONTAINER_HEADER_OFFSET + viewIndexInContainer + 1;\n   if (nextViewIndex < lContainer.length) {\n     const lView = lContainer[nextViewIndex] as LView;\n-    const firstTNodeOfView = getNonViewFirstChild(lView[TVIEW]);\n+    const firstTNodeOfView = lView[TVIEW].firstChild;\n     if (firstTNodeOfView !== null) {\n       return getFirstNativeNode(lView, firstTNodeOfView);\n     }"
        },
        {
            "sha": "8afba415dbe09581ccbe16db831cc49486da18c7",
            "filename": "packages/core/src/render3/pipe.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Fpipe.ts",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Fpipe.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fpipe.ts?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -48,19 +48,19 @@ export function ɵɵpipe(index: number, pipeName: string): any {\n \n   const pipeFactory = pipeDef.factory || (pipeDef.factory = getFactoryDef(pipeDef.type, true));\n   const previousInjectImplementation = setInjectImplementation(ɵɵdirectiveInject);\n-  let pipeInstance: any;\n-\n   try {\n     // DI for pipes is supposed to behave like directives when placed on a component\n     // host node, which means that we have to disable access to `viewProviders`.\n     const previousIncludeViewProviders = setIncludeViewProviders(false);\n-    pipeInstance = pipeFactory();\n+    const pipeInstance = pipeFactory();\n     setIncludeViewProviders(previousIncludeViewProviders);\n+    store(tView, getLView(), index, pipeInstance);\n+    return pipeInstance;\n   } finally {\n+    // we have to restore the injector implementation in finally, just in case the creation of the\n+    // pipe throws an error.\n     setInjectImplementation(previousInjectImplementation);\n   }\n-  store(tView, getLView(), index, pipeInstance);\n-  return pipeInstance;\n }\n \n /**"
        },
        {
            "sha": "5aa43295bc2c7cd58cccb3d5b5758b8b2531b5ed",
            "filename": "packages/core/src/render3/util/view_utils.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Futil%2Fview_utils.ts",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Futil%2Fview_utils.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Futil%2Fview_utils.ts?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -207,17 +207,3 @@ export function updateTransplantedViewCount(lContainer: LContainer, amount: 1|-\n     parent = parent[PARENT];\n   }\n }\n-\n-/**\n- * Retrieves the `TView.firstChild` and unwraps if it is `TNodeType.View`.\n- *\n- * We are inconsistent about the way we store root of Views. Embedded views have `TNodeType.View` in\n- * the root but component views do not. A lot of logic does not expect to see `TNodeType.View` and\n- * crashes on it, so we unwrap it.\n- */\n-export function getNonViewFirstChild(tView: TView): TNode|null {\n-  // FIXME(misko): Delete me! (as TNodeType.View no longer exists)\n-  const firstChild = tView.firstChild;\n-  return firstChild === null ? null :\n-                               (firstChild.type === TNodeType.View ? firstChild.child : firstChild);\n-}"
        },
        {
            "sha": "5977e5c9739e47448bc4ed1b01ecc42af9219895",
            "filename": "packages/core/src/render3/view_ref.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Fview_ref.ts",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Fsrc%2Frender3%2Fview_ref.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fview_ref.ts?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -13,13 +13,13 @@ import {EmbeddedViewRef as viewEngine_EmbeddedViewRef, InternalViewRef as viewEn\n import {assertDefined} from '../util/assert';\n import {checkNoChangesInRootView, checkNoChangesInternal, detectChangesInRootView, detectChangesInternal, markViewDirty, storeCleanupWithContext} from './instructions/shared';\n import {CONTAINER_HEADER_OFFSET} from './interfaces/container';\n-import {TElementNode, TNode, TNodeType, TViewNode} from './interfaces/node';\n+import {TElementNode, TNode, TNodeType} from './interfaces/node';\n import {isLContainer} from './interfaces/type_checks';\n import {CONTEXT, DECLARATION_COMPONENT_VIEW, FLAGS, HOST, LView, LViewFlags, T_HOST, TVIEW, TView} from './interfaces/view';\n import {assertNodeOfPossibleTypes} from './node_assert';\n import {destroyLView, renderDetachView} from './node_manipulation';\n import {getLViewParent} from './util/view_traversal_utils';\n-import {getNonViewFirstChild, unwrapRNode} from './util/view_utils';\n+import {unwrapRNode} from './util/view_utils';\n \n \n \n@@ -337,7 +337,7 @@ function collectNativeNodes(\n     if (isLContainer(lNode)) {\n       for (let i = CONTAINER_HEADER_OFFSET; i < lNode.length; i++) {\n         const lViewInAContainer = lNode[i];\n-        const lViewFirstChildTNode = getNonViewFirstChild(lViewInAContainer[TVIEW]);\n+        const lViewFirstChildTNode = lViewInAContainer[TVIEW].firstChild;\n         if (lViewFirstChildTNode !== null) {\n           collectNativeNodes(\n               lViewInAContainer[TVIEW], lViewInAContainer, lViewFirstChildTNode, result);"
        },
        {
            "sha": "83f93b4d57ccd469d660fc9c95fb6a1a7fcd3d89",
            "filename": "packages/core/test/bundling/cyclic_import/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 0,
            "deletions": 9,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Fbundling%2Fcyclic_import%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Fbundling%2Fcyclic_import%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Fcyclic_import%2Fbundle.golden_symbols.json?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -176,9 +176,6 @@\n   {\n     \"name\": \"getIsParent\"\n   },\n-  {\n-    \"name\": \"getLContainer\"\n-  },\n   {\n     \"name\": \"getLView\"\n   },\n@@ -251,9 +248,6 @@\n   {\n     \"name\": \"isInlineTemplate\"\n   },\n-  {\n-    \"name\": \"isLContainer\"\n-  },\n   {\n     \"name\": \"isNodeMatchingSelector\"\n   },\n@@ -350,9 +344,6 @@\n   {\n     \"name\": \"setUpAttributes\"\n   },\n-  {\n-    \"name\": \"unwrapRNode\"\n-  },\n   {\n     \"name\": \"updateTransplantedViewCount\"\n   },"
        },
        {
            "sha": "b90c06b7c75151bee0d30894b2c465baad2984c8",
            "filename": "packages/core/test/bundling/forms/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -950,9 +950,6 @@\n   {\n     \"name\": \"generatePropertyAliases\"\n   },\n-  {\n-    \"name\": \"getBeforeNodeForView\"\n-  },\n   {\n     \"name\": \"getCheckNoChangesMode\"\n   },\n@@ -995,9 +992,6 @@\n   {\n     \"name\": \"getLCleanup\"\n   },\n-  {\n-    \"name\": \"getLContainer\"\n-  },\n   {\n     \"name\": \"getLView\"\n   },\n@@ -1022,9 +1016,6 @@\n   {\n     \"name\": \"getNodeInjectable\"\n   },\n-  {\n-    \"name\": \"getNonViewFirstChild\"\n-  },\n   {\n     \"name\": \"getNullInjector\"\n   },\n@@ -1055,9 +1046,6 @@\n   {\n     \"name\": \"getParentInjectorView\"\n   },\n-  {\n-    \"name\": \"getParentState\"\n-  },\n   {\n     \"name\": \"getPlatform\"\n   },"
        },
        {
            "sha": "6b53602948c073cdee5d9440b4f0979b1eeb0e8a",
            "filename": "packages/core/test/bundling/hello_world/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 0,
            "deletions": 15,
            "changes": 15,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Fbundling%2Fhello_world%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Fbundling%2Fhello_world%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Fhello_world%2Fbundle.golden_symbols.json?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -107,9 +107,6 @@\n   {\n     \"name\": \"extractPipeDef\"\n   },\n-  {\n-    \"name\": \"getBeforeNodeForView\"\n-  },\n   {\n     \"name\": \"getCheckNoChangesMode\"\n   },\n@@ -125,9 +122,6 @@\n   {\n     \"name\": \"getFirstLContainer\"\n   },\n-  {\n-    \"name\": \"getLContainer\"\n-  },\n   {\n     \"name\": \"getNativeByTNode\"\n   },\n@@ -164,9 +158,6 @@\n   {\n     \"name\": \"invertObject\"\n   },\n-  {\n-    \"name\": \"isLContainer\"\n-  },\n   {\n     \"name\": \"isProceduralRenderer\"\n   },\n@@ -227,16 +218,10 @@\n   {\n     \"name\": \"setSelectedIndex\"\n   },\n-  {\n-    \"name\": \"unwrapRNode\"\n-  },\n   {\n     \"name\": \"updateTransplantedViewCount\"\n   },\n   {\n     \"name\": \"viewAttachedToChangeDetector\"\n-  },\n-  {\n-    \"name\": \"ɵɵtext\"\n   }\n ]\n\\ No newline at end of file"
        },
        {
            "sha": "9c647c625476115d8761f3fe39834304441cccc4",
            "filename": "packages/core/test/bundling/router/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Fbundling%2Frouter%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Fbundling%2Frouter%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Frouter%2Fbundle.golden_symbols.json?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -1259,9 +1259,6 @@\n   {\n     \"name\": \"getAppInitializer\"\n   },\n-  {\n-    \"name\": \"getBeforeNodeForView\"\n-  },\n   {\n     \"name\": \"getBootstrapListener\"\n   },\n@@ -1319,9 +1316,6 @@\n   {\n     \"name\": \"getLCleanup\"\n   },\n-  {\n-    \"name\": \"getLContainer\"\n-  },\n   {\n     \"name\": \"getLView\"\n   },\n@@ -1346,9 +1340,6 @@\n   {\n     \"name\": \"getNodeInjectable\"\n   },\n-  {\n-    \"name\": \"getNonViewFirstChild\"\n-  },\n   {\n     \"name\": \"getNullInjector\"\n   },\n@@ -1385,9 +1376,6 @@\n   {\n     \"name\": \"getParentInjectorView\"\n   },\n-  {\n-    \"name\": \"getParentState\"\n-  },\n   {\n     \"name\": \"getPath\"\n   },"
        },
        {
            "sha": "12e933f6b74c1325852d286170a50ee662ea45fc",
            "filename": "packages/core/test/bundling/todo/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 0,
            "deletions": 12,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -329,9 +329,6 @@\n   {\n     \"name\": \"generatePropertyAliases\"\n   },\n-  {\n-    \"name\": \"getBeforeNodeForView\"\n-  },\n   {\n     \"name\": \"getCheckNoChangesMode\"\n   },\n@@ -362,9 +359,6 @@\n   {\n     \"name\": \"getLCleanup\"\n   },\n-  {\n-    \"name\": \"getLContainer\"\n-  },\n   {\n     \"name\": \"getLView\"\n   },\n@@ -386,9 +380,6 @@\n   {\n     \"name\": \"getNodeInjectable\"\n   },\n-  {\n-    \"name\": \"getNonViewFirstChild\"\n-  },\n   {\n     \"name\": \"getOrCreateInjectable\"\n   },\n@@ -416,9 +407,6 @@\n   {\n     \"name\": \"getParentInjectorView\"\n   },\n-  {\n-    \"name\": \"getParentState\"\n-  },\n   {\n     \"name\": \"getPreviousIndex\"\n   },"
        },
        {
            "sha": "e30cb5c5fe766fe3a034d9788e165b2669e8e99c",
            "filename": "packages/core/test/render3/interfaces/node_spec.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Frender3%2Finterfaces%2Fnode_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Frender3%2Finterfaces%2Fnode_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Finterfaces%2Fnode_spec.ts?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -13,7 +13,6 @@ describe('node interfaces', () => {\n     it('should agree with TNodeTypeAsString', () => {\n       expect(TNodeTypeAsString[TNodeType.Container]).toEqual('Container');\n       expect(TNodeTypeAsString[TNodeType.Projection]).toEqual('Projection');\n-      expect(TNodeTypeAsString[TNodeType.View]).toEqual('View');\n       expect(TNodeTypeAsString[TNodeType.Element]).toEqual('Element');\n       expect(TNodeTypeAsString[TNodeType.ElementContainer]).toEqual('ElementContainer');\n       expect(TNodeTypeAsString[TNodeType.IcuContainer]).toEqual('IcuContainer');"
        },
        {
            "sha": "dd6dba1bd12e18c3c5815d235beb11da9de61c32",
            "filename": "packages/core/test/render3/perf/directive_instantiate/index.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Fdirective_instantiate%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Fdirective_instantiate%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Fdirective_instantiate%2Findex.ts?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -10,7 +10,7 @@ import {LViewFlags, TViewType} from '@angular/core/src/render3/interfaces/view';\n import {ɵɵdefineDirective, ɵɵelementEnd, ɵɵelementStart, ɵɵtext} from '../../../../src/render3/index';\n import {createLView, createTNode, createTView} from '../../../../src/render3/instructions/shared';\n import {RenderFlags} from '../../../../src/render3/interfaces/definition';\n-import {TNodeType, TViewNode} from '../../../../src/render3/interfaces/node';\n+import {TNodeType} from '../../../../src/render3/interfaces/node';\n import {createBenchmark} from '../micro_bench';\n import {createAndRenderLView} from '../setup';\n \n@@ -78,7 +78,7 @@ const rootLView = createLView(\n     null, createTView(TViewType.Root, null, null, 0, 0, null, null, null, null, null), {},\n     LViewFlags.IsRoot, null, null, null, null, null, null);\n \n-const viewTNode = createTNode(null!, null, TNodeType.View, -1, null, null) as TViewNode;\n+const viewTNode = createTNode(null!, null, TNodeType.Element, -1, null, null);\n const embeddedTView = createTView(\n     TViewType.Embedded, null, testTemplate, 21, 10, [Tooltip.ɵdir], null, null, null,\n     [['position', 'top', 3, 'tooltip']]);"
        },
        {
            "sha": "bc7d7d6b91076ab6f31bedf98fd22a9f45242dcc",
            "filename": "packages/core/test/render3/perf/element_text_create/index.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Felement_text_create%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Felement_text_create%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Felement_text_create%2Findex.ts?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -9,7 +9,7 @@ import {ɵɵelementEnd, ɵɵelementStart} from '../../../../src/render3/instruct\n import {createLView, createTNode, createTView} from '../../../../src/render3/instructions/shared';\n import {ɵɵtext} from '../../../../src/render3/instructions/text';\n import {RenderFlags} from '../../../../src/render3/interfaces/definition';\n-import {TNodeType, TViewNode} from '../../../../src/render3/interfaces/node';\n+import {TNodeType} from '../../../../src/render3/interfaces/node';\n import {LViewFlags, TViewType} from '../../../../src/render3/interfaces/view';\n import {createBenchmark} from '../micro_bench';\n import {createAndRenderLView} from '../setup';\n@@ -67,7 +67,7 @@ const rootLView = createLView(\n     null, createTView(TViewType.Root, null, null, 0, 0, null, null, null, null, null), {},\n     LViewFlags.IsRoot, null, null, null, null, null, null);\n \n-const viewTNode = createTNode(null!, null, TNodeType.View, -1, null, null) as TViewNode;\n+const viewTNode = createTNode(null!, null, TNodeType.Element, -1, null, null);\n const embeddedTView = createTView(\n     TViewType.Embedded, null, testTemplate, 21, 0, null, null, null, null, [[\n       'name1', 'value1', 'name2', 'value2', 'name3', 'value3', 'name4', 'value4', 'name5', 'value5'"
        },
        {
            "sha": "834483b2ff2c9cf8fdb6d1dd145fd8a305f3c8c0",
            "filename": "packages/core/test/render3/perf/listeners/index.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Flisteners%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Flisteners%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Flisteners%2Findex.ts?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -9,7 +9,7 @@ import {ɵɵelementEnd, ɵɵelementStart} from '../../../../src/render3/instruct\n import {ɵɵlistener} from '../../../../src/render3/instructions/listener';\n import {createLView, createTNode, createTView} from '../../../../src/render3/instructions/shared';\n import {RenderFlags} from '../../../../src/render3/interfaces/definition';\n-import {TNodeType, TViewNode} from '../../../../src/render3/interfaces/node';\n+import {TNodeType} from '../../../../src/render3/interfaces/node';\n import {LViewFlags, TViewType} from '../../../../src/render3/interfaces/view';\n import {createBenchmark} from '../micro_bench';\n import {createAndRenderLView} from '../setup';\n@@ -69,7 +69,7 @@ const rootLView = createLView(\n     null, createTView(TViewType.Root, null, null, 0, 0, null, null, null, null, null), {},\n     LViewFlags.IsRoot, null, null, null, null, null, null);\n \n-const viewTNode = createTNode(null!, null, TNodeType.View, -1, null, null) as TViewNode;\n+const viewTNode = createTNode(null!, null, TNodeType.Element, -1, null, null);\n const embeddedTView = createTView(\n     TViewType.Embedded, null, testTemplate, 11, 0, null, null, null, null, [[3, 'click', 'input']]);\n "
        },
        {
            "sha": "50adf84370d15a04f93be6cda6c984481f0841b7",
            "filename": "packages/core/test/render3/perf/ng_template/index.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Fng_template%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Fng_template%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Fng_template%2Findex.ts?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -9,7 +9,7 @@ import {ElementRef, TemplateRef, ViewContainerRef} from '../../../../src/linker'\n import {ɵɵdefineDirective, ɵɵdirectiveInject, ɵɵtemplate} from '../../../../src/render3/index';\n import {createLView, createTNode, createTView} from '../../../../src/render3/instructions/shared';\n import {RenderFlags} from '../../../../src/render3/interfaces/definition';\n-import {TNodeType, TViewNode} from '../../../../src/render3/interfaces/node';\n+import {TNodeType} from '../../../../src/render3/interfaces/node';\n import {LViewFlags, TViewType} from '../../../../src/render3/interfaces/view';\n import {injectTemplateRef, injectViewContainerRef} from '../../../../src/render3/view_engine_compatibility';\n import {createBenchmark} from '../micro_bench';\n@@ -62,7 +62,7 @@ const rootLView = createLView(\n     null, createTView(TViewType.Root, null, null, 0, 0, null, null, null, null, null), {},\n     LViewFlags.IsRoot, null, null, null, null, null, null);\n \n-const viewTNode = createTNode(null!, null, TNodeType.View, -1, null, null) as TViewNode;\n+const viewTNode = createTNode(null!, null, TNodeType.Element, -1, null, null);\n const embeddedTView = createTView(\n     TViewType.Root, null, testTemplate, 2, 0, [NgIfLike.ɵdir], null, null, null,\n     [['viewManipulation', '']]);"
        },
        {
            "sha": "60043f1a2f62c956cf32569967ae566e01690ead",
            "filename": "packages/core/test/render3/perf/setup.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Fsetup.ts",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Fsetup.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Fsetup.ts?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -7,7 +7,7 @@\n  */\n import {addToViewTree, createLContainer, createLView, createTNode, createTView, getOrCreateTNode, refreshView, renderView} from '../../../src/render3/instructions/shared';\n import {ComponentTemplate, DirectiveDefList} from '../../../src/render3/interfaces/definition';\n-import {TAttributes, TNodeType, TViewNode} from '../../../src/render3/interfaces/node';\n+import {TAttributes, TElementNode, TNodeType} from '../../../src/render3/interfaces/node';\n import {domRendererFactory3, RendererFactory3} from '../../../src/render3/interfaces/renderer';\n import {LView, LViewFlags, TVIEW, TView, TViewType} from '../../../src/render3/interfaces/view';\n import {insertView} from '../../../src/render3/node_manipulation';\n@@ -20,7 +20,7 @@ const rendererFactory: RendererFactory3 =\n const renderer = rendererFactory.createRenderer(null, null);\n \n export function createAndRenderLView(\n-    parentLView: LView, tView: TView, hostTNode: TViewNode): LView {\n+    parentLView: LView, tView: TView, hostTNode: TElementNode): LView {\n   const embeddedLView = createLView(\n       parentLView, tView, {}, LViewFlags.CheckAlways, null, hostTNode, rendererFactory, renderer,\n       null, null);\n@@ -66,7 +66,7 @@ export function setupTestHarness(\n   const embeddedTView = createTView(\n       TViewType.Embedded, null, templateFn, decls, vars, directiveRegistry, null, null, null,\n       consts);\n-  const viewTNode = createTNode(hostTView, null, TNodeType.View, -1, null, null) as TViewNode;\n+  const viewTNode = createTNode(hostTView, null, TNodeType.Element, -1, null, null);\n \n   function createEmbeddedLView(): LView {\n     const embeddedLView = createLView("
        },
        {
            "sha": "8c3fe61b622c77a4712bdb028aa995ccd477dccd",
            "filename": "packages/core/test/render3/perf/view_destroy_hook/index.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Fview_destroy_hook%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/5db84d72213fbb58228239ff3e55c734e3845e07/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Fview_destroy_hook%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Fperf%2Fview_destroy_hook%2Findex.ts?ref=5db84d72213fbb58228239ff3e55c734e3845e07",
            "patch": "@@ -11,7 +11,7 @@ import {LViewFlags, TViewType} from '@angular/core/src/render3/interfaces/view';\n import {ɵɵdefineDirective, ɵɵelement, ɵɵelementEnd, ɵɵelementStart} from '../../../../src/render3/index';\n import {createLView, createTNode, createTView} from '../../../../src/render3/instructions/shared';\n import {RenderFlags} from '../../../../src/render3/interfaces/definition';\n-import {TNodeType, TViewNode} from '../../../../src/render3/interfaces/node';\n+import {TNodeType} from '../../../../src/render3/interfaces/node';\n import {destroyLView} from '../../../../src/render3/node_manipulation';\n import {createBenchmark} from '../micro_bench';\n import {createAndRenderLView} from '../setup';\n@@ -55,7 +55,7 @@ const rootLView = createLView(\n     null, createTView(TViewType.Root, null, null, 0, 0, null, null, null, null, null), {},\n     LViewFlags.IsRoot, null, null, null, null, null, null);\n \n-const viewTNode = createTNode(null!, null, TNodeType.View, -1, null, null) as TViewNode;\n+const viewTNode = createTNode(null!, null, TNodeType.Element, -1, null, null);\n const embeddedTView = createTView(\n     TViewType.Embedded, null, testTemplate, 21, 10, [ToDestroy.ɵdir], null, null, null,\n     [['to-destroy']]);"
        }
    ],
    "stats": {
        "total": 304,
        "additions": 77,
        "deletions": 227
    }
}