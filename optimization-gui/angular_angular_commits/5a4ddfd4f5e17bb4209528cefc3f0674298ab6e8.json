{
    "author": "atscott",
    "message": "feat(router): Allow symbol keys for `Route` `data` and `resolve` properties (#44519)\n\nThis commit adds the ability to use a symbol as the key for the `data` and `resolve` objects\nin a `Route` config.\n\nPR Close #44519",
    "sha": "5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8",
    "files": [
        {
            "sha": "4c2b1be63bb8e0c6e75fe20b82b1b819a5debbb3",
            "filename": "goldens/public-api/router/router.md",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8/goldens%2Fpublic-api%2Frouter%2Frouter.md",
            "raw_url": "https://github.com/angular/angular/raw/5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8/goldens%2Fpublic-api%2Frouter%2Frouter.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Frouter%2Frouter.md?ref=5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8",
            "patch": "@@ -165,7 +165,7 @@ export function convertToParamMap(params: Params): ParamMap;\n \n // @public\n export type Data = {\n-    [name: string]: any;\n+    [key: string | symbol]: any;\n };\n \n // @public\n@@ -390,7 +390,7 @@ export interface Resolve<T> {\n \n // @public\n export type ResolveData = {\n-    [name: string]: any;\n+    [key: string | symbol]: any;\n };\n \n // @public"
        },
        {
            "sha": "3e8d6dd9ea2b8332a1e1a9ab0af795dd660c1a98",
            "filename": "packages/core/test/bundling/router/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8/packages%2Fcore%2Ftest%2Fbundling%2Frouter%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8/packages%2Fcore%2Ftest%2Fbundling%2Frouter%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Frouter%2Fbundle.golden_symbols.json?ref=5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8",
            "patch": "@@ -1217,6 +1217,9 @@\n   {\n     \"name\": \"getData\"\n   },\n+  {\n+    \"name\": \"getDataKeys\"\n+  },\n   {\n     \"name\": \"getDeclarationTNode\"\n   },"
        },
        {
            "sha": "91f2d510d2700d443bce5f0f4cfe6ae130463f05",
            "filename": "packages/router/src/config.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8/packages%2Frouter%2Fsrc%2Fconfig.ts",
            "raw_url": "https://github.com/angular/angular/raw/5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8/packages%2Frouter%2Fsrc%2Fconfig.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Frouter%2Fsrc%2Fconfig.ts?ref=5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8",
            "patch": "@@ -73,7 +73,7 @@ export type UrlMatcher = (segments: UrlSegment[], group: UrlSegmentGroup, route:\n  * @publicApi\n  */\n export type Data = {\n-  [name: string]: any\n+  [key: string|symbol]: any\n };\n \n /**\n@@ -85,7 +85,7 @@ export type Data = {\n  * @publicApi\n  */\n export type ResolveData = {\n-  [name: string]: any\n+  [key: string|symbol]: any\n };\n \n /**"
        },
        {
            "sha": "8ab2fbed75db2303830cf5c639817503ea1fb7b6",
            "filename": "packages/router/src/operators/resolve_data.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 7,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8/packages%2Frouter%2Fsrc%2Foperators%2Fresolve_data.ts",
            "raw_url": "https://github.com/angular/angular/raw/5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8/packages%2Frouter%2Fsrc%2Foperators%2Fresolve_data.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Frouter%2Fsrc%2Foperators%2Fresolve_data.ts?ref=5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8",
            "patch": "@@ -56,29 +56,33 @@ function runResolve(\n function resolveNode(\n     resolve: ResolveData, futureARS: ActivatedRouteSnapshot, futureRSS: RouterStateSnapshot,\n     moduleInjector: Injector): Observable<any> {\n-  const keys = Object.keys(resolve);\n+  const keys = getDataKeys(resolve);\n   if (keys.length === 0) {\n     return of({});\n   }\n-  const data: {[k: string]: any} = {};\n+  const data: {[k: string|symbol]: any} = {};\n   return from(keys).pipe(\n       mergeMap(\n-          (key: string) => getResolver(resolve[key], futureARS, futureRSS, moduleInjector)\n-                               .pipe(tap((value: any) => {\n-                                 data[key] = value;\n-                               }))),\n+          key => getResolver(resolve[key], futureARS, futureRSS, moduleInjector)\n+                     .pipe(tap((value: any) => {\n+                       data[key] = value;\n+                     }))),\n       takeLast(1),\n       mergeMap(() => {\n         // Ensure all resolvers returned values, otherwise don't emit any \"next\" and just complete\n         // the chain which will cancel navigation\n-        if (Object.keys(data).length === keys.length) {\n+        if (getDataKeys(data).length === keys.length) {\n           return of(data);\n         }\n         return EMPTY;\n       }),\n   );\n }\n \n+function getDataKeys(obj: Object): Array<string|symbol> {\n+  return [...Object.keys(obj), ...Object.getOwnPropertySymbols(obj)];\n+}\n+\n function getResolver(\n     injectionToken: any, futureARS: ActivatedRouteSnapshot, futureRSS: RouterStateSnapshot,\n     moduleInjector: Injector): Observable<any> {"
        },
        {
            "sha": "08d2359a3cadbf5526f9294b9d4f2af9718a2eae",
            "filename": "packages/router/test/computed_state_restoration.spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8/packages%2Frouter%2Ftest%2Fcomputed_state_restoration.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8/packages%2Frouter%2Ftest%2Fcomputed_state_restoration.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Frouter%2Ftest%2Fcomputed_state_restoration.spec.ts?ref=5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8",
            "patch": "@@ -83,21 +83,21 @@ describe('`restoredState#ÉµrouterPageId`', () => {\n         component: SimpleCmp,\n         canDeactivate: [MyCanDeactivateGuard],\n         canActivate: [MyCanActivateGuard, ThrowingCanActivateGuard],\n-        resolve: [MyResolve]\n+        resolve: {x: MyResolve}\n       },\n       {\n         path: 'second',\n         component: SimpleCmp,\n         canDeactivate: [MyCanDeactivateGuard],\n         canActivate: [MyCanActivateGuard, ThrowingCanActivateGuard],\n-        resolve: [MyResolve]\n+        resolve: {x: MyResolve}\n       },\n       {\n         path: 'third',\n         component: SimpleCmp,\n         canDeactivate: [MyCanDeactivateGuard],\n         canActivate: [MyCanActivateGuard, ThrowingCanActivateGuard],\n-        resolve: [MyResolve]\n+        resolve: {x: MyResolve}\n       },\n       {\n         path: 'unguarded',"
        },
        {
            "sha": "bf9c54b2ecda927e0e3703ba6e7c91d46ed9e5ad",
            "filename": "packages/router/test/integration.spec.ts",
            "status": "modified",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8/packages%2Frouter%2Ftest%2Fintegration.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8/packages%2Frouter%2Ftest%2Fintegration.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Frouter%2Ftest%2Fintegration.spec.ts?ref=5a4ddfd4f5e17bb4209528cefc3f0674298ab6e8",
            "patch": "@@ -2332,6 +2332,20 @@ describe('Integration', () => {\n            expect(log).toEqual(['resolver2', 'resolver1']);\n          })));\n     });\n+\n+    it('can resolve symbol keys', fakeAsync(() => {\n+         const router = TestBed.inject(Router);\n+         const fixture = createRoot(router, RootCmp);\n+         const symbolKey = Symbol('key');\n+\n+         router.resetConfig(\n+             [{path: 'simple', component: SimpleCmp, resolve: {[symbolKey]: 'resolveFour'}}]);\n+\n+         router.navigateByUrl('/simple');\n+         advance(fixture);\n+\n+         expect(router.routerState.root.snapshot.firstChild!.data[symbolKey]).toEqual(4);\n+       }));\n   });\n \n   describe('router links', () => {"
        }
    ],
    "stats": {
        "total": 49,
        "additions": 35,
        "deletions": 14
    }
}