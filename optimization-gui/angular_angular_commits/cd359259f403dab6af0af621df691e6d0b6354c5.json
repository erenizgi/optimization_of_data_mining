{
    "author": "gkalpak",
    "message": "feat(docs-infra): add post-deploy actions for testing more redirect configs (#43963)\n\nAdd `deploy-to-firebase` post-deploy actions to allow testing various\nredirect configs.\nIn a future commit, this will allow testing redirects for the `stable`,\n`rc` and `next` deployments via the Firebase config file (without\nrequiring changes in the Firebase console or DNS).\n\nPR Close #43963",
    "sha": "cd359259f403dab6af0af621df691e6d0b6354c5",
    "files": [
        {
            "sha": "9156b0839d28a77e165d04fb337530ac312f47da",
            "filename": "aio/scripts/deploy-to-firebase/post-deploy-actions.mjs",
            "status": "modified",
            "additions": 19,
            "deletions": 0,
            "changes": 19,
            "blob_url": "https://github.com/angular/angular/blob/cd359259f403dab6af0af621df691e6d0b6354c5/aio%2Fscripts%2Fdeploy-to-firebase%2Fpost-deploy-actions.mjs",
            "raw_url": "https://github.com/angular/angular/raw/cd359259f403dab6af0af621df691e6d0b6354c5/aio%2Fscripts%2Fdeploy-to-firebase%2Fpost-deploy-actions.mjs",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fscripts%2Fdeploy-to-firebase%2Fpost-deploy-actions.mjs?ref=cd359259f403dab6af0af621df691e6d0b6354c5",
            "patch": "@@ -7,9 +7,28 @@ const exp = {\n   testNoActiveRcDeployment,\n   testPwaScore,\n };\n+Object.keys(u.ORIGINS).forEach(originLabel => {\n+  const testRedirectFn = generateFn_testRedirectTo(originLabel);\n+  exp[testRedirectFn.name] = testRedirectFn;\n+});\n export default exp;\n \n // Helpers\n+function generateFn_testRedirectTo(originLabel) {\n+  const destinationOrigin = u.ORIGINS[originLabel];\n+  const functionName = `testRedirectTo${originLabel}`;\n+\n+  return u.nameFunction(functionName, function ({deployedUrl}) {\n+    u.logSectionHeader(`Verify deployed version redirects to '${destinationOrigin}'.`);\n+\n+    // Ensure a request for `ngsw.json` is redirected to `<destinationOrigin>/ngsw.json`.\n+    testUrlRedirect('ngsw.json', deployedUrl, destinationOrigin);\n+\n+    // Ensure a request for `foo/bar` is redirected to `<destinationOrigin>/foo/bar`.\n+    testUrlRedirect('foo/bar?baz=qux', deployedUrl, destinationOrigin);\n+  });\n+}\n+\n function testNoActiveRcDeployment({deployedUrl}) {\n   const destinationOrigin = u.ORIGINS.Stable;\n "
        }
    ],
    "stats": {
        "total": 19,
        "additions": 19,
        "deletions": 0
    }
}