{
    "author": "zarend",
    "message": "Revert \"fix(animations): cleanup DOM elements when the root view is removed (#41001)\" (#41056)\n\nThis reverts commit a31da4850788800ba9735d617e7e3bb621a79c93.\n\nPR Close #41056",
    "sha": "96f15f0de92745a661b4e8cd19f33cffb9b3f42c",
    "files": [
        {
            "sha": "ec7438d60d2720e9417b6d33a125874022db310f",
            "filename": "packages/platform-browser/animations/src/providers.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 6,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/96f15f0de92745a661b4e8cd19f33cffb9b3f42c/packages%2Fplatform-browser%2Fanimations%2Fsrc%2Fproviders.ts",
            "raw_url": "https://github.com/angular/angular/raw/96f15f0de92745a661b4e8cd19f33cffb9b3f42c/packages%2Fplatform-browser%2Fanimations%2Fsrc%2Fproviders.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-browser%2Fanimations%2Fsrc%2Fproviders.ts?ref=96f15f0de92745a661b4e8cd19f33cffb9b3f42c",
            "patch": "@@ -9,22 +9,18 @@\n import {AnimationBuilder} from '@angular/animations';\n import {AnimationDriver, ɵAnimationEngine as AnimationEngine, ɵAnimationStyleNormalizer as AnimationStyleNormalizer, ɵCssKeyframesDriver as CssKeyframesDriver, ɵNoopAnimationDriver as NoopAnimationDriver, ɵsupportsWebAnimations as supportsWebAnimations, ɵWebAnimationsDriver as WebAnimationsDriver, ɵWebAnimationsStyleNormalizer as WebAnimationsStyleNormalizer} from '@angular/animations/browser';\n import {DOCUMENT} from '@angular/common';\n-import {Inject, Injectable, InjectionToken, NgZone, OnDestroy, Provider, RendererFactory2} from '@angular/core';\n+import {Inject, Injectable, InjectionToken, NgZone, Provider, RendererFactory2} from '@angular/core';\n import {ɵDomRendererFactory2 as DomRendererFactory2} from '@angular/platform-browser';\n \n import {BrowserAnimationBuilder} from './animation_builder';\n import {AnimationRendererFactory} from './animation_renderer';\n \n @Injectable()\n-export class InjectableAnimationEngine extends AnimationEngine implements OnDestroy {\n+export class InjectableAnimationEngine extends AnimationEngine {\n   constructor(\n       @Inject(DOCUMENT) doc: any, driver: AnimationDriver, normalizer: AnimationStyleNormalizer) {\n     super(doc.body, driver, normalizer);\n   }\n-\n-  ngOnDestroy(): void {\n-    this.flush();\n-  }\n }\n \n export function instantiateSupportedAnimationDriver() {"
        },
        {
            "sha": "2fa2ce7aa74e74d8ffccf65d667e2b506aa87136",
            "filename": "packages/platform-browser/animations/test/animation_renderer_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 34,
            "changes": 35,
            "blob_url": "https://github.com/angular/angular/blob/96f15f0de92745a661b4e8cd19f33cffb9b3f42c/packages%2Fplatform-browser%2Fanimations%2Ftest%2Fanimation_renderer_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/96f15f0de92745a661b4e8cd19f33cffb9b3f42c/packages%2Fplatform-browser%2Fanimations%2Ftest%2Fanimation_renderer_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-browser%2Fanimations%2Ftest%2Fanimation_renderer_spec.ts?ref=96f15f0de92745a661b4e8cd19f33cffb9b3f42c",
            "patch": "@@ -7,12 +7,10 @@\n  */\n import {animate, AnimationPlayer, AnimationTriggerMetadata, state, style, transition, trigger} from '@angular/animations';\n import {ɵAnimationEngine as AnimationEngine} from '@angular/animations/browser';\n-import {Component, destroyPlatform, Injectable, NgModule, NgZone, RendererFactory2, RendererType2, ViewChild} from '@angular/core';\n+import {Component, Injectable, NgZone, RendererFactory2, RendererType2, ViewChild} from '@angular/core';\n import {TestBed} from '@angular/core/testing';\n-import {platformBrowserDynamic} from '@angular/platform-browser-dynamic';\n import {BrowserAnimationsModule, ɵAnimationRendererFactory as AnimationRendererFactory, ɵInjectableAnimationEngine as InjectableAnimationEngine} from '@angular/platform-browser/animations';\n import {DomRendererFactory2} from '@angular/platform-browser/src/dom/dom_renderer';\n-import {onlyInIvy, withBody} from '@angular/private/testing';\n \n import {el} from '../../testing/src/browser_util';\n \n@@ -325,37 +323,6 @@ describe('AnimationRendererFactory', () => {\n     expect(renderer.log).toEqual(['begin', 'end']);\n   });\n });\n-\n-onlyInIvy('View Engine uses another mechanism of removing DOM nodes').describe('destroy', () => {\n-  beforeEach(destroyPlatform);\n-  afterEach(destroyPlatform);\n-\n-  it('should clear bootstrapped component contents',\n-     withBody('<div>before</div><app-root></app-root><div>after</div>', async () => {\n-       @Component({selector: 'app-root', template: 'app-root content'})\n-       class AppComponent {\n-       }\n-\n-       @NgModule({\n-         imports: [BrowserAnimationsModule],\n-         declarations: [AppComponent],\n-         bootstrap: [AppComponent]\n-       })\n-       class AppModule {\n-       }\n-\n-       const ngModuleRef = await platformBrowserDynamic().bootstrapModule(AppModule);\n-\n-       const root = document.body.querySelector('app-root')!;\n-       expect(root.textContent).toEqual('app-root content');\n-       expect(document.body.childNodes.length).toEqual(3);\n-\n-       ngModuleRef.destroy();\n-\n-       expect(document.body.querySelector('app-root')).toBeFalsy();  // host element is removed\n-       expect(document.body.childNodes.length).toEqual(2);           // other elements are preserved\n-     }));\n-});\n })();\n \n @Injectable()"
        }
    ],
    "stats": {
        "total": 43,
        "additions": 3,
        "deletions": 40
    }
}