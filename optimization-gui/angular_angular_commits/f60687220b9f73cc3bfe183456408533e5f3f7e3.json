{
    "author": "gkalpak",
    "message": "test(elements): simplify creation of `FakeComponentFactory#componentRef` (#39452)\n\nPreviously, the `componentRef` property of `FakeComponentFactory` used\nin `elements` tests was initialy set to a spy object with all mock\nproperties defined as spied methods. Later, the properties where\noverwritten to the actual mock values.\n\nThis commit simplifies the creation of `componentRef` by correctly using\nthe arguments of [jasmine.createSpyObj()][1] to specify the desired\nshape of the spy object (separating spied properties from methods and\ndirectly providing the mock values).\n\n[1]: https://jasmine.github.io/api/3.5/jasmine.html#.createSpyObj\n\nPR Close #39452",
    "sha": "f60687220b9f73cc3bfe183456408533e5f3f7e3",
    "files": [
        {
            "sha": "bde7f1f134d7b984cb52c5e5dd0e277a4110173d",
            "filename": "packages/elements/test/component-factory-strategy_spec.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 8,
            "changes": 17,
            "blob_url": "https://github.com/angular/angular/blob/f60687220b9f73cc3bfe183456408533e5f3f7e3/packages%2Felements%2Ftest%2Fcomponent-factory-strategy_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/f60687220b9f73cc3bfe183456408533e5f3f7e3/packages%2Felements%2Ftest%2Fcomponent-factory-strategy_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Felements%2Ftest%2Fcomponent-factory-strategy_spec.ts?ref=f60687220b9f73cc3bfe183456408533e5f3f7e3",
            "patch": "@@ -329,14 +329,15 @@ export class FakeComponent {\n \n export class FakeComponentFactory extends ComponentFactory<any> {\n   componentRef: any = jasmine.createSpyObj(\n-      'componentRef', ['instance', 'changeDetectorRef', 'hostView', 'destroy']);\n-\n-  constructor() {\n-    super();\n-    this.componentRef.instance = new FakeComponent();\n-    this.componentRef.changeDetectorRef =\n-        jasmine.createSpyObj('changeDetectorRef', ['detectChanges']);\n-  }\n+      'componentRef',\n+      // Method spies.\n+      ['destroy'],\n+      // Property spies.\n+      {\n+        changeDetectorRef: jasmine.createSpyObj('changeDetectorRef', ['detectChanges']),\n+        hostView: {},\n+        instance: new FakeComponent(),\n+      });\n \n   get selector(): string {\n     return 'fake-component';"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 9,
        "deletions": 8
    }
}