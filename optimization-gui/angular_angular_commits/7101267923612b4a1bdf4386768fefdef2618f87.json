{
    "author": "kyliau",
    "message": "refactor(language-service): add type guard for NgLanguageService (#40954)\n\nType guard should be colocated with the `NgLanguageService` interface,\nnot in `@angular/vscode-ng-language-service`.\n\nPR Close #40954",
    "sha": "7101267923612b4a1bdf4386768fefdef2618f87",
    "files": [
        {
            "sha": "603f82dbb5d0ec9cf808a2a482f089cad1cc1e02",
            "filename": "packages/language-service/api.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 0,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/7101267923612b4a1bdf4386768fefdef2618f87/packages%2Flanguage-service%2Fapi.ts",
            "raw_url": "https://github.com/angular/angular/raw/7101267923612b4a1bdf4386768fefdef2618f87/packages%2Flanguage-service%2Fapi.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flanguage-service%2Fapi.ts?ref=7101267923612b4a1bdf4386768fefdef2618f87",
            "patch": "@@ -43,3 +43,8 @@ export interface NgLanguageService extends ts.LanguageService {\n   getTcb(fileName: string, position: number): GetTcbResponse|undefined;\n   getComponentLocationsForTemplate(fileName: string): GetComponentLocationsForTemplateResponse;\n }\n+\n+export function isNgLanguageService(ls: ts.LanguageService|\n+                                    NgLanguageService): ls is NgLanguageService {\n+  return 'getTcb' in ls;\n+}"
        },
        {
            "sha": "e9defa55012da7bd67c00e5a1efedbaf8cfd4648",
            "filename": "packages/language-service/ivy/language_service.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/7101267923612b4a1bdf4386768fefdef2618f87/packages%2Flanguage-service%2Fivy%2Flanguage_service.ts",
            "raw_url": "https://github.com/angular/angular/raw/7101267923612b4a1bdf4386768fefdef2618f87/packages%2Flanguage-service%2Fivy%2Flanguage_service.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flanguage-service%2Fivy%2Flanguage_service.ts?ref=7101267923612b4a1bdf4386768fefdef2618f87",
            "patch": "@@ -247,8 +247,8 @@ export class LanguageService {\n     });\n   }\n \n-  getTcb(fileName: string, position: number): GetTcbResponse {\n-    return this.withCompiler<GetTcbResponse>(compiler => {\n+  getTcb(fileName: string, position: number): GetTcbResponse|undefined {\n+    return this.withCompiler<GetTcbResponse|undefined>(compiler => {\n       const templateInfo = getTemplateInfoAtPosition(fileName, position, compiler);\n       if (templateInfo === undefined) {\n         return undefined;\n@@ -496,4 +496,4 @@ function findTightestNodeAtPosition(program: ts.Program, fileName: string, posit\n   }\n \n   return findTightestNode(sourceFile, position);\n-}\n\\ No newline at end of file\n+}"
        },
        {
            "sha": "87b89c4ff51b937cb9702e7f9ecb4d39875d0178",
            "filename": "packages/language-service/ivy/ts_plugin.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/7101267923612b4a1bdf4386768fefdef2618f87/packages%2Flanguage-service%2Fivy%2Fts_plugin.ts",
            "raw_url": "https://github.com/angular/angular/raw/7101267923612b4a1bdf4386768fefdef2618f87/packages%2Flanguage-service%2Fivy%2Fts_plugin.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flanguage-service%2Fivy%2Fts_plugin.ts?ref=7101267923612b4a1bdf4386768fefdef2618f87",
            "patch": "@@ -130,7 +130,7 @@ export function create(info: ts.server.PluginCreateInfo): NgLanguageService {\n     return diagnostics;\n   }\n \n-  function getTcb(fileName: string, position: number): GetTcbResponse {\n+  function getTcb(fileName: string, position: number): GetTcbResponse|undefined {\n     return ngLS.getTcb(fileName, position);\n   }\n "
        }
    ],
    "stats": {
        "total": 13,
        "additions": 9,
        "deletions": 4
    }
}