{
    "author": "kamikopi",
    "message": "fix(devtools): Support Electron (rangle/angular-devtools#849)\n\nFollowing suggestion from the issue thread, created an empty polyfills\nto the chrome.browserAction calls, which are not available in the electron.",
    "sha": "0aa64aa490fb84c89654f59530391b788565a044",
    "files": [
        {
            "sha": "bfcf9eb4afef30a8192304c9b902f3e33340ad27",
            "filename": "projects/shell-chrome/src/app/background.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 3,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/0aa64aa490fb84c89654f59530391b788565a044/projects%2Fshell-chrome%2Fsrc%2Fapp%2Fbackground.ts",
            "raw_url": "https://github.com/angular/angular/raw/0aa64aa490fb84c89654f59530391b788565a044/projects%2Fshell-chrome%2Fsrc%2Fapp%2Fbackground.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fshell-chrome%2Fsrc%2Fapp%2Fbackground.ts?ref=0aa64aa490fb84c89654f59530391b788565a044",
            "patch": "@@ -1,8 +1,15 @@\n import { AngularDetection } from './ng-validate';\n \n+// Electron does not expose browserAction object,\n+// Use empty calls as fallback if they are not defined.\n+const browserAction = chrome.browserAction || {\n+  setIcon: () => {},\n+  setPopup: () => {}\n+};\n+\n // By default use the black and white icon.\n // Replace it only when we detect an Angular app.\n-chrome.browserAction.setIcon({\n+browserAction.setIcon({\n   path: {\n     16: `assets/icon-bw16.png`,\n     48: `assets/icon-bw48.png`,\n@@ -120,13 +127,13 @@ chrome.runtime.onMessage.addListener((req, sender) => {\n     return;\n   }\n   if (sender && sender.tab) {\n-    chrome.browserAction.setPopup({\n+    browserAction.setPopup({\n       tabId: sender.tab.id,\n       popup: `popups/${getPopUpName(req)}`,\n     });\n   }\n   if (sender && sender.tab && req.isAngular) {\n-    chrome.browserAction.setIcon({\n+    browserAction.setIcon({\n       tabId: sender.tab.id,\n       path: {\n         16: `assets/icon16.png`,"
        }
    ],
    "stats": {
        "total": 13,
        "additions": 10,
        "deletions": 3
    }
}