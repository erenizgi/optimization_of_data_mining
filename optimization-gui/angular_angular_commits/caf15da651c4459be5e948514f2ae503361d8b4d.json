{
    "author": "swseverance",
    "message": "docs: fix `BannerComponent` unit tests (#42336)\n\nremove `async` and `await` from `BannerComponent` test because the\ncomponent uses an inline template and styles\n\ncreate doc region in `banner-external.component.spec.ts` demonstrating\ntest setup that may fail due to a missing call to `.compileComponents()`\nfor a component with an external template and stylesheet\n\nPR Close #42336",
    "sha": "caf15da651c4459be5e948514f2ae503361d8b4d",
    "files": [
        {
            "sha": "ff7a775fc33ac88d475b7c45fc8f206901d03a3c",
            "filename": "aio/content/examples/testing/src/app/banner/banner-external.component.spec.ts",
            "status": "modified",
            "additions": 17,
            "deletions": 2,
            "changes": 19,
            "blob_url": "https://github.com/angular/angular/blob/caf15da651c4459be5e948514f2ae503361d8b4d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fbanner%2Fbanner-external.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/caf15da651c4459be5e948514f2ae503361d8b4d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fbanner%2Fbanner-external.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fbanner%2Fbanner-external.component.spec.ts?ref=caf15da651c4459be5e948514f2ae503361d8b4d",
            "patch": "@@ -10,12 +10,27 @@ describe('BannerComponent (external files)', () => {\n   let fixture: ComponentFixture<BannerComponent>;\n   let h1: HTMLElement;\n \n+  describe('setup that may fail', () => {\n+    // #docregion setup-may-fail\n+    beforeEach(async () => {\n+      await TestBed.configureTestingModule({\n+        declarations: [ BannerComponent ],\n+      }); // missing call to compileComponents()\n+      fixture = TestBed.createComponent(BannerComponent);\n+    });\n+    // #enddocregion setup-may-fail\n+\n+    it('should create', () => {\n+      expect(fixture.componentInstance).toBeDefined();\n+    });\n+  });\n+\n   describe('Two beforeEach', () => {\n     // #docregion async-before-each\n     beforeEach(async () => {\n       TestBed\n           .configureTestingModule({\n-            declarations: [BannerComponent],\n+            declarations: [ BannerComponent ],\n           })\n           .compileComponents();  // compile template and css\n     });\n@@ -37,7 +52,7 @@ describe('BannerComponent (external files)', () => {\n     // #docregion one-before-each\n     beforeEach(async () => {\n       await TestBed.configureTestingModule({\n-        declarations: [BannerComponent],\n+        declarations: [ BannerComponent ],\n       }).compileComponents();\n       fixture = TestBed.createComponent(BannerComponent);\n       component = fixture.componentInstance;"
        },
        {
            "sha": "a14fe656a9946b8e9b63e37dcc46a805f8dbd33a",
            "filename": "aio/content/examples/testing/src/app/banner/banner.component.spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 6,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/caf15da651c4459be5e948514f2ae503361d8b4d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fbanner%2Fbanner.component.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/caf15da651c4459be5e948514f2ae503361d8b4d/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fbanner%2Fbanner.component.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Ftesting%2Fsrc%2Fapp%2Fbanner%2Fbanner.component.spec.ts?ref=caf15da651c4459be5e948514f2ae503361d8b4d",
            "patch": "@@ -11,18 +11,15 @@ describe('BannerComponent (inline template)', () => {\n   let fixture: ComponentFixture<BannerComponent>;\n   let h1: HTMLElement;\n \n-  // #docregion configure-and-create\n-  beforeEach(async () => {\n-    await TestBed.configureTestingModule({\n+  beforeEach(() => {\n+    TestBed.configureTestingModule({\n       declarations: [ BannerComponent ],\n     });\n     fixture = TestBed.createComponent(BannerComponent);\n-    // #enddocregion configure-and-create\n     component = fixture.componentInstance; // BannerComponent test instance\n     h1 = fixture.nativeElement.querySelector('h1');\n-    // #docregion configure-and-create\n   });\n-  // #enddocregion setup, configure-and-create\n+  // #enddocregion setup\n \n   // #docregion test-w-o-detect-changes\n   it('no title in the DOM after createComponent()', () => {"
        },
        {
            "sha": "97d0a666fe0b68762dfaa370dde563364e43c3f6",
            "filename": "aio/content/guide/testing-components-scenarios.md",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/caf15da651c4459be5e948514f2ae503361d8b4d/aio%2Fcontent%2Fguide%2Ftesting-components-scenarios.md",
            "raw_url": "https://github.com/angular/angular/raw/caf15da651c4459be5e948514f2ae503361d8b4d/aio%2Fcontent%2Fguide%2Ftesting-components-scenarios.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Ftesting-components-scenarios.md?ref=caf15da651c4459be5e948514f2ae503361d8b4d",
            "patch": "@@ -1469,9 +1469,9 @@ the following version of the `BannerComponent` does.\n The test fails when the `TestBed` tries to create the component.\n \n <code-example\n-  path=\"testing/src/app/banner/banner.component.spec.ts\"\n-  region=\"configure-and-create\"\n-  header=\"app/banner/banner.component.spec.ts (setup that fails)\"\n+  path=\"testing/src/app/banner/banner-external.component.spec.ts\"\n+  region=\"setup-may-fail\"\n+  header=\"app/banner/banner-external.component.spec.ts (setup that fails)\"\n   avoid></code-example>\n \n Recall that the application hasn't been compiled."
        }
    ],
    "stats": {
        "total": 34,
        "additions": 23,
        "deletions": 11
    }
}