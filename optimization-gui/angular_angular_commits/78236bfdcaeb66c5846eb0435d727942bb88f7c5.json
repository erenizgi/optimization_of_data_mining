{
    "author": "alxhub",
    "message": "fix(language-service): use script versions for incremental compilations (#41475)\n\nThis commit has the Language Service take advantage of versioned source\nfiles added in the compiler previously. With this change, the Language\nService's incremental compilations will now be correct even if the TS\nLanguage service mutates `ts.SourceFile`s without changing their object\nidentity, as we know it does in certain corner cases.\n\nNo test is added here as it is difficult to reproduce this behavior in the\nLS's artificial testing environment. A test for this case exists in the\nLS extension repo, where it will be used to validate that a workaround three\nis no longer necessary.\n\nPR Close #41475",
    "sha": "78236bfdcaeb66c5846eb0435d727942bb88f7c5",
    "files": [
        {
            "sha": "ec6c18a09a6139550aece9a285fd02a4eff5fac2",
            "filename": "packages/language-service/ivy/language_service.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/78236bfdcaeb66c5846eb0435d727942bb88f7c5/packages%2Flanguage-service%2Fivy%2Flanguage_service.ts",
            "raw_url": "https://github.com/angular/angular/raw/78236bfdcaeb66c5846eb0435d727942bb88f7c5/packages%2Flanguage-service%2Fivy%2Flanguage_service.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Flanguage-service%2Fivy%2Flanguage_service.ts?ref=78236bfdcaeb66c5846eb0435d727942bb88f7c5",
            "patch": "@@ -487,6 +487,9 @@ function createProgramDriver(project: ts.server.Project): ProgramDriver {\n         scriptInfo.editContent(0, length, newText);\n       }\n     },\n+    getSourceFileVersion(sf: ts.SourceFile): string {\n+      return project.getScriptVersion(sf.fileName);\n+    }\n   };\n }\n "
        }
    ],
    "stats": {
        "total": 3,
        "additions": 3,
        "deletions": 0
    }
}