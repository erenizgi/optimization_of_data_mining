{
    "author": "sonukapoor",
    "message": "test(docs-infra): add unit tests for rx-library examples (#38905)\n\nThis commit adds missing unit tests for all rx-library examples from the docs.\n\nCloses #28017\n\nPR Close #38905",
    "sha": "fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
    "files": [
        {
            "sha": "3aa2059b4d00474779553ec3f2760128a6b821df",
            "filename": "aio/content/examples/rx-library/example-config.json",
            "status": "modified",
            "additions": 5,
            "deletions": 1,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fexample-config.json",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fexample-config.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fexample-config.json?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -2,7 +2,11 @@\n   \"tests\": [\n     {\n       \"cmd\": \"yarn\",\n-      \"args\": [ \"tsc\", \"--project\", \"./tsconfig.app.json\" ]\n+      \"args\": [\"tsc\", \"--project\", \"tsconfig.spec.json\", \"--module\", \"commonjs\"]\n+    },\n+    {\n+      \"cmd\": \"yarn\",\n+      \"args\": [\"jasmine\", \"out-tsc/**/*.spec.js\"]\n     }\n   ]\n }"
        },
        {
            "sha": "9dc82b45e8c9d91a1e3be3b63a8b231e2283671a",
            "filename": "aio/content/examples/rx-library/src/error-handling.spec.ts",
            "status": "added",
            "additions": 46,
            "deletions": 0,
            "changes": 46,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Ferror-handling.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Ferror-handling.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Ferror-handling.spec.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -0,0 +1,46 @@\n+import { Subject, throwError } from 'rxjs';\n+import { docRegionDefault } from './error-handling';\n+\n+describe('error-handling', () => {\n+  let mockConsole;\n+  let ajaxSubject;\n+  let ajax;\n+\n+  beforeEach(() => {\n+    mockConsole = {log: jasmine.createSpy('log')};\n+    ajaxSubject = new Subject();\n+    ajax = jasmine\n+      .createSpy('ajax')\n+      .and.callFake((url: string) => ajaxSubject);\n+  });\n+\n+  afterEach(() => ajaxSubject.unsubscribe());\n+\n+  it('should return the response object', () => {\n+    docRegionDefault(mockConsole, ajax);\n+\n+    ajaxSubject.next({response: {foo: 'bar'}});\n+    expect(mockConsole.log.calls.allArgs()).toEqual([\n+      ['data: ', {foo: 'bar'}]\n+    ]);\n+  });\n+\n+  it('should return an empty array when using an object without a `response` property', () => {\n+    docRegionDefault(mockConsole, ajax);\n+\n+    ajaxSubject.next({foo: 'bar'});\n+    expect(mockConsole.log.calls.allArgs()).toEqual([\n+      ['data: ', []]\n+    ]);\n+  });\n+\n+  it('should return an empty array when the ajax observable errors', () => {\n+    ajax.and.returnValue(throwError('Test Error'));\n+\n+    docRegionDefault(mockConsole, ajax);\n+\n+    expect(mockConsole.log.calls.allArgs()).toEqual([\n+      ['data: ', []]\n+    ]);\n+  });\n+});"
        },
        {
            "sha": "4daca5de8fce96498a1e07b3a1feddafa570d56a",
            "filename": "aio/content/examples/rx-library/src/error-handling.ts",
            "status": "modified",
            "additions": 32,
            "deletions": 21,
            "changes": 53,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Ferror-handling.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Ferror-handling.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Ferror-handling.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -1,25 +1,36 @@\n-\n-import { of } from 'rxjs';\n-\n+// #docplaster\n+/*\n+  Because of how the code is merged together using the doc regions,\n+  we need to indent the imports with the function below.\n+*/\n+/* tslint:disable:no-shadowed-variable */\n+/* tslint:disable:align */\n // #docregion\n+  import { of } from 'rxjs';\n+  import { ajax } from 'rxjs/ajax';\n+  import { map, catchError } from 'rxjs/operators';\n \n-import { ajax } from 'rxjs/ajax';\n-import { map, catchError } from 'rxjs/operators';\n-// Return \"response\" from the API. If an error happens,\n-// return an empty array.\n-const apiData = ajax('/api/data').pipe(\n-  map(res => {\n-    if (!res.response) {\n-      throw new Error('Value expected!');\n-    }\n-    return res.response;\n-  }),\n-  catchError(err => of([]))\n-);\n+// #enddocregion\n \n-apiData.subscribe({\n-  next(x) { console.log('data: ', x); },\n-  error(err) { console.log('errors already caught... will not run'); }\n-});\n+export function docRegionDefault(console, ajax) {\n+  // #docregion\n+  // Return \"response\" from the API. If an error happens,\n+  // return an empty array.\n+  const apiData = ajax('/api/data').pipe(\n+    map((res: any) => {\n+      if (!res.response) {\n+        throw new Error('Value expected!');\n+      }\n+      return res.response;\n+    }),\n+    catchError(err => of([]))\n+  );\n \n-// #enddocregion\n+  apiData.subscribe({\n+    next(x) { console.log('data: ', x); },\n+    error(err) { console.log('errors already caught... will not run'); }\n+  });\n+\n+  // #enddocregion\n+  return apiData;\n+}"
        },
        {
            "sha": "04fb0b8de05377f6a6c9879c2101be7d25ba96e6",
            "filename": "aio/content/examples/rx-library/src/operators.1.spec.ts",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.1.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.1.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.1.spec.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -0,0 +1,14 @@\n+import { docRegionDefault } from './operators.1';\n+\n+describe('squareOdd - operators.1.ts', () => {\n+  it('should return square odds', () => {\n+    const console = {log: jasmine.createSpy('log')};\n+    docRegionDefault(console);\n+    expect(console.log).toHaveBeenCalledTimes(3);\n+    expect(console.log.calls.allArgs()).toEqual([\n+      [1],\n+      [9],\n+      [25],\n+    ]);\n+  });\n+});"
        },
        {
            "sha": "1ed029309878c7cdc829b692a40377ec882721d7",
            "filename": "aio/content/examples/rx-library/src/operators.1.ts",
            "status": "modified",
            "additions": 23,
            "deletions": 16,
            "changes": 39,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.1.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.1.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.1.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -1,23 +1,30 @@\n-import { of, pipe } from 'rxjs';\n-\n+// #docplaster\n+/*\n+  Because of how the code is merged together using the doc regions,\n+  we need to indent the imports with the function below.\n+*/\n+/* tslint:disable:align */\n // #docregion\n+  import { of, pipe } from 'rxjs';\n+  import { filter, map } from 'rxjs/operators';\n \n-import { filter, map } from 'rxjs/operators';\n-\n-const nums = of(1, 2, 3, 4, 5);\n-\n-// Create a function that accepts an Observable.\n-const squareOddVals = pipe(\n-  filter((n: number) => n % 2 !== 0),\n-  map(n => n * n)\n-);\n+// #enddocregion\n \n-// Create an Observable that will run the filter and map functions\n-const squareOdd = squareOddVals(nums);\n+export function docRegionDefault(console) {\n+  // #docregion\n+  const nums = of(1, 2, 3, 4, 5);\n \n-// Subscribe to run the combined functions\n-squareOdd.subscribe(x => console.log(x));\n+  // Create a function that accepts an Observable.\n+  const squareOddVals = pipe(\n+    filter((n: number) => n % 2 !== 0),\n+    map(n => n * n)\n+  );\n \n-// #enddocregion\n+  // Create an Observable that will run the filter and map functions\n+  const squareOdd = squareOddVals(nums);\n \n+  // Subscribe to run the combined functions\n+  squareOdd.subscribe(x => console.log(x));\n \n+  // #enddocregion\n+}"
        },
        {
            "sha": "f9d1d14103c967a79ddf7bd59ba2e0edfa22afbe",
            "filename": "aio/content/examples/rx-library/src/operators.2.spec.ts",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.2.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.2.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.2.spec.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -0,0 +1,14 @@\n+import { docRegionDefault } from './operators.2';\n+\n+describe('squareOdd - operators.2.ts', () => {\n+  it('should return square odds', () => {\n+    const console = {log: jasmine.createSpy('log')};\n+    docRegionDefault(console);\n+    expect(console.log).toHaveBeenCalledTimes(3);\n+    expect(console.log.calls.allArgs()).toEqual([\n+      [1],\n+      [9],\n+      [25],\n+    ]);\n+  });\n+});"
        },
        {
            "sha": "fd792bff99eb574c8205bf38e6f260abacc7881d",
            "filename": "aio/content/examples/rx-library/src/operators.2.ts",
            "status": "modified",
            "additions": 20,
            "deletions": 11,
            "changes": 31,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.2.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.2.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.2.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -1,16 +1,25 @@\n-import { Observable, of } from 'rxjs';\n-\n+// #docplaster\n+/*\n+  Because of how the code is merged together using the doc regions,\n+  we need to indent the imports with the function below.\n+*/\n+/* tslint:disable:align */\n // #docregion\n+  import { of } from 'rxjs';\n+  import { filter, map } from 'rxjs/operators';\n \n-import { filter, map } from 'rxjs/operators';\n+// #enddocregion\n \n-const squareOdd = of(1, 2, 3, 4, 5)\n-  .pipe(\n-    filter(n => n % 2 !== 0),\n-    map(n => n * n)\n-  );\n+export function docRegionDefault(console) {\n+  // #docregion\n+  const squareOdd = of(1, 2, 3, 4, 5)\n+    .pipe(\n+      filter(n => n % 2 !== 0),\n+      map(n => n * n)\n+    );\n \n-// Subscribe to get values\n-squareOdd.subscribe(x => console.log(x));\n+  // Subscribe to get values\n+  squareOdd.subscribe(x => console.log(x));\n \n-// #enddocregion\n+  // #enddocregion\n+}"
        },
        {
            "sha": "2842d7680693cc86e43eb1c3ccfda6ef809cf622",
            "filename": "aio/content/examples/rx-library/src/operators.spec.ts",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.spec.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -0,0 +1,14 @@\n+import { docRegionDefault } from './operators';\n+\n+describe('squaredNums - operators.ts', () => {\n+  it('should return square odds', () => {\n+    const console = {log: jasmine.createSpy('log')};\n+    docRegionDefault(console);\n+    expect(console.log).toHaveBeenCalledTimes(3);\n+    expect(console.log.calls.allArgs()).toEqual([\n+      [1],\n+      [4],\n+      [9],\n+    ]);\n+  });\n+});"
        },
        {
            "sha": "d650413c3cfff8e5a32c54d509d35cefad62ad6a",
            "filename": "aio/content/examples/rx-library/src/operators.ts",
            "status": "modified",
            "additions": 21,
            "deletions": 13,
            "changes": 34,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Foperators.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -1,20 +1,28 @@\n-\n-import { Observable, of } from 'rxjs';\n-\n+// #docplaster\n+/*\n+  Because of how the code is merged together using the doc regions,\n+  we need to indent the imports with the function below.\n+*/\n+/* tslint:disable:align */\n // #docregion\n+  import { of } from 'rxjs';\n+  import { map } from 'rxjs/operators';\n \n-import { map } from 'rxjs/operators';\n+// #enddocregion\n \n-const nums = of(1, 2, 3);\n+export function docRegionDefault(console) {\n+  // #docregion\n+  const nums = of(1, 2, 3);\n \n-const squareValues = map((val: number) => val * val);\n-const squaredNums = squareValues(nums);\n+  const squareValues = map((val: number) => val * val);\n+  const squaredNums = squareValues(nums);\n \n-squaredNums.subscribe(x => console.log(x));\n+  squaredNums.subscribe(x => console.log(x));\n \n-// Logs\n-// 1\n-// 4\n-// 9\n+  // Logs\n+  // 1\n+  // 4\n+  // 9\n \n-// #enddocregion\n+  // #enddocregion\n+}"
        },
        {
            "sha": "0dc48a447151deaf207383525bc03cc5199df799",
            "filename": "aio/content/examples/rx-library/src/retry-on-error.spec.ts",
            "status": "added",
            "additions": 45,
            "deletions": 0,
            "changes": 45,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fretry-on-error.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fretry-on-error.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fretry-on-error.spec.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -0,0 +1,45 @@\n+import { of, throwError } from 'rxjs';\n+import { tap } from 'rxjs/operators';\n+import { docRegionDefault } from './retry-on-error';\n+\n+describe('retry-on-error', () => {\n+  let mockConsole;\n+  beforeEach(() => mockConsole = { log: jasmine.createSpy('log') });\n+\n+  it('should return the response object', () => {\n+    const ajax = () => of({ response: { foo: 'bar' } });\n+\n+    docRegionDefault(mockConsole, ajax);\n+    expect(mockConsole.log.calls.allArgs()).toEqual([\n+      ['data: ', { foo: 'bar' }],\n+    ]);\n+  });\n+\n+  it('should return an empty array after 3 retries + 1 initial request', () => {\n+    const ajax = () => {\n+      return of({ noresponse: true }).pipe(tap(() => mockConsole.log('Subscribed to AJAX')));\n+    };\n+\n+    docRegionDefault(mockConsole, ajax);\n+    expect(mockConsole.log.calls.allArgs()).toEqual([\n+      ['Subscribed to AJAX'],\n+      ['Error occured.'],\n+      ['Subscribed to AJAX'],\n+      ['Error occured.'],\n+      ['Subscribed to AJAX'],\n+      ['Error occured.'],\n+      ['Subscribed to AJAX'],\n+      ['Error occured.'],\n+      ['data: ', []],\n+    ]);\n+  });\n+\n+  it('should return an empty array when the ajax observable throws an error', () => {\n+    const ajax = () => throwError('Test Error');\n+\n+    docRegionDefault(mockConsole, ajax);\n+    expect(mockConsole.log.calls.allArgs()).toEqual([\n+      ['data: ', []],\n+    ]);\n+  });\n+});"
        },
        {
            "sha": "93ef63a8fbb9dc080b358b3573056e3d82592124",
            "filename": "aio/content/examples/rx-library/src/retry-on-error.ts",
            "status": "modified",
            "additions": 30,
            "deletions": 21,
            "changes": 51,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fretry-on-error.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fretry-on-error.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fretry-on-error.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -1,26 +1,35 @@\n-\n-import { Observable, of } from 'rxjs';\n-\n-\n+// #docplaster\n+/*\n+  Because of how the code is merged together using the doc regions,\n+  we need to indent the imports with the function below.\n+*/\n+/* tslint:disable:no-shadowed-variable */\n+/* tslint:disable:align */\n // #docregion\n+  import { of } from 'rxjs';\n+  import { ajax } from 'rxjs/ajax';\n+  import { map, retry, catchError } from 'rxjs/operators';\n \n-import { ajax } from 'rxjs/ajax';\n-import { map, retry, catchError } from 'rxjs/operators';\n+// #enddocregion\n \n-const apiData = ajax('/api/data').pipe(\n-  map(res => {\n-    if (!res.response) {\n-      throw new Error('Value expected!');\n-    }\n-    return res.response;\n-  }),\n-  retry(3), // Retry up to 3 times before failing\n-  catchError(err => of([]))\n-);\n+export function docRegionDefault(console, ajax) {\n+  // #docregion\n+  const apiData = ajax('/api/data').pipe(\n+    map((res: any) => {\n+      if (!res.response) {\n+        console.log('Error occured.');\n+        throw new Error('Value expected!');\n+      }\n+      return res.response;\n+    }),\n+    retry(3), // Retry up to 3 times before failing\n+    catchError(err => of([]))\n+  );\n \n-apiData.subscribe({\n-  next(x) { console.log('data: ', x); },\n-  error(err) { console.log('errors already caught... will not run'); }\n-});\n+  apiData.subscribe({\n+    next(x) { console.log('data: ', x); },\n+    error(err) { console.log('errors already caught... will not run'); }\n+  });\n \n-// #enddocregion\n+  // #enddocregion\n+}"
        },
        {
            "sha": "8c2944dd44fdb4178d83261ec4d6080613913f6f",
            "filename": "aio/content/examples/rx-library/src/simple-creation.1.spec.ts",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.1.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.1.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.1.spec.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -0,0 +1,14 @@\n+import { of } from 'rxjs';\n+import { docRegionPromise } from './simple-creation.1';\n+\n+describe('simple-creation.1', () => {\n+  it('should create a promise from an observable and return an empty object', () => {\n+    const console = {log: jasmine.createSpy('log')};\n+    const fetch = () => of({foo: 42});\n+    docRegionPromise(console, fetch);\n+    expect(console.log.calls.allArgs()).toEqual([\n+      [{foo: 42}],\n+      ['Completed'],\n+    ]);\n+  });\n+});"
        },
        {
            "sha": "6388b18cc0250d9d0057c4a9ed3d4b9f56b467b2",
            "filename": "aio/content/examples/rx-library/src/simple-creation.1.ts",
            "status": "added",
            "additions": 24,
            "deletions": 0,
            "changes": 24,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.1.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.1.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.1.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -0,0 +1,24 @@\n+// #docplaster\n+/*\n+  Because of how the code is merged together using the doc regions,\n+  we need to indent the imports with the function below.\n+*/\n+/* tslint:disable:align */\n+// #docregion promise\n+  import { from } from 'rxjs';\n+\n+// #enddocregion promise\n+\n+export function docRegionPromise(console, fetch) {\n+  // #docregion promise\n+  // Create an Observable out of a promise\n+  const data = from(fetch('/api/endpoint'));\n+  // Subscribe to begin listening for async result\n+  data.subscribe({\n+    next(response) { console.log(response); },\n+    error(err) { console.error('Error: ' + err); },\n+    complete() { console.log('Completed'); }\n+  });\n+\n+  // #enddocregion promise\n+}"
        },
        {
            "sha": "4716482a48d86b768cd8163a5c2e3beb5f96de2b",
            "filename": "aio/content/examples/rx-library/src/simple-creation.2.spec.ts",
            "status": "added",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.2.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.2.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.2.spec.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -0,0 +1,21 @@\n+import { docRegionInterval } from './simple-creation.2';\n+\n+describe('simple-creation.2', () => {\n+  beforeEach(() => jasmine.clock().install());\n+  afterEach(() => jasmine.clock().uninstall());\n+\n+  it('should create an Observable that will publish a value on an interval', () => {\n+    const console = {log: jasmine.createSpy('log')};\n+    const subscription = docRegionInterval(console);\n+    jasmine.clock().tick(1000);\n+    expect(console.log).toHaveBeenCalledWith('It\\'s been 1 seconds since subscribing!');\n+    console.log.calls.reset();\n+\n+    jasmine.clock().tick(999);\n+    expect(console.log).not.toHaveBeenCalled();\n+\n+    jasmine.clock().tick(1);\n+    expect(console.log).toHaveBeenCalledWith('It\\'s been 2 seconds since subscribing!');\n+    subscription.unsubscribe();\n+  });\n+});"
        },
        {
            "sha": "fb186d693b4ab1ce3bf8c4b49637ce627f0f8398",
            "filename": "aio/content/examples/rx-library/src/simple-creation.2.ts",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.2.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.2.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.2.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -0,0 +1,22 @@\n+// #docplaster\n+/*\n+  Because of how the code is merged together using the doc regions,\n+  we need to indent the imports with the function below.\n+*/\n+/* tslint:disable:align */\n+// #docregion interval\n+  import { interval } from 'rxjs';\n+\n+// #enddocregion interval\n+\n+export function docRegionInterval(console) {\n+  // #docregion interval\n+  // Create an Observable that will publish a value on an interval\n+  const secondsCounter = interval(1000);\n+  // Subscribe to begin publishing values\n+  const subscription = secondsCounter.subscribe(n =>\n+    console.log(`It's been ${n + 1} seconds since subscribing!`));\n+\n+  // #enddocregion interval\n+  return subscription;\n+}"
        },
        {
            "sha": "7c1ed586a4e968eee9d4ffc3163b9a3724e42cb3",
            "filename": "aio/content/examples/rx-library/src/simple-creation.3.spec.ts",
            "status": "added",
            "additions": 53,
            "deletions": 0,
            "changes": 53,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.3.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.3.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.3.spec.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -0,0 +1,53 @@\n+import { docRegionEvent } from './simple-creation.3';\n+\n+describe('simple-creation.3', () => {\n+  let triggerMousemove;\n+  let mockConsole;\n+  let input;\n+  let mockDocument;\n+\n+  beforeEach(() => {\n+    mockConsole = {log: jasmine.createSpy('log')};\n+    input = {\n+      addEventListener: jasmine\n+        .createSpy('addEventListener')\n+        .and.callFake((eventName, cb) => {\n+          if (eventName === 'mousemove') {\n+            triggerMousemove = cb;\n+          }\n+        }),\n+      removeEventListener: jasmine.createSpy('removeEventListener'),\n+    };\n+    mockDocument = { getElementById: () => input };\n+  });\n+\n+  it('should log coords when subscribing', () => {\n+    docRegionEvent(mockConsole, mockDocument);\n+\n+    expect(mockConsole.log).not.toHaveBeenCalled();\n+\n+    triggerMousemove({ clientX: 50, clientY: 50 });\n+    triggerMousemove({ clientX: 30, clientY: 50 });\n+    triggerMousemove({ clientX: 50, clientY: 30 });\n+    expect(mockConsole.log).toHaveBeenCalledTimes(3);\n+    expect(mockConsole.log.calls.allArgs()).toEqual([\n+      ['Coords: 50 X 50'],\n+      ['Coords: 30 X 50'],\n+      ['Coords: 50 X 30']\n+    ]);\n+  });\n+\n+  it('should call unsubscribe when clientX and clientY are below < 40 ', () => {\n+    docRegionEvent(mockConsole, mockDocument);\n+\n+    expect(mockConsole.log).not.toHaveBeenCalled();\n+\n+    // Ensure that we have unsubscribed.\n+    triggerMousemove({ clientX: 30, clientY: 30 });\n+    expect(input.removeEventListener).toHaveBeenCalledWith('mousemove', triggerMousemove, undefined);\n+    mockConsole.log.calls.reset();\n+\n+    triggerMousemove({ clientX: 50, clientY: 50 });\n+    expect(mockConsole.log).not.toHaveBeenCalled();\n+  });\n+});"
        },
        {
            "sha": "63a36517273f4c00f9e6ff1e7e634ddbfa6d646c",
            "filename": "aio/content/examples/rx-library/src/simple-creation.3.ts",
            "status": "added",
            "additions": 32,
            "deletions": 0,
            "changes": 32,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.3.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.3.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.3.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -0,0 +1,32 @@\n+// #docplaster\n+/*\n+  Because of how the code is merged together using the doc regions,\n+  we need to indent the imports with the function below.\n+*/\n+/* tslint:disable:align */\n+// #docregion event\n+  import { fromEvent } from 'rxjs';\n+\n+// #enddocregion event\n+\n+export function docRegionEvent(console, document) {\n+  // #docregion event\n+  const el = document.getElementById('my-element');\n+\n+  // Create an Observable that will publish mouse movements\n+  const mouseMoves = fromEvent(el, 'mousemove');\n+\n+  // Subscribe to start listening for mouse-move events\n+  const subscription = mouseMoves.subscribe((evt: MouseEvent) => {\n+    // Log coords of mouse movements\n+    console.log(`Coords: ${evt.clientX} X ${evt.clientY}`);\n+\n+    // When the mouse is over the upper-left of the screen,\n+    // unsubscribe to stop listening for mouse movements\n+    if (evt.clientX < 40 && evt.clientY < 40) {\n+      subscription.unsubscribe();\n+    }\n+  });\n+\n+  // #enddocregion event\n+}"
        },
        {
            "sha": "8de9a846e2730e6702919677cdac78b8b62f0ead",
            "filename": "aio/content/examples/rx-library/src/simple-creation.spec.ts",
            "status": "added",
            "additions": 14,
            "deletions": 0,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.spec.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -0,0 +1,14 @@\n+import { of } from 'rxjs';\n+import { docRegionAjax } from './simple-creation';\n+\n+describe('ajax', () => {\n+  it('should make a request and console log the status and response', () => {\n+    const console = {log: jasmine.createSpy('log')};\n+    const ajax = jasmine.createSpy('ajax').and.callFake((url: string) => {\n+      return of({status: 200, response: 'foo bar'});\n+    });\n+\n+    docRegionAjax(console, ajax);\n+    expect(console.log).toHaveBeenCalledWith(200, 'foo bar');\n+  });\n+});"
        },
        {
            "sha": "bc2ef499943e20d789ff16a97f3174ee9c475672",
            "filename": "aio/content/examples/rx-library/src/simple-creation.ts",
            "status": "modified",
            "additions": 15,
            "deletions": 61,
            "changes": 76,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.ts",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Frx-library%2Fsrc%2Fsimple-creation.ts?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -1,65 +1,19 @@\n-\n-// #docregion promise\n-\n-import { from } from 'rxjs';\n-\n-// Create an Observable out of a promise\n-const data = from(fetch('/api/endpoint'));\n-// Subscribe to begin listening for async result\n-data.subscribe({\n-  next(response) { console.log(response); },\n-  error(err) { console.error('Error: ' + err); },\n-  complete() { console.log('Completed'); }\n-});\n-\n-// #enddocregion promise\n-\n-// #docregion interval\n-\n-import { interval } from 'rxjs';\n-\n-// Create an Observable that will publish a value on an interval\n-const secondsCounter = interval(1000);\n-// Subscribe to begin publishing values\n-secondsCounter.subscribe(n =>\n-  console.log(`It's been ${n} seconds since subscribing!`));\n-\n-// #enddocregion interval\n-\n-\n-// #docregion event\n-\n-import { fromEvent } from 'rxjs';\n-\n-const el = document.getElementById('my-element');\n-\n-// Create an Observable that will publish mouse movements\n-const mouseMoves = fromEvent(el, 'mousemove');\n-\n-// Subscribe to start listening for mouse-move events\n-const subscription = mouseMoves.subscribe((evt: MouseEvent) => {\n-  // Log coords of mouse movements\n-  console.log(`Coords: ${evt.clientX} X ${evt.clientY}`);\n-\n-  // When the mouse is over the upper-left of the screen,\n-  // unsubscribe to stop listening for mouse movements\n-  if (evt.clientX < 40 && evt.clientY < 40) {\n-    subscription.unsubscribe();\n-  }\n-});\n-\n-// #enddocregion event\n-\n-\n+// #docplaster\n+/*\n+  Because of how the code is merged together using the doc regions,\n+  we need to indent the imports with the function below.\n+*/\n+/* tslint:disable:no-shadowed-variable */\n+/* tslint:disable:align */\n // #docregion ajax\n-\n-import { ajax } from 'rxjs/ajax';\n+  import { ajax } from 'rxjs/ajax';\n \n // Create an Observable that will create an AJAX request\n-const apiData = ajax('/api/data');\n-// Subscribe to create the request\n-apiData.subscribe(res => console.log(res.status, res.response));\n-\n // #enddocregion ajax\n-\n-\n+export function docRegionAjax(console, ajax) {\n+  // #docregion ajax\n+  const apiData = ajax('/api/data');\n+  // Subscribe to create the request\n+  apiData.subscribe(res => console.log(res.status, res.response));\n+  // #enddocregion ajax\n+}"
        },
        {
            "sha": "c5462381f8364bdbae0e74fe2a8ebe0895f828f8",
            "filename": "aio/content/guide/rx-library.md",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fguide%2Frx-library.md",
            "raw_url": "https://github.com/angular/angular/raw/fd7146cc7180668c4eedb38e3f1e7ef6196782b5/aio%2Fcontent%2Fguide%2Frx-library.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Frx-library.md?ref=fd7146cc7180668c4eedb38e3f1e7ef6196782b5",
            "patch": "@@ -15,11 +15,11 @@ RxJS provides an implementation of the `Observable` type, which is needed until\n RxJS offers a number of functions that can be used to create new observables. These functions can simplify the process of creating observables from things such as events, timers, promises, and so on. For example:\n \n \n-<code-example path=\"rx-library/src/simple-creation.ts\" region=\"promise\" header=\"Create an observable from a promise\"></code-example>\n+<code-example path=\"rx-library/src/simple-creation.1.ts\" region=\"promise\" header=\"Create an observable from a promise\"></code-example>\n \n-<code-example path=\"rx-library/src/simple-creation.ts\" region=\"interval\" header=\"Create an observable from a counter\"></code-example>\n+<code-example path=\"rx-library/src/simple-creation.2.ts\" region=\"interval\" header=\"Create an observable from a counter\"></code-example>\n \n-<code-example path=\"rx-library/src/simple-creation.ts\" region=\"event\" header=\"Create an observable from an event\"></code-example>\n+<code-example path=\"rx-library/src/simple-creation.3.ts\" region=\"event\" header=\"Create an observable from an event\"></code-example>\n \n <code-example path=\"rx-library/src/simple-creation.ts\" region=\"ajax\" header=\"Create an observable that creates an AJAX request\"></code-example>\n "
        }
    ],
    "stats": {
        "total": 609,
        "additions": 462,
        "deletions": 147
    }
}