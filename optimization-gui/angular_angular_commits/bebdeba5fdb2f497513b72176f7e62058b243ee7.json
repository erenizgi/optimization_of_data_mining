{
    "author": "cesperian",
    "message": "docs: improve description, examples of DecimalPipe's digitsInfo parameter (#40714)\n\nFixes #40671\n\nPR Close #40714",
    "sha": "bebdeba5fdb2f497513b72176f7e62058b243ee7",
    "files": [
        {
            "sha": "7cb4873aa2700b9e53c0ceeb0723d6d435feb29c",
            "filename": "packages/common/src/pipes/number_pipe.ts",
            "status": "modified",
            "additions": 56,
            "deletions": 36,
            "changes": 92,
            "blob_url": "https://github.com/angular/angular/blob/bebdeba5fdb2f497513b72176f7e62058b243ee7/packages%2Fcommon%2Fsrc%2Fpipes%2Fnumber_pipe.ts",
            "raw_url": "https://github.com/angular/angular/raw/bebdeba5fdb2f497513b72176f7e62058b243ee7/packages%2Fcommon%2Fsrc%2Fpipes%2Fnumber_pipe.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Fsrc%2Fpipes%2Fnumber_pipe.ts?ref=bebdeba5fdb2f497513b72176f7e62058b243ee7",
            "patch": "@@ -17,59 +17,79 @@ import {invalidPipeArgumentError} from './invalid_pipe_argument_error';\n  * @ngModule CommonModule\n  * @description\n  *\n- * Transforms a number into a string,\n- * formatted according to locale rules that determine group sizing and\n- * separator, decimal-point character, and other locale-specific\n- * configurations.\n- *\n- * If no parameters are specified, the function rounds off to the nearest value using this\n- * [rounding method](https://en.wikibooks.org/wiki/Arithmetic/Rounding).\n- * The behavior differs from that of the JavaScript ```Math.round()``` function.\n- * In the following case for example, the pipe rounds down where\n- * ```Math.round()``` rounds up:\n- *\n- * ```html\n- * -2.5 | number:'1.0-0'\n- * > -3\n- * Math.round(-2.5)\n- * > -2\n- * ```\n+ * Formats a value according to digit options and locale rules.\n+ * Locale determines group sizing and separator,\n+ * decimal point character, and other locale-specific configurations.\n  *\n  * @see `formatNumber()`\n  *\n  * @usageNotes\n- * The following code shows how the pipe transforms numbers\n- * into text strings, according to various format specifications,\n- * where the caller's default locale is `en-US`.\n+ *\n+ * ### digitsInfo\n+ *\n+ * The value's decimal representation is specified by the `digitsInfo`\n+ * parameter, written in the following format:<br>\n+ *\n+ * ```\n+ * {minIntegerDigits}.{minFractionDigits}-{maxFractionDigits}\n+ * ```\n+ *\n+ *  - `minIntegerDigits`:\n+ * The minimum number of integer digits before the decimal point.\n+ * Default is 1.\n+ *\n+ * - `minFractionDigits`:\n+ * The minimum number of digits after the decimal point.\n+ * Default is 0.\n+ *\n+ *  - `maxFractionDigits`:\n+ * The maximum number of digits after the decimal point.\n+ * Default is 3.\n+ *\n+ * If the formatted value is truncated it will be rounded using the \"to-nearest\" method:\n+ *\n+ * ```\n+ * {{3.6 | number: '1.0-0'}}\n+ * <!--will output '4'-->\n+ *\n+ * {{-3.6 | number:'1.0-0'}}\n+ * <!--will output '-4'-->\n+ * ```\n+ *\n+ * ### locale\n+ *\n+ * `locale` will format a value according to locale rules.\n+ * Locale determines group sizing and separator,\n+ * decimal point character, and other locale-specific configurations.\n+ *\n+ * When not supplied, uses the value of `LOCALE_ID`, which is `en-US` by default.\n+ *\n+ * See [Setting your app locale](guide/i18n#setting-up-the-locale-of-your-app).\n  *\n  * ### Example\n  *\n+ * The following code shows how the pipe transforms values\n+ * according to various format specifications,\n+ * where the caller's default locale is `en-US`.\n+ *\n  * <code-example path=\"common/pipes/ts/number_pipe.ts\" region='NumberPipe'></code-example>\n  *\n  * @publicApi\n  */\n @Pipe({name: 'number'})\n export class DecimalPipe implements PipeTransform {\n   constructor(@Inject(LOCALE_ID) private _locale: string) {}\n-\n-  /**\n-   * @param value The number to be formatted.\n-   * @param digitsInfo Decimal representation options, specified by a string\n-   * in the following format:<br>\n-   * <code>{minIntegerDigits}.{minFractionDigits}-{maxFractionDigits}</code>.\n-   *   - `minIntegerDigits`: The minimum number of integer digits before the decimal point.\n-   * Default is `1`.\n-   *   - `minFractionDigits`: The minimum number of digits after the decimal point.\n-   * Default is `0`.\n-   *   - `maxFractionDigits`: The maximum number of digits after the decimal point.\n-   * Default is `3`.\n-   * @param locale A locale code for the locale format rules to use.\n-   * When not supplied, uses the value of `LOCALE_ID`, which is `en-US` by default.\n-   * See [Setting your app locale](guide/i18n#setting-up-the-locale-of-your-app).\n-   */\n   transform(value: number|string, digitsInfo?: string, locale?: string): string|null;\n   transform(value: null|undefined, digitsInfo?: string, locale?: string): null;\n   transform(value: number|string|null|undefined, digitsInfo?: string, locale?: string): string|null;\n+\n+  /**\n+   * @param value The value to be formatted.\n+   * @param digitsInfo Sets digit and decimal representation.\n+   * [See more](#digitsinfo).\n+   * @param locale Specifies what locale format rules to use.\n+   * [See more](#locale).\n+   */\n   transform(value: number|string|null|undefined, digitsInfo?: string, locale?: string): string\n       |null {\n     if (!isValue(value)) return null;"
        },
        {
            "sha": "c7532f2cb690a49dffab45eb340b6a11351237e8",
            "filename": "packages/examples/common/pipes/ts/e2e_test/pipe_spec.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 8,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/bebdeba5fdb2f497513b72176f7e62058b243ee7/packages%2Fexamples%2Fcommon%2Fpipes%2Fts%2Fe2e_test%2Fpipe_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/bebdeba5fdb2f497513b72176f7e62058b243ee7/packages%2Fexamples%2Fcommon%2Fpipes%2Fts%2Fe2e_test%2Fpipe_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fexamples%2Fcommon%2Fpipes%2Fts%2Fe2e_test%2Fpipe_spec.ts?ref=bebdeba5fdb2f497513b72176f7e62058b243ee7",
            "patch": "@@ -75,14 +75,10 @@ describe('pipe', () => {\n       browser.get(URL);\n       waitForElement('number-pipe');\n       const examples = element.all(by.css('number-pipe p'));\n-      expect(examples.get(0).getText()).toEqual('e (no formatting): 2.718');\n-      expect(examples.get(1).getText()).toEqual('e (3.1-5): 002.71828');\n-      expect(examples.get(2).getText()).toEqual('e (4.5-5): 0,002.71828');\n-      expect(examples.get(3).getText()).toEqual('e (french): 0\\u202f002,71828');\n-      expect(examples.get(4).getText()).toEqual('pi (no formatting): 3.14');\n-      expect(examples.get(5).getText()).toEqual('pi (3.1-5): 003.14');\n-      expect(examples.get(6).getText()).toEqual('pi (3.5-5): 003.14000');\n-      expect(examples.get(7).getText()).toEqual('-2.5 (1.0-0): -3');\n+      expect(examples.get(0).getText()).toEqual('No specified formatting: 3.142');\n+      expect(examples.get(1).getText()).toEqual('With digitsInfo parameter specified: 0,003.14159');\n+      expect(examples.get(2).getText())\n+          .toEqual('With digitsInfo and locale parameters specified: 0\\u202f003,14159');\n     });\n   });\n "
        },
        {
            "sha": "0a2af30c813abcbdae6bfc171bd67c309ee40304",
            "filename": "packages/examples/common/pipes/ts/number_pipe.ts",
            "status": "modified",
            "additions": 20,
            "deletions": 25,
            "changes": 45,
            "blob_url": "https://github.com/angular/angular/blob/bebdeba5fdb2f497513b72176f7e62058b243ee7/packages%2Fexamples%2Fcommon%2Fpipes%2Fts%2Fnumber_pipe.ts",
            "raw_url": "https://github.com/angular/angular/raw/bebdeba5fdb2f497513b72176f7e62058b243ee7/packages%2Fexamples%2Fcommon%2Fpipes%2Fts%2Fnumber_pipe.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fexamples%2Fcommon%2Fpipes%2Fts%2Fnumber_pipe.ts?ref=bebdeba5fdb2f497513b72176f7e62058b243ee7",
            "patch": "@@ -11,40 +11,35 @@ import {Component} from '@angular/core';\n // we need to import data for the french locale\n import localeFr from './locale-fr';\n \n-// registering french data\n-registerLocaleData(localeFr);\n+registerLocaleData(localeFr, 'fr');\n \n // #docregion NumberPipe\n @Component({\n   selector: 'number-pipe',\n   template: `<div>\n-    <!--output '2.718'-->\n-    <p>e (no formatting): {{e | number}}</p>\n \n-    <!--output '002.71828'-->\n-    <p>e (3.1-5): {{e | number:'3.1-5'}}</p>\n+    <p>\n+      No specified formatting:\n+      {{pi | number}}\n+      <!--output: '3.142'-->\n+    </p>\n+\n+    <p>\n+      With digitsInfo parameter specified:\n+      {{pi | number:'4.1-5'}}\n+      <!--output: '0,003.14159'-->\n+    </p>\n+\n+    <p>\n+      With digitsInfo and\n+      locale parameters specified:\n+      {{pi | number:'4.1-5':'fr'}}\n+      <!--output: '0 003,14159'-->\n+    </p>\n \n-    <!--output '0,002.71828'-->\n-    <p>e (4.5-5): {{e | number:'4.5-5'}}</p>\n-\n-    <!--output '0 002,71828'-->\n-    <p>e (french): {{e | number:'4.5-5':'fr'}}</p>\n-\n-    <!--output '3.14'-->\n-    <p>pi (no formatting): {{pi | number}}</p>\n-\n-    <!--output '003.14'-->\n-    <p>pi (3.1-5): {{pi | number:'3.1-5'}}</p>\n-\n-    <!--output '003.14000'-->\n-    <p>pi (3.5-5): {{pi | number:'3.5-5'}}</p>\n-\n-    <!--output '-3' / unlike '-2' by Math.round()-->\n-    <p>-2.5 (1.0-0): {{-2.5 | number:'1.0-0'}}</p>\n   </div>`\n })\n export class NumberPipeComponent {\n-  pi: number = 3.14;\n-  e: number = 2.718281828459045;\n+  pi: number = 3.14159265359;\n }\n // #enddocregion"
        }
    ],
    "stats": {
        "total": 149,
        "additions": 80,
        "deletions": 69
    }
}