{
    "author": "josephperrott",
    "message": "fix(dev-infra): remove commit message wizard and builder (#41280)\n\nRemoving commit message builder and wizard as they are unused and\nunneeded.\n\nPR Close #41280",
    "sha": "5eb7f3491f37a8f71717525b0d0e901c00a8c4e8",
    "files": [
        {
            "sha": "95491d4d518202169e2bbcb47ebc5fa5c45f6813",
            "filename": "dev-infra/build-worker.js",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/5eb7f3491f37a8f71717525b0d0e901c00a8c4e8/dev-infra%2Fbuild-worker.js",
            "raw_url": "https://github.com/angular/angular/raw/5eb7f3491f37a8f71717525b0d0e901c00a8c4e8/dev-infra%2Fbuild-worker.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fbuild-worker.js?ref=5eb7f3491f37a8f71717525b0d0e901c00a8c4e8",
            "patch": "@@ -7,7 +7,6 @@ var fs = require('fs');\n var path = require('path');\n var chalk = _interopDefault(require('chalk'));\n require('inquirer');\n-require('inquirer-autocomplete-prompt');\n var shelljs = require('shelljs');\n \n /**"
        },
        {
            "sha": "5b45ac4140c6f10c0bd322d2b42025e128c6628a",
            "filename": "dev-infra/commit-message/builder.spec.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 46,
            "changes": 46,
            "blob_url": "https://github.com/angular/angular/blob/e8cae22d666f0be50db666b250f92bc02bfe9a06/dev-infra%2Fcommit-message%2Fbuilder.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/e8cae22d666f0be50db666b250f92bc02bfe9a06/dev-infra%2Fcommit-message%2Fbuilder.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fcommit-message%2Fbuilder.spec.ts?ref=e8cae22d666f0be50db666b250f92bc02bfe9a06",
            "patch": "@@ -1,46 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-import * as config from '../utils/config';\n-import * as console from '../utils/console';\n-\n-import {buildCommitMessage} from './builder';\n-\n-\n-describe('commit message building:', () => {\n-  beforeEach(() => {\n-    // stub logging calls to prevent noise in test log\n-    spyOn(console, 'info').and.stub();\n-    // provide a configuration for DevInfra when loaded\n-    spyOn(config, 'getConfig').and.returnValue({\n-      commitMessage: {\n-        scopes: ['core'],\n-      }\n-    } as any);\n-  });\n-\n-  it('creates a commit message with a scope', async () => {\n-    buildPromptResponseSpies('fix', 'core', 'This is a summary');\n-\n-    expect(await buildCommitMessage()).toMatch(/^fix\\(core\\): This is a summary/);\n-  });\n-\n-  it('creates a commit message without a scope', async () => {\n-    buildPromptResponseSpies('build', false, 'This is a summary');\n-\n-    expect(await buildCommitMessage()).toMatch(/^build: This is a summary/);\n-  });\n-});\n-\n-\n-/** Create spies to return the mocked selections from prompts. */\n-function buildPromptResponseSpies(type: string, scope: string|false, summary: string) {\n-  spyOn(console, 'promptAutocomplete')\n-      .and.returnValues(Promise.resolve(type), Promise.resolve(scope));\n-  spyOn(console, 'promptInput').and.returnValue(Promise.resolve(summary));\n-}"
        },
        {
            "sha": "f663f3619d471a3ce051f404d490f1a205d2eaac",
            "filename": "dev-infra/commit-message/builder.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 70,
            "changes": 70,
            "blob_url": "https://github.com/angular/angular/blob/e8cae22d666f0be50db666b250f92bc02bfe9a06/dev-infra%2Fcommit-message%2Fbuilder.ts",
            "raw_url": "https://github.com/angular/angular/raw/e8cae22d666f0be50db666b250f92bc02bfe9a06/dev-infra%2Fcommit-message%2Fbuilder.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fcommit-message%2Fbuilder.ts?ref=e8cae22d666f0be50db666b250f92bc02bfe9a06",
            "patch": "@@ -1,70 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-import {ListChoiceOptions} from 'inquirer';\n-\n-import {info, promptAutocomplete, promptInput} from '../utils/console';\n-\n-import {COMMIT_TYPES, CommitType, getCommitMessageConfig, ScopeRequirement} from './config';\n-\n-/** Validate commit message at the provided file path. */\n-export async function buildCommitMessage() {\n-  // TODO(josephperrott): Add support for skipping wizard with local untracked config file\n-  // TODO(josephperrott): Add default commit message information/commenting into generated messages\n-  info('Just a few questions to start building the commit message!');\n-\n-  /** The commit message type. */\n-  const type = await promptForCommitMessageType();\n-  /** The commit message scope. */\n-  const scope = await promptForCommitMessageScopeForType(type);\n-  /** The commit message summary. */\n-  const summary = await promptForCommitMessageSummary();\n-\n-  return `${type.name}${scope ? '(' + scope + ')' : ''}: ${summary}\\n\\n`;\n-}\n-\n-/** Prompts in the terminal for the commit message's type. */\n-async function promptForCommitMessageType(): Promise<CommitType> {\n-  info('The type of change in the commit. Allows a reader to know the effect of the change,');\n-  info('whether it brings a new feature, adds additional testing, documents the `project, etc.');\n-\n-  /** List of commit type options for the autocomplete prompt. */\n-  const typeOptions: ListChoiceOptions[] =\n-      Object.values(COMMIT_TYPES).map(({description, name}) => {\n-        return {\n-          name: `${name} - ${description}`,\n-          value: name,\n-          short: name,\n-        };\n-      });\n-  /** The key of a commit message type, selected by the user via prompt. */\n-  const typeName = await promptAutocomplete('Select a type for the commit:', typeOptions);\n-\n-  return COMMIT_TYPES[typeName];\n-}\n-\n-/** Prompts in the terminal for the commit message's scope. */\n-async function promptForCommitMessageScopeForType(type: CommitType): Promise<string|false> {\n-  // If the commit type's scope requirement is forbidden, return early.\n-  if (type.scope === ScopeRequirement.Forbidden) {\n-    info(`Skipping scope selection as the '${type.name}' type does not allow scopes`);\n-    return false;\n-  }\n-  /** Commit message configuration */\n-  const config = getCommitMessageConfig();\n-\n-  info('The area of the repository the changes in this commit most affects.');\n-  return await promptAutocomplete(\n-      'Select a scope for the commit:', config.commitMessage.scopes,\n-      type.scope === ScopeRequirement.Optional ? '<no scope>' : '');\n-}\n-\n-/** Prompts in the terminal for the commit message's summary. */\n-async function promptForCommitMessageSummary(): Promise<string> {\n-  info('Provide a short summary of what the changes in the commit do');\n-  return await promptInput('Provide a short summary of the commit');\n-}"
        },
        {
            "sha": "0ed65b71e3d295dd8562a7839912e118fff54bac",
            "filename": "dev-infra/commit-message/cli.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/5eb7f3491f37a8f71717525b0d0e901c00a8c4e8/dev-infra%2Fcommit-message%2Fcli.ts",
            "raw_url": "https://github.com/angular/angular/raw/5eb7f3491f37a8f71717525b0d0e901c00a8c4e8/dev-infra%2Fcommit-message%2Fcli.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fcommit-message%2Fcli.ts?ref=5eb7f3491f37a8f71717525b0d0e901c00a8c4e8",
            "patch": "@@ -10,14 +10,12 @@ import * as yargs from 'yargs';\n import {RestoreCommitMessageModule} from './restore-commit-message/cli';\n import {ValidateFileModule} from './validate-file/cli';\n import {ValidateRangeModule} from './validate-range/cli';\n-import {WizardModule} from './wizard/cli';\n \n /** Build the parser for the commit-message commands. */\n export function buildCommitMessageParser(localYargs: yargs.Argv) {\n   return localYargs.help()\n       .strict()\n       .command(RestoreCommitMessageModule)\n-      .command(WizardModule)\n       .command(ValidateFileModule)\n       .command(ValidateRangeModule);\n }"
        },
        {
            "sha": "b4cc94cfa69f48e37964b13582d70dfceeccb822",
            "filename": "dev-infra/commit-message/wizard/cli.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 54,
            "changes": 54,
            "blob_url": "https://github.com/angular/angular/blob/e8cae22d666f0be50db666b250f92bc02bfe9a06/dev-infra%2Fcommit-message%2Fwizard%2Fcli.ts",
            "raw_url": "https://github.com/angular/angular/raw/e8cae22d666f0be50db666b250f92bc02bfe9a06/dev-infra%2Fcommit-message%2Fwizard%2Fcli.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fcommit-message%2Fwizard%2Fcli.ts?ref=e8cae22d666f0be50db666b250f92bc02bfe9a06",
            "patch": "@@ -1,54 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-\n-import {Arguments, Argv, CommandModule} from 'yargs';\n-\n-import {CommitMsgSource} from '../commit-message-source';\n-\n-import {runWizard} from './wizard';\n-\n-\n-export interface WizardOptions {\n-  filePath: string;\n-  commitSha: string|undefined;\n-  source: CommitMsgSource|undefined;\n-}\n-\n-/** Builds the command. */\n-function builder(yargs: Argv) {\n-  return yargs\n-      .positional('filePath', {\n-        description: 'The file path to write the generated commit message into',\n-        type: 'string',\n-        demandOption: true,\n-      })\n-      .positional('source', {\n-        choices: ['message', 'template', 'merge', 'squash', 'commit'] as const,\n-        description: 'The source of the commit message as described here: ' +\n-            'https://git-scm.com/docs/githooks#_prepare_commit_msg'\n-      })\n-      .positional('commitSha', {\n-        description: 'The commit sha if source is set to `commit`',\n-        type: 'string',\n-      });\n-}\n-\n-/** Handles the command. */\n-async function handler(args: Arguments<WizardOptions>) {\n-  await runWizard(args);\n-}\n-\n-/** yargs command module describing the command.  */\n-export const WizardModule: CommandModule<{}, WizardOptions> = {\n-  handler,\n-  builder,\n-  command: 'wizard <filePath> [source] [commitSha]',\n-  // Description: Run the wizard to build a base commit message before opening to complete.\n-  // No describe is defiend to hide the command from the --help.\n-  describe: false,\n-};"
        },
        {
            "sha": "40623fed10250ace4033aa67c1a7cdde549b3a3a",
            "filename": "dev-infra/commit-message/wizard/wizard.ts",
            "status": "removed",
            "additions": 0,
            "deletions": 45,
            "changes": 45,
            "blob_url": "https://github.com/angular/angular/blob/e8cae22d666f0be50db666b250f92bc02bfe9a06/dev-infra%2Fcommit-message%2Fwizard%2Fwizard.ts",
            "raw_url": "https://github.com/angular/angular/raw/e8cae22d666f0be50db666b250f92bc02bfe9a06/dev-infra%2Fcommit-message%2Fwizard%2Fwizard.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fcommit-message%2Fwizard%2Fwizard.ts?ref=e8cae22d666f0be50db666b250f92bc02bfe9a06",
            "patch": "@@ -1,45 +0,0 @@\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-import {writeFileSync} from 'fs';\n-\n-import {getUserConfig} from '../../utils/config';\n-import {debug, info} from '../../utils/console';\n-\n-import {buildCommitMessage} from '../builder';\n-import {CommitMsgSource} from '../commit-message-source';\n-\n-\n-/** The default commit message used if the wizard does not procude a commit message. */\n-const defaultCommitMessage = `<type>(<scope>): <summary>\n-\n-# <Describe the motivation behind this change - explain WHY you are making this change. Wrap all\n-#  lines at 100 characters.>\\n\\n`;\n-\n-export async function runWizard(\n-    args: {filePath: string, source?: CommitMsgSource, commitSha?: string}) {\n-  if (getUserConfig().commitMessage?.disableWizard) {\n-    debug('Skipping commit message wizard due to enabled `commitMessage.disableWizard` option in');\n-    debug('user config.');\n-    process.exitCode = 0;\n-    return;\n-  }\n-\n-  if (args.source !== undefined) {\n-    info(`Skipping commit message wizard because the commit was created via '${\n-        args.source}' source`);\n-    process.exitCode = 0;\n-    return;\n-  }\n-\n-  // Set the default commit message to be updated if the user cancels out of the wizard in progress\n-  writeFileSync(args.filePath, defaultCommitMessage);\n-\n-  /** The generated commit message. */\n-  const commitMessage = await buildCommitMessage();\n-  writeFileSync(args.filePath, commitMessage);\n-}"
        },
        {
            "sha": "050e57cf01892a73a0608c45b855f0a028ad4ea3",
            "filename": "dev-infra/ng-dev.js",
            "status": "modified",
            "additions": 28,
            "deletions": 200,
            "changes": 228,
            "blob_url": "https://github.com/angular/angular/blob/5eb7f3491f37a8f71717525b0d0e901c00a8c4e8/dev-infra%2Fng-dev.js",
            "raw_url": "https://github.com/angular/angular/raw/5eb7f3491f37a8f71717525b0d0e901c00a8c4e8/dev-infra%2Fng-dev.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fng-dev.js?ref=5eb7f3491f37a8f71717525b0d0e901c00a8c4e8",
            "patch": "@@ -8,7 +8,6 @@ var tslib = require('tslib');\n var chalk = _interopDefault(require('chalk'));\n var fs = require('fs');\n var inquirer = require('inquirer');\n-var inquirerAutocomplete = require('inquirer-autocomplete-prompt');\n var path = require('path');\n var shelljs = require('shelljs');\n var url = require('url');\n@@ -231,53 +230,6 @@ function promptConfirm(message, defaultValue) {\n         });\n     });\n }\n-function promptAutocomplete(message, choices, noChoiceText) {\n-    return tslib.__awaiter(this, void 0, void 0, function () {\n-        var prompt, result;\n-        return tslib.__generator(this, function (_a) {\n-            switch (_a.label) {\n-                case 0:\n-                    prompt = inquirer.createPromptModule({}).registerPrompt('autocomplete', inquirerAutocomplete);\n-                    if (noChoiceText) {\n-                        choices = tslib.__spreadArray([noChoiceText], tslib.__read(choices));\n-                    }\n-                    return [4 /*yield*/, prompt({\n-                            type: 'autocomplete',\n-                            name: 'result',\n-                            message: message,\n-                            source: function (_, input) {\n-                                if (!input) {\n-                                    return Promise.resolve(choices);\n-                                }\n-                                return Promise.resolve(choices.filter(function (choice) {\n-                                    if (typeof choice === 'string') {\n-                                        return choice.includes(input);\n-                                    }\n-                                    return choice.name.includes(input);\n-                                }));\n-                            }\n-                        })];\n-                case 1:\n-                    result = (_a.sent()).result;\n-                    if (result === noChoiceText) {\n-                        return [2 /*return*/, false];\n-                    }\n-                    return [2 /*return*/, result];\n-            }\n-        });\n-    });\n-}\n-/** Prompts the user for one line of input. */\n-function promptInput(message) {\n-    return tslib.__awaiter(this, void 0, void 0, function () {\n-        return tslib.__generator(this, function (_a) {\n-            switch (_a.label) {\n-                case 0: return [4 /*yield*/, inquirer.prompt({ type: 'input', name: 'result', message: message })];\n-                case 1: return [2 /*return*/, (_a.sent()).result];\n-            }\n-        });\n-    });\n-}\n /**\n  * Supported levels for logging functions.\n  *\n@@ -2125,135 +2077,11 @@ const ValidateRangeModule = {\n     describe: 'Validate a range of commit messages',\n };\n \n-/** Validate commit message at the provided file path. */\n-function buildCommitMessage() {\n-    return tslib.__awaiter(this, void 0, void 0, function* () {\n-        // TODO(josephperrott): Add support for skipping wizard with local untracked config file\n-        // TODO(josephperrott): Add default commit message information/commenting into generated messages\n-        info('Just a few questions to start building the commit message!');\n-        /** The commit message type. */\n-        const type = yield promptForCommitMessageType();\n-        /** The commit message scope. */\n-        const scope = yield promptForCommitMessageScopeForType(type);\n-        /** The commit message summary. */\n-        const summary = yield promptForCommitMessageSummary();\n-        return `${type.name}${scope ? '(' + scope + ')' : ''}: ${summary}\\n\\n`;\n-    });\n-}\n-/** Prompts in the terminal for the commit message's type. */\n-function promptForCommitMessageType() {\n-    return tslib.__awaiter(this, void 0, void 0, function* () {\n-        info('The type of change in the commit. Allows a reader to know the effect of the change,');\n-        info('whether it brings a new feature, adds additional testing, documents the `project, etc.');\n-        /** List of commit type options for the autocomplete prompt. */\n-        const typeOptions = Object.values(COMMIT_TYPES).map(({ description, name }) => {\n-            return {\n-                name: `${name} - ${description}`,\n-                value: name,\n-                short: name,\n-            };\n-        });\n-        /** The key of a commit message type, selected by the user via prompt. */\n-        const typeName = yield promptAutocomplete('Select a type for the commit:', typeOptions);\n-        return COMMIT_TYPES[typeName];\n-    });\n-}\n-/** Prompts in the terminal for the commit message's scope. */\n-function promptForCommitMessageScopeForType(type) {\n-    return tslib.__awaiter(this, void 0, void 0, function* () {\n-        // If the commit type's scope requirement is forbidden, return early.\n-        if (type.scope === ScopeRequirement.Forbidden) {\n-            info(`Skipping scope selection as the '${type.name}' type does not allow scopes`);\n-            return false;\n-        }\n-        /** Commit message configuration */\n-        const config = getCommitMessageConfig();\n-        info('The area of the repository the changes in this commit most affects.');\n-        return yield promptAutocomplete('Select a scope for the commit:', config.commitMessage.scopes, type.scope === ScopeRequirement.Optional ? '<no scope>' : '');\n-    });\n-}\n-/** Prompts in the terminal for the commit message's summary. */\n-function promptForCommitMessageSummary() {\n-    return tslib.__awaiter(this, void 0, void 0, function* () {\n-        info('Provide a short summary of what the changes in the commit do');\n-        return yield promptInput('Provide a short summary of the commit');\n-    });\n-}\n-\n-/** The default commit message used if the wizard does not procude a commit message. */\n-const defaultCommitMessage = `<type>(<scope>): <summary>\n-\n-# <Describe the motivation behind this change - explain WHY you are making this change. Wrap all\n-#  lines at 100 characters.>\\n\\n`;\n-function runWizard(args) {\n-    var _a;\n-    return tslib.__awaiter(this, void 0, void 0, function* () {\n-        if ((_a = getUserConfig().commitMessage) === null || _a === void 0 ? void 0 : _a.disableWizard) {\n-            debug('Skipping commit message wizard due to enabled `commitMessage.disableWizard` option in');\n-            debug('user config.');\n-            process.exitCode = 0;\n-            return;\n-        }\n-        if (args.source !== undefined) {\n-            info(`Skipping commit message wizard because the commit was created via '${args.source}' source`);\n-            process.exitCode = 0;\n-            return;\n-        }\n-        // Set the default commit message to be updated if the user cancels out of the wizard in progress\n-        fs.writeFileSync(args.filePath, defaultCommitMessage);\n-        /** The generated commit message. */\n-        const commitMessage = yield buildCommitMessage();\n-        fs.writeFileSync(args.filePath, commitMessage);\n-    });\n-}\n-\n-/**\n- * @license\n- * Copyright Google LLC All Rights Reserved.\n- *\n- * Use of this source code is governed by an MIT-style license that can be\n- * found in the LICENSE file at https://angular.io/license\n- */\n-/** Builds the command. */\n-function builder$4(yargs) {\n-    return yargs\n-        .positional('filePath', {\n-        description: 'The file path to write the generated commit message into',\n-        type: 'string',\n-        demandOption: true,\n-    })\n-        .positional('source', {\n-        choices: ['message', 'template', 'merge', 'squash', 'commit'],\n-        description: 'The source of the commit message as described here: ' +\n-            'https://git-scm.com/docs/githooks#_prepare_commit_msg'\n-    })\n-        .positional('commitSha', {\n-        description: 'The commit sha if source is set to `commit`',\n-        type: 'string',\n-    });\n-}\n-/** Handles the command. */\n-function handler$4(args) {\n-    return tslib.__awaiter(this, void 0, void 0, function* () {\n-        yield runWizard(args);\n-    });\n-}\n-/** yargs command module describing the command.  */\n-const WizardModule = {\n-    handler: handler$4,\n-    builder: builder$4,\n-    command: 'wizard <filePath> [source] [commitSha]',\n-    // Description: Run the wizard to build a base commit message before opening to complete.\n-    // No describe is defiend to hide the command from the --help.\n-    describe: false,\n-};\n-\n /** Build the parser for the commit-message commands. */\n function buildCommitMessageParser(localYargs) {\n     return localYargs.help()\n         .strict()\n         .command(RestoreCommitMessageModule)\n-        .command(WizardModule)\n         .command(ValidateFileModule)\n         .command(ValidateRangeModule);\n }\n@@ -2935,23 +2763,23 @@ function printTargetBranchesForPr(prNumber) {\n  * found in the LICENSE file at https://angular.io/license\n  */\n /** Builds the command. */\n-function builder$5(yargs) {\n+function builder$4(yargs) {\n     return yargs.positional('pr', {\n         description: 'The pull request number',\n         type: 'number',\n         demandOption: true,\n     });\n }\n /** Handles the command. */\n-function handler$5({ pr }) {\n+function handler$4({ pr }) {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         yield printTargetBranchesForPr(pr);\n     });\n }\n /** yargs command module describing the command.  */\n const CheckTargetBranchesModule = {\n-    handler: handler$5,\n-    builder: builder$5,\n+    handler: handler$4,\n+    builder: builder$4,\n     command: 'check-target-branches <pr>',\n     describe: 'Check a PR to determine what branches it is currently targeting',\n };\n@@ -3156,20 +2984,20 @@ function checkOutPullRequestLocally(prNumber, githubToken, opts = {}) {\n  * found in the LICENSE file at https://angular.io/license\n  */\n /** Builds the checkout pull request command. */\n-function builder$6(yargs) {\n+function builder$5(yargs) {\n     return addGithubTokenOption(yargs).positional('prNumber', { type: 'number', demandOption: true });\n }\n /** Handles the checkout pull request command. */\n-function handler$6({ prNumber, githubToken }) {\n+function handler$5({ prNumber, githubToken }) {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         const prCheckoutOptions = { allowIfMaintainerCannotModify: true, branchName: `pr-${prNumber}` };\n         yield checkOutPullRequestLocally(prNumber, githubToken, prCheckoutOptions);\n     });\n }\n /** yargs command module for checking out a PR  */\n const CheckoutCommandModule = {\n-    handler: handler$6,\n-    builder: builder$6,\n+    handler: handler$5,\n+    builder: builder$5,\n     command: 'checkout <pr-number>',\n     describe: 'Checkout a PR from the upstream repo',\n };\n@@ -4320,7 +4148,7 @@ function createPullRequestMergeTask(githubToken, flags) {\n  * found in the LICENSE file at https://angular.io/license\n  */\n /** Builds the command. */\n-function builder$7(yargs) {\n+function builder$6(yargs) {\n     return addGithubTokenOption(yargs)\n         .help()\n         .strict()\n@@ -4336,7 +4164,7 @@ function builder$7(yargs) {\n     });\n }\n /** Handles the command. */\n-function handler$7(_a) {\n+function handler$6(_a) {\n     var pr = _a.pr, githubToken = _a.githubToken, branchPrompt = _a.branchPrompt;\n     return tslib.__awaiter(this, void 0, void 0, function () {\n         return tslib.__generator(this, function (_b) {\n@@ -4351,8 +4179,8 @@ function handler$7(_a) {\n }\n /** yargs command module describing the command.  */\n var MergeCommandModule = {\n-    handler: handler$7,\n-    builder: builder$7,\n+    handler: handler$6,\n+    builder: builder$6,\n     command: 'merge <pr>',\n     describe: 'Merge a PR into its targeted branches.',\n };\n@@ -4986,15 +4814,15 @@ function buildReleaseOutput() {\n  * found in the LICENSE file at https://angular.io/license\n  */\n /** Yargs command builder for configuring the `ng-dev release build` command. */\n-function builder$8(argv) {\n+function builder$7(argv) {\n     return argv.option('json', {\n         type: 'boolean',\n         description: 'Whether the built packages should be printed to stdout as JSON.',\n         default: false,\n     });\n }\n /** Yargs command handler for building a release. */\n-function handler$8(args) {\n+function handler$7(args) {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         const { npmPackages } = getReleaseConfig();\n         let builtPackages = yield buildReleaseOutput();\n@@ -5029,8 +4857,8 @@ function handler$8(args) {\n }\n /** CLI command module for building release output. */\n const ReleaseBuildCommandModule = {\n-    builder: builder$8,\n-    handler: handler$8,\n+    builder: builder$7,\n+    handler: handler$7,\n     command: 'build',\n     describe: 'Builds the release output for the current branch.',\n };\n@@ -6629,11 +6457,11 @@ class ReleaseTool {\n  * found in the LICENSE file at https://angular.io/license\n  */\n /** Yargs command builder for configuring the `ng-dev release publish` command. */\n-function builder$9(argv) {\n+function builder$8(argv) {\n     return addGithubTokenOption(argv);\n }\n /** Yargs command handler for staging a release. */\n-function handler$9(args) {\n+function handler$8(args) {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         const config = getConfig();\n         const releaseConfig = getReleaseConfig(config);\n@@ -6657,8 +6485,8 @@ function handler$9(args) {\n }\n /** CLI command module for publishing a release. */\n const ReleasePublishCommandModule = {\n-    builder: builder$9,\n-    handler: handler$9,\n+    builder: builder$8,\n+    handler: handler$8,\n     command: 'publish',\n     describe: 'Publish new releases and configure version branches.',\n };\n@@ -6670,7 +6498,7 @@ const ReleasePublishCommandModule = {\n  * Use of this source code is governed by an MIT-style license that can be\n  * found in the LICENSE file at https://angular.io/license\n  */\n-function builder$a(args) {\n+function builder$9(args) {\n     return args\n         .positional('tagName', {\n         type: 'string',\n@@ -6684,7 +6512,7 @@ function builder$a(args) {\n     });\n }\n /** Yargs command handler for building a release. */\n-function handler$a(args) {\n+function handler$9(args) {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         const { targetVersion: rawVersion, tagName } = args;\n         const { npmPackages, publishRegistry } = getReleaseConfig();\n@@ -6716,8 +6544,8 @@ function handler$a(args) {\n }\n /** CLI command module for setting an NPM dist tag. */\n const ReleaseSetDistTagCommand = {\n-    builder: builder$a,\n-    handler: handler$a,\n+    builder: builder$9,\n+    handler: handler$9,\n     command: 'set-dist-tag <tag-name> <target-version>',\n     describe: 'Sets a given NPM dist tag for all release packages.',\n };\n@@ -6796,22 +6624,22 @@ function getCurrentGitUser() {\n  * Use of this source code is governed by an MIT-style license that can be\n  * found in the LICENSE file at https://angular.io/license\n  */\n-function builder$b(args) {\n+function builder$a(args) {\n     return args.option('mode', {\n         demandOption: true,\n         description: 'Whether the env-stamp should be built for a snapshot or release',\n         choices: ['snapshot', 'release']\n     });\n }\n-function handler$b({ mode }) {\n+function handler$a({ mode }) {\n     return tslib.__awaiter(this, void 0, void 0, function* () {\n         buildEnvStamp(mode);\n     });\n }\n /** CLI command module for building the environment stamp. */\n const BuildEnvStampCommand = {\n-    builder: builder$b,\n-    handler: handler$b,\n+    builder: builder$a,\n+    handler: handler$a,\n     command: 'build-env-stamp',\n     describe: 'Build the environment stamping information',\n };"
        },
        {
            "sha": "f54f2820dc6c87cad272633889836dc9202953b3",
            "filename": "dev-infra/tmpl-package.json",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/5eb7f3491f37a8f71717525b0d0e901c00a8c4e8/dev-infra%2Ftmpl-package.json",
            "raw_url": "https://github.com/angular/angular/raw/5eb7f3491f37a8f71717525b0d0e901c00a8c4e8/dev-infra%2Ftmpl-package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Ftmpl-package.json?ref=5eb7f3491f37a8f71717525b0d0e901c00a8c4e8",
            "patch": "@@ -18,7 +18,6 @@\n     \"cli-progress\": \"<from-root>\",\n     \"glob\": \"<from-root>\",\n     \"inquirer\": \"<from-root>\",\n-    \"inquirer-autocomplete-prompt\": \"<from-root>\",\n     \"minimatch\": \"<from-root>\",\n     \"multimatch\": \"<from-root>\",\n     \"node-fetch\": \"<from-root>\","
        },
        {
            "sha": "2b3404c485f7186c33f318b651ddcdb6a9e89213",
            "filename": "dev-infra/utils/BUILD.bazel",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/5eb7f3491f37a8f71717525b0d0e901c00a8c4e8/dev-infra%2Futils%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/5eb7f3491f37a8f71717525b0d0e901c00a8c4e8/dev-infra%2Futils%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Futils%2FBUILD.bazel?ref=5eb7f3491f37a8f71717525b0d0e901c00a8c4e8",
            "patch": "@@ -21,7 +21,6 @@ ts_library(\n         \"@npm//@types/yargs\",\n         \"@npm//chalk\",\n         \"@npm//inquirer\",\n-        \"@npm//inquirer-autocomplete-prompt\",\n         \"@npm//shelljs\",\n         \"@npm//tslib\",\n         \"@npm//typed-graphqlify\","
        },
        {
            "sha": "d07b9e140ad82b08d3a9d425df2941c6ba11c93e",
            "filename": "dev-infra/utils/console.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 43,
            "changes": 44,
            "blob_url": "https://github.com/angular/angular/blob/5eb7f3491f37a8f71717525b0d0e901c00a8c4e8/dev-infra%2Futils%2Fconsole.ts",
            "raw_url": "https://github.com/angular/angular/raw/5eb7f3491f37a8f71717525b0d0e901c00a8c4e8/dev-infra%2Futils%2Fconsole.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Futils%2Fconsole.ts?ref=5eb7f3491f37a8f71717525b0d0e901c00a8c4e8",
            "patch": "@@ -8,8 +8,7 @@\n \n import chalk from 'chalk';\n import {writeFileSync} from 'fs';\n-import {createPromptModule, ListChoiceOptions, prompt} from 'inquirer';\n-import * as inquirerAutocomplete from 'inquirer-autocomplete-prompt';\n+import {prompt} from 'inquirer';\n import {join} from 'path';\n import {Arguments} from 'yargs';\n \n@@ -33,47 +32,6 @@ export async function promptConfirm(message: string, defaultValue = false): Prom\n       .result;\n }\n \n-/** Prompts the user to select an option from a filterable autocomplete list. */\n-export async function promptAutocomplete(\n-    message: string, choices: (string|ListChoiceOptions)[]): Promise<string>;\n-/**\n- * Prompts the user to select an option from a filterable autocomplete list, with an option to\n- * choose no value.\n- */\n-export async function promptAutocomplete(\n-    message: string, choices: (string|ListChoiceOptions)[],\n-    noChoiceText?: string): Promise<string|false>;\n-export async function promptAutocomplete(\n-    message: string, choices: (string|ListChoiceOptions)[],\n-    noChoiceText?: string): Promise<string|false> {\n-  // Creates a local prompt module with an autocomplete prompt type.\n-  const prompt = createPromptModule({}).registerPrompt('autocomplete', inquirerAutocomplete);\n-  if (noChoiceText) {\n-    choices = [noChoiceText, ...choices];\n-  }\n-  // `prompt` must be cast as `any` as the autocomplete typings are not available.\n-  const result = (await (prompt as any)({\n-                   type: 'autocomplete',\n-                   name: 'result',\n-                   message,\n-                   source: (_: any, input: string) => {\n-                     if (!input) {\n-                       return Promise.resolve(choices);\n-                     }\n-                     return Promise.resolve(choices.filter(choice => {\n-                       if (typeof choice === 'string') {\n-                         return choice.includes(input);\n-                       }\n-                       return choice.name!.includes(input);\n-                     }));\n-                   }\n-                 })).result;\n-  if (result === noChoiceText) {\n-    return false;\n-  }\n-  return result;\n-}\n-\n /** Prompts the user for one line of input. */\n export async function promptInput(message: string): Promise<string> {\n   return (await prompt<{result: string}>({type: 'input', name: 'result', message})).result;"
        },
        {
            "sha": "5c1720f5241947f7ab5debc495a6dfdc8713c995",
            "filename": "package.json",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/5eb7f3491f37a8f71717525b0d0e901c00a8c4e8/package.json",
            "raw_url": "https://github.com/angular/angular/raw/5eb7f3491f37a8f71717525b0d0e901c00a8c4e8/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=5eb7f3491f37a8f71717525b0d0e901c00a8c4e8",
            "patch": "@@ -185,7 +185,6 @@\n     \"gulp-conventional-changelog\": \"^2.0.35\",\n     \"husky\": \"5.0.1\",\n     \"inquirer\": \"^7.3.3\",\n-    \"inquirer-autocomplete-prompt\": \"^1.0.2\",\n     \"karma-browserstack-launcher\": \"^1.3.0\",\n     \"karma-sauce-launcher\": \"^2.0.2\",\n     \"madge\": \"^3.6.0\","
        },
        {
            "sha": "39af85d71c35a3ce6cbd0a1de2181565d48b00a8",
            "filename": "yarn.lock",
            "status": "modified",
            "additions": 1,
            "deletions": 16,
            "changes": 17,
            "blob_url": "https://github.com/angular/angular/blob/5eb7f3491f37a8f71717525b0d0e901c00a8c4e8/yarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/5eb7f3491f37a8f71717525b0d0e901c00a8c4e8/yarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/yarn.lock?ref=5eb7f3491f37a8f71717525b0d0e901c00a8c4e8",
            "patch": "@@ -3108,7 +3108,7 @@ ansi-colors@^3.0.0:\n   resolved \"https://registry.yarnpkg.com/ansi-colors/-/ansi-colors-3.2.4.tgz#e3a3da4bfbae6c86a9c285625de124a234026fbf\"\n   integrity sha512-hHUXGagefjN2iRrID63xckIvotOXOojhQKWIPUZ4mNUZ9nLZW+7FMNoE1lOkEhNWYsx/7ysGIuJYCiMAA9FnrA==\n \n-ansi-escapes@^3.0.0, ansi-escapes@^3.1.0, ansi-escapes@^3.2.0:\n+ansi-escapes@^3.1.0, ansi-escapes@^3.2.0:\n   version \"3.2.0\"\n   resolved \"https://registry.yarnpkg.com/ansi-escapes/-/ansi-escapes-3.2.0.tgz#8780b98ff9dbf5638152d1f1fe5c1d7b4442976b\"\n   integrity sha512-cBhpre4ma+U0T1oM5fXg7Dy1Jw7zzwv7lt/GoCpr+hDQJoYnKVPLL4dCvSEFMmQurOQvSrwT7SL/DAlhBI97RQ==\n@@ -8631,16 +8631,6 @@ ini@^1.3.4:\n   resolved \"https://registry.yarnpkg.com/ini/-/ini-1.3.8.tgz#a29da425b48806f34767a4efce397269af28432c\"\n   integrity sha512-JV/yugV2uzW5iMRSiZAyDtQd+nxtUnjeLt0acNdw98kKLrvuRVyB80tsREOE7yvGVgalhZ6RNXCmEHkUKBKxew==\n \n-inquirer-autocomplete-prompt@^1.0.2:\n-  version \"1.0.2\"\n-  resolved \"https://registry.yarnpkg.com/inquirer-autocomplete-prompt/-/inquirer-autocomplete-prompt-1.0.2.tgz#3f2548f73dd12f0a541be055ea9c8c7aedeb42bf\"\n-  integrity sha512-vNmAhhrOQwPnUm4B9kz1UB7P98rVF1z8txnjp53r40N0PBCuqoRWqjg3Tl0yz0UkDg7rEUtZ2OZpNc7jnOU9Zw==\n-  dependencies:\n-    ansi-escapes \"^3.0.0\"\n-    chalk \"^2.0.0\"\n-    figures \"^2.0.0\"\n-    run-async \"^2.3.0\"\n-\n inquirer@7.3.3, inquirer@^7.3.3:\n   version \"7.3.3\"\n   resolved \"https://registry.yarnpkg.com/inquirer/-/inquirer-7.3.3.tgz#04d176b2af04afc157a83fd7c100e98ee0aad003\"\n@@ -13628,11 +13618,6 @@ run-async@^2.2.0, run-async@^2.4.0:\n   dependencies:\n     is-promise \"^2.1.0\"\n \n-run-async@^2.3.0:\n-  version \"2.4.1\"\n-  resolved \"https://registry.yarnpkg.com/run-async/-/run-async-2.4.1.tgz#8440eccf99ea3e70bd409d49aab88e10c189a455\"\n-  integrity sha512-tvVnVv01b8c1RrA6Ep7JkStj85Guv/YrMcwqYQnwjsAS2cTmmPGBBjAjpCW7RrSodNSoE2/qg9O4bceNvUuDgQ==\n-\n run-parallel@^1.1.9:\n   version \"1.1.9\"\n   resolved \"https://registry.yarnpkg.com/run-parallel/-/run-parallel-1.1.9.tgz#c9dd3a7cf9f4b2c4b6244e173a6ed866e61dd679\""
        }
    ],
    "stats": {
        "total": 510,
        "additions": 30,
        "deletions": 480
    }
}