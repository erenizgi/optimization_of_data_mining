{
    "author": "josephperrott",
    "message": "ci: remove saucelabs view engine tests (#43862)\n\nRemove the view engine specific saucelabs test job and associated tags/tooling as view engine is no longer being tested\non CI.\n\nPR Close #43862",
    "sha": "af1f8f84291b524d2bce7e36b080448192a7cd9f",
    "files": [
        {
            "sha": "1bc5ffb6656a3d6efeaed607d8334b8601f35df7",
            "filename": ".circleci/config.yml",
            "status": "modified",
            "additions": 4,
            "deletions": 37,
            "changes": 41,
            "blob_url": "https://github.com/angular/angular/blob/af1f8f84291b524d2bce7e36b080448192a7cd9f/.circleci%2Fconfig.yml",
            "raw_url": "https://github.com/angular/angular/raw/af1f8f84291b524d2bce7e36b080448192a7cd9f/.circleci%2Fconfig.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.circleci%2Fconfig.yml?ref=af1f8f84291b524d2bce7e36b080448192a7cd9f",
            "patch": "@@ -341,7 +341,7 @@ jobs:\n           destination: core/todo/bundle.br\n \n   # NOTE: This is currently limited to master builds only. See the `monitoring` configuration.\n-  saucelabs_view_engine:\n+  saucelabs:\n     executor:\n       name: default-executor\n       # In order to avoid the bottleneck of having a slow host machine, we acquire a better\n@@ -353,35 +353,11 @@ jobs:\n       - init_environment\n       - init_saucelabs_environment\n       - run:\n-          name: Run Bazel tests on Saucelabs with ViewEngine\n+          name: Run Bazel tests on Saucelabs\n           # See /tools/saucelabs/README.md for more info\n           command: |\n             yarn bazel run //tools/saucelabs:sauce_service_setup\n-            TESTS=$(./node_modules/.bin/bazelisk query --output label '(kind(karma_web_test, ...) intersect attr(\"tags\", \"saucelabs\", ...)) except attr(\"tags\", \"ivy-only\", ...) except attr(\"tags\", \"fixme-saucelabs-ve\", ...)')\n-            yarn bazel test --config=saucelabs --config=view-engine ${TESTS}\n-            yarn bazel run //tools/saucelabs:sauce_service_stop\n-          no_output_timeout: 40m\n-      - notify_webhook_on_fail:\n-          webhook_url_env_var: SLACK_DEV_INFRA_CI_FAILURES_WEBHOOK_URL\n-\n-  # NOTE: This is currently limited to master builds only. See the `monitoring` configuration.\n-  saucelabs_ivy:\n-    executor:\n-      name: default-executor\n-      # In order to avoid the bottleneck of having a slow host machine, we acquire a better\n-      # container for this job. This is necessary because we launch a lot of browsers concurrently\n-      # and therefore the tunnel and Karma need to process a lot of file requests and tests.\n-      resource_class: xlarge\n-    steps:\n-      - custom_attach_workspace\n-      - init_environment\n-      - init_saucelabs_environment\n-      - run:\n-          name: Run Bazel tests on Saucelabs with Ivy\n-          # See /tools/saucelabs/README.md for more info\n-          command: |\n-            yarn bazel run //tools/saucelabs:sauce_service_setup\n-            TESTS=$(./node_modules/.bin/bazelisk query --output label '(kind(karma_web_test, ...) intersect attr(\"tags\", \"saucelabs\", ...)) except attr(\"tags\", \"view-engine-only\", ...) except attr(\"tags\", \"fixme-saucelabs-ivy\", ...)')\n+            TESTS=$(./node_modules/.bin/bazelisk query --output label '(kind(karma_web_test, ...) intersect attr(\"tags\", \"saucelabs\", ...)) except attr(\"tags\", \"view-engine-only\", ...) except attr(\"tags\", \"fixme-saucelabs\", ...)')\n             yarn bazel test --config=saucelabs ${TESTS}\n             yarn bazel run //tools/saucelabs:sauce_service_stop\n           no_output_timeout: 40m\n@@ -888,16 +864,7 @@ workflows:\n       - aio_monitoring_next:\n           requires:\n             - setup\n-      - saucelabs_ivy:\n-          # Testing saucelabs via Bazel currently taking longer than the legacy saucelabs job as it\n-          # each karma_web_test target is provisioning and tearing down browsers which is adding\n-          # a lot of overhead. Running once daily on master only to avoid wasting resources and\n-          # slowing down CI for PRs.\n-          # TODO: Run this job on all branches (including PRs) once karma_web_test targets can\n-          # share provisioned browsers and we can remove the legacy saucelabs job.\n-          requires:\n-            - setup\n-      - saucelabs_view_engine:\n+      - saucelabs:\n           # Testing saucelabs via Bazel currently taking longer than the legacy saucelabs job as it\n           # each karma_web_test target is provisioning and tearing down browsers which is adding\n           # a lot of overhead. Running once daily on master only to avoid wasting resources and"
        },
        {
            "sha": "525cba5a0801df141aa7a08bc86e777b54d1c15a",
            "filename": "packages/forms/test/BUILD.bazel",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/af1f8f84291b524d2bce7e36b080448192a7cd9f/packages%2Fforms%2Ftest%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/af1f8f84291b524d2bce7e36b080448192a7cd9f/packages%2Fforms%2Ftest%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Ftest%2FBUILD.bazel?ref=af1f8f84291b524d2bce7e36b080448192a7cd9f",
            "patch": "@@ -42,7 +42,7 @@ karma_web_test_suite(\n         # IE 11.0.0 (Windows 8.1.0.0) template-driven forms integration tests basic functionality should report properties which are written outside of template bindings FAILED\n         #   InvalidStateError: InvalidStateError\n         # ```\n-        \"fixme-saucelabs-ivy\",\n+        \"fixme-saucelabs\",\n     ],\n     deps = [\n         \":test_lib\","
        },
        {
            "sha": "6da58ed2e65d0e9b0392ce7cce3125b928edc5b1",
            "filename": "tools/saucelabs/README.md",
            "status": "modified",
            "additions": 2,
            "deletions": 10,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/af1f8f84291b524d2bce7e36b080448192a7cd9f/tools%2Fsaucelabs%2FREADME.md",
            "raw_url": "https://github.com/angular/angular/raw/af1f8f84291b524d2bce7e36b080448192a7cd9f/tools%2Fsaucelabs%2FREADME.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/tools%2Fsaucelabs%2FREADME.md?ref=af1f8f84291b524d2bce7e36b080448192a7cd9f",
            "patch": "@@ -47,19 +47,11 @@ Note, this option will also prevent bazel from using the test cache and will for\n \n `bazel query` is required gather up all karma saucelabs test labels so they can be run in one command as they are tagged `manual`.\n \n-Running all ViewEngine karma tests in Saucelabs:\n+Running all karma tests in Saucelabs:\n \n ``` bash\n yarn bazel run //tools/saucelabs:sauce_service_setup\n-TESTS=$(./node_modules/.bin/bazelisk query --output label '(kind(karma_web_test, ...) intersect attr(\"tags\", \"saucelabs\", ...)) except attr(\"tags\", \"ivy-only\", ...) except attr(\"tags\", \"fixme-saucelabs-ve\", ...)')\n-yarn bazel test --config=saucelabs --config=view-engine ${TESTS}\n-```\n-\n-Running all Ivy karma tests in Saucelabs:\n-\n-``` bash\n-yarn bazel run //tools/saucelabs:sauce_service_setup\n-TESTS=$(./node_modules/.bin/bazelisk query --output label '(kind(karma_web_test, ...) intersect attr(\"tags\", \"saucelabs\", ...)) except attr(\"tags\", \"view-engine-only\", ...) except attr(\"tags\", \"fixme-saucelabs-ivy\", ...)')\n+TESTS=$(./node_modules/.bin/bazelisk query --output label '(kind(karma_web_test, ...) intersect attr(\"tags\", \"saucelabs\", ...)) except attr(\"tags\", \"view-engine-only\", ...) except attr(\"tags\", \"fixme-saucelabs\", ...)')\n yarn bazel test --config=saucelabs ${TESTS}\n ```\n "
        }
    ],
    "stats": {
        "total": 55,
        "additions": 7,
        "deletions": 48
    }
}