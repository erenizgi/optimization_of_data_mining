{
    "author": "JiaLiPassion",
    "message": "fix(zone.js): patch nodejs EventEmtter.prototype.off (#37863)\n\nClose #35473\n\nzone.js nodejs patch should also patch `EventEmitter.prototype.off` as `removeListener`.\nSo `off` can correctly remove the listeners added by `EventEmitter.prototype.addListener`\n\nPR Close #37863",
    "sha": "1822cbcd46653ef1507a5a5be831431f2560b289",
    "files": [
        {
            "sha": "f09f8a42167a559b61035247180a385b3a2f8a62",
            "filename": "packages/zone.js/lib/node/events.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/1822cbcd46653ef1507a5a5be831431f2560b289/packages%2Fzone.js%2Flib%2Fnode%2Fevents.ts",
            "raw_url": "https://github.com/angular/angular/raw/1822cbcd46653ef1507a5a5be831431f2560b289/packages%2Fzone.js%2Flib%2Fnode%2Fevents.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Flib%2Fnode%2Fevents.ts?ref=1822cbcd46653ef1507a5a5be831431f2560b289",
            "patch": "@@ -16,6 +16,7 @@ Zone.__load_patch('EventEmitter', (global: any) => {\n   const EE_REMOVE_ALL_LISTENER = 'removeAllListeners';\n   const EE_LISTENERS = 'listeners';\n   const EE_ON = 'on';\n+  const EE_OFF = 'off';\n \n   const compareTaskCallbackVsDelegate = function(task: any, delegate: any) {\n     // same callback, same capture, same event name, just return\n@@ -47,6 +48,7 @@ Zone.__load_patch('EventEmitter', (global: any) => {\n     });\n     if (result && result[0]) {\n       obj[EE_ON] = obj[EE_ADD_LISTENER];\n+      obj[EE_OFF] = obj[EE_REMOVE_LISTENER];\n     }\n   }\n "
        },
        {
            "sha": "9cab424169c5ac1494c0399c48f84e3e59247f75",
            "filename": "packages/zone.js/test/node/events.spec.ts",
            "status": "modified",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/1822cbcd46653ef1507a5a5be831431f2560b289/packages%2Fzone.js%2Ftest%2Fnode%2Fevents.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/1822cbcd46653ef1507a5a5be831431f2560b289/packages%2Fzone.js%2Ftest%2Fnode%2Fevents.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Ftest%2Fnode%2Fevents.spec.ts?ref=1822cbcd46653ef1507a5a5be831431f2560b289",
            "patch": "@@ -66,6 +66,18 @@ describe('nodejs EventEmitter', () => {\n       emitter.emit('test2', 'test value');\n     });\n   });\n+  it('should remove listeners by calling off properly', () => {\n+    zoneA.run(() => {\n+      emitter.on('test', shouldNotRun);\n+      emitter.on('test2', shouldNotRun);\n+      emitter.off('test', shouldNotRun);\n+    });\n+    zoneB.run(() => {\n+      emitter.off('test2', shouldNotRun);\n+      emitter.emit('test', 'test value');\n+      emitter.emit('test2', 'test value');\n+    });\n+  });\n   it('remove listener should return event emitter', () => {\n     zoneA.run(() => {\n       emitter.on('test', shouldNotRun);"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 14,
        "deletions": 0
    }
}