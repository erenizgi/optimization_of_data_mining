{
    "author": "gkalpak",
    "message": "refactor(docs-infra): make angular.io and docs examples compatible with RxJS v7 (#42660)\n\nThis commit applies the necessary changes to make angular.io and (most)\ndocs examples compatible with both RxJS v6 and v7. It also adds new\nsteps to relevant CI jobs to test angular.io and docs examples against\nRxJS v7 as well (to catch potential regressions).\n\nNOTE:\nSome of the docs examples are not compatible with RxJS v7 and are\ntherefore excluded from the tests. The SystemJS-based ngUpgrade\nexamples in particular are excluded, since they require a different\nSystemJS configs to run against RxJS v6 and v7 and the extra complexity\nof managing that is not worth it for the 4 affected examples.\n\nPR Close #42660",
    "sha": "02742552f3e05b19c2915235d62fbc570a24c667",
    "files": [
        {
            "sha": "2997e4006ea7ea73602c9e3a34fa220fec0fca12",
            "filename": ".circleci/config.yml",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/02742552f3e05b19c2915235d62fbc570a24c667/.circleci%2Fconfig.yml",
            "raw_url": "https://github.com/angular/angular/raw/02742552f3e05b19c2915235d62fbc570a24c667/.circleci%2Fconfig.yml",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/.circleci%2Fconfig.yml?ref=02742552f3e05b19c2915235d62fbc570a24c667",
            "patch": "@@ -441,6 +441,9 @@ jobs:\n       - run: yarn --cwd aio test-pwa-score-localhost $CI_AIO_MIN_PWA_SCORE\n         # Check the bundle sizes.\n       - run: yarn --cwd aio payload-size aio-local\n+        # Run tests with RxJS v7.\n+      - run: yarn --cwd aio add rxjs@7.1.0\n+      - run: yarn --cwd aio test --progress=false --watch=false\n \n   test_aio_tools:\n     executor: default-executor\n@@ -469,6 +472,10 @@ jobs:\n         # Since the parallelism is set to \"5\", there will be five parallel CircleCI containers.\n         # with either \"0\", \"1\", etc as node index. This can be passed to the \"--shard\" argument.\n       - run: yarn --cwd aio example-e2e --setup --local --cliSpecsConcurrency=5 --shard=${CIRCLE_NODE_INDEX}/${CIRCLE_NODE_TOTAL}\n+        # Run tests with RxJS v7.\n+        # (Exclude some examples that are not yet compatible with v7.)\n+      - run: yarn --cwd aio/tools/examples/shared add rxjs@7.1.0 && yarn --cwd aio boilerplate:add\n+      - run: yarn --cwd aio example-e2e --cliSpecsConcurrency=5 --shard=${CIRCLE_NODE_INDEX}/${CIRCLE_NODE_TOTAL} --exclude=practical-observable-usage --exclude=upgrade-module --exclude=upgrade-phonecat\n \n   # This job should only be run on PR builds, where `CI_PULL_REQUEST` is not `false`.\n   aio_preview:"
        },
        {
            "sha": "c14a7b86ab5296ff75dbd391c871b5a3e8a04955",
            "filename": "aio/content/examples/elements/src/app/popup.component.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/02742552f3e05b19c2915235d62fbc570a24c667/aio%2Fcontent%2Fexamples%2Felements%2Fsrc%2Fapp%2Fpopup.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/02742552f3e05b19c2915235d62fbc570a24c667/aio%2Fcontent%2Fexamples%2Felements%2Fsrc%2Fapp%2Fpopup.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Felements%2Fsrc%2Fapp%2Fpopup.component.ts?ref=02742552f3e05b19c2915235d62fbc570a24c667",
            "patch": "@@ -50,5 +50,5 @@ export class PopupComponent {\n   private _message = '';\n \n   @Output()\n-  closed = new EventEmitter();\n+  closed = new EventEmitter<void>();\n }"
        },
        {
            "sha": "2e7bd5817106848cf7cafc2cf338a6ea0c7fba33",
            "filename": "aio/src/app/custom-elements/api/api.service.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/02742552f3e05b19c2915235d62fbc570a24c667/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fapi%2Fapi.service.ts",
            "raw_url": "https://github.com/angular/angular/raw/02742552f3e05b19c2915235d62fbc570a24c667/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fapi%2Fapi.service.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fcustom-elements%2Fapi%2Fapi.service.ts?ref=02742552f3e05b19c2915235d62fbc570a24c667",
            "patch": "@@ -30,7 +30,7 @@ export class ApiService implements OnDestroy {\n   private apiBase = DOC_CONTENT_URL_PREFIX + 'api/';\n   private apiListJsonDefault = 'api-list.json';\n   private firstTime = true;\n-  private onDestroy = new Subject();\n+  private onDestroy = new Subject<void>();\n   private sectionsSubject = new ReplaySubject<ApiSection[]>(1);\n   private _sections = this.sectionsSubject.pipe(takeUntil(this.onDestroy));\n "
        },
        {
            "sha": "9883ffb44104bddee8b4c43380618f57da9029bc",
            "filename": "aio/src/app/custom-elements/toc/toc.component.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/02742552f3e05b19c2915235d62fbc570a24c667/aio%2Fsrc%2Fapp%2Fcustom-elements%2Ftoc%2Ftoc.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/02742552f3e05b19c2915235d62fbc570a24c667/aio%2Fsrc%2Fapp%2Fcustom-elements%2Ftoc%2Ftoc.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fcustom-elements%2Ftoc%2Ftoc.component.ts?ref=02742552f3e05b19c2915235d62fbc570a24c667",
            "patch": "@@ -19,7 +19,7 @@ export class TocComponent implements OnInit, AfterViewInit, OnDestroy {\n   isCollapsed = true;\n   isEmbedded = false;\n   @ViewChildren('tocItem') private items: QueryList<ElementRef>;\n-  private onDestroy = new Subject();\n+  private onDestroy = new Subject<void>();\n   primaryMax = 4;\n   tocList: TocItem[];\n "
        },
        {
            "sha": "ac6920d2725b1b03d526e4b30eb20a465b2b3eba",
            "filename": "aio/src/app/layout/notification/notification.component.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/02742552f3e05b19c2915235d62fbc570a24c667/aio%2Fsrc%2Fapp%2Flayout%2Fnotification%2Fnotification.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/02742552f3e05b19c2915235d62fbc570a24c667/aio%2Fsrc%2Fapp%2Flayout%2Fnotification%2Fnotification.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Flayout%2Fnotification%2Fnotification.component.ts?ref=02742552f3e05b19c2915235d62fbc570a24c667",
            "patch": "@@ -23,7 +23,7 @@ export class NotificationComponent implements OnInit {\n   @Input() dismissOnContentClick: boolean;\n   @Input() notificationId: string;\n   @Input() expirationDate: string;\n-  @Output() dismissed = new EventEmitter();\n+  @Output() dismissed = new EventEmitter<void>();\n \n   @HostBinding('@hideAnimation')\n   showNotification: 'show'|'hide';"
        },
        {
            "sha": "c44aad1f94162048f03558a083d6664fbf1ae7c8",
            "filename": "aio/src/app/shared/scroll-spy.service.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/02742552f3e05b19c2915235d62fbc570a24c667/aio%2Fsrc%2Fapp%2Fshared%2Fscroll-spy.service.ts",
            "raw_url": "https://github.com/angular/angular/raw/02742552f3e05b19c2915235d62fbc570a24c667/aio%2Fsrc%2Fapp%2Fshared%2Fscroll-spy.service.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fshared%2Fscroll-spy.service.ts?ref=02742552f3e05b19c2915235d62fbc570a24c667",
            "patch": "@@ -118,7 +118,7 @@ export class ScrollSpiedElementGroup {\n @Injectable()\n export class ScrollSpyService {\n   private spiedElementGroups: ScrollSpiedElementGroup[] = [];\n-  private onStopListening = new Subject();\n+  private onStopListening = new Subject<void>();\n   private resizeEvents = fromEvent(window, 'resize').pipe(auditTime(300), takeUntil(this.onStopListening));\n   private scrollEvents = fromEvent(window, 'scroll').pipe(auditTime(10), takeUntil(this.onStopListening));\n   private lastContentHeight: number;"
        }
    ],
    "stats": {
        "total": 17,
        "additions": 12,
        "deletions": 5
    }
}