{
    "author": "thePunderWoman",
    "message": "refactor(core): renames checkNoChangesMode to be clearer (#39277)\n\ngetCheckNoChangesMode was discovered to be unclear as to the purpose of\nit. This refactor is a simple renaming to make it much clearer what that\nmethod and property does.\n\nPR Close #39277",
    "sha": "a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538",
    "files": [
        {
            "sha": "b81e2daf23e146d93163198d98b885da92e82346",
            "filename": "packages/core/src/render3/bindings.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Fsrc%2Frender3%2Fbindings.ts",
            "raw_url": "https://github.com/angular/angular/raw/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Fsrc%2Frender3%2Fbindings.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fbindings.ts?ref=a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538",
            "patch": "@@ -11,7 +11,7 @@ import {assertIndexInRange, assertLessThan, assertNotSame} from '../util/assert'\n \n import {getExpressionChangedErrorDetails, throwErrorIfNoChangesMode} from './errors';\n import {LView} from './interfaces/view';\n-import {getCheckNoChangesMode} from './state';\n+import {isInCheckNoChangesMode} from './state';\n import {NO_CHANGE} from './tokens';\n \n \n@@ -52,7 +52,7 @@ export function bindingUpdated(lView: LView, bindingIndex: number, value: any):\n   if (Object.is(oldValue, value)) {\n     return false;\n   } else {\n-    if (ngDevMode && getCheckNoChangesMode()) {\n+    if (ngDevMode && isInCheckNoChangesMode()) {\n       // View engine didn't report undefined values as changed on the first checkNoChanges pass\n       // (before the change detection was run).\n       const oldValueToCompare = oldValue !== NO_CHANGE ? oldValue : undefined;"
        },
        {
            "sha": "bd08fdcaabbec784de5cbb206c430e64b2211a26",
            "filename": "packages/core/src/render3/hooks.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Fsrc%2Frender3%2Fhooks.ts",
            "raw_url": "https://github.com/angular/angular/raw/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Fsrc%2Frender3%2Fhooks.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fhooks.ts?ref=a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538",
            "patch": "@@ -13,7 +13,7 @@ import {NgOnChangesFeatureImpl} from './features/ng_onchanges_feature';\n import {DirectiveDef} from './interfaces/definition';\n import {TNode} from './interfaces/node';\n import {FLAGS, HookData, InitPhaseState, LView, LViewFlags, PREORDER_HOOK_FLAGS, PreOrderHookFlags, TView} from './interfaces/view';\n-import {getCheckNoChangesMode} from './state';\n+import {isInCheckNoChangesMode} from './state';\n \n \n \n@@ -205,8 +205,8 @@ function callHooks(\n     currentNodeIndex: number|null|undefined): void {\n   ngDevMode &&\n       assertEqual(\n-          getCheckNoChangesMode(), false,\n-          'Hooks should never be run in the check no changes mode.');\n+          isInCheckNoChangesMode(), false,\n+          'Hooks should never be run when in check no changes mode.');\n   const startIndex = currentNodeIndex !== undefined ?\n       (currentView[PREORDER_HOOK_FLAGS] & PreOrderHookFlags.IndexOfTheNextPreOrderHookMaskMask) :\n       0;"
        },
        {
            "sha": "0a037b18af446a17301df43007d99f6c4abb1fd9",
            "filename": "packages/core/src/render3/instructions/advance.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fadvance.ts",
            "raw_url": "https://github.com/angular/angular/raw/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fadvance.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fadvance.ts?ref=a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538",
            "patch": "@@ -8,7 +8,7 @@\n import {assertGreaterThan, assertIndexInRange} from '../../util/assert';\n import {executeCheckHooks, executeInitAndCheckHooks} from '../hooks';\n import {FLAGS, HEADER_OFFSET, InitPhaseState, LView, LViewFlags, TView} from '../interfaces/view';\n-import {getCheckNoChangesMode, getLView, getSelectedIndex, getTView, setSelectedIndex} from '../state';\n+import {getLView, getSelectedIndex, getTView, isInCheckNoChangesMode, setSelectedIndex} from '../state';\n \n \n /**\n@@ -36,7 +36,7 @@ import {getCheckNoChangesMode, getLView, getSelectedIndex, getTView, setSelected\n  */\n export function ɵɵadvance(delta: number): void {\n   ngDevMode && assertGreaterThan(delta, 0, 'Can only advance forward');\n-  selectIndexInternal(getTView(), getLView(), getSelectedIndex() + delta, getCheckNoChangesMode());\n+  selectIndexInternal(getTView(), getLView(), getSelectedIndex() + delta, isInCheckNoChangesMode());\n }\n \n export function selectIndexInternal("
        },
        {
            "sha": "a234772125b1e970f338c2cdc598e444d3ad881b",
            "filename": "packages/core/src/render3/instructions/shared.ts",
            "status": "modified",
            "additions": 14,
            "deletions": 12,
            "changes": 26,
            "blob_url": "https://github.com/angular/angular/blob/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fshared.ts",
            "raw_url": "https://github.com/angular/angular/raw/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fshared.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fshared.ts?ref=a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538",
            "patch": "@@ -33,7 +33,7 @@ import {isComponentDef, isComponentHost, isContentQueryHost, isLContainer, isRoo\n import {CHILD_HEAD, CHILD_TAIL, CLEANUP, CONTEXT, DECLARATION_COMPONENT_VIEW, DECLARATION_VIEW, FLAGS, HEADER_OFFSET, HOST, InitPhaseState, INJECTOR, LView, LViewFlags, NEXT, PARENT, RENDERER, RENDERER_FACTORY, RootContext, RootContextFlags, SANITIZER, T_HOST, TData, TRANSPLANTED_VIEWS_TO_REFRESH, TVIEW, TView, TViewType} from '../interfaces/view';\n import {assertNodeNotOfTypes, assertNodeOfPossibleTypes} from '../node_assert';\n import {isInlineTemplate, isNodeMatchingSelectorList} from '../node_selector_matcher';\n-import {enterView, getBindingsEnabled, getCheckNoChangesMode, getCurrentDirectiveIndex, getCurrentTNode, getSelectedIndex, isCurrentTNodeParent, leaveView, setBindingIndex, setBindingRootForHostBindings, setCheckNoChangesMode, setCurrentDirectiveIndex, setCurrentQueryIndex, setCurrentTNode, setSelectedIndex} from '../state';\n+import {enterView, getBindingsEnabled, getCurrentDirectiveIndex, getCurrentTNode, getSelectedIndex, isCurrentTNodeParent, isInCheckNoChangesMode, leaveView, setBindingIndex, setBindingRootForHostBindings, setCurrentDirectiveIndex, setCurrentQueryIndex, setCurrentTNode, setIsInCheckNoChangesMode, setSelectedIndex} from '../state';\n import {NO_CHANGE} from '../tokens';\n import {isAnimationProp, mergeHostAttrs} from '../util/attrs_utils';\n import {INTERPOLATION_DELIMITER, renderStringify, stringifyForError} from '../util/misc_utils';\n@@ -383,7 +383,9 @@ export function refreshView<T>(\n   const flags = lView[FLAGS];\n   if ((flags & LViewFlags.Destroyed) === LViewFlags.Destroyed) return;\n   enterView(lView);\n-  const checkNoChangesMode = getCheckNoChangesMode();\n+  // Check no changes mode is a dev only mode used to verify that bindings have not changed\n+  // since they were assigned. We do not want to execute lifecycle hooks in that mode.\n+  const isInCheckNoChangesPass = isInCheckNoChangesMode();\n   try {\n     resetPreOrderHookFlags(lView);\n \n@@ -397,7 +399,7 @@ export function refreshView<T>(\n \n     // execute pre-order hooks (OnInit, OnChanges, DoCheck)\n     // PERF WARNING: do NOT extract this to a separate function without running benchmarks\n-    if (!checkNoChangesMode) {\n+    if (!isInCheckNoChangesPass) {\n       if (hooksInitPhaseCompleted) {\n         const preOrderCheckHooks = tView.preOrderCheckHooks;\n         if (preOrderCheckHooks !== null) {\n@@ -425,7 +427,7 @@ export function refreshView<T>(\n \n     // execute content hooks (AfterContentInit, AfterContentChecked)\n     // PERF WARNING: do NOT extract this to a separate function without running benchmarks\n-    if (!checkNoChangesMode) {\n+    if (!isInCheckNoChangesPass) {\n       if (hooksInitPhaseCompleted) {\n         const contentCheckHooks = tView.contentCheckHooks;\n         if (contentCheckHooks !== null) {\n@@ -459,7 +461,7 @@ export function refreshView<T>(\n \n     // execute view hooks (AfterViewInit, AfterViewChecked)\n     // PERF WARNING: do NOT extract this to a separate function without running benchmarks\n-    if (!checkNoChangesMode) {\n+    if (!isInCheckNoChangesPass) {\n       if (hooksInitPhaseCompleted) {\n         const viewCheckHooks = tView.viewCheckHooks;\n         if (viewCheckHooks !== null) {\n@@ -489,7 +491,7 @@ export function refreshView<T>(\n     // refresh a `NgClass` binding should work. If we would reset the dirty state in the check\n     // no changes cycle, the component would be not be dirty for the next update pass. This would\n     // be different in production mode where the component dirty state is not reset.\n-    if (!checkNoChangesMode) {\n+    if (!isInCheckNoChangesPass) {\n       lView[FLAGS] &= ~(LViewFlags.Dirty | LViewFlags.FirstLViewPass);\n     }\n     if (lView[FLAGS] & LViewFlags.RefreshTransplantedView) {\n@@ -504,7 +506,7 @@ export function refreshView<T>(\n export function renderComponentOrTemplate<T>(\n     tView: TView, lView: LView, templateFn: ComponentTemplate<{}>|null, context: T) {\n   const rendererFactory = lView[RENDERER_FACTORY];\n-  const normalExecutionPath = !getCheckNoChangesMode();\n+  const normalExecutionPath = !isInCheckNoChangesMode();\n   const creationModeIsActive = isCreationMode(lView);\n   try {\n     if (normalExecutionPath && !creationModeIsActive && rendererFactory.begin) {\n@@ -529,7 +531,7 @@ function executeTemplate<T>(\n     if (rf & RenderFlags.Update && lView.length > HEADER_OFFSET) {\n       // When we're updating, inherently select 0 so we don't\n       // have to generate that instruction for most update blocks.\n-      selectIndexInternal(tView, lView, 0, getCheckNoChangesMode());\n+      selectIndexInternal(tView, lView, 0, isInCheckNoChangesMode());\n     }\n     templateFn(rf, context);\n   } finally {\n@@ -1918,11 +1920,11 @@ export function detectChangesInRootView(lView: LView): void {\n }\n \n export function checkNoChangesInternal<T>(tView: TView, view: LView, context: T) {\n-  setCheckNoChangesMode(true);\n+  setIsInCheckNoChangesMode(true);\n   try {\n     detectChangesInternal(tView, view, context);\n   } finally {\n-    setCheckNoChangesMode(false);\n+    setIsInCheckNoChangesMode(false);\n   }\n }\n \n@@ -1936,11 +1938,11 @@ export function checkNoChangesInternal<T>(tView: TView, view: LView, context: T)\n  * @param lView The view which the change detection should be checked on.\n  */\n export function checkNoChangesInRootView(lView: LView): void {\n-  setCheckNoChangesMode(true);\n+  setIsInCheckNoChangesMode(true);\n   try {\n     detectChangesInRootView(lView);\n   } finally {\n-    setCheckNoChangesMode(false);\n+    setIsInCheckNoChangesMode(false);\n   }\n }\n "
        },
        {
            "sha": "453a4679ca844253d8c44427459d399d87e53724",
            "filename": "packages/core/src/render3/state.ts",
            "status": "modified",
            "additions": 9,
            "deletions": 6,
            "changes": 15,
            "blob_url": "https://github.com/angular/angular/blob/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Fsrc%2Frender3%2Fstate.ts",
            "raw_url": "https://github.com/angular/angular/raw/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Fsrc%2Frender3%2Fstate.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fstate.ts?ref=a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538",
            "patch": "@@ -159,14 +159,17 @@ interface InstructionState {\n    * In this mode, any changes in bindings will throw an ExpressionChangedAfterChecked error.\n    *\n    * Necessary to support ChangeDetectorRef.checkNoChanges().\n+   *\n+   * checkNoChanges Runs only in devmode=true and verifies that no unintended changes exist in\n+   * the change detector or its children.\n    */\n-  checkNoChangesMode: boolean;\n+  isInCheckNoChangesMode: boolean;\n }\n \n export const instructionState: InstructionState = {\n   lFrame: createLFrame(null),\n   bindingsEnabled: true,\n-  checkNoChangesMode: false,\n+  isInCheckNoChangesMode: false,\n };\n \n \n@@ -287,13 +290,13 @@ export function getContextLView(): LView {\n   return instructionState.lFrame.contextLView;\n }\n \n-export function getCheckNoChangesMode(): boolean {\n+export function isInCheckNoChangesMode(): boolean {\n   // TODO(misko): remove this from the LView since it is ngDevMode=true mode only.\n-  return instructionState.checkNoChangesMode;\n+  return instructionState.isInCheckNoChangesMode;\n }\n \n-export function setCheckNoChangesMode(mode: boolean): void {\n-  instructionState.checkNoChangesMode = mode;\n+export function setIsInCheckNoChangesMode(mode: boolean): void {\n+  instructionState.isInCheckNoChangesMode = mode;\n }\n \n // top level variables should not be exported for performance reasons (PERF_NOTES.md)"
        },
        {
            "sha": "d728771a54f5fd7774839f8b94fb7a916df51f43",
            "filename": "packages/core/test/bundling/cyclic_import/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Ftest%2Fbundling%2Fcyclic_import%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Ftest%2Fbundling%2Fcyclic_import%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Fcyclic_import%2Fbundle.golden_symbols.json?ref=a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538",
            "patch": "@@ -156,7 +156,7 @@\n     \"name\": \"generatePropertyAliases\"\n   },\n   {\n-    \"name\": \"getCheckNoChangesMode\"\n+    \"name\": \"isInCheckNoChangesMode\"\n   },\n   {\n     \"name\": \"getClosureSafeProperty\""
        },
        {
            "sha": "e8ecdcc6bb0e441f535e9e7939cc9743ef96bec7",
            "filename": "packages/core/test/bundling/forms/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json?ref=a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538",
            "patch": "@@ -948,7 +948,7 @@\n     \"name\": \"generatePropertyAliases\"\n   },\n   {\n-    \"name\": \"getCheckNoChangesMode\"\n+    \"name\": \"isInCheckNoChangesMode\"\n   },\n   {\n     \"name\": \"getClosureSafeProperty\"\n@@ -1485,7 +1485,7 @@\n     \"name\": \"setBindingRootForHostBindings\"\n   },\n   {\n-    \"name\": \"setCheckNoChangesMode\"\n+    \"name\": \"setIsInCheckNoChangesMode\"\n   },\n   {\n     \"name\": \"setCurrentDirectiveIndex\""
        },
        {
            "sha": "f9022bcdb96655b23b52786eb6b4dec004aa08b9",
            "filename": "packages/core/test/bundling/hello_world/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Ftest%2Fbundling%2Fhello_world%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Ftest%2Fbundling%2Fhello_world%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Fhello_world%2Fbundle.golden_symbols.json?ref=a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538",
            "patch": "@@ -108,7 +108,7 @@\n     \"name\": \"extractPipeDef\"\n   },\n   {\n-    \"name\": \"getCheckNoChangesMode\"\n+    \"name\": \"isInCheckNoChangesMode\"\n   },\n   {\n     \"name\": \"getClosureSafeProperty\""
        },
        {
            "sha": "8f93e8055fa2252480db215c25c19bc0ded0afd8",
            "filename": "packages/core/test/bundling/router/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Ftest%2Fbundling%2Frouter%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Ftest%2Fbundling%2Frouter%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Frouter%2Fbundle.golden_symbols.json?ref=a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538",
            "patch": "@@ -1260,7 +1260,7 @@\n     \"name\": \"getBootstrapListener\"\n   },\n   {\n-    \"name\": \"getCheckNoChangesMode\"\n+    \"name\": \"isInCheckNoChangesMode\"\n   },\n   {\n     \"name\": \"getClosureSafeProperty\"\n@@ -1818,7 +1818,7 @@\n     \"name\": \"setBindingRootForHostBindings\"\n   },\n   {\n-    \"name\": \"setCheckNoChangesMode\"\n+    \"name\": \"setIsInCheckNoChangesMode\"\n   },\n   {\n     \"name\": \"setCurrentDirectiveIndex\""
        },
        {
            "sha": "e6a729ac4d2e8ab112f04d18722aa9b101c3aa9c",
            "filename": "packages/core/test/bundling/todo/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json?ref=a3812c6cbdaa5d4e6e1ea03e5edd031b7a331538",
            "patch": "@@ -330,7 +330,7 @@\n     \"name\": \"generatePropertyAliases\"\n   },\n   {\n-    \"name\": \"getCheckNoChangesMode\"\n+    \"name\": \"isInCheckNoChangesMode\"\n   },\n   {\n     \"name\": \"getClosureSafeProperty\"\n@@ -642,7 +642,7 @@\n     \"name\": \"setBindingRootForHostBindings\"\n   },\n   {\n-    \"name\": \"setCheckNoChangesMode\"\n+    \"name\": \"setIsInCheckNoChangesMode\"\n   },\n   {\n     \"name\": \"setCurrentDirectiveIndex\""
        }
    ],
    "stats": {
        "total": 71,
        "additions": 38,
        "deletions": 33
    }
}