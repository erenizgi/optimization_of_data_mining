{
    "author": "AndrewKushnir",
    "message": "refactor(forms): add base class for all built-in ControlValueAccessors (#41225)\n\nThis commit adds a base class that contains common logic for all ControlValueAccessors defined in Forms package. This allows to remove duplicated logic from all built-in ControlValueAccessor classes.\n\nPR Close #41225",
    "sha": "51bb922a081a1059929cb549ffbc3cf1d1366e2a",
    "files": [
        {
            "sha": "34271f8e13395fa92bf65fa893eef2750878b0a6",
            "filename": "goldens/public-api/forms/forms.d.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 45,
            "changes": 56,
            "blob_url": "https://github.com/angular/angular/blob/51bb922a081a1059929cb549ffbc3cf1d1366e2a/goldens%2Fpublic-api%2Fforms%2Fforms.d.ts",
            "raw_url": "https://github.com/angular/angular/raw/51bb922a081a1059929cb549ffbc3cf1d1366e2a/goldens%2Fpublic-api%2Fforms%2Fforms.d.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fpublic-api%2Fforms%2Fforms.d.ts?ref=51bb922a081a1059929cb549ffbc3cf1d1366e2a",
            "patch": "@@ -112,13 +112,7 @@ export declare interface AsyncValidatorFn {\n     (control: AbstractControl): Promise<ValidationErrors | null> | Observable<ValidationErrors | null>;\n }\n \n-export declare class CheckboxControlValueAccessor extends ɵangular_packages_forms_forms_f implements ControlValueAccessor {\n-    onChange: (_: any) => void;\n-    onTouched: () => void;\n-    constructor(_renderer: Renderer2, _elementRef: ElementRef);\n-    registerOnChange(fn: (_: any) => {}): void;\n-    registerOnTouched(fn: () => {}): void;\n-    setDisabledState(isDisabled: boolean): void;\n+export declare class CheckboxControlValueAccessor extends ɵangular_packages_forms_forms_g implements ControlValueAccessor {\n     writeValue(value: any): void;\n }\n \n@@ -141,13 +135,8 @@ export declare interface ControlValueAccessor {\n     writeValue(obj: any): void;\n }\n \n-export declare class DefaultValueAccessor implements ControlValueAccessor {\n-    onChange: (_: any) => void;\n-    onTouched: () => void;\n-    constructor(_renderer: Renderer2, _elementRef: ElementRef, _compositionMode: boolean);\n-    registerOnChange(fn: (_: any) => void): void;\n-    registerOnTouched(fn: () => void): void;\n-    setDisabledState(isDisabled: boolean): void;\n+export declare class DefaultValueAccessor extends ɵangular_packages_forms_forms_f implements ControlValueAccessor {\n+    constructor(renderer: Renderer2, elementRef: ElementRef, _compositionMode: boolean);\n     writeValue(value: any): void;\n }\n \n@@ -382,11 +371,11 @@ export declare abstract class NgControl extends AbstractControlDirective {\n     abstract viewToModelUpdate(newValue: any): void;\n }\n \n-export declare class NgControlStatus extends ɵangular_packages_forms_forms_h {\n+export declare class NgControlStatus extends ɵangular_packages_forms_forms_i {\n     constructor(cd: NgControl);\n }\n \n-export declare class NgControlStatusGroup extends ɵangular_packages_forms_forms_h {\n+export declare class NgControlStatusGroup extends ɵangular_packages_forms_forms_i {\n     constructor(cd: ControlContainer);\n }\n \n@@ -454,13 +443,8 @@ export declare class NgSelectOption implements OnDestroy {\n     ngOnDestroy(): void;\n }\n \n-export declare class NumberValueAccessor extends ɵangular_packages_forms_forms_f implements ControlValueAccessor {\n-    onChange: (_: any) => void;\n-    onTouched: () => void;\n-    constructor(_renderer: Renderer2, _elementRef: ElementRef);\n+export declare class NumberValueAccessor extends ɵangular_packages_forms_forms_g implements ControlValueAccessor {\n     registerOnChange(fn: (_: number | null) => void): void;\n-    registerOnTouched(fn: () => void): void;\n-    setDisabledState(isDisabled: boolean): void;\n     writeValue(value: number): void;\n }\n \n@@ -471,29 +455,21 @@ export declare class PatternValidator implements Validator, OnChanges {\n     validate(control: AbstractControl): ValidationErrors | null;\n }\n \n-export declare class RadioControlValueAccessor extends ɵangular_packages_forms_forms_f implements ControlValueAccessor, OnDestroy, OnInit {\n+export declare class RadioControlValueAccessor extends ɵangular_packages_forms_forms_g implements ControlValueAccessor, OnDestroy, OnInit {\n     formControlName: string;\n     name: string;\n     onChange: () => void;\n-    onTouched: () => void;\n     value: any;\n-    constructor(_renderer: Renderer2, _elementRef: ElementRef, _registry: ɵangular_packages_forms_forms_p, _injector: Injector);\n+    constructor(renderer: Renderer2, elementRef: ElementRef, _registry: ɵangular_packages_forms_forms_q, _injector: Injector);\n     fireUncheck(value: any): void;\n     ngOnDestroy(): void;\n     ngOnInit(): void;\n     registerOnChange(fn: (_: any) => {}): void;\n-    registerOnTouched(fn: () => {}): void;\n-    setDisabledState(isDisabled: boolean): void;\n     writeValue(value: any): void;\n }\n \n-export declare class RangeValueAccessor extends ɵangular_packages_forms_forms_f implements ControlValueAccessor {\n-    onChange: (_: any) => void;\n-    onTouched: () => void;\n-    constructor(_renderer: Renderer2, _elementRef: ElementRef);\n+export declare class RangeValueAccessor extends ɵangular_packages_forms_forms_g implements ControlValueAccessor {\n     registerOnChange(fn: (_: number | null) => void): void;\n-    registerOnTouched(fn: () => void): void;\n-    setDisabledState(isDisabled: boolean): void;\n     writeValue(value: any): void;\n }\n \n@@ -509,27 +485,17 @@ export declare class RequiredValidator implements Validator {\n     validate(control: AbstractControl): ValidationErrors | null;\n }\n \n-export declare class SelectControlValueAccessor extends ɵangular_packages_forms_forms_f implements ControlValueAccessor {\n+export declare class SelectControlValueAccessor extends ɵangular_packages_forms_forms_g implements ControlValueAccessor {\n     set compareWith(fn: (o1: any, o2: any) => boolean);\n-    onChange: (_: any) => void;\n-    onTouched: () => void;\n     value: any;\n-    constructor(_renderer: Renderer2, _elementRef: ElementRef);\n     registerOnChange(fn: (value: any) => any): void;\n-    registerOnTouched(fn: () => any): void;\n-    setDisabledState(isDisabled: boolean): void;\n     writeValue(value: any): void;\n }\n \n-export declare class SelectMultipleControlValueAccessor extends ɵangular_packages_forms_forms_f implements ControlValueAccessor {\n+export declare class SelectMultipleControlValueAccessor extends ɵangular_packages_forms_forms_g implements ControlValueAccessor {\n     set compareWith(fn: (o1: any, o2: any) => boolean);\n-    onChange: (_: any) => void;\n-    onTouched: () => void;\n     value: any;\n-    constructor(_renderer: Renderer2, _elementRef: ElementRef);\n     registerOnChange(fn: (value: any) => any): void;\n-    registerOnTouched(fn: () => any): void;\n-    setDisabledState(isDisabled: boolean): void;\n     writeValue(value: any): void;\n }\n "
        },
        {
            "sha": "24aa2c30ed6c483eb9fa6074b500128dd728537b",
            "filename": "packages/core/test/bundling/forms_reactive/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fcore%2Ftest%2Fbundling%2Fforms_reactive%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fcore%2Ftest%2Fbundling%2Fforms_reactive%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Fforms_reactive%2Fbundle.golden_symbols.json?ref=51bb922a081a1059929cb549ffbc3cf1d1366e2a",
            "patch": "@@ -44,6 +44,9 @@\n   {\n     \"name\": \"BROWSER_MODULE_PROVIDERS\"\n   },\n+  {\n+    \"name\": \"BaseControlValueAccessor\"\n+  },\n   {\n     \"name\": \"BrowserDomAdapter\"\n   },\n@@ -1637,6 +1640,9 @@\n   {\n     \"name\": \"ɵɵelementStart\"\n   },\n+  {\n+    \"name\": \"ɵɵgetInheritedFactory\"\n+  },\n   {\n     \"name\": \"ɵɵinject\"\n   },"
        },
        {
            "sha": "41dfa4ebe27e005e390b1c82119a2d3498b5cafb",
            "filename": "packages/core/test/bundling/forms_template_driven/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fcore%2Ftest%2Fbundling%2Fforms_template_driven%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fcore%2Ftest%2Fbundling%2Fforms_template_driven%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Fforms_template_driven%2Fbundle.golden_symbols.json?ref=51bb922a081a1059929cb549ffbc3cf1d1366e2a",
            "patch": "@@ -44,6 +44,9 @@\n   {\n     \"name\": \"BROWSER_MODULE_PROVIDERS\"\n   },\n+  {\n+    \"name\": \"BaseControlValueAccessor\"\n+  },\n   {\n     \"name\": \"BrowserDomAdapter\"\n   },\n@@ -1616,6 +1619,9 @@\n   {\n     \"name\": \"ɵɵelementStart\"\n   },\n+  {\n+    \"name\": \"ɵɵgetInheritedFactory\"\n+  },\n   {\n     \"name\": \"ɵɵinject\"\n   },"
        },
        {
            "sha": "ed126c20b790e261a31cdbb7e24927f98aa4e604",
            "filename": "packages/forms/src/directives/checkbox_value_accessor.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 41,
            "changes": 42,
            "blob_url": "https://github.com/angular/angular/blob/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fforms%2Fsrc%2Fdirectives%2Fcheckbox_value_accessor.ts",
            "raw_url": "https://github.com/angular/angular/raw/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fforms%2Fsrc%2Fdirectives%2Fcheckbox_value_accessor.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Fsrc%2Fdirectives%2Fcheckbox_value_accessor.ts?ref=51bb922a081a1059929cb549ffbc3cf1d1366e2a",
            "patch": "@@ -47,51 +47,11 @@ export const CHECKBOX_VALUE_ACCESSOR: any = {\n })\n export class CheckboxControlValueAccessor extends BuiltInControlValueAccessor implements\n     ControlValueAccessor {\n-  /**\n-   * The registered callback function called when a change event occurs on the input element.\n-   * @nodoc\n-   */\n-  onChange = (_: any) => {};\n-\n-  /**\n-   * The registered callback function called when a blur event occurs on the input element.\n-   * @nodoc\n-   */\n-  onTouched = () => {};\n-\n-  constructor(private _renderer: Renderer2, private _elementRef: ElementRef) {\n-    super();\n-  }\n-\n   /**\n    * Sets the \"checked\" property on the input element.\n    * @nodoc\n    */\n   writeValue(value: any): void {\n-    this._renderer.setProperty(this._elementRef.nativeElement, 'checked', value);\n-  }\n-\n-  /**\n-   * Registers a function called when the control value changes.\n-   * @nodoc\n-   */\n-  registerOnChange(fn: (_: any) => {}): void {\n-    this.onChange = fn;\n-  }\n-\n-  /**\n-   * Registers a function called when the control is touched.\n-   * @nodoc\n-   */\n-  registerOnTouched(fn: () => {}): void {\n-    this.onTouched = fn;\n-  }\n-\n-  /**\n-   * Sets the \"disabled\" property on the input element.\n-   * @nodoc\n-   */\n-  setDisabledState(isDisabled: boolean): void {\n-    this._renderer.setProperty(this._elementRef.nativeElement, 'disabled', isDisabled);\n+    this.setProperty('checked', value);\n   }\n }"
        },
        {
            "sha": "228c666196d152c1d05e7f34d209ffcaa6f77093",
            "filename": "packages/forms/src/directives/control_value_accessor.ts",
            "status": "modified",
            "additions": 67,
            "deletions": 5,
            "changes": 72,
            "blob_url": "https://github.com/angular/angular/blob/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fforms%2Fsrc%2Fdirectives%2Fcontrol_value_accessor.ts",
            "raw_url": "https://github.com/angular/angular/raw/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fforms%2Fsrc%2Fdirectives%2Fcontrol_value_accessor.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Fsrc%2Fdirectives%2Fcontrol_value_accessor.ts?ref=51bb922a081a1059929cb549ffbc3cf1d1366e2a",
            "patch": "@@ -6,7 +6,7 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import {InjectionToken} from '@angular/core';\n+import {Directive, ElementRef, InjectionToken, Renderer2} from '@angular/core';\n \n /**\n  * @description\n@@ -132,13 +132,75 @@ export interface ControlValueAccessor {\n }\n \n /**\n- * Base class for all built-in ControlValueAccessor classes. We use this class to distinguish\n- * between built-in and custom CVAs, so that Forms logic can recognize built-in CVAs and treat\n- * custom ones with higher priority (when both built-in and custom CVAs are present).\n+ * Base class for all ControlValueAccessor classes defined in Forms package.\n+ * Contains common logic and utility functions.\n+ *\n  * Note: this is an *internal-only* class and should not be extended or used directly in\n  * applications code.\n  */\n-export class BuiltInControlValueAccessor {}\n+@Directive()\n+export class BaseControlValueAccessor {\n+  /**\n+   * The registered callback function called when a change or input event occurs on the input\n+   * element.\n+   * @nodoc\n+   */\n+  onChange = (_: any) => {};\n+\n+  /**\n+   * The registered callback function called when a blur event occurs on the input element.\n+   * @nodoc\n+   */\n+  onTouched = () => {};\n+\n+  constructor(private _renderer: Renderer2, private _elementRef: ElementRef) {}\n+\n+  /**\n+   * Helper method that sets a property on a target element using the current Renderer\n+   * implementation.\n+   * @nodoc\n+   */\n+  protected setProperty(key: string, value: any): void {\n+    this._renderer.setProperty(this._elementRef.nativeElement, key, value);\n+  }\n+\n+  /**\n+   * Registers a function called when the control is touched.\n+   * @nodoc\n+   */\n+  registerOnTouched(fn: () => void): void {\n+    this.onTouched = fn;\n+  }\n+\n+  /**\n+   * Registers a function called when the control value changes.\n+   * @nodoc\n+   */\n+  registerOnChange(fn: (_: any) => {}): void {\n+    this.onChange = fn;\n+  }\n+\n+  /**\n+   * Sets the \"disabled\" property on the range input element.\n+   * @nodoc\n+   */\n+  setDisabledState(isDisabled: boolean): void {\n+    this.setProperty('disabled', isDisabled);\n+  }\n+}\n+\n+/**\n+ * Base class for all built-in ControlValueAccessor classes (except DefaultValueAccessor, which is\n+ * used in case no other CVAs can be found). We use this class to distinguish between default CVA,\n+ * built-in CVAs and custom CVAs, so that Forms logic can recognize built-in CVAs and treat custom\n+ * ones with higher priority (when both built-in and custom CVAs are present).\n+ *\n+ * Note: this is an *internal-only* class and should not be extended or used directly in\n+ * applications code.\n+ */\n+@Directive()\n+export class BuiltInControlValueAccessor extends BaseControlValueAccessor {\n+}\n \n /**\n  * Used to provide a `ControlValueAccessor` for form controls."
        },
        {
            "sha": "2c0fc9f132e8bfc5282dc295720bcfc8e88a4afa",
            "filename": "packages/forms/src/directives/default_value_accessor.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 40,
            "changes": 45,
            "blob_url": "https://github.com/angular/angular/blob/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fforms%2Fsrc%2Fdirectives%2Fdefault_value_accessor.ts",
            "raw_url": "https://github.com/angular/angular/raw/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fforms%2Fsrc%2Fdirectives%2Fdefault_value_accessor.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Fsrc%2Fdirectives%2Fdefault_value_accessor.ts?ref=51bb922a081a1059929cb549ffbc3cf1d1366e2a",
            "patch": "@@ -9,7 +9,7 @@\n import {ɵgetDOM as getDOM} from '@angular/common';\n import {Directive, ElementRef, forwardRef, Inject, InjectionToken, Optional, Renderer2} from '@angular/core';\n \n-import {ControlValueAccessor, NG_VALUE_ACCESSOR} from './control_value_accessor';\n+import {BaseControlValueAccessor, ControlValueAccessor, NG_VALUE_ACCESSOR} from './control_value_accessor';\n \n export const DEFAULT_VALUE_ACCESSOR: any = {\n   provide: NG_VALUE_ACCESSOR,\n@@ -83,25 +83,14 @@ export const COMPOSITION_BUFFER_MODE = new InjectionToken<boolean>('CompositionE\n   },\n   providers: [DEFAULT_VALUE_ACCESSOR]\n })\n-export class DefaultValueAccessor implements ControlValueAccessor {\n-  /**\n-   * The registered callback function called when an input event occurs on the input element.\n-   * @nodoc\n-   */\n-  onChange = (_: any) => {};\n-\n-  /**\n-   * The registered callback function called when a blur event occurs on the input element.\n-   * @nodoc\n-   */\n-  onTouched = () => {};\n-\n+export class DefaultValueAccessor extends BaseControlValueAccessor implements ControlValueAccessor {\n   /** Whether the user is creating a composition string (IME events). */\n   private _composing = false;\n \n   constructor(\n-      private _renderer: Renderer2, private _elementRef: ElementRef,\n+      renderer: Renderer2, elementRef: ElementRef,\n       @Optional() @Inject(COMPOSITION_BUFFER_MODE) private _compositionMode: boolean) {\n+    super(renderer, elementRef);\n     if (this._compositionMode == null) {\n       this._compositionMode = !_isAndroid();\n     }\n@@ -113,31 +102,7 @@ export class DefaultValueAccessor implements ControlValueAccessor {\n    */\n   writeValue(value: any): void {\n     const normalizedValue = value == null ? '' : value;\n-    this._renderer.setProperty(this._elementRef.nativeElement, 'value', normalizedValue);\n-  }\n-\n-  /**\n-   * Registers a function called when the control value changes.\n-   * @nodoc\n-   */\n-  registerOnChange(fn: (_: any) => void): void {\n-    this.onChange = fn;\n-  }\n-\n-  /**\n-   * Registers a function called when the control is touched.\n-   * @nodoc\n-   */\n-  registerOnTouched(fn: () => void): void {\n-    this.onTouched = fn;\n-  }\n-\n-  /**\n-   * Sets the \"disabled\" property on the input element.\n-   * @nodoc\n-   */\n-  setDisabledState(isDisabled: boolean): void {\n-    this._renderer.setProperty(this._elementRef.nativeElement, 'disabled', isDisabled);\n+    this.setProperty('value', normalizedValue);\n   }\n \n   /** @internal */"
        },
        {
            "sha": "8164453746a97809c2bf8c4bc7bf888a046428c8",
            "filename": "packages/forms/src/directives/number_value_accessor.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 34,
            "changes": 35,
            "blob_url": "https://github.com/angular/angular/blob/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fforms%2Fsrc%2Fdirectives%2Fnumber_value_accessor.ts",
            "raw_url": "https://github.com/angular/angular/raw/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fforms%2Fsrc%2Fdirectives%2Fnumber_value_accessor.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Fsrc%2Fdirectives%2Fnumber_value_accessor.ts?ref=51bb922a081a1059929cb549ffbc3cf1d1366e2a",
            "patch": "@@ -48,31 +48,14 @@ export const NUMBER_VALUE_ACCESSOR: any = {\n })\n export class NumberValueAccessor extends BuiltInControlValueAccessor implements\n     ControlValueAccessor {\n-  /**\n-   * The registered callback function called when a change or input event occurs on the input\n-   * element.\n-   * @nodoc\n-   */\n-  onChange = (_: any) => {};\n-\n-  /**\n-   * The registered callback function called when a blur event occurs on the input element.\n-   * @nodoc\n-   */\n-  onTouched = () => {};\n-\n-  constructor(private _renderer: Renderer2, private _elementRef: ElementRef) {\n-    super();\n-  }\n-\n   /**\n    * Sets the \"value\" property on the input element.\n    * @nodoc\n    */\n   writeValue(value: number): void {\n     // The value needs to be normalized for IE9, otherwise it is set to 'null' when null\n     const normalizedValue = value == null ? '' : value;\n-    this._renderer.setProperty(this._elementRef.nativeElement, 'value', normalizedValue);\n+    this.setProperty('value', normalizedValue);\n   }\n \n   /**\n@@ -84,20 +67,4 @@ export class NumberValueAccessor extends BuiltInControlValueAccessor implements\n       fn(value == '' ? null : parseFloat(value));\n     };\n   }\n-\n-  /**\n-   * Registers a function called when the control is touched.\n-   * @nodoc\n-   */\n-  registerOnTouched(fn: () => void): void {\n-    this.onTouched = fn;\n-  }\n-\n-  /**\n-   * Sets the \"disabled\" property on the input element.\n-   * @nodoc\n-   */\n-  setDisabledState(isDisabled: boolean): void {\n-    this._renderer.setProperty(this._elementRef.nativeElement, 'disabled', isDisabled);\n-  }\n }"
        },
        {
            "sha": "0820e588ac29e757184e4c9688278ff2ea90ccce",
            "filename": "packages/forms/src/directives/radio_control_value_accessor.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 26,
            "changes": 33,
            "blob_url": "https://github.com/angular/angular/blob/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fforms%2Fsrc%2Fdirectives%2Fradio_control_value_accessor.ts",
            "raw_url": "https://github.com/angular/angular/raw/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fforms%2Fsrc%2Fdirectives%2Fradio_control_value_accessor.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Fsrc%2Fdirectives%2Fradio_control_value_accessor.ts?ref=51bb922a081a1059929cb549ffbc3cf1d1366e2a",
            "patch": "@@ -124,16 +124,13 @@ export class RadioControlValueAccessor extends BuiltInControlValueAccessor imple\n \n   /**\n    * The registered callback function called when a change event occurs on the input element.\n+   * Note: we declare `onChange` here (also used as host listener) as a function with no arguments\n+   * to override the `onChange` function (which expects 1 argument) in the parent\n+   * `BaseControlValueAccessor` class.\n    * @nodoc\n    */\n   onChange = () => {};\n \n-  /**\n-   * The registered callback function called when a blur event occurs on the input element.\n-   * @nodoc\n-   */\n-  onTouched = () => {};\n-\n   /**\n    * @description\n    * Tracks the name of the radio input element.\n@@ -156,9 +153,9 @@ export class RadioControlValueAccessor extends BuiltInControlValueAccessor imple\n   @Input() value: any;\n \n   constructor(\n-      private _renderer: Renderer2, private _elementRef: ElementRef,\n-      private _registry: RadioControlRegistry, private _injector: Injector) {\n-    super();\n+      renderer: Renderer2, elementRef: ElementRef, private _registry: RadioControlRegistry,\n+      private _injector: Injector) {\n+    super(renderer, elementRef);\n   }\n \n   /** @nodoc */\n@@ -179,7 +176,7 @@ export class RadioControlValueAccessor extends BuiltInControlValueAccessor imple\n    */\n   writeValue(value: any): void {\n     this._state = value === this.value;\n-    this._renderer.setProperty(this._elementRef.nativeElement, 'checked', this._state);\n+    this.setProperty('checked', this._state);\n   }\n \n   /**\n@@ -203,22 +200,6 @@ export class RadioControlValueAccessor extends BuiltInControlValueAccessor imple\n     this.writeValue(value);\n   }\n \n-  /**\n-   * Registers a function called when the control is touched.\n-   * @nodoc\n-   */\n-  registerOnTouched(fn: () => {}): void {\n-    this.onTouched = fn;\n-  }\n-\n-  /**\n-   * Sets the \"disabled\" property on the input element.\n-   * @nodoc\n-   */\n-  setDisabledState(isDisabled: boolean): void {\n-    this._renderer.setProperty(this._elementRef.nativeElement, 'disabled', isDisabled);\n-  }\n-\n   private _checkName(): void {\n     if (this.name && this.formControlName && this.name !== this.formControlName &&\n         (typeof ngDevMode === 'undefined' || ngDevMode)) {"
        },
        {
            "sha": "5c74cba6824fc7f9816ac59cf7e167b2735134f1",
            "filename": "packages/forms/src/directives/range_value_accessor.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 34,
            "changes": 35,
            "blob_url": "https://github.com/angular/angular/blob/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fforms%2Fsrc%2Fdirectives%2Frange_value_accessor.ts",
            "raw_url": "https://github.com/angular/angular/raw/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fforms%2Fsrc%2Fdirectives%2Frange_value_accessor.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Fsrc%2Fdirectives%2Frange_value_accessor.ts?ref=51bb922a081a1059929cb549ffbc3cf1d1366e2a",
            "patch": "@@ -52,29 +52,12 @@ export const RANGE_VALUE_ACCESSOR: StaticProvider = {\n })\n export class RangeValueAccessor extends BuiltInControlValueAccessor implements\n     ControlValueAccessor {\n-  /**\n-   * The registered callback function called when a change or input event occurs on the input\n-   * element.\n-   * @nodoc\n-   */\n-  onChange = (_: any) => {};\n-\n-  /**\n-   * The registered callback function called when a blur event occurs on the input element.\n-   * @nodoc\n-   */\n-  onTouched = () => {};\n-\n-  constructor(private _renderer: Renderer2, private _elementRef: ElementRef) {\n-    super();\n-  }\n-\n   /**\n    * Sets the \"value\" property on the input element.\n    * @nodoc\n    */\n   writeValue(value: any): void {\n-    this._renderer.setProperty(this._elementRef.nativeElement, 'value', parseFloat(value));\n+    this.setProperty('value', parseFloat(value));\n   }\n \n   /**\n@@ -86,20 +69,4 @@ export class RangeValueAccessor extends BuiltInControlValueAccessor implements\n       fn(value == '' ? null : parseFloat(value));\n     };\n   }\n-\n-  /**\n-   * Registers a function called when the control is touched.\n-   * @nodoc\n-   */\n-  registerOnTouched(fn: () => void): void {\n-    this.onTouched = fn;\n-  }\n-\n-  /**\n-   * Sets the \"disabled\" property on the range input element.\n-   * @nodoc\n-   */\n-  setDisabledState(isDisabled: boolean): void {\n-    this._renderer.setProperty(this._elementRef.nativeElement, 'disabled', isDisabled);\n-  }\n }"
        },
        {
            "sha": "ee6c4cca40d9f918718ae9afd533bec956dfee3d",
            "filename": "packages/forms/src/directives/select_control_value_accessor.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 34,
            "changes": 36,
            "blob_url": "https://github.com/angular/angular/blob/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fforms%2Fsrc%2Fdirectives%2Fselect_control_value_accessor.ts",
            "raw_url": "https://github.com/angular/angular/raw/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fforms%2Fsrc%2Fdirectives%2Fselect_control_value_accessor.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Fsrc%2Fdirectives%2Fselect_control_value_accessor.ts?ref=51bb922a081a1059929cb549ffbc3cf1d1366e2a",
            "patch": "@@ -99,18 +99,6 @@ export class SelectControlValueAccessor extends BuiltInControlValueAccessor impl\n   /** @internal */\n   _idCounter: number = 0;\n \n-  /**\n-   * The registered callback function called when a change event occurs on the input element.\n-   * @nodoc\n-   */\n-  onChange = (_: any) => {};\n-\n-  /**\n-   * The registered callback function called when a blur event occurs on the input element.\n-   * @nodoc\n-   */\n-  onTouched = () => {};\n-\n   /**\n    * @description\n    * Tracks the option comparison algorithm for tracking identities when\n@@ -126,10 +114,6 @@ export class SelectControlValueAccessor extends BuiltInControlValueAccessor impl\n \n   private _compareWith: (o1: any, o2: any) => boolean = Object.is;\n \n-  constructor(private _renderer: Renderer2, private _elementRef: ElementRef) {\n-    super();\n-  }\n-\n   /**\n    * Sets the \"value\" property on the input element. The \"selectedIndex\"\n    * property is also set if an ID is provided on the option element.\n@@ -139,10 +123,10 @@ export class SelectControlValueAccessor extends BuiltInControlValueAccessor impl\n     this.value = value;\n     const id: string|null = this._getOptionId(value);\n     if (id == null) {\n-      this._renderer.setProperty(this._elementRef.nativeElement, 'selectedIndex', -1);\n+      this.setProperty('selectedIndex', -1);\n     }\n     const valueString = _buildValueString(id, value);\n-    this._renderer.setProperty(this._elementRef.nativeElement, 'value', valueString);\n+    this.setProperty('value', valueString);\n   }\n \n   /**\n@@ -156,22 +140,6 @@ export class SelectControlValueAccessor extends BuiltInControlValueAccessor impl\n     };\n   }\n \n-  /**\n-   * Registers a function called when the control is touched.\n-   * @nodoc\n-   */\n-  registerOnTouched(fn: () => any): void {\n-    this.onTouched = fn;\n-  }\n-\n-  /**\n-   * Sets the \"disabled\" property on the select input element.\n-   * @nodoc\n-   */\n-  setDisabledState(isDisabled: boolean): void {\n-    this._renderer.setProperty(this._elementRef.nativeElement, 'disabled', isDisabled);\n-  }\n-\n   /** @internal */\n   _registerOption(): string {\n     return (this._idCounter++).toString();"
        },
        {
            "sha": "0adf312cf7ea1f4c3e3f45e1efddff7e59209566",
            "filename": "packages/forms/src/directives/select_multiple_control_value_accessor.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 32,
            "changes": 32,
            "blob_url": "https://github.com/angular/angular/blob/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fforms%2Fsrc%2Fdirectives%2Fselect_multiple_control_value_accessor.ts",
            "raw_url": "https://github.com/angular/angular/raw/51bb922a081a1059929cb549ffbc3cf1d1366e2a/packages%2Fforms%2Fsrc%2Fdirectives%2Fselect_multiple_control_value_accessor.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fforms%2Fsrc%2Fdirectives%2Fselect_multiple_control_value_accessor.ts?ref=51bb922a081a1059929cb549ffbc3cf1d1366e2a",
            "patch": "@@ -95,18 +95,6 @@ export class SelectMultipleControlValueAccessor extends BuiltInControlValueAcces\n   /** @internal */\n   _idCounter: number = 0;\n \n-  /**\n-   * The registered callback function called when a change event occurs on the input element.\n-   * @nodoc\n-   */\n-  onChange = (_: any) => {};\n-\n-  /**\n-   * The registered callback function called when a blur event occurs on the input element.\n-   * @nodoc\n-   */\n-  onTouched = () => {};\n-\n   /**\n    * @description\n    * Tracks the option comparison algorithm for tracking identities when\n@@ -122,10 +110,6 @@ export class SelectMultipleControlValueAccessor extends BuiltInControlValueAcces\n \n   private _compareWith: (o1: any, o2: any) => boolean = Object.is;\n \n-  constructor(private _renderer: Renderer2, private _elementRef: ElementRef) {\n-    super();\n-  }\n-\n   /**\n    * Sets the \"value\" property on one or of more of the select's options.\n    * @nodoc\n@@ -179,22 +163,6 @@ export class SelectMultipleControlValueAccessor extends BuiltInControlValueAcces\n     };\n   }\n \n-  /**\n-   * Registers a function called when the control is touched.\n-   * @nodoc\n-   */\n-  registerOnTouched(fn: () => any): void {\n-    this.onTouched = fn;\n-  }\n-\n-  /**\n-   * Sets the \"disabled\" property on the select input element.\n-   * @nodoc\n-   */\n-  setDisabledState(isDisabled: boolean): void {\n-    this._renderer.setProperty(this._elementRef.nativeElement, 'disabled', isDisabled);\n-  }\n-\n   /** @internal */\n   _registerOption(value: ɵNgSelectMultipleOption): string {\n     const id: string = (this._idCounter++).toString();"
        }
    ],
    "stats": {
        "total": 398,
        "additions": 107,
        "deletions": 291
    }
}