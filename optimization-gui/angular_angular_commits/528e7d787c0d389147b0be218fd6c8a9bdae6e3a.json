{
    "author": "alan-agius4",
    "message": "test: update CLI integration tests to run only for Ivy (#41434)\n\nIn Angular CLI 12, application can only be compiled using Ivy, therefore we shouldn't run these tests when Bazel runs with View Engine context.\n\nPR Close #41434",
    "sha": "528e7d787c0d389147b0be218fd6c8a9bdae6e3a",
    "files": [
        {
            "sha": "eec8a92b591bc966e188954ee5a1a41b030cbffd",
            "filename": "goldens/size-tracking/integration-payloads.json",
            "status": "modified",
            "additions": 7,
            "deletions": 7,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/528e7d787c0d389147b0be218fd6c8a9bdae6e3a/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "raw_url": "https://github.com/angular/angular/raw/528e7d787c0d389147b0be218fd6c8a9bdae6e3a/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fsize-tracking%2Fintegration-payloads.json?ref=528e7d787c0d389147b0be218fd6c8a9bdae6e3a",
            "patch": "@@ -11,7 +11,7 @@\n   \"cli-hello-world-ivy-minimal\": {\n     \"master\": {\n       \"uncompressed\": {\n-        \"runtime-es2015\": 1170,\n+        \"runtime-es2015\": 1190,\n         \"main-es2015\": 17597,\n         \"polyfills-es2015\": 36709\n       }\n@@ -20,7 +20,7 @@\n   \"cli-hello-world-ivy-compat\": {\n     \"master\": {\n       \"uncompressed\": {\n-        \"runtime-es2015\": 1170,\n+        \"runtime-es2015\": 1190,\n         \"main-es2015\": 144579,\n         \"polyfills-es2015\": 36964\n       }\n@@ -29,7 +29,7 @@\n   \"cli-hello-world-ivy-i18n\": {\n     \"master\": {\n       \"uncompressed\": {\n-        \"runtime-es2015\": 1170,\n+        \"runtime-es2015\": 1190,\n         \"main-es2015\": 136546,\n         \"polyfills-es2015\": 37641\n       }\n@@ -38,17 +38,17 @@\n   \"cli-hello-world-lazy\": {\n     \"master\": {\n       \"uncompressed\": {\n-        \"runtime-es2015\": 2285,\n-        \"main-es2015\": 241389,\n+        \"runtime-es2015\": 3354,\n+        \"main-es2015\": 295076,\n         \"polyfills-es2015\": 36975,\n-        \"5-es2015\": 753\n+        \"434-es2015\": 796\n       }\n     }\n   },\n   \"forms\": {\n     \"master\": {\n       \"uncompressed\": {\n-        \"runtime-es2015\": 1170,\n+        \"runtime-es2015\": 1150,\n         \"main-es2015\": 162346,\n         \"polyfills-es2015\": 36975\n       }"
        },
        {
            "sha": "5897f8e039d91c132912122b8de8d6a25f948f79",
            "filename": "integration/BUILD.bazel",
            "status": "modified",
            "additions": 21,
            "deletions": 12,
            "changes": 33,
            "blob_url": "https://github.com/angular/angular/blob/528e7d787c0d389147b0be218fd6c8a9bdae6e3a/integration%2FBUILD.bazel",
            "raw_url": "https://github.com/angular/angular/raw/528e7d787c0d389147b0be218fd6c8a9bdae6e3a/integration%2FBUILD.bazel",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/integration%2FBUILD.bazel?ref=528e7d787c0d389147b0be218fd6c8a9bdae6e3a",
            "patch": "@@ -33,24 +33,33 @@ INTEGRATION_TESTS = {\n             \"no-ivy-aot\",\n         ],\n     },\n-    \"cli-elements-universal\": {},\n-    \"cli-hello-world\": {\"commands\": \"payload_size_tracking\"},\n-    \"cli-hello-world-ivy-compat\": {\"commands\": \"payload_size_tracking\"},\n+    \"cli-elements-universal\": {\n+        \"tags\": [\"ivy-only\"],\n+    },\n+    \"cli-hello-world\": {\n+        \"commands\": \"payload_size_tracking\",\n+        \"tags\": [\"ivy-only\"],\n+    },\n+    \"cli-hello-world-ivy-compat\": {\n+        \"commands\": \"payload_size_tracking\",\n+        \"tags\": [\"ivy-only\"],\n+    },\n     \"cli-hello-world-ivy-i18n\": {\n         \"commands\": \"payload_size_tracking\",\n-        # TODO: (FW-2165) cli-hello-world-ivy-i18n fails on a bundle size check with Ivy bundles\n-        \"tags\": [\"fixme-ivy-aot\"],\n+        \"tags\": [\"ivy-only\"],\n+    },\n+    \"cli-hello-world-ivy-minimal\": {\n+        \"commands\": \"payload_size_tracking\",\n+        \"tags\": [\"ivy-only\"],\n     },\n-    \"cli-hello-world-ivy-minimal\": {\"commands\": \"payload_size_tracking\"},\n     \"cli-hello-world-lazy\": {\n         \"commands\": \"payload_size_tracking\",\n-        # TODO: (FW-2165) cli-hello-world-lazy fails on a bundle size check with Ivy bundles\n-        \"tags\": [\"fixme-ivy-aot\"],\n+        \"tags\": [\"ivy-only\"],\n     },\n     \"dynamic-compiler\": {\"tags\": [\"no-ivy-aot\"]},\n     \"forms\": {\n         \"commands\": \"payload_size_tracking\",\n-        \"tags\": [\"no-ivy-aot\"],\n+        \"tags\": [\"ivy-only\"],\n     },\n     \"hello_world__closure\": {\n         # TODO: Re-enable the payload_size_tracking command:\n@@ -68,11 +77,11 @@ INTEGRATION_TESTS = {\n     },\n     \"i18n\": {\"tags\": [\"no-ivy-aot\"]},\n     \"injectable-def\": {\"tags\": [\"no-ivy-aot\"]},\n-    \"ivy-i18n\": {\"tags\": [\"no-ivy-aot\"]},\n-    \"trusted-types\": {},\n+    \"ivy-i18n\": {\"tags\": [\"ivy-only\"]},\n+    \"trusted-types\": {\"tags\": [\"ivy-only\"]},\n     \"language_service_plugin\": {},\n     \"ng_elements\": {\"tags\": [\"no-ivy-aot\"]},\n-    \"ng_elements_schematics\": {\"tags\": [\"no-ivy-aot\"]},\n+    \"ng_elements_schematics\": {\"tags\": [\"ivy-only\"]},\n     \"ng_update\": {},\n     \"ng_update_migrations\": {\"tags\": [\"no-ivy-aot\"]},\n     \"ngcc\": {\"tags\": [\"no-ivy-aot\"]},"
        },
        {
            "sha": "e7a372ae1ec600aa5575ba0498fe3446315e5905",
            "filename": "integration/ng_elements_schematics/test.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/528e7d787c0d389147b0be218fd6c8a9bdae6e3a/integration%2Fng_elements_schematics%2Ftest.ts",
            "raw_url": "https://github.com/angular/angular/raw/528e7d787c0d389147b0be218fd6c8a9bdae6e3a/integration%2Fng_elements_schematics%2Ftest.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/integration%2Fng_elements_schematics%2Ftest.ts?ref=528e7d787c0d389147b0be218fd6c8a9bdae6e3a",
            "patch": "@@ -46,7 +46,7 @@ for (let p of nodePackages) {\n }\n \n // TODO(alan-agius4): remove once the main repo dependency on `@angular-devkut/build-angular` is `0.1200.0-next.9` or greater.\n-packages['@angular-devkit/build-angular'] = 'file:../../../node_modules/@angular-devkit/build-angular';\n+packages['@angular-devkit/build-angular'] = 'github:angular/angular-devkit-build-angular-builds#e0c1374b12cfc892844030431bc19f631c0086a5';\n \n // Clean up previously run test\n cd(__dirname);"
        }
    ],
    "stats": {
        "total": 49,
        "additions": 29,
        "deletions": 20
    }
}