{
    "author": "crisbeto",
    "message": "fix(router): migration incorrectly replacing deprecated key (#39763)\n\nIn #38762 we added a migration to replace the deprecated `preserveQueryParams`\noption with `queryParamsHandling`, however due to a typo, we ended up replacing it\nwith `queryParamsHandler` which is invalid.\n\nFixes #39755.\n\nPR Close #39763",
    "sha": "81d72a1e3732b3df49544147c049792940765605",
    "files": [
        {
            "sha": "fb469fa76aa48baf3613d7bb82230bb201768abf",
            "filename": "packages/core/schematics/migrations.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/81d72a1e3732b3df49544147c049792940765605/packages%2Fcore%2Fschematics%2Fmigrations.json",
            "raw_url": "https://github.com/angular/angular/raw/81d72a1e3732b3df49544147c049792940765605/packages%2Fcore%2Fschematics%2Fmigrations.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fschematics%2Fmigrations.json?ref=81d72a1e3732b3df49544147c049792940765605",
            "patch": "@@ -72,7 +72,7 @@\n     },\n     \"migration-v11-router-preserve-query-params\": {\n       \"version\": \"11.0.0-beta\",\n-      \"description\": \"NavigationExtras.preserveQueryParams has been removed as of Angular version 11.  This migration replaces any usages with the appropriate assignment of the queryParamsHandler key.\",\n+      \"description\": \"NavigationExtras.preserveQueryParams has been removed as of Angular version 11.  This migration replaces any usages with the appropriate assignment of the queryParamsHandling key.\",\n       \"factory\": \"./migrations/router-preserve-query-params/index\"\n     },\n     \"migration-v11-router-initial-navigation-options\": {"
        },
        {
            "sha": "77edc68558d7dc23ac21caabc429d62a32ee79e3",
            "filename": "packages/core/schematics/migrations/router-preserve-query-params/README.md",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/81d72a1e3732b3df49544147c049792940765605/packages%2Fcore%2Fschematics%2Fmigrations%2Frouter-preserve-query-params%2FREADME.md",
            "raw_url": "https://github.com/angular/angular/raw/81d72a1e3732b3df49544147c049792940765605/packages%2Fcore%2Fschematics%2Fmigrations%2Frouter-preserve-query-params%2FREADME.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fschematics%2Fmigrations%2Frouter-preserve-query-params%2FREADME.md?ref=81d72a1e3732b3df49544147c049792940765605",
            "patch": "@@ -2,7 +2,7 @@\n \n Previously the `NatigationExtras` property of `preserveQueryParams` defined what should be done with\n query parameters on navigation.  This migration updates the usages of `preserveQueryParams` to\n-instead use the `queryParamsHandler` property.\n+instead use the `queryParamsHandling` property.\n \n #### Before\n ```ts\n@@ -29,7 +29,7 @@ export class MyComponent {\n   constructor(private _router: Router) {}\n \n   goHome() {\n-    this._router.navigate('/', { queryParamsHandler: 'preserve', skipLocationChange: 'foo' });\n+    this._router.navigate('/', { queryParamsHandling: 'preserve', skipLocationChange: 'foo' });\n   }\n }\n ```"
        },
        {
            "sha": "c82282d445283b0b62b455640764c2a8bb418cb2",
            "filename": "packages/core/schematics/migrations/router-preserve-query-params/util.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/81d72a1e3732b3df49544147c049792940765605/packages%2Fcore%2Fschematics%2Fmigrations%2Frouter-preserve-query-params%2Futil.ts",
            "raw_url": "https://github.com/angular/angular/raw/81d72a1e3732b3df49544147c049792940765605/packages%2Fcore%2Fschematics%2Fmigrations%2Frouter-preserve-query-params%2Futil.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fschematics%2Fmigrations%2Frouter-preserve-query-params%2Futil.ts?ref=81d72a1e3732b3df49544147c049792940765605",
            "patch": "@@ -56,7 +56,7 @@ export function migrateLiteral(\n     return ts.updateObjectLiteral(\n         node,\n         propertiesToKeep.concat(\n-            ts.createPropertyAssignment('queryParamsHandler', ts.createIdentifier(`'preserve'`))));\n+            ts.createPropertyAssignment('queryParamsHandling', ts.createIdentifier(`'preserve'`))));\n   }\n \n   return ts.updateObjectLiteral(node, propertiesToKeep);"
        },
        {
            "sha": "a61956e7bf165fc4876fbe3aed7ac4d679792f79",
            "filename": "packages/core/schematics/test/preserve_query_params_migration_spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/81d72a1e3732b3df49544147c049792940765605/packages%2Fcore%2Fschematics%2Ftest%2Fpreserve_query_params_migration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/81d72a1e3732b3df49544147c049792940765605/packages%2Fcore%2Fschematics%2Ftest%2Fpreserve_query_params_migration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fschematics%2Ftest%2Fpreserve_query_params_migration_spec.ts?ref=81d72a1e3732b3df49544147c049792940765605",
            "patch": "@@ -71,7 +71,7 @@ describe('NavigationExtras preserveQueryParams migration', () => {\n       await runMigration();\n \n       const content = tree.readContent('/index.ts');\n-      expect(content).toContain(`this._router.navigate('/', { queryParamsHandler: 'preserve' });`);\n+      expect(content).toContain(`this._router.navigate('/', { queryParamsHandling: 'preserve' });`);\n     });\n \n     it('`createUrlTree` function', async () => {\n@@ -114,7 +114,7 @@ describe('NavigationExtras preserveQueryParams migration', () => {\n \n       const content = tree.readContent('/index.ts');\n       expect(content).toContain(\n-          `const config = { replaceUrl: true, fragment: 'foo', state: {}, queryParamsHandler: 'preserve' };`);\n+          `const config = { replaceUrl: true, fragment: 'foo', state: {}, queryParamsHandling: 'preserve' };`);\n     });\n \n     it('should remove when the value is `false`', async () => {\n@@ -178,7 +178,7 @@ describe('NavigationExtras preserveQueryParams migration', () => {\n \n       const content = tree.readContent('/index.ts');\n       expect(content).toContain(\n-          `this._router.navigate('/', { replaceUrl: true, fragment: 'foo', state: {}, queryParamsHandler: 'preserve' });`);\n+          `this._router.navigate('/', { replaceUrl: true, fragment: 'foo', state: {}, queryParamsHandling: 'preserve' });`);\n     });\n \n     it('should remove when the value is `false`', async () => {"
        }
    ],
    "stats": {
        "total": 14,
        "additions": 7,
        "deletions": 7
    }
}