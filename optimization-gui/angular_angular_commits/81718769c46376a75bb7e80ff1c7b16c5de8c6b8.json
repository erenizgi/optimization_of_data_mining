{
    "author": "atscott",
    "message": "refactor(compiler-cli): rename ignore marker and helpers to be more clear (#40071)\n\nThe ignore marker is only used to ignore certain nodes in the TCB for\nthe purposes of diagnostics. The marker itself has been renamed as well\nas the helper function to see if the marker is present. Both now\nindicate that the marker is specifically for diagnostics.\n\nPR Close #40071",
    "sha": "81718769c46376a75bb7e80ff1c7b16c5de8c6b8",
    "files": [
        {
            "sha": "7007b1a33ceecfb5ec3a3974dfd5e87db6592e1c",
            "filename": "packages/compiler-cli/src/ngtsc/typecheck/src/comments.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/81718769c46376a75bb7e80ff1c7b16c5de8c6b8/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Fsrc%2Fcomments.ts",
            "raw_url": "https://github.com/angular/angular/raw/81718769c46376a75bb7e80ff1c7b16c5de8c6b8/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Fsrc%2Fcomments.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Fsrc%2Fcomments.ts?ref=81718769c46376a75bb7e80ff1c7b16c5de8c6b8",
            "patch": "@@ -53,25 +53,26 @@ export function addExpressionIdentifier(node: ts.Node, identifier: ExpressionIde\n       /* hasTrailingNewLine */ false);\n }\n \n-const IGNORE_MARKER = `${CommentTriviaType.DIAGNOSTIC}:ignore`;\n+const IGNORE_FOR_DIAGNOSTICS_MARKER = `${CommentTriviaType.DIAGNOSTIC}:ignore`;\n \n /**\n  * Tag the `ts.Node` with an indication that any errors arising from the evaluation of the node\n  * should be ignored.\n  */\n export function markIgnoreDiagnostics(node: ts.Node): void {\n   ts.addSyntheticTrailingComment(\n-      node, ts.SyntaxKind.MultiLineCommentTrivia, IGNORE_MARKER, /* hasTrailingNewLine */ false);\n+      node, ts.SyntaxKind.MultiLineCommentTrivia, IGNORE_FOR_DIAGNOSTICS_MARKER,\n+      /* hasTrailingNewLine */ false);\n }\n \n /** Returns true if the node has a marker that indicates diagnostics errors should be ignored.  */\n-export function hasIgnoreMarker(node: ts.Node, sourceFile: ts.SourceFile): boolean {\n+export function hasIgnoreForDiagnosticsMarker(node: ts.Node, sourceFile: ts.SourceFile): boolean {\n   return ts.forEachTrailingCommentRange(sourceFile.text, node.getEnd(), (pos, end, kind) => {\n     if (kind !== ts.SyntaxKind.MultiLineCommentTrivia) {\n       return null;\n     }\n     const commentText = sourceFile.text.substring(pos + 2, end - 2);\n-    return commentText === IGNORE_MARKER;\n+    return commentText === IGNORE_FOR_DIAGNOSTICS_MARKER;\n   }) === true;\n }\n "
        },
        {
            "sha": "7bdc189dcb23d56480990f02b82b409bb5aeb831",
            "filename": "packages/compiler-cli/src/ngtsc/typecheck/src/tcb_util.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/81718769c46376a75bb7e80ff1c7b16c5de8c6b8/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Fsrc%2Ftcb_util.ts",
            "raw_url": "https://github.com/angular/angular/raw/81718769c46376a75bb7e80ff1c7b16c5de8c6b8/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Fsrc%2Ftcb_util.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fsrc%2Fngtsc%2Ftypecheck%2Fsrc%2Ftcb_util.ts?ref=81718769c46376a75bb7e80ff1c7b16c5de8c6b8",
            "patch": "@@ -13,7 +13,7 @@ import * as ts from 'typescript';\n import {getTokenAtPosition} from '../../util/src/typescript';\n import {FullTemplateMapping, SourceLocation, TemplateId, TemplateSourceMapping} from '../api';\n \n-import {hasIgnoreMarker, readSpanComment} from './comments';\n+import {hasIgnoreForDiagnosticsMarker, readSpanComment} from './comments';\n import {checkIfClassIsExported, checkIfGenericTypesAreUnbound} from './ts_util';\n \n /**\n@@ -89,7 +89,7 @@ export function findTypeCheckBlock(file: ts.SourceFile, id: TemplateId): ts.Node\n export function findSourceLocation(node: ts.Node, sourceFile: ts.SourceFile): SourceLocation|null {\n   // Search for comments until the TCB's function declaration is encountered.\n   while (node !== undefined && !ts.isFunctionDeclaration(node)) {\n-    if (hasIgnoreMarker(node, sourceFile)) {\n+    if (hasIgnoreForDiagnosticsMarker(node, sourceFile)) {\n       // There's an ignore marker on this node, so the diagnostic should not be reported.\n       return null;\n     }\n@@ -114,7 +114,7 @@ export function findSourceLocation(node: ts.Node, sourceFile: ts.SourceFile): So\n function getTemplateId(node: ts.Node, sourceFile: ts.SourceFile): TemplateId|null {\n   // Walk up to the function declaration of the TCB, the file information is attached there.\n   while (!ts.isFunctionDeclaration(node)) {\n-    if (hasIgnoreMarker(node, sourceFile)) {\n+    if (hasIgnoreForDiagnosticsMarker(node, sourceFile)) {\n       // There's an ignore marker on this node, so the diagnostic should not be reported.\n       return null;\n     }"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 8,
        "deletions": 7
    }
}