{
    "author": "gkalpak",
    "message": "build(docs-infra): update Angular framework, Material and CLI to latest methods (#40994)\n\nThis commit updates the Angular framework, Angular CDK/Material and\nAngular CLI to latest stable versions (11.2.3, 11.2.2 and 11.2.2\nrespectively).\n\nThis update also fixes a Lighthouse audit fail due to\n`@angular/core@11.0.0` being identified as vulnerable to XSS:\nhttps://snyk.io/vuln/SNYK-JS-ANGULARCORE-1070902\n\nRegarding the payload size increases, they are mostly attributed to\nAngular Material:\n- Before this commit:     448461 B\n- After framework update: 448554 B ( +93 B)\n- After Material update:  449292 B (+738 B)\n- After CLI update:       449310 B ( +18 B)\n\nPR Close #40994",
    "sha": "21f0deeaa61cbe14f2cbd6239d8154a9f0854149",
    "files": [
        {
            "sha": "3ca514e7ddc4b027282fa6b3df94c525ee907208",
            "filename": "aio/karma.conf.js",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/21f0deeaa61cbe14f2cbd6239d8154a9f0854149/aio%2Fkarma.conf.js",
            "raw_url": "https://github.com/angular/angular/raw/21f0deeaa61cbe14f2cbd6239d8154a9f0854149/aio%2Fkarma.conf.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fkarma.conf.js?ref=21f0deeaa61cbe14f2cbd6239d8154a9f0854149",
            "patch": "@@ -20,10 +20,17 @@ module.exports = function (config) {\n     client: {\n       clearContext: false,  // leave Jasmine Spec Runner output visible in browser\n       jasmine: {\n+        // you can add configuration options for Jasmine here\n+        // the possible options are listed at https://jasmine.github.io/api/edge/Configuration.html\n+        // for example, you can disable the random execution with `random: false`\n+        // or set a specific seed with `seed: 4321`\n         random: true,\n         seed: '',\n       },\n     },\n+    jasmineHtmlReporter: {\n+      suppressAll: true // removes the duplicated traces\n+    },\n     coverageReporter: {\n       dir: require('path').join(__dirname, './coverage/site'),\n       subdir: '.',"
        },
        {
            "sha": "8c7d8d7029a615001689ac2d02cad5ed41fe5ffa",
            "filename": "aio/package.json",
            "status": "modified",
            "additions": 17,
            "deletions": 17,
            "changes": 34,
            "blob_url": "https://github.com/angular/angular/blob/21f0deeaa61cbe14f2cbd6239d8154a9f0854149/aio%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/21f0deeaa61cbe14f2cbd6239d8154a9f0854149/aio%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fpackage.json?ref=21f0deeaa61cbe14f2cbd6239d8154a9f0854149",
            "patch": "@@ -88,27 +88,27 @@\n   },\n   \"private\": true,\n   \"dependencies\": {\n-    \"@angular/animations\": \"11.0.0\",\n-    \"@angular/cdk\": \"11.0.0\",\n-    \"@angular/common\": \"11.0.0\",\n-    \"@angular/compiler\": \"11.0.0\",\n-    \"@angular/core\": \"11.0.0\",\n-    \"@angular/elements\": \"11.0.0\",\n-    \"@angular/forms\": \"11.0.0\",\n-    \"@angular/material\": \"11.0.0\",\n-    \"@angular/platform-browser\": \"11.0.0\",\n-    \"@angular/platform-browser-dynamic\": \"11.0.0\",\n-    \"@angular/router\": \"11.0.0\",\n-    \"@angular/service-worker\": \"11.0.0\",\n+    \"@angular/animations\": \"11.2.3\",\n+    \"@angular/cdk\": \"11.2.2\",\n+    \"@angular/common\": \"11.2.3\",\n+    \"@angular/compiler\": \"11.2.3\",\n+    \"@angular/core\": \"11.2.3\",\n+    \"@angular/elements\": \"11.2.3\",\n+    \"@angular/forms\": \"11.2.3\",\n+    \"@angular/material\": \"11.2.2\",\n+    \"@angular/platform-browser\": \"11.2.3\",\n+    \"@angular/platform-browser-dynamic\": \"11.2.3\",\n+    \"@angular/router\": \"11.2.3\",\n+    \"@angular/service-worker\": \"11.2.3\",\n     \"@webcomponents/custom-elements\": \"1.2.1\",\n     \"rxjs\": \"^6.5.3\",\n     \"tslib\": \"^2.0.0\",\n     \"zone.js\": \"~0.11.4\"\n   },\n   \"devDependencies\": {\n-    \"@angular-devkit/build-angular\": \"0.1100.1\",\n-    \"@angular/cli\": \"11.0.1\",\n-    \"@angular/compiler-cli\": \"11.0.0\",\n+    \"@angular-devkit/build-angular\": \"0.1102.2\",\n+    \"@angular/cli\": \"11.2.2\",\n+    \"@angular/compiler-cli\": \"11.2.3\",\n     \"@types/jasmine\": \"~3.6.0\",\n     \"@types/lunr\": \"^2.3.2\",\n     \"@types/node\": \"^12.7.9\",\n@@ -141,7 +141,7 @@\n     \"jsdom\": \"^9.12.0\",\n     \"json-schema-traverse\": \"^0.4.1\",\n     \"json5\": \"^1.0.1\",\n-    \"karma\": \"~5.1.1\",\n+    \"karma\": \"~6.1.0\",\n     \"karma-chrome-launcher\": \"~3.1.0\",\n     \"karma-coverage\": \"~2.0.3\",\n     \"karma-jasmine\": \"~4.0.0\",\n@@ -165,7 +165,7 @@\n     \"tree-kill\": \"^1.1.0\",\n     \"ts-node\": \"^8.4.1\",\n     \"tslint\": \"~6.1.0\",\n-    \"typescript\": \"~4.0.2\",\n+    \"typescript\": \"~4.1.2\",\n     \"uglify-js\": \"^3.0.15\",\n     \"unist-util-filter\": \"^0.2.1\",\n     \"unist-util-source\": \"^1.0.1\","
        },
        {
            "sha": "11b32a2bec24812f88fb3ff1dc76e5fa3b60a8ff",
            "filename": "aio/src/app/shared/scroll.service.spec.ts",
            "status": "modified",
            "additions": 19,
            "deletions": 3,
            "changes": 22,
            "blob_url": "https://github.com/angular/angular/blob/21f0deeaa61cbe14f2cbd6239d8154a9f0854149/aio%2Fsrc%2Fapp%2Fshared%2Fscroll.service.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/21f0deeaa61cbe14f2cbd6239d8154a9f0854149/aio%2Fsrc%2Fapp%2Fshared%2Fscroll.service.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fapp%2Fshared%2Fscroll.service.spec.ts?ref=21f0deeaa61cbe14f2cbd6239d8154a9f0854149",
            "patch": "@@ -468,18 +468,34 @@ describe('ScrollService', () => {\n        }));\n \n     it('should stop updating the stored location href', () => {\n+      const triggerBeforeunloadEvent = () => {\n+        // Karma adds an `onbeforeunload` listener to detect whether the tests do a full page reload\n+        // (and report it as an error). This test tests functionality that requires emitting a\n+        // `beforeunload` event.\n+        // To stop Karma from erroring, we replace Karma's `onbeforeunload` listener and restore it\n+        // after the fake event has been emitted.\n+        const originalOnbeforeunload = window.onbeforeunload;\n+        window.onbeforeunload = () => undefined;\n+\n+        try {\n+          window.dispatchEvent(new Event('beforeunload'));\n+        } finally {\n+          window.onbeforeunload = originalOnbeforeunload;\n+        }\n+      };\n+\n       const updateScrollLocationHrefSpy = spyOn(scrollService, 'updateScrollLocationHref');\n \n-      window.dispatchEvent(new Event('beforeunload'));\n+      triggerBeforeunloadEvent();\n       expect(updateScrollLocationHrefSpy).toHaveBeenCalledTimes(1);\n \n-      window.dispatchEvent(new Event('beforeunload'));\n+      triggerBeforeunloadEvent();\n       expect(updateScrollLocationHrefSpy).toHaveBeenCalledTimes(2);\n \n       updateScrollLocationHrefSpy.calls.reset();\n       scrollService.ngOnDestroy();\n \n-      window.dispatchEvent(new Event('beforeunload'));\n+      triggerBeforeunloadEvent();\n       expect(updateScrollLocationHrefSpy).not.toHaveBeenCalled();\n     });\n "
        },
        {
            "sha": "f9fc413d4c41a7b6548ff30de343c928b74edeb1",
            "filename": "aio/src/polyfills.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 1,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/21f0deeaa61cbe14f2cbd6239d8154a9f0854149/aio%2Fsrc%2Fpolyfills.ts",
            "raw_url": "https://github.com/angular/angular/raw/21f0deeaa61cbe14f2cbd6239d8154a9f0854149/aio%2Fsrc%2Fpolyfills.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fsrc%2Fpolyfills.ts?ref=21f0deeaa61cbe14f2cbd6239d8154a9f0854149",
            "patch": "@@ -18,7 +18,9 @@\n  * BROWSER POLYFILLS\n  */\n \n-/** IE11 requires the following for NgClass support on SVG elements */\n+/**\n+ * IE11 requires the following for NgClass support on SVG elements\n+ */\n // import 'classlist.js';  // Run `npm install --save classlist.js`.\n \n /**"
        },
        {
            "sha": "fc3d847571a445fe3b3db9030e67d05b2d33659c",
            "filename": "aio/tsconfig.json",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/21f0deeaa61cbe14f2cbd6239d8154a9f0854149/aio%2Ftsconfig.json",
            "raw_url": "https://github.com/angular/angular/raw/21f0deeaa61cbe14f2cbd6239d8154a9f0854149/aio%2Ftsconfig.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftsconfig.json?ref=21f0deeaa61cbe14f2cbd6239d8154a9f0854149",
            "patch": "@@ -36,6 +36,7 @@\n     \"tools\"\n   ],\n   \"angularCompilerOptions\": {\n+    \"enableI18nLegacyMessageIdFormat\": false,\n     \"disableTypeScriptVersionCheck\": true,\n     \"strictInjectionParameters\": true,\n     \"strictInputAccessModifiers\": true,"
        },
        {
            "sha": "c85a2893242b6ddd34b1813161ae985ec1b8f735",
            "filename": "aio/yarn.lock",
            "status": "modified",
            "additions": 1201,
            "deletions": 1075,
            "changes": 2276,
            "blob_url": "https://github.com/angular/angular/blob/21f0deeaa61cbe14f2cbd6239d8154a9f0854149/aio%2Fyarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/21f0deeaa61cbe14f2cbd6239d8154a9f0854149/aio%2Fyarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fyarn.lock?ref=21f0deeaa61cbe14f2cbd6239d8154a9f0854149"
        },
        {
            "sha": "f785126125ce5e47d0d0e8be70cf55ee8c11984e",
            "filename": "goldens/size-tracking/aio-payloads.json",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/21f0deeaa61cbe14f2cbd6239d8154a9f0854149/goldens%2Fsize-tracking%2Faio-payloads.json",
            "raw_url": "https://github.com/angular/angular/raw/21f0deeaa61cbe14f2cbd6239d8154a9f0854149/goldens%2Fsize-tracking%2Faio-payloads.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fsize-tracking%2Faio-payloads.json?ref=21f0deeaa61cbe14f2cbd6239d8154a9f0854149",
            "patch": "@@ -3,7 +3,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime-es2015\": 3033,\n-        \"main-es2015\": 448427,\n+        \"main-es2015\": 449310,\n         \"polyfills-es2015\": 52343\n       }\n     }\n@@ -12,7 +12,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime-es2015\": 3033,\n-        \"main-es2015\": 448936,\n+        \"main-es2015\": 449759,\n         \"polyfills-es2015\": 52493\n       }\n     }\n@@ -21,7 +21,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime-es2015\": 3153,\n-        \"main-es2015\": 434502,\n+        \"main-es2015\": 435362,\n         \"polyfills-es2015\": 52493\n       }\n     }"
        }
    ],
    "stats": {
        "total": 2350,
        "additions": 1251,
        "deletions": 1099
    }
}