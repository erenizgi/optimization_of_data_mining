{
    "author": "JoostK",
    "message": "test(compiler-cli): convert di compliance tests (#39863)\n\nThis commit converts the DI compliance tests taken from\n`r3_view_compiler_di_spec.ts` to the new test runner.\n\nPR Close #39863",
    "sha": "c622b17b0d6f0837f0b5e42227cbbda022d44972",
    "files": [
        {
            "sha": "4b39181e10bb238ea53a7b8d4e7c959a3871a866",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/GOLDEN_PARTIAL.js",
            "status": "added",
            "additions": 373,
            "deletions": 0,
            "changes": 373,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2FGOLDEN_PARTIAL.js",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2FGOLDEN_PARTIAL.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2FGOLDEN_PARTIAL.js?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,373 @@\n+/****************************************************************************************************\n+ * PARTIAL FILE: component_factory.js\n+ ****************************************************************************************************/\n+import { Attribute, Component, Host, Injectable, NgModule, Optional, Self, SkipSelf } from '@angular/core';\n+import * as i0 from \"@angular/core\";\n+export class MyService {\n+}\n+MyService.ɵfac = function MyService_Factory(t) { return new (t || MyService)(); };\n+MyService.ɵprov = i0.ɵɵdefineInjectable({ token: MyService, factory: MyService.ɵfac });\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(MyService, [{\n+        type: Injectable\n+    }], null, null); })();\n+export class MyComponent {\n+    constructor(name, s1, s2, s4, s3, s5, s6) { }\n+}\n+MyComponent.ɵfac = function MyComponent_Factory(t) { return new (t || MyComponent)(i0.ɵɵinjectAttribute('name'), i0.ɵɵdirectiveInject(MyService), i0.ɵɵdirectiveInject(MyService, 1), i0.ɵɵdirectiveInject(MyService, 2), i0.ɵɵdirectiveInject(MyService, 4), i0.ɵɵdirectiveInject(MyService, 8), i0.ɵɵdirectiveInject(MyService, 10)); };\n+MyComponent.ɵcmp = i0.ɵɵngDeclareComponent({ version: 1, type: MyComponent, selector: \"my-component\", ngImport: i0, template: { source: ``, isInline: true } });\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(MyComponent, [{\n+        type: Component,\n+        args: [{ selector: 'my-component', template: `` }]\n+    }], function () { return [{ type: undefined, decorators: [{\n+                type: Attribute,\n+                args: ['name']\n+            }] }, { type: MyService }, { type: MyService, decorators: [{\n+                type: Host\n+            }] }, { type: MyService, decorators: [{\n+                type: Self\n+            }] }, { type: MyService, decorators: [{\n+                type: SkipSelf\n+            }] }, { type: MyService, decorators: [{\n+                type: Optional\n+            }] }, { type: MyService, decorators: [{\n+                type: Self\n+            }, {\n+                type: Optional\n+            }] }]; }, null); })();\n+export class MyModule {\n+}\n+MyModule.ɵmod = i0.ɵɵdefineNgModule({ type: MyModule });\n+MyModule.ɵinj = i0.ɵɵdefineInjector({ factory: function MyModule_Factory(t) { return new (t || MyModule)(); }, providers: [MyService] });\n+(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && i0.ɵɵsetNgModuleScope(MyModule, { declarations: [MyComponent] }); })();\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(MyModule, [{\n+        type: NgModule,\n+        args: [{ declarations: [MyComponent], providers: [MyService] }]\n+    }], null, null); })();\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: component_factory.d.ts\n+ ****************************************************************************************************/\n+import * as i0 from \"@angular/core\";\n+export declare class MyService {\n+    static ɵfac: i0.ɵɵFactoryDef<MyService, never>;\n+    static ɵprov: i0.ɵɵInjectableDef<MyService>;\n+}\n+export declare class MyComponent {\n+    constructor(name: string, s1: MyService, s2: MyService, s4: MyService, s3: MyService, s5: MyService, s6: MyService);\n+    static ɵfac: i0.ɵɵFactoryDef<MyComponent, [{ attribute: \"name\"; }, null, { host: true; }, { self: true; }, { skipSelf: true; }, { optional: true; }, { optional: true; self: true; }]>;\n+    static ɵcmp: i0.ɵɵComponentDefWithMeta<MyComponent, \"my-component\", never, {}, {}, never, never>;\n+}\n+export declare class MyModule {\n+    static ɵmod: i0.ɵɵNgModuleDefWithMeta<MyModule, [typeof MyComponent], never, never>;\n+    static ɵinj: i0.ɵɵInjectorDef<MyModule>;\n+}\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: injectable_factory.js\n+ ****************************************************************************************************/\n+import { Injectable } from '@angular/core';\n+import * as i0 from \"@angular/core\";\n+class MyDependency {\n+}\n+export class MyService {\n+    constructor(dep) { }\n+}\n+MyService.ɵfac = function MyService_Factory(t) { return new (t || MyService)(i0.ɵɵinject(MyDependency)); };\n+MyService.ɵprov = i0.ɵɵdefineInjectable({ token: MyService, factory: MyService.ɵfac });\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(MyService, [{\n+        type: Injectable\n+    }], function () { return [{ type: MyDependency }]; }, null); })();\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: injectable_factory.d.ts\n+ ****************************************************************************************************/\n+import * as i0 from \"@angular/core\";\n+declare class MyDependency {\n+}\n+export declare class MyService {\n+    constructor(dep: MyDependency);\n+    static ɵfac: i0.ɵɵFactoryDef<MyService, never>;\n+    static ɵprov: i0.ɵɵInjectableDef<MyService>;\n+}\n+export {};\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: ctor_overload.js\n+ ****************************************************************************************************/\n+import { Injectable, Optional } from '@angular/core';\n+import * as i0 from \"@angular/core\";\n+class MyDependency {\n+}\n+class MyOptionalDependency {\n+}\n+export class MyService {\n+    constructor(dep, optionalDep) { }\n+}\n+MyService.ɵfac = function MyService_Factory(t) { return new (t || MyService)(i0.ɵɵinject(MyDependency), i0.ɵɵinject(MyOptionalDependency, 8)); };\n+MyService.ɵprov = i0.ɵɵdefineInjectable({ token: MyService, factory: MyService.ɵfac });\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(MyService, [{\n+        type: Injectable\n+    }], function () { return [{ type: MyDependency }, { type: MyOptionalDependency, decorators: [{\n+                type: Optional\n+            }] }]; }, null); })();\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: ctor_overload.d.ts\n+ ****************************************************************************************************/\n+import * as i0 from \"@angular/core\";\n+declare class MyDependency {\n+}\n+export declare class MyService {\n+    constructor(dep: MyDependency);\n+    static ɵfac: i0.ɵɵFactoryDef<MyService, [null, { optional: true; }]>;\n+    static ɵprov: i0.ɵɵInjectableDef<MyService>;\n+}\n+export {};\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: usefactory_without_deps.js\n+ ****************************************************************************************************/\n+import { Injectable } from '@angular/core';\n+import * as i0 from \"@angular/core\";\n+class MyAlternateService {\n+}\n+function alternateFactory() {\n+    return new MyAlternateService();\n+}\n+export class MyService {\n+}\n+MyService.ɵfac = function MyService_Factory(t) { return new (t || MyService)(); };\n+MyService.ɵprov = i0.ɵɵdefineInjectable({ token: MyService, factory: function () { return alternateFactory(); }, providedIn: 'root' });\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(MyService, [{\n+        type: Injectable,\n+        args: [{ providedIn: 'root', useFactory: alternateFactory }]\n+    }], null, null); })();\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: usefactory_without_deps.d.ts\n+ ****************************************************************************************************/\n+import * as i0 from \"@angular/core\";\n+export declare class MyService {\n+    static ɵfac: i0.ɵɵFactoryDef<MyService, never>;\n+    static ɵprov: i0.ɵɵInjectableDef<MyService>;\n+}\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: usefactory_with_deps.js\n+ ****************************************************************************************************/\n+import { Injectable } from '@angular/core';\n+import * as i0 from \"@angular/core\";\n+class SomeDep {\n+}\n+class MyAlternateService {\n+}\n+export class MyService {\n+}\n+MyService.ɵfac = function MyService_Factory(t) { return new (t || MyService)(); };\n+MyService.ɵprov = i0.ɵɵdefineInjectable({ token: MyService, factory: function MyService_Factory(t) { let r = null; if (t) {\n+        r = new t();\n+    }\n+    else {\n+        r = (() => new MyAlternateService())(i0.ɵɵinject(SomeDep));\n+    } return r; }, providedIn: 'root' });\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(MyService, [{\n+        type: Injectable,\n+        args: [{ providedIn: 'root', useFactory: () => new MyAlternateService(), deps: [SomeDep] }]\n+    }], null, null); })();\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: usefactory_with_deps.d.ts\n+ ****************************************************************************************************/\n+import * as i0 from \"@angular/core\";\n+export declare class MyService {\n+    static ɵfac: i0.ɵɵFactoryDef<MyService, never>;\n+    static ɵprov: i0.ɵɵInjectableDef<MyService>;\n+}\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: useclass_without_deps.js\n+ ****************************************************************************************************/\n+import { Injectable } from '@angular/core';\n+import * as i0 from \"@angular/core\";\n+class MyAlternateService {\n+}\n+MyAlternateService.ɵfac = function MyAlternateService_Factory(t) { return new (t || MyAlternateService)(); };\n+MyAlternateService.ɵprov = i0.ɵɵdefineInjectable({ token: MyAlternateService, factory: MyAlternateService.ɵfac });\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(MyAlternateService, [{\n+        type: Injectable\n+    }], null, null); })();\n+export class MyService {\n+}\n+MyService.ɵfac = function MyService_Factory(t) { return new (t || MyService)(); };\n+MyService.ɵprov = i0.ɵɵdefineInjectable({ token: MyService, factory: function (t) { return MyAlternateService.ɵfac(t); }, providedIn: 'root' });\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(MyService, [{\n+        type: Injectable,\n+        args: [{ providedIn: 'root', useClass: MyAlternateService }]\n+    }], null, null); })();\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: useclass_without_deps.d.ts\n+ ****************************************************************************************************/\n+import * as i0 from \"@angular/core\";\n+export declare class MyService {\n+    static ɵfac: i0.ɵɵFactoryDef<MyService, never>;\n+    static ɵprov: i0.ɵɵInjectableDef<MyService>;\n+}\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: useclass_with_deps.js\n+ ****************************************************************************************************/\n+import { Injectable } from '@angular/core';\n+import * as i0 from \"@angular/core\";\n+class SomeDep {\n+}\n+class MyAlternateService {\n+}\n+MyAlternateService.ɵfac = function MyAlternateService_Factory(t) { return new (t || MyAlternateService)(); };\n+MyAlternateService.ɵprov = i0.ɵɵdefineInjectable({ token: MyAlternateService, factory: MyAlternateService.ɵfac });\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(MyAlternateService, [{\n+        type: Injectable\n+    }], null, null); })();\n+export class MyService {\n+}\n+MyService.ɵfac = function MyService_Factory(t) { return new (t || MyService)(); };\n+MyService.ɵprov = i0.ɵɵdefineInjectable({ token: MyService, factory: function MyService_Factory(t) { let r = null; if (t) {\n+        r = new t();\n+    }\n+    else {\n+        r = new MyAlternateService(i0.ɵɵinject(SomeDep));\n+    } return r; }, providedIn: 'root' });\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(MyService, [{\n+        type: Injectable,\n+        args: [{ providedIn: 'root', useClass: MyAlternateService, deps: [SomeDep] }]\n+    }], null, null); })();\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: useclass_with_deps.d.ts\n+ ****************************************************************************************************/\n+import * as i0 from \"@angular/core\";\n+export declare class MyService {\n+    static ɵfac: i0.ɵɵFactoryDef<MyService, never>;\n+    static ɵprov: i0.ɵɵInjectableDef<MyService>;\n+}\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: useclass_forwardref.js\n+ ****************************************************************************************************/\n+import { forwardRef, Injectable } from '@angular/core';\n+import * as i0 from \"@angular/core\";\n+class SomeProvider {\n+}\n+SomeProvider.ɵfac = function SomeProvider_Factory(t) { return new (t || SomeProvider)(); };\n+SomeProvider.ɵprov = i0.ɵɵdefineInjectable({ token: SomeProvider, factory: function (t) { return SomeProviderImpl.ɵfac(t); }, providedIn: 'root' });\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(SomeProvider, [{\n+        type: Injectable,\n+        args: [{ providedIn: 'root', useClass: forwardRef(() => SomeProviderImpl) }]\n+    }], null, null); })();\n+class SomeProviderImpl extends SomeProvider {\n+}\n+SomeProviderImpl.ɵfac = function SomeProviderImpl_Factory(t) { return ɵSomeProviderImpl_BaseFactory(t || SomeProviderImpl); };\n+SomeProviderImpl.ɵprov = i0.ɵɵdefineInjectable({ token: SomeProviderImpl, factory: SomeProviderImpl.ɵfac });\n+const ɵSomeProviderImpl_BaseFactory = /*@__PURE__*/ i0.ɵɵgetInheritedFactory(SomeProviderImpl);\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(SomeProviderImpl, [{\n+        type: Injectable\n+    }], null, null); })();\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: useclass_forwardref.d.ts\n+ ****************************************************************************************************/\n+export {};\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: pipe_and_injectable.js\n+ ****************************************************************************************************/\n+import { Component, Injectable, NgModule, Pipe } from '@angular/core';\n+import * as i0 from \"@angular/core\";\n+class Service {\n+}\n+Service.ɵfac = function Service_Factory(t) { return new (t || Service)(); };\n+Service.ɵprov = i0.ɵɵdefineInjectable({ token: Service, factory: Service.ɵfac });\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(Service, [{\n+        type: Injectable\n+    }], null, null); })();\n+export class MyPipe {\n+    constructor(service) { }\n+    transform(value, ...args) {\n+        return value;\n+    }\n+}\n+MyPipe.ɵfac = function MyPipe_Factory(t) { return new (t || MyPipe)(i0.ɵɵdirectiveInject(Service)); };\n+MyPipe.ɵpipe = i0.ɵɵdefinePipe({ name: \"myPipe\", type: MyPipe, pure: true });\n+MyPipe.ɵprov = i0.ɵɵdefineInjectable({ token: MyPipe, factory: MyPipe.ɵfac });\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(MyPipe, [{\n+        type: Injectable\n+    }, {\n+        type: Pipe,\n+        args: [{ name: 'myPipe' }]\n+    }], function () { return [{ type: Service }]; }, null); })();\n+export class MyOtherPipe {\n+    constructor(service) { }\n+    transform(value, ...args) {\n+        return value;\n+    }\n+}\n+MyOtherPipe.ɵfac = function MyOtherPipe_Factory(t) { return new (t || MyOtherPipe)(i0.ɵɵdirectiveInject(Service)); };\n+MyOtherPipe.ɵpipe = i0.ɵɵdefinePipe({ name: \"myOtherPipe\", type: MyOtherPipe, pure: true });\n+MyOtherPipe.ɵprov = i0.ɵɵdefineInjectable({ token: MyOtherPipe, factory: MyOtherPipe.ɵfac });\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(MyOtherPipe, [{\n+        type: Pipe,\n+        args: [{ name: 'myOtherPipe' }]\n+    }, {\n+        type: Injectable\n+    }], function () { return [{ type: Service }]; }, null); })();\n+export class MyApp {\n+}\n+MyApp.ɵfac = function MyApp_Factory(t) { return new (t || MyApp)(); };\n+MyApp.ɵcmp = i0.ɵɵngDeclareComponent({ version: 1, type: MyApp, selector: \"my-app\", ngImport: i0, template: { source: '{{0 | myPipe | myOtherPipe}}', isInline: true }, pipes: { \"myOtherPipe\": MyOtherPipe, \"myPipe\": MyPipe } });\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(MyApp, [{\n+        type: Component,\n+        args: [{ selector: 'my-app', template: '{{0 | myPipe | myOtherPipe}}' }]\n+    }], null, null); })();\n+export class MyModule {\n+}\n+MyModule.ɵmod = i0.ɵɵdefineNgModule({ type: MyModule });\n+MyModule.ɵinj = i0.ɵɵdefineInjector({ factory: function MyModule_Factory(t) { return new (t || MyModule)(); }, providers: [Service] });\n+(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && i0.ɵɵsetNgModuleScope(MyModule, { declarations: [MyPipe, MyOtherPipe, MyApp] }); })();\n+/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(MyModule, [{\n+        type: NgModule,\n+        args: [{ declarations: [MyPipe, MyOtherPipe, MyApp], providers: [Service] }]\n+    }], null, null); })();\n+\n+/****************************************************************************************************\n+ * PARTIAL FILE: pipe_and_injectable.d.ts\n+ ****************************************************************************************************/\n+import { PipeTransform } from '@angular/core';\n+import * as i0 from \"@angular/core\";\n+declare class Service {\n+    static ɵfac: i0.ɵɵFactoryDef<Service, never>;\n+    static ɵprov: i0.ɵɵInjectableDef<Service>;\n+}\n+export declare class MyPipe implements PipeTransform {\n+    constructor(service: Service);\n+    transform(value: any, ...args: any[]): any;\n+    static ɵfac: i0.ɵɵFactoryDef<MyPipe, never>;\n+    static ɵpipe: i0.ɵɵPipeDefWithMeta<MyPipe, \"myPipe\">;\n+    static ɵprov: i0.ɵɵInjectableDef<MyPipe>;\n+}\n+export declare class MyOtherPipe implements PipeTransform {\n+    constructor(service: Service);\n+    transform(value: any, ...args: any[]): any;\n+    static ɵfac: i0.ɵɵFactoryDef<MyOtherPipe, never>;\n+    static ɵpipe: i0.ɵɵPipeDefWithMeta<MyOtherPipe, \"myOtherPipe\">;\n+    static ɵprov: i0.ɵɵInjectableDef<MyOtherPipe>;\n+}\n+export declare class MyApp {\n+    static ɵfac: i0.ɵɵFactoryDef<MyApp, never>;\n+    static ɵcmp: i0.ɵɵComponentDefWithMeta<MyApp, \"my-app\", never, {}, {}, never, never>;\n+}\n+export declare class MyModule {\n+    static ɵmod: i0.ɵɵNgModuleDefWithMeta<MyModule, [typeof MyPipe, typeof MyOtherPipe, typeof MyApp], never, never>;\n+    static ɵinj: i0.ɵɵInjectorDef<MyModule>;\n+}\n+export {};\n+"
        },
        {
            "sha": "7968fc100836041c27f1cd7dfe07bf7ac23ab01c",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/TEST_CASES.json",
            "status": "added",
            "additions": 179,
            "deletions": 0,
            "changes": 179,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2FTEST_CASES.json",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2FTEST_CASES.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2FTEST_CASES.json?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,179 @@\n+{\n+  \"$schema\": \"../../test_case_schema.json\",\n+  \"cases\": [\n+    {\n+      \"description\": \"should create factory methods\",\n+      \"inputFiles\": [\n+        \"component_factory.ts\"\n+      ],\n+      \"expectations\": [\n+        {\n+          \"failureMessage\": \"Incorrect factory\",\n+          \"files\": [\n+            \"component_factory.js\"\n+          ]\n+        }\n+      ]\n+    },\n+    {\n+      \"description\": \"should create a factory definition for an injectable\",\n+      \"inputFiles\": [\n+        \"injectable_factory.ts\"\n+      ],\n+      \"expectations\": [\n+        {\n+          \"failureMessage\": \"Incorrect factory definition\",\n+          \"files\": [\n+            {\n+              \"expected\": \"injectable_factory_fac.js\",\n+              \"generated\": \"injectable_factory.js\"\n+            }\n+          ]\n+        },\n+        {\n+          \"failureMessage\": \"Incorrect injectable definition\",\n+          \"files\": [\n+            {\n+              \"expected\": \"injectable_factory_prov.js\",\n+              \"generated\": \"injectable_factory.js\"\n+            }\n+          ]\n+        }\n+      ]\n+    },\n+    {\n+      \"description\": \"should create a factory definition for an injectable with an overloaded constructor\",\n+      \"inputFiles\": [\n+        \"ctor_overload.ts\"\n+      ],\n+      \"expectations\": [\n+        {\n+          \"failureMessage\": \"Incorrect factory definition\",\n+          \"files\": [\n+            {\n+              \"expected\": \"ctor_overload_fac.js\",\n+              \"generated\": \"ctor_overload.js\"\n+            }\n+          ]\n+        },\n+        {\n+          \"failureMessage\": \"Incorrect injectable definition\",\n+          \"files\": [\n+            {\n+              \"expected\": \"ctor_overload_prov.js\",\n+              \"generated\": \"ctor_overload.js\"\n+            }\n+          ]\n+        }\n+      ]\n+    },\n+    {\n+      \"description\": \"should delegate directly to the alternate factory when setting `useFactory` without `deps`\",\n+      \"inputFiles\": [\n+        \"usefactory_without_deps.ts\"\n+      ],\n+      \"expectations\": [\n+        {\n+          \"failureMessage\": \"Incorrect injectable definition\",\n+          \"files\": [\n+            \"usefactory_without_deps.js\"\n+          ]\n+        }\n+      ]\n+    },\n+    {\n+      \"description\": \"should not delegate directly to the alternate factory when setting `useFactory` with `deps`\",\n+      \"inputFiles\": [\n+        \"usefactory_with_deps.ts\"\n+      ],\n+      \"expectations\": [\n+        {\n+          \"failureMessage\": \"Incorrect injectable definition\",\n+          \"files\": [\n+            \"usefactory_with_deps.js\"\n+          ]\n+        }\n+      ]\n+    },\n+    {\n+      \"description\": \"should delegate directly to the alternate class factory when setting `useClass` without `deps`\",\n+      \"inputFiles\": [\n+        \"useclass_without_deps.ts\"\n+      ],\n+      \"expectations\": [\n+        {\n+          \"failureMessage\": \"Incorrect factory definition\",\n+          \"files\": [\n+            \"useclass_without_deps.js\"\n+          ]\n+        }\n+      ]\n+    },\n+    {\n+      \"description\": \"should not delegate directly to the alternate class when setting `useClass` with `deps`\",\n+      \"inputFiles\": [\n+        \"useclass_with_deps.ts\"\n+      ],\n+      \"expectations\": [\n+        {\n+          \"failureMessage\": \"Incorrect factory definition\",\n+          \"files\": [\n+            \"useclass_with_deps.js\"\n+          ]\n+        }\n+      ]\n+    },\n+    {\n+      \"description\": \"should unwrap forward refs when delegating to a different class\",\n+      \"inputFiles\": [\n+        \"useclass_forwardref.ts\"\n+      ],\n+      \"expectations\": [\n+        {\n+          \"failureMessage\": \"Incorrect factory definition\",\n+          \"files\": [\n+            \"useclass_forwardref.js\"\n+          ]\n+        }\n+      ]\n+    },\n+    {\n+      \"description\": \"should have the pipe factory take precedence over the injectable factory, if a class has multiple decorators\",\n+      \"inputFiles\": [\n+        \"pipe_and_injectable.ts\"\n+      ],\n+      \"expectations\": [\n+        {\n+          \"failureMessage\": \"Invalid pipe factory function\",\n+          \"files\": [\n+            {\n+              \"expected\": \"pipe_and_injectable_pipe_last.js\",\n+              \"generated\": \"pipe_and_injectable.js\"\n+            }\n+          ],\n+          \"extraChecks\": [\n+            [\n+              \"verifyUniqueFactory\",\n+              \"MyPipe\"\n+            ]\n+          ]\n+        },\n+        {\n+          \"failureMessage\": \"Invalid pipe factory function\",\n+          \"files\": [\n+            {\n+              \"expected\": \"pipe_and_injectable_pipe_first.js\",\n+              \"generated\": \"pipe_and_injectable.js\"\n+            }\n+          ],\n+          \"extraChecks\": [\n+            [\n+              \"verifyUniqueFactory\",\n+              \"MyOtherPipe\"\n+            ]\n+          ]\n+        }\n+      ]\n+    }\n+  ]\n+}"
        },
        {
            "sha": "8fa4c3e930dbdba7ad7356862729f8e919388865",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/component_factory.js",
            "status": "added",
            "additions": 12,
            "deletions": 0,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fcomponent_factory.js",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fcomponent_factory.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fcomponent_factory.js?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,12 @@\n+\n+MyComponent.ɵfac = function MyComponent_Factory(t) {\n+  return new (t || MyComponent)(\n+    $r3$.ɵɵinjectAttribute('name'),\n+    $r3$.ɵɵdirectiveInject(MyService),\n+    $r3$.ɵɵdirectiveInject(MyService, 1),\n+    $r3$.ɵɵdirectiveInject(MyService, 2),\n+    $r3$.ɵɵdirectiveInject(MyService, 4),\n+    $r3$.ɵɵdirectiveInject(MyService, 8),\n+    $r3$.ɵɵdirectiveInject(MyService, 10)\n+  );\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "fa992ec008fb8a27f3b8d9aeb89ff855c0418f4b",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/component_factory.ts",
            "status": "added",
            "additions": 22,
            "deletions": 0,
            "changes": 22,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fcomponent_factory.ts",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fcomponent_factory.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fcomponent_factory.ts?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,22 @@\n+import {Attribute, Component, Host, Injectable, NgModule, Optional, Self, SkipSelf} from '@angular/core';\n+\n+@Injectable()\n+export class MyService {\n+}\n+\n+@Component({selector: 'my-component', template: ``})\n+export class MyComponent {\n+  constructor(\n+      @Attribute('name') name: string,\n+      s1: MyService,\n+      @Host() s2: MyService,\n+      @Self() s4: MyService,\n+      @SkipSelf() s3: MyService,\n+      @Optional() s5: MyService,\n+      @Self() @Optional() s6: MyService,\n+  ) {}\n+}\n+\n+@NgModule({declarations: [MyComponent], providers: [MyService]})\n+export class MyModule {\n+}"
        },
        {
            "sha": "ccbdc2cdf6b9c01e89792bad177e7e6bc6798355",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/ctor_overload.ts",
            "status": "added",
            "additions": 10,
            "deletions": 0,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fctor_overload.ts",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fctor_overload.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fctor_overload.ts?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,10 @@\n+import {Injectable, Optional} from '@angular/core';\n+\n+class MyDependency {}\n+class MyOptionalDependency {}\n+\n+@Injectable()\n+export class MyService {\n+  constructor(dep: MyDependency);\n+  constructor(dep: MyDependency, @Optional() optionalDep?: MyOptionalDependency) {}\n+}"
        },
        {
            "sha": "465fb48a169bd2ce00ee938b607bf4d8eb1c798f",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/ctor_overload_fac.js",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fctor_overload_fac.js",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fctor_overload_fac.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fctor_overload_fac.js?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,3 @@\n+MyService.ɵfac = function MyService_Factory(t) {\n+  return new (t || MyService)($r3$.ɵɵinject(MyDependency), $r3$.ɵɵinject(MyOptionalDependency, 8));\n+}"
        },
        {
            "sha": "1ee1909bb2f5469b244a8b51919f585859a68d11",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/ctor_overload_prov.js",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fctor_overload_prov.js",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fctor_overload_prov.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fctor_overload_prov.js?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,4 @@\n+MyService.ɵprov = $r3$.ɵɵdefineInjectable({\n+  token: MyService,\n+  factory: MyService.ɵfac\n+});"
        },
        {
            "sha": "ee10539855f012624d57f5b5d24bccb1fabeb3e4",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/injectable_factory.ts",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Finjectable_factory.ts",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Finjectable_factory.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Finjectable_factory.ts?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,8 @@\n+import {Injectable} from '@angular/core';\n+\n+class MyDependency {}\n+\n+@Injectable()\n+export class MyService {\n+  constructor(dep: MyDependency) {}\n+}"
        },
        {
            "sha": "f6c3dbe787ac0f49a698356c03424da90e607240",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/injectable_factory_fac.js",
            "status": "added",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Finjectable_factory_fac.js",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Finjectable_factory_fac.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Finjectable_factory_fac.js?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,3 @@\n+MyService.ɵfac = function MyService_Factory(t) {\n+  return new (t || MyService)($r3$.ɵɵinject(MyDependency));\n+}"
        },
        {
            "sha": "1ee1909bb2f5469b244a8b51919f585859a68d11",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/injectable_factory_prov.js",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Finjectable_factory_prov.js",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Finjectable_factory_prov.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Finjectable_factory_prov.js?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,4 @@\n+MyService.ɵprov = $r3$.ɵɵdefineInjectable({\n+  token: MyService,\n+  factory: MyService.ɵfac\n+});"
        },
        {
            "sha": "8865aded71cd21b62d7fd3c444a479ed4cf413d7",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/pipe_and_injectable.ts",
            "status": "added",
            "additions": 31,
            "deletions": 0,
            "changes": 31,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fpipe_and_injectable.ts",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fpipe_and_injectable.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fpipe_and_injectable.ts?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,31 @@\n+import {Component, Injectable, NgModule, Pipe, PipeTransform} from '@angular/core';\n+\n+@Injectable()\n+class Service {\n+}\n+\n+@Injectable()\n+@Pipe({name: 'myPipe'})\n+export class MyPipe implements PipeTransform {\n+  constructor(service: Service) {}\n+  transform(value: any, ...args: any[]) {\n+    return value;\n+  }\n+}\n+\n+@Pipe({name: 'myOtherPipe'})\n+@Injectable()\n+export class MyOtherPipe implements PipeTransform {\n+  constructor(service: Service) {}\n+  transform(value: any, ...args: any[]) {\n+    return value;\n+  }\n+}\n+\n+@Component({selector: 'my-app', template: '{{0 | myPipe | myOtherPipe}}'})\n+export class MyApp {\n+}\n+\n+@NgModule({declarations: [MyPipe, MyOtherPipe, MyApp], providers: [Service]})\n+export class MyModule {\n+}"
        },
        {
            "sha": "17ad44d0cf50afa0012de3913e6d04584004b46c",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/pipe_and_injectable_pipe_first.js",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fpipe_and_injectable_pipe_first.js",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fpipe_and_injectable_pipe_first.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fpipe_and_injectable_pipe_first.js?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,4 @@\n+// NOTE The prov definition must be last so MyOtherPipe.fac is defined\n+MyOtherPipe.ɵfac = function MyOtherPipe_Factory(t) { return new (t || MyOtherPipe)($r3$.ɵɵdirectiveInject(Service)); };\n+MyOtherPipe.ɵpipe = i0.ɵɵdefinePipe({ name: \"myOtherPipe\", type: MyOtherPipe, pure: true });\n+MyOtherPipe.ɵprov = i0.ɵɵdefineInjectable({ token: MyOtherPipe, factory: MyOtherPipe.ɵfac });"
        },
        {
            "sha": "60855ff1216f062d71c00d88d62b7c37fb42e329",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/pipe_and_injectable_pipe_last.js",
            "status": "added",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fpipe_and_injectable_pipe_last.js",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fpipe_and_injectable_pipe_last.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fpipe_and_injectable_pipe_last.js?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,4 @@\n+// NOTE The prov definition must be last so MyPipe.fac is defined\n+MyPipe.ɵfac = function MyPipe_Factory(t) { return new (t || MyPipe)(i0.ɵɵdirectiveInject(Service)); };\n+MyPipe.ɵpipe = i0.ɵɵdefinePipe({ name: \"myPipe\", type: MyPipe, pure: true });\n+MyPipe.ɵprov = i0.ɵɵdefineInjectable({ token: MyPipe, factory: MyPipe.ɵfac });"
        },
        {
            "sha": "c55e0f0fd75e3881ed949d9aab85115aa1b3e37d",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/useclass_forwardref.js",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_forwardref.js",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_forwardref.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_forwardref.js?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,7 @@\n+SomeProvider.ɵprov = $r3$.ɵɵdefineInjectable({\n+  token: SomeProvider,\n+  factory: function(t) {\n+    return SomeProviderImpl.ɵfac(t);\n+  },\n+  providedIn: 'root'\n+});"
        },
        {
            "sha": "b2e58f9684e22c7ec47b68ba8dc348081b7c2c91",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/useclass_forwardref.ts",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_forwardref.ts",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_forwardref.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_forwardref.ts?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,9 @@\n+import {forwardRef, Injectable} from '@angular/core';\n+\n+@Injectable({providedIn: 'root', useClass: forwardRef(() => SomeProviderImpl)})\n+abstract class SomeProvider {\n+}\n+\n+@Injectable()\n+class SomeProviderImpl extends SomeProvider {\n+}"
        },
        {
            "sha": "ba5c55a499bfcf650037f719a8adaf14c6ea5690",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/useclass_with_deps.js",
            "status": "added",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_with_deps.js",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_with_deps.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_with_deps.js?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,13 @@\n+MyService.ɵprov = $r3$.ɵɵdefineInjectable({\n+  token: MyService,\n+  factory: function MyService_Factory(t) {\n+    let r = null;\n+    if (t) {\n+      r = new t();\n+    } else {\n+      r = new MyAlternateService($r3$.ɵɵinject(SomeDep));\n+    }\n+    return r;\n+  },\n+  providedIn: 'root'\n+});"
        },
        {
            "sha": "687bdf02470cacbba63148b54663f52d2b01b739",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/useclass_with_deps.ts",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_with_deps.ts",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_with_deps.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_with_deps.ts?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,11 @@\n+import {Injectable} from '@angular/core';\n+\n+class SomeDep {}\n+\n+@Injectable()\n+class MyAlternateService {\n+}\n+\n+@Injectable({providedIn: 'root', useClass: MyAlternateService, deps: [SomeDep]})\n+export class MyService {\n+}"
        },
        {
            "sha": "49c93b9752c2d6d6c121156892e7ffad211b0085",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/useclass_without_deps.js",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_without_deps.js",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_without_deps.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_without_deps.js?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,7 @@\n+MyService.ɵprov = $r3$.ɵɵdefineInjectable({\n+  token: MyService,\n+  factory: function(t) {\n+    return MyAlternateService.ɵfac(t);\n+  },\n+  providedIn: 'root'\n+});"
        },
        {
            "sha": "c0c6af10b0a9790bdb7588242209cb5d4182c22b",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/useclass_without_deps.ts",
            "status": "added",
            "additions": 9,
            "deletions": 0,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_without_deps.ts",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_without_deps.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fuseclass_without_deps.ts?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,9 @@\n+import {Injectable} from '@angular/core';\n+\n+@Injectable()\n+class MyAlternateService {\n+}\n+\n+@Injectable({providedIn: 'root', useClass: MyAlternateService})\n+export class MyService {\n+}"
        },
        {
            "sha": "8679010746e42e99c2b2982acd313d22dc4f98be",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/usefactory_with_deps.js",
            "status": "added",
            "additions": 13,
            "deletions": 0,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fusefactory_with_deps.js",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fusefactory_with_deps.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fusefactory_with_deps.js?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,13 @@\n+MyService.ɵprov = $r3$.ɵɵdefineInjectable({\n+  token: MyService,\n+  factory: function MyService_Factory(t) {\n+    let r = null;\n+    if (t) {\n+      r = new t();\n+    } else {\n+      r = (() => new MyAlternateService())($r3$.ɵɵinject(SomeDep));\n+    }\n+    return r;\n+  },\n+  providedIn: 'root'\n+});"
        },
        {
            "sha": "c4821e3e6b54627b2348df5a6eace1f0346bb113",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/usefactory_with_deps.ts",
            "status": "added",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fusefactory_with_deps.ts",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fusefactory_with_deps.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fusefactory_with_deps.ts?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,8 @@\n+import {Injectable} from '@angular/core';\n+\n+class SomeDep {}\n+class MyAlternateService {}\n+\n+@Injectable({providedIn: 'root', useFactory: () => new MyAlternateService(), deps: [SomeDep]})\n+export class MyService {\n+}"
        },
        {
            "sha": "5a23d004e169327dec4757034c4f7d19bdddbdea",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/usefactory_without_deps.js",
            "status": "added",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fusefactory_without_deps.js",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fusefactory_without_deps.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fusefactory_without_deps.js?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,7 @@\n+MyService.ɵprov = $r3$.ɵɵdefineInjectable({\n+  token: MyService,\n+  factory: function() {\n+    return alternateFactory();\n+  },\n+  providedIn: 'root'\n+});"
        },
        {
            "sha": "d538ce18f06f46403a8c6e61539a29fd5a5ff96c",
            "filename": "packages/compiler-cli/test/compliance/test_cases/r3_view_compiler_di/di/usefactory_without_deps.ts",
            "status": "added",
            "additions": 11,
            "deletions": 0,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fusefactory_without_deps.ts",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fusefactory_without_deps.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_cases%2Fr3_view_compiler_di%2Fdi%2Fusefactory_without_deps.ts?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,11 @@\n+import {Injectable} from '@angular/core';\n+\n+class MyAlternateService {}\n+\n+function alternateFactory() {\n+  return new MyAlternateService();\n+}\n+\n+@Injectable({providedIn: 'root', useFactory: alternateFactory})\n+export class MyService {\n+}"
        },
        {
            "sha": "9d49645775ff2784dec8cdb6219b0a56bd88218c",
            "filename": "packages/compiler-cli/test/compliance/test_helpers/check_expectations.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 0,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fcheck_expectations.ts",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fcheck_expectations.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fcheck_expectations.ts?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -8,6 +8,7 @@\n import {FileSystem} from '../../../src/ngtsc/file_system';\n \n import {getBuildOutputDirectory, getRootDirectory} from './compile_test';\n+import {verifyUniqueFactory} from './di_checks';\n import {expectEmit} from './expect_emit';\n import {replaceMacros} from './expected_file_macros';\n import {ExpectedFile, ExtraCheck} from './get_compliance_tests';\n@@ -17,6 +18,7 @@ type ExtraCheckFunction = (generated: string, ...extraArgs: any[]) => boolean;\n const EXTRA_CHECK_FUNCTIONS: Record<string, ExtraCheckFunction> = {\n   verifyPlaceholdersIntegrity,\n   verifyUniqueConsts,\n+  verifyUniqueFactory,\n };\n \n /**"
        },
        {
            "sha": "2c983dbc40bf7af0cee1236de0758ec3bb311f46",
            "filename": "packages/compiler-cli/test/compliance/test_helpers/di_checks.ts",
            "status": "added",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fdi_checks.ts",
            "raw_url": "https://github.com/angular/angular/raw/c622b17b0d6f0837f0b5e42227cbbda022d44972/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fdi_checks.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Ftest%2Fcompliance%2Ftest_helpers%2Fdi_checks.ts?ref=c622b17b0d6f0837f0b5e42227cbbda022d44972",
            "patch": "@@ -0,0 +1,18 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+/**\n+ * Verifies that there is exactly one factory definition for the provided type.\n+ */\n+export function verifyUniqueFactory(output: string, type: string): boolean {\n+  const matches = output.match(new RegExp(type + '\\.ɵfac =', 'g'));\n+  if (matches === null) {\n+    return false;\n+  }\n+  return matches.length === 1;\n+}"
        }
    ],
    "stats": {
        "total": 772,
        "additions": 772,
        "deletions": 0
    }
}