{
    "author": "gkalpak",
    "message": "ci: improve error message when payload size check fails (#41116)\n\nPreviously, when a payload size check failed, the error message prompted\nthe user to update the size limits using a CI-specific file path, which\nwas confusing (esp. for external contributors). See, for example,\nhttps://circleci.com/gh/angular/angular/932733.\n\nThis commit improves the error message by printing the file path\nrelative to the repository root instead.\n\nPR Close #41116",
    "sha": "531f0bfb4a5c83818ae1e2cc5474ee9fece33fb8",
    "files": [
        {
            "sha": "90f8da7839942f53c9aac8cea70d05e6f1aa4509",
            "filename": "scripts/ci/payload-size.js",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/531f0bfb4a5c83818ae1e2cc5474ee9fece33fb8/scripts%2Fci%2Fpayload-size.js",
            "raw_url": "https://github.com/angular/angular/raw/531f0bfb4a5c83818ae1e2cc5474ee9fece33fb8/scripts%2Fci%2Fpayload-size.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/scripts%2Fci%2Fpayload-size.js?ref=531f0bfb4a5c83818ae1e2cc5474ee9fece33fb8",
            "patch": "@@ -10,6 +10,7 @@\n \n // Imports\n const fs = require('fs');\n+const path = require('path');\n \n // Get branch and project name from command line arguments.\n const [, , limitFile, project, branch, commit] = process.argv;\n@@ -68,8 +69,10 @@ for (const compressionType in limitSizes) {\n successMessages.concat(failureMessages).forEach(message => console.error(message));\n \n if (failed) {\n+  const projectRoot = path.resolve(__dirname, '../..');\n+  const limitFileRelPath = path.relative(projectRoot, limitFile);\n   console.info(\n-      `If this is a desired change, please update the size limits in file '${limitFile}'.`);\n+      `If this is a desired change, please update the size limits in file '${limitFileRelPath}'.`);\n   process.exit(1);\n } else {\n   console.info(`Payload size check passed. All diffs are less than 1% or 500 bytes.`);"
        }
    ],
    "stats": {
        "total": 5,
        "additions": 4,
        "deletions": 1
    }
}