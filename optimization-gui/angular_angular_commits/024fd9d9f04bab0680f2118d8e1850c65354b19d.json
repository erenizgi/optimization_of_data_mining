{
    "author": "DustinMEastway",
    "message": "docs: add cross-platform support to postbuild in schematics-for-libraries (#30966)\n\nUse the cross-platform `copyfiles` package instead of using `cp` which fails on Windows machines when copying files in the `postbuild` script of the \"schematics-for-libraries\" example.\n\nPR Close #30966",
    "sha": "024fd9d9f04bab0680f2118d8e1850c65354b19d",
    "files": [
        {
            "sha": "ef814921187cdb94102e41d1f20c3295088fdd3b",
            "filename": "aio/content/examples/schematics-for-libraries/projects/my-lib/package.json",
            "status": "modified",
            "additions": 7,
            "deletions": 6,
            "changes": 13,
            "blob_url": "https://github.com/angular/angular/blob/024fd9d9f04bab0680f2118d8e1850c65354b19d/aio%2Fcontent%2Fexamples%2Fschematics-for-libraries%2Fprojects%2Fmy-lib%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/024fd9d9f04bab0680f2118d8e1850c65354b19d/aio%2Fcontent%2Fexamples%2Fschematics-for-libraries%2Fprojects%2Fmy-lib%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fexamples%2Fschematics-for-libraries%2Fprojects%2Fmy-lib%2Fpackage.json?ref=024fd9d9f04bab0680f2118d8e1850c65354b19d",
            "patch": "@@ -5,11 +5,8 @@\n   \"version\": \"0.0.1\",\n // #enddocregion collection\n   \"scripts\": {\n-    \"build\": \"../../node_modules/.bin/tsc -p tsconfig.schematics.json\",\n-    \"copy:schemas\": \"cp --parents schematics/*/schema.json ../../dist/my-lib/\",\n-    \"copy:files\": \"cp --parents -p schematics/*/files/** ../../dist/my-lib/\",\n-    \"copy:collection\": \"cp schematics/collection.json ../../dist/my-lib/schematics/collection.json\",\n-    \"postbuild\": \"npm run copy:schemas && npm run copy:files && npm run copy:collection\"\n+    \"build\": \"tsc -p tsconfig.schematics.json\",\n+    \"postbuild\": \"copyfiles schematics/*/schema.json schematics/*/files/** schematics/collection.json ../../dist/my-lib/\"\n   },\n   \"peerDependencies\": {\n     \"@angular/common\": \"^7.2.0\",\n@@ -21,7 +18,11 @@\n // #docregion ng-add\n   \"ng-add\": {\n     \"save\": \"devDependencies\"\n-  }\n+  },\n // #enddocregion ng-add\n+  \"devDependencies\": {\n+    \"copyfiles\": \"file:../../node_modules/copyfiles\",\n+    \"typescript\": \"file:../../node_modules/typescript\"\n+  }\n // #docregion collection\n }"
        },
        {
            "sha": "76e78f3ade3736847235f741d1b232c9f8e678e6",
            "filename": "aio/content/guide/schematics-for-libraries.md",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/024fd9d9f04bab0680f2118d8e1850c65354b19d/aio%2Fcontent%2Fguide%2Fschematics-for-libraries.md",
            "raw_url": "https://github.com/angular/angular/raw/024fd9d9f04bab0680f2118d8e1850c65354b19d/aio%2Fcontent%2Fguide%2Fschematics-for-libraries.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fschematics-for-libraries.md?ref=024fd9d9f04bab0680f2118d8e1850c65354b19d",
            "patch": "@@ -98,8 +98,9 @@ To tell the library how to build the schematics, add a `tsconfig.schematics.json\n     </code-example>\n \n     * The `build` script compiles your schematic using the custom `tsconfig.schematics.json` file.\n-    * The `copy:*` statements copy compiled schematic files into the proper locations in the library output folder in order to preserve the file structure.\n     * The `postbuild` script copies the schematic files after the `build` script completes.\n+    * Both the `build` and the `postbuild` scripts require dependencies that are found in their parent directory.\n+      They can be installed by running `npm install` prior to running the scripts.\n \n ## Providing generation support\n "
        },
        {
            "sha": "3a65bb44e8a5d27a94ddc030720a210b1236c7df",
            "filename": "aio/tools/examples/shared/boilerplate/cli/package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 0,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/024fd9d9f04bab0680f2118d8e1850c65354b19d/aio%2Ftools%2Fexamples%2Fshared%2Fboilerplate%2Fcli%2Fpackage.json",
            "raw_url": "https://github.com/angular/angular/raw/024fd9d9f04bab0680f2118d8e1850c65354b19d/aio%2Ftools%2Fexamples%2Fshared%2Fboilerplate%2Fcli%2Fpackage.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Ftools%2Fexamples%2Fshared%2Fboilerplate%2Fcli%2Fpackage.json?ref=024fd9d9f04bab0680f2118d8e1850c65354b19d",
            "patch": "@@ -32,6 +32,7 @@\n     \"@angular/compiler-cli\": \"~13.0.0-next.0\",\n     \"@types/jasmine\": \"~3.10.0\",\n     \"@types/node\": \"^12.11.1\",\n+    \"copyfiles\": \"^2.4.1\",\n     \"jasmine-core\": \"~3.10.0\",\n     \"jasmine-marbles\": \"~0.8.3\",\n     \"jasmine-spec-reporter\": \"~7.0.0\","
        }
    ],
    "stats": {
        "total": 17,
        "additions": 10,
        "deletions": 7
    }
}