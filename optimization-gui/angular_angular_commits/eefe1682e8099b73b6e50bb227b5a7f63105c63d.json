{
    "author": "gkalpak",
    "message": "fix(core): correctly handle `null` or `undefined` in `ErrorHandler#handleError()` (#42881)\n\nSince `ErrorHandler#handleError()` expects an argument of type `any` it\nshould be able to handle values such as `null` and `undefined`.\nPreviously, it failed to handle these values, because it was trying to\naccess properties on them.\n\nThis commit fixes it by ensuring no properties are accessed on `null` or\n`undefined` values.\n\nNOTE: This is part of fully addressing #28106.\n\nFixes #21252\n\nPR Close #42881",
    "sha": "eefe1682e8099b73b6e50bb227b5a7f63105c63d",
    "files": [
        {
            "sha": "794d199b1d6b348eabadbe5706616b6421d4b26c",
            "filename": "packages/core/src/error_handler.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 4,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/eefe1682e8099b73b6e50bb227b5a7f63105c63d/packages%2Fcore%2Fsrc%2Ferror_handler.ts",
            "raw_url": "https://github.com/angular/angular/raw/eefe1682e8099b73b6e50bb227b5a7f63105c63d/packages%2Fcore%2Fsrc%2Ferror_handler.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Ferror_handler.ts?ref=eefe1682e8099b73b6e50bb227b5a7f63105c63d",
            "patch": "@@ -7,6 +7,7 @@\n  */\n \n import {getDebugContext, getErrorLogger, getOriginalError} from './errors';\n+import {DebugContext} from './view/types';\n \n \n \n@@ -58,17 +59,17 @@ export class ErrorHandler {\n   }\n \n   /** @internal */\n-  _findContext(error: any): any {\n+  _findContext(error: any): DebugContext|null {\n     return error ? (getDebugContext(error) || this._findContext(getOriginalError(error))) : null;\n   }\n \n   /** @internal */\n-  _findOriginalError(error: Error): any {\n-    let e = getOriginalError(error);\n+  _findOriginalError(error: any): Error|null {\n+    let e = error && getOriginalError(error);\n     while (e && getOriginalError(e)) {\n       e = getOriginalError(e);\n     }\n \n-    return e;\n+    return e || null;\n   }\n }"
        },
        {
            "sha": "5d51a977a1244f59e6c04433ac817ce8a6ac7651",
            "filename": "packages/core/src/errors.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/eefe1682e8099b73b6e50bb227b5a7f63105c63d/packages%2Fcore%2Fsrc%2Ferrors.ts",
            "raw_url": "https://github.com/angular/angular/raw/eefe1682e8099b73b6e50bb227b5a7f63105c63d/packages%2Fcore%2Fsrc%2Ferrors.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Ferrors.ts?ref=eefe1682e8099b73b6e50bb227b5a7f63105c63d",
            "patch": "@@ -21,8 +21,8 @@ export function getOriginalError(error: Error): Error {\n   return (error as any)[ERROR_ORIGINAL_ERROR];\n }\n \n-export function getErrorLogger(error: Error): (console: Console, ...values: any[]) => void {\n-  return (error as any)[ERROR_LOGGER] || defaultErrorLogger;\n+export function getErrorLogger(error: unknown): (console: Console, ...values: any[]) => void {\n+  return error && (error as any)[ERROR_LOGGER] || defaultErrorLogger;\n }\n \n "
        },
        {
            "sha": "3b75a9ce6555d810160118edc7ea0d97b812ad47",
            "filename": "packages/core/test/error_handler_spec.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 1,
            "changes": 12,
            "blob_url": "https://github.com/angular/angular/blob/eefe1682e8099b73b6e50bb227b5a7f63105c63d/packages%2Fcore%2Ftest%2Ferror_handler_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/eefe1682e8099b73b6e50bb227b5a7f63105c63d/packages%2Fcore%2Ftest%2Ferror_handler_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Ferror_handler_spec.ts?ref=eefe1682e8099b73b6e50bb227b5a7f63105c63d",
            "patch": "@@ -23,7 +23,7 @@ function errorToString(error: any) {\n   const errorHandler = new ErrorHandler();\n   (errorHandler as any)._console = logger as any;\n   errorHandler.handleError(error);\n-  return logger.res.map(line => line.join('#')).join('\\n');\n+  return logger.res.map(line => line.map(x => `${x}`).join('#')).join('\\n');\n }\n \n describe('ErrorHandler', () => {\n@@ -32,6 +32,16 @@ describe('ErrorHandler', () => {\n     expect(e).toContain('message!');\n   });\n \n+  it('should correctly handle primitive values', () => {\n+    expect(errorToString('message')).toBe('ERROR#message');\n+    expect(errorToString(404)).toBe('ERROR#404');\n+    expect(errorToString(0)).toBe('ERROR#0');\n+    expect(errorToString(true)).toBe('ERROR#true');\n+    expect(errorToString(false)).toBe('ERROR#false');\n+    expect(errorToString(null)).toBe('ERROR#null');\n+    expect(errorToString(undefined)).toBe('ERROR#undefined');\n+  });\n+\n   describe('context', () => {\n     it('should print nested context', () => {\n       const cause = new Error('message!');"
        }
    ],
    "stats": {
        "total": 25,
        "additions": 18,
        "deletions": 7
    }
}