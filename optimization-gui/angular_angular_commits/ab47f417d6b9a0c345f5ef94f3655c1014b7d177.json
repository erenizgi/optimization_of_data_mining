{
    "author": "gkalpak",
    "message": "test(core): fix `Function#name` shim used in IE11 (#41439)\n\nSince IE11 does not support `Function#name`, we use a shim in tests that\nparses the stringified function to extract the name. Previously, that\nshim would cache the computed name on the function to speed up future\ninvocations. However, this resulted in incorrect values for functions\nthat \"extended\" other functions (such as the code generated by\nTypeScript when downleveling ES2015 classes that extended other\nclasses).\n\nTo avoid issues such as #41416 (see also [internal discussion][1]), this\ncommit removes the caching of names. This is not expected to noticeably\naffect performance, since (a) it is only used in tests, (b) it is only\nused on browsers that do not natively support `Function#name` (i.e.\nIE11) and (c) accessing function names is rare and inexpensive compared\nto other operations that happen during testing.\n\n[1]: https://angular-team.slack.com/archives/CB4UC1932/p1617285258058000\n\nPR Close #41439",
    "sha": "ab47f417d6b9a0c345f5ef94f3655c1014b7d177",
    "files": [
        {
            "sha": "72891da672bb905f28d9ee741f700742c92d3783",
            "filename": "third_party/shims_for_IE.js",
            "status": "modified",
            "additions": 1,
            "deletions": 5,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/ab47f417d6b9a0c345f5ef94f3655c1014b7d177/third_party%2Fshims_for_IE.js",
            "raw_url": "https://github.com/angular/angular/raw/ab47f417d6b9a0c345f5ef94f3655c1014b7d177/third_party%2Fshims_for_IE.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/third_party%2Fshims_for_IE.js?ref=ab47f417d6b9a0c345f5ef94f3655c1014b7d177",
            "patch": "@@ -6,11 +6,7 @@ if (!Object.hasOwnProperty('name')) {\n   Object.defineProperty(Function.prototype, 'name', {\n     get: function() {\n       var matches = this.toString().match(/^\\s*function\\s*((?![0-9])[a-zA-Z0-9_$]*)\\s*\\(/);\n-      var name = matches && matches.length > 1 ? matches[1] : \"\";\n-      // For better performance only parse once, and then cache the\n-      // result through a new accessor for repeated access.\n-      Object.defineProperty(this, 'name', {value: name});\n-      return name;\n+      return matches && matches.length > 1 ? matches[1] : '';\n     }\n   });\n }"
        }
    ],
    "stats": {
        "total": 6,
        "additions": 1,
        "deletions": 5
    }
}