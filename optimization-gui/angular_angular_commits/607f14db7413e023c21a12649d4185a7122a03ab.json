{
    "author": "alan-agius4",
    "message": "build: update `rollup` dependencies (#43737)\n\nWith this change we update `rollup` and remove the usage of no longer maintained `rollup-plugin-commonjs` and `rollup-plugin-node-resolve` plugins.\n\nPR Close #43737",
    "sha": "607f14db7413e023c21a12649d4185a7122a03ab",
    "files": [
        {
            "sha": "50bb6a8e565c7ff302cd2ac1ae13a24ba2717287",
            "filename": "package.json",
            "status": "modified",
            "additions": 1,
            "deletions": 3,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/607f14db7413e023c21a12649d4185a7122a03ab/package.json",
            "raw_url": "https://github.com/angular/angular/raw/607f14db7413e023c21a12649d4185a7122a03ab/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=607f14db7413e023c21a12649d4185a7122a03ab",
            "patch": "@@ -140,9 +140,7 @@\n     \"puppeteer\": \"5.4.1\",\n     \"reflect-metadata\": \"^0.1.3\",\n     \"requirejs\": \"^2.3.6\",\n-    \"rollup\": \"2.56.3\",\n-    \"rollup-plugin-commonjs\": \"^10.1.0\",\n-    \"rollup-plugin-node-resolve\": \"^5.2.0\",\n+    \"rollup\": \"~2.58.0\",\n     \"rollup-plugin-preserve-shebang\": \"^1.0.1\",\n     \"rollup-plugin-sourcemaps\": \"^0.6.3\",\n     \"rxjs\": \"^6.5.3\","
        },
        {
            "sha": "ff2b4466ab4433d58c17a808f7e114965fa92c6c",
            "filename": "packages/zone.js/rollup.config.js",
            "status": "modified",
            "additions": 10,
            "deletions": 9,
            "changes": 19,
            "blob_url": "https://github.com/angular/angular/blob/607f14db7413e023c21a12649d4185a7122a03ab/packages%2Fzone.js%2Frollup.config.js",
            "raw_url": "https://github.com/angular/angular/raw/607f14db7413e023c21a12649d4185a7122a03ab/packages%2Fzone.js%2Frollup.config.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Frollup.config.js?ref=607f14db7413e023c21a12649d4185a7122a03ab",
            "patch": "@@ -1,13 +1,13 @@\n-const node = require('rollup-plugin-node-resolve');\n-const commonjs = require('rollup-plugin-commonjs');\n+const node = require('@rollup/plugin-node-resolve').default;\n+const commonjs = require('@rollup/plugin-commonjs');\n \n // Parse the stamp file produced by Bazel from the version control system\n let version = '<unknown>';\n if (bazel_version_file) {\n   const versionTag = require('fs')\n                          .readFileSync(bazel_version_file, {encoding: 'utf-8'})\n                          .split('\\n')\n-                         .find(s => s.startsWith('BUILD_SCM_VERSION'));\n+                         .find((s) => s.startsWith('BUILD_SCM_VERSION'));\n   // Don't assume BUILD_SCM_VERSION exists\n   if (versionTag) {\n     version = versionTag.split(' ')[1].trim();\n@@ -36,11 +36,12 @@ module.exports = {\n     }),\n     commonjs(),\n   ],\n-  external: id => {\n-    if (/build-esm/.test(id)) {\n+  external: (id) => {\n+    if (/zone\\.js[\\\\/]lib/.test(id)) {\n       return false;\n     }\n-    return /rxjs/.test(id) || /electron/.test(id);\n+\n+    return /rxjs|electron/.test(id);\n   },\n   output: {\n     globals: {\n@@ -51,8 +52,8 @@ module.exports = {\n       'rxjs/Scheduler': 'Rx.Scheduler',\n       'rxjs/scheduler/asap': 'Rx.Scheduler',\n       'rxjs/scheduler/async': 'Rx.Scheduler',\n-      'rxjs/symbol/rxSubscriber': 'Rx.Symbol'\n+      'rxjs/symbol/rxSubscriber': 'Rx.Symbol',\n     },\n-    banner\n+    banner,\n   },\n-}\n+};"
        },
        {
            "sha": "4d868e8ff06565ebb95813ed3bf2179e5dcc7a06",
            "filename": "packages/zone.js/test/karma_test.bzl",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/607f14db7413e023c21a12649d4185a7122a03ab/packages%2Fzone.js%2Ftest%2Fkarma_test.bzl",
            "raw_url": "https://github.com/angular/angular/raw/607f14db7413e023c21a12649d4185a7122a03ab/packages%2Fzone.js%2Ftest%2Fkarma_test.bzl",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Ftest%2Fkarma_test.bzl?ref=607f14db7413e023c21a12649d4185a7122a03ab",
            "patch": "@@ -16,8 +16,8 @@ def karma_test_prepare(name, env_srcs, env_deps, env_entry_point, test_srcs, tes\n         silent = True,\n         deps = [\n             \":\" + name + \"_env\",\n-            \"@npm//rollup-plugin-commonjs\",\n-            \"@npm//rollup-plugin-node-resolve\",\n+            \"@npm//@rollup/plugin-commonjs\",\n+            \"@npm//@rollup/plugin-node-resolve\",\n         ],\n     )\n     ts_library(\n@@ -35,8 +35,8 @@ def karma_test_prepare(name, env_srcs, env_deps, env_entry_point, test_srcs, tes\n         config_file = \"//packages/zone.js:rollup.config.js\",\n         deps = [\n             \":\" + name + \"_test\",\n-            \"@npm//rollup-plugin-commonjs\",\n-            \"@npm//rollup-plugin-node-resolve\",\n+            \"@npm//@rollup/plugin-commonjs\",\n+            \"@npm//@rollup/plugin-node-resolve\",\n         ],\n     )\n "
        },
        {
            "sha": "0910f4eb0667d3223f942d1c830a10accd0abe48",
            "filename": "packages/zone.js/tools.bzl",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/607f14db7413e023c21a12649d4185a7122a03ab/packages%2Fzone.js%2Ftools.bzl",
            "raw_url": "https://github.com/angular/angular/raw/607f14db7413e023c21a12649d4185a7122a03ab/packages%2Fzone.js%2Ftools.bzl",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fzone.js%2Ftools.bzl?ref=607f14db7413e023c21a12649d4185a7122a03ab",
            "patch": "@@ -12,8 +12,8 @@ def zone_rollup_bundle(module_name, entry_point, rollup_config):\n         sourcemap = \"false\",\n         deps = [\n             \"//packages/zone.js/lib\",\n-            \"@npm//rollup-plugin-commonjs\",\n-            \"@npm//rollup-plugin-node-resolve\",\n+            \"@npm//@rollup/plugin-commonjs\",\n+            \"@npm//@rollup/plugin-node-resolve\",\n         ],\n     )\n "
        },
        {
            "sha": "82225ce90104bf4446780d56a5126f63587bf52b",
            "filename": "yarn.lock",
            "status": "modified",
            "additions": 4,
            "deletions": 45,
            "changes": 49,
            "blob_url": "https://github.com/angular/angular/blob/607f14db7413e023c21a12649d4185a7122a03ab/yarn.lock",
            "raw_url": "https://github.com/angular/angular/raw/607f14db7413e023c21a12649d4185a7122a03ab/yarn.lock",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/yarn.lock?ref=607f14db7413e023c21a12649d4185a7122a03ab",
            "patch": "@@ -5865,11 +5865,6 @@ estraverse@^5.2.0:\n   resolved \"https://registry.yarnpkg.com/estraverse/-/estraverse-5.2.0.tgz#307df42547e6cc7324d3cf03c155d5cdb8c53880\"\n   integrity sha512-BxbNGGNm0RyRYvUdHpIwv9IWzeM9XClbOxwoATuFdOE7ZE6wHL+HQ5T8hoPM+zHvmKzzsEqhgy0GrQ5X13afiQ==\n \n-estree-walker@^0.6.1:\n-  version \"0.6.1\"\n-  resolved \"https://registry.yarnpkg.com/estree-walker/-/estree-walker-0.6.1.tgz#53049143f40c6eb918b23671d1fe3219f3a1b362\"\n-  integrity sha512-SqmZANLWS0mnatqbSfRP5g8OXZC12Fgg1IwNtLsyHDzJizORW4khDfjPqJZsemPWBB2uqykUah5YpQ6epsqC/w==\n-\n estree-walker@^1.0.1:\n   version \"1.0.1\"\n   resolved \"https://registry.yarnpkg.com/estree-walker/-/estree-walker-1.0.1.tgz#31bc5d612c96b704106b477e6dd5d8aa138cb700\"\n@@ -8276,7 +8271,7 @@ is-promise@^2.2.2:\n   resolved \"https://registry.yarnpkg.com/is-promise/-/is-promise-2.2.2.tgz#39ab959ccbf9a774cf079f7b40c7a26f763135f1\"\n   integrity sha512-+lP4/6lKUBfQjZ2pdxThZvLUAafmZb8OAxFb8XXtiQmS35INgr85hdOGoEs124ez1FCnZJt6jau/T+alh58QFQ==\n \n-is-reference@^1.1.2, is-reference@^1.2.1:\n+is-reference@^1.2.1:\n   version \"1.2.1\"\n   resolved \"https://registry.yarnpkg.com/is-reference/-/is-reference-1.2.1.tgz#8b2dac0b371f4bc994fdeaba9eb542d03002d0b7\"\n   integrity sha512-U82MsXXiFIrjCK4otLT+o2NA2Cd2g5MLoOVXUZjIOhLurrRxpEXzI8O0KZHr3IjLvlAH1kTPYSuqer5T9ZVBKQ==\n@@ -9456,7 +9451,7 @@ madge@^5.0.0:\n     typescript \"^3.9.5\"\n     walkdir \"^0.4.1\"\n \n-magic-string@0.25.7, magic-string@^0.25.2, magic-string@^0.25.7:\n+magic-string@0.25.7, magic-string@^0.25.7:\n   version \"0.25.7\"\n   resolved \"https://registry.yarnpkg.com/magic-string/-/magic-string-0.25.7.tgz#3f497d6fd34c669c6798dcb821f2ef31f5445051\"\n   integrity sha512-4CrMT5DOHTDk4HYDlzmwu4FVCcIYI8gauveasrdCu2IKIFOJ3f0v/8MDGJCDL9oD2ppz/Av1b0Nj345H9M+XIA==\n@@ -12288,7 +12283,7 @@ resolve-url@^0.2.1:\n   resolved \"https://registry.yarnpkg.com/resolve-url/-/resolve-url-0.2.1.tgz#2c637fe77c893afd2a663fe21aa9080068e2052a\"\n   integrity sha1-LGN/53yJOv0qZj/iGqkIAGjiBSo=\n \n-resolve@1.20.0, resolve@^1.1.6, resolve@^1.1.7, resolve@^1.10.0, resolve@^1.11.0, resolve@^1.11.1, resolve@^1.14.2, resolve@^1.17.0, resolve@^1.19.0, resolve@^1.3.2, resolve@^1.4.0:\n+resolve@1.20.0, resolve@^1.1.6, resolve@^1.1.7, resolve@^1.10.0, resolve@^1.14.2, resolve@^1.17.0, resolve@^1.19.0, resolve@^1.3.2, resolve@^1.4.0:\n   version \"1.20.0\"\n   resolved \"https://registry.yarnpkg.com/resolve/-/resolve-1.20.0.tgz#629a013fb3f70755d6f0b7935cc1c2c5378b1975\"\n   integrity sha512-wENBPt4ySzg4ybFQW2TT1zMQucPK95HSh/nq2CFTZVOGut2+pQvSsgtda4d26YrYcr067wjbmzOG8byDPBX63A==\n@@ -12419,28 +12414,6 @@ roarr@^2.15.3:\n     semver-compare \"^1.0.0\"\n     sprintf-js \"^1.1.2\"\n \n-rollup-plugin-commonjs@^10.1.0:\n-  version \"10.1.0\"\n-  resolved \"https://registry.yarnpkg.com/rollup-plugin-commonjs/-/rollup-plugin-commonjs-10.1.0.tgz#417af3b54503878e084d127adf4d1caf8beb86fb\"\n-  integrity sha512-jlXbjZSQg8EIeAAvepNwhJj++qJWNJw1Cl0YnOqKtP5Djx+fFGkp3WRh+W0ASCaFG5w1jhmzDxgu3SJuVxPF4Q==\n-  dependencies:\n-    estree-walker \"^0.6.1\"\n-    is-reference \"^1.1.2\"\n-    magic-string \"^0.25.2\"\n-    resolve \"^1.11.0\"\n-    rollup-pluginutils \"^2.8.1\"\n-\n-rollup-plugin-node-resolve@^5.2.0:\n-  version \"5.2.0\"\n-  resolved \"https://registry.yarnpkg.com/rollup-plugin-node-resolve/-/rollup-plugin-node-resolve-5.2.0.tgz#730f93d10ed202473b1fb54a5997a7db8c6d8523\"\n-  integrity sha512-jUlyaDXts7TW2CqQ4GaO5VJ4PwwaV8VUGA7+km3n6k6xtOEacf61u0VXwN80phY/evMcaS+9eIeJ9MOyDxt5Zw==\n-  dependencies:\n-    \"@types/resolve\" \"0.0.8\"\n-    builtin-modules \"^3.1.0\"\n-    is-module \"^1.0.0\"\n-    resolve \"^1.11.1\"\n-    rollup-pluginutils \"^2.8.1\"\n-\n rollup-plugin-node-resolve@~4.2.3:\n   version \"4.2.4\"\n   resolved \"https://registry.yarnpkg.com/rollup-plugin-node-resolve/-/rollup-plugin-node-resolve-4.2.4.tgz#7d370f8d6fd3031006a0032c38262dd9be3c6250\"\n@@ -12476,21 +12449,7 @@ rollup-plugin-terser@^7.0.1:\n     serialize-javascript \"^4.0.0\"\n     terser \"^5.0.0\"\n \n-rollup-pluginutils@^2.8.1:\n-  version \"2.8.2\"\n-  resolved \"https://registry.yarnpkg.com/rollup-pluginutils/-/rollup-pluginutils-2.8.2.tgz#72f2af0748b592364dbd3389e600e5a9444a351e\"\n-  integrity sha512-EEp9NhnUkwY8aif6bxgovPHMoMoNr2FulJziTndpt5H9RdwC47GSGuII9XxpSdzVGM0GWrNPHV6ie1LTNJPaLQ==\n-  dependencies:\n-    estree-walker \"^0.6.1\"\n-\n-rollup@2.56.3:\n-  version \"2.56.3\"\n-  resolved \"https://registry.yarnpkg.com/rollup/-/rollup-2.56.3.tgz#b63edadd9851b0d618a6d0e6af8201955a77aeff\"\n-  integrity sha512-Au92NuznFklgQCUcV96iXlxUbHuB1vQMaH76DHl5M11TotjOHwqk9CwcrT78+Tnv4FN9uTBxq6p4EJoYkpyekg==\n-  optionalDependencies:\n-    fsevents \"~2.3.2\"\n-\n-rollup@2.58.0:\n+rollup@2.58.0, rollup@~2.58.0:\n   version \"2.58.0\"\n   resolved \"https://registry.yarnpkg.com/rollup/-/rollup-2.58.0.tgz#a643983365e7bf7f5b7c62a8331b983b7c4c67fb\"\n   integrity sha512-NOXpusKnaRpbS7ZVSzcEXqxcLDOagN6iFS8p45RkoiMqPHDLwJm758UF05KlMoCRbLBTZsPOIa887gZJ1AiXvw=="
        }
    ],
    "stats": {
        "total": 84,
        "additions": 21,
        "deletions": 63
    }
}