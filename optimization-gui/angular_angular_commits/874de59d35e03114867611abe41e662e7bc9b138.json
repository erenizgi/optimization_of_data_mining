{
    "author": "petebacondarwin",
    "message": "fix(compiler-cli): change default ngcc  hash algorithm to be FIPS compliant (#42582)\n\nThe previous default algorithm was `md5`, which is not compliant with FIPS.\nThe default is now set to `sha256`, which is compliant.\n\nFixes #42577\n\nPR Close #42582",
    "sha": "874de59d35e03114867611abe41e662e7bc9b138",
    "files": [
        {
            "sha": "e699515c9ea0cb40da10d1475a96340455264dba",
            "filename": "packages/compiler-cli/ngcc/src/packages/configuration.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/874de59d35e03114867611abe41e662e7bc9b138/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fpackages%2Fconfiguration.ts",
            "raw_url": "https://github.com/angular/angular/raw/874de59d35e03114867611abe41e662e7bc9b138/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fpackages%2Fconfiguration.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Fsrc%2Fpackages%2Fconfiguration.ts?ref=874de59d35e03114867611abe41e662e7bc9b138",
            "patch": "@@ -28,7 +28,7 @@ export interface NgccProjectConfig<T = RawNgccPackageConfig> {\n   /**\n    * Name of hash algorithm used to generate hashes of the configuration.\n    *\n-   * Defaults to `md5`.\n+   * Defaults to `sha256`.\n    */\n   hashAlgorithm?: string;\n }\n@@ -308,7 +308,7 @@ export class NgccConfiguration {\n \n   private processProjectConfig(projectConfig: NgccProjectConfig): PartiallyProcessedConfig {\n     const processedConfig:\n-        PartiallyProcessedConfig = {packages: {}, locking: {}, hashAlgorithm: 'md5'};\n+        PartiallyProcessedConfig = {packages: {}, locking: {}, hashAlgorithm: 'sha256'};\n \n     // locking configuration\n     if (projectConfig.locking !== undefined) {"
        },
        {
            "sha": "7003d00ba9d143f67e220a4faf3fec2adb177a4f",
            "filename": "packages/compiler-cli/ngcc/test/packages/configuration_spec.ts",
            "status": "modified",
            "additions": 11,
            "deletions": 10,
            "changes": 21,
            "blob_url": "https://github.com/angular/angular/blob/874de59d35e03114867611abe41e662e7bc9b138/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Fpackages%2Fconfiguration_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/874de59d35e03114867611abe41e662e7bc9b138/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Fpackages%2Fconfiguration_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Fpackages%2Fconfiguration_spec.ts?ref=874de59d35e03114867611abe41e662e7bc9b138",
            "patch": "@@ -48,9 +48,9 @@ runInEachFileSystem(() => {\n         }]);\n         const project1Conf = new NgccConfiguration(fs, project1);\n         const expectedProject1Config =\n-            `{\"packages\":{\"package-1\":[{\"entryPoints\":{\"./entry-point-1\":{}},\"versionRange\":\"*\"}]},\"locking\":{},\"hashAlgorithm\":\"md5\"}`;\n+            `{\"packages\":{\"package-1\":[{\"entryPoints\":{\"./entry-point-1\":{}},\"versionRange\":\"*\"}]},\"locking\":{},\"hashAlgorithm\":\"sha256\"}`;\n         expect(project1Conf.hash)\n-            .toEqual(createHash('md5').update(expectedProject1Config).digest('hex'));\n+            .toEqual(createHash('sha256').update(expectedProject1Config).digest('hex'));\n \n         const project2 = _Abs('/project-2');\n         const project2Config = fs.resolve(project2, 'ngcc.config.js');\n@@ -66,18 +66,19 @@ runInEachFileSystem(() => {\n         }]);\n         const project2Conf = new NgccConfiguration(fs, project2);\n         const expectedProject2Config =\n-            `{\"packages\":{\"package-1\":[{\"entryPoints\":{\"./entry-point-1\":{\"ignore\":true}},\"versionRange\":\"*\"}]},\"locking\":{},\"hashAlgorithm\":\"md5\"}`;\n+            `{\"packages\":{\"package-1\":[{\"entryPoints\":{\"./entry-point-1\":{\"ignore\":true}},\"versionRange\":\"*\"}]},\"locking\":{},\"hashAlgorithm\":\"sha256\"}`;\n         expect(project2Conf.hash)\n-            .toEqual(createHash('md5').update(expectedProject2Config).digest('hex'));\n+            .toEqual(createHash('sha256').update(expectedProject2Config).digest('hex'));\n       });\n \n       it('should compute a hash even if there is no project configuration', () => {\n         loadTestFiles([{name: _Abs('/project-1/empty.js'), contents: ``}]);\n         const configuration = new NgccConfiguration(fs, _Abs('/project-1'));\n         expect(configuration.hash)\n-            .toEqual(createHash('md5')\n-                         .update(JSON.stringify({packages: {}, locking: {}, hashAlgorithm: 'md5'}))\n-                         .digest('hex'));\n+            .toEqual(\n+                createHash('sha256')\n+                    .update(JSON.stringify({packages: {}, locking: {}, hashAlgorithm: 'sha256'}))\n+                    .digest('hex'));\n       });\n \n       it('should use a custom hash algorithm if specified in the config', () => {\n@@ -91,15 +92,15 @@ runInEachFileSystem(() => {\n               packages: {\n                 'package-1': {entryPoints: {'./entry-point-1': {}}},\n               },\n-              hashAlgorithm: 'sha256',\n+              hashAlgorithm: 'md5',\n             };`\n         }]);\n         const project1Conf = new NgccConfiguration(fs, project1);\n         const expectedProject1Config =\n-            `{\"packages\":{\"package-1\":[{\"entryPoints\":{\"./entry-point-1\":{}},\"versionRange\":\"*\"}]},\"locking\":{},\"hashAlgorithm\":\"sha256\"}`;\n+            `{\"packages\":{\"package-1\":[{\"entryPoints\":{\"./entry-point-1\":{}},\"versionRange\":\"*\"}]},\"locking\":{},\"hashAlgorithm\":\"md5\"}`;\n         expect(JSON.stringify((project1Conf as any).projectConfig)).toEqual(expectedProject1Config);\n         expect(project1Conf.hash)\n-            .toEqual(createHash('sha256').update(expectedProject1Config).digest('hex'));\n+            .toEqual(createHash('md5').update(expectedProject1Config).digest('hex'));\n       });\n     });\n "
        },
        {
            "sha": "e510719860d1f9ff9965120a683c6ad3121ee3ec",
            "filename": "packages/compiler-cli/ngcc/test/packages/entry_point_manifest_spec.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/874de59d35e03114867611abe41e662e7bc9b138/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Fpackages%2Fentry_point_manifest_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/874de59d35e03114867611abe41e662e7bc9b138/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Fpackages%2Fentry_point_manifest_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler-cli%2Fngcc%2Ftest%2Fpackages%2Fentry_point_manifest_spec.ts?ref=874de59d35e03114867611abe41e662e7bc9b138",
            "patch": "@@ -40,7 +40,7 @@ runInEachFileSystem(() => {\n       beforeEach(() => {\n         manifestFile = {\n           ngccVersion: NGCC_VERSION,\n-          lockFileHash: createHash('md5').update('LOCK FILE CONTENTS').digest('hex'),\n+          lockFileHash: createHash('sha256').update('LOCK FILE CONTENTS').digest('hex'),\n           configFileHash: config.hash,\n           entryPointPaths: []\n         };\n@@ -278,7 +278,7 @@ runInEachFileSystem(() => {\n             JSON.parse(fs.readFile(_Abs('/project/node_modules/__ngcc_entry_points__.json'))) as\n             EntryPointManifestFile;\n         expect(file.lockFileHash)\n-            .toEqual(createHash('md5').update('LOCK FILE CONTENTS').digest('hex'));\n+            .toEqual(createHash('sha256').update('LOCK FILE CONTENTS').digest('hex'));\n       });\n \n       it('should write a hash of the package-lock.json file', () => {\n@@ -288,7 +288,7 @@ runInEachFileSystem(() => {\n             JSON.parse(fs.readFile(_Abs('/project/node_modules/__ngcc_entry_points__.json'))) as\n             EntryPointManifestFile;\n         expect(file.lockFileHash)\n-            .toEqual(createHash('md5').update('LOCK FILE CONTENTS').digest('hex'));\n+            .toEqual(createHash('sha256').update('LOCK FILE CONTENTS').digest('hex'));\n       });\n \n       it('should write a hash of the project config', () => {"
        }
    ],
    "stats": {
        "total": 31,
        "additions": 16,
        "deletions": 15
    }
}