{
    "author": "petebacondarwin",
    "message": "fix(compiler): ensure JIT compilation of ɵɵngDeclarePipe() works (#40929)\n\nPreviously the compiler was not evaluating the JIT compilation\nof `ɵɵngDeclarePipe()` but there was no test to check it.\n\nPR Close #40929",
    "sha": "3c24136b9880b871c917c392869788254da993bc",
    "files": [
        {
            "sha": "a1ec6553db3bcc0887b45b904e369bccb3d78d25",
            "filename": "packages/compiler/src/jit_compiler_facade.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 1,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/3c24136b9880b871c917c392869788254da993bc/packages%2Fcompiler%2Fsrc%2Fjit_compiler_facade.ts",
            "raw_url": "https://github.com/angular/angular/raw/3c24136b9880b871c917c392869788254da993bc/packages%2Fcompiler%2Fsrc%2Fjit_compiler_facade.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fjit_compiler_facade.ts?ref=3c24136b9880b871c917c392869788254da993bc",
            "patch": "@@ -54,7 +54,8 @@ export class CompilerFacadeImpl implements CompilerFacade {\n       angularCoreEnv: CoreEnvironment, sourceMapUrl: string,\n       declaration: R3DeclarePipeFacade): any {\n     const meta = convertDeclarePipeFacadeToMetadata(declaration);\n-    return compilePipeFromMetadata(meta);\n+    const res = compilePipeFromMetadata(meta);\n+    return this.jitExpression(res.expression, angularCoreEnv, sourceMapUrl, []);\n   }\n \n   compileInjectable("
        },
        {
            "sha": "fb87726246650347fc4fef8921b130814a99f322",
            "filename": "packages/core/test/render3/jit/declare_pipe_spec.ts",
            "status": "added",
            "additions": 30,
            "deletions": 0,
            "changes": 30,
            "blob_url": "https://github.com/angular/angular/blob/3c24136b9880b871c917c392869788254da993bc/packages%2Fcore%2Ftest%2Frender3%2Fjit%2Fdeclare_pipe_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/3c24136b9880b871c917c392869788254da993bc/packages%2Fcore%2Ftest%2Frender3%2Fjit%2Fdeclare_pipe_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Fjit%2Fdeclare_pipe_spec.ts?ref=3c24136b9880b871c917c392869788254da993bc",
            "patch": "@@ -0,0 +1,30 @@\n+/**\n+ * @license\n+ * Copyright Google LLC All Rights Reserved.\n+ *\n+ * Use of this source code is governed by an MIT-style license that can be\n+ * found in the LICENSE file at https://angular.io/license\n+ */\n+\n+import {ɵɵngDeclarePipe} from '@angular/core';\n+import {PipeDef} from '../../../src/render3';\n+\n+describe('Pipe declaration jit compilation', () => {\n+  it('should compile a named Pipe declaration', () => {\n+    const def = ɵɵngDeclarePipe({type: TestClass, name: 'foo'}) as PipeDef<TestClass>;\n+\n+    expect(def.type).toBe(TestClass);\n+    expect(def.name).toEqual('foo');\n+    expect(def.pure).toEqual(true);\n+  });\n+\n+  it('should compile an impure Pipe declaration', () => {\n+    const def = ɵɵngDeclarePipe({type: TestClass, name: 'foo', pure: false}) as PipeDef<TestClass>;\n+\n+    expect(def.type).toBe(TestClass);\n+    expect(def.name).toEqual('foo');\n+    expect(def.pure).toEqual(false);\n+  });\n+});\n+\n+class TestClass {}"
        }
    ],
    "stats": {
        "total": 33,
        "additions": 32,
        "deletions": 1
    }
}