{
    "author": "JoostK",
    "message": "test(core): verify that token IDs that exceed the bloom filter size are handled correctly (#40489)\n\nThis commits adds additional expectations to verify that the bloom\nfilter is able to correctly handle token IDs that exceed the size of\nthe bloom filter (which is currently 256 bits).\n\nPR Close #40489",
    "sha": "69385f7df4e678bbd8a04825b4ea2020f66190bc",
    "files": [
        {
            "sha": "64d20d865f0a861c9449a8b48344f70cf6f2caf4",
            "filename": "packages/core/test/render3/di_spec.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 0,
            "changes": 7,
            "blob_url": "https://github.com/angular/angular/blob/69385f7df4e678bbd8a04825b4ea2020f66190bc/packages%2Fcore%2Ftest%2Frender3%2Fdi_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/69385f7df4e678bbd8a04825b4ea2020f66190bc/packages%2Fcore%2Ftest%2Frender3%2Fdi_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Fdi_spec.ts?ref=69385f7df4e678bbd8a04825b4ea2020f66190bc",
            "patch": "@@ -182,6 +182,9 @@ describe('di', () => {\n       class Dir231 {\n         /** @internal */ static __NG_ELEMENT_ID__ = 231;\n       }\n+      class Dir260 {\n+        /** @internal */ static __NG_ELEMENT_ID__ = 260;\n+      }\n \n       it('should add values', () => {\n         bloomAdd(0, mockTView, Dir0);\n@@ -200,6 +203,8 @@ describe('di', () => {\n         expect(bloomState()).toEqual([0, 64, 32, 16, 8, 4, 2, 1]);\n         bloomAdd(0, mockTView, Dir231);\n         expect(bloomState()).toEqual([128, 64, 32, 16, 8, 4, 2, 1]);\n+        bloomAdd(0, mockTView, Dir260);\n+        expect(bloomState()).toEqual([128, 64, 32, 16, 8, 4, 2, 17 /* 1 + 2^(260-256) */]);\n       });\n \n       it('should query values', () => {\n@@ -211,6 +216,7 @@ describe('di', () => {\n         bloomAdd(0, mockTView, Dir165);\n         bloomAdd(0, mockTView, Dir198);\n         bloomAdd(0, mockTView, Dir231);\n+        bloomAdd(0, mockTView, Dir260);\n \n         expect(bloomHasToken(bloomHash(Dir0) as number, 0, mockTView.data)).toEqual(true);\n         expect(bloomHasToken(bloomHash(Dir1) as number, 0, mockTView.data)).toEqual(false);\n@@ -221,6 +227,7 @@ describe('di', () => {\n         expect(bloomHasToken(bloomHash(Dir165) as number, 0, mockTView.data)).toEqual(true);\n         expect(bloomHasToken(bloomHash(Dir198) as number, 0, mockTView.data)).toEqual(true);\n         expect(bloomHasToken(bloomHash(Dir231) as number, 0, mockTView.data)).toEqual(true);\n+        expect(bloomHasToken(bloomHash(Dir260) as number, 0, mockTView.data)).toEqual(true);\n       });\n     });\n   });"
        }
    ],
    "stats": {
        "total": 7,
        "additions": 7,
        "deletions": 0
    }
}