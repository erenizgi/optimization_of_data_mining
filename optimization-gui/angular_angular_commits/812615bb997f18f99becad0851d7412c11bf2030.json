{
    "author": "mhevery",
    "message": "refactor(core): Ensure that `previousOrParentTNode` always belongs to current `TView`. (#38707)\n\n`previousOrParentTNode` stores current `TNode`. Due to inconsistent\nimplementation the value stored would sometimes belong to the current\n`TView` and sometimes to the parent. We have extra logic which accounts\nfor it. A better solution is to just ensure that `previousOrParentTNode`\nalways belongs to current `TNode`. This simplifies the mental model\nand cleans up some code.\n\nPR Close #38707",
    "sha": "812615bb997f18f99becad0851d7412c11bf2030",
    "files": [
        {
            "sha": "63282d2d223faf6fbf3d052f904f1b281d6248c1",
            "filename": "goldens/size-tracking/integration-payloads.json",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/goldens%2Fsize-tracking%2Fintegration-payloads.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fsize-tracking%2Fintegration-payloads.json?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -3,7 +3,7 @@\n     \"master\": {\n       \"uncompressed\": {\n         \"runtime-es2015\": 1485,\n-        \"main-es2015\": 141151,\n+        \"main-es2015\": 141711,\n         \"polyfills-es2015\": 36571\n       }\n     }"
        },
        {
            "sha": "a48c924e195cbeded809ed575d0767f70308b67a",
            "filename": "packages/core/src/render3/assert.ts",
            "status": "modified",
            "additions": 7,
            "deletions": 2,
            "changes": 9,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Fassert.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Fassert.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fassert.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -20,10 +20,15 @@ import {LView, TVIEW, TView} from './interfaces/view';\n \n \n export function assertTNodeForLView(tNode: TNode, lView: LView) {\n+  assertTNodeForTView(tNode, lView[TVIEW]);\n+}\n+\n+export function assertTNodeForTView(tNode: TNode, tView: TView) {\n+  assertDefined(tNode, 'TNode must be defined');\n   tNode.hasOwnProperty('tView_') &&\n       assertEqual(\n-          (tNode as any as {tView_: TView}).tView_, lView[TVIEW],\n-          'This TNode does not belong to this LView.');\n+          (tNode as any as {tView_: TView}).tView_, tView,\n+          'This TNode does not belong to this TView.');\n }\n \n export function assertComponentType("
        },
        {
            "sha": "693fe58629db59f3c7262484cd677fa3504c7579",
            "filename": "packages/core/src/render3/component.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Fcomponent.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Fcomponent.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fcomponent.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -134,7 +134,7 @@ export function renderComponent<T>(\n       null, rootTView, rootContext, rootFlags, null, null, rendererFactory, renderer, undefined,\n       opts.injector || null);\n \n-  enterView(rootView, null);\n+  enterView(rootView);\n   let component: T;\n \n   try {"
        },
        {
            "sha": "aa2b37a26ef7db6f02cbb9e2199257e08776dbd2",
            "filename": "packages/core/src/render3/component_ref.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Fcomponent_ref.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Fcomponent_ref.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fcomponent_ref.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -168,7 +168,7 @@ export class ComponentFactory<T> extends viewEngine_ComponentFactory<T> {\n     // `renderView` does that. However as the code is written it is needed because\n     // `createRootComponentView` and `createRootComponent` both read global state. Fixing those\n     // issues would allow us to drop this.\n-    enterView(rootLView, null);\n+    enterView(rootLView);\n \n     let component: T;\n     let tElementNode: TElementNode;"
        },
        {
            "sha": "ec73ac2cd1667348bf6627c9cbb3252f7371af9f",
            "filename": "packages/core/src/render3/i18n/i18n_apply.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Fi18n%2Fi18n_apply.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Fi18n%2Fi18n_apply.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fi18n%2Fi18n_apply.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -412,7 +412,7 @@ export function i18nEndFirstPass(tView: TView, lView: LView) {\n \n   // Remove deleted nodes\n   let index = rootIndex + 1;\n-  while (index <= lastCreatedNode.index - HEADER_OFFSET) {\n+  while (lastCreatedNode !== null && index <= lastCreatedNode.index - HEADER_OFFSET) {\n     if (visitedNodes.indexOf(index) === -1) {\n       removeNode(tView, lView, index, /* markAsDetached */ true);\n     }"
        },
        {
            "sha": "e998e0a0d40baa4a38c7e4586aaaa85c4d540984",
            "filename": "packages/core/src/render3/instructions/shared.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 3,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fshared.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fshared.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Fshared.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -337,7 +337,7 @@ export function allocExpando(tView: TView, lView: LView, numSlotsToAlloc: number\n  */\n export function renderView<T>(tView: TView, lView: LView, context: T): void {\n   ngDevMode && assertEqual(isCreationMode(lView), true, 'Should be run in creation mode');\n-  enterView(lView, lView[T_HOST]);\n+  enterView(lView);\n   try {\n     const viewQuery = tView.viewQuery;\n     if (viewQuery !== null) {\n@@ -407,7 +407,7 @@ export function refreshView<T>(\n   ngDevMode && assertEqual(isCreationMode(lView), false, 'Should be run in update mode');\n   const flags = lView[FLAGS];\n   if ((flags & LViewFlags.Destroyed) === LViewFlags.Destroyed) return;\n-  enterView(lView, lView[T_HOST]);\n+  enterView(lView);\n   const checkNoChangesMode = getCheckNoChangesMode();\n   try {\n     resetPreOrderHookFlags(lView);\n@@ -623,7 +623,7 @@ export function getOrCreateTComponentView(def: ComponentDef<any>): TView {\n   const tView = def.tView;\n \n   // Create a TView if there isn't one, or recreate it if the first create pass didn't\n-  // complete successfuly since we can't know for sure whether it's in a usable shape.\n+  // complete successfully since we can't know for sure whether it's in a usable shape.\n   if (tView === null || tView.incompleteFirstPass) {\n     return def.tView = createTView(\n                TViewType.Component, -1, def.template, def.decls, def.vars, def.directiveDefs,"
        },
        {
            "sha": "62195773ed5da962ed2a81c5614b3bf4fcdf75ed",
            "filename": "packages/core/src/render3/instructions/template.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 2,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Ftemplate.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Ftemplate.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Finstructions%2Ftemplate.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -37,9 +37,11 @@ function templateFirstCreatePass(\n   const embeddedTView = tNode.tViews = createTView(\n       TViewType.Embedded, -1, templateFn, decls, vars, tView.directiveRegistry, tView.pipeRegistry,\n       null, tView.schemas, tViewConsts);\n-  const embeddedTViewNode = createTNode(tView, null, TNodeType.View, -1, null, null) as TViewNode;\n+  const embeddedTViewNode =\n+      createTNode(embeddedTView, null, TNodeType.View, -1, null, null) as TViewNode;\n   embeddedTViewNode.injectorIndex = tNode.injectorIndex;\n-  embeddedTView.node = embeddedTViewNode;\n+  // FIXME(misko): remove `embeddedTView.node'\n+  embeddedTView.node = embeddedTView.firstChild = embeddedTViewNode;\n \n   if (tView.queries !== null) {\n     tView.queries.template(tView, tNode);"
        },
        {
            "sha": "7f93eb07ec6a19d7c80fd77e73e7d2166558cdf8",
            "filename": "packages/core/src/render3/node_manipulation.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 4,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Fnode_manipulation.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Fnode_manipulation.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fnode_manipulation.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -9,7 +9,7 @@\n import {Renderer2} from '../core';\n import {ViewEncapsulation} from '../metadata/view';\n import {addToArray, removeFromArray} from '../util/array_utils';\n-import {assertDefined, assertDomNode, assertEqual, assertString} from '../util/assert';\n+import {assertDefined, assertDomNode, assertEqual, assertSame, assertString} from '../util/assert';\n \n import {assertLContainer, assertLView, assertTNodeForLView} from './assert';\n import {attachPatchData} from './context_discovery';\n@@ -23,7 +23,7 @@ import {isLContainer, isLView} from './interfaces/type_checks';\n import {CHILD_HEAD, CLEANUP, DECLARATION_COMPONENT_VIEW, DECLARATION_LCONTAINER, DestroyHookData, FLAGS, HookData, HookFn, HOST, LView, LViewFlags, NEXT, PARENT, QUERIES, RENDERER, T_HOST, TVIEW, TView, unusedValueExportToPlacateAjd as unused5} from './interfaces/view';\n import {assertNodeOfPossibleTypes, assertNodeType} from './node_assert';\n import {getLViewParent} from './util/view_traversal_utils';\n-import {getNativeByTNode, unwrapRNode, updateTransplantedViewCount} from './util/view_utils';\n+import {getNativeByTNode, getNonViewFirstChild, unwrapRNode, updateTransplantedViewCount} from './util/view_utils';\n \n const unusedValueToPlacateAjd = unused1 + unused2 + unused3 + unused4 + unused5;\n \n@@ -733,7 +733,7 @@ export function getBeforeNodeForView(viewIndexInContainer: number, lContainer: L\n   const nextViewIndex = CONTAINER_HEADER_OFFSET + viewIndexInContainer + 1;\n   if (nextViewIndex < lContainer.length) {\n     const lView = lContainer[nextViewIndex] as LView;\n-    const firstTNodeOfView = lView[TVIEW].firstChild;\n+    const firstTNodeOfView = getNonViewFirstChild(lView[TVIEW]);\n     if (firstTNodeOfView !== null) {\n       return getFirstNativeNode(lView, firstTNodeOfView);\n     }\n@@ -824,7 +824,7 @@ function applyView(\n     tView: TView, lView: LView, renderer: Renderer3, action: WalkTNodeTreeAction,\n     renderParent: RElement|null, beforeNode: RNode|null) {\n   ngDevMode && assertNodeType(tView.node!, TNodeType.View);\n-  const viewRootTNode: TNode|null = tView.node!.child;\n+  const viewRootTNode: TNode|null = getNonViewFirstChild(tView);\n   applyNodes(renderer, action, viewRootTNode, lView, renderParent, beforeNode, false);\n }\n "
        },
        {
            "sha": "5ef6bc0c8838a2558b11622906c8ba21c9379fac",
            "filename": "packages/core/src/render3/state.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 4,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Fstate.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Fstate.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fstate.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import {assertDefined, assertEqual} from '../util/assert';\n-import {assertLViewOrUndefined} from './assert';\n+import {assertLViewOrUndefined, assertTNodeForTView} from './assert';\n import {DirectiveDef} from './interfaces/definition';\n import {TNode} from './interfaces/node';\n import {CONTEXT, DECLARATION_VIEW, LView, OpaqueViewState, TData, TVIEW, TView} from './interfaces/view';\n@@ -54,6 +54,7 @@ interface LFrame {\n    *\n    * This is used in conjunction with `isParent`.\n    */\n+  // FIXME(misko): should be `TNode|null` (add comment explaining it.)\n   previousOrParentTNode: TNode;\n \n   /**\n@@ -267,6 +268,7 @@ export function getPreviousOrParentTNode(): TNode {\n }\n \n export function setPreviousOrParentTNode(tNode: TNode, isParent: boolean) {\n+  ngDevMode && assertTNodeForTView(tNode, instructionState.lFrame.tView);\n   instructionState.lFrame.previousOrParentTNode = tNode;\n   instructionState.lFrame.isParent = isParent;\n }\n@@ -401,10 +403,9 @@ export function enterDI(newView: LView, tNode: TNode) {\n  * exited the state has to be restored\n  *\n  * @param newView New lView to become active\n- * @param tNode Element to which the View is a child of\n  * @returns the previously active lView;\n  */\n-export function enterView(newView: LView, tNode: TNode|null): void {\n+export function enterView(newView: LView): void {\n   ngDevMode && assertLViewOrUndefined(newView);\n   const newLFrame = allocLFrame();\n   if (ngDevMode) {\n@@ -420,7 +421,8 @@ export function enterView(newView: LView, tNode: TNode|null): void {\n   }\n   const tView = newView[TVIEW];\n   instructionState.lFrame = newLFrame;\n-  newLFrame.previousOrParentTNode = tNode!;\n+  ngDevMode && tView.firstChild && assertTNodeForTView(tView.firstChild, tView);\n+  newLFrame.previousOrParentTNode = tView.firstChild!;\n   newLFrame.lView = newView;\n   newLFrame.tView = tView;\n   newLFrame.contextLView = newView!;"
        },
        {
            "sha": "6ead6bb400d64d0e34eb372d117e5b81eeebfad5",
            "filename": "packages/core/src/render3/util/view_utils.ts",
            "status": "modified",
            "additions": 14,
            "deletions": 1,
            "changes": 15,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Futil%2Fview_utils.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Futil%2Fview_utils.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Futil%2Fview_utils.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -10,7 +10,7 @@ import {assertDefined, assertDomNode, assertGreaterThan, assertIndexInRange, ass\n import {assertTNodeForLView} from '../assert';\n import {LContainer, TYPE} from '../interfaces/container';\n import {LContext, MONKEY_PATCH_KEY_NAME} from '../interfaces/context';\n-import {TConstants, TNode} from '../interfaces/node';\n+import {TConstants, TNode, TNodeType} from '../interfaces/node';\n import {isProceduralRenderer, RNode} from '../interfaces/renderer';\n import {isLContainer, isLView} from '../interfaces/type_checks';\n import {FLAGS, HEADER_OFFSET, HOST, LView, LViewFlags, PARENT, PREORDER_HOOK_FLAGS, RENDERER, TData, TRANSPLANTED_VIEWS_TO_REFRESH, TView} from '../interfaces/view';\n@@ -207,3 +207,16 @@ export function updateTransplantedViewCount(lContainer: LContainer, amount: 1|-\n     parent = parent[PARENT];\n   }\n }\n+\n+/**\n+ * Retrieves the `TView.firstChild` and unwraps if it is `TNodeType.View`.\n+ *\n+ * We are inconsistent about the way we store root of Views. Embedded views have `TNodeType.View` in\n+ * the root but component views do not. A lot of logic does not expect to see `TNodeType.View` and\n+ * crashes on it, so we unwrap it.\n+ */\n+export function getNonViewFirstChild(tView: TView): TNode|null {\n+  const firstChild = tView.firstChild;\n+  return firstChild === null ? null :\n+                               (firstChild.type === TNodeType.View ? firstChild.child : firstChild);\n+}"
        },
        {
            "sha": "6641177f9f96b98e6e4484155c21094784a714ac",
            "filename": "packages/core/src/render3/view_ref.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Fview_ref.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Fsrc%2Frender3%2Fview_ref.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Frender3%2Fview_ref.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -19,7 +19,7 @@ import {CONTEXT, DECLARATION_COMPONENT_VIEW, FLAGS, HOST, LView, LViewFlags, T_H\n import {assertNodeOfPossibleTypes} from './node_assert';\n import {destroyLView, renderDetachView} from './node_manipulation';\n import {getLViewParent} from './util/view_traversal_utils';\n-import {unwrapRNode} from './util/view_utils';\n+import {getNonViewFirstChild, unwrapRNode} from './util/view_utils';\n \n \n \n@@ -340,7 +340,7 @@ function collectNativeNodes(\n     if (isLContainer(lNode)) {\n       for (let i = CONTAINER_HEADER_OFFSET; i < lNode.length; i++) {\n         const lViewInAContainer = lNode[i];\n-        const lViewFirstChildTNode = lViewInAContainer[TVIEW].firstChild;\n+        const lViewFirstChildTNode = getNonViewFirstChild(lViewInAContainer[TVIEW]);\n         if (lViewFirstChildTNode !== null) {\n           collectNativeNodes(\n               lViewInAContainer[TVIEW], lViewInAContainer, lViewFirstChildTNode, result);"
        },
        {
            "sha": "68600167d0c4fffe48125ed27d173895220a185e",
            "filename": "packages/core/test/bundling/forms/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Fforms%2Fbundle.golden_symbols.json?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -1031,6 +1031,9 @@\n   {\n     \"name\": \"getNodeInjectable\"\n   },\n+  {\n+    \"name\": \"getNonViewFirstChild\"\n+  },\n   {\n     \"name\": \"getNullInjector\"\n   },"
        },
        {
            "sha": "96dee27a67a669c1a997e8de6d0d930c22c91edc",
            "filename": "packages/core/test/bundling/todo/bundle.golden_symbols.json",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fbundling%2Ftodo%2Fbundle.golden_symbols.json?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -395,6 +395,9 @@\n   {\n     \"name\": \"getNodeInjectable\"\n   },\n+  {\n+    \"name\": \"getNonViewFirstChild\"\n+  },\n   {\n     \"name\": \"getOrCreateInjectable\"\n   },"
        },
        {
            "sha": "b80737ce5f11bfdae210e871519920c8e1d73161",
            "filename": "packages/core/test/render3/di_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Frender3%2Fdi_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Frender3%2Fdi_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Fdi_spec.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -228,7 +228,7 @@ describe('di', () => {\n       const contentView = createLView(\n           null, createTView(TViewType.Component, -1, null, 1, 0, null, null, null, null, null), {},\n           LViewFlags.CheckAlways, null, null, {} as any, {} as any);\n-      enterView(contentView, null);\n+      enterView(contentView);\n       try {\n         const parentTNode =\n             getOrCreateTNode(contentView[TVIEW], null, 0, TNodeType.Element, null, null);"
        },
        {
            "sha": "324f5fe41f91be9c24a472e9a5632d3cc6dbbb5f",
            "filename": "packages/core/test/render3/i18n_spec.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 0,
            "changes": 6,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Frender3%2Fi18n_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Frender3%2Fi18n_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Fi18n_spec.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -459,7 +459,9 @@ describe('Runtime i18n', () => {\n       const nbConsts = 2;\n       const index = 1;\n       const opCodes = getOpCodes(attrs, () => {\n+        ɵɵelementStart(0, 'div');\n         ɵɵi18nAttributes(index, 0);\n+        ɵɵelementEnd();\n       }, null, nbConsts, index);\n \n       expect(opCodes).toEqual(debugMatch([\n@@ -473,7 +475,9 @@ describe('Runtime i18n', () => {\n       const nbConsts = 2;\n       const index = 1;\n       const opCodes = getOpCodes(attrs, () => {\n+        ɵɵelementStart(0, 'div');\n         ɵɵi18nAttributes(index, 0);\n+        ɵɵelementEnd();\n       }, null, nbConsts, index);\n \n       expect(opCodes).toEqual(debugMatch([\n@@ -487,7 +491,9 @@ describe('Runtime i18n', () => {\n       const nbConsts = 2;\n       const index = 1;\n       const opCodes = getOpCodes(attrs, () => {\n+        ɵɵelementStart(0, 'div');\n         ɵɵi18nAttributes(index, 0);\n+        ɵɵelementEnd();\n       }, null, nbConsts, index);\n \n       expect(opCodes).toEqual(debugMatch(["
        },
        {
            "sha": "785c631c78142f595a7ba01a40f12a7efafe4244",
            "filename": "packages/core/test/render3/instructions/lview_debug_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Frender3%2Finstructions%2Flview_debug_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Frender3%2Finstructions%2Flview_debug_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Finstructions%2Flview_debug_spec.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -17,7 +17,7 @@ import {KeyValueArray} from '@angular/core/src/util/array_utils';\n \n describe('lView_debug', () => {\n   const mockFirstUpdatePassLView: LView = [null, {firstUpdatePass: true}] as any;\n-  beforeEach(() => enterView(mockFirstUpdatePassLView, null));\n+  beforeEach(() => enterView(mockFirstUpdatePassLView));\n   afterEach(() => leaveView());\n \n   describe('TNode', () => {"
        },
        {
            "sha": "5b3c2af38c73eb20c1ddc2a9d04c6ab293e4de4c",
            "filename": "packages/core/test/render3/instructions/shared_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Frender3%2Finstructions%2Fshared_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Frender3%2Finstructions%2Fshared_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Finstructions%2Fshared_spec.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -45,7 +45,7 @@ export function enterViewWithOneDiv() {\n       null);\n   lView[0 + HEADER_OFFSET] = div;\n   tView.data[0 + HEADER_OFFSET] = tNode;\n-  enterView(lView, tNode);\n+  enterView(lView);\n }\n \n export function clearFirstUpdatePass() {"
        },
        {
            "sha": "803e2bb8ae8e35ca7e7256ef7107687fafef8e46",
            "filename": "packages/core/test/render3/render_util.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Frender3%2Frender_util.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Frender3%2Frender_util.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Frender_util.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -265,7 +265,7 @@ export function renderTemplate<T>(\n     const hostLView = createLView(\n         null, tView, {}, LViewFlags.CheckAlways | LViewFlags.IsRoot, null, null,\n         providedRendererFactory, renderer);\n-    enterView(hostLView, null);\n+    enterView(hostLView);\n \n     const def: ComponentDef<any> = ɵɵdefineComponent({\n       type: Object,"
        },
        {
            "sha": "1596e96db6933a5610cb58a6edbe691e92d7b0f3",
            "filename": "packages/core/test/render3/styling_next/static_styling_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Frender3%2Fstyling_next%2Fstatic_styling_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Frender3%2Fstyling_next%2Fstatic_styling_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Fstyling_next%2Fstatic_styling_spec.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -16,7 +16,7 @@ describe('static styling', () => {\n   const mockFirstCreatePassLView: LView = [null, {firstCreatePass: true}] as any;\n   let tNode!: TNode;\n   beforeEach(() => {\n-    enterView(mockFirstCreatePassLView, null);\n+    enterView(mockFirstCreatePassLView);\n     tNode = createTNode(null!, null!, TNodeType.Element, 0, '', null);\n   });\n   it('should initialize when no attrs', () => {"
        },
        {
            "sha": "6454bd432c1c7fc9809f1f8abe5f321951f5733a",
            "filename": "packages/core/test/render3/styling_next/style_binding_list_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Frender3%2Fstyling_next%2Fstyle_binding_list_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Frender3%2Fstyling_next%2Fstyle_binding_list_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Frender3%2Fstyling_next%2Fstyle_binding_list_spec.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -16,7 +16,7 @@ import {newArray} from '@angular/core/src/util/array_utils';\n \n describe('TNode styling linked list', () => {\n   const mockFirstUpdatePassLView: LView = [null, {firstUpdatePass: true}] as any;\n-  beforeEach(() => enterView(mockFirstUpdatePassLView, null));\n+  beforeEach(() => enterView(mockFirstUpdatePassLView));\n   afterEach(() => leaveView());\n   describe('insertTStylingBinding', () => {\n     it('should append template only', () => {"
        },
        {
            "sha": "389e28b52ad16a7c94da884f41d840d1d67297ac",
            "filename": "packages/core/test/sanitization/sanitization_spec.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Fsanitization%2Fsanitization_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/812615bb997f18f99becad0851d7412c11bf2030/packages%2Fcore%2Ftest%2Fsanitization%2Fsanitization_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Ftest%2Fsanitization%2Fsanitization_spec.ts?ref=812615bb997f18f99becad0851d7412c11bf2030",
            "patch": "@@ -20,7 +20,7 @@ function fakeLView(): LView {\n }\n \n describe('sanitization', () => {\n-  beforeEach(() => enterView(fakeLView(), null));\n+  beforeEach(() => enterView(fakeLView()));\n   afterEach(() => leaveView());\n   class Wrap {\n     constructor(private value: string) {}"
        }
    ],
    "stats": {
        "total": 92,
        "additions": 63,
        "deletions": 29
    }
}