{
    "author": "literalpie",
    "message": "fix(animations): error when setting position before starting animation (#28255)\n\nit is now possible to set the position when the animation has not ever been started.\n\nPR Close #28255",
    "sha": "3b7d2ca179c1aee544dc1d8af62c5efd7ec9c481",
    "files": [
        {
            "sha": "b0b0caa6617f73a14501086c44801e70d90fe18e",
            "filename": "packages/animations/browser/src/render/web_animations/web_animations_player.ts",
            "status": "modified",
            "additions": 3,
            "deletions": 0,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/3b7d2ca179c1aee544dc1d8af62c5efd7ec9c481/packages%2Fanimations%2Fbrowser%2Fsrc%2Frender%2Fweb_animations%2Fweb_animations_player.ts",
            "raw_url": "https://github.com/angular/angular/raw/3b7d2ca179c1aee544dc1d8af62c5efd7ec9c481/packages%2Fanimations%2Fbrowser%2Fsrc%2Frender%2Fweb_animations%2Fweb_animations_player.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fanimations%2Fbrowser%2Fsrc%2Frender%2Fweb_animations%2Fweb_animations_player.ts?ref=3b7d2ca179c1aee544dc1d8af62c5efd7ec9c481",
            "patch": "@@ -156,6 +156,9 @@ export class WebAnimationsPlayer implements AnimationPlayer {\n   }\n \n   setPosition(p: number): void {\n+    if (this.domPlayer === undefined) {\n+      this.init();\n+    }\n     this.domPlayer.currentTime = p * this.time;\n   }\n "
        },
        {
            "sha": "b5543dd5fe214616b88d5431ec3b77fffad5d7ac",
            "filename": "packages/animations/browser/test/render/web_animations/web_animations_player_spec.ts",
            "status": "modified",
            "additions": 21,
            "deletions": 0,
            "changes": 21,
            "blob_url": "https://github.com/angular/angular/blob/3b7d2ca179c1aee544dc1d8af62c5efd7ec9c481/packages%2Fanimations%2Fbrowser%2Ftest%2Frender%2Fweb_animations%2Fweb_animations_player_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/3b7d2ca179c1aee544dc1d8af62c5efd7ec9c481/packages%2Fanimations%2Fbrowser%2Ftest%2Frender%2Fweb_animations%2Fweb_animations_player_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fanimations%2Fbrowser%2Ftest%2Frender%2Fweb_animations%2Fweb_animations_player_spec.ts?ref=3b7d2ca179c1aee544dc1d8af62c5efd7ec9c481",
            "patch": "@@ -67,6 +67,27 @@ import {WebAnimationsPlayer} from '../../../src/render/web_animations/web_animat\n       player.finish();\n       expect(log).toEqual(['started', 'done']);\n     });\n+\n+    it('should allow setting position before animation is started', () => {\n+      const player = new WebAnimationsPlayer(element, [], {duration: 1000});\n+\n+      player.setPosition(0.5);\n+      const p = innerPlayer!;\n+      expect(p.log).toEqual(['pause']);\n+      expect(p.currentTime).toEqual(500);\n+    });\n+\n+    it('should continue playing animations from setPosition', () => {\n+      const player = new WebAnimationsPlayer(element, [], {duration: 1000});\n+\n+      player.play();\n+      const p = innerPlayer!;\n+      expect(p.log).toEqual(['play']);\n+\n+      player.setPosition(0.5);\n+      expect(p.currentTime).toEqual(500);\n+      expect(p.log).toEqual(['play']);\n+    });\n   });\n }\n "
        }
    ],
    "stats": {
        "total": 24,
        "additions": 24,
        "deletions": 0
    }
}