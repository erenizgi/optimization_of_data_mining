{
    "author": "crisbeto",
    "message": "perf(platform-browser): avoid intermediate arrays in server transition (#43145)\n\nThe server transition initializer looks for some `style` tags and clears them based on their `ng-transition` ID. The way we currently have the logic creates a couple of intermediate arrays just so we can call `forEach` at the end.\n\nThese changes use a regular `for` loop with an `if` statement instead. This isn't a _massive_ performance improvement, but the logic does run during app initialization which is performance-sensitive and it's an easy change to make on our end.\n\nPR Close #43145",
    "sha": "7e71370fe6a9e802f68f7d3dbbfd0194ecde2d4f",
    "files": [
        {
            "sha": "8d064d2e491f9a74099c3d4eadec68d71022359a",
            "filename": "packages/platform-browser/src/browser/server-transition.ts",
            "status": "modified",
            "additions": 6,
            "deletions": 5,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/7e71370fe6a9e802f68f7d3dbbfd0194ecde2d4f/packages%2Fplatform-browser%2Fsrc%2Fbrowser%2Fserver-transition.ts",
            "raw_url": "https://github.com/angular/angular/raw/7e71370fe6a9e802f68f7d3dbbfd0194ecde2d4f/packages%2Fplatform-browser%2Fsrc%2Fbrowser%2Fserver-transition.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fplatform-browser%2Fsrc%2Fbrowser%2Fserver-transition.ts?ref=7e71370fe6a9e802f68f7d3dbbfd0194ecde2d4f",
            "patch": "@@ -7,7 +7,7 @@\n  */\n \n import {DOCUMENT, ÉµgetDOM as getDOM} from '@angular/common';\n-import {APP_INITIALIZER, ApplicationInitStatus, Inject, InjectionToken, Injector, StaticProvider} from '@angular/core';\n+import {APP_INITIALIZER, ApplicationInitStatus, InjectionToken, Injector, StaticProvider} from '@angular/core';\n \n /**\n  * An id that identifies a particular application being bootstrapped, that should\n@@ -21,10 +21,11 @@ export function appInitializerFactory(transitionId: string, document: any, injec\n     // the server.\n     injector.get(ApplicationInitStatus).donePromise.then(() => {\n       const dom = getDOM();\n-      const styles: any[] =\n-          Array.prototype.slice.apply(document.querySelectorAll(`style[ng-transition]`));\n-      styles.filter(el => el.getAttribute('ng-transition') === transitionId)\n-          .forEach(el => dom.remove(el));\n+      const styles: HTMLCollectionOf<HTMLStyleElement> =\n+          document.querySelectorAll(`style[ng-transition=\"${transitionId}\"]`);\n+      for (let i = 0; i < styles.length; i++) {\n+        dom.remove(styles[i]);\n+      }\n     });\n   };\n }"
        }
    ],
    "stats": {
        "total": 11,
        "additions": 6,
        "deletions": 5
    }
}