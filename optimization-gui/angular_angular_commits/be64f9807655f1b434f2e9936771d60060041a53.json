{
    "author": "josephperrott",
    "message": "fix(dev-infra): run fetches in the git client in quiet mode (#39503)\n\nWhen fetch is run in normal mode, the `git-fetch-pack` plumbing command\noutputs progress to stderr.  Since this is unnecessary progress\ninformation for ng-dev usages, it should be suppressed instead.\n\nPR Close #39503",
    "sha": "be64f9807655f1b434f2e9936771d60060041a53",
    "files": [
        {
            "sha": "3f1e56d27b4cd01875c4cac83860e5ee9f03f30f",
            "filename": "dev-infra/ng-dev.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/be64f9807655f1b434f2e9936771d60060041a53/dev-infra%2Fng-dev.js",
            "raw_url": "https://github.com/angular/angular/raw/be64f9807655f1b434f2e9936771d60060041a53/dev-infra%2Fng-dev.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fng-dev.js?ref=be64f9807655f1b434f2e9936771d60060041a53",
            "patch": "@@ -2765,7 +2765,7 @@ function checkOutPullRequestLocally(prNumber, githubToken, opts = {}) {\n         try {\n             // Fetch the branch at the commit of the PR, and check it out in a detached state.\n             info(`Checking out PR #${prNumber} from ${fullHeadRef}`);\n-            git.run(['fetch', headRefUrl, headRefName]);\n+            git.run(['fetch', '-q', headRefUrl, headRefName]);\n             git.run(['checkout', '--detach', 'FETCH_HEAD']);\n         }\n         catch (e) {\n@@ -3453,7 +3453,7 @@ var MergeStrategy = /** @class */ (function () {\n         });\n         // Fetch all target branches with a single command. We don't want to fetch them\n         // individually as that could cause an unnecessary slow-down.\n-        this.git.run(tslib.__spread(['fetch', '-f', this.git.repoGitUrl], fetchRefspecs, extraRefspecs));\n+        this.git.run(tslib.__spread(['fetch', '-q', '-f', this.git.repoGitUrl], fetchRefspecs, extraRefspecs));\n     };\n     /** Pushes the given target branches upstream. */\n     MergeStrategy.prototype.pushTargetBranchesUpstream = function (names) {\n@@ -4174,11 +4174,11 @@ function rebasePr(prNumber, githubToken, config = getConfig()) {\n         try {\n             // Fetch the branch at the commit of the PR, and check it out in a detached state.\n             info(`Checking out PR #${prNumber} from ${fullHeadRef}`);\n-            git.run(['fetch', headRefUrl, headRefName]);\n+            git.run(['fetch', '-q', headRefUrl, headRefName]);\n             git.run(['checkout', '--detach', 'FETCH_HEAD']);\n             // Fetch the PRs target branch and rebase onto it.\n             info(`Fetching ${fullBaseRef} to rebase #${prNumber} on`);\n-            git.run(['fetch', baseRefUrl, baseRefName]);\n+            git.run(['fetch', '-q', baseRefUrl, baseRefName]);\n             info(`Attempting to rebase PR #${prNumber} on ${fullBaseRef}`);\n             const rebaseResult = git.runGraceful(['rebase', 'FETCH_HEAD']);\n             // If the rebase was clean, push the rebased PR up to the authors fork.\n@@ -5498,7 +5498,7 @@ class ReleaseAction {\n     /** Checks out an upstream branch with a detached head. */\n     checkoutUpstreamBranch(branchName) {\n         return tslib.__awaiter(this, void 0, void 0, function* () {\n-            this.git.run(['fetch', this.git.repoGitUrl, branchName]);\n+            this.git.run(['fetch', '-q', this.git.repoGitUrl, branchName]);\n             this.git.run(['checkout', 'FETCH_HEAD', '--detach']);\n         });\n     }"
        },
        {
            "sha": "ccea54730b453fe95429a34913b0d23c48eff751",
            "filename": "dev-infra/pr/common/checkout-pr.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/be64f9807655f1b434f2e9936771d60060041a53/dev-infra%2Fpr%2Fcommon%2Fcheckout-pr.ts",
            "raw_url": "https://github.com/angular/angular/raw/be64f9807655f1b434f2e9936771d60060041a53/dev-infra%2Fpr%2Fcommon%2Fcheckout-pr.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fpr%2Fcommon%2Fcheckout-pr.ts?ref=be64f9807655f1b434f2e9936771d60060041a53",
            "patch": "@@ -102,7 +102,7 @@ export async function checkOutPullRequestLocally(\n   try {\n     // Fetch the branch at the commit of the PR, and check it out in a detached state.\n     info(`Checking out PR #${prNumber} from ${fullHeadRef}`);\n-    git.run(['fetch', headRefUrl, headRefName]);\n+    git.run(['fetch', '-q', headRefUrl, headRefName]);\n     git.run(['checkout', '--detach', 'FETCH_HEAD']);\n   } catch (e) {\n     git.checkout(previousBranchOrRevision, true);"
        },
        {
            "sha": "ecbf845579c1a22577f17b4058f02ee5ed39f31d",
            "filename": "dev-infra/pr/merge/strategies/strategy.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/be64f9807655f1b434f2e9936771d60060041a53/dev-infra%2Fpr%2Fmerge%2Fstrategies%2Fstrategy.ts",
            "raw_url": "https://github.com/angular/angular/raw/be64f9807655f1b434f2e9936771d60060041a53/dev-infra%2Fpr%2Fmerge%2Fstrategies%2Fstrategy.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fpr%2Fmerge%2Fstrategies%2Fstrategy.ts?ref=be64f9807655f1b434f2e9936771d60060041a53",
            "patch": "@@ -124,7 +124,7 @@ export abstract class MergeStrategy {\n     });\n     // Fetch all target branches with a single command. We don't want to fetch them\n     // individually as that could cause an unnecessary slow-down.\n-    this.git.run(['fetch', '-f', this.git.repoGitUrl, ...fetchRefspecs, ...extraRefspecs]);\n+    this.git.run(['fetch', '-q', '-f', this.git.repoGitUrl, ...fetchRefspecs, ...extraRefspecs]);\n   }\n \n   /** Pushes the given target branches upstream. */"
        },
        {
            "sha": "f2995c2d44a5a00e52078406a4844223e72484ba",
            "filename": "dev-infra/pr/rebase/index.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/be64f9807655f1b434f2e9936771d60060041a53/dev-infra%2Fpr%2Frebase%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/be64f9807655f1b434f2e9936771d60060041a53/dev-infra%2Fpr%2Frebase%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fpr%2Frebase%2Findex.ts?ref=be64f9807655f1b434f2e9936771d60060041a53",
            "patch": "@@ -84,12 +84,12 @@ export async function rebasePr(\n   try {\n     // Fetch the branch at the commit of the PR, and check it out in a detached state.\n     info(`Checking out PR #${prNumber} from ${fullHeadRef}`);\n-    git.run(['fetch', headRefUrl, headRefName]);\n+    git.run(['fetch', '-q', headRefUrl, headRefName]);\n     git.run(['checkout', '--detach', 'FETCH_HEAD']);\n \n     // Fetch the PRs target branch and rebase onto it.\n     info(`Fetching ${fullBaseRef} to rebase #${prNumber} on`);\n-    git.run(['fetch', baseRefUrl, baseRefName]);\n+    git.run(['fetch', '-q', baseRefUrl, baseRefName]);\n     info(`Attempting to rebase PR #${prNumber} on ${fullBaseRef}`);\n     const rebaseResult = git.runGraceful(['rebase', 'FETCH_HEAD']);\n "
        },
        {
            "sha": "b2e4e5edc879c11910ac4f880eb097b0c2af95fc",
            "filename": "dev-infra/release/publish/actions.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/be64f9807655f1b434f2e9936771d60060041a53/dev-infra%2Frelease%2Fpublish%2Factions.ts",
            "raw_url": "https://github.com/angular/angular/raw/be64f9807655f1b434f2e9936771d60060041a53/dev-infra%2Frelease%2Fpublish%2Factions.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Frelease%2Fpublish%2Factions.ts?ref=be64f9807655f1b434f2e9936771d60060041a53",
            "patch": "@@ -350,7 +350,7 @@ export abstract class ReleaseAction {\n \n   /** Checks out an upstream branch with a detached head. */\n   protected async checkoutUpstreamBranch(branchName: string) {\n-    this.git.run(['fetch', this.git.repoGitUrl, branchName]);\n+    this.git.run(['fetch', '-q', this.git.repoGitUrl, branchName]);\n     this.git.run(['checkout', 'FETCH_HEAD', '--detach']);\n   }\n "
        },
        {
            "sha": "f9ad601bbbdd111faa86885b48d78c6c5b287ba7",
            "filename": "dev-infra/utils/testing/virtual-git-client.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/be64f9807655f1b434f2e9936771d60060041a53/dev-infra%2Futils%2Ftesting%2Fvirtual-git-client.ts",
            "raw_url": "https://github.com/angular/angular/raw/be64f9807655f1b434f2e9936771d60060041a53/dev-infra%2Futils%2Ftesting%2Fvirtual-git-client.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Futils%2Ftesting%2Fvirtual-git-client.ts?ref=be64f9807655f1b434f2e9936771d60060041a53",
            "patch": "@@ -105,7 +105,7 @@ export class VirtualGitClient extends GitClient {\n \n   /** Handler for the `git fetch` command. */\n   private _fetch(rawArgs: string[]) {\n-    const args = parseArgs(rawArgs, {boolean: ['f', 'force']});\n+    const args = parseArgs(rawArgs, {boolean: ['f', 'force', 'q', 'quiet']});\n     const [repoUrl, refspec] = args._;\n     const force = args['f'] || args['force'];\n     const ref = this._unwrapRefspec(refspec);"
        }
    ],
    "stats": {
        "total": 22,
        "additions": 11,
        "deletions": 11
    }
}