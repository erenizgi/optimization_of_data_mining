{
    "author": "ajitsinghkaler",
    "message": "feat(common): add URLSearchParams to request body (#37852)\n\nURLSearch params are by default supported in the browser but are not supported by angular/http package added support for URLSearchParams\n\nFixes #36317\n\nPR Close #37852",
    "sha": "4bc3cf216d0a4053e114157f3522c3b666788644",
    "files": [
        {
            "sha": "0bce610115ec47339ee3a92aa51339138e9c527f",
            "filename": "packages/common/http/src/request.ts",
            "status": "modified",
            "additions": 10,
            "deletions": 1,
            "changes": 11,
            "blob_url": "https://github.com/angular/angular/blob/4bc3cf216d0a4053e114157f3522c3b666788644/packages%2Fcommon%2Fhttp%2Fsrc%2Frequest.ts",
            "raw_url": "https://github.com/angular/angular/raw/4bc3cf216d0a4053e114157f3522c3b666788644/packages%2Fcommon%2Fhttp%2Fsrc%2Frequest.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Fhttp%2Fsrc%2Frequest.ts?ref=4bc3cf216d0a4053e114157f3522c3b666788644",
            "patch": "@@ -68,6 +68,15 @@ function isFormData(value: any): value is FormData {\n   return typeof FormData !== 'undefined' && value instanceof FormData;\n }\n \n+/**\n+ * Safely assert whether the given value is a URLSearchParams instance.\n+ *\n+ * In some execution environments URLSearchParams is not defined.\n+ */\n+function isUrlSearchParams(value: any): value is URLSearchParams {\n+  return typeof URLSearchParams !== 'undefined' && value instanceof URLSearchParams;\n+}\n+\n /**\n  * An outgoing HTTP request with an optional typed body.\n  *\n@@ -273,7 +282,7 @@ export class HttpRequest<T> {\n     // Check whether the body is already in a serialized form. If so,\n     // it can just be returned directly.\n     if (isArrayBuffer(this.body) || isBlob(this.body) || isFormData(this.body) ||\n-        typeof this.body === 'string') {\n+        isUrlSearchParams(this.body) || typeof this.body === 'string') {\n       return this.body;\n     }\n     // Check whether the body is an instance of HttpUrlEncodedParams."
        },
        {
            "sha": "f1800092e1fd08a0d9d1e0196cd7fcb873b364e4",
            "filename": "packages/common/http/test/request_spec.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 0,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/4bc3cf216d0a4053e114157f3522c3b666788644/packages%2Fcommon%2Fhttp%2Ftest%2Frequest_spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/4bc3cf216d0a4053e114157f3522c3b666788644/packages%2Fcommon%2Fhttp%2Ftest%2Frequest_spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcommon%2Fhttp%2Ftest%2Frequest_spec.ts?ref=4bc3cf216d0a4053e114157f3522c3b666788644",
            "patch": "@@ -143,6 +143,10 @@ const TEST_STRING = `I'm a body!`;\n         const body = new ArrayBuffer(4);\n         expect(baseReq.clone({body}).serializeBody()).toBe(body);\n       });\n+      it('passes URLSearchParams through', () => {\n+        const body = new URLSearchParams('foo=1&bar=2');\n+        expect(baseReq.clone({body}).serializeBody()).toBe(body);\n+      });\n       it('passes strings through', () => {\n         const body = 'hello world';\n         expect(baseReq.clone({body}).serializeBody()).toBe(body);"
        }
    ],
    "stats": {
        "total": 15,
        "additions": 14,
        "deletions": 1
    }
}