{
    "author": "devversion",
    "message": "fix(dev-infra): github oauth token not picked up by Octokit (#42456)\n\nWe recently updated `@octokit/rest` to a more recent version. For this\r\nthe Github client had to be refactored to account for new types of\r\nOctokit. With the refactorings the authentication of the Github\r\nclient broke as we used an incorrect option for setting the OAuth\r\ntoken. The TS transpilation did not fail because the Octokit types\r\nsupport arbitrary options in the constructor. This is not solvable\r\non our side, so we cannot prevent similar issues in the future\r\nunfortunately. Adding tests for authentication is not a reasonable\r\noption either.",
    "sha": "3b434ed94d9ed067e5d999c064ae5f12b3cb175c",
    "files": [
        {
            "sha": "fdf9379078c973abd6d6d8e4ee700d45c6dfa7d2",
            "filename": "dev-infra/ng-dev.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/3b434ed94d9ed067e5d999c064ae5f12b3cb175c/dev-infra%2Fng-dev.js",
            "raw_url": "https://github.com/angular/angular/raw/3b434ed94d9ed067e5d999c064ae5f12b3cb175c/dev-infra%2Fng-dev.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Fng-dev.js?ref=3b434ed94d9ed067e5d999c064ae5f12b3cb175c",
            "patch": "@@ -240,7 +240,7 @@ var GithubClient = /** @class */ (function () {\n         /** The graphql instance with authentication set during construction. */\n         this._graphql = graphql.graphql.defaults({ headers: { authorization: \"token \" + this.token } });\n         /** The Octokit instance actually performing API requests. */\n-        this._octokit = new rest.Octokit({ token: this.token });\n+        this._octokit = new rest.Octokit({ auth: this.token });\n         this.pulls = this._octokit.pulls;\n         this.repos = this._octokit.repos;\n         this.issues = this._octokit.issues;"
        },
        {
            "sha": "7b26a264060e9293237eb6fb48ed1093800681fc",
            "filename": "dev-infra/utils/git/github.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/3b434ed94d9ed067e5d999c064ae5f12b3cb175c/dev-infra%2Futils%2Fgit%2Fgithub.ts",
            "raw_url": "https://github.com/angular/angular/raw/3b434ed94d9ed067e5d999c064ae5f12b3cb175c/dev-infra%2Futils%2Fgit%2Fgithub.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/dev-infra%2Futils%2Fgit%2Fgithub.ts?ref=3b434ed94d9ed067e5d999c064ae5f12b3cb175c",
            "patch": "@@ -45,7 +45,7 @@ export class GithubClient {\n   /** The graphql instance with authentication set during construction. */\n   private _graphql = graphql.defaults({headers: {authorization: `token ${this.token}`}});\n   /** The Octokit instance actually performing API requests. */\n-  private _octokit = new Octokit({token: this.token});\n+  private _octokit = new Octokit({auth: this.token});\n \n   /**\n    * @param token The github authentication token for Github Rest and Graphql API requests."
        }
    ],
    "stats": {
        "total": 4,
        "additions": 2,
        "deletions": 2
    }
}