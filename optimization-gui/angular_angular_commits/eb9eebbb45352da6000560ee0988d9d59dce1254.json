{
    "author": "gkalpak",
    "message": "refactor(elements): simplify code after IE<11 support removal (#39265)\n\nSupport for IE<11 is being removed in v11. PR #39090 removed some code\nthat was no longer needed.\n\nNow that there are no longer multiple code-paths (which was previously\nneeded for IE<11 support), this commit simplifies the code further (for\nexample, to avoid unnecessary functions calls and to avoid iterating\nover a component's inputs multiple times).\n\nPR Close #39265",
    "sha": "eb9eebbb45352da6000560ee0988d9d59dce1254",
    "files": [
        {
            "sha": "3198d07f794744d44587d96c7eb70aae6a66fdaa",
            "filename": "packages/elements/src/create-custom-element.ts",
            "status": "modified",
            "additions": 16,
            "deletions": 22,
            "changes": 38,
            "blob_url": "https://github.com/angular/angular/blob/eb9eebbb45352da6000560ee0988d9d59dce1254/packages%2Felements%2Fsrc%2Fcreate-custom-element.ts",
            "raw_url": "https://github.com/angular/angular/raw/eb9eebbb45352da6000560ee0988d9d59dce1254/packages%2Felements%2Fsrc%2Fcreate-custom-element.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Felements%2Fsrc%2Fcreate-custom-element.ts?ref=eb9eebbb45352da6000560ee0988d9d59dce1254",
            "patch": "@@ -151,18 +151,19 @@ export function createCustomElement<P>(\n         const strategy = this._ngElementStrategy =\n             strategyFactory.create(this.injector || config.injector);\n \n-        // Collect pre-existing values on the element to re-apply through the strategy.\n-        const preExistingValues =\n-            inputs.filter(({propName}) => this.hasOwnProperty(propName)).map(({propName}): [\n-              string, any\n-            ] => [propName, (this as any)[propName]]);\n-\n-        // Delete the property from the instance, so that it can go through the getters/setters\n-        // set on `NgElementImpl.prototype`.\n-        preExistingValues.forEach(([propName]) => delete (this as any)[propName]);\n-\n-        // Re-apply pre-existing values through the strategy.\n-        preExistingValues.forEach(([propName, value]) => strategy.setInputValue(propName, value));\n+        // Re-apply pre-existing input values (set as properties on the element) through the\n+        // strategy.\n+        inputs.forEach(({propName}) => {\n+          if (!this.hasOwnProperty(propName)) {\n+            // No pre-existing value for `propName`.\n+            return;\n+          }\n+\n+          // Delete the property from the instance and re-apply it through the strategy.\n+          const value = (this as any)[propName];\n+          delete (this as any)[propName];\n+          strategy.setInputValue(propName, value);\n+        });\n       }\n \n       return this._ngElementStrategy!;\n@@ -229,17 +230,8 @@ export function createCustomElement<P>(\n   }\n \n   // Add getters and setters to the prototype for each property input.\n-  defineInputGettersSetters(inputs, NgElementImpl.prototype);\n-\n-  return (NgElementImpl as any) as NgElementConstructor<P>;\n-}\n-\n-// Helpers\n-function defineInputGettersSetters(\n-    inputs: {propName: string, templateName: string}[], target: object): void {\n-  // Add getters and setters for each property input.\n   inputs.forEach(({propName}) => {\n-    Object.defineProperty(target, propName, {\n+    Object.defineProperty(NgElementImpl.prototype, propName, {\n       get(): any {\n         return this.ngElementStrategy.getInputValue(propName);\n       },\n@@ -250,4 +242,6 @@ function defineInputGettersSetters(\n       enumerable: true,\n     });\n   });\n+\n+  return (NgElementImpl as any) as NgElementConstructor<P>;\n }"
        }
    ],
    "stats": {
        "total": 38,
        "additions": 16,
        "deletions": 22
    }
}