{
    "author": "crisbeto",
    "message": "docs(core): add note about not mutating multi provider arrays (#37645)\n\nAdds a note to the provider docs that users shouldn't mutate an array that\nis returned from a `multi` provider, because it can cause unforeseen\nconsequences in other parts of the app.\n\nCloses #37481.\n\nPR Close #37645",
    "sha": "72f1eec3ad35e5d94331d94431b8437c1a102b2f",
    "files": [
        {
            "sha": "68fe995061c926ed9f51ebfed035f1b35f4b1f7e",
            "filename": "aio/content/guide/dependency-injection-providers.md",
            "status": "modified",
            "additions": 18,
            "deletions": 1,
            "changes": 19,
            "blob_url": "https://github.com/angular/angular/blob/72f1eec3ad35e5d94331d94431b8437c1a102b2f/aio%2Fcontent%2Fguide%2Fdependency-injection-providers.md",
            "raw_url": "https://github.com/angular/angular/raw/72f1eec3ad35e5d94331d94431b8437c1a102b2f/aio%2Fcontent%2Fguide%2Fdependency-injection-providers.md",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/aio%2Fcontent%2Fguide%2Fdependency-injection-providers.md?ref=72f1eec3ad35e5d94331d94431b8437c1a102b2f",
            "patch": "@@ -262,7 +262,7 @@ For example, when bootstrapping an application, you can register many initialize\n \n ```\n export const APP_TOKENS = [\n- { provide: PLATFORM_INITIALIZER, useFactory: platformInitialized, multi: true    },\n+ { provide: PLATFORM_INITIALIZER, useFactory: platformInitialized, multi: true },\n  { provide: APP_INITIALIZER, useFactory: delayBootstrapping, multi: true },\n  { provide: APP_BOOTSTRAP_LISTENER, useFactory: appBootstrapped, multi: true },\n ];\n@@ -284,6 +284,23 @@ Search for [Constants in API documentation](api?type=const) to find more built-i\n \n </div>\n \n+<div class=\"alert is-helpful\">\n+\n+Note that the reference to the array returned for a `multi` provider is shared between all the\n+places where the token is injected. We recommend avoiding mutations of the array (especially for\n+predefined tokens) as it may lead to unexpected behavior in other parts of the app that inject\n+the same token. You can prevent the value from being mutated by setting its type to `ReadonlyArray`.\n+\n+</div>\n+\n+You can use `ReadonlyArray` to type your `multi` provider, so TypeScript triggers an error in case\n+of unwanted array mutations:\n+\n+```\n+constructor(@Inject(MULTI_PROVIDER) multiProvider: ReadonlyArray<MultiProvider>) {\n+}\n+```\n+\n {@a tree-shakable-provider}\n {@a tree-shakable-providers}\n "
        }
    ],
    "stats": {
        "total": 19,
        "additions": 18,
        "deletions": 1
    }
}