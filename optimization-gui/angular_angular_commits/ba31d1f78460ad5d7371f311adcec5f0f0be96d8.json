{
    "author": "mgechev",
    "message": "refactor(devtools): use framework debugging APIs to extract metadata",
    "sha": "ba31d1f78460ad5d7371f311adcec5f0f0be96d8",
    "files": [
        {
            "sha": "c92b291994af6245d50dbb6bd8e078d87477e55c",
            "filename": "cypress/integration/node-search.e2e.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/cypress%2Fintegration%2Fnode-search.e2e.js",
            "raw_url": "https://github.com/angular/angular/raw/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/cypress%2Fintegration%2Fnode-search.e2e.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/cypress%2Fintegration%2Fnode-search.e2e.js?ref=ba31d1f78460ad5d7371f311adcec5f0f0be96d8",
            "patch": "@@ -72,7 +72,7 @@ describe('Search items in component tree', () => {\n     checkSearchedNodesLength('.selected', 1);\n \n     // should show correct buttons in breadcrumbs\n-    const amountOfBreadcrumbButtons = 7;\n+    const amountOfBreadcrumbButtons = 4;\n     const amountOfScrollButtons = 2;\n     cy.get('ng-breadcrumbs')\n       .find('button')"
        },
        {
            "sha": "39251d8f86d5487145aec8e1f4e9f7a72bd2038f",
            "filename": "cypress/integration/node-selection.e2e.js",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/cypress%2Fintegration%2Fnode-selection.e2e.js",
            "raw_url": "https://github.com/angular/angular/raw/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/cypress%2Fintegration%2Fnode-selection.e2e.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/cypress%2Fintegration%2Fnode-selection.e2e.js?ref=ba31d1f78460ad5d7371f311adcec5f0f0be96d8",
            "patch": "@@ -48,7 +48,7 @@ describe('node selection', () => {\n   describe('breadcrumb logic', () => {\n     it('should overflow when breadcrumb list is long enough', () => {\n       cy.get('.tree-wrapper')\n-        .find('.tree-node:contains(\"app-todo[TooltipDirective]\")')\n+        .find('.tree-node:contains(\"div[TooltipDirective]\")')\n         .last()\n         .click({ force: true })\n         .then(() => {\n@@ -63,7 +63,7 @@ describe('node selection', () => {\n \n     it('should scroll right when right scroll button is clicked', () => {\n       cy.get('.tree-wrapper')\n-        .find('.tree-node:contains(\"app-todo[TooltipDirective]\")')\n+        .find('.tree-node:contains(\"div[TooltipDirective]\")')\n         .last()\n         .click({ force: true })\n         .then(() => {\n@@ -79,15 +79,15 @@ describe('node selection', () => {\n                 .click()\n                 .wait(150) // wait for scroll animation to end\n                 .then(() => {\n-                  expect(scrollLeft()).to.eql(100);\n+                  expect(scrollLeft()).to.eql(15);\n                 });\n             });\n         });\n     });\n \n     it('should scroll left when left scroll button is clicked', () => {\n       cy.get('.tree-wrapper')\n-        .find('.tree-node:contains(\"app-todo[TooltipDirective]\")')\n+        .find('.tree-node:contains(\"div[TooltipDirective]\")')\n         .last()\n         .click({ force: true })\n         .then(() => {\n@@ -103,7 +103,7 @@ describe('node selection', () => {\n                 .click()\n                 .wait(150) // wait for scroll animation to end\n                 .then(() => {\n-                  expect(scrollLeft()).to.eql(100);\n+                  expect(scrollLeft()).to.eql(15);\n \n                   cy.get('ng-breadcrumbs')\n                     .find('.scroll-button')"
        },
        {
            "sha": "c7f7b1330a1a728afbf3e9ead9919bc3f55ed036",
            "filename": "cypress/integration/view-component-metadata.e2e.js",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/cypress%2Fintegration%2Fview-component-metadata.e2e.js",
            "raw_url": "https://github.com/angular/angular/raw/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/cypress%2Fintegration%2Fview-component-metadata.e2e.js",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/cypress%2Fintegration%2Fview-component-metadata.e2e.js?ref=ba31d1f78460ad5d7371f311adcec5f0f0be96d8",
            "patch": "@@ -20,7 +20,7 @@ describe('Viewing component metadata', () => {\n       cy.get('.meta-data-container')\n         .find('.mat-button')\n         .last()\n-        .should('have.text', ' Change Detection Strategy: On Push');\n+        .should('have.text', ' Change Detection Strategy: OnPush');\n     });\n   });\n "
        },
        {
            "sha": "86d627d826e7f5499e108288e071689e073a42b7",
            "filename": "package.json",
            "status": "modified",
            "additions": 0,
            "deletions": 1,
            "changes": 1,
            "blob_url": "https://github.com/angular/angular/blob/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/package.json",
            "raw_url": "https://github.com/angular/angular/raw/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/package.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/package.json?ref=ba31d1f78460ad5d7371f311adcec5f0f0be96d8",
            "patch": "@@ -13,7 +13,6 @@\n     \"lint\": \"ng lint\",\n     \"lint:fix\": \"ng lint --fix\",\n     \"e2e\": \"npm run cy:run\",\n-    \"e2e:watch\": \"npm run cy:run:watch\",\n     \"cy:verify\": \"$(npm bin)/cypress verify\",\n     \"cy:version\": \"$(npm bin)/cypress version\",\n     \"cy:run\": \"$(yarn bin)/cypress run\","
        },
        {
            "sha": "5e5532b3e04da9210cb4371eb2be8df2e7ba08af",
            "filename": "projects/ng-devtools-backend/src/lib/component-tree.ts",
            "status": "modified",
            "additions": 18,
            "deletions": 0,
            "changes": 18,
            "blob_url": "https://github.com/angular/angular/blob/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fcomponent-tree.ts",
            "raw_url": "https://github.com/angular/angular/raw/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fcomponent-tree.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fcomponent-tree.ts?ref=ba31d1f78460ad5d7371f311adcec5f0f0be96d8",
            "patch": "@@ -10,6 +10,7 @@ import {\n   UpdatedStateData,\n } from 'protocol';\n import { buildDirectiveTree, getLViewFromDirectiveOrElementInstance } from './directive-forest';\n+import { ChangeDetectionStrategy } from '@angular/core';\n \n const ngDebug = () => (window as any).ng;\n \n@@ -72,7 +73,24 @@ const enum DirectiveMetadataKey {\n   ON_PUSH = 'onPush',\n }\n \n+// Gets directive metadata. For newer versions of Angular (v12+) it uses\n+// the global `getDirectiveMetadata`. For prior versions of the framework\n+// the method directly interacts with the directive/component definition.\n export const getDirectiveMetadata = (dir: any): DirectiveMetadata => {\n+  const getDirectiveMetadata = (window as any).ng.getDirectiveMetadata;\n+  if (getDirectiveMetadata) {\n+    const metadata = getDirectiveMetadata(dir);\n+    if (metadata) {\n+      return {\n+        inputs: metadata.inputs,\n+        outputs: metadata.outputs,\n+        encapsulation: metadata.encapsulation,\n+        onPush: metadata.changeDetection === ChangeDetectionStrategy.OnPush,\n+      };\n+    }\n+  }\n+\n+  // Used in older Angular versions, prior to the introduction of `getDirectiveMetadata`.\n   const safelyGrabMetadata = (key: DirectiveMetadataKey) => {\n     try {\n       return dir.constructor.ɵcmp ? dir.constructor.ɵcmp[key] : dir.constructor.ɵdir[key];"
        },
        {
            "sha": "d6933373736b4beb147057b8531c154da4d0708e",
            "filename": "projects/ng-devtools-backend/src/lib/directive-forest/index.ts",
            "status": "modified",
            "additions": 5,
            "deletions": 5,
            "changes": 10,
            "blob_url": "https://github.com/angular/angular/blob/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Findex.ts",
            "raw_url": "https://github.com/angular/angular/raw/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Findex.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Findex.ts?ref=ba31d1f78460ad5d7371f311adcec5f0f0be96d8",
            "patch": "@@ -4,14 +4,14 @@ import { RTreeStrategy } from './render-tree';\n export { getLViewFromDirectiveOrElementInstance, getDirectiveHostElement, METADATA_PROPERTY_NAME } from './ltree';\n \n // The order of the strategies matters. Lower indices have higher priority.\n-const builders = [new RTreeStrategy(), new LTreeStrategy()];\n+const strategies = [new RTreeStrategy(), new LTreeStrategy()];\n \n let strategy: null | RTreeStrategy | LTreeStrategy = null;\n \n-const selectStrategy = (lView: any) => {\n-  for (const builder of builders) {\n-    if (builder.supports(lView)) {\n-      return builder;\n+const selectStrategy = (element: Element) => {\n+  for (const s of strategies) {\n+    if (s.supports(element)) {\n+      return s;\n     }\n   }\n   return null;"
        },
        {
            "sha": "339634277f4cf4a05a5d7f8a0351304a8f545a44",
            "filename": "projects/ng-devtools-backend/src/lib/directive-forest/render-tree.spec.ts",
            "status": "added",
            "additions": 77,
            "deletions": 0,
            "changes": 77,
            "blob_url": "https://github.com/angular/angular/blob/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Frender-tree.spec.ts",
            "raw_url": "https://github.com/angular/angular/raw/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Frender-tree.spec.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Frender-tree.spec.ts?ref=ba31d1f78460ad5d7371f311adcec5f0f0be96d8",
            "patch": "@@ -0,0 +1,77 @@\n+import { RTreeStrategy } from './render-tree';\n+\n+describe('render tree extraction', () => {\n+  let treeStrategy: RTreeStrategy;\n+  let directiveMap: Map<Node, any[]>;\n+  let componentMap: Map<Element, any>;\n+\n+  beforeEach(() => {\n+    treeStrategy = new RTreeStrategy();\n+    directiveMap = new Map();\n+    componentMap = new Map();\n+\n+    (window as any).ng = {\n+      getDirectiveMetadata(): void {},\n+      getComponent(element: Element): any {\n+        return componentMap.get(element);\n+      },\n+      getDirectives(node: Node): any {\n+        return directiveMap.get(node) || [];\n+      },\n+    };\n+  });\n+\n+  afterEach(() => delete (window as any).ng);\n+\n+  it('should detect Angular Ivy apps', () => {\n+    expect(treeStrategy.supports({})).toBeTrue();\n+  });\n+\n+  it('should fail with detection of non-Ivy apps', () => {\n+    delete (window as any).ng.getDirectiveMetadata;\n+    expect(treeStrategy.supports({})).toBeFalse();\n+  });\n+\n+  it('should extract render tree from an empty element', () => {\n+    expect(treeStrategy.build(document.createElement('div'))).toEqual([]);\n+  });\n+\n+  it('should extract trees without structural directives', () => {\n+    const appNode = document.createElement('app');\n+    const childNode = document.createElement('child');\n+    const childDirectiveNode = document.createElement('div');\n+    appNode.appendChild(childNode);\n+    appNode.appendChild(childDirectiveNode);\n+\n+    const appComponent: any = {};\n+    const childComponent: any = {};\n+    const childDirective: any = {};\n+    componentMap.set(appNode, appComponent);\n+    componentMap.set(childNode, childComponent);\n+    directiveMap.set(childDirectiveNode, [childDirective]);\n+\n+    const rtree = treeStrategy.build(appNode);\n+    expect(rtree.length).toBe(1);\n+    expect(rtree[0].children.length).toBe(2);\n+    expect(rtree[0].children[0].component?.instance).toBe(childComponent);\n+    expect(rtree[0].children[1].component).toBe(null);\n+    expect(rtree[0].children[1].directives[0].instance).toBe(childDirective);\n+  });\n+\n+  it('should skip nodes without directives', () => {\n+    const appNode = document.createElement('app');\n+    const childNode = document.createElement('div');\n+    const childComponentNode = document.createElement('child');\n+    appNode.appendChild(childNode);\n+    childNode.appendChild(childComponentNode);\n+\n+    const appComponent: any = {};\n+    const childComponent: any = {};\n+    componentMap.set(appNode, appComponent);\n+    componentMap.set(childComponentNode, childComponent);\n+\n+    const rtree = treeStrategy.build(appNode);\n+    expect(rtree[0].children.length).toBe(1);\n+    expect(rtree[0].children[0].children.length).toBe(0);\n+  });\n+});"
        },
        {
            "sha": "ec41fcf554d19c1780e667edb4df1da0efb6c570",
            "filename": "projects/ng-devtools-backend/src/lib/directive-forest/render-tree.ts",
            "status": "modified",
            "additions": 16,
            "deletions": 10,
            "changes": 26,
            "blob_url": "https://github.com/angular/angular/blob/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Frender-tree.ts",
            "raw_url": "https://github.com/angular/angular/raw/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Frender-tree.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fdirective-forest%2Frender-tree.ts?ref=ba31d1f78460ad5d7371f311adcec5f0f0be96d8",
            "patch": "@@ -1,12 +1,14 @@\n import { ComponentTreeNode } from '../component-tree';\n import { isCustomElement } from '../utils';\n \n-const extractViewTree = (node: Node | Element, result: ComponentTreeNode[] = []): ComponentTreeNode[] => {\n-  const getComponent = (window as any).ng.getComponent as (element: Element) => {};\n-  const getDirectives = (window as any).ng.getDirectives as (node: Node) => {}[];\n-\n-  const directives = getDirectives(node);\n-  if (!directives.length && !(node instanceof Element)) {\n+const extractViewTree = (\n+  domNode: Node | Element,\n+  result: ComponentTreeNode[],\n+  getComponent: (element: Element) => {},\n+  getDirectives: (node: Node) => {}[]\n+): ComponentTreeNode[] => {\n+  const directives = getDirectives(domNode);\n+  if (!directives.length && !(domNode instanceof Element)) {\n     return result;\n   }\n   const componentTreeNode: ComponentTreeNode = {\n@@ -21,7 +23,7 @@ const extractViewTree = (node: Node | Element, result: ComponentTreeNode[] = [])\n     element: node.nodeName.toLowerCase(),\n     nativeElement: node,\n   };\n-  if (!(node instanceof Element)) {\n+  if (!(domNode instanceof Element)) {\n     result.push(componentTreeNode);\n     return result;\n   }\n@@ -37,9 +39,11 @@ const extractViewTree = (node: Node | Element, result: ComponentTreeNode[] = [])\n     result.push(componentTreeNode);\n   }\n   if (componentTreeNode.component || componentTreeNode.directives.length) {\n-    node.childNodes.forEach((node) => extractViewTree(node, componentTreeNode.children));\n+    domNode.childNodes.forEach((node) =>\n+      extractViewTree(node, componentTreeNode.children, getComponent, getDirectives)\n+    );\n   } else {\n-    node.childNodes.forEach((node) => extractViewTree(node, result));\n+    domNode.childNodes.forEach((node) => extractViewTree(node, result, getComponent, getDirectives));\n   }\n   return result;\n };\n@@ -52,7 +56,9 @@ export class RTreeStrategy {\n   }\n \n   build(element: Element): ComponentTreeNode[] {\n-    const result = extractViewTree(element);\n+    const getComponent = (window as any).ng.getComponent as (element: Element) => {};\n+    const getDirectives = (window as any).ng.getDirectives as (node: Node) => {}[];\n+    const result = extractViewTree(element, [], getComponent, getDirectives);\n     return result;\n   }\n }"
        },
        {
            "sha": "7073d03ba8ed47e2de8f5a91330cbaa1ec85213c",
            "filename": "projects/ng-devtools-backend/src/lib/hooks/hooks.ts",
            "status": "modified",
            "additions": 4,
            "deletions": 1,
            "changes": 5,
            "blob_url": "https://github.com/angular/angular/blob/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2Fhooks.ts",
            "raw_url": "https://github.com/angular/angular/raw/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2Fhooks.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Fhooks%2Fhooks.ts?ref=ba31d1f78460ad5d7371f311adcec5f0f0be96d8",
            "patch": "@@ -1,6 +1,6 @@\n import { ComponentTreeNode } from './../component-tree';\n import { ElementPosition, LifecycleProfile } from 'protocol';\n-import { componentMetadata, runOutsideAngular } from '../utils';\n+import { runOutsideAngular } from '../utils';\n import { IdentityTracker, IndexedNode } from './identity-tracker';\n import {\n   getLViewFromDirectiveOrElementInstance,\n@@ -9,6 +9,9 @@ import {\n } from '../directive-forest';\n import { Subject } from 'rxjs';\n \n+// Only used in older Angular versions prior to the introduction of `getDirectiveMetadata`\n+const componentMetadata = (instance: any) => instance?.constructor?.ɵcmp;\n+\n export type CreationHook = (\n   componentOrDirective: any,\n   node: Node,"
        },
        {
            "sha": "9d1e77e4fb07a7d141dab5d31f3b9efa887f218d",
            "filename": "projects/ng-devtools-backend/src/lib/utils.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Futils.ts",
            "raw_url": "https://github.com/angular/angular/raw/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Futils.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools-backend%2Fsrc%2Flib%2Futils.ts?ref=ba31d1f78460ad5d7371f311adcec5f0f0be96d8",
            "patch": "@@ -11,8 +11,6 @@ export const runOutsideAngular = (f: () => any): void => {\n   w.Zone.current._parent.run(f);\n };\n \n-export const componentMetadata = (instance: any) => instance?.constructor?.ɵcmp;\n-\n export const isCustomElement = (node: Node) => {\n   if (typeof customElements === 'undefined') {\n     return false;"
        },
        {
            "sha": "3222560bbfc46ea4a733d5645e239a81146529d1",
            "filename": "projects/ng-devtools/src/lib/devtools-tabs/directive-explorer/property-tab/property-tab-header/component-metadata/component-metadata.component.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdirective-explorer%2Fproperty-tab%2Fproperty-tab-header%2Fcomponent-metadata%2Fcomponent-metadata.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdirective-explorer%2Fproperty-tab%2Fproperty-tab-header%2Fcomponent-metadata%2Fcomponent-metadata.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fng-devtools%2Fsrc%2Flib%2Fdevtools-tabs%2Fdirective-explorer%2Fproperty-tab%2Fproperty-tab-header%2Fcomponent-metadata%2Fcomponent-metadata.component.ts?ref=ba31d1f78460ad5d7371f311adcec5f0f0be96d8",
            "patch": "@@ -32,6 +32,6 @@ export class ComponentMetadataComponent {\n \n   get changeDetectionStrategy(): string | undefined {\n     const onPush = this?.controller?.directiveHasOnPushStrategy;\n-    return onPush ? 'On Push' : onPush !== undefined ? 'Default' : undefined;\n+    return onPush ? 'OnPush' : onPush !== undefined ? 'Default' : undefined;\n   }\n }"
        },
        {
            "sha": "183e74feb342fbf83cf3781fc0462e94a7ae86c0",
            "filename": "projects/shell-adventure/src/index.html",
            "status": "removed",
            "additions": 0,
            "deletions": 14,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/ee8b53bed542b009f5d5d68199d9f574300d2542/projects%2Fshell-adventure%2Fsrc%2Findex.html",
            "raw_url": "https://github.com/angular/angular/raw/ee8b53bed542b009f5d5d68199d9f574300d2542/projects%2Fshell-adventure%2Fsrc%2Findex.html",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/projects%2Fshell-adventure%2Fsrc%2Findex.html?ref=ee8b53bed542b009f5d5d68199d9f574300d2542",
            "patch": "@@ -1,14 +0,0 @@\n-<!DOCTYPE html>\n-<html lang=\"en\">\n-  <head>\n-    <meta charset=\"utf-8\" />\n-    <title>ShellAdventure</title>\n-    <base href=\"/\" />\n-    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n-    <link rel=\"icon\" type=\"image/x-icon\" href=\"favicon.ico\" />\n-  </head>\n-  <body>\n-    <app-root></app-root>\n-    <iframe></iframe>\n-  </body>\n-</html>"
        },
        {
            "sha": "36cc4c6bd2ec5b4458853c9cea374130d468dede",
            "filename": "src/app/demo-app/demo-app.component.html",
            "status": "modified",
            "additions": 1,
            "deletions": 13,
            "changes": 14,
            "blob_url": "https://github.com/angular/angular/blob/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/src%2Fapp%2Fdemo-app%2Fdemo-app.component.html",
            "raw_url": "https://github.com/angular/angular/raw/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/src%2Fapp%2Fdemo-app%2Fdemo-app.component.html",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/src%2Fapp%2Fdemo-app%2Fdemo-app.component.html?ref=ba31d1f78460ad5d7371f311adcec5f0f0be96d8",
            "patch": "@@ -1,16 +1,4 @@\n <router-outlet></router-outlet>\n <app-zippy [title]=\"getTitle()\">This is my content</app-zippy>\n-<app-heavy>\n-  <button mat-button>Button</button>\n-</app-heavy>\n+<app-heavy></app-heavy>\n <div #elementReference>HTMLElement</div>\n-\n-<h2>The portal outlet is below:</h2>\n-<div class=\"example-portal-outlet\">\n-  <ng-template [cdkPortalOutlet]=\"selectedPortal\"></ng-template>\n-</div>\n-<ng-template #templatePortalContent>Hello, this is a template portal</ng-template>\n-\n-<button (click)=\"selectedPortal = componentPortal\">Render component portal</button>\n-\n-<div #domPortalContent>Hello, this is a DOM portal</div>"
        },
        {
            "sha": "7074c6761a16c1734e731bfc31f023e0079b1729",
            "filename": "src/app/demo-app/demo-app.component.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 24,
            "changes": 25,
            "blob_url": "https://github.com/angular/angular/blob/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/src%2Fapp%2Fdemo-app%2Fdemo-app.component.ts",
            "raw_url": "https://github.com/angular/angular/raw/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/src%2Fapp%2Fdemo-app%2Fdemo-app.component.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/src%2Fapp%2Fdemo-app%2Fdemo-app.component.ts?ref=ba31d1f78460ad5d7371f311adcec5f0f0be96d8",
            "patch": "@@ -1,5 +1,4 @@\n-import { ComponentPortal, DomPortal, Portal, TemplatePortal } from '@angular/cdk/portal';\n-import { Component, ElementRef, TemplateRef, ViewChild, ViewContainerRef, ViewEncapsulation } from '@angular/core';\n+import { Component, ElementRef, ViewChild, ViewEncapsulation } from '@angular/core';\n import { ZippyComponent } from './zippy/zippy.component';\n \n @Component({\n@@ -17,26 +16,4 @@ export class DemoAppComponent {\n     }\n     return '▼ Click to collapse';\n   }\n-\n-  @ViewChild('templatePortalContent') templatePortalContent: TemplateRef<unknown>;\n-  @ViewChild('domPortalContent') domPortalContent: ElementRef<HTMLElement>;\n-\n-  selectedPortal: Portal<any>;\n-  componentPortal: ComponentPortal<ComponentPortalExample>;\n-  templatePortal: TemplatePortal<any>;\n-  domPortal: DomPortal<any>;\n-\n-  constructor(private _viewContainerRef: ViewContainerRef) {}\n-\n-  ngAfterViewInit() {\n-    this.componentPortal = new ComponentPortal(ComponentPortalExample);\n-    this.templatePortal = new TemplatePortal(this.templatePortalContent, this._viewContainerRef);\n-    this.domPortal = new DomPortal(this.domPortalContent);\n-  }\n }\n-\n-@Component({\n-  selector: 'component-portal-example',\n-  template: 'Hello, this is a component portal',\n-})\n-export class ComponentPortalExample {}"
        },
        {
            "sha": "fca3b212c901cbc4d3503d9e0e858d9f14638887",
            "filename": "src/app/demo-app/demo-app.module.ts",
            "status": "modified",
            "additions": 0,
            "deletions": 4,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/src%2Fapp%2Fdemo-app%2Fdemo-app.module.ts",
            "raw_url": "https://github.com/angular/angular/raw/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/src%2Fapp%2Fdemo-app%2Fdemo-app.module.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/src%2Fapp%2Fdemo-app%2Fdemo-app.module.ts?ref=ba31d1f78460ad5d7371f311adcec5f0f0be96d8",
            "patch": "@@ -7,16 +7,12 @@ import { ZippyComponent } from './zippy/zippy.component';\n import { ZoneUnawareIFrameMessageBus } from 'src/zone-unaware-iframe-message-bus';\n import { HeavyComponent } from './heavy/heavy.component';\n import { createCustomElement } from '@angular/elements';\n-import { MatButtonModule } from '@angular/material/button';\n-import { PortalModule } from '@angular/cdk/portal';\n \n @NgModule({\n   declarations: [DemoAppComponent, HeavyComponent],\n   schemas: [CUSTOM_ELEMENTS_SCHEMA],\n   exports: [DemoAppComponent],\n   imports: [\n-    PortalModule,\n-    MatButtonModule,\n     RouterModule.forChild([\n       {\n         path: '',"
        },
        {
            "sha": "374ab654e895937ee357b9405de5d614ccaba4a0",
            "filename": "src/app/demo-app/heavy/heavy.component.html",
            "status": "modified",
            "additions": 0,
            "deletions": 2,
            "changes": 2,
            "blob_url": "https://github.com/angular/angular/blob/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/src%2Fapp%2Fdemo-app%2Fheavy%2Fheavy.component.html",
            "raw_url": "https://github.com/angular/angular/raw/ba31d1f78460ad5d7371f311adcec5f0f0be96d8/src%2Fapp%2Fdemo-app%2Fheavy%2Fheavy.component.html",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/src%2Fapp%2Fdemo-app%2Fheavy%2Fheavy.component.html?ref=ba31d1f78460ad5d7371f311adcec5f0f0be96d8",
            "patch": "@@ -1,3 +1 @@\n <h1>{{ calculate() }}</h1>\n-\n-<ng-content></ng-content>"
        }
    ],
    "stats": {
        "total": 214,
        "additions": 130,
        "deletions": 84
    }
}