{
    "author": "mhevery",
    "message": "refactor(core): Remove circular dependency on `render3` JIT and ViewEngine (#39621)\n\nJIT needs to identify which type is `ChangeDetectorRef`. It was doing so\nby importing `ChangeDetectorRef` and than comparing the types. This creates\ncircular dependency as well as prevents tree shaking. The new solution is\nto brand the class with `__ChangeDetectorRef__` so that it can be identified\nwithout creating circular dependency.\n\nPR Close #39621",
    "sha": "1ac68e3f2b22bd85e9a4567c50ab9273773aa4f9",
    "files": [
        {
            "sha": "8e8fd1438597886cc57f60282d98635a9517c368",
            "filename": "goldens/circular-deps/packages.json",
            "status": "modified",
            "additions": 226,
            "deletions": 145,
            "changes": 371,
            "blob_url": "https://github.com/angular/angular/blob/1ac68e3f2b22bd85e9a4567c50ab9273773aa4f9/goldens%2Fcircular-deps%2Fpackages.json",
            "raw_url": "https://github.com/angular/angular/raw/1ac68e3f2b22bd85e9a4567c50ab9273773aa4f9/goldens%2Fcircular-deps%2Fpackages.json",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/goldens%2Fcircular-deps%2Fpackages.json?ref=1ac68e3f2b22bd85e9a4567c50ab9273773aa4f9",
            "patch": "@@ -112,205 +112,274 @@\n     \"packages/compiler/src/render3/view/styling_builder.ts\",\n     \"packages/compiler/src/render3/view/template.ts\"\n   ],\n-  [\n-    \"packages/core/src/application_init.ts\",\n-    \"packages/core/src/di.ts\",\n-    \"packages/core/src/di/index.ts\",\n-    \"packages/core/src/di/injectable.ts\",\n-    \"packages/core/src/di/jit/injectable.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n-    \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\",\n-    \"packages/core/src/application_ref.ts\"\n-  ],\n   [\n     \"packages/core/src/application_ref.ts\",\n     \"packages/core/src/application_tokens.ts\",\n-    \"packages/core/src/di.ts\",\n-    \"packages/core/src/di/index.ts\",\n-    \"packages/core/src/di/injectable.ts\",\n-    \"packages/core/src/di/jit/injectable.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/application_tokens.ts\",\n+    \"packages/core/src/error_handler.ts\",\n+    \"packages/core/src/errors.ts\",\n+    \"packages/core/src/view/types.ts\",\n     \"packages/core/src/linker/component_factory.ts\",\n     \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/application_tokens.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n     \"packages/core/src/linker/component_factory.ts\",\n     \"packages/core/src/change_detection/change_detection.ts\",\n-    \"packages/core/src/change_detection/differs/default_keyvalue_differ.ts\",\n-    \"packages/core/src/change_detection/differs/keyvalue_differs.ts\",\n-    \"packages/core/src/di.ts\",\n-    \"packages/core/src/di/index.ts\",\n-    \"packages/core/src/di/injectable.ts\",\n-    \"packages/core/src/di/jit/injectable.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/application_tokens.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/metadata.ts\",\n+    \"packages/core/src/metadata/directives.ts\",\n+    \"packages/core/src/render3/jit/directive.ts\",\n+    \"packages/core/src/render3/jit/environment.ts\",\n+    \"packages/core/src/render3/index.ts\",\n+    \"packages/core/src/render3/component.ts\",\n+    \"packages/core/src/render3/instructions/shared.ts\",\n+    \"packages/core/src/error_handler.ts\",\n+    \"packages/core/src/errors.ts\",\n+    \"packages/core/src/view/types.ts\",\n     \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/linker/view_ref.ts\"\n+    \"packages/core/src/change_detection/change_detection.ts\",\n+    \"packages/core/src/change_detection/change_detector_ref.ts\",\n+    \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/application_tokens.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/linker/view_ref.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/console.ts\",\n-    \"packages/core/src/di.ts\",\n-    \"packages/core/src/di/index.ts\",\n-    \"packages/core/src/di/injectable.ts\",\n-    \"packages/core/src/di/jit/injectable.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/linker/component_factory_resolver.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/di/injectable.ts\",\n-    \"packages/core/src/di/jit/injectable.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/render3/component.ts\",\n+    \"packages/core/src/render3/instructions/shared.ts\",\n     \"packages/core/src/error_handler.ts\",\n     \"packages/core/src/errors.ts\",\n     \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/di.ts\",\n-    \"packages/core/src/di/index.ts\",\n-    \"packages/core/src/di/injectable.ts\",\n-    \"packages/core/src/di/jit/injectable.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/render3/instructions/shared.ts\",\n     \"packages/core/src/error_handler.ts\",\n     \"packages/core/src/errors.ts\",\n     \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/template_ref.ts\",\n-    \"packages/core/src/render3/instructions/shared.ts\",\n-    \"packages/core/src/di.ts\",\n-    \"packages/core/src/di/index.ts\",\n-    \"packages/core/src/di/injectable.ts\",\n-    \"packages/core/src/di/jit/injectable.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/error_handler.ts\",\n-    \"packages/core/src/errors.ts\",\n-    \"packages/core/src/view/types.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/render3/view_ref.ts\"\n+  ],\n+  [\n+    \"packages/core/src/application_ref.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/view/provider.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n+    \"packages/core/src/change_detection/change_detector_ref.ts\",\n+    \"packages/core/src/render3/view_ref.ts\"\n+  ],\n+  [\n+    \"packages/core/src/application_ref.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/view/provider.ts\",\n     \"packages/core/src/linker/template_ref.ts\",\n-    \"packages/core/src/render3/instructions/shared.ts\",\n-    \"packages/core/src/render3/instructions/lview_debug.ts\",\n-    \"packages/core/src/core.ts\",\n-    \"packages/core/src/metadata.ts\",\n-    \"packages/core/src/di.ts\",\n-    \"packages/core/src/di/index.ts\",\n-    \"packages/core/src/di/injectable.ts\",\n-    \"packages/core/src/di/jit/injectable.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n+    \"packages/core/src/linker/view_ref.ts\"\n+  ],\n+  [\n+    \"packages/core/src/application_ref.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/view/provider.ts\",\n+    \"packages/core/src/linker/template_ref.ts\",\n+    \"packages/core/src/linker/view_ref.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/view/provider.ts\",\n+    \"packages/core/src/linker/template_ref.ts\",\n+    \"packages/core/src/render3/instructions/shared.ts\",\n     \"packages/core/src/error_handler.ts\",\n     \"packages/core/src/errors.ts\",\n     \"packages/core/src/view/types.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n+    \"packages/core/src/change_detection/change_detector_ref.ts\",\n+    \"packages/core/src/render3/view_ref.ts\"\n+  ],\n+  [\n+    \"packages/core/src/application_ref.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/view/provider.ts\",\n     \"packages/core/src/linker/template_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/view/provider.ts\",\n+    \"packages/core/src/linker/view_container_ref.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n+    \"packages/core/src/change_detection/change_detector_ref.ts\",\n+    \"packages/core/src/render3/view_ref.ts\"\n+  ],\n+  [\n+    \"packages/core/src/application_ref.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/view/provider.ts\",\n+    \"packages/core/src/linker/view_container_ref.ts\",\n+    \"packages/core/src/render3/instructions/shared.ts\",\n     \"packages/core/src/error_handler.ts\",\n     \"packages/core/src/errors.ts\",\n     \"packages/core/src/view/types.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n+    \"packages/core/src/change_detection/change_detector_ref.ts\",\n+    \"packages/core/src/render3/view_ref.ts\"\n+  ],\n+  [\n+    \"packages/core/src/application_ref.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/view/provider.ts\",\n     \"packages/core/src/linker/view_container_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n     \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/di/injectable.ts\",\n-    \"packages/core/src/di/jit/injectable.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/view/provider.ts\",\n+    \"packages/core/src/view/refs.ts\"\n+  ],\n+  [\n+    \"packages/core/src/application_ref.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/view/provider.ts\",\n+    \"packages/core/src/view/refs.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n     \"packages/core/src/linker/compiler.ts\",\n-    \"packages/core/src/metadata.ts\",\n-    \"packages/core/src/di.ts\",\n-    \"packages/core/src/di/index.ts\",\n-    \"packages/core/src/di/injectable.ts\",\n-    \"packages/core/src/di/jit/injectable.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/view/provider.ts\",\n+    \"packages/core/src/view/refs.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n     \"packages/core/src/linker/compiler.ts\",\n     \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/view/provider.ts\",\n+    \"packages/core/src/view/refs.ts\",\n+    \"packages/core/src/view/ng_module.ts\",\n+    \"packages/core/src/view/types.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n     \"packages/core/src/linker/compiler.ts\",\n     \"packages/core/src/render3/component_ref.ts\",\n-    \"packages/core/src/render3/component.ts\",\n-    \"packages/core/src/core.ts\",\n-    \"packages/core/src/metadata.ts\",\n-    \"packages/core/src/di.ts\",\n-    \"packages/core/src/di/index.ts\",\n-    \"packages/core/src/di/injectable.ts\",\n-    \"packages/core/src/di/jit/injectable.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n+    \"packages/core/src/view/provider.ts\",\n+    \"packages/core/src/view/refs.ts\",\n+    \"packages/core/src/view/ng_module.ts\",\n+    \"packages/core/src/view/util.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n     \"packages/core/src/linker/compiler.ts\",\n     \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/view/provider.ts\",\n+    \"packages/core/src/view/refs.ts\",\n+    \"packages/core/src/view/ng_module.ts\",\n+    \"packages/core/src/view/util.ts\",\n+    \"packages/core/src/view/errors.ts\",\n+    \"packages/core/src/errors.ts\",\n+    \"packages/core/src/view/types.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n+    \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n     \"packages/core/src/linker/compiler.ts\",\n     \"packages/core/src/render3/component_ref.ts\",\n     \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/di.ts\",\n-    \"packages/core/src/di/index.ts\",\n-    \"packages/core/src/di/injectable.ts\",\n-    \"packages/core/src/di/jit/injectable.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n+    \"packages/core/src/view/refs.ts\",\n+    \"packages/core/src/view/ng_module.ts\",\n+    \"packages/core/src/view/util.ts\",\n+    \"packages/core/src/view/errors.ts\",\n+    \"packages/core/src/view/types.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n@@ -319,88 +388,103 @@\n     \"packages/core/src/linker/compiler.ts\",\n     \"packages/core/src/render3/component_ref.ts\",\n     \"packages/core/src/view/provider.ts\",\n-    \"packages/core/src/view/refs.ts\"\n+    \"packages/core/src/view/refs.ts\",\n+    \"packages/core/src/view/ng_module.ts\",\n+    \"packages/core/src/view/util.ts\",\n+    \"packages/core/src/view/types.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n+    \"packages/core/src/change_detection/change_detector_ref.ts\",\n+    \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/metadata/resource_loading.ts\",\n-    \"packages/core/src/metadata/directives.ts\",\n-    \"packages/core/src/di.ts\",\n-    \"packages/core/src/di/index.ts\",\n-    \"packages/core/src/di/injectable.ts\",\n-    \"packages/core/src/di/jit/injectable.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/view/provider.ts\",\n+    \"packages/core/src/view/refs.ts\",\n+    \"packages/core/src/view/types.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/metadata/resource_loading.ts\",\n-    \"packages/core/src/metadata/directives.ts\",\n-    \"packages/core/src/render3/jit/directive.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/view/provider.ts\",\n+    \"packages/core/src/view/refs.ts\",\n+    \"packages/core/src/view/view_attach.ts\",\n+    \"packages/core/src/view/types.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/metadata/resource_loading.ts\",\n-    \"packages/core/src/metadata/directives.ts\",\n-    \"packages/core/src/render3/jit/directive.ts\",\n-    \"packages/core/src/render3/jit/environment.ts\",\n-    \"packages/core/src/render3/index.ts\",\n-    \"packages/core/src/render3/features/providers_feature.ts\",\n-    \"packages/core/src/render3/di_setup.ts\",\n-    \"packages/core/src/render3/instructions/all.ts\",\n-    \"packages/core/src/render3/instructions/di.ts\",\n-    \"packages/core/src/di.ts\",\n-    \"packages/core/src/di/index.ts\",\n-    \"packages/core/src/di/injectable.ts\",\n-    \"packages/core/src/di/jit/injectable.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n+    \"packages/core/src/linker/compiler.ts\",\n+    \"packages/core/src/render3/component_ref.ts\",\n+    \"packages/core/src/view/provider.ts\",\n+    \"packages/core/src/view/types.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/metadata/resource_loading.ts\",\n-    \"packages/core/src/metadata/directives.ts\",\n-    \"packages/core/src/render3/jit/directive.ts\",\n-    \"packages/core/src/render3/jit/environment.ts\",\n-    \"packages/core/src/render3/index.ts\",\n-    \"packages/core/src/render3/view_engine_compatibility_prebound.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/metadata/resource_loading.ts\",\n-    \"packages/core/src/metadata/directives.ts\",\n-    \"packages/core/src/render3/jit/directive.ts\",\n-    \"packages/core/src/render3/jit/module.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n+    \"packages/core/src/render3/util/global_utils.ts\",\n+    \"packages/core/src/render3/util/change_detection_utils.ts\",\n+    \"packages/core/src/render3/instructions/change_detection.ts\",\n+    \"packages/core/src/render3/instructions/shared.ts\",\n+    \"packages/core/src/error_handler.ts\",\n+    \"packages/core/src/errors.ts\",\n+    \"packages/core/src/view/types.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n     \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/metadata/resource_loading.ts\",\n+    \"packages/core/src/render3/util/global_utils.ts\",\n+    \"packages/core/src/render3/util/change_detection_utils.ts\",\n+    \"packages/core/src/render3/util/discovery_utils.ts\",\n+    \"packages/core/src/render3/instructions/lview_debug.ts\",\n+    \"packages/core/src/core.ts\",\n+    \"packages/core/src/metadata.ts\",\n     \"packages/core/src/metadata/directives.ts\",\n-    \"packages/core/src/render3/jit/pipe.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n+    \"packages/core/src/render3/jit/directive.ts\",\n+    \"packages/core/src/render3/jit/environment.ts\",\n+    \"packages/core/src/render3/index.ts\",\n+    \"packages/core/src/render3/component.ts\",\n+    \"packages/core/src/render3/instructions/shared.ts\",\n+    \"packages/core/src/error_handler.ts\",\n+    \"packages/core/src/errors.ts\",\n+    \"packages/core/src/view/types.ts\",\n+    \"packages/core/src/linker/component_factory.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n     \"packages/core/src/render3/view_ref.ts\"\n   ],\n   [\n-    \"packages/core/src/application_ref.ts\",\n-    \"packages/core/src/testability/testability.ts\",\n-    \"packages/core/src/di.ts\",\n-    \"packages/core/src/di/index.ts\",\n-    \"packages/core/src/di/injectable.ts\",\n-    \"packages/core/src/di/jit/injectable.ts\",\n-    \"packages/core/src/di/jit/util.ts\",\n+    \"packages/core/src/change_detection/change_detection.ts\",\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n-    \"packages/core/src/render3/view_ref.ts\"\n+    \"packages/core/src/render3/view_ref.ts\",\n+    \"packages/core/src/render3/instructions/shared.ts\",\n+    \"packages/core/src/error_handler.ts\",\n+    \"packages/core/src/errors.ts\",\n+    \"packages/core/src/view/types.ts\",\n+    \"packages/core/src/linker/component_factory.ts\"\n   ],\n   [\n     \"packages/core/src/change_detection/change_detector_ref.ts\",\n@@ -428,6 +512,15 @@\n     \"packages/core/src/render3/definition.ts\",\n     \"packages/core/src/render3/interfaces/definition.ts\"\n   ],\n+  [\n+    \"packages/core/src/core.ts\",\n+    \"packages/core/src/metadata.ts\",\n+    \"packages/core/src/metadata/directives.ts\",\n+    \"packages/core/src/render3/jit/directive.ts\",\n+    \"packages/core/src/render3/jit/environment.ts\",\n+    \"packages/core/src/render3/index.ts\",\n+    \"packages/core/src/render3/component.ts\"\n+  ],\n   [\n     \"packages/core/src/debug/debug_node.ts\",\n     \"packages/core/src/view/index.ts\",\n@@ -510,18 +603,6 @@\n     \"packages/core/src/errors.ts\",\n     \"packages/core/src/view/types.ts\"\n   ],\n-  [\n-    \"packages/core/src/error_handler.ts\",\n-    \"packages/core/src/errors.ts\",\n-    \"packages/core/src/view/types.ts\",\n-    \"packages/core/src/linker/template_ref.ts\",\n-    \"packages/core/src/render3/instructions/shared.ts\"\n-  ],\n-  [\n-    \"packages/core/src/linker/component_factory_resolver.ts\",\n-    \"packages/core/src/linker/component_factory.ts\",\n-    \"packages/core/src/linker/ng_module_factory.ts\"\n-  ],\n   [\n     \"packages/core/src/linker/component_factory_resolver.ts\",\n     \"packages/core/src/linker/ng_module_factory.ts\""
        },
        {
            "sha": "df6bf9966b9aed18ed3217870de366e191d571b9",
            "filename": "packages/compiler/src/compiler_facade_interface.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/1ac68e3f2b22bd85e9a4567c50ab9273773aa4f9/packages%2Fcompiler%2Fsrc%2Fcompiler_facade_interface.ts",
            "raw_url": "https://github.com/angular/angular/raw/1ac68e3f2b22bd85e9a4567c50ab9273773aa4f9/packages%2Fcompiler%2Fsrc%2Fcompiler_facade_interface.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcompiler%2Fsrc%2Fcompiler_facade_interface.ts?ref=1ac68e3f2b22bd85e9a4567c50ab9273773aa4f9",
            "patch": "@@ -12,8 +12,8 @@\n  * for late binding of `@angular/compiler` for JIT purposes.\n  *\n  * This file has two copies. Please ensure that they are in sync:\n- *  - packages/compiler/src/compiler_facade_interface.ts             (master)\n- *  - packages/core/src/compiler/compiler_facade_interface.ts     (copy)\n+ *  - packages/compiler/src/compiler_facade_interface.ts          (main)\n+ *  - packages/core/src/compiler/compiler_facade_interface.ts     (replica)\n  *\n  * Please ensure that the two files are in sync using this command:\n  * ```"
        },
        {
            "sha": "d0e8aa46ffc4851147decfd0b6d5e66bbd535e58",
            "filename": "packages/core/src/change_detection/change_detector_ref.ts",
            "status": "modified",
            "additions": 8,
            "deletions": 0,
            "changes": 8,
            "blob_url": "https://github.com/angular/angular/blob/1ac68e3f2b22bd85e9a4567c50ab9273773aa4f9/packages%2Fcore%2Fsrc%2Fchange_detection%2Fchange_detector_ref.ts",
            "raw_url": "https://github.com/angular/angular/raw/1ac68e3f2b22bd85e9a4567c50ab9273773aa4f9/packages%2Fcore%2Fsrc%2Fchange_detection%2Fchange_detector_ref.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fchange_detection%2Fchange_detector_ref.ts?ref=1ac68e3f2b22bd85e9a4567c50ab9273773aa4f9",
            "patch": "@@ -126,6 +126,14 @@ export abstract class ChangeDetectorRef {\n    * @nocollapse\n    */\n   static __NG_ELEMENT_ID__: () => ChangeDetectorRef = SWITCH_CHANGE_DETECTOR_REF_FACTORY;\n+\n+  /**\n+   * This marker is need so that the JIT compiler can correctly identify this class as special.\n+   *\n+   * @internal\n+   * @nocollapse\n+   */\n+  static __ChangeDetectorRef__ = true;\n }\n \n "
        },
        {
            "sha": "df6bf9966b9aed18ed3217870de366e191d571b9",
            "filename": "packages/core/src/compiler/compiler_facade_interface.ts",
            "status": "modified",
            "additions": 2,
            "deletions": 2,
            "changes": 4,
            "blob_url": "https://github.com/angular/angular/blob/1ac68e3f2b22bd85e9a4567c50ab9273773aa4f9/packages%2Fcore%2Fsrc%2Fcompiler%2Fcompiler_facade_interface.ts",
            "raw_url": "https://github.com/angular/angular/raw/1ac68e3f2b22bd85e9a4567c50ab9273773aa4f9/packages%2Fcore%2Fsrc%2Fcompiler%2Fcompiler_facade_interface.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fcompiler%2Fcompiler_facade_interface.ts?ref=1ac68e3f2b22bd85e9a4567c50ab9273773aa4f9",
            "patch": "@@ -12,8 +12,8 @@\n  * for late binding of `@angular/compiler` for JIT purposes.\n  *\n  * This file has two copies. Please ensure that they are in sync:\n- *  - packages/compiler/src/compiler_facade_interface.ts             (master)\n- *  - packages/core/src/compiler/compiler_facade_interface.ts     (copy)\n+ *  - packages/compiler/src/compiler_facade_interface.ts          (main)\n+ *  - packages/core/src/compiler/compiler_facade_interface.ts     (replica)\n  *\n  * Please ensure that the two files are in sync using this command:\n  * ```"
        },
        {
            "sha": "0f4da27806ad12b680a482486ae50fcf0d7eed79",
            "filename": "packages/core/src/di/jit/util.ts",
            "status": "modified",
            "additions": 1,
            "deletions": 2,
            "changes": 3,
            "blob_url": "https://github.com/angular/angular/blob/1ac68e3f2b22bd85e9a4567c50ab9273773aa4f9/packages%2Fcore%2Fsrc%2Fdi%2Fjit%2Futil.ts",
            "raw_url": "https://github.com/angular/angular/raw/1ac68e3f2b22bd85e9a4567c50ab9273773aa4f9/packages%2Fcore%2Fsrc%2Fdi%2Fjit%2Futil.ts",
            "contents_url": "https://api.github.com/repos/angular/angular/contents/packages%2Fcore%2Fsrc%2Fdi%2Fjit%2Futil.ts?ref=1ac68e3f2b22bd85e9a4567c50ab9273773aa4f9",
            "patch": "@@ -6,7 +6,6 @@\n  * found in the LICENSE file at https://angular.io/license\n  */\n \n-import {ChangeDetectorRef} from '../../change_detection/change_detector_ref';\n import {CompilerFacade, getCompilerFacade, R3DependencyMetadataFacade, R3ResolvedDependencyType} from '../../compiler/compiler_facade';\n import {Type} from '../../interface/type';\n import {ReflectionCapabilities} from '../../reflection/reflection_capabilities';\n@@ -68,7 +67,7 @@ function reflectDependency(compiler: CompilerFacade, dep: any|any[]): R3Dependen\n         }\n         meta.token = param.attributeName;\n         meta.resolved = compiler.R3ResolvedDependencyType.Attribute;\n-      } else if (param === ChangeDetectorRef) {\n+      } else if (param.__ChangeDetectorRef__ === true) {\n         meta.token = param;\n         meta.resolved = compiler.R3ResolvedDependencyType.ChangeDetectorRef;\n       } else {"
        }
    ],
    "stats": {
        "total": 390,
        "additions": 239,
        "deletions": 151
    }
}